(this.webpackJsonp=this.webpackJsonp||[]).push([[32],{"0JQy5Tyq":function(e,t){var r="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",s="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+n+"|"+a+")"+"?",c="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[s,o,i].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),l="(?:"+[s+n+"?",n,o,i,r].join("|")+")",d=RegExp(a+"(?="+a+")|"+l+c,"g");e.exports=function(e){return e.match(d)||[]}},"0ZTewsnh":function(e,t,r){var n=r("wy8aJQ84"),a=r("quyAPdGo"),s=r("Em2tpGhf"),o=r("dt0z8V4T");e.exports=function(e){return function(t){t=o(t);var r=a(t)?s(t):void 0,i=r?r[0]:t.charAt(0),u=r?n(r,1).join(""):t.slice(1);return i[e]()+u}}},"3Lk1vxQq":function(e,t,r){"use strict";r.r(t);var n=r("mrSGxOB2"),a=r("q1tIBJhx"),s=r("a+N5u/Cl"),o=r("tLZJUYWX"),i=r.n(o),u=r("sa1Ed382"),c=r("GESwhXbR"),l=r("oRqJmROU"),d=r("77NnVLwu"),p=r.n(d),f=r("oEzVJ1gN"),h=r.n(f),g=r("OcUPLOSr"),b=r("ZXOnUJpY"),k=r("BSQrDwTo"),T=r("EiUFTky8"),S=r("tM7ZA2EX"),v=r("zH+Yaocm"),y=function(e){function t(t){var r=e.call(this,t)||this;r.state={width:0,height:0},r.rootClassName="table-board",r.taskTablePrinter=new b.TaskTablePrinter,r.containerRef=null,r.setContainerRef=function(e){r.containerRef=e},r.groups=[],r.tableResize=function(){r.containerRef&&r.setState({width:r.containerRef.clientWidth,height:r.containerRef.clientHeight})},r.openTaskPreviewerGta=function(e){var t=e.ancestorIds||[],a={action:"open detail",segment:"table",type:0===t.length?"task":"subtask",series:t.length,control:"",category:e.scenarioFieldConfig&&e.scenarioFieldConfig.proTemplateConfigType||"",projectId:r.props.projectId,organizationId:r.props.organizationId},s=r.props.sprints,o=s&&s.find(function(t){return t._id===e._sprintId});if(o){var i={active:"Current Sprint",future:"Future Sprint",complete:"Completed Sprint"}[o.status];a=n.a({},a,{control:i})}u.gta.event(a)},r.handleConfigure=function(e){r.props.actions.onConfigure({cellDescriptors:e})},r.handleConfigureMore=function(){var e=r.props.projectId;e&&(r.clearProjectModelSub(),r.projectModelSub=p.a.fetch$(e).subscribe(function(e){u.APP.requestSubView(h.a,{projectModel:e,tabName:"taskFieldConfig"})}))},r.handleRowExpand=function(e,t){r.props.actions.onTaskExpand(Object(T.rowsAndChildrenToEntities)(e));var n=e.filter(function(e){return 0===e.level&&e.entity.subtaskCount.total>=1}).map(function(e){return e.entity._id});n.length>0&&setTimeout(function(){r.props.actions.readSubtasks({smartGroup:r.props.smartGroup,parentTaskIds:n,directChildren:!1,callback:function(e,n){n=n.filter(v.checkIsVisible),e?c.Toast.error({message:i.a.get("table.read.subtasks.failure"),description:e.message}):(t&&t(e,n),!e&&n&&r.props.actions.onTaskExpand(n))}})},0),r.toggleRowGta("unfold")},r.handleRowCollapse=function(e){r.props.actions.onTaskCollapse(Object(T.rowsToEntities)(e)),r.toggleRowGta("fold")},r.toggleRowGta=function(e){u.gta.event({action:e+" subtask",segment:"table",projectid:r.props.projectId,organizationid:r.props.organizationId})},r.handleRowClick=function(e){u.APP.openTaskPreviewer(e._id,{hasLink:!1}),r.openTaskPreviewerGta(e)},r.handleAdd=function(e){r.props.actions.onAdd(e),r.props.onCreateTaskSuccess&&r.props.onCreateTaskSuccess()},r.handleAddSubtasks=function(e,t){r.handleRowExpand([e]),r.props.onCreateTaskSuccess&&r.props.onCreateTaskSuccess()},r.handleAddSprint=function(e){r.props.actions.onTaskGroupExpand({key:e._id,data:[]})},r.handleArchive=function(e){r.props.actions.onArchive({projectId:r.props.projectId,tasks:e})},r.handleDelete=function(e){r.props.actions.onDelete({projectId:r.props.projectId,tasks:e})},r.handleMove=function(e,t){var n=r.props.projectId;r.props.actions.onMove({tasks:t,target:e,origin:{_projectId:n}})},r.handleFork=function(e,t){var n=r.props.projectId;r.props.actions.onFork({tasks:t,target:e,origin:{_projectId:n}})},r.handleUpdate=function(e,t,n){var a=r.props.projectId;r.props.actions.onUpdate({projectId:a,tasks:e,changes:t,options:n})},r.handleLoadMore=function(){var e=r.props,t=e.tasklistId,n=e.loadMore;n?n():t&&r.props.actions.readMoreTasks(void 0)},r.handleRowSelect=function(e){r.props.actions.onTaskSelect(Object(T.rowsAndChildren)(e)),r.handleRowExpand(e,function(e,t){!e&&t&&r.props.actions.onTaskSelect(Object(T.entitiesToRows)(t))})},r.handleRowDeselect=function(e){r.props.actions.onTaskDeselect(Object(T.rowsAndChildren)(e))},r.handleAgileBoardShowFinishedSprint=function(){r.props.actions.onShowFinishedSprint()},r.handleAgileBoardLoadmore=function(){"function"==typeof r.props.onLoad&&r.props.onLoad(),r.props.actions.onStoryOrBugLoadMore()},r.shouldShowAgileBoardLoadmore=function(e){var t=r.props,n=t.smartGroup,a=t.hasLoader,s=n&&n.type;return!!a&&("story"===s||"bug"===s)&&1===e&&r.props.hasMoreTasks},r.openSprintPlanningModal=function(e){var t=r.props.projectId;Object(l.c)(t)&&r.props.openSprintPlanningModal(n.a({projectId:t},e))},r.renderExtraHandler=function(){var e=r.props,t=e.smartGroup,n=e.showFinishedSprint,s=e.groups;if(t&&"sprint"===t.type&&!n&&(s||[]).some(function(e){return!!e.allCompleted})){var o=r.rootClassName+"-show-sprint-handler";return a.createElement(c.TextButton,{className:o,onClick:r.handleAgileBoardShowFinishedSprint},a.createElement(c.Icon,{name:"more"}),a.createElement("span",null,i.a.get("sprint.check.all.done")))}},r.tableResize=s.debounce(r.tableResize,100);var o=t.smartGroupId,d=t.smartGroupQuery,f=t.useGroups;return r.mode=o&&d&&f?g.Mode.MULTIPLE:g.Mode.SINGLE,r.rootStyle={position:"absolute",top:"20px",left:"20px",right:"20px",bottom:"0"},r.groups=t.showFinishedSprint?t.groups||[]:(t.groups||[]).filter(function(e){return!e.allCompleted}),r}return n.d(t,e),t.prototype.clearProjectModelSub=function(){this.projectModelSub&&this.projectModelSub.unsubscribe()},t.prototype.componentDidMount=function(){this.setState({width:this.containerRef.clientWidth,height:this.containerRef.clientHeight}),Object(S.a)(this.containerRef,this.tableResize);var e=this.props.projectId,t=this.props.tasklistId,r=this.props.smartGroupId,a=this.props.smartGroupQuery,s=this.props.tableViewAppId,o=this.props.taskflowEnabled,i=this.props.tasks$,u=this.props.organizationId,c=this.props.isUsingFilter,l=this.props.tql,d=this.props.sortMethod,p=this.props,f=p.taskLayer,h=p.isUsingTaskLayer,g=this.props.defaultCellDescriptorList;this.props.actions.initialize(n.a({},k.initialState,{projectId:e,organizationId:u,tasklistId:t,smartGroupId:r,smartGroupQuery:a,tableViewAppId:s,taskflowEnabled:o,strictHierarchy:this.props.strictHierarchy,tasks$:i})),e&&this.props.actions.readInitialData({projectId:e,organizationId:u,tasklistId:t,smartGroupId:r,smartGroupQuery:a,tableViewAppId:s,taskflowEnabled:o,tasks$:i,taskLayer:f,isUsingTaskLayer:h,defaultCellDescriptorList:g}),this.props.actions.setIsUsingFilter(c),this.props.setIsUsingFilter&&this.props.setIsUsingFilter(c),this.props.actions.setTql(l),this.props.setTql&&this.props.setTql(l),d&&this.props.actions.setSortMethod(d)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.taskTablePrinter.receiveProps({cellDescriptors:e.cellDescriptors,onAddTrigger:this.props.onCreateTask,onAdd:this.handleAdd,onAddSprint:this.handleAddSprint,onAddSubtasks:this.handleAddSubtasks,onArchive:this.handleArchive,onConfigure:this.handleConfigure,onConfigureMore:this.handleConfigureMore,onDelete:this.handleDelete,onFork:this.handleFork,onMove:this.handleMove,onReadStages:e.actions.readStages,onUpdate:this.handleUpdate,onUpdateTaskScenarioFieldConfig:e.actions.onUpdateTaskScenarioFieldConfig,organizationId:e.organizationId,projectId:e.projectId,project:e.project,scenarioFieldConfigurations:e.scenarioFieldConfigurations,smartGroup:e.smartGroup,sprints:e.sprints,stages:e.stages,tableFeatureMap:e.tableFeatureMap,topLevelTaskInvisibleCount:e.topLevelTaskInvisibleCount,topLevelTaskRemainingCount:e.topLevelTaskRemainingCount,onColumnResort:e.actions.onColumnResort,onBulkEditSuccess:e.actions.onTaskDeselectAll,updateUrl:this.props.updateUrl,useGroups:this.props.useGroups,getNewTaskSnippet:this.props.getNewTaskSnippet,openSprintPlanningModal:this.openSprintPlanningModal,enableSprintFeature:e.enableSprintFeature,disableSprintCreate:e.disableSprintCreate,disableSprintEdit:e.disableSprintEdit,disableSprintChangeStatus:e.disableSprintChangeStatus,disableSprintDelete:e.disableSprintDelete,disableSprintPlanning:e.disableSprintPlanning}),e.groups===this.props.groups&&e.showFinishedSprint===this.props.showFinishedSprint||(this.groups=e.showFinishedSprint?e.groups||[]:(e.groups||[]).filter(function(e){return!e.allCompleted}))},t.prototype.componentDidUpdate=function(e){var t=this.props,r=t.isUsingFilter,n=t.tql,a=t.sortMethod,s=t.taskLayer,o=t.isUsingTaskLayer;r!==e.isUsingFilter&&(this.props.actions.setIsUsingFilter(r),this.props.setIsUsingFilter&&this.props.setIsUsingFilter(r)),n!==e.tql&&(this.props.actions.setTql(n),this.props.setTql&&this.props.setTql(n)),a&&a!==e.sortMethod&&this.props.actions.setSortMethod(a),s!==e.taskLayer&&this.props.actions.setTaskLayer(s),o!==e.isUsingTaskLayer&&this.props.actions.setIsUsingTaskLayer(o)},t.prototype.componentWillUnmount=function(){Object(S.b)(this.containerRef,this.tableResize),this.clearProjectModelSub()},t.prototype.renderTable=function(){return a.createElement(b.Table,{cellDescriptors:this.props.cellDescriptors,hasMore:this.props.hasMoreTasks,height:this.state.height,isLoadingMore:this.props.isLoadingMore,new:this.props.new,onConfigure:this.handleConfigure,onLoadMore:this.handleLoadMore,onRowClick:this.handleRowClick,onRowCollapse:this.handleRowCollapse,onRowDeselect:this.handleRowDeselect,onRowExpand:this.handleRowExpand,onRowSelect:this.handleRowSelect,onSort:this.props.actions.onSort,placeholderNotice:this.props.placeholderNotice,printer:this.taskTablePrinter,rows:this.props.rows,selectedRows:this.props.selectedTaskRows,sortBy:this.props.sortBy,toRowIsExpanded:this.props.toTaskIsExpanded,toRowIsLoadingChildren:this.props.toTaskIsLoadingSubtasks,useDraggableConfigure:this.props.useDraggableConfigure,useOuterXScrollbar:!0,width:this.state.width})},t.prototype.renderSwimTable=function(){return a.createElement(b.SwimTable,{isLoading:this.props.isLoadingMore,cellDescriptors:this.props.cellDescriptors,groups:this.groups,height:this.state.height,new:this.props.new,onConfigure:this.handleConfigure,onGroupCollapse:this.props.onGroupCollapse,onGroupExpand:this.props.onGroupExpand,onLoadMore:this.handleAgileBoardLoadmore,onRowClick:this.handleRowClick,onRowCollapse:this.handleRowCollapse,onRowDeselect:this.handleRowDeselect,onRowExpand:this.handleRowExpand,onRowSelect:this.handleRowSelect,onSort:this.props.actions.onSort,printer:this.taskTablePrinter,selectedRows:this.props.selectedTaskRows,sortBy:this.props.sortBy,toRowIsExpanded:this.props.toTaskIsExpanded,toRowIsLoadingChildren:this.props.toTaskIsLoadingSubtasks,width:this.state.width,useDraggableConfigure:this.props.useDraggableConfigure,extraHandlerRenderer:this.renderExtraHandler,hasLoader:this.shouldShowAgileBoardLoadmore})},t.prototype.render=function(){var e=this.props.className,t=this.mode;return a.createElement("div",{className:e,ref:this.setContainerRef,style:this.rootStyle},t===g.Mode.MULTIPLE?this.renderSwimTable():this.renderTable())},t}(a.PureComponent),m=r("t6tM/GMl"),O=r("fvjXLGkK"),I=r("/MKjzBat"),C=r("CRfajq5X");r.d(t,"TableBoardContainer",function(){return w});var w=Object(I.connect)(function(e){var t=e.ui,r=t.board,n=t.tableBoard;return{cellDescriptors:n.cellDescriptors,groups:k.selectors.dropTasks(n),hasMoreTasks:n.hasMoreTasks,isLoading:n.isLoading,isLoadingMore:n.isLoadingMore,isUsingFilter:Object(C.a)(e),members:n.members,new:n.new,project:n.project,rows:k.selectors.sortTasks(n),scenarioFieldConfigurations:n.scenarioFieldConfigurations,selectedTaskRows:n.selectedTaskRows,smartGroup:n.smartGroup,sortBy:n.sortBy,sprints:n.sprints,stages:n.stages,tasks:k.selectors.getFilterPanelTasks(n),toTaskIsExpanded:n.toTaskIsExpanded,toTaskIsLoadingSubtasks:n.toTaskIsLoadingSubtasks,topLevelTaskInvisibleCount:n.taskInvisibleCount,topLevelTaskRemainingCount:n.taskRemainingCount,withLeftPanelFolded:r.taskBoard.withLeftPanelFolded,showFinishedSprint:!(!n.smartGroup||"sprint"!==n.smartGroup.type)&&n.showFinishedSprint,sortMethod:e.ui.scrumPanel.sortMethod||void 0,tql:Object(C.d)(e),taskLayer:e.ui.board.boardViewType.taskLayer,isUsingTaskLayer:Object(C.b)(e)}},function(e){return n.a({actions:Object(O.bindActionCreators)(k.actions,e)},Object(O.bindActionCreators)({openSprintPlanningModal:m.a.openModal.create},e))})(y)},"6acWsfY2":function(e,t,r){var n=r("dt0z8V4T"),a=r("gQMUVRVE");e.exports=function(e){return a(n(e).toLowerCase())}},BSQrDwTo:function(e,t,r){"use strict";r.r(t),r.d(t,"actions",function(){return F}),r.d(t,"initialState",function(){return A}),r.d(t,"epics",function(){return D}),r.d(t,"epic",function(){return M}),r.d(t,"isUsingFilterSelector",function(){return x}),r.d(t,"preFilterTasks",function(){return G}),r.d(t,"postFilterTasks",function(){return z}),r.d(t,"getFilterPanelTasks",function(){return H}),r.d(t,"selectors",function(){return V}),r.d(t,"getTopLevelTaskMap",function(){return Y}),r.d(t,"computeHasChildren",function(){return Z});var n,a=r("mrSGxOB2"),s=r("GESwhXbR"),o=r("a+N5u/Cl"),i=r("tLZJUYWX"),u=r("Nxrdcgel"),c=r("4c1CS0b3"),l=r("NOGqly5s"),d=r("peh1clMB"),p=r("6SzIBtPz"),f=r("oRqJmROU"),h=r("RLD3BeS/"),g=r("s0r7VfKc"),b=r("wVuowLdP"),k=r("fio7jWQ0"),T=r("px/Tdvb+"),S=r("gh8QIhMV"),v=r("bvmrLhnu"),y=r("fcolQD49"),m=r("6QBfePnW"),O=r("gm4QKkGU"),I=r("3eMzznN/"),C=r("OcUPLOSr"),w=r("EiUFTky8"),_=r("sk7lGKsZ"),j=r("zH+Yaocm"),E=function(e){return"TABLE_BOARD/"+e},L=function(e){return e+"/FAILURE"},R=function(e){return e+"/SUCCESS"},F={finalize:Object(p.a)(E("FINALIZE")),initialize:Object(p.a)(E("INITIALIZE")),onAdd:Object(p.a)(E("ON_ADD")),onArchive:Object(p.a)(E("ON_ARCHIVE")),onArchiveFailure:Object(p.a)(E(L("ON_ARCHIVE"))),onArchiveSuccess:Object(p.a)(E(R("ON_ARCHIVE"))),onConfigure:Object(p.a)(E("ON_CONFIGURE")),onDelete:Object(p.a)(E("ON_DELETE")),onDeleteFailure:Object(p.a)(E(L("ON_DELETE"))),onDeleteSuccess:Object(p.a)(E(R("ON_DELETE"))),onFork:Object(p.a)(E("ON_FORK")),onForkFailure:Object(p.a)(E(L("ON_FORK"))),onForkSuccess:Object(p.a)(E(R("ON_FORK"))),onMove:Object(p.a)(E("ON_MOVE")),onMoveFailure:Object(p.a)(E(L("ON_MOVE"))),onMoveSuccess:Object(p.a)(E(R("ON_MOVE"))),onSort:Object(p.a)(E("ON_SORT")),onShowFinishedSprint:Object(p.a)(E("ON_SHOW_FINISHED_SPRINT")),onTaskCollapse:Object(p.a)(E("ON_TASK_COLLAPSE")),onTaskDeselect:Object(p.a)(E("ON_TASK_DESELECT")),onTaskDeselectAll:Object(p.a)(E("ON_TASK_DESELECT_ALL")),onTaskExpand:Object(p.a)(E("ON_TASK_EXPAND")),onTaskGroupCollapse:Object(p.a)(E("ON_TASK_GROUP_COLLAPSE")),onTaskGroupExpand:Object(p.a)(E("ON_TASK_GROUP_EXPAND")),onTaskSelect:Object(p.a)(E("ON_TASK_SELECT")),onUpdate:Object(p.a)(E("ON_UPDATE")),onUpdateFailure:Object(p.a)(E(L("ON_UPDATE"))),onUpdateSuccess:Object(p.a)(E(R("ON_UPDATE"))),onUpdateTaskScenarioFieldConfig:Object(p.a)(E("ON_UPDATE_TASK_SCENARIO_FIELD_CONFIG")),onUpdateTaskScenarioFieldConfigFailure:Object(p.a)(E(L("ON_UPDATE_TASK_SCENARIO_FIELD_CONFIG"))),onUpdateTaskScenarioFieldConfigSuccess:Object(p.a)(E(R("ON_UPDATE_TASK_SCENARIO_FIELD_CONFIG"))),onColumnResort:Object(p.a)(E("ON_COLUMN_RESORT")),onColumnResortSuccess:Object(p.a)(E("ON_COLUMN_RESORT_SUCCESS")),readCustomFieldsSuccess:Object(p.a)(E(R("READ_CELL_DESCRIPTORS"))),readInitialData:Object(p.a)(E("READ_INITIAL_DATA")),readInitialDataFailure:Object(p.a)(E(L("READ_INITIAL_DATA"))),readInitialDataSuccess:Object(p.a)(E(R("READ_INITIAL_DATA"))),readMoreTasks:Object(p.a)(E("READ_MORE_TASKS")),readStages:Object(p.a)(E("READ_STAGES")),readStagesFailure:Object(p.a)(E(L("READ_STAGES"))),readStagesSuccess:Object(p.a)(E(R("READ_STAGES"))),readSubtasks:Object(p.a)(E("READ_SUBTASKS")),readSubtasksEnd:Object(p.a)(E("READ_SUBTASKS_END")),readSubtasksFailure:Object(p.a)(E(L("READ_SUBTASKS"))),readSubtasksSuccess:Object(p.a)(E(R("READ_SUBTASKS"))),saveUserBoardConfiguration:Object(p.a)(E("SAVE_TABLE_CONFIGURATION")),setIsUsingFilter:Object(p.a)("SET_IS_USING_FILTER"),setSortMethod:Object(p.a)("SET_SORT_METHOD"),setTql:Object(p.a)(E("SET_TQL")),setTaskLayer:Object(p.a)(E("SET_TASK_LAYER")),setIsUsingTaskLayer:Object(p.a)(E("SET_IS_USING_TASK_LAYER")),onStoryOrBugLoadMore:Object(p.a)(E("AGILE_BOARD_LOAD_MODE"))},A={cellDescriptors:[],customFields:null,filter:null,hasMoreTasks:!1,taskTotalCount:void 0,taskRemainingCount:void 0,taskInvisibleCount:void 0,isLoading:!0,isLoadingMore:!1,laneType:null,lanes:null,limit:5e3,members:null,new:null,projectId:null,organizationId:null,project:null,scenarioFieldConfigurations:null,selectedTaskRows:null,smartGroup:null,smartGroupId:null,smartGroupQuery:null,tableViewAppId:null,taskflowEnabled:!1,sortBy:{key:"stage",order:C.SortOrder.ASC},sortMethod:null,sprints:null,stages:null,tags:null,tasklistId:null,toTaskIsExpanded:{},toTaskIsLoadingSubtasks:{},showFinishedSprint:!1};t.default=Object(p.b)(((n={})[""+F.initialize]=function(e,t){var r=t.payload,n=void 0===r?{}:r;return a.a({},e,n)},n[""+F.finalize]=function(){return A},n[""+F.onStoryOrBugLoadMore]=function(e){return a.a({},e,{isLoadingMore:!0})},n[""+F.readMoreTasks]=function(e){return a.a({},e,{isLoadingMore:!0})},n[""+F.readInitialDataSuccess]=function(e,t){var r=t.payload;return r?a.a({},e,{new:r.new,project:r.project,smartGroup:r.smartGroup,sprints:r.sprints,stages:o.uniq(a.h(r.stages,e.stages||[]),function(e){return e._id}),taskflowStatuses:r.taskflowStatuses,laneType:r.laneType,lanes:r.lanes,members:r.members,tags:r.tags,tasks:r.tasks,hasMoreTasks:r.hasMoreTasks,taskTotalCount:r.taskTotalCount,taskRemainingCount:r.taskRemainingCount,taskInvisibleCount:r.taskInvisibleCount,isUsingTaskLayer:r.isUsingTaskLayer,isLoading:!1,isLoadingMore:!1}):e},n[""+F.onAdd]=function(e,t){var r=t.payload;return r?a.a({},e,{tasks:o.uniq(a.h(r,e.tasks||[]),function(e){return e._id})}):e},n[""+F.readSubtasks]=function(e,t){var r,n,s=t.payload.parentTaskIds,o={};try{for(var i=a.i(s),u=i.next();!u.done;u=i.next()){o[u.value]=!0}}catch(c){r={error:c}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a.a({},e,{toTaskIsLoadingSubtasks:a.a({},e.toTaskIsLoadingSubtasks,o)})},n[""+F.readSubtasksEnd]=function(e,t){var r,n,s=t.payload;if(!s)return e;var o={};try{for(var i=a.i(s),u=i.next();!u.done;u=i.next()){o[u.value]=!1}}catch(c){r={error:c}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a.a({},e,{toTaskIsLoadingSubtasks:a.a({},e.toTaskIsLoadingSubtasks,o)})},n[""+F.readSubtasksFailure]=function(e,t){var r,n,s=t.payload;if(!s)return e;var o={};try{for(var i=a.i(s),u=i.next();!u.done;u=i.next()){o[u.value]=!1}}catch(c){r={error:c}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a.a({},e,{toTaskIsLoadingSubtasks:a.a({},e.toTaskIsLoadingSubtasks,o)})},n[""+F.readSubtasksSuccess]=function(e,t){var r,n,s=t.payload;if(!s)return e;var i=s.parentTaskIds,u=s.directChildren?function(e){var t=e.ancestorIds[0];return!o.includes(i,t)}:function(e){return o.every(e.ancestorIds,function(e){return!o.includes(i,e)})},c=a.h((e.subtasks||[]).filter(u),s.subtasks),l={};try{for(var d=a.i(i),p=d.next();!p.done;p=d.next()){l[p.value]=!1}}catch(f){r={error:f}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return a.a({},e,{subtasks:c,toTaskIsLoadingSubtasks:a.a({},e.toTaskIsLoadingSubtasks,l)})},n[""+F.readStagesSuccess]=function(e,t){var r=t.payload;if(!r)return e;var n=r.tasklistId,s=r.stages;return a.a({},e,{stages:(e.stages||[]).filter(function(e){return e._tasklistId!==n}).concat(s)})},n[""+F.readCustomFieldsSuccess]=function(e,t){var r=t.payload;return r?a.a({},e,{customFields:r.customFields,cellDescriptors:r.cellDescriptors,scenarioFieldConfigurations:o.uniq(a.h(r.scenarioFieldConfigurations,e.scenarioFieldConfigurations||[]),function(e){return e._id})}):e},n[""+F.onConfigure]=function(e,t){var r=t.payload;if(!r)return e;var n=Object(w.mapify)(r.cellDescriptors,function(e,t){return e.set(Object(w.getColumnKey)(t),t)}),s=e.cellDescriptors.map(function(e){return a.a({},e,n.get(Object(w.getColumnKey)(e)))});return a.a({},e,{cellDescriptors:s})},n[""+F.onTaskSelect]=function(e,t){var r=t.payload;if(!r)return e;var n=o.uniq(a.h(e.selectedTaskRows||[],r),function(e){return e.entity._id});return a.a({},e,{selectedTaskRows:n})},n[""+F.onTaskDeselect]=function(e,t){var r=t.payload;if(!r)return e;var n=r.map(function(e){return e.entity._id});return a.a({},e,{selectedTaskRows:o.filter(e.selectedTaskRows||[],function(e){return!o.includes(n,e.entity._id)})})},n[""+F.onTaskDeselectAll]=function(e){return a.a({},e,{selectedTaskRows:null})},n[""+F.onSort]=function(e,t){var r=t.payload;return a.a({},e,{sortBy:r||null})},n[""+F.onTaskExpand]=function(e,t){var r,n,s=t.payload;if(!s)return e;var o={};try{for(var i=a.i(s),u=i.next();!u.done;u=i.next()){o[u.value._id]=!0}}catch(c){r={error:c}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a.a({},e,{toTaskIsExpanded:a.a({},e.toTaskIsExpanded,o)})},n[""+F.onTaskCollapse]=function(e,t){var r,n,s=t.payload;if(!s)return e;var o={};try{for(var i=a.i(s),u=i.next();!u.done;u=i.next()){o[u.value._id]=!1}}catch(c){r={error:c}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a.a({},e,{toTaskIsExpanded:a.a({},e.toTaskIsExpanded,o)})},n[""+F.onTaskGroupCollapse]=function(e,t){var r=t.payload;if(!r||!e.lanes)return e;var n=r.key,s=$(e.lanes,function(e){return e.axis.id===n},function(e){return a.a({},e,{isCollapsed:!0})});return s?a.a({},e,{lanes:s}):e},n[""+F.onTaskGroupExpand]=function(e,t){var r=t.payload;if(!r||!e.lanes)return e;var n=r.key,s=$(e.lanes,function(e){return e.axis.id===n},function(e){return a.a({},e,{isCollapsed:!1})});return s?a.a({},e,{lanes:s}):e},n[""+F.onArchiveSuccess]=function(e,t){var r=t.payload;return r?a.a({},e,{selectedTaskRows:null,tasks:(e.tasks||[]).filter(function(e){var t=e._id;return!o.includes(r,t)})}):e},n[""+F.onDeleteSuccess]=function(e,t){var r=t.payload;return r?a.a({},e,{selectedTaskRows:null,tasks:(e.tasks||[]).filter(function(e){var t=e._id;return!o.includes(r,t)})}):e},n[""+F.onForkSuccess]=function(e){return a.a({},e,{selectedTaskRows:null})},n[""+F.onMoveSuccess]=function(e){return a.a({},e,{selectedTaskRows:null})},n[""+F.onUpdateSuccess]=function(e){return a.a({},e,{selectedTaskRows:null})},n[""+F.onColumnResortSuccess]=function(e,t){var r=t.payload;return a.a({},e,{cellDescriptors:r})},n[""+F.onShowFinishedSprint]=function(e){var t=e.smartGroup,r=!(!t||"sprint"!==t.type)&&!e.showFinishedSprint;return a.a({},e,{showFinishedSprint:r})},n[""+F.setIsUsingFilter]=function(e,t){return Object(f.c)(t.payload)?a.a({},e,{isUsingFilter:t.payload}):e},n[""+F.setSortMethod]=function(e,t){return a.a({},e,{sortMethod:t.payload})},n),A);var D={readInitialData:function(e){return e.ofType(""+F.readInitialData).switchMap(function(t){var r=t.payload;if(!r)return[];var n=r.projectId,s=r.tasklistId,i=r.smartGroupQuery,u=r.organizationId,l=r.taskflowEnabled,d=i?r.smartGroupId:null,p=r.tableViewAppId,f=g.default.getProject(n).changes().map(function(e){return a.f(e,1)[0]}).takeUntil(e.ofType(""+F.finalize)).shareReplay(1),h=(d?g.default.getSmartGroup(d).changes().map(function(e){return 0===e.length?null:e.map(b.normSmartGroup)[0]}):c.Observable.of(null)).takeUntil(e.ofType(""+F.finalize)).distinctUntilChanged(o.isEqual).publishReplay(1).refCount(),T=g.default.getScenarioFieldConfigs(n,"task",{withTaskflowstatus:l}).shareReplay(1),y=l?T.map(function(e){var t,r,n=[];try{for(var s=a.i(e),i=s.next();!i.done;i=s.next()){var u=i.value;o.isArray(u.taskflowstatuses)&&n.push.apply(n,a.h(u.taskflowstatuses))}}catch(c){t={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return n}):c.Observable.of([]),m=b.getUserCellDescriptorList(p,n).map(function(e){return e||[]}),O=c.Observable.combineLatest(f,h,g.default.getCustomFieldLinks(n,"application").changes(),T,m).takeUntil(e.ofType(""+F.finalize)).map(function(e){var t=a.f(e,5),n=t[0],s=t[1],o=t[2],i=t[3],u=t[4];return F.readCustomFieldsSuccess({customFields:o,scenarioFieldConfigurations:i,cellDescriptors:Object(w.composeCellDescriptorList)(J(r.defaultCellDescriptorList,{enableScenarioFieldConfig:Object(w.displayScenarioFieldConfig)(n,i),enableTaskflowStatus:Object(v.isTaskflowEnabled)(n)}),u,n.applications?n.applications.map(function(e){return e.name}):[],Q(i,s),o,s)})}),I=new Set(["story","bug","sprint"]),C=h.switchMap(function(t){var o;if(t=t&&I.has(t.type)?t:null,r.tasks$)o=r.tasks$;else{var i=e.ofType(""+F.setIsUsingFilter).map(function(e){return e.payload}).startWith(!1).distinctUntilChanged(),l=e.ofType(""+F.setTql).debounceTime(10).map(function(e){return e.payload}).publishReplay(1).refCount(),d=e.ofType(""+F.setSortMethod).map(function(e){return e.payload}).startWith(void 0),p=e.ofType(""+F.setTaskLayer).map(function(e){return e.payload}).startWith(r.taskLayer),h=e.ofType(""+F.readMoreTasks),T={_tasklistId:s||void 0,_projectId:n};o=c.Observable.combineLatest(i,p).switchMap(function(e){var t=a.f(e,2),r=t[0],o=t[1];return r?l.switchMap(function(e){return b.getTasksByTql(T,e,{taskLayer:o,loadMore$:h})}):d.switchMap(function(e){return b.getUndoneAndDoneTasks(s,n,h,e,o)})})}var S=t?g.default.getProjectSprints(n).changes():c.Observable.of([]),v=t||!s?c.Observable.of(void 0):g.default.getTasklist(s).changes().map(function(e){return a.f(e,1)[0]}),m=t||!s?c.Observable.of([]):g.default.getTasklistStages(s).changes(),O=u?g.default.getTags(u,"organization").changes():c.Observable.of([]),C=e.ofType(""+F.setIsUsingTaskLayer).map(function(e){return e.payload}).startWith(r.isUsingTaskLayer);return c.Observable.combineLatest([f,S,m,y,g.default.getMembers(n).changes(),g.default.getTags(n).changes(),O,o,v,C],function(e,t,r,n,a,s,o,i,u,c){return{project:e,sprints:t,stages:r,taskflowStatuses:n,members:a,tags:s,orgTags:o,tasks:i,tasklist:u,isUsingTaskLayer:c}}).takeUntil(e.ofType(""+F.finalize)).debounceTime(10).map(function(e){var r=e.project,o=e.sprints,i=e.stages,u=e.taskflowStatuses,c=e.members,l=e.tags,d=e.orgTags,p=e.tasks,f=e.tasklist,h=e.isUsingTaskLayer,g=f&&f._defaultScenariofieldconfigId,b=a.a({_projectId:n},s?{_tasklistId:s}:{},i[0]?{_stageId:i[0]._id}:{},t?{proTemplateConfigType:W(t)}:{pos:0},g?{_scenarioFieldConfigId:g}:{}),T=k.store.getState().ui.tableBoard,S=t?X(o,{newTaskSnippet:b,smartGroup:t,laneType:T.laneType,lanes:T.lanes,showFinishedSprint:T.showFinishedSprint}):{laneType:null,lanes:null},v=l.concat(d);return F.readInitialDataSuccess(a.a({project:r,sprints:o,stages:i,taskflowStatuses:u,members:c,tags:v,tasks:p.tasks,hasMoreTasks:p.hasMore||!1,taskTotalCount:p.totalCount,taskRemainingCount:p.remainingCount,taskInvisibleCount:p.invisibleCount,smartGroup:t,tasklistId:s,isUsingTaskLayer:h,new:b},S))})});return c.Observable.merge(O,C).catch(function(e){return Object(S.throwError)(e),c.Observable.of(F.readInitialDataFailure())})})},saveConfiguration:function(e,t){return e.ofType(""+F.saveUserBoardConfiguration).debounceTime(1e3).concatMap(function(){var e=t.getState().ui.tableBoard,r=e.tableViewAppId,n=e.cellDescriptors;return r&&0!==n.length?b.saveUserCellDescriptorList(r,n):c.Observable.empty()}).map(k.noOpAction)},onConfigure:function(e){return e.ofType(""+F.onConfigure).map(function(){return F.saveUserBoardConfiguration()})},readSubtasks:function(e,t){return e.ofType(""+F.readSubtasks).mergeMap(function(r){var n=r.payload,s=n,i=s.smartGroup,u=s.parentTaskIds,l=n,d=l.directChildren,p=l.callback,f=t.getState().ui.tableBoard.strictHierarchy;switch(i&&i.type){case"story":case"bug":return f?c.Observable.combineLatest.apply(c.Observable,a.h(u.map(function(e){return b.getSubtasks(e,!d).changes()}))).takeUntil(e.ofType(""+F.finalize)).debounceTime(10).map(function(e){return o.flatten(e)}).do(Object(_.successHandler)(p),Object(_.errorHandler)(p)).map(function(e){return F.readSubtasksSuccess({parentTaskIds:u,subtasks:e,directChildren:d})}).catch(function(){return c.Observable.of(F.readSubtasksFailure(u))}):c.Observable.of(F.readSubtasksEnd(u));case"sprint":return c.Observable.of(F.readSubtasksEnd(u));case null:case void 0:default:return c.Observable.of(F.readSubtasksEnd(u))}})},readStages:function(e){return e.ofType(""+F.readStages).switchMap(function(t){var r=t.payload;return r?g.default.getTasklistStages(r).changes().takeUntil(e.ofType(""+F.finalize)).map(function(e){return F.readStagesSuccess({tasklistId:r,stages:e})}).catch(function(){return c.Observable.of(F.readStagesFailure())}):[]})},onUpdate:function(e){return e.ofType(""+F.onUpdate).switchMap(function(e){var t=e.payload;if(!t)return[];var r=o.keys(t.changes)[0];return b.updateTasks(t.projectId,t.tasks.map(function(e){return e._id}),t.changes,t.options).do(function(){var e={_executorId:i.get("table.update.executor.success"),_sprintId:i.get("table.update.sprint.success"),startDate:i.get("table.update.startDate.success"),dueDate:i.get("table.update.dueDate.success")}[r];e&&s.Toast.success(e)}).map(function(){return F.onUpdateSuccess()}).catch(function(){var e={_executorId:i.get("table.update.executor.failure"),_sprintId:i.get("table.update.sprint.failure"),startDate:i.get("table.update.startDate.failure"),dueDate:i.get("table.update.dueDate.failure")}[r];return e&&s.Toast.error(e),c.Observable.of(F.onUpdateFailure())})})},onMove:function(e){return e.ofType(""+F.onMove).switchMap(function(e){var t=e.payload;return t&&t.origin._projectId?b.moveTasks(t.origin._projectId,t.tasks.map(function(e){return e._id}),t.target).do(function(){var e=i.get("table.move.success");t.target._projectId===t.origin._projectId?s.Toast.success(e):h.ToastMessageWithUrl.success({messageTitle:e,url:"/project/"+t.target._projectId+"/tasks/scrum/"+t.target._tasklistId,urlTitle:i.get("view")})}).map(function(){return F.onMoveSuccess()}).catch(function(){return s.Toast.error(i.get("table.move.failure")),c.Observable.of(F.onMoveFailure())}):[]})},onFork:function(e){return e.ofType(""+F.onFork).switchMap(function(e){var t=e.payload;return t&&t.origin._projectId?b.forkTasks(t.origin._projectId,t.tasks.map(function(e){return e._id}),t.target).do(function(){var e=i.get("table.copy.success");t.target._projectId===t.origin._projectId?s.Toast.success(e):h.ToastMessageWithUrl.success({messageTitle:e,url:"/project/"+t.target._projectId+"/tasks/scrum/"+t.target._tasklistId,urlTitle:i.get("view")})}).map(function(){return F.onForkSuccess()}).catch(function(){return s.Toast.error(i.get("table.copy.failure")),c.Observable.of(F.onForkFailure())}):[]})},onArchive:function(e){return e.ofType(""+F.onArchive).switchMap(function(e){var t=e.payload;if(!t)return[];var r=t.tasks.map(function(e){return e._id});return b.archiveTasks(t.projectId,r).map(function(){return h.ToastWithObject.archive(),F.onArchiveSuccess(r)}).catch(function(){return s.Toast.error(i.get("table.archive.failure")),c.Observable.of(F.onArchiveFailure())})})},onDelete:function(e){return e.ofType(""+F.onDelete).switchMap(function(e){var t=e.payload;if(!t)return[];var r=t.tasks.map(function(e){return e._id});return b.deleteTasks(t.projectId,r).map(function(){return s.Toast.success(i.get("table.delete.success")),F.onDeleteSuccess(r)}).catch(function(){return s.Toast.error(i.get("table.delete.failure")),c.Observable.of(F.onDeleteFailure())})})},onUpdateTaskScenarioFieldConfig:function(e){return e.ofType(""+F.onUpdateTaskScenarioFieldConfig).switchMap(function(e){var t=e.payload;return t?b.updateTaskScenarioFieldConfig(t.taskId,t.changes).map(function(){return F.onUpdateTaskScenarioFieldConfigSuccess()}).catch(function(){return c.Observable.of(F.onUpdateTaskScenarioFieldConfigFailure())}):[]})},onColumnResort:function(e,t){return e.ofType(""+F.onColumnResort).map(function(e){var r=e.payload,n=t.getState().ui.tableBoard,s=r,o=s.oldIndex,i=s.newIndex;return{payload:Object(u.arrayMove)(n.cellDescriptors,o,i).map(function(e,t){return a.a({},e,{sortIndex:t})})}}).mergeMap(function(e){return c.Observable.of(F.onColumnResortSuccess(e.payload),F.saveUserBoardConfiguration())})},onSort:function(e){return e.ofType(""+F.setSortMethod).switchMap(function(e){return e.payload?c.Observable.of(F.onSort(null)):c.Observable.empty()})}},M=l.a.apply(void 0,a.h(o.values(D))),x=Object(d.createSelector)(function(e){return e.filter},function(e){return e.isUsingFilter},function(e,t){return t||!(!e||Object(O.isFilterEmpty)(e))}),U=Object(d.createSelector)(function(e){return e.tasks},function(e){return e.subtasks},x,function(e,t,r){return e?r?e:o.uniq(a.h(e,t||[]),function(e){return e._id}):e}),G=Object(d.createSelector)(U,function(e){return e.projectId},function(e){return e.scenarioFieldConfigurations},function(e){return e.filter},function(e){return e.smartGroup},function(e){return e.strictHierarchy},x,function(e,t,r,n,s,i,u){var c,l,d=function(e){switch(s&&s.type){case"story":case"bug":return i;case"sprint":return!1;case null:case void 0:default:return!0}}();if(!e||!d)return e;r=r||[],r=o.filter(r,{_projectId:t});var p=o.findWhere(r,{isDefault:!0}),f=[];try{for(var h=a.i(e),g=h.next();!g.done;g=h.next()){var b=g.value;if(Object(w.isSubtask)(b,{isUsingFilter:u}))f.push(b);else{var k=o.findWhere(r,{_id:b._scenariofieldconfigId})||p;m.filterOne(k?Object(O.parseTaskWithScenarioFieldConfig)(b,k):b,n)&&f.push(b)}}}catch(T){c={error:T}}finally{try{g&&!g.done&&(l=h.return)&&l.call(h)}finally{if(c)throw c.error}}return f}),N=Object(d.createSelector)(G,x,function(e,t){var r,n;if(!e)return e;var s={tasks:[],subtasks:[]};try{for(var o=a.i(e),i=o.next();!i.done;i=o.next()){var u=i.value;Object(w.isSubtask)(u,{isUsingFilter:t,filteredTasks:e})?s.subtasks.push(u):s.tasks.push(u)}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}),P=Object(d.createSelector)(N,function(e){return e.scenarioFieldConfigurations},function(e){return e.customFields},function(e){return e.project},function(e){return e.members},function(e){return e.tags},function(e){return e.stages},function(e){return e.taskflowStatuses},function(e){return e.sprints},function(e){return e.limit},function(e,t,r,n,s,i,u,c,l,d){if(!(e&&t&&r&&n&&s&&i&&u&&c))return null;for(var p={tasks:e.tasks.slice(0,d),subtasks:[]},f=p.tasks.map(function(e){return e._id}),h=a.h(e.subtasks),g=h.map(function(e){return e._id});h.length>0;){var b=h.shift(),k=g.shift(),T=b._taskId;o.includes(f,T)?(p.subtasks.push(b),f.push(k)):o.includes(g,T)?(h.push(b),g.push(k)):(p.subtasks.push(b),f.push(k))}var S=o.findWhere(t,{isDefault:!0}),v=function(e){return e.reduce(function(e,d){var p=u.find(function(e){var t=e._id;return d._stageId===t})||d.stage,f=d._taskflowstatusId&&c?c.find(function(e){var t=e._id;return d._taskflowstatusId===t}):void 0,h=a.a({},d,{uniqueIdPrefix:n.uniqueIdPrefix,reminderParsed:d.reminder&&s.length>0?Object(w.parseReminder)(d,d.reminder,s):null,executor:d._executorId&&s.length>0?a.a({},d.executor,s.find(function(e){return e._userId===d._executorId}),{_id:d._executorId}):null,followers:d.involveMembers.map(function(e){return s.find(function(t){return t._userId===e})}).filter(function(e){return!!e}),tags:(d.tagIds||[]).map(function(e){return i.find(function(t){return t._id===e})}).filter(function(e){return!!e}),customfields:(d.customfields||[]).map(function(e){return a.a({},r.find(function(t){return t._customfieldId===e._customfieldId})||{},e)},[]),scenarioFieldConfig:o.findWhere(t,{_id:d._scenariofieldconfigId})||S,stage:p,taskflowstatus:f,sprint:d._sprintId&&(l||[]).find(function(e){var t=e._id;return d._sprintId===t})||d.sprint});return e.concat(h)},[])};return p.tasks=v(p.tasks),p.subtasks=v(p.subtasks),p}),B=Object(d.createSelector)(P,function(e){return e.smartGroup},function(e){return e.strictHierarchy},function(e){return e.isUsingTaskLayer},x,function(e,t,r,n,s){var o,i;if(!e)return e;var u=a.h(e.tasks,e.subtasks),c=Y(u,t),l=[],d=new Map;try{for(var p=a.i(u),f=p.next();!f.done;f=p.next()){var h=f.value,g=h._id,b=c.get(h._id),k=h._taskId,T={entity:h,hasChildren:Z(h,{smartGroup:t,strictHierarchy:!!r,isUsingFilter:Boolean(s||n),filteredTasks:u}),level:0};if(d.set(g,T),b||!k)l.push(T);else{var S=d.get(k);S&&(Object(j.checkIsVisible)(h)?S.children=(S.children||[]).concat(T):(S.pseudoAfter=S.pseudoAfter||{entity:{_id:h._id+"/pseudo-after",objectType:"pseudo-after",privateSubtaskCount:0}},S.pseudoAfter.entity.privateSubtaskCount+=1),S.hasChildren=!0,T.level=S.level+1)}}}catch(v){o={error:v}}finally{try{f&&!f.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}return l}),z=Object(d.createSelector)(B,function(e){return e.projectId},function(e){return e.scenarioFieldConfigurations},function(e){return e.filter},function(e){return e.smartGroup},function(e){return e.strictHierarchy},function(e,t,r,n,s,i){var u,c,l=function(e){switch(s&&s.type){case"story":case"bug":return!i;case"sprint":return!0;case null:case void 0:default:return!1}}();if(!e||!l)return e;r=r||[],r=o.filter(r,{_projectId:t});var d=o.findWhere(r,{isDefault:!0}),p=[];try{for(var f=a.i(e),h=f.next();!h.done;h=f.next()){var g=h.value,b=g.entity,k=o.findWhere(r,{_id:b._scenariofieldconfigId})||d;m.filterOne(k?Object(O.parseTaskWithScenarioFieldConfig)(b,k):b,n)&&p.push(Object.assign(g,{entity:b}))}}catch(T){u={error:T}}finally{try{h&&!h.done&&(c=f.return)&&c.call(f)}finally{if(u)throw u.error}}return p}),K=Object(d.createSelector)(function(e){return e.sortBy},function(e){return e.sortMethod},function(e){return e.cellDescriptors},z,function(e,t,r,n){if(!n)return null;var s=e?e.order:null,o=e?e.key:null,i=o?r.find(function(e){return Object(w.getColumnKey)(e)===o}):null,u=i?w.toTaskComparator[i.key]:void 0,c=t?{undoneComparator:function(e,r){return T.sort(e,r,t)},undoneKey:t,undoneOrder:C.SortOrder.ASC,doneComparator:w.toTaskComparator.accomplished,doneKey:"accomplished",doneOrder:C.SortOrder.DESC}:{undoneComparator:w.toTaskComparator.created,undoneKey:"created",undoneOrder:C.SortOrder.DESC,doneComparator:w.toTaskComparator.accomplished,doneKey:"accomplished",doneOrder:C.SortOrder.DESC},l={undone:[],done:[]};return n.forEach(function(e){e.entity.isDone?l.done.push(e):l.undone.push(e)}),a.h(Object(w.sortRows)(l.undone,u||c.undoneComparator,o||c.undoneKey,s||c.undoneOrder),Object(w.sortRows)(l.done,c.doneComparator,c.doneKey,c.doneOrder))}),q=Object(d.createSelector)(K,function(e){return e.laneType},function(e){return e.lanes},function(e,t,r){var n,s;if(!e||!t||!r)return null;var o=y.c.getTaskBucket(e.map(function(e){return e.entity}),r.map(function(e){return e.axis}),t,[],y.a.AxisType.noop),i=r.reduce(function(e,t){return e.set(t.axis.id,t),e},new Map),u=e.reduce(function(e,t){return e.set(t.entity._id,t)},new Map),c=[],l=[];try{for(var d=a.i(o.entries()),p=d.next();!p.done;p=d.next()){var f=a.f(p.value,2),h=f[0],g=f[1],b=i.get(h),k={key:h,data:g.map(function(e){return u.get(e._id)}),title:b.axis.title,new:b.new,order:b.order||0,isCollapsed:b.isCollapsed,allCompleted:!!b.axis.done};k.order>=0?c.push(k):l.push(k)}}catch(T){n={error:T}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(n)throw n.error}}return a.h(Object(I.mergeSort)(c,function(e,t){return e.order<=t.order}),Object(I.mergeSort)(l,function(e,t){return e.order<=t.order}))}),H=Object(d.createSelector)(U,function(e){return e.smartGroup},function(e){return e.strictHierarchy},function(e,t,r){return e?function(n){switch(t&&t.type){case"story":case"bug":return r?e.filter(function(e){return!Object(w.isSubtask)(e)}):Array.from(Y(e,t).values());case"sprint":return Array.from(Y(e,t).values());case null:case void 0:default:return e.filter(function(e){return!Object(w.isSubtask)(e)})}}():e}),V={getTasks:U,getFilterPanelTasks:H,sortTasks:K,dropTasks:q},W=function(e){return"story"===e.type?"story":"bug"===e.type?"bug":void 0},Q=function(e,t){if(!t)return e;var r=W(t);if(!r)return e;var n=[r];switch(r){case"story":case"bug":n.push("subtask")}return e.filter(function(e){var t=e.proTemplateConfigType;return o.includes(n,t)})},J=function(e,t){void 0===t&&(t={});var r=e||null;return!r&&t.enableTaskflowStatus&&(r=w.SYSTEM_FIELD_DEFAULT_CELL_DESCRIPTOR_LIST_FOR_TASKFLOW),r||(r=w.SYSTEM_FIELD_DEFAULT_CELL_DESCRIPTOR_LIST),t.enableScenarioFieldConfig||(r=r.filter(function(e){return"scenarioFieldConfig"!==e.key})),t.enableTaskflowStatus||(r=r.filter(function(e){return"_taskflowstatusId"!==e.key})),r},X=function(e,t){var r=t.lanes?t.lanes.reduce(function(e,t){var r;return Object.assign(e,((r={})[t.axis.id]=t,r))},{}):{},n=function(e){if(y.b.isEmptyAxis(e.id))return-1/0;if(y.b.isDoneAxis(e.id))return-1;var t=e;return t.done?-(t.completedDate||0):0},s=function(e){return!!y.b.isDoneAxis(e.id)},o=t.newTaskSnippet,i=null,u=null;switch(t.smartGroup.type){case"story":i=y.a.AxisType.isDone,u=y.b.storyAxises().map(function(e){var t={axis:e,new:o,order:n(e)},a=r[e.id],i=a?a.isCollapsed:s(e);return Object.assign(t,{isCollapsed:i})});break;case"bug":i=y.a.AxisType.isDone,u=y.b.bugAxises().map(function(e){var t={axis:e,new:o,order:n(e)},a=r[e.id],i=a?a.isCollapsed:s(e);return Object.assign(t,{isCollapsed:i})});break;case"sprint":i=y.a.AxisType.general,u=y.b.sprintAxises(e).map(function(e,t){var s=null;y.b.isEmptyAxis(e.id)||(s=a.a({},o,{_sprintId:e.id}));var i,u={axis:e,new:s||o,order:n(e)},c=r[e.id];return i=!c||null==c.isCollapsed||!c.axis.done&&e.done?e.done||t>0:c.isCollapsed,Object.assign(u,{isCollapsed:i})})}return{laneType:i,lanes:u}};function Y(e,t){var r=new Map;return function(t){switch(t&&t.type){case null:case void 0:case"bug":case"story":return Object(w.mapify)(y.b.findTopLevelTasks(e),function(e,t){return e.set(t._id,t)});case"sprint":return o.chain(e).groupBy("_sprintId").each(function(e){return y.b.findTopLevelTasks(e).reduce(function(e,t){return e.set(t._id,t)},r)}),r;case null:case void 0:default:return r}}(t)||r}function Z(e,t){var r=t.smartGroup,n=t.strictHierarchy,a=t.isUsingFilter,s=t.filteredTasks;return function(t){switch(t&&t.type){case null:case void 0:return Object(w.hasSubtasks)(e,{isUsingFilter:a,filteredTasks:s});case"bug":case"story":return!(!n||a||!e.subtaskCount.total);case"sprint":return!1;default:return!!e.subtaskCount.total}}(r)||!1}var $=function(e,t,r){var n=e.findIndex(t);if(!(n<0)){var s=a.h(e);return s[n]=r(e[n]),s}}},Em2tpGhf:function(e,t,r){var n=r("bahgnowP"),a=r("quyAPdGo"),s=r("0JQy5Tyq");e.exports=function(e){return a(e)?s(e):n(e)}},FeNmnK3V:function(e,t,r){"use strict";r.r(t),r.d(t,"assign",function(){return l}),r.d(t,"finalize",function(){return d}),r.d(t,"syncTasks",function(){return p});var n=r("mrSGxOB2"),a=r("gBe2F1Rz"),s=r.n(a),o=r("oq1bWpp9"),i=r.n(o),u=r("BSQrDwTo"),c=r("ctsD9mWH"),l=function(e){c.store.dispatch(u.actions.initialize(e))},d=function(){c.store.dispatch(u.actions.finalize())},p=function(e,t){var r,a,o,u,c=new Map;try{for(var l=n.i(t),d=l.next();!d.done;d=l.next()){var p=d.value,f=p._stageId;(k=c.get(f))||(k=[],c.set(f,k)),k.push(new i.a(p))}}catch(T){r={error:T}}finally{try{d&&!d.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}try{for(var h=n.i(e),g=h.next();!g.done;g=h.next()){var b=g.value,k=c.get(b)||[];s.a.get(b,{boundToObjectType:"stage"}).set(k)}}catch(S){o={error:S}}finally{try{g&&!g.done&&(u=h.return)&&u.call(h)}finally{if(o)throw o.error}}}},bahgnowP:function(e,t){e.exports=function(e){return e.split("")}},gQMUVRVE:function(e,t,r){var n=r("0ZTewsnh")("toUpperCase");e.exports=n},quyAPdGo:function(e,t){var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return r.test(e)}},sk7lGKsZ:function(e,t,r){"use strict";r.r(t),r.d(t,"successHandler",function(){return i}),r.d(t,"errorHandler",function(){return u}),r.d(t,"gtaHandler",function(){return c});var n=r("mrSGxOB2"),a=r("6acWsfY2"),s=r.n(a),o=r("sa1Ed382"),i=function(e,t,r){void 0===t&&(t=!0),void 0===r&&(r=0);var a=!1;return function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];t&&a||(a=!0,e&&setTimeout(function(){e.apply(void 0,n.h([null],s))},r))}},u=function(e,t){return void 0===t&&(t=0),function(r){if(e)return setTimeout(function(){e(r)},t),[];throw r}},c=function(e){return function(t){o.gta.event(n.a({control:s()(e)+" Type Configuration",segment:"Project Setting"},t))}}},wy8aJQ84:function(e,t,r){var n=r("KxBF0cmw");e.exports=function(e,t,r){var a=e.length;return r=void 0===r?a:r,!t&&r>=a?e:n(e,t,r)}}}]);
//# sourceMappingURL=32.f86c3142.chunk.js.map