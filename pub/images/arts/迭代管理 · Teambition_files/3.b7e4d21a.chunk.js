(this.webpackJsonp=this.webpackJsonp||[]).push([[3],{"+EWWrkDh":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"+Hm9+wvf":function(e,t,n){e.exports={trigger:"trigger__17SA",content:"content__29eA",input:"input__2Er3",list:"list__EIt_",group:"group__3jRf","group-title":"group-title__1gUP",item:"item__2m95","item-name":"item-name__2zIb","item-description":"item-description__2Qht",placeholder:"placeholder__3Qt6","placeholder-img":"placeholder-img__3pwO","placeholder-tip":"placeholder-tip__TM0t"}},"+MvHiMrY":function(e,t,n){},"+QrSgjeH":function(e,t,n){e.exports={root:"root__3UYM",left:"left__1DdF",indicator:"indicator__1TO8","show-direction":"show-direction__mfop",hide:"hide__3PS1",hidden:"hidden__38SS"}},"+oNcvbGe":function(e,t,n){var r,a,o,i,s,l,c,p,u,d,f,h,m,g,v,b,y,k,S,C,w,I,T,E,x,M,_,D,O,P,N,j,A,L,F,B,G,V,R,U,W,q,H,z,K,J,$,X,Y,Q,Z,ee,te,ne,re,ae,oe,ie=function(e,t){return function(){return e.apply(t,arguments)}},se={}.hasOwnProperty,le=[].slice;C=n("a+N5u/Cl"),n("wd/RKGTj"),h=n("4c1CS0b3").Observable,m=n("q1tIBJhx"),n("/MKjzBat").Provider,re=n("sa1Ed382"),ae=n("gh8QIhMV").throwError,k=n("3eMzznN/"),S=n("vmWJWrVe"),n("OmupbwLD"),F=n("90U+kJWN").isUncategorizedCommonGroup,n("U3116aoz").FixedCommonGroup,ne=n("ctsD9mWH").store,M=n("N2yOX29X").genAgileSmartGroupQuery,l=n("kpf8nsNF"),L=n("bvmrLhnu").hideCustomView,A=n("V6edIaEd").getUncategorizedCommonGroupChoice,u=n("zojuP2D5"),b=n("CHUlU4J8").TableBoardView,I=n("EiUFTky8").defaultCellDescriptorListByAppName,f=n("A/Hplruc").ListView,J=n("miKtJhEY"),G=J.openOptionsBug,R=J.openOptionsSprintAll,U=J.openOptionsSprintUnplanned,V=J.openOptionsSprint,W=J.openOptionsStory,H=J.openOptionsStoryOrBugListView,q=J.openOptionsStoryOrBugKanbanView,r=n("iQKydh6i").AgileLeftPanelConnect,x=n("dbBRp+if").dispatchUpdateCurrentSprint,g=n("Q1wi1axk").SprintPlanningModalConnect,v=n("yaguHIwG").SprintTaskBoardView,$=n("tE7INp4w"),T=$.dispatchUpdateCurrentCommonGroup,j=$.getStoredCurrentCommonGroup,p=$.FixedCommonGroup,X=n("bqYxFEmS"),c=X.DONE_CONDITION,y=X.UNDO_CONDITION,Y=n("MgZatsjo"),i=Y.BoardViewTopMode,d=Y.LeftPanelPath,Q=n("zDJ6609A"),E=Q.dispatchUpdateCurrentSmartGroup,D=Q.getCustomViewType,O=Q.getLocalCurrentCustomViewId,_=Q.getCustomView,N=Q.getSprintIdFromSmartGroup,w=n("j5JlF2rJ").clickCustomViewGta,B=n("RIjxGFt6").observeBoardViewTypeAndPaneType,o=n("pYq0h+Ab").AxisType,s=n("CGal/mJM").BoardViewType,K=n("oPs7WnEA").presetFiltersByAppName,Z=n("Sf9Qbmhl"),P=Z.getSectionName$,oe=Z.updateSectionName,ee=n("zOGvvE77"),z=ee.openSprintAppCustomViewsMigrationGuide,te=ee.shouldOpenSprintAppCustomViewsMigrationGuide,a=n("LDPqnm4m"),n("AWPEjAFo"),e.exports=function(e){function t(){return this._renderBoardTopView=ie(this._renderBoardTopView,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)se.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,S),t.prototype.viewName="AgileView",t.prototype.className="agile-view",t.prototype.initialize=function(e){var t,n,r;return this.projectModel=e.projectModel,this.appName=e.appName,this.tasklistsCollection=e.tasklistsCollection,this.scenarioFieldConfigCollection=e.scenarioFieldConfigCollection,this.smartGroupModel=e.smartGroupModel,this.currentViewSection=null!=(n=e.currentViewSection)?n:null,this.viewId=null!=(r=e.viewId)?r:null,this._updateAgileUrl=e.updateAgileUrl,this._smartGroupId=this.smartGroupModel.id,this.scenarioFieldConfigModel=this.scenarioFieldConfigCollection.findWhere({proTemplateConfigType:this.smartGroupModel.get("type")}),(t=this.getDefaultUrlParams()).viewSection&&(this.currentViewSection=t.viewSection),t.viewId&&(this.currentViewId=t.viewId),this.updateAgileUrl(t,{replace:!0}),this.render(),this.setGtaCurrentPage(),re.gta.event({action:"enter agile view",private:"onboarding"})},t.prototype.updateAgileUrl=function(){var e;return e=1<=arguments.length?le.call(arguments,0):[],this._updateAgileUrl.apply(this,e),oe(e[0])},t.prototype.loadAndRenderView=function(e,t){var n,r;return null!=(n=this.subscription)&&n.unsubscribe(),this.subscription=this.load(t).subscribe((r=this,function(n){return r.renderViewAndListen(e,t,n)}),function(e){return ae(e)})},t.prototype.load=function(e){var t,n,r,a,o,i,s,c,p,u;return t=[],s={},e&&(c=[this.smartGroupModel.get("type"),"custom"].join("."),a=(i=_(e,this.projectModel.id,c).take(2).partition(function(e,t){return 0===t}))[0],p=i[1],r=a.take(1).toPromise(),t.push(r.then(function(e){return s.customViewData=e})),this.subscribe(p.filter(Boolean).do((u=this,function(e){var t;return t=e._id,u.loadAndRenderView(null,t)})))),(this.isStoryView()||this.isBugView())&&(n=k.warehouse.resolveFetch(l,this.projectModel.id,{boundToObjectType:"application"}),t.push(n.then(function(e){return s.customFieldLinks=e}))),o=B().debounceTime(80).map(function(e){var t,n;return n=e.boardViewType,t=C.extend({viewType:n},e),C.extend({},s,{board:t})}),h.from(Promise.all(t)).concatMapTo(o)},t.prototype.renderViewAndListen=function(e,t,n){return this.renderView(e,t,n),this.stopListening(),this.listenTo(this.projectModel,"change:applications",function(){return this.renderView(e,t,n)})},t.prototype.isSprintView=function(){var e;return null!=(e=this.smartGroupModel)?e.isSprint():void 0},t.prototype.isStoryView=function(){var e;return null!=(e=this.smartGroupModel)?e.isStory():void 0},t.prototype.isBugView=function(){var e;return null!=(e=this.smartGroupModel)?e.isBug():void 0},t.prototype.getCurrentViewType=function(){var e;return D(null!=(e=this.smartGroupModel)?e.get("type"):void 0)},t.prototype.getDefaultUrlParams=function(){var e,t,n,r,a;return t=O(this.projectModel.id,this.getCurrentViewType()),(a=this.viewId||t)?{agileType:null!=(r=this.smartGroupModel)?r.get("type"):void 0,viewId:a}:this.isSprintView()?(n=ne.getState().ui.sprintPanel,e=this.projectModel.id===n.projectId&&n.currentSprint||"all",{agileType:"sprint",viewSection:this.currentViewSection||e}):this.isStoryView()?{agileType:"story",viewSection:this.currentViewSection||j(this.projectModel.id,this._smartGroupId)}:this.isBugView()?{agileType:"bug",viewSection:this.currentViewSection||j(this.projectModel.id,this._smartGroupId)}:null},t.prototype.getTargetView=function(e){switch(e){case"table":return b;case"kanban":return u;case"list":return f;default:return b}},t.prototype.render=function(){return this.renderBasic(),this.renderPanel(),this.loadAndRenderView(this.currentViewSection,this.currentViewId)},t.prototype.renderBasic=function(){return this.$el.html(a()),this.$viewWrapper=this.$(".agile-view-wrapper"),this.$leftPanelWrapper=this.$(".agile-panel-wrapper")},t.prototype.renderView=function(e,t,n){var r,a,o,i,s,l,c,p,u,d;if(null!=(s=this.currentView)&&s.remove(),this.renderBoardTopView(n),n.board.viewType){if(this.isSprintView())r=this.getDisableSprintHandlers(),(o=Boolean(n.customViewData))?(p=N(n.customViewData),c=C.pick(n.customViewData,"_id","filter")):(p=e,c=this.smartGroupModel.pick("_id","filter")),"all"!==p&&p?"unplanned"===p?this.currentViewContext=U(this.projectModel.get("_organizationId"),this.projectModel.id,c,{isCustomView:o,taskLayer:n.board.taskLayer}):o?this.currentViewContext=V(this.projectModel.get("_organizationId"),this.projectModel.id,c,p,{isCustomView:!0,viewType:n.board.viewType,taskLayer:n.board.taskLayer}):(i=!0,this.currentViewContext={viewType:n.board.viewType,viewOptions:{}}):this.currentViewContext=R(this.projectModel.get("_organizationId"),this.projectModel.id,c,{isCustomView:o,taskLayer:n.board.taskLayer});else switch(n.board.viewType){case"table":this.currentViewContext=this.handleStoryOrBugViewContext({commonGroupType:this.smartGroupModel.get("type"),commonGroupId:e||void 0,customViewData:n.customViewData,customFieldLinks:n.customFieldLinks,board:n.board});break;case"list":this.currentViewContext=this.handleStoryOrBugListViewContext(e,t,n);break;case"kanban":this.currentViewContext=this.handleStoryOrBugKanbanViewContext(e,t,n);break;default:return void ae(RangeError(n.board.viewType+" is invalid board view type"))}if(Object.assign(this.currentViewContext.viewOptions,{customViewId:t,updateUrl:this.updateAgileUrlFromView.bind(this),updateUrlOnOpenTaskDetail:this.updateUrlOnOpenTaskDetail.bind(this),useDraggableConfigure:!0,taskflowEnabled:this.projectModel.isTaskflowEnabled(),enableSprintFeature:this.projectModel.isSprintEnabled(),disableSprintHandlers:r,defaultCellDescriptorList:I[this.appName]}),(l=M(this.smartGroupModel.toJSON(),this.scenarioFieldConfigCollection.toJSON()))&&Object.assign(this.currentViewContext.viewOptions,{smartGroupQuery:l}),d=this.getTargetView(this.currentViewContext.viewType),i){if(!this.currentViewContext.viewType)return;u=Object.assign({_sprintId:p,targetView:d,viewType:n.board.viewType,taskLayer:n.board.taskLayer,_organizationId:this.projectModel.get("_organizationId"),_projectId:this.projectModel.id,smartGroupSnippet:c,isIterationSprint:this.isIterationSprint(n.board.laneType,n.board.viewType),disableTaskCreate:!this.projectModel.hasPermission("task.post")},this.currentViewContext.viewOptions),this.currentView=this.requestSubView(v,u)}else this.currentView=this.requestSubView(d,this.currentViewContext.viewOptions);if(this.currentView.$el.appendTo(this.$viewWrapper),t&&w(this.smartGroupModel.toJSON(),!0),!0,this.isSprintView()){if(!(a=this.$(".sprint-planning").get(0)))return;this.requestReactView(a,g,{onVisibleChange:(f=this,function(e){var t;return t="sprint-planning-modal-opened",e&&!f.$el.hasClass(t)?f.$el.addClass(t):f.$el.removeClass(t)})},{redux:!0})}var f;return te(this.projectModel.toJSON(),this.smartGroupModel.toJSON())?z({project:this.projectModel.toJSON()}):void 0}},t.prototype.isIterationSprint=function(e,t){return e===o.iterationSprint&&t!==s.Table},t.prototype.getDumpTasksPermission=function(){return[this.tasklistsCollection.every(function(e){return e.hasPermission("get.dumpTasks")})].every(function(e){return e})},t.prototype.renderBoardTopView=function(e){try{return this._renderBoardTopView(e)}catch(t){}},t.prototype._renderBoardTopView=function(e){var t,n,r,a,o,s;return Boolean(e.customViewData)?t=null!=(n=e.customViewData.view)?n.horizontal:void 0:(t=e.board.laneType,o=e.board.viewType),this.requestReactView(this.$viewWrapper.get(0),i,{customViewId:null!=(r=e.customViewData)?r._id:void 0,tasklistId:void 0,showAsKanban:!1,smartGroupId:this._smartGroupId,smartGroupType:this.smartGroupModel.get("type"),projectId:this.projectModel.id,projectModel:this.projectModel,appName:this.appName,showStatusSelector:"story"!==(a=this.appName)&&"bug"!==a,exportTasksPermission:this.getDumpTasksPermission(),isScrumWithTopTask:this.isIterationSprint(t,o),headCell:m.createElement(d,{path$:P(),withFold:!0}),getDefaultScenarioFieldId:(s=this,function(){var e;return null!=(e=s.scenarioFieldConfigModel)?e.id:void 0}),disableSaveSortTemplate:!0,isPresentationModeSupported:!1,getPresetFilters:K[this.appName]},{redux:!0})},t.prototype.parseCommonGroup=function(e,t,n,r){var a,o,i,s,l,c,u,d;return c={},e?(s={type:"commongroup",subtype:t},(i=null!=n?n.findWhere(s):void 0)?(a=i.get("_customfieldId"),l=function(e){var t;return t={_id:e._id,title:e.value},C.extend({},s,{value:[t],_customfieldId:a})},e===p.All?(c.isUncategorizedCommonGroup=!1,r&&(u=C.findWhere(r,{_customfieldId:a}))&&!u.required&&(d=A(i.toJSON()),c.commonGroupCustomFieldValue=l(d),c.commonGroup=d),c):(o={_id:e},(d=C.findWhere(i.get("choices"),o))&&(c.isUncategorizedCommonGroup=F(d),c.commonGroupCustomFieldValue=l(d),c.commonGroup=d),c)):c):c},t.prototype.handleStoryOrBugViewContext=function(e){var t,n,r,a,o,i,s,l,c,p,u,d,f,h,m,g;return a=e.commonGroupType,n=e.commonGroupId,i=e.customViewData,o=e.customFieldLinks,t=e.board,h=i?C.pick(i,"_id","filter"):this.smartGroupModel.pick("_id","filter"),p=this.parseCommonGroup(n,a,o,null!=(u=this.scenarioFieldConfigModel)?u.get("scenariofields"):void 0),r=C.extend({commonGroupId:n},p),c=C.extend(r,{board:t}),f=(m=function(){switch(a){case"story":return W;case"bug":return G;default:return ae("handleStoryOrBugViewContext: invalid type "+a)}}()(this.projectModel.get("_organizationId"),this.projectModel.id,h,null!=(d=this.scenarioFieldConfigModel)?d.id:void 0,c)).viewOptions,l=f.onGroupExpand,s=f.onGroupCollapse,Object.assign(m.viewOptions,{onGroupExpand:(g=this,function(){var e;return e=1<=arguments.length?le.call(arguments,0):[],"function"==typeof l&&l.apply(null,e),g.onToggleTableGroupGta.apply(g,e)}),onGroupCollapse:function(e){return function(){var t;return t=1<=arguments.length?le.call(arguments,0):[],"function"==typeof s&&s.apply(null,t),e.onToggleTableGroupGta.apply(e,t)}}(this)}),m},t.prototype.handleStoryOrBugListViewContext=function(e,t,n){var r,a,o,i,s;return r={_projectId:this.projectModel.id,_tasklistId:void 0},i={},n.customViewData?i.smartGroup=n.customViewData:e===p.All?i.smartGroup=this.smartGroupModel.toJSON():e&&(a=e,o=this.parseCommonGroup(a,this.smartGroupModel.get("type"),n.customFieldLinks,null!=(s=this.scenarioFieldConfigModel)?s.get("scenariofields"):void 0),C.assign(i,{commonGroupId:a},o),i.commonGroupApp=this.smartGroupModel.toJSON()),H(r,i)},t.prototype.handleStoryOrBugKanbanViewContext=function(e,t,n){var r,a,o,i,s;return o=this.smartGroupModel.get("type"),r=e||void 0,a=this.parseCommonGroup(r,o,n.customFieldLinks,null!=(i=this.scenarioFieldConfigModel)?i.get("scenariofields"):void 0),a=C.assign({commonGroupId:r},a),q({organizationId:this.projectModel.get("_organizationId"),projectId:this.projectModel.id,smartGroupId:this._smartGroupId,scenarioFieldConfigId:null!=(s=this.scenarioFieldConfigModel)?s.id:void 0,board:n.board,commonGroupOptions:a,customView:n.customViewData})},t.prototype.renderPanel=function(){var e;if(this.projectModel)return this.currentViewId?E(this.currentViewId,this.projectModel.id,this.getCurrentViewType()):this.isSprintView()?(x(this.currentViewSection),e=this.getDisableSprintHandlers()):(this.isStoryView()||this.isBugView())&&T(this.currentViewSection),this.requestReactView(this.$leftPanelWrapper.get(0),r,C.extend({projectId:this.projectModel.id,smartGroupId:this._smartGroupId,smartGroupType:this.smartGroupModel.get("type"),scenarioFieldConfigs:this.scenarioFieldConfigCollection.toJSON(),isAdmin:this.projectModel.getRoleScope()>=1,hideCustomView:L(this.projectModel.toJSON(),this.smartGroupModel.toJSON()),onChooseSprint:this.onChooseSprint.bind(this),onChooseCommonGroup:this.onChooseCommonGroup.bind(this),onChooseView:this.onChooseView.bind(this)},e),{redux:!0})},t.prototype.updateUrlOnOpenTaskDetail=function(e){return this.updateAgileUrl({_taskId:e,agileType:this.smartGroupModel.get("type"),viewSection:this.currentViewSection})},t.prototype.updateAgileUrlFromView=function(e,t){return this.updateAgileUrl(e,t),this.updateRouteGta(e.viewSection)},t.prototype.updateRouteGta=function(e){var t;if(("story"===(t=this.smartGroupModel.get("type"))||"bug"===t)&&"all"===e)return re.gta.event({action:"open sprints tab",control:"Direct Button",projectid:this.projectModel.id,organizationid:this.projectModel.get("_organizationId")})},t.prototype.onToggleTableGroupGta=function(e){var t,n,r,a;return n=e.isCollapsed?"unfold":"fold",r=function(){switch(e.key){case y:return"Uncompleted Sprint";case c:return"Completed Sprint"}}(),a=this.smartGroupModel.get("type"),t=function(){switch(a){case"story":return"toggle story section";case"bug":return"toggle bug section"}}(),re.gta.event({action:t,category:n,segment:r,projectid:this.projectModel.id,organizationid:this.projectModel.get("_organizationId")})},t.prototype.onChooseSprint=function(e){return this.smartGroupModel.trigger("change:currentSprint",e),this.onChooseViewSection("sprint",e),E(null,this.projectModel.id,this.getCurrentViewType())},t.prototype.onChooseCommonGroup=function(e,t){var n;return this.onChooseViewSection(null!=(n=this.smartGroupModel)?n.get("type"):void 0,e,t),E(null,this.projectModel.id,this.getCurrentViewType())},t.prototype.onChooseView=function(e){var t;return this.currentViewId=e,this.currentViewSection=null,this.isStoryView()||this.isBugView()?T(null):this.isSprintView()&&x(null),this.updateAgileUrl({agileType:null!=(t=this.smartGroupModel)?t.get("type"):void 0,viewId:e},{replace:!0}),this.loadAndRenderView(this.currentViewSection,this.currentViewId)},t.prototype.onChooseViewSection=function(e,t,n){return this.currentViewSection=t,this.currentViewId=null,this.updateAgileUrl({agileType:e,viewSection:t,_smartGroupId:n}),this.loadAndRenderView(this.currentViewSection,this.currentViewId)},t.prototype.setGtaCurrentPage=function(){var e,t;if(t=this.smartGroupModel.get("type"),e=function(){switch(t){case"story":return"Story Page";case"sprint":return"Sprint Page";case"bug":return"Bug Page"}}())return window.setTimeout(function(){return re.gta.setCurrentPage(e)},0)},t.prototype.getDisableSprintHandlers=function(){var e,t;return{disableSprintCreate:!(e=(null!=(t=this.projectModel)?t.hasPermissions("sprint.post","sprint.put","sprint.delete","sprint.put.status","task.put.sprint"):void 0)||{}).sprintPost,disableSprintEdit:!e.sprintPut,disableSprintDelete:!e.sprintDelete,disableSprintChangeStatus:!e.sprintPutStatus,disableSprintPlanning:!e.taskPutSprint}},t.prototype.remove=function(){var e;return null!=(e=this.subscription)&&e.unsubscribe(),t.__super__.remove.apply(this,arguments)},t}()},"/SNw8Jel":function(e,t,n){"use strict";var r=n("mrSGxOB2"),a=n("q1tIBJhx"),o=n.n(a),i=n("TSYQbtd+"),s=n.n(i),l=n("a+N5u/Cl"),c=n.n(l),p=n("L0nmzSVV"),u=n("cs7E0gfm"),d=function(e){function t(t){var n=e.call(this,t)||this;return n.onMouseEnter=c.a.debounce(function(){n.setState({hiddenButton:!1})},100),n.onMouseLeave=c.a.debounce(function(){n.setState({hiddenButton:!0})},100),n.onClickFoldIndicator=function(){n.props.actions.toggleIndicator({useIndicator:!0})},n.state={hiddenButton:!0},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.props.actions.initialize({identityKey:this.props.identityKey,withLeftPanel:this.props.withLeftPanel,withLeftPanelFolded:this.props.withLeftPanelFolded})},t.prototype.componentWillUnmount=function(){this.props.actions.destroy(),this.onMouseEnter.cancel&&this.onMouseEnter.cancel(),this.onMouseLeave.cancel&&this.onMouseLeave.cancel()},t.prototype.renderFoldIndicator=function(){var e=this.props.isFolded,t=e?p.a.RIGHT:p.a.LEFT;return o.a.createElement("div",{className:u["board-left-panel-indicator-wrapper"]},o.a.createElement(p.b,{direction:t,hiddenButton:!1,showLeft:!e,onClick:this.onClickFoldIndicator}))},t.prototype.renderWidthSupporter=function(){return this.props.isFolded?null:o.a.createElement("div",{className:u["board-left-panel-width-supporter"]})},t.prototype.renderMain=function(){var e=s()(u["board-left-panel-main"],{folded:this.props.isFolded});return o.a.createElement("div",{className:e},this.props.children,this.renderFoldIndicator())},t.prototype.render=function(){var e=s()(u["board-left-panel"],{larger:this.props.larger});return o.a.createElement("div",{className:e,onMouseOver:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.renderMain(),this.renderWidthSupporter())},t.defaultProps={larger:!1},t}(o.a.PureComponent),f=n("/MKjzBat"),h=n("gorePX7J"),m=Object(f.connect)(function(e){return{isFolded:e.ui.board.taskBoard.withLeftPanelFolded}},{toggleIndicator:h.b.toggleIndicator}),g=n("fvjXLGkK"),v=n("fio7jWQ0");Object(v.addEpic)(h.e);var b=Object(f.connect)(function(e){return{isFolded:e.ui.board.taskBoard.withLeftPanelFolded}},function(e){return{actions:Object(g.bindActionCreators)({initialize:h.b.initialize,toggleIndicator:h.b.toggleIndicator,destroy:h.b.destroy},e)}})(d);n.d(t,"b",function(){return m}),n.d(t,"a",function(){return b}),n.d(t,"c",function(){return h.a}),n.d(t,"d",function(){return h.d})},"/ab8lKMF":function(e,t,n){n("8+ADjsgh"),e.exports=n("p9MRCN7c").Object.keys},"01RW7bKJ":function(e,t,n){},"0T/aeGnq":function(e,t,n){var r=n("2jw7JyIR"),a=n("p9MRCN7c"),o=n("vCXkxmw9"),i=n("jOCL5Ykd"),s=function(e,t,n){var l,c,p,u=e&s.F,d=e&s.G,f=e&s.S,h=e&s.P,m=e&s.B,g=e&s.W,v=d?a:a[t]||(a[t]={}),b=v.prototype,y=d?r:f?r[t]:(r[t]||{}).prototype;for(l in d&&(n=t),n)(c=!u&&y&&void 0!==y[l])&&l in v||(p=c?y[l]:n[l],v[l]=d&&"function"!=typeof y[l]?n[l]:m&&c?o(p,r):g&&y[l]==p?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(p):h&&"function"==typeof p?o(Function.call,p):p,h&&((v.virtual||(v.virtual={}))[l]=p,e&s.R&&b&&!b[l]&&i(b,l,p)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},"0ssihcRZ":function(e,t){},"1077v0Sy":function(e,t){t.f={}.propertyIsEnumerable},"14Ie4PSQ":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"1F4EpJQn":function(e,t,n){},"1gQuewph":function(e,t,n){n("GTiDT1cb"),e.exports=n("p9MRCN7c").Array.isArray},"1s1SYK9Z":function(e,t,n){e.exports={avatar:"avatar__17ub","avatar-circle":"avatar-circle__1yX6","avatar-square":"avatar-square__3FiJ","avatar-small":"avatar-small__2_w1","avatar-medium":"avatar-medium__1x-b","avatar-large":"avatar-large__1Czz","avatar-xlarge":"avatar-xlarge__3-MC"}},"20bRKFp+":function(e,t,n){},"27X4ogYR":function(e,t,n){var r,a,o,i,s,l,c,p,u,d,f,h,m,g,v,b,y,k,S,C,w,I,T,E,x,M,_,D,O,P,N,j,A,L,F,B,G,V=function(e,t){return function(){return e.apply(t,arguments)}},R={}.hasOwnProperty;E=n("a+N5u/Cl"),B=n("sa1Ed382"),(P=n("GESwhXbR")).Alert,S=P.Toast,i=n("bZr3G77e"),h=n("HYobN8SQ"),C=n("3eMzznN/"),N=n("90U+kJWN"),x=N.absortExecutorToInvolveMembers,O=N.getExecutor,T=n("OmupbwLD"),w=n("vmWJWrVe"),M=n("T6KpLPMz").correctRecurrence,j=n("CfyenDut"),_=j.formatNote,G=j.toMarkdown,b=n("oq1bWpp9"),f=n("77NnVLwu"),n("gBe2F1Rz"),l=n("odY26VIi"),k=n("ioaOqjIU"),s=n("7UQIdnmo"),A=n("8KNpsyVU"),L=A.showVerifyBindModal,D=A.getAccountBind,c=n("vNWLjLJF"),p=n("BsTK5jZO"),u=n("n2Lzi2oi"),d=n("QaVTsF4c"),v=n("v/MBtkV8"),y=n("tGAhh72B"),m=n("Q9LxqKX5"),I=n("+h7VEZku").VisibilityController,g=n("1gEXmjU5").TaskExecutor,a=n("zNd+vZ/0").DatePickerWithRemoveShortcut,r=n("nvGY+w0G"),o=n("qgDNSjYY"),F=null,e.exports=function(e){function t(){return this.onDateSelect=V(this.onDateSelect,this),this.inviteMoreMember=V(this.inviteMoreMember,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)R.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,w),t.prototype.viewName="TaskCreatorView",t.prototype.className="task-creator fade",t.prototype.hotkeys={esc:"remove"},t.prototype.events={"keydown .task-content-input":"quickSubmit","change .task-content-input":"cacheTask","input .task-content-input":"validateTask","click .submit-handler":"submit","click .more-handler":"toggleMore","click a.priority-handler":"addPriorityGta","click a.repeat-handler":"toggleRepeatSelector"},t.prototype.initialize=function(e){return(null!=F?F.$el:void 0)&&F.remove(),!(!e._projectId&&!e._tasklistId)&&(F=this,this.options=e,this._projectId=e._projectId,this._tasklistId=e._tasklistId||this.getDefaultTasklist(e._projectId),this._stageId=e._stageId,this.priority=e.priority,this.scenarioFieldConfigId=e.scenarioFieldConfigId,this.tasksCollection=e.tasksCollection,this.membersCollection=l.get(this._projectId),this.localCache=h.namespace("temp").namespace("tasks_board"),this.localCacheId=e._projectId+"_"+B.user.id,this.showAllField=!1,this.scenarioConfig=null,this.requiredFieldsValidated=!0,this.subscribe(f.fetch$(this._projectId).do((t=this,function(e){return t.projectModel=e,t.initView()}))));var t},t.prototype.initView=function(){var e;return this.render().reset().initInvolve().renderTaskFieldConfig().renderVisible().renderReminder().renderDateHandlers().renderExecutor().renderRepeat().focus().cacheTask(),this.handleClickOutside(),this.fadeInTimer=E.delay((e=this,function(){var t;return null!=(t=e.$el)?t.addClass("in"):void 0})),B.gta.event(this.getGtaConfig({action:"add content"}))},t.prototype.reset=function(){var e,t;return t=this.localCache(this.localCacheId)||{},this.localCache(this.localCacheId)?this._executorId=this.localCache(this.localCacheId)._executorId:this._executorId=null!=(e=B.PREFERENCE.preferenceTempCache("task_creator"))?e._executorId:void 0,this.taskModel?(this.stopListening(this.taskModel),this.taskModel.set("content",""),C.removeItem(this.taskModel.get("involveMembers"),t._executorId)):this.taskModel=new b({_creatorId:B.user.id,_executorId:this._executorId,_projectId:this._projectId,_tasklistId:this._tasklistId,_stageId:this._stageId,priority:this.priority||t.priority||0,startDate:t.startDate||null,dueDate:t.dueDate||null,content:t.content||"",involveMembers:t.involveMembers||[B.user.id],visible:this.getTaskDefaultVisibility()}),this.$input.val(this.taskModel.get("content")),this.validateSubmit(),this.listenTo(this.taskModel,"change:content",this.validateSubmit),this.listenTo(this.taskModel,"change:_executorId",this.renderExecutor),this.listenTo(this.taskModel,"change:_executorId",function(e,t){return e.set("involveMembers",x(e.get("involveMembers"),t))}),this.listenTo(this.taskModel,"change:startDate change:dueDate",this.renderDateHandlers),this.listenTo(this.taskModel,"change:visible",this.renderVisible),this.listenTo(this.taskModel,"change:recurrence",this.renderRepeat),this},t.prototype.handleClickOutside=function(){var e,t;return e=[".modal",".popover-menu-view",".scenario-field-config-creator",".init-page-view",".tag-popover",".member-menu-view",".member-menu-component",".task-reminder-modal"],this.$el.handleClickOutside((t=this,function(e){var n,r;return"string"!=typeof(r=null!=(n=t.$input)?n.val().trim():void 0)||0===r.length?t.remove():t.handleClickOutside()}),"click",e.join(", "))},t.prototype.render=function(){return this.$el.html(r()),this.$input=this.$(".task-content-input"),this.$executorHandler=this.$(".component-mount.executor"),this.$repeatHandler=this.$(".repeat-handler"),this.$submit=this.$(".submit-handler"),this.$visibleSwitchers=this.$(".creator-visible"),this.$taskFieldConfigWrapper=this.$(".task-field-config-wrapper"),this.$scenarioInfosWrapper=this.$(".scenario-creators-wrap"),this.$reminderWrapper=this.$(".task-reminder-wrap"),this},t.prototype.getDefaultTasklist=function(){var e;return null!=(e=k.get(this._projectId).at(0))?e.toJSON()._id:void 0},t.prototype.toggleMore=function(){return this.$el.toggleClass("show-more"),this.showAllField=!0,this.initScenarioConfigsView(),this},t.prototype.focus=function(){var e;return E.delay((e=this,function(){var t;return null!=(t=e.$input)?t.focusAtEnd():void 0}),100),this},t.prototype.selectExecutor=function(e){var t;return this._executorId=e,this.taskModel.set({_executorId:e}),t=this.taskModel.get("involveMembers"),e&&this.taskModel.set("involveMembers",E.union(t,[e])),this.focus(),B.gta.event(this.getGtaConfig({action:"change assignee"}))},t.prototype.initInvolve=function(){return this.$(".involve-view").remove(),this.involveView=this.requestSubView(c,{_projectId:this._projectId,objectModel:this.taskModel,resident:[B.user.id],where:"creator",enableInvite:this.projectModel.hasPermission("post.member")}),this.involveView.$el.prependTo(this.$(".involve-wrap")),this},t.prototype.renderPriorityAndTag=function(){return this.scenarioConfig={scenariofields:[{fieldType:"priority"},{fieldType:"tag"}]},this.$scenarioInfosWrapper.addClass("more-set"),this.initScenarioConfigsView()},t.prototype.renderTaskFieldConfig=function(){var e;return!this.projectModel.get("_organizationId")&&B.user.payment.isFree?(this.renderPriorityAndTag(),this):(null!=(e=this.taskFieldConfigView)&&e.remove(),this.taskFieldConfigView=this.requestSubView(v,{projectModel:this.projectModel,_tasklistId:this._tasklistId,_configId:this.scenarioFieldConfigId,popupNested:!1}),this.taskFieldConfigView.$el.prependTo(this.$taskFieldConfigWrapper),this.stopListening(this.taskFieldConfigView,"setConfig"),this.listenTo(this.taskFieldConfigView,"setConfig",this.setTaskFieldConfig),this)},t.prototype.setTaskFieldConfig=function(e){var t;return this.scenarioConfig=e,null!=(t=this.taskModel)&&t.set({_scenariofieldconfigId:e._id}),this.initScenarioConfigsView()},t.prototype.initScenarioConfigsView=function(){var e,t,n,r,a;return null!=(t=this.scenarioInfosView)&&t.remove(),r=null!=(n=this.scenarioConfig)?n.scenariofields.filter((a=this,function(e){return a.showAllField?e.required||["priority","tag"].indexOf(e.fieldType)>=0:e.required})):void 0,e=[],void 0!==this.priority&&e.push("priority"),this.scenarioInfosView=this.requestSubView(y,{objectModel:this.taskModel,projectModel:this.projectModel,boundToObjectType:"task",displayType:"taskCard",scenarioFields:r,extraFieldTypes:e}),this.scenarioInfosView.$el.prependTo(this.$scenarioInfosWrapper),this.stopListening(this.scenarioInfosView),this.listenTo(this.scenarioInfosView,"requiredFieldsChanged",this.validateRequiredFields)},t.prototype.toggleRepeatSelector=function(e){var t,n,r,a;return B.gta.event(this.getGtaConfig({action:"set repeat"})),n="toggleRepeatSelector",(t=$(e.currentTarget)).data(n)?this:(t.data(n,!0),null!=(r=this.repeatSelectorView)&&r.remove(),this.repeatSelectorView=this.requestSubView(d,{$toggler:t,recurrence:this.taskModel.get("recurrence"),select:(a=this,function(e,t){return null==t&&(t={}),a.taskModel.set("recurrence",e),B.gta.event(a.getGtaConfig({action:"select repetition period",category:t.gtaType}))})}).show(),this)},t.prototype.switchVisible=function(e){return this.taskModel.set({visible:e}),B.gta.event(this.getGtaConfig({action:"Toggle visibility",category:e}))},t.prototype.getTaskDefaultVisibility=function(){var e,t,n;switch(null!=(e=this.projectModel.get("taskDefaultInvolvesVisibility"))?e.involvesVisibility:void 0){case"all":return"involves";case"partial":return n=null!=(t=this.projectModel.get("taskDefaultInvolvesVisibility"))?t.tasklistIds:void 0,E.contains(n,this._tasklistId)?"involves":"members";default:return"members"}},t.prototype.renderVisible=function(){return this.requestReactView(this.$visibleSwitchers.get(0),I,{visibility:this.taskModel.get("visible"),onChange:this.switchVisible.bind(this)}),this},t.prototype.renderReminder=function(){var e;return null!=(e=this.reminderView)&&e.remove(),this.reminderView=this.requestSubView(m,{taskModel:this.taskModel,isSet:!0}),this.reminderView.$el.prependTo(this.$reminderWrapper),this},t.prototype.renderExecutor=function(){var e,t,n;return this.unmountReact(this.$executorHandler.get(0)),e=O(this._executorId,null!=(t=this.membersCollection)?t.toJSON():void 0,this.taskModel),this.requestReactView(this.$executorHandler.get(0),g,{executor:e,contextId:p.getContextId({_projectId:this._projectId,_organizationId:this.projectModel.get("_organizationId")}),disabled:!1,inviteShowed:this.projectModel.hasPermission("post.member"),onClickRemove:(n=this,function(){return n.selectExecutor("")}),inviteMoreMember:this.inviteMoreMember,isExperiencedUser:B.user.isExperiencedUser(),onSelect:function(e){return function(t){return e.selectExecutor(t),e.renderExecutor(),B.gta.event(e.getGtaConfig({action:"select assignee"}))}}(this)}),this},t.prototype.inviteMoreMember=function(){var e;if(this.projectModel)return D(this.projectModel.get("_organizationId")).then((e=this,function(t){return t?(e.requestSubView(T).open(s,{projectModel:e.projectModel,qrCodeType:"project"}),B.gta.event({action:"begin add member",control:"Member Menu"})):(L(),B.gta.event({action:"invitation blocked",page:"Tasks Page",type:"project"}))})),this},t.prototype.renderDateHandlers=function(){var e;return e=this.projectModel.isAppEnabled("startDate"),this.$(".task-date-wrap").html(o({isStartTimeEnabled:e})),this.$startDate=this.$(".component-mount.start-date"),this.$dueDate=this.$(".component-mount.due-date"),e&&this.renderDatePicker(this.$startDate.get(0),"startDate"),this.renderDatePicker(this.$dueDate.get(0),"dueDate"),this},t.prototype.genDatetimeGta=function(e){var t;if(null==e&&(e={}),t={},this.projectModel&&(t.projectid=this.projectModel.id),this.projectModel.get("_organizationId"))return t.organizationid=this.projectModel.get("_organizationId")},t.prototype.onDateSelect=function(e,t){return this.taskModel.set(e,t)},t.prototype.renderDatePicker=function(e,t){var n,r;return n=function(){switch(t){case"startDate":return{endDate:this.taskModel.get("dueDate"),onOpen:(e=this,function(){return B.gta.event(e.genDatetimeGta({action:"edit start date"}))})};case"dueDate":return{startDate:this.taskModel.get("startDate"),onOpen:function(e){return function(){return B.gta.event(e.genDatetimeGta({action:"edit due date"}))}}(this)}}var e}.call(this),this.requestReactView(e,a,E.extend(n,{date:this.taskModel.get(t),type:t,withIcon:!0,placement:"bottomLeft",onChange:(r=this,function(e){var n;return n=e.dateString,r.onDateSelect(t,new Date(n)),r.focus()}),onClear:function(e){return function(){return e.onDateSelect(t,null)}}(this),onClickRemove:function(e){return function(){return e.onDateSelect(t,null)}}(this),onInvalid:function(){return S.error(tb_i18n.get("time.setting.error"))}}))},t.prototype.renderRepeat=function(){var e,t;return e=(t=this.taskModel.getRepeatTitle())?"addClass":"removeClass",this.$repeatHandler[e]("has-value").find(".repeat-text").text(t||tb_i18n.get("repeat.freq.NO")),this},t.prototype.quickSubmit=function(e){return 13===e.keyCode&&(e.preventDefault(),this.submit()),this},t.prototype.cacheTask=function(){var e;return(e=this.taskModel.toJSON()).content=this.$input.val().trim(),this.localCache(this.localCacheId,e.content?e:null),this},t.prototype.validateTask=function(){var e;return e=this.$input.val().trim(),this.taskModel.set({content:e}),this.validateSubmit(),this.editTaskTitleGta()},t.prototype.editTaskTitleGta=E.once(function(){return B.gta.event(this.getGtaConfig({action:"edit title"}))}),t.prototype.submit=function(e){var t,n;if(null!=e&&e.preventDefault(),!this.$submit.prop("disabled"))return t=this.$input.val().trim(),(n=E.compact(t.split(/\r\n|\r|\n/)).map(function(e){return e.trim()})).length>1?this.createMultipleTasks(n,t):1===n.length?this.createTask(t):this.focus(),this},t.prototype.getNoteData=function(){var e,t,n,r;return n=null!=(r=this.scenarioConfig)?r.scenariofields.find(function(e){return"note"===e.fieldType}):void 0,t=this.taskModel.get("note")||"",n&&n.default?(e=G(_(t,"html")),n.default+"\n"+e):t},t.prototype.createTask=function(e){var t,n;return this.disableSubmit(!0),(t=this.taskModel.toJSON()).content=e,t.note=this.getNoteData(),M(t),this.taskModel.clone().save(null,{url:null,attrs:t,wait:!0,error:(n=this,function(){return n.disableSubmit(!1)}),success:function(e){return function(t){var n;return B.PREFERENCE.cacheExecutorPreference(t.get("_executorId")),e.localCache.remove(e.localCacheId),e.disableSubmit(!1),e.reset(),"function"==typeof(n=e.options).success&&n.success(t),e.focus(),B.gta.event(e.getGtaConfig({action:"added content"})),B.gta.event(null,"click","add tasks success",1)}}(this)})},t.prototype.batchCreateTasks=function(e){var t,n;return this.disableSubmit(!0),(t=E.omit(this.taskModel.toJSON(),"content")).note=this.getNoteData(),M(t),i.post("tasklists/"+this.taskModel.get("_tasklistId")+"/import_tasks",E.extend(t,{tasks:e})).then((n=this,function(t){var r;return B.PREFERENCE.cacheExecutorPreference(n.taskModel.get("_executorId")),n.localCache.remove(n.localCacheId),n.reset(),n.disableSubmit(!1),"function"==typeof(r=n.options).success&&r.success(t),n.focus(),B.gta.event(null,"click","add tasks success",e.length)})).catch(function(e){return function(t){return e.disableSubmit(!1),S.error(t)}}(this))},t.prototype.createMultipleTasks=function(e,t){var n;return 50,e.length>50?this.requestSubView(u,{$toggler:this.$submit,title:tb_i18n.get("task.creator.multiple.too.many"),description:tb_i18n.get("task.creator.multiple.too.many.desc",50,e.length),cancelStr:tb_i18n.get("task.creator.multiple.too.many.confirm"),onCancel:(n=this,function(){return n.focus()})}).show():this.requestSubView(u,{$toggler:this.$submit,title:tb_i18n.get("task.creator.multiple"),description:tb_i18n.get("task.creator.multiple.desc",e.length),cancelStr:tb_i18n.get("task.creator.multiple.one"),confirmStr:tb_i18n.get("task.creator.multiple.all",e.length),onCancel:function(e){return function(){return e.createTask(t)}}(this),onConfirm:function(t){return function(){return t.batchCreateTasks(e)}}(this)}).show()},t.prototype.validateRequiredFields=function(e){return this.requiredFieldsValidated=e,this.validateSubmit()},t.prototype.validateSubmit=function(){var e;return e=[!!this.taskModel.get("content"),this.requiredFieldsValidated].every(function(e){return e}),this.disableSubmit(!e)},t.prototype.disableSubmit=function(e){return this.$submit.prop("disabled",e),this.$submit[e?"addClass":"removeClass"]("disabled"),this},t.prototype.getGtaConfig=function(e){return null==e&&(e={}),E.extend({control:"Stage List"},{type:"task",projectId:this.projectModel.id,organizationId:this.projectModel.get("_organizationId")},e)},t.prototype.remove=function(){var e;return null!=(e=this.options)&&"function"==typeof e.beforeClose&&e.beforeClose(),clearTimeout(this.fadeInTimer),t.__super__.remove.apply(this,arguments)},t}()},"2jw7JyIR":function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"2wwy0/iv":function(e,t,n){e.exports=n("x2TBq91N")},"3Ju61Gsa":function(e,t,n){var r=n("0T/aeGnq"),a=n("z/NnslgL")(!1);r(r.S,"Object",{values:function(e){return a(e)}})},"3aStH+T4":function(e,t,n){var r,a,o,i,s,l,c,p,u,d,f,h,m,g,v,b,y,k,S,C={}.hasOwnProperty;i=n("2qRnoGmE"),r=n("+2RfZ2TT"),v=n("a+N5u/Cl"),k=n("sa1Ed382"),b=n("tLZJUYWX"),d=n("GESwhXbR").Toast,l=n("bZr3G77e"),m=n("vmWJWrVe"),h=n("3eMzznN/"),S=n("u//1fy1x").default,p=n("4bWDEe5E"),u=n("ioaOqjIU"),f=n("eubUSX4T"),g=n("o4N9kv/m"),y=n("i9UIJ32R"),c=y.ImportTasksPro,s=y.FileStatus,o=n("yzrhisjT"),n("TB/Xyh2N"),a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)C.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,m),t.prototype.viewName="ActivityImportTasksView",t.prototype.className="activity-panel-import-tasks",t.prototype.initialize=function(e){return this.projectModel=e.projectModel,this._projectId=this.projectModel.get("_id"),this.onTaskImportSuccess=e.onTaskImportSuccess,this.defaultTasklistId=null,this._file=null,this._status=s.preUpload,this._err={errMsg:null,errData:null,totalRows:null},this.load().then((t=this,function(e){var n,r,a,o,i;return n=null!=(r=e[0])?r:[],i=null!=(a=e[1])?a:[],t.configOptionValues=t.getConfigOptionValues(n),t.activeConfigOptionValue=t.configOptionValues[0],t.defaultTasklistId=null!=(o=i[0])?o._id:void 0,t.renderBasic(),t.renderTemplate(),t.listen(),t.initFileUpload()}));var t},t.prototype.load=function(){var e,t;return t=this.projectModel.isTaskflowEnabled(),e=p.genCacheId(this._projectId,"task"),Promise.all([h.warehouse.resolveFetch(p,e,{attrs:{withTaskflowstatus:t},boundToObjectType:"task"}),h.warehouse.resolveFetch(u,this._projectId)]).then(function(e){var t,n;return t=e[0],n=e[1],[null!=t?t.toJSON():void 0,null!=n?n.toJSON():void 0]})},t.prototype.getConfigOptionValues=function(e){return e.map(function(e){return{data:v.pick(e,"_id","name","icon"),label:e.name}})},t.prototype.listen=function(){var e;return e=["fileUploading","fileUploaded","fileParsed","fileFailed","fileCanceled"].join(" "),this.on(e,this.renderTemplate),this.listenTo(this.projectModel,"change:currentTasklistId",this.resetListening)},t.prototype.renderBasic=function(){return this.$el.html(o()),this.$triggerNode=this.$(".import-excel-trigger"),this.mountNode=this.$(".import-excel-wrapper")[0]},t.prototype.onEnter=function(){if(this._err.errMsg)return this.resetData(),this.renderTemplate()},t.prototype.resetListening=function(){return this.stopListening(),this.listen()},t.prototype.resetData=function(){return this._file=null,this._status=s.preUpload,this._err={errMsg:null,errData:null,totalRows:null}},t.prototype.initFileUpload=function(){var e,t,n;return t=new f([]),e=[".xls",".xlsx","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",".xml",".csv","text/xml","application/xml"].join(","),this.uploaderView=this.requestSubView(g,{auto:!0,collection:t,accept:e,notCheckProjectSizeLimit:!0,pick:{id:this.$triggerNode,multiple:!1},onStart:(n=this,function(){return n._status=s.uploading,n.trigger("fileUploading")}),onQueued:function(e){return function(t,n){return e.resetData(),e._file=t}}(this),onComplete:function(e){return function(t,n){var r,a;return e._status=s.uploaded,e.trigger("fileUploaded"),r=null!=t?t.fileType:void 0,a={downloadUrl:null!=t?t.downloadUrl:void 0,fileType:r,_tasklistId:e.projectModel.get("currentTasklistId")||e.defaultTasklistId,_scenariofieldconfigId:e.activeConfigOptionValue.data._id,importTask:!1},e.importTasks(a).then(function(t){return e._status=t._status,e._err=t._err,e.confirmData=t.confirmData,e._status===s.parsedError?("ExceedLimit: 500"===e._err.errMsg&&d.error(b.get("import.tasks.file.requirements.maxTaskCount",500)),"ParamError: _scenariofieldId"===e._err.errMsg&&d.error(b.get("import.tasks.parse.error.not.match")),e.trigger("fileFailed")):e._status===s.parsedSuccess?e.trigger("fileParsed"):void 0})}}(this)})},t.prototype.onClickDownloadTemplate=function(){var e;return e=i.API_HOST+"/tis/export/template?_scenariofieldconfigId="+this.activeConfigOptionValue.data._id,r.fileDownload(e).fail(function(e){}),this.gtaHandler("Download import template")},t.prototype.onSelectScenarioFieldConfigOption=function(e){return this.activeConfigOptionValue=e,this.renderTemplate()},t.prototype.renderTemplate=function(){var e;return e=this.projectModel.get("name"),this.requestReactView(this.mountNode,c,{status:this._status,file:this._file,errMsg:this._err.errMsg,errData:this._err.errData,totalRows:this._err.totalRows,configOptionValues:this.configOptionValues,activeConfigOptionValue:this.activeConfigOptionValue,projectName:e,onSelectScenarioFieldConfigOption:this.onSelectScenarioFieldConfigOption.bind(this),onClickDownloadTemplate:this.onClickDownloadTemplate.bind(this),onClickChooseFile:this.triggerUpload.bind(this),onClickConfirm:this.onClickSubmit.bind(this),onClickCancel:this.onClickCancel.bind(this)})},t.prototype.onClickCancel=function(){return this.resetData(),this.trigger("fileCanceled")},t.prototype.triggerUpload=function(){return this.$triggerNode.trigger("click")},t.prototype.onClickSubmit=function(){var e;return"tis/upload",new Promise((e=this,function(t,n){return l.post("tis/upload",e.confirmData,{silentError:!0,success:t,error:n})})).then(function(e){return function(t){if("success"===t.status)return"function"==typeof e.onTaskImportSuccess?e.onTaskImportSuccess(t.totalRows,e.activeConfigOptionValue.label):void 0}}(this))},t.prototype.importTasks=function(e){var t;return"tis/upload",new Promise(function(t,n){return l.post("tis/upload",e,{silentError:!0,success:t,error:n})}).then(function(t){var n,r,a;return a=null!=t?t.status:void 0,n=v.extend(e,{token:t.token,importTask:!0}),"failure"===a?"xml"===e.fileType?{_status:s.parsedError,_err:{errMsg:"errorParse",errData:null,totalRows:null},confirmData:null}:{_status:s.parsedError,_err:{errMsg:"errorFormat",errData:null!=(r=t.errors)?r.slice(0,100):void 0,totalRows:t.totalRows},confirmData:n}:{_status:s.parsedSuccess,_err:{errMsg:null,errData:null,totalRows:null},confirmData:n}}).catch((t=this,function(e){return 400===e.code?{_status:s.parsedError,_err:{errMsg:e.error,errData:null,totalRows:null}}:(t.resetData(),d.error(e.message))}))},t.prototype.gtaHandler=function(e,t){var n;return n={action:e},t&&(n.category=t),k.gta.event(n)},t}(),e.exports=S(a)},"48qxFpXA":function(e,t,n){},"4kmuRkXR":function(e,t,n){"use strict";n.r(t),n.d(t,"actions",function(){return C}),n.d(t,"reducer",function(){return w}),n.d(t,"epic",function(){return I});var r,a=n("mrSGxOB2"),o=n("6SzIBtPz"),i=n("NOGqly5s"),s=n("4c1CS0b3"),l=n("a+N5u/Cl"),c=n("s0r7VfKc"),p=n("gh8QIhMV"),u=n("oRqJmROU"),d=n("EtDCcJeX"),f=n("HDJEOtNh"),h=n("bvmrLhnu"),m=n("fcolQD49"),g=n("7AbqSH+U"),v=n("Jvpq/adM"),b={lanes:[],laneType:m.a.AxisType.noop,panes:[],paneType:m.a.AxisType.scenarioConfigStatus,filter:null,sortMethod:null,tags:[],scenarios:[],customFields:[],bucketsResult:{},tasks:[],tasksPermission:{},taskflows:[],stages:[],isMounted:!1,localUpdatedTaskCache:{}},y=function(e){return"KANBAN/"+e},k=function(e){return e+"/FAILURE"},S=function(e){return e+"/SUCCESS"},C={setSortMethod:Object(o.a)(y("SET_SORT_METHOD")),setFilter:Object(o.a)(y("SET_FILTER")),mount:Object(o.a)(y("MOUNT")),mountFailure:Object(o.a)(y(k("MOUNT"))),mountSuccess:Object(o.a)(y(S("MOUNT"))),unmount:Object(o.a)(y("UNMOUNT")),toggleAxis:Object(o.a)(y("TOGGLE_AXIS")),updateTask:Object(o.a)(y("UPDATE_TASK")),updateTaskMove:Object(o.a)(y("UPDATE_TASK_MOVE")),updateTaskStatus:Object(o.a)(y("UPDATE_TASK_STATUS")),updateTaskScenarioFieldConfig:Object(o.a)(y("UPDATE_TASK_CONFIG")),localUpdateTask:Object(o.a)(y("LOCAL_UPDATE_TASK")),localUpdateTaskSuccess:Object(o.a)(y(S("LOCAL_UPDATE_TASK"))),localUpdateTaskFailure:Object(o.a)(y(k("LOCAL_UPDATE_TASK"))),updateSelectedTaskflow:Object(o.a)(y("UPDATE_SELECTED_TASKFLOW")),onBeforeDragStart:Object(o.a)(y("ON_BEFORE_DRAG_START")),onDragEnd:Object(o.a)(y("ON_DRAG_END"))},w=Object(o.b)(((r={})[""+C.setSortMethod]=function(e,t){var n=t.payload;return n?a.a({},e,{sortMethod:n.sortMethod||b.sortMethod}):e},r[""+C.setFilter]=function(e,t){var n=t.payload;return n?a.a({},e,{filter:n.filter||b.filter}):e},r[""+C.mountSuccess]=function(e,t){var n=t.payload;return n?a.a({},e,{customFields:n.customFields||b.customFields,isMounted:!0,scenarios:n.scenarios||b.scenarios,tags:n.tags||b.tags,tasks:n.tasks||b.tasks,tasksPermission:n.tasksPermission,taskflows:n.taskflows||[],stages:n.stages||[],bucketsResult:n.bucketsResult||{}}):e},r[""+C.unmount]=function(){return b},r[""+C.localUpdateTask]=function(e,t){var n=t.payload;if(!n)return e;var r=n.taskId,o=n.content,i=e.tasks,s=e.localUpdatedTaskCache,l=a.a({},s),c=i.map(function(e){return e._id===r?(l[r]=e,a.a({},e,o)):e});return a.a({},e,{localUpdatedTaskCache:l,tasks:c})},r[""+C.localUpdateTaskSuccess]=function(e,t){var n=t.payload;if(!n)return e;var r=n.taskId,o=l.omit(e.localUpdatedTaskCache,r);return a.a({},e,{localUpdatedTaskCache:o})},r[""+C.localUpdateTaskFailure]=function(e,t){var n=t.payload;if(!n)return e;var r=n.taskId,o=e.tasks,i=e.localUpdatedTaskCache,s=o.map(function(e){return e._id===r?i[r]:e}),c=l.omit(i,r);return a.a({},e,{localUpdatedTaskCache:c,tasks:s})},r),b),I=Object(i.a)(function(e){return e.ofType(""+C.mount).filter(function(e){if(!e.payload)throw new Error("payload is not defined.");return Boolean(e.payload)}).switchMap(function(t){var n,r=t.payload,o=r.project,i=r.tasklistId,u=r.smartGroupId,m=r.smartGroupQuery,b=r.tasks$,y=r.pagedTasks$,k=r.organizationId,S=o._id,w=Object(h.isTaskflowEnabled)(o);if(y)n=y;else{var I=f.ProjectAccess.hasProjectPrivacyPermission(S);n=(b||(u?c.default.getSmartGroupProjectTasks(S,u,m.dbQuery,I,{urlQuery:m.apiQuery}).changes().map(function(e){return{tasks:e.filter(m.filter)}}):i?v.e(i).map(function(e){return{tasks:e}}):s.Observable.of({tasks:[]}))).map(function(e){return{tasks:e.tasks,bucketsResult:{}}})}var T=i?v.d(i):s.Observable.of([]),E=w?c.default.getTaskflows(S,!0).changes():s.Observable.of([]),x=w,M=g.taskPermissionGetter(),_=k?c.default.getTags(k,"organization").changes():s.Observable.of([]),D=s.Observable.combineLatest(_,v.c(S)).map(function(e){var t=a.f(e,2),n=t[0],r=t[1];return n.concat(r)}),O=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=s.Observable.merge.apply(s.Observable,a.h(e.map(function(e){var t=a.f(e,2),n=t[0],r=t[1];return n.map(function(e){var t=r(e).take(1);return t.mapTo(!1).startWith(!0)})}))).scan(function(e,t){return s.Observable.combineLatest(e,t).map(function(e){var t=a.f(e,2),n=t[0],r=t[1];return n||r}).distinctUntilChanged().publishReplay(1).refCount()}).switch().distinctUntilChanged().share();return[n.filter(Boolean),function(){return n.filter(l.negate(Boolean))}]}([e.ofType(""+C.onBeforeDragStart),function(){return e.ofType(""+C.onDragEnd).delay(1e3)}],[e.ofType(""+C.localUpdateTask),function(){return e.ofType(""+C.localUpdateTaskSuccess).delay(1e3)}]);return s.Observable.combineLatest(n.debounceTime(100),D,c.default.getScenarioFieldConfigs(S,"task",{withTaskflowstatus:x}),c.default.getCustomFieldLinks(S,"application").changes(),T,E,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{tasks:e[0].tasks,bucketsResult:e[0].bucketsResult,tags:e[1],scenarios:e[2],customFields:e[3],stages:e[4],taskflows:e[5]}}).pipe(d.c.interruptedDuring.apply(d.c,a.h(O))).concatMap(function(e){var t=e.tasks,n=void 0===t?[]:t,r=e.bucketsResult,a=e.tags,o=e.scenarios,i=e.customFields,l=e.stages,c=e.taskflows,p=n.reduce(function(e,t){return e[t._id]=M(t),e},{});return s.Observable.of(C.mountSuccess({tags:a,scenarios:o,customFields:i,tasks:n,tasksPermission:p,taskflows:c,stages:l,bucketsResult:r}))}).takeUntil(e.ofType(""+C.unmount)).catch(function(e){return Object(p.throwError)(e),s.Observable.of(C.mountFailure())})}).catch(function(e){return Object(p.throwError)(e),s.Observable.of(C.mountFailure())})},function(e,t){return e.ofType(""+C.updateTaskStatus).filter(function(e){return void 0!==e.payload}).switchMap(function(n){var r=n.payload,a=r.taskId,o=r.taskflowStatusId,i=r.pos,l=r.inSameTaskflowStatus;return("custom"===t.getState().ui.scrumPanel.sortMethod&&l&&"number"==typeof i?c.default.updateTaskPosTaskflowStatus(a,i):c.default.updateTaskTaskflowStatus(a,o,void 0,i)).map(function(){return C.localUpdateTaskSuccess({taskId:a})}).takeUntil(e.ofType(""+C.unmount)).catch(function(e){return Object(p.throwError)(e),s.Observable.of(C.localUpdateTaskFailure({taskId:a}))})})},function(e){return e.ofType(""+C.updateTask).filter(function(e){return Boolean(e.payload&&e.payload.changes)}).switchMap(function(t){var n=t.payload,r=n.taskId,a=n.changes;return c.default.updateTask(r,a).map(function(){return C.localUpdateTaskSuccess({taskId:r})}).takeUntil(e.ofType(""+C.unmount)).catch(function(e){return Object(p.throwError)(e),s.Observable.of(C.localUpdateTaskFailure({taskId:r}))})})},function(e){return e.ofType(""+C.updateTaskScenarioFieldConfig).filter(u.a).switchMap(function(t){var n=t.payload,r=n.taskId,a={_scenariofieldconfigId:n.scenarioFieldConfigId};return c.default.updateTaskScenarioFieldConfig(r,a).map(function(){return C.localUpdateTaskSuccess({taskId:r})}).takeUntil(e.ofType(""+C.unmount)).catch(function(e){return Object(p.throwError)(e),s.Observable.of(C.localUpdateTaskFailure({taskId:r}))})})},function(e){return e.ofType(""+C.updateTaskMove).filter(function(e){return void 0!==e.payload}).switchMap(function(t){var n=t.payload,r=n.taskId,a=n.changes;return v.j(r,a).map(function(){return C.localUpdateTaskSuccess({taskId:r})}).takeUntil(e.ofType(""+C.unmount)).catch(function(e){return Object(p.throwError)(e),s.Observable.of(C.localUpdateTaskFailure({taskId:r}))})})})},"5fohxi+U":function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},"6QBfePnW":function(e,t,n){var r,a,o,i,s=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=n("a+N5u/Cl"),a=n("3eMzznN/"),r=n("uHRdHWpl").default,t.filterOne=function(e,t){var n,r,a,o,s;if(t){if((null!=(n=t.scenarioIds)?n.length:void 0)&&!i.scenario(e,t.scenarioIds))return!1;if((null!=(r=t.tagIds)?r.length:void 0)&&!i.tag(e,t.tagIds))return!1;if((null!=(a=t.executorIds)?a.length:void 0)&&!i.executor(e,t.executorIds))return!1;if((null!=(o=t.creatorIds)?o.length:void 0)&&!i.creator(e,t.creatorIds))return!1;if(t.query&&!i.query(e,t.query))return!1;if(t.duedate&&!i.duedate(e,t.duedate))return!1;if(t.startdate&&!i.startdate(e,t.startdate))return!1;if(t.priority&&!i.priority(e,t.priority))return!1;if(t.created&&!i.created(e.created,t.created))return!1;if(t.customfields&&!i.customfields(e,t.customfields))return!1;if((null!=(s=t.sprintIds)?s.length:void 0)&&!i.sprints(e,t.sprintIds))return!1;if(t.taskflowStatuses&&!i.statuses(e,t.taskflowStatuses))return!1}return!0},i={scenario:function(e,t){return o.contains(t,e._scenariofieldconfigId)},tag:function(e,t){return 0===e.tagIds.length&&(e.tagIds=[""]),o.some(e.tagIds,function(e){return o.contains(t,e)})},executor:function(e,t){return o.contains(t,e._executorId||"")},creator:function(e,t){return o.contains(t,e._creatorId)},query:function(e,t){var n,r,i,s,l,c,p;return e.startDate&&(c=a.formatDate(e.startDate).dateString,p=a.formatDate(e.startDate).timeFormatString),e.dueDate&&(n=a.formatDate(e.dueDate).dateString,r=a.formatDate(e.dueDate).timeFormatString),s=t.toLowerCase(),(l=a.matchString(e.content.toLowerCase(),s)||a.matchString((e.note||"").toLowerCase(),s)||a.matchString(e.uniqueId.toString()||"",s)||a.matchString((c||"").toLowerCase(),s)||a.matchString((p||"").toLowerCase(),s)||a.matchString((n||"").toLowerCase(),s)||a.matchString((r||"").toLowerCase(),s))||(l=o.chain(e.customfields).filter(function(e){return"text"===e.type}).map(function(e){return e.values[0]}).some(function(e){return a.matchString((e||"").toLowerCase(),s)}).value()),(i=e.executor)&&!l&&(l=~i.name.toLowerCase().indexOf(s)),l},duedate:function(e,t){var n,a;return null==t&&(t=[]),!!o.isEmpty(t)||(a=r().startOf("minute"),n=[function(){return-1!==t.indexOf("today")&&a.isSame(e.dueDate,"day")},function(){return-1!==t.indexOf("overdue")&&(!(e.isDone||!e.dueDate)&&a.isAfter(e.dueDate))},function(){return-1!==t.indexOf("todo")&&!e.isDone},function(){return-1!==t.indexOf("done")&&e.isDone},function(){return-1!==t.indexOf("todayUpdate")&&(!!e.updated&&a.isSame(e.updated,"day"))}],o.some(n,function(e){return e()}))},startdate:function(e,t){var n,a;return null==t&&(t=[]),!!o.isEmpty(t)||!!e.startDate&&(a=e.startDate,n=[function(){return-1!==t.indexOf("today")&&r().isSame(a,"day")},function(){return-1!==t.indexOf("already")&&r().isAfter(a)},function(){return-1!==t.indexOf("ready")&&r().isBefore(a)}],o.some(n,function(e){return e()}))},priority:function(e,t){return null==t&&(t=[]),!!o.isEmpty(t)||-1!==t.indexOf(e.priority)},created:function(e,t){var n;return null==t&&(t=[]),!!o.isEmpty(t)||(n=[function(){return-1!==t.indexOf("today")&&r().isSame(e,"day")},function(){return-1!==t.indexOf("yesterday")&&r().subtract(1,"day").isSame(e,"day")},function(){var n;return-1!==t.indexOf("week")&&(n=r().subtract(7,"day"),r(e).isBetween(n,r(),"day","[]"))},function(){var n;return-1!==t.indexOf("month")&&(n=r().subtract(30,"day"),r(e).isBetween(n,r(),"day","[]"))},function(){var n,a,o,i,s;for("FROM-","TO-",n="",s="",a=0,i=t.length;a<i&&(~(o=t[a]).indexOf("FROM-")?n=o.slice("FROM-".length):~o.indexOf("TO-")&&(s=o.slice("TO-".length)),!n||!s);a++);return!(!n||!s)&&r(e).isBetween(n,s,"day","[]")}],o.some(n,function(e){return e()}))},customfields:function(e,t){var n,r,a,i,s,l,c,p,u;if(null==t&&(t={}),o.isEmpty(t))return!0;if(o.isEmpty(e.customfields))return!1;for(l in r=[],t)if(c=t[l],a=o.findWhere(e.customfields,{_customfieldId:l}))switch(a.type){case"dropDown":case"multipleChoice":n=o.some(a.values,function(e){return~c.indexOf(e)}),r.push(n);break;case"number":s=c[0],p=c[1],u=a.values[0],n=this.customfieldNumber(s,p,u),r.push(n);break;case"date":n=!!(i=a.values[0])&&this.customfieldDate(i,c),r.push(n)}else r.push(!1);return r.length>1?o.every(r,function(e){return e}):o.some(r,function(e){return e})},customfieldNumber:function(e,t,n){var r;return e=parseFloat(e),isNaN(e)&&(e=void 0),r=null==e||n>=e,t=parseFloat(t),isNaN(t)&&(t=void 0),r&&(null==t||n<=t)},customfieldDate:function(e,t){var n;return null==t&&(t=[]),n=[function(){return-1!==t.indexOf("today")&&r().isSame(e,"day")},function(){return-1!==t.indexOf("yesterday")&&r().subtract(1,"day").isSame(e,"day")},function(){var n;return-1!==t.indexOf("week")&&(n=r().subtract(7,"day"),r(e).isBetween(n,r(),"day","[]"))},function(){var n;return-1!==t.indexOf("month")&&(n=r().subtract(30,"day"),r(e).isBetween(n,r(),"day","[]"))},function(){var n,a,o,i,s;for("FROM-","TO-",n="",s="",a=0,i=t.length;a<i&&(~(o=t[a]).indexOf("FROM-")?n=o.slice("FROM-".length):~o.indexOf("TO-")&&(s=o.slice("TO-".length)),!n||!s);a++);return!(!n||!s)&&r(e).isBetween(n,s,"day","[]")}],o.some(n,function(e){return e()})},sprints:function(e,t){var n;return n=e._sprintId||"",s.call(t,n)>=0},statuses:function(e,t){return!!o.isEmpty(t)||o.chain(t).values().flatten().include(e._taskflowstatusId).value()}}},"6UKCU1RC":function(e,t,n){e.exports={"sprint-switcher-menu":"sprint-switcher-menu__2lHk","sprint-switcher-menu-item":"sprint-switcher-menu-item__32Ox"}},"6vz9yTy0":function(e,t,n){var r=n("SmhDd6I0"),a=n("EA7maB9W"),o=n("tLB3Q2NX"),i=a(function(e,t,n){return r(e,o(t)||0,n)});e.exports=i},"7K0vwIum":function(e,t){e.exports=function(e){var t='<a class="reminder-handler"> <span class="icon icon-alert-clock"></span> <span class="creator-handler-text reminder-text ';return e.hasTitle&&(t+="has-value"),t+='">'+e.reminderTitle+"</span></a>"}},"7PcElNMR":function(e,t,n){"use strict";var r=n("fFwOWM0g"),a=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),l=n.n(s),c=n("GESwhXbR"),p=n("sFaUJMZB"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.d(t,e),t.prototype.render=function(){return i.a.createElement("div",{className:p["error-hint"]},i.a.createElement(c.Icon,{name:"circle-remove"}),i.a.createElement("span",null,l.a.get("project.settings.taskflow.add.modal.name.error")))},t}(i.a.PureComponent),d=function(e){return{WebkitTransform:e,msTransform:e,transform:e}},f=n("s0r7VfKc"),h=function(e,t,n){var r=0,a=0,o=!1;return e.forEach(function(e){var o=e._id===t._id?n:e.kind;"start"===o?r++:"end"===o&&a++}),0===r&&(c.Toast.error(l.a.get("project.settings.taskflow.status.start.at.least.one.fail")),o=!0),0===a&&(c.Toast.error(l.a.get("project.settings.taskflow.status.end.at.least.one.fail")),o=!0),o},m=function(e,t){return void 0===t&&(t="task"),"testcase"===t?f.default.fetch.getTestflowStatusTestcaseCount(e,{status:"all"}):f.default.fetch.getTaskflowStatusTaskCount(e,{status:"all"})};n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return h}),n.d(t,"e",function(){return m})},"8+ADjsgh":function(e,t,n){var r=n("AYVP78ns"),a=n("djPm8zSj");n("wWUKyXWt")("keys",function(){return function(e){return a(r(e))}})},"8fTrCmNP":function(e,t,n){},"8iClMbHo":function(e,t,n){},"8v5WvJ9g":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"8wJHPua6":function(e,t,n){"use strict";n.r(t);var r=n("4kmuRkXR");n.d(t,"KanbanModule",function(){return r});var a=n("pFJPNtY8");n.d(t,"KanbanSelector",function(){return a});var o=n("7AbqSH+U");n.d(t,"KanbanHelper",function(){return o});var i=n("DI/R0+2S");for(var s in i)["KanbanModule","KanbanSelector","KanbanHelper","default"].indexOf(s)<0&&function(e){n.d(t,e,function(){return i[e]})}(s);var l=n("JcXuB+uV");n.d(t,"KANBAN_UNIT_WIDTH",function(){return l.g}),n.d(t,"KANBAN_PADDING",function(){return l.e}),n.d(t,"KANBAN_HEAD_CELL_HEIGHT",function(){return l.b}),n.d(t,"KANBAN_SCROLL_CONTAINER_CLS",function(){return l.f}),n.d(t,"KANBAN_INIT_PANE_LOADING_AMOUNT",function(){return l.c}),n.d(t,"KANBAN_MULTI_LANES_BODY_TOP",function(){return l.d}),n.d(t,"KANBAN_HAS_PERMISSION_CLS",function(){return l.a});var c=n("D4LzPOFJ");n.d(t,"updateTaskStageGta",function(){return c.i}),n.d(t,"updateTaskStatusGta",function(){return c.j}),n.d(t,"updateTaskPriorityGta",function(){return c.h}),n.d(t,"updateTaskConfigGta",function(){return c.g}),n.d(t,"updateStageListGta",function(){return c.e}),n.d(t,"updateStatusListGta",function(){return c.f}),n.d(t,"clickWarningGta",function(){return c.b}),n.d(t,"clickPaneCreator",function(){return c.a}),n.d(t,"createPaneSuccess",function(){return c.c}),n.d(t,"createTaskGta",function(){return c.d})},"9Wj7TJQu":function(e,t,n){var r=n("OtwAMvQ1"),a=n("D4nyOZu0"),o=n("djPm8zSj");e.exports=n("fZVSkaeT")?Object.defineProperties:function(e,t){a(e);for(var n,i=o(t),s=i.length,l=0;s>l;)r.f(e,n=i[l++],t[n]);return e}},"9cNzPlYz":function(e,t,n){var r,a,o,i,s,l,c,p,u,d,f,h,m={}.hasOwnProperty;n("vKEp+sif"),p=n("a+N5u/Cl"),o=n("4c1CS0b3").Observable,n("q1tIBJhx"),h=n("sa1Ed382"),l=n("vmWJWrVe"),c=n("OmupbwLD"),i=n("H5U46Bxa"),d=n("miKtJhEY").openOptionsSprint,f=n("s0r7VfKc").default,u=n("cVY30NxL").observeIsSprintEmpty,r=n("sTJhJlRY").EmptySprintPlaceholderConnect,s=n("HciYOsZ7"),a=n("Zs7E12yM"),t.SprintTaskBoardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)m.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,l),t.prototype.className="sprint-task-board-view",t.prototype.viewName="SprintTaskBoardView",t.prototype.initialize=function(e){var t,n,r,a,i,s,l,c,h;return this._sprintId=e._sprintId,this.targetView=e.targetView,t=e._organizationId,this._projectId=e._projectId,a=e.smartGroupSnippet,l=e.updateUrl,c=e.useDraggableConfigure,s=e.taskflowEnabled,this.disableSprintHandlers=e.disableSprintHandlers,r=e.smartGroupQuery,this.disableTaskCreate=e.disableTaskCreate,this.isIterationSprint=e.isIterationSprint,this.viewType=e.viewType,this.taskLayer=e.taskLayer,this.viewContext=d(t,this._projectId,a,this._sprintId,{taskLayer:this.taskLayer}),Object.assign(this.viewContext.viewOptions,{updateUrl:l,useDraggableConfigure:c,taskflowEnabled:s,disableSprintHandlers:this.disableSprintHandlers,smartGroupQuery:r}),i=f.getSprint(this._sprintId).changes().map(function(e){return e[0]}).distinctUntilChanged(function(e,t){return e.name===t.name&&e.status===t.status}),n=u(this._sprintId,this._projectId),this.subscribe(o.combineLatest(i,n).distinctUntilChanged(p.isEqual).do((h=this,function(e){var t,n;return n=e[0],t=e[1],h.sprint=n,h.isEmptySprint=t,h.render()})))},t.prototype.render=function(){var e,t;if(this.sprint){var n;if(null!=(t=this.bodyView)&&t.remove(),e=this.disableSprintHandlers.disableSprintPlanning,!this.isEmptySprint)return this.unmountReact(this.el),this.$el.html(s()),this.$body=this.$(".body"),this.bodyView=this.requestSubView(this.targetView,p.extend(this.viewContext.viewOptions,{onCreateTask:(n=this,function(){return h.gta.event(a.createTask({segment:n.viewType}))}),onCreateTaskSuccess:function(e){return function(){return h.gta.event(a.createTaskSuccess({segment:e.viewType}))}}(this)})),this.bodyView.$el.appendTo(this.$body);this.requestReactView(this.el,r,{projectId:this._projectId,planningSprintId:this._sprintId,disableSprintPlanning:e,openTaskCreator:this.openTaskCreator.bind(this),disableTaskCreate:this.disableTaskCreate,isIterationSprint:this.isIterationSprint},{redux:!0})}},t.prototype.openTaskCreator=function(e){return this.requestSubView(c).open(i,{_projectId:this._projectId,_sprintId:this._sprintId,scenarioFieldConfigId:e})},t}()},"A/Hplruc":function(e,t,n){"use strict";n.r(t),n.d(t,"ListView",function(){return o});var r=n("IBLCkgNc");n.d(t,"ListViewConnect",function(){return r.ListViewConnect});var a=n("NQM26xch");n.d(t,"actions",function(){return a.a}),n.d(t,"reducer",function(){return a.c}),n.d(t,"epic",function(){return a.b});var o=n("SYmvOELT")},A2GOFpyp:function(e,t,n){e.exports={"kanban-warning":"kanban-warning__263K","kanban-warning-modal":"kanban-warning-modal__1i5_","modal-title":"modal-title__1Gin","warning-text":"warning-text__1XpJ","warning-title":"warning-title__3DaE","warning-image-container":"warning-image-container__3L00","warning-image":"warning-image__3MHL","confirm-button-wrapper":"confirm-button-wrapper__1Ulg","sprint-trigger":"sprint-trigger__181N","tasklist-create-modal":"tasklist-create-modal__1k6i","hide-title":"hide-title__1NxL"}},ACkFyxJK:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},AWPEjAFo:function(e,t,n){},AYVP78ns:function(e,t,n){var r=n("5fohxi+U");e.exports=function(e){return Object(r(e))}},AoHv62LZ:function(e,t,n){e.exports=n.p+"images/sprint_completed@2x.cc141ae7.png"},"BCEHWaq/":function(e,t,n){},CHUlU4J8:function(e,t,n){t.TableBoardView=n("oEorxCFH").TableBoardView},CRfajq5X:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return p}),n.d(t,"e",function(){return u});var r=n("mrSGxOB2"),a=n("peh1clMB"),o=n("oPs7WnEA"),i=n("RIjxGFt6"),s=Object(a.createSelector)(function(e){return e.ui.scrumPanel.hasFilters},function(e){return e}),l=Object(a.createSelector)(function(e){return e.ui.board.boardViewType.boardViewAppId},function(e){return e.ui.board.boardViewType.boardMode},function(e){return e.ui.board.boardViewType.taskLayer},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.isUsingTaskLayer.apply(void 0,r.h(e))}),c=Object(a.createSelector)(function(e){return e.ui.scrumPanel.tql},function(e){return e.ui.scrumPanel.sortMethod},function(e,t){return{tql:e,sortMethod:t}}),p=function(e){var t=c(e),n=t.tql,r=t.sortMethod,a=Object(o.getOrderByTql)(r);return u(n,a)},u=function(e,t){return e&&e.length?e+" "+t:t}},Cg2ASZ1b:function(e,t,n){e.exports=n("guNDun8y")},D4LzPOFJ:function(e,t,n){"use strict";n.d(t,"i",function(){return o}),n.d(t,"j",function(){return i}),n.d(t,"h",function(){return s}),n.d(t,"g",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return p}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return h});var r=n("sa1Ed382"),a=n("fcolQD49"),o=function(e){r.gta.event({action:"move content",method:"drag",type:"task",note1:e})},i=function(){r.gta.event({action:"switch status",method:"drag"})},s=function(){r.gta.event({action:"switch priority",method:"drag"})},l=function(){r.gta.event({action:"switch task type",method:"drag"})},c=function(){r.gta.event({action:"reorder",control:"column Handler",method:"drag",type:"task stage"})},p=function(){r.gta.event({action:"reorder",control:"column Handler",method:"drag",type:"task state"})},u=function(){r.gta.event({action:"performance warning"})},d=function(e){r.gta.event({action:"add content",control:"new "+e+" button",type:"task "+e})},f=function(e){r.gta.event({action:"added content",control:"new "+e+" button",type:"task "+e})},h=function(e){var t,n=((t={})[a.a.AxisType.stage]="task stage",t[a.a.AxisType.taskflowStatus]="task flow",t[a.a.AxisType.scenarioConfigStatus]="task flow",t[a.a.AxisType.priority]="task priority",t[a.a.AxisType.scenarioConfig]="task type",t);r.gta.event({action:"add content",note1:n[e],type:"task",control:"Stage List"})}},D4nyOZu0:function(e,t,n){var r=n("b4pnW3jB");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},"DI/R0+2S":function(e,t){},DPiI26Ag:function(e,t,n){e.exports={title:"title__22Z6","common-view":"common-view__iHEI","basic-menu":"basic-menu__3hsE","clear-void":"clear-void__2jSo"}},DbHbb8aU:function(e,t,n){e.exports={"list-item":"list-item__2JBZ",priority:"priority__2AEm","priority-1":"priority-1__3ndr","priority-2":"priority-2__1qXv","list-item-content":"list-item-content__2Unx",avatar:"avatar__P6Yl","checkbox-fixed-width":"checkbox-fixed-width__3aW1",checkbox:"checkbox__1SqA","stage-or-status-name":"stage-or-status-name__3PD3","task-content":"task-content__1YPS","task-name":"task-name__dvqZ","parent-task-name":"parent-task-name__N7sR","field-icon":"field-icon__2LdC",date:"date__3FE8","list-title":"list-title__33bG"}},Drsbyrjq:function(e,t,n){"use strict";var r=n("mrSGxOB2"),a=n("q1tIBJhx"),o=n("ZFupaTh7"),i=n("JnDFXEIU"),s=function(e){function t(t){var n=e.call(this,t)||this;return n.cacheName=i.a+"."+n.props.projectId,n.onFetchPresetFields=function(){n.props.actions.getPresetFields()},n.onExports=function(e){var t=n.props,r=t.actions,a=t.tql,o=t.projectId;r.getProjectExport({tql:a,fileType:"csv",resourceType:"task",_projectId:o,fields:e.map(function(e){return e.id})})},n.onLoadMoreCustomFields=function(){n.props.actions.getMoreCustomFieldsInProject()},n.onSearchCustomFields=function(e){var t=n.props,r=t.projectId;t.actions.getCustomFieldsInProject({q:e,_projectId:r,ignoreFilter:!0})},n.onChangeSelectedFields=function(e){n.setState({selectedFields:e}),o.LSSelectedFieldsHelper.set(n.cacheName,e)},n.state={selectedFields:[]},n}return r.d(t,e),t.prototype.componentWillUnmount=function(){this.props.actions.exitPagination()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=e.presetFields;0===this.props.presetFields.length&&t.length>0&&this.loadLocalStorageCache(e)},t.prototype.loadLocalStorageCache=function(e){var t=e.presetFields,n=o.LSSelectedFieldsHelper.get(this.cacheName),r=n.length>0?n:t.filter(function(e){return e.isDefault});this.onChangeSelectedFields(r)},t.prototype.render=function(){var e=this.props,t=e.presetFields,n=e.customFields,i=e.hasMore,s=e.organizationId,l=e.actions,c=r.g(e,["presetFields","customFields","hasMore","organizationId","actions"]),p=r.a({},c,{presetFields:t,customFields:n,hasMore:i,selectedFields:this.state.selectedFields,limit:30,cacheName:this.cacheName,exports:this.onExports,onChangeSelectedFields:this.onChangeSelectedFields,onLoadMoreCustomFields:this.onLoadMoreCustomFields,searchCustomFields:this.onSearchCustomFields,fetchPresetFields:this.onFetchPresetFields,customFieldsShowed:!!s,initExport:l.initExport});return a.createElement(o.ExportModal,r.a({},p))},t}(a.PureComponent),l=n("a+N5u/Cl"),c=n("/MKjzBat"),p=n("fvjXLGkK"),u=n("lfya3Nc5"),d=n("t4/7BFce"),f=n("nMjh9H6T"),h=n("EaRYHo/L"),m=n("CRfajq5X"),g=n("oPs7WnEA"),v=n("RIjxGFt6"),b=n("zxyTAlCn"),y=n("sa1Ed382");var k=Object(c.connect)(function(e,t){var n,a,o,i=t.projectId,s=t.extraTql,c=t.exportWholeProject,p=Object(m.c)(e),f=p.tql,h=p.sortMethod,k=function(e){var t=e.ui.board.boardViewType,n=t.scenarioFieldIds,r=t.boardMode,a=t.paneType,o=e.ui.scrumPanel,i=o.sprintId;if("sprint"===o.scrumSmartGroupType&&"all"===i)return null;var s=Object(d.b)(e);return Object(u.showStatusSelector)(r,a,s)?"("+n.map(function(e){return"_scenariofieldconfigId = "+e}).join(" OR ")+")":null}(e),S=(n=e.ui.board,(a=n.boardViewType.taskLayer)?Object(v.taskLayerToTQL)(a):null),C=l.chain([s,k,f,S]).compact().join(" AND ").value()||null,w=Object(m.e)(C,Object(g.getOrderByTql)(h));return r.a({tql:c?Object(v.taskLayerToTQL)(b.a.All):w,projectId:i,organizationId:(o=y.PREFERENCE.get("lastWorkspace")||"","personal"===o?"":o)},e.ui.searchExport)},function(e){return{actions:Object(p.bindActionCreators)(r.a({},f.a,h.a),e)}})(s);n.d(t,"a",function(){return k})},EDr4AA9i:function(e,t,n){var r=n("2jw7JyIR").document;e.exports=r&&r.documentElement},Ev2A6RPu:function(e,t,n){var r=n("b4pnW3jB"),a=n("2jw7JyIR").document,o=r(a)&&r(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},"F+nalbze":function(e,t,n){},Fi3OGUvN:function(e,t,n){},"G+qFsxjs":function(e,t,n){"use strict";var r=n("tLZJUYWX"),a=n.n(r);function o(e){return function(t){switch(e){case"story":return a.a.get("story.group.all.categories");case"bug":return a.a.get("bug.group.all.categories")}}()||""}n.d(t,"a",function(){return o})},G492UreV:function(e,t,n){var r=n("qBJymNSa"),a=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?a(e+t,0):o(e,t)}},GTiDT1cb:function(e,t,n){var r=n("0T/aeGnq");r(r.S,"Array",{isArray:n("taoMwXg+")})},GiMdtsHY:function(e,t,n){e.exports={"progress-ring":"progress-ring__3yfp"}},H1tH0km5:function(e,t,n){},HciYOsZ7:function(e,t){e.exports=function(e){return"<div class='body'></div>"}},"Hi+i58br":function(e,t,n){},IBLCkgNc:function(e,t,n){"use strict";n.r(t);var r=n("/MKjzBat"),a=n("fvjXLGkK"),o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n.n(i),l=n("TSYQbtd+"),c=n.n(l),p=n("tLZJUYWX"),u=n.n(p),d=n("GESwhXbR"),f=n("YqUJfXDr"),h=n("5V57DkyA"),m=n("nGZaVfby"),g=n("DbHbb8aU"),v=n("1s1SYK9Z"),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.renderDateStr=function(){return s.a.createElement("div",{className:g.date},u.a.get("task.detail.date"))},t.prototype.renderTasklistName=function(){return this.props.showStageOrStatusName?s.a.createElement("div",{className:g["stage-or-status-name"]},u.a.get("table.task.stage")):null},t.prototype.renderTaskName=function(){return s.a.createElement("div",{className:g["task-content"]},s.a.createElement("div",{className:g["task-name"]},this.props.title))},t.prototype.renderAvatar=function(){var e=c()(g.avatar,v["avatar-small"]);return s.a.createElement("span",{className:e})},t.prototype.renderContentWrapper=function(){return s.a.createElement("div",{className:g["list-item-content"]},this.renderTaskName(),this.renderDateStr(),this.renderTasklistName(),this.renderAvatar())},t.prototype.renderPriority=function(){return s.a.createElement("div",{className:g.priority})},t.prototype.render=function(){var e=c()(g["list-item"],g["list-title"]);return s.a.createElement("div",{className:e},this.renderPriority(),this.renderContentWrapper())},t}(s.a.PureComponent),y=n("QjIAMQmu"),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.componentDidMount=function(){this.props.actions.mounted({taskflowEnabled:this.props.taskflowEnabled,projectId:this.props.projectId,tasks$:this.props.tasks$}),this.props.setTql&&this.props.setTql(this.props.tql)},t.prototype.componentDidUpdate=function(e){this.props.projectId!==e.projectId||this.props.tasks$!==e.tasks$||this.props.setTql!==e.setTql||this.props.loadMore!==e.loadMore?this.props.actions.mounted({taskflowEnabled:this.props.taskflowEnabled,projectId:this.props.projectId,tasks$:this.props.tasks$}):this.props.tql!==e.tql&&this.props.setTql&&this.props.setTql(this.props.tql)},t.prototype.componentWillUnmount=function(){this.props.actions.unmount()},t.prototype.getScenario=function(e){var t=e._scenariofieldconfigId,n=this.props.scenarios.find(function(e){return e.isDefault})||this.props.scenarios[0];return t&&this.props.scenarios.find(function(e){return e._id===t})||n},t.prototype.getScenarioIcon=function(e){if(this.props.scenarioDisplayed){var t=this.getScenario(e);return t?t.icon:void 0}},t.prototype.showStageOrStatusName=function(){return!this.props.taskflowEnabled},t.prototype.getStageOrStatusName=function(e){return this.showStageOrStatusName()&&e.stage?e.stage.name:""},t.prototype.renderEmptyPlaceholder=function(){return s.a.createElement("div",{className:y["empty-placeholder-container"]},s.a.createElement("div",{className:y["empty-placeholder"]}),s.a.createElement("div",null,u.a.get("list.view.is.empty")))},t.prototype.renderTasks=function(){var e=this;return this.props.tasks?this.props.tasks.map(function(t){return s.a.createElement(m.a,{key:t._id,task:t,stageOrStatusName:e.getStageOrStatusName(t),icon:e.getScenarioIcon(t)})}):null},t.prototype.renderLoadMore=function(){var e=this.props.tasks&&0===this.props.tasks.length?null:"div";return s.a.createElement("div",{className:y["load-more-container"]},s.a.createElement(f.LoadMore,{onEnter:this.props.loadMore,hasMore:this.props.hasMore,endWith:e}))},t.prototype.renderLoading=function(){return this.props.isFetched?null:s.a.createElement("div",{className:y["loading-container"]},s.a.createElement(d.Loading,null))},t.prototype.renderTitle=function(){var e=null===this.props.totalSize?"--":this.props.totalSize,t=this.props.invisibleTasksAmount,n=t>0?u.a.get("list.view.amount.with.invisible.tasks",e,t):u.a.get("list.view.amount",e);return s.a.createElement(b,{title:n,showStageOrStatusName:this.showStageOrStatusName()})},t.prototype.render=function(){var e=this.props.isFetched&&this.props.tasks&&0===this.props.tasks.length,t=c()(y["list-view"],{"has-placeholder":e}),n=c()(y["list-view-container"],{"has-placeholder":e});return s.a.createElement("div",{className:t},s.a.createElement("div",{className:n},this.renderTitle(),this.renderLoading(),e&&this.renderEmptyPlaceholder(),this.renderTasks(),this.renderLoadMore(),!!this.props.tasks.length&&h.OrgPortalToProjectAppAPm.component,!!this.props.tasks.length&&h.BoardListApm.component))},t}(s.a.PureComponent),S=n("NQM26xch"),C=n("CRfajq5X");n.d(t,"ListViewConnect",function(){return w});var w=Object(r.connect)(function(e){return{hasMore:e.ui.listView.hasMore,isFetched:e.ui.listView.isFetched,invisibleTasksAmount:e.ui.listView.invisibleTasksAmount,tasks:e.ui.listView.tasks,totalSize:e.ui.listView.totalSize,scenarios:e.ui.listView.scenarios,scenarioDisplayed:e.ui.listView.scenarioDisplayed,tql:Object(C.d)(e)}},function(e){return{actions:Object(a.bindActionCreators)({mounted:S.a.mounted,unmount:S.a.unmount},e)}})(k)},"J/h97mgM":function(e,t,n){"use strict";n.r(t),n.d(t,"changeSortMethodGta",function(){return a}),n.d(t,"resetFilterGta",function(){return o}),n.d(t,"toggleBoardViewSelect",function(){return i}),n.d(t,"switchBoardModeGta",function(){return s}),n.d(t,"customViewCreateLimitedGta",function(){return l}),n.d(t,"clickSaveViewButtonGta",function(){return c}),n.d(t,"saveCustomViewGta",function(){return p}),n.d(t,"submitCreateCustomViewGta",function(){return u}),n.d(t,"submitUpdateCustomViewGta",function(){return d}),n.d(t,"submitUpdateCustomViewSuccessGta",function(){return f}),n.d(t,"changeSearcherInputGta",function(){return h});var r=n("sa1Ed382"),a=function(e,t){r.gta.event({segment:e.getboardViewGtaSegment(),action:"order in filter",type:t,control:"task panel menu"})},o=function(e){r.gta.event({action:"reset filter",segment:e,type:"task",control:"task panel menu"})},i=function(e){r.gta.event({action:"switch taskspage view",control:"task panel menu",segment:e})},s=function(e){r.gta.event({action:"switch taskspage view",control:"task panel menu",projectid:e.id,segment:e.getboardViewGtaSegment()})},l=function(){r.gta.event({action:"view limit"})},c=function(){r.gta.event({action:"save view",control:"task panel menu"})},p=function(e){r.gta.event({action:"saved view",type:e,control:"task panel menu"})},u=function(){r.gta.event({action:"save new view",control:"task panel menu"})},d=function(){r.gta.event({action:"overwrite view",control:"task panel menu"})},f=function(){r.gta.event({action:"overwrote view",control:"task panel menu"})},h=function(){r.gta.event({action:"type search content",method:"keyboard",type:"all task",control:"task panel menu"})}},JBizJmcx:function(e,t,n){var r=n("aput1Sxn"),a=n("pasipYkk"),o=n("G492UreV");e.exports=function(e){return function(t,n,i){var s,l=r(t),c=a(l.length),p=o(i,c);if(e&&n!=n){for(;c>p;)if((s=l[p++])!=s)return!0}else for(;c>p;p++)if((e||p in l)&&l[p]===n)return e||p||0;return!e&&-1}}},JnDFXEIU:function(e,t,n){"use strict";var r=n("mrSGxOB2"),a=n("q1tIBJhx"),o=n("ZFupaTh7"),i="search-result",s=function(e){function t(t){var n=e.call(this,t)||this;return n.cacheName=i,n.onFetchPresetFields=function(){n.props.actions.getPresetFields()},n.onExports=function(e){var t=n.props,r=t.tql,a=t.organizationId;t.actions.getSearchResultsExport({tql:r,_organizationId:a,resourceType:"task",fileType:"csv",fields:e.map(function(e){return e.id})})},n.onLoadMoreCustomFields=function(){n.props.actions.getMoreCustomFields()},n.onSearchCustomFields=function(e){var t=n.props,r=t.organizationId;t.actions.getCustomFields({q:e,_organizationId:r})},n.onChangeSelectedFields=function(e){n.setState({selectedFields:e}),o.LSSelectedFieldsHelper.set(n.cacheName,e)},n.state={selectedFields:[]},n}return r.d(t,e),t.prototype.componentWillUnmount=function(){this.props.actions.exitPagination()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=e.presetFields;0===this.props.presetFields.length&&t.length>0&&this.loadLocalStorageCache(e)},t.prototype.loadLocalStorageCache=function(e){var t=e.presetFields,n=o.LSSelectedFieldsHelper.get(this.cacheName),r=n.length>0?n:t.filter(function(e){return e.isDefault});this.onChangeSelectedFields(r)},t.prototype.render=function(){var e=this.props,t=e.presetFields,n=e.customFields,i=e.hasMore,s=e.organizationId,l=e.actions,c=r.g(e,["presetFields","customFields","hasMore","organizationId","actions"]),p=r.a({},c,{presetFields:t,customFields:n,hasMore:i,selectedFields:this.state.selectedFields,limit:30,cacheName:this.cacheName,exports:this.onExports,onChangeSelectedFields:this.onChangeSelectedFields,onLoadMoreCustomFields:this.onLoadMoreCustomFields,searchCustomFields:this.onSearchCustomFields,fetchPresetFields:this.onFetchPresetFields,customFieldsShowed:!!s,initExport:l.initExport});return a.createElement(o.ExportModal,r.a({},p))},t}(a.PureComponent),l=n("/MKjzBat"),c=n("fvjXLGkK"),p=n("nMjh9H6T"),u=n("sa1Ed382");var d=Object(l.connect)(function(e){var t,n=e.ui.globalSearch.tql;return r.a({organizationId:(t=u.PREFERENCE.get("lastWorkspace")||"","personal"===t?"":t),tql:n},e.ui.searchExport)},function(e){return{actions:Object(c.bindActionCreators)(p.a,e)}})(s);n.d(t,"b",function(){return d}),n.d(t,"a",function(){return i})},JpU4pMBL:function(e,t,n){var r=n("Q8jqGJjA"),a=n("aput1Sxn"),o=n("JBizJmcx")(!1),i=n("XY+jiOEZ")("IE_PROTO");e.exports=function(e,t){var n,s=a(e),l=0,c=[];for(n in s)n!=i&&r(s,n)&&c.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~o(c,n)||c.push(n));return c}},L0nmzSVV:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return c});var r,a=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),l=n("+QrSgjeH");!function(e){e.NOOP="",e.LEFT="left",e.RIGHT="right"}(r||(r={}));var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.d(t,e),t.prototype.render=function(){var e,t,n=s()(l.root,this.props.direction),r=s()(l.left,((e={})[l.hide]=!this.props.showLeft,e)),a=s()(l.indicator,((t={})[l.hidden]=this.props.hiddenButton,t[l["show-direction"]]=this.props.showDirection,t),this.props.indicatorCls);return o.createElement("div",{className:n,onClick:this.props.onClick},o.createElement("i",{className:r}),o.createElement("i",{className:a}))},t.defaultProps={direction:r.NOOP,hiddenButton:!1,showDirection:!0,showLeft:!0},t}(o.PureComponent)},LDPqnm4m:function(e,t){e.exports=function(e){return'<div class="agile-panel-wrapper"></div><div class="agile-view-wrapper"></div><div class="sprint-planning"></div>'}},"LdeB/B40":function(e,t,n){var r,a,o,i,s,l,c,p,u,d,f,h,m,g={}.hasOwnProperty;u=n("a+N5u/Cl"),m=n("sa1Ed382"),c=n("3eMzznN/"),p=n("vmWJWrVe"),l=n("ioaOqjIU"),i=n("//SEpMEE"),o=n("bWU6aNtL"),s=n("oq1bWpp9"),a=n("4bWDEe5E"),n("bPEZR78p"),h=n("s0r7VfKc").default,d=n("wVuowLdP").getStageTasksFromServerToCache,f=n("wVuowLdP").getTaskFromServerToCache,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)g.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.viewName="SmartGroupView",t.prototype.className="smart-group-view fade",t.prototype.routes={"":"enterSmartGroup","section/:sectionId(/task/:taskId)":"enterSmartGroupBySection","view/:viewId(/task/:taskId)":"enterSmartGroupByView","task/:taskId":"enterSmartGroupByTaskId","scrum/:_tasklistId(/task/:_taskId)":"enterSmartGroupByTasklistId","scenariofieldconfig/:_scenariofieldconfigId(/task/:taskId)":"enterSmartGroupByScenarioField","*paramString":"enterHome"},t.prototype.initialize=function(e){var t,n,r,s;return this._projectId=e._projectId,this.projectModel=e.projectModel,this.appName=e.appName,t=e.appData,this.boundToObjectType="task",r=null!=t&&null!=(n=t.payload)?n.smartgroup:void 0,this.smartGroupModel=r?new o(r):null,this.currentView=null,this.agileView=null,this.routesParams={_taskId:null,viewId:null,sectionId:null,proTemplateType:null},this.tasklistsCollection=l.get(this._projectId),this.smartGroupsCollection=i.get(this._projectId),this.scenarioFieldConfigCacheId=a.genCacheId(this._projectId,this.boundToObjectType),this.scenarioFieldConfigCollection=a.get(this.scenarioFieldConfigCacheId,{boundToObjectType:this.boundToObjectType,attrs:{withTaskflowstatus:!0}}),c.promiseChain((s=this,function(){return!s.el}))(function(e){return function(){var t,n;if(t=null!=(n=e.tasklistsCollection.at(0))?n.id:void 0)return h.fetch.getTasklistStages(t).toPromise()}}(this),function(e){return function(t){return null==t&&(t=[]),e.wsRefreshEventSubscriptions=u.pluck(t,"_id").map(function(e){return h.socketProxy.fromRefresh(":refresh:tasks/"+e,"smartgroup").subscribe(function(t){var n;return t.data?(n=t.data,f(n).values().toPromise()):d(e,{count:200}).values().toPromise()})})}}(this),function(e){return function(){return e.$el.addClass("in")}}(this))},t.prototype.load=function(){return Promise.all([c.warehouse.resolveFetch(i,this._projectId),c.warehouse.resolveFetch(l,this._projectId),c.warehouse.resolveFetch(a,this.scenarioFieldConfigCacheId,{objectType:this.boundToObjectType,attrs:{withTaskflowstatus:!0}})])},t.prototype.enterSmartGroup=function(){return this.updateRoutesParams({}),this.load().then(this.render.bind(this))},t.prototype.enterSmartGroupByView=function(e,t){return this.updateRoutesParams({viewId:e,_taskId:t}),this.load().then(this.render.bind(this))},t.prototype.enterSmartGroupBySection=function(e,t){return this.updateRoutesParams({sectionId:e,_taskId:t}),this.load().then(this.render.bind(this))},t.prototype.enterSmartGroupByTaskId=function(e){return this.updateRoutesParams({_taskId:e}),this.load().then(this.render.bind(this))},t.prototype.redirectToSmartGroup=function(e,t){var n,r;return r=this.getSmartGroupTypeByConfigId(e),this.appName!==r?(this.appName=r,n={appName:this.appName,_taskId:t},this.updateUrl(n,{trigger:!0,replace:!0})):(this.updateRoutesParams({proTemplateType:r,_taskId:t}),this.render())},t.prototype.enterSmartGroupByTasklistId=function(e,t){return this.load().then((n=this,function(){return n.projectModel.hasScrumAppEnabled()&&t?c.warehouse.resolveFetch(s,t).then(function(e){var r;return r=null!=e?e.get("_scenariofieldconfigId"):void 0,n.redirectToSmartGroup(r,t)}):(n.updateRoutesParams({_taskId:t}),n.render())}));var n},t.prototype.enterSmartGroupByScenarioField=function(e,t){return this.load().then((n=this,function(){return n.projectModel.hasScrumAppEnabled()?n.redirectToSmartGroup(e,t):n.updateRoutesParams({_taskId:t}),n.render()}));var n},t.prototype.getSmartGroupTypeByConfigId=function(e){var t;switch(null!=(t=this.scenarioFieldConfigCollection.get(e))?t.get("proTemplateConfigType"):void 0){case"story":return"story";case"bug":return"bug";default:return"sprint"}},t.prototype.updateRoutesParams=function(e){var t,n;for(t in null==e&&(e={}),n=[],this.routesParams)null!=e[t]?n.push(this.routesParams[t]=e[t]):n.push(this.routesParams[t]=null);return n},t.prototype.render=function(){var e,t,n,r;return e=(t=this.routesParams)._taskId,r=t.sectionId,this.initData(null!=(n=this.smartGroupModel)?n.id:void 0),this.updateUrl({_taskId:e,sectionId:r},{replace:!0}),this.renderTaskPreviewer(e),this.renderAgileView()},t.prototype.getInitSmartGroupId=function(){var e,t,n,r;return e=null,(r=this.appName||this.routesParams.proTemplateType)&&(e=null!=(t=this.smartGroupsCollection.findWhere({type:r}))?t.id:void 0),e||(e=null!=(n=this.smartGroupsCollection.getFirstScrumModel())?n.id:void 0),e},t.prototype.initData=function(e){var t;return e||(e=this.getInitSmartGroupId()),(null!=(t=this.smartGroupModel)?t.id:void 0)!==e&&(this.smartGroupModel=this.smartGroupsCollection.get(e)),this.appName=this.smartGroupModel.get("type"),this.projectModel.set("currentSmartGroupId",e)},t.prototype.renderAgileView=function(){var e;return null!=(e=this.agileView)&&e.remove(),this.agileView=this.requestSubView(r,{projectModel:this.projectModel,appName:this.appName,tasklistsCollection:this.tasklistsCollection,scenarioFieldConfigCollection:this.scenarioFieldConfigCollection,smartGroupModel:this.smartGroupModel,viewId:this.routesParams.viewId,currentViewSection:this.routesParams.sectionId,updateAgileUrl:this.updateAgileUrl.bind(this)}),this.agileView.$el.appendTo(this.$el)},t.prototype.renderTaskPreviewer=function(e){var t,n,r;if(e)return t="kanban"===(null!=(n=this.smartGroupModel)&&null!=(r=n.get("view"))?r.type:void 0),m.APP.openTaskPreviewer(e,{isUsePanel:t,hasLink:!1,onClose:this.onTaskPreviewerClose.bind(this)})},t.prototype.onTaskPreviewerClose=function(){return this.routesParams._taskId=null},t.prototype.updateAgileUrl=function(e,t){var n,r,a,o,i,s;return null==e&&(e={}),n=e._smartGroupId||(null!=(a=this.smartGroupsCollection)&&null!=(o=a.findWhere({type:e.agileType}))?o.get("_id"):void 0),r=e.agileType||(null!=(i=this.smartGroupsCollection)?i.get(n).get("type"):void 0),s=e.viewSection,e=Object.assign({_taskId:this.routesParams._taskId},e,{agileType:r,sectionId:s}),this.updateUrl(e,t)},t.prototype.updateUrl=function(e,t){var n,r,a;return null==e&&(e={}),t=Object.assign({trigger:!1},t),r=[m.router.getPrefix()],(n=e.appName||e.agileType||this.appName||(null!=(a=this.smartGroupModel)?a.get("type"):void 0))&&r.push(""+n),e.sectionId&&r.push("section/"+e.sectionId),e.viewId&&r.push("view/"+e.viewId),e._taskId&&r.push("task/"+e._taskId),m.router.navigate(r.join("/"),t)},t.prototype.enterHome=function(){return m.router.home()},t.prototype.remove=function(){var e;return null!=(e=this.wsRefreshEventSubscriptions)&&e.forEach(function(e){return e.unsubscribe()}),this.projectModel.set("currentSmartGroupId",void 0),t.__super__.remove.apply(this,arguments)},t}(),r=n("+oNcvbGe")},LqFAG7sn:function(e,t,n){var r=n("b4pnW3jB");e.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},M8UQBQTP:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var r=n("mrSGxOB2"),a=n("ctsD9mWH"),o=n("7Hwn9Jye");function i(e){a.store.dispatch(o.a.selectAxis(r.a({},e,{withCache:!0})))}function s(e){a.store.dispatch(o.a.setSelectorChange({hasStatusSelectorChange:e}))}},McIs82Xv:function(e,t){t.f=Object.getOwnPropertySymbols},MgZatsjo:function(e,t,n){"use strict";n.r(t);var r=n("q1tIBJhx"),a=n.n(r),o=n("TSYQbtd+"),i=n.n(o),s=n("wScl0p2y"),l=n("mrSGxOB2"),c=n("a+N5u/Cl"),p=n.n(c),u=n("k7+OBFO9"),d=n.n(u),f=n("sa1Ed382"),h=n.n(f),m=n("tLZJUYWX"),g=n("GESwhXbR"),v=n("NrdSFiY0"),b=n.n(v),y=n("Drsbyrjq"),k=n("G5hTTzDg"),S=(n("BCEHWaq/"),function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e){var t=e.target.value;n.props.onSelectInput(t)},n.state={value:"custom"},n}return l.d(t,e),t.prototype.render=function(){var e=m.get("tasklist.dump.custom.hint"),t=m.get("tasklist.dump.excel"),n=m.get("tasklist.dump.filter.hint");return r.createElement(g.RadioGroup,{name:"dumpTasks",className:"dump-tasks-radio-group",value:this.props.value,onChange:this.onChange},r.createElement(g.Radio,{label:n,value:"withFilter"}),r.createElement(g.Radio,{label:e,value:"custom"}),r.createElement(g.Radio,{label:t,value:"all"}))},t}(r.PureComponent)),C=n("bZr3G77e"),w=a.a.memo(function(e){var t=e.projectId,n=l.f(Object(r.useState)("withFilter"),2),o=n[0],s=n[1],c=l.f(Object(r.useState)(!1),2),p=c[0],u=c[1],d=l.f(Object(r.useState)(!1),2),f=d[0],v=d[1],w=Object(r.useCallback)(function(){u(!p)},[p]),I=Object(r.useCallback)(function(){"all"===o?(v(!0),h.a.gta.event({action:"downloaded task list",control:"Side Menu",type:"project"}),Object(k.a)("tis/export/resources",{_projectId:t,resourceType:"task",fileType:"xlsx",timezone:C.timezone()}).toPromise().catch(function(e){~e.indexOf("NoPermission")?g.Toast.error(m.get("tasklist.dump.export.error.no.permission")):g.Toast.error(m.get("tasklist.dump.export.error.overload"))}).finally(function(){return v(!1)})):w()},[o,t]),T=f?m.get("tasklist.dump.exporting")+"...":m.get("tasklist.dump.confirm"),E="all"===o?T:m.get("tasklist.dump.next"),x=i()({downloading:f}),M="custom"===o;return a.a.createElement("div",{className:b.a["activity-panel-dump-tasks"]},a.a.createElement("div",{className:"radio-group"},a.a.createElement(S,{value:o,onSelectInput:function(e){s(e)}})),a.a.createElement("div",{className:x},a.a.createElement(g.Button,{block:!0,disabled:f,onClick:I},E)),a.a.createElement(y.a,{projectId:t,opened:p,onVisibleChange:w,exportWholeProject:M}))}),I=n("j6KeIaDK"),T=n("pOjRmLcH"),E=n.n(T),x=n("iPNg/Ezr"),M=n("3aStH+T4"),_=function(e){var t=l.f(Object(r.useState)(!1),2),n=t[0],o=t[1],i=l.f(Object(r.useState)(!1),2),s=i[0],c=i[1],u=l.f(Object(r.useState)(!1),2),h=u[0],v=u[1],b=Object(r.useCallback)(function(e,t){o(!1),g.Toast.success(m.get("import.tasks.success",e,t))},[]),y=Object(r.useCallback)(function(){c(!0),f.gta.event({action:"downlaod tasklist",type:"tasklist"})},[]),k=Object(r.useCallback)(function(){o(!0),f.gta.event({action:"import tasks to current tasklist"})},[]),S=Object(r.useCallback)(function(){var t=$("body");d.a&&d.a.request(),t.addClass("board-fullscreen"),f.APP.removeHotKey(),f.APP.Float.removeHotKey(),p.a.delay(function(){e.projectModel.set("currentPanel",null)},300),x.add("boardFullscreen",function(){t.removeClass("board-fullscreen"),f.APP.setupHotKey(),f.APP.Float.setupHotKey()}),f.gta.event({action:"toggle tasklist",type:"tasklist"})},[]),C=Object(r.useCallback)(function(e){o(e)},[]),T=Object(r.useCallback)(function(e){c(e)},[]);function _(){return!!e.isPresentationModeSupported&&d.a&&d.a.enabled&&e.projectModel.isAppEnabled("tasks")&&a.a.createElement(g.MenuItem,{onClick:S},a.a.createElement(g.Icon,{name:"demo"}),m.get("activity.panel.menu.presentation.mode"))}var D=Object(r.useCallback)(function(e){v(e)},[]);if(e.projectModel.get("isTemplate"))return null;var O={leftIcon:a.a.createElement(g.Icon,{name:"more"}),rightIcon:a.a.createElement(a.a.Fragment,null),className:E.a["more-trigger"],isActive:h};return a.a.createElement(a.a.Fragment,null,a.a.createElement(g.Dropdown,{placement:"bottomRight",content:a.a.createElement(g.Menu,{className:E.a["more-menu-container"]},e.projectModel.hasPermission("task.post")&&a.a.createElement(g.MenuItem,{onClick:k},a.a.createElement(g.Icon,{name:"move-in"}),m.get("activity.panel.import.tasks")),e.exportTasksPermission&&a.a.createElement(g.MenuItem,{onClick:y},a.a.createElement(g.Icon,{name:"move-task"}),m.get("activity.panel.export.tasks")),_()),opened:h,onVisibleChange:D},Object(I.b)(O)),a.a.createElement(g.Modal,{key:p.a.uniqueId(),opened:n,width:600,title:m.get("import.tasks.modal.title"),titlePosition:"center",onVisibleChange:C},a.a.createElement(M,{projectModel:e.projectModel,onTaskImportSuccess:b})),a.a.createElement(g.Modal,{opened:s,title:m.get("activity.panel.export.tasks"),titlePosition:"center",onVisibleChange:T},a.a.createElement(w,{projectId:e.projectModel.get("_id")})))},D=n("t4/7BFce"),O=n("c0zWVFji"),P=function(e){return a.a.createElement(N,{classNames:e.isScrumWithTopTask?"board-view-top-mode-with-bg":void 0,left:a.a.createElement(a.a.Fragment,null,e.headCell,e.showStatusSelector&&a.a.createElement(s.ErrorBoundary,null,a.a.createElement(D.a,{projectId:e.projectId,tasklistId:e.tasklistId,isSmartGroup:e.isSmartGroup}))),right:a.a.createElement(a.a.Fragment,null,(t=e.customViewId?void 0:e.tasklistId,n=[""+e.customViewId,t+"+"+e.showAsKanban,e.smartGroupId+"+"+e.smartGroupType].join("|"),a.a.createElement(O,{key:n,customViewId:e.customViewId,tasklistId:e.tasklistId,showAsKanban:e.showAsKanban,smartGroupId:e.smartGroupId,smartGroupType:e.smartGroupType,projectId:e.projectId,appName:e.appName,getDefaultScenarioFieldId:e.getDefaultScenarioFieldId,disableSaveSortTemplate:e.disableSaveSortTemplate,getPresetFilters:e.getPresetFilters})),a.a.createElement(_,{projectModel:e.projectModel,exportTasksPermission:e.exportTasksPermission,isPresentationModeSupported:e.isPresentationModeSupported}))});var t,n},N=function(e){var t=i()(E.a["board-view-top-mode"],e.classNames);return a.a.createElement("div",{className:t},a.a.createElement("div",null,e.left),a.a.createElement("div",null,e.right))},j=n("/MKjzBat"),A=n("sEfCy7Dp"),L=n.n(A),F=n("fio7jWQ0"),B=n("/SNw8Jel"),G=n("vrpOmW4L"),V=n.n(G),R=Object(B.b)(function(e){var t,n=e.isFolded,o=e.pathName,s=e.path$,c=e.toggleIndicator,p=e.withFold,u=l.f(Object(r.useState)(void 0),2),d=u[0],f=u[1],h=l.f(Object(r.useState)(!1),2),m=h[0],v=h[1],b=Object(r.useCallback)(function(){return p&&c({useIndicator:!1})},[p,c]),y=Object(r.useCallback)(L()(function(){return v(!0)},100),[]),k=Object(r.useCallback)(L()(function(){return v(!1)},100),[]);Object(r.useEffect)(function(){var e=s&&s.subscribe(f);return function(){e&&e.unsubscribe(),y.cancel(),k.cancel()}},[s,y,k]);var S,C,w,T=d||o;if(!T)return null;if(p){var E=n?m?"expand-sidebar":"menu":"collapse-sidebar",x="menu"===E?14:16,M=i()(V.a["path-icon"],((t={})[V.a["with-animation"]]=n&&m,t));S=a.a.createElement(g.Icon,{name:E,size:x,className:M}),C=a.a.createElement(a.a.Fragment,null),w={onClick:b,onMouseLeave:k,onMouseOver:y}}else S=a.a.createElement(a.a.Fragment,null),C=void 0,w=void 0;return Object(I.b)({className:V.a["path-wrapper"],eventHandlers:w,isActive:e.isDropdownOpened,leftIcon:S,name:a.a.createElement("span",{className:V.a.path},T),rightIcon:C})}),U=function(e){return a.a.createElement(j.Provider,{store:F.store},a.a.createElement(R,l.a({},e)))};n.d(t,"BoardViewTopMode",function(){return P}),n.d(t,"BoardViewBanner",function(){return N}),n.d(t,"LeftPanelPath",function(){return U})},N2yOX29X:function(e,t,n){"use strict";n.r(t),n.d(t,"genAgileSmartGroupQuery",function(){return a});var r=n("a+N5u/Cl"),a=function(e,t){switch(e.type){case"story":case"bug":var n=r.findWhere(t,{proTemplateConfigType:e.type});return{dbQuery:n?[{_scenariofieldconfigId:n._id}]:[],apiQuery:{},filter:function(){return!0}};default:return{dbQuery:[],apiQuery:{},filter:function(){return!0}}}}},NFcsDlfk:function(e,t,n){var r=n("b4pnW3jB"),a=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&a(e)===e}},NrdSFiY0:function(e,t,n){e.exports={"activity-panel-dump-tasks":"activity-panel-dump-tasks__GuS5"}},"O+LLMktj":function(e,t,n){e.exports=n("ceF1hQ65")},OZLHl8pJ:function(e,t,n){e.exports={"empty-sprint-placeholder":"empty-sprint-placeholder__n3Ki"}},OtwAMvQ1:function(e,t,n){var r=n("D4nyOZu0"),a=n("pH/FQWVd"),o=n("LqFAG7sn"),i=Object.defineProperty;t.f=n("fZVSkaeT")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),a)try{return i(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},PczMHIsV:function(e,t,n){var r=n("0T/aeGnq");r(r.S,"Date",{now:function(){return(new Date).getTime()}})},"PzkW/4fU":function(e,t,n){e.exports={"kanban-head-cell":"kanban-head-cell__3zEi","static-pane":"static-pane__2rTu","menu-wrapper":"menu-wrapper__2Qcp",title:"title__2Sa-","title-name":"title-name__2BuR","title-amount":"title-amount__sFTl","stage-flow":"stage-flow__lM6Q",handler:"handler__3qg0"}},Q1wi1axk:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),a=n("q1tIBJhx"),o=n.n(a),i=n("/MKjzBat"),s=n("TSYQbtd+"),l=n.n(s),c=n("GESwhXbR"),p=n("tLZJUYWX"),u=n.n(p),d=n("/GeFQFAU"),f=n("a+N5u/Cl"),h=n("dWbDnvg6"),m=n("YqUJfXDr"),g=n("oRPyOBnq"),v=n("3LGsbOqB"),b=n("oRqJmROU"),y=n("zH+Yaocm"),k=n("fpIMfP/U"),S=n("6UKCU1RC"),C=n.n(S);function w(e){var t=I(e.current,function(t){var n=t.currentTarget.dataset.label;e.onSwitch(n)}),n=t(),r=Object(f.groupBy)(e.sprints,"status"),a=r.future,i=r.active,s=a&&a.map(t)||null,l=i&&i.map(t)||null,p=l&&o.a.createElement(o.a.Fragment,null,o.a.createElement(c.Separator,{full:!0}),o.a.createElement("span",{className:"section-header"},u.a.get("sprint.planning.switcher.section.active")));return o.a.createElement(c.Menu,{className:C.a["sprint-switcher-menu"]},n,s,p,l)}var I=function(e,t){return function(n){var a=r.f(n?[n._id,n.name]:["unplanned",u.a.get("sprint.unplanned")],2),i=a[0],s=a[1];return o.a.createElement(c.MenuItem,{key:i,className:C.a["sprint-switcher-menu-item"]},o.a.createElement("div",{"data-label":i,onClick:t},o.a.createElement("span",null,s),e===i&&o.a.createElement(c.Icon,{name:"tick"})))}},T=n("zT6SYcu2"),E=n("mmJiykER"),x=n("8zoxEjTT"),M=n("ULWpA99H"),_=n("p7RaAO2S"),D=n("jnO3mIlI"),O=n.n(D),P={scenariofieldconfigId:{searcherId:"scenariofieldconfigId",field:"scenariofieldconfigId",gtaCategory:"Task type"},taskflowstatusId:{searcherId:"taskflowstatusId",field:"taskflowstatusId",gtaCategory:"Task status"},executorId:{searcherId:"executorId",field:"executorId",gtaCategory:"executorId"},creatorId:{searcherId:"creatorId",field:"creatorId",gtaCategory:"creatorId"},startDate:{searcherId:"startDate",field:"startDate",gtaCategory:"startDate"},dueDate:{searcherId:"dueDate",field:"dueDate",gtaCategory:"dueDate"}};function N(){return Math.random().toFixed(6)+Date.now()}function j(){return Object(f.mapObject)(P,N)}var A=Object(i.connect)(function(e){return{projectId:e.ui.sprintPlanning.projectId}})(function(e){var t=r.f(o.a.useState(!0),2),n=t[0],a=t[1],i=r.f(o.a.useReducer(function(e,t){switch(t.type){case"set":return r.a({},e,t.payload);case"clear":var n=t.payload;return n?Object(f.omit)(e,n):{};default:return e}},{}),2),s=i[0],l=i[1],c=r.f(o.a.useReducer(function(e,t){var n;return t?r.a({},e,((n={})[t]=N(),n)):j()},j()),2),p=c[0],u=c[1],d=o.a.useCallback(function(){a(!0)},[]),h=o.a.useCallback(function(){l({type:"clear"}),u(void 0)},[]),m=o.a.useCallback(function(e){l({type:"set",payload:e})},[]),g=o.a.useCallback(function(e){l({type:"clear",payload:e}),u(e)},[]),v={projectId:e.projectId,setValue:m,clearValue:g};return o.a.useEffect(function(){var t=[],n=[];Object(f.each)(s,function(e,r){if(e){t.push(e);var a=P[r];a&&n.push(a.gtaCategory)}}),e.setTql({tql:t.join(" AND "),gtaCategories:n})},[e.setTql,s]),o.a.createElement("table",{className:O.a["taskattrs-filter-menu"]},o.a.createElement("tbody",null,o.a.createElement(R,r.a({key:p.scenariofieldconfigId},v)),o.a.createElement(U,r.a({key:p.taskflowstatusId},v)),o.a.createElement(q,r.a({key:p.executorId},v)),!n&&o.a.createElement(L,{onClick:d}),n&&o.a.createElement(H,r.a({key:p.creatorId},v)),n&&o.a.createElement(z,r.a({key:p.startDate},v)),n&&o.a.createElement(K,r.a({key:p.dueDate},v))),o.a.createElement("tfoot",null,o.a.createElement(F,{active:!$(s),onClick:h})))});function L(e){return o.a.createElement("tr",{onClick:e.onClick,className:O.a.expander},o.a.createElement("td",{colSpan:2},o.a.createElement(c.TextButton,null,o.a.createElement(c.Icon,{name:"chevron-down"}),u.a.get("sprint.planning.taskattrs.filter.more"))))}function F(e){return o.a.createElement("tr",{onClick:e.onClick,className:O.a.clearer},o.a.createElement("td",{colSpan:2},o.a.createElement(c.TextButton,{color:e.active?"blue":"gray"},u.a.get("search.panel.filter.clear.handler"))))}var B=o.a.forwardRef(function(e,t){var n=e.label,a=e.shouldShowClear,i=e.clear,s=r.g(e,["label","shouldShowClear","clear"]),p=r.f(o.a.useState(!1),2),u=p[0],d=p[1],f=r.f(o.a.useState(!1),2),h=f[0],m=f[1],g={onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)},onClick:o.a.useCallback(function(e){e.preventDefault(),e.stopPropagation(),i()},[i])};return o.a.createElement("div",r.a({className:l()(O.a["value-container"],{highlight:h})},s,{onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},ref:t}),o.a.createElement(c.TextButton,{className:"content"},n),a&&u&&o.a.createElement(c.IconButton,r.a({className:"clear-one",name:"remove-s",color:"gray"},g)))});function G(e,t,n,a){var i=P[e],s=i.searcherId,l=i.field,c=r.f(o.a.useState([]),2),p=c[0],u=c[1],d=x.d(p,t,s),f=o.a.useCallback(function(){return a(e)},[a,e]);return{triggerEl:o.a.useMemo(function(){return o.a.createElement(B,{label:d,shouldShowClear:p.length>0,clear:f})},[d,p.length,f]),updateSelected:function(t){var r;if(t!==p){u(t);var a=t.length>0?l+" IN ["+t.map(function(e){var t=e.value;return null===t?"null":t})+"]":"";n(((r={})[e]=a,r))}},selected:p}}function V(e,t,n){var a=P[e].field,i=r.f(o.a.useState({}),2),s=i[0],l=i[1],c=r.f(o.a.useState(!1),2),p=c[0],u=c[1],d=r.f(o.a.useState({}),2),f=d[0],h=d[1],m=Object(M.b)(s),g=o.a.useCallback(function(){return n(e)},[n,e]);return{triggerEl:o.a.useMemo(function(){return o.a.createElement(B,{label:m,shouldShowClear:p,clear:g})},[m,p,g]),updateFilter:function(n){var o,i=n.filter,s=n.state,c=Object(_.c)(i,T.f.Date,{field:a});null===i.relative&&(i=r.a({},i,{relative:"null"}),s=r.a({},s,{relative:"null"})),l(i),h(s);var p=function(e){var t=e.logic;return e.values.map(function(e){var t=e.field,n=e.op,r=e.value;return"("+t.value+n+r.value+")"}).join(" "+t+" ")}(c);u(Boolean(p)),t(((o={})[e]=p,o))},selectorState:f}}function R(e){var t=e.projectId,n=e.setValue,r=e.clearValue,a=P.scenariofieldconfigId,i=a.searcherId,s=a.field,l=u.a.get("searcher.options.task.scenariofieldconfig"),c=G("scenariofieldconfigId",x.c.scenariofieldconfig,n,r),p=c.triggerEl,d=c.updateSelected,f=c.selected;return J(l,o.a.createElement(E.a,{type:T.f.MultiSelect,title:"",searcherId:i,projectId:t,searchable:!0,field:s,onSubmit:d,node:void 0,placement:"bottomLeft",nested:!0,triggerEl:p,skipLocalStorage:!0,skipFilterContentGTA:!0,multiSelectorSelected:f}))}function U(e){var t=e.projectId,n=e.setValue,r=e.clearValue,a=P.taskflowstatusId,i=a.searcherId,s=a.field,l=u.a.get("searcher.options.task.taskflowstatus"),c=G("taskflowstatusId",x.c.default,n,r),p=c.triggerEl,d=c.updateSelected,f=c.selected;return J(l,o.a.createElement(E.a,{type:T.f.MultiSelect,title:"",searcherId:i,projectId:t,searchable:!0,field:s,onSubmit:d,node:void 0,placement:"bottomLeft",nested:!0,triggerEl:p,skipLocalStorage:!0,skipFilterContentGTA:!0,multiSelectorSelected:f}))}var W=[{i18Key:"searcher.options.task.executorId.null",name:"",value:null}];function q(e){var t=e.projectId,n=e.setValue,r=e.clearValue,a=P.executorId,i=a.searcherId,s=a.field,l=u.a.get("executor"),c=G("executorId",x.c.member,n,r),p=c.triggerEl,d=c.updateSelected,f=c.selected;return J(l,o.a.createElement(E.a,{type:T.f.MultiSelect,title:"",searcherId:i,projectId:t,searchable:!0,field:s,onSubmit:d,node:void 0,options:W,placement:"bottomLeft",nested:!0,triggerEl:p,skipLocalStorage:!0,skipFilterContentGTA:!0,multiSelectorSelected:f}))}function H(e){var t=e.projectId,n=e.setValue,r=e.clearValue,a=P.executorId,i=a.searcherId,s=a.field,l=u.a.get("creator"),c=G("creatorId",x.c.member,n,r),p=c.triggerEl,d=c.updateSelected,f=c.selected;return J(l,o.a.createElement(E.a,{type:T.f.MultiSelect,title:"",searcherId:i,projectId:t,searchable:!0,field:s,onSubmit:d,node:void 0,placement:"bottomLeft",nested:!0,triggerEl:p,skipLocalStorage:!0,skipFilterContentGTA:!0,multiSelectorSelected:f}))}function z(e){var t=e.projectId,n=e.setValue,r=e.clearValue,a=P.startDate,i=a.searcherId,s=a.field,l=u.a.get("searcher.startDate"),c=V("startDate",n,r),p=c.triggerEl,d=c.updateFilter,f=c.selectorState;return J(l,o.a.createElement(E.a,{type:T.f.Date,title:"",searcherId:i,projectId:t,searchable:!1,field:s,onSubmit:d,node:void 0,placement:"bottomLeft",nested:!0,triggerEl:p,skipFilterContentGTA:!0,dateSelectorState:f}))}function K(e){var t=e.projectId,n=e.setValue,r=e.clearValue,a=P.dueDate,i=a.searcherId,s=a.field,l=u.a.get("searcher.dueDate"),c=V("dueDate",n,r),p=c.triggerEl,d=c.updateFilter,f=c.selectorState;return J(l,o.a.createElement(E.a,{type:T.f.Date,title:"",searcherId:i,projectId:t,searchable:!1,field:s,onSubmit:d,node:void 0,placement:"bottomLeft",nested:!0,triggerEl:p,skipFilterContentGTA:!0,dateSelectorState:f}))}function J(e,t){return o.a.createElement("tr",null,o.a.createElement("td",{className:"key"},e),o.a.createElement("td",{className:"value"},t))}function $(e){return Object.keys(e).every(function(t){return!e[t]})}var X=n("Wp+vEiz6"),Y=n.n(X),Q=n("u/LJYZ+h"),Z=n("SH0iX7/S"),ee=o.a.memo(function(e){var t=e.onClick,n=r.g(e,["onClick"]),a=n.uniqueIdPrefix&&Object(b.c)(n.uniqueId)&&o.a.createElement("span",{className:"unique-id"},n.uniqueIdPrefix+"-"+n.uniqueId),i=k.a[n.priority],s=i&&0!==i.number&&o.a.createElement("div",{className:"priority-wrap fragment"},o.a.createElement("span",{className:i.className},u.a.get(i.title))),l=(n.startDate||n.dueDate?Object(f.pick)(n,"startDate","dueDate"):null)&&o.a.createElement(v.a,{className:"date fragment",startDate:n.startDate,dueDate:n.dueDate,solid:!1,withHint:!0}),p=n.scenariofieldconfig,d=p&&o.a.createElement(g.FieldIcon,{icon:p.icon,type:"task",className:"field-config-icon hinted","data-title":p.name}),m=""+n.content;n.parent&&(m+=u.a.get("parentheses",u.a.get("subtask.belong.to",n.parent.content)));var S=n.executor,C=S&&o.a.createElement(h.a,{src:S.avatarUrl,size:"small",className:"executor-avatar hinted fragment","data-title":S.name});return o.a.createElement("div",{className:"selection-item","data-id":n._id,onClick:t},o.a.createElement("div",{className:"to-the-left"},o.a.createElement(c.Checkbox,{className:"check-task",checked:n.checked||!1}),o.a.createElement(y.TaskStatusLabel,{className:"status",task:n,readOnly:!0}),d,o.a.createElement("span",{className:"content hinted","data-title":m},n.content),a),o.a.createElement("div",{className:"to-the-right"},s,l,C))});function te(e){var t,n=o.a.useCallback(function(t){var n=t.currentTarget.dataset.id;e.toggleTask(n)},[e.toggleTask]),a=o.a.useCallback(function(){e.allChecked?e.batchUncheck(e.label):e.batchCheck(e.label)},[e.allChecked,e.batchCheck,e.batchUncheck,e.label]);if(e.isLoading)t=o.a.createElement(c.Loading,null);else if(e.tasks)if(0===e.tasks.length){var i=e.isUsingFilter?{imgSrc:Q,text:u.a.get("sprint.planning.task.not.found")}:{imgSrc:Z,text:e.emptySprintTip};t=o.a.createElement("div",{className:"task-not-found"},o.a.createElement("img",{src:i.imgSrc}),i.text&&o.a.createElement("span",null,i.text))}else{var s=e.tasks.map(function(t){return o.a.createElement(ee,r.a({key:t._id,onClick:n,uniqueIdPrefix:e.projectUniqueIdPrefix},t))});t=o.a.createElement(o.a.Fragment,null,s,e.hasMore&&o.a.createElement(m.LoadMore,{onEnter:e.loadMoreTasks}))}else t=null;var p=l()(Y.a["sprint-planning-selection-list"],e.className);return o.a.createElement("div",{className:p},o.a.createElement(ne,{label:e.label,loadTasks:e.loadTasks,switchSprintLabel:e.switchSprintLabel,sprints:e.sprints,locked:e.lockedToASprint,allChecked:e.allChecked,batchToggle:a}),o.a.createElement("div",{className:"thin-scroll"},t))}function ne(e){var t=r.f(o.a.useState(""),2),n=t[0],a=t[1],i=r.f(o.a.useState({tql:"",gtaCategories:[]}),2),s=i[0],l=s.tql,p=s.gtaCategories,d=i[1];o.a.useEffect(function(){e.loadTasks(e.label,n,l,p)},[e.loadTasks,e.label,n,l]);var f,h,m=o.a.useCallback(function(t){t!==e.label&&(e.switchSprintLabel&&e.switchSprintLabel(t),a(""),d({tql:"",gtaCategories:[]}))},[e.label,e.switchSprintLabel]);if("unplanned"===e.label)f=u.a.get("sprint.unplanned");else{var g=e.sprints.find(function(t){return t._id===e.label});f=g?g.name:""}if(e.locked)h=o.a.createElement("div",{className:"chosen-sprint"},f);else{var v=o.a.createElement(w,{current:e.label,onSwitch:m,sprints:e.sprints});h=o.a.createElement(c.Dropdown,{className:"sprint-switcher",nested:!0,placement:"bottomLeft",content:v},o.a.createElement("div",{className:"chosen-sprint"},o.a.createElement("span",null,f),o.a.createElement(c.Icon,{name:"arrow-down-s"})))}return o.a.createElement("div",{className:"selection-filter-panel"},o.a.createElement("div",{className:"to-the-left"},o.a.createElement(c.Checkbox,{checked:e.allChecked||!1,onClick:e.batchToggle,disabled:void 0===e.allChecked}),h),o.a.createElement("div",{className:"to-the-right"},o.a.createElement(re,{className:"fragment search",value:n,search:a}),o.a.createElement(ae,{className:"fragment filter",setTql:d})))}function re(e){var t=o.a.useRef(null);o.a.useLayoutEffect(function(){t.current&&t.current.focus()});var n=r.f(o.a.useState(!1),2),a=n[0],i=n[1],s=r.f(o.a.useState(!1),2),p=s[0],d=s[1],f=function(){d(!0)},h=o.a.createElement("input",{ref:t,value:e.value,onChange:function(t){var n=t.target.value;e.search(n),i(Boolean(n))},placeholder:u.a.get("sprint.planning.task.search.placeholder")}),m=p?o.a.createElement(o.a.Fragment,null,o.a.createElement(c.Icon,{name:"search"}),h):o.a.createElement(c.TextButton,null,o.a.createElement(c.Icon,{name:"search"}),o.a.createElement("span",null,u.a.get("search")));return o.a.createElement("div",{className:l()(e.className,{active:p}),onFocus:f,onBlur:function(){a||d(!1)},onClick:f},m)}function ae(e){var t=r.f(o.a.useState(!1),2),n=t[0],a=t[1],i=r.f(o.a.useState(!1),2),s=i[0],p=i[1],d=o.a.useCallback(function(t){p(Boolean(t.tql)),e.setTql(t)},[e.setTql]),f=l()(e.className,{active:s}),h=s?o.a.createElement(c.Icon,{name:"filter"},o.a.createElement("sup",null,o.a.createElement(c.Icon,{name:"state-check",size:8}))):o.a.createElement(c.Icon,{name:"filter"});return o.a.createElement(c.Dropdown,{nested:!0,placement:"bottom",persistence:!0,opened:n,onVisibleChange:a,content:o.a.createElement(A,{setTql:d}),autoDestroy:!1},o.a.createElement("div",{className:f},o.a.createElement(c.TextButton,null,h,u.a.get("filter"))))}var oe=n("t6tM/GMl"),ie=n("sCGnRAW/"),se=n.n(ie);n.d(t,"SprintPlanningModalConnect",function(){return le});var le=Object(i.connect)(function(e){var t=e.ui.sprintPlanning,n=r.f(Object(oe.f)(t),2),a=n[0],o=n[1];return{opened:t.modalOpened,planningSprintId:t.planningSprintId,planningSprint:a,isPlanningSprintEmpty:t.isPlanningSprintEmpty,sourceSprints:o,projectUniqueIdPrefix:t.projectUniqueIdPrefix,leftTaskGroup:Object(oe.e)(t),rightTaskGroup:Object(oe.g)(t),hasMoveToRightTodos:Object(oe.d)(t),hasMoveToLeftTodos:Object(oe.c)(t),leftSprintLabel:t.leftSprintLabel,rightSprintLabel:t.rightSprintLabel,isMoving:t.isMoving}},function(e){return{close:function(){return e(oe.a.closeModal.create({}))},loadTasks:function(t,n,r,a){return e(oe.a.loadTasks.create({label:t,searchTerm:n,tql:r,gtaCategories:a}))},loadMoreTasks:function(t){return e(oe.a.loadMoreTasks.create({label:t}))},switchSprintLabel:function(t){return function(n){return e(oe.a.switchSprintLabel.create({side:t,label:n}))}},toggleTodo:function(t){return function(n){return e(oe.a.toggleTodo.create({taskId:n,fromSide:t}))}},batchCheck:function(t){return function(n){return e(oe.a.batchCheck.create({side:t,label:n}))}},batchUncheck:function(t){return function(n){return e(oe.a.batchUncheck.create({side:t,label:n}))}},moveTasks:function(t,n){return e(oe.a.moveBegin.create({from:t,to:n}))}}})(function(e){var t=e.opened&&null!=e.planningSprintId,n=Object(d.b)(t);o.a.useEffect(function(){e.onVisibleChange&&t!==n&&e.onVisibleChange(e.opened)},[e.opened,e.onVisibleChange,n]);var a=o.a.useCallback(function(t){!t&&e.close()},[e.close]),i=o.a.useCallback(function(){e.loadMoreTasks(e.leftSprintLabel)},[e.loadMoreTasks,e.leftSprintLabel]),s=o.a.useCallback(function(){e.loadMoreTasks(e.rightSprintLabel)},[e.loadMoreTasks,e.rightSprintLabel]),l=o.a.useCallback(e.switchSprintLabel("left"),[e.switchSprintLabel]),p=o.a.useCallback(e.toggleTodo("left"),[e.toggleTodo]),f=o.a.useCallback(e.toggleTodo("right"),[e.toggleTodo]),h=o.a.useCallback(e.batchCheck("left"),[e.batchCheck]),m=o.a.useCallback(e.batchCheck("right"),[e.batchCheck]),g=o.a.useCallback(e.batchUncheck("left"),[e.batchUncheck]),v=o.a.useCallback(e.batchUncheck("right"),[e.batchUncheck]),b=o.a.useMemo(function(){return e.planningSprint?[e.planningSprint]:[]},[e.planningSprint]),y=t?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"head"},o.a.createElement("span",{className:"title"},u.a.get("sprint.planning.title")),o.a.createElement(c.TextButton,{onClick:e.close},o.a.createElement(c.Icon,{name:"remove"}))),o.a.createElement("div",{className:"body"},o.a.createElement(te,r.a({className:"left"},e.leftTaskGroup,{label:e.leftSprintLabel,loadTasks:e.loadTasks,loadMoreTasks:i,toggleTask:p,sprints:e.sourceSprints,switchSprintLabel:l,batchCheck:h,batchUncheck:g,projectUniqueIdPrefix:e.projectUniqueIdPrefix,emptySprintTip:u.a.get("sprint.planning.task.empty")})),o.a.createElement(pe,{className:"handlers",hasMoveToRightTodos:e.hasMoveToRightTodos,hasMoveToLeftTodos:e.hasMoveToLeftTodos,leftSprintLabel:e.leftSprintLabel,rightSprintLabel:e.rightSprintLabel,moveTasks:e.moveTasks,isMoving:e.isMoving}),o.a.createElement(te,r.a({className:"right"},e.rightTaskGroup,{label:e.rightSprintLabel,loadTasks:e.loadTasks,loadMoreTasks:s,toggleTask:f,sprints:b,lockedToASprint:!0,batchCheck:m,batchUncheck:v,projectUniqueIdPrefix:e.projectUniqueIdPrefix,emptySprintTip:e.isPlanningSprintEmpty?u.a.get("sprint.task.board.empty"):void 0})))):null;return o.a.createElement(c.Modal,r.a({opened:t,onVisibleChange:a},ce),y)});var ce={className:se.a["sprint-planning-modal"],titleCls:"modal-title",style:{top:0,width:"100vw",height:"100vh",borderRadius:0},bodyStyle:{margin:0,padding:0},closeable:!1,zIndex:1e3,mask:{visible:!1}};function pe(e){var t=o.a.useCallback(function(){e.moveTasks("left",e.rightSprintLabel)},[e.moveTasks,e.rightSprintLabel]),n=o.a.useCallback(function(){e.moveTasks("right",e.leftSprintLabel)},[e.moveTasks,e.leftSprintLabel]),r=e.isMoving||!e.hasMoveToRightTodos,a=e.isMoving||!e.hasMoveToLeftTodos;return o.a.createElement("div",{className:e.className},o.a.createElement("div",{className:l()("move-to-right",{active:!r})},o.a.createElement(c.Button,{type:"secondary",disabled:r,onClick:t},o.a.createElement(c.Icon,{name:"sharp-up"}))),o.a.createElement("div",{className:l()("move-to-left",{active:!a})},o.a.createElement(c.Button,{type:"secondary",disabled:a,onClick:n},o.a.createElement(c.Icon,{name:"sharp-down"}))))}},Q8jqGJjA:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},Q9LxqKX5:function(e,t,n){var r,a,o,i,s={}.hasOwnProperty;o=n("a+N5u/Cl"),i=n("CrgVhEYo").getDescription,a=n("CMQjtSNt"),r=n("7K0vwIum"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="TaskCreatorReminderView",t.prototype.className="task-creator-reminder-view",t.prototype.events={"click .reminder-handler":"toggleReminderPopover"},t.prototype.initialize=function(e){return this.taskModel=e.taskModel,null==this.taskModel.get("reminder")&&this.taskModel.set("reminder",{rules:[],members:[]}),t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){var e,n,a,s,l;if(this.taskModel)return l=this.taskModel.toJSON(),n=this.reminderMembersCollection.toJSON(),s=(a=i(l,l.reminder,n))||tb_i18n.get("task.reminder.modal.unset"),e=o.extend({},l,{permissions:this.taskModel.hasPermissions("put","put.reminder"),hasTitle:!!a,reminderTitle:s}),this.$el.html(r(e)),t.__super__.render.apply(this,arguments)},t}()},QjIAMQmu:function(e,t,n){e.exports={"list-view":"list-view__3F1N","list-view-container":"list-view-container__1PzG","empty-placeholder-container":"empty-placeholder-container__2dQl","empty-placeholder":"empty-placeholder__tWal","loading-container":"loading-container__2E3o","load-more-container":"load-more-container__3niC"}},"R0mhd/wd":function(e,t,n){},RsEnma8V:function(e,t,n){e.exports={"scrum-board-view-type":"scrum-board-view-type__3Vwk","scrum-sort":"scrum-sort__2Ix_","scrum-filter":"scrum-filter__I9PZ","filter-panel-footer":"filter-panel-footer__2mXA","filter-container":"filter-container__3u__","scrum-panel-search":"scrum-panel-search__cv0V","scrum-panel-search-clear":"scrum-panel-search-clear__7kJs","searchers-panel-list":"searchers-panel-list__mrMg","save-custom-button":"save-custom-button__vpe3"}},"Rz+mZ3+K":function(e,t,n){"use strict";var r=n("0ssihcRZ");n.o(r,"SPRINT_AMOUNT_LIMIT")&&n.d(t,"SPRINT_AMOUNT_LIMIT",function(){return r.SPRINT_AMOUNT_LIMIT});var a=n("BWH8qnKJ");n.d(t,"SPRINT_AMOUNT_LIMIT",function(){return a.a})},"SH0iX7/S":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAABqCAMAAABJT8UKAAABL1BMVEVHcEw9qPVIqv9Frf8/qv9BrPY9qPU9qPU9qPU9qvc9qPU+qvk+qfY9qPU/r/89qPU9qPVYtvet4v7G7//H7/89qPWv4v7A6/89qPU9qfaY1/w+qPWDzPs9qfZtwflAq/VYtfdEqv9Cq/Y9qPW35v49qPWh3P0+qPaM0Ps+qvV1xfo9qPdguvhLr/b///89qPW/6v89qPWp4P09qfWU1Pw+qPZ/yvo9qvZpvvlBqPlTs/dVqv89qPU/qfXE7v89qPWz5f49qPWd2fyHzvs9qPVxw/lAqvZcuPhCsf9GrPY9qPW76f89qfal3f0+qPWQ0/s+qfZ6x/o9q/VkvPhBqvhPsfc/v/89qPU+qPXC7P89qPV9yPo9qPlBqvWW1vyV1fw+qPU9qPY9qfY9qPU+qvbSAysLAAAAZXRSTlMA/xUWDB/Uw+Eh7C2P/RDYjf/////c///Xr/+H/1//N/8P/+f/v/+X/2//R///AfX/z/+n/3//V/8v/wn+/v/f/7f//2f/P/8X/+//x/+f/3f/T/8n/wT6/v+I/zL+//+KW8r2Wsa1btYAAAG8SURBVHgB7NO1YUAxEMZg/Wd4DPsvGWamMpzYbu5bQJX4G4k/MKrwuMfbc84CJcX0yWoWQ8l6DGH4OC5ughVsX/OZkJWtVLtTP5St/6EN9lxv1H6rN2pDyOPEf0v9t9pgE/9vGPg155xzzjnnXJzzosqWPEeAdVMT20rEjnZJ1PXw8HC4EUmke2qTjIRxhmhAnGGsPNDAAyuGiDQQEfbIfh1oQAgEYRzfWoAQQAQOKISgIwDhXqB3rCcIQrTggASCXuXGMHetA+Cb47Z9gJ+ZGP788B+zSnjAz9uZ4u2UWMJVRmdUDQ/4oXDciTwYL6o9R9v5XhWMbwp7J3IzzOrgRhMPeGtLrF3aVnBn1xg8+God4+i9Cyj4E33jIiIFv8MnJ1J77fr49JgapN0QKDh6dOb+Gg94bzuc3dn+io/LMOPweVjGCw6NdE5zweE/nbGAK+PQSE8JExw+OlMB18ahkR4R5uEc6bg093GOdGCa+7hB4uY38IAntsSkefKNuxoT6fFauw8O3rswPp7RA3zZ+769huZzL1eat5q9mRgckQpaOEhYSJfUHr8A23LjcwmJSbS2OSkxGWL3wAMAhcJA+woWgFwAAAAASUVORK5CYII="},SYmvOELT:function(e,t,n){var r,a,o,i={}.hasOwnProperty;o=n("vmWJWrVe"),r=n("5V57DkyA").BoardListApm,a=n("IBLCkgNc").ListViewConnect,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.className="list-view",t.prototype.viewName="listView",t.prototype.initialize=function(e){return this._projectId=e._projectId,this.taskflowEnabled=e.taskflowEnabled,this.tasks$=e.tasks$,this.setTql=e.setTql,this.loadMore=e.loadMore,r.measure(),this.render()},t.prototype.render=function(){return this.requestReactView(this.el,a,{projectId:this._projectId,taskflowEnabled:this.taskflowEnabled,tasks$:this.tasks$,setTql:this.setTql,loadMore:this.loadMore},{redux:!0})},t}()},Sf9Qbmhl:function(e,t,n){"use strict";n.r(t),n.d(t,"getSectionName$",function(){return d}),n.d(t,"updateSectionName",function(){return f});var r=n("mrSGxOB2"),a=n("HDK4lIiT"),o=n("4c1CS0b3"),i=n("s0r7VfKc"),s=n("tLZJUYWX"),l=n.n(s),c=n("G+qFsxjs");var p=function(e){return function(t){switch(e){case"bug":return l.a.get("section.name.bug.default");case"sprint":return l.a.get("sprint");case"story":return l.a.get("section.name.story.default")}}()||l.a.get("task")},u=new a.ReplaySubject(1),d=function(){return u.asObservable().switchMap(function(e){return function(e){return!!e.viewSection}(e)?"sprint"===e.agileType?"all"===(a=e).viewSection?o.Observable.of(l.a.get("sprint.all")):"unplanned"===a.viewSection?o.Observable.of(l.a.get("sprint.unplanned")):i.default.getSprint(a.viewSection).changes().map(function(e){var t=r.f(e,1)[0];return t?t.name:p(a.agileType)}).catch(function(){return[p(a.agileType)]}):function(e){return"all"===e.viewSection?o.Observable.of(Object(c.a)(e.agileType)):i.default.getCommonGroup(e.viewSection).changes().map(function(t){var n=r.f(t,1)[0];return n?n.name:p(e.agileType)}).catch(function(){return[p(e.agileType)]})}(e):(t=e.agileType,n=e.viewId,i.default.getSmartGroup(n).changes().map(function(e){var n=r.f(e,1)[0];return n?n.name:p(t)}).catch(function(){return[p(t)]}));var t,n,a})},f=function(e){u.next(e)}},SgEj5hX1:function(e,t,n){},SmhDd6I0:function(e,t){var n="Expected a function";e.exports=function(e,t,r){if("function"!=typeof e)throw new TypeError(n);return setTimeout(function(){e.apply(void 0,r)},t)}},SqZgGaCe:function(e,t,n){e.exports=n("r36LkUX8")},T61XCr5X:function(e,t,n){e.exports={inline:"inline__18Dd","searcher-name":"searcher-name__2Nn9"}},"TB/Xyh2N":function(e,t,n){},Tah8TL2Q:function(e,t,n){},TtW7bll1:function(e,t,n){e.exports={"stages-menu-trigger":"stages-menu-trigger__33g4","stages-menu-title":"stages-menu-title__2Fw5"}},UOkdRofj:function(e,t,n){var r=n("0T/aeGnq");r(r.S,"Object",{create:n("cQhG7g4o")})},UXZVaLbc:function(e,t,n){e.exports=n("ge64HLzx")},"UpxbwU5/":function(e,t,n){"use strict";n.r(t),n.d(t,"BackboneView",function(){return s}),n.d(t,"PluginsContainer",function(){return l});var r=n("mrSGxOB2"),a=n("vmWJWrVe"),o=n.n(a),i=n("u//1fy1x"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.initialize=function(e){this.props=e,this.stageData=r.a({},e.stage),this.render().setupPlugins({_projectId:e.projectId})},t.prototype.hide=function(){this.props.onHide()},t.prototype.render=function(){return this.$el.html('<ul class="list"></ul>'),this},t}(o.a);s.prototype.className="stage-menu-plugins-container";var l=Object(i.default)(s)},VNkUV4x1:function(e,t,n){e.exports={"kanban-status-popup-menu":"kanban-status-popup-menu__1fH-","confirm-text":"confirm-text__24ks","delete-text":"delete-text__2fZO",separator:"separator__36MA","kanban-status-transform-menu":"kanban-status-transform-menu__X5L8","radio-group":"radio-group__3Ibz",radio:"radio__n4rM","radio-hint":"radio-hint__3CIm","statuses-list":"statuses-list__1ZPl","status-checkbox-wrapper":"status-checkbox-wrapper__1JUs","status-hint":"status-hint__1YM3","status-name":"status-name__3swp","separator-wrapper":"separator-wrapper__2WMD","content-wrapper":"content-wrapper__3sJr","button-wrapper":"button-wrapper__3n78"}},VYXBlUOv:function(e,t,n){},WAfCmc9t:function(e,t,n){"use strict";var r=n("mrSGxOB2"),a=n("q1tIBJhx"),o=n.n(a),i=n("tLZJUYWX"),s=n.n(i),l=n("s0r7VfKc"),c=n("TSYQbtd+"),p=n.n(c),u=n("GESwhXbR");var d=n("f3HCp+u2"),f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={showTooltip:!1},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this.comp;e.offsetWidth<e.scrollWidth&&this.setState({showTooltip:!0})},t.prototype.render=function(){var e=this,t=this.props,n=t.maxWidth,r=t.style,a=t.title,i=t.className,s=p()(d["text-overflow"],i),l=Object.assign({},r,{maxWidth:n}),c=o.a.createElement("div",{className:s,ref:function(t){return e.comp=t}},this.props.children),f=o.a.createElement(u.Tooltip,{title:a},o.a.createElement("div",{style:l,className:s},this.props.children));return this.state.showTooltip?f:c},t}(o.a.PureComponent),h=n("s3alpFsE"),m=function(e){function t(t){var n=e.call(this,t)||this;return n.onSubmit=function(){var e=n.state,t=e.templateList,r=e.selectTempId;if(t){var a=t.find(function(e){return e._id===r});a&&n.props.onSubmit(a)}},n.getStagesTooltipStr=function(e){return e.map(function(e,t){return 0===t?e:" > "+e}).join("")},n.onSelectTemp=function(e){n.setState({selectTempId:e})},n.onDeleteTemp=function(e){var t=n.state.templateList;if(t){var r=t.filter(function(t){return t._id!==e});l.default.fetch.delete("stagetemplates/"+e).subscribe(function(){n.setState({templateList:r})})}},n.state={isLoading:!0,templateList:null,selectTempId:null},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;l.default.fetch.get("stagetemplates").subscribe(function(t){var n=r.h(t,[{_id:"tasklist0",title:i.get("tasklist.temp1title"),class:"tasklist_design",stages:[i.get("tasklist.temp1stage1"),i.get("tasklist.temp1stage2"),i.get("tasklist.temp1stage3"),i.get("tasklist.temp1stage4"),i.get("tasklist.temp1stage5")]},{_id:"tasklist1",title:i.get("tasklist.temp2title"),class:"tasklist_develope",stages:[i.get("tasklist.temp2stage1"),i.get("tasklist.temp2stage2"),i.get("tasklist.temp2stage3"),i.get("tasklist.temp2stage4"),i.get("tasklist.temp2stage5")]},{_id:"tasklist2",title:i.get("tasklist.temp3title"),class:"tasklist_support",stages:[i.get("tasklist.temp3stage1"),i.get("tasklist.temp3stage2"),i.get("tasklist.temp3stage3"),i.get("tasklist.temp3stage4")]}]);e.setState({isLoading:!1,templateList:n,selectTempId:n[0]._id})})},t.prototype.renderStages=function(e){return e.map(function(e,t){return a.createElement("span",{key:"stage-"+t},0===t?"":a.createElement(u.Icon,{name:"triangle-right",size:12}),e)})},t.prototype.renderItem=function(e){var t=this,n=this.state.selectTempId,r=a.createElement(u.Icon,{className:h["temp-select-icon"],name:"tick"}),o=!e.class&&a.createElement(u.Icon,{className:h["temp-remove-icon"],name:"remove",onClick:function(n){n.stopPropagation(),t.onDeleteTemp(e._id)}});return a.createElement("li",{className:h["temp-item"],key:e._id,onClick:function(){return t.onSelectTemp(e._id)}},a.createElement("div",{className:p()(h["temp-img"],h[""+(e.class||"tasklist_custom")])}),a.createElement("div",{className:h["temp-info"]},a.createElement(f,{maxWidth:500,title:e.title,className:h["temp-title"]},e.title),a.createElement(f,{maxWidth:500,title:this.getStagesTooltipStr(e.stages)},this.renderStages(e.stages))),n===e._id?r:o)},t.prototype.renderList=function(){var e=this,t=this.state.templateList;return t?t.map(function(t){return e.renderItem(t)}):null},t.prototype.renderSubmitButton=function(e){return a.createElement("div",{className:h["pane-footer"]},a.createElement(u.Button,{disabled:e,onClick:this.onSubmit},s.a.get("tasklist.creator.submit")))},t.prototype.render=function(){var e=this.state.selectTempId;return a.createElement("div",{className:h["pane-temp"]},a.createElement("ul",{className:h["temp-list"]},this.renderList()),this.renderSubmitButton(!e))},t}(a.PureComponent),g=n("s3alpFsE"),v=function(e){function t(t){var n=e.call(this,t)||this;return n.tabChange=function(e){var t=e.target.dataset.key;n.setState({activeKey:t})},n.handleTaskNameChange=function(e){n.setState({taskName:e.target.value})},n.handleTaskDescChange=function(e){n.setState({taskDesc:e.target.value})},n.onSubmit=function(e){var t,r,a,o=n.state,i=o.taskName,s=o.taskDesc,c=o.activeKey,p=n.props,u=p.projectId,d=p.onClose,f=p.onCreateSuccess,h=[];if("create"===c)t=i,r=s,a=null;else{if(!e)return;t=e.title,r=e.title,24===e._id.length?a=e:h=e.stages}(t=t.trim())&&l.default.fetch.post("tasklists",{description:r,title:t,_templateId:a,stages:h,_projectId:u}).subscribe(function(e){n.setState({taskName:"",taskDesc:""}),d(!1),f(e)})},n.state={activeKey:"create",taskDesc:"",taskName:"",selectTempId:""},n}return r.d(t,e),t.prototype.render=function(){var e="create"===this.state.activeKey?this.renderCreatePane():this.renderTempPane();return o.a.createElement("div",null,this.renderTabs(),e)},t.prototype.renderTabs=function(){var e=this.renderTab("template",s.a.get("tasklist.creator.temp"));return o.a.createElement("div",{className:g.tabs},this.renderTab("create",s.a.get("tasklist.creator.new")),!this.props.hideTemplate&&e)},t.prototype.renderTab=function(e,t){var n,r=this.state.activeKey,a=p()(((n={})[g.active]=r===e,n[g["one-tab"]]=this.props.hideTemplate,n));return o.a.createElement("span",{"data-key":e,onClick:this.tabChange,className:a},t)},t.prototype.renderSubmitButton=function(e){var t=this;return o.a.createElement("div",{className:g["pane-footer"]},o.a.createElement(u.Button,{disabled:e,onClick:function(){return t.onSubmit()}},s.a.get("tasklist.creator.submit")))},t.prototype.renderCreatePane=function(){var e=this.state,t=e.taskName,n=e.taskDesc;return o.a.createElement("div",{className:g["pane-create"]},o.a.createElement("p",{className:g["create-title"]},s.a.get("tasklist.creator.tasklist.title")),o.a.createElement("input",{value:t,placeholder:s.a.get("tasklist.creator.tasklist.placeholder"),onChange:this.handleTaskNameChange}),o.a.createElement("p",{className:g["create-title"]},s.a.get("tasklist.creator.tasklist.desc")),o.a.createElement("textarea",{value:n,placeholder:s.a.get("tasklist.creator.tasklist.placeholder"),onChange:this.handleTaskDescChange}),this.renderSubmitButton(!t))},t.prototype.renderTempPane=function(){return o.a.createElement(m,{onSubmit:this.onSubmit})},t}(o.a.PureComponent);n.d(t,"a",function(){return v})},WE63fzOe:function(e,t,n){e.exports={"status-menu-trigger":"status-menu-trigger__1RmG","limit-tip":"limit-tip__3mxR","status-menu-title":"status-menu-title__3j0b"}},"Wp+vEiz6":function(e,t,n){e.exports={"sprint-planning-selection-list":"sprint-planning-selection-list__2WZw"}},"X8//+OEP":function(e,t,n){e.exports={"task-creator-handler":"task-creator-handler__3mU5","task-creator-wrapper":"task-creator-wrapper__2dVV"}},XF9ZRjt2:function(e,t,n){e.exports={"scrum-sort-dropdown":"scrum-sort-dropdown__FmwI","scrum-sort-menu-item":"scrum-sort-menu-item__i26o"}},"XY+jiOEZ":function(e,t,n){var r=n("d3Klknvb")("keys"),a=n("ewAR5Db0");e.exports=function(e){return r[e]||(r[e]=a(e))}},XxBhk5o3:function(e,t){e.exports=function(e){return'<div class="scrum-panel-body"></div>'}},Zs7E12yM:function(e,t,n){"use strict";n.r(t),n.d(t,"createTask",function(){return o}),n.d(t,"createTaskSuccess",function(){return i});var r=n("mrSGxOB2"),a={page:"Sprint Page",control:"sprint panel",method:"click"};function o(e){return r.a({action:"add content"},a,e)}function i(e){return r.a({action:"added content"},a,e)}},aput1Sxn:function(e,t,n){var r=n("i6sEYMou"),a=n("5fohxi+U");e.exports=function(e){return r(a(e))}},b4pnW3jB:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},bPEZR78p:function(e,t,n){},bh8VM13d:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},bu5Cc5JR:function(e,t,n){},c0zWVFji:function(e,t,n){var r,a,o,i,s,l,c,p,u,d,f,h,m,g={}.hasOwnProperty;f=n("sa1Ed382"),u=n("vmWJWrVe"),n("wd/RKGTj"),p=n("GESwhXbR").Toast,a=n("4c1CS0b3").Observable,h=n("gh8QIhMV").throwError,d=n("ctsD9mWH").store,c=n("//SEpMEE"),o=n("77NnVLwu"),n("FoX6irlC"),n("bvmrLhnu").hideTasklist,r=n("XxBhk5o3"),i=n("lqPUVi5I").ScrumPanelConnect,n("J/h97mgM"),s=n("X7169US4"),m=n("u//1fy1x").default,l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)g.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,u),t.prototype.viewName="ScrumPanelView",t.prototype.className="scrum-panel",t.prototype.initialize=function(e){return this.projectId=e.projectId,this.appName=e.appName,this.customViewId=e.customViewId,this.tasklistId=e.tasklistId,this.showAsKanban=e.showAsKanban,this.smartGroupId=e.smartGroupId,this.smartGroupType=e.smartGroupType,this.getDefaultScenarioFieldId=e.getDefaultScenarioFieldId,this.disableSaveSortTemplate=e.disableSaveSortTemplate,this.getPresetFilters=e.getPresetFilters,this.subscribe(a.forkJoin([o.fetch$(this.projectId).do((t=this,function(e){t.projectModel=e}))]).do(function(e){return function(){return e.render(),e.renderBasic(),e.listen()}}(this),h));var t},t.prototype.listen=function(){if(this.listenTo(this.projectModel,"change:applications",function(){if(this.projectModel.isAppChanged("timeView")||this.projectModel.isAppChanged("tableView"))return this.renderBasic()}),this.listenTo(this.projectModel,"change:sortMethod",function(e,t){return d.dispatch(s.actions.setSortMethod({sortMethod:t}))}),this.projectModel.enableSmartGroupSortMethod())return this.listenTo(this.projectModel,"change:smartGroupsSort",function(){return d.dispatch(s.actions.setSortMethod({sortMethod:this.projectModel.getCurrentSortMethod(this.appName)}))})},t.prototype.render=function(){return this.$el.html(r()),this.$scrumPanelBody=this.$(".scrum-panel-body")},t.prototype.renderBasic=function(){var e,t,n;return e=n=c.isScrumApp(this.appName),t=this.projectModel.isTaskflowEnabled()&&!n,this.requestReactView(this.$scrumPanelBody.get(0),i,{projectId:this.projectId,projectModel:this.projectModel,appName:this.appName,tasklistId:this.tasklistId,showAsKanban:this.showAsKanban,scrumSmartGroupId:this.smartGroupId,scrumSmartGroupType:this.smartGroupType,isScrum:e,isTaskflow:t,isTableViewEnable:!!n||this.projectModel.isAppEnabled("tableView"),isTimeViewEnable:this.projectModel.isAppEnabled("timeView"),getDefaultScenarioFieldId:this.getDefaultScenarioFieldId,onSaveSortTemplate:this.saveTemplate.bind(this),disableSaveSortTemplate:this.disableSaveSortTemplate,getPresetFilters:this.getPresetFilters},{redux:!0})},t.prototype.saveTemplate=function(e,t){return this.projectModel.saveAttr("sort-method",null,{attrs:{sortMethod:e},success:(n=this,function(){return"function"==typeof t&&t(),n.sortMethodGta(),p.success(tb_i18n.get("scrum.panel.sort.method.success"))})});var n},t.prototype.sortMethodGta=function(e){var t;return t={segment:this.projectModel.getboardViewGtaSegment(),action:"order in filter",type:"manual",control:"task panel menu"},e&&(t.type=e),f.gta.event(t)},t}(),e.exports=m(l)},cP1fe9Vv:function(e,t,n){e.exports={container:"container__DguI",separator:"separator__2KO4","separator-full":"separator-full__3s55",modal:"modal__3BG_","modal-close":"modal-close__1njK","modal-title-content":"modal-title-content__3-vy","modal-title-sep-content":"modal-title-sep-content__3IRI","modal-title-with-close":"modal-title-with-close__3xWf","modal-title-position-left":"modal-title-position-left__1WZM","modal-title-position-right":"modal-title-position-right__1pea","modal-title-position-center":"modal-title-position-center__3OUG"}},cQhG7g4o:function(e,t,n){var r=n("D4nyOZu0"),a=n("9Wj7TJQu"),o=n("ACkFyxJK"),i=n("XY+jiOEZ")("IE_PROTO"),s=function(){},l=function(){var e,t=n("Ev2A6RPu")("iframe"),r=o.length;for(t.style.display="none",n("EDr4AA9i").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[i]=e):n=l(),void 0===t?n:a(n,t)}},ceF1hQ65:function(e,t,n){n("okOTINwH"),e.exports=n("p9MRCN7c").Number.isInteger},cs7E0gfm:function(e,t,n){e.exports={"board-left-panel-main":"board-left-panel-main__2I2u","board-left-panel-indicator-wrapper":"board-left-panel-indicator-wrapper__1ZvT","board-left-panel":"board-left-panel__2NGM","board-left-panel-width-supporter":"board-left-panel-width-supporter__vu3R"}},"d/ZjnUY3":function(e,t,n){},d0QK6Sy1:function(e,t,n){"use strict";var r=n("mrSGxOB2"),a=n("q1tIBJhx"),o=n("tLZJUYWX"),i=n("TSYQbtd+"),s=n.n(i),l=n("sa1Ed382"),c=n("GESwhXbR"),p=n("mmJiykER"),u=n("8zoxEjTT"),d=n("T61XCr5X"),f=n.n(d),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getSearcherName=function(){var e=t.props,n=e.name,r=e.i18Key;return r?o.get(r):n},t.onChange=function(e){var n;t.props.onChange(((n={})[t.props.id]=e,n))},t.onHide=function(){var e=t.props,n=e.onHideSearcher,a=e.tqlKey;l.gta.event(r.a({action:"delete filter",category:t.props.tqlKey,method:"click",type:t.props.type.toLowerCase()},t.props.gta)),u.a.set(a,null),n(t.props.id)},t}return r.d(t,e),t.prototype.renderSearcherName=function(){var e=this.getSearcherName();return a.createElement("div",{className:"searcher-unit-name"},a.createElement("span",{className:f.a["searcher-name"]},e),this.renderRemove())},t.prototype.renderRemove=function(){return!this.props.removable||this.props.disabled?null:"text"!==this.props.id&&a.createElement(c.Tooltip,{title:o.get("searcher.unit.remove.tips"),placement:"topLeft"},a.createElement(c.Icon,{className:"searcher-unit-remover",name:"circle-remove",onClick:this.onHide}))},t.prototype.renderOptions=function(){var e=this.props,t=e.id,n=e.type,o=e.options,i=e.categories,s=e.filter,l=e.scopes,c=e.disabled,u=e.projectId,d=e.organizationId,f=e.searchable,h=e.matchTextMode,m=e.ratio,g=e.tqlKey,v=e.tqlValue,b=e.advancedCustomfieldObjectType,y=e.aggregation,k={type:n,advancedCustomfieldObjectType:b,options:o,categories:i,ratio:m,title:this.getSearcherName(),projectId:u,organizationId:d,searchable:f,tqlValue:v,scopes:l,matchTextMode:h,aggregation:y,inline:this.props.inline,disabled:!!c,searcherId:t,field:g,node:s,onChange:this.onChange,gta:this.props.gta};return a.createElement(p.a,r.a({},k))},t.prototype.render=function(){var e,t=s()("searcher-unit","searcher-"+this.props.id.toLowerCase(),((e={"cant-remove":this.props.disabled||!this.props.removable})[f.a.inline]=this.props.inline,e));return a.createElement("div",{className:t},a.createElement("div",{className:"searcher-unit-title"},this.renderSearcherName()),a.createElement("div",{className:"searcher-unit-body"},this.renderOptions()))},t.defaultProps={removable:!0},t}(a.PureComponent);n.d(t,"a",function(){return h})},d3Klknvb:function(e,t,n){var r=n("2jw7JyIR"),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return a[e]||(a[e]={})}},djPm8zSj:function(e,t,n){var r=n("JpU4pMBL"),a=n("ACkFyxJK");e.exports=Object.keys||function(e){return r(e,a)}},dvMdXac2:function(e,t,n){e.exports={"create-stage":"create-stage__MvDi"}},"eK/cfwYN":function(e,t,n){},ewAR5Db0:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},"f3HCp+u2":function(e,t,n){e.exports={"text-overflow":"text-overflow__3tnY"}},f8CAHpVn:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r,a=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("8yf6doCl"),s=n("tLZJUYWX"),l=n("GESwhXbR"),c=n("gYU8d0JR");n("d/ZjnUY3"),function(e){e[e.MainPage=0]="MainPage",e[e.EditPage=1]="EditPage",e[e.AddStatusPage=2]="AddStatusPage",e[e.DeletePage=3]="DeletePage"}(r||(r={}));var p=function(e){function t(t){var n=e.call(this,t)||this;return n.destroy$=new i.Subject,n.rootCls="taskflow-status-menu",n.setPopupRef=function(e){n.popupRef=e},n.onOpenMenu=function(){var e=n.props.toggleMenuOpened;e&&e(!0)},n.onCloseMenu=function(){var e=n.props.toggleMenuOpened;e&&e(!1)},n.setDeleteTitle=function(e){n.setState({deleteMenuTitle:e})},n.onClosePopup=function(){n.popupRef.close()},n.onAddStatusSuccess=function(){n.popupRef.close()},n.goToAddStatusView=function(){n.props.gtaHandler("add status")},n.goToEditStatusView=function(){n.props.gtaHandler("edit name")},n.goToDeleteView=function(){n.props.gtaHandler("delete status")},n.state={deleteMenuTitle:""},n}return a.d(t,e),t.prototype.componentWillUnmount=function(){this.destroy$.next(),this.destroy$.complete()},t.prototype.renderEditNameLink=function(){return o.createElement(l.PopupMenuLink,{goto:r.EditPage},o.createElement(c.f,{onClick:this.goToEditStatusView}))},t.prototype.renderAddStatusLink=function(){return o.createElement(l.PopupMenuLink,{goto:r.AddStatusPage},o.createElement(c.b,{onClick:this.goToAddStatusView}))},t.prototype.renderDeleteLink=function(){return o.createElement(l.PopupMenuLink,{goto:r.DeletePage},o.createElement(c.d,{onClick:this.goToDeleteView}))},t.prototype.renderDeleteMenu=function(){return o.createElement(l.PopupMenuView,{className:"popup-menu popup-menu-subview",index:r.DeletePage,title:this.state.deleteMenuTitle},o.createElement(c.c,{taskflowStatus:this.props.taskflowStatus,startStatusCount:this.props.startStatusCount,endStatusCount:this.props.endStatusCount,onConfirm:this.onClosePopup,setDeleteTitle:this.setDeleteTitle,gtaHandler:this.props.gtaHandler}))},t.prototype.renderAddStatusMenu=function(){var e=this.props.taskflowStatus;return o.createElement(l.PopupMenuView,{className:"popup-menu popup-menu-subview",index:r.AddStatusPage,title:s.get("project.settings.taskflow.config.add.status")},o.createElement(c.a,{taskflowId:e._taskflowId,prevStatusId:e._id,onSuccess:this.onAddStatusSuccess,gtaHandler:this.props.gtaHandler}))},t.prototype.renderEditMenu=function(){return o.createElement(l.PopupMenuView,{className:"popup-menu popup-menu-subview",index:r.EditPage,title:s.get("project.settings.taskflow.config.edit.status.name")},o.createElement(c.e,{taskflowStatus:this.props.taskflowStatus,onSuccess:this.onClosePopup,gtaHandler:this.props.gtaHandler}))},t.prototype.renderMainMenu=function(){var e=this.props.totalStatusCount<c.g;return o.createElement(l.PopupMenuView,{className:"popup-menu",index:r.MainPage,title:s.get("project.settings.taskflow.popup.menu.title")},this.renderEditNameLink(),e&&this.renderAddStatusLink(),this.renderDeleteLink())},t.prototype.render=function(){var e=this.rootCls+"-popup";return o.createElement(l.PopupMenu,{ref:this.setPopupRef,className:e,main:r.MainPage,trigger:this.props.trigger,titleCls:"popup-title",onOpen:this.onOpenMenu,onClose:this.onCloseMenu},this.renderMainMenu(),this.renderEditMenu(),this.renderAddStatusMenu(),this.renderDeleteMenu())},t}(o.PureComponent)},fFwOWM0g:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("mrSGxOB2"),a=n("q1tIBJhx"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){var n=e.target.value,r=t.props.maxLength,a=void 0===r?1/0:r;n.length>a||t.props.onInputChange(n)},t.onKeyDown=function(e){t.props.text&&13===e.which&&(e.stopPropagation(),e.preventDefault(),t.props.onSubmit())},t}return r.d(t,e),t.prototype.render=function(){return a.createElement("input",{className:"form-control",placeholder:this.props.placeholder||"",value:this.props.text,onChange:this.onChange,onKeyDown:this.onKeyDown})},t}(a.PureComponent)},fZVSkaeT:function(e,t,n){e.exports=!n("14Ie4PSQ")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},fvB53q2w:function(e,t,n){},gP3sQMFZ:function(e,t,n){e.exports={empty:"empty__2g4g"}},gYU8d0JR:function(e,t,n){"use strict";var r=n("mrSGxOB2"),a=n("q1tIBJhx"),o=n.n(a),i=n("tLZJUYWX"),s=n.n(i),l=n("GESwhXbR"),c=n("s0r7VfKc"),p=n("fFwOWM0g");n("Fi3OGUvN");var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootCls="taskflow-add-status",t.state={name:""},t.onInputChange=function(e){t.setState({name:e})},t.onSave=function(){var e={name:t.state.name.trim(),prevStatusId:t.props.prevStatusId},n=t.props,r=n.taskflowId,a=n.onSuccess;c.default.createTaskflowStatus(r,e).subscribe(function(){t.props.gtaHandler("added status"),a&&a()})},t}return r.d(t,e),t.prototype.renderInput=function(){return a.createElement(p.a,{text:this.state.name,placeholder:i.get("project.settings.taskflow.config.add.status.placeholder"),onInputChange:this.onInputChange,onSubmit:this.onSave})},t.prototype.renderButton=function(){var e=!this.state.name;return a.createElement(l.Button,{onClick:this.onSave,disabled:e},i.get("add"))},t.prototype.render=function(){return a.createElement("div",{className:this.rootCls},this.renderInput(),a.createElement("footer",null,this.renderButton()))},t}(a.PureComponent),d=(n("+MvHiMrY"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootCls="taskflow-edit-status",t.state={name:t.props.taskflowStatus.name},t.onInputChange=function(e){t.setState({name:e})},t.onSave=function(){var e={name:t.state.name.trim()};c.default.updateTaskflowStatus(t.props.taskflowStatus._id,e).subscribe(function(){t.props.onSuccess(),t.props.gtaHandler("edited name")})},t}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({name:e.taskflowStatus.name})},t.prototype.renderInput=function(){return a.createElement(p.a,{text:this.state.name,placeholder:i.get("project.settings.taskflow.config.edit.status.name"),onInputChange:this.onInputChange,onSubmit:this.onSave})},t.prototype.renderButton=function(){var e=!this.state.name;return a.createElement(l.Button,{onClick:this.onSave,disabled:e},i.get("save"))},t.prototype.render=function(){return a.createElement("div",{className:this.rootCls},this.renderInput(),a.createElement("footer",null,this.renderButton()))},t}(a.PureComponent)),f=n("8yf6doCl"),h=n("uOAddLi+"),m=n("7PcElNMR");n("fvB53q2w");var g=function(e){function t(t){var n=e.call(this,t)||this;n.destroy$=new f.Subject,n.rootCls="taskflow-delete-status",n.i18n={deleteTitle:i.get("project.settings.taskflow.status.delete.title"),noDeleteTitle:i.get("project.settings.taskflow.status.no.delete.title")},n.onDelete=function(){c.default.deleteTaskflowStatus(n.props.taskflowStatus._id).takeUntil(n.destroy$).subscribe(function(){n.props.gtaHandler("deleted status")})},n.onConfirm=function(){n.props.onConfirm()};var r=n.getIsOnlyStartStatus(t),a=n.getIsOnlyEndStatus(t),o=!(r||a);return n.state={isOnlyStartStatus:r,isOnlyEndStatus:a,isDeletable:o,isRequestingDeletable:o},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.state.isDeletable?this.getStatusTaskCount():this.setDeleteTitle(this.state.isDeletable)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this.getIsOnlyStartStatus(e),n=this.getIsOnlyEndStatus(e),r=this.state,a=r.isOnlyStartStatus,o=r.isOnlyEndStatus;a===t&&o===n||this.setState({isOnlyStartStatus:t,isOnlyEndStatus:n})},t.prototype.componentWillUnmount=function(){this.destroy$.next(),this.destroy$.complete()},t.prototype.getIsOnlyStartStatus=function(e){var t=e.taskflowStatus,n=e.startStatusCount;return"start"===t.kind&&1===n},t.prototype.getIsOnlyEndStatus=function(e){var t=e.taskflowStatus,n=e.endStatusCount;return"end"===t.kind&&1===n},t.prototype.setDeleteTitle=function(e){var t=e?this.i18n.deleteTitle:this.i18n.noDeleteTitle;this.props.setDeleteTitle(t)},t.prototype.getStatusTaskCount=function(){var e=this;Object(m.e)(this.props.taskflowStatus._id,this.context.objectType).takeUntil(this.destroy$).subscribe(function(t){var n=0===(t.done||0)+(t.undone||0);e.setState({isDeletable:n,isRequestingDeletable:!1}),e.setDeleteTitle(n)})},t.prototype.renderHint=function(){var e;return e=this.state.isOnlyStartStatus?i.get("project.settings.taskflow.status.no.delete.start.title"):this.state.isOnlyEndStatus?i.get("project.settings.taskflow.status.no.delete.end.title"):this.state.isDeletable?i.get("project.settings.taskflow.status.delete.confirm"):i.get("project.settings.taskflow.status.delete.tasks"),a.createElement("div",{className:"hint-text"},e)},t.prototype.renderConfirmButton=function(){return a.createElement(l.Button,{onClick:this.onConfirm},i.get("i.know"))},t.prototype.renderDeleteButton=function(){return a.createElement(l.Button,{danger:!0,onClick:this.onDelete},i.get("confirm"))},t.prototype.renderButton=function(){return this.state.isDeletable?this.renderDeleteButton():this.renderConfirmButton()},t.prototype.renderLoading=function(){return a.createElement(l.Loading,{className:"spin-loading"})},t.prototype.renderContents=function(){return a.createElement(a.Fragment,null,this.renderHint(),this.renderButton())},t.prototype.render=function(){var e=this.state.isRequestingDeletable?this.renderLoading():this.renderContents();return a.createElement("div",{className:this.rootCls},e)},t.contextType=h.a,t}(a.PureComponent),v=(n("f8CAHpVn"),function(e){return o.a.createElement("div",{className:"menu-item",onClick:function(){"function"==typeof e.onClick&&e.onClick()}},o.a.createElement(l.Icon,{name:e.iconName}),o.a.createElement("span",null,e.text))}),b=function(e){return o.a.createElement(v,{iconName:"trash",text:s.a.get("project.settings.taskflow.config.delete.status"),onClick:e.onClick})},y=function(e){return o.a.createElement(v,{iconName:"plus",text:s.a.get("project.settings.taskflow.config.add.status.behind"),onClick:e.onClick})},k=function(e){return o.a.createElement(v,{iconName:"pencil",text:s.a.get("project.settings.taskflow.config.edit.status.name"),onClick:e.onClick})},S=n("sa1Ed382"),C=function(e){S.gta.event({action:e,segment:"Workflow Configuration",control:"Flow Menu"})};n.d(t,"a",function(){return u}),n.d(t,"e",function(){return d}),n.d(t,"c",function(){return g}),n.d(t,"d",function(){return b}),n.d(t,"b",function(){return y}),n.d(t,"f",function(){return k}),n.d(t,"h",function(){return C}),n.d(t,"g",function(){return 50})},ge64HLzx:function(e,t,n){n("mlGWQ0mt"),e.exports=n("p9MRCN7c").Object.assign},guNDun8y:function(e,t,n){n("PczMHIsV"),e.exports=n("p9MRCN7c").Date.now},i6sEYMou:function(e,t,n){var r=n("bh8VM13d");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},i9UIJ32R:function(e,t,n){"use strict";n.r(t),n.d(t,"FileStatus",function(){return r}),n.d(t,"ImportTasksPro",function(){return p});var r,a=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("GESwhXbR"),s=n("tLZJUYWX"),l=n("a+N5u/Cl"),c=n("oRPyOBnq");!function(e){e.preUpload="preUpload",e.uploading="uploading",e.uploaded="uploaded",e.parsedSuccess="parsedSuccess",e.parsedError="parsedError"}(r||(r={}));var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.d(t,e),t.prototype.renderTaskTypeSelect=function(){var e=this,n=this.props.configOptionValues.map(function(e){return o.createElement(i.Option,{value:e,key:e.data._id,className:"task-type-select-option"},o.createElement(c.FieldIcon,{type:"task",icon:e.data.icon}),e.data.name)});return o.createElement(i.Select,{defaultValue:this.props.activeConfigOptionValue,onSelect:function(t){e.props.onSelectScenarioFieldConfigOption(t)},className:"task-type-select",renderer:t.renderer,matchFn:this.matchFn,nested:!0},n)},t.prototype.matchFn=function(e,t){return e.data._id===t.data._id},t.prototype.renderDownloadTemplateInfo=function(){var e=this.props.projectName+"_"+this.props.activeConfigOptionValue.label;return s.get("import.tasks.download.template.tips",e)},t.prototype.renderErrorTable=function(){var e=function(e){return e?o.createElement(i.Tooltip,{title:e},e):e},t=this.props.errData.map(function(t,n){return o.createElement("tr",{key:n},o.createElement("td",null,t.row),o.createElement("td",null,e(t.celName)),o.createElement("td",null,e(t.content)),o.createElement("td",null,e(t.reason)))});return o.createElement("table",{className:"import-tasks-error-table"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,s.get("import.tasks.error.table.row")),o.createElement("th",null,s.get("import.tasks.error.table.cellName")),o.createElement("th",null,s.get("import.tasks.error.table.content")),o.createElement("th",null,s.get("import.tasks.error.table.reason")))),o.createElement("tbody",null,t))},t.prototype.renderFileContainer=function(){var e=this.props.status===r.parsedSuccess||this.props.status===r.parsedError,t=o.createElement("div",{className:"import-tasks-file-status"},s.get("import.tasks.file.status.uploading"),o.createElement(i.Icon,{name:"loading",className:"loading-icon"})),n=o.createElement("div",{className:"import-tasks-file-status"},s.get("import.tasks.file.status.parsing"),o.createElement(i.Icon,{name:"loading",className:"loading-icon"})),a=o.createElement(i.TextButton,{className:"import-tasks-file-status",onClick:this.props.onClickChooseFile},o.createElement(i.Icon,{name:"circle-arrow-up-o"}),s.get("import.tasks.file.status.updateFile"));return o.createElement("div",{className:"import-tasks-file-container"},o.createElement("div",{className:"import-tasks-file-name"},o.createElement(i.Icon,{name:"file"}),this.props.file.name),this.props.status===r.uploading&&t,this.props.status===r.uploaded&&n,e&&a)},t.prototype.render=function(){var e=this.props.status===r.parsedSuccess||this.props.status===r.parsedError,t=o.createElement(i.Button,{onClick:this.props.onClickChooseFile},s.get("import.tasks.upload.file"));if("errorFormat"!==this.props.errMsg)return o.createElement("div",{className:"import-tasks-pro"},o.createElement("div",{className:"import-tasks-body"},o.createElement("div",{className:"import-tasks-section task-type-select-section"},o.createElement("div",{className:"import-tasks-steps-icon"},"1"),o.createElement("div",{className:"import-tasks-steps-content"},o.createElement("label",{className:"import-tasks-steps-label"},s.get("import.tasks.steps.select.task.type")),this.renderTaskTypeSelect())),o.createElement("div",{className:"import-tasks-section download-template-section"},o.createElement("div",{className:"import-tasks-steps-icon"},"2"),o.createElement("div",{className:"import-tasks-steps-content"},o.createElement("label",{className:"import-tasks-steps-label"},s.get("import.tasks.steps.download.template")),o.createElement("div",{className:"subtitle"},this.renderDownloadTemplateInfo()),o.createElement(i.Button,{onClick:this.props.onClickDownloadTemplate},s.get("import.tasks.download.template")))),o.createElement("div",{className:"import-tasks-section upload-file-section"},o.createElement("div",{className:"import-tasks-steps-icon"},"3"),o.createElement("div",{className:"import-tasks-steps-content"},o.createElement("label",{className:"import-tasks-steps-label"},s.get("import.tasks.steps.import.task.file")),o.createElement("div",{className:"subtitle"},o.createElement("ul",null,o.createElement("li",null,s.get("import.tasks.file.requirements.fileType")),o.createElement("li",null,s.get("import.tasks.file.requirements.basicField"),s.get("comma"),s.get("import.tasks.file.requirements.maxTaskCount",500)),o.createElement("li",null,s.get("import.tasks.file.requirements.fieldRule")))),this.props.status!==r.preUpload?this.renderFileContainer():t,e&&o.createElement(u,{status:this.props.status})))),o.createElement("footer",{className:"import-tasks-footer"},o.createElement(i.Button,{onClick:this.props.onClickConfirm,disabled:this.props.status!==r.parsedSuccess},s.get("import.tasks.confirm.import"))));var n=l.uniq(this.props.errData.map(function(e){return e.row})).length,a=this.props.totalRows,c=a-n;return o.createElement("div",{className:"import-tasks-pro"},o.createElement("div",{className:"import-tasks-body"},o.createElement("div",{className:"import-tasks-error-tips"},o.createElement("label",{className:"import-tasks-steps-label error-label"},s.get("import.tasks.error.label",a,this.props.activeConfigOptionValue.label,c)),o.createElement("div",{className:"subtitle"},s.get("import.tasks.error.tips",n,this.props.activeConfigOptionValue.label))),this.renderErrorTable()),o.createElement("footer",{className:"import-tasks-footer"},o.createElement("a",{onClick:this.props.onClickChooseFile},s.get("import.tasks.reUpload")),o.createElement(i.Button,{disabled:a<=n,onClick:this.props.onClickConfirm},s.get("import.tasks.confirm.import"))))},t.renderer={renderSelectedLabel:function(e){return o.createElement("label",{className:"task-type-select-label"},o.createElement(c.FieldIcon,{type:"task",icon:e.data.icon}),e.label)}},t}(o.PureComponent),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refInfo=function(e){t.info=e},t}return a.d(t,e),t.prototype.componentDidMount=function(){this.info.scrollIntoView()},t.prototype.render=function(){var e=o.createElement("div",{className:"import-tasks-parse-success",ref:this.refInfo},o.createElement(i.Icon,{name:"circle-check"}),s.get("import.tasks.parse.success.tips")),t=o.createElement("div",{className:"import-tasks-parse-failure",ref:this.refInfo},o.createElement(i.Icon,{name:"warning"}),s.get("import.tasks.parse.failure.tips"));switch(this.props.status){case r.parsedSuccess:return e;case r.parsedError:return t;default:return null}},t}(o.PureComponent)},iQKydh6i:function(e,t,n){"use strict";n.r(t);var r=n("/MKjzBat"),a=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("GESwhXbR"),l=n("TSYQbtd+"),c=n.n(l),p=n("/SNw8Jel"),u=n("fvjXLGkK"),d=n("fio7jWQ0"),f=n("t6tM/GMl"),h=n("dbBRp+if"),m=n("tLZJUYWX"),g=n("sa1Ed382"),v=n("DOZCBSCZ"),b=n("oRqJmROU"),y=n("3eMzznN/"),k=n("DHFEKVJX"),S=n("7J4CuXkc"),C=n("W/kl2gze"),w=n("cVY30NxL"),I=n("GiMdtsHY"),T=n.n(I),E=function(e){var t=e.percentage,n=e.size,r=e.thickness,o=e.className,s=a.g(e,["percentage","size","thickness","className"]),l=Object(b.c)(n)?n:14,p=l,u=l,d={x:l/2,y:l/2},f=Object(b.c)(r)?r:3,h=(l-f)/2,m=2*Math.PI*h,g=c()("done",{animated:14===l&&3===f}),v=m*t/100;return i.a.createElement("svg",a.a({className:c()(T.a["progress-ring"],o),height:p,width:u,style:{transform:"rotate(-90deg)"}},s),i.a.createElement("circle",{className:"undone",strokeWidth:f,strokeDasharray:m,strokeDashoffset:0,fill:"transparent",r:h,cx:d.x,cy:d.y}),i.a.createElement("circle",{className:g,strokeWidth:f,strokeDasharray:m,strokeDashoffset:m-v,fill:"transparent",r:h,cx:d.x,cy:d.y}))},x=(n("eK/cfwYN"),function(e){function t(t){var n=e.call(this,t)||this;return n.redirectToAllSprintsPage=function(){n.props.onChooseSprint("all")},n.onChooseSprint=function(){n.props.onChooseSprint(n.props.sprint._id)},n.state={taskAmount:null,isEmptySprint:!1},n}return a.d(t,e),t.getDerivedStateFromProps=function(e,n){var r=t.getTaskAmount(e);return r===n.taskAmount?null:{taskAmount:r,isEmptySprint:0===r}},t.getTaskAmount=function(e){var t=e.sprintTaskCount;if(!t)return null;var n=t.unDone,r=t.done;return Object(w.getTaskAmount)(n)+Object(w.getTaskAmount)(r)},t.prototype.getTaskStatusTooltipTitle=function(){if(!this.props.sprintTaskCount||this.state.isEmptySprint)return null;var e=this.props.sprintTaskCount,t=e.unDone,n=e.done,r=this.props.scenarioFieldConfigs.map(function(e){var r,a=function(e){switch(e.proTemplateConfigType){case"story":return m.get("agile.requirements");case"bug":return m.get("agile.bugs");case"subtask":return m.get("task");default:return e.name}}(e),i=(r=e._id,n[r]+" / "+(n[r]+t[r]));return o.createElement("div",{key:e._id},a," : ",i)});return o.createElement("div",null,r)},t.prototype.getProgress=function(e){var t,n,r=e.unDone,a=e.done,o=Object(w.getTaskAmount)(a),i=o+Object(w.getTaskAmount)(r);return 0===i?0:(t=o,n=i,Math.floor(t/n*100))},t.prototype.renderStartButton=function(e){var t=o.createElement(P,{status:"future",isEmptySprint:this.state.isEmptySprint,disableChangeStatus:e});return o.createElement(S.a,{sprint:this.props.sprint,withTitle:!0,isEmptySprint:this.state.isEmptySprint,gtaControl:"Sprint List",trigger:t})},t.prototype.renderCompleteButton=function(e){var t=o.createElement(P,{status:"active",disableChangeStatus:e});return e?t:o.createElement(C.a,{projectId:this.props.projectId,sprintId:this.props.sprint._id,trigger:t,gtaControl:"Sprint List",onCompleteSprint:this.redirectToAllSprintsPage})},t.prototype.renderSprintOptions=function(){var e=this.props.sprint.name,t=null;return Object(b.c)(this.state.taskAmount)&&(t=o.createElement("div",{className:"sprint-tasks-amount"},this.state.taskAmount)),o.createElement("div",{className:"sprint-control-option"},o.createElement("div",{className:"details"},o.createElement(s.Tooltip,{title:e,placement:"top"},o.createElement("div",{className:"sprint-name"},e)),t&&o.createElement("div",{className:"dot-divider"},"·"),t),this.renderSprintStatusButton(),this.renderSprintMenuIcon())},t.prototype.renderSprintStatusButton=function(){var e=this.props.disableChangeStatus;switch(this.props.sprint.status){case"active":return this.renderCompleteButton(e);case"future":return this.renderStartButton(e);case"complete":default:return null}},t.prototype.renderSprintMenuIcon=function(){return this.props.disableChangeStatus&&this.props.disablePlanning&&this.props.disableEdit&&this.props.disableDelete?null:o.createElement(k.a,a.a({},this.props,{isEmptySprint:this.state.isEmptySprint,onDeleteSprint:this.props.isCurrentSprint?this.redirectToAllSprintsPage:void 0,onCompleteSprint:this.redirectToAllSprintsPage,gtaControl:"Sprint Sidebar"}))},t.prototype.renderSprintDate=function(){var e=this.props.sprint,t=e.startDate,n=e.dueDate;if(!t||!n)return null;var r=y.formatDate(t,{isUsePref:!0,inShort:!0}).dateString+" - "+y.formatDate(n,{isUsePref:!0,inShort:!0}).dateString,a="complete"===this.props.sprint.status?null:Object(w.sprintLeftDaysText)(n,Date.now());return o.createElement("div",{className:"sprint-subtitle"},o.createElement(s.Tooltip,{title:r,placement:"bottom"},o.createElement("span",{className:"sprint-date"},r)),null!=a&&o.createElement("span",{className:"sprint-left-days"},a),this.renderProgressRing())},t.prototype.renderProgressRing=function(){if("active"!==this.props.sprint.status)return null;var e=this.props.sprintTaskCount,t=e?this.getProgress(e):0,n=o.createElement("div",{className:"sprint-progress"},o.createElement(E,{percentage:t})),r=e?this.getTaskStatusTooltipTitle():"";return r?o.createElement(s.Tooltip,{title:r},n):n},t.prototype.render=function(){return o.createElement("div",{className:"sprint-panel-item",onClick:this.onChooseSprint},this.renderSprintOptions(),this.renderSprintDate())},t}(o.PureComponent)),M="sprint-status-action";function _(e){var t=e.inactive,n=e.disabled,r=e.hint,i=a.g(e,["inactive","disabled","hint"]),l=c()(M,{inactive:t,disabled:n}),p=o.createElement(s.Button,a.a({},i,{className:l,type:"secondary",onClick:function(e){n&&(e.stopPropagation(),e.preventDefault())}}),j,m.get("start"));return r?o.createElement(s.Tooltip,{title:r},p):p}function D(e){var t=a.g(e,[]);return o.createElement(s.Button,a.a({},t,{className:M,type:"secondary"}),N,m.get("finish"))}function O(e){var t=a.g(e,[]);return o.createElement("div",a.a({},t,{className:c()(M,"icon-less")}),m.get("sprint.is.active"))}function P(e){var t=e.status,n=e.disableChangeStatus,r=e.isEmptySprint,i=a.f(o.useState(!1),2),s=i[0],l=i[1];if("complete"===t)return null;if(n)switch(t){case"active":return o.createElement(O,null);case"future":return o.createElement(_,{disabled:!0});default:return null}if("future"===t&&r)return o.createElement(_,{disabled:!0,hint:m.get("sprint.can.not.start.no.tasks")});var c={onMouseOver:function(){l(!0)},onMouseLeave:function(){l(!1)}};switch(t){case"active":return s?o.createElement(D,a.a({},c)):o.createElement(O,a.a({},c));case"future":return o.createElement(_,a.a({inactive:!s},c));default:return null}}var N=o.createElement("svg",{width:20,height:20,version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.createElement("path",{d:"M8.155 13.087l-2.49-2.49a.6.6 0 1 1 .85-.848l2.064 2.066 4.91-4.909a.6.6 0 1 1 .848.848l-5.333 5.333a.593.593 0 0 1-.425.176.593.593 0 0 1-.424-.176z"})),j=o.createElement("svg",{width:20,height:20,version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.createElement("path",{d:"M12.697 9.501l-3.75-2.5a.6.6 0 0 0-.933.499v5a.6.6 0 0 0 .933.499l3.75-2.5a.598.598 0 0 0 0-.998"})),A=n("aR9Pp0Vi"),L=n("oRPyOBnq"),F=(n("LOm4bZHF"),n("AoHv62LZ")),B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setModalRef=function(e){t.modalRef=e},t.goToAnalytics=function(){var e=g.router.getPrefix()+"/analytics";g.router.navigate(e,{trigger:!0}),t.goToAnalyticsGta()},t.onCloseModal=function(){t.modalRef.close()},t}return a.d(t,e),t.prototype.goToAnalyticsGta=function(){var e=g.APP.getCurrentProject(),t=e?e.getGtaCategory():void 0;g.gta.event({action:"open analytics tab",page:"Sprint Page",control:"Sprint Completed Pop-up",projectid:this.props.projectId,category:t})},t.prototype.renderTaskCountDetail=function(){var e=this;return this.props.scenarioFieldConfigs.map(function(t){var n=e.getTaskCountDetailText(t);return n?o.createElement("div",{key:t._id,className:"sprint-detail"},o.createElement(L.FieldIcon,{type:"task",icon:t.icon}),o.createElement("span",null,n)):null})},t.prototype.getTaskCountDetailText=function(e){var t=this.props.doneTasksStatus,n=t&&t[e._id];if(!n)return null;switch(e.proTemplateConfigType){case"story":return m.get("sprint.tasks.stories.completed.amount",n);case"bug":return m.get("sprint.tasks.bugs.completed.amount",n);case"subtask":return m.get("sprint.tasks.subtasks.completed.amount",n);default:return m.get("sprint.tasks.default.completed.amount",n,e.name)}},t.prototype.renderGoToAnalytics=function(){var e=g.APP.getCurrentProject();return e&&e.isAppEnabled("analytics")&&o.createElement("a",{className:"link",onClick:this.goToAnalytics},m.get("sprint.completed.statistical.report"))},t.prototype.renderConfirmButton=function(){return o.createElement(s.Button,{className:"confirm-button",onClick:this.onCloseModal},m.get("confirm"))},t.prototype.renderContents=function(){return o.createElement("div",{className:"sprint-completed-wrapper"},o.createElement("img",{src:F}),this.renderGoToAnalytics(),this.renderTaskCountDetail(),this.renderConfirmButton())},t.prototype.render=function(){return o.createElement(s.Modal,{className:"sprint-complete-modal",ref:this.setModalRef,title:m.get("sprint.is.completed"),titleCls:"modal-title",opened:this.props.sprintModalOpened,width:360,onVisibleChange:this.props.onModalVisibleChange},this.renderContents())},t}(o.PureComponent),G=n("BWH8qnKJ"),V=n("eBzvnLeU");n("ptyzp6aa");var R=function(e){function t(t){var n=e.call(this,t)||this;return n.rootCls="sprint-panel-component",n.maxDisplaySprintsCount=8,n.motion={enter:{animation:"slideDown",duration:"200ms",display:"flex"},leave:{animation:"slideUp",duration:"200ms"}},n.setCurrentSprint=function(e){n.props.currentSprint!==e&&(n.props.actions.updateCurrentSprint({currentSprint:e}),n.props.onChooseSprint(e))},n.onChooseAllSprint=function(){n.setCurrentSprint("all")},n.onChooseUnplannedSprint=function(){n.setCurrentSprint("unplanned")},n.onDisplayUnfinishedSprints=function(){n.setState({unfinishedSprintsExpanded:!0})},n.onHideUnfinishedSprints=function(){n.setState({unfinishedSprintsExpanded:!1})},n.onDisplayFinishedSprints=function(){n.setState(a.a({},n.state,{displayFinishedSprints:!0})),n.toggleFinishedSprintsGta()},n.onHideFinishedSprints=function(){n.setState(a.a({},n.state,{displayFinishedSprints:!1})),n.toggleFinishedSprintsGta()},n.toggleFinishedSprintsGta=function(){g.gta.event({action:"toggle completed sprints",segment:"Sprint Sidebar",projectid:n.props.projectId})},n.isCurrentOption=function(e){return n.props.currentSprint===e},n.openSprintPlanningModal=function(e){var t=n.props.projectId;n.props.actions.openSprintPlanningModal(a.a({projectId:t},e))},n.state={displayFinishedSprints:!1,unfinishedSprintsExpanded:n.shouldExpandUnfinishedSprints(t)},n}return a.d(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.projectId,n=e.smartGroupId;this.props.actions.mounted({smartGroupId:n,projectId:t})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({displayFinishedSprints:this.shouldDisplayFinishedSprints(e),unfinishedSprintsExpanded:this.shouldExpandUnfinishedSprints(e)})},t.prototype.componentWillUnmount=function(){this.props.actions.unmount()},t.prototype.getUnfinishedSprintsCount=function(e){return e.sprints.filter(function(e){return"complete"!==e.status}).length},t.prototype.shouldExpandUnfinishedSprints=function(e){if(this.state&&this.state.unfinishedSprintsExpanded)return this.state.unfinishedSprintsExpanded;var t=this.getUnfinishedSprintsCount(e);if(0===t)return!1;var n=e.sprints,r=e.currentSprint;return n.findIndex(function(e){return e._id===r})+1>this.maxDisplaySprintsCount||t<=this.maxDisplaySprintsCount},t.prototype.shouldDisplayFinishedSprints=function(e){var t=e.sprints,n=e.currentSprint,r=this.state.displayFinishedSprints,a=t&&t.find(function(e){return e._id===n}),o=!!a&&"complete"===a.status;return r||o},t.prototype.renderCompletedSprintModal=function(){return o.createElement(B,{projectId:this.props.projectId,scenarioFieldConfigs:this.props.scenarioFieldConfigs,doneTasksStatus:this.props.doneTasksStatus,sprintModalOpened:this.props.sprintCompletedModalOpened,onModalVisibleChange:this.props.actions.onCompletedSprintModalVisibleChange})},t.prototype.renderCreateSprintIcon=function(){if(this.props.disableCreate)return null;var e=this.props.sprints.filter(function(e){return"complete"!==e.status}).length,t=e>=G.a,n=o.createElement("div",{className:this.rootCls+"-create-sprint-icon"},o.createElement(s.IconButton,{name:"plus",disabled:t,color:"gray",type:"subtle"}));return o.createElement(A.a,{projectId:this.props.projectId,unfinishedSprintsAmount:e,trigger:n,gtaControl:"Bottom Button",routeToCreatedSprint:!0})},t.prototype.renderFinishedSprints=function(){var e=this,t=this.props,n=t.isFetched,r=t.sprints,a=this.state.displayFinishedSprints;if(!n||!a)return null;var o=r&&r.filter(function(e){return"complete"===e.status});return o&&o.length?o.map(function(t){return e.renderSprint(t)}):null},t.prototype.renderDisplaySprintsOptions=function(){return!this.state.displayFinishedSprints&&o.createElement("div",{className:this.rootCls+"-toggle-option",onClick:this.onDisplayFinishedSprints},o.createElement(s.Icon,{name:"chevron-down"}),m.get("sprint.check.all.done"))},t.prototype.renderHideSprintsOptions=function(){return this.state.displayFinishedSprints&&o.createElement("div",{className:this.rootCls+"-toggle-option",onClick:this.onHideFinishedSprints},o.createElement(s.Icon,{name:"chevron-up"}),m.get("collapse"))},t.prototype.renderSprint=function(e){var t=this.props.sprintsTaskCount[e._id],n=this.props.currentSprint===e._id,r=c()(this.rootCls+"-sprint-content",{"is-active":n});return o.createElement("div",{key:e._id,className:this.rootCls+"-sprint"},o.createElement("div",{className:r},o.createElement(x,{sprint:e,isCurrentSprint:n,projectId:this.props.projectId,scenarioFieldConfigs:this.props.scenarioFieldConfigs,sprintTaskCount:t,disableChangeStatus:this.props.disableChangeStatus,disableEdit:this.props.disableEdit,disableDelete:this.props.disableDelete,disablePlanning:this.props.disablePlanning,onChooseSprint:this.setCurrentSprint,openSprintPlanningModal:this.openSprintPlanningModal})))},t.prototype.renderUnfinishedSprints=function(){var e=this,t=this.props,n=t.isFetched,r=t.sprints;if(!n)return o.createElement(v.a,null);var i=r&&r.filter(function(e){return"complete"!==e.status});if(!i||!i.length)return null;var s=i.slice(0,this.maxDisplaySprintsCount).map(function(t){return e.renderSprint(t)}),l=this.state.unfinishedSprintsExpanded?i.slice(this.maxDisplaySprintsCount,i.length):null,c=l?l.map(function(t){return e.renderSprint(t)}):null;return o.createElement(o.Fragment,null,s,o.createElement(V,a.a({component:"div"},this.motion),c))},t.prototype.renderUnfinishedSprintsToggler=function(){if(this.getUnfinishedSprintsCount(this.props)<=this.maxDisplaySprintsCount)return null;var e=this.rootCls+"-toggle-option";return this.state.unfinishedSprintsExpanded?o.createElement("div",{className:e,onClick:this.onHideUnfinishedSprints},o.createElement(s.Icon,{name:"chevron-up"}),m.get("collapse")):o.createElement("div",{className:e,onClick:this.onDisplayUnfinishedSprints},o.createElement(s.Icon,{name:"chevron-down"}),m.get("expand.all"))},t.prototype.renderSeparator=function(){var e=this.rootCls+"-separator";return o.createElement("div",{className:e},o.createElement(s.Separator,null))},t.prototype.renderUnPlannedOption=function(){var e=this.rootCls+"-sprint",t=c()(this.rootCls+"-sprint-content",{"is-active":this.isCurrentOption("unplanned")});return o.createElement("div",{className:e,onClick:this.onChooseUnplannedSprint},o.createElement("div",{className:t},o.createElement("div",{className:"sprint-name"},m.get("sprint.unplanned"))))},t.prototype.renderAllOption=function(){var e=this.rootCls+"-sprint",t=c()(this.rootCls+"-sprint-content",{"is-active":this.isCurrentOption("all")});return o.createElement("div",{className:e,onClick:this.onChooseAllSprint},o.createElement("div",{className:t},o.createElement("div",{className:"sprint-name"},m.get("sprint.all"))))},t.prototype.renderTitle=function(){return o.createElement("div",{className:this.rootCls+"-title-wrapper"},o.createElement("div",{className:this.rootCls+"-title"},m.get("sprint")),this.renderCreateSprintIcon())},t.prototype.render=function(){return o.createElement("div",{className:this.rootCls+"-main"},this.renderTitle(),this.renderAllOption(),this.renderUnPlannedOption(),this.renderUnfinishedSprints(),this.renderUnfinishedSprintsToggler(),this.renderSeparator(),o.createElement(V,a.a({component:"div"},this.motion),this.renderFinishedSprints()),this.renderDisplaySprintsOptions(),this.renderHideSprintsOptions(),this.renderCompletedSprintModal())},t}(o.PureComponent),U=function(e){var t,n=d.store.getState().ui.sprintPanel.projectId;switch(e.currentSprint){case"all":t={action:"toggle all workitems"};break;case"unplanned":t={action:"toggle unplanned workitems"};break;default:t={action:"open detail",type:"sprint"}}return a.a({},t,{projectId:n,segment:"Sprint Sidebar"})},W=Object(r.connect)(function(e){return{sprints:e.ui.sprintPanel.sprints,sprintsTaskCount:e.ui.sprintPanel.sprintsTaskCount,isFetched:e.ui.sprintPanel.isFetched,currentSprint:e.ui.sprintPanel.currentSprint,sprintCompletedModalOpened:e.ui.sprintPanel.sprintCompletedModalOpened,doneTasksStatus:e.ui.sprintPanel.doneTasksStatus}},function(e){return{actions:Object(u.bindActionCreators)({mounted:h.actions.mounted,updateCurrentSprint:Object(d.withGta)(h.actions.updateCurrentSprint,U),unmount:h.actions.unmount,onCompletedSprintModalVisibleChange:h.actions.onCompletedSprintModalVisibleChange,openSprintPlanningModal:f.a.openModal.create},e)}})(R),q=(n("ICBFVo7D"),n("tE7INp4w")),H=n("U3116aoz"),z=n("zDJ6609A"),K=n("yOSp9FUu"),J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.updateViewUrl=function(e,n){t.props.onChooseView(n)},t.onRedirectAgileUrl=function(){switch(t.props.smartGroupType){case"story":case"bug":var e=H.FixedCommonGroup.All;Object(H.dispatchUpdateCurrentCommonGroup)(e),t.props.onChooseCommonGroup(e,t.props.smartGroupId);break;case"sprint":default:Object(h.dispatchUpdateCurrentSprint)("all"),t.props.onChooseSprint("all")}},t}return a.d(t,e),t.prototype.renderCustomViews=function(){var e=this.props.smartGroupType;return i.a.createElement(z.CustomViewsConnect,{projectId:this.props.projectId,shouldLayerNested:!1,smartGroupType:Object(z.getCustomViewType)(e),onUpdateUrl:this.updateViewUrl,onRedirectAgileUrl:this.onRedirectAgileUrl})},t.prototype.renderStoryOrBugCommonGroupPanel=function(){return i.a.createElement(q.CommonGroupsPanel,{projectId:this.props.projectId,smartGroupId:this.props.smartGroupId,smartGroupType:this.props.smartGroupType,hasPermission:this.props.isAdmin,onChooseCommonGroup:this.props.onChooseCommonGroup})},t.prototype.renderSprintPanel=function(){return i.a.createElement(W,{smartGroupId:this.props.smartGroupId,projectId:this.props.projectId,scenarioFieldConfigs:this.props.scenarioFieldConfigs,disableCreate:this.props.disableSprintCreate,disableChangeStatus:this.props.disableSprintChangeStatus,disableEdit:this.props.disableSprintEdit,disableDelete:this.props.disableSprintDelete,disablePlanning:this.props.disableSprintPlanning,onChooseSprint:this.props.onChooseSprint})},t.prototype.renderSeparator=function(){return i.a.createElement("div",{className:K.separator},i.a.createElement(s.Separator,null))},t.prototype.renderContent=function(){switch(this.props.smartGroupType){case"story":case"bug":return this.renderStoryOrBugCommonGroupPanel();case"sprint":return this.renderSprintPanel();default:return null}},t.prototype.render=function(){var e=c()(K["agile-left-panel"],"thin-scroll"),t=this.props.hideCustomView;return i.a.createElement(p.a,{identityKey:this.props.smartGroupId},i.a.createElement("div",{className:e},this.renderContent(),!t&&this.renderSeparator(),!t&&this.renderCustomViews()))},t}(i.a.PureComponent),$=Object(r.connect)(function(e){return{currentSprint:e.ui.sprintPanel.currentSprint}})(J);n.d(t,"AgileLeftPanelConnect",function(){return $})},"jGDyp0N/":function(e,t,n){},jOCL5Ykd:function(e,t,n){var r=n("OtwAMvQ1"),a=n("+EWWrkDh");e.exports=n("fZVSkaeT")?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},jnO3mIlI:function(e,t,n){e.exports={"taskattrs-filter-menu":"taskattrs-filter-menu__1tqn",expander:"expander__1GL5",clearer:"clearer__bVPM","value-container":"value-container__3D7H"}},k7jCket7:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"BoardHeadSpan",function(){return _a}),n.d(r,"BoardHeadSpanConnect",function(){return Da});var a={};n.r(a),n.d(a,"Component",function(){return r});var o=n("/MKjzBat"),i=n("fvjXLGkK"),s=n("CRfajq5X"),l=n("mrSGxOB2"),c=n("tLZJUYWX"),p=n.n(c),u=n("q1tIBJhx"),d=n.n(u),f=n("4c1CS0b3"),h=n("TSYQbtd+"),m=n.n(h),g=n("mdaSFG4P"),v=n.n(g),b=n("2wwy0/iv"),y=n.n(b),k=n("pLtpNf2v"),S=n.n(k),C=n("p0XBHsXn"),w=n.n(C),I=n("UXZVaLbc"),T=n.n(I),E=n("Cg2ASZ1b"),x=n.n(E),M=!0,_="Invariant failed";var D=function(e,t){if(!e)throw M?new Error(_):new Error(_+": "+(t||""))},O=function(e){var t=e.top,n=e.right,r=e.bottom,a=e.left;return{top:t,right:n,bottom:r,left:a,width:n-a,height:r-t,x:a,y:t,center:{x:(n+a)/2,y:(r+t)/2}}},P=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},N=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},j={top:0,right:0,bottom:0,left:0},A=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?j:n,a=e.border,o=void 0===a?j:a,i=e.padding,s=void 0===i?j:i,l=O(P(t,r)),c=O(N(t,o)),p=O(N(c,s));return{marginBox:l,borderBox:O(t),paddingBox:c,contentBox:p,margin:r,border:o,padding:s}},L=function(e){var t=e.slice(0,-2);"px"!==e.slice(-2)&&D(!1);var n=Number(t);return isNaN(n)&&D(!1),n},F=function(e,t){var n,r,a=e.borderBox,o=e.border,i=e.margin,s=e.padding,l=(r=t,{top:(n=a).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return A({borderBox:l,border:o,margin:i,padding:s})},B=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),F(e,t)},G=function(e,t){var n={top:L(t.marginTop),right:L(t.marginRight),bottom:L(t.marginBottom),left:L(t.marginLeft)},r={top:L(t.paddingTop),right:L(t.paddingRight),bottom:L(t.paddingBottom),left:L(t.paddingLeft)},a={top:L(t.borderTopWidth),right:L(t.borderRightWidth),bottom:L(t.borderBottomWidth),left:L(t.borderLeftWidth)};return A({borderBox:e,margin:n,padding:r,border:a})},V=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return G(t,n)},R=n("SqZgGaCe"),U=n.n(R);function W(e,t){e.prototype=U()(t.prototype),e.prototype.constructor=e,e.__proto__=t}var q=n("17x9q+7Q"),H=n.n(q),z=function(e,t){return e===t};var K=function(e,t){var n;void 0===t&&(t=z);var r,a=[],o=!1,i=function(e,n){return t(e,a[n],n)};return function(){for(var t=arguments.length,s=new Array(t),l=0;l<t;l++)s[l]=arguments[l];return o&&n===this&&s.length===a.length&&s.every(i)?r:(r=e.apply(this,s),o=!0,n=this,a=s,r)}},J=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];t=a,n||(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};function $(){return($=T.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n("O+LLMktj");var X={x:0,y:0},Y=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},Q=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},Z=function(e,t){return e.x===t.x&&e.y===t.y},ee=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},te=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},ne=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},re=function(e,t){return Math.min.apply(Math,t.map(function(t){return ne(e,t)}))},ae=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},oe=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},ie=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},se=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=O({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):O(e)},le=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,a=e.frame,o=function(e,t,n){var r;return n&&n.increasedBy?$({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(function(e,t){return t?oe(e,t.scroll.diff.displacement):e}(t.marginBox,a),r,n);return{page:t,withPlaceholder:n,active:se(o,a)}},ce=function(e,t){e.frame||D(!1);var n=e.frame,r=Q(t,n.scroll.initial),a=ee(r),o=$({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:a},max:n.scroll.max}});return $({},e,{frame:o,subject:le({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o})})},pe=function(e){},ue=function(e){};function de(e){return y()(e)}function fe(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function he(e,t){if(e.find)return e.find(t);var n=fe(e,t);return-1!==n?e[n]:void 0}var me=K(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),ge=K(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),ve=K(function(e){return de(e)}),be=K(function(e){return de(e)}),ye=function(e,t){return function(n){return e<=n&&n<=t}},ke=function(e){var t=ye(e.top,e.bottom),n=ye(e.left,e.right);return function(e){return t(e.y)&&t(e.y)&&n(e.x)&&n(e.x)}},Se=K(function(e,t,n){var r=n?1:-1,a=t[e.line]*r;return{value:a,point:te(e.line,a)}}),Ce=function(e){var t=e.target,n=e.droppables,r=e.draggable,a=he(ve(n),function(e){if(!e.isEnabled)return!1;var n=e.subject.active;if(!n)return!1;if(e.descriptor.id===r.descriptor.droppableId)return ke(n)(t);var a=function(e,t){var n=e.height+t.point.y,r=e.width+t.point.x,a=e.top,o=e.left;return O({top:a,right:o+r,bottom:a+n,left:o})}(n,Se(e.axis,r.displaceBy,!0));return ke(a)(t)});return a?a.descriptor.id:null},we=K(function(e,t){return be(t).filter(function(t){return e===t.descriptor.droppableId}).sort(function(e,t){return e.descriptor.index-t.descriptor.index})}),Ie=function(e){var t=ye(e.top,e.bottom),n=ye(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var a=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(a&&o)return!0;var i=r.top<e.top&&r.bottom>e.bottom,s=r.left<e.left&&r.right>e.right;return!(!i||!s)||(i&&o||s&&a)}},Te=function(e){var t=ye(e.top,e.bottom),n=ye(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},Ee={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},xe={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Me=function(e){var t=e.target,n=e.destination,r=e.viewport,a=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,i=a?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:X;return oe(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(i,n,o)&&function(e,t,n){return n(t)(e)}(i,r,o)},_e=function(e){return Me($({},e,{isVisibleThroughFrameFn:Te}))},De=function(e){var t,n=e.draggable,r=e.destination,a=e.previousImpact,o=e.viewport,i=n.descriptor.id,s=a.movement.map,l=(t={target:n.page.marginBox,destination:r,viewport:o,withDroppableDisplacement:!0},Me($({},t,{isVisibleThroughFrameFn:Ie})));return{draggableId:i,isVisible:l,shouldAnimate:function(e,t){return!!e&&(!t||t.shouldAnimate)}(l,s[i])}},Oe=K(function(e){return e.reduce(function(e,t){return e[t.draggableId]=t,e},{})}),Pe=function(e,t){return e===Ee?"down"===t.vertical:"right"===t.horizontal},Ne=function(e,t){return Boolean(e)&&e.descriptor.type===t.descriptor.type},je={displaced:[],map:{},displacedBy:{point:X,value:0},willDisplaceForward:!1},Ae={movement:je,direction:null,destination:null,merge:null},Le=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Fe=function(e,t,n){return n?e!==n.combine.draggableId?t:n.whenEntered:t},Be=function(e){var t=e.pageBorderBoxCenterWithDroppableScrollChange,n=e.previousImpact,r=e.draggable,a=e.destination,o=e.insideDestination,i=e.userDirection;if(!a.isCombineEnabled)return null;var s=a.axis,l=n.movement.map,c=n.movement.displacedBy.value,p=n.merge,u=he(o,function(e){var n=e.descriptor.id;if(n===r.descriptor.id)return!1;var a=Boolean(l[n])?c:0;return function(e){var t=e.id,n=e.currentCenter,r=e.axis,a=e.borderBox,o=e.displacedBy,i=e.currentUserDirection,s=e.oldMerge,l=a[r.start]+o,c=a[r.end]+o,p=.666*a[r.size],u=Fe(t,i,s),d=Pe(r,u),f=n[r.line];return d?ye(l,l+p)(f):ye(c-p,c)(f)}({id:n,currentCenter:t,axis:s,borderBox:e.page.borderBox,displacedBy:a,currentUserDirection:i,oldMerge:p})});return u?$({},n,{destination:null,merge:{whenEntered:Fe(u.descriptor.id,i,p),combine:{draggableId:u.descriptor.id,droppableId:a.descriptor.id}}}):null},Ge=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=e.draggables,a=e.droppables,o=e.previousImpact,i=e.viewport,s=e.userDirection,l=Ce({target:t,droppables:a,draggable:n});if(!l)return Ae;var c,p,u=a[l],d=Le(n,u),f=we(u.descriptor.id,r),h=(c=t,(p=u.frame)?Y(c,p.scroll.diff.value):c),m=Be({pageBorderBoxCenterWithDroppableScrollChange:h,previousImpact:o,draggable:n,destination:u,insideDestination:f,userDirection:s});return m||(d?function(e){var t=e.pageBorderBoxCenterWithDroppableScrollChange,n=e.draggable,r=e.home,a=e.insideHome,o=e.previousImpact,i=e.viewport,s=e.userDirection,l=r.axis,c=n.page.borderBox.center,p=t[l.line],u=p>c[l.line],d=!u,f=Pe(r.axis,s),h=u?!f:f,m=Se(r.axis,n.displaceBy,d),g=m.value,v=[],b=a.filter(function(e,t){if(e===n)return!1;var r=e.page.borderBox,a=r[l.start],o=r[l.end];if(u){if(e.descriptor.index<n.descriptor.index)return!1;if(h){var i=o+g;return p>i&&v.push(t),p>i}return p>=a&&v.push(t),p>=a}if(e.descriptor.index>n.descriptor.index)return!1;if(h){var s=a+g;return p<s&&v.push(t),p<s}return p<=o?v.push(t):p<=o});var y=function(){if(!b.length)return b;if(u){var e=b[b.length-1],t=Ne(e,n),r=v[v.length-1]+1,o=a[r]||null,i=Ne(o,n),s=a.length===r;return t||i||s?b:[]}var l=b[0],c=Ne(l,n),p=v[0]-1,d=a[p]||null,f=Ne(d,n);return c||f||-1===p?b:[]}().map(function(e){return De({draggable:e,destination:r,previousImpact:o,viewport:i.frame})}),k=u?y.reverse():y,S=function(e,t,n){return t?n?e+t:e-t:e}(n.descriptor.index,k.length,u);return{movement:{displaced:k,map:Oe(k),willDisplaceForward:d,displacedBy:m},direction:l.direction,destination:{droppableId:r.descriptor.id,index:S},merge:null}}({pageBorderBoxCenterWithDroppableScrollChange:h,draggable:n,home:u,insideHome:f,previousImpact:o,viewport:i,userDirection:s}):function(e){var t=e.pageBorderBoxCenterWithDroppableScrollChange,n=e.draggable,r=e.destination,a=e.insideDestination,o=e.previousImpact,i=e.viewport,s=e.userDirection,l=r.axis,c=Pe(r.axis,s),p=Se(r.axis,n.displaceBy,!0),u=t[l.line],d=p.value,f=[],h=a.filter(function(e,t){var n=e.page.borderBox,r=n[l.start],a=n[l.end];return c?(u<=r+d&&f.push(t),u<=r+d):(u<a&&f.push(t),u<a)});var m=function(){var e=h.length===a.length;if(!h.length||e)return h;var t=h[0],r=Ne(t,n),o=f[0]-1,i=a[o]||null,s=Ne(i,n);return r||s?h:[]}().map(function(e){return De({draggable:e,destination:r,previousImpact:o,viewport:i.frame})}),g=a.length-m.length;return{movement:{displacedBy:p,displaced:m,map:Oe(m),willDisplaceForward:!0},direction:l.direction,destination:{droppableId:r.descriptor.id,index:g},merge:null}}({pageBorderBoxCenterWithDroppableScrollChange:h,draggable:n,destination:u,insideDestination:f,previousImpact:o,viewport:i,userDirection:s}))},Ve=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,a=e.width,o=Q({x:n,y:t},{x:a,y:r});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},Re=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,a=e.isFixedOnPage,o=e.isSortable,i=e.direction,s=e.client,l=e.page,c=e.closest,p=function(){if(!c)return null;var e=c.scrollSize,t=c.client,n=Ve({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:n,diff:{value:X,displacement:X}}}}(),u="vertical"===i?Ee:xe;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:a,isSortable:o,axis:u,isEnabled:n,client:s,page:l,frame:p,subject:le({page:l,withPlaceholder:null,axis:u,frame:p})}},Ue=function(e,t){return $({},e,{scroll:$({},e.scroll,{max:t})})},We=function(e,t,n){var r=e.frame;e.subject.withPlaceholder&&D(!1);var a=te(e.axis.line,t[e.axis.line]),o=function(e,t,n){var r=e.axis,a=e.subject.page.contentBox[r.size],o=we(e.descriptor.id,n).reduce(function(e,t){return e+t.client.marginBox[r.size]},0)+t[r.line]-a;return o<=0?null:te(r.line,o)}(e,a,n),i={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r)return $({},e,{subject:le({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame})});var s=o?Y(r.scroll.max,o):r.scroll.max,l=Ue(r,s);return $({},e,{subject:le({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:l}),frame:l})},qe=function(e){var t=e.subject.withPlaceholder;t||D(!1);var n=e.frame;if(!n)return $({},e,{subject:le({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var r=t.oldFrameMaxScroll;r||D(!1);var a=Ue(n,r);return $({},e,{subject:le({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null}),frame:a})},He=function(e){var t=e.frame;return t||D(!1),t},ze=function(e){var t=e.merge,n=e.destination;return n?n.droppableId:t?t.combine.droppableId:null},Ke=function(e,t){var n=ze(t);return!!n&&n!==e.droppableId},Je=function(e,t){var n;return $({},e,{droppables:$({},e.droppables,(n={},n[t.descriptor.id]=t,n))})},$e=function(e){var t=e.dimensions,n=e.previousImpact,r=e.draggable,a=e.impact,o=function(e){var t=e.previousImpact,n=e.impact,r=e.dimensions,a=ze(t),o=ze(n);if(!a)return r;if(a===o)return r;var i=r.droppables[a];if(!i.subject.withPlaceholder)return r;var s=qe(i);return Je(r,s)}({previousImpact:n,impact:a,dimensions:t});if(!Ke(r.descriptor,a))return o;var i=ze(a);if(!i)return o;var s=o.droppables[i];if(s.subject.withPlaceholder)return o;var l=We(s,r.displaceBy,o.draggables);return Je(o,l)},Xe=function(e){var t,n,r=e.state,a=e.published;pe("Processing dynamic changes");var o=function(e){var t=e.modified,n=e.existingDroppables,r=e.initialWindowScroll;return t.length?t.map(function(e){var t=n[e.descriptor.id];t||D(!1);var a,o,i=t.subject.withPlaceholder?qe(t):t,s=i.client,l=e.client,c=He(i),p=He(e),u=A({borderBox:(i.axis,a=s.borderBox,o=l.borderBox,{top:a.top,left:a.left,right:a.left+o.width,bottom:a.top+o.height}),margin:s.margin,border:s.border,padding:s.padding}),d={client:c.frameClient,page:B(c.frameClient,r),shouldClipSubject:c.shouldClipSubject,scrollSize:p.scrollSize,scroll:c.scroll.initial},f=Re({descriptor:e.descriptor,isEnabled:e.isEnabled,isCombineEnabled:e.isCombineEnabled,isFixedOnPage:e.isFixedOnPage,isSortable:e.isSortable,direction:e.axis.direction,client:u,page:B(u,r),closest:d});return ce(f,p.scroll.current)}):t}({modified:a.modified,existingDroppables:r.dimensions.droppables,initialWindowScroll:r.viewport.scroll.initial}),i=function(e){var t=e.additions,n=e.modified,r=e.viewport,a=r.scroll.diff.value,o=me(n);return t.map(function(e){var t=e.descriptor.droppableId,n=o[t].frame;n||D(!1);var i=n.scroll.diff.value,s=Y(a,i),l=F(e.client,s),c=B(l,r.scroll.initial);return $({},e,{placeholder:$({},e.placeholder,{client:l}),client:l,page:c})})}({additions:a.additions,modified:o,viewport:r.viewport}),s={draggables:r.dimensions.draggables,droppables:$({},r.dimensions.droppables,me(o))},l=function(e){var t=e.existing,n=e.additions,r=e.removals,a=e.initialWindowScroll,o=ve(t.droppables),i={};o.forEach(function(e){var o=e.axis,s=we(e.descriptor.id,t.draggables),l={},c=function(e,t){var n=l[e];l[e]=n?{indexChange:n.indexChange+t.indexChange,offset:Y(n.offset,t.offset)}:t},p=ge(r.map(function(e){return t.draggables[e]}).filter(function(t){return t.descriptor.droppableId===e.descriptor.id})),u=s.filter(function(e,t){if(!Boolean(p[e.descriptor.id]))return!0;var n=ee(te(o.line,e.client.marginBox[o.size]));return s.slice(t).forEach(function(e){p[e.descriptor.id]||c(e.descriptor.id,{indexChange:-1,offset:n})}),!1}),d=n.filter(function(t){return t.descriptor.droppableId===e.descriptor.id}),f=u.slice(0);d.forEach(function(e){f.splice(e.descriptor.index,0,e)});var h=ge(d);f.forEach(function(e,t){if(Boolean(h[e.descriptor.id])){var n=te(o.line,e.client.marginBox[o.size]);f.slice(t).forEach(function(e){h[e.descriptor.id]||c(e.descriptor.id,{indexChange:1,offset:n})})}}),f.forEach(function(e){if(!h[e.descriptor.id]){var t=l[e.descriptor.id];if(t){var n=F(e.client,t.offset),r=B(n,a),o=e.descriptor.index+t.indexChange,s=$({},e,{descriptor:$({},e.descriptor,{index:o}),placeholder:$({},e.placeholder,{client:n}),client:n,page:r});i[s.descriptor.id]=s}}})});var s=$({},t.draggables,i,ge(n));return r.forEach(function(e){delete s[e]}),s}({existing:s,additions:i,removals:a.removals,initialWindowScroll:r.viewport.scroll.initial}),c=r.critical.draggable.id,p=r.dimensions.draggables[c],u=l[c],d=$e({previousImpact:r.impact,impact:r.impact,draggable:u,dimensions:{draggables:l,droppables:s.droppables}}),f={droppable:r.critical.droppable,draggable:u.descriptor},h=function(e){var t,n=e.initial,r=e.current,a=e.oldClientBorderBoxCenter,o=e.newClientBorderBoxCenter,i=e.viewport,s=Q(o,a),l={client:t={selection:Y(n.client.selection,s),borderBoxCenter:o,offset:X},page:{selection:Y(t.selection,i.scroll.initial),borderBoxCenter:Y(t.selection,i.scroll.initial)}};return{current:function(){var e=ee(s),t=Y(r.client.offset,e),n={selection:Y(l.client.selection,t),borderBoxCenter:Y(l.client.borderBoxCenter,t),offset:t},a={selection:Y(n.selection,i.scroll.current),borderBoxCenter:Y(n.borderBoxCenter,i.scroll.current)};return Z(r.client.borderBoxCenter,n.borderBoxCenter)||D(!1),{client:n,page:a}}(),initial:l}}({initial:r.initial,current:r.current,oldClientBorderBoxCenter:p.client.borderBox.center,newClientBorderBoxCenter:u.client.borderBox.center,viewport:r.viewport}),m=h.initial,g=h.current,v=function(e){var t=e.movement.displaced;if(!t.length)return e;var n=t.map(function(e){return e.shouldAnimate?$({},e,{shouldAnimate:!1}):e});return $({},e,{movement:$({},e.movement,{displaced:n,map:Oe(n)})})}(Ge({pageBorderBoxCenter:g.page.borderBoxCenter,draggable:d.draggables[r.critical.draggable.id],draggables:d.draggables,droppables:d.droppables,previousImpact:Ae,viewport:r.viewport,userDirection:r.userDirection}));Boolean("SNAP"===r.movementMode&&r.impact.destination&&!v.destination)&&D(!1),ue("Processing dynamic changes");var b=$({phase:"DRAGGING"},r,((t={}).phase="DRAGGING",t.critical=f,t.current=g,t.initial=m,t.impact=v,t.dimensions=d,t.forceShouldAnimate=!1,t));return"COLLECTING"===r.phase?b:$({phase:"DROP_PENDING"},b,((n={}).phase="DROP_PENDING",n.reason=r.reason,n.isWaiting=!1,n))},Ye=function(e){var t=e.subject.active;return t||D(!1),t},Qe=function(e,t){var n=e.frame;return n?Y(t,n.scroll.diff.displacement):t},Ze=function(e){var t=e.isInHomeList,n=e.proposedIndex,r=e.startIndexInHome;return!t||n<r},et=function(e,t){return{movement:je,direction:t.axis.direction,destination:(n=e.descriptor,{index:n.index,droppableId:n.droppableId}),merge:null};var n},tt=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},nt=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},rt=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return te(t.line,n.marginBox[t.end]+tt(t,r),nt(t,n.marginBox,r))},at=function(e){var t=e.movement,n=e.draggable,r=e.draggables,a=e.droppable,o=we(a.descriptor.id,r),i=n.page,s=a.axis;if(!o.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return te(t.line,n.contentBox[t.start]+tt(t,r),nt(t,n.contentBox,r))}({axis:s,moveInto:a.page,isMoving:i});var l=t.displaced,c=t.willDisplaceForward,p=t.displacedBy,u=Le(n,a),d=l.length?r[l[0].draggableId]:null;if(!d){if(u)return n.page.borderBox.center;var f=o[o.length-1];return rt({axis:s,moveRelativeTo:f.page,isMoving:i})}var h=F(d.page,p.point);return c?function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return te(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),nt(t,n.marginBox,r))}({axis:s,moveRelativeTo:h,isMoving:i}):rt({axis:s,moveRelativeTo:h,isMoving:i})},ot=function(e){var t=e.impact,n=e.draggable,r=e.droppable,a=e.draggables,o=t.merge,i=t.destination,s=n.page.borderBox.center;return r?i?at({movement:t.movement,draggable:n,draggables:a,droppable:r}):o?function(e){var t=e.combine,n=e.movement,r=e.draggables,a=t.draggableId,o=Boolean(n.map[a]),i=r[a].page.borderBox.center;return o?Y(i,n.displacedBy.point):i}({movement:t.movement,combine:o.combine,draggables:a}):s:s},it=function(e){var t=ot(e),n=e.droppable;return n?Qe(n,t):t},st=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,a=e.viewport,o=e.withDroppableDisplacement,i=e.onlyOnMainAxis,s=void 0!==i&&i,l=Q(r,t.page.borderBox.center),c={target:oe(t.page.borderBox,l),destination:n,withDroppableDisplacement:o,viewport:a};return s?function(e){return Me($({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=ye(e.top,e.bottom),r=ye(e.left,e.right);return function(e){return t===Ee?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(c):_e(c)},lt=function(e){var t=e.previousPageBorderBoxCenter,n=e.destination,r=e.insideDestination,a=e.draggable,o=e.draggables,i=e.moveRelativeTo,s=e.previousImpact,l=e.viewport;return r.length&&!i?null:(i&&i.descriptor.droppableId!==n.descriptor.id&&D(!1),Le(a,n)?function(e){var t=e.moveIntoIndexOf,n=e.insideDestination,r=e.draggable,a=e.destination,o=e.previousImpact,i=e.viewport;if(!t)return null;var s=a.axis,l=r.descriptor.index,c=t.descriptor.index;if(l===c)return et(r,a);var p=Ze({isInHomeList:!0,proposedIndex:c,startIndexInHome:l}),u=(p?n.slice(c,l):n.slice(l+1,c+1).reverse()).map(function(e){return De({draggable:e,destination:a,previousImpact:o,viewport:i.frame})});return u.length||D(!1),{movement:{displacedBy:Se(a.axis,r.displaceBy,p),displaced:u,map:Oe(u),willDisplaceForward:p},direction:s.direction,destination:{droppableId:a.descriptor.id,index:c},merge:null}}({moveIntoIndexOf:i,insideDestination:r,draggable:a,destination:n,previousImpact:s,viewport:l}):function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,a=e.draggable,o=e.draggables,i=e.destination,s=e.previousImpact,l=e.viewport,c=i.axis;if(!n||!r.length){var p={movement:je,direction:c.direction,destination:{droppableId:i.descriptor.id,index:0},merge:null},u=it({impact:p,draggable:a,droppable:i,draggables:o}),d=We(i,a.displaceBy,o);return st({draggable:a,destination:d,newPageBorderBoxCenter:u,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?p:null}var f=r.indexOf(n);-1===f&&D(!1);var h=Boolean(t[i.axis.line]<n.page.borderBox.center[i.axis.line])?f:f+1,m=r.slice(h).map(function(e){return De({draggable:e,destination:i,viewport:l.frame,previousImpact:s})});return{movement:{displacedBy:Se(i.axis,a.displaceBy,!0),displaced:m,map:Oe(m),willDisplaceForward:!0},direction:c.direction,destination:{droppableId:i.descriptor.id,index:h},merge:null}}({previousPageBorderBoxCenter:t,moveRelativeTo:i,insideDestination:r,draggable:a,draggables:o,destination:n,previousImpact:s,viewport:l}))},ct=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=function(e,t){return Y(e.scroll.diff.displacement,t)}(e.viewport,t),a=Q(r,n.page.borderBox.center);return Y(n.client.borderBox.center,a)},pt=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,a=e.isOver,o=e.draggables,i=e.droppables,s=e.previousImpact,l=e.viewport,c=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,a=e.droppables,o=e.viewport,i=r.subject.active;if(!i)return null;var s=r.axis,l=ye(i[s.start],i[s.end]),c=ve(a).filter(function(e){return e!==r}).filter(function(e){return e.isEnabled}).filter(function(e){return Boolean(e.subject.active)}).filter(function(e){return Ie(o.frame)(Ye(e))}).filter(function(e){var n=Ye(e);return t?i[s.crossAxisEnd]<n[s.crossAxisEnd]:n[s.crossAxisStart]<i[s.crossAxisStart]}).filter(function(e){var t=Ye(e),n=ye(t[s.start],t[s.end]);return l(t[s.start])||l(t[s.end])||n(i[s.start])||n(i[s.end])}).sort(function(e,n){var r=Ye(e)[s.crossAxisStart],a=Ye(n)[s.crossAxisStart];return t?r-a:a-r}).filter(function(e,t,n){return Ye(e)[s.crossAxisStart]===Ye(n[0])[s.crossAxisStart]});if(!c.length)return null;if(1===c.length)return c[0];var p=c.filter(function(e){return ye(Ye(e)[s.start],Ye(e)[s.end])(n[s.line])});return 1===p.length?p[0]:p.length>1?p.sort(function(e,t){return Ye(e)[s.start]-Ye(t)[s.start]})[0]:c.sort(function(e,t){var r=re(n,ie(Ye(e))),a=re(n,ie(Ye(t)));return r!==a?r-a:Ye(e)[s.start]-Ye(t)[s.start]})[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:a,droppables:i,viewport:l});if(!c)return null;var p=we(c.descriptor.id,o),u=function(e){var t=e.axis,n=e.pageBorderBoxCenter,r=e.viewport,a=e.destination;return e.insideDestination.filter(function(e){return _e({target:e.page.borderBox,destination:a,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(e,r){var o=ne(n,Qe(a,e.page.borderBox.center)),i=ne(n,Qe(a,r.page.borderBox.center));return o<i?-1:i<o?1:e.page.borderBox[t.start]-r.page.borderBox[t.start]})[0]||null}({axis:c.axis,pageBorderBoxCenter:n,viewport:l,destination:c,insideDestination:p}),d=lt({previousPageBorderBoxCenter:n,destination:c,draggable:r,draggables:o,moveRelativeTo:u,insideDestination:p,previousImpact:s,viewport:l});if(!d)return null;var f=it({impact:d,draggable:r,droppable:c,draggables:o});return{clientSelection:ct({pageBorderBoxCenter:f,draggable:r,viewport:l}),impact:d,scrollJumpRequest:null}},ut={vertical:"down",horizontal:"right"},dt={vertical:"up",horizontal:"left"},ft=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,a=e.draggables,o=e.destination,i=e.insideDestination,s=e.previousImpact,l=s.destination?function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.previousImpact,a=e.draggable,o=e.insideDestination;if(r.merge)return null;var i=r.destination;i||D(!1);var s=o.slice(),l=i.index;!n&&s.splice(i.index,0,a);var c=t?l+1:l-1;return c<0?null:c>s.length-1?null:{proposedIndex:c,modifyDisplacement:!0}}({isMovingForward:t,isInHomeList:n,draggable:r,previousImpact:s,insideDestination:i}):(s.merge||D(!1),function(e){var t=e.isInHomeList,n=e.isMovingForward,r=e.draggable,a=e.destination,o=e.previousImpact,i=e.draggables,s=e.merge;if(!a.isCombineEnabled)return null;var l=o.movement,c=s.combine.draggableId,p=i[c].descriptor.index;if(!Boolean(l.map[c]))return Ze({isInHomeList:t,proposedIndex:p,startIndexInHome:r.descriptor.index})?n?{proposedIndex:p+1,modifyDisplacement:!1}:{proposedIndex:p,modifyDisplacement:!0}:n?{proposedIndex:p,modifyDisplacement:!0}:{proposedIndex:p-1,modifyDisplacement:!1};var u=l.willDisplaceForward,d=u?p+1:p-1;return u?n?{proposedIndex:d,modifyDisplacement:!0}:{proposedIndex:d-1,modifyDisplacement:!1}:n?{proposedIndex:d+1,modifyDisplacement:!1}:{proposedIndex:d,modifyDisplacement:!0}}({isInHomeList:n,isMovingForward:t,draggable:r,destination:o,previousImpact:s,draggables:a,merge:s.merge}));if(null==l)return null;var c=l.proposedIndex,p=l.modifyDisplacement,u=r.descriptor.index,d=Ze({isInHomeList:n,proposedIndex:c,startIndexInHome:u}),f=Se(o.axis,r.displaceBy,d),h=i[c],m=function(){if(!p)return s.movement.displaced;var e=function(e){var t=e.isInHomeList,n=e.isMovingForward,r=e.proposedIndex,a=e.startIndexInHome;return t?n?r>a:r<a:!n}({isInHomeList:n,isMovingForward:t,proposedIndex:c,startIndexInHome:u}),r=s.movement.displaced;return e?function(e,t){return[{draggableId:e.descriptor.id,isVisible:!0,shouldAnimate:!0}].concat(t)}(h,r):function(e){return e.slice(1)}(r)}();return{movement:{displacedBy:f,willDisplaceForward:d,displaced:m,map:Oe(m)},direction:o.axis.direction,destination:{droppableId:o.descriptor.id,index:c},merge:null}},ht=function(e,t){var n=Q(t,e.scroll.initial),r=ee(n),a=e.elementOffset.y+t.y,o=e.elementOffset.x+t.x;return{frame:O({top:a,bottom:a+e.frame.height,left:o,right:o+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}},element:e.element,elementOffset:e.elementOffset}},mt=function(e,t){return $({},e,{movement:$({},e.movement,{displaced:t,map:Oe(t)})})},gt=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,a=e.draggables,o=e.previousImpact,i=e.viewport,s=e.previousPageBorderBoxCenter,l=e.previousClientSelection;if(!r.isEnabled)return null;var c=we(r.descriptor.id,a),p=Le(n,r),u=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,a=e.destination,o=e.insideDestination,i=e.previousImpact;if(!a.isCombineEnabled)return null;if(i.merge)return null;var s=i.destination;s||D(!1);var l,c=s.index,p=(l=o.slice(),n&&l.splice(r.descriptor.index,1),l.splice(s.index,0,r),l),u=t?c+1:c-1;if(u<0)return null;if(u>p.length-1)return null;var d=p[u],f={whenEntered:t?ut:dt,combine:{draggableId:d.descriptor.id,droppableId:a.descriptor.id}};return{movement:i.movement,destination:null,direction:a.axis.direction,merge:f}}({isInHomeList:p,isMovingForward:t,draggable:n,destination:r,insideDestination:c,previousImpact:o})||ft({isMovingForward:t,isInHomeList:p,draggable:n,draggables:a,destination:r,insideDestination:c,previousImpact:o});if(!u)return null;var d=it({impact:u,draggable:n,droppable:r,draggables:a});if(st({draggable:n,destination:r,newPageBorderBoxCenter:d,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:ct({pageBorderBoxCenter:d,draggable:n,viewport:i}),impact:u,scrollJumpRequest:null};var f=Q(d,s);return{clientSelection:l,impact:function(e){var t=e.impact,n=e.viewport,r=e.destination,a=e.draggables,o=e.maxScrollChange,i=t.movement.displaced,s=ht(n,Y(n.scroll.current,o)),l=r.frame?ce(r,Y(r.frame.scroll.current,o)):r,c=i.map(function(e){return e.isVisible?e:De({draggable:a[e.draggableId],destination:l,previousImpact:t,viewport:s.frame}).isVisible?{draggableId:e.draggableId,isVisible:!0,shouldAnimate:!1}:e});return mt(t,c)}({impact:u,viewport:i,destination:r,draggables:a,maxScrollChange:f}),scrollJumpRequest:f}},vt=function(e){var t=e.state,n=e.type,r=function(e,t){var n=ze(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),a=Boolean(r),o=t.dimensions.droppables[t.critical.droppable.id],i=r||o,s=i.axis.direction,l="vertical"===s&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===s&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(l&&!a)return null;var c="MOVE_DOWN"===n||"MOVE_RIGHT"===n,p=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,d=t.dimensions,f=d.draggables,h=d.droppables,m=t.viewport;return l?gt({isMovingForward:c,draggable:p,destination:i,draggables:f,viewport:m,previousPageBorderBoxCenter:u,previousClientSelection:t.current.client.selection,previousImpact:t.impact}):pt({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:p,isOver:i,draggables:f,droppables:h,previousImpact:t.impact,viewport:m})};function bt(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}var yt,kt,St=function(e,t){return 0===t?e:t>0?"down":"up"},Ct=function(e,t){return 0===t?e:t>0?"right":"left"},wt=function(e){var t,n,r,a,o=e.state,i=e.clientSelection,s=e.dimensions,l=e.viewport,c=e.impact,p=e.scrollJumpRequest,u=l||o.viewport,d=u.scroll.current,f=s||o.dimensions,h=i||o.current.client.selection,m=Q(h,o.initial.client.selection),g={offset:m,selection:h,borderBoxCenter:Y(o.initial.client.borderBoxCenter,m)},v={selection:Y(g.selection,d),borderBoxCenter:Y(g.borderBoxCenter,d)},b={client:g,page:v},y=(t=o.userDirection,n=o.current.page.borderBoxCenter,r=b.page.borderBoxCenter,a=Q(r,n),{horizontal:Ct(t.horizontal,a.x),vertical:St(t.vertical,a.y)});if("COLLECTING"===o.phase)return $({phase:"COLLECTING"},o,{dimensions:f,viewport:u,current:b,userDirection:y});var k=f.draggables[o.critical.draggable.id],S=c||Ge({pageBorderBoxCenter:v.borderBoxCenter,draggable:k,draggables:f.draggables,droppables:f.droppables,previousImpact:o.impact,viewport:u,userDirection:y});return $({},o,{current:b,userDirection:y,dimensions:$e({draggable:k,impact:S,previousImpact:o.impact,dimensions:f}),impact:S,viewport:u,scrollJumpRequest:p||null,forceShouldAnimate:!p&&null})},It=function(e){var t=e.impact,n=e.draggable,r=e.droppable,a=e.draggables,o=e.viewport,i=it({impact:t,draggable:n,draggables:a,droppable:r});return ct({pageBorderBoxCenter:i,draggable:n,viewport:o})},Tt=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&D(!1);var a=t.impact,o=r||t.viewport,i=n||t.dimensions,s=i.draggables,l=i.droppables,c=s[t.critical.draggable.id],p=ze(a);p||D(!1);var u=l[p],d=function(e){var t=e.impact,n=e.viewport,r=e.destination,a=e.draggables,o=t.movement.displaced.map(function(e){return De({draggable:a[e.draggableId],destination:r,previousImpact:t,viewport:n.frame})});return mt(t,o)}({impact:a,viewport:o,destination:u,draggables:s}),f=It({impact:d,draggable:c,droppable:u,draggables:s,viewport:o});return wt({impact:d,clientSelection:f,state:t,dimensions:i,viewport:o})},Et=function(e){return"SNAP"===e.movementMode},xt=function(e,t,n){var r=Je(e.dimensions,t);return!Et(e)||n?wt({state:e,dimensions:r}):Tt({state:e,dimensions:r})},Mt={phase:"IDLE"},_t=function(e,t){if(void 0===e&&(e=Mt),"CLEAN"===t.type)return Mt;if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&D(!1);var n=t.payload,r=n.critical,a=n.clientSelection,o=n.viewport,i=n.dimensions,s=n.movementMode,l=i.draggables[r.draggable.id],c=i.droppables[r.droppable.id],p={selection:a,borderBoxCenter:l.client.borderBox.center,offset:X},u={client:p,page:{selection:Y(p.selection,o.scroll.initial),borderBoxCenter:Y(p.selection,o.scroll.initial)}};return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:i,initial:u,current:u,isWindowScrollAllowed:ve(i.droppables).every(function(e){return!e.isFixedOnPage}),impact:et(l,c),viewport:o,userDirection:ut,scrollJumpRequest:null,forceShouldAnimate:null}}var d;if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&D(!1),$({phase:"COLLECTING"},e,((d={}).phase="COLLECTING",d)));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&D(!1),Xe({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;bt(e)||D(!1);var f=t.payload.client;return Z(f,e.current.client.selection)?e:wt({state:e,clientSelection:f,impact:Et(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return e;if("COLLECTING"===e.phase)return e;bt(e)||D(!1);var h=t.payload,m=h.id,g=h.offset,v=e.dimensions.droppables[m];if(!v)return e;var b=ce(v,g);return xt(e,b,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;bt(e)||D(!1);var y=t.payload,k=y.id,S=y.isEnabled,C=e.dimensions.droppables[k];C||D(!1),C.isEnabled===S&&D(!1);var w=$({},C,{isEnabled:S});return xt(e,w,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;bt(e)||D(!1);var I=t.payload,T=I.id,E=I.isCombineEnabled,x=e.dimensions.droppables[T];x||D(!1),x.isCombineEnabled===E&&D(!1);var M=$({},x,{isCombineEnabled:E});return xt(e,M,!0)}if("UPDATE_DROPPABLE_IS_SORTABLE_CHANGED"===t.type){if("DROP_PENDING"===e.phase)return e;bt(e)||D(!1);var _=t.payload,O=_.id,P=_.isSortable,N=e.dimensions.droppables[O];N||D(!1),N.isSortable===P&&D(!1);var j=$({},N,{isSortable:P});return xt(e,j,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;bt(e)||D(!1),e.isWindowScrollAllowed||D(!1);var A=t.payload.newScroll;if(Z(e.viewport.scroll.current,A))return e;var L=ht(e.viewport,A);return Et(e)?Tt({state:e,viewport:L}):wt({state:e,viewport:L})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){bt(e)||D(!1);var F=t.payload.maxScroll,B=$({},e.viewport,{scroll:$({},e.viewport.scroll,{max:F})});return $({phase:"DRAGGING"},e,{viewport:B})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&D(!1);var G=vt({state:e,type:t.type});return G?wt({state:e,impact:G.impact,clientSelection:G.clientSelection,scrollJumpRequest:G.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var V,R=t.payload.reason;return"COLLECTING"!==e.phase&&D(!1),$({phase:"DROP_PENDING"},e,((V={}).phase="DROP_PENDING",V.isWaiting=!0,V.reason=R,V))}if("DROP_ANIMATE"===t.type){var U=t.payload;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&D(!1),{phase:"DROP_ANIMATING",pending:U,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?Mt:e},Dt=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},Ot=function(){return{type:"COLLECTION_STARTING",payload:null}},Pt=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},Nt=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},jt=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},At=function(e){return{type:"UPDATE_DROPPABLE_IS_SORTABLE_CHANGED",payload:e}},Lt=function(e){return{type:"MOVE",payload:e}},Ft=function(){return{type:"CLEAN",payload:null}},Bt=function(e){return{type:"DROP_COMPLETE",payload:e}},Gt=function(e){return{type:"DROP",payload:e}},Vt=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var a=t(),o=r.payload.reason;if("COLLECTING"!==a.phase){if("IDLE"!==a.phase){"DROP_PENDING"===a.phase&&a.isWaiting&&D(!1),"DRAGGING"!==a.phase&&"DROP_PENDING"!==a.phase&&D(!1);var i=a.critical,s=a.dimensions,l="DROP"===o?a.impact:Ae,c=s.draggables[a.critical.draggable.id],p=l?l.destination:null,u=l&&l.merge?l.merge.combine:null,d={index:i.draggable.index,droppableId:i.droppable.id},f={draggableId:c.descriptor.id,type:c.descriptor.type,source:d,mode:a.movementMode,destination:p,combine:u,reason:o},h=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,a=e.viewport,o=r.draggables,i=r.droppables,s=ze(t),l=s?i[s]:null,c=i[n.descriptor.droppableId],p=It({impact:t,draggable:n,draggables:o,droppable:l||c,viewport:a});return Q(p,n.client.borderBox.center)}({impact:l,draggable:c,dimensions:s,viewport:a.viewport});if(!Z(a.current.client.offset,h)||Boolean(f.combine)){var m=function(e){var t=e.current,n=e.destination,r=e.reason,a=ne(t,n);if(a<=0)return.33;if(a>=1500)return.55;var o=.33+a/1500*(.55-.33);return Number(("CANCEL"===r?.6*o:o).toFixed(2))}({current:a.current.client.offset,destination:h,reason:o});n(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:h,dropDuration:m,result:f,impact:l}))}else n(Bt(f))}}else n({type:"DROP_PENDING",payload:{reason:o}})}else e(r)}}},Rt=function(e){return e+1},Ut=function(e,t){var n=e.droppableId===t.droppableId,r=Rt(e.index),a=Rt(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+a+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+a+"\n  "},Wt=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},qt=function(e){return"\n  The item has returned to its starting position\n  of "+Rt(e.index)+"\n"},Ht=function(e){return"\n  You have lifted an item in position "+Rt(e.source.index)+".\n  Use the arrow keys to move, space bar to drop, and escape to cancel.\n"},zt=function(e){var t=e.destination;if(t)return Ut(e.source,t);var n=e.combine;return n?Wt(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},Kt=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+qt(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+Ut(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+Wt(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+qt(e.source)+"\n  "},Jt=function(){var e=[];return{add:function(t){var n=setTimeout(function(){return function(t){var n=fe(e,function(e){return e.timerId===t});-1===n&&D(!1),e.splice(n,1)[0].callback()}(n)}),r={timerId:n,callback:t};e.push(r)},flush:function(){if(e.length){var t=e.concat();e.length=0,t.forEach(function(e){clearTimeout(e.timerId),e.callback()})}}}},$t=function(e,t){pe(e),t(),ue(e)},Xt=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},Yt=function(e,t,n,r){if(e){var a=function(e){var t=!1,n=!1,r=setTimeout(function(){n=!0}),a=function(a){t||n||(t=!0,e(a),clearTimeout(r))};return a.wasCalled=function(){return t},a}(n);e(t,{announce:a}),a.wasCalled()||n(r(t))}else n(r(t))},Qt=function(e,t){var n=function(e,t){var n=Jt(),r=null,a=function(n){r||D(!1),r=null,$t("onDragEnd",function(){return Yt(e().onDragEnd,n,t,Kt)})};return{beforeStart:function(t,n){r&&D(!1),$t("onBeforeDragStart",function(){var r=e().onBeforeDragStart;r&&r(Xt(t,n))})},start:function(a,o){r&&D(!1);var i=Xt(a,o);r={mode:o,lastCritical:a,lastLocation:i.source,lastCombine:null},n.add(function(){$t("onDragStart",function(){return Yt(e().onDragStart,i,t,Ht)})})},update:function(a,o){var i=o.destination,s=o.merge?o.merge.combine:null;r||D(!1);var l=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(a,r.lastCritical);l&&(r.lastCritical=a);var c,p,u=(c=r.lastLocation,p=i,!(null==c&&null==p||null!=c&&null!=p&&c.droppableId===p.droppableId&&c.index===p.index));u&&(r.lastLocation=i);var d=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(r.lastCombine,s);if(d&&(r.lastCombine=s),l||u||d){var f=$({},Xt(a,r.mode),{combine:s,destination:i});n.add(function(){$t("onDragUpdate",function(){return Yt(e().onDragUpdate,f,t,zt)})})}},flush:function(){r||D(!1),n.flush()},drop:a,abort:function(){if(r){var e=$({},Xt(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});a(e)}}}}(e,t);return function(e){return function(t){return function(r){if("INITIAL_PUBLISH"===r.type){var a=r.payload.critical;return n.beforeStart(a,r.payload.movementMode),t(r),void n.start(a,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var o=r.payload;return n.flush(),t(r),void n.drop(o)}if(t(r),"CLEAN"!==r.type){var i=e.getState();"DRAGGING"===i.phase&&n.update(i.critical,i.impact)}else n.abort()}}}},Zt=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&D(!1),e.dispatch(Bt(r.pending.result))}else t(n)}}},en=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(Gt({reason:r.reason})))}}}},tn=function(e){return e||D(!1),Ve({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},nn=function(e){return function(t){return function(n){var r=e.getState();t(n);var a=e.getState();if(a.isDragging&&function(e,t,n){return!(!function(e){return"MOVE"===e.type||"MOVE_UP"===e.type||"MOVE_RIGHT"===e.type||"MOVE_DOWN"===e.type||"MOVE_LEFT"===e.type||"MOVE_BY_WINDOW_SCROLL"===e.type}(n)||!bt(e)||!bt(t)||ze(e.impact)===ze(t.impact))}(r,a,n)){var o=function(e){var t=tn(e.element);return Z(e.scroll.max,t)?null:t}(a.viewport);o&&t({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:{maxScroll:o}})}}}},rn="undefined"!=typeof window&&!1?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:i.compose,an=function(e){var t,n=e.getDimensionMarshal,r=e.getResponders,a=e.announce,o=e.getScroller,s=e.getStyleMarshal;return Object(i.createStore)(_t,rn(Object(i.applyMiddleware)(function(e){return function(){return function(t){return function(n){var r=e();r?("INITIAL_PUBLISH"===n.type&&r.dragging(),"DROP_ANIMATE"===n.type&&r.dropping(n.payload.result.reason),"CLEAN"!==n.type&&"DROP_COMPLETE"!==n.type||r.resting(),t(n)):t(n)}}}}(s),(t=n,function(){return function(e){return function(n){"DROP_COMPLETE"!==n.type&&"CLEAN"!==n.type&&"DROP_ANIMATE"!==n.type||t().stopPublishing(),e(n)}}}),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(a){if("LIFT"===a.type){var o=e(),i=a.payload,s=i.id,l=i.clientSelection,c=i.movementMode,p=i.viewportClassName,u=n();"DROP_ANIMATING"===u.phase&&r(Bt(u.pending.result)),"IDLE"!==n().phase&&D(!1);var d={draggableId:s,scrollOptions:{shouldPublishImmediately:"SNAP"===c},viewportClassName:p},f=o.startPublishing(d),h=f.critical,m=f.dimensions,g=f.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:h,dimensions:m,clientSelection:l,movementMode:c,viewport:g}})}else t(a)}}}}(n),Vt,Zt,en,nn,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"CLEAN"===e.type}(r))return e().stop(),void n(r);if(function(e){return"COLLECTION_STARTING"===e.type}(r))return e().cancelPending(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var a=t.getState();return"DRAGGING"!==a.phase&&D(!1),void e().start(a)}n(r),e().scroll(t.getState())}}}}(o),Qt(r,a))))},on=function(e){return{x:e.scrollLeft,y:e.scrollTop}},sn=function(e){var t;return e&&(t=document.getElementsByClassName(e)[0]),t||document.documentElement},ln=function(e,t){function n(e){return e.reduce(function(e,t){return e[t]=e[t]?e[t]+1:1,e},{})}if(!w()(e)||!w()(t))return!1;if(e.length!==t.length)return!1;var r=n(e),a=n(t);return S()(r).every(function(e){return a[e]&&a[e]===r[e]})},cn=function(e){var t=e.critical,n=e.scrollOptions,r=e.entries,a=e.viewportClassName;pe("Initial collection from DOM");var o=function(e){var t=sn(e),n=on(t),r=tn(t),a=0,o=0;if(t!==document.documentElement){var i=t.getBoundingClientRect();a=i.top,o=i.left}var s=a+n.y,l=o+n.x;t||D(!1);var c=t.clientWidth,p=t.clientHeight;return{frame:O({top:s,left:l,right:l+c,bottom:s+p}),scroll:{initial:n,current:n,max:r,diff:{value:X,displacement:X}},element:t,elementOffset:{y:a,x:o}}}(a),i=o.scroll.current,s=t.droppable,l=de(r.droppables).filter(function(e){var t=e.descriptor.type;return w()(t)&&w()(s.type)?ln(t,s.type):t===s.type}).map(function(e){return e.callbacks.getDimensionAndWatchScroll(i,n)}),c={};l.forEach(function(e){c[e.descriptor.id]={isSortable:e.isSortable}});var p=de(r.draggables).filter(function(e){var n=e.descriptor.droppableType,r=e.descriptor.droppableId,a=c[r];return!!a&&((w()(n)?n.indexOf(e.descriptor.type)>-1:n===e.descriptor.type)&&(!!a.isSortable||e.descriptor.id===t.draggable.id))}).map(function(e){return e.getDimension(i)}),u={draggables:ge(p),droppables:me(l)};return ue("Initial collection from DOM"),{dimensions:u,critical:t,viewport:o}},pn=function(e,t){e.critical.draggable.type!==t.type&&D(!1)},un=function(e){var t={droppables:{},draggables:{}},n=null,r=function(e){var t=e.getEntries,n=e.callbacks,r=function(){},a={additions:{},removals:{},modified:{}},o=null,i=function(){r(),o||(o=requestAnimationFrame(function(){o=null,n.collectionStarting(),pe("Publish collection from DOM");var e=t(),r=a,i=r.additions,s=r.removals,l=r.modified,c=S()(i).map(function(t){return e.draggables[t].getDimension(X)}).sort(function(e,t){return e.descriptor.index-t.descriptor.index}),p=S()(l).map(function(t){var n=e.droppables[t];return n||D(!1),n.callbacks.recollect()}),u={additions:c,removals:S()(s),modified:p};a={additions:{},removals:{},modified:{}},ue("Publish collection from DOM"),n.publish(u)}))};return{add:function(e){a.additions[e.id]=e,a.modified[e.droppableId]=!0,a.removals[e.id]&&delete a.removals[e.id],i()},remove:function(e){a.removals[e.id]=e,a.modified[e.droppableId]=!0,a.additions[e.id]&&delete a.additions[e.id],i()},stop:function(){o&&(cancelAnimationFrame(o),o=null,a={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},getEntries:function(){return t}});return{registerDraggable:function(e,a){var o={descriptor:e,getDimension:a};t.draggables[e.id]=o,n&&(pn(n,e),r.add(e))},updateDraggable:function(e,n,r){t.draggables[e.id]||D(!1),delete t.draggables[e.id];var a={descriptor:n,getDimension:r};t.draggables[n.id]=a},unregisterDraggable:function(e){var a=t.draggables[e.id];a||D(!1),a.descriptor===e&&(delete t.draggables[e.id],n&&(n.critical.draggable.id===e.id&&D(!1),pn(n,e),r.remove(e)))},registerDroppable:function(e,r){var a=e.id;t.droppables[a]={descriptor:e,callbacks:r},n&&D(!1)},updateDroppable:function(e,r,a){t.droppables[e.id]||D(!1),delete t.droppables[e.id];var o={descriptor:r,callbacks:a};t.droppables[r.id]=o,n&&D(!1)},unregisterDroppable:function(e){var r=t.droppables[e.id];r||D(!1),r.descriptor===e&&(delete t.droppables[e.id],n&&D(!1))},updateDroppableIsEnabled:function(r,a){t.droppables[r]||D(!1),n&&e.updateDroppableIsEnabled({id:r,isEnabled:a})},updateDroppableIsCombineEnabled:function(r,a){t.droppables[r]||D(!1),n&&e.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:a})},updateDroppableIsSortableChanged:function(r,a){t.droppables[r]||D(!1),n&&e.updateDroppableIsSortableChanged({id:r,isSortable:a})},scrollDroppable:function(e,r){var a=t.droppables[e];a||D(!1),n&&a.callbacks.scroll(r)},updateDroppableScroll:function(r,a){t.droppables[r]||D(!1),n&&e.updateDroppableScroll({id:r,offset:a})},startPublishing:function(e){n&&D(!1);var r=t.draggables[e.draggableId];r||D(!1);var a=t.droppables[r.descriptor.droppableId];a||D(!1);var o={draggable:r.descriptor,droppable:a.descriptor};return n={critical:o},cn({critical:o,entries:t,scrollOptions:e.scrollOptions,viewportClassName:e.viewportClassName})},stopPublishing:function(){if(n){r.stop();var e=n.critical.droppable;de(t.droppables).filter(function(t){var n=t.descriptor.type;return w()(n)&&w()(e.type)?ln(n,e.type):n===e.type}).forEach(function(e){return e.callbacks.dragStopped()}),n=null}}}},dn="cubic-bezier(.2,1,.1,1)",fn={drop:0,combining:.7},hn={drop:.75},mn="0.2s "+"cubic-bezier(0.2, 0, 0, 1)",gn={fluid:"opacity "+mn,snap:"transform "+mn+", opacity "+mn,drop:function(e){var t=e+"s "+dn;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+mn},vn=function(e){return Z(e,X)?null:"translate("+e.x+"px, "+e.y+"px)"},bn={moveTo:vn,drop:function(e,t){var n=vn(e);return n?t?n+" scale("+hn.drop+")":n:null}},yn="data-react-beautiful-dnd-drag-handle",kn=function(e,t){return e.map(function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""}).join(" ")},Sn=0,Cn=function(){var e=document.querySelector("head");return e||D(!1),e},wn=function(){var e=document.createElement("style");return e.type="text/css",e},In=function(){var e=""+Sn++,t=function(e){var t,n,r,a=(t=e,function(e){return"["+e+'="'+t+'"]'}),o=(n="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:a(yn),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:n,dragging:"pointer-events: none;",dropAnimating:n}}),i=[(r="\n      transition: "+gn.outOfTheWay+";\n    ",{selector:a("data-react-beautiful-dnd-draggable"),styles:{dragging:r,dropAnimating:r,userCancel:r}}),o,{selector:a("data-react-beautiful-dnd-droppable"),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:kn(i,"always"),resting:kn(i,"resting"),dragging:kn(i,"dragging"),dropAnimating:kn(i,"dropAnimating"),userCancel:kn(i,"userCancel")}}(e),n=null,r=null,a=K(function(e,t){e||D(!1),e.innerHTML=t});return{dragging:function(){return a(r,t.dragging)},dropping:function(e){a(r,"DROP"!==e?t.userCancel:t.dropAnimating)},resting:function(){return a(r,t.resting)},styleContext:e,mount:function(){(n||r)&&D(!1),n=wn(),r=wn(),n.setAttribute("data-react-beautiful-dnd-always",e),r.setAttribute("data-react-beautiful-dnd-dynamic",e),Cn().appendChild(n),Cn().appendChild(r),a(n,t.always),a(r,t.resting)},unmount:function(){n&&r||D(!1),Cn().removeChild(n),Cn().removeChild(r),n=null,r=null}}},Tn=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.pending.result.draggableId!==t&&"DROP"===e.pending.result.reason)},En=function(e){return function(t){var n=sn(e);n.scrollTop+=t.y,n.scrollLeft+=t.x}},xn=0,Mn={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},_n=function(){return document.body||D(!1),document.body},Dn=function(){var e="react-beautiful-dnd-announcement-"+xn++,t=null;return{announce:function(e){t&&(t.textContent=e)},id:e,mount:function(){t&&D(!1),(t=document.createElement("div")).id=e,t.setAttribute("aria-live","assertive"),t.setAttribute("role","log"),t.setAttribute("aria-atomic","true"),T()(t.style,Mn),_n().appendChild(t)},unmount:function(){t||D(!1),_n().removeChild(t),t=null}}},On=K(function(e){return ve(e).filter(function(e){return!!e.isEnabled&&!!e.frame})}),Pn=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var a=r[n];return a.frame?a:null}return function(e,t){return he(On(t),function(t){return t.frame||D(!1),ke(t.frame.pageMarginBox)(e)})}(t,r)},Nn=.25,jn=.05,An=28,Ln=function(e){return Math.pow(e,2)},Fn={stopDampeningAt:1200,accelerateAt:360},Bn=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,a=n-t;return 0===a?0:(r-t)/a},Gn=Fn.accelerateAt,Vn=Fn.stopDampeningAt,Rn=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,a=e.shouldUseTimeDampening,o=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return An;if(e===t.startScrollingFrom)return 1;var n=Bn({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=An*Ln(1-n);return Math.ceil(r)}(t,n);return 0===o?0:a?Math.max(function(e,t){var n=t,r=Vn,a=x()()-n;if(a>=Vn)return e;if(a<Gn)return 1;var o=Bn({startOfRange:Gn,endOfRange:r,current:a}),i=e*Ln(o);return Math.ceil(i)}(o,r),1):o},Un=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,a=e.axis,o=e.shouldUseTimeDampening,i=function(e,t){return{startScrollingFrom:e[t.size]*Nn,maxScrollValueAt:e[t.size]*jn}}(t,a);return n[a.end]<n[a.start]?Rn({distanceToEdge:n[a.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:o}):-1*Rn({distanceToEdge:n[a.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:o})},Wn=ae(function(e){return 0===e?0:e}),qn=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,a=e.center,o=e.shouldUseTimeDampening,i={top:a.y-n.top,right:n.right-a.x,bottom:n.bottom-a.y,left:a.x-n.left},s=Un({container:n,distanceToEdges:i,dragStartTime:t,axis:Ee,shouldUseTimeDampening:o}),l=Un({container:n,distanceToEdges:i,dragStartTime:t,axis:xe,shouldUseTimeDampening:o}),c=Wn({x:l,y:s});if(Z(c,X))return null;var p=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,a=n.height>t.height,o=n.width>t.width;return o||a?o&&a?null:{x:o?0:r.x,y:a?0:r.y}:r}({container:n,subject:r,proposedScroll:c});return p?Z(p,X)?null:p:null},Hn=ae(function(e){return 0===e?0:e>0?1:-1}),zn=(yt=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,n=e.max,r=e.change,a=Y(t,r),o={x:yt(a.x,n.x),y:yt(a.y,n.y)};return Z(o,X)?null:o}),Kn=function(e){var t=e.max,n=e.current,r=e.change,a={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},o=Hn(r),i=zn({max:a,current:n,change:o});return!i||(0!==o.x&&0===i.x||0!==o.y&&0===i.y)},Jn=function(e,t){return Kn({current:e.scroll.current,max:e.scroll.max,change:t})},$n=function(e,t){var n=e.frame;return!!n&&Kn({current:n.scroll.current,max:n.scroll.max,change:t})},Xn=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,a=e.scrollWindow,o=e.scrollDroppable,i=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,n=e.subject,r=e.center,a=e.dragStartTime,o=e.shouldUseTimeDampening,i=qn({dragStartTime:a,container:t.frame,subject:n,center:r,shouldUseTimeDampening:o});return i&&Jn(t,i)?i:null}({dragStartTime:n,viewport:t.viewport,subject:s,center:i,shouldUseTimeDampening:r});if(l)return void a(l)}var c=Pn({center:i,destination:ze(t.impact),droppables:t.dimensions.droppables});if(c){var p=function(e){var t=e.droppable,n=e.subject,r=e.center,a=e.dragStartTime,o=e.shouldUseTimeDampening,i=t.frame;if(!i)return null;var s=qn({dragStartTime:a,container:i.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:o});return s&&$n(t,s)?s:null}({dragStartTime:n,droppable:c,subject:s,center:i,shouldUseTimeDampening:r});p&&o(c.descriptor.id,p)}},Yn=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,a=function(e,t){if(!$n(e,t))return t;var r=function(e,t){var n=e.frame;return n&&$n(e,t)?zn({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var a=Q(t,r);return n(e.descriptor.id,a),Q(t,a)},o=function(e,t,n){if(!e)return n;if(!Jn(t,n))return n;var a=function(e,t){if(!Jn(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return zn({current:r,max:n,change:t})}(t,n);if(!a)return r(n),null;var o=Q(n,a);return r(o),Q(n,o)};return function(e){var n=e.scrollJumpRequest;if(n){var r=ze(e.impact);r||D(!1);var i=a(e.dimensions.droppables[r],n);if(i){var s=e.viewport,l=o(e.isWindowScrollAllowed,s,i);l&&function(e,n){var r=Y(e.current.client.selection,n);t({client:r})}(e,l)}}}},Qn=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,a=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=J(t),a=J(n),o=null,i=function(e){o||D(!1);var t=o,n=t.shouldUseTimeDampening,i=t.dragStartTime;Xn({state:e,scrollWindow:r,scrollDroppable:a,dragStartTime:i,shouldUseTimeDampening:n})},s=function(){o||D(!1),r.cancel(),a.cancel()};return{start:function(e){pe("starting fluid scroller"),o&&D(!1);var t=x()(),n=!1,r=function(){n=!0};Xn({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),o={dragStartTime:t,shouldUseTimeDampening:n},ue("starting fluid scroller"),n&&i(e)},stop:function(){o&&(s(),o=null)},cancelPending:s,scroll:i}}({scrollWindow:n,scrollDroppable:t}),o=Yn({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&o(e):a.scroll(e))},cancelPending:a.cancelPending,start:a.start,stop:a.stop}},Zn=function(e){return"private-react-beautiful-dnd-key-do-not-use-"+e},er=Zn("store"),tr=Zn("droppable-id"),nr=Zn("droppable-type"),rr=Zn("dimension-marshal"),ar=Zn("style-context"),or=Zn("can-lift"),ir=Zn("viewport"),sr=function(e){},lr=function(e){function t(t,n){var r;(r=e.call(this,t,n)||this).store=void 0,r.dimensionMarshal=void 0,r.styleMarshal=void 0,r.autoScroller=void 0,r.announcer=void 0,r.unsubscribe=void 0,r.canLift=function(e){return Tn(r.store.getState(),e)},r.onFatalError=function(e){sr(e),"IDLE"!==r.store.getState().phase&&r.store.dispatch(Ft())},r.onWindowError=function(e){return r.onFatalError(e)},r.getStyleMarshal=function(){return r.useAnimation?r.styleMarshal:void 0},r.announcer=Dn();var a=t.useAnimation,o=void 0===a||a;r.useAnimation=o,r.styleMarshal=In(),r.store=an({getDimensionMarshal:function(){return r.dimensionMarshal},getResponders:function(){return{onBeforeDragStart:r.props.onBeforeDragStart,onDragStart:r.props.onDragStart,onDragEnd:r.props.onDragEnd,onDragUpdate:r.props.onDragUpdate}},announce:r.announcer.announce,getScroller:function(){return r.autoScroller},getStyleMarshal:r.getStyleMarshal});var s=Object(i.bindActionCreators)({publishWhileDragging:Dt,updateDroppableScroll:Pt,updateDroppableIsEnabled:Nt,updateDroppableIsCombineEnabled:jt,updateDroppableIsSortableChanged:At,collectionStarting:Ot},r.store.dispatch);r.dimensionMarshal=un(s);var l=En(t.viewportClassName);return r.autoScroller=Qn($({scrollWindow:l,scrollDroppable:r.dimensionMarshal.scrollDroppable},Object(i.bindActionCreators)({move:Lt},r.store.dispatch))),r}W(t,e);var n=t.prototype;return n.getChildContext=function(){var e;return(e={})[er]=this.store,e[rr]=this.dimensionMarshal,e[ar]=this.styleMarshal.styleContext,e[or]=this.canLift,e[ir]=this.props.viewportClassName,e},n.componentDidMount=function(){window.addEventListener("error",this.onWindowError),this.useAnimation&&this.styleMarshal.mount(),this.announcer.mount()},n.componentWillReceiveProps=function(e){var t=e.useAnimation,n=void 0===t||t;n!==this.useAnimation&&(this.useAnimation=n,this.props.useAnimation?this.styleMarshal.unmount():this.styleMarshal.mount())},n.componentDidCatch=function(e){if(this.onFatalError(e),-1===e.message.indexOf("Invariant failed"))throw e;this.setState({})},n.componentWillUnmount=function(){window.removeEventListener("error",this.onWindowError),"IDLE"!==this.store.getState().phase&&this.store.dispatch(Ft()),this.useAnimation&&this.styleMarshal.unmount(),this.announcer.unmount()},n.render=function(){return this.props.children},t}(d.a.Component);lr.childContextTypes=((kt={})[er]=H.a.shape({dispatch:H.a.func.isRequired,subscribe:H.a.func.isRequired,getState:H.a.func.isRequired}).isRequired,kt[rr]=H.a.object.isRequired,kt[ar]=H.a.string.isRequired,kt[or]=H.a.func.isRequired,kt[ir]=H.a.string,kt);var cr,pr=function(e){return function(t){return e===t}},ur=pr("scroll"),dr=pr("auto"),fr=(pr("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),hr=function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return fr(n,ur)||fr(n,dr)},mr=function e(t){return null==t?null:t===document.body?null:t===document.documentElement?null:hr(t)?t:e(t.parentElement)},gr=function(e){return{x:e.scrollLeft,y:e.scrollTop}},vr=function(e){return!!e&&"fixed"===window.getComputedStyle(e).position},br=function(e){var t=mr(e),n=vr(e),r=vr(t);return{closestScrollable:t,isFixedOnPage:n||r}},yr=function(e){var t=e.ref,n=e.descriptor,r=e.env,a=e.windowScroll,o=e.direction,i=e.isDropDisabled,s=e.isCombineEnabled,l=e.isSortable,c=e.shouldClipSubject,p=r.closestScrollable,u=function(e,t){var n=V(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,a=n.paddingBox.left-t.scrollLeft,o=r+t.scrollHeight,i=a+t.scrollWidth,s=P({top:r,right:i,bottom:o,left:a},n.border);return A({borderBox:s,margin:n.margin,border:n.border,padding:n.padding})}(t,p),d=B(u,a),f=function(){if(!p)return null;var e=V(p),t={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:e,page:B(e,a),scroll:gr(p),scrollSize:t,shouldClipSubject:c}}();return Re({descriptor:n,isEnabled:!i,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,isSortable:l,direction:o,client:u,page:d,closest:f})},kr=function(e){return e&&e.env.closestScrollable||null},Sr={passive:!1},Cr={passive:!0},wr=function(e){return e.shouldPublishImmediately?Sr:Cr},Ir=function(e,t){if(!e)return t();var n=e.style.display;e.style.display="none";var r=t();return e.style.display=n,r},Tr=function(e){function t(t,n){var r;(r=e.call(this,t,n)||this).dragging=void 0,r.callbacks=void 0,r.publishedDescriptor=null,r.getClosestScroll=function(){var e=r.dragging;return e&&e.env.closestScrollable?gr(e.env.closestScrollable):X},r.memoizedUpdateScroll=K(function(e,t){r.publishedDescriptor||D(!1);var n={x:e,y:t};r.context[rr].updateDroppableScroll(r.publishedDescriptor.id,n)}),r.updateScroll=function(){var e=r.getClosestScroll();r.memoizedUpdateScroll(e.x,e.y)},r.scheduleScrollUpdate=J(r.updateScroll),r.onClosestScroll=function(){var e=r.dragging,t=kr(r.dragging);e&&t||D(!1),e.scrollOptions.shouldPublishImmediately?r.updateScroll():r.scheduleScrollUpdate()},r.scroll=function(e){if(r.props.isSortable){var t=kr(r.dragging);t||D(!1),t.scrollTop+=e.y,t.scrollLeft+=e.x}},r.dragStopped=function(){var e=r.dragging;e||D(!1);var t=kr(e);r.dragging=null,t&&(r.scheduleScrollUpdate.cancel(),t.removeEventListener("scroll",r.onClosestScroll,wr(e.scrollOptions)))},r.getMemoizedDescriptor=K(function(e,t){return{id:e,type:t}}),r.publish=function(){var e=r.context[rr],t=r.getMemoizedDescriptor(r.props.droppableId,r.props.type);if(!r.publishedDescriptor)return e.registerDroppable(t,r.callbacks),void(r.publishedDescriptor=t);r.publishedDescriptor!==t&&(e.updateDroppable(r.publishedDescriptor,t,r.callbacks),r.publishedDescriptor=t)},r.unpublish=function(){r.publishedDescriptor||D(!1),r.context[rr].unregisterDroppable(r.publishedDescriptor),r.publishedDescriptor=null},r.recollect=function(){var e=r.dragging,t=kr(e);return e&&t||D(!1),Ir(r.props.getPlaceholderRef(),function(){return yr({ref:e.ref,descriptor:e.descriptor,env:e.env,windowScroll:X,direction:r.props.direction,isDropDisabled:r.props.isDropDisabled,isCombineEnabled:r.props.isCombineEnabled,isSortable:r.props.isSortable,shouldClipSubject:!r.props.ignoreContainerClipping})})},r.getDimensionAndWatchScroll=function(e,t){r.dragging&&D(!1);var n=r.publishedDescriptor;n||D(!1);var a=r.props.getDroppableRef();a||D(!1);var o=br(a),i={ref:a,descriptor:n,env:o,scrollOptions:t};r.dragging=i;var s=yr({ref:a,descriptor:n,env:o,windowScroll:e,direction:r.props.direction,isDropDisabled:r.props.isDropDisabled,isCombineEnabled:r.props.isCombineEnabled,isSortable:r.props.isSortable,shouldClipSubject:!r.props.ignoreContainerClipping});return o.closestScrollable&&r.props.isSortable&&o.closestScrollable.addEventListener("scroll",r.onClosestScroll,wr(i.scrollOptions)),s};var a={getDimensionAndWatchScroll:r.getDimensionAndWatchScroll,recollect:r.recollect,dragStopped:r.dragStopped,scroll:r.scroll};return r.callbacks=a,r}W(t,e);var n=t.prototype;return n.componentDidMount=function(){this.publish()},n.componentDidUpdate=function(e){if(this.publish(),this.dragging){var t=this.props.isDropDisabled!==e.isDropDisabled,n=this.props.isCombineEnabled!==e.isCombineEnabled,r=this.props.isSortable!==e.isSortable;if(t||n||r){var a=this.context[rr];t&&a.updateDroppableIsEnabled(this.props.droppableId,!this.props.isDropDisabled),n&&a.updateDroppableIsCombineEnabled(this.props.droppableId,this.props.isCombineEnabled),r&&a.updateDroppableIsSortableChanged(this.props.droppableId,this.props.isSortable)}}},n.componentWillUnmount=function(){this.dragging&&this.dragStopped(),this.unpublish()},n.render=function(){return this.props.children},t}(d.a.Component);Tr.contextTypes=((cr={})[rr]=H.a.object.isRequired,cr);var Er,xr,Mr=function(e){function t(){return e.apply(this,arguments)||this}return W(t,e),t.prototype.render=function(){var e=this.props.isVisible,t=void 0===e||e,n=this.props.placeholder,r=n.client,a=n.display,o=n.tagName,i=this.props.droppableId&&!t,s=i?0:r.borderBox.height,l={display:a,boxSizing:"border-box",width:i?0:r.borderBox.width,height:s,marginTop:t?r.margin.top:0,marginRight:t?r.margin.right:0,marginBottom:t?r.margin.bottom:0,marginLeft:t?r.margin.left:0,flexShrink:"0",flexGrow:"0",pointerEvents:"none"};return d.a.createElement(o,{style:l,ref:this.props.innerRef})},t}(u.PureComponent),_r=function(e){e&&e instanceof HTMLElement||D(!1)},Dr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).styleContext=void 0,r.ref=null,r.placeholderRef=null,r.setPlaceholderRef=function(e){r.placeholderRef=e},r.getPlaceholderRef=function(){return r.placeholderRef},r.setRef=function(e){null!==e&&e!==r.ref&&(r.ref=e,_r(e))},r.getDroppableRef=function(){return r.ref},r.styleContext=n[ar],r}W(t,e);var n=t.prototype;return n.getChildContext=function(){var e;return(e={})[tr]=this.props.droppableId,e[nr]=this.props.type,e},n.componentDidMount=function(){_r(this.ref),this.warnIfPlaceholderNotMounted()},n.componentDidUpdate=function(){this.warnIfPlaceholderNotMounted()},n.componentWillUnmount=function(){this.ref=null,this.placeholderRef=null},n.warnIfPlaceholderNotMounted=function(){},n.getPlaceholder=function(){return this.props.placeholder?d.a.createElement(Mr,{placeholder:this.props.placeholder,innerRef:this.setPlaceholderRef,droppableId:this.props.droppableId,isVisible:this.props.isSortable}):null},n.render=function(){var e=this.props,t=e.children,n=e.direction,r=e.type,a=e.droppableId,o=e.isDropDisabled,i=e.isCombineEnabled,s=e.isSortable,l=e.ignoreContainerClipping,c=e.isDraggingOver,p=e.draggingOverWith,u=e.draggingFrom,f={innerRef:this.setRef,placeholder:this.getPlaceholder(),droppableProps:{"data-react-beautiful-dnd-droppable":this.styleContext}},h={isDraggingOver:c,draggingOverWith:p,draggingFrom:u};return d.a.createElement(Tr,{droppableId:a,type:r,direction:n,ignoreContainerClipping:l,isDropDisabled:o,isCombineEnabled:i,isSortable:s,getDroppableRef:this.getDroppableRef,getPlaceholderRef:this.getPlaceholderRef},t(f,h))},t}(u.Component);Dr.contextTypes=((Er={})[ar]=H.a.string.isRequired,Er),Dr.childContextTypes=((xr={})[tr]=H.a.string.isRequired,xr[nr]=H.a.oneOfType([H.a.string,H.a.array]).isRequired,xr);var Or,Pr=function(e,t){return e===t},Nr={isDraggingOver:!1,draggingOverWith:null,draggingFrom:null,placeholder:null},jr={type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,isSortable:!0,ignoreContainerClipping:!1},Ar=Object(o.connect)(function(){var e=K(function(e,t,n,r){return{isDraggingOver:e,draggingOverWith:t,draggingFrom:n,placeholder:r}}),t=function(t,n,r){if(ze(r)!==t)return Nr;var a=Ke(n.descriptor,r)?n.placeholder:null;return e(!0,n.descriptor.id,n.descriptor.droppableId,a)};return function(e,n){if(n.isDropDisabled)return Nr;var r=n.droppableId;if(e.isDragging){var a=e.dimensions.draggables[e.critical.draggable.id];return t(r,a,e.impact)}if("DROP_ANIMATING"===e.phase){var o=e.dimensions.draggables[e.pending.result.draggableId];return t(r,o,e.pending.impact)}return Nr}},null,null,{storeKey:er,pure:!0,areStatePropsEqual:Pr})(Dr);Ar.defaultProps=jr;var Lr=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).publishedDescriptor=null,t.getMemoizedDescriptor=K(function(e,t,n,r,a){return{id:e,index:t,droppableId:n,type:r,droppableType:a}}),t.publish=function(){var e=t.context[rr],n=t.getMemoizedDescriptor(t.props.draggableId,t.props.index,t.props.droppableId,t.props.type,t.props.droppableType);if(!t.publishedDescriptor)return e.registerDraggable(n,t.getDimension),void(t.publishedDescriptor=n);n!==t.publishedDescriptor&&(e.updateDraggable(t.publishedDescriptor,n,t.getDimension),t.publishedDescriptor=n)},t.unpublish=function(){t.publishedDescriptor||D(!1),t.context[rr].unregisterDraggable(t.publishedDescriptor),t.publishedDescriptor=null},t.getDimension=function(e){void 0===e&&(e=X);var n=t.props.getDraggableRef(),r=t.publishedDescriptor;n||D(!1),r||D(!1);var a=window.getComputedStyle(n),o=n.getBoundingClientRect(),i=G(o,a),s=B(i,e);return{descriptor:r,placeholder:{client:i,tagName:n.tagName.toLowerCase(),display:a.display},displaceBy:{x:i.marginBox.width,y:i.marginBox.height},client:i,page:s}},t}W(t,e);var n=t.prototype;return n.componentDidMount=function(){this.publish()},n.componentDidUpdate=function(){this.publish()},n.componentWillUnmount=function(){this.unpublish()},n.render=function(){return this.props.children},t}(u.Component);Lr.contextTypes=((Or={})[rr]=H.a.object.isRequired,Or);var Fr,Br,Gr,Vr=function(e){!function(e){return"undefined"!=typeof SVGElement&&e instanceof SVGElement}(e)||D(!1)},Rr={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0},Ur=function(e,t){if(t.canDragInteractiveElements)return!0;var n=e.target,r=e.currentTarget;return!(n instanceof Element&&r instanceof Element)||!function e(t,n){if(null==n)return!1;if(Boolean(Rr[n.tagName.toLowerCase()]))return!0;var r=n.getAttribute("contenteditable");return"true"===r||""===r||n!==t&&e(t,n.parentElement)}(r,n)},Wr=function(e){var t=K(function(t,n){var r={x:t,y:n};e.onMove(r)}),n=J(function(e){return t(e.x,e.y)}),r=J(e.onMoveUp),a=J(e.onMoveDown),o=J(e.onMoveRight),i=J(e.onMoveLeft),s=J(e.onWindowScroll);return{move:n,moveUp:r,moveDown:a,moveRight:o,moveLeft:i,windowScrollMove:s,cancel:function(){n.cancel(),r.cancel(),a.cancel(),o.cancel(),i.cancel(),s.cancel()}}},qr=((Fr={})[13]=!0,Fr[9]=!0,Fr),Hr=function(e,t){return $({},e,t)},zr=function(e,t,n){t.forEach(function(t){var r=Hr(n,t.options);e.addEventListener(t.eventName,t.fn,r)})},Kr=function(e,t,n){t.forEach(function(t){var r=Hr(n,t.options);e.removeEventListener(t.eventName,t.fn,r)})},Jr={capture:!0},$r=function(e){var t=!1,n=function(){t&&(t=!1,Kr(e(),r,Jr))},r=[{eventName:"click",fn:function(e){e.preventDefault(),n()}},{eventName:"mousedown",fn:n},{eventName:"touchstart",fn:n}];return{preventNext:function(){t&&n(),t||(t=!0,zr(e(),r,Jr))},abort:n}},Xr=function(){var e=!1;return{handle:function(){e&&D(!1),e=!0},isHandled:function(){return e},reset:function(){e=!1}}},Yr=(Br="visibilitychange","undefined"==typeof document?Br:he([Br,"ms"+Br,"webkit"+Br,"moz"+Br,"o"+Br],function(e){return"on"+e in document})||Br),Qr=function(){},Zr=Xr(),ea=function(e){var t=e.callbacks,n=e.getWindow,r=e.canStartCapturing,a={isDragging:!1,pending:null},o=function(e){a=e},i=function(){return Boolean(a.pending||a.isDragging)},s=Wr(t),l=$r(n),c=function(e,t){void 0===e&&(e=Qr),void 0===t&&(t=!0),s.cancel(),m(),Zr.reset(),t&&l.preventNext(),o({isDragging:!1,pending:null}),e()},p=function(){c(Qr,!1)},u=function(e){void 0===e&&(e=Qr),a.pending?p():a.isDragging&&c(e)},d=function(){u(t.onCancel)},f=[{eventName:"mousemove",fn:function(e){var n=e.button,r=e.clientX,i=e.clientY;if(0===n){var l,c,u={x:r,y:i};if(a.isDragging)return e.preventDefault(),void s.move(u);if(a.pending||(p(),D(!1)),l=a.pending,c=u,Math.abs(c.x-l.x)>=5||Math.abs(c.y-l.y)>=5)e.preventDefault(),function(e){void 0===e&&(e=Qr),o({pending:null,isDragging:!0}),e()}(function(){return t.onLift({clientSelection:u,movementMode:"FLUID"})})}}},{eventName:"mouseup",fn:function(e){a.pending?p():(e.preventDefault(),c(t.onDrop))}},{eventName:"mousedown",fn:function(e){a.isDragging&&e.preventDefault(),c(t.onCancel)}},{eventName:"keydown",fn:function(e){if(a.isDragging)return 27===e.keyCode?(e.preventDefault(),void d()):void function(e){qr[e.keyCode]&&e.preventDefault()}(e);d()}},{eventName:"resize",fn:d},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){a.pending?p():s.windowScrollMove()}},{eventName:"webkitmouseforcechanged",fn:function(e){if(null!=e.webkitForce&&null!=MouseEvent.WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN){var t=MouseEvent.WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN;e.webkitForce>=t&&d()}}},{eventName:Yr,fn:d}],h=function(){var e=n();zr(e,f,{capture:!0})},m=function(){var e=n();Kr(e,f,{capture:!0})};return{onMouseDown:function(e){Zr.isHandled()||(i()&&D(!1),r(e)&&0===e.button&&(e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(Zr.handle(),e.preventDefault(),function(e){o({pending:e,isDragging:!1}),h()}({x:e.clientX,y:e.clientY}))))},kill:u,isCapturing:i,isDragging:function(){return a.isDragging},unmount:function(){u(),l.abort()}}},ta=Xr(),na=function(){},ra=function(){var e={preventTouchMove:na,releaseTouchMove:na};if("undefined"==typeof window)return e;if(!("ontouchstart"in window))return e;var t=!1;window.addEventListener("touchmove",function(e){t&&(e.defaultPrevented||e.preventDefault())},{passive:!1,capture:!1});return{preventTouchMove:function(){t=!0},releaseTouchMove:function(){t=!1}}}(),aa={isDragging:!1,pending:null,hasMoved:!1,longPressTimerId:null},oa=function(e){var t=e.callbacks,n=e.getWindow,r=e.canStartCapturing,a=aa,o=function(e){a=$({},a,e)},i=function(){return Boolean(a.pending||a.isDragging||a.longPressTimerId)},s=Wr(t),l=$r(n),c=function(){var e=a.pending;e||(u(),D(!1)),o({isDragging:!0,hasMoved:!1,pending:null,longPressTimerId:null}),t.onLift({clientSelection:e,movementMode:"FLUID"})},p=function(e){void 0===e&&(e=na),s.cancel(),ta.reset(),ra.releaseTouchMove(),g(),l.preventNext(),o(aa),e()},u=function(){a.longPressTimerId&&clearTimeout(a.longPressTimerId),s.cancel(),ta.reset(),ra.releaseTouchMove(),g(),o(aa)},d=function(e){void 0===e&&(e=na),a.pending?u():a.isDragging&&p(e)},f=function(){d(t.onCancel)},h=[{eventName:"touchmove",options:{passive:!1},fn:function(e){if(a.isDragging){a.hasMoved||o({hasMoved:!0});var t=e.touches[0],n={x:t.clientX,y:t.clientY};e.preventDefault(),s.move(n)}else u()}},{eventName:"touchend",fn:function(e){a.isDragging?(e.preventDefault(),p(t.onDrop)):u()}},{eventName:"touchcancel",fn:function(e){a.isDragging?(e.preventDefault(),p(t.onCancel)):u()}},{eventName:"touchstart",fn:f},{eventName:"orientationchange",fn:f},{eventName:"resize",fn:f},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){a.pending?u():s.windowScrollMove()}},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){a.isDragging?(27===e.keyCode&&e.preventDefault(),f()):f()}},{eventName:"touchforcechange",fn:function(e){a.hasMoved?e.preventDefault():e.touches[0].force>=.15&&f()}},{eventName:Yr,fn:f}],m=function(){zr(n(),h,{capture:!0})},g=function(){Kr(n(),h,{capture:!0})};return{onTouchStart:function(e){ta.isHandled()||(i()&&D(!1),r(e)&&(ta.handle(),ra.preventTouchMove(),function(e){var t=e.touches[0],n={x:t.clientX,y:t.clientY},r=setTimeout(c,150);o({longPressTimerId:r,pending:n,isDragging:!1,hasMoved:!1}),m()}(e)))},kill:d,isCapturing:i,isDragging:function(){return a.isDragging},unmount:function(){d(),l.abort()}}},ia=function(e){e.preventDefault()},sa=function(e){function t(t,n){var r;(r=e.call(this,t,n)||this).mouseSensor=void 0,r.touchSensor=void 0,r.sensors=void 0,r.styleContext=void 0,r.canLift=void 0,r.isFocused=!1,r.lastDraggableRef=void 0,r.onMouseDown=function(e){r.mouseSensor.isCapturing()||r.mouseSensor.onMouseDown(e)},r.onTouchStart=function(e){r.mouseSensor.isCapturing()||r.touchSensor.onTouchStart(e)},r.canStartCapturing=function(e){return!r.isAnySensorCapturing()&&(!!r.canLift(r.props.draggableId)&&Ur(e,r.props))},r.isAnySensorCapturing=function(){return r.sensors.some(function(e){return e.isCapturing()})},r.getProvided=K(function(e){return e?{onMouseDown:r.onMouseDown,onTouchStart:r.onTouchStart,tabIndex:0,"data-react-beautiful-dnd-drag-handle":r.styleContext,draggable:!1,onDragStart:ia}:null});var a={callbacks:r.props.callbacks,getDraggableRef:r.props.getDraggableRef,getWindow:function(){var e=sn(r.props.viewportClassName);if(e!==document.documentElement)return e;var t=r.props.getDraggableRef();return t?t.ownerDocument.defaultView:window},canStartCapturing:r.canStartCapturing};return r.mouseSensor=ea(a),r.touchSensor=oa(a),r.sensors=[r.mouseSensor,r.touchSensor],r.styleContext=n[ar],r.canLift=n[or],r}W(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.getDraggableRef();this.lastDraggableRef=e,e||D(!1)},n.componentDidUpdate=function(e){var t=this,n=this.props.getDraggableRef();(n!==this.lastDraggableRef&&(this.lastDraggableRef=n,n&&this.isFocused&&this.props.isEnabled&&function(e){if(e.hasAttribute(yn))return Vr(e),e;var t=e.querySelector("[data-react-beautiful-dnd-drag-handle]");return Vr(e),t||D(!1),t instanceof HTMLElement||D(!1),t}(n).focus()),this.isAnySensorCapturing())&&(e.isEnabled&&!this.props.isEnabled&&this.sensors.forEach(function(e){if(e.isCapturing()){var n=e.isDragging();e.kill(),n&&t.props.callbacks.onCancel()}}),e.isDragging&&!this.props.isDragging&&this.sensors.forEach(function(e){e.isCapturing()&&e.kill()}))},n.componentWillUnmount=function(){var e=this;this.sensors.forEach(function(t){var n=t.isDragging();t.unmount(),n&&e.props.callbacks.onCancel()})},n.render=function(){var e=this.props,t=e.children,n=e.isEnabled;return t(this.getProvided(n))},t}(u.Component);sa.contextTypes=((Gr={})[ar]=H.a.string.isRequired,Gr[or]=H.a.func.isRequired,Gr);var la,ca={dragging:5e3,dropAnimating:4500},pa=function(e,t){return t?gn.drop(t.duration):e?gn.snap:gn.fluid},ua=function(e,t){return e?t?fn.drop:fn.combining:null},da=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode},fa=function(e){function t(t,n){var r;(r=e.call(this,t,n)||this).callbacks=void 0,r.styleContext=void 0,r.ref=null,r.getViewportElement=function(){return r.viewportElement?r.viewportElement:(r.viewportElement=sn(r.context[ir]),r.viewportElement)},r.onDrop=function(){r.viewportElement=null,r.props.drop({reason:"DROP"})},r.onCancel=function(){r.viewportElement=null,r.props.drop({reason:"CANCEL"})},r.onMoveEnd=function(){r.props.dragging&&r.props.dragging.dropping&&r.props.dropAnimationFinished()},r.onLift=function(e){pe("LIFT"),r.ref||D(!1),r.props.isDragDisabled&&D(!1);var t=e.clientSelection,n=e.movementMode,a=r.props;(0,a.lift)({id:a.draggableId,clientSelection:t,movementMode:n,viewportClassName:r.context[ir]}),ue("LIFT")},r.setRef=function(e){null!==e&&e!==r.ref&&(r.ref=e,_r(e))},r.getDraggableRef=function(){return r.ref},r.getDraggingStyle=K(function(e){var t=e.dimension.client,n=e.offset,r=e.combineWith,a=e.dropping,o=Boolean(r),i=da(e),s=Boolean(a),l=s?bn.drop(n,o):bn.moveTo(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:pa(i,a),transform:l,opacity:ua(o,s),zIndex:s?ca.dropAnimating:ca.dragging,pointerEvents:"none"}}),r.getSecondaryStyle=K(function(e){return{transform:bn.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}),r.getDraggingProvided=K(function(e,t){var n=r.getDraggingStyle(e),a=Boolean(e.dropping);return{innerRef:r.setRef,draggableProps:{"data-react-beautiful-dnd-draggable":r.styleContext,style:n,onTransitionEnd:a?r.onMoveEnd:null},dragHandleProps:t}}),r.getSecondaryProvided=K(function(e,t){var n=r.getSecondaryStyle(e);return{innerRef:r.setRef,draggableProps:{"data-react-beautiful-dnd-draggable":r.styleContext,style:n,onTransitionEnd:null},dragHandleProps:t}}),r.getDraggingSnapshot=K(function(e){return{isDragging:!0,isDropAnimating:Boolean(e.dropping),dropAnimation:e.dropping,mode:e.mode,draggingOver:e.draggingOver,combineWith:e.combineWith,combineTargetFor:null}}),r.getSecondarySnapshot=K(function(e){return{isDragging:!1,isDropAnimating:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e.combineTargetFor,combineWith:null}}),r.renderChildren=function(e){var t=r.props.dragging,n=r.props.secondary,a=r.props.children;if(t){var o=a(r.getDraggingProvided(t,e),r.getDraggingSnapshot(t)),i=d.a.createElement(Mr,{placeholder:t.dimension.placeholder});return d.a.createElement(u.Fragment,null,o,i)}n||D(!1);var s=a(r.getSecondaryProvided(n,e),r.getSecondarySnapshot(n));return d.a.createElement(u.Fragment,null,s)};var a={onLift:r.onLift,onMove:function(e){return t.move({client:e})},onDrop:r.onDrop,onCancel:r.onCancel,onMoveUp:t.moveUp,onMoveDown:t.moveDown,onMoveRight:t.moveRight,onMoveLeft:t.moveLeft,onWindowScroll:function(){var e=r.getViewportElement();t.moveByWindowScroll({newScroll:on(e)})}};return r.callbacks=a,r.styleContext=n[ar],r.viewportElement=null,r}W(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.ref=null},n.render=function(){var e=this.props,t=e.draggableId,n=e.index,r=e.dragging,a=e.isDragDisabled,o=e.disableInteractiveElementBlocking,i=e.type,s=this.context[tr],l=this.context[nr],c=Boolean(r),p=Boolean(r&&r.dropping);return d.a.createElement(Lr,{key:t,draggableId:t,droppableId:s,droppableType:l,type:i,index:n,getDraggableRef:this.getDraggableRef},d.a.createElement(sa,{draggableId:t,isDragging:c,isDropAnimating:p,isEnabled:!a,callbacks:this.callbacks,getDraggableRef:this.getDraggableRef,viewportClassName:this.context[ir],canDragInteractiveElements:o},this.renderChildren))},t}(u.Component);fa.contextTypes=((la={})[tr]=H.a.string.isRequired,la[nr]=H.a.oneOfType([H.a.string,H.a.array]).isRequired,la[ar]=H.a.string.isRequired,la[ir]=H.a.string,la);var ha=function(e){return e.merge?e.merge.combine.draggableId:null},ma={secondary:{offset:X,combineTargetFor:null,shouldAnimateDisplacement:!0},dragging:null},ga={lift:function(e){return{type:"LIFT",payload:e}},move:Lt,moveUp:function(){return{type:"MOVE_UP",payload:null}},moveDown:function(){return{type:"MOVE_DOWN",payload:null}},moveLeft:function(){return{type:"MOVE_LEFT",payload:null}},moveRight:function(){return{type:"MOVE_RIGHT",payload:null}},moveByWindowScroll:function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},drop:Gt,dropAnimationFinished:function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}}},va={isDragDisabled:!1,disableInteractiveElementBlocking:!1,type:"DEFAULT"},ba=Object(o.connect)(function(){var e=K(function(e,t){return{x:e,y:t}}),t=K(function(e,t,n){return void 0===t&&(t=null),{secondary:{offset:e,combineTargetFor:t,shouldAnimateDisplacement:n},dragging:null}}),n=K(function(e,t,n,r,a,o){return{dragging:{mode:t,dropping:null,offset:e,dimension:n,draggingOver:r,combineWith:a,forceShouldAnimate:o},secondary:null}}),r=function(n,r,a){var o=a.movement.map[n],i=a.movement,s=a.merge,l=Boolean(s&&s.combine.draggableId===n),c=i.displacedBy.point,p=e(c.x,c.y);return l?t(o?p:X,r,!o||o.shouldAnimate):o&&o.isVisible?t(p,null,o.shouldAnimate):null};return function(t,a){return function(t,r){if(t.isDragging){if(t.critical.draggable.id!==r.draggableId)return null;var a=t.current.client.offset,o=t.dimensions.draggables[r.draggableId],i=t.movementMode,s=ze(t.impact),l=ha(t.impact),c=t.forceShouldAnimate;return n(e(a.x,a.y),i,o,s,l,c)}if("DROP_ANIMATING"===t.phase){var p=t.pending;if(p.result.draggableId!==r.draggableId)return null;var u=ze(p.impact),d=ha(p.impact),f=p.dropDuration,h=p.result.mode;return{dragging:{offset:p.newHomeClientOffset,dimension:t.dimensions.draggables[r.draggableId],draggingOver:u,combineWith:d,mode:h,forceShouldAnimate:null,dropping:{duration:f,curve:dn,moveTo:p.newHomeClientOffset,opacity:d?fn.drop:null,scale:d?hn.drop:null}},secondary:null}}return null}(t,a)||function(e,t){return e.isDragging?e.critical.draggable.id===t.draggableId?null:r(t.draggableId,e.critical.draggable.id,e.impact):"DROP_ANIMATING"===e.phase?e.pending.result.draggableId===t.draggableId?null:r(t.draggableId,e.pending.result.draggableId,e.pending.impact):null}(t,a)||ma}},ga,null,{storeKey:er,pure:!0,areStatePropsEqual:Pr})(fa);ba.defaultProps=va;var ya=n("GESwhXbR"),ka=n("5V57DkyA"),Sa=n("vyNrxjj3"),Ca=n("fcolQD49"),wa=n("3eMzznN/"),Ia=n("wScl0p2y"),Ta=n("gh8QIhMV"),Ea=n("7AbqSH+U"),xa=n("oRPyOBnq"),Ma=n("DWJahcmN");n("pvHkd0JL");var _a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleClick=function(){r.context.onOpenTaskDetail&&r.props.taskId&&r.context.onOpenTaskDetail(r.props.taskId)},r}return l.d(t,e),t.prototype.renderTaskflowStatus=function(){var e=this.props,t=e.taskId,n=e.taskflowStatusId,r=e.statusSnippets;if(!t||!n)return null;var a=this.props.canPutStatus,o=r[n]||{},i=u.createElement(Ma.TaskCheckBoxLabel,{taskflowStatus:o,taskId:t,taskflowStatusId:n,disabled:!a,size:"middle"});return u.createElement("span",{className:"status-checkbox"},i)},t.prototype.renderScenarioTypeIcon=function(){var e=this.props.taskScenarioFieldConfigIcon;return e?u.createElement("span",{key:"scenario",className:"icon-wrapper with-svg"},u.createElement(xa.FieldIcon,{icon:e,type:"task"})):null},t.prototype.renderLaneTitle=function(){var e=Boolean(this.context.onOpenTaskDetail&&this.props.taskId),t=u.createElement("span",{className:"title"},this.props.title),n=m()("board-head-lane-title",{"task-is-done":!!this.props.taskIsDone,"not-clickable":!e});return e?u.createElement(ya.TextButton,{className:n,onClick:this.handleClick},this.renderScenarioTypeIcon(),t):u.createElement("div",{className:n},this.renderScenarioTypeIcon(),t)},t.prototype.render=function(){return u.createElement("span",{className:"board-head-span","data-theme":"agile-develop"},this.renderLaneTitle(),this.renderTaskflowStatus())},t.contextTypes={onOpenTaskDetail:q.func},t}(u.PureComponent),Da=Object(o.connect)(function(e,t){var n=e.ui.kanban.taskflows.reduce(function(e,t){return e.concat(t.taskflowstatuses||[])},[]),r={};n.forEach(function(e){r[e._id]=e});var a=(t.taskId&&e.ui.kanban.tasksPermission[t.taskId]||{}).putStatus;return{canPutStatus:void 0===a||a,statusSnippets:r}})(_a),Oa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.getChildContext=function(){return{onOpenTaskDetail:this.props.onOpenTaskDetail,uniqueIdPrefix:this.props.uniqueIdPrefix}},t.prototype.render=function(){return u.Children.only(this.props.children)},t.childContextTypes={onOpenTaskDetail:q.func,uniqueIdPrefix:q.string},t}(u.PureComponent),Pa=n("a+N5u/Cl"),Na=n.n(Pa),ja=n("nDsjpj50"),Aa=function(){function e(e){void 0===e&&(e=[]),this.collapsedIds=e,this.collapsedIds$=new ja.BehaviorSubject(e)}return e.prototype.changes=function(){return this.collapsedIds$},e.prototype.toggle=function(e){var t=this,n=[];"string"==typeof e?n=[e]:Array.isArray(e)&&(n=e),n.forEach(function(e){return t.toggleId(e)}),this.triggerChange()},e.prototype.toggleId=function(e){var t,n,r;this.collapsedIds=(t=this.collapsedIds,(r=function(e,t){return e.indexOf(t)}(t,n=e))>-1?l.h(t.slice(0,r),t.slice(r+1)):l.h(t,[n]))},e.prototype.resetCollapsedIds=function(e){this.collapsedIds=e,this.triggerChange()},e.prototype.triggerChange=function(){this.collapsedIds$.next(this.collapsedIds)},e.prototype.getCollapsedIds=function(){return this.collapsedIds},e.prototype.destroy=function(){this.collapsedIds$.next([]),this.collapsedIds$.complete()},e}(),La=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.defaultCollapseIds=[],r.defaultCollapseIds=t.defaultCollapseIds||[],r.manager=new Aa(r.defaultCollapseIds),r}return l.d(t,e),t.prototype.getChildContext=function(){return{collapseManager:this.manager}},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.defaultCollapseIds&&e.defaultCollapseIds!==this.props.defaultCollapseIds&&(this.toggleIds(e.defaultCollapseIds),this.defaultCollapseIds=e.defaultCollapseIds)},t.prototype.toggleIds=function(e){var t=this.manager.getCollapsedIds(),n=Na.a.difference(t,this.defaultCollapseIds),r=Na.a.difference(this.defaultCollapseIds,t),a=Na.a.without.apply(Na.a,l.h([Na.a.union(e,n)],r));this.manager.resetCollapsedIds(a)},t.prototype.componentWillUnmount=function(){this.manager.destroy()},t.prototype.render=function(){return u.Children.only(this.props.children)},t.childContextTypes={collapseManager:q.instanceOf(Aa).isRequired},t}(u.PureComponent),Fa=n("/LiHUECn"),Ba=n.n(Fa),Ga=n("8yf6doCl");function Va(e){var t=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.destroy$=new Ga.Subject,r.laneId$=new Ga.Subject,r.handleToggleCollapse=function(e){r.context.collapseManager.toggle(e)},r.state={isCollapsed:Boolean(e.isCollapsed)},r}return l.d(n,t),n.prototype.componentDidMount=function(){var e=this,t=this.context.collapseManager;this.laneId$.startWith(this.props.laneId).combineLatest(t.collapsedIds$).takeUntil(this.destroy$).map(function(e){var t=l.f(e,2),n=t[0];return t[1].indexOf(n)>-1}).subscribe(function(t){e.state.isCollapsed!==t&&e.setState({isCollapsed:t})})},n.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.laneId!==e.laneId&&this.laneId$.next(e.laneId)},n.prototype.componentWillUnmount=function(){this.destroy$.next(),this.destroy$.complete()},n.prototype.render=function(){var t=this.state.isCollapsed,n=Object.assign({},this.props,this.props.canToggleCollapse?{onToggleCollapse:this.handleToggleCollapse}:null);return u.createElement(e,l.a({},n,{isCollapsed:t}))},n.displayName="Collapse("+function(e){return e.displayName||e.name||"Component"}(e),n.contextTypes={collapseManager:q.instanceOf(Aa).isRequired},n}(u.Component);return Ba()(t,e)}var Ra=n("hVgOUOmn"),Ua=function(e){return["CARD_"+e+"-done","CARD_"+e+"-undone"]},Wa=function(){var e=["EMPTY_AREA","BUCKET_CONTAINER"].join("|");return new RegExp("^("+e+")_(.+)$")},qa=function(e){var t=Wa(),n=e.match(t)||[];return n[2]?n[2]:e},Ha=function(e){var t=e.draggingFrom;if(t){var n=qa(t);return l.f(Ca.d.splitCombinedAxisId(n),2)[1]}},za=function(e,t,n){void 0===n&&(n=!0);var r=n?{}:{cursor:"default"};return e.isDropAnimating?l.a({},t.style,r,{transitionDuration:"0.1s"}):l.a({},t.style,r)},Ka=function(e){if(wa.isIE()||wa.isWindows())return!1;return e<=500},Ja=function(e,t){if(!t){var n=e[e.length-1];return n?n.pos+1:0}var r,a,o=t.sourceBucketId,i=t.targetBucketId,s=t.sourceIndex,l=t.targetIndex;if(o===i&&s===l)return e[l].pos;if(o===i){var c=e.filter(function(e,t){return t!==s});r=c[l-1],a=c[l]}else r=e[l-1],a=e[l];return a&&r?(r.pos+a.pos)/2:r?r.pos+1:a?a.pos-1:0},$a=n("HDJEOtNh");n("8fTrCmNP");var Xa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.getCanMoveTask=function(){return!!this.props.card._projectId&&Object($a.getRoleScopeByProjId)(this.props.card._projectId)>=0},t.prototype.renderTask=function(e,t){var n=this.getCanMoveTask(),r=m()("kanban-dnd-card","task-"+this.props.card._id,!n&&"is-not-draggable",t.isDragging&&"is-dragging");return d.a.createElement("div",l.a({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:za(t,e.draggableProps,n),className:r}),d.a.createElement(Ra.SmartCardConnect,{card:this.props.card,showTaskflowStatusLabel:this.props.showTaskflowStatusLabel}))},t.prototype.render=function(){var e,t=this,n=(e=this.props.laneId,this.props.card.isDone?"CARD_"+e+"-done":"CARD_"+e+"-undone"),r=this.getCanMoveTask();return d.a.createElement(ba,{key:this.props.card._id,draggableId:this.props.card._id,index:this.props.index,type:n,isDragDisabled:!r},function(e,n){return t.renderTask(e,n)})},t}(d.a.PureComponent),Ya=n("oRqJmROU"),Qa=n("YqUJfXDr"),Za=n("lfya3Nc5"),eo=n("px/Tdvb+");n("Hi+i58br");var to=function(e){function t(t){var n=e.call(this,t)||this;return n.rootCls="kanban-droppable-bucket",n.type=Ua(n.props.laneId),n}return l.d(t,e),t.prototype.renderMask=function(){return d.a.createElement("div",{className:this.rootCls+"-mask"},this.props.hintedText)},t.prototype.renderContents=function(e,t){var n,r=m()(this.rootCls,((n={"is-dragging-over":t.isDraggingOver})[this.rootCls+"-single-list"]=this.props.isSingleLane,n)),a=Ha(t),o=!!a&&a===this.props.paneId,i=t.isDraggingOver&&this.props.getIsDroppable(a)&&!o;return d.a.createElement("div",l.a({className:r,ref:e.innerRef},e.droppableProps),this.props.children,i&&this.renderMask())},t.prototype.render=function(){var e,t=this;return d.a.createElement(Ar,{type:this.type,droppableId:(e=this.props.bucketId,"BUCKET_CONTAINER_"+e),isSortable:!1,isDropDisabled:this.props.isDropDisabled},function(e,n){return t.renderContents(e,n)})},t}(d.a.PureComponent);n("Hi+i58br");var no=function(e){function t(t){var n=e.call(this,t)||this;return n.rootCls="kanban-droppable-bucket",n.loadTasks=function(){"function"==typeof n.props.onLoadTasks&&(n.props.onLoadTasks({id:Ca.d.getCombinedAxisId([n.props.laneId,n.props.paneId]),laneId:n.props.laneId,paneId:n.props.paneId,isDefault:n.props.isDefaultBucket,paneIndex:n.props.paneIndex,sortMethod:n.props.sortMethod,isFirstPage:n.isFirstPage}),n.isFirstPage=!1)},n.saveScrollRef=function(e){return function(t){e&&e.innerRef(t),n.scrollRef=t}},n.scrollTo=function(e){var t=document.querySelectorAll("."+n.rootCls+"-cards > .task-"+e),r=t.length?t[0].getBoundingClientRect().top-164:0;n.scrollRef&&"function"==typeof n.scrollRef.scrollTo&&n.scrollRef.scrollTo({top:r})},n.setTimeoutScrollTo=function(e){n.timer=window.setTimeout(function(){n.scrollTo(e)},200)},n.getIsDroppable=function(e){if(!Object(Za.isStatusPaneType)(n.props.paneType))return!0;if(!e)return!0;var t=e,r=n.props.paneId;return n.props.extendDroppableCond(t,r)},n.type=Ua(n.props.laneId),n}return l.d(t,e),t.prototype.componentDidMount=function(){this.isFirstPage=!0},t.prototype.componentWillUnmount=function(){this.timer&&(window.clearTimeout(this.timer),this.timer=null)},t.prototype.getIsSortable=function(){if(!this.props.isSingleLane)return!1;var e=this.props,t=e.paneType,n=e.canUpdateTaskPos,r=e.sortMethod===eo.SortMethod.CUSTOM&&n;return Object(Za.supportCustomSortPane)(t)&&r},t.prototype.getIsLoadingWhenDragging=function(){if(!this.props.onLoadTasks)return!1;var e=this.props.isDragging;return void 0!==e&&e&&!Object(Ya.c)(this.props.hasMore)},t.prototype.renderTasks=function(){var e=this,t=!Object(Za.isStatusPaneType)(this.props.paneType);return this.props.cards.map(function(n,r){return d.a.createElement(Xa,{key:n._id,index:r,card:n,draggable:!0,laneId:e.props.laneId,paneId:e.props.paneId,showTaskflowStatusLabel:t})})},t.prototype.renderLoadMore=function(){if(!this.props.onLoadTasks)return null;if(this.props.shouldManuallyTrigger)return d.a.createElement("div",{onClick:this.loadTasks,className:this.rootCls+"-manually-trigger"},c.get("kanban.click.load.tasks"));var e=this.props.autoLoad;if(!(void 0===e||e))return null;var t=this.loadTasks,n=this.props.loadingEnded?"div":null;return d.a.createElement(Qa.LoadMore,{hasMore:this.props.hasMore,onEnter:t,endWith:n})},t.prototype.renderInvisibleContent=function(){var e=this.props.invisibleCount;return Object(Ya.c)(e)&&e>0&&d.a.createElement("div",{className:this.rootCls+"-invisible"},d.a.createElement(ya.Icon,{name:"lock"}),d.a.createElement("span",null,c.get("tasklist.invisible.hint",e)))},t.prototype.renderList=function(e){var t=this.rootCls+"-cards "+this.rootCls+"-cards-"+this.props.paneId;return d.a.createElement("div",{className:t,ref:this.saveScrollRef(e)},this.renderTasks(),e&&e.placeholder,this.renderInvisibleContent(),this.renderLoadMore())},t.prototype.renderDroppable=function(e,t){var n=this;return d.a.createElement(Ar,{type:this.type,droppableId:this.props.bucketId,isSortable:e,isDropDisabled:t},function(e){return n.renderList(e)})},t.prototype.getIsEmptyList=function(){return this.props.onLoadTasks?!this.props.cards.length&&!this.props.invisibleCount&&Object(Ya.c)(this.props.hasMore):0===this.props.cards.length},t.prototype.renderPlaceholder=function(e,t){var n=!!this.props.children,r=m()(this.rootCls+"-placeholder-container",{"empty-list":this.getIsEmptyList(),"is-dragging-over":t.isDraggingOver}),a=m()(this.rootCls+"-placeholder",{"has-task-creator":n,"empty-list":this.getIsEmptyList()});return d.a.createElement("div",l.a({className:r,ref:e.innerRef},e.droppableProps),t.isDraggingOver&&d.a.createElement("div",{className:a}))},t.prototype.renderPlaceholderDroppable=function(e){var t,n=this;return d.a.createElement(Ar,{type:this.type,droppableId:(t=this.props.bucketId,"EMPTY_AREA_"+t),isSortable:!1,isDropDisabled:e},function(e,t){return n.renderPlaceholder(e,t)})},t.prototype.renderExtraContent=function(){var e=null;this.props.children&&(e=d.a.cloneElement(this.props.children,{onCreateTaskSuccess:this.setTimeoutScrollTo}));var t=m()(this.rootCls+"-extra",{"empty-list":this.getIsEmptyList()});return d.a.createElement("div",{className:t},e)},t.prototype.renderContents=function(e){var t=this.getIsLoadingWhenDragging(),n=e?this.renderDroppable(e,t):this.renderList();return d.a.createElement(d.a.Fragment,null,n,d.a.createElement("div",{className:this.rootCls+"-non-list-container"},e&&this.renderPlaceholderDroppable(t),this.renderExtraContent()))},t.prototype.render=function(){var e,t=this.getIsSortable(),n=this.getIsLoadingWhenDragging(),r=!t||n;return e=t?n?c.get("release.drag.and.load.and.move.to.this.place"):"":c.get("release.drag.and.move.to.this.place"),d.a.createElement(to,{bucketId:this.props.bucketId,laneId:this.props.laneId,paneId:this.props.paneId,paneType:this.props.paneType,isSingleLane:this.props.isSingleLane,isDropDisabled:!r,hintedText:e,getIsDroppable:this.getIsDroppable},this.renderContents(t),ka.OrgPortalToProjectAppAPm.component,ka.BoardKanbanApm.component)},t}(d.a.PureComponent),ro=n("O3GlWwSR"),ao=n("bvmrLhnu"),oo=n("zDJ6609A"),io=n("8wJHPua6"),so=n("PzkW/4fU"),lo=function(e){var t=e.className,n=e.isStatic,r=m()(so["kanban-head-cell"],"kanban-head-cell",t,n?so["static-pane"]:null),a={width:io.KANBAN_UNIT_WIDTH,height:io.KANBAN_HEAD_CELL_HEIGHT};return u.createElement("div",{className:r,style:a},e.children)},co=n("sa1Ed382"),po=n("s0r7VfKc"),uo=n("RLD3BeS/"),fo=n("gh8QIhMV").throwError,ho=[{get text(){return p.a.get("stage.menu.edit.title")},type:"edit",icon:"pencil",goto:1},{get text(){return p.a.get("stage.menu.add.next.stage.title")},type:"create",icon:"plus",goto:2},{type:"divider1"},{get text(){return p.a.get("stage.menu.toggle.stage.tasks.executor")},type:"executor",icon:"user",goto:3},{get text(){return p.a.get("stage.menu.date.picker")},type:"deadline",icon:"calendar2",goto:4},{get text(){return p.a.get("stage.menu.move.tasks.title")},type:"move",icon:"circle-arrow-right-o",goto:5},{get text(){return p.a.get("stage.menu.fork.tasks.title")},type:"fork",icon:"copy",goto:6},{get text(){return p.a.get("stage.menu.export.tasks.title")},type:"export",icon:"move-task"},{get text(){return p.a.get("stage.menu.archive.tasks.title")},type:"archive",icon:"trash",goto:7},{type:"divider2"},{get text(){return p.a.get("stage.menu.lock.stage")},type:"unlock",icon:"stage",goto:8},{get text(){return p.a.get("stage.menu.unlock.stage")},type:"lock",icon:"tick",goto:9},{get text(){return p.a.get("stage.menu.delete.title")},type:"remove",icon:"trash",goto:10}],mo=function(e,t){return po.default.bulkUpdateTasks(e.projectId,e.taskIds,"executor",{conds:e.conds,_executorId:t}).toPromise().then(function(){ya.Toast.success(p.a.get("stage.menu.toggle.stage.tasks.executor.success"))}).catch(function(e){return fo(e)})},go=function(e,t){return po.default.bulkUpdateTasks(e.projectId,e.taskIds,"dueDate",{conds:e.conds,dueDate:t?t.toISOString():null}).toPromise().then(function(){var e=t?p.a.get("stage.menu.date.picker.success"):p.a.get("stage.menu.date.picker.clear.success");ya.Toast.success(e)}).catch(function(e){ya.Toast.error(p.a.get("stage.menu.date.picker.error")),fo(e)})},vo=function(e,t){return po.default.bulkUpdateTasks(e.projectId,e.taskIds,"move",{conds:e.conds,newStageId:t}).toPromise().then(function(){ya.Toast.success(p.a.get("stage.menu.move.tasks.success"))}).catch(function(e){return fo(e)})},bo=function(e,t){return po.default.bulkCreateTasks(e.projectId,"copy",l.a({conds:e.conds},t)).toPromise().then(function(){ya.Toast.success(p.a.get("stage.menu.fork.tasks.success"))}).catch(function(e){return fo(e)})},yo=function(e,t){return po.default.bulkUpdateTasks(e.projectId,e.taskIds,"move",{conds:e.conds,_scenariofieldconfigId:t._scenariofieldconfigId,_taskflowstatusId:t._taskflowstatusId,_tasklistId:t._tasklistId}).toPromise().then(function(){ya.Toast.success(p.a.get("stage.menu.move.tasks.success"))}).catch(function(e){return fo(e)})},ko=function(e,t){var n=t._taskflowstatusId;return po.default.bulkForkStageTasksToTaskflow(n,l.a({conds:e.conds},t)).toPromise().then(function(){ya.Toast.success(p.a.get("stage.menu.fork.tasks.success"))}).catch(function(e){return fo(e)})},So=function(e,t){return po.default.bulkUpdateTasks(e.projectId,e.taskIds,"archive",{conds:e.conds}).delayWhen(function(){return t&&po.default.database?po.default.database.update("Task",l.a({_projectId:e.projectId},e.conds),{isArchived:!0}).catch(function(){return f.Observable.of(null)}):f.Observable.of(null)}).toPromise().then(function(){return uo.ToastWithObject.archive()}).catch(function(e){return fo(e)})},Co=n("pYq0h+Ab"),wo={edit:"edit stage",create:"create stage",remove:"remove stage",lock:"lock stage",unlock:"unlock stage"},Io={edit:"edited stage",create:"created stage",remove:"removed stage",lock:"locked stage",unlock:"unlocked stage"},To={executor:"edit executors",deadline:"edit deadline",archive:"delete tasks",move:"move tasks",fork:"fork tasks"},Eo={executor:"edited executors",deadline:"edited deadline",archive:"deleted tasks",move:"moved tasks",fork:"forked tasks"},xo=function(e,t,n){(To[t]||Eo[t])&&co.gta.event({type:Mo(e),action:n?Eo[t]:To[t],segment:"Batch Operation",control:"column menu"}),(wo[t]||Io[t])&&co.gta.event({type:Mo(e),action:n?Io[t]:wo[t],control:"column menu"})},Mo=function(e){var t=void 0;switch(e){case Co.AxisType.stage:t="task stage";break;case Co.AxisType.priority:t="task priority";break;case Co.AxisType.scenarioConfig:t="task type"}return t},_o=n("gP3sQMFZ"),Do=n.n(_o),Oo=function(e){function t(t){var n=e.call(this,t)||this;return n.getClickHandler=function(e){return{fork:n.onClickFork,export:n.onClickExport}[e]},n.getList=function(){var e=[];return ho.forEach(function(t){var r=n.getIsShow(t.type),a=t.type.indexOf("divider")>-1,o=["fork","export"].includes(t.type);if(r&&a&&e.push(d.a.createElement(ya.Separator,{key:t.type})),r&&o&&e.push(d.a.createElement(ya.MenuItem,{key:t.type,onClick:n.getClickHandler(t.type)},d.a.createElement("a",null,d.a.createElement(ya.Icon,{name:t.icon,size:14}),t.text))),r&&!a&&!o){e.push(d.a.createElement(ya.MenuItem,{key:t.type,onClick:function(){return xo(n.props.type,t.type)}},d.a.createElement(ya.PopupMenuLink,{goto:t.goto},d.a.createElement(ya.Icon,{name:t.icon,size:14}),t.text)))}}),e},n.onClickFork=function(){xo(n.props.type,"fork"),n.props.onClickFork()},n.onClickExport=function(){xo(n.props.type,"export"),n.props.onClickExport()},n.list=n.getList(),n}return l.d(t,e),t.prototype.getIsShow=function(e){var t=this.props,n=t.type,r=t.permissions,a=t.isntLastNorLocked,o=t.canCreateNewStage,i=t.canBatchPut,s=t.isLast,l=t.isLocked,c=t.stagesCount,p=t.stageNum,u=t.taskflowEnabled,d="stage"===n&&s&&!u&&r.putMode&&l,f="stage"===n&&s&&!u&&r.putMode&&!l,h="stage"===n&&r.del&&c>p&&a;switch(e){case"edit":return"stage"===n&&r.put;case"create":return"stage"===n&&r.post&&a&&o;case"divider1":return"stage"===n&&(r.put||r.post&&a);case"executor":case"deadline":return i;case"move":case"fork":return i&&a;case"export":return r.dump;case"archive":return i;case"divider2":return"stage"===n&&i&&(d||f||h);case"lock":return d;case"unlock":return f;case"remove":return h;default:return!1}},t.prototype.render=function(){return this.list.length?d.a.createElement(ya.Menu,null,this.list):d.a.createElement("div",{className:Do.a.empty},p.a.get("horizontal.group.menu.empty.tips"))},t}(d.a.PureComponent),Po=n("dvMdXac2"),No=function(e){return d.a.createElement("div",{className:Po["create-stage"]},d.a.createElement(Bo,{autoFocus:!0,onSubmit:function(t){var n=e.prevStageId,r=e.tasklistId;po.default.createStage(r,{_prevId:n,name:t}).subscribe(function(){e.onSuccess()})},btnContent:p.a.get("create")}))},jo=function(e){return d.a.createElement(Bo,{autoFocus:!0,defaultValue:e.stage.name,onSubmit:function(t){po.default.updateStage(e.stage._id,{name:t}).subscribe(function(){e.onSuccess()})}})},Ao=n("vDN73p8P"),Lo=function(e){return d.a.createElement(d.a.Fragment,null,d.a.createElement("p",null,p.a.get("stage.menu.delete.tips")),d.a.createElement(Ao.DoubleChecker,{inShort:!0,password:e.stage.name,onConfirm:function(){po.default.deleteStage(e.stage._id).subscribe(function(){e.onSuccess()})},buttonMsg:p.a.get("confirm"),confirmPlaceholder:p.a.get("stage.menu.delete.placeholder",e.stage.name)}))},Fo=function(e){var t=e.stage.isLocked?p.a.get("stage.menu.unlock.stage.msg"):p.a.get("stage.menu.lock.stage.msg"),n=e.stage.isLocked?null:[p.a.get("stage.menu.lock.stage.msg.addition1"),p.a.get("stage.menu.lock.stage.msg.addition2"),p.a.get("stage.menu.lock.stage.msg.addition3")].map(function(e,t){return d.a.createElement("li",{key:"addition__"+t},e)}),r=n&&d.a.createElement("ul",null,n);return d.a.createElement(d.a.Fragment,null,d.a.createElement("p",null,t),r,d.a.createElement(ya.Button,{onClick:function(){var t=e.stage;po.default.updateStage(t._id,{isLocked:!t.isLocked}).subscribe(function(){e.onSuccess()})}},p.a.get("confirm")))};n("F+nalbze");var Bo=function(e){function t(t){var n=e.call(this,t)||this;n.onSubmit=function(e){""!==n.state.input.trim()&&n.props.onSubmit(n.state.input,Boolean(e))},n.refInput=function(e){n.input=e},n.onChange=function(e){var t=e.target.value;n.setState(l.a({},n.state,{input:t}))},n.onFocus=function(){n.setState(l.a({},n.state,{active:!0})),n.onFocusAtEnd()},n.onBlur=function(){n.setState(l.a({},n.state,{active:!1}))},n.onMouseDown=function(e){e.preventDefault(),e.stopPropagation()},n.onKeyDown=function(e){13===e.which&&(e.preventDefault(),e.stopPropagation(),n.onSubmit(!0))},n.onFocusAtEnd=function(){var e=n.state.input.length;n.input.focus(),n.input.setSelectionRange(e,e)},n.onSubmitClick=function(e){e.preventDefault(),e.stopPropagation(),n.onSubmit()};var r=n.props.defaultValue;return n.state={input:r||"",active:!1},n}return l.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.autoFocus&&Pa.delay(function(){return e.input.focus()})},t.prototype.render=function(){var e=this.props,t=e.maxLength,n=e.placeholder,r=e.btnContent,a={ref:this.refInput,className:"menu-form-input",value:this.state.input,onChange:this.onChange,onKeyDown:this.onKeyDown,onFocus:this.onFocus,onBlur:this.onBlur,maxLength:t||void 0,placeholder:n||c.get("stage.menu.stage.name")};return u.createElement("form",{className:"menu-form"},u.createElement("input",l.a({},a)),u.createElement("footer",null,u.createElement(ya.Button,{className:"menu-form-submit",disabled:0===this.state.input.trim().length,onClick:this.onSubmitClick,onMouseDown:this.onMouseDown},r||c.get("save"))))},t}(u.PureComponent),Go=n("J/O+sWSp"),Vo=n.n(Go),Ro=n("odY26VIi"),Uo=function(e){function t(t){var n=e.call(this,t)||this;return n.memberSelectorView=null,n.destroyed=!1,n.setRef=function(e){n.executorRef=e},n.state={isLoading:!0},n}return l.d(t,e),t.prototype.componentDidMount=function(){var e=this;Ro.fetch(this.props.projectId,{success:function(t){if(!e.destroyed){var n=t.toJSON();e.memberSelectorView=new Vo.a({noAssign:!0,members:n,selectCallback:e.props.onUpdateExecutor}),e.setState({isLoading:!1})}}})},t.prototype.componentWillUnmount=function(){this.destroyed=!0,this.memberSelectorView&&this.memberSelectorView.remove()},t.prototype.insertBackboneView=function(){this.memberSelectorView&&this.executorRef.appendChild(this.memberSelectorView.el)},t.prototype.render=function(){return this.state.isLoading||this.insertBackboneView(),d.a.createElement("div",{ref:this.setRef},this.state.isLoading&&d.a.createElement(ya.Loading,null))},t}(d.a.PureComponent),Wo=n("wd/RKGTj"),qo=n.n(Wo),Ho=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onUpdateDeadline=function(e){var n=t.getStartDate()||null,r=e?e.date:null;n&&r&&!qo()(n).isBefore(r)?ya.Toast.error(p.a.get("stage.menu.date.picker.error")):t.props.onUpdateDeadline(r)},t.getStartDate=function(){var e=(t.props.tasks||[]).filter(function(e){return!!e.startDate}),n=null;if(e.length){var r=Na.a.max(e,function(e){return new Date(e.startDate).valueOf()});n=r?r.startDate:null}return n?qo()(n):void 0},t.getDueDate=function(e){var t=qo()("18:00","HH:mm");return!(e&&qo()(e).isSameOrAfter(t))&&t},t}return l.d(t,e),t.prototype.render=function(){var e=this.getStartDate(),t={inline:!0,startDate:e,defaultDate:this.getDueDate(e),onChange:this.onUpdateDeadline,onClear:this.onUpdateDeadline};return d.a.createElement(ya.DatePicker,l.a({},t))},t}(d.a.PureComponent),zo=n("fio7jWQ0"),Ko=n("T6KpLPMz"),Jo=n("tkPHaDUr"),$o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setRef=function(e){t.moveOrForkRef=e},t.onSubmit=function(e){var n={},r="stage";Object(ao.isTaskflowEnabled)(e.selectedProject)?(r="taskFlowStatus",n={_scenariofieldconfigId:e.selectedScenarioField._id,_taskflowstatusId:e.selectedTaskflowStatus._id,_tasklistId:e.selectedTasklist&&e.selectedTasklist._id}):n={newStageId:e.selectedStage._id},t.props.onMoveTasks(r,n)},t}return l.d(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.project,n=e.tasklist,r=e.stage,a=t._organizationId||void 0;Object(Jo.bootstrapTaskLocator)({organizationId:a,selectedProject:t,selectedTasklist:n,selectedStage:r||null,hideIndieEntry:!0})},t.prototype.render=function(){return d.a.createElement(o.Provider,{store:zo.store},d.a.createElement(Jo.TaskLocator,{acceptedStatusKinds:Ko.TASK_VALID_STATUS_KINDS.UNDONE,tips:p.a.get("stage.selector.tips"),optionalType:"scenarioConfigs",doLink:!1,doLinked:!1,showLinkOptions:!1,onSubmit:this.onSubmit}))},t}(d.a.PureComponent),Xo=function(e){return d.a.createElement(d.a.Fragment,null,d.a.createElement("p",null,p.a.get("stage.menu.confirm.archive.tasks")),d.a.createElement(ya.Button,{danger:!0,onClick:e.onArchiveTasks},p.a.get("archive")))},Yo=n("PSYzXKAW"),Qo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onModalVisibleChange=function(e){t.props.onModalVisibleChange(e)},t.onFork=function(e){var n,r,a=e.taskLocatorData,o=a.selectedProject,i=a.selectedStage,s=a.selectedScenarioField,c=a.selectedSprint,p=a.selectedTaskflowStatus,u=a.selectedTasklist;Object(ao.isTaskflowEnabled)(o)?(r="taskFlowStatus",n={_tasklistId:u&&u._id,_taskflowstatusId:p._id,_scenariofieldconfigId:s._id,_sprintId:c&&c._id}):(r="stage",n={newStageId:i._id}),n=l.a({},n,{doLink:e.doLink,doLinked:e.doLinked,copyFields:e.copyFields,withAllSfcFields:e.withAllSfcFields}),t.props.onForkTasks(r,n)},t}return l.d(t,e),t.prototype.render=function(){var e,t=this.props.project;return e=-1===t.orgLevel||-2===t.orgLevel?void 0:t._organizationId||void 0,d.a.createElement(o.Provider,{store:zo.store},d.a.createElement(Yo.TaskCopy,{project:t,organizationId:e,tasklist:this.props.tasklist,stage:this.props.stage,tips:p.a.get("stage.selector.tips"),hideIndieEntry:!0,showLinkOptions:!0,modalOpened:this.props.modalOpened,onModalVisibleChange:this.onModalVisibleChange,onSubmit:this.onFork}))},t}(d.a.PureComponent),Zo=n("Drsbyrjq"),ei=n("DPiI26Ag"),ti=function(e){function t(t){var n=e.call(this,t)||this;return n.isLast=!0,n.isLocked=!0,n.isntLastNorLocked=!0,n.stagesCount=0,n.stageNum=0,n.setStageData=function(e){var t=e.stages,r=e.stage;t&&r&&(n.isLast=t[t.length-1]._id===r._id,n.isLocked=!!r.isLocked,n.isntLastNorLocked=!(n.isLast&&r.isLocked),n.stagesCount=t.length,n.stageNum=t[t.length-1].isLocked?2:1)},n.setPopupMenuRef=function(e){n.popupMenu=e},n.closePopup=function(){n.popupMenu.close()},n.getGoto=function(e){return ho.find(function(t){return t.type===e}).goto},n.onClickFork=function(){n.closePopup(),n.setState({forkModalOpened:!n.state.forkModalOpened})},n.onForkModalVisibleChange=function(e){n.setState({forkModalOpened:e})},n.onClickExport=function(){n.closePopup(),n.setState(function(e){return{exportModalOpened:!e.exportModalOpened}})},n.onExportModalVisibleChange=function(e){n.setState({exportModalOpened:e})},n.onArchiveTasks=function(){So(n.getAncestorData(),!0),xo(n.props.type,"archive",!0),n.closePopup()},n.onForkTasks=function(e,t){"stage"===e?bo(n.getAncestorData(),t):ko(n.getAncestorData(),t),xo(n.props.type,"fork",!0),n.setState({forkModalOpened:!n.state.forkModalOpened}),n.closePopup()},n.onMoveTasks=function(e,t){"stage"===e?vo(n.getAncestorData(),t.newStageId):yo(n.getAncestorData(),t),xo(n.props.type,"move",!0),n.closePopup()},n.onUpdateDeadline=function(e){go(n.getAncestorData(),e),xo(n.props.type,"deadline",!0),n.closePopup()},n.onUpdateExecutor=function(e){var t=null;1===e.length&&24===e[0].length&&(t=e[0]),mo(n.getAncestorData(),t),xo(n.props.type,"executor",!0),n.closePopup()},n.onEditStageSuccess=function(){xo(n.props.type,"edit",!0),n.closePopup()},n.onCreateStageSuccess=function(){xo(n.props.type,"create",!0),n.closePopup()},n.onDeleteStageSuccess=function(){xo(n.props.type,"remove",!0),n.closePopup()},n.setStageData(t),n.state={forkModalOpened:!1,exportModalOpened:!1},n}return l.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){Na.a.isEqual(e.stage,this.props.stage)&&Na.a.isEqual(e.stages,this.props.stages)||this.setStageData(e)},t.prototype.getAncestorData=function(){var e={_tasklistId:this.props.tasklist&&this.props.tasklist._id,_stageId:this.props.stage&&this.props.stage._id,_scenariofieldconfigId:this.props._scenariofieldconfigId?this.props._scenariofieldconfigId:void 0,priority:void 0!==this.props.priority?this.props.priority:void 0};return{conds:e=Na.a.omit(e,function(e){return Na.a.isUndefined(e)}),projectId:this.props.project._id,taskIds:Na.a.pluck(this.props.tasks,"_id")}},t.prototype.getGroupFilterTql=function(){var e=this.props,t=e.stage,n=e._scenariofieldconfigId,r=e.priority,a={_stageId:t&&t._id,_scenariofieldconfigId:n,priority:r};return Na.a.pairs(a).filter(function(e){return null!=l.f(e,2)[1]}).map(function(e){var t=l.f(e,2);return"("+t[0]+" = "+t[1]+")"}).join(" AND ")},t.prototype.renderLockStage=function(e){var t=this,n={unlock:{index:this.getGoto("lock"),title:p.a.get("stage.menu.unlock.stage"),onSuccess:this.closePopup},lock:{index:this.getGoto("unlock"),title:p.a.get("stage.menu.lock.stage"),onSuccess:function(){xo(t.props.type,e,!0),t.closePopup(),t.props.onLockStages&&t.props.onLockStages()}}},r=this.props,a=r.project,o=r.stage,i=r.type;if(Object(ao.isTaskflowEnabled)(a))return null;if(!o||"stage"!==i)return null;var s=n[e],l=s.index,c=s.title,u=s.onSuccess;return d.a.createElement(ya.PopupMenuView,{className:m()(ei["common-view"]),index:l,title:c},d.a.createElement(Fo,{stage:o,onSuccess:u}))},t.prototype.renderArchive=function(){var e={onArchiveTasks:this.onArchiveTasks};return d.a.createElement(ya.PopupMenuView,{index:this.getGoto("archive"),title:p.a.get("archive"),className:m()(ei["common-view"])},d.a.createElement(Xo,l.a({},e)))},t.prototype.renderMove=function(){var e={project:this.props.project,tasklist:this.props.tasklist,stage:this.props.stage,onMoveTasks:this.onMoveTasks};return d.a.createElement(ya.PopupMenuView,{index:this.getGoto("move"),title:p.a.get("stage.menu.move.tasks.title"),className:m()(ei["common-view"])},d.a.createElement($o,l.a({},e)))},t.prototype.renderDeadline=function(){var e={tasks:this.props.tasks,onUpdateDeadline:this.onUpdateDeadline};return d.a.createElement(ya.PopupMenuView,{index:this.getGoto("deadline"),title:p.a.get("stage.menu.date.picker.title"),className:m()(ei["clear-void"])},d.a.createElement(Ho,l.a({},e)))},t.prototype.renderExecutor=function(){var e={projectId:this.props.project._id,onUpdateExecutor:this.onUpdateExecutor};return d.a.createElement(ya.PopupMenuView,{index:this.getGoto("executor"),title:p.a.get("stage.menu.toggle.stage.tasks.executor.title"),className:m()(ei["common-view"])},d.a.createElement(Uo,l.a({},e)))},t.prototype.renderDeleteStage=function(){var e=this.props,t=e.stages,n=e.stage,r=e.type;return!t||!n||t.length<2||"stage"!==r?null:d.a.createElement(ya.PopupMenuView,{index:this.getGoto("remove"),title:p.a.get("stage.menu.delete.title"),className:m()(ei["common-view"])},d.a.createElement(Lo,{stage:n,onSuccess:this.onDeleteStageSuccess}))},t.prototype.renderCreateStage=function(){var e=this.props,t=e.stage,n=e.type,r=e.tasklist;return t&&"stage"===n&&r?d.a.createElement(ya.PopupMenuView,{index:this.getGoto("create"),title:p.a.get("stage.menu.add.title"),className:m()(ei["common-view"])},d.a.createElement(No,{tasklistId:r._id,prevStageId:t._id,onSuccess:this.onCreateStageSuccess})):null},t.prototype.renderEditStage=function(){var e=this.props,t=e.stage,n=e.type;return t&&"stage"===n?d.a.createElement(ya.PopupMenuView,{index:this.getGoto("edit"),title:p.a.get("stage.menu.edit.title"),className:m()(ei["common-view"])},d.a.createElement(jo,{stage:t,onSuccess:this.onEditStageSuccess})):null},t.prototype.renderBasic=function(){var e={type:this.props.type,permissions:this.props.permissions,canCreateNewStage:this.props.canCreateNewStage,canBatchPut:this.props.canBatchUpdate,isLast:this.isLast,isLocked:this.isLocked,isntLastNorLocked:this.isntLastNorLocked,stagesCount:this.stagesCount,stageNum:this.stageNum,taskflowEnabled:Object(ao.isTaskflowEnabled)(this.props.project),onClickFork:this.onClickFork,onClickExport:this.onClickExport};return d.a.createElement(ya.PopupMenuView,{index:0,title:p.a.get("stage.menu.title"),className:m()(ei["basic-menu"])},d.a.createElement(Oo,l.a({},e)),this.props.pluginsContainer)},t.prototype.renderForkModal=function(){return d.a.createElement(Qo,{project:this.props.project,tasklist:this.props.tasklist,stage:this.props.stage,modalOpened:this.state.forkModalOpened,onForkTasks:this.onForkTasks,onModalVisibleChange:this.onForkModalVisibleChange})},t.prototype.renderExportModal=function(){var e=this.getGroupFilterTql();return d.a.createElement(Zo.a,{projectId:this.props.project._id,extraTql:e,opened:this.state.exportModalOpened,onVisibleChange:this.onExportModalVisibleChange})},t.prototype.render=function(){return d.a.createElement(d.a.Fragment,null,d.a.createElement(ya.PopupMenu,{ref:this.setPopupMenuRef,main:0,trigger:this.props.trigger,titleCls:m()(ei.title)},this.renderBasic(),this.renderEditStage(),this.renderCreateStage(),this.renderExecutor(),this.renderDeadline(),this.renderMove(),this.renderArchive(),this.isLast?this.renderLockStage("unlock"):null,this.isLast?this.renderLockStage("lock"):null,this.renderDeleteStage()),this.renderForkModal(),this.renderExportModal())},t}(d.a.PureComponent),ni=n("UpxbwU5/"),ri=n("PzkW/4fU"),ai=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=d.a.createRef(),t.onHide=function(){t.ref.current&&t.ref.current.closePopup()},t.onClickTrigger=function(){var e="";switch(t.props.paneType){case Ca.a.AxisType.stage:e="task stage";break;case Ca.a.AxisType.priority:e="task priority";break;case Ca.a.AxisType.scenarioConfig:e="task type"}co.gta.event({action:"toggle column menu",type:e})},t.getHorizontalGroupType=function(e){return[Ca.a.AxisType.stage,Ca.a.AxisType.priority,Ca.a.AxisType.scenarioConfig].indexOf(e)>-1?e:null},t}return l.d(t,e),t.prototype.renderPopupMenu=function(){var e=this.props,t=e.tasks,n=e.stages,r=e.paneId,a=e.tasklist,o=e.project,i=e.paneType,s=e.onLockStages,c=this.getHorizontalGroupType(i);if(!c)return null;var p=!!a&&a.stageIds.length>=100,u={type:c,trigger:d.a.createElement("div",{className:ri.handler,onClick:this.onClickTrigger},d.a.createElement(ya.IconButton,{name:"more",color:"gray"})),project:o,tasklist:a,tasks:t,canBatchUpdate:this.props.canBatchUpdate,permissions:{post:!1,put:!1,del:!1,putMode:!1,dump:!1},canCreateNewStage:p,onLockStages:s},f=a?Ea.getTasklistPermission(a):{};if(c===Ca.a.AxisType.stage){if(!n||!n.length)return null;var h=n.find(function(e){return e._id===r});if(!h)return null;var m=Ea.getStagePermission(h),g={post:m.post,put:m.put,del:m.del,putMode:f.putMode,dump:f.getDumpTasks},v=d.a.createElement(ni.PluginsContainer,{projectId:o._id,stage:h,onHide:this.onHide});u=Object.assign(u,{stages:n,stage:h,permissions:g,canCreateNewStage:m.post,pluginsContainer:v})}else{g={post:f.post,put:f.put,del:f.del,putMode:f.putMode,dump:f.getDumpTasks};var b=c===Ca.a.AxisType.priority?Ea.getPriorityByValue(r):void 0,y=c===Ca.a.AxisType.scenarioConfig?r:void 0;u=Object.assign(u,{permissions:g,priority:b,_scenariofieldconfigId:y})}return d.a.createElement(ti,l.a({ref:this.ref},u))},t.prototype.render=function(){return this.renderPopupMenu()},t}(d.a.PureComponent),oi=n("gYU8d0JR"),ii=n("uOAddLi+"),si=n("7PcElNMR"),li=n("VNkUV4x1"),ci=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.gtaHandler(),t.props.onChange(e,t.props.status._id)},t.onClick=function(){t.props.disabled||t.onChange(!t.props.checked)},t}return l.d(t,e),t.prototype.gtaHandler=function(){co.gta.event({action:"edit state target",control:"rule Menu",segment:"Workflow Configuration"})},t.prototype.render=function(){var e=this.props,t=e.status,n=e.checked,r=e.disabled,a=m()(li["status-checkbox-wrapper"],{disabled:r});return d.a.createElement("div",{key:t._id,className:a,onClick:this.onClick},d.a.createElement(ya.Checkbox,{checked:n,disabled:r,onChange:this.onChange}),d.a.createElement("div",{className:li["status-name"]},t.name))},t}(d.a.PureComponent),pi=n("VNkUV4x1"),ui=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChangeKind=function(e){var n=t.props,r=n.status,a=n.statuses,o=e.target.value;t.onChangeKindGta(o),Object(si.c)(a,r,o)||t.props.onUpdateStatusKind(o)},t.onClickConfirm=function(){var e=t.props.updatedStatusKind,n=t.props.status.kind;e===n||!("end"===e||"end"===n)?t.props.onConfirmUpdateStatus():t.validateUpdatedStatusKind(),t.onConfirmGta()},t.onCheckStatus=function(e,n){var r=t.props.checkedStatusIds,a=e?r.concat(n):r.filter(function(e){return e!==n});t.props.onUpdateCheckedStatusIds(a)},t}return l.d(t,e),t.prototype.componentWillUnmount=function(){this.subscription$&&this.subscription$.unsubscribe()},t.prototype.onChangeKindGta=function(e){var t="";switch(e){case"start":t="start";break;case"unset":t="in progress";break;case"end":t="end"}co.gta.event({action:"edit state type",control:"rule Menu",type:t,segment:"Workflow Configuration"})},t.prototype.onConfirmGta=function(){co.gta.event({action:"edited rule",control:"rule menu",segment:"Workflow Configuration"})},t.prototype.validateUpdatedStatusKind=function(){var e=this,t=this.props,n=t.status,r=t.updatedStatusKind;this.subscription$=Object(si.e)(n._id,this.context.objectType).subscribe(function(t){("end"===r?Boolean(t.undone):Boolean(t.done))?e.props.goToConfirmPage():e.props.onConfirmUpdateStatus()})},t.prototype.renderStatus=function(){var e=p.a.get("project.settings.taskflow.config.table.status.start"),t=p.a.get("project.settings.taskflow.config.table.status.start.hint"),n=p.a.get("project.settings.taskflow.config.table.status.unset"),r=p.a.get("project.settings.taskflow.config.table.status.unset.hint"),a=p.a.get("project.settings.taskflow.config.table.status.end"),o=p.a.get("project.settings.taskflow.config.table.status.end.hint");return d.a.createElement(ya.RadioGroup,{className:pi["radio-group"],value:this.props.updatedStatusKind,onChange:this.onChangeKind},d.a.createElement(ya.Radio,{value:"start",className:pi.radio},d.a.createElement("div",{className:pi["radio-name"]},e),d.a.createElement("div",{className:pi["radio-hint"]},t)),d.a.createElement(ya.Radio,{value:"unset",className:pi.radio},d.a.createElement("div",{className:pi["radio-name"]},n),d.a.createElement("div",{className:pi["radio-hint"]},r)),d.a.createElement(ya.Radio,{value:"end",className:pi.radio},d.a.createElement("div",{className:pi["radio-name"]},a),d.a.createElement("div",{className:pi["radio-hint"]},o)))},t.prototype.renderSeparator=function(){return d.a.createElement("div",{className:pi["separator-wrapper"]},d.a.createElement(ya.Separator,null))},t.prototype.renderTransforms=function(){var e=this,t=this.props.statuses.map(function(t){var n=e.props.checkedStatusIds.indexOf(t._id)>-1,r=t._id===e.props.status._id;return d.a.createElement(ci,{key:t._id,status:t,checked:n,disabled:r,onChange:e.onCheckStatus})});return d.a.createElement("div",{className:pi["statuses-list"]},d.a.createElement("div",{className:pi["status-hint"]},p.a.get("project.settings.taskflow.config.table.transform.hint")),t)},t.prototype.renderButton=function(){return d.a.createElement(ya.Button,{onClick:this.onClickConfirm},p.a.get("confirm"))},t.prototype.render=function(){return d.a.createElement("div",{className:pi["kanban-status-transform-menu"]},d.a.createElement("div",{className:pi["content-wrapper"]},this.renderStatus(),this.renderSeparator(),this.renderTransforms()),d.a.createElement("div",{className:pi["button-wrapper"]},this.renderButton()))},t.contextType=ii.a,t}(d.a.PureComponent),di=n("VNkUV4x1"),fi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onConfirm=function(){t.props.onConfirmUpdateStatus()},t}return l.d(t,e),t.prototype.render=function(){var e="end"===this.props.currentKind?p.a.get("project.settings.taskflow.status.checkbox.change.warning.from.end"):p.a.get("project.settings.taskflow.status.checkbox.change.warning.to.end");return d.a.createElement("div",null,d.a.createElement("p",{className:di["confirm-text"]},e),d.a.createElement(ya.Button,{danger:!0,onClick:this.onConfirm},p.a.get("confirm")))},t}(d.a.PureComponent),hi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){"function"==typeof t.props.onClick&&t.props.onClick()},t}return l.d(t,e),t.prototype.render=function(){return u.createElement("div",{className:"menu-item",onClick:this.onClick},u.createElement(ya.Icon,{name:this.props.iconName}),u.createElement("span",null,this.props.text))},t}(u.PureComponent),mi=n("VNkUV4x1"),gi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onArchiveTasks()},t}return l.d(t,e),t.prototype.render=function(){return u.createElement(u.Fragment,null,u.createElement("div",{className:mi["delete-text"]},p.a.get("kanban.head.status.menu.transform.archive.tasks")),u.createElement(ya.Button,{danger:!0,onClick:this.onClick},p.a.get("archive")))},t}(u.PureComponent),vi=function(e,t,n){var r="taskflowstatus/"+e+"/tasks/archive";return po.default.fetch.put(r,t).delayWhen(function(){if(n&&po.default.database){var r=function(e){return Na.a.mapObject(e,function(e){return Array.isArray(e)?{$in:e}:e})}(t);return po.default.database.update("Task",l.a({},r._sprintId&&{_sprintId:r._sprintId},r._tasklistId&&{_tasklistId:r._tasklistId},r._scenariofieldconfigIds&&{_scenariofieldconfigId:r._scenariofieldconfigIds},{_taskflowstatusId:e}),{isArchived:!0}).catch(function(){return f.Observable.of(null)})}return f.Observable.of(null)})},bi=function(e,t){var n="taskflowstatus/"+e+"/tasks/dueDate";return po.default.fetch.put(n,t)},yi=function(e,t){var n="taskflowstatus/"+e+"/tasks/executor";return po.default.fetch.put(n,t)},ki=function(e,t,n,r){var a=e._id,o=e._taskflowId,i=[];t.forEach(function(e){var t=-1===e.rejectStatusIds.indexOf(a),n=r.indexOf(e._id)>-1;t&&!n?i.push({_taskflowstatusId:e._id,add:[a]}):!t&&n&&i.push({_taskflowstatusId:e._id,del:[a]})});var s=e.kind!==n&&po.default.updateTaskflowStatusKind(a,{kind:n}),l=!!i.length&&po.default.updateTaskflowStatusRejectedId(o,i),c=Na.a.compact([s,l]);return c.length?f.Observable.forkJoin(c):f.Observable.empty()};var Si,Ci=n("VNkUV4x1"),wi=n("PzkW/4fU");!function(e){e[e.MainPage=0]="MainPage",e[e.EditPage=1]="EditPage",e[e.TransformPage=2]="TransformPage",e[e.AddStatusPage=3]="AddStatusPage",e[e.ExecutorPage=4]="ExecutorPage",e[e.DeadlinePage=5]="DeadlinePage",e[e.ArchiveTasksPage=6]="ArchiveTasksPage",e[e.DeletePage=7]="DeletePage",e[e.ConfirmPage=8]="ConfirmPage"}(Si||(Si={}));var Ii=function(e){function t(t){var n=e.call(this,t)||this;return n.setPopupRef=function(e){n.popupRef=e},n.closePopup=function(){n.popupRef.close()},n.onClosePopup=function(){n.setState({updatedStatusKind:n.props.status.kind,checkedStatusIds:n.getCheckedIds(n.props)})},n.onClickTrigger=function(){co.gta.event({action:"toggle column menu",type:"task flow"})},n.onAddStatusSuccess=function(){n.closePopup()},n.goToAddStatusView=function(){Object(oi.h)("add status")},n.goToEditStatusView=function(){Object(oi.h)("edit name")},n.goToDeleteView=function(){Object(oi.h)("delete status")},n.goToExecutorView=function(){n.batchUpdateGta("edit executors")},n.goToDeadlineView=function(){n.batchUpdateGta("edit deadline")},n.goToArchiveTasksView=function(){n.batchUpdateGta("delete tasks")},n.goToTransformView=function(){co.gta.event({action:"edit rule",control:"column menu",segment:"Workflow Configuration"})},n.gtaHandler=function(e){co.gta.event({action:e,segment:"Workflow Configuration",control:"Flow Menu",type:"taskflow"})},n.goToConfirmPage=function(){n.popupRef.goTo(Si.ConfirmPage)},n.onArchiveTasks=function(){var e=n.getBasicUpdateOptions();vi(n.props.status._id,e,!0).subscribe(),n.batchUpdateGta("deleted tasks"),n.closePopup()},n.onConfirmUpdateStatus=function(){var e=n.props,t=e.status,r=e.statuses,a=n.state,o=a.updatedStatusKind,i=a.checkedStatusIds;ki(t,r,o,i).subscribe(),n.closePopup()},n.onUpdateExecutor=function(e){var t=e[0]?e[0]:null,r=l.a({},n.getBasicUpdateOptions(),{_executorId:t});yi(n.props.status._id,r).subscribe(),n.batchUpdateGta("edited executors"),n.closePopup()},n.onUpdateDeadline=function(e){var t=e?e.toISOString():null,r=l.a({},n.getBasicUpdateOptions(),{dueDate:t});bi(n.props.status._id,r).subscribe(),n.batchUpdateGta("edited deadline"),n.closePopup()},n.setDeleteTitle=function(e){n.setState({deleteMenuTitle:e})},n.onUpdateStatusKind=function(e){n.setState({updatedStatusKind:e})},n.onUpdateCheckedStatusIds=function(e){n.setState({checkedStatusIds:e})},n.onClickExport=function(){n.closePopup(),n.setState(function(e){return{exportModalOpened:!e.exportModalOpened}})},n.onExportModalVisibleChange=function(e){n.setState({exportModalOpened:e})},n.state={deleteMenuTitle:"",updatedStatusKind:t.status.kind,checkedStatusIds:n.getCheckedIds(t),exportModalOpened:!1},n}return l.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({updatedStatusKind:e.status.kind,checkedStatusIds:this.getCheckedIds(e)})},t.prototype.getCheckedIds=function(e){var t=e.status,n=e.statuses,r=[];return n.forEach(function(e){-1===e.rejectStatusIds.indexOf(t._id)&&r.push(e._id)}),r},t.prototype.batchUpdateGta=function(e){co.gta.event({type:"task flow",action:e,control:"column menu",segment:"Batch Operation"})},t.prototype.getBasicUpdateOptions=function(){return this.props.sprintId?{_sprintId:this.props.sprintId}:this.props.tasklistId?{_tasklistId:this.props.tasklistId,_scenariofieldconfigIds:this.props.scenarioFieldIds}:{}},t.prototype.renderDeleteMenu=function(){var e=this.props.statuses,t=e.filter(function(e){return"start"===e.kind}).length,n=e.filter(function(e){return"end"===e.kind}).length;return u.createElement(ya.PopupMenuView,{className:"popup-menu popup-menu-subview",index:Si.DeletePage,title:this.state.deleteMenuTitle},u.createElement(oi.c,{taskflowStatus:this.props.status,startStatusCount:t,endStatusCount:n,onConfirm:this.closePopup,setDeleteTitle:this.setDeleteTitle,gtaHandler:this.gtaHandler}))},t.prototype.renderAddStatusMenu=function(){var e=this.props.status;return u.createElement(ya.PopupMenuView,{className:"popup-menu popup-menu-subview",index:Si.AddStatusPage,title:c.get("project.settings.taskflow.config.add.status")},u.createElement(oi.a,{taskflowId:e._taskflowId,prevStatusId:e._id,onSuccess:this.onAddStatusSuccess,gtaHandler:this.gtaHandler}))},t.prototype.renderTransformMenu=function(){return u.createElement(ya.PopupMenuView,{className:"popup-menu",index:Si.TransformPage,title:c.get("kanban.head.status.menu.transform.title")},u.createElement(ui,{statuses:this.props.statuses,status:this.props.status,updatedStatusKind:this.state.updatedStatusKind,checkedStatusIds:this.state.checkedStatusIds,onUpdateStatusKind:this.onUpdateStatusKind,onUpdateCheckedStatusIds:this.onUpdateCheckedStatusIds,onConfirmUpdateStatus:this.onConfirmUpdateStatus,goToConfirmPage:this.goToConfirmPage}))},t.prototype.renderEditMenu=function(){return u.createElement(ya.PopupMenuView,{className:"popup-menu popup-menu-subview",index:Si.EditPage,title:c.get("project.settings.taskflow.config.edit.status.name")},u.createElement(oi.e,{taskflowStatus:this.props.status,onSuccess:this.closePopup,gtaHandler:this.gtaHandler}))},t.prototype.renderExecutorMenu=function(){return u.createElement(ya.PopupMenuView,{className:"popup-menu popup-menu-subview",index:Si.ExecutorPage,title:c.get("kanban.head.status.menu.executor.title")},u.createElement(Uo,{projectId:this.props.projectId,onUpdateExecutor:this.onUpdateExecutor}))},t.prototype.renderDeadlineMenu=function(){return u.createElement(ya.PopupMenuView,{className:"popup-menu",index:Si.DeadlinePage,title:c.get("kanban.head.status.menu.deadline.title")},u.createElement(Ho,{tasks:this.props.tasks,onUpdateDeadline:this.onUpdateDeadline}))},t.prototype.renderArchiveTasksMenu=function(){return u.createElement(ya.PopupMenuView,{className:"popup-menu popup-menu-subview",index:Si.ArchiveTasksPage,title:c.get("archive")},u.createElement(gi,{onArchiveTasks:this.onArchiveTasks}))},t.prototype.renderConfirmTransformMenu=function(){return u.createElement(ya.PopupMenuView,{className:"popup-menu popup-menu-subview",index:Si.ConfirmPage,title:c.get("kanban.head.status.menu.transform.title")},u.createElement(fi,{currentKind:this.props.status.kind,onConfirmUpdateStatus:this.onConfirmUpdateStatus}))},t.prototype.renderSeparator=function(){return u.createElement("div",{className:Ci.separator},u.createElement(ya.Separator,null))},t.prototype.renderExportModal=function(){var e="(_taskflowstatusId = "+this.props.status._id+")";return u.createElement(Zo.a,{projectId:this.props.projectId,extraTql:e,opened:this.state.exportModalOpened,onVisibleChange:this.onExportModalVisibleChange})},t.prototype.renderBatchUpdateExecutor=function(){return u.createElement(ya.PopupMenuLink,{goto:Si.ExecutorPage},u.createElement(hi,{text:c.get("kanban.head.status.menu.transform.executor.menu"),iconName:"user",onClick:this.goToExecutorView}))},t.prototype.renderBatchUpdateDealine=function(){return u.createElement(ya.PopupMenuLink,{goto:Si.DeadlinePage},u.createElement(hi,{text:c.get("kanban.head.status.menu.deadline.menu"),iconName:"end-date",onClick:this.goToDeadlineView}))},t.prototype.renderBatchArchive=function(){return u.createElement(ya.PopupMenuLink,{goto:Si.ArchiveTasksPage},u.createElement(hi,{text:c.get("kanban.head.status.menu.transform.archive.tasks.title"),iconName:"trash",onClick:this.goToArchiveTasksView}))},t.prototype.renderExportTasksMenu=function(){return u.createElement(hi,{text:c.get("kanban.head.status.menu.export.tasks.title"),iconName:"move-task",onClick:this.onClickExport})},t.prototype.renderTasksActions=function(){var e=this.props.canBatchUpdate;return u.createElement(u.Fragment,null,this.renderSeparator(),e&&this.renderBatchUpdateExecutor(),e&&this.renderBatchUpdateDealine(),this.renderExportTasksMenu(),e&&this.renderBatchArchive())},t.prototype.renderAddStatusLink=function(){return u.createElement(ya.PopupMenuLink,{goto:Si.AddStatusPage},u.createElement(oi.b,{onClick:this.goToAddStatusView}))},t.prototype.renderMainMenu=function(){var e=this.props.statuses.length<oi.g;return u.createElement(ya.PopupMenuView,{className:"popup-menu",index:Si.MainPage,title:c.get("project.settings.taskflow.popup.menu.title")},u.createElement(ya.PopupMenuLink,{goto:Si.EditPage},u.createElement(oi.f,{onClick:this.goToEditStatusView})),u.createElement(ya.PopupMenuLink,{goto:Si.TransformPage},u.createElement(hi,{iconName:"transform-status",text:c.get("kanban.head.status.menu.transform.title"),onClick:this.goToTransformView})),e&&this.renderAddStatusLink(),this.renderTasksActions(),this.renderSeparator(),u.createElement(ya.PopupMenuLink,{goto:Si.DeletePage},u.createElement(oi.d,{onClick:this.goToDeleteView})))},t.prototype.render=function(){var e=this.props.hasPermission;if(!(void 0===e||e))return null;var t=this.props.canBatchUpdate,n=u.createElement("div",{className:wi.handler,onClick:this.onClickTrigger},u.createElement(ya.IconButton,{name:"more",color:"gray"}));return u.createElement(u.Fragment,null,u.createElement(ya.PopupMenu,{ref:this.setPopupRef,className:Ci["kanban-status-popup-menu"],main:Si.MainPage,trigger:n,titleCls:"popup-title",onClose:this.onClosePopup},this.renderMainMenu(),this.renderEditMenu(),this.renderTransformMenu(),this.renderAddStatusMenu(),t&&this.renderExecutorMenu(),t&&this.renderDeadlineMenu(),t&&this.renderArchiveTasksMenu(),this.renderDeleteMenu(),this.renderConfirmTransformMenu()),this.renderExportModal())},t}(u.PureComponent);n("SgEj5hX1");var Ti=n("PzkW/4fU"),Ei=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isStageFlowEnabled=function(){return t.props.panesData.some(function(e){return!!e.isLocked})},t}return l.d(t,e),t.prototype.renderStatusMenu=function(){var e=this.props,t=e.tasks,n=e.panesData,r=e.pane,a=e.tasklist,o=e.customViewId,i=e.project,s=n,l=s.find(function(e){return e._id===r.id}),c=a?a._id:void 0,p=!Object(ao.isAppEnabled)(i,"tasklist")&&o===oo.allTasksView._id&&!!a,u=this.props.isSingleLane&&a&&!this.props.hasFilter&&(!o||p);return d.a.createElement(Ii,{canBatchUpdate:!!u,statuses:s,status:l,tasks:t,hasPermission:this.props.isAdmin,projectId:this.props.project._id,sprintId:this.props.sprintId,tasklistId:c,scenarioFieldIds:this.props.scenarioFieldIds||[]})},t.prototype.renderStageCell=function(){var e=this.props,t=e.onLockStages,n=e.panesData,r=e.project,a=e.tasklist,o=e.paneType,i=e.pane,s=e.customViewId,l=!Object(ao.isAppEnabled)(r,"tasklist")&&s===oo.allTasksView._id&&!!a,c=Object($a.getRoleScopeByProjId)(r._id)>0&&this.props.isSingleLane&&!!a&&!this.props.hasFilter&&(!s||l);return d.a.createElement(ai,{canBatchUpdate:!!c,project:r,tasklist:a,paneId:i.id,paneTitle:i.title,tasks:this.props.tasks,stages:n,paneType:o,onLockStages:t})},t.prototype.renderMenu=function(){var e;switch(this.props.paneType){case Ca.a.AxisType.taskflowStatus:case Ca.a.AxisType.scenarioConfigStatus:e=this.renderStatusMenu();break;case Ca.a.AxisType.stage:case Ca.a.AxisType.priority:case Ca.a.AxisType.scenarioConfig:e=this.renderStageCell();break;default:e=null}return e},t.prototype.renderStageFlowIcon=function(){var e=this.props,t=e.paneIndex===e.panesData.length-1;return[this.props.paneType===Ca.a.AxisType.stage,this.isStageFlowEnabled(),!t].every(function(e){return e})&&d.a.createElement(ya.Icon,{name:"chevron-right",className:Ti["stage-flow"]})},t.prototype.renderTaskAmount=function(){var e=this.props,t=e.tasks,n=void 0===t?[]:t,r=e.taskCount||n.length,a=Ti["title-amount"];return!!r&&d.a.createElement("span",{className:a},r)},t.prototype.renderTitleContent=function(){return d.a.createElement(d.a.Fragment,null,d.a.createElement("span",{className:Ti["title-name"]},this.props.pane.title),this.renderTaskAmount(),this.renderStageFlowIcon())},t.prototype.renderTitle=function(){if(this.props.dragHandleProps){var e=m()(Ti.title,{"is-draggable":this.props.isDraggable});return d.a.createElement("div",l.a({className:e},this.props.dragHandleProps),this.renderTitleContent())}return d.a.createElement("div",{className:Ti.title},this.renderTitleContent())},t.prototype.render=function(){return d.a.createElement(lo,{key:this.props.pane.id},d.a.createElement("div",{className:Ti["menu-wrapper"]},this.renderTitle(),this.renderMenu()))},t}(d.a.PureComponent);n("v7QLi0cz");var xi=function(e){function t(t){var n=e.call(this,t)||this;return n.style=n.getStyle(),n}return l.d(t,e),t.prototype.getStyle=function(){var e=this.props.isFullScreen?"calc(100% - "+io.KANBAN_HEAD_CELL_HEIGHT+"px)":null;return e?{width:io.KANBAN_UNIT_WIDTH,height:e}:{width:io.KANBAN_UNIT_WIDTH}},t.prototype.render=function(){return d.a.createElement("div",{className:"kanban-bucket",style:this.style},this.props.children)},t}(d.a.PureComponent),Mi=function(e){return d.a.createElement("div",{className:"kanban-lane"},e.children)},_i=function(e){var t=e.placeholder,n=void 0===t?"":t;return d.a.createElement("div",{className:"kanban-lane-empty-list"},n)},Di=function(e){function t(t){var n=e.call(this,t)||this;return n.setBucketRef=function(e){n.bucketRef=e},n.onLoadTasks=function(e){if("function"==typeof n.props.onLoadBucketTasks){var t=(e.paneIndex||0)+1>n.props.initLoadedPaneAmount;n.props.onLoadBucketTasks(l.a({},e,{noDelay:t}),function(e,t,r,a){n.bucketLoaded({invisibleCount:e,totalCount:t,shouldManuallyTrigger:r,loadingEnded:a})})}},n.state={},n}return l.d(t,e),t.prototype.shouldComponentUpdate=function(e,t){return this.state!==t||(!Object(ro.a)(e,this.props,["children","pane","lane","tasks"])||(!Na.a.isEqual(this.props.lane,e.lane)||!Na.a.isEqual(this.props.pane,e.pane)||!(n=e.tasks,r=this.props.tasks,n.length===r.length&&n.every(function(e,t){return e===r[t]}))));var n,r},t.prototype.componentDidUpdate=function(e){this.props.bucketKeyPrefix&&e.bucketKeyPrefix!==this.props.bucketKeyPrefix&&this.bucketRef&&this.bucketRef.loadTasks()},t.prototype.bucketLoaded=function(e){this.setState(l.a({},e))},t.prototype.renderBucket=function(){var e=this.props,t=e.lane,n=e.pane,r=e.tasks,a=e.scenarios,o=e.onLoadBucketTasks,i=Ca.d.getCombinedAxisId([t.id,n.id]),s=!!this.props.isDefaultBucket&&this.props.isDefaultBucket({id:i,laneId:t.id,paneId:n.id},{scenarios:a}),c=o?this.state:{},p=this.props.onLoadBucketTasks&&this.onLoadTasks;return d.a.createElement(xi,{key:n.id,isFullScreen:!0},d.a.createElement(no,l.a({key:this.props.bucketKeyPrefix+"_"+n.id,ref:this.setBucketRef,bucketId:i,autoLoad:this.props.autoLoad,hasMore:this.props.hasMore,cards:r||[],laneId:t.id,paneId:n.id,paneType:this.props.paneType,isDragging:this.props.isDragging,isSingleLane:this.props.isSingleLane,canUpdateTaskPos:this.props.canUpdateTaskPos,sortMethod:this.props.sortMethod,extendDroppableCond:this.props.extendDroppableCond,onLoadTasks:p,isDefaultBucket:s,paneIndex:this.props.paneIndex},c),this.props.children))},t.prototype.renderHead=function(e){return d.a.createElement(Ei,{dragHandleProps:e,isDraggable:this.isDraggable,isAdmin:this.props.isAdmin,isSingleLane:this.props.isSingleLane,hasFilter:this.props.hasFilter,customViewId:this.props.customViewId,pane:this.props.pane,paneIndex:this.props.paneIndex,panesData:this.props.panesData,paneType:this.props.paneType,project:this.props.project,tasklist:this.props.tasklist,tasks:this.props.tasks,taskCount:this.state.totalCount,sprintId:this.props.sprintId,scenarioFieldIds:this.props.scenarioFieldIds,onLockStages:this.props.onLockStages})},t.prototype.renderContent=function(e,t){var n=m()("kanban-single-list-contents",{"is-dragging":t.isDragging});return d.a.createElement("div",l.a({className:this.props.className,ref:e.innerRef},e.draggableProps,{style:za(t,e.draggableProps)}),d.a.createElement("div",{className:n},this.renderHead(e.dragHandleProps),this.renderBucket()))},t.prototype.render=function(){var e=this,t=this.props,n=t.paneType,r=t.tasklist,a=t.isAdmin,o=!!r&&Ea.getTasklistPermission(r).putStageSort;return this.isDraggable=[n===Ca.a.AxisType.stage&&o,Object(Za.isStatusPaneType)(n)&&a].some(function(e){return e}),d.a.createElement(ba,{draggableId:this.props.pane.id,index:this.props.paneIndex,type:"LIST",isDragDisabled:!this.isDraggable},function(t,n){return e.renderContent(t,n)})},t}(d.a.Component);n("rGIRGV8z");var Oi=function(e){function t(t){var n=e.call(this,t)||this;return n.classNamePrefix="kanban-single-lane-body",n.style={padding:"0 "+io.KANBAN_PADDING+"px"},n}return l.d(t,e),t.prototype.renderContents=function(e,t){var n=this.classNamePrefix+"-wrapper";return d.a.createElement("div",l.a({className:n,style:this.style,ref:e.innerRef},e.droppableProps),this.props.children)},t.prototype.renderDroppable=function(){var e=this;return d.a.createElement(Ar,{type:"LIST",droppableId:"DROPPABLE_LIST",direction:"horizontal"},function(t,n){return e.renderContents(t,n)})},t.prototype.render=function(){return d.a.createElement("div",{className:this.classNamePrefix},this.renderDroppable())},t}(d.a.PureComponent),Pi=n("D4LzPOFJ"),Ni=function(e,t,n,r,a){var o=e.destination,i=e.draggableId,s=e.type;if(o){if("LIST"===s&&Ca.a.AxisType.stage===t){var l=Ai(e,n);if(!l)return;return a.localUpdatePaneOrders(l)}if("LIST"===s&&Object(Za.isStatusPaneType)(t)){var c=Li(e,n);if(!c)return;return a.localUpdatePaneOrders(c)}var p=qa(o.droppableId),u=qa(e.source.droppableId),d=Ca.d.splitCombinedAxisId(p)[1],f=Ca.d.splitCombinedAxisId(u)[1],h=i;if(t===Ca.a.AxisType.stage){if(!(m=Bi(e,u,p,d,r)))return;return a.localUpdateTask(h,m)}if(Object(Za.isStatusPaneType)(t)){var m;if(!(m=Gi(e,n,u,p,f,d,r)))return;return a.localUpdateTask(h,m)}if(t===Ca.a.AxisType.priority){if(d===f)return;var g=Vi(h,d);return a.localUpdateTask(h,{priority:g})}if(t===Ca.a.AxisType.scenarioConfig){if(f===d)return;var v=Ri(h,d);return a.localUpdateTask(h,{_scenariofieldconfigId:v})}}},ji=function(e,t,n){if(t!==n){var r=Array.from(e),a=l.f(r.splice(t,1),1)[0];return r.splice(n,0,a),r}},Ai=function(e,t){var n=t,r=e.source.index,a=e.destination.index,o=ji(n,r,a),i=n[0]?n[0]._tasklistId:void 0;if(o&&i){var s=o.map(function(e){return e._id});return po.default.updateTasklistStageIds(i,{stageIds:s}).subscribe(),Object(Pi.e)(),s}},Li=function(e,t){var n=e.draggableId,r=t,a=e.source.index,o=e.destination.index,i=ji(r,a,o);if(i){var s=i[o+1],l=s?s._id:null,c=i.map(function(e){return e._id});return po.default.updateTaskflowStatusPos(n,{_nextId:l}).subscribe(),Object(Pi.f)(),c}},Fi=function(e,t,n,r){var a=e.source.index,o=e.destination.index,i=r.get(n)||[],s=e.destination.droppableId;return s.indexOf("EMPTY_AREA")>-1?Ja(i):t!==n||a!==o?!!s.match(Wa())?Ja(i):Ja(i,{sourceBucketId:t,targetBucketId:n,sourceIndex:a,targetIndex:o}):void 0},Bi=function(e,t,n,r,a){var o=e.draggableId,i=r,s=Fi(e,t,n,a);if(void 0!==s){var l={pos:s,_stageId:i},c=t===n?"list":"column";return Object(Pi.i)(c),zo.store.dispatch(io.KanbanModule.actions.updateTaskMove({taskId:o,changes:l})),l}},Gi=function(e,t,n,r,a,o,i){var s=e.draggableId,l=a,c=o,u=t.find(function(e){return e._id===c});if(u)if(-1===u.rejectStatusIds.indexOf(l)){var d=Fi(e,n,r,i);if(void 0!==d)return Object(Pi.j)(),zo.store.dispatch(io.KanbanModule.actions.updateTaskStatus({taskId:s,taskflowStatusId:c,pos:d,inSameTaskflowStatus:n===r})),{pos:d,isDone:"end"===u.kind,_taskflowstatusId:c}}else ya.Toast.error(p.a.get("kanban.reject.update.status"))},Vi=function(e,t){var n=0;return"priority_2"===t&&(n=2),"priority_1"===t&&(n=1),Object(Pi.h)(),zo.store.dispatch(io.KanbanModule.actions.updateTask({taskId:e,changes:{priority:n}})),n},Ri=function(e,t){var n=t;return Object(Pi.g)(),zo.store.dispatch(io.KanbanModule.actions.updateTaskScenarioFieldConfig({taskId:e,scenarioFieldConfigId:n})),n},Ui=n("HDK4lIiT"),Wi=function(){function e(e){this.scroll$=new Ga.Subject,this.scrollTarget$=new Ui.ReplaySubject(1),this.scrollDirection$=new ja.BehaviorSubject(e)}return e.prototype.destroy=function(){this.scroll$.complete(),this.scrollDirection$.complete(),this.scrollTarget$.complete()},e}(),qi=n("JcXuB+uV");n("8iClMbHo");var Hi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.destroy$=new Ga.Subject,r.scrollDirection="x",r.scrollLeft=0,r.scrollTop=0,r.setRef=function(e){r.scrollManager.scrollTarget$.next(e),r.ref=e},r.scrollManager=new Wi(r.scrollDirection),r}return l.d(t,e),t.prototype.getChildContext=function(){return{scrollManager:this.scrollManager}},t.prototype.componentDidMount=function(){var e=this;if(this.ref){var t=this.scrollManager;f.Observable.fromEvent(this.ref,"scroll").takeUntil(this.destroy$).subscribe(function(n){var r=n.currentTarget,a=r.scrollLeft,o=r.scrollTop,i=[];a!==e.scrollLeft&&i.push("x"),o!==e.scrollTop&&i.push("y");var s=i.join("");s!==e.scrollDirection&&(e.scrollDirection=s,t.scrollDirection$.next(s)),e.scrollLeft=a,e.scrollTop=o,t.scroll$.next()})}},t.prototype.componentWillUnmount=function(){this.destroy$.next(),this.destroy$.complete(),this.scrollManager.destroy()},t.prototype.render=function(){var e=qi.f+" kanban-scroll";return u.createElement("div",{className:e,ref:this.setRef},u.createElement("div",{className:"kanban-inner-scroll"},this.props.children))},t.childContextTypes={scrollManager:q.instanceOf(Wi).isRequired},t}(u.PureComponent),zi=function(){return function(e){this.currentIndex$=new ja.BehaviorSubject(e)}}();n("R0mhd/wd");var Ki=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.manager=new zi(0),r}return l.d(t,e),t.prototype.getChildContext=function(){return{stickyManager:this.manager}},t.prototype.render=function(){var e,t=this.props.className,n=m()("kanban-sticky",((e={})[""+t]=!!t,e));return u.createElement("div",{className:n},u.Children.only(this.props.children))},t.childContextTypes={stickyManager:q.instanceOf(zi).isRequired},t}(u.PureComponent),Ji=function(e,t){var n,r;if(!e||!t)return!1;var a=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(t);if(a.length!==o.length)return!1;try{for(var i=l.i(a),s=i.next();!s.done;s=i.next()){var c=s.value;if(e[c]!==t[c])return!1}}catch(p){n={error:p}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!0};n("1F4EpJQn");var $i=function(e){var t=m()("kanban-body",{"is-sticky":e.sticky});return u.createElement("div",{className:t},e.children)};$i.defaultProps={sticky:!0},n("rzKXt0Vr");var Xi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scrollSub$=null,r.saveRootRef=function(e){r.rootRef=e},r}return l.d(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.index,n=qi.d;if(void 0!==t){var r=this.context,a=r.scrollManager,o=r.stickyManager;this.scrollSub$=f.Observable.combineLatest(a.scroll$,a.scrollTarget$).filter(function(t){var r=l.f(t,2);r[0];if(!r[1]||!e.rootRef)return!1;var a=e.rootRef.getBoundingClientRect();return a.top<=n&&a.bottom>=n}).do(function(){return o.currentIndex$.next(t)}).subscribe()}},t.prototype.componentWillUnmount=function(){this.scrollSub$&&this.scrollSub$.unsubscribe()},t.prototype.render=function(){return u.createElement("div",{className:"kanban-board",ref:this.saveRootRef},this.props.children)},t.contextTypes={scrollManager:q.instanceOf(Wi).isRequired,stickyManager:q.instanceOf(zi).isRequired},t}(u.PureComponent);n("20bRKFp+");var Yi=Va(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.classNamePrefix="kanban-board-body",t}return l.d(t,e),t.prototype.getWidth=function(){return this.props.paneLength*io.KANBAN_UNIT_WIDTH+2*io.KANBAN_PADDING},t.prototype.renderWrapper=function(){var e=m()(this.classNamePrefix+"-wrapper",this.props.isCollapsed?"is-collapsed":null),t={width:this.getWidth()+"px",padding:"0 "+io.KANBAN_PADDING+"px"};return u.createElement("div",{className:e,style:t},this.props.children)},t.prototype.renderFooter=function(){var e={width:this.getWidth()+"px"};return u.createElement("div",{className:this.classNamePrefix+"-footer",style:e})},t.prototype.render=function(){return u.createElement("div",{className:this.classNamePrefix},this.renderWrapper(),this.renderFooter())},t.displayName="BoardBody",t}(u.PureComponent));n("H1tH0km5");var Qi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.classNamePrefix="kanban-board-head",t}return l.d(t,e),t.prototype.renderWrapper=function(){var e={width:this.props.paneLength*io.KANBAN_UNIT_WIDTH+2*io.KANBAN_PADDING,padding:"0 "+io.KANBAN_PADDING+"px"};return u.createElement("div",{className:this.classNamePrefix+"-wrapper",style:e},this.props.children)},t.prototype.render=function(){return u.createElement("div",{className:this.classNamePrefix},this.renderWrapper())},t.displayName="BoardHead",t}(u.PureComponent);n("VYXBlUOv");var Zi=Va(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.classNamePrefix="kanban-board-head-span",t.handleClick=function(){t.props.clickable&&t.props.onClick&&t.props.onClick(t.props.laneId)},t.handleToggle=function(){t.props.onToggleCollapse&&t.props.onToggleCollapse(t.props.laneId)},t}return l.d(t,e),t.prototype.renderTitle=function(){if("string"==typeof this.props.title){var e=m()(this.classNamePrefix+"-title",this.props.clickable?"is-clickable":null);return u.createElement("a",{className:e,onClick:this.handleClick},this.props.title)}return this.props.title||null},t.prototype.render=function(){return u.createElement("span",{className:""+this.classNamePrefix},u.createElement(ya.IconButton,{color:"gray",name:this.props.isCollapsed?"triangle-right":"triangle-down",onClick:this.handleToggle}),this.renderTitle())},t.displayName="BoardHeadSpan",t.defaultProps={clickable:!1},t}(u.PureComponent)),es=n("/SNw8Jel");n("SgEj5hX1");var ts=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.renderHiddenStaticPane=function(){return d.a.createElement("div",{className:"kanban-head-invisible"},this.props.staticPane)},t.prototype.render=function(){var e=this.props,t=e.staticPane,n=e.showStaticPane;return t?t&&n?d.a.createElement(lo,{isStatic:!0},t):this.renderHiddenStaticPane():null},t}(d.a.PureComponent);n("SgEj5hX1");var ns=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.setRef=function(e){r.root=e},r.style={padding:"0 "+qi.e+"px"},r.destroy$=new Ga.Subject,r.getCalculatedStyle=function(e,t,n){return r.props.gpuAcceleration?r.getGpuAccelerationStyle(e,t,n):r.getPlainStyle(e,t,n)},r.getPlainStyle=function(e,t,n){switch(e){case"y":case"xy":return{position:"fixed",left:(r.props.withLeftPanelFolded?0:es.c)-t+"px"};case"x":default:return{position:"absolute",top:n+"px"}}},r.getGpuAccelerationStyle=function(e,t,n){return{transform:"translate(0px, "+n+"px)"}},r.getStyle=function(){return r.props.sticky?r.state.style:{}},r.state={style:r.getCalculatedStyle("x",0,0)},r}return l.d(t,e),t.prototype.componentDidMount=function(){var e=this;f.Observable.combineLatest(this.context.scrollManager.scroll$,this.context.scrollManager.scrollDirection$,this.context.scrollManager.scrollTarget$).filter(function(){return!!e.props.sticky}).takeUntil(this.destroy$).map(function(t){var n=l.f(t,3),r=n[1],a=n[2];if(!a)return e.getCalculatedStyle(r,0,0);var o=a.scrollLeft,i=a.scrollTop;return e.getCalculatedStyle(r,o,i)}).distinctUntilChanged(function(e,t){return Ji(e,t)}).subscribe(function(t){if(e.props.gpuAcceleration){if(e.root)for(var n in t)e.root.style[n]=t[n]}else e.setState({style:t})})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){if(this.props.sticky&&this.props.withLeftPanelFolded!==e.withLeftPanelFolded){var t=this.state.style,n=Object(es.d)(""+t.left,es.c,!e.withLeftPanelFolded);n&&this.setState({style:l.a({},t,{left:n})})}},t.prototype.componentWillUnmount=function(){this.destroy$.next(),this.destroy$.complete()},t.prototype.renderHeads=function(){var e=this;return this.props.paneOrders.map(function(t,n){var r=e.props.panes.find(function(e){return e.id===t});return r?u.createElement(Ei,{key:r.id,isAdmin:e.props.isAdmin,customViewId:e.props.customViewId,hasFilter:e.props.hasFilter,pane:r,isSingleLane:e.props.isSingleLane,paneIndex:n,panesData:e.props.panesData,paneType:e.props.paneType,project:e.props.project,tasklist:e.props.tasklist,tasks:[],sprintId:e.props.sprintId}):null})},t.prototype.renderStaticHead=function(){return u.createElement(ts,{showStaticPane:this.props.showStaticPane,staticPane:this.props.staticPane})},t.prototype.render=function(){var e=m()("kanban-head",this.props.gpuAcceleration?"is-gpu-acceleration":null,this.props.sticky?"is-sticky":null);return u.createElement("div",{className:e,ref:this.setRef,style:this.getStyle()},u.createElement("div",{className:"kanban-head-list",style:this.style},this.renderHeads(),this.renderStaticHead()))},t.defaultProps={gpuAcceleration:!0,sticky:!0},t.contextTypes={scrollManager:q.instanceOf(Wi).isRequired},t}(u.PureComponent),rs=(n("jGDyp0N/"),function(e){function t(t,n){var r=e.call(this,t,n)||this;r.saveRootRef=function(e){r.refRoot=e},r.getPlainStyle=function(e,t,n){switch(e){case"y":case"xy":return{position:"fixed",left:(r.props.withLeftPanelFolded?0:es.c)-t+"px",top:io.KANBAN_MULTI_LANES_BODY_TOP};case"x":default:return{position:"absolute",top:n+"px"}}};var a=n.stickyManager.currentIndex$.getValue();return r.state={stickyIndex:a,style:r.getPlainStyle("x",0,io.KANBAN_MULTI_LANES_BODY_TOP),isCeiling:!0},r}return l.d(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.context,n=t.scrollManager,r=t.stickyManager,a=t.collapseManager;this.stickyIndex$=r.currentIndex$.distinctUntilChanged(function(e,t){return e===t}).subscribe(function(t){return e.setState({stickyIndex:t})}),this.scrollDirection$=f.Observable.combineLatest(n.scroll$,n.scrollDirection$,n.scrollTarget$).map(function(t){var n=l.f(t,3),r=n[1],a=n[2],o=a&&0===a.scrollTop;return e.setState({isCeiling:!!o}),{scrollDirection:r,scrollTarget:a}}).map(function(t){var n=t.scrollDirection,r=t.scrollTarget;if(!r)return e.getPlainStyle(n,0,0);var a=r.scrollLeft,o=r.scrollTop;return e.getPlainStyle(n,a,o)}).distinctUntilChanged(function(e,t){return Ji(e,t)}).subscribe(function(t){e.setState({style:t})}),this.collapseManager$=a.collapsedIds$.subscribe(function(){return n.scroll$.next()})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){if(this.props.withLeftPanelFolded!==e.withLeftPanelFolded){var t=this.state.style,n=Object(es.d)(""+t.left,es.c,!e.withLeftPanelFolded);n&&this.setState({style:l.a({},t,{left:n})})}},t.prototype.componentWillUnmount=function(){this.stickyIndex$.unsubscribe(),this.scrollDirection$.unsubscribe(),this.collapseManager$.unsubscribe()},t.prototype.render=function(){var e,t=this.props,n=t.className,r=t.update,a=this.state,o=a.stickyIndex,i=a.isCeiling,s=m()("kanban-sticky-item",((e={})[""+n]=!!n,e.isCeiling=i,e)),l=this.state.style;return u.createElement("div",{className:s,ref:this.saveRootRef,style:l},r(o))},t.contextTypes={stickyManager:q.instanceOf(zi).isRequired,scrollManager:q.instanceOf(Wi).isRequired,collapseManager:q.instanceOf(Aa).isRequired},t}(u.PureComponent)),as=n("WE63fzOe"),os=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setDropdownRef=function(e){t.dropdownRef=e},t.onAddStatusSuccess=function(){Object(Pi.c)("status"),t.dropdownRef.close()},t.onOpen=function(){Object(Pi.a)("status")},t}return l.d(t,e),t.prototype.gtaHandler=function(e){co.gta.event({action:e,segment:"Workflow Configuration",control:"Flow Menu",type:"taskflow"})},t.prototype.renderAddStatus=function(){var e=this.props.statuses;if(!e||e.length<1)return null;var t=this.props,n=t.taskflowId,r=t.lastTaskflowStatusId;return d.a.createElement(oi.a,{taskflowId:n,prevStatusId:r,onSuccess:this.onAddStatusSuccess,gtaHandler:this.gtaHandler})},t.prototype.renderLimitWarning=function(){var e=p.a.get("project.settings.taskflow.config.status.limit",oi.g),t=as["status-menu-trigger"]+" "+as["limit-tip"];return d.a.createElement("div",{className:t},d.a.createElement(ya.Icon,{name:"info"}),e)},t.prototype.renderAddStatusDropdown=function(){return d.a.createElement(ya.TitledDropdown,{ref:this.setDropdownRef,content:this.renderAddStatus(),title:p.a.get("project.settings.taskflow.config.add.status"),titleCls:as["status-menu-title"],onOpen:this.onOpen,closeable:!0,placement:"bottom"},d.a.createElement("div",{className:as["status-menu-trigger"]},d.a.createElement(ya.TextButton,null,d.a.createElement(ya.Icon,{name:"plus"}),p.a.get("project.settings.taskflow.config.add.status"))))},t.prototype.render=function(){return this.props.taskflowStatusCount>=oi.g?this.renderLimitWarning():this.renderAddStatusDropdown()},t}(d.a.PureComponent),is=n("TtW7bll1"),ss=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setDropdownRef=function(e){t.dropdownRef=e},t.onAddStageSuccess=function(){Object(Pi.c)("stage"),t.dropdownRef.close()},t.onOpen=function(){Object(Pi.a)("stage")},t}return l.d(t,e),t.prototype.renderAddStage=function(){var e=this.props,t=e.tasklistId,n=e.stages,r=n[n.length-1]._id;return d.a.createElement(No,{tasklistId:t,prevStageId:r,onSuccess:this.onAddStageSuccess})},t.prototype.render=function(){var e=m()(is["stages-menu-trigger"]);return this.props.stages.length>=100?d.a.createElement("div",{className:e},p.a.get("stage.count.limited")):d.a.createElement(ya.TitledDropdown,{ref:this.setDropdownRef,content:this.renderAddStage(),title:p.a.get("stage.create.title"),titleCls:is["stages-menu-title"],onOpen:this.onOpen,closeable:!0,placement:"bottom"},d.a.createElement("div",{className:is["stages-menu-trigger"]},d.a.createElement(ya.TextButton,null,d.a.createElement(ya.Icon,{name:"plus"}),p.a.get("stage.create.title"))))},t}(d.a.PureComponent),ls=function(e){var t=e.laneType,n=e.paneType,r=e.sprint,a=e.permissions,o=e.panesData,i=e.pane;if(r&&"complete"===r.status)return!1;if(a&&!0!==a.taskPost)return!1;if(t===Ca.a.AxisType.iterationSprint)return!1;if(n===Ca.a.AxisType.stage){var s=o.find(function(e){return e._id===i.id});if(s&&s.isLocked)return!1}if(Object(Za.isScenarioConfigStatus)(n)||Object(Za.isTaskflowStatus)(n)){var l=o.find(function(e){return e._id===i.id});if(!Object(Ko.isValidUndoneTaskStatusKind)(l.kind))return!1}return!0},cs=function(e){var t=e.scenarioFieldId,n={laneType:e.laneType,paneType:e.paneType,lane:e.lane,pane:e.pane},r=us(n,t);return{_stageId:ps(n),scenarioFieldConfigId:r,_taskflowstatusId:ds(n),priority:fs(n)}},ps=function(e){var t=e.laneType,n=e.paneType,r=e.lane,a=e.pane;return(t===Ca.a.AxisType.stage?r.id:void 0)||(n===Ca.a.AxisType.stage?a.id:void 0)},us=function(e,t){var n=e.paneType,r=e.laneType,a=e.pane,o=e.lane;return r===Ca.a.AxisType.scenarioConfig?o.id||void 0:n===Ca.a.AxisType.scenarioConfig?a.id||void 0:Object(Za.isScenarioConfigStatus)(r)||Object(Za.isScenarioConfigStatus)(n)?t:void 0},ds=function(e){var t=e.paneType,n=e.laneType,r=e.pane,a=e.lane;return(Object(Za.isTaskflowStatus)(n)?a.id:void 0)||(Object(Za.isTaskflowStatus)(t)?r.id:void 0)||(Object(Za.isScenarioConfigStatus)(t)?r.id:void 0)},fs=function(e){var t=e.paneType,n=e.laneType,r=e.pane,a=e.lane;return(n===Ca.a.AxisType.priority?Ea.getPriorityByValue(a.id):void 0)||(t===Ca.a.AxisType.priority?Ea.getPriorityByValue(r.id):void 0)},hs=n("27X4ogYR"),ms=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.saveEl=function(e){t.el=e},t.onSuccess=function(e){var n=Object(Pa.isArray)(e)?e.length>0?e[e.length-1]._id:void 0:e._id;n&&t.props.success&&t.props.success(n)},t}return l.d(t,e),t.prototype.componentDidMount=function(){this.el&&(this.viewRef=new hs({el:this.el,_projectId:this.props._projectId,_tasklistId:this.props._tasklistId,_stageId:this.props._stageId,beforeClose:this.props.beforeClose,priority:this.props.priority,scenarioFieldConfigId:this.props.scenarioFieldConfigId,success:this.onSuccess}),this.viewRef.$el.addClass(this.viewRef.className))},t.prototype.componentWillUnmount=function(){this.viewRef&&this.viewRef.remove()},t.prototype.render=function(){return u.createElement("div",null,u.createElement("div",{ref:this.saveEl}))},t}(u.PureComponent),gs=n("sfyrld5C"),vs=n("X8//+OEP"),bs=function(e){function t(t){var n=e.call(this,t)||this;return n.onCreateTask=function(e){e.stopPropagation(),n.props.smallModeEnabled&&"large"!==n.state.windowModeOfAddTask?n.setState({isCreating:!0}):n.props.onCreateTask(cs(n.props))},n.beforeClose=function(){n.setState({isCreating:!1})},n.onCreateTaskSuccess=function(e){n.props.onCreateTaskSuccess&&n.props.onCreateTaskSuccess(e)},n.state={isCreating:!1,windowModeOfAddTask:t.project.windowModeOfAddTask},n}return l.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.subscription$=gs.updateTaskCreatorMode$.subscribe(function(t){var n=t.windowModeOfAddTask;e.setState(l.a({},e.state,{windowModeOfAddTask:n}))})},t.prototype.componentWillUnmount=function(){this.subscription$&&this.subscription$.unsubscribe()},t.prototype.renderCreator=function(){var e=Object.assign({},{_projectId:this.props.projectId,_tasklistId:this.props.tasklistId,beforeClose:this.beforeClose,success:this.onCreateTaskSuccess},cs(this.props)),t=m()("task-creator-wrapper",vs["task-creator-wrapper"]);return d.a.createElement("div",{className:t},d.a.createElement(ms,l.a({},e)))},t.prototype.renderHandler=function(){var e=m()(vs["task-creator-handler"],"task-creator-handler");return d.a.createElement("div",{className:e,onClick:this.onCreateTask},d.a.createElement(ya.Icon,{name:"plus"}))},t.prototype.render=function(){return this.state.isCreating?this.renderCreator():this.renderHandler()},t.defaultProps={smallModeEnabled:!1},t}(d.a.PureComponent),ys=n("MKFOP9IO"),ks=n("fpIMfP/U");n("bu5Cc5JR");var Ss=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priorities=ks.a,t.onClickPriority=function(e){var n=t.props.trigger.taskId,r={priority:e.number};t.props.updateTask(n,r)},t}return l.d(t,e),t.prototype.renderDropdownContent=function(){var e=this.priorities[this.props.trigger.priority||0];return u.createElement(ys.a,{onClickPriority:this.onClickPriority,priority:e})},t.prototype.render=function(){if(!this.props.trigger)return null;var e=this.props.trigger,t=e.triggerStyle,n=e.opened,r=this.renderDropdownContent();return u.createElement(ya.Dropdown,{content:r,placement:"bottomLeft",opened:n,nested:!0},u.createElement("div",{style:t,className:"priority-trigger"}))},t}(u.PureComponent),Cs=n("OmupbwLD"),ws=n.n(Cs),Is=n("H5U46Bxa"),Ts=n.n(Is);n("Tah8TL2Q");var Es=n("uQSzQ+fH"),xs=[Ca.a.AxisType.noop,Ca.a.AxisType.taskflow],Ms=function(e){function t(t){var n=e.call(this,t)||this;return n.taskCreatorView=null,n.createTaskAxisGroup=[],n.laneIdsWithNoTasks=[],n.laneIdsDefaultCollapsed=[],n.onError=function(e){ya.Toast.error(c.get("error")),Object(Ta.throwError)(e)},n.setRefRoot=function(e){n.refRoot=e},n.remountBuckets=function(){n.setState({bucketKeyPrefix:(new Date).toISOString()})},n.getInitKanbanState=function(e){var t=null,r=!1;switch(e.paneType){case Ca.a.AxisType.stage:case Ca.a.AxisType.priority:case Ca.a.AxisType.scenarioConfig:t="stage",r=!0;break;case Ca.a.AxisType.taskflowStatus:case Ca.a.AxisType.scenarioConfigStatus:t="status",r=e.enableKanbanStaticPaneOfStatus&&n.props.isAdmin;break;default:t=null,r=!1}return{staticPaneType:t,showStaticPane:r}},n.localUpdatePaneOrders=function(e){n.setState({paneOrders:e})},n.localUpdateTask=function(e,t){n.props.actions.localUpdateTask({taskId:e,content:t})},n.onBeforeDragStart=function(){n.props.actions.onBeforeDragStart()},n.onDragStart=function(e){var t=e.source.droppableId;n.setBucketZIndex(t,"2000"),n.setContainerCursor("pointer"),n.setState({isDragging:!0})},n.onDragEnd=function(e){Ni(e,n.props.paneType,n.props.panesData,n.props.cardsMap,{localUpdatePaneOrders:n.localUpdatePaneOrders,localUpdateTask:n.localUpdateTask}),n.props.actions.onDragEnd();var t=e.source.droppableId;n.setBucketZIndex(t,"auto"),n.setContainerCursor("default"),n.setState({isDragging:!1})},n.getExtendDroppableCond=function(e,t){var r=n.props.panesData.find(function(e){return e._id===t});return!r||-1===r.rejectStatusIds.indexOf(e)},n.getScenarioFieldId=function(e){var t=n.props,r=t.scenarioFieldIds,a=t.paneType,o=t.scenarios,i=t.getDefaultScenarioFieldId;return a===Ca.a.AxisType.scenarioConfig?e||o[0]._id:a===Ca.a.AxisType.scenarioConfigStatus?r[0]||o[0]._id:i()},n.onCreateTask=function(e){n.props.getNewTaskSnippet&&(e=n.props.getNewTaskSnippet(e));var t=n.props,r=t.projectId,a=t.tasklistId,o=t.sprintId,i=n.getScenarioFieldId(e.scenarioFieldConfigId),s=e.success,l=Object.assign(e,{_projectId:r,_tasklistId:a,isWorkspace:!0,_sprintId:o,scenarioFieldConfigId:i,success:function(e){s&&s(e),n.props.onCreateTaskSuccess&&n.props.onCreateTaskSuccess()}});n.taskCreatorView&&n.taskCreatorView.remove(),n.taskCreatorView=(new ws.a).open(Ts.a,l),Object(Pi.d)(n.props.paneType),n.props.onCreateTask&&n.props.onCreateTask()},n.onCreateTaskByHotkey=function(){var e=n.props,t=e.scenarios,r=e.laneType,a=e.paneType,o=n.getScenarioFieldId(),i=n.getTaskflowIdFromScenarioFieldId(),s=l.a({scenarios:t,taskflowId:i,laneType:r,paneType:a,scenarioFieldId:o},n.createTaskAxisGroup[0]),c=cs(s);n.onCreateTask(c)},n.updateTask=function(e,t){n.props.actions.updateTask({taskId:e,changes:t}),n.setState({trigger:l.a({},n.state.trigger,{priority:t.priority,opened:!1})})},n.getTaskflowIdFromScenarioFieldId=function(){var e=n.props,t=e.scenarios,r=e.taskflowId,a=n.getScenarioFieldId(),o=t.find(function(e){return e._id===a});return o?o._taskflowId:r},n.handleClickPriority=function(e){var t,r,a=e.target,o=a.dataset,i=o.taskid,s=o.priority,c=o.executorid,p=o.creatorid,u=o.scenarioconfigid,d=n.state.trigger,f=n.props,h=f.scenarios,m=f.project,g=m.role,v=m._id;if(!("string"!=typeof s||d&&i===d.taskId&&d.opened)&&(t=Object(Sa.getFieldConfig)(h,u),!(r=t&&t.scenariofields.find(function(e){return"priority"===e.fieldType}))||Ea.hasPriorityPermission(v,g,c,p,r.allowedRoleIds||null,r.allowedActors||[]))){var b=a.getBoundingClientRect();n.setState({trigger:{triggerStyle:{top:b.bottom,left:b.left},priority:parseInt(s,10),taskId:i,opened:!0}})}else d&&d.opened&&n.setState({trigger:l.a({},d,{opened:!1})})},n.onKanbanResize=function(e){if(n.props.onLoadBucketTasks&&n.props.panes.length){var t=e-16-2*qi.e,r=Object(Ea.getInitLoadedPaneCount)(t),a=Math.max(r,n.state.loadedPaneCount);(n.state.viewportWidth!==t||n.state.loadedPaneCount!==a)&&n.setState({viewportWidth:t,loadedPaneCount:a})}},n.getNextLoadedPaneCount=function(e){var t=Object(Ea.getPaneAmountPerViewport)(n.state.viewportWidth),r=Math.ceil((e-8-qi.e)/qi.g)+t;r>n.state.loadedPaneCount&&n.setState({loadedPaneCount:r})},n.onSingleLandKanbanScroll=function(e){if(n.props.onLoadBucketTasks&&n.props.panes.length){var t=e.target.scrollLeft;n.getNextLoadedPaneCount(t)}},n.state=l.a({sprint:null,paneOrders:t.panes.map(function(e){return e.id}),bucketKeyPrefix:"",isDragging:!1,viewportWidth:null,loadedPaneCount:qi.c},n.getInitKanbanState(t)),n.getProjectPermission=Ea.projectPermissionGetter(),n.subscription=null,n}return l.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.actions.mount({project:this.props.project,smartGroupId:this.props.smartGroupId,smartGroupQuery:this.props.smartGroupQuery,tasklistId:this.props.tasklistId,tasks$:this.props.tasks$,pagedTasks$:this.props.pagedTasks$,organizationId:this.props.organizationId}),this.refRoot&&Es.add({hotkeys:{c:this.onCreateTaskByHotkey},$el:this.refRoot}),this.props.setIsUsingFilter&&this.props.setIsUsingFilter(this.props.isUsingFilter),this.props.setTql&&this.props.setTql(this.props.tql);var t=this.props.sprintId?po.default.getSprint(this.props.sprintId).changes().debounceTime(200).do(function(t){var n=l.f(t,1)[0];e.setState({sprint:n||null})}):f.Observable.empty();this.subscription=t.subscribe()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.paneType!==this.props.paneType&&this.setState(l.a({},this.getInitKanbanState(e))),e.panes!==this.props.panes&&this.setState({paneOrders:e.panes.map(function(e){return e.id})})},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.isUsingFilter,r=t.tql,a=t.sortMethod;n!==e.isUsingFilter&&this.props.setIsUsingFilter&&this.props.setIsUsingFilter(n),r!==e.tql&&this.props.setTql&&this.props.setTql(r),a!==e.sortMethod&&this.remountBuckets()},t.prototype.componentWillUnmount=function(){this.props.actions.unmount(),this.taskCreatorView&&this.taskCreatorView.remove(),this.refRoot&&Es.remove({hotkeys:{c:this.onCreateTaskByHotkey},$el:this.refRoot}),this.subscription&&this.subscription.unsubscribe()},t.prototype.setBucketZIndex=function(e,t){if(this.getIsSingleLane()&&wa.isIE()){var n=Ha({draggingFrom:e});if(n){var r=".kanban-droppable-bucket-cards-"+n,a=this.refRoot&&this.refRoot.querySelector(r);a&&(a.style.zIndex=t)}}},t.prototype.setContainerCursor=function(e){if(function(e){if(wa.isIE())return!1;if(wa.isWindows())return e<=500;return e>500&&e<=1e3}(this.props.tasks.length)){var t="."+qi.f,n=this.refRoot&&this.refRoot.querySelector(t);n&&(n.style.cursor=e)}},t.prototype.getIsSingleLane=function(){var e=this.props.lanes;return 1===e.length&&xs.indexOf(e[0].id)>-1},t.prototype.getPanesLength=function(){return this.state.showStaticPane?this.props.panes.length+1:this.props.panes.length},t.prototype.loopLaneAndPane=function(){var e=this,t=[],n=[],r=this.props.tasks.filter(function(e){return e.isDone});return this.props.lanes.forEach(function(a){if(0===e.props.panes.reduce(function(t,n){var r=Ca.d.getCombinedAxisId([a.id,n.id]);return t+(e.props.cardsMap.get(r)||[]).length},0))return t.push(a.id),void n.push(a.id);r.find(function(e){return e._id===a.id})&&n.push(a.id)}),{laneIdsWithNoTasks:t,laneIdsDefaultCollapsed:n}},t.prototype.getPaneTasks=function(e){var t=this,n={};return this.props.panes.forEach(function(r){var a=Ca.d.getCombinedAxisId([e.id,r.id]),o=t.props.cardsMap.get(a)||[];n[r.id]=o}),n},t.prototype.renderHeads=function(){return u.createElement(ns,{withLeftPanelFolded:this.props.withLeftPanelFolded,customViewId:this.props.customViewId,gpuAcceleration:this.props.gpuAcceleration,panes:this.props.panes,paneOrders:this.state.paneOrders,paneType:this.props.paneType,sticky:this.props.sticky,sprintId:this.props.sprintId,staticPane:this.renderStaticPane(),showStaticPane:this.state.showStaticPane,panesData:this.props.panesData,isAdmin:this.props.isAdmin,project:this.props.project,tasklist:this.props.tasklist,hasFilter:this.props.hasFilter})},t.prototype.renderStaticPane=function(){switch(this.state.staticPaneType){case"status":var e=this.props,t=e.isAdmin,n=e.panesData;if(!t)return null;var r=this.getTaskflowIdFromScenarioFieldId();if(!r||!n.length)return null;var a=n[n.length-1]._id;return u.createElement(os,{statuses:n||[],taskflowId:r,lastTaskflowStatusId:a,taskflowStatusCount:n.length});case"stage":if(this.props.paneType!==Ca.a.AxisType.stage||!this.props.tasklistId)return null;var o=this.props.panesData||[];return!this.getProjectPermission(this.props.project).stagePost||o.some(function(e){return Boolean(e.isLocked)})?null:u.createElement(ss,{tasklistId:this.props.tasklistId,stages:o});default:return null}},t.prototype.renderLanePlaceholder=function(e){var t=this.props.laneType,n="";return t===Ca.a.AxisType.taskflow?n=c.get("kanban.taskflow.no.task"):t===Ca.a.AxisType.iterationSprint&&(n=c.get("kanban.taskflow.no.subtask")),e?this.renderPlaceholder(n):u.createElement(_i,{placeholder:n})},t.prototype.renderTaskCreator=function(e,t){var n=this.props,r=n.scenarios,a=n.laneType,o=n.paneType;if(!this.createTaskAxisGroup.some(function(n){return n.lane.id===e.id&&n.pane.id===t.id}))return null;var i=this.getTaskflowIdFromScenarioFieldId();return u.createElement(bs,{projectId:this.props.projectId,tasklistId:this.props.tasklistId,project:this.props.project,scenarios:r,taskflowId:i,laneType:a,paneType:o,lane:e,pane:t,smallModeEnabled:"stage"===this.state.staticPaneType,onCreateTask:this.onCreateTask})},t.prototype.renderStaticBucket=function(){return this.state.showStaticPane?u.createElement(xi,null):null},t.prototype.renderBucket=function(e,t,n){var r=Ca.d.getCombinedAxisId([e.id,t.id]),a=this.props.cardsMap.get(r)||[],o=this.getProjectPermission(this.props.project).taskPutPos;return u.createElement(xi,{key:t.id,isFullScreen:!!n},u.createElement(no,{key:this.state.bucketKeyPrefix+"_"+t.id,bucketId:r,cards:a,laneId:e.id,paneId:t.id,paneType:this.props.paneType,isSingleLane:this.getIsSingleLane(),canUpdateTaskPos:o,sortMethod:this.props.sortMethod,extendDroppableCond:this.getExtendDroppableCond},this.renderTaskCreator(e,t)))},t.prototype.renderBuckets=function(e){var t=this;return this.laneIdsWithNoTasks.indexOf(e.id)>-1?this.renderLanePlaceholder(!1):this.state.paneOrders.map(function(n){var r=t.props.panes.find(function(e){return e.id===n});return r?t.renderBucket(e,r):null})},t.prototype.renderBoardHeadSpanTitle=function(e,t,n){var r=this.props.scenarios,o={laneId:e.id,title:e.title,isSticky:n};if(t){Object.assign(o,{taskId:t._id,taskflowStatusId:t._taskflowstatusId,taskIsDone:t.isDone});var i=Object(Sa.getFieldConfig)(r,t._scenariofieldconfigId);i&&Object.assign(o,{taskScenarioFieldConfigIcon:i.icon})}return u.createElement(a.Component.BoardHeadSpanConnect,l.a({},o))},t.prototype.renderBoardHead=function(e,t,n){return u.createElement(Qi,{key:e.id,laneId:e.id,paneLength:this.getPanesLength()},u.createElement(Zi,{canToggleCollapse:!0,laneId:e.id,title:this.renderBoardHeadSpanTitle(e,t,n),isSticky:n}))},t.prototype.renderBody=function(){var e=this,t=this.props,n=t.sticky,r=t.lanes,a=t.tasks;return r.map(function(t,r){var o=_s(a,t.id),i=t.id+"-"+r;return u.createElement(Xi,{key:i,index:n?r:void 0},e.renderBoardHead(t,o),u.createElement(Yi,{laneId:t.id,paneLength:e.getPanesLength()},u.createElement(Mi,null,e.renderBuckets(t),e.renderStaticBucket(),0===r&&ka.OrgPortalToProjectAppAPm.component,0===r&&ka.BoardKanbanApm.component)))})},t.prototype.renderPlaceholder=function(e){var t=this.props.withLeftPanelFolded?20:20+es.c,n=m()("kanban-placeholder",{"is-single-lane":this.getIsSingleLane()}),r={left:t+"px",top:qi.d+"px"};return u.createElement("div",{className:n,style:r},u.createElement("div",{className:"kanban-placeholder-container"},u.createElement("div",{className:"kanban-placeholder-image"}),e?u.createElement("p",null,e):""))},t.prototype.renderHeadStick=function(){var e=this;if(!this.props.sticky)return null;return u.createElement(rs,{withLeftPanelFolded:this.props.withLeftPanelFolded,update:function(t){var n=e.props.lanes[t];if(!n)return null;var r=_s(e.props.tasks,n.id);return e.renderBoardHead(n,r,!0)}})},t.prototype.renderKanbanBody=function(){var e=this.props,t=e.lanes,n=e.laneType,r=e.permissions;if(0===t.length&&n===Ca.a.AxisType.iterationSprint||0===t.length&&r&&!r.taskPost){var a=this.state.sprint,o=a&&"complete"!==a.status?c.get("sprint.placeholder.sprint"):"";return this.renderPlaceholder(o)}return u.createElement($i,null,this.renderBody(),this.renderHeadStick())},t.prototype.renderMultipleLanesKanban=function(){var e=this.laneIdsDefaultCollapsed.filter(function(e){return-1===xs.indexOf(e)});return u.createElement(Oa,{onOpenTaskDetail:this.props.onOpenTaskDetail,uniqueIdPrefix:this.props.uniqueIdPrefix},u.createElement(La,{defaultCollapseIds:e},u.createElement(Hi,null,u.createElement(Ki,null,u.createElement("div",{className:"kanban-container"},u.createElement("div",{className:"kanban-wrapper"},this.renderHeads(),this.renderKanbanBody()))))))},t.prototype.renderSingleList=function(e,t,n,r,a){var o=this.getProjectPermission(this.props.project).taskPutPos,i=Ca.d.getCombinedAxisId([e.id,t.id]),s=this.props.bucketsResult[i]&&this.props.bucketsResult[i].hasMore,l=n+1<=this.state.loadedPaneCount;return u.createElement(Di,{key:t.id,className:"kanban-single-list",autoLoad:l,customViewId:this.props.customViewId,canUpdateTaskPos:o,bucketKeyPrefix:this.state.bucketKeyPrefix,hasMore:s,isAdmin:this.props.isAdmin,isSingleLane:this.getIsSingleLane(),isDefaultBucket:this.props.isDefaultBucket,isDragging:this.state.isDragging,initLoadedPaneAmount:Object(Ea.getInitLoadedPaneCount)(this.state.viewportWidth),hasFilter:a,lane:e,laneType:this.props.laneType,pane:t,paneIndex:n,paneType:this.props.paneType,panesData:this.props.panesData,project:this.props.project,tasklist:this.props.tasklist,sprintId:this.props.sprintId,scenarioFieldIds:this.props.scenarioFieldIds,sortMethod:this.props.sortMethod,scenarios:this.props.scenarios,tasks:r,onLockStages:this.remountBuckets,onLoadBucketTasks:this.props.onLoadBucketTasks,extendDroppableCond:this.getExtendDroppableCond},this.renderTaskCreator(e,t))},t.prototype.renderSingleLaneKanban=function(){var e=this,t=this.props.lanes.length&&this.props.lanes[0];if(!t)return null;var n=this.getPaneTasks(t),r=this.props.hasFilter,a=this.state.paneOrders.map(function(a,o){var i=e.props.panes.find(function(e){return e.id===a});if(!i)return null;var s=n[a]||[];return e.renderSingleList(t,i,o,s,r)}),o=qi.f+" kanban-single-lane-scroll";return u.createElement(v.a,{handleWidth:!0,onResize:this.onKanbanResize},u.createElement("div",{className:o,onScroll:this.onSingleLandKanbanScroll},u.createElement(Oa,{onOpenTaskDetail:this.props.onOpenTaskDetail,uniqueIdPrefix:this.props.uniqueIdPrefix},u.createElement(Oi,null,a,u.createElement("div",{className:"kanban-single-list"},u.createElement(ts,{showStaticPane:this.state.showStaticPane,staticPane:this.renderStaticPane()}))))))},t.prototype.renderKanban=function(){var e=this.props,t=e.lanes,n=e.panes,r=e.permissions,a=e.panesData,o=e.laneType,i=e.paneType,s=this.state.sprint,c=this.getIsSingleLane();return this.createTaskAxisGroup=c?function(e){var t=e.lanes,n=e.panes,r=l.g(e,["lanes","panes"]),a=[];return t.forEach(function(e){n.forEach(function(t){ls(l.a({lane:e,pane:t},r))&&a.push({lane:e,pane:t})})}),a}({permissions:r,panesData:a,lanes:t,panes:n,laneType:o,paneType:i,sprint:s||void 0}):[],c?this.renderSingleLaneKanban():this.renderMultipleLanesKanban()},t.prototype.render=function(){var e=this.getIsSingleLane(),t=this.props.isMounted?this.props.tasks:void 0;if(!e&&t){var n=this.loopLaneAndPane();this.laneIdsWithNoTasks=n.laneIdsWithNoTasks,this.laneIdsDefaultCollapsed=n.laneIdsDefaultCollapsed}else this.laneIdsWithNoTasks=[],this.laneIdsDefaultCollapsed=[];var r=m()("kanban-root",{"white-bg":!e&&this.props.isMounted});return u.createElement(Ia.ErrorBoundary,{onError:this.onError},u.createElement(lr,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onBeforeDragStart:this.onBeforeDragStart,viewportClassName:qi.f,useAnimation:Ka(this.props.tasks.length)},u.createElement("div",{className:r,ref:this.setRefRoot,onClick:this.handleClickPriority},this.props.isMounted?this.renderKanban():u.createElement(ya.Loading,{className:"kanban-loading"}),u.createElement(Ss,{trigger:this.state.trigger,updateTask:this.updateTask}))))},t}(u.PureComponent),_s=function(e,t){return e.find(function(e){return e._id===t})};n.d(t,"KanbanConnect",function(){return Ds});var Ds=Object(o.connect)(function(e){return{withLeftPanelFolded:e.ui.board.taskBoard.withLeftPanelFolded,isMounted:e.ui.kanban.isMounted,isUsingFilter:Object(s.a)(e),laneType:e.ui.board.boardViewType.laneType,paneType:e.ui.board.boardViewType.paneType,taskflowId:e.ui.board.boardViewType.taskflowId,lanes:io.KanbanSelector.lanesSelector(e),panes:io.KanbanSelector.panesSelector(e),panesData:io.KanbanSelector.panesDataSelector(e),cardsMap:io.KanbanSelector.cardsMapSelector(e),bucketsResult:e.ui.kanban.bucketsResult,tasks:e.ui.kanban.tasks,scenarios:e.ui.kanban.scenarios,sortMethod:e.ui.scrumPanel.sortMethod,hasFilter:e.ui.scrumPanel.hasFilters,tql:Object(s.d)(e),scenarioFieldIds:e.ui.board.boardViewType.scenarioFieldIds}},function(e){return{actions:Object(i.bindActionCreators)({mount:io.KanbanModule.actions.mount,unmount:io.KanbanModule.actions.unmount,localUpdateTask:io.KanbanModule.actions.localUpdateTask,onBeforeDragStart:io.KanbanModule.actions.onBeforeDragStart,onDragEnd:io.KanbanModule.actions.onDragEnd,updateTask:io.KanbanModule.actions.updateTask},e)}})(Ms)},lqPUVi5I:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),a=n("q1tIBJhx"),o=n.n(a),i=n("/MKjzBat"),s=n("fvjXLGkK"),l=n("TSYQbtd+"),c=n.n(l),p=n("tLZJUYWX"),u=n.n(p),d=n("a+N5u/Cl"),f=n.n(d),h=n("GESwhXbR"),m=n("sa1Ed382"),g=n("oPs7WnEA"),v=n("HDJEOtNh"),b=n("80gYlwjC"),y=n("ln9RsXX9"),k=n("aKydnTgX"),S=n("px/Tdvb+"),C=n("CGal/mJM"),w=n("j6KeIaDK"),I=n("XF9ZRjt2"),T=function(e){function t(t){var n=e.call(this,t)||this;n.triggeredFirstTime=!1,n.setDropdownRef=function(e){n.dropdownRef=e},n.setIsSaving=function(e){n.setState({isSaving:e})},n.getAllSortMethods=function(e){return Object(C.getSortMethods)({boardViewType:e.boardViewType,appEnabledStartDate:e.appEnabledStartDate,paneType:e.paneType,laneType:e.laneType,taskLayer:e.taskLayer,enableCustomMethod:e.enableCustomSortMethod})},n.onSortVisibleChange=function(e){e&&n.triggeredFirstTime&&(n.triggeredFirstTime=!0,m.gta.event({action:"toggle filter view",control:"Tasks corner menu"})),n.setState({triggerOpened:e})},n.onClickSort=function(e){return function(){n.lastMethod=e,n.props.onUpdateSortMethod(e,{fromUser:!0}),n.setState({sortMethod:e},function(){n.dropdownRef.close()})}},n.onClickSaveTemplate=function(){n.setIsSaving(!0),n.props.onSaveSortTemplate&&n.props.onSaveSortTemplate(n.state.sortMethod,n.onTemplateSaved)},n.onTemplateSaved=function(){n.dropdownRef.close(),n.setIsSaving(!1)};var r=n.getAllSortMethods(t),a=Object(C.getValidSortMethod)(r,t.sortMethod);n.lastMethod=a;var o=t.enableCustomSortMethod;return n.lastMethod!==S.SortMethod.CUSTOM||Object(C.canCustomMethod)(t)||n.props.onUpdateSortMethod(a,{fromSmartGroup:o}),n.state={isSaving:!1,sortMethod:a,sortMethods:r,triggerOpened:!1},n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this,n=this.getAllSortMethods(e),r=Object(C.getValidSortMethod)(n,e.sortMethod);this.setState({sortMethod:r,sortMethods:n},function(){if(t.lastMethod===S.SortMethod.CUSTOM){var n=!e.enableCustomSortMethod;Object(C.canCustomMethod)(e)?t.props.onUpdateSortMethod(t.lastMethod):t.props.onUpdateSortMethod(r,{fromSmartGroup:n})}})},t.prototype.renderSaveButton=function(){var e=this.state.isSaving?u.a.get("scrum.sort.in.save"):u.a.get("scrum.sort.save");return o.a.createElement(h.MenuItem,{className:"scrum-sort-panel-menu-item",onClick:this.onClickSaveTemplate},o.a.createElement(h.TextButton,{color:"blue"},e))},t.prototype.renderSortItems=function(){var e=this;return this.state.sortMethods.map(function(t){return o.a.createElement(h.MenuItem,{className:I["scrum-sort-menu-item"],key:t,onClick:e.onClickSort(t)},o.a.createElement("span",{className:"name"},Object(C.getSortMethodName)(t)),t===e.state.sortMethod&&o.a.createElement(h.Icon,{name:"tick"}))})},t.prototype.renderSortList=function(){return o.a.createElement(h.Menu,{className:I["scrum-sort-dropdown"]},this.renderSortItems(),this.props.onSaveSortTemplate&&o.a.createElement(h.Separator,null),this.props.onSaveSortTemplate&&this.renderSaveButton())},t.prototype.renderContent=function(){return Object(w.b)({isActive:this.state.triggerOpened,name:Object(C.getSortMethodTriggerName)(this.state.sortMethod)})},t.prototype.render=function(){return o.a.createElement(h.Dropdown,{ref:this.setDropdownRef,content:this.renderSortList(),persistence:!0,placement:"bottomRight",opened:this.state.triggerOpened,onVisibleChange:this.onSortVisibleChange},this.renderContent())},t}(o.a.PureComponent),E=n("d0QK6Sy1"),x=n("X7169US4"),M=n("zZceAwBt"),_=Object(i.connect)(function(e){var t=e.ui.scrumPanel.input;return{projectId:e.ui.project.projectId,input:t,inSearch:t.trim().length>0,dropdownOpened:e.ui.scrumPanel.dropdownOpened,hasMore:e.ui.scrumPanel.hasMore,isCustomFiltersLoading:e.ui.scrumPanel.isCustomFiltersLoading,customfieldsSearchers:e.ui.scrumPanel.customfieldsSearchers,searchHasMore:e.ui.scrumPanel.searchHasMore,isSearchLoading:e.ui.scrumPanel.isSearchLoading,customfieldsResult:e.ui.scrumPanel.customfieldsResult,searcherGroups:e.ui.scrumPanel.searcherGroups,showedSearchers:e.ui.scrumPanel.showedSearchers,invisibleSearcherIds:e.ui.scrumPanel.invisibleSearcherIds,filters:e.ui.scrumPanel.filters}},function(e){var t=x.actions;return{getCustomfieldsSearchers:Object(s.bindActionCreators)(t.getCustomfieldsSearchers,e),toggleDropdown:Object(s.bindActionCreators)(t.toggleDropdown,e),showCustomfieldsSearcher:Object(s.bindActionCreators)(t.showCustomfieldsSearcher,e),showSearcher:Object(s.bindActionCreators)(t.showSearcher,e),changeInput:Object(s.bindActionCreators)(t.changeInput,e),getCustomfieldsSearchersLoadMore:Object(s.bindActionCreators)(t.getCustomfieldsSearchersLoadMore,e),searchCustomfieldsSearchersLoadMore:Object(s.bindActionCreators)(t.searchCustomfieldsSearchersLoadMore,e)}})(M.a),D=n("DOZCBSCZ"),O=n("zT6SYcu2"),P=n("50927W45"),N=n("79Xm+sqc"),j=n("8zoxEjTT"),A=n("TN1MO+cS"),L=n("B9Qi/5SX"),F=n("lIadzMji"),B=n("jy/pKeSr"),G=n("KrjRt4fZ"),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onVisibleChange=function(e){t.props.onModalVisibleChange(e)},t.onCancel=function(){t.props.onCancel()},t.onSave=function(){t.props.onSave()},t}return r.d(t,e),t.prototype.renderCancelButton=function(){return o.a.createElement(h.Button,{type:"secondary",onClick:this.onCancel},u.a.get("cancel"))},t.prototype.renderSaveButton=function(){return o.a.createElement(h.Button,{onClick:this.onSave},u.a.get("confirm"))},t.prototype.render=function(){var e=c()(G.modal,"dls-modal-outer-selector");return o.a.createElement(h.Modal,{className:e,titleCls:G["modal-title"],title:u.a.get("custom.view.save.confirm.title"),width:460,opened:this.props.modalOpened,onVisibleChange:this.onVisibleChange},o.a.createElement("p",{className:G["confirm-contnet"]},u.a.get("custom.view.save.confirm.content",this.props.name)),o.a.createElement("div",{className:G["confirm-button-group"]},this.renderCancelButton(),this.renderSaveButton()))},t}(o.a.PureComponent),R=n("J/h97mgM"),U=n("M8UQBQTP"),W=n("bvmrLhnu"),q=n("RsEnma8V"),H=n.n(q),z=o.a.createContext({gta:{}}),K=function(e){function t(t){var n=e.call(this,t)||this;return n.searchInputRef=o.a.createRef(),n.handleResetFilter=function(){R.resetFilterGta(n.props.boardViewType),j.a.clear(),n.props.actions.resetFilters()},n.formatSearcherUnitScope=function(){var e=n.props.tqlValues,t={},r=e.tasklistId;r&&(t._tasklistId=Object(g.getValuesByTqlValue)(r,O.f.Select));var a=e.scenariofieldconfigId;return a&&(t._scenariofieldconfigId=Object(g.getValuesByTqlValue)(a,O.f.MultiSelect)),t},n.getTasklistIdByFilters=function(){var e=n.props.tqlValues.tasklistId;if(e){var t=e.match(/\((.+)\)/)[1];return t?t.split(" = ")[1]:void 0}},n.onTriggerClickWithGta=function(){m.gta.event({action:"toggle task filter",method:"click"})},n.onFilterVisibleChange=function(e){n.setState({filterDropdownOpened:e})},n.onChangeSearchInput=function(e){var t=e.target.value;n.props.actions.changeSearchInput({searchInput:t}),R.changeSearcherInputGta()},n.onClearSearchInput=function(){n.props.actions.changeSearchInput({searchInput:""}),R.changeSearcherInputGta(),n.searchInputRef.current&&n.searchInputRef.current.focus()},n.onChangeFilter=function(e){n.props.actions.changeFilter({filter:e})},n.onUpdateSortMethod=function(e,t){var r=n.props,a=r.actions,o=r.projectModel;e!==n.props.sortMethod&&(a.setSortMethod({sortMethod:e}),n.changeSortOrViewType());var i=o.get("currentSmartGroupId");o.enableSmartGroupSortMethod()&&i?o.setSmartGroupSortMethod(i,e):t&&!t.fromSmartGroup&&o.set("sortMethod",e),t&&t.fromUser&&R.changeSortMethodGta(o,e)},n.onCreateModalVisibleChange=function(e){n.setState({creatModalOpened:e})},n.onSaveConfirmVisibleChange=function(e){n.setState({saveConfirmModalOpened:e})},n.onCreateCustomView=function(e){var t=n.props,r=t.projectId,a=t.scrumSmartGroupType,o=t.actions,i=Object(F.c)(a);o.createSmartGroup({projectId:r,options:{name:e,type:i}})},n.onUpdateCustomView=function(e){var t=n.state.editedSmartGroup,r=n.props,a=r.tql,o=r.actions,i=r.sortMethod;o.updateSmartGroup({id:t._id,options:{name:e,filter:a||"",view:n.getSmartGroupViewOption(),orderBy:Object(g.getOrderBy)(i)}})},n.onSubmitCreateCustomView=function(e){n.onCreateCustomView(e),R.saveCustomViewGta("edit"),f.a.delay(function(){n.resetSelectorAndSortChange(),n.onCreateModalVisibleChange(!1)},200)},n.onClickSaveButton=function(){R.clickSaveViewButtonGta()},n.onClickCreateCustomView=function(){R.clickSaveViewButtonGta(),n.onOpenCreateCustomViewModal()},n.onOpenCreateCustomViewModal=function(){if(n.props.smartGroupsLength>=F.a)return h.Toast.error({message:p.get("scrum.panel.create.custom.view.limited.tips",F.a)}),void R.customViewCreateLimitedGta();n.setState({creatModalOpened:!0,editedSmartGroup:null}),R.submitCreateCustomViewGta()},n.onOpenUpdateCustomViewConfirmModal=function(){n.onSaveConfirmVisibleChange(!0),R.submitUpdateCustomViewGta()},n.onCloseConfirmModal=function(){n.onSaveConfirmVisibleChange(!1)},n.onSubmitUpdateCustomView=function(){var e=Object(g.getCustomViewBySmartGroup)(n.props.smartGroup);e&&n.setState({editedSmartGroup:e},function(){n.onUpdateCustomView(e.name),n.resetSelectorAndSortChange(),n.onSaveConfirmVisibleChange(!1),R.submitUpdateCustomViewSuccessGta()})},n.changeSortOrViewType=function(e){void 0===e&&(e=!0),n.setState({isSortOrViewTypeChange:e})},n.onToggleBoardViewModeSelect=function(){R.switchBoardModeGta(n.props.projectModel)},n.onSwitchBoardMode=function(e){n.props.smartGroup||n.props.projectModel.setBoardViewType(e,n.props.appName),n.props.onSwitchBoardMode&&n.props.onSwitchBoardMode(e),R.toggleBoardViewSelect(e),n.changeSortOrViewType()},n.getDisabledSearcherIds=function(){var e=[];return Object(F.f)(n.props.smartGroup)&&e.push("tasklistId"),n.props.smartGroupId&&"story"===n.props.scrumSmartGroupType&&e.push("storygroupId"),n.props.smartGroupId&&"bug"===n.props.scrumSmartGroupType&&e.push("buggroupId"),n.props.smartGroupId&&"sprint"===n.props.scrumSmartGroupType&&e.push("sprintId"),e},n.state={creatModalOpened:!1,filterSelectorOpened:!1,editedSmartGroup:null,saveConfirmModalOpened:!1,filterDropdownOpened:!1,isSortOrViewTypeChange:!1},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.props.projectId&&this.mountScrumPanel(this.props)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=["tasklistId","sprintId","scrumSmartGroupId","smartGroupId","commonGroupId"],n=e;e.projectId&&(f.a.isEqual(f.a.pick(this.props,t),f.a.pick(e,t))||(e.smartGroupId&&(n=r.a({},n,{tasklistId:void 0})),"sprint"!==e.scrumSmartGroupType&&(n=r.a({},n,{sprintId:null})),this.mountScrumPanel(n)))},t.prototype.componentWillUnmount=function(){this.props.actions.unmount()},t.prototype.getTasklistIdInPanel=function(){var e=null;if(this.props.tasklistId&&(e=this.props.tasklistId),this.props.smartGroup){if(this.props.showAsKanban&&L.b.checkId(this.props.smartGroup._id))return e;(e=Object(F.f)(this.props.smartGroup))||(e=this.getTasklistIdByFilters()||null)}return e},t.prototype.mountScrumPanel=function(e){j.a.clear();var t=e.showAsKanban&&e.smartGroupId===L.b._id?void 0:e.smartGroup;e.actions.mount({projectId:e.projectId,tasklistId:e.tasklistId,smartGroupId:e.smartGroupId,scrumSmartGroupId:e.scrumSmartGroupId,scrumSmartGroupType:e.scrumSmartGroupType,sprintId:e.sprintId,sortMethod:Object(g.getDefaultSortMethod)(e.projectModel,e.appName,t)});var n={sprintId:e.sprintId,commonGroupId:e.commonGroupId,tasklistId:e.tasklistId,scrumSmartGroupId:e.scrumSmartGroupId},r=(e.getPresetFilters||g.getDefaultPresetFilters)(n);e.actions.getSearchers({presetFilters:r}),this.changeSortOrViewType(!1)},t.prototype.getSearchers=function(){var e=this.props,t=e.searcherGroups,n=e.showedSearchers,r=e.customfieldsSearchers,a=f.a.chain(t).pluck("searchers").flatten().concat(N.a(P.a.Task)?r:[]).value();return n.map(function(e){return f.a.find(a,function(t){return t.id===e})}).filter(function(e){return!!e})},t.prototype.isTaskflowAllView=function(){return this.props.smartGroupId===L.b._id&&this.props.isTaskflow&&!!this.props.tasklistId},t.prototype.renderShownSearcherGroups=function(){var e=this,t=this.props,n=t.projectId,a=t.filters,i=t.actions,s=this.getDisabledSearcherIds();return o.a.createElement(z.Consumer,null,function(t){var l=t.gta;return e.getSearchers().map(function(t){return o.a.createElement(E.a,r.a({},t,{key:t.id,projectId:n,filter:a[t.id],scopes:e.formatSearcherUnitScope(),disabled:s.indexOf(t.id)>=0,inline:!0,onChange:e.onChangeFilter,onHideSearcher:i.hideSearcher,gta:l}))})})},t.prototype.renderSaveSubmit=function(){var e=v.ProjectAccess.hasMemberAuthority(this.props.projectId),t=this.props.projectModel.get("isTemplate"),n="sprint"===this.props.scrumSmartGroupType;if(t||!e||n)return null;var a=Object(g.getCustomViewBySmartGroup)(this.props.smartGroup),i={size:"smaller",type:"secondary",className:H.a["save-custom-button"]};if(!a)return o.a.createElement(h.Button,r.a({},i,{onClick:this.onClickCreateCustomView}),p.get("filter.panel.footer.save.button"));var s=o.a.createElement(h.Menu,null,o.a.createElement(h.MenuItem,{onClick:this.onOpenCreateCustomViewModal},p.get("filter.panel.footer.save.new")),o.a.createElement(h.MenuItem,{onClick:this.onOpenUpdateCustomViewConfirmModal},p.get("filter.panel.footer.save.update")));return o.a.createElement(h.Dropdown,{placement:"bottomLeft",content:s},o.a.createElement(h.Button,r.a({},i,{onClick:this.onClickSaveButton}),p.get("filter.panel.footer.save.button")))},t.prototype.renderFilterReset=function(){return this.props.hasFilters&&o.a.createElement(h.TextButton,{htmlType:"reset",color:"blue",onClick:this.handleResetFilter},o.a.createElement(h.Icon,{name:"putback"}),p.get("filter.panel.footer.reset.handler"))},t.prototype.renderFilterFooter=function(e){return o.a.createElement("footer",{className:H.a["filter-panel-footer"]},!e&&this.renderAddSearcherDropdown(),this.renderFilterReset())},t.prototype.renderAddSearcherDropdown=function(){return o.a.createElement(z.Consumer,null,function(e){var t=e.gta;return o.a.createElement(_,{schemaType:P.a.Task,isCustomSearcherShowed:N.a(P.a.Task),gta:t})})},t.prototype.renderList=function(){return this.props.isLoading?o.a.createElement(D.a,null):o.a.createElement("section",{key:"filterGroup",className:H.a["searchers-panel-list"]},this.renderShownSearcherGroups())},t.prototype.renderFilter=function(){var e=this.props,t=e.isLoading,n=e.searcherGroups,r=f.a.isEmpty(n)&&!t?null:this.renderList();return o.a.createElement("section",{key:"filter",className:c()(H.a["scrum-filter"],"thin-scroll")},r)},t.prototype.renderView=function(){var e=this.props,t=e.projectModel,n=e.projectId,r=t.payment.objectId,a=Object(y.paywallUrl)(b.PlanType.Wildcard,k.a.Pro,r),i=y.Version.isEnterprisePro(t.payment),s=t.payment.ofUser();return o.a.createElement(A.a,{boardViewAppId:Object(W.composeBoardViewAppId)(n,this.props.appName),commonGroupId:this.props.commonGroupId,currentSmartGroup:this.props.smartGroup,currentSmartGroupFilters:this.props.filters,projectId:n,tasklistId:this.getTasklistIdInPanel(),getDefaultScenarioFieldId:this.props.getDefaultScenarioFieldId,payProtocol:a,paymentOfUser:!!s,defaultBoardMode:t.getBoardViewType(this.props.appName),isOrgPro:i,isScrum:this.props.isScrum,isTaskflow:this.props.isTaskflow,isTableViewEnable:this.props.isTableViewEnable,isTimeViewEnable:this.props.isTimeViewEnable,scrumSmartGroupType:this.props.scrumSmartGroupType,showAsKanban:this.props.showAsKanban,onSwitchBoardMode:this.onSwitchBoardMode,onPaneTypeChange:this.changeSortOrViewType,onToggleSelect:this.onToggleBoardViewModeSelect})},t.prototype.renderSort=function(){if(!this.props.sortMethod)return null;var e=!!this.props.smartGroup&&!this.isTaskflowAllView(),t=[!this.props.disableSaveSortTemplate,!e,this.props.projectModel.hasPermission("task.put.pos")].every(function(e){return e});return o.a.createElement(T,{boardViewType:this.props.boardViewType,sortMethod:this.props.sortMethod,paneType:this.props.paneType,laneType:this.props.laneType,taskLayer:this.props.taskLayer,enableCustomSortMethod:!e,appEnabledStartDate:this.props.projectModel.isAppEnabled("startDate"),onUpdateSortMethod:this.onUpdateSortMethod,onSaveSortTemplate:t?this.props.onSaveSortTemplate:void 0})},t.prototype.renderSearchInput=function(){var e=this.props.searchInput?o.a.createElement(h.Tooltip,{title:p.get("scrum.panel.filter.text.input.clear")},o.a.createElement(h.Icon,{name:"circle-error-o",className:H.a["scrum-panel-search-clear"],onClick:this.onClearSearchInput})):void 0;return o.a.createElement("section",{key:"searchInput",className:H.a["scrum-panel-search"]},o.a.createElement(h.Input,{size:"small",prefixIcon:"search",placeholder:p.get("scrum.panel.filter.text.input.placeholder"),ref:this.searchInputRef,suffixIcon:e,value:this.props.searchInput,onChange:this.onChangeSearchInput}))},t.prototype.renderCreateModal=function(){var e=this.state.creatModalOpened;return o.a.createElement(B.a,{editMode:"create",name:"",modalOpened:e,onModalVisibleChange:this.onCreateModalVisibleChange,onSave:this.onSubmitCreateCustomView})},t.prototype.renderSaveConfirmModal=function(){var e=Object(g.getCustomViewBySmartGroup)(this.props.smartGroup);if(e)return o.a.createElement(V,{name:e.name,modalOpened:this.state.saveConfirmModalOpened,onModalVisibleChange:this.onSaveConfirmVisibleChange,onCancel:this.onCloseConfirmModal,onSave:this.onSubmitUpdateCustomView})},t.prototype.render=function(){var e=this.props.projectModel.get("isTemplate");return o.a.createElement(o.a.Fragment,null,this.renderSaveCustomViewButton(),this.renderView(),!e&&this.renderSort(),this.renderFilterSelector(),this.renderCreateModal(),this.renderSaveConfirmModal())},t.prototype.renderSaveCustomViewButton=function(){var e="time"!==this.props.boardViewType,t=this.props.hasFilters||this.state.isSortOrViewTypeChange||this.props.hasStatusSelectorChange;return e&&t&&this.renderSaveSubmit()},t.prototype.getFilterContent=function(){var e=this.props.projectModel.get("isTemplate");return o.a.createElement(o.a.Fragment,null,this.renderSearchInput(),!e&&this.renderFilter(),this.renderFilterFooter(e))},t.prototype.renderFilterSelector=function(){var e=this.getFilterContent(),t={name:p.get("filter"),hasFilters:this.props.hasFilters,isActive:this.state.filterDropdownOpened,eventHandlers:{onClick:this.onTriggerClickWithGta}};return o.a.createElement(h.Dropdown,{content:e,persistence:!0,placement:"bottomRight",className:H.a["filter-container"],opened:this.state.filterDropdownOpened,onVisibleChange:this.onFilterVisibleChange},Object(w.a)(t))},t.prototype.getSmartGroupViewOption=function(){return Object(g.getSmartGroupViewOption)(this.props.boardViewType,this.props.paneType,this.props.laneType,this.props.scenarioFieldIds,this.props.taskLayer)},t.prototype.resetSelectorAndSortChange=function(){this.props.hasStatusSelectorChange&&Object(U.b)(!1),this.state.isSortOrViewTypeChange&&this.changeSortOrViewType(!1)},t.contextType=z,t}(o.a.PureComponent),J=n("xhXG/roP"),$=n("F4Sfg53m");n.d(t,"ScrumPanelConnect",function(){return X});var X=Object(i.connect)(function(e,t){var n=e.ui.customViews,r=n.currentSmartGroupId,a=n.smartGroups,o=null;return o=r===L.b._id?t.showAsKanban?$.BoardTaskFlowProjectStorage.getAllTasksViewCustomView(t.projectId,t.appName):L.b.get():a.find(function(e){return e._id===r})||null,{smartGroupId:r,smartGroup:o,smartGroupsLength:a.length,commonGroupId:Object(J.c)(e.ui.commonGroups),sprintId:e.ui.sprintPanel.currentSprint,boardViewType:e.ui.board.boardViewType.boardMode,paneType:e.ui.board.boardViewType.paneType,laneType:e.ui.board.boardViewType.laneType,taskflowId:e.ui.board.boardViewType.taskflowId,scenarioFieldIds:e.ui.board.boardViewType.scenarioFieldIds,hasStatusSelectorChange:e.ui.board.boardViewType.hasStatusSelectorChange,taskLayer:e.ui.board.boardViewType.taskLayer,sortMethod:e.ui.scrumPanel.sortMethod,isLoading:e.ui.scrumPanel.isLoading,searcherGroups:e.ui.scrumPanel.searcherGroups,showedSearchers:e.ui.scrumPanel.showedSearchers,searchInput:e.ui.scrumPanel.searchInput,filters:e.ui.scrumPanel.filters,tql:e.ui.scrumPanel.tql,tqlValues:e.ui.scrumPanel.tqlValues,hasFilters:e.ui.scrumPanel.hasFilters,customfieldsSearchers:e.ui.scrumPanel.customfieldsSearchers,onSwitchBoardMode:t.showAsKanban?Object(g.getOnSwitchBoardMode)(t.projectId):void 0}},function(e){return{actions:Object(s.bindActionCreators)(x.actions,e)}})(function(e){var t={gta:{page:"Tasks Page",control:"task panel menu",segment:e.boardViewType}};return o.a.createElement(z.Provider,{value:t},o.a.createElement(K,r.a({},e)))})},miKtJhEY:function(e,t,n){"use strict";n.r(t),n.d(t,"pagedStoryOrBugTasksPageSize",function(){return I}),n.d(t,"openOptionsStory",function(){return E}),n.d(t,"openOptionsBug",function(){return x}),n.d(t,"openOptionsSprintAll",function(){return M}),n.d(t,"openOptionsSprintUnplanned",function(){return _}),n.d(t,"openOptionsSprint",function(){return D}),n.d(t,"openOptionsStoryOrBugListView",function(){return O}),n.d(t,"openOptionsStoryOrBugKanbanView",function(){return P});var r=n("mrSGxOB2"),a=n("4c1CS0b3"),o=n("a+N5u/Cl"),i=n("tLZJUYWX"),s=n("s0r7VfKc"),l=n("sa1Ed382"),c=n("HDJEOtNh"),p=n("oRqJmROU"),u=n("90U+kJWN"),d=n("zxyTAlCn"),f=n("Qlod0euf"),h=n("wVuowLdP"),m=n("fcolQD49"),g=n("ICBFVo7D"),v=n("U3116aoz"),b=n("EiUFTky8");function y(e){return e.allCompleted||m.b.isDoneAxis(e.key)}function k(e,t,n){var o={expand:!0,collapse:!1};return a.Observable.merge(e.map(function(e){return["expand",e]}),t.map(function(e){return["collapse",e]})).groupBy(function(e){var t=r.f(e,2)[1],a=n(t);return a?String(a):""}).map(function(e){var t=e.key;return t?e.map(function(e){var n=r.f(e,1)[0];return[t,o[n]]}).publishReplay(1).refCount():a.Observable.empty()})}var S=function(e){return function(t){return t.switchMap(function(t){var n=r.f(t,2),o=n[0];return n[1]?e(o):a.Observable.empty()})}};function C(e){return{tasks:e,hasMore:!1}}var w=function(e){return function(t,n){return void 0===n&&(n={}),function(a){var o=t.taskLayer,i=t.filter,s=r.g(t,["taskLayer","filter"]);if(a=Object(f.prependCondToTql)(a,i||""),a=Object(f.prependCondToTql)(a,Object(f.tasksFilter)(s)),!n.loadMore$&&!n.pageSize){return Object(h.getTasksByTql)(e,a,r.a({},{pageSize:5e3},{taskLayer:o})).map(function(e){return C(e.tasks)})}return Object(h.getTasksByTql)(e,a,r.a({},n,{taskLayer:o}))}}},I=20;function T(e,t,n,o,i){var p=n._id,d=i.commonGroupCustomFieldValue&&[i.commonGroupCustomFieldValue],f={viewType:"table",viewOptions:{_projectId:t,_organizationId:e,_smartGroupId:p,tableFeatureMap:Object(b.checkTaskTableFeature)({projectId:t,useGroups:!0}),tableViewAppId:p,enableKanbanStaticPaneOfStatus:void 0,useGroups:!0,strictHierarchy:i.strictHierarchy,tasks$:a.Observable.of({tasks:[],hasMore:!1}),getNewTaskSnippet:function(e){return r.a({_projectId:t,customfields:d},e)}}};if(!o)return f;var h=Object(u.observeCallback)(),m=h.observable,T=h.callback,E=Object(u.observeCallback)(),x=E.observable,M=E.callback,_=Object(u.observeCallback)(void 0),D=_.observable,O=_.callback,P=Object(u.observeCallback)(),N=P.observable,j=P.callback,A=Object(u.observeCallback)(),L=A.observable,F=A.callback,B=D.share(),G=l.user.id,V=c.ProjectAccess.hasProjectPrivacyPermission(t),R=i.isUncategorizedCommonGroup?null:i.commonGroupId,U=n.filter,W=i.board.taskLayer,q=function(e,r){void 0===r&&(r=!1);var a={isDone:r,_scenariofieldconfigId:o};return s.default.getTasksByCommonGroup(e,t,n._id,G,{query:a,showAll:V,taskLayer:W,tql:n.filter})},H={projectId:t,smartGroup:n,scenarioFieldConfigId:o,me:G,showAll:V,taskLayer:W},z=r.a({_scenariofieldconfigId:o},void 0!==R?function(e){return null===e?{}:e===v.FixedCommonGroup.All?{}:{_commongroupId:e}}(R):{}),K=w({_projectId:t}),J=R===v.FixedCommonGroup.All?Object(g.e)(H):void 0!==R?q(R):K({taskLayer:W,isDone:!1})(U).map(function(e){return e.tasks}),$=K(r.a({},z,{taskLayer:W,isDone:!1})),X=K(r.a({},z,{taskLayer:W,isDone:!0}),{loadMore$:B,pageSize:20}),Y=k(m,x,y).publishReplay(1).refCount();return f.viewOptions.tasks$=N.publishReplay(1).refCount().startWith(!1).distinctUntilChanged().switchMap(function(e){var t=L.debounceTime(200).publishReplay(1).refCount(),n=e?t.switchMap(function(e){return $(e)}).map(function(e){return e.tasks}):J,o=Y.mergeMap(S(function(){return e?t.switchMap(function(e){return X(e)}):R===v.FixedCommonGroup.All?Object(g.h)(r.a({},H,{loadMore$:B,pageSize:I})):void 0!==R?q(R,!0).map(C):K({taskLayer:W,isDone:!0},{loadMore$:B,pageSize:20})(U)})).startWith({tasks:[],hasMore:!1});return a.Observable.combineLatest(n,o).map(function(e){var t=r.f(e,2),n=t[0],a=t[1],o=a.tasks,i=a.hasMore;return{tasks:n.concat(o),hasMore:i}})}),Object.assign(f.viewOptions,{onGroupExpand:T,onGroupCollapse:M,useGroups:!0,onLoad:O,hasLoader:!0,setIsUsingFilter:j,setTql:F}),f}var E=function(e,t,n,a,o){return T(e,t,n,a,r.a({},o,{strictHierarchy:o.commonGroupId===v.FixedCommonGroup.All,commonGroupId:o.commonGroupId}))},x=function(e,t,n,a,o){return T(e,t,n,a,r.a({},o,{strictHierarchy:o.commonGroupId===v.FixedCommonGroup.All,commonGroupId:o.commonGroupId}))},M=function(e,t,n,i){void 0===i&&(i={});var s=Object(u.observeCallback)(),l=s.observable,c=s.callback,f=Object(u.observeCallback)(),h=f.observable,m=f.callback,v=Object(u.observeCallback)(),I=v.observable,T=v.callback,E=Object(u.observeCallback)(),x=E.observable,M=E.callback,_=n._id,D=i.scenarioFieldConfigId,O=Object(p.c)(i.taskLayer)?i.taskLayer:d.a.All,P={_projectId:t,_organizationId:e,_smartGroupId:_,tableFeatureMap:Object(b.checkTaskTableFeature)({projectId:t,useGroups:!0}),tableViewAppId:_,enableKanbanStaticPaneOfStatus:!1,onGroupExpand:c,onGroupCollapse:m,useGroups:!0,setIsUsingFilter:T,setTql:M},N=n.filter,j={projectId:t,smartGroupId:_,taskLayer:O,scenarioFieldConfigId:D},A=w({_projectId:t}),L=Object(g.b)(r.a({},j,{statuses:["active","future"]})),F=Object(g.c)(["active","future"],O),B=A({taskLayer:O,filter:F}),G=Object(g.f)(t,_,O,{scenarioFieldConfigId:D}),V=Object(g.g)({taskLayer:O}),R=A({taskLayer:O,filter:V}),U=function(e){var t=Object(g.c)(["complete"],O,e);return A({taskLayer:O,filter:t})},W=k(l,h,function(e){return y(e)?e.key:null}).publishReplay(1).refCount();return P.tasks$=I.publishReplay(1).refCount().startWith(!1).distinctUntilChanged().switchMap(function(e){var t=x.debounceTime(200).publishReplay(1).refCount(),n=e?t.switchMap(function(e){return B(e).map(function(e){return e.tasks})}):i.isCustomView?B(N).map(function(e){return e.tasks}):L,s=e?t.switchMap(function(e){return R(e).map(function(e){return e.tasks})}):i.isCustomView?R(N).map(function(e){return e.tasks}):G,l=W.mergeMap(S(function(n){return(e?t.switchMap(function(e){return U(n)(e).map(function(e){return e.tasks})}):i.isCustomView?U(n)(N).map(function(e){return e.tasks}):function(e){return Object(g.b)(r.a({},j,{statuses:["complete"],sprintId:e}))}(n)).map(function(e){return{sprintId:n,tasks:e}})})).scan(function(e,t){var n=t.sprintId,r=t.tasks;return e[n]=r,e},{}).map(function(e){var t;return(t=[]).concat.apply(t,r.h(Object(o.values)(e)))}).startWith([]);return a.Observable.combineLatest(n,s,l).map(function(e){var t=r.f(e,3),n=t[0],a=t[1],o=t[2];return n.concat(a,o)}).map(C)}),{viewType:"table",viewOptions:P}},_=function(e,t,n,r){void 0===r&&(r={});var a=Object(u.observeCallback)(),o=a.observable,s=a.callback,l=Object(u.observeCallback)(),c=l.observable,p=l.callback,d=n._id,f={_projectId:t,_organizationId:e,_smartGroupId:d,tableFeatureMap:Object(b.checkTaskTableFeature)({projectId:t,useGroups:!1}),tableViewAppId:d,enableKanbanStaticPaneOfStatus:!1,useGroups:!1,placeholderNotice:i.get("sprint.placeholder.unplanned"),setIsUsingFilter:s,setTql:p},h=n.filter,m=w({_projectId:t}),v=r.taskLayer,y=Object(g.f)(t,d,v),k=m({taskLayer:v,filter:Object(g.g)({taskLayer:v})});return f.tasks$=o.publishReplay(1).refCount().startWith(!1).distinctUntilChanged().switchMap(function(e){return e?c.debounceTime(200).switchMap(function(e){return k(e)}):r.isCustomView?k(h):y.map(C)}),{viewType:"table",viewOptions:f}},D=function(e,t,n,a,o){void 0===o&&(o={});var i=Object(u.observeCallback)(),s=i.observable,l=i.callback,c=Object(u.observeCallback)(),p=c.observable,d=c.callback,f=n._id,h={_projectId:t,_organizationId:e,_smartGroupId:f,_sprintId:a,tableFeatureMap:Object(b.checkTaskTableFeature)({projectId:t}),tableViewAppId:f,enableKanbanStaticPaneOfStatus:!1,setIsUsingFilter:l,setTql:d,getNewTaskSnippet:function(e){return r.a({_projectId:t,_sprintId:a},e)}},m=n.filter,v=w({_projectId:t}),y=o.taskLayer,k=Object(g.a)(t,f,a,{taskLayer:y}),S=v({taskLayer:y,filter:Object(g.d)(a,{taskLayer:y})});return h.tasks$=s.publishReplay(1).refCount().startWith(!1).distinctUntilChanged().switchMap(function(e){return e?p.debounceTime(200).switchMap(function(e){return S(e)}):o.isCustomView?S(m):k.map(function(e){return{tasks:e}})}),{viewType:"kanban"===o.viewType||"table"===o.viewType?o.viewType:"kanban",viewOptions:h}},O=function(e,t){var n,a=t.smartGroup,o=t.commonGroupApp;if(a)n=a.filter;else if(t.commonGroupId&&o){n=["_commongroupId="+(t.isUncategorizedCommonGroup?null:t.commonGroupId),"_appId="+o._id,o.filter].join(" AND ")}return{viewType:"list",viewOptions:r.a({_projectId:e._projectId},Object(f.openOptionsListView)(e,n?{filter:n}:void 0))}},P=function(e){var t=e.projectId,n=e.commonGroupOptions,a=n.commonGroupCustomFieldValue&&[n.commonGroupCustomFieldValue],o={_organizationId:e.organizationId,_projectId:e.projectId,_tasklistId:e.tasklistId,_smartGroupId:e.smartGroupId,tableFeatureMap:Object(b.checkTaskTableFeature)({projectId:t}),tableViewAppId:"N/A",enableKanbanStaticPaneOfStatus:!1,getNewTaskSnippet:function(t){return r.a({_projectId:e.projectId,customfields:a},t)}},i=n.isUncategorizedCommonGroup?null:n.commonGroupId===v.FixedCommonGroup.All?void 0:n.commonGroupId,s=Object(f.openOptionsByKey)({_projectId:e.projectId},function(t){var n=t.paneId;return r.a({_scenariofieldconfigId:e.scenarioFieldConfigId,_taskflowstatusId:n},void 0===i?{}:{_appId:e.smartGroupId,_commongroupId:i})},r.a({},e.customView?{tql:e.customView.filter}:{},{getUndoneTasks:function(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];return N(e,t,f.generalGetUndoneTasks.apply(void 0,r.h([e,t],n)))},getDoneTasks:function(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];return N(e,t,f.generalGetDoneTasks.apply(void 0,r.h([e,t],n)))}}));return{viewType:"kanban",viewOptions:r.a({},o,s)}},N=function(e,t,n){return void 0!==t._appId&&void 0!==t._commongroupId?s.default.getTasksByCommonGroup(t._commongroupId,e._projectId,t._appId,l.user.id,{tasks$:n}):n}},mlGWQ0mt:function(e,t,n){var r=n("0T/aeGnq");r(r.S+r.F,"Object",{assign:n("nkTwsJCe")})},nGZaVfby:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n("mrSGxOB2"),a=n("q1tIBJhx"),o=n.n(a),i=n("sa1Ed382"),s=n("tLZJUYWX"),l=n.n(s),c=n("GESwhXbR"),p=n("TSYQbtd+"),u=n.n(p),d=n("dWbDnvg6"),f=n("oRPyOBnq"),h=n("3eMzznN/"),m=n("3LGsbOqB"),g=n("zH+Yaocm"),v=n("DbHbb8aU"),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onOpenTaskDetail=function(){var e=t.props.openTaskUsePanel,n=void 0===e||e;t.gtaHandler(),i.APP.openTaskPreviewer(t.props.task._id,{isUsePanel:n,hasLink:!1})},t}return r.d(t,e),t.prototype.getPriorityCls=function(){var e=this.props.task.priority;return 1===e?v["priority-1"]:2===e?v["priority-2"]:void 0},t.prototype.gtaHandler=function(){"function"==typeof this.props.onGtaHandler?this.props.onGtaHandler():i.gta.event({action:"open detail",segment:"list",type:"task"})},t.prototype.getDueDateClass=function(){return this.props.task.dueDate?Object(h.formatDate)(this.props.task.dueDate,{inShort:!0}).dateClass:""},t.prototype.renderDateStr=function(){var e=Object(m.b)(this.props.task.startDate,this.props.task.dueDate),t=this.getDueDateClass(),n=v.date+" "+t,r=o.a.createElement("div",{className:n},e);return e?o.a.createElement(c.Tooltip,{title:e},r):r},t.prototype.renderTasklistName=function(){return!!this.props.stageOrStatusName&&o.a.createElement(c.Tooltip,{title:this.props.stageOrStatusName},o.a.createElement("div",{className:v["stage-or-status-name"]},this.props.stageOrStatusName))},t.prototype.renderParentTaskName=function(){var e=this.props.task.parent?this.props.task.parent.content:null;if(!e)return null;var t=l.a.get("list.view.belong.to.parent",e);return o.a.createElement(c.Tooltip,{title:t},o.a.createElement("div",{className:v["parent-task-name"]},t))},t.prototype.renderTaskName=function(){return o.a.createElement("div",{className:v["task-content"]},o.a.createElement(c.Tooltip,{title:this.props.task.content},o.a.createElement("div",{className:v["task-name"]},this.props.task.content)),this.renderParentTaskName())},t.prototype.renderAvatar=function(){var e=this.props.task.executor,t=e?e.avatarUrl:void 0,n=o.a.createElement(d.a,{size:"small",src:t,className:v.avatar});return e?o.a.createElement(c.Tooltip,{title:e.name},n):n},t.prototype.renderScenarioIcon=function(){return this.props.icon?o.a.createElement(f.FieldIcon,{icon:this.props.icon,type:"task",className:v["field-icon"]}):null},t.prototype.renderTodoBox=function(){var e=Boolean(this.props.task._taskflowstatusId);return this.props.useLegacyCheckbox?o.a.createElement(c.Todobox,{className:v.checkbox,checked:this.props.task.isDone,size:"small",disabled:!0}):o.a.createElement("div",{className:e?v["checkbox-fixed-width"]:void 0},o.a.createElement(g.TaskStatusCheckbox,{className:e?void 0:v.checkbox,task:this.props.task,showLabel:e}))},t.prototype.renderContentWrapper=function(){return o.a.createElement("div",{className:v["list-item-content"]},this.renderTodoBox(),this.renderScenarioIcon(),this.renderTaskName(),this.renderDateStr(),this.renderTasklistName(),this.renderAvatar())},t.prototype.renderPriority=function(){var e=this.getPriorityCls()||"",t=u()(e,v.priority);return o.a.createElement("div",{className:t})},t.prototype.render=function(){return o.a.createElement("div",{className:v["list-item"],onClick:this.onOpenTaskDetail},this.renderPriority(),this.renderContentWrapper())},t}(o.a.PureComponent)},nhJBLgj9:function(e,t,n){"use strict";n.r(t);var r=n("/MKjzBat"),a=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("HYobN8SQ"),l=n.n(s),c=n("tLZJUYWX"),p=n.n(c),u=n("6vz9yTy0"),d=n.n(u),f=n("sa1Ed382"),h=n("GESwhXbR"),m=n("Rz+mZ3+K"),g=n("aR9Pp0Vi"),v=n("WAfCmc9t"),b=n("D4LzPOFJ"),y=n("cVY30NxL"),k=n("A2GOFpyp"),S=function(e){function t(t){var n=e.call(this,t)||this;return n.createSprintCls="kanban-warning-create-sprint",n.createProjectCls="kanban-warning-create-project",n.createTasklistCls="kanban-warning-create-tasklist",n.onVisibleChange=function(e){n.setState({modalOpened:e})},n.onTasklistCreatorVisibleChange=function(e){n.setState({tasklistModalOpened:e})},n.onSprintModalVisibleChange=function(e){n.setState({sprintModalOpened:e})},n.onClickClose=function(){Object(b.b)(),n.setWarningVisited(!0),n.closeModal()},n.onCreateProject=function(){n.props.onCreateProject(),n.closeModal()},n.onCreateSprint=function(){n.setState({sprintModalOpened:!0})},n.onCreateTasklist=function(){n.setState({tasklistModalOpened:!0})},n.onCreateSprintSuccess=function(){n.closeModal()},n.onClickLink=function(e){var t=e.target.className;t===n.createSprintCls?n.onCreateSprint():t===n.createProjectCls?n.onCreateProject():t===n.createTasklistCls&&n.onCreateTasklist()},n.handleCreateTasklistSuccess=function(e){d()(function(){var t=f.router.getPrefix();f.router.navigate(t+"/tasks/scrum/"+e._id,{trigger:!0})},300)},n.state={modalOpened:!0,sprintModalOpened:!1,tasklistModalOpened:!1},n.localCache=l.a.namespace("temp").namespace("kanban_warning_tips"),n.localCacheId=n.props.sprintId||n.props.tasklistId||n.props.projectId,n}return a.d(t,e),t.prototype.getWarningVisited=function(){return this.localCache.get(this.localCacheId,!1)},t.prototype.setWarningVisited=function(e){this.localCache.set(this.localCacheId,e)},t.prototype.shouldRenderWarning=function(){if(this.getWarningVisited())return!1;var e=this.props,t=e.sprint,n=e.taskCount;return t?this.checkSprintTaskCountLimit():!!(n&&n>1e3)},t.prototype.checkSprintTaskCountLimit=function(){var e=this.props,t=e.sprint,n=e.sprintTaskCount,r=t&&"complete"===t.status;return!(!t||r||!n)&&Object(y.sumTaskCount)(n.done)+Object(y.sumTaskCount)(n.unDone)>1e3},t.prototype.closeModal=function(){this.setState({modalOpened:!1})},t.prototype.getRenderLinksText=function(e,t){return e?p.a.get("kanban.warning.contents.create.sprint.create.project"):t?p.a.get("kanban.warning.contents.create.project.and.tasklist"):p.a.get("kanban.warning.contents.create.project")},t.prototype.renderCreateSprintComponent=function(){var e=i.a.createElement("div",{className:k["sprint-trigger"]});return i.a.createElement(g.a,{projectId:this.props.projectId,trigger:e,unfinishedSprintsAmount:this.props.unfinishedSprintsAmount,modalOpened:this.state.sprintModalOpened,onModalVisibleChange:this.onSprintModalVisibleChange,onSuccess:this.onCreateSprintSuccess,routeToCreatedSprint:!0})},t.prototype.renderCreateTasklistModal=function(){return i.a.createElement(h.Modal,{width:600,className:k["tasklist-create-modal"],titleCls:k["hide-title"],opened:this.state.tasklistModalOpened,onVisibleChange:this.onTasklistCreatorVisibleChange},i.a.createElement(v.a,{projectId:this.props.projectId,onClose:this.onTasklistCreatorVisibleChange,onCreateSuccess:this.handleCreateTasklistSuccess}))},t.prototype.renderButton=function(){return i.a.createElement("div",{className:k["confirm-button-wrapper"]},i.a.createElement(h.Button,{onClick:this.onClickClose},p.a.get("confirm.and.no.reminder")))},t.prototype.renderWarning=function(){var e=this.props,t=e.isAdmin,n=e.unfinishedSprintsAmount,r=e.sprintId,a=e.canCreateTasklist,o=!!r&&t&&n<m.SPRINT_AMOUNT_LIMIT,s=this.getRenderLinksText(o,a);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:k["warning-image-container"]},i.a.createElement("div",{className:k["warning-image"]})),i.a.createElement("div",{className:k["warning-title"]},p.a.get("kanban.warning.title")),i.a.createElement("div",{className:k["warning-text"],onClick:this.onClickLink,dangerouslySetInnerHTML:{__html:s}}),o&&this.renderCreateSprintComponent(),a&&this.renderCreateTasklistModal())},t.prototype.renderContent=function(){return i.a.createElement(h.Modal,{className:k["kanban-warning-modal"],titleCls:k["modal-title"],opened:this.state.modalOpened,onVisibleChange:this.onVisibleChange,width:460},i.a.createElement(i.a.Fragment,null,this.renderWarning(),this.renderButton()))},t.prototype.render=function(){var e=this.shouldRenderWarning()?this.renderContent():null;return i.a.createElement("div",{className:k["kanban-warning"]},e)},t}(i.a.PureComponent);n.d(t,"KanbanWarningConnect",function(){return C});var C=Object(r.connect)(function(e,t){var n=e.ui.sprintPanel,r=n.sprintsTaskCount,a=n.sprints,o=t.sprintId,i=o?a.find(function(e){return e._id===o}):void 0;return{sprintTaskCount:o?r[o]:void 0,sprint:i,unfinishedSprintsAmount:a.filter(function(e){return"complete"!==e.status}).length,taskCount:e.ui.kanban.tasks.length}})(S)},nkTwsJCe:function(e,t,n){"use strict";var r=n("djPm8zSj"),a=n("McIs82Xv"),o=n("1077v0Sy"),i=n("AYVP78ns"),s=n("i6sEYMou"),l=Object.assign;e.exports=!l||n("14Ie4PSQ")(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r})?function(e,t){for(var n=i(e),l=arguments.length,c=1,p=a.f,u=o.f;l>c;)for(var d,f=s(arguments[c++]),h=p?r(f).concat(p(f)):r(f),m=h.length,g=0;m>g;)u.call(f,d=h[g++])&&(n[d]=f[d]);return n}:l},"nvGY+w0G":function(e,t){e.exports=function(e){return'<div class=\'task-field-config-wrapper\'></div><textarea class="task-content-input form-control" placeholder="'+tb_i18n.get("task.creator.content")+'"></textarea><div class="handler-wrap creator-wrap"> <div class="component-mount executor"></div></div><div class="task-date-wrap"></div><div class="handler-wrap more-set"> <a class="repeat-handler"> <span class="icon icon-repeat"></span> <span class="creator-handler-text repeat-text">'+tb_i18n.get("repeat.freq.NO")+'</span> </a></div><div class="handler-wrap more-set task-reminder-wrap"></div><div class="scenario-creators-wrap"></div><div class="handler-wrap more-handler-wrap"> <a class="more-handler"> <span class="icon icon-more"></span> <span class="creator-handler-text">'+tb_i18n.get("more")+'</span> </a></div><div class="involve-wrap clearfix"></div><div class="submit-set clearfix"> <div class="creator-visible"></div> <button class="btn btn-primary submit-handler">'+tb_i18n.get("create")+"</button></div>"}},oEorxCFH:function(e,t,n){var r,a,o,i,s,l,c,p,u,d,f={}.hasOwnProperty;n("48qxFpXA"),l=n("a+N5u/Cl"),a=n("4c1CS0b3").Observable,s=n("vmWJWrVe"),r=n("5V57DkyA").BoardTableApm,o=n("77NnVLwu"),i=n("FoX6irlC"),u=n("fio7jWQ0"),c=u.addEpic,p=u.addUIReducer,d=n("ctsD9mWH").store,t.TableBoardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)f.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.className="table-board-view",t.prototype.viewName="TableBoardView",t.prototype.initialize=function(e){var t;return this._tasklistId=e._tasklistId,this._projectId=e._projectId,this._organizationId=e._organizationId,this._smartGroupId=e._smartGroupId,this.smartGroupQuery=e.smartGroupQuery,this.tableFeatureMap=e.tableFeatureMap,this.tableViewAppId=e.tableViewAppId,this.taskflowEnabled=e.taskflowEnabled,this.appName=e.appName,this.tasks$=e.tasks$,this.customFieldValues=e.customFieldValues,this.getNewTaskSnippet=e.getNewTaskSnippet,this.onGroupExpand=e.onGroupExpand,this.onGroupCollapse=e.onGroupCollapse,this.updateUrl=e.updateUrl,this.useDraggableConfigure=e.useDraggableConfigure,this.useGroups=e.useGroups,this.placeholderNotice=e.placeholderNotice,this.strictHierarchy=null!=(t=e.strictHierarchy)&&t,this.onLoad=e.onLoad,this.hasLoader=e.hasLoader,this.loadMore=e.loadMore,this.setIsUsingFilter=e.setIsUsingFilter,this.setTql=e.setTql,this.enableSprintFeature=e.enableSprintFeature,this.disableSprintHandlers=e.disableSprintHandlers,this.onCreateTask=e.onCreateTask,this.onCreateTaskSuccess=e.onCreateTaskSuccess,this.defaultCellDescriptorList=e.defaultCellDescriptorList,r.measure(),this.render()},t.prototype.render=function(){return n.e(32).then((e=this,function(t){var r,a,o,i,s;if(e.el)return e.tableBoardBridge=n("FeNmnK3V"),o=(s=n("BSQrDwTo")).epic,a=s.actions,i=n("BSQrDwTo").default,r=n("3Lk1vxQq").TableBoardContainer,c(o),p({tableBoard:i},"tableBoard"),e.subscription=e.fetch().subscribe(function(t){if(e.project=t[0],e.tasklist=t[1],e.assign(l.extend(e.getSortMethod(),e.getFilter())),e.project.enableSmartGroupSortMethod()&&e.listenTo(e.project,"change:smartGroupsSort",function(){return e.assign(e.getSortMethod())}),e.tasklist)return e.listenTo(e.tasklist,"change:filter",function(){return e.assign(e.getFilter())})}),e.requestReactView(e.el,r,l.extend({tasklistId:e._tasklistId,projectId:e._projectId,organizationId:e._organizationId,smartGroupId:e._smartGroupId,smartGroupQuery:e.smartGroupQuery,tableFeatureMap:e.tableFeatureMap,tableViewAppId:e.tableViewAppId,taskflowEnabled:e.taskflowEnabled,tasks$:e.tasks$,customFieldValues:e.customFieldValues,getNewTaskSnippet:e.getNewTaskSnippet,updateUrl:e.updateUrl,useDraggableConfigure:e.useDraggableConfigure,useGroups:e.useGroups,placeholderNotice:e.placeholderNotice,strictHierarchy:e.strictHierarchy,onGroupExpand:function(t){return"function"==typeof e.onGroupExpand&&e.onGroupExpand(t),d.dispatch(a.onTaskGroupExpand(t))},onGroupCollapse:function(t){return"function"==typeof e.onGroupCollapse&&e.onGroupCollapse(t),d.dispatch(a.onTaskGroupCollapse(t))},onLoad:function(){return e.onLoad()},hasLoader:e.hasLoader,loadMore:e.loadMore,setIsUsingFilter:e.setIsUsingFilter,setTql:e.setTql,onCreateTask:e.onCreateTask,onCreateTaskSuccess:e.onCreateTaskSuccess,defaultCellDescriptorList:e.defaultCellDescriptorList,enableSprintFeature:e.enableSprintFeature},e.disableSprintHandlers),{redux:!0})}).bind(null,n)).catch(n.oe);var e},t.prototype.remove=function(){var e,n;return null!=(e=this.subscription)&&e.unsubscribe(),null!=(n=this.tableBoardBridge)&&n.finalize(),t.__super__.remove.apply(this,arguments)},t.prototype.assign=function(e){return this.tableBoardBridge.assign(e)},t.prototype.fetch=function(){return a.forkJoin(a.from(this.getProject()),a.from(this.getTasklist()))},t.prototype.getSortMethod=function(){return{sortMethod:this.project.getCurrentSortMethod(this.appName)}},t.prototype.getFilter=function(){var e;return{filter:(null!=(e=this.tasklist)?e.get("filter"):void 0)||""}},t.prototype.getProject=function(){return new Promise((e=this,function(t,n){return o.fetch(e._projectId,{error:function(e,t){return n(t)},success:function(e){return t(e)}})}));var e},t.prototype.getTasklist=function(){return this._tasklistId?new Promise((e=this,function(t,n){return i.fetch(e._tasklistId,{error:function(e,t){return n(t)},success:function(e){return t(e)}})})):Promise.resolve();var e},t}()},okOTINwH:function(e,t,n){var r=n("0T/aeGnq");r(r.S,"Number",{isInteger:n("NFcsDlfk")})},p0XBHsXn:function(e,t,n){e.exports=n("1gQuewph")},p9MRCN7c:function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},pFJPNtY8:function(e,t,n){"use strict";n.r(t),n.d(t,"getAxises",function(){return u}),n.d(t,"panesDataSelector",function(){return d}),n.d(t,"panesSelector",function(){return f}),n.d(t,"lanesSelector",function(){return h}),n.d(t,"cardsMapSelector",function(){return m});var r=n("a+N5u/Cl"),a=n.n(r),o=n("peh1clMB"),i=n("px/Tdvb+"),s=n("lfya3Nc5"),l=n("fcolQD49"),c=n("6QBfePnW"),p=n("gm4QKkGU"),u=function(e,t,n,r,a,o,i){switch(e){case l.a.AxisType.priority:return l.b.priorityAxises();case l.a.AxisType.stage:return l.b.stageAxises(r);case l.a.AxisType.iterationSprint:return l.b.iterativeSprintAxises(t);case l.a.AxisType.taskflowStatus:return l.b.taskflowStatusAxises(a);case l.a.AxisType.scenarioConfigStatus:return l.b.scenarioFieldConfigStatusAxises(a,i||[]);case l.a.AxisType.noop:return l.b.noopAxises();case l.a.AxisType.taskflow:return l.b.taskflowAxises(t,o);case l.a.AxisType.scenarioConfig:return l.b.scenarioConfigAxises(n)}return[]},d=Object(o.createSelector)(function(e){return e.ui.board.boardViewType.paneType},function(e){return e.ui.kanban.stages},function(e){return e.ui.board.boardViewType.scenarioFieldIds},function(e){return e.ui.board.boardViewType.scenarioFieldConfigs},function(e,t,n,r){if(!Object(s.isStatusPaneType)(e))return t;var o=r.find(function(e){return e._id===n[0]});if(!o)return[];var i=o.taskflowstatuses||[];return a.a.sortBy(i,function(e){return e.pos})}),f=Object(o.createSelector)(d,function(e){return e.ui.kanban.tasks},function(e){return e.ui.board.boardViewType.paneType},function(e){return e.ui.kanban.scenarios},function(e){return e.ui.kanban.stages},function(e){return e.ui.kanban.taskflows},function(e){return e.ui.board.boardViewType.taskflowId},function(e){return e.ui.board.boardViewType.scenarioFieldIds},function(e,t,n,r,a,o,i,l){var c=o.find(function(e){return e._id===i}),p=Object(s.isStatusPaneType)(n)?e:[];return u(n,t,r,a,p,c,l)}),h=Object(o.createSelector)(d,function(e){return e.ui.kanban.tasks},function(e){return e.ui.board.boardViewType.laneType},function(e){return e.ui.kanban.scenarios},function(e){return e.ui.kanban.stages},function(e){return e.ui.kanban.taskflows},function(e){return e.ui.board.boardViewType.taskflowId},function(e,t,n,r,a,o,i){var s=o.find(function(e){return e._id===i}),c=n===l.a.AxisType.taskflowStatus?e:[];return u(n,t,r,a,c,s)}),m=Object(o.createSelector)(f,h,function(e){return e.ui.kanban.tasks},function(e){return e.ui.board.boardViewType.laneType},function(e){return e.ui.board.boardViewType.paneType},function(e){return e.ui.kanban.scenarios},function(e){return e.ui.kanban.filter},function(e){return e.ui.scrumPanel.sortMethod},function(e,t,n,r,a,o,s,u){n=s?n.filter(function(e){if(o&&e._scenariofieldconfigId){var t=o.find(function(t){return t._id===e._scenariofieldconfigId});t&&(e=Object(p.parseTaskWithScenarioFieldConfig)(e,t))}return c.filterOne(e,s)}):n;var d=l.c.getTaskBucket(n,t,r,e,a);return u?(d.forEach(function(e){e.sort(function(e,t){return Object(i.sort)(e,t,u)})}),d):d})},"pH/FQWVd":function(e,t,n){e.exports=!n("fZVSkaeT")&&!n("14Ie4PSQ")(function(){return 7!=Object.defineProperty(n("Ev2A6RPu")("div"),"a",{get:function(){return 7}}).a})},pLtpNf2v:function(e,t,n){e.exports=n("/ab8lKMF")},pOjRmLcH:function(e,t,n){e.exports={"board-view-top-mode":"board-view-top-mode__20ny","board-view-top-mode-trigger":"board-view-top-mode-trigger__2cMi","more-menu-container":"more-menu-container__v3uM","more-trigger":"more-trigger__1wdU"}},pasipYkk:function(e,t,n){var r=n("qBJymNSa"),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},ptyzp6aa:function(e,t,n){},pvHkd0JL:function(e,t,n){},qBJymNSa:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},qgDNSjYY:function(e,t){e.exports=function(e){var t="";return e.isStartTimeEnabled&&(t+=' <div class="handler-wrap more-set"> <div class="component-mount start-date"></div> </div>'),t+='<div class="handler-wrap more-set"> <div class="component-mount due-date"></div></div>'}},r36LkUX8:function(e,t,n){n("UOkdRofj");var r=n("p9MRCN7c").Object;e.exports=function(e,t){return r.create(e,t)}},rGIRGV8z:function(e,t,n){},rzKXt0Vr:function(e,t,n){},s3alpFsE:function(e,t,n){e.exports={tabs:"tabs__1KOG",active:"active__2jCO","one-tab":"one-tab__3TUS","pane-create":"pane-create__39Gg","create-title":"create-title__VUsk","pane-temp":"pane-temp__32ax","temp-list":"temp-list__87JT","temp-item":"temp-item__3WeB","temp-select-icon":"temp-select-icon__Mqy7","temp-remove-icon":"temp-remove-icon__1cEr","temp-img":"temp-img__5t7_",tasklist_custom:"tasklist_custom__20HV",tasklist_design:"tasklist_design__2Fa2",tasklist_develope:"tasklist_develope__1lZK",tasklist_support:"tasklist_support__13Pu","temp-info":"temp-info__104w","temp-title":"temp-title__2M_v","pane-footer":"pane-footer__3WJ2"}},"sCGnRAW/":function(e,t,n){e.exports={"sprint-planning-modal":"sprint-planning-modal__1QRc"}},sFaUJMZB:function(e,t,n){e.exports={"error-hint":"error-hint__kcZ9"}},sTJhJlRY:function(e,t,n){"use strict";n.r(t);var r=n("q1tIBJhx"),a=n.n(r),o=n("/MKjzBat"),i=n("TSYQbtd+"),s=n.n(i),l=n("tLZJUYWX"),c=n.n(l),p=n("GESwhXbR"),u=n("t6tM/GMl"),d=Object(o.connect)(null,function(e){return{openSprintPlanningModal:function(t){return e(u.a.openModal.create(t))}}})(function(e){var t=e.openSprintPlanningModal,n=e.projectId,r=e.planningSprintId,o=e.height,i=e.width,s=e.gtaControl,l=a.a.useCallback(function(){t({projectId:n,planningSprintId:r,gtaControl:s})},[s,t,n,r]),u=a.a.useMemo(function(){return{height:o,width:i}},[o,i]);return a.a.createElement(p.Button,{onClick:l,style:u},c.a.get("sprint.planning"))});var f=n("CGal/mJM"),h=n("OZLHl8pJ"),m=n.n(h);n.d(t,"EmptySprintPlaceholderConnect",function(){return v});var g=n("SH0iX7/S");var v=Object(o.connect)(function(e,t){var n=e.ui.board.boardViewType.scenarioFieldIds[0],r=e.ui.board.boardViewType.boardMode;return{onOpenTaskCreator:function(){r===f.BoardViewType.Kanban?t.openTaskCreator(n):t.openTaskCreator()}}})(function(e){var t=e.disableSprintPlanning?null:a.a.createElement(d,{projectId:e.projectId,planningSprintId:e.planningSprintId,height:40,width:106,gtaControl:"Initialization Button"}),n=e.disableTaskCreate?null:a.a.createElement(p.TextButton,{color:"blue",onClick:e.onOpenTaskCreator},c.a.get("sprint.task.board.create.task")),r=s()(m.a["empty-sprint-placeholder"],{"with-bg":e.isIterationSprint});return a.a.createElement("div",{className:r},a.a.createElement("img",{src:g}),a.a.createElement("span",null,c.a.get("sprint.task.board.empty")),t,n)})},sfyrld5C:function(e,t,n){"use strict";n.r(t),n.d(t,"updateTaskCreatorMode$",function(){return a});var r=n("8yf6doCl"),a=new r.Subject},"t4/7BFce":function(e,t,n){"use strict";var r=n("/MKjzBat"),a=n("peh1clMB"),o=n("lfya3Nc5"),i=n("M8UQBQTP"),s=n("dbBRp+if"),l=n("mrSGxOB2"),c=n("q1tIBJhx"),p=n.n(c),u=n("a+N5u/Cl"),d=n.n(u),f=n("tLZJUYWX"),h=n.n(f),m=n("sa1Ed382"),g=n("GESwhXbR"),v=n("oRPyOBnq"),b=n("KIkj+38N"),y=n("j6KeIaDK"),k=n("1trQBWPx"),S=n("u/2i3zbL"),C=n.n(S);function w(e){return p.a.createElement("div",{className:C.a["config-icon"]},p.a.createElement(v.FieldIcon,{icon:e,type:"task"}))}function I(e){var t=p.a.createElement("div",{className:C.a["config-icon"]},p.a.createElement("div",{className:C.a["multi-icon"]},p.a.createElement(g.Icon,{name:"more",size:12})));return e.length>1?t:w(e[0].icon)}n.d(t,"b",function(){return T}),n.d(t,"a",function(){return E});var T=Object(a.createSelector)(function(e){return e.ui.board.boardViewType.scenarioFieldConfigs},function(e){return e.ui.scrumPanel.filters.scenariofieldconfigId},function(e,t){return Object(o.formatConfigsFromScrumPanel)(e,t)}),E=Object(r.connect)(function(e,t){var n=t.projectId,r=e.ui.board.boardViewType,a=r.paneType,l=r.laneType,c=r.boardMode,p=r.scenarioFieldIds,u=r.taskflows,d=T(e),f=Object(s.getCurrentSprint)(e),h=f&&f._projectId===n?f._id:void 0;return{paneType:a,laneType:l,scenarioFieldIds:p,scenarioFieldConfigs:d,statusSelectorVisible:Object(o.showStatusSelector)(c,a,d),selectStatusSelector:i.a,taskflows:u,currentSprint:h}})(function(e){var t=l.f(Object(c.useState)(!1),2),n=t[0],r=t[1];Object(c.useEffect)(function(){i()},[e.scenarioFieldConfigs]);var a=Object(c.useCallback)(function(t){var n=e.taskflows.find(function(e){return e._id===t});return n&&n.name},[e.taskflows]),i=Object(c.useCallback)(function(){var t=e.scenarioFieldConfigs,n=e.scenarioFieldIds,r=e.paneType;if(!d.a.isEmpty(s)&&!d.a.isEmpty(t)&&Object(o.isScenarioConfigStatus)(r)){var a=Object(o.getTaskflowIdFromSFCId)(t,s[0]._id)||null,i=s.filter(function(e){return e._taskflowId===a}).map(function(e){return e._id}),l=d.a.isEmpty(i)?[t[0]._id]:i;!Object(b.isEqualArraySet)(l,n)&&e.selectStatusSelector({scenarioFieldIds:l,taskflowId:a,paneType:e.paneType,laneType:e.laneType})}},[e.scenarioFieldConfigs,e.scenarioFieldIds,e.selectStatusSelector,e.paneType,e.laneType]),s=Object(o.getScenarioConfigs)(e.scenarioFieldConfigs,e.scenarioFieldIds);if(!s.length)return null;var u,f,v=function(t,n){m.gta.event({action:"change task type",note1:e.scenarioFieldConfigs.length.toString(),note2:t.length.toString()}),e.isSmartGroup||Object(k.c)({sprintId:e.currentSprint,scenarioFieldIds:t,tasklistId:e.tasklistId}),e.selectStatusSelector({scenarioFieldIds:t,taskflowId:n,paneType:e.paneType,laneType:e.laneType,hasStatusSelectorChange:!0})},S=(u=e.scenarioFieldConfigs,f=new Map,u.forEach(function(e){var t=f.get(e._taskflowId);t?t.push(e):f.set(e._taskflowId,[e])}),f);if(!e.statusSelectorVisible)return null;var T=Object(y.b)({isActive:n,name:s.map(function(e){return e.name}).join("，"),leftIcon:I(s),className:C.a["status-selector-trigger"]}),E=function(e,t,n,r){var a=Array.from(e).map(function(e){var a=l.f(e,2),o=a[0],i=a[1],s=r(o),c=i.map(function(e){var r=t.some(function(t){return t===e._id});return function(e,t,n){return p.a.createElement(g.MenuItem,{key:e._id,className:C.a["status-option"],onClick:function(){return n(e._id,t)}},p.a.createElement("div",null,w(e.icon),p.a.createElement("span",{className:C.a["status-name"]},e.name)),t&&p.a.createElement(g.Icon,{className:C.a.tick,name:"tick"}))}(e,r,n)});return p.a.createElement("section",{className:C.a["taskflow-section"],key:o},p.a.createElement("div",{className:C.a["taskflow-name"]},s),c)}),o=p.a.createElement(g.Menu,null," ",a),i=p.a.createElement("div",{key:"footer",className:C.a["select-footer"]},h.a.get("kanban.status.selector.footer.description"));return p.a.createElement(p.a.Fragment,null,o,i)}(S,e.scenarioFieldIds,function(t,n){var a=e.scenarioFieldIds,i=e.scenarioFieldConfigs,c=Object(o.getTaskflowIdFromSFCId)(i,t);if((!n||1!==a.length)&&c)if(n){var p=a.filter(function(e){return e!==t});v(p,c)}else if(s[0]._taskflowId===c)v(l.h(a,[t]),c);else{var u=S.get(c);u&&1!==u.length||r(!1),v([t],c)}},a);return p.a.createElement(g.Dropdown,{opened:n,persistence:!0,onVisibleChange:r,content:E,placement:"bottomLeft"},T)})},tE7INp4w:function(e,t,n){"use strict";n.r(t);var r=n("U3116aoz"),a=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),l=n.n(s),c=n("s0r7VfKc"),p=n("gh8QIhMV"),u=n("G+qFsxjs"),d=n("4c1CS0b3"),f=n("wXdae0Ti"),h=n.n(f),m=function(e){function t(t){var n=e.call(this,t)||this;return n.socketPattern="smartgroups",n.subscriptionList=[],n.handleCommonGroupMove=function(e,t){var r=c.default.fetch.moveCommonGroup(e,n.props.projectId,n.props.smartGroupId,t).subscribe();n.subscriptionList.push(r)},n.state={taskCount:0},n}return a.d(t,e),t.prototype.componentDidMount=function(){var e,t,n,r,a,o=this,i=(e=this.props.smartGroupId,t=this.socketPattern,n="commonGroupsPanel",r=c.default.fetch.getSmartGroupResourceCount(e),a=c.default.socketProxy.fromRefresh(t,n).filter(function(t){return t.id===e}).debounceTime(800).switchMap(function(){return c.default.fetch.getSmartGroupResourceCount(e)}).share(),d.Observable.merge(r.takeUntil(a),a)).subscribe(function(e){var t=e.taskCount.total;o.setState({taskCount:t})},function(e){Object(p.throwError)(e)});this.subscriptionList.push(i)},t.prototype.componentWillUnmount=function(){this.subscriptionList.forEach(function(e){return e.unsubscribe()})},t.prototype.render=function(){var e,t=this.props,n=t.smartGroupId,o=t.smartGroupType,s=a.g(t,["smartGroupId","smartGroupType"]),c=this.state.taskCount;return o&&("story"===(e=o)||"bug"===e)?i.a.createElement("div",{className:h.a["common-groups-panel"]},i.a.createElement(r.CommonGroupsConnect,a.a({},s,function(e){var t,n;switch(e){case"story":return{i18nContext:{"panel.title":l.a.get("story.group"),"create.button":l.a.get("story.group.create"),"menu.title":l.a.get("story.group.edit.menu"),"menu.edit":l.a.get("story.group.edit"),"menu.delete":l.a.get("story.group.delete"),"menu.delete.hint":l.a.get("story.group.delete.hint"),"modal.duplicate":l.a.get("story.group.edit.error.duplicate.name"),"modal.edit":l.a.get("story.group.edit"),"modal.create":l.a.get("story.group.create")},fixedGroupNames:(t={},t[r.FixedCommonGroup.All]=Object(u.a)("story"),t)};case"bug":return{i18nContext:{"panel.title":l.a.get("bug.group"),"create.button":l.a.get("bug.group.create"),"menu.title":l.a.get("bug.group.edit.menu"),"menu.edit":l.a.get("bug.group.edit"),"menu.delete":l.a.get("bug.group.delete"),"menu.delete.hint":l.a.get("bug.group.delete.hint"),"modal.duplicate":l.a.get("bug.group.edit.error.duplicate.name"),"modal.edit":l.a.get("bug.group.edit"),"modal.create":l.a.get("bug.group.create")},fixedGroupNames:(n={},n[r.FixedCommonGroup.All]=Object(u.a)("bug"),n)}}}(o),function(e){return{gtaContext:{type:g[e]}}}(o),{appId:n,appSocketPattern:this.socketPattern,resourceCount:c,onMoveCommonGroup:this.handleCommonGroupMove}))):null},t}(o.PureComponent);var g={story:"story group",bug:"bug group"};n.d(t,"CommonGroups",function(){return r.CommonGroups}),n.d(t,"CommonGroupsConnect",function(){return r.CommonGroupsConnect}),n.d(t,"FixedCommonGroup",function(){return r.FixedCommonGroup}),n.d(t,"isFixedCommonGroup",function(){return r.isFixedCommonGroup}),n.d(t,"actions",function(){return r.actions}),n.d(t,"dispatchUpdateCurrentCommonGroup",function(){return r.dispatchUpdateCurrentCommonGroup}),n.d(t,"getStoredCurrentCommonGroup",function(){return r.getStoredCurrentCommonGroup}),n.d(t,"getCommonGroupFolded",function(){return r.getCommonGroupFolded}),n.d(t,"setCommonGroupFolded",function(){return r.setCommonGroupFolded}),n.d(t,"reducer",function(){return r.reducer}),n.d(t,"epic",function(){return r.epic}),n.d(t,"getSiblingCommonGroups",function(){return r.getSiblingCommonGroups}),n.d(t,"getCommonGroupInfo",function(){return r.getCommonGroupInfo}),n.d(t,"sortMethod",function(){return r.sortMethod}),n.d(t,"currentGroupAsFilterValue",function(){return r.currentGroupAsFilterValue}),n.d(t,"CommonGroupsPanel",function(){return m})},"taoMwXg+":function(e,t,n){var r=n("bh8VM13d");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"u/2i3zbL":function(e,t,n){e.exports={"status-option":"status-option__NfQa",tick:"tick__1I9P","config-icon":"config-icon__3IVQ","multi-icon":"multi-icon__1GrI","status-name":"status-name__3agm","select-footer":"select-footer__2Ouc","status-selector-trigger":"status-selector-trigger__2EDo","taskflow-section":"taskflow-section___z2A","taskflow-name":"taskflow-name__153_"}},"uOAddLi+":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("q1tIBJhx"),a=r.createContext({objectType:"task"})},v7QLi0cz:function(e,t,n){},vCXkxmw9:function(e,t,n){var r=n("8v5WvJ9g");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},"vKEp+sif":function(e,t,n){},vrpOmW4L:function(e,t,n){e.exports={"path-icon":"path-icon__1s15","path-wrapper":"path-wrapper__TbT4","with-animation":"with-animation__3IGI",fadeAnimation:"fadeAnimation__13w-"}},wWUKyXWt:function(e,t,n){var r=n("0T/aeGnq"),a=n("p9MRCN7c"),o=n("14Ie4PSQ");e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",i)}},wXdae0Ti:function(e,t,n){e.exports={"common-groups-panel":"common-groups-panel__1UZL"}},x2TBq91N:function(e,t,n){n("3Ju61Gsa"),e.exports=n("p9MRCN7c").Object.values},yOSp9FUu:function(e,t,n){e.exports={"agile-left-panel":"agile-left-panel__lGcg",separator:"separator__yiP4"}},yaguHIwG:function(e,t,n){"use strict";n.r(t),n.d(t,"SprintTaskBoardView",function(){return r});var r=n("9cNzPlYz").SprintTaskBoardView},yzrhisjT:function(e,t){e.exports=function(e){return'<div class="import-excel-trigger"></div><div class="import-excel-wrapper"></div>'}},"z/NnslgL":function(e,t,n){var r=n("djPm8zSj"),a=n("aput1Sxn"),o=n("1077v0Sy").f;e.exports=function(e){return function(t){for(var n,i=a(t),s=r(i),l=s.length,c=0,p=[];l>c;)o.call(i,n=s[c++])&&p.push(e?[n,i[n]]:i[n]);return p}}},zOGvvE77:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),a=n("q1tIBJhx"),o=n.n(a),i=n("tLZJUYWX"),s=n.n(i),l=n("GESwhXbR"),c=n("sa1Ed382"),p=n("HLaCnIR0"),u=n("5qt3k8Zi"),d=n("cP1fe9Vv"),f=n.n(d),h=function(e){var t=Object(a.useCallback)(function(){c.router.enterProject(e.project._id,"tasks"),e.onClose()},[e.project._id,e.onClose]);return o.a.createElement(l.Modal,{width:Object(l.getQuadUnit)(115),titleCls:"hidden",closeable:!1,containerCls:f.a.container,defaultOpened:!0,onHide:e.onClose},o.a.createElement("div",{className:"head"},o.a.createElement("h1",null,s.a.get("sprint.app.custom.views.migration.guide.title")),o.a.createElement(l.Icon,{name:"remove",onClick:e.onClose})),o.a.createElement("div",{className:"body"},o.a.createElement("div",{className:"image"}),o.a.createElement("p",{className:"description"},s.a.get("sprint.app.custom.views.migration.guide.description")),o.a.createElement(l.Button,{className:"button",onClick:t},s.a.get("sprint.app.custom.views.migration.guide.button"))))},m=function(e){if(!Object(u.hasVisitedSprintAppCustomViewsMigrationGuide)()){p.b(o.a.createElement(h,r.a({},e,{onClose:function(){p.a(),Object(u.markVisitedSprintAppCustomViewsMigrationGuide)()}})))}},g=function(e,t){var n=v(),r=new Date(e.created).valueOf(),a=new Date(c.user.get("created")).valueOf();return r<n&&a<n&&"sprint"===t.type},v=function(){switch(c.env){case"br":case"release":case"us":return new Date("2019-07-25").valueOf();case"ga":return new Date("2019-07-18").valueOf();default:return Date.now()}};n.d(t,"openSprintAppCustomViewsMigrationGuide",function(){return m}),n.d(t,"shouldOpenSprintAppCustomViewsMigrationGuide",function(){return g})},zZceAwBt:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var r=n("mrSGxOB2"),a=n("q1tIBJhx"),o=n("tLZJUYWX"),i=n("a+N5u/Cl"),s=n("TSYQbtd+"),l=n.n(s),c=n("sa1Ed382"),p=n("GESwhXbR"),u=n("YqUJfXDr"),d=n("DOZCBSCZ"),f=n("zT6SYcu2"),h=n("90U+kJWN"),m=n("LSIBDi4B"),g=n("+Hm9+wvf"),v=[f.e.Common,f.e.User,f.e.Date,f.e.Progress],b=[f.e.Customfield],y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=e.isInProject;return a.createElement("section",{className:g.group},a.createElement(p.Separator,{full:!1}),a.createElement("p",{className:g["group-title"]},function(e){return void 0===e&&(e=!1),{common:o.get("searcher.group.category.common"),user:o.get("searcher.group.category.user"),date:o.get("searcher.group.category.date"),progress:o.get("searcher.group.category.progress"),customfield:e?o.get("searcher.group.category.customfield.project"):o.get("searcher.group.category.customfield")}}(n)[t.toLowerCase()]),a.createElement("ul",{className:g["group-body"]},this.props.children))},t.defaultProps={groupped:!0},t}(a.PureComponent),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=l()(g.list,"thin-scroll");return a.createElement("div",{className:e},this.props.children)},t}(a.PureComponent),S=Object(p.Selectable)(k),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refInput=function(e){t.input=e},t.getSelectableResults=function(e){t.selectableResults=e},t.getName=function(e){return e.name||o.get(e.i18Key)||""},t.getOrderedSearchers=function(){return i.chain(t.getOrderedList()).pluck("searchers").flatten().value()},t.getOrderedSearchersByCategory=function(e){var n=i.find(t.getOrderedList(),function(t){return t.category===e});return n?n.searchers:[]},t.getOrderedList=function(){var e=t.props,n=e.schemaType,a=e.isCustomSearcherShowed,o=t.getHiddenSearcherGroups(),s=i.chain(v).map(function(e){var t=i.find(o,function(t){return t.category===e});return t?{category:t.category,searchers:t.searchers.filter(function(e){return i.contains(e.objectType,n)})}:null}).compact().value(),l=i.chain(b).map(function(e){return i.find(o,function(t){return t.category===e})}).compact().value();return a?r.h(s,l):s},t.getSearchList=function(){var e=t.props,n=e.searcherGroups,a=e.customfieldsSearchers,o=e.customfieldsResult,s=e.schemaType,l=e.isCustomSearcherShowed,c=t.props.invisibleSearcherIds,p=void 0===c?[]:c,u=l?a:[],d=l?o:[],f=i.chain(n).pluck("searchers").flatten().filter(function(e){return i.contains(e.objectType,s)}).value();return i.chain(r.h(f,u)).filter(function(e){return t.getName(e).indexOf(t.props.input.trim())>=0}).filter(function(e){return!p.includes(e.id)}).concat(d).uniq("id").value()},t.filterFn=function(e){var t=!0;return(t=e.type!==u.LoadMore&&e.type!==d.a)&&(t=e.props.className.split(" ").indexOf("shown")<0),t},t.handleGTAShowSearcher=function(e){c.gta.event(r.a({action:"added filter",category:e.tqlKey,type:Object(m.a)(e.id,e.advancedCustomfieldObjectType)||e.type.toLowerCase()},t.props.gta))},t.onOpen=function(){window.setTimeout(function(){t.input.focus()},0),t.props.getCustomfieldsSearchers()},t.onClose=function(){t.props.toggleDropdown(!1)},t.onVisibleChange=function(e){e&&c.gta.event(r.a({action:"add filter",method:"click"},t.props.gta)),t.props.toggleDropdown(e)},t.onSelect=function(e){var n;t.props.inSearch?(n=t.getSearchList()[e])&&(t.props.showCustomfieldsSearcher(n),t.handleGTAShowSearcher(n)):(n=t.getOrderedSearchers()[e])&&(t.props.showSearcher(n.id),t.handleGTAShowSearcher(n));t.onClose()},t.onSelectByCategory=function(e,n){var r=t.getOrderedSearchersByCategory(e)[n];r&&t.props.showSearcher(r.id)},t.onKeyDown=function(e){t.selectableResults&&t.selectableResults.keyboardHandler(e)},t.onQueryChange=function(e){t.props.changeInput(e.target.value),c.gta.event(r.a({action:"search filter",type:"task",method:"keyboard"},t.props.gta))},t.renderDropdownContent=function(){return a.createElement("div",{className:g.content},t.renderSearchInput(),t.renderSelect(),t.renderPlaceholder())},t.isListEmpty=function(){var e=t.getOrderedList().reduce(function(e,t){return e+t.searchers.length},0);return!t.props.isCustomFiltersLoading&&!t.props.hasMore&&0===e},t.isSearchListEmpty=function(){return!t.props.isSearchLoading&&!t.props.searchHasMore&&0===t.getSearchList().length},t.hasNoResults=function(){return t.props.inSearch?t.isSearchListEmpty():t.isListEmpty()},t}return r.d(t,e),t.prototype.getHiddenSearcherGroups=function(){var e=this.props,t=e.searcherGroups,n=e.showedSearchers,a=e.invisibleSearcherIds,o=e.customfieldsSearchers,s=n.concat(a||[]);return i.chain(t).concat([{category:f.e.Customfield,searchers:o}]).map(function(e){var t=e.searchers,n=r.g(e,["searchers"]);return r.a({},n,{searchers:t.filter(function(e){return-1===s.indexOf(e.id)})})}).filter(function(e){return e.searchers.length>0}).value()},t.prototype.renderSearchers=function(e){var t=this;return e.searchers.map(function(n,r){return a.createElement("li",{className:g.item,key:"searcher-"+n.id,onClick:function(){t.onSelectByCategory(e.category,r),t.props.toggleDropdown(!1),t.handleGTAShowSearcher(n)}},a.createElement("p",{className:g["item-name"]},t.getName(n)),a.createElement("p",{className:g["item-description"]},n.description||""))})},t.prototype.renderSearchResult=function(e){var t=this;return e.map(function(e){var n=t.props.showedSearchers.indexOf(e.id)>=0,r=l()(g.item,{shown:n}),i=t.getName(e),s=n?i+" "+o.get("search.filter.searcher.selector.shown.label"):i;return a.createElement("li",{className:r,key:"searcher-"+e.id,onClick:function(){n||(t.props.showCustomfieldsSearcher(e),t.props.toggleDropdown(!1),t.handleGTAShowSearcher(e))}},a.createElement("p",{className:g["item-name"]},s),a.createElement("p",{className:g["item-description"]},e.description||""))})},t.prototype.renderGroups=function(){var e=this;return this.getOrderedList().map(function(t){var n=t.searchers,r=t.category;return n.length&&a.createElement(y,{key:r,type:r,isInProject:!!e.props.projectId},e.renderSearchers(t))})},t.prototype.renderLoadMore=function(){var e=this.props,t=e.isCustomSearcherShowed,n=e.hasMore,r=e.getCustomfieldsSearchersLoadMore,o=e.organizationId,i=e.projectId;return(o||i)&&t?a.createElement(u.LoadMore,{key:"loadmore",hasMore:n,onEnter:r}):null},t.prototype.renderSearchLoadMore=function(){return(this.props.organizationId||this.props.projectId)&&a.createElement(u.LoadMore,{key:"search-loadmore",hasMore:this.props.searchHasMore,endWith:null,onEnter:this.props.searchCustomfieldsSearchersLoadMore})},t.prototype.renderSelect=function(){var e=this.props.inSearch?r.h(this.renderSearchResult(this.getSearchList()),[this.renderSearchLoading(),this.renderSearchLoadMore()]):r.h(Object(h.flattenPlainGroup)(Object(h.iterator)(this.renderGroups())),[this.renderLoading(),this.renderLoadMore()]);return!this.hasNoResults()&&a.createElement(S,{ref:this.getSelectableResults,focusable:!1,index:-1,filterFn:this.filterFn,onEnter:this.onSelect},e)},t.prototype.renderSearchInput=function(){var e=l()("form-control",g.input);return a.createElement("input",{ref:this.refInput,className:e,value:this.props.input,onChange:this.onQueryChange,placeholder:o.get("global.search.filter.panel.searcher.filter.input"),onKeyDown:this.onKeyDown})},t.prototype.renderLoading=function(){return this.props.isCustomFiltersLoading&&a.createElement(d.a,{key:"loading"})},t.prototype.renderSearchLoading=function(){return this.props.isSearchLoading&&a.createElement(d.a,{key:"loading"})},t.prototype.renderPlaceholder=function(){return this.hasNoResults()&&a.createElement("div",{className:g.placeholder},a.createElement("div",{className:g["placeholder-img"]}),a.createElement("p",{className:g["placeholder-tip"]},o.get("search.filter.selector.not.found")))},t.prototype.renderTrigger=function(){return a.createElement(p.TextButton,{color:"blue",className:g.trigger},a.createElement(p.Icon,{name:"circle-plus"}),a.createElement("span",null,o.get("global.search.filter.panel.searcher.add")))},t.prototype.render=function(){return a.createElement(p.Dropdown,{action:"click",persistence:!0,nested:!0,className:g.dropdown,opened:this.props.dropdownOpened,onOpen:this.onOpen,onVisibleChange:this.onVisibleChange,content:this.renderDropdownContent()},this.renderTrigger())},t}(a.PureComponent)},zojuP2D5:function(e,t,n){var r,a,o,i,s,l,c,p,u,d,f,h,m,g,v=function(e,t){return function(){return e.apply(t,arguments)}},b={}.hasOwnProperty;n("01RW7bKJ"),u=n("a+N5u/Cl"),m=n("sa1Ed382"),p=n("vmWJWrVe"),n("OmupbwLD"),h=n("fio7jWQ0"),d=h.addEpic,f=h.addUIReducer,h.store,c=n("3eMzznN/"),r=n("5V57DkyA").BoardKanbanApm,s=n("nL4olqOP"),l=n("ioaOqjIU"),a=n("k7jCket7").KanbanConnect,o=n("8wJHPua6").KanbanModule,g=n("sfyrld5C").updateTaskCreatorMode$,i=n("nhJBLgj9").KanbanWarningConnect,e.exports=function(e){function t(){return this.getDefaultScenarioFieldId=v(this.getDefaultScenarioFieldId,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)b.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.className="kanban-view",t.prototype.tagName="div",t.prototype.viewName="KanbanView",t.prototype.events={"mousedown .kanban-single-lane-scroll":"dragStart"},t.prototype.initialize=function(e){var t,n,c;if(this._projectId=e._projectId,this._tasklistId=e._tasklistId,this._smartGroupId=e._smartGroupId,this.smartGroupQuery=e.smartGroupQuery,this._sprintId=e._sprintId,this.customViewId=e.customViewId,this.tasks$=e.tasks$,this.pagedTasks$=e.pagedTasks$,this.onLoadBucketTasks=e.onLoadBucketTasks,this.isDefaultBucket=e.isDefaultBucket,this._organizationId=e._organizationId,this.enableKanbanStaticPaneOfStatus=e.enableKanbanStaticPaneOfStatus,this.setIsUsingFilter=e.setIsUsingFilter,this.setTql=e.setTql,this.getNewTaskSnippet=e.getNewTaskSnippet,this.onCreateTask=e.onCreateTask,this.onCreateTaskSuccess=e.onCreateTaskSuccess,this.updateUrlOnOpenTaskDetail=e.updateUrlOnOpenTaskDetail,this.el)return r.measure(),'<div class="kanban-warning-wrapper"></div> <div class="kanban-status-select-wrapper"></div> <div class="kanban-contents-wrapper"></div>',this.$el.html('<div class="kanban-warning-wrapper"></div> <div class="kanban-status-select-wrapper"></div> <div class="kanban-contents-wrapper"></div>'),this.$warningWrapper=this.$(".kanban-warning-wrapper"),this.$kanbanWrapper=this.$(".kanban-contents-wrapper"),this.$statusSelectWrapper=this.$(".kanban-status-select-wrapper"),this._tasklistId&&(this.tasklistModel=l.getOne(this._projectId,this._tasklistId)),t=s.get(0).get(this._projectId),this.projectModel=t,f({kanban:o.reducer},"kanban"),d(o.epic),this.requestReactView(this.$kanbanWrapper.get(0),a,{gpuAcceleration:!1,onOpenTaskDetail:this.onOpenTaskDetail.bind(this),projectId:this._projectId,project:t.toJSON(),tasklist:null!=(n=this.tasklistModel)?n.toJSON():void 0,customViewId:this.customViewId,smartGroupId:this._smartGroupId,smartGroupQuery:this.smartGroupQuery,sprintId:this._sprintId,sticky:!0,tasklistId:this._tasklistId,organizationId:this._organizationId,tasks$:this.tasks$,pagedTasks$:this.pagedTasks$,uniqueIdPrefix:this.getUniqueIdPrefix(t),isAdmin:t.getRoleScope()>0,permissions:t.hasPermissions("task.post"),onLoadBucketTasks:this.onLoadBucketTasks,isDefaultBucket:this.isDefaultBucket,enableKanbanStaticPaneOfStatus:this.enableKanbanStaticPaneOfStatus,setIsUsingFilter:this.setIsUsingFilter,setTql:this.setTql,getDefaultScenarioFieldId:this.getDefaultScenarioFieldId,getNewTaskSnippet:this.getNewTaskSnippet,onCreateTask:this.onCreateTask,onCreateTaskSuccess:this.onCreateTaskSuccess},{redux:!0}),this.requestReactView(this.$warningWrapper.get(0),i,{projectId:this._projectId,sprintId:this._sprintId,tasklistId:this._tasklistId,isAdmin:t.getRoleScope()>0,canCreateTasklist:null!=(c=this.tasklistModel)?c.hasPermissions("post"):void 0,onCreateProject:this.createNewProject.bind(this)},{redux:!0}),this.listenTo(t,"change:windowModeOfAddTask",function(e,t){return g.next({windowModeOfAddTask:t})})},t.prototype.getDefaultScenarioFieldId=function(){var e;return null!=(e=this.tasklistModel)?e.get("_defaultScenariofieldconfigId"):void 0},t.prototype.createNewProject=function(){return m.APP.openCreator("project")},t.prototype.getUniqueIdPrefix=function(e){return e&&e.isAppEnabled("taskUniqueId")?e.get("uniqueIdPrefix"):null},t.prototype.dragStart=function(e){var t,n,r,a;if(r=[".kanban-head-cell",".kanban-droppable-bucket-cards",".kanban-droppable-bucket-extra"].join(", "),1===e.which&&!this.dragMove&&!$(e.target).closest(r,e.currentTarget).length)return this.dragMove=!0,t=$(e.currentTarget),n=e.pageX,t.one("mouseup.dragMove mouseleave.dragMove",(a=this,function(){return a.dragMove=!1,t.off(".dragMove")})),t.on("mousemove.dragMove",function(e){return function(r){return(c.isIE()?1===r.buttons:0===r.button)?(t.scrollLeft(n-r.pageX+t.scrollLeft()),n=r.pageX):(e.dragMove=!1,t.off(".dragMove"))}}(this))},t.prototype.onOpenTaskDetail=function(e){return m.APP.openTaskPreviewer(e,{isUsePanel:!0,hasLink:!1}),this.updateUrlOnOpenTaskDetail&&this.updateUrlWithTaskId(e),this.openTaskDetailGta()},t.prototype.updateUrlWithTaskId=function(e){return u.isFunction(this.updateUrlOnOpenTaskDetail)?this.updateUrlOnOpenTaskDetail(e):this.customViewId?m.APP.currentView.updateUrl({type:"smartGroup",_taskId:e,_smartGroupId:this.customViewId}):m.APP.currentView.updateUrl({_tasklistId:this._tasklistId,_taskId:e})},t.prototype.openTaskDetailGta=function(){return m.gta.event({action:"open detail",segment:"kanban",projectid:this._projectId})},t}()}}]);
//# sourceMappingURL=3.b7e4d21a.chunk.js.map