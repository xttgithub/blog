(this.webpackJsonp=this.webpackJsonp||[]).push([["create-project-template~teambition"],{"+69hA2nB":function(e,t,r){"use strict";r.r(t);var n=r("6SzIBtPz"),o=Object(n.a)("SYNC_DATA_TO_FIELDS_CONFIG"),i=Object(n.a)("MERGE_PROJECT_FIELDS_TO_FIELDS_CONFIG"),a=Object(n.a)("REMOVE_USE_OF_CUSTOM_FIELD"),s=Object(n.a)("MERGE_USED_FIELDIDS_TO_FIELDS_CONFIG"),u=Object(n.a)("SYNC_USED_FIELDS_TO_FIELDS_CONFIG"),c=Object(n.a)("ASSIGN_USED_FIELDINFO_TO_FIELDS_CONFIG"),l=Object(n.a)("MERGE_USEDFIELD_CONFIG_ATTR_TO_FIELDS_CONFIG"),p=Object(n.a)("UNMOUNT_FIELDS_CONFIG"),f=r("jEqYcS/s"),d=r("mrSGxOB2"),g=r("a+N5u/Cl"),h=r.n(g),m=r("ctsD9mWH"),y=r("oRqJmROU");function v(e){m.store.dispatch(o(e))}function b(e){m.store.dispatch(i(e))}function _(e){m.store.dispatch(a(e))}function S(e){m.store.dispatch(u(e))}function T(e){m.store.dispatch(c(e))}function E(){m.store.dispatch(p())}function O(e,t){b(d.h(t.keys()).map(function(t){var r=h.a.findWhere(e,{_id:t});return r&&!r.isOfficial?d.a({},r,{id:r._id,isOfficial:!1,fieldType:"customfield",type:r.type}):null}).filter(y.c)),m.store.dispatch(s(t))}function w(){return m.store.getState().ui.applicationFields.usedFieldIds}var C,I=r("V6edIaEd"),k={boundToObjectType:"task",fieldsPool:null,customfieldCategories:null,usedFieldIds:new Map,usedFieldsAttrMap:{},scenarioFieldConfigs:[],orgRoles:[]},j=function(e,t){var r,n,o=new Map(e);try{for(var i=d.i(t),a=i.next();!a.done;a=i.next()){var s=d.f(a.value,2),u=s[0],c=s[1];o.set(u,c)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},A=Object(n.b)(((C={})[""+o]=function(e,t){return d.a({},e,t.payload)},C[""+i]=function(e,t){var r=g.chain(t.payload).concat(e.fieldsPool||[]).uniq(function(e){return e.id}).value();return d.a({},e,{fieldsPool:r})},C[""+a]=function(e,t){var r=t.payload,n=new Map(e.usedFieldIds);n.delete(r);var o=e.usedFieldsAttrMap,i=r,a=(o[i],d.g(o,["symbol"==typeof i?i:i+""]));return d.a({},e,{usedFieldIds:n,usedFieldsAttrMap:a})},C[""+s]=function(e,t){var r=["taskProgress","worktimes","storyPoint"],n=e.orgRoles.filter(function(e){return Object(I.isGeneratedAdmin)(e)||Object(I.isGeneratedOwner)(e)}).map(function(e){return e._id}),o=d.h(t.payload.keys()).reduce(function(t,o){var i;return d.a({},t,((i={})[o]=e.usedFieldsAttrMap[o]?e.usedFieldsAttrMap[o]:{allowedRoleIds:r.includes(o)?n:null,allowedActors:"event"===e.boundToObjectType?["creator"]:["executor","creator"]},i))},{});return d.a({},e,{usedFieldIds:j(e.usedFieldIds,t.payload),usedFieldsAttrMap:d.a({},e.usedFieldsAttrMap,o)})},C[""+u]=function(e,t){var r=t.payload,n=r.usedFieldIds,o=r.usedFieldsAttrMap,i=e.usedFieldIds,a=e.usedFieldsAttrMap;return d.a({},e,{usedFieldIds:j(i,n),usedFieldsAttrMap:Object(f.l)(a,o)})},C[""+c]=function(e,t){return d.a({},e,t.payload)},C[""+l]=function(e,t){var r=e.usedFieldsAttrMap;return d.a({},e,{usedFieldsAttrMap:d.a({},r,t.payload)})},C[""+p]=function(){return k},C),k),P=r("XArW7AVN");r.d(t,"syncDataToFieldsConfig",function(){return o}),r.d(t,"mergeProjectFieldsToFieldsConfig",function(){return i}),r.d(t,"removeUseOfCustomField",function(){return a}),r.d(t,"mergeUsedFieldIdsToFieldsConfig",function(){return s}),r.d(t,"syncUsedFieldsToFieldsConfig",function(){return u}),r.d(t,"assignUsedFieldInfoToFieldsConfig",function(){return c}),r.d(t,"mergeUsedFieldConfigAttrToFieldsConfig",function(){return l}),r.d(t,"unmountFieldsConfig",function(){return p}),r.d(t,"serializeProjectCustomFields",function(){return f.n}),r.d(t,"checkIsCustomField",function(){return f.a}),r.d(t,"serializeOfficialFields",function(){return f.m}),r.d(t,"getOfficialFiledTypeIcon",function(){return f.i}),r.d(t,"getOfficialFiledTypeTitle",function(){return f.j}),r.d(t,"getOfficialFiledTypeData",function(){return f.h}),r.d(t,"checkIsOfficialField",function(){return f.b}),r.d(t,"getPreservedApps",function(){return f.k}),r.d(t,"getFieldIconNameAndTitle",function(){return f.g}),r.d(t,"getApplicationFieldIcon",function(){return f.f}),r.d(t,"genAllFields",function(){return f.c}),r.d(t,"genUsedFieldsInfo",function(){return f.d}),r.d(t,"mergeUsedFieldsAttrMap",function(){return f.l}),r.d(t,"getActors",function(){return f.e}),r.d(t,"dispatchSyncData",function(){return v}),r.d(t,"dispatchSyncProjectFields",function(){return b}),r.d(t,"dispatchRemoveUseOfCustomField",function(){return _}),r.d(t,"dispatchSyncUsedFieldIds",function(){return S}),r.d(t,"dispatchAssignUsedFieldInfoToFieldsConfig",function(){return T}),r.d(t,"dispatchUnmount",function(){return E}),r.d(t,"dispatchMergeCompatibleFields",function(){return O}),r.d(t,"getUsedFieldIds",function(){return w}),r.d(t,"reducer",function(){return A}),r.d(t,"taskFieldOfficialTypes",function(){return P.e}),r.d(t,"eventFieldOfficialTypes",function(){return P.b}),r.d(t,"scenarioFieldOfficialTypes",function(){return P.d}),r.d(t,"scenarioFieldCustomTypes",function(){return P.c}),r.d(t,"actors",function(){return P.a})},"+8el6hca":function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"d",function(){return i}),r.d(t,"c",function(){return a}),r.d(t,"b",function(){return s}),r.d(t,"e",function(){return u}),r.d(t,"f",function(){return c});var n=r("sa1Ed382"),o=function(e){n.gta.event({action:e,segment:"Project Setting",control:"Project Setting",type:"work flow"})},i=function(e){n.gta.event({action:e+" workflow name",segment:"Project Setting",control:"Project Setting"})},a=function(e){n.gta.event({action:e+" content",segment:"Project Setting",control:"Project Setting",type:"work flow"})},s=function(e,t){void 0===t&&(t="click"),n.gta.event({action:e+" workflow",segment:"Project Setting",control:"Project Setting",method:t})},u=function(e,t){n.gta.event({action:"edit state type",control:"rule Menu",segment:"Project Setting",category:t,type:e})},c=function(e){n.gta.event({action:"edit state target",control:"rule Menu",segment:"Project Setting",type:e})}},"+8qpssbX":function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return i});var n=r("mrSGxOB2"),o=function(e){return e&&e.error instanceof Response},i=function(e){return n.b(void 0,void 0,void 0,function(){var t;return n.e(this,function(r){switch(r.label){case 0:return o(e)?[4,e.error.json()]:[2,e?e.message:void 0];case 1:return[2,(t=r.sent())?t.message:void 0]}})})}},"+BDmEJp8":function(e,t,r){var n,o,i,a={}.hasOwnProperty;n=r("VuB9cZyl"),o=r("wu4EEviu"),i=r("EjIl6N9o"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="stages",t.prototype.model=i,t.prototype.boundToObjectType="tasklist",t.prototype.orderBy=!1,t.prototype.initialize=function(){var e;return this.on("change:isLocked",(e=this,function(t,r){if(r)return e.each(function(e){return o.trigger(":change:tasks/"+e.id+"/locked",{lockedStageId:t.id})})})),t.__super__.initialize.apply(this,arguments)},t.prototype.isLocked=function(){return this.last().get("isLocked")},t}()},"+BRvZ7rW":function(e,t,r){e.exports=r.p+"images/logo5.effdc629.jpg"},"+jTfkVXR":function(e,t,r){"use strict";r.d(t,"d",function(){return c}),r.d(t,"b",function(){return l}),r.d(t,"f",function(){return p}),r.d(t,"a",function(){return f});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r.n(o),a=r("OcUPLOSr"),s=r("yfEWqN/6"),u=r("EiUFTky8");function c(e){return void 0!==e.title}function l(e,t,r){void 0===e&&(e=[]),void 0===r&&(r=0);var n=t._id===s.b.All?e.filter(function(e){return!e.ancestorIds.length}):e.filter(function(e){return e.ancestorIds[0]===t._id}),o=e.filter(function(e){return e.ancestorIds.length===r+1}),a=n.map(function(e){return{level:r+1,entity:e,hasChildren:!!e.resourceCount,children:[]}}),u=o.length?n.map(function(t){return l(e,t,r+1)}):a;return u=i.a.sortBy(u,function(e){return e.entity.pos>=0?e.entity.pos:Number.MAX_VALUE}),{level:r,entity:t,hasChildren:!!t.resourceCount||!!u.length,children:u}}function p(e,t){return t&&t.key?e.sort(function(e,r){var n=e[t.key],o=r[t.key],i=t.order;return"priority"===t.key&&(i===a.SortOrder.ASC?i=a.SortOrder.DESC:(i=a.SortOrder.ASC,n=-1===n?Number.MAX_VALUE:n,o=-1===o?Number.MAX_VALUE:o)),i===a.SortOrder.ASC?"number"==typeof n&&"number"==typeof o?n-o:n&&!o?-1:!n&&o?1:n&&o&&n.name&&o.name?n.name.localeCompare(o.name):"string"==typeof n?n.localeCompare(o):n-o:i===a.SortOrder.DESC?"number"==typeof n&&"number"==typeof o?o-n:n&&!o?1:!n&&o?-1:n&&o&&n.name&&o.name?o.name.localeCompare(n.name):"string"==typeof n?o.localeCompare(n):o-n:0}):e.sort(function(e,t){return e.pos-t.pos})}function f(e,t,r){if(void 0===r&&(r=!1),t){var o=t.filter(function(t){return t.entity._commongroupId===e.entity._id}),i=e.children.map(function(e){return f(e,t,r)});if(e.children=o.map(function(t){return{entity:t.entity,level:e.level+1,hasChildren:!1,children:[]}}).concat(i),r){var a=i.reduce(function(e,t){return e+t.entity.resourceCount},0)+o.length,s=i.reduce(function(e,t){return e+(t.entity.doneCount||0)},0)+o.filter(function(e){return e.entity.isDone}).length;a!==e.entity.resourceCount&&(e.entity=n.a({},e.entity,{resourceCount:a})),s!==e.entity.doneCount&&(e.entity=n.a({},e.entity,{doneCount:s}))}e.hasChildren=e.hasChildren||!!e.children.length||!c(e.entity)}return e}r.d(t,"c",function(){return u.getColumnKey}),r.d(t,"e",function(){return u.mapify})},"+oE52230":function(e,t,r){e.exports=r.p+"images/works-1.7f8bfdf2.png"},"+qBEhxl5":function(e,t,r){},"+rL9Of4X":function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r("dWbDnvg6"),a=r("9MF2MLFY"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.render=function(){var e=this.props,t=e.logo,r=e.name,n=e.size;return o.createElement("div",{className:a.item,"data-role":"project-item"},o.createElement(i.a,{size:n,shape:"square",src:t,className:a.avatar}),o.createElement("span",{className:a.name},r))},t.defaultProps={size:"medium"},t}(o.PureComponent);r.d(t,"a",function(){return s})},"+uXvm93n":function(e,t,r){e.exports={content:"content__3Dmi","content-searchable":"content-searchable__26YO",input:"input__1SEG",list:"list__tH1C","item-group":"item-group__rkbS",category:"category__1Qaa",submit:"submit__tOuK",placeholder:"placeholder__2PG8","placeholder-img":"placeholder-img__1sU1","placeholder-tip":"placeholder-tip__3P35"}},"//SEpMEE":function(e,t,r){var n,o,i,a={}.hasOwnProperty;i=r("a+N5u/Cl"),n=r("VuB9cZyl"),o=r("bWU6aNtL"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="smartgroups",t.prototype.model=o,t.prototype.url=function(){return"projects/"+this._boundToObjectId+"/"+this.name},t.prototype.sync=function(e,r,n){return n.url=this.url(),t.__super__.sync.apply(this,arguments)},t.prototype.getFirstScrumModel=function(){var e;return e=this.constructor.getFirstScrumAppName(),this.findWhere({name:e})},t.getFirstScrumAppName=function(){var e;return null!=(e=i.findWhere(this.getScrumApps(),{order:1}))?e.name:void 0},t.getScrumApps=function(){return[{name:"story",i18n:"agile.requirements",order:1,icon:"icon-intelligence"},{name:"bug",i18n:"agile.bugs",order:2,icon:"icon-lightning"},{name:"sprint",i18n:"agile.sprints",order:3,icon:"icon-sprint"}]},t.getScrumAppNames=function(){return i.pluck(this.getScrumApps(),"name")},t.getSprintName=function(){return this.getScrumAppNames().find(function(e){return"sprint"===e})},t.isScrumApp=function(e){return this.getScrumAppNames().includes(e)},t}()},"/3r4N/+c":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"lightbulb",use:"lightbulb-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="lightbulb"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#9ED979" rx="2" /><g fill="#FFFFFF"><path d="M10 4.5c-2.229 0-4 1.744-4 3.938 0 1.518.914 2.924 2.286 3.543v.956c0 .338.228.563.571.563h2.286c.343 0 .571-.225.571-.563v-.956A3.921 3.921 0 0 0 14 8.437C14 6.245 12.229 4.5 10 4.5zM11.333 14.3H8.667c-.4 0-.667.24-.667.6s.267.6.667.6h2.666c.4 0 .667-.24.667-.6s-.267-.6-.667-.6z" /></g></g></symbol>'});a.a.add(s);t.default=s},"/A1HOqjB":function(e,t,r){"use strict";r.r(t),r.d(t,"toggleDashboardModal",function(){return f}),r.d(t,"assignDashboardCardId",function(){return d}),r.d(t,"refreshDashboardItems",function(){return g}),r.d(t,"fetchDashboardCard",function(){return h}),r.d(t,"fetchDashboardCardSuccess",function(){return m}),r.d(t,"fetchDashboardCardError",function(){return y}),r.d(t,"fetchDashboardCardDataurl",function(){return v}),r.d(t,"fetchDashboardCardDataurlSuccess",function(){return b}),r.d(t,"exitDashboardModal",function(){return _}),r.d(t,"reducer",function(){return S}),r.d(t,"epic",function(){return T}),r.d(t,"openDashboardModal",function(){return E});var n,o=r("mrSGxOB2"),i=r("s0r7VfKc"),a=r("tLZJUYWX"),s=r("6SzIBtPz"),u=r("NOGqly5s"),c=r("ctsD9mWH"),l=r("4c1CS0b3"),p={id:null,card:null,opened:!1,items:void 0,pageToken:null,pageSize:20},f=Object(s.a)("DASHBOARD_MODAL/TOGGLE_DASHBOARD_MODAL"),d=Object(s.a)("DASHBOARD_MODAL/ASSIGN_DASHBOARD_CARD_ID"),g=Object(s.a)("DASHBOARD_MODAL/REFRESH_DASHBOARD_ITEMS"),h=Object(s.a)("DASHBOARD_MODAL/FETCH_DASHBOARD_CARD"),m=Object(s.a)("DASHBOARD_MODAL/FETCH_DASHBOARD_CARD_SUCCESS"),y=Object(s.a)("DASHBOARD_MODAL/FETCH_DASHBOARD_CARD_ERROR"),v=Object(s.a)("DASHBOARD_MODAL/FETCH_DASHBOARD_CARD_DATAURL"),b=Object(s.a)("DASHBOARD_MODAL/FETCH_DASHBOARD_CARD_DATAURL_SUCCESS"),_=Object(s.a)("DASHBOARD_MODAL/EXIT_DASHBOARD_MODAL"),S=Object(s.b)(((n={})[""+d]=function(e,t){return o.a({},p,{id:t.payload})},n[""+f]=function(e,t){return o.a({},e,{opened:t.payload})},n[""+m]=function(e,t){return o.a({},e,{card:t.payload})},n[""+g]=function(e,t){return o.a({},e,{items:t.payload})},n[""+b]=function(e,t){return o.a({},e,t.payload)},n[""+_]=function(){return p},n),p),T=Object(u.a)(function(e){return e.ofType(""+d).map(function(){return f(!0)})},function(e,t){return e.ofType(""+f).map(function(){return t.getState().ui.dashboardModal.opened?h():_()})},function(e,t){return e.ofType(""+h).switchMap(function(){var e=t.getState().ui.dashboardModal.id;return i.default.fetch.getDashboardCardById(e).map(function(e){return"official"===e.category?o.a({},e,{name:a.get(e.name),description:a.get(e.description)}):e}).map(m).catch(function(){return l.Observable.of(_())})})},function(e){return e.ofType(""+m).map(v)},function(e,t){return e.ofType(""+v).filter(function(){return!!t.getState().ui.dashboardModal.card}).switchMap(function(){var e,r=t.getState().ui.dashboardModal,n=r.card,o=r.pageToken,a=r.pageSize,s=r.items,u=void 0===s?[]:s,c=o&&a?((e={})["x-custom-pagetoken"]=o,e["x-custom-size"]=a,e):{};return i.default.fetch.getCardResults(n,c).map(function(e){var t=Number(e.headers.get("x-custom-size")),r=e.body;return{pageToken:t>r.length?null:e.headers.get("x-custom-pagetoken"),pageSize:t,items:u.concat(r)}}).map(b).catch(function(){return l.Observable.of(_())})})}),E=function(e){c.store.dispatch(d(e))}},"/STBqBW9":function(e,t){},"/a0nv5kO":function(e,t,r){"use strict";var n,o=r("mrSGxOB2"),i=r("q1tIBJhx"),a=r.n(i),s=r("8yf6doCl"),u=r("4c1CS0b3"),c=r("HnrV0Jrl"),l=r("Ix24LjFp"),p=r.n(l),f={node:null,pos:{left:0,top:0},offset:{x:0,y:0}},d=function(e){function t(t){var r=e.call(this,t)||this;return r.node$=new s.Subject,r.state=f,r}return o.d(t,e),t.prototype.componentDidMount=function(){var e=this,t=o.f(this.node$.partition(function(e){return!!e}),2),r=t[0],n=t[1];this.dragSub$=r.switchMap(function(){return u.Observable.fromEvent(document,"mousemove").map(function(e){return{left:e.clientX,top:e.clientY}}).takeUntil(n)}).do(function(t){e.setState({pos:t})}).subscribe()},t.prototype.componentWillUnmount=function(){this.node$.complete(),this.dragSub$.unsubscribe()},t.prototype.dragStart=function(e,t,r){this.setState({node:e,pos:t,offset:r}),this.node$.next(e)},t.prototype.dragEnd=function(){this.setState(f),this.node$.next(null)},t.prototype.render=function(){var e=this.state,t=e.node,r=e.pos,n=e.offset;if(null===t)return null;var o={left:r.left-n.x,top:r.top-n.y,width:"300px"};return a.a.createElement("div",{className:p.a["flying-node"],style:o},this.props.node)},t}(a.a.PureComponent),g=r("/onrLvIr"),h=r("TSYQbtd+"),m=r.n(h),y=r("ijCdHo2S"),v=r.n(y),b=r("Wt1Uhudw"),_=r.n(b),S=r("FR9pfWDH"),T=r.n(S);!function(e){e[e.UP=-1]="UP",e[e.DOWN=1]="DOWN",e[e.NONE=0]="NONE"}(n||(n={}));var E={dragging:!1,source:null,over:{target:null,area:c.a.MIDDLE},foldedIds:[],isAllExpanded:!0},O=function(e){function t(t){var r=e.call(this,t)||this;if(r.treeRef=a.a.createRef(),r.mousedown$=new s.Subject,r.mousemove$=new s.Subject,r.mouseup$=new s.Subject,r.translate={x:0,y:0},r.getFlyingRef=function(e){return r.flyingRef=e},r.onMousedownDocument=function(e,t,n){r.mousedown$.next({node:e,e:t,info:n})},r.onMousemoveDocument=function(e,t,n){t.persist(),r.mousemove$.next({node:e,e:t,info:n})},r.onMouseupDocument=function(e,t,n){r.mouseup$.next({node:e,e:t,info:n})},r.onDragStart=function(e,t,n){r.props.onDragStart&&r.props.onDragStart(t),r.setState({source:t,dragging:!0}),r.flyingRef.dragStart(t,{left:e.e.clientX,top:e.e.clientY},n)},r.onMouseMove=function(e){r.translate={x:e.clientX-r.scrollableElement.getBoundingClientRect().left,y:e.clientY-r.scrollableElement.getBoundingClientRect().top}},r.onDragging=function(e){r.autoScrollIfNecessary();var t={target:e.info.target,area:e.info.area};r.setState({over:t})},r.autoScrollIfNecessary=function(){var e={y:n.NONE},t=75,o={y:1},i=r.scrollableElement,a=i.scrollTop,s=i.scrollHeight,u=i.clientHeight,c=0===a,l=s-a===u;if(u-r.translate.y<=u/2&&!l)e.y=n.DOWN,o.y=t*Math.abs((u/2-r.translate.y)/u);else{if(!(r.translate.y<=u/2)||c)return;e.y=n.UP,o.y=t*Math.abs((r.translate.y-u/2)/u)}r.clearScrollRaf(),0!==r.translate.y&&(r.scrollRaf=window.requestAnimationFrame(function(){return r.updateScrollTop(e.y*o.y)}))},r.updateScrollTop=function(e){r.scrollableElement.scrollTop+=e,r.scrollRaf=window.requestAnimationFrame(function(){return r.updateScrollTop(e)})},r.clearScrollRaf=function(){r.scrollRaf&&(window.cancelAnimationFrame(r.scrollRaf),r.scrollRaf=null)},r.onDrop=function(e){r.props.onDrop&&r.props.onDrop(e,r.state.over.target,r.state.over.area),r.onRelease()},r.onRelease=function(){r.setState(o.a({},E,{foldedIds:r.state.foldedIds})),r.flyingRef.dragEnd(),r.clearScrollRaf()},r.createDragObserverWithCount=function(){return r.mousedown$.switchMap(function(e){var t=e.node,n=e.e,o=u.Observable.fromEvent(document,"mouseup").map(function(){return null}),i=t,a=n,s=Object(g.c)(a.target,a.currentTarget),c=n.nativeEvent,l={x:s.left+c.offsetX,y:s.top+c.offsetY},p=1;return r.mousemove$.debounceTime(0).map(function(e,t){return p+=1,1===t&&r.onDragStart(e,i,l),e}).do(function(e){r.onDragging(e)}).takeUntil(r.mouseup$.merge(o).do(function(e){p>2&&null!==e?r.onDrop(i):r.onRelease()}))})},r.onToggle=function(e){var t=r.state.foldedIds,n=t.indexOf(e._id);n>=0?r.setState({foldedIds:o.h(t.slice(0,n),t.slice(n+1))}):r.setState({foldedIds:t.concat(e._id)})},r.onToggleRoot=function(){var e=r.state.foldedIds,t=e.indexOf("all");t>=0?1===r.state.foldedIds.length?r.setState({isAllExpanded:!0,foldedIds:o.h(e.slice(0,t),e.slice(t+1))}):r.setState({foldedIds:o.h(e.slice(0,t),e.slice(t+1))}):r.setState({foldedIds:e.concat("all"),isAllExpanded:!1})},r.onToggleAll=function(){if(r.state.isAllExpanded){var e=r.props.nodes.filter(function(e){return e.hasChildren}).map(function(e){return e._id});return r.setState({foldedIds:e,isAllExpanded:!1}),!1}return r.setState({foldedIds:[],isAllExpanded:!0}),!0},r.props.initialFolded){var i=[];t.nodes.forEach(function(e){0===e.depth&&e.hasChildren&&i.push(e._id)}),r.state=o.a({},E,{foldedIds:i,isAllExpanded:!1})}else r.state=E;return r}return o.d(t,e),t.getDerivedStateFromProps=function(e,t){return e.showPathId&&v()(t.foldedIds,e.showPathId)?{foldedIds:_()(t.foldedIds,e.showPathId)}:t},t.prototype.componentDidMount=function(){this.props.draggable?(this.dragSub=this.createDragObserverWithCount().subscribe(),this.checkScrollable(this.treeRef.current)?this.scrollableElement=this.treeRef.current:this.scrollableElement=this.findScrollableAncestor()):this.scrollableElement=this.treeRef.current},t.prototype.componentWillUnmount=function(){this.dragSub&&this.dragSub.unsubscribe(),this.clearScrollRaf()},t.prototype.checkScrollable=function(e){var t=window.getComputedStyle(e),r=t.getPropertyValue("overflow-y")||t.getPropertyValue("overflow");return"auto"===r||"scroll"===r},t.prototype.findScrollableAncestor=function(){for(var e=this.treeRef.current;e.parentNode;)if((e=e.parentNode)!==document&&e!==document.documentElement&&this.checkScrollable(e))return e;return window},t.prototype.renderFlyingNode=function(){var e,t=this.state.source;return e=t&&this.props.renderFlyContent?this.props.renderFlyContent(t):a.a.createElement("noscript",null),a.a.createElement(d,{ref:this.getFlyingRef,node:e})},t.prototype.renderTreeNodes=function(){var e=this,t=this.state.foldedIds,r=[];return t.map(function(t){r=r.concat(Object(g.a)(t,e.props.nodes))}),this.props.nodes.filter(function(e){return r.indexOf(e._id)<0}).map(function(r){var n="function"==typeof e.props.canDrag?e.props.canDrag(r):e.props.canDrag,o="function"==typeof e.props.canDrop?e.props.canDrop(r):e.props.canDrop,i=e.state.dragging&&!o;return a.a.createElement(c.b,{key:r._id,node:r,dragging:e.state.dragging,over:e.state.over,onMousedownDocument:e.onMousedownDocument,onMousemoveDocument:e.onMousemoveDocument,onMouseupDocument:e.onMouseupDocument,renderNode:e.props.renderNode,onToggle:e.onToggle,isExpanded:t.indexOf(r._id)<0,canDrag:!!n,canDrop:!!o,notAllowedDrop:i})})},t.prototype.renderPseudoAll=function(){var e=this.state.foldedIds.indexOf("all")<0;return this.props.renderRoot?this.props.renderRoot({isExpanded:e,isAllExpanded:this.state.isAllExpanded,onToggle:this.onToggleRoot,onToggleAll:this.onToggleAll}):null},t.prototype.render=function(){var e=m()("thin-scroll",T.a.tree,this.props.className);return a.a.createElement("div",{className:e,onMouseMove:this.onMouseMove,ref:this.treeRef},this.renderPseudoAll(),this.renderTreeNodes(),this.renderFlyingNode())},t}(a.a.PureComponent);r.d(t,"a",function(){return O})},"/n75eoyq":function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("IssmDVnT");o.SDKFetch.prototype.readTeamsPagination=function(e){var t=e.pageSize,r=e.organizationId,i=n.g(e,["pageSize","organizationId"]);return o.Page.defaultState("v2/organizations/"+r+"/teams",{pageSize:t,urlQuery:i})},o.SDKFetch.prototype.searchTeamsPagination=function(e){var t=e.pageSize,r=e.organizationId,i=n.g(e,["pageSize","organizationId"]);return o.Page.defaultState("organizations/"+r+"/teams/search",{pageSize:t,urlQuery:i})}},"/oI3bVAP":function(e,t,r){"use strict";var n;!function(e){e.direct="users",e.project="projects",e.group="groups"}(n||(n={})),r.d(t,"a",function(){return n})},"/onrLvIr":function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return a}),r.d(t,"c",function(){return c});var n=r("a+N5u/Cl");function o(e){return-1===e.data.pos?Number.MAX_SAFE_INTEGER:e.data.pos}function i(e,t){void 0===t&&(t=o);var r=e.map(s),i=function(e,t){var r={};return e.forEach(function(e){var o=e.data.ancestorIds[0];o&&(r[o]?r[o]=n.chain(r[o]).concat([e]).sortBy(t).value():r[o]=[e])}),r}(r,t);var a=[];return n.chain(r).filter(function(e){return 0===e.depth}).sortBy(t).forEach(function(e){!function e(t,r){r.push(t);var n=i[t._id]||[];n.length&&(t.hasChildren=!0,n.forEach(function(t){e(t,r)}))}(e,a)}),a}function a(e,t){return"all"!==e?t.filter(function(t){return t.data.ancestorIds.indexOf(e)>=0}).map(function(e){return e._id}):t.map(function(e){return e._id})}function s(e){return{_id:e._id,_parentId:e.ancestorIds[0],name:e.name,depth:e.ancestorIds.length,hasChildren:!1,data:e}}var u=function(e){var t={left:0,top:0};t.left=window.pageXOffset||0,t.top=window.pageYOffset||0;var r=e.getBoundingClientRect();return t.left+=r.left,t.top+=r.top,t},c=function(e,t){var r=u(e),n=u(t);return{left:r.left-n.left,top:r.top-n.top}}},"0FRv5rrl":function(e,t,r){var n,o,i,a,s,u,c,l,p,f,d={}.hasOwnProperty;l=r("a+N5u/Cl"),o=r("qHH6+g6Q"),a=r("gLTu//Kz"),c=r("3eMzznN/"),s=r("wu4EEviu"),u=r("RQ44psah"),f=r("a2Z1fDJ7").sanitize,p=r("MmYzUhjM").getPayType,i=r("80gYlwjC").OrganizationPayment,n=[r("H1tYRyKz"),r("TcA98U6+"),r("sP18MwMK"),r("DZB8g8kJ"),r("yWNQg+iF"),r("+BRvZ7rW")],e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)d.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o),t.prototype.name="organization",t.prototype.urlRoot="organizations",t.prototype.defaults={objectType:"organization",teamsCount:0,membersCount:0,projectsCount:0,plan:{days:999},_roleId:-2,dividers:[],projectIds:[]},t.prototype.parse=function(e){return e=l.extend(this.toJSON(),e),Promise.resolve().then(function(t){return r("HDJEOtNh").PermissionController.updateOrganization(e)}.bind(null,r)).catch(r.oe),e.role&&a.get(e.role._id).set(e.role),"string"==typeof e.logo&&(e.logo=f(e.logo)),c.isUrl(e.logo)||(e.logo=this.getLogo(e._id)),e},t.prototype.initialize=function(){var e;return(e=this.get("plan"))&&new i(e),Object.defineProperty(this,"payment",{get:function(){var e;return(e=new i(this.get("plan"))).payType=p(e),e}}),t.__super__.initialize.apply(this,arguments)},t.prototype.getLogo=function(e){var t;return t=c.objectId2Num(e,6),n[t]||n[0]},t.prototype.sync=function(e,r,n){var o;switch(o=n.success,e){case"create":n.success=function(e){return e.isNew=!0,"function"==typeof o?o(e):void 0}}return t.__super__.sync.apply(this,arguments)},t.prototype.listen=function(){if(!this.listened)return t.__super__.listen.apply(this,arguments),this.on("change:plan",function(){var e,t;return e=this.id,t=this.get("plan"),Promise.resolve().then(function(n){var o;return null!=(o=r("nL4olqOP").find(e))?o.each(function(e){return e.set("plan",t)}):void 0}.bind(null,r)).catch(r.oe)})},t.prototype.fetchChartsData=function(e){return e.url=this.url()+"/dataforchart/",this.sync("read",this,e),this},t.prototype.fetchMembersData=function(e,t){return t.attrs=l.extend({type:"delay",team:"all",page:1,count:30},e),t.url=this.url()+"/statisticformembers",this.sync("read",this,t),this},t.prototype.fetchMembers=function(e){return e.url=this.url()+"/members",e.attrs={fields:"_id,_userId,name,pinyin,py,avatarUrl"},this.sync("read",this,e),this},t.prototype.fetchMember=function(e,t){return t.url=this.url()+"/statisticformembers/"+e,this.sync("read",this,t),this},t.prototype.fetchProjectsData=function(e,t){return t.attrs=l.extend({type:"delay",index:-1,page:1,count:30},e),t.url=this.url()+"/statisticForProjects",this.sync("read",this,t),this},t.prototype.fetchProjects=function(e){return e.attrs||(e.attrs={}),e.attrs.all=1,e.url=this.url()+"/projects",this.sync("read",this,e),this},t.prototype.fetchProject=function(e,t){return t.url=this.url()+"/statisticforprojects/"+e,this.sync("read",this,t),this},t.prototype.fetchGroupsData=function(e){return e.url=this.url()+"/teams/",this.sync("read",this,e),this},t.prototype.fetchInvitelink=function(e){var t,r;return e||(e={}),e.url=this.url()+"/invitelink",t=e.success||function(){},e.success=(r=this,function(e){return r.set(e),t(e)}),this.sync("read",this,e),this},t.prototype.resetInvite=function(e){var t,r;return e||(e={}),e.url=this.url()+"/invitelink",e.attrs={},t=e.success||function(){},e.success=(r=this,function(e){return r.set(l.pick(e,"mobileInviteLink","inviteLink")),t(e)}),this.sync("update",this,e),this},t.prototype.joinRoom=function(){if(!this.subscribed&&this.getRoleScope()>=0)return s.join(this.url()),this.subscribed=!0},t.prototype.quit=function(e){return e||(e={}),e.url=this.url()+"/quit",e.attrs={},this.sync("update",this,e),this},t.prototype.saveSection=function(e,t,r){return r||(r={}),r.url=this.url()+"/"+e,r.attrs={},r.attrs[e]=t,this.sync("update",this,r),this},t.prototype.transfer=function(e,t){var r,n;return null==t&&(t={}),t.url=this.url()+"/transfer",t.attrs={_id:this.id,_toUserId:e},r=t.success,t.success=(n=this,function(){return n.fetch(),"function"==typeof r?r():void 0}),"function"==typeof t.beforeSend&&t.beforeSend(),this.sync("update",this,t),this},t.prototype.getProTrial=function(){return new Promise((e=this,function(t,r){return e.sync("create",e,{url:u.pay.orgProTrial(e.id),silentError:!0,success:t,error:r,xhrFields:{withCredentials:!0}})})).then(function(e){return function(t){var r,n;return n=e.get("plan"),r={},void 0!==t.payType&&(r.payType=t.payType),void 0!==t.trialType&&(r.trialType=t.trialType),void 0!==t.trialExpired&&(r.trialExpired=t.trialExpired,r.isTrialExpired=new Date(t.trialExpired).valueOf()<=Date.now()),e.set("plan",l.assign({},n,r)),t}}(this));var e},t}()},"0Qy4aPTG":function(e,t,r){e.exports=r.p+"images/tasks-0.7883a6d3.png"},"0RMAOLYD":function(e,t,r){e.exports=r.p+"images/events-poster.5512030e.png"},"0hhicPLn":function(e,t,r){e.exports=r.p+"images/yinxiang-0.33d5d26c.png"},"0mES+Bis":function(e,t,r){e.exports=r.p+"images/badge.36a6d156.png"},"0p8eNPki":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"tap-num-9",use:"tap-num-9-usage",viewBox:"0 0 14 32",content:'<symbol viewBox="0 0 14 32" id="tap-num-9"><path d="M7.008 18.084l-.072-.072c-.12.096-.306.174-.558.234-.252.06-.582.09-.99.09a3.597 3.597 0 0 1-1.8-.468 3.653 3.653 0 0 1-1.296-1.188c-.168-.24-.3-.498-.396-.774a5.692 5.692 0 0 1-.234-1.062c-.06-.432-.102-.978-.126-1.638a71.183 71.183 0 0 1-.036-2.502c0-.84.012-1.53.036-2.07.024-.54.066-.996.126-1.368.06-.372.144-.69.252-.954.108-.264.246-.54.414-.828a4.966 4.966 0 0 1 1.926-1.836C5.058 3.216 5.964 3 6.972 3s1.908.222 2.7.666a5.232 5.232 0 0 1 1.908 1.818c.168.288.312.564.432.828s.21.582.27.954c.06.372.102.828.126 1.368.024.54.036 1.23.036 2.07 0 .792-.012 1.446-.036 1.962-.024.516-.066.96-.126 1.332-.06.372-.132.708-.216 1.008-.084.3-.186.618-.306.954L6.936 28.848H2.832l4.176-10.764zM5.172 13.26c0 .552.18.996.54 1.332.36.336.78.504 1.26.504s.9-.168 1.26-.504c.36-.336.54-.78.54-1.332V8.508c0-.552-.18-.996-.54-1.332a1.789 1.789 0 0 0-1.26-.504c-.48 0-.9.168-1.26.504-.36.336-.54.78-.54 1.332v4.752z" /></symbol>'});a.a.add(s);t.default=s},"11Yo7oZf":function(e,t,r){var n,o,i,a,s={}.hasOwnProperty;a=r("a+N5u/Cl"),n=r("qHH6+g6Q"),i=r("GESwhXbR").Toast,o=r("wu4EEviu"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="group",t.prototype.urlRoot="groups",t.prototype.defaults={activeMembersCount:0,membersCount:0},t.prototype.listen=function(){var e;if(!this.listened)return o.on(":change:group/"+this.get("_id"),(e=this,function(t){return e.set(e.parse(t))})),t.__super__.listen.apply(this,arguments)},t.prototype.parse=function(e){var t,r,n;return(t=a.extend(this.toJSON(),e)).membersCount=null!=(r=t.hasMembers)?r.length:void 0,t.activeMembersCount=null!=(n=t.hasMembers)?n.filter(function(e){return!e.isDisabled}).length:void 0,t},t.prototype.addProject=function(e,t){return null==t&&(t={}),t.url=this.url()+"/projects/"+e,this.sync("update",this,t),this},t.prototype.removeProject=function(e,t){return null==t&&(t={}),t.url=this.url()+"/projects/"+e,this.sync("delete",this,t),this},t.prototype.addMembers=function(e){return e.length>0?new Promise((t=this,function(r,n){return t.sync("create",t,{url:t.url()+"/members",attrs:{email:e},success:r,error:n})})).then(function(){return i.success(tb_i18n.get("organization.addMember.request.success"))}).catch(function(){return i.error(tb_i18n.get("organization.addMember.request.error"))}):Promise.resolve();var t},t.prototype.removeMembers=function(e){return Promise.all(e.map((t=this,function(e){return new Promise(function(r,n){return t.sync("delete",t,{url:t.url()+"/members/"+e,success:r,error:n})})}))).then(function(){return i.success(tb_i18n.get("organization.removeMember.request.success"))}).catch(function(){return i.error(tb_i18n.get("organization.removeMember.request.error"))});var t},t.prototype.isMember=function(e){return!!a.find(this.get("hasMembers"),function(t){return t._id===e})},t.prototype.quit=function(e){return null==e&&(e={}),e.url=this.url()+"/quit",this.sync("update",this,e),this},t}()},"14GADmBx":function(e,t,r){"use strict";r.r(t);r("mrSGxOB2"),r("Z19A9xxA"),r("T5HjItxe"),r("U9Ham2Lb"),r("/e+Ob7oW"),r("iSsLT+9z"),r("i69eL/y+"),r("SW5EbV2r"),r("yiO17FlF")},"1Z7xq/6v":function(e,t){},"1trQBWPx":function(e,t,r){"use strict";r.d(t,"b",function(){return s}),r.d(t,"a",function(){return l}),r.d(t,"c",function(){return f});var n=r("mrSGxOB2"),o=r("HYobN8SQ"),i=r.n(o),a=i.a.namespace("kanban_tasklist_scenarioid"),s=function(e){return a.get(e,{scenarioFieldIds:[]})},u=function(e,t){var r=s(e),o=n.a({},r,t);try{a.set(e,o)}catch(i){}},c=i.a.namespace("kanban_sprint_scenarioid"),l=function(e){return c.get(e,{scenarioFieldIds:[]})},p=function(e,t){var r=l(e),o=n.a({},r,t);try{c.set(e,o)}catch(i){}};function f(e){var t=e.sprintId,r=e.tasklistId,n=e.scenarioFieldIds;t&&n.length?p(t,{scenarioFieldIds:n}):r&&n.length&&u(r,{scenarioFieldIds:n})}},"1tzZcICR":function(e,t,r){e.exports=r.p+"images/markdown-1.02194107.png"},"1vCkfBRX":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"tap-num-6",use:"tap-num-6-usage",viewBox:"0 0 14 32",content:'<symbol viewBox="0 0 14 32" id="tap-num-6"><path d="M6.936 13.764l.072.072c.12-.096.306-.174.558-.234.252-.06.582-.09.99-.09.648 0 1.248.156 1.8.468.552.312.984.708 1.296 1.188.168.264.3.528.396.792.096.264.174.612.234 1.044.06.432.102.978.126 1.638.024.66.036 1.494.036 2.502 0 .84-.012 1.53-.036 2.07-.024.54-.066.996-.126 1.368-.06.372-.144.69-.252.954-.108.264-.246.54-.414.828A4.966 4.966 0 0 1 9.69 28.2c-.804.432-1.71.648-2.718.648s-1.908-.222-2.7-.666a5.232 5.232 0 0 1-1.908-1.818 4.749 4.749 0 0 1-.45-.828 4.379 4.379 0 0 1-.252-.954c-.06-.372-.102-.828-.126-1.368-.024-.54-.036-1.23-.036-2.07 0-.792.012-1.446.036-1.962.024-.516.06-.96.108-1.332.048-.372.12-.708.216-1.008.096-.3.204-.618.324-.954L7.008 3h4.104L6.936 13.764zm1.836 4.824c0-.552-.18-.996-.54-1.332a1.789 1.789 0 0 0-1.26-.504c-.48 0-.9.168-1.26.504-.36.336-.54.78-.54 1.332v4.752c0 .552.18.996.54 1.332.36.336.78.504 1.26.504s.9-.168 1.26-.504c.36-.336.54-.78.54-1.332v-4.752z" /></symbol>'});a.a.add(s);t.default=s},"2+HppBUm":function(e,t,r){e.exports={"group-modal":"group-modal__T1sZ","group-modal-title":"group-modal-title__32gv","group-modal-contents":"group-modal-contents__jtD-","group-modal-item":"group-modal-item__1dDb","group-modal-error-hint":"group-modal-error-hint__3dHD","group-modal-save":"group-modal-save__20Kd"}},"2Dvc1YJz":function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return c}),r.d(t,"c",function(){return l}),r.d(t,"d",function(){return p});var n,o=r("tLZJUYWX"),i=r("a+N5u/Cl"),a=r("sa1Ed382"),s=r("50927W45"),u=r("zT6SYcu2");!function(e){e.recentCompleted="recentCompleted",e.recentUpdate="recentUpdate",e.iCreated="iCreated",e.noPlaced="noPlaced"}(n||(n={}));var c={text:"RANGE_TEXT",projectId:"MULTI_SELECT",isDone:"SELECT",totalWorkTime:"NUMBER",storyPoint:"NUMBER",isSubTask:"SELECT",isArchived:"SELECT",priority:"MULTI_SELECT",executorId:"MULTI_SELECT",creatorId:"MULTI_SELECT",involveMembers:"MULTI_SELECT",dueDate:"DATE",startDate:"DATE",created:"DATE",updated:"DATE",accomplished:"DATE",totalUsedTime:"NUMBER"},l=i.once(function(){var e,t=a.user.id;return(e={})[n.recentCompleted]={type:"task",order:u.d.Desc,sortedTqlKey:"updated",filters:{executorId:{values:[t]},isDone:{values:["true"]},accomplished:{max:"endOf(d)",min:"startOf(d, -6d)",relative:!0}}},e[n.recentUpdate]={type:"task",order:u.d.Desc,sortedTqlKey:"updated",filters:{executorId:{values:[t]},updated:{max:"endOf(d)",min:"startOf(d, -6d)",relative:!0}}},e[n.iCreated]={type:"task",order:u.d.Desc,sortedTqlKey:"created",filters:{creatorId:{values:[t]},created:{max:"endOf(d)",min:"startOf(d, -6d)",relative:!0}}},e[n.noPlaced]={type:"task",order:u.d.Desc,sortedTqlKey:"updated",filters:{projectId:{values:[null]}}},e});function p(e){return o.get("navigation.search.guide."+e)}s.b.All,s.b.Task,s.b.Project,s.b.User,s.b.Work,s.b.Collection,s.b.Event,s.b.Post},"2GFv99bj":function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("IssmDVnT");o.SDKFetch.prototype.getSmartGroupResourceCount=function(e){var t="smartgroups/"+e+"/count";return this.get(t,{})};var i=r("a+N5u/Cl");r.d(t,"a",function(){return c});var a=["_id","name","avatarUrl","pinyin"],s=["_id","name","avatarUrl"],u=["_id","name"],c=function(e,t,r,c,l,p){var f;void 0===p&&(p={});p.showAll,p.cacheValidate;var d=n.g(p,["showAll","cacheValidate"]),g=[{_projectId:r},{$or:[{isArchived:!1},{isArchived:null}]}];p.showAll||g.push({$or:[{$not:{visible:"involves"}},{involveMembers:{$has:c}}]});var h=n.a({where:g},d);return Object(i.isEmpty)(l)||(f=h.where).push.apply(f,n.h(l)),e.lift({cacheValidate:p.cacheValidate||o.CacheStrategy.Request,tableName:"Task",request:t,query:h,assocFields:{creator:a,executor:s,stage:u,sprint:["_id","name","status","startDate","dueDate","_creatorId","_projectId","isDeleted","updated","created"],parent:["_id","content"]},required:["subtaskCount"],padding:function(t){return e.fetch.getTask(t,{_paddingRequestStats:!0})}})}},"2KPNj85v":function(e,t,r){"use strict";r.d(t,"i",function(){return a}),r.d(t,"j",function(){return s}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return c}),r.d(t,"e",function(){return l}),r.d(t,"h",function(){return p}),r.d(t,"d",function(){return f}),r.d(t,"f",function(){return d}),r.d(t,"a",function(){return g}),r.d(t,"g",function(){return h});var n,o=r("tLZJUYWX"),i=r("cUZYBCvT"),a=function(){return[{filter:i.a.Starred,name:o.get("starred.projects")},{filter:i.a.History,name:o.get("portal.recent")},{filter:"all",name:o.get("project.hierarchy.all.projects")},{filter:i.a.Joined,name:o.get("my.involved.projects")},{filter:i.a.Public,name:o.get("project.hierarchy.org.public.projects")},{filter:i.a.Ungrouped,name:o.get("project.hierarchy.untagged.projects")},{filter:i.a.Suspended,name:o.get("project.hierarchy.suspended.projects")},{filter:i.a.Archived,name:o.get("recycled")}]},s=function(){var e;return(e={})[i.a.Joined]=o.get("my.involved.projects"),e[i.a.Public]=o.get("project.hierarchy.org.public.projects"),e[i.a.Ungrouped]=o.get("project.hierarchy.untagged.projects"),e[i.a.Suspended]=o.get("project.hierarchy.suspended.projects"),e},u=[i.a.Starred,i.a.History,"all"],c=[i.a.Joined,i.a.Public,i.a.Ungrouped,i.a.Suspended,i.a.Archived],l=[i.a.Joined,i.a.Starred],p=function(){var e;return(e={all:{name:o.get("project.hierarchy.all.projects"),icon:"org-projects",iconFill:"project-fill"}})[i.a.Starred]={name:o.get("portal.starred"),icon:"star-stroke",iconFill:"star"},e[i.a.History]={name:o.get("portal.recent"),icon:"clock",iconFill:"leave-state"},e[i.a.Joined]={name:o.get("my.involved.projects"),icon:"org-user",iconFill:"org-user-fill"},e[i.a.Public]={name:o.get("project.hierarchy.org.public.projects"),icon:"org-building",iconFill:"building-fill"},e[i.a.Ungrouped]={name:o.get("project.hierarchy.untagged.projects"),icon:"inbox2",iconFill:"inbox-fill"},e[i.a.Suspended]={name:o.get("project.hierarchy.suspended.projects"),icon:"archive",iconFill:"archive-fill"},e[i.a.Archived]={name:o.get("recycled"),icon:"trash",iconFill:"trash-fill"},e},f=((n={all:{action:"view all project"}})[i.a.Starred]={action:"view star project"},n[i.a.History]={action:"view history project"},n[i.a.Joined]={action:"view my project"},n[i.a.Public]={action:"view open project"},n[i.a.Ungrouped]={action:"view not grouped project"},n[i.a.Suspended]={action:"view archived project"},n[i.a.Archived]={action:"view recycling project"},n),d=["all",i.a.History,i.a.Archived],g="ACTIVED_VIEW_ID_CACHE",h="__ROOT_TAG__"},"2ZkDO+ZE":function(e,t){},"2cYYE+FO":function(e,t){},"2emWbNH6":function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("sa1Ed382"),i=r("IssmDVnT"),a=r("2GFv99bj");var s=function(e,t){return"projects/"+e+"/smartgroups/"+t+"/tasks"};i.SDKFetch.prototype.getStoryPoint=function(e){return this.get("sprints/"+e+"/storypoints")},i.SDKFetch.prototype.getSprint=function(e){return this.get("sprints/"+e)},i.SDKFetch.prototype.getProjectSmartGroups=function(e){return this.get("projects/"+e+"/smartgroups")},i.SDKFetch.prototype.createSprint=function(e,t){var r=t.name,o=t.startDate,i=t.dueDate,a={name:r};return o&&i&&(a=n.a({},a,{startDate:o,dueDate:i})),this.post("projects/"+e+"/sprints",a)},i.SDKFetch.prototype.updateSprint=function(e,t){return this.put("sprints/"+e,t).map(function(t){return n.a({},t,{_id:e})})},i.SDKFetch.prototype.getProjectSprints=function(e,t){return this.get("projects/"+e+"/sprints",t)},i.SDKFetch.prototype.getSprintProjectTasks=function(e){return this.get("projects/"+e+"/tasks")},i.SDKFetch.prototype.getSmartGroupProjectTasks=function(e,t,r){return this.get(s(e,t),r)},i.SDKFetch.prototype.markSprintCompleted=function(e){return this.put("sprints/"+e+"/complete")},i.SDKFetch.prototype.getSprintsTaskCount=function(e,t){var r="projects/"+e+"/sprints/tasks/count",n=t&&{sprintStatus:t};return this.get(r,n)},i.SDKFetch.prototype.getSprintTasksStatus=function(e,t){var r="projects/"+e+"/sprints/"+t+"/tasks/complete";return this.get(r)},i.SDKFetch.prototype.moveOutSprintTasks=function(e,t){var r=t||{taskStatue:"unDone"};return this.put("sprints/"+e+"/tasks/moveout",r)},i.SDKFetch.prototype.completeSprintTasks=function(e){return this.put("sprints/"+e+"/tasks/done")},i.SDK.prototype.getSprint=function(e){return this.lift({cacheValidate:i.CacheStrategy.Request,tableName:"Sprint",request:this.fetch.getSprint(e),query:{where:{_id:e}}})},i.SDK.prototype.createSprint=function(e,t){return this.lift({method:"create",tableName:"Sprint",request:this.fetch.createSprint(e,t)})},i.SDK.prototype.updateSprint=function(e,t){return this.lift({method:"update",tableName:"Sprint",clause:{_id:e},request:this.fetch.updateSprint(e,t)})},i.SDK.prototype.getProjectSmartGroups=function(e){return this.lift({cacheValidate:i.CacheStrategy.Request,tableName:"SmartGroup",request:this.fetch.getProjectSmartGroups(e),query:{where:{_projectId:e}}})},i.SDK.prototype.getProjectSprints=function(e,t){return this.lift({cacheValidate:i.CacheStrategy.Request,tableName:"Sprint",request:this.fetch.getProjectSprints(e,t),query:{where:n.a({_projectId:e},t)}})},i.SDK.prototype.getSprintProjectTasks=function(e){var t=this;return this.lift({cacheValidate:i.CacheStrategy.Request,tableName:"Task",request:this.getProjectSprints(e).values().concatMap(function(){return t.fetch.getSprintProjectTasks(e)}),query:{where:{}},assocFields:{sprint:["_id","name","status","startDate","dueDate","_creatorId","_projectId","isDeleted","updated","created"]}})},i.SDK.prototype.getSmartGroupProjectTasks=function(e,t,r,n,i){var s=this;void 0===i&&(i={});var u=this.fetch.getSmartGroupProjectTasks(e,t,i.urlQuery).delayWhen(function(){return s.getProjectSprints(e).values()}),c=o.user.id;return Object(a.a)(this,u,e,c,r,{showAll:n})},r.d(t,"a",function(){return s})},"2hAsauku":function(e,t){e.exports="\nquery projectTag (\n  $projectTagId: ObjectId!\n) {\n  ProjectTag(\n    _projecttagId: $projectTagId\n  ) {\n    permissionBinding {\n      level\n      permissions\n    }\n  }\n}\n"},"2ivs9lcN":function(e,t,r){var n,o,i,a={}.hasOwnProperty;i=r("a+N5u/Cl"),n=r("VuB9cZyl"),o=r("11Yo7oZf"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="groups",t.prototype.model=o,t.prototype.comparator=function(e){return e.get("created")},t.prototype.sync=function(e,r,n){var o;switch(o=n.boundToObjectType){case"project":case"organization":n.url=o+"s/"+this._boundToObjectId+"/"+this.name}return t.__super__.sync.apply(this,arguments)},t.prototype.getGroupById=function(e){return this.find(function(t){return t.get("_id")===e})},t.prototype.isInGroups=function(e){return i.chain(this.toJSON()).map(function(e){return e.hasMembers}).flatten().map(function(e){return e._id}).uniq().contains(e).value()},t}()},"2qRnoGmE":function(e,t){var r,n;r=(null!=(n=document.getElementById("teambition-config"))?n.textContent.trim():void 0)||"{}",e.exports=JSON.parse(r)},"2vrtUeQe":function(e,t,r){e.exports={"text-input":"text-input__12fo"}},"2zeSEaA/":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"tap-num-7",use:"tap-num-7-usage",viewBox:"0 0 14 32",content:'<symbol viewBox="0 0 14 32" id="tap-num-7"><path d="M8.772 6.456H4.74v2.952H1.5V3h10.944v3.672l-6.228 21.96H2.328z" /></symbol>'});a.a.add(s);t.default=s},"34uCsfcM":function(e,t,r){e.exports={"icon-with-circle":"icon-with-circle__1ciL"}},"38idLN3K":function(e,t,r){e.exports={"is-dragging":"is-dragging__-3vz","empty-placeholder-wrapper":"empty-placeholder-wrapper__dxmm","empty-placeholder-title":"empty-placeholder-title__3lTR","empty-placeholder-image":"empty-placeholder-image__14UQ"}},"3GP4dVia":function(e,t,r){var n,o,i,a,s,u,c,l,p,f={}.hasOwnProperty;l=r("a+N5u/Cl"),n=r("bZr3G77e"),u=r("RQ44psah"),o=r("qHH6+g6Q"),a=r("nL4olqOP"),i=r("wd/RKGTj"),s=r("wu4EEviu"),c=r("80gYlwjC").UserPayment,p=r("MmYzUhjM").getPayType,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)f.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o),t.prototype.name="user",t.prototype.urlRoot="users",t.prototype.defaults={name:"",title:"",phone:"",location:"",website:"",birthday:"",email:"",avatar:"",emails:[],badge:0,isGhost:!0},t.prototype.parse=function(e){var t;return e=l.extend(this.toJSON(),e),(t=l.findWhere(e.emails,{email:e.email}))&&(e._emailId=t._id),e.isGhost=!e._id,e},t.prototype.initialize=function(){var e,r;return(e=this.get("plan"))&&new c(e),Object.defineProperty(this,"payment",{get:function(){var e;return(e=new c(this.get("plan"))).payType=p(e),e}}),this.formatBirthday(),this.on("change:birthday",this.formatBirthday),this.on("change",(r=this,function(e){var t;if(t=r.pick("name","title","phone","location","website","birthday","email","avatar","avatarUrl"),!l.isEmpty(t))return s.trigger(":change:member/"+r.id,t)})),t.__super__.initialize.apply(this,arguments)},t.prototype.listen=function(){if(!this.listened)return t.__super__.listen.apply(this,arguments),this.on("change:plan",function(){var e,t,r;return r=this.id,e=this.get("plan"),null!=(t=a.find(r))?t.each(function(t){var n;if((null!=(n=t.get("plan"))?n._objectId:void 0)===r)return t.set("plan",e)}):void 0})},t.prototype.formatBirthday=function(){var e;if((e=this.get("birthday"))&&!(e instanceof Date))return e=new Date(e),this.set("birthday",e,{silent:!0})},t.prototype.getSetting=function(e,t){var r;return~e.indexOf(".")?(r=e.split("."),this.attributes[t][r[0]][r[1]]):this.attributes[t][e]},t.prototype.sendResetPasswordMail=function(e){return this.sync("create",this,{url:"users/resetpassword"})},t.prototype.emailSetting=function(e,t,r){switch(e){case"setMain":return this.sync("update",this,{url:"users/email/"+t,attrs:{},success:(n=this,function(e){return n.set(n.parse(e)),r(null,tb_i18n.get("set.success"))}),error:r});case"resend":return this.sync("create",this,{url:"users/email/"+t+"/send",attrs:{},success:function(){return r(null,tb_i18n.get("resend.success"))},error:r});case"delete":return this.sync("delete",this,{url:"users/email/"+t,success:function(e){return function(t){return e.set(e.parse(t)),r(null,tb_i18n.get("delete.success"))}}(this),error:r})}var n},t.prototype.addEmail=function(e,t){return this.sync("create",this,{url:"users/email",attrs:{email:e},success:(r=this,function(e){return r.set(r.parse(e)),t(null,tb_i18n.get("add.success"))}),error:t});var r},t.prototype.isNew=function(){var e;return e=this.get("created"),i(e).isAfter(i().subtract(1,"hour"))},t.prototype.isExperiencedUser=function(){var e;return e=this.get("created"),i(e).isBefore(i().subtract(60,"days"))},t.prototype.fetchToken=function(e,t){var r;if(null==t&&(t=!1),!this.get("isGhost"))return this.get("tokens")&&!t?"function"==typeof e?e(null,this.get("tokens")):void 0:this.sync("read",this,{url:this.urlRoot+"/tokens",success:(r=this,function(t){return r.set("tokens",t),"function"==typeof e?e(null,t):void 0}),error:e})},t.prototype.checkSnapperToken=function(){return this._checkToken(this.get("snapperToken"))?Promise.resolve():this._fetchMe()},t.prototype.checkStrikerAuth=function(){return this._checkToken(this.get("strikerAuth"))?Promise.resolve():this._fetchMe()},t.prototype.fetchCrossNotify=function(){return n.get("users/cross-notify",{silentError:!0}).then((e=this,function(t){return e.set({crossNotify:t})})).catch(function(e){});var e},t.prototype._checkToken=function(e){var t,r;return!!(t=e.split(".")[1])&&(r=1e3*JSON.parse(window.atob(t)).exp-36e5,Date.now()<r)},t.prototype._fetchMe=function(){return this._fetchMePromise?Promise.resolve():(this._fetchMePromise=new Promise((e=this,function(t,r){return e.fetch({url:"users/me",success:t,error:r})})).then(function(e){return function(t){return e._fetchMePromise=null,t}}(this)),this._fetchMePromise);var e},t.prototype.getLanguage=function(){return this.get("language")||"zh"},t.prototype.updateLanguage=function(e){return n.put("users/language",{language:e}).then((t=this,function(e){return t.set("language",e.language)}));var t},t.prototype.migrate=function(){return n.post(u.pay.userMigrate)},t.prototype.keepBack=function(){return n.put("users/me/trial")},t}()},"3L++eR1g":function(e,t,r){e.exports=r.p+"images/groupchat-1.3a9ab585.png"},"3eMzznN/":function(e,t,r){var n,o,i,a,s,u,c,l,p,f,d,g,h,m,y,v,b,_,S,T,E,O,w,C,I,k,j,A,P,R,N,x,D,M,F,L,B,U,G,q,z;q=r("sa1Ed382"),G=r("tLZJUYWX"),s=r("wd/RKGTj"),n=r("+2RfZ2TT"),d=r("a+N5u/Cl"),a=r("/e+Ob7oW"),o=r("IssmDVnT").EventSDK,b=(M=r("IAxPrA1L")).downloadItem,v=M.downloadFile,h=M.batchDownload,I=M.getStrikerDownloadConfig,f=r("nOvPRzgI"),U=(F=r("90U+kJWN")).splitObject,A=F.isEmail,j=F.isDefaultEmail,P=F.isPhone,T=F.formatPhone,E=F.formatWorktime,g=F.adjustNumberByStep,y=F.cutString,S=F.formatFileSize,B=F.sliceText,R=F.matchString,L=F.removeItem,C=F.getObjectLink,k=F.getUniqueId,m=F.compareTask,O=F.getCurrentWorkSpaceInfo,_=F.formatDate,D=F.promiseChain,x=F.pluralizeObjectType,w=F.getHoliday,z=F.unifyNewline,N=F.mergeSort,l=/^(?:\w+:)?\/\/([^\s\.]+\.\S{2})\S*$/,u=/^https?:\/\/(www.teambition.com|project.ci)/,c=/[A-Z]/g,i=/[<>:"\/\\|?*\x00-\x1F]/,e.exports=p={adjustNumberByStep:g,batchDownload:h,compareTask:m,cutString:y,downloadItem:b,downloadFile:v,formatDate:_,formatWorktime:E,formatFileSize:S,formatPhone:T,getCurrentWorkSpaceInfo:O,getHoliday:w,getObjectLink:C,getUniqueId:k,getStrikerDownloadConfig:I,isPhone:P,isEmail:A,isDefaultEmail:j,matchString:R,mergeSort:N,pluralizeObjectType:x,promiseChain:D,removeItem:L,sliceText:B,splitObject:U,unifyNewline:z,warehouse:{resolveFetch:f.resolveFetch,resolveFetchOne:f.resolveFetchOne},isUrl:function(e){return l.test(e)},objectId2Num:function(e,t){return parseInt(e.slice(0,8),16)%t},escape:function(e){return e=null!=e?""+e:"",d.escape(e)},loadVideo:function(e,t){var r;return(r=document.createElement("video")).controls="controls",r.controlsList="nodownload",r.preload=!0,n(r).on("loadedmetadata",function(){return t(null,r.videoWidth,r.videoHeight,e)}).on("error",function(e){return t(e)}).on("abort",function(){return n(r).off()}).html("<source src="+e+"></source>"+G.get("html5video.not.support")),r},loadAudio:function(e,t){var r;return(r=document.createElement("audio")).controls="controls",r.preload=!0,n(r).on("loadedmetadata",function(){return n(r).off(),t(null,e)}).on("error",function(e){return t(e)}).on("abort",function(){return n(r).off()}).html("<source src="+e+"></source>"+G.get("html5audio.not.support")),r},genPostDescription:function(e){var t,r,o;if(!d.isObject(e))return"";if(e.title)return e.title;switch(o="",e.postMode){case"html":o=d.unescape(e.html);break;case"md":o=a(d.unescape(e.content));break;default:return o}return(o=(t=n("<div>"+o+"</div>")).text().trim())||(o=(r=t.find("img:first")).attr("alt")||r.attr("title")||r.attr("src")),y(o,60)||G.get("post.un.title")},mousewheel:function(e,t){var r;if(!((r=e.currentTarget).scrollHeight<=r.clientHeight))return e.stopPropagation(),!(t>0&&r.scrollTop<2)&&(!(t<0&&r.scrollHeight-r.clientHeight-r.scrollTop<2)&&void 0)},isIE:function(){return n("body").hasClass("ie")},isWindows:function(){return n("body").hasClass("windows")},parseEventDateString:function(e){var t,r,n,i;return o.isAllDay(e)?(e.startDateString=""+p.formatDate(e.startDate,{isUsePref:!0}).dateString+G.get("event.all.day.tips"),t=s(e.endDate).subtract(1,"day"),r=""+p.formatDate(t,{isUsePref:!0}).dateString+G.get("event.all.day.tips"),e.startDateString!==r&&(e.endDateString=r)):(i=p.formatDate(new Date,{isUsePref:!0}).dateString,n=p.formatDate(new Date(e.startDate),{isUsePref:!0}).dateString,e.startDateString=n===i?s(e.startDate).format("LT"):n+" "+s(e.startDate).format("LT"),e.endDate&&(r=p.formatDate(e.endDate,{isUsePref:!0}).dateString,e.endDateString=r===i?s(e.endDate).format("LT"):r+" "+s(e.endDate).format("LT"))),e},isPublicReg:d.once(function(){return u.test(window.location.href)}),getMemberPermissions:function(e,t){var r,n,o,i,a,s,u,c,l;return r=(l=e.hasPermissions("put.member","del.member")).delMember,c=l.putMember,t=null!=t.toJSON?t.toJSON():t,u=e.getRoleScope(),a="organization"===e.name,i=t._userId===q.user.id,o=2===t.role?2===u&&c:c,s=2===t.role?2===u&&r:r,n=u>=1&&u>=t.role||a&&t.role<2,{canManageMemberRole:o&&!i,canDisableMember:c&&n&&!i,canEnableMember:c&&n&&!i,canDeleteMember:s&&!i}},isDirUploadSupported:d.once(function(){return null!=document.createElement("input").webkitdirectory}),interval:function(e,t){var r,n;return n=void 0,(r=function(){return n=setTimeout(function(){if(clearTimeout(n),!0!==e())return r()},t)})(),function(){return clearTimeout(n)}},filenameReservedRegex:function(e){return i.test(e)},thunkToPromise:function(e){return new Promise(function(t,r){return e(function(e,n){return e?r(e):t(n)})})},trackRecentlyViewed:function(e,t){return q.gta.event({objectid:t,type:e,action:"detail displayed"})},hyphenate:function(e){return e.replace("_","").replace(c,"-$&").toLowerCase()}}},"3ggaFlxY":function(e,t,r){e.exports={"member-menu-item":"member-menu-item__2Xl0"}},"3wkBMzjd":function(e,t,r){"use strict";var n,o=r("mrSGxOB2"),i=r("q1tIBJhx"),a=r.n(i),s=r("TSYQbtd+"),u=r.n(s),c=r("GESwhXbR"),l=r("fUCTkFSf"),p=r.n(l);!function(e){e.All="all"}(n||(n={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.props.onClick(t.props.data)},t.stopPropagation=function(e){e.stopPropagation()},t.onToggle=function(e){e.stopPropagation(),t.props.onToggle()},t}return o.d(t,e),t.prototype.renderDragHandle=function(){return this.props.canDrag&&a.a.createElement("div",{className:p.a["drag-handle"]},a.a.createElement(c.Icon,{name:"draggable-circle"}))},t.prototype.renderHandler=function(){var e=this.props.data._id===n.All;return!!this.props.handler&&a.a.createElement("div",{onMouseDown:this.stopPropagation,onClick:this.stopPropagation,className:u()(p.a.handler,{root:e})},this.props.handler)},t.prototype.renderCount=function(){var e=this.props.data.resourceCount;return e>0&&a.a.createElement("span",{className:p.a.count},"  "+e)},t.prototype.renderName=function(){return a.a.createElement("span",{className:p.a.name},this.props.data.name)},t.prototype.renderContent=function(){return a.a.createElement("span",{className:p.a.content},this.renderName(),this.renderCount())},t.prototype.renderToggler=function(){var e=this.props.isExpanded?"triangle-down":"triangle-right",t=this.props.hasChildren?a.a.createElement(c.Icon,{name:e,size:12,onClick:this.props.onToggle,className:p.a["toggler-triangle"]}):a.a.createElement("div",{className:p.a["toggler-circle"]}),r=this.props.hasChildren?this.onToggle:this.stopPropagation;return a.a.createElement("div",{onMouseDown:this.stopPropagation,onClick:r,className:p.a.toggler},t)},t.prototype.render=function(){var e=this.props,t=e.active,r=e.isDragOver,n=e.notAllowedDrop,o={paddingLeft:(this.props.depth+1)*Number(Object(c.getQuadUnit)(5))};return a.a.createElement("li",{className:u()(this.props.className,p.a["node-wrapper"],{"is-drag-over":r},{"not-allowed":n}),style:o,onClick:this.handleClick},a.a.createElement("div",{className:u()(p.a.node,{active:t})},this.renderToggler(),this.renderContent(),this.renderHandler(),this.renderDragHandle()))},t}(i.PureComponent);r.d(t,"a",function(){return f})},"409HBpnm":function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("peh1clMB"),o=r("a+N5u/Cl"),i=Object(n.createSelector)(function(e){return e.ui.teamsListSelect.teams},function(e){return null===e?e:o.chain(e).sortBy("name").sortBy("py").sortBy("pinyin").value()})},"4bF+ISW9":function(e,t,r){e.exports=r.p+"images/projectoverview.e50ae4f3.png"},"4cGZg14d":function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r("a+N5u/Cl"),a=r("GESwhXbR"),s=r("p7RaAO2S"),u=function(e){function t(t){var r=e.call(this,t)||this;r.onSelect=function(e){r.setState({selected:[e]},function(){var e=r.props.onChange;e&&e({values:r.state.selected.map(function(e){return e.data})})})};var n;return n=t.options.filter(function(e){return Object(s.k)(t.values,e.value)}).map(function(e){return{label:e.name,data:e.value}}),r.state={selected:n,opened:!1},r}return n.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=e.values;if(!i.isEqual(t,this.props.values)){var r=this.state.selected.filter(function(e){return Object(s.k)(t,e.data)});this.setState({selected:r})}},t.prototype.getValue=function(){return this.state.selected[0]},t.prototype.renderTrigger=function(){var e=this.getValue(),t=o.cloneElement(this.props.triggerEl,{label:e&&e.label});return o.createElement("span",null,t)},t.prototype.renderOptions=function(){return this.props.options.map(function(e){var t=e.name,r={label:t,data:e.value};return o.createElement(a.Option,{value:r,key:t},t)})},t.prototype.matchFn=function(e,t){return Object(s.j)(e.data,t.data)},t.prototype.render=function(){return o.createElement(a.Select,{value:this.getValue(),disabled:this.props.disabled,nested:!0,trigger:this.renderTrigger(),onSelect:this.onSelect,matchFn:this.matchFn},this.renderOptions())},t}(o.PureComponent);r.d(t,"a",function(){return u})},"4lDISsSE":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"star",use:"star-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="star"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#FFB74C" rx="2" /><path fill="#FFFFFF" d="M6.613 15.417a.443.443 0 0 1-.164-.424l.564-3.45-2.388-2.442a.447.447 0 0 1-.105-.443.417.417 0 0 1 .333-.295l3.3-.503L9.63 4.72c.139-.295.6-.295.74 0l1.476 3.139 3.301.503a.418.418 0 0 1 .333.295.448.448 0 0 1-.105.443l-2.388 2.443.564 3.45a.443.443 0 0 1-.165.423.394.394 0 0 1-.434.033L10 13.821l-2.952 1.63a.398.398 0 0 1-.435-.034z" /></g></symbol>'});a.a.add(s);t.default=s},"4m0cgL3g":function(e,t,r){"use strict";r.r(t),r.d(t,"OrganizationModelById",function(){return a}),r.d(t,"isMemberByRole",function(){return s}),r.d(t,"isOrgMemberOfProj",function(){return u}),r.d(t,"canSaveAsTemplate",function(){return c}),r.d(t,"isPublicProject",function(){return l}),r.d(t,"canForkProjectTo",function(){return p});var n=r("sa1Ed382"),o=r("0FRv5rrl"),i=r.n(o),a=function(e){return i.a.find(e)||new i.a({_id:e},{bindByMatrix:!1})},s=function(e){switch(e){case-1:case 0:case 1:case 2:return!0;default:return!1}},u=function(e){var t=e.get("orgLevel");return null!=t&&s(t)},c=function(e,t){return!!t&&(e.hasPermission("project.put.fork")&&t.hasPermission("projecttemplate.post"))},l=function(e){return"all"===e.get("visibility")},p=function(e,t){if(n.user.get("isGhost"))return!1;if(!t)return!1;var r=t&&a(t);return!(r&&!r.hasPermission("put.transferIn"))&&(e.hasPermission("put.fork")||l(e))}},"4o0kOWKX":function(e,t,r){"use strict";r.r(t);var n=r("mrSGxOB2"),o=r("s0r7VfKc"),i=function(e){return[function(t,r){var o=/\:(\w+)\:tasks\/\w{24}/.exec(t);if(r&&Array.isArray(r)&&o){var i,a=o[1],s=function(e){return void 0===e&&(e=a),function(t){return":"+e+":task/"+t}};switch(a){case"change":var u=s();i=function(t){var r=t._id,o=n.g(t,["_id"]);e.trigger(u(r),o)};break;case"remove":var c=s("destroy");i=function(t){e.trigger(c(t),null)};break;default:i=function(){}}r.forEach(i)}},function(e,t){var r=/\:change\:task\/(\w{24})/.exec(e);if(r&&t&&!0===t.isArchived){var n=r[1];o.default.database&&o.default.database.update("Task",{ancestorIds:{$has:n}},{isArchived:!0}).subscribe()}}]};function a(e){i(e).forEach(function(t){return e.on("all",t)})}r.d(t,"socketDispatcher",function(){return a})},"4v4JYttb":function(e,t,r){e.exports=r.p+"images/events-0.b0473eb2.png"},"4wZadlHd":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"tap-num-dot",use:"tap-num-dot-usage",viewBox:"0 0 7 32",content:'<symbol viewBox="0 0 7 32" id="tap-num-dot"><path d="M1.5 25h3.672v3.672H1.5z" /></symbol>'});a.a.add(s);t.default=s},"50927W45":function(e,t,r){"use strict";var n,o;r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o}),function(e){e.Event="event",e.Post="post",e.Project="project",e.Task="task",e.User="user",e.Work="work",e.Entry="entry",e.Testcase="testcase",e.Collection="collection"}(n||(n={})),function(e){e.All="all",e.Event="event",e.Post="post",e.Project="project",e.Task="task",e.User="user",e.Work="work",e.Collection="collection"}(o||(o={}))},"5650NvE0":function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r("TSYQbtd+"),a=r.n(i),s=r("PuqeRHPh"),u=r.n(s),c=r("GESwhXbR"),l=function(e){return function(t){function r(e){var r=t.call(this,e)||this;return r.onDropdownVisibleChange=function(e){r.setState(n.a({},r.state,{opened:e}))},r.getDropdownRef=function(){return r.dropdownRef},r.setDropdownRef=function(e){return r.dropdownRef=e},r.state={opened:!1},r}return n.d(r,t),r.prototype.render=function(){var t,r=this.props,n=r.content,i=r.persistence,s=r.label,l=r.placement,p=r.className,f=r.onOpen,d=r.onHide,g=r.action,h=r.onClick,m=r.isEmpty,y=r.onClear,v=a()("dropdown-trigger",p);return t=this.props.anchorEl?o.cloneElement(this.props.anchorEl,u()({label:s,onClick:h},Object.keys(this.props.anchorEl.props))):o.createElement(e,{isEmpty:m,onClear:y,className:v,collapsed:!this.state.opened,label:s,onClick:h}),o.createElement(c.Dropdown,{className:"picker-dropdown",onOpen:f,onHide:d,action:g,content:n,placement:l||"bottomLeft",ref:this.setDropdownRef,nested:!0,opened:this.state.opened,persistence:void 0!==i&&i,onVisibleChange:this.onDropdownVisibleChange},t)},r}(o.PureComponent)}},"5Cm92wlC":function(e,t,r){"use strict";var n=r("q1tIBJhx"),o=r.n(n),i=r("TSYQbtd+"),a=r.n(i),s=r("GESwhXbR"),u=r("sa1Ed382"),c=r("rhK5Yt5v"),l=r("gf3sYyKz"),p=function(e){var t=a()(l.project,e.className),r=function(){u.gta.event({action:"open detail",method:"click",projectid:e.projectId,type:"project",segment:"project table view",control:e.full?"full":"table"}),e.alienUrl?window.open(e.alienUrl):window.open("/project/"+e.projectId)},n=o.a.createElement(s.Avatar,{onClick:r,shape:"square",src:e.cover,className:"project__cover"});return e.suspendedAt&&e.suspendedBy&&(n=o.a.createElement(s.Tooltip,{title:Object(c.e)(e.suspendedAt,e.suspendedBy)},n)),o.a.createElement("div",{className:t},o.a.createElement("div",{className:"project__overview_project"},n,o.a.createElement(s.Tooltip,{title:e.name},o.a.createElement("a",{onClick:r,className:"project__name"},e.name))))},f=r("RSFv0j4e"),d=function(e,t){return Object(f.a)(e.pinyin,t.pinyin)};r.d(t,"a",function(){return p}),r.d(t,"b",function(){return d})},"5V57DkyA":function(e,t,r){"use strict";r.r(t);var n=r("q1tIBJhx"),o=r.n(n),i=r("LvDlAkAJ"),a=r("Ht53lnzN"),s=function(){function e(){}return e.genClsName=function(e){return Object(i.uniqueId)("apm_"+e+"_")},e.registerObserver=function(t,r,n){void 0===r&&(r=e.OBSERVER_TIME_OUT_DEFAULT),void 0===n&&(n=[]);var s=e.genClsName(t),u=void 0,c=function(){u&&u.disconnect()};return{component:o.a.createElement(e.TAG_NAME,{className:s,style:e.TAG_STYLE.obj}),dot:"\n      <"+e.TAG_NAME+"\n        class="+s+"\n        style='"+e.TAG_STYLE.str+"'\n      />\n    ",measure:function(o){void 0===o&&(o=[]);try{Object(a.timeDelete)(t),c();var l=Object(i.throttle)(function(){document.body.querySelector("."+s)&&(Object(a.timeEnd)(t,n.concat(o)),c())},50);r>0?(Object(a.timeWithTimeout)(t,r),window.setTimeout(c,r)):Object(a.time)(t),(u=new MutationObserver(l)).observe(document.body,e.MEASURE_OBSERVER_OPTIONS)}catch(p){}}}},e.registerPoint=function(e){return{measure:function(){try{throw Object(a.timeDelete)(e),Object(a.time)(e),new Error}catch(t){}},measureEnd:function(t){try{Object(a.timeEnd)(e,t)}catch(r){}}}},e.TAG_NAME="div",e.TAG_STYLE={obj:{display:"none"},str:"display: none"},e.OBSERVER_TIME_OUT_DEFAULT=6e4,e.MEASURE_OBSERVER_OPTIONS={childList:!0,subtree:!0},e}(),u=s.registerObserver("org-portal-to-project-app"),c=s.registerObserver("org-portal"),l=s.registerPoint("task-detail"),p=s.registerObserver("board-kanban"),f=s.registerObserver("board-list"),d=s.registerObserver("board-time"),g=s.registerObserver("board-table"),h=r("mrSGxOB2"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h.d(t,e),t.prototype.rewriteTag=function(e){switch(e){case"kanban":case"table":case"time":case"list":return"board-view-type: "+e;default:return e}},t.prototype.isPerformanceReport=function(e){return e.tags.includes("performance")},t.prototype.onProcess=function(e){return this.isPerformanceReport(e)?"string"!=typeof e.name?null:h.a({},e,{namespace:e.name,tags:"org-portal-to-project-app"===e.name?e.tags.map(this.rewriteTag):e.tags}):null},t.prototype.shouldSuspend=function(e){return this.isPerformanceReport(e)},t}(r("0A8tS2f9").Reporter);r.d(t,"OrgPortalToProjectAppAPm",function(){return u}),r.d(t,"OrganizationPortalApm",function(){return c}),r.d(t,"TaskDetailApm",function(){return l}),r.d(t,"BoardKanbanApm",function(){return p}),r.d(t,"BoardListApm",function(){return f}),r.d(t,"BoardTimeApm",function(){return d}),r.d(t,"BoardTableApm",function(){return g}),r.d(t,"APMReporter",function(){return m})},"5VFN72OM":function(e,t,r){"use strict"},"5VcWHOOl":function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"b",function(){return l});var n=r("sa1Ed382"),o=r("wd/RKGTj"),i=r.n(o),a=r("tLZJUYWX"),s=r.n(a),u=r("lWa0K2st"),c=function(){var e=[{name:"spring-festival-day",start:"2017.01.27",end:"2017.02.08"},{name:"teambition-618",start:"2019.06.18",end:"2019.06.24",resource:{doodle:u,width:118,height:38,tip:s.a.get("6th.celebration")}}];return l(e,i()())},l=function(e,t){var r;switch(n.env){case"ga":r=4;break;case"development":r=14;break;default:r=2}for(var o=0;o<e.length;o++){var a=e[o],s=i()(a.start,"YYYY.MM.DD").subtract(r,"days"),u=i()(a.end,"YYYY.MM.DD").endOf("day");if(t.isAfter(s)&&t.isBefore(u))return a}return null}},"5e77VwZ1":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"forum",use:"forum-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="forum"><path fill="#A6A6A6" fill-rule="evenodd" d="M2 0h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm10.387 9.2c.38 0 .612-.284.613-.66V3.681A.686.686 0 0 0 12.31 3H6.338a.686.686 0 0 0-.69.682v.904c0 .11.09.2.2.2h4.388a1 1 0 0 1 1 1v3.215c0 .11.09.2.2.2h.952zm-2.035-2.84a.684.684 0 0 0-.689-.681H3.69a.684.684 0 0 0-.689.68v4.842c0 .376.308.68.69.68h1.758l1.015 1.026a.3.3 0 0 0 .426 0l1.015-1.025h1.76c.38 0 .688-.305.688-.68V6.358z" /></symbol>'});a.a.add(s);t.default=s},"5lGttqQN":function(e,t,r){"use strict";r.r(t),r.d(t,"getGroupChatRoomInfoRequest",function(){return g}),r.d(t,"getGroupChatRoomInfoFulfilled",function(){return h}),r.d(t,"getGroupChatRoomInfoRejected",function(){return m}),r.d(t,"getGroupChatRoomActivitiesRequest",function(){return y}),r.d(t,"getGroupChatRoomActivitiesFulfilled",function(){return v}),r.d(t,"getGroupChatRoomActivitiesRejected",function(){return b}),r.d(t,"getGroupChatRoomActivitiesLoadMore",function(){return _}),r.d(t,"closeGroupChatRoom",function(){return S}),r.d(t,"markGroupChatRoomMute",function(){return T}),r.d(t,"markGroupChatRoomMuteRejected",function(){return E}),r.d(t,"markGroupChatRoomRead",function(){return O}),r.d(t,"markGroupChatRoomReadRejected",function(){return w}),r.d(t,"recallGroupMessage",function(){return C}),r.d(t,"recallGroupMessageReject",function(){return I}),r.d(t,"bootstrapProjectChatRoom",function(){return k}),r.d(t,"reducer",function(){return j}),r.d(t,"epic",function(){return A}),r.d(t,"bootstrapGroupChatView",function(){return P}),r.d(t,"closeGroupChat",function(){return R});var n,o=r("mrSGxOB2"),i=r("4c1CS0b3"),a=r("6SzIBtPz"),s=r("NOGqly5s"),u=r("tLZJUYWX"),c=r("GESwhXbR"),l=r("s0r7VfKc"),p=r("fio7jWQ0"),f=r("gh8QIhMV"),d={room:[],activities:[],page:1,pageSize:30,hasMore:!0,isLoading:!1,maxId:"",roomType:null},g=Object(a.a)("GET_GROUP_CHAT_ROOM_INFO_REQUEST"),h=Object(a.a)("GET_GROUP_CHAT_ROOM_INFO_FULFILLED"),m=Object(a.a)("GET_GROUP_CHAT_ROOM_INFO_REJECTED"),y=Object(a.a)("GET_GROUP_CHAT_ACTIVITIES_REQUEST"),v=Object(a.a)("GET_GROUP_CHAT_ACTIVITIES_FULFILLED"),b=Object(a.a)("GET_GROUP_CHAT_ACTIVITIES_REJECT"),_=Object(a.a)("GET_GROUP_CHAT_ACTIVITIES_LOAD_MORE"),S=Object(a.a)("CLOSE_GROUP_CHAT_ROOM"),T=Object(a.a)("MARK_GROUP_CHAT_ROOM_MUTE"),E=Object(a.a)("MARK_GROUP_CHAT_ROOM_MUTE_REJECTED"),O=Object(a.a)("MARK_GROUP_CHAT_ROOM_READ"),w=Object(a.a)("MARK_GROUP_CHAT_ROOM_READ_REJECTED"),C=Object(a.a)("RECALL_GROUP_MESSAGE"),I=Object(a.a)("RECALL_GROUP_MESSAGE_REJECT"),k=Object(a.a)("BOOTSTRAP_PROJECT_CHAT_ROOM"),j=Object(a.b)(((n={})[g.toString()]=function(e){return o.a({},e,{page:1,pageSize:30,activities:[],isLoading:!0})},n[h.toString()]=function(e,t){return o.a({},e,{room:t.payload})},n[y.toString()]=function(e){return o.a({},e,{isLoading:!0})},n[v.toString()]=function(e,t){var r=t.payload.activities,n=e.maxId;r.length&&(n=o.f(r.reverse(),1)[0]._id);return o.a({},e,t.payload,{isLoading:!1,activities:r,maxId:n})},n[_.toString()]=function(e){return o.a({},e,{isLoading:!0})},n[S.toString()]=function(){return d},n),d),A=Object(s.a)(function(e){return e.ofType(g.toString()).map(function(e){return e.payload}).switchMap(function(t){var r=t.type,n=t.roomId;return l.default.getRoomInfo(r,n).changes().takeUntil(e.ofType(S.toString())).scan(function(e,t){var r=o.f(e,1)[0],n=o.f(t,1)[0];return[n,!(r&&r._id===n._id&&r.isMute!==n.isMute)]},[null,null]).map(h).catch(function(e){return Object(f.throwError)(e),i.Observable.of(m(e))})})},function(e,t){return e.ofType(y.toString(),_.toString()).scan(function(e,r){var n=t.getState().ui.groupChat,i=n.page,a=n.pageSize,s=n.maxId,u={page:i,count:a},c=r.type===y.toString()?l.default.getRoomActivities(r.payload,u):l.default.getMoreRoomActivities(r.payload,o.a({maxId:s},u));return i===e.page&&(c=e.token.concat(c)),{token:c,page:i+1}},{token:null,page:null}).switchMap(function(r){var n=r.token,o=r.page;return n.changes().takeUntil(e.ofType(S.toString())).debounceTime(0).map(function(e){var r=t.getState().ui.room.pageSize;return{activities:e,page:o,hasMore:e.length>=r*(o-1)}}).map(v).do(function(){var e=t.getState().ui.groupChat.room;p.store.dispatch(O(e[0]._id))}).catch(function(e){return Object(f.throwError)(e.message),i.Observable.of(b(e))})})},function(e){return e.ofType(h.toString()).map(function(e){var t=o.f(e.payload,2),r=t[0];return t[1]?y(r._id):Object(p.noOpAction)()})},function(e){return e.ofType(C.toString()).map(function(e){return e.payload}).exhaustMap(function(e){return l.default.fetch.recallChatMessage(e).map(p.noOpAction).catch(function(e){return c.Toast.error(u.get("chat.message.recall.fail")),i.Observable.of(I(e))})})},function(e){return e.ofType(T.toString()).switchMap(function(e){var t=e.payload;return t?l.default.markMute(t._id,!t.isMute).catch(function(e){return Object(f.throwError)(e),i.Observable.of(E(e))}).map(p.noOpAction):i.Observable.of(null).map(p.noOpAction)})},function(e){return e.ofType(k.toString()).map(function(e){return e.payload}).map(g)},function(e){return e.ofType(O.toString()).switchMap(function(t){var r=t.payload;return r?l.default.fetch.markRoomRead(r).map(function(e){return o.a({},e,{_id:r})}).takeUntil(e.ofType(S.toString())).catch(function(e){return Object(f.throwError)(e),i.Observable.of(w(e))}).map(p.noOpAction):i.Observable.of(null).map(p.noOpAction)})}),P=function(e){p.store.dispatch(k(e))},R=function(){p.store.dispatch(S())}},"5pBrSTAv":function(e,t,r){"use strict";r.d(t,"f",function(){return c}),r.d(t,"g",function(){return l}),r.d(t,"h",function(){return p}),r.d(t,"x",function(){return f}),r.d(t,"y",function(){return d}),r.d(t,"z",function(){return g}),r.d(t,"s",function(){return h}),r.d(t,"o",function(){return m}),r.d(t,"p",function(){return y}),r.d(t,"q",function(){return v}),r.d(t,"r",function(){return b}),r.d(t,"l",function(){return _}),r.d(t,"m",function(){return S}),r.d(t,"n",function(){return T}),r.d(t,"i",function(){return E}),r.d(t,"j",function(){return O}),r.d(t,"k",function(){return w}),r.d(t,"t",function(){return C}),r.d(t,"a",function(){return I}),r.d(t,"u",function(){return k}),r.d(t,"b",function(){return j}),r.d(t,"v",function(){return A}),r.d(t,"c",function(){return P}),r.d(t,"w",function(){return R}),r.d(t,"d",function(){return N}),r.d(t,"e",function(){return x});var n,o=r("mrSGxOB2"),i=r("a+N5u/Cl"),a=r("6SzIBtPz"),s=function(e){return Object(a.a)(u+"/"+e)},u="PROJECTS_INFORMATION_BOARD_APP",c=s("READ_PROJECT_BOARD"),l=s("READ_PROJECT_BOARD/FAILURE"),p=s("READ_PROJECT_BOARD/SUCCESS"),f=s("UPDATE_PROJECT_BOARD"),d=s("UPDATE_PROJECT_BOARD/FAILURE"),g=s("UPDATE_PROJECT_BOARD/SUCCESS"),h=s("RESET_PROJECTS_OF_PROJECT_TAG"),m=s("READ_PROJECTS_OF_PROJECT_TAG"),y=s("READ_PROJECTS_OF_PROJECT_TAG/FAILURE"),v=s("READ_PROJECTS_OF_PROJECT_TAG/SUCCESS"),b=s("READMORE_PROJECTS_OF_PROJECT_TAG/SUCCESS"),_=s("READ_PROJECT_TAGS"),S=s("READ_PROJECT_TAGS/FAILURE"),T=s("READ_PROJECT_TAGS/SUCCESS"),E=s("READ_PROJECT_CUSTOM_FIELDS"),O=s("READ_PROJECT_CUSTOM_FIELDS/FAILURE"),w=s("READ_PROJECT_CUSTOM_FIELDS/SUCCESS"),C=s("SELECT_PROJECT_TAG"),I=s("FILTER_PROJECTS_INFORMATION_BOARD_TABLE"),k=s("SORT_PROJECTS_INFORMATION_BOARD_TABLE"),j=s("MOUNT_PROJECTS_INFORMATION_BOARD_APP"),A=s("UNMOUNT_PROJECTS_INFORMATION_BOARD_APP"),P=s("MOUNT_PROJECTS_INFORMATION_TABLE_HEAD_MANAGER_ACTION"),R=s("UNMOUNT_PROJECTS_INFORMATION_TABLE_HEAD_MANAGER_ACTION"),N={filter:null,projectBoard:null,projectCustomFields:null,projects:null,projectsOfProjectTagCount:1e3,projectsOfProjectTagHasMore:!0,projectsOfProjectTagPage:1,projectTags:null,selectedProjectTagId:"all",sort:null},x=Object(a.b)(((n={})[""+m]=function(e){return o.a({},e,{projects:null})},n[""+y]=function(e,t){return o.a({},e,{projects:t.payload})},n[""+v]=function(e,t){var r=t.payload;if(!r)return e;var n=r.projects,i=o.g(r,["projects"]);return Array.isArray(n)?o.a({},e,i,{projects:n}):e},n[""+b]=function(e,t){var r=t.payload;if(!r)return e;var n=r.projects,a=o.g(r,["projects"]);if(!Array.isArray(n))return e;if(!Array.isArray(e.projects))return e;var s=o.h(e.projects,n);return s=i.unique(s,!0,function(e){return e._id}),o.a({},e,a,{projects:s})},n[""+_]=function(e){return o.a({},e,{projectTags:null})},n[""+S]=function(e,t){return o.a({},e,{projectTags:t.payload})},n[""+T]=function(e,t){var r=t.payload;if(!r)return e;var n=r.projectTags;return Array.isArray(n)?o.a({},e,{projectTags:n}):e},n[""+l]=function(e,t){return o.a({},e,{projectBoard:t.payload})},n[""+p]=function(e,t){var r=t.payload;if(!r)return e;var n=r.projectBoard;return n?o.a({},e,{projectBoard:n}):e},n[""+g]=function(e,t){var r=t.payload;if(!r)return e;var n=r.projectBoard;return n?o.a({},e,{projectBoard:o.a({},e.projectBoard,n)}):e},n[""+E]=function(e){return o.a({},e,{projectCustomFields:null})},n[""+O]=function(e,t){return o.a({},e,{projectCustomFields:t.payload})},n[""+w]=function(e,t){var r=t.payload;if(!r)return e;var n=r.projectCustomFields;return Array.isArray(n)?o.a({},e,{projectCustomFields:n}):e},n[""+C]=function(e,t){var r=t.payload;if(!r)return e;var n=r.selectedProjectTagId;return"string"!=typeof n?e:o.a({},e,{selectedProjectTagId:n})},n[""+A]=function(){return N},n[""+h]=function(e){var t=N.projectsOfProjectTagCount,r=N.projectsOfProjectTagHasMore,n=N.projectsOfProjectTagPage;return o.a({},e,{projectsOfProjectTagCount:t,projectsOfProjectTagHasMore:r,projectsOfProjectTagPage:n})},n[""+I]=function(e,t){var r=t.payload;if(!r)return e;var n=r.filter;return o.a({},e,{filter:n})},n[""+k]=function(e,t){var r=t.payload;if(!r)return e;var n=r.sort;return o.a({},e,{sort:n})},n),N)},"5qt3k8Zi":function(e,t,r){var n,o,i,a,s=[].slice;a=r("sa1Ed382"),n=function(e){return!!(a.PREFERENCE.get("tips")||{})[e]},o=function(e,t){return a.PREFERENCE.updateFeatureGuide(e,t)},i=function(){var e,t,r,n;for(n={},e=0,r=(t=1<=arguments.length?s.call(arguments,0):[]).length;e<r;e++)n[t[e]]=!0;return a.PREFERENCE.patchTips(n)},e.exports={hasCustomScrumFlow:function(){return n("CustomScrumFlow")},markCustomScrumFlow:function(e){return o("CustomScrumFlow",e)},hasCustomScrumBanner:function(){return n("CustomScrumBanner")},markCustomScrumBanner:function(e){return o("CustomScrumBanner",e)},hasMyPageCustomGuide:function(){return n("MyPageCustomGuide")},markVisitedHelpCenter:function(){return o("HelpCenterVisited")},hasVisitedHelpCenter:function(){return n("HelpCenterVisited")},markWorkspaceSwitchGuideTip:function(e){return o("workspaceSwitchGuideTip",e)},hasWorkspaceSwitchGuideTip:function(){return n("workspaceSwitchGuideTip")},markVisitedHelpScenario:function(){return o("HelpCenterScenarioVisited")},hasVisitedHelpScenario:function(){return n("HelpCenterScenarioVisited")},hasVisitedTaskScenarioConfigTip:function(){return n("TaskScenarioConfigTipV8_12")},markVisitedTaskScenarioConfigTip:function(){return o("TaskScenarioConfigTipV8_12")},hasVisitedPluginAdjustTip:function(){return n("PluginAdjustTipV8_12")},markVisitedPluginAdjustTip:function(){return o("PluginAdjustTipV8_12")},hasVisitedEventFieldConfigGuide:function(){return n("EventFieldConfigGuide_V_9_1")},markVisitedEventFieldConfigGuide:function(){return o("EventFieldConfigGuide_V_9_1")},hasVisitedDockNewUser:function(){return n("DockNewUserTips_V_9_13")},markVisitedDockNewUser:function(){return o("DockNewUserTips_V_9_13")},hasVisitedConfScFieldsNotice:function(){return n("ConfScFieldsNotice_V_9_16")},markVisitedConfScFieldsNotice:function(){return o("ConfScFieldsNotice_V_9_16")},hasVisitedAddOrgSfConfigNotice:function(){return n("AddOrgSfConfigNotice_V_9_16")},markVisitedAddOrgSfConfigNotice:function(){return o("AddOrgSfConfigNotice_V_9_16")},hasVisitedDashboard:function(){return n("DashboardGuide_V_9_17")},markVisitedDashboard:function(){return o("DashboardGuide_V_9_17")},hasVisitedTaskflowGuideV2:function(){return n("TaskflowGuide_V_9_19")},markVisitedTaskflowGuideV2:function(){return o("TaskflowGuide_V_9_19")},hasVisitedDashboardToCreate:function(){return n("dashboarGuide_V_10_1_step_1")},markVisitedDashboardToCreate:function(){return o("dashboarGuide_V_10_1_step_1")},hasVisitedSaveToDashboard:function(){return n("dashboarGuide_V_10_1_step_2")},markVisitedSaveToDashboard:function(){return o("dashboarGuide_V_10_1_step_2")},hasVisitedDingTalkBind:function(){return n("DingTalkBind_V10_5_0")},markVisitedDingTalkBind:function(){return o("DingTalkBind_V10_5_0")},hasVisitedDingTalkTransfer:function(){return n("DingTalkTransfer_V10_5_0")},markVisitedDingTalkTransfer:function(){return o("DingTalkTransfer_V10_5_0")},hasPersonalOrgTipDisplayed:function(){return n("personalOrgTip_v10_6_displayed")},markPersonalOrgTipDisplayed:function(){return i("personalOrgTip_v10_6_displayed")},hasPersonalOrgTipBannerConsumed:function(){return n("personalOrgTip_v10_6_bannerConsumed")},markPersonalOrgTipBannerConsumed:function(){return i("personalOrgTip_v10_6_bannerConsumed","personalOrgTip_v10_6_displayed")},markVisitedObjectDetailPreivew:function(){return o("ObjectDetailPreivew_V10_3_0")},hasVisitedProjectCluster:function(){return n("ProjectCluster")},markVisitedProjectCluster:function(){return o("ProjectCluster")},hasVisitedTestplanV2Guide:function(){return n("testplan_v2_guide_stage_1")},markVisitedTestplanV2Guide:function(){return o("testplan_v2_guide_stage_1")},hasVisitedTestcaseGroupLinkGuide:function(){return n("testcase_group_link_guide")},markVisitedTestcaseGroupLinkGuide:function(){return o("testcase_group_link_guide")},markVisitedCaseCenter:function(){return o("CaseCenterVisited_V10_7_0")},hasVisitedCaseCenter:function(){return n("CaseCenterVisited_V10_7_0")},hasVisitedTestplanViewPanelGuide:function(){return n("testplan_view_panel_guide")},markVisitedTestplanViewPanelGuide:function(){return o("testplan_view_panel_guide")},hasVisitedTestplanViewPanelUserGuide:function(){return n("testplan_view_panel_user_guide")},markVisitedTestplanViewPanelUserGuide:function(){return o("testplan_view_panel_user_guide")},hasVisitedAoneGuideStep1:function(){return n("aone_guide_step1")},hasVisitedAoneGuideStep2:function(){return n("aone_guide_step2")},markVisitedAoneGuideStep1:function(){return i("aone_guide_step1")},markVisitedAoneGuideStep2:function(){return i("aone_guide_step2")},hasVisitedOrgOuterMembersQuotaBanner:function(){return n("org_outer_members_quota_banner_v10_12_4")},markVisitedOrgOuterMembersQuotaBanner:function(){return i("org_outer_members_quota_banner_v10_12_4")},hasVisitedSprintAppCustomViewsMigrationGuide:function(){return n("sprint_app_custom_views_migration_guide_v10_19_0")},markVisitedSprintAppCustomViewsMigrationGuide:function(){return i("sprint_app_custom_views_migration_guide_v10_19_0")},hasVisitedInviteMemberIntoOrgBanner:function(){return n("invite_member_into_org_banner_v10_20_0")},markVisitedInviteMemberIntoOrgBanner:function(){return o("invite_member_into_org_banner_v10_20_0")},hasVisitedProjecttagUserGuide:function(){return n("projecttag_user_guide_v10_22_0")},markVisitedProjecttagUserGuide:function(){return o("projecttag_user_guide_v10_22_0")},hasVisitedProjecttagImportProjectsGuide:function(){return n("projecttag_import_projects_guide_v10_22_0")},markVisitedProjecttagImportProjectsGuide:function(){return o("projecttag_import_projects_guide_v10_22_0")},hasVisiteDefaultPriviledgeProvider:function(){return n("default_priviledge_provider_v10.22.0")},markVisiteDefaultPriviledgeProvider:function(){return o("default_priviledge_provider_v10.22.0")}}},"62VxAo8H":function(e,t,r){"use strict";r.r(t);r("q1tIBJhx"),r("oz7qzW7M"),r("o1AGUtTR"),r("ZFw/G09A"),r("i8i4LrFt"),r("zi/b5T/r"),r("/MKjzBat"),r("zQo2g8Yu"),r("Ve9G5Tva"),r("1w3KMK6r"),r("fvjXLGkK"),r("6SzIBtPz"),r("MCI9yZEr"),r("NOGqly5s"),r("TSYQbtd+"),r("SV24RDLY"),r("eGJ5FRdJ"),r("uciXoYZz"),r("peh1clMB"),r("0ALxq25A")},"6USodP/l":function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("q1tIBJhx"),o=r("S3Uj9fSO"),i=r.n(o),a=(r("+qBEhxl5"),function(e){var t={entering:0,entered:e.percent};return n.createElement("div",{style:{backgroundColor:e.underBgColor},className:"tapestry-progress"},n.createElement(i.a,{in:!0,appear:!0,timeout:50},function(r){var o={backgroundColor:e.aboveBgColor,width:t[r]+"%"};return n.createElement("div",{style:o})}))})},"6hY5DLrv":function(e,t,r){e.exports=r.p+"images/zoom-1.4921894f.png"},"70UrrKBP":function(e,t,r){"use strict";r.r(t);var n=r("mrSGxOB2"),o=r("+2RfZ2TT"),i=r.n(o),a=r("a+N5u/Cl"),s=r("8yf6doCl"),u=r("p3BxYchr"),c=r("WlCGY8BB"),l=r("cYPCnssF"),p=r("4c1CS0b3"),f=r("GESwhXbR"),d=r("gh8QIhMV"),g=r("Rmym59ay");function h(e){var t=/\.(\w+)$/.exec(e.name);return t&&t[1]||""}function m(e){return e.type.replace(/\/.*$/,"")}var y=1048576;function v(e,t,r){var n=document.createElement("canvas"),o=n.getContext("2d");return n.width=t,n.height=r,o.drawImage(e,0,0,t,r),n.toDataURL("image/jpeg",.7)}function b(e,t,r){if(void 0===t&&(t=32),void 0===r&&(r=32),"image"===m(e)){if(window.createImageBitmap){var n=window.createImageBitmap(e,{resizeWidth:t,resizeHeight:r}).then(function(e){return v(e,t,r)});return p.Observable.fromPromise(n)}if(e.size<=y){var o=new Image;return new g.ImageObservable(o,e).map(function(){return v(o,t,r)})}}return p.Observable.of("")}function _(e){if(Object(d.throwError)(e),e instanceof l.UploadError){var t=e.message();if(t&&f.Toast.error(t),e.data.options)try{e.data.options.onError(e,e.data.meta)}catch(r){Object(d.throwError)(r)}}}var S=r("sa1Ed382"),T=r("3eMzznN/"),E=new s.Subject;E.map(function(e){var t=e.file,r=e.meta,o=e.options,i=function(e){return e.size<2e7}(t)||!o.enableChunkUpload?Object(u.upload)(t,o):Object(u.chunkUpload)(t,o),a=i.upload$,s=i.start,c=n.g(i,["upload$","start"]);return o.onStart(c,r),{upload$:a,start:s,data:e}}).filter(function(e){return function(e){var t=e.file,r=e.meta,o=e.options;if(!t||0===t.size)return _(new l.UploadError(l.UploadError.Empty,e)),!1;var i=o.fileSizeLimit;if(i=Object(a.isFunction)(i)?i(r):i,t.size>i)return _(new l.UploadError(l.UploadError.SizeLimit,n.a({},e,{options:n.a({},o,{fileSizeLimit:i})}))),!1;if(O.indexOf(h(t))>=0)return _(new l.UploadError(l.UploadError.Type,e)),!1;if(T.filenameReservedRegex(t.name))return _(new l.UploadError(l.UploadError.Name,e)),!1;return!0}(e.data)}).mergeMap(function(e){var t=e.upload$,r=e.start,n=e.data,o=n.file,i=n.meta,a=n.options,s=Date.now();return r(),t.do(function(e){var t=e.action,r=void 0===t?"":t,u=e.payload;switch(r){case"upload/retryable":a.onRetryable(u,i);break;case"upload/progress":a.onProgress(u,i);break;case"upload/finish":!function(e,t,r){Object(c.logEx)(["upload","upload-success"],{uplaod_file:e.name,uplaod_type:r.mimeType,uplaod_size:e.size,uplaod_fileKey:r.fileKey,uplaod_time:Date.now()-t})}(o,s,u),a.onComplete(u,i),S.gta.event({action:"added content",method:"click",type:"file"});break;case"upload/error":var p=u;!function(e,t,r){Object(c.logEx)(["upload","upload-failure"],{uplaod_file:e.name,uplaod_size:e.size,uplaod_type:e.type,uplaod_status:r&&r.status,uplaod_time:Date.now()-t})}(o,s,p),a.onError(p,i),_(new l.UploadError(o.path?l.UploadError.Directory:l.UploadError.Normal,n))}})},3).catch(function(e,t){return Object(d.throwError)(e),t}).subscribe();var O=["app"];var w=r("8y0JNx5d"),C=r("2qRnoGmE"),I={pick:void 0,dnd:void 0,paste:void 0,accept:"",directory:!1,onDndHover:a.noop,onDndDrop:a.noop,auto:!0,autoStart:!1,enableChunkUpload:!0,fileNumLimit:500,fileSizeLimit:C.FILE_FREE_SIZE,validate:function(){return!0},getUploadUrl:function(){return Object(w.getFileHost)()+"/upload"},getChunkStartUrl:function(){return Object(w.getFileHost)()+"/upload/chunk"},getChunkUrl:function(e,t){return Object(w.getFileHost)()+"/upload/chunk/"+e.fileKey+"?chunk="+(t+1)+"&chunks="+e.chunks},getChunkFinishUrl:function(e){return Object(w.getFileHost)()+"/upload/chunk/"+e.fileKey},onCreateBatch:a.noop,onQueued:a.noop,onCreate:a.noop,onStart:a.noop,onProgress:a.noop,onComplete:a.noop,onError:a.noop,onPausable:a.noop,onRetryable:a.noop,beforeCreate:a.noop},k=function(){function e(e){this.queue=[],this.subscriptions=[];var t=n.a({},I,e,{headers:{Authorization:S.user.get("strikerAuth")}});this.filesSubscription=this.setupFiles$(t),this.addFileHandlers(t)}return e.prototype.setupFiles$=function(e){var t=this;return this.files$=new s.Subject,this.files$.map(function(e){return e.filter(t.filterFile)}).filter(function(t){return function(e,t){if(0===e.length)return!1;if(e.length>t.fileNumLimit)return _(new l.UploadError(l.UploadError.NumLimit,{options:t,meta:{},filesLength:e.length})),!1;return!0}(t,e)&&e.validate(t)}).map(function(e){return Object(a.sortBy)(e,function(e){return e.size})}).do(function(t){return e.beforeCreate(t)}).concatMap(function(t){var r=e.onCreateBatch(t);return t.map(function(t,n){return{file:t,meta:e.onCreate(t,n,r),options:e}})}).do(function(r){e.onQueued(r.file,r.meta),e.auto?E.next(r):t.queue.push(r)}).catch(function(e,t){return Object(d.throwError)(e),t}).subscribe()},e.prototype.addFileHandlers=function(e){var t=this;if(e.pick&&e.pick.id&&i()(e.pick.id).each(function(r,n){var o=Object(u.handleClick)(n,{multiple:e.pick.multiple||!1,accept:e.accept,directory:e.directory}).subscribe(function(e){return t.files$.next(e)});t.subscriptions.push(o)}),e.dnd){var r=Object(u.handleDrop)(i()(e.dnd).get(0),{directory:!0,onHover:function(t,r){i()(t).toggleClass("webuploader-dnd-over",r),e.onDndHover(t,r)},onDrop:e.onDndDrop}).map(function(t){return t.filter(function(t){return function(e,t){if(""===t)return!0;return Object(a.any)(t.split(",").map(function(t){return new RegExp(t).test(e.type)}))}(t,e.accept)})}).subscribe(function(e){return t.files$.next(e)});this.subscriptions.push(r)}if(e.paste){var n=Object(u.handlePaste)(i()(e.paste).get(0)).subscribe(function(e){return t.files$.next(e)});this.subscriptions.push(n)}},e.prototype.triggerUpload=function(e){Object(u.getFilesFromInput)(e).subscribe(this.addFiles.bind(this))},e.prototype.destroy=function(){this.filesSubscription.unsubscribe(),this.files$.unsubscribe(),this.subscriptions.forEach(function(e){e.unsubscribe()}),this.queue=[]},e.prototype.addFiles=function(e){this.files$.next(e)},e.prototype.uploadQueue=function(){this.queue.forEach(function(e){E.next(e)}),this.queue=[]},e.prototype.filterFile=function(t){return!(e.excludeFiles.indexOf(t.name)>=0)},e.excludeFiles=[".DS_Store","desktop.ini"],e}();r.d(t,"Uploader",function(){return k}),r.d(t,"getFileExtension",function(){return h}),r.d(t,"getFileCategory",function(){return m}),r.d(t,"createThumbnail",function(){return b}),r.d(t,"handleUploadError",function(){return _})},"73IHJmUt":function(e,t,r){e.exports=r.p+"images/markdown-2.388ddad9.png"},"77NnVLwu":function(e,t,r){var n,o,i,a,s,u,c,l,p,f,d,g,h,m,y,v,b,_,S,T,E,O,w,C,I,k,j,A,P,R,N,x,D,M,F,L,B,U,G={}.hasOwnProperty,q=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};v=r("a+N5u/Cl"),U=r("sa1Ed382"),S=r("2qRnoGmE"),g=r("z/ifOGtP"),o=r("qHH6+g6Q"),i=r("wd/RKGTj"),d=r("wu4EEviu"),p=r("gLTu//Kz"),n=r("odY26VIi"),c=r("9+0BJoM0"),r("wKLGLwqK"),r("QyjeWo4p"),r("CxY0Mkc1"),h=r("GESwhXbR").Toast,M=r("80gYlwjC"),u=M.Payment,a=M.ObjectType,F=r("MmYzUhjM"),w=F.getPayType,E=F.getFileSizeLimit,f=r("//SEpMEE"),y=r("RQ44psah"),m=r("RLD3BeS/").ToastMessageWithUrl,L=r("bvmrLhnu"),_=L.composeBoardViewAppId,O=L.getGtaCategory,j=L.isScrum,R=L.isTaskflow,k=L.isNormal,P=L.isStoryEnabled,I=L.isBugEnabled,A=L.isSprintEnabled,N=L.isTaskflowEnabled,x=L.isTasklistIgnored,C=L.hasScrumAppEnabled,T=L.enableSmartGroupSortMethod,b=L.canUseTaskFeature,D=g.namespace("project_tasklists_board"),B=g.namespace("project_smart_group_sort"),delete(l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)G.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o),t.prototype.name="project",t.prototype.urlRoot="projects",t.prototype.defaults={_organizationId:null,objectType:"project",category:"blank project",description:"",recent:[0,0,0,0,0],_roleId:-2,_orgRoleId:-2,task:{total:0,done:0,undone:0,today:0,outdate:0,unassigned:0}},t.prototype.initialize=function(){return Object.defineProperty(this,"payment",{get:function(){var e,t,r,n;return r=null!=(e=s.findOne(0,this.get("_organizationId")))?e.get("plan"):void 0,n=this.get("_organizationId")?a.organization:a.user,(t=u.create(r,n)).payType=w(t),t.fileSizeLimit=E(t),t}}),this.initLocaleStore(),t.__super__.initialize.apply(this,arguments)},t.prototype.get=function(e){var n;return n=r("HDJEOtNh").getRoleScopeByOrgId,"orgLevel"===e?n(this.attributes._organizationId):t.__super__.get.apply(this,arguments)},t.prototype.initLocaleStore=function(){var e,t,r;if(this.id)return e=this.isScrum()?f.getSprintName():"tasks",t="basic"===(t=this.getBoardViewType(e)||D(this.id)||"kanban")?"kanban":t,this.setBoardViewType(t,e),this.enableSmartGroupSortMethod()?(r=B(this.id))&&this.set({smartGroupsSort:r}):void 0},t.prototype.getMaxProjectCount=function(){return 2e3},t.prototype.listen=function(){var e;if(!this.listenedLock&&this.id)return this.listenedLock=!0,d.off(":refresh:projects/"+this.id),d.on(":refresh:projects/"+this.id,(e=this,function(){var t;return e.fetch(),null!=(t=n.get(e.id))?t.synced=!1:void 0})),t.__super__.listen.apply(this,arguments)},t.prototype.parse=function(e){return(e=v.extend(this.toJSON(),e)).role&&p.get(e.role._id).set(e.role),e},t.prototype.sync=function(e,r,n){var o;switch(o=n.success,e){case"create":n.url&&n.url!==this.urlRoot||(n.success=function(e){return e.isNew=!0,"function"==typeof o?o(e):void 0})}return t.__super__.sync.apply(this,arguments)},t.prototype.fetchStatistics=function(){return new Promise((e=this,function(t,r){return e.sync("read",e,{url:e.url()+"/statistic",attrs:{today:i().endOf("day").toISOString()},expireCache:{namespace:"project_"+e.id+"_statistic",expire:10},success:function(r){return e.set(r),t()},error:r})}));var e},t.prototype.isProTemplate=function(){return!!this.get("proTemplateType")},t.prototype.isScrum=function(){return j(this.pick("proTemplateType"))},t.prototype.isTaskflow=function(){return R(this.pick("normalType"))},t.prototype.isNormal=function(){return k(this.pick("normalType","proTemplateType"))},t.prototype.isStoryEnabled=function(){return P(this.pick("applications"))},t.prototype.isBugEnabled=function(){return I(this.pick("applications"))},t.prototype.isSprintEnabled=function(){return A(this.pick("applications"))},t.prototype.isTaskflowEnabled=function(){return N(this.pick("proTemplateType","normalType"))},t.prototype.isTasklistIgnored=function(){return x(this.pick("proTemplateType"))},t.prototype.canCopyToAnotherOwner=function(){return this.isTaskflowEnabled()?{result:!1,reason:tb_i18n.get("project.copy.taskflow.disabled.tips")}:{result:!0}},t.prototype.hasScrumAppEnabled=function(){return C(this.pick("applications"))},t.prototype.canUseTaskFeature=function(){return b(this.pick("applications"))},t.prototype.getGtaCategory=function(){return O(this.pick("normalType","proTemplateType","category"))},t.prototype.getScrumApplications=function(){return this.get("applications").filter(function(e){var t;return t=e.name,q.call(f.getScrumAppNames(),t)>=0})},t.prototype.getApplications=function(){var e,t,r,n,o;return e=this.get("applications"),o=f.getScrumAppNames(),t=(n=v.partition(e,function(e){var t;return t=e.name,q.call(o,t)>=0&&0===e.order}))[0],r=n[1],t.length?v.sortBy(t,function(e){var t;return null!=(t=f.getScrumApps().find(function(t){return t.name===e.name}))?t.order:void 0}).concat(r):e},t.prototype.getAppsByOrder=function(){return v.sortBy(v.filter(this.getApplications(),function(e){var t;return 1===(t=e.type)||3===t||5===t}),"order")},t.prototype.getFirstApp=function(){var e;return null!=(e=this.getAppsByOrder()[0])?e.name:void 0},t.prototype.getFirstAppExclude=function(e){var t;return null!=(t=v.filter(this.getAppsByOrder(),function(t){return t.name!==e})[0])?t.name:void 0},t.prototype.isAlienProject=function(){return!!this.get("alien")},t.prototype.transfer=function(e,r){var n,o,i,a;return null==r&&(r={}),r.url=this.url()+"/transfer",r.attrs={_id:this.id},"user"===r.ownerType?r.attrs._userId=e:r.attrs._organizationId=e,i=r.success||function(){},o=this.get("_organizationId"),n=t.Collection,r.success=(a=this,function(e){var t,r,s,u;return t=n.get(0),o&&(s=n.get(o,{boundToObjectType:"organization"})),u=n.get(e._organizationId,{boundToObjectType:"organization"}),r=(null!=s?s.get(a.id):void 0)||t.get(a.id),null!=s&&s.remove(r),r.set(e),null!=u&&u.add(r.toJSON(),{merge:!0}),r.getRoleScope()>=-1&&t.add(r.toJSON(),{merge:!0}),i(e)}),"function"==typeof r.beforeSend&&r.beforeSend(),this.sync("update",this,r),this},t.prototype.quit=function(e){return e||(e={}),e.url=this.url()+"/quit",e.attrs||(e.attrs={}),this.sync("update",this,e),this},t.prototype.fetchCallink=function(e){var t,r;return e||(e={}),e.url=this.url()+"/callink",t=e.success||function(){},e.success=(r=this,function(e){return r.set(e),t(e)}),this.sync("read",this,e),this},t.prototype.resetInvite=function(e){var t,r;return e||(e={}),e.url=this.url()+"/invitelink",e.attrs={},t=e.success||function(){},e.success=(r=this,function(e){return r.set(v.pick(e,"mobileInviteLink","inviteLink")),t(e)}),this.sync("update",this,e),this},t.prototype.setNavigation=function(e,t){var r;return null==e&&(e={}),null==t&&(t={}),t.url=this.url()+"/navigation",t.attrs={navigation:e},r=t.success,t.success=function(){return"function"==typeof r?r(arguments):void 0},this.sync("update",this,t),this},t.prototype.copy=function(e){return e.url=this.url()+"/copy",this.sync("create",this,e),this},t.prototype.join=function(e){return e||(e={}),e.url="v2/"+this.url()+"/join",e.attrs={},this.sync("create",this,e),this},t.prototype.upgradeToOwner=function(e){var t,r;return e||(e={}),e.url=this.url()+"/upgrade-owner",e.attrs={},t=e.success||function(){},e.success=(r=this,function(){return r.set("_roleId",e.roleId),t.apply(null,arguments)}),this.sync("update",this,e),this},t.prototype.joinRoom=function(){if(!this.subscribed)return d.join(this.url()),this.subscribed=!0},t.prototype.setUniqueIdPrefix=function(e){return e||(e={}),e.url=this.url()+"/unique-id-prefix",this.sync("update",this,e)},t.prototype.leaveRoom=function(){return this.subscribed=!1,d.leave(this.url(),U.consumerId)},t.prototype.toggleStar=function(e){var t;return e.url=this.url()+"/star",e.attrs={},t=this.get("isStar")?"delete":"update",this.sync(t,this,e),this},t.prototype.star=function(e){return e.url=this.url()+"/star",e.attrs={},this.sync("update",this,e)},t.prototype.unstar=function(e){return e.url=this.url()+"/star",e.attrs={},this.sync("delete",this,e)},t.prototype.clearUnreadCount=function(e){var t,r;if(null==e&&(e={}),this.get("unreadCount"))return e.url=this.url()+"/unreadCount",t=e.success||function(){},e.success=(r=this,function(){return r.set("unreadCount",0),t.apply(null,arguments)}),this.sync("update",this,e),this},t.prototype.putTaskCreatorMode=function(e,t){var r;return null==t&&(t={}),t.url=this.url()+"/window-mode-task",t.attrs={mode:e},r=t.success||function(){return this.set("windowModeOfAddTask",e),r.apply(null,arguments)},this.sync("update",this,t),this},t.prototype.putPushStatus=function(e,t){var r,n;return null==t&&(t={}),t.url=this.url()+"/pushStatus",t.attrs={pushStatus:e},r=t.success||function(){},t.success=(n=this,function(){return n.set("pushStatus",e),r.apply(null,arguments)}),this.sync("update",this,t),this},t.prototype.putDefaultRole=function(e,t){var r,n;return null==t&&(t={}),t.url=this.url()+"/_defaultRoleId",t.attrs={_roleId:e},r=t.success||function(){},t.success=(n=this,function(){return n.set("_defaultRoleId",e),r.apply(null,arguments)}),this.sync("update",this,t),this},t.prototype.putTaskDefaultVisibility=function(e,t){var r,n;return null==t&&(t={}),t.url=this.url()+"/task-default-involves-visibility",t.attrs={involvesVisibility:e},r=t.success||function(){},t.success=(n=this,function(){return n.set("taskDefaultInvolvesVisibility",{involvesVisibility:e,tasklistIds:[]}),r.apply(null,arguments)}),this.sync("update",this,t),this},t.prototype.putVisibilityTasklistIds=function(e,t,r){var n,o;return null==r&&(r={}),r.url=this.url()+"/task-default-involves-visibility/tasklist-ids",r.attrs={tasklistIds:t},n=r.success||function(){},r.success=(o=this,function(){return o.set("taskDefaultInvolvesVisibility",{involvesVisibility:e,tasklistIds:t}),n.apply(null,arguments)}),this.sync("update",this,r)},t.prototype.getNavigations=function(){var e,t,r,n,o;return r=U.applications.getNavApps(),t=function(){var t,n,o;for(o=[],t=0,n=r.length;t<n;t++)e=r[t],o.push(e.get("name"));return o}(),t=v.sortBy(t,(o=this,function(e){return o.getApplications().findIndex(function(t){return t.name===e})})),n={},v.each(t,function(t){return function(r){return e=v.find(t.getApplications(),{name:r}),n[r]=null!=e?e.order:-1}}(this)),n},t.prototype.getIntegrations=function(){var e,t;return t=c.getIntegrations(),e=v.pluck(v.where(this.get("applications"),{type:2}),"name"),v.map(t,function(t){var r,n;switch(t.enable=(r=t.type,q.call(e,r)>=0),t.type){case"evernote":n="evernote_international";break;case"yinxiang":n="evernote";break;default:n=t.type}return t.bindUrl=S.ACCOUNT_HOST+"/"+n+"/bind?next_url="+window.location.href,t})},t.prototype.getIntegrationTypes=function(){return v.pluck(c.getIntegrations(),"type")},t.prototype.createIntegrations=function(e,t){return null==t&&(t={}),t.url="integrations/"+e,t.contentType="application/json",t.data=JSON.stringify(t.data),Object.getPrototypeOf(this).sync("create",this,t),this},t.prototype.getPlugins=function(){var e,t,r,n,o;return r=U.applications.getPlugins(),t=function(){var t,n,o;for(o=[],t=0,n=r.length;t<n;t++)e=r[t],o.push(e.get("name"));return o}(),n={},v.each(t,(o=this,function(e){var t;return t=v.find(o.get("applications"),{name:e}),n[e]=null!=t})),n},t.prototype.pluginToggle=function(e,t){var r,n,o,i,a;return null==t&&(t={}),e&&(v.extend(t,{url:this.url()+"/applications/"}),n=null!=(r=U.applications.find(function(t){return t.get("name")===e}))?r.id:void 0,t.enable?(t.attrs={_applicationId:n},o="create"):(t.url+=n,t.attrs={},o="delete"),i=t.success||function(){},t.success=(a=this,function(e){return a.set(e),i(e)}),this.sync(o,this,t)),this},t.prototype.isAppEnabled=function(e){var t;return"preciseDate"===e||(t=v.pluck(this.get("applications"),"name"),v.contains(t,e)&&U.applications.checkIsAppOnline(e))},t.prototype.isAppChanged=function(e){var t,r,n,o,i,a,s;for(n=!1,o=0,i=(s=e.split(" ")).length;o<i;o++)if(a=s[o],t=v.find(this.get("applications"),{name:a}),r=v.find(this.previous("applications"),{name:a}),(null!=t?t.order:void 0)!==(null!=r?r.order:void 0)){n=!0;break}return n},t.prototype.isNavAppChanged=function(){var e,t,r,n,o,i,a;for(r=!1,n=0,o=(a=U.applications.getNavApps()).length;n<o;n++)if(i=a[n],e=v.find(this.get("applications"),{name:i.get("name")}),t=v.find(this.previous("applications"),{name:i.get("name")}),(null!=e?e.order:void 0)!==(null!=t?t.order:void 0)){r=!0;break}return r},t.prototype.getCopyOrMoveStatus=function(e){var t,r;return t={posts:"post.post",events:"event.post",works:"work.post"},r=null,this.isAppEnabled(e)?this.hasPermission(t[e])||(r="denied"):r="closed",r},t.prototype.getCanQuit=function(){return!(null===this.get("_organizationId")&&2===this.getRoleScope())&&this.isJoined()},t.prototype.setBoardViewType=function(e,t){var r;return r=_(this.id,t),D(r,e)},t.prototype.getBoardViewType=function(e){var t;return t=_(this.id,e),D(t)},t.prototype.getboardViewGtaSegment=function(){switch(this.isScrum()?"table":D(this.get("_id"))){case"time":return"gantt";case"table":return"table";case"list":return"list";default:return"taskspage"}},t.prototype.getProjectTagIdsByProjectTagModels=function(e){return v.chain(e).filter((t=this,function(e){return e.hasProjectId(t.get("_id"))})).map(function(e){return e.id}).value();var t},t.prototype.enableSmartGroupSortMethod=function(){return T(this.pick("applications"))},t.prototype.setSmartGroupSortMethod=function(e,t){var r,n;return r=this.get("smartGroupsSort")||{},(n=v.clone(r))[e]=t,this.set({smartGroupsSort:n}),B(this.id,n)},t.prototype.getCurrentSortMethod=function(e){var t,r;return this.enableSmartGroupSortMethod()&&f.isScrumApp(e)&&(t=this.get("currentSmartGroupId"))?this.getSmartGroupSortMethod(t):"default"===(r=this.get("sortMethod")||"custom")?"custom":r},t.prototype.getSmartGroupSortMethod=function(e){var t;return(null!=(t=this.get("smartGroupsSort"))?t[e]:void 0)||"created_asc"},t.prototype.handleInviteError=function(e){var t,r;return t=this.get("_organizationId"),"AddMemberError"===e.name?h.error({message:tb_i18n.get("project.member.exceed.project.limit"),description:tb_i18n.get("project.member.exceed.project.limit.hint",2e3)}):"ExceedLimit"===e.name&&t?m.error({messageTitle:tb_i18n.get("organization.member.full"),urlTitle:tb_i18n.get("organization.buy.now"),onClickUrl:function(){return window.open(y.pay.orgNew(t))}}):"ExceedUserLimit"===(null!=(r=e.responseJSON)?r.name:void 0)?window.location.href=S.ACCOUNT_HOST+"/license":"NoPermission"===e.name?h.error({message:tb_i18n.get("project.add.member.no.permission"),description:tb_i18n.get("project.add.member.no.permission.hint")}):e.message?h.error(e.message):void 0},t.prototype.updateProjectTagIds=function(e,t){var r,n,o,i,a,s,u,c,l,p,f,d;if(a=null!=(l=e.nextProjectTagIds)?l:[],s=null!=(p=e.organizationId)?p:this.get("_organizationId"),u=null!=(f=e.prevProjectTagIds)?f:[],c=null!=(d=e.projectId)?d:this.get("_id"),r=(i=function(e,t){return v.chain(e).filter(function(e){return!v.contains(t,e)}).value()})(a,u),n=i(u,a),o=v.extend({},v.isEmpty(r)?null:{$add:r},v.isEmpty(n)?null:{$del:n}),!v.isEmpty(o))return t=v.extend({},t,{attrs:o,url:"organizations/"+s+"/projects/"+c+"/projecttagIds"}),this.sync("update",this,t)},t.prototype.updateSuspend=function(e){return this.save(null,{wait:!0,attrs:{},url:this.url()+"/suspend",success:e.success,error:function(){return"function"==typeof e.error?e.error():void 0}})},t.prototype.updateUnsuspend=function(e){return this.save({_suspendedById:null,isSuspended:!1,suspendedAt:null,suspendedBy:null},{attrs:{},url:this.url()+"/unsuspend",success:function(){return"function"==typeof e.success?e.success():void 0},error:function(){return"function"==typeof e.error?e.error():void 0}})},t}()).get,e.exports=l,s=r("85182E8g")},"783lg5EQ":function(e,t,r){"use strict";var n=r("q1tIBJhx"),o=r.n(n),i=r("TSYQbtd+"),a=r.n(i),s=r("tLZJUYWX"),u=r.n(s),c=r("GESwhXbR"),l=r("+2RfZ2TT"),p=r.n(l),f=r("sa1Ed382"),d=r("RLD3BeS/");function g(e){c.Toast.success({message:o.a.createElement(d.RawHTMLWithAnchorFormatter,{html:e,onClick:h})})}function h(){f.gta.event({category:p()("body").data("category"),action:"bookmark"});var e=p()("body").hasClass("mac")?" Command + D ":" Ctrl + D ",t="organization"===p()("body").data("category")?u.a.get("portal.project.star.bookmark.hint",e):u.a.get("portal.project.star.bookmark.hint.project",e);c.Toast.closeAll(),c.Toast.success(t)}r("Y5oJiebU");var m=function(e){var t,r=e.onToggleStar,o=e.canStar,i=void 0===o||o,u=e.starred,l=void 0!==u&&u,p=a()("project-star",e.className,((t={starred:l})["can-star"]=i,t.hinted=i,t));return n.createElement("span",{className:p,"data-title":l?s.get("unstar.project"):s.get("star.project"),onClick:function(){i&&r().then(function(e){g(e?s.get("portal.project.star.success"):s.get("portal.project.un.star.success"))})}},n.createElement(c.Icon,{name:"star",size:14}))};r.d(t,"a",function(){return m}),r.d(t,"b",function(){return g})},"79Xm+sqc":function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"a",function(){return i});var n=r("50927W45");function o(e){return e===n.b.All||e===n.b.User}function i(e){return[n.a.Task,n.a.Event,n.a.Project].indexOf(e)>-1}},"7AbqSH+U":function(e,t,r){"use strict";r.r(t),r.d(t,"taskPermissionGetter",function(){return d}),r.d(t,"getStagePermission",function(){return g}),r.d(t,"getTasklistPermission",function(){return h}),r.d(t,"projectPermissionGetter",function(){return m}),r.d(t,"getPriorityByValue",function(){return y}),r.d(t,"getPaneAmountPerViewport",function(){return v}),r.d(t,"getInitLoadedPaneCount",function(){return b}),r.d(t,"hasPriorityPermission",function(){return _});var n=r("HDJEOtNh"),o=r("sa1Ed382"),i=r("V6edIaEd"),a=r("oq1bWpp9"),s=r.n(a),u=r("77NnVLwu"),c=r.n(u),l=r("JcXuB+uV"),p=r("EjIl6N9o"),f=r("FoX6irlC");function d(){var e={};return function(t){var r=t._id,n=e[r];return n||(n=s.a.find(r)||new s.a(t),e[r]=n),n.hasPermissions("put.status")}}var g=function(e){return new p(e,{bindByMatrix:!1}).hasPermissions("post","put","del")},h=function(e){return new f(e,{bindByMatrix:!1}).hasPermissions("put.mode","put.stageSort","get.dumpTasks")};function m(){var e={};return function(t){var r=t._id,n=e[r];return n||(n=c.a.find(r)||new c.a(t),e[r]=n),n.hasPermissions("task.put.pos","stage.post")}}var y=function(e){return"priority_2"===e?2:"priority_1"===e?1:0},v=function(e){return Math.ceil(e/l.g)},b=function(e){return Math.max(v(e||0),l.c)},_=function(e,t,r,a,s,u){return[function(){return n.ProjectAccess.hasAdminAuthority(e)},function(){return Object(i.canRoleEditCustomField)(t,s,n.ProjectAccess.getPermissionBinding(e).externalRoleIds)},function(){return Object(i.canActorEditCustomField)(o.user.id,r||null,a,u)}].some(function(e){return e()})}},"7Hwn9Jye":function(e,t,r){"use strict";r.d(t,"a",function(){return T}),r.d(t,"c",function(){return E}),r.d(t,"b",function(){return O});var n,o,i=r("mrSGxOB2"),a=r("6SzIBtPz"),s=r("NOGqly5s"),u=r("4c1CS0b3"),c=r("a+N5u/Cl"),l=r.n(c),p=r("s0r7VfKc"),f=r("fio7jWQ0"),d=r("oRqJmROU"),g=r("gh8QIhMV"),h=r("KIkj+38N"),m=r("lfya3Nc5"),y=r("pYq0h+Ab"),v=r("RxOUBZ4r"),b=r("bMnB8TLD"),_={boardViewAppId:null,boardMode:r("CGal/mJM").BoardViewType.Kanban,isTaskflowProject:!1,isScrumProject:!1,isUsingTasklist:!1,taskflows:[],taskflowId:null,scenarioFieldConfigs:[],laneType:y.AxisType.noop,paneType:y.AxisType.stage,scenarioFieldIds:[],hasStatusSelectorChange:!1,taskLayer:void 0},S=function(e){return"BOARD_VIEW_TYPE/"+e},T={mounted:Object(a.a)(S("MOUNTED")),unmount:Object(a.a)(S("UNMOUNT")),fetchSuccess:Object(a.a)(S((o="FETCH",o+"/SUCCESS"))),fetchFailed:Object(a.a)(S(function(e){return e+"/FAILURE"}("FETCH"))),changeBoardMode:Object(a.a)(S("CHANGE_BOARD_MODE")),selectTaskflow:Object(a.a)(S("SELECT_TASKFLOW")),selectAxis:Object(a.a)(S("SELECT_AXIS")),resetAxis:Object(a.a)(S("RESET_AXIS")),setSelectorChange:Object(a.a)(S("SET_SELECTOR_CHANGE")),setTaskLayer:Object(a.a)(S("SET_TASK_LAYER"))},E=Object(a.b)(((n={})[""+T.mounted]=function(e,t){return t.payload?i.a({},e,t.payload):e},n[""+T.fetchSuccess]=function(e,t){var r=t.payload,n=r.taskflows,o=r.scenarioFieldConfigs;return i.a({},e,{taskflows:n,scenarioFieldConfigs:o})},n[""+T.changeBoardMode]=function(e,t){return t.payload?i.a({},e,{boardMode:t.payload.boardMode}):e},n[""+T.selectAxis]=function(e,t){if(!t.payload)return e;var r=t.payload,n=r.laneType,o=r.paneType,a=r.scenarioFieldIds,s=r.taskflowId;if(n===e.laneType&&o===e.paneType&&s===e.taskflowId&&Object(h.isEqualArraySet)(a,e.scenarioFieldIds))return e;var u=Object(m.isScenarioConfigStatus)(o)&&l.a.isEmpty(a)?Object(v.g)(e.scenarioFieldConfigs,[]):a,c=l.a.isEmpty(u)?s:Object(m.getTaskflowIdFromSFCId)(e.scenarioFieldConfigs,u[0]),p=l.a.omit(t.payload,"withCache");return i.a({},e,p,{taskflowId:c,scenarioFieldIds:u})},n[""+T.setSelectorChange]=function(e,t){return t.payload?i.a({},e,{hasStatusSelectorChange:t.payload.hasStatusSelectorChange}):e},n[""+T.setTaskLayer]=function(e,t){return i.a({},e,t.payload)},n[""+T.unmount]=function(){return _},n),_),O=Object(s.a)(function(e,t){return e.ofType(""+T.mounted).filter(d.a).filter(function(e){return e.payload.taskflowEnabled}).switchMap(function(r){var n=r.payload.projectId;return u.Observable.combineLatest(p.default.getTaskflows(n).changes().debounceTime(100),p.default.getScenarioFieldConfigs(n,"task",{withTaskflowstatus:!0})).concatMap(function(e){var r=i.f(e,2),n=r[0],o=r[1],a=o.map(function(e){return e._taskflowId}),s=n.filter(function(e){return a.indexOf(e._id)>-1}),c=t.getState().ui.board.boardViewType,l=c.paneType,p=c.laneType,d=c.taskflowId,g=c.scenarioFieldIds,y=Object(m.isScenarioConfigStatus)(l)?Object(v.g)(o,g):g,b=Object(m.isScenarioConfigStatus)(l)?Object(v.h)(o,n,d,y[0]):d,_=d===b&&Object(h.isEqualArraySet)(y,g)?Object(f.noOpAction)():T.selectAxis({paneType:l,laneType:p,taskflowId:b,scenarioFieldIds:y});return u.Observable.from([T.fetchSuccess({taskflows:s,scenarioFieldConfigs:o}),_])}).takeUntil(e.ofType(""+T.unmount)).catch(function(e){return Object(g.throwError)(e),u.Observable.of(T.fetchFailed())})})},function(e,t){return e.ofType(""+T.selectAxis).filter(d.a).filter(function(e){return!!e.payload.withCache}).distinctUntilChanged(function(e,t){return l.a.isEqual(e,t)}).do(function(e){var r=t.getState().ui.board.boardViewType,n=r.boardViewAppId,o=r.isTaskflowProject,i=r.isUsingTasklist;if(n){var a={lane:e.payload.laneType,pane:e.payload.paneType,taskflowId:e.payload.taskflowId};Object(b.setAxisCache)(n,a,{isTaskflowProject:o,isUsingTasklist:i})}}).ignoreElements()},function(e,t){return e.ofType(""+T.resetAxis).filter(d.a).map(function(e){var r=t.getState().ui.board.boardViewType,n=e.payload,o=n.taskflowId,a=n.paneType,s=n.laneType,u=n.withCache,c=n.scenarioFieldIds,p=l.a.pick(r,"paneType","laneType","taskflowId"),d={laneType:s,paneType:a,taskflowId:o};return l.a.isEqual(p,d)&&Object(h.isEqualArraySet)(c,r.scenarioFieldIds)?Object(f.noOpAction)():T.selectAxis(i.a({},d,{scenarioFieldIds:c,withCache:u,hasStatusSelectorChange:!1}))})})},"7JhjQgus":function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("GESwhXbR"),i=r("tLZJUYWX"),a=r("sa1Ed382"),s=r("a+N5u/Cl"),u=r.n(s),c=r("s0r7VfKc"),l=r("cUZYBCvT"),p=r("CFOPnz30"),f=r("cY+V28dO"),d=r("6SzIBtPz"),g=r("NOGqly5s"),h=r("fio7jWQ0"),m=r("4c1CS0b3"),y=r("HDJEOtNh"),v=r("gh8QIhMV"),b=r("oRqJmROU"),_=r("783lg5EQ"),S=r("gGLCgK+J"),T=r("IssmDVnT");function E(e,t){return c.default.lift({cacheValidate:T.CacheStrategy.Cache,tableName:"Project",request:e,query:{where:{_id:{$in:t}}},assocFields:{suspendedBy:["_id","name","avatarUrl"],organization:["_id","description","isExpired","isPublic","logo","name","plan"]}})}var O,w=r("dMp4HTVj"),C=r("wVXDg9Ql"),I=r("+8qpssbX"),k=r("2KPNj85v"),j=r("dHPtFte7"),A=r("svve/QA+");r.d(t,"a",function(){return L}),r.d(t,"c",function(){return B}),r.d(t,"b",function(){return U});var P={_organizationId:null,organization:null,portalMode:"grid",tagProjectsMode:"grid",projectOrder:"name",tagProjectsOrder:"name",collectBehaviorLogs:!1,projectTree:Object(j.b)(k.g),projectsCount:{all:0,starred:0,joined:0,public:0,ungrouped:0,suspended:0,archived:0},projects:null,projectsHasMore:!1,childProjects:null,childProjectsHasMore:!1,tagStars:null,focusedStarId:null,starredTagProjects:null,starredTagProjectsHasMore:!1,cursor:null,tagMembers:[],projectTagCount:[],isSearching:!1,searchedMembers:[],inviteModalOpened:!1},R=function(e){return e.getState().ui.organizationPortal},N=function(e){return"ORGANIZATION_PORTAL/"+e},x=function(e){return N(e+"/FAILURE")},D=function(e){return N(e+"/SUCCESS")};function M(e,t,r){var n=e.projectTree;if(r){var o=r.path,i=r.id,a=Object(j.a)(o,i);return n.setIn(a,{isStar:t})}return n}var F=function(e,t,r){return e._id===t?n.a({},e,{isStar:r}):e},L={setDefaultProjectFilter:Object(d.a)(N("SET_DEFAULT_PROJECT_FILTER")),getProjectTags:Object(d.a)(N("GET_PROJECT_TAGS")),getProjectTagsSuccess:Object(d.a)(D("GET_PROJECT_TAGS")),getProjectTagsFailure:Object(d.a)(x("GET_PROJECT_TAGS")),getProjectsCount:Object(d.a)(N("GET_PROJECTS_COUNT")),getProjectsCountSuccess:Object(d.a)(D("GET_PROJECTS_COUNT")),getProjectsCountFailure:Object(d.a)(x("GET_PROJECTS_COUNT")),getWholeRoute:Object(d.a)(N("GET_WHOLE_ROUTE")),getWholeRouteSuccess:Object(d.a)(D("GET_WHOLE_ROUTE")),getWholeRouteFailure:Object(d.a)(x("GET_WHOLE_ROUTE")),getProjectTagsCount:Object(d.a)(N("GET_PROJECT_TAGS_COUNT")),getProjectTagsCountSuccess:Object(d.a)(D("GET_PROJECT_TAGS_COUNT")),toggleNodeFolded:Object(d.a)(N("TOGGLE_NODE_FOLDED")),unfoldNodeSuccess:Object(d.a)(D("UNFOLD_NODE")),unfoldNodeFailure:Object(d.a)(x("UNFOLD_NODE")),storeCurrentViewId:Object(d.a)(N("STORE_CURRENT_VIEW_ID")),storeCurrentViewIdSuccess:Object(d.a)(D("STORE_CURRENT_VIEW_ID")),createProjectTag:Object(d.a)(N("CREATE_PROJECT_TAG")),createProjectTagSuccess:Object(d.a)(D("CREATE_PROJECT_TAG")),createProjectTagFailure:Object(d.a)(x("CREATE_PROJECT_TAG")),updateProjectTag:Object(d.a)(N("UPDATE_PROJECT_TAG")),updateProjectTagSuccess:Object(d.a)(D("UPDATE_PROJECT_TAG")),updateProjectTagFailure:Object(d.a)(x("UPDATE_PROJECT_TAG")),delProjectTag:Object(d.a)(N("DEL_PROJECT_TAG")),delProjectTagSuccess:Object(d.a)(D("DEL_PROJECT_TAG")),delProjectTagFailure:Object(d.a)(x("DEL_PROJECT_TAG")),moveProjectTag:Object(d.a)(N("MOVE_PROJECT_TAG")),moveProjectTagSuccess:Object(d.a)(D("MOVE_PROJECT_TAG")),moveProjectTagFailure:Object(d.a)(x("MOVE_PROJECT_TAG")),getProjects:Object(d.a)(N("GET_PROJECTS")),getProjectsSuccess:Object(d.a)(D("GET_PROJECTS")),getProjectsFailure:Object(d.a)(x("GET_PROJECTS")),getMoreProjects:Object(d.a)(N("GET_MORE_PROJECTS")),importProjects:Object(d.a)(N("IMPORT_PROJECTS")),changeProjectFilter:Object(d.a)(N("CHANGE_PROJECT_FILTER")),changeProjectFilterSuccess:Object(d.a)(D("CHANGE_PROJECT_FILTER")),getChildProjects:Object(d.a)(N("GET_CHILD_PROJECTS")),getChildProjectsSuccess:Object(d.a)(D("GET_CHILD_PROJECTS")),getChildProjectsFailure:Object(d.a)(x("GET_CHILD_PROJECTS")),getMoreChildProjects:Object(d.a)(N("GET_MORE_CHILD_PROJECTS")),switchStarredTag:Object(d.a)(N("SWITCH_STARRED_TAG")),switchStarredTagSuccess:Object(d.a)(D("SWITCH_STARRED_TAG")),switchStarredTagFailure:Object(d.a)(x("SWITCH_STARRED_TAG")),getMoreProjectsOfStarredTag:Object(d.a)(N("GET_MORE_PROJECTS_OF_STARRED_TAG")),switchToFirstStarredTag:Object(d.a)(N("SWITCH_TO_FIRST_STARRED_TAG")),getTagStars:Object(d.a)(N("GET_TAG_STARS")),getTagStarsSuccess:Object(d.a)(D("GET_TAG_STARS")),getTagStarsFailure:Object(d.a)(x("GET_TAG_STARS")),addTagStar:Object(d.a)(N("ADD_TAG_STAR")),addTagStarSuccess:Object(d.a)(D("ADD_TAG_STAR")),addTagStarFailure:Object(d.a)(x("ADD_TAG_STAR")),delTagStar:Object(d.a)(N("DEL_TAG_STAR")),delTagStarSuccess:Object(d.a)(D("DEL_TAG_STAR")),delTagStarFailure:Object(d.a)(x("DEL_TAG_STAR")),setProjectStar:Object(d.a)(N("SET_PROJECT_STAR")),setProjectStarSuccess:Object(d.a)(D("SET_PROJECT_STAR")),setProjectStarFailure:Object(d.a)(x("SET_PROJECT_STAR")),getProjectTagMembers:Object(d.a)(N("GET_PROJECT_TAG_MEMBERS")),getProjectTagMembersSuccess:Object(d.a)(D("GET_PROJECT_TAG_MEMBERS")),getProjectTagMembersFailure:Object(d.a)(x("GET_PROJECT_TAG_MEMBERS")),getMoreProjectTagMembers:Object(d.a)(N("GET_MORE_PROJECT_TAG_MEMBERS")),addProjectTagMember:Object(d.a)(N("ADD_PROJECT_TAG_MEMBER")),addProjectTagMemberSuccess:Object(d.a)(D("ADD_PROJECT_TAG_MEMBER")),addProjectTagMemberFailure:Object(d.a)(x("ADD_PROJECT_TAG_MEMBER")),delProjectTagMember:Object(d.a)(N("DEL_PROJECT_TAG_MEMBER")),delProjectTagMemberSuccess:Object(d.a)(D("DEL_PROJECT_TAG_MEMBER")),delProjectTagMemberFailure:Object(d.a)(x("DEL_PROJECT_TAG_MEMBER")),searchProjectTagMember:Object(d.a)(N("SEARCH_PROJECT_TAG_MEMBER")),searchProjectTagMemberSuccess:Object(d.a)(D("SEARCH_PROJECT_TAG_MEMBER")),searchProjectTagMemberFailure:Object(d.a)(x("SEARCH_PROJECT_TAG_MEMBER")),setIsSearchingInnerMember:Object(d.a)(N("IS_SEARCHING_INNER_MEMBERS")),putTagMemberPermissions:Object(d.a)(N("PUT_TAG_MEMBER_PERMISSIONS")),putTagMemberPermissionsSuccess:Object(d.a)(D("PUT_TAG_MEMBER_PERMISSIONS")),putTagMemberPermissionsFailure:Object(d.a)(x("PUT_TAG_MEMBER_PERMISSIONS")),updateByProjectTagsChanged:Object(d.a)(N("UPDATE_BY_PROJECT_TAGS_CHANGED")),assignDataToOrganizationPortal:Object(d.a)(N("ASSIGN_DATA_TO_ORGANIZATION_PORTAL")),assignOrganizationData:Object(d.a)(N("ASSIGN_ORGANIZATION_DATA")),unmountOrganizationPortal:Object(d.a)(N("UNMOUNT_ORGANIZATION_PORTAL")),forceRefreshPortalForOnboarding:Object(d.a)(N("FORCE_REFRESH_PORTAL_FOR_ONBOARDING")),setChildProjectsVisible:Object(d.a)(N("SET_CHILD_PROJECTS_VISIBLE")),setChildProjectsVisibleSuccess:Object(d.a)(D("SET_CHILD_PROJECTS_VISIBLE")),handleQuitProject:Object(d.a)(N("HANDLE_QUIT_PROJECT")),setInviteModalVisibility:Object(d.a)(N("INVITE_MODAL_VISIBILITY"))},B=Object(d.b)(((O={})[""+L.getProjectTagsSuccess]=function(e,t){var r=t.payload;return n.a({},e,{projectTree:Object(j.c)(e.projectTree,r.map(function(t){return Object(A.f)(e._organizationId,t)}))})},O[""+L.getProjectsCountSuccess]=function(e,t){return n.a({},e,{projectsCount:t.payload})},O[""+L.getWholeRouteSuccess]=function(e,t){var r=w.k(t.payload);if(!r)return e;var o=r.mapIn([r.root.id],function(t){var r=Object(A.g)(e._organizationId,t.id);return t.set("hideChild",r)}).root,i=e.projectTree.setSubNodesIn([e.projectTree.root.id],function(e){return e.map(function(e){return e.id===o.id?o:e})});return n.a({},e,{projectTree:i})},O[""+L.toggleNodeFolded]=function(e,t){var r=t.payload,o=r.path,i=r.id,a=r.folded,s=Object(j.a)(o,i),u=e.projectTree.setIn(s,{folded:a});return n.a({},e,{projectTree:u})},O[""+L.unfoldNodeSuccess]=function(e,t){var r=t.payload,o=r.path,i=r.id,a=r.newTags,s=Object(j.a)(o,i),u=a.map(function(t){return Object(A.f)(e._organizationId,t)});return n.a({},e,{projectTree:Object(j.c)(e.projectTree,u,s)})},O[""+L.createProjectTagSuccess]=function(e,t){var r=t.payload,o=r.ancestorIds,i=Object(j.a)(o);return n.a({},e,{projectTree:e.projectTree.appendIn(i,[Object(j.d)(r)])})},O[""+L.updateProjectTagSuccess]=function(e,t){var r=t.payload,o=r.path,i=n.g(r,["path"]),a=i._id,s=n.g(i,["_id"]),u=Object(j.a)(o,a);return"involves"===s.visible?n.a({},e,{projectTree:e.projectTree.mapIn(u,function(e){return e.id===a?e.set(s):e.set("visible",s.visible)})}):n.a({},e,{projectTree:e.projectTree.setIn(u,s)})},O[""+L.delProjectTagSuccess]=function(e,t){var r=t.payload,o=r.path,i=r.id,a=Object(j.a)(o,i),s=e.projectTree.removeIn(a),u=s.find(o),c=u?u.hasChild?u.getSubNodes()[0]:u:e.projectTree.root,p=c.id===k.g?null:c.id,f=null===p?l.a.Starred:e.projectFilter;return n.a({},e,{projectTree:s,cursor:p,projectFilter:f})},O[""+L.moveProjectTagSuccess]=function(e,t){var r=t.payload,o=r.id,i=r._nextId,a=r.res,s=e.projectTree.getNode(o);if(!s)return e;var c=Object(j.a)(s.get("ancestorIds"),o),l=Object(j.a)(a.ancestorIds),p=u.a.isNull(i)?void 0:i,f=e.projectTree.moveIn(c,l,p);return f?n.a({},e,{projectTree:f.setIn(Object(j.a)(l,o),a)}):e},O[""+L.getProjects]=function(e,t){return t.payload&&t.payload.isSlient?e:n.a({},e,{projects:null})},O[""+L.getProjectsSuccess]=function(e,t){var r=t.payload,o=r.projects,i=r.hasMore;return n.a({},e,{projects:o,projectsHasMore:i})},O[""+L.getProjectsFailure]=function(e){var t=e.projects;return n.a({},e,{projects:t||[],projectsHasMore:!1})},O[""+L.changeProjectFilterSuccess]=function(e,t){var r=t.payload,o=r.projectFilter,i=r.cursor;return e.projectFilter===o&&i===e.cursor?e:n.a({},e,t.payload,{projects:null,childProjects:null})},O[""+L.getChildProjects]=function(e){return n.a({},e,{childProjects:null})},O[""+L.getChildProjectsSuccess]=function(e,t){var r=t.payload,o=r.projects,i=r.hasMore;return n.a({},e,{childProjects:o,childProjectsHasMore:i})},O[""+L.getChildProjectsFailure]=function(e){var t=e.childProjects;return n.a({},e,{childProjects:t||[],childProjectsHasMore:!1})},O[""+L.switchStarredTag]=function(e,t){var r=t.payload.starId;return n.a({},e,{starredTagProjects:null,focusedStarId:r})},O[""+L.switchStarredTagSuccess]=function(e,t){var r=t.payload,o=r.projects,i=r.hasMore;return n.a({},e,{starredTagProjects:o.filter(function(e){return!e.isSuspended&&!e.isArchived}),starredTagProjectsHasMore:i})},O[""+L.switchStarredTagFailure]=function(e){var t=e.starredTagProjects;return n.a({},e,{starredTagProjects:t||[],starredTagProjectsHasMore:!1})},O[""+L.getProjectTagMembersSuccess]=function(e,t){return n.a({},e,{tagMembers:t.payload})},O[""+L.putTagMemberPermissionsSuccess]=function(e,t){var r=t.payload,o=e.isSearching,i=e.searchedMembers;return o&&i?n.a({},e,{tagMembers:e.tagMembers.map(function(e){return e._id===r._id?r:e}),searchedMembers:i.map(function(e){return e._id===r._id?n.a({},e,{permissions:r.permissions}):e})}):n.a({},e,{tagMembers:e.tagMembers.map(function(e){return e._id===r._id?r:e})})},O[""+L.addProjectTagMemberSuccess]=function(e,t){return n.a({},e,{tagMembers:e.tagMembers.concat(t.payload)})},O[""+L.delProjectTagMemberSuccess]=function(e,t){var r=t.payload.projectTagMemberId;return n.a({},e,{tagMembers:e.tagMembers.filter(function(e){return e._id!==r})})},O[""+L.searchProjectTagMember]=function(e,t){var r=t.payload.query,o="string"==typeof r&&r.length>0;return n.a({},e,{isSearching:o,searchedMembers:null})},O[""+L.searchProjectTagMemberSuccess]=function(e,t){return n.a({},e,{searchedMembers:t.payload})},O[""+L.setIsSearchingInnerMember]=function(e,t){return n.a({},e,{isSearching:t.payload})},O[""+L.getTagStarsSuccess]=function(e,t){return n.a({},e,{tagStars:t.payload})},O[""+L.getTagStarsFailure]=function(e){return n.a({},e,{tagStars:[]})},O[""+L.addTagStarSuccess]=function(e,t){var r=t.payload,o=r.nodeInfo,i=r.star;return n.a({},e,{projectTree:M(e,!0,o),tagStars:n.h(e.tagStars,[i])})},O[""+L.delTagStarSuccess]=function(e,t){var r=t.payload,o=r.nodeInfo,i=r.starId;return n.a({},e,{projectTree:M(e,!1,o),tagStars:(e.tagStars||[]).filter(function(e){return e._id!==i})})},O[""+L.setProjectStarSuccess]=function(e,t){var r=t.payload,o=r._subjectId,i=r.isStar,a=e.projects,s=e.childProjects,u=e.starredTagProjects,c=e.projectFilter!==l.a.Starred||i?a:a.filter(function(e){return e._id!==o});return n.a({},e,{projects:(c||[]).map(function(e){return F(e,o,i)}),childProjects:(s||[]).map(function(e){return F(e,o,i)}),starredTagProjects:(u||[]).map(function(e){return F(e,o,i)})})},O[""+L.assignDataToOrganizationPortal]=function(e,t){return n.a({},e,t.payload)},O[""+L.assignOrganizationData]=function(e,t){var r=t.payload._organizationId;return r&&e._organizationId&&e._organizationId!==r?n.a({},P,t.payload):n.a({},e,t.payload)},O[""+L.setChildProjectsVisibleSuccess]=function(e,t){var r=t.payload,o=r.projectTagId,i=r.hideChild,a=e.projectTree.getNodePath(o);return a?n.a({},e,{projectTree:e.projectTree.setIn(a,"hideChild",i)}):e},O[""+L.getProjectTagsCountSuccess]=function(e,t){var r=t.payload;return n.a({},e,{projectTagCount:u.a.uniq(r.concat(e.projectTagCount),function(e){return e._id})})},O[""+L.unmountOrganizationPortal]=function(){return P},O[""+L.handleQuitProject]=function(e,t){var r=t.payload;if(!e.projects)return e;var o=e.projects.filter(function(e){return e._id!==r});return n.a({},e,{projects:o})},O[""+L.setInviteModalVisibility]=function(e,t){return n.a({},e,{inviteModalOpened:t.payload})},O),P),U=Object(g.a)(function(e,t){return e.ofType(""+L.updateByProjectTagsChanged).concatMap(function(){var e=R(t),r=e._organizationId,n=e.cursor,o=[L.getProjectTags(),L.getProjects({isSlient:!0})];return r&&n&&o.push(L.getChildProjects()),m.Observable.from(o)})},function(e){return e.ofType(""+L.forceRefreshPortalForOnboarding).concatMap(function(){return m.Observable.from([L.getProjectsCount(),L.switchToFirstStarredTag()])})},function(e,t){return e.ofType(""+L.getProjectTags).switchMap(function(){var e=R(t)._organizationId;return e?c.default.fetch.getProjectTags({_organizationId:e,withProjectCount:!1}).concatMap(function(e){var t=e.result;return m.Observable.from([L.getProjectTagsSuccess(t),L.getProjectTagsCount(t.map(function(e){return e._id}))])}).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.getProjectTagsFailure(e))}):m.Observable.of()})},function(e,t){return e.ofType(""+L.getProjectTagsCount).filter(b.a).concatMap(function(e){var r=e.payload,n=t.getState().ui.organizationPortal._organizationId;return n&&r.length?function(e,t){return c.default.fetch.get("organizations/"+e+"/projecttags/count",{_projecttagIds:t})}(n,r).map(L.getProjectTagsCountSuccess).catch(function(e){return Object(v.throwError)(e),m.Observable.of(Object(h.noOpAction)())}):m.Observable.of(Object(h.noOpAction)())})},function(e,t){return e.ofType(""+L.getProjectsCount).switchMap(function(){var e=R(t)._organizationId;return e?c.default.fetch.getProjectsCount(e).map(L.getProjectsCountSuccess).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.getProjectsCountFailure(e))}):m.Observable.of()})},function(e,t){var r=e.ofType(""+L.getProjects),o=e.ofType(""+L.getMoreProjects);return r.switchMap(function(){var r=R(t),i=r._organizationId,a=r.projectFilter,s=r.cursor,p=r.projectOrder,f=c.default.fetch.getProjectsPagination({_organizationId:i||void 0,selectBy:"all"!==a&&a||void 0,_projecttagId:s||void 0,pageSize:S.b,orderBy:a!==l.a.History&&p||void 0}),d=u.a.contains([l.a.Archived,l.a.Suspended],a)?function(e){return y.PermissionController.updateProject(e),e}:void 0;return c.default.fetch.expandPage(f,{loadMore$:o,mapFn:d}).switchMap(function(t){var r=t.result,o=t.hasMore,i=r.map(function(e){return e._id});return E(m.Observable.of(r),i).changes().takeUntil(e.ofType(""+L.unmountOrganizationPortal)).map(function(e){var t,r,a=[];try{for(var s=n.i(i),c=s.next();!c.done;c=s.next()){var l=c.value,p=u.a.findWhere(e,{_id:l});p&&a.push(p)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return L.getProjectsSuccess({projects:a,hasMore:o})})}).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.getProjectsFailure())})})},function(e,t){var r=e.ofType(""+L.getChildProjects),o=e.ofType(""+L.getMoreChildProjects);return r.switchMap(function(){var r=R(t),i=r._organizationId,a=r.cursor,s=r.projectOrder,p=c.default.fetch.getProjectsPagination({_organizationId:i||void 0,selectBy:l.a.ProjectTag,_projecttagId:a||void 0,pageSize:S.b,orderBy:s,forChild:!0});return c.default.fetch.expandPage(p,{loadMore$:o}).switchMap(function(t){var r=t.result,o=t.hasMore,i=r.map(function(e){return e._id});return E(m.Observable.of(r),i).changes().takeUntil(e.ofType(""+L.unmountOrganizationPortal)).map(function(e){var t,r,a=[];try{for(var s=n.i(i),c=s.next();!c.done;c=s.next()){var l=c.value,p=u.a.findWhere(e,{_id:l});p&&a.push(p)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return L.getChildProjectsSuccess({projects:a,hasMore:o})})}).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.getChildProjectsFailure())})})},function(e,t){return e.ofType(""+L.importProjects).filter(b.a).switchMap(function(r){var n=R(t),o=n._organizationId,i=n.cursor,a=r.payload.projectIds;return c.default.fetch.put("organizations/"+o+"/projecttags/"+i+"/projectIds",{projectIds:a}).takeUntil(e.ofType(""+L.changeProjectFilter)).catch(function(e){return Object(v.throwError)(e),m.Observable.of(Object(h.noOpAction)())}).concatMap(function(){return m.Observable.from([L.getProjects({isSlient:!0}),L.getProjectTagsCount([i])])})})},function(e,t){var r=e.ofType(""+L.switchStarredTag).filter(b.a).filter(function(e){var r=e.payload.starId,n=t.getState().ui.organizationPortal.tagStars;return!w.i(n,r)}),o=e.ofType(""+L.getMoreProjectsOfStarredTag);return r.switchMap(function(r){var i=r.payload,a=R(t),s=a.projectOrder,f=a.tagStars,d=i.starId,g=(f||[]).find(function(e){return e._id===d});if(!g)return m.Observable.of();var h=Object(p.a)(g)?{selectBy:g.subjectValue,_projecttagId:void 0}:{selectBy:l.a.ProjectTag,_projecttagId:g.projecttag._id},y=c.default.fetch.getProjectsPagination(n.a({},h,{_organizationId:g._organizationId,pageSize:S.b,orderBy:s}));return c.default.fetch.expandPage(y,{loadMore$:o}).switchMap(function(t){var r=t.result,o=t.hasMore,i=r.map(function(e){return e._id});return E(m.Observable.of(r),i).changes().takeUntil(e.ofType(""+L.unmountOrganizationPortal)).map(function(e){var t,r,a=[];try{for(var s=n.i(i),c=s.next();!c.done;c=s.next()){var l=c.value,p=u.a.findWhere(e,{_id:l});p&&a.push(p)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return L.switchStarredTagSuccess({projects:a,hasMore:o})})}).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.switchStarredTagFailure())})})},function(e,t){return e.ofType(""+L.switchToFirstStarredTag).map(function(){var e=R(t),r=e.projectOrder,n=e.tagStars;if(n&&n.length>0){var o=n[0]._id;return L.switchStarredTag({starId:o,projectOrder:r})}return Object(h.noOpAction)()})},function(e,t){return e.ofType(""+L.getTagStars).filter(b.a).switchMap(function(r){var n=r.payload,o=R(t)._organizationId,i=e.ofType(""+L.changeProjectFilter);return(n?c.default.fetch.getStars({_organizationId:o||void 0,subjectType:"projecttag"}).takeUntil(i).map(function(e){return e.result}).catch(function(e){throw Object(I.a)(e)&&403===e.error.status&&C.SDKInterceptor.ignore(e),e}):m.Observable.of([])).concatMap(function(e){return m.Observable.from([L.getTagStarsSuccess(e),L.switchToFirstStarredTag()])}).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.getTagStarsFailure())})})},function(e,t){return e.ofType(""+L.addTagStar).switchMap(function(e){var r=R(t),s=r.projectFilter,u=r.tagStars,p=e.payload,f=p.payload,d=n.g(p,["payload"]);return c.default.fetch.addStar(f).concatMap(function(e){var t=L.addTagStarSuccess(n.a({},d,{star:e}));return s===l.a.Starred&&0===(u||[]).length?m.Observable.from([t,L.switchToFirstStarredTag()]):m.Observable.from([t])}).do(function(){o.Toast.success(i.get("portal.starred.success",i.get("portal.starred"))),a.gta.event({action:"seted star group",method:"trace"})}).catch(function(e){return Object(v.throwError)(e),a.gta.event({action:"seted star group failed",method:"trace"}),m.Observable.of(L.addTagStarFailure(e))})})},function(e,t){return e.ofType(""+L.delTagStar).switchMap(function(e){var r=R(t),n=r.projectFilter,s=r.projectTree,u=r.tagStars,p=e.payload,f=p.starId,d=p.nodeInfo,g={starId:f,nodeInfo:d||(w.c(s,u||[],f)||void 0)};return c.default.fetch.delStar(f).concatMap(function(){var e=L.delTagStarSuccess(g);return n===l.a.Starred?m.Observable.from([e,L.switchToFirstStarredTag()]):m.Observable.from([e])}).do(function(){o.Toast.success(i.get("unstar.project.tag.action.success")),a.gta.event({action:"cancel star group",method:"click"})}).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.delTagStarFailure(e))})})},function(e,t){return e.ofType(""+L.setProjectStar).switchMap(function(e){var r=R(t).projectFilter,n=e.payload,o=n.isStar,a=n._subjectId;return(o?c.default.fetch.addStar(n):c.default.fetch.unstarProject(a)).concatMap(function(){var e=L.setProjectStarSuccess(n);return r===l.a.Starred&&o?m.Observable.from([e,L.getProjects({isSlient:!0})]):m.Observable.from([e])}).do(function(){var e=o?i.get("star.project.action.success"):i.get("unstar.project.action.success");Object(_.b)(e)}).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.setProjectStarFailure(e))})})},function(e,t){var r=e.ofType(""+L.getProjectTagMembers).filter(b.a).filter(function(){return!!R(t)._organizationId}),n=e.ofType(""+L.getMoreProjectTagMembers);return r.switchMap(function(r){var o=r.payload,i=R(t),a=i.cursor,s=i._organizationId,u=c.default.fetch.getProjectTagMembersPagination({_organizationId:s,pageSize:3e3,projectTagId:o.projectTagId||a});return c.default.fetch.expandPage(u,{loadMore$:n}).takeUntil(e.ofType(""+L.unmountOrganizationPortal)).map(function(e){return L.getProjectTagMembersSuccess(e.result)}).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.getProjectTagMembersFailure(e))})})},function(e){return e.ofType(""+L.addProjectTagMember).switchMap(function(e){return c.default.fetch.addProjectTagMember(e.payload).map(function(e){return L.addProjectTagMemberSuccess(e.result)}).do(function(){e.payload.showToast&&o.Toast.success(i.get("add.success"))}).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.getProjectsCountFailure(e))})})},function(e){return e.ofType(""+L.delProjectTagMember).switchMap(function(e){var t=e.payload,r=t.member,a=t.isMyself,s=n.g(t,["member","isMyself"]);return c.default.fetch.delProjectTagMember(s).map(function(){return L.delProjectTagMemberSuccess(s)}).do(function(){var e=r.role,t=r.user,n=r.team,s=r.organizationGroup,u=r.organizationTeam,c=e&&e.name||t&&t.name||n&&n.name||s&&s.name||u&&u.name||"",l=a?i.get("portal.tag.member.exit.success"):i.get("portal.tag.member.remove.success",c);o.Toast.success(l)}).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.delProjectTagMemberFailure(e))})})},function(e){return e.ofType(""+L.delProjectTagMemberSuccess).map(function(e){var t=e.payload,r=t.noRemoveMembers,n=t.projectTagId;return r?L.getProjectTagMembers({projectTagId:n}):Object(h.noOpAction)()})},function(e,t){return e.ofType(""+L.searchProjectTagMember).filter(function(){return!!R(t)._organizationId}).switchMap(function(e){var r=R(t),o=r.cursor,i=r._organizationId;return c.default.fetch.searchProjectTagInnerMembers({_organizationId:i,q:e.payload.query,projectTagId:o}).map(function(e){var t=e.inner.map(function(e){return n.a({},e,{memberSource:f.a.Inner})}),r=e.inherit.map(function(e){return n.a({},e,{memberSource:f.a.Inherit})}),o=e.fromGroup.map(function(e){return n.a({},e,{memberSource:f.a.FromGroup})}),i=e.fromTeam.map(function(e){return n.a({},e,{memberSource:f.a.FromTeam})});return t.concat(r,o,i)}).map(function(e){return L.searchProjectTagMemberSuccess(e)})})},function(e){return e.ofType(""+L.putTagMemberPermissions).switchMap(function(e){return c.default.fetch.putProjectTagMemberPermissions(e.payload).map(function(e){return L.putTagMemberPermissionsSuccess(e)}).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.putTagMemberPermissionsFailure(e))})})},function(e){return e.ofType(""+L.toggleNodeFolded).switchMap(function(e){var t=e.payload,r=t.path,n=t.id,o=t.folded,i=t._organizationId;return o?m.Observable.of(Object(h.noOpAction)()):c.default.fetch.getProjectTags({_organizationId:i,_parentId:n,withProjectCount:!1}).concatMap(function(e){var t=e.result;return m.Observable.from([L.unfoldNodeSuccess({path:r,id:n,newTags:t}),L.getProjectTagsCount(t.map(function(e){return e._id}))])}).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.unfoldNodeFailure(e))})})},function(e,t){return e.ofType(""+L.changeProjectFilter).filter(b.a).filter(function(e){var r=e.payload,n=r.projectFilter,o=r.cursor,i=r.ignoreSame;if(!n)return!1;if(!i)return!0;var a=t.getState().ui.organizationPortal;return!(n===a.projectFilter&&(!o||o&&o===a.cursor))}).switchMap(function(e){var r=e.payload,o=t.getState().ui.organizationPortal,i=r.cursor,s=r.projectFilter,u=i||s,c=k.d[s]||{},p=t.getState().ui.organizationPortal._organizationId,f=[L.changeProjectFilterSuccess(r),L.storeCurrentViewId({viewId:u,organizationId:p})],d=i&&o.projectTree.getNode(i)||null,g=d&&d.get("strictVisible");if(s===l.a.Starred||!o.tagStars){var h=t.getState().ui.organizationPortal._organizationId,v=!!h&&y.OrganizationAccess.hasGuestAuthority(h);f.push(L.getTagStars(v))}return g?(f.push(L.getProjects({isSlient:!1}),L.getChildProjects(),L.getProjectTagMembers({})),a.gta.event({action:"switch project group",type:"group",method:"click"}),m.Observable.from(f)):(d||f.push(L.getProjects({isSlient:!1})),a.gta.event(n.a({type:"tag",method:"click"},c)),m.Observable.from(f))})},function(e){return e.ofType(""+L.storeCurrentViewId).filter(b.a).do(function(e){var t=e.payload,r=t.organizationId,n=t.viewId;Object(A.j)(r,n)}).mapTo(L.storeCurrentViewIdSuccess())},function(e){return e.ofType(""+L.setDefaultProjectFilter).filter(b.a).map(function(e){var t=e.payload,r=Object(A.h)(t),n=y.OrganizationAccess.hasGuestAuthority(t),o=Object(A.c)(n,r);return w.l(o)?L.getWholeRoute(o):L.changeProjectFilter({projectFilter:o})})},function(e,t){return e.ofType(""+L.getWholeRoute).filter(b.a).switchMap(function(r){var o=r.payload,i=e.ofType(""+L.getProjectTagsSuccess).take(1),a=c.default.fetch.getWholeRoute(o);return m.Observable.combineLatest(i,a).concatMap(function(e){var t=n.f(e,2),r=(t[0],t[1]);return r.length?m.Observable.from([L.getWholeRouteSuccess(r),L.getProjectTagsCount(r.map(function(e){return e._id})),L.changeProjectFilter({cursor:o,projectFilter:l.a.ProjectTag})]):m.Observable.of(L.changeProjectFilter({projectFilter:k.b[0]}))}).catch(function(e){Object(v.throwError)(e);var r=e&&e.error&&e.error.status;return[403,404].includes(r)&&C.SDKInterceptor.ignore(e),Object(A.i)(t.getState().ui.organizationPortal._organizationId),m.Observable.of(L.changeProjectFilter({projectFilter:k.b[0]}))})})},function(e){return e.ofType(""+L.createProjectTag).switchMap(function(e){var t=e.payload,r=t.successGtaOptions,s=n.g(t,["successGtaOptions"]);return c.default.fetch.createProjectTag(s).map(L.createProjectTagSuccess).do(function(){o.Toast.success(i.get("project.hierarchy.create.tag.success")),r&&a.gta.event(r)}).catch(function(e){return Object(v.throwError)(e),o.Toast.error(i.get("project.hierarchy.create.tag.fail")),m.Observable.of(L.createProjectTagFailure(e))})})},function(e){return e.ofType(""+L.createProjectTagSuccess).switchMap(function(e){var t=e.payload,r=t._id,n=t.visible,o=[L.changeProjectFilter({projectFilter:l.a.ProjectTag,cursor:r,ignoreSame:!0}),L.getProjectTagsCount([r])];return"involves"===n&&o.push(L.setInviteModalVisibility(!0)),m.Observable.from(o)})},function(e){return e.ofType(""+L.updateProjectTag).switchMap(function(e){var t=e.payload;return c.default.fetch.updateProjectTag(t).map(function(e){return L.updateProjectTagSuccess(n.a({},e,{path:t.path}))}).catch(function(e){return Object(v.throwError)(e),m.Observable.of(L.updateProjectTagFailure(e))})})},function(e){return e.ofType(""+L.delProjectTag).switchMap(function(e){e.payload._id;var t=e.payload;return c.default.fetch.delProjectTag(t).map(function(){return L.delProjectTagSuccess(n.a({},t,{id:t._id}))}).do(function(){return o.Toast.success(i.get("delete.success"))}).catch(function(e){return Object(v.throwError)(e),o.Toast.error(i.get("project.hierarchy.delete.fail")),m.Observable.of(L.delProjectTagFailure(e))})})},function(e){return e.ofType(""+L.moveProjectTag).switchMap(function(e){var t=e.payload;return c.default.fetch.moveProjectTag(n.a({},t,{_parentId:t._parentId===k.g?null:t._parentId})).map(function(e){return L.moveProjectTagSuccess(n.a({},t,{res:e}))}).catch(function(e){return Object(v.throwError)(e),o.Toast.error(i.get("project.hierarchy.move.tag.fail")),m.Observable.of(L.moveProjectTagFailure(e))})})},function(e,t){return e.ofType(""+L.setChildProjectsVisible).filter(b.a).do(function(e){var r=e.payload,n=r.projectTagId,o=r.hideChild,i=t.getState().ui.organizationPortal._organizationId;Object(A.k)(i,n,o)}).map(function(e){var t=e.payload;return L.setChildProjectsVisibleSuccess(t)})},function(e){var t=e.ofType(""+L.changeProjectFilter).filter(b.a).filter(function(e){return e.payload.projectFilter===l.a.Joined}),r=e.ofType(""+L.changeProjectFilter).filter(b.a).filter(function(e){return e.payload.projectFilter!==l.a.Joined}),n=e.ofType(""+L.unmountOrganizationPortal);return t.switchMap(function(){return m.Observable.create(function(e){var t=c.default.socketProxy.on(":quit:projects",function(t){var r=t.data;e.next(r)});return function(){t()}}).takeUntil(r).takeUntil(n).map(function(e){return L.handleQuitProject(e)})})})},"7OaXMmhv":function(e,t,r){"use strict";r.d(t,"e",function(){return s}),r.d(t,"i",function(){return u}),r.d(t,"m",function(){return c}),r.d(t,"j",function(){return l}),r.d(t,"g",function(){return p}),r.d(t,"d",function(){return f}),r.d(t,"f",function(){return d}),r.d(t,"l",function(){return g}),r.d(t,"k",function(){return h}),r.d(t,"a",function(){return m}),r.d(t,"b",function(){return y}),r.d(t,"c",function(){return v}),r.d(t,"h",function(){return b});var n=r("mrSGxOB2"),o=r("4c1CS0b3"),i=r("a+N5u/Cl"),a=r("tHFGQRix"),s=function(e){return e.id},u=function(e){return e.checked?e:n.a({},e,{checked:!0})},c=function(e){return e.checked?n.a({},e,{checked:!1}):e},l=function(e){return n.a({},e,{checked:!e.checked})},p=function(e){return Boolean(e.checked)},f=function(e,t){return!e.disableToggle===t?e:n.a({},e,{disableToggle:!t})},d=function(e){return Object.keys(e)};function g(e,t,r){var n;return e.hasOwnProperty(t)?{dict:e}:{dict:((n={})[t]=u(r),n),selected:t}}function h(e,t,r){var o,a=p(r)?"unselect":"select",s=e.hasOwnProperty(t);return"unselect"===a&&s?{dict:Object(i.omit)(e,t),unselected:t}:"select"!==a||s?{dict:e}:{dict:n.a({},e,((o={})[t]=r,o)),selected:t}}var m=function(e,t,r){return void 0===e&&(e=function(){return!0}),void 0===r&&(r=s),function(o){return function(s){var u=t===a.a.Single?g:h;return s.scan(function(t,a){var s=r(a);if(!e(a,t,s))return t;var c=u(t.result,s,a),l=c.dict,p=c.selected,f=c.unselected;if(l===t.result){var d=Object(i.clone)(t.result);return n.a({},t,{result:d})}var g=n.a({},t,{result:l});return p&&!o[p]&&t.added.indexOf(p)<0&&(g.added=n.h(t.added,[p])),f&&o[f]&&t.removed.indexOf(f)<0&&(g.removed=n.h(t.removed,[f])),g},{result:Object(i.clone)(o),added:[],removed:[]})}}};function y(e,t){var r;void 0===t&&(t=i.identity);var n=function(t){return t.type===e};return{create:function(t){return{type:e,payload:t}},from:function(e){return e.filter(n).map(function(e){return e.payload})},reducer:((r={})[e]=function(e,r){return t(e,r.payload)},r)}}function v(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t,r){var i=t.share();return o.Observable.merge.apply(o.Observable,n.h(e.map(function(e){return e(i,r)})))}}var b=function(e,t){return void 0===t&&(t={}),Object(i.mapObject)(e,function(e,r){var o=e,i=t[r];return i?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.apply(void 0,n.h(e)),i.apply(void 0,n.h(e))}:o})}},"7cOIcGUH":function(e,t,r){e.exports=r.p+"images/tableView-poster.c893f447.png"},"7szm2rLY":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"man",use:"man-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="man"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#A1A4D9" rx="2" /><g fill="#FFFFFF" transform="translate(5 4.4)"><path d="M10 10.5v-.833C10 8.194 8.88 7 7.5 7h-5C1.12 7 0 8.194 0 9.667v.833a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5z" /><ellipse cx="5" cy="2.667" rx="2.5" ry="2.667" /></g></g></symbol>'});a.a.add(s);t.default=s},"8+055njQ":function(e,t,r){"use strict";r("E7B48L3J"),r("Ix19R6XQ"),r("8LRGAfJe"),r("z4K9ImfL"),r("ZkU9LyAY")},"8/Rj7SG1":function(e,t,r){e.exports=r.p+"images/shimo-1.a61d0526.png"},"85182E8g":function(e,t,r){var n,o,i,a,s,u={}.hasOwnProperty;a=r("a+N5u/Cl"),n=r("VuB9cZyl"),s=r("a2Z1fDJ7").sanitize,i=r("wu4EEviu"),o=r("0FRv5rrl"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="organizations",t.prototype.model=o,t.prototype.parse=function(e,t){var r,n,o,i;if(!e.result)return e;for(n=0,o=(r=a.flatten([e.result])).length;n<o;n++)"string"==typeof(i=r[n]).logo&&(i.logo=s(i.logo));return e.result},t.prototype.comparator=function(e){return e.get("name")},t.prototype.sync=function(e,r,n){switch(null==n&&(n={}),e){case"read":n.url="v2/organizations"}return t.__super__.sync.apply(this,arguments)},t.prototype.listen=function(){var e;if(!this.listened)return t.__super__.listen.apply(this,arguments),i.on(":quit:organizations",(e=this,function(t){return e.remove(t)}))},t.prototype.getOrganizationsByRight=function(e){return this.filter(function(t){return t.get("role").level===e})},t.prototype.getOrganizationsByIds=function(e){var t,r;return t=[],a.each(e,(r=this,function(e){var n;if(n=r.find(function(t){return t.id===e}))return t.push(n.toJSON())})),t},t}()},"8Es+kdS2":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"money",use:"money-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="money"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#A6A6A6" rx="2" /><path fill="#FFFFFF" d="M10 16c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6z" /><path fill="#A6A6A6" d="M9.999 9.5c-.813 0-1.5-.534-1.5-1.167 0-.632.687-1.166 1.5-1.166.607 0 1.168.3 1.396.746a.499.499 0 1 0 .89-.454c-.33-.649-1.004-1.103-1.785-1.243V6a.5.5 0 0 0-1 0v.21c-1.14.202-2 1.077-2 2.123 0 1.195 1.121 2.167 2.501 2.167.813 0 1.5.534 1.5 1.167 0 .632-.687 1.166-1.5 1.166-.608 0-1.168-.3-1.396-.746a.5.5 0 0 0-.89.454c.33.649 1.004 1.103 1.785 1.242V14a.5.5 0 0 0 1 0v-.21c1.14-.202 2-1.077 2-2.123 0-1.194-1.121-2.167-2.501-2.167" /></g></symbol>'});a.a.add(s);t.default=s},"8LRGAfJe":function(e,t,r){"use strict";var n=r("IssmDVnT");n.SDKFetch.prototype.updateTaskflowStatus=function(e,t){return this.put("taskflowstatus/"+e,t)},n.SDKFetch.prototype.updateTaskflowStatusKind=function(e,t){return this.put("taskflowstatus/"+e+"/kind",t)},n.SDKFetch.prototype.updateTaskflowStatusPos=function(e,t){return this.put("taskflowstatus/"+e+"/move",t)},n.SDKFetch.prototype.updateTaskflowStatusRejectedId=function(e,t){var r={_taskflowId:e,data:t};return this.put("taskflowstatus/rejectstatusIds",r)},n.SDK.prototype.updateTaskflowStatus=function(e,t){return this.lift({method:"update",tableName:"TaskflowStatus",request:this.fetch.updateTaskflowStatus(e,t),clause:{_id:e}})},n.SDK.prototype.updateTaskflowStatusKind=function(e,t){return this.lift({method:"update",tableName:"TaskflowStatus",request:this.fetch.updateTaskflowStatusKind(e,t),clause:{_id:e}})},n.SDK.prototype.updateTaskflowStatusPos=function(e,t){return this.lift({method:"update",tableName:"TaskflowStatus",request:this.fetch.updateTaskflowStatusPos(e,t),clause:{_id:e}})},n.SDK.prototype.updateTaskflowStatusRejectedId=function(e,t){return this.lift({method:"update",tableName:"TaskflowStatus",request:this.fetch.updateTaskflowStatusRejectedId(e,t),clause:{}})}},"8N+zwa3A":function(e,t,r){var n,o,i,a,s,u,c={}.hasOwnProperty;s=r("a+N5u/Cl"),u=r("yiO17FlF"),n=r("E86Oiqt3"),o=r("qHH6+g6Q"),i=r("3eMzznN/"),(a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o),t.prototype.name="work",t.prototype.urlRoot="works",t.prototype.defaults={objectType:"work",activitiesCount:0,description:"",involveMembers:[],fileName:"",fileSize:0,fileType:"",fileCategory:"",thumbnail:"",thumbnailUrl:""},t.prototype.listen=function(){if(!this.listenedLock&&this.id)return this.listenedLock=!0,this.on("change:visible change:involveMembers",function(e){var t;if(!e.checkIsVisible())return null!=(t=e.collection)&&t.remove(e),delete u.getData().models[e.id],delete u.getData().matrix[e.id]}),t.__super__.listen.apply(this,arguments)},t.prototype.parse=function(e){return(e=s.extend(this.toJSON(),e)).fileSize||(e.fileSize=e.size),delete e.size,delete e.code,delete e.message,e},t.prototype.isIndie=function(){return this.get("_organizationId")&&!this.get("_projectId")},t.prototype.createVersion=function(e,t){return null==e&&(e={}),null==t&&(t={}),delete(t=s.extend(t,{url:this.url()+"/versions",attrs:e,wait:!0})).attrs.thumbnail,this.sync("create",this,t)},t.prototype.forkToCollection=function(e,t){return this.forkOrMoveToCollection(e,"fork",t)},t.prototype.moveToCollection=function(e,t){return this.forkOrMoveToCollection(e,"move",t)},t.prototype.forkOrMoveToCollection=function(e,t,r){return null==r&&(r={}),r.url=this.url()+"/"+t,r.wait=!0,r.attrs={_parentId:e},this.sync("update",this,r)},t.prototype.getParent=function(e){var t;return(t=this.get("_parentId"))?n.fetch(t,{success:e,error:function(){return e(null)}}):e(null)},t.prototype.getFormatData=function(){var e;return e=this.toJSON(),e=t.formatWork(e)},t.prototype.markMainVersion=function(e){return this.save(null,{url:"works/"+this.id+"/main",attrs:{_versionId:e}})},t.prototype.setupUploadHandlers=function(e){return this.abort=e.abort,this.resume=e.resume,this.retry=e.retry,this.pause=e.pause},t.prototype.pausable=function(e){return this.set("pausable",e)},t.prototype.retryable=function(e){return this.set("retryable",e)},t.prototype.progress=function(e){return this.set("progress",e)},t.prototype.hasPermission=function(){return!!this.isIndie()||t.__super__.hasPermission.apply(this,arguments)},t.prototype.hasPermissions=function(){var e;return this.isIndie()?(e=t.__super__.hasPermissions.apply(this,arguments),s.mapObject(e,function(){return!0})):t.__super__.hasPermissions.apply(this,arguments)},t}()).formatWork=function(e){var t;return null==e&&(e={}),(e=s.extend({},e,{fileSizeFix:i.formatFileSize(e.fileSize||0)})).thumbnailText=e.fileType,/link/.test(e.fileCategory)&&(e.thumbnailText="link"),(null!=(t=e.thumbnailText)?t.length:void 0)>4&&(e.thumbnailText="<h3>"+e.thumbnailText.substr(0,1).toUpperCase()+"</h3>"),e},e.exports=a},"8T6a+whN":function(e,t,r){e.exports=r.p+"images/taskUniqueId-0.15706df0.png"},"8hzdLKbx":function(e,t,r){e.exports=r.p+"images/weibo-1.d5bf9c1c.png"},"8y0JNx5d":function(e,t,r){"use strict";r.r(t),r.d(t,"getFileHost",function(){return o});var n=r("2qRnoGmE"),o=function(){return n.FEATURES.useStrikerHost?n.FILE_HOST:n.TCS_FILE_HOST}},"8zoxEjTT":function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r.n(o),a=r("tLZJUYWX"),s=r("a+N5u/Cl"),u=r.n(s),c=r("GESwhXbR"),l=r("p7RaAO2S"),p=r("TSYQbtd+"),f=r.n(p),d=r("90U+kJWN"),g=r("YqUJfXDr"),h=r("DOZCBSCZ"),m=r("AsfohlkG"),y=r("+uXvm93n"),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.render=function(){var e=f()("thin-scroll",y.list);return o.createElement("div",{className:e},this.props.children)},t}(o.PureComponent),b=Object(c.Selectable)(v),_={type:String(void 0),name:"",i18Key:""},S=function(e){function t(t){var r=e.call(this,t)||this;return r.refInput=function(e){r.input=e},r.fetchOptions=function(){r.setState({options:[],isLoading:!0,hasMore:!1}),r.loadOptions({isFirstPage:!0})},r.loadOptions=function(e){void 0===e&&(e={}),r.subscription$&&r.subscription$.unsubscribe();var t=r.state.input.trim();r.subscription$=r.props.getOptions(t,e).take(1).subscribe(function(e){r.setState({hasMore:e.hasMore,options:e.result,isLoading:!1})})},r.getSelectableList=function(e){r.selectableList=e},r.getOptions=function(){if(!r.props.searchable||r.state.input.trim().length>0)return r.state.options;var e=r.props.selected.filter(function(e){return Object(l.k)(r.props.values,e.value)});return s.chain(r.props.defaultOptions).concat(e,r.state.options).uniq(function(e){return Object(l.d)(e.value)}).value()},r.getPlaceholder=function(){switch(r.props.type){case m.c.member:return a.get("search.filter.searcher.multi.selector.input.placeholder.member");case m.c.project:return a.get("search.filter.searcher.multi.selector.input.placeholder.project");default:return a.get("search.filter.searcher.multi.selector.input.placeholder.default")}},r.onSubmit=function(){r.props.onSubmit()},r.onSelect=function(e){return function(t){var n=e[t];r.props.onChange(n)}},r.onChange=function(e){r.props.gtaSearch&&r.props.gtaSearch(),r.setState({input:e.target.value})},r.onKeyDown=function(e){r.selectableList&&r.selectableList.keyboardHandler(e)},r.state={input:"",options:r.props.options||[],hasMore:!1,isLoading:!1},r}return n.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.searchable&&(this.fetchOptions(),this.timer=window.setTimeout(function(){e.input.focus()},0))},t.prototype.componentDidUpdate=function(e,t){this.props.searchable&&this.state.input.trim()!==t.input.trim()&&this.fetchOptions()},t.prototype.componentWillUnmount=function(){this.subscription$&&this.subscription$.unsubscribe(),window.clearTimeout(this.timer)},t.prototype.filterSelectableItem=function(e){return Boolean(e.props.option)},t.prototype.renderOptionGroups=function(){var e,t,r=this;switch(this.props.type){case m.c.project:t=m.e;break;case m.c.member:t=m.b;break;case m.c.scenariofieldconfig:t=m.f;break;case m.c.tagId:t=m.g;break;default:t=m.d}var i=this.props.categories?n.h([_],this.props.categories):[_],u=1===i.length?((e={})[_.type]=this.getOptions(),e):s.groupBy(this.getOptions(),"type");return{content:i.map(function(e){var n=e===_,i=u[e.type];return i&&0!==i.length?o.createElement(m.a,{key:e.type,before:n?null:o.createElement("div",{className:y.category},a.get(e.i18Key)),children:r.renderOptions(t,i),after:o.createElement(c.Separator,null),className:y["item-group"]}):null}),options:s.chain(i).map(function(e){return u[e.type]}).flatten().value()}},t.prototype.renderOptions=function(e,t){var r=this;return t.map(function(t){return t?o.createElement(e,{key:"select-"+t.value,option:t,selected:r.props.selected,onClick:r.props.onChange}):(console.warn("Multi Selector: option error"),null)})},t.prototype.renderLoadMore=function(){return this.props.searchable?o.createElement(g.LoadMore,{key:"more",hasMore:this.state.hasMore,onEnter:this.loadOptions,endWith:null}):null},t.prototype.renderLoading=function(){return this.state.isLoading&&o.createElement(h.a,null)},t.prototype.renderSelectList=function(){var e=this.renderOptionGroups().content;return o.createElement("div",{className:f()("thin-scroll",y.list)},e)},t.prototype.renderList=function(){if(!this.props.searchable)return this.renderSelectList();var e=this.renderOptionGroups(),t=e.content,r=e.options,n=t.concat(this.renderLoadMore());return!this.state.isLoading&&0!==this.getOptions().length&&o.createElement(b,{ref:this.getSelectableList,focusable:!1,index:-1,filterFn:this.filterSelectableItem,onEnter:this.onSelect(r)},Object(d.flattenPlainGroup)(n))},t.prototype.renderInput=function(){var e=f()("form-control",y.input);return this.props.searchable&&o.createElement("input",{ref:this.refInput,className:e,value:this.state.input,onChange:this.onChange,placeholder:this.getPlaceholder(),onKeyDown:this.onKeyDown})},t.prototype.renderSubmitButton=function(){return o.createElement("div",{className:y.submit},o.createElement(c.Button,{onClick:this.onSubmit},a.get("search.filter.searcher.filter.selector.submit")))},t.prototype.renderPlaceholder=function(){return!this.state.isLoading&&!this.state.hasMore&&0===this.getOptions().length&&o.createElement("div",{className:y.placeholder},o.createElement("div",{className:y["placeholder-img"]}),o.createElement("p",{className:y["placeholder-tip"]},a.get("search.filter.selector.not.found")))},t.prototype.render=function(){var e,t=f()(y.content,((e={})[y["content-searchable"]]=this.props.searchable,e));return o.createElement("div",{className:t},this.renderInput(),this.renderLoading(),this.renderList(),this.renderPlaceholder(),this.renderSubmitButton())},t.props={defaultOptions:[]},t}(o.PureComponent),T=r("+uXvm93n"),E=function(e){function t(t){var r=e.call(this,t)||this;return r.refInput=function(e){r.input=e},r.filterOptions=function(e,t){return e.filter(function(e){return e.name.toLowerCase().indexOf(t)>=0})},r.getOptions=function(){if(""===r.state.input)return r.props.options;var e=r.state.input.trim().toLowerCase();return r.filterOptions(r.props.options,e)},r.getPlaceholder=function(){return a.get("search.filter.searcher.multi.selector.input.placeholder.default")},r.onSubmit=function(){r.props.onSubmit()},r.onSelect=function(e){var t=r.getOptions()[e];t&&r.props.onChange(t)},r.onChange=function(e){r.props.gtaSearch&&r.props.gtaSearch(),r.setState({input:e.target.value})},r.state={input:""},r}return n.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.timer=window.setTimeout(function(){e.input.focus()},0)},t.prototype.componentWillUnmount=function(){window.clearTimeout(this.timer)},t.prototype.renderOptions=function(){var e,t=this;switch(this.props.type){case m.c.scenariofieldconfig:e=m.f;break;case m.c.tagId:e=m.g;break;default:e=m.d}return this.getOptions().map(function(r){return r?o.createElement(e,{key:"select-"+r.value,option:r,selected:t.props.selected,onClick:t.props.onChange}):(console.warn("Multi Selector: option error"),null)})},t.prototype.renderSelectList=function(){return 0!==this.getOptions().length&&o.createElement("div",{className:f()("thin-scroll",T.list)},this.renderOptions())},t.prototype.renderList=function(){return this.renderSelectList()},t.prototype.renderInput=function(){var e=f()("form-control",T.input);return o.createElement("input",{ref:this.refInput,className:e,value:this.state.input,onChange:this.onChange,placeholder:this.getPlaceholder()})},t.prototype.renderSubmitButton=function(){return o.createElement("div",{className:T.submit},o.createElement(c.Button,{onClick:this.onSubmit},a.get("search.filter.searcher.filter.selector.submit")))},t.prototype.renderPlaceholder=function(){return 0===this.getOptions().length&&o.createElement("div",{className:T.placeholder},o.createElement("div",{className:T["placeholder-img"]}),o.createElement("p",{className:T["placeholder-tip"]},a.get("search.filter.selector.not.found")))},t.prototype.render=function(){var e=f()(T.content,T["content-searchable"]);return o.createElement("div",{className:e},this.renderInput(),this.renderList(),this.renderPlaceholder(),this.renderSubmitButton())},t}(o.PureComponent),O=r("PHWukW8L"),w=r("c0yVuYMM"),C=r("sa1Ed382"),I=r("HYobN8SQ");function k(){return C.PREFERENCE.get("lastWorkspace")||"default"}var j=new(function(){function e(){this.LocalStorage=I.namespace("temp").namespace("searcher-cache")}return e.prototype.get=function(e){var t=k();return this.LocalStorage.namespace(t)(e)||[]},e.prototype.set=function(e,t){var r=k();return this.LocalStorage.namespace(r)(e,t)},e.prototype.clear=function(){this.LocalStorage.clear()},e}()),A=r("sa1Ed382"),P=function(e,t,r){if(e.length>0)return e.map(function(e){return e.name}).join(a.get("comma"));switch(t){case m.c.project:return a.get("search.filter.searcher.filter.selector.project.unset");case m.c.member:return a.get("search.filter.searcher.filter.selector.member.unset");case m.c.scenariofieldconfig:return a.get("search.filter.searcher.filter.selector.scenariofieldconfig.unset");case m.c.tagId:return a.get("search.filter.searcher.filter.selector.tagId.unset");case"sprintId":return a.get("search.filter.searcher.filter.selector.sprintId.unset")}switch(r){case"flowstatusId":return a.get("search.filter.searcher.filter.selector.flowstatus.unset");case"caseType":return a.get("search.filter.searcher.filter.selector.caseType.unset");case"casePriority":return a.get("search.filter.searcher.filter.selector.testcase.priority.unset");case"stageId":return a.get("search.filter.searcher.filter.selector.stage.unset");case"taskflowstatusId":return a.get("search.filter.searcher.filter.selector.taskflowstatus.unset");case"storygroupId":return a.get("search.filter.searcher.filter.selector.storygroup.unset");case"buggroupId":return a.get("search.filter.searcher.filter.selector.buggroup.unset")}return a.get("search.filter.searcher.filter.selector.unset")},R=function(e){if(e.selected)return e.selected;var t=e.field,r=e.values,n=e.options,o=e.skipLocalStorage,i=j.get(t)||[];if(!o&&i.length>0)return i.filter(function(t){return Object(l.k)(e.values,t.value)});var s=[];return r.forEach(function(t){switch(e.type){case m.c.member:var r=A.user.toJSON(),o=r.name,i=r._id,u=r.avatarUrl;if(t===i)s.push({name:o,avatarUrl:u,value:t,role:0});else{var c=n.find(function(e){return Object(l.j)(t,e.value)});c&&s.push(c)}break;case m.c.project:null===t&&s.push({logo:"",value:t,name:a.get("searcher.options.task.projectId.null")});break;default:var p=n.find(function(e){return Object(l.j)(t,e.value)});p&&s.push(p)}}),s},N=function(e){function t(t){var r=e.call(this,t)||this;return r.getLabel=function(){return P(r.state.selected,r.props.type,r.props.searcherId)},r.handleDropdownHide=function(){if(r.props.onChange){var e=r.state.selected.map(function(e){return e.value});u.a.isEqual(r.props.values,e)||r.props.onChange({values:e})}},r.onChange=function(e){var t,n=r.props,o=n.field,i=n.skipLocalStorage,a=e.value;t=r.state.selected.find(function(e){return Object(l.j)(e.value,a)})?r.state.selected.filter(function(e){return!Object(l.j)(e.value,a)}):u.a.chain(r.state.selected).concat([e]).uniq("value").value(),i||j.set(o,t),r.setState({selected:t})},r.onVisibleChange=function(e){r.setState({opened:e})},r.onSubmit=function(){r.props.onSubmit&&r.props.onSubmit(r.state.selected),r.setState({opened:!1})},r.state={selected:R(t),opened:!1},r}return n.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({selected:R(e)})},t.prototype.renderStaticContent=function(){var e=this.props.type;return i.a.createElement(E,{type:e,values:this.props.values,selected:this.state.selected,onChange:this.onChange,onSubmit:this.onSubmit,gtaSearch:this.props.handleGTASearch,options:this.props.options})},t.prototype.renderSearchableContent=function(){var e=this.props,t=e.type,r=e.getOptions;return i.a.createElement(S,{type:t,values:this.props.values,selected:this.state.selected,onChange:this.onChange,onSubmit:this.onSubmit,gtaSearch:this.props.handleGTASearch,defaultOptions:this.props.options,searchable:this.props.searchable,options:this.props.options,categories:this.props.categories,getOptions:r})},t.prototype.renderContent=function(){return this.props.searchable?this.renderSearchableContent():this.renderStaticContent()},t.prototype.renderTrigger=function(){if(this.props.triggerEl)return this.props.triggerEl;var e={disabled:this.props.disabled,isEmpty:this.props.isEmpty,label:this.getLabel()};return this.props.inline?i.a.createElement(w.a,n.a({},e)):i.a.createElement(O.a,n.a({},e,{onClear:this.props.onClearValue}))},t.prototype.render=function(){return i.a.createElement(c.Dropdown,{action:"click",opened:this.state.opened,persistence:!0,placement:this.props.placement,nested:!0,onHide:this.handleDropdownHide,content:this.renderContent(),onVisibleChange:this.onVisibleChange},this.renderTrigger())},t}(i.a.PureComponent);r.d(t,"d",function(){return P}),r.d(t,"b",function(){return N}),r.d(t,"a",function(){return j}),r.d(t,"c",function(){return m.c})},"9+0BJoM0":function(e,t,r){var n,o,i,a;n=r("a+N5u/Cl"),a=r("sa1Ed382"),i=n.once(function(){var e;return e=function(e){return["https://dn-site.oss.aliyuncs.com/",e,"?response-content-type=video/mp4"].join("")},{tasks:{type:"tasks",name:tb_i18n.get("powerups.tasks"),className:"icon icon-board",desShort:tb_i18n.get("powerups.tasks.short.des"),des:tb_i18n.get("powerups.tasks.des"),poster:r("vf9BdEDZ"),video:e("videos/support/support_board.mp4"),imgs:[r("0Qy4aPTG"),r("kd9O6c5q"),r("CIm7x6F+")]},posts:{type:"posts",name:tb_i18n.get("powerups.posts"),className:"wall",desShort:tb_i18n.get("powerups.posts.short.des"),des:tb_i18n.get("powerups.posts.des"),poster:r("olrDaloP"),video:e("videos/support/support_posts.mp4"),imgs:[r("TRGq6Jgz"),r("D5vd1aJW"),r("UTp6Kxqj")]},events:{type:"events",name:tb_i18n.get("powerups.events"),className:"calendar",desShort:tb_i18n.get("powerups.events.short.des"),des:tb_i18n.get("powerups.events.des"),poster:r("0RMAOLYD"),video:e("videos/support/support_events.mp4"),imgs:[r("4v4JYttb"),r("qH10BoOc"),r("Eh9DeT6B")]},works:{type:"works",name:tb_i18n.get("powerups.works"),className:"file4",desShort:tb_i18n.get("powerups.works.short.des"),des:tb_i18n.get("powerups.works.des"),poster:r("95XjSIUV"),video:e("videos/support/support_files.mp4"),imgs:[r("bhrhDTdJ"),r("+oE52230"),r("mjaT7wPX")]},groupchat:{type:"groupchat",name:tb_i18n.get("powerups.groupchat"),className:"chat-group",desShort:tb_i18n.get("powerups.groupchat.short.des"),des:tb_i18n.get("powerups.groupchat.des"),poster:r("R8KUFp9i"),imgs:[r("B5Ec8wMm"),r("3L++eR1g"),r("NPtG5Xaa")]},bookkeeping:{type:"bookkeeping",name:tb_i18n.get("powerups.bookkeeping"),className:"bookkeeping-logo",desShort:tb_i18n.get("powerups.bookkeeping.short.des"),des:tb_i18n.get("powerups.bookkeeping.des"),poster:r("nOpTYCro"),video:"https://dn-st.teambition.net/teambition/videos/bookkeeping.6c5d2049.mp4?response-content-type=video/mp4",imgs:[r("wfzXWiua"),r("vjUSHlq3"),r("qAdKz6JV")]},analytics:{type:"analytics",name:tb_i18n.get("powerups.analytics"),className:"statistics",desShort:tb_i18n.get("powerups.analytics.short.des"),des:tb_i18n.get("powerups.analytics.des"),poster:r("VNCONshu"),video:"",imgs:[]},startDate:{type:"startDate",name:tb_i18n.get("powerups.startDate"),desShort:tb_i18n.get("powerups.startDate.short.des"),des:tb_i18n.get("powerups.startDate.des"),poster:r("Z/GsRxmw"),video:e("videos/power-ups-assets/startdate.mp4"),imgs:[r("n84PV4hp"),r("TzW6Qno6"),r("CrJvKdsN")]},markdown:{type:"markdown",name:tb_i18n.get("powerups.markdown"),desShort:tb_i18n.get("powerups.markdown.short.des"),des:tb_i18n.get("powerups.markdown.des"),poster:r("r7PQv9Rc"),video:"https://dn-st.teambition.net/teambition/videos/markdown.5e2dbc09.mp4?response-content-type=video/mp4",imgs:[r("VYV1JQTD"),r("1tzZcICR"),r("73IHJmUt")]},preciseDate:{type:"preciseDate",name:tb_i18n.get("powerups.preciseDate"),des:tb_i18n.get("powerups.preciseDate.des"),poster:r("QGSdtXpg"),imgs:[r("V5LbGzmV"),r("WqxAlg/b"),r("Z5YuF96j")]},shimo:{type:"shimo",name:tb_i18n.get("powerups.shimo"),desShort:tb_i18n.get("powerups.shimo.short.des"),des:tb_i18n.get("powerups.shimo.des"),poster:r("DTrSvq2m"),imgs:[r("kdujOLHg"),r("8/Rj7SG1"),r("C7Zof+C/")]},zoomus:{type:"zoomus",name:"Zoom",desShort:tb_i18n.get("powerups.zoom.short.des"),des:tb_i18n.get("powerups.zoom.des"),poster:r("Ut4AWhQd"),imgs:[r("DPW1xmNq"),r("6hY5DLrv"),r("Zz1nN0mI")]},taskUniqueId:{type:"taskUniqueId",name:tb_i18n.get("powerups.taskUniqueId"),desShort:tb_i18n.get("powerups.taskUniqueId.short.des"),des:tb_i18n.get("powerups.taskUniqueId.des"),poster:r("ho6nsCmg"),isPluginConfigurable:!0,isPluginConfigurableInTemplateEditor:!1,imgs:[r("8T6a+whN"),r("mbcAhQmk"),r("Uml19jGR")]},timeView:{type:"timeView",name:tb_i18n.get("powerups.timeView"),desShort:tb_i18n.get("powerups.timeView.short.des"),des:tb_i18n.get("powerups.timeView.des"),poster:r("XzLKzFPG"),video:e("videos/timeView_b3286a.mp4"),isNew:!0,onlineTime:"2016-11-18",imgs:[r("NDHLXIeW"),r("yhsIzoL6"),r("CYq7loc6")]},tableView:{type:"tableView",name:tb_i18n.get("powerups.tableView"),desShort:tb_i18n.get("powerups.tableView.short.des"),des:tb_i18n.get("powerups.tableView.des"),poster:r("7cOIcGUH"),isNew:!0,imgs:[r("XNNEmibk"),r("LRkdc6RD")]},evernote:{type:"evernote",name:"Evernote",desShort:tb_i18n.get("powerups.evernote.short.des"),des:tb_i18n.get("powerups.evernote.des"),poster:r("ekFMsdcC"),video:e("videos/power-ups-assets/evernote.mp4"),imgs:[r("YCobQTHr"),r("CHPkJDDg")],isIntegration:!0},yinxiang:{type:"yinxiang",name:"",desShort:tb_i18n.get("powerups.yinxiang.short.des"),des:tb_i18n.get("powerups.yinxiang.des"),poster:r("uysLJ+PI"),video:e("videos/power-ups-assets/yinxiang.mp4"),imgs:[r("0hhicPLn"),r("RrGWskkW")],isIntegration:!0},weibo:{type:"weibo",name:tb_i18n.get("powerups.weibo"),desShort:tb_i18n.get("powerups.weibo.short.des"),des:tb_i18n.get("powerups.weibo.des"),poster:r("jMCr0Gn6"),video:e("videos/power-ups-assets/weibo.mp4"),imgs:[r("Qmu8NI+v"),r("8hzdLKbx")],isIntegration:!0},github:{type:"github",name:"GitHub",desShort:tb_i18n.get("powerups.github.short.des"),des:tb_i18n.get("powerups.github.des"),poster:r("wIHaTtmc"),video:e("videos/power-ups-assets/github.mp4"),imgs:[r("puS85ofv"),r("fDZdky4/")],isIntegration:!0},processon:{type:"processon",name:"ProcessOn",desShort:tb_i18n.get("powerups.processon.short.des"),des:tb_i18n.get("powerups.processon.des"),poster:r("ipOL5xdz"),video:e("videos/power-ups-assets/processon.mp4"),imgs:[r("yz2uMg7c"),r("cW1Ogi02")],isIntegration:!0},jinshuju:{type:"jinshuju",name:tb_i18n.get("powerups.jinshuju"),desShort:tb_i18n.get("powerups.jinshuju.short.des"),des:tb_i18n.get("powerups.jinshuju.des"),poster:r("dmM8qtRc"),video:e("videos/power-ups-assets/jinshuju.mp4"),imgs:[r("JYfZVjQh"),r("TomBcwt9")],isIntegration:!0},fangcloud:{des:tb_i18n.get("powerups.fangcloud.des"),desShort:tb_i18n.get("powerups.fangcloud.short.des"),isIntegration:!0,name:tb_i18n.get("powerups.fangcloud"),noInfo:!0,poster:null,type:"fangcloud"},gitintegration:{type:"gitintegration",name:tb_i18n.get("powerups.git.integration"),desShort:tb_i18n.get("powerups.git.integration.short.des"),des:tb_i18n.get("powerups.git.integration.short.des"),noInfo:!0,poster:null},projectinfoapp:{type:"projectinfoapp",name:tb_i18n.get("powerups.project.info"),className:"project-overview",desShort:tb_i18n.get("powerups.project.info.short.des"),des:tb_i18n.get("powerups.project.info.short.des"),poster:r("4bF+ISW9"),imgs:[]},testplan:{type:"testplan",name:tb_i18n.get("powerups.testplan"),className:"testplan",desShort:tb_i18n.get("powerups.testplan.short.des"),des:tb_i18n.get("powerups.testplan.des"),poster:r("sAKKuOjO"),video:"https://dn-site.teambition.net/videos%2Fweb_onboarding_test_plan.mp4",imgs:[r("fSzoRVzu"),r("gw+SRCSr")]}}}),t.getItems=o=function(){var e,t,r;return e=i(),r=a.applications.getOnlineAppNames(),t=n.difference(n.keys(e),r),n.chain(e).omit(t).omit(function(e){return e.disabled}).each(function(e,t){var r;return e.isPremium=a.applications.checkIsPremiumApp(t),e.appType=null!=(r=a.applications.findByName(t))?r.get("type"):void 0}).value()},t.getIntegrations=function(){return n.filter(i(),function(e){return e.isIntegration})},t.checkIsAppAvailable=function(e){return o()[e]}},"90U+kJWN":function(e,t,r){"use strict";r.r(t);var n=r("jPXpMdIv"),o=r("mrSGxOB2"),i=r("q1tIBJhx"),a=r.n(i),s=r("GESwhXbR"),u=function(e,t,r){return a.a.cloneElement(e,o.a({},e.props,{children:t,key:r}))},c=function(e,t){return a.a.cloneElement(e,o.a({},e.props,{key:t.toString()+".item"}))},l=function(e){return Array.isArray(e)?e:[e]};function p(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=!1),Object(s.flattenGroup)(e,u,c,t,r)}var f=function(e,t){void 0===t&&(t=[]);var r={},n={};for(var o in e)t.indexOf(o)>-1?r[o]=e[o]:n[o]=e[o];return[n,r]},d=r("ms7sa36K"),g=r("u7uKHmtP"),h=function(e){return g(e).length},m=function(e){return"+"===e.charAt(0)?e:"+86-"+e},y=r("a+N5u/Cl"),v=r.n(y),b=function(e,t){void 0===t&&(t=1);var r=e;!v.a.isNaN(e)&&v.a.isNumber(e)||(r=0);var n=Math.pow(10,t);return Math.round(r*n/60)/n},_=function(e,t){var r=e.toString().split(".")[1],n=r?r.length:0;switch(t){case"increase":e++;break;case"decrease":e--}var o=Math.pow(10,n);return Math.round(e*o)/o},S=function(e){var t,r=0;return"string"==typeof e&&(t=e.replace(/[\u4e00-\u9fa5]/g,function(){return r+=2,""}),r+=t.length),r},T=function(e,t,r){if(void 0===r&&(r=""),"string"!=typeof e)return"";if(S(e)<=t)return e;for(var n=0,o=0,i="";o<t;){var a=e.charAt(n);if(/[\u4e00-\u9fa5]/.test(a)?o+=2:o++,o>t)break;i+=a,n++}return i+r},E=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.trim().split(/\s/g).some(function(t){return Boolean(t)&&e.indexOf(t)>=0})},O=function(e){return void 0===e&&(e=""),"string"!=typeof e?"":e.replace(/(\r\n|\r)/gm,"\n")},w=/(.*)<a>(.*)<\/a>(.*)/;function C(e){var t=e.match(w);return t&&{head:t[1],anchorContent:t[2],tail:t[3]}}var I=function(e,t){if(void 0===t&&(t=0),"string"==typeof e&&(e=parseInt(e)),0===e||!e)return"0KB";for(var r=0;e>=1e3;)e/=1e3,r++;return 0===r?t=0:t|=1,e.toFixed(t)+" "+["B","KB","MB","GB","TB","PB","EB"][r]},k=function(e,t){var r,n;void 0===t&&(t=0);var i,a,s=e.length-t;return s<=0?(i=(r=o.f([e,""],2))[0],a=r[1]):(i=(n=o.f([e.slice(0,s),e.slice(s)],2))[0],a=n[1]),{first:i,last:a}},j=function(e,t){var r=0;if(v.a.isArray(e))for(var n=e.length-1;n>=0;n+=-1)e[n]===t&&(e.splice(n,1),r+=1);else v.a.each(e,function(n,o){n===t&&(delete e[o],r+=1)});return r},A=r("sa1Ed382"),P=r("2qRnoGmE"),R=["task","event"],N=function(e,t){var r=e._id,n="";switch(t){case"task":n="task/"+r;break;case"work":n="works/"+e._parentId+"/work/"+r;break;case"collection":n="works/"+r;break;case"post":n="posts/post/"+r;break;case"event":n="event/"+r;break;case"entry":n="bookkeeping/entry/"+r;break;case"testcase":n="testplan/"+e._testplanId+"/testcase/"+r;break;case"testplangroup":n="testplan/"+e._testplanId+"/group/"+r}return R.includes(t)?A.config.HOST+"/"+n:A.config.HOST+"/project/"+e._projectId+"/"+n},x=["task","post","event","works","testcase","group"],D=["task","event"],M=function(e){void 0===e&&(e=D);var t=e.join("|");return P.HOST+"/("+t+")/([0-9a-z]{24})?"},F=function(e){void 0===e&&(e=x);var t=e.join("|");return P.HOST+"/[^\\s<]{3,}?/("+t+")/([0-9a-z]{24})(?:(?:/work/([0-9a-z]{24}))?)?"};function L(e){switch(e){case"all":return Math.random().toString(36).replace("0.","");case"onlyAlphabet":return Math.random().toString(36).replace("0.","").replace(/\d/g,"");case"onlyNumber":return Math.random().toString(10).replace("0.","")}}var B=function(e,t,r){void 0===r&&(r=!0);var n="";if(e<=0)return n;for(;n.length<e;){n+=L(t)}return n=n.substr(0,e),r?n.toUpperCase():n},U=function(){var e=A.PREFERENCE.get("lastWorkspace");return"personal"===e?{type:"personal",orgId:null}:{type:"organization",orgId:e}},G=r("tLZJUYWX"),q=r.n(G),z=r("wd/RKGTj"),V=r.n(z),K=function(e,t){void 0===t&&(t={});var r=V()(new Date(e));if(!r.isValid())return{dateString:q.a.get("unknownDate")};var n,o=t.isUsePref?A.PREFERENCE.getDateFormat():"relative",i=t.currentMoment||V()(),a=q.a.getLanguage();if("specific"===o){var s=r.isSame(i,"year");n="en"===a?s?r.format("MMM D"):r.format("MMM DD, YYYY"):s?r.format("MMMDo"):r.format("LL")}else n=t.inShort&&"en"===a?r.calendar(V()(i),{lastWeek:function(e){var t=e.startOf("week");return(this.unix()<t.unix()?"[Last] ":"")+"ddd"},nextWeek:function(e){var t=e.startOf("week");return(this.unix()-t.unix()>=604800?"[Next] ":"")+"ddd"}}):r.calendar(V()(i));var u={dateString:n,dateTimeString:n+" "+r.format("HH:mm"),dateFormatString:r.format("YYYY/MM/DD"),timeFormatString:r.format("HH:mm"),dateClass:"normal",dateIsToday:i.isSame(r,"d")};return V()(i).startOf("minute").isAfter(r)?u.dateClass="overdue":V()(i).endOf("day").isAfter(r)?u.dateClass="today":V()(i).add(7,"days").endOf("day").isAfter(r)&&(u.dateClass="upcoming"),u},H=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.reduce(function(t,r){return t.then(function(t){return e(t)?t:r(t)})},Promise.resolve())}},W={entry:"entries"};function J(e){var t=W[e];return t||e+"s"}var Q=r("5VcWHOOl"),Y=function(e,t){if(e.length<=1)return e;var r=Math.floor(e.length/2);return function(e,t,r){for(var n=[];e.length>0&&t.length>0;)r(e[0],t[0])?n.push(e.shift()):n.push(t.shift());return o.h(n,e,t)}(Y(e.slice(0,r),t),Y(e.slice(r),t),t)};function X(e){return e._userId||e._id}var $=r("e2BLJDjb"),Z=/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,ee=function(e){for(var t="";e;){var r=Z.exec(e);if(null!==r){var n=v.a.escape(r[0]);t+=v.a.escape(e.substr(0,r.index))+"<a href='"+n+"'>"+n+"</a>",e=e.slice(r.index+r[0].length)}else t+=v.a.escape(e),e=""}return t},te=function(e){return Boolean(e.isRoot)},re=r("EtDCcJeX"),ne=function(e){var t=window.open(e,"_blank");t&&(t.opener=null)},oe=r("kGJwS0WR"),ie=r.n(oe),ae=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=new RegExp(ie()(t.trim()),"i");return e.filter(function(e){return r.some(function(t){var r=e[t];return"string"==typeof r&&o.test(r)})})},se=function(e,t){return v.a.includes(e,t)?v.a.without(e,t):e.concat(t)},ue=r("CxY0Mkc1"),ce=r.n(ue);function le(e,t){var r=ce.a.parse(e,!0);return ce.a.format(o.a({},r,{search:void 0,query:o.a({},r.query,t)}))}var pe=r("mwIZSSbM"),fe=r.n(pe);function de(e,t,r){void 0===r&&(r="$");var n=r.length,o=ie()(r),i=new RegExp(o+"[^"+o+"]*"+o,"g");return e.replace(i,function(e){var o=e.slice(n,e.length-n);return""===o?r:fe()(t,o,e)})}r.d(t,"UNIQUE_ID_PREFIX_MIN_LENGTH",function(){return n.b}),r.d(t,"UNIQUE_ID_PREFIX_MAX_LENGTH",function(){return n.a}),r.d(t,"genUniqueIdPrefixLenRange",function(){return n.h}),r.d(t,"checkValidUniqueIdPrefix",function(){return n.e}),r.d(t,"checkValidUniqueIdPrefixInput",function(){return n.f}),r.d(t,"checkObjectIsVisible",function(){return n.d}),r.d(t,"absortExecutorToInvolveMembers",function(){return n.c}),r.d(t,"getExecutor",function(){return n.i}),r.d(t,"compareTask",function(){return n.g}),r.d(t,"isVisibleTask",function(){return n.j}),r.d(t,"iterator",function(){return l}),r.d(t,"flattenPlainGroup",function(){return p}),r.d(t,"splitObject",function(){return f}),r.d(t,"isEmail",function(){return d.b}),r.d(t,"isDefaultEmail",function(){return d.a}),r.d(t,"isPhone",function(){return h}),r.d(t,"formatPhone",function(){return m}),r.d(t,"formatWorktime",function(){return b}),r.d(t,"adjustNumberByStep",function(){return _}),r.d(t,"widthOfString",function(){return S}),r.d(t,"cutString",function(){return T}),r.d(t,"matchString",function(){return E}),r.d(t,"unifyNewline",function(){return O}),r.d(t,"splitSingleAnchorString",function(){return C}),r.d(t,"formatFileSize",function(){return I}),r.d(t,"sliceText",function(){return k}),r.d(t,"removeItem",function(){return j}),r.d(t,"indieDataTypes",function(){return R}),r.d(t,"getObjectLink",function(){return N}),r.d(t,"NEW_REG_SOURCE",function(){return M}),r.d(t,"REG_SOURCE",function(){return F}),r.d(t,"getUniqueId",function(){return B}),r.d(t,"getCurrentWorkSpaceInfo",function(){return U}),r.d(t,"formatDate",function(){return K}),r.d(t,"promiseChain",function(){return H}),r.d(t,"pluralizeObjectType",function(){return J}),r.d(t,"getHoliday",function(){return Q.a}),r.d(t,"getHolidayName",function(){return Q.b}),r.d(t,"mergeSort",function(){return Y}),r.d(t,"resolveUserId",function(){return X}),r.d(t,"isTask",function(){return $.e}),r.d(t,"isEvent",function(){return $.a}),r.d(t,"isIndieTask",function(){return $.c}),r.d(t,"isIndieTestcase",function(){return $.d}),r.d(t,"isIndieEvent",function(){return $.b}),r.d(t,"formatHyperLink",function(){return ee}),r.d(t,"isUncategorizedCommonGroup",function(){return te}),r.d(t,"rxOperator",function(){return re.c}),r.d(t,"observeCallback",function(){return re.b}),r.d(t,"allSettled",function(){return re.a}),r.d(t,"openInNewTab",function(){return ne}),r.d(t,"search",function(){return ae}),r.d(t,"toggle",function(){return se}),r.d(t,"urlFormat",function(){return le}),r.d(t,"interpolate",function(){return de})},"92Y4NLYL":function(e,t,r){"use strict";r.d(t,"a",function(){return f}),r.d(t,"d",function(){return d}),r.d(t,"e",function(){return g}),r.d(t,"f",function(){return h}),r.d(t,"g",function(){return m}),r.d(t,"i",function(){return y}),r.d(t,"j",function(){return v}),r.d(t,"c",function(){return b}),r.d(t,"b",function(){return _}),r.d(t,"h",function(){return S});var n=r("mrSGxOB2"),o=r("4c1CS0b3"),i=r("s0r7VfKc"),a=(r("QQ/Xj7Ar"),r("IssmDVnT")),s=r("50927W45"),u=r("zzqnp9bg"),c=r("vJfEDQKx"),l=function(e){return function(t,r,o,a){var s={_organizationId:a,pageSize:o,q:t,tql:r,spaceType:a?"organization":"user",type:e};return i.default.fetch.get("v3/search",s,{includeHeaders:!0}).map(function(e){var t=e.headers,r=e.body,o=t.get(u.a);return n.a({},r,{result:r.result.map(function(e){return n.a({},e,{sessionId:o})})})})}},p=function(e){return function(t,r,n,o){var i={tql:r,q:t,_organizationId:o,spaceType:o?"organization":"user",type:e};return a.Page.defaultState("v3/search",{pageSize:n,urlQuery:i})}},f=function(e,t){return void 0===t&&(t={}),i.default.fetch.expandPage(e,{loadMore$:t.loadMore$,includeHeaders:!0,mapFn:function(e,t,r,o){var i=o.get(u.a),a=o.get("query-size-overflow");return n.a({},e,{sessionId:i,exceedWarning:a})}})},d=l(s.b.Event),g=l(s.b.Post),h=l(s.b.Project),m=l(s.b.Task),y=l(s.b.User),v=l(s.b.Work),b=l(s.b.Collection),_={event:p(s.b.Event),post:p(s.b.Post),project:p(s.b.Project),task:p(s.b.Task),user:p(s.b.User),work:p(s.b.Work),collection:p(s.b.Collection)},S=function(e,t){var r=e.match(c.TASK_ID_REGEX);if(!r)return o.Observable.of({nextPageToken:"",result:[],totalSize:0});var a=n.f(r,3),s=a[1],l={_organizationId:t,spaceType:t?"organization":"user",uniqueId:a[2],uniqueIdPrefix:s};return i.default.fetch.get("v2/tasks/search",l,{includeHeaders:!0}).map(function(e){var t=e.headers,r=e.body,o=t.get(u.a);return{result:r.map(function(e){return n.a({},e,{sessionId:o})}),totalSize:r.length}})}},"95XjSIUV":function(e,t,r){e.exports=r.p+"images/works-poster.f13f0ad0.png"},"9Ip6qvet":function(e,t,r){"use strict";var n,o=r("mrSGxOB2"),i=r("a+N5u/Cl"),a=r("6SzIBtPz"),s=r("NOGqly5s"),u=r("4c1CS0b3"),c=r("peh1clMB"),l=r("gh8QIhMV"),p=r("eO8HY5nz"),f=r("c8AfT5ki"),d=r("p7RaAO2S"),g=r("s0r7VfKc"),h=r("zzqnp9bg"),m=r("suI5NDUm"),y=(r("KxHPiOLo"),r("EcZ0z2mK"),r("ZKYHwlYi")),v=r("GHDEvYBf");r.d(t,"a",function(){return T}),r.d(t,"b",function(){return b}),r.d(t,"i",function(){return E}),r.d(t,"m",function(){return O}),r.d(t,"n",function(){return w}),r.d(t,"j",function(){return C}),r.d(t,"k",function(){return I}),r.d(t,"l",function(){return k}),r.d(t,"d",function(){return P}),r.d(t,"h",function(){return N}),r.d(t,"c",function(){return M}),r.d(t,"f",function(){return F}),r.d(t,"e",function(){return L}),r.d(t,"g",function(){return B});var b,_=r("sa1Ed382"),S=r("vJfEDQKx").TASK_ID_REGEX,T=["project","user","task","post","work","event"];!function(e){e.ORGANIZATION="organization",e.PERSONAL="user"}(b||(b={}));var E=Object(a.a)("SEARCH_ASSIGN_WORKSPACE_DATA"),O=Object(a.a)("SEARCH_BAR_ON_CHANGE"),w=Object(a.a)("SEARCH_BAR_ON_CHANGE_SILENT"),C=Object(a.a)("SEARCH_BAR_CLOSE"),I=Object(a.a)("SEARCH_BAR_FOCUS"),k=Object(a.a)("SEARCH_BAR_OPEN"),j=Object(a.a)("SEARCH_GET_RESULT_SUCCESS"),A=Object(a.a)("SEARCH_GET_RESULT_FAILED"),P=Object(a.a)("EXIT_SEARCH_BAR"),R={input:"",opened:!1,focus:!1,projectsAndMembers:!1,results:!1,workspaceType:b.PERSONAL,workspaceId:"personal"},N=Object(a.b)(((n={})[""+E]=function(e,t){return o.a({},e,t.payload)},n[""+j]=function(e,t){return o.a({},e,t.payload)},n[""+O]=function(e,t){var r=t.payload.input;return o.a({},e,{input:r,results:!1,projectsAndMembers:!1})},n[""+w]=function(e,t){var r=t.payload.input;return o.a({},e,{input:r,results:!1,projectsAndMembers:!1})},n[""+I]=function(e,t){return t.payload?o.a({},e,{opened:!0,focus:t.payload}):o.a({},e,{focus:t.payload})},n[""+k]=function(e){return o.a({},e,{opened:!0})},n[""+C]=function(e){return o.a({},e,{opened:!1,focus:!1})},n[""+A]=function(e,t){var r;return o.a({},e,((r={})[t.payload]=[],r))},n[""+P]=function(e){return o.a({},R,{workspaceType:e.workspaceType,workspaceId:e.workspaceId})},n),R),x=function(e){var t=e.q,r=e.organizationId,n=e.spaceType,a={spaceType:n,q:t,tql:Object(d.e)(t,{forceAccurate:!0,isBasicObject:!1}),type:"organization"===n?"project,user":"project",_organizationId:"organization"===n?r:void 0};return g.default.fetch.get("v3/search",a,{includeHeaders:!0}).map(h.b).map(function(e){var t=e.result,r=e.requestId;return{projectsAndMembers:i.chain(t).map(function(e){return e.type,o.a({},e,{sessionId:r})}).groupBy("type").value()}})},D=function(e){var t,r,n,a,s,c,l,p,f=Object(m.isAone)()?Object(y.c)(e):u.Observable.of([]);return u.Observable.forkJoin((t=e,s=t.q,c=t.organizationId,l=t.spaceType,p=s.match(S),p?(n=(r=o.f(p,3))[1],a=r[2],g.default.fetch.get("v2/tasks/search",{uniqueId:a,uniqueIdPrefix:n,spaceType:l,_organizationId:"organization"===l?c:void 0},{includeHeaders:!0}).map(function(e){var t=e.headers,r=e.body,n=t.get(h.a);return r.map(function(e){return o.a({},e,{sessionId:n})})})):u.Observable.of([])),function(e){var t=e.q,r=e.organizationId,n=e.spaceType,a={spaceType:n,q:t,tql:Object(d.e)(t),type:"task,post,work,event",_organizationId:"organization"===n?r:void 0};return g.default.fetch.get("v3/search",a,{includeHeaders:!0}).map(h.b).map(function(e){var t=e.result,r=e.requestId,n=i.groupBy(t,"type");return i.mapObject(n,function(e){return e.map(function(e){return o.a({},e,{sessionId:r})})})})}(e),f).map(function(e){var t=o.f(e,3),r=t[0],n=t[1],a=t[2],s=i.chain(r).map(function(e){return o.a({},e,{taskId:e.project.uniqueIdPrefix+"-"+e.uniqueId})}).concat(n.task||[]).uniq("_id").value();return{results:o.a({},n,{task:s},a)}})},M=Object(s.a)(function(e,t){return e.ofType(""+O).filter(function(){return!B(t)}).debounceTime(400).do(function(){_.gta.event({action:"type search content",type:"all project",method:"keyboard"})}).switchMap(function(){var r=t.getState().ui.search,n=r.workspaceType,i=r.workspaceId,a=r.input.trim();if(0===a.length)return u.Observable.of(j({}));var s={q:a,spaceType:n,organizationId:i},c=[{name:"projectsAndMembers",request:x(s)},{name:"results",request:D(s)}].map(function(t){var r=t.request,n=t.name;return r.map(j).takeUntil(e.ofType(""+C)).catch(function(e){return Object(l.throwError)(e),u.Observable.of(A(n))})});return u.Observable.merge.apply(u.Observable,o.h(c))})}),F=Object(c.createSelector)(function(e){return e.results},function(e){return e.projectsAndMembers},function(e,t){if(!t)return[];var r=o.a({},e,t);return i.chain(o.h(T,v.a)).filter(function(e){return r[e]&&r[e].length}).map(function(e){var t=r[e].map(function(t){var r;return t.searchType=e,"post"===e&&(t.content=(r=t.content,i.unescape(r).replace(/<(?:.|\n)*?>/gm,""))),t});return t.length>5?i.take(t,5).concat([{searchAll:!0,searchType:e}]):t}).flatten().value()}),L=i.memoize(function(e){return e=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),new RegExp("("+i.uniq(e.split(" ")).join("|")+")","gi")});function B(e){var t=e.getState().ui.search.workspaceId,r=f.a.organization({params:{_organizationId:t}});return Object(p.matchPath)(e.getState().router.location.pathname,{path:r})}},"9K6UCx6U":function(e,t,r){"use strict";var n=r("q1tIBJhx"),o=r.n(n),i=r("BIOqRNyr"),a=r.n(i),s={0:r("Hpzfvxp2").default,1:r("gucFzxrO").default,2:r("xOayBrgP").default,3:r("Zb29duIX").default,4:r("LiDyQ5v5").default,5:r("d1K7YqRS").default,6:r("1vCkfBRX").default,7:r("2zeSEaA/").default,8:r("AP3c+MbT").default,9:r("0p8eNPki").default,dot:r("4wZadlHd").default,comma:r("DXHFBurU").default,percent:r("LTPoIfvT").default},u=function(e){var t=(""+(null===e.number?0:e.number)).toString().split("").map(function(e,t){var r=e.replace(".","dot").replace(",","comma").replace("%","percent");return o.a.createElement("svg",{key:t,className:a.a.number},o.a.createElement("use",{xlinkHref:"#"+s[r].id}))});return o.a.createElement("span",null,t)};r.d(t,"a",function(){return u})},"9MF2MLFY":function(e,t,r){e.exports={item:"item__3Y0P",avatar:"avatar__2L9Z",name:"name__14Fi"}},"9X6GDvc5":function(e,t,r){e.exports={chart:"chart__30aL"}},"9Zxc0Pdq":function(e,t){e.exports="\nfragment statusInfoSchema on StatusDegree {\n  name\n  degree\n  content\n  updated\n}\n"},"9wRXORqD":function(e,t){e.exports="\nfragment customfieldSchema on Customfield {\n  _id\n  name\n  type\n  subtype\n  externalUrl\n  _creatorId\n  _projectId\n  _organizationId\n  boundType\n  choices {\n    _id\n    value\n  }\n  created\n  updated\n  pos\n  displayed\n  _roleIds\n  categoryIds\n  description\n  _advancedCustomfieldId\n}\n"},A0zvKtnb:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"workshop",use:"workshop-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="workshop"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#FFB74C" rx="2" /><path fill="#FFFFFF" fill-rule="nonzero" d="M13.879 13.056c-1.245-3.121-2.699-3.944-2.699-5.5V5.722h.305a.305.305 0 0 0 .304-.305v-.611a.305.305 0 0 0-.304-.306H8.44a.305.305 0 0 0-.304.306v.61c0 .17.136.306.304.306h.305v1.834c0 1.556-1.454 2.379-2.699 5.5-.396.993-1.414 2.444 3.917 2.444 5.33 0 4.312-1.451 3.916-2.444zm-1.285.769c-.378.105-1.13.225-2.594.225-1.463 0-2.216-.12-2.594-.225-.134-.037-.186-.182-.139-.315.119-.336.342-.917.76-1.565 1.022-1.584 2.081.249 2.963.249.882 0 .64-.783.983-.25.417.65.641 1.23.76 1.566.047.133-.005.277-.14.315z" /></g></symbol>'});a.a.add(s);t.default=s},AJKJAcwg:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("4c1CS0b3"),i=r("oRqJmROU"),a=r("tHFGQRix"),s=r("7OaXMmhv");function u(e,t,r){if(!t)return e;var n=e.findIndex(function(e){return s.e(e)===t});if(-1===n)return e;var o=e[n],i=e.slice();if(i[n]=s.j(o),r===a.a.Single){var u=e.findIndex(s.g);u>=0&&(i[u]=s.m(e[u]))}return i}function c(e,t,r,i,a){var c=e.map(function(e){return{value:e,kind:"added"}}),l=n.f(r.partition(s.g),2),p=l[0],f=l[1],d=o.Observable.merge(t,f.map(s.e)).map(function(e){return{value:e,kind:"toggled"}}),g=p.map(function(e){return{value:e,kind:"search-toggled"}});return o.Observable.merge(c,d,g).scan(function(e,t){if(t)switch(t.kind){case"added":return e.concat(t.value.map(i.initialize));case"toggled":return u(e,t.value,a);case"search-toggled":return i.selectFromSearch(e,t.value)}return e},[])}function l(e,t){return e.filter(function(e){return e.kind===t}).map(function(e){return e.value})}var p=function(e,t,r,p,f){return void 0===r&&(r=function(){return!0}),void 0===p&&(p=s.e),void 0===f&&(f=a.a.Multi),function(a){var d=a.initListLoad$,g=a.initPoolLoad$,h=a.searchTermChange$,m=a.searchResultSelected$,y=a.toggleEntry$,v=a.moveForward$,b=a.moveBackward$,_=a.createdEntry$,S=void 0===_?o.Observable.empty():_,T=a.commit$,E=void 0===T?o.Observable.empty():T,O=m.share(),w=O.map(s.j).share(),C=y.share(),I=C.map(function(e){return e.id}).share(),k=g.share(),j=h.share(),A=d.share(),P=S.share(),R=A.mergeMap(function(e){var t=e.reduce(function(e,t){return e[p(t)]=t,e},{});return o.Observable.merge(C,O,P.map(function(e){return s.m(e)})).pipe(s.a(r,f,p)(t)).startWith({result:t,added:[],removed:[]})}).publishReplay(1).refCount(),N=function(e){return o.Observable.combineLatest(e,R).map(function(e){var t=n.f(e,2),o=t[0],i=t[1];return o.map(function(e){return s.d(e,r(e,i,p(e)))})})},x=function(e,t,r,n){return c(e,t,r,{initialize:s.i,selectFromSearch:function(e,t){return u(e,s.e(t),n)}},n)}(o.Observable.concat(A.take(1),P.map(function(e){return[e]})).publishReplay(1).refCount(),I,w,f).pipe(N).publishReplay(1).refCount(),D=k.mapTo(!1),M=function(e,t,r,n){var i,a=o.Observable.create(function(e){i=e}),u=c(e,t,r,{initialize:s.m,selectFromSearch:function(e,t){var r=s.e(t);i.next(r);var n=e.findIndex(function(e){return s.e(e)===r});if(-1===n)return[t].concat(e);var o=e.slice();return o.splice(n,1).map(s.j).concat(o)}},n);return o.Observable.merge(u.map(function(e){return{kind:"pool",value:e}}),a.map(function(e){return{kind:"pool-top",value:e}}))}(k,I,w,f).publishReplay(1).refCount(),F=l(M,"pool").withLatestFrom(x,function(e,t){var r=new Set(t.map(function(e){return e.id}));return e.filter(function(e){var t=e.id;return!r.has(t)})}).pipe(N).publishReplay(1).refCount(),L=o.Observable.combineLatest(F.startWith([]),D.startWith(!0)).debounceTime(0),B=l(M,"pool-top").withLatestFrom(x,function(e,t){return t.findIndex(function(t){return t.id===e})<0}).filter(i.d).scan(function(e,t){return e+1},0),U=o.Observable.combineLatest(x,F.startWith([])).map(function(e){var t=n.f(e,2),r=t[0],o=t[1];return r.concat(o).filter(s.g).map(s.e)}),G=function(e,t,r,i){var a=e.map(function(e){return e.trim()}).shareReplay(1),c=a.filter(function(e){return""===e}),l=o.Observable.merge(t,c).share(),p=n.f(t.partition(s.g),2),f=p[0],d=p[1];return a.switchMap(function(e){return i(e).takeUntil(l)}).withLatestFrom(r,function(e,t){return e.map(function(e){var r=s.e(e),o=t.indexOf(r)>=0;return n.a({},e,{checked:o})})}).switchMap(function(e){return o.Observable.merge(f,d).scan(function(e,t){return u(e,t.id)},e).startWith(e)})}(j.debounceTime(400),w,U,e).pipe(N).share(),q=function(e,t){var r=n.f(e.partition(function(e){return""===e.trim()}),2),i=r[0],a=r[1];return o.Observable.merge(a.mapTo(!0),o.Observable.merge(t,i).mapTo(!1))}(j,G).distinctUntilChanged(),z=E.withLatestFrom(R).map(function(e){return n.f(e,2)[1]}),V=(v&&b?function(e,t){return o.Observable.merge(t,e).scan(function(e,t){return t?e.concat(t):e.slice(0,e.length-1)},[])}(v,b):o.Observable.empty()).share(),K=function(e,t,r,i){var a=n.f(t.partition(s.g),2),c=a[0],l=a[1];return e.switchMap(function(e){return i&&e.length>0?i(e[e.length-1].id,e[e.length-1].type):o.Observable.of([])}).withLatestFrom(r,function(e,t){return e.map(function(e){var r=s.e(e),o=t.indexOf(r)>=0;return n.a({},e,{checked:o})})}).switchMap(function(e){return o.Observable.merge(c,l).scan(function(e,t){return u(e,t.id)},e).startWith(e)})}(V,w,U,t).pipe(N),H=function(e,t){return o.Observable.merge(e.mapTo(!0),t.mapTo(!1))}(V,K);return o.Observable.combineLatest([x.startWith([]),L,B.startWith(void 0),j.startWith(""),G.startWith([]),q.startWith(!1),V.startWith([]),K.startWith([]),H.startWith(!1),z.startWith(void 0)],function(e,t,r,o,i,a,s,u,c,l){var p=n.f(t,2);return{list:e,pool:p[0],poolTop:r,isPoolLoading:p[1],searchTerm:o,searchResults:i,isSearchLoading:a,historyPath:s,childrenResults:u,isChildrenLoading:c,commitPayload:l}})}};r.d(t,"d",function(){return p}),r.d(t,"a",function(){return s.e}),r.d(t,"c",function(){return s.g}),r.d(t,"b",function(){return s.f})},ALrmuhC4:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return i});var n=r("mrSGxOB2"),o=function(e){return function(t){return function(t){return function(r){return r.meta&&r.meta.gta&&e.event(r.meta.gta),t(r)}}}},i=function(e,t){return function(r){var o,i=e(r);return o="function"==typeof t?t(r):t,i.meta=n.a({},i.meta,{gta:o}),i}}},"AP3c+MbT":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"tap-num-8",use:"tap-num-8-usage",viewBox:"0 0 14 32",content:'<symbol viewBox="0 0 14 32" id="tap-num-8"><path d="M8.772 8.472c0-.504-.18-.93-.54-1.278a1.756 1.756 0 0 0-1.26-.522c-.48 0-.9.174-1.26.522-.36.348-.54.774-.54 1.278v3.744c0 .504.18.93.54 1.278.36.348.78.522 1.26.522s.9-.174 1.26-.522c.36-.348.54-.774.54-1.278V8.472zM1.5 9.912c0-.696.024-1.29.072-1.782a6.78 6.78 0 0 1 .234-1.278c.108-.36.246-.684.414-.972a8.57 8.57 0 0 1 .612-.9 4.962 4.962 0 0 1 1.8-1.458c.72-.348 1.5-.522 2.34-.522.84 0 1.62.174 2.34.522.72.348 1.32.834 1.8 1.458.24.312.444.612.612.9.168.288.306.612.414.972.108.36.186.786.234 1.278.048.492.072 1.086.072 1.782 0 .768-.012 1.416-.036 1.944a5.949 5.949 0 0 1-.216 1.404c-.12.408-.306.774-.558 1.098a6.869 6.869 0 0 1-1.026 1.026c.432.336.774.672 1.026 1.008.252.336.438.732.558 1.188.12.456.192 1.014.216 1.674.024.66.036 1.47.036 2.43 0 .792-.018 1.446-.054 1.962-.036.516-.09.966-.162 1.35a3.71 3.71 0 0 1-.306.972c-.132.264-.294.54-.486.828-.408.624-.984 1.158-1.728 1.602-.744.444-1.656.666-2.736.666-1.08 0-1.992-.222-2.736-.666-.744-.444-1.32-.978-1.728-1.602a7.755 7.755 0 0 1-.486-.828 3.71 3.71 0 0 1-.306-.972 11.924 11.924 0 0 1-.162-1.35 29.149 29.149 0 0 1-.054-1.962c0-.96.012-1.77.036-2.43.024-.66.096-1.218.216-1.674.12-.456.306-.852.558-1.188a5.466 5.466 0 0 1 1.026-1.008 6.869 6.869 0 0 1-1.026-1.026 3.276 3.276 0 0 1-.558-1.098 5.949 5.949 0 0 1-.216-1.404A43.937 43.937 0 0 1 1.5 9.912zm7.272 8.64c0-.504-.18-.93-.54-1.278a1.756 1.756 0 0 0-1.26-.522c-.48 0-.9.174-1.26.522-.36.348-.54.774-.54 1.278v5.04c0 .504.18.93.54 1.278.36.348.78.522 1.26.522s.9-.174 1.26-.522c.36-.348.54-.774.54-1.278v-5.04z" /></symbol>'});a.a.add(s);t.default=s},AsfohlkG:function(e,t,r){"use strict";var n;!function(e){e.project="project",e.member="member",e.scenariofieldconfig="scenariofieldconfig",e.tagId="tagId",e.sprintId="sprintId",e.default="default"}(n||(n={}));var o=r("q1tIBJhx"),i=r.n(o),a=function(e){return i.a.createElement("div",{className:e.className},e.before,e.children,e.after)};a.defaultProps={groupped:!0};var s=r("mrSGxOB2"),u=r("TSYQbtd+"),c=r.n(u),l=r("GESwhXbR"),p=r("p7RaAO2S"),f=r("ebZ+QxSc"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onClick(t.props.option)},t}return s.d(t,e),t.prototype.renderTick=function(){var e=this;return this.props.selected.find(function(t){return Object(p.j)(t.value,e.props.option.value)})&&o.createElement(l.Icon,{name:"tick"})},t.prototype.render=function(){var e=this.props.option,t=e.value,r=e.name,n=e.color,i=e.scopeName,a=c()("item-name",{"with-desc":!!i});return o.createElement("div",{key:t,className:c()(f.item,this.props.className),onClick:this.onClick},o.createElement("span",{className:"tag-label tag-label-"+n}),o.createElement("span",{className:a},o.createElement("span",null,r),i&&o.createElement("span",{className:"item-desc"},i)),this.renderTick())},t}(o.PureComponent),g=r("ebZ+QxSc"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onClick(t.props.option)},t}return s.d(t,e),t.prototype.renderTick=function(){var e=this;return this.props.selected.find(function(t){return Object(p.j)(t.value,e.props.option.value)})&&o.createElement(l.Icon,{name:"tick"})},t.prototype.render=function(){var e=this.props.option,t=e.value,r=e.name,n=e.scopeName,i=c()("item-name",{"with-desc":!!n});return o.createElement("div",{key:""+t,className:c()(g.item,this.props.className),onClick:this.onClick},o.createElement("span",{className:i},r,n&&o.createElement("span",{className:"item-desc"},n)),this.renderTick())},t}(o.PureComponent),m=r("zXmn5Z7T"),y=r("ebZ+QxSc"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onClick(t.props.option)},t}return s.d(t,e),t.prototype.renderTick=function(){var e=this;return this.props.selected.find(function(t){return Object(p.j)(t.value,e.props.option.value)})&&o.createElement(l.Icon,{name:"tick"})},t.prototype.render=function(){var e=this.props.option,t=e.value,r=e.name,n=e.avatarUrl,i=e.role,a=e.teamAncestors;return o.createElement("div",{className:c()(y.item,this.props.className),onClick:this.onClick},o.createElement(m.a,{size:"small",key:t,name:r,avatarUrl:n,role:i,teamAncestors:a}),this.renderTick())},t}(o.PureComponent),b=r("+rL9Of4X"),_=r("ebZ+QxSc"),S=r("L2bYkKUI"),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onClick(t.props.option)},t}return s.d(t,e),t.prototype.renderTick=function(){var e=this;return this.props.selected.find(function(t){return Object(p.j)(t.value,e.props.option.value)})&&o.createElement(l.Icon,{name:"tick"})},t.prototype.render=function(){var e=this.props.option,t=e.value,r=e.name,n=e.logo;return o.createElement("div",{className:c()(_.item,this.props.className),onClick:this.onClick},o.createElement(b.a,{size:"small",key:t,name:r,logo:n||S}),this.renderTick())},t}(o.PureComponent),E=r("oRPyOBnq"),O=r("ebZ+QxSc"),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onClick(t.props.option)},t}return s.d(t,e),t.prototype.renderTick=function(){var e=this;return this.props.selected.find(function(t){return Object(p.j)(t.value,e.props.option.value)})&&o.createElement(l.Icon,{name:"tick"})},t.prototype.render=function(){var e=this.props.option,t=e.value,r=e.name,n=e.icon;return o.createElement("div",{key:t,className:c()(O.item,this.props.className),onClick:this.onClick},o.createElement(E.FieldIcon,{icon:n,type:"task",className:O["field-icon"]}),o.createElement("span",{className:"item-name"},r),this.renderTick())},t}(o.PureComponent);r.d(t,"c",function(){return n}),r.d(t,"a",function(){return a}),r.d(t,"g",function(){return d}),r.d(t,"d",function(){return h}),r.d(t,"b",function(){return v}),r.d(t,"e",function(){return T}),r.d(t,"f",function(){return w})},B5Ec8wMm:function(e,t,r){e.exports=r.p+"images/groupchat-0.f6691785.png"},"B9Qi/5SX":function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"d",function(){return E}),r.d(t,"c",function(){return O}),r.d(t,"a",function(){return w}),r.d(t,"f",function(){return C}),r.d(t,"e",function(){return I});var n,o,i=r("mrSGxOB2"),a=r("6SzIBtPz"),s=r("NOGqly5s"),u=r("4c1CS0b3"),c=r("tLZJUYWX"),l=r.n(c),p=r("s0r7VfKc"),f=r("fio7jWQ0"),d=r("oRqJmROU"),g=r("gh8QIhMV"),h=r("EWQzZJIA"),m=r("lIadzMji"),y=r("j5JlF2rJ"),v=r("RIjxGFt6");!function(e){e._id="all",e.checkId=function(t){return t===e._id},e.get=function(t){return void 0===t&&(t="list"),{_id:e._id,name:l.a.get("custom.views.all.tasks"),view:{type:t,taskLayer:Object(v.getDefaultTaskLayer)({appName:"tasks",viewType:t})},filter:"ORDER BY created DESC",orderBy:"created_desc",type:"custom"}}}(o||(o={}));var b={isLoaded:!1,projectId:null,newSmartGroupId:null,smartGroups:[],currentSmartGroupId:null,smartGroupType:null,smartGroupOrdersInProject:{}},_=function(e){return"CUSTOM_VIEWS/"+e},S=function(e){return e+"/SUCCESS"},T=function(e){return e+"/FAILURE"},E=function(e,t,r){f.store.dispatch(w.chooseSmartGroup({id:e,projectId:t,smartGroupType:r}))},O=function(){f.store.dispatch(w.unmount())},w={mounted:Object(a.a)(_("MOUNTED")),mountedSuccess:Object(a.a)(_(S("MOUNTED"))),chooseSmartGroup:Object(a.a)(_("CHOOSE_SMART_GROUP")),deleteSmartGroup:Object(a.a)(_("DELETE_SMART_GROUP")),updateSmartGroup:Object(a.a)(_("UPDATE_SMART_GROUP")),moveSmartGroup:Object(a.a)(_("UPDATE_SMART_GROUP_MOVE")),moveSmartGroupFailed:Object(a.a)(_(T("UPDATE_SMART_GROUP_MOVE"))),setNewSmartGroupId:Object(a.a)(_("SET_NEW_SMART_GROUP_ID")),updateOrders:Object(a.a)(_("UPDATE_ORDERS")),updateSuccess:Object(a.a)(_(S("UPDATE"))),updateFailed:Object(a.a)(_(T("UPDATE"))),unmount:Object(a.a)(_("UNMOUNT"))},C=Object(a.b)(((n={})[""+w.mounted]=function(e,t){var r=t.payload,n=r.projectId,o=r.smartGroupType;return i.a({},e,{projectId:n,smartGroupType:o})},n[""+w.mountedSuccess]=function(e,t){var r,n=t.payload.smartGroups,o=void 0===n?[]:n,a=e.projectId,s=e.smartGroupType,u=e.smartGroupOrdersInProject;if(!a||!s)return e;var c=Object(m.d)(a,s),l=u[c]||null,p=Object(m.g)(o,l),f=i.a({},u,((r={})[c]=p,r));return i.a({},e,{isLoaded:!0,smartGroupOrdersInProject:f,smartGroups:o})},n[""+w.chooseSmartGroup]=function(e,t){var r=t.payload.id;return i.a({},e,{currentSmartGroupId:r})},n[""+w.setNewSmartGroupId]=function(e,t){var r=t.payload.id;return i.a({},e,{newSmartGroupId:r})},n[""+w.updateOrders]=function(e,t){var r,n=e.projectId,o=e.smartGroupType,a=e.smartGroupOrdersInProject;if(!n||!o)return e;var s=t.payload.ids,u=Object(m.d)(n,o),c=i.a({},a,((r={})[u]=s,r));return i.a({},e,{smartGroupOrdersInProject:c})},n[""+w.moveSmartGroupFailed]=function(e){var t,r=e.projectId,n=e.smartGroupType,o=e.smartGroupOrdersInProject;if(!r||!n)return e;var a=Object(m.d)(r,n),s=i.h(o[a]||[]);return i.a({},e,{smartGroupOrdersInProject:i.a({},o,(t={},t[a]=s,t))})},n[""+w.unmount]=function(e){return i.a({},b,{smartGroupOrdersInProject:e.smartGroupOrdersInProject})},n),b),I=Object(s.a)(function(e){return e.ofType(""+w.mounted).filter(d.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.smartGroupType;return p.default.getSmartGroups(n,o).changes().map(function(e){return w.mountedSuccess({smartGroups:e})}).takeUntil(e.ofType(""+w.unmount)).catch(function(e){return Object(g.throwError)(e),u.Observable.of(w.updateFailed())})})},function(e){return e.ofType(""+w.chooseSmartGroup).filter(d.a).do(function(e){var t=e.payload,r=t.id,n=t.projectId,o=t.smartGroupType;Object(h.c)(r,n,o)}).filter(function(){return!1})},function(e){return e.ofType(""+w.updateSmartGroup).filter(d.a).switchMap(function(t){var r=t.payload,n=r.id,o=r.options;return p.default.updateSmartGroup(n,o).map(function(){return w.updateSuccess()}).takeUntil(e.ofType(""+w.unmount)).catch(function(e){return Object(g.throwError)(e),u.Observable.of(w.updateFailed())})})},function(e){return e.ofType(""+w.moveSmartGroup).filter(d.a).switchMap(function(t){var r=t.payload,n=r.id,o=r.nextId;return p.default.moveSmartGroup(n,o).concatMap(function(e){var t=e.map(function(e){return e._id});return u.Observable.from([w.updateSuccess(),w.updateOrders({ids:t})])}).takeUntil(e.ofType(""+w.unmount)).catch(function(e){return Object(g.throwError)(e),u.Observable.of(w.moveSmartGroupFailed())})})},function(e){return e.ofType(""+w.deleteSmartGroup).filter(d.a).switchMap(function(t){var r=t.payload.id;return p.default.deleteSmartGroup(r).map(function(){return Object(y.deleteCustomViewSuccessGta)(),w.updateSuccess()}).takeUntil(e.ofType(""+w.unmount)).catch(function(e){return Object(g.throwError)(e),u.Observable.of(w.updateFailed())})})})},BG7MerIK:function(e,t,r){"use strict";var n;r.d(t,"a",function(){return n}),function(e){e.Starred="starred",e.History="history",e.Joined="joined",e.ProjectTag="projecttag",e.Public="public",e.Ungrouped="ungrouped",e.Suspended="suspended",e.Archived="archived"}(n||(n={}))},BIOqRNyr:function(e,t,r){e.exports={number:"number__RxRw"}},BT4yaUWL:function(e,t){e.exports="\nfragment customfieldValue on CustomFieldValue {\n  value\n  _customfieldId\n}\n"},BVh3nimv:function(e,t){var r;t.DEFAULTS={autoHeight:!1,headerFixed:!0,modalPadding:!0,size:"middle",titlePosition:"center",modalClass:"",modalClose:!1},t.get=function(e){return r()[e]||{}},r=function(){return{tag:{size:"large",modalPadding:!1,title:tb_i18n.get("project.tags"),modalClass:"modal-fullsize"},archive:{size:"large",modalPadding:!1,title:tb_i18n.get("archive.title"),modalClass:"archive-modal-view"},"user-settings":{modalPadding:!1,title:tb_i18n.get("user.settings.setting"),modalClass:"user-settings-modal-view"},"hotkey-helper":{modalPadding:!1,title:tb_i18n.get("helper.shortcuts"),modalClass:"hotkey-helper-modal-view"},"markdown-helper":{modalPadding:!1,title:tb_i18n.get("markdown.helper.title"),modalClass:"markdown-helper-modal-view"},"chat-create":{size:"large",headerFixed:!0,modalPadding:!1,title:tb_i18n.get("chat.room.chat.create"),modalClass:"chat-room-add-modal-view modal-fullsize"},"bookkeeping-approver":{title:tb_i18n.get("bookkeeping.settings.approver.title"),modalClass:"bookkeeping-settings-approver-modal-view"},"bookkeeping-display-field":{title:tb_i18n.get("bookkeeping.settings.fields.title"),modalClass:"bookkeeping-settings-displayFields-modal-view"},"bookkeeping-category":{title:tb_i18n.get("bookkeeping.settings.category.title"),modalClass:"bookkeeping-settings-categories-modal-view"},"edit-customfields":{headerFixed:!0,modalPadding:!1,title:tb_i18n.get("view.detail.or.edit")}}}},Bi3w3DSB:function(e,t,r){e.exports={tooltip:"tooltip__2t5x"}},"C7Zof+C/":function(e,t,r){e.exports=r.p+"images/shimo-2.f0e70f23.png"},CFOPnz30:function(e,t,r){"use strict";var n=r("IssmDVnT");function o(e){return"projecttag"===e.subjectType&&!!e.subjectValue}n.SDKFetch.prototype.getStars=function(e){return this.get("stars",e)},n.SDKFetch.prototype.addStar=function(e){return this.post("stars?_organizationId="+e._organizationId,e)},n.SDKFetch.prototype.delStar=function(e){return this.delete("stars/"+e)},n.SDKFetch.prototype.unstarProject=function(e){return this.delete("projects/"+e+"/star")},r.d(t,"a",function(){return o})},"CGal/mJM":function(e,t,r){"use strict";r.r(t),r.d(t,"BoardViewType",function(){return n}),r.d(t,"getSortMethods",function(){return l}),r.d(t,"getValidSortMethod",function(){return p}),r.d(t,"canCustomMethod",function(){return f}),r.d(t,"getSortMethodName",function(){return d}),r.d(t,"getSortMethodTriggerName",function(){return g}),r.d(t,"getSortMethodIcon",function(){return h});var n,o=r("tLZJUYWX"),i=r.n(o),a=r("fcolQD49"),s=r("px/Tdvb+"),u=r("zxyTAlCn"),c=r("lfya3Nc5");!function(e){e.Kanban="kanban",e.Table="table",e.Time="time",e.List="list"}(n||(n={}));var l=function(e){var t=[];return f(e)&&t.push(s.SortMethod.CUSTOM),e.appEnabledStartDate&&t.push(s.SortMethod.STARTDATE,s.SortMethod.STARTDATE_DESC),t.push(s.SortMethod.PRIORITY,s.SortMethod.DUEDATE,s.SortMethod.CREATED_ASC,s.SortMethod.CREATED_DESC,s.SortMethod.UPDATED_ASC,s.SortMethod.UPDATED_DESC),t},p=function(e,t){return e.indexOf(t)>=0?t:s.SortMethod.CREATED_DESC},f=function(e){var t=e.enableCustomMethod,r=e.boardViewType,o=e.paneType,i=e.laneType,s=e.taskLayer;return[t,r===n.Kanban,Object(c.supportCustomSortPane)(o),i===a.a.AxisType.noop,s===u.a.OnlyTopLevel].every(function(e){return e})},d=function(e){switch(e){case s.SortMethod.CUSTOM:return i.a.get("scrum.sort.custom");case s.SortMethod.PRIORITY:return i.a.get("scrum.sort.priority");case s.SortMethod.STARTDATE:return i.a.get("scrum.sort.startdate.up");case s.SortMethod.STARTDATE_DESC:return i.a.get("scrum.sort.startdate.down");case s.SortMethod.DUEDATE:return i.a.get("scrum.sort.duedate");case s.SortMethod.CREATED_ASC:return i.a.get("scrum.sort.created.up");case s.SortMethod.CREATED_DESC:return i.a.get("scrum.sort.created.down");case s.SortMethod.UPDATED_ASC:return i.a.get("scrum.sort.updated.up");case s.SortMethod.UPDATED_DESC:return i.a.get("scrum.sort.updated.down")}};function g(e){switch(e){case s.SortMethod.CUSTOM:return i.a.get("scrum.panel.sort.title");case s.SortMethod.PRIORITY:return i.a.get("scrum.sort.priority.title");case s.SortMethod.STARTDATE:case s.SortMethod.STARTDATE_DESC:return i.a.get("scrum.sort.startdate.title");case s.SortMethod.DUEDATE:return i.a.get("scrum.sort.duedate.title");case s.SortMethod.CREATED_ASC:case s.SortMethod.CREATED_DESC:return i.a.get("scrum.sort.created.title");case s.SortMethod.UPDATED_ASC:case s.SortMethod.UPDATED_DESC:return i.a.get("scrum.sort.updated")}}function h(e){switch(e){case s.SortMethod.CUSTOM:return"sort-s";case s.SortMethod.PRIORITY:case s.SortMethod.STARTDATE_DESC:case s.SortMethod.CREATED_DESC:case s.SortMethod.UPDATED_DESC:return"desc-sort-s";case s.SortMethod.STARTDATE:case s.SortMethod.DUEDATE:case s.SortMethod.CREATED_ASC:case s.SortMethod.UPDATED_ASC:return"asc-sort-s"}}},CHPkJDDg:function(e,t,r){e.exports=r.p+"images/evernote-1.74ad3c33.png"},"CIm7x6F+":function(e,t,r){e.exports=r.p+"images/tasks-2.b13945a7.png"},CLvghb9h:function(e,t,r){"use strict";var n,o,i,a;r.d(t,"b",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"d",function(){return a}),function(e){e[e.Groups=100]="Groups",e[e.Members=101]="Members",e[e.Subteams=102]="Subteams",e[e.Teams=103]="Teams",e[e.Leaders=104]="Leaders",e[e.Roles=105]="Roles"}(n||(n={})),function(e){e[e.GroupMembers=200]="GroupMembers",e[e.GroupSync=201]="GroupSync",e[e.Groups=202]="Groups",e[e.InviteFromGroups=203]="InviteFromGroups",e[e.InviteFromLink=204]="InviteFromLink",e[e.InviteFromTeams=205]="InviteFromTeams",e[e.OrganizationMembers=206]="OrganizationMembers",e[e.RecentContacts=207]="RecentContacts",e[e.Search=208]="Search",e[e.Subteams=209]="Subteams",e[e.TeamMembers=210]="TeamMembers",e[e.TeamSync=211]="TeamSync",e[e.Teams=212]="Teams",e[e.TeamLeaders=213]="TeamLeaders",e[e.OrganizationRoles=214]="OrganizationRoles"}(o||(o={})),function(e){e[e.Email=300]="Email",e[e.Groups=301]="Groups",e[e.OrganizationMembers=302]="OrganizationMembers",e[e.TeamMembers=303]="TeamMembers",e[e.Phone=304]="Phone",e[e.Teams=305]="Teams",e[e.Username=306]="Username"}(i||(i={})),function(e){e[e.Default=400]="Default",e[e.Group=401]="Group",e[e.Groups=402]="Groups",e[e.Team=403]="Team",e[e.Teams=404]="Teams",e[e.Search=405]="Search"}(a||(a={}))},CYq7loc6:function(e,t,r){e.exports=r.p+"images/timeview-2.7d30c26c.png"},"CamDZG+a":function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r.n(o),a=r("TSYQbtd+"),s=r.n(a),u=r("oyYm+z2s"),c=r.n(u),l=r("tLZJUYWX"),p=r.n(l),f=r("GESwhXbR"),d=r("x/qLPrBw"),g=function(e){var t=s()(d["clear-btn"],e.className),r=!e.disabled&&i.a.createElement(f.Tooltip,{title:p.a.get("searcher.unit.remove.value.tips")},i.a.createElement(f.Icon,{className:t,name:"remove-s",onClick:e.onClearValue}));return i.a.createElement("div",{className:e.wrapperClass},r)};r.d(t,"a",function(){return h});var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.renderClearBtn=function(){return i.a.createElement(g,{disabled:this.props.disabled,onClearValue:this.props.onClearValue,className:c.a["anchor-clear"],wrapperClass:c.a["clear-wrapper"]})},t.prototype.render=function(){var e,t=s()(c.a.root,((e={})[c.a["has-value"]]=this.props.hasValue,e[c.a.inline]=this.props.inline,e[c.a["with-min-height"]]=this.props.minHeightSupport,e));return i.a.createElement("div",{className:t},this.props.children,this.props.showClear&&this.renderClearBtn())},t}(i.a.PureComponent)},CrJvKdsN:function(e,t,r){e.exports=r.p+"images/startdate-2.7f7c4462.png"},CrUnfw5r:function(e,t,r){var n,o,i,a,s={}.hasOwnProperty;a=r("a+N5u/Cl"),n=r("jpEw/7nX"),o=r("VuB9cZyl"),i=r("wu4EEviu"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o),t.prototype.name="archives",t.prototype.model=n,t.prototype.pageNum=50,t.prototype.boundToObjectType="project",t.prototype.initialize=function(e,r){return this._objectType=r.attrs.objectType,this._projectId=r._projectId,t.__super__.initialize.apply(this,arguments)},t.prototype.parse=function(e){return Array.isArray(e)?a.each(e,this.parse,this):e&&(e._id=e._boundToObjectId+"_archived"),e},t.prototype.sync=function(e,r,n){return n.url="projects/"+this._projectId+"/archives",t.__super__.sync.apply(this,arguments)},t.prototype.listen=function(){var e,t;if(!this.listened)return this.listened=!0,e=this.name+"/"+this._projectId,this.on("change:isArchived",(t=this,function(e,r){if(!r)return t.remove(e)})),i.on(":new:"+e,function(e){return function(t){if(t.boundToObjectType===e._objectType)return e.add(t)}}(this)),i.on(":change:"+e,function(e){return function(t){if(t.boundToObjectType===e._objectType)return e.add(t)}}(this)),i.on(":remove:"+e,function(e){return function(t){return e.remove(t+"_archived")}}(this)),i.on(":remove:"+this.name,function(e){return function(t){return e.remove(t+"_archived")}}(this)),this},t}()},CrgVhEYo:function(e,t,r){"use strict";r.r(t),r.d(t,"REMINDER_GTA",function(){return a}),r.d(t,"pickMembers",function(){return s}),r.d(t,"getMemberString",function(){return u}),r.d(t,"getDescription",function(){return c});var n=r("tLZJUYWX"),o=r("wd/RKGTj"),i=r.n(o),a={unset:"not remind",dueDate:"due remind",startDate:"start remind",customize:"custom remind"},s=function(e,t,r){return t.filter(function(t){return e.indexOf(t._userId)>=0}).sort(function(e,t){return(r&&e._userId===r?-1:0)-(r&&t._userId===r?-1:0)})},u=function(e,t,r){return s(e,t,r).map(function(e){return r&&e._userId===r?e.name+" ("+n.get("executor")+")":e.name}).join(", ")},c=function(e,t,r){if(!t.rules||0===t.rules.length)return"";var o,a,s,c=e._executorId,l=u(t.members,r,c),p=t.rules[0],f=n.get("task.reminder.modal."+p.type),d="";switch(p.type){case"startDate":case"dueDate":return n.get("task.reminder.title.description",f,l);case"beforeStartDate":case"beforeDueDate":case"afterStartDate":case"afterDueDate":return d=f+" "+(o=p.relative,a=o.value,s=o.unit,a+" "+{minute:n.get("minute"),hour:n.get("hour"),day:n.get("day")}[s]),n.get("task.reminder.title.description",d,l);case"customize":return d=i()(p.date).format("LL HH:mm"),n.get("task.reminder.title.description",d,l)}}},D15MKVbL:function(e,t,r){"use strict";function n(e){return!e.proTemplateConfigType}function o(e){return e.find(function(e){return e.isDefault})||e[0]}function i(e,t){var r=e.find(function(e){return"subtask"===e.proTemplateConfigType});if(r)return r;var n=t&&t._defaultScenariofieldconfigId,i=e.find(function(e){return e._id===n});return i||o(e)}r.r(t),r.d(t,"isShareable",function(){return n}),r.d(t,"findDefaultScenarioFieldConfig",function(){return o}),r.d(t,"findSubtaskDefaultScenarioFieldConfig",function(){return i})},D5oRvhYV:function(e,t,r){"use strict";var n;r.d(t,"a",function(){return n}),function(e){e.AONE="AONE",e.TAB="TAB",e.NEW="NEW"}(n||(n={}))},D5vd1aJW:function(e,t,r){e.exports=r.p+"images/posts-1.6379a80e.png"},DOZCBSCZ:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r.n(o),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.render=function(){return i.a.createElement("div",{className:"loading-indicator",style:this.props.style},i.a.createElement("span",{className:"loader-dot"}),i.a.createElement("span",{className:"loader-dot"}),i.a.createElement("span",{className:"loader-dot"}))},t.defaultProps={style:{}},t}(i.a.PureComponent);r.d(t,"a",function(){return a})},DPW1xmNq:function(e,t,r){e.exports=r.p+"images/zoom-0.e6bbbe9e.png"},DTrSvq2m:function(e,t,r){e.exports=r.p+"images/shimo-poster.2c64b1e5.png"},DXHFBurU:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"tap-num-comma",use:"tap-num-comma-usage",viewBox:"0 0 7 32",content:'<symbol viewBox="0 0 7 32" id="tap-num-comma"><path d="M1.5 25h3.672v3.672L1.5 31.336z" /></symbol>'});a.a.add(s);t.default=s},DZB8g8kJ:function(e,t,r){e.exports=r.p+"images/logo3.16c79916.jpg"},"Dz/Pstls":function(e,t,r){"use strict";r.d(t,"a",function(){return p}),r.d(t,"c",function(){return d}),r.d(t,"b",function(){return g});var n,o,i=r("mrSGxOB2"),a=r("6SzIBtPz"),s=r("NOGqly5s"),u=r("4c1CS0b3"),c=r("s0r7VfKc"),l=function(e){return"TASKFLOW_STATUS/"+e},p={mounted:Object(a.a)(l("MOUNTED")),fetchTaskStatusesSuccess:Object(a.a)(l((o="FETCH_TASKFLOW_STATUSES",o+"/SUCCESS"))),fetchTaskStatusesFailure:Object(a.a)(l(function(e){return e+"/FAILURE"}("FETCH_TASKFLOW_STATUSES"))),unmount:Object(a.a)(l("UNMOUNT"))},f={taskflowStatuses:[]},d=Object(a.b)(((n={})[""+p.fetchTaskStatusesSuccess]=function(e,t){var r=t.payload.taskflowStatuses;return i.a({},e,{taskflowStatuses:r})},n[""+p.unmount]=function(){return f},n),f),g=Object(s.a)(function(e){return e.ofType(""+p.mounted).filter(function(e){return void 0!==e.payload}).switchMap(function(t){var r=t.payload.taskflowId;return c.default.getTaskflowStatuses(r).changes().takeUntil(e.ofType(""+p.unmount)).map(function(e){return p.fetchTaskStatusesSuccess({taskflowStatuses:e})}).catch(function(){return u.Observable.of(p.fetchTaskStatusesFailure)})})})},E7B48L3J:function(e,t,r){"use strict";var n=r("IssmDVnT");n.SDKFetch.prototype.getTaskflowStatus=function(e){return this.get("taskflowstatus/"+e)},n.SDKFetch.prototype.getTaskflowStatuses=function(e){return this.get("taskflows/"+e+"/taskflowstatus").map(function(e){return e.result})},n.SDK.prototype.getTaskflowStatus=function(e){return this.lift({cacheValidate:n.CacheStrategy.Request,request:this.fetch.getTaskflowStatus(e),tableName:"TaskflowStatus",query:{where:{_id:e}}})},n.SDK.prototype.getTaskflowStatuses=function(e){return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"TaskflowStatus",request:this.fetch.getTaskflowStatuses(e),query:{where:{_taskflowId:e},orderBy:[{fieldName:"pos",orderBy:"ASC"}]}})}},E86Oiqt3:function(e,t,r){var n,o,i,a={}.hasOwnProperty;o=r("a+N5u/Cl"),n=r("qHH6+g6Q"),i=r("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="collection",t.prototype.urlRoot="collections",t.prototype.defaults={objectType:"collection",_projectId:"",_creatorId:"",created:"",updated:"",title:"",color:"blue",description:"",workCount:0,collectionType:"",recentWorks:[]},t.prototype.parse=function(e){return"default"===(e=o.extend(this.toJSON(),e)).collectionType&&(e.title=tb_i18n.get("library.default.collection")),"root"===e.collectionType&&(e.title=tb_i18n.get("library.title")),e.subCount=e.workCount+(e.collectionCount||0),e},t.prototype.isDefault=function(){return"default"===this.get("collectionType")},t.prototype.isRoot=function(){return"root"===this.get("collectionType")},t.prototype.getParent=function(e,r){return null==r&&(r=[]),r.length>=10?Promise.resolve(r):e?new Promise((n=this,function(o,i){return t.fetch(e,{success:function(e){return r.unshift(e),n.getParent(e.get("_parentId"),r).then(function(){return o(r)})},error:i})})):Promise.resolve(r);var n},t.prototype.fetchParents=function(){var e;return t.fetchingPromise||(e=this.get("_parentId"),t.fetchingPromise=this.getParent(e).then(function(e){return t.fetchingPromise=null,Promise.resolve(e)}).catch(function(e){return t.fetchingPromise=null,i(e)})),t.fetchingPromise},t.prototype.moveToCollection=function(e,t){if(null==t&&(t={}),e!==this.id)return t.wait=!0,t.attrs={_parentId:e},this.saveAttr("move",null,t)},t.prototype.forkToCollection=function(e,t){var r;return null==t&&(t={}),r=Object.assign({url:this.url()+"/fork",attrs:{_parentId:e}},t),this.sync("update",this,r)},t}()},ESuIIMP0:function(e,t,r){"use strict";var n,o=r("mrSGxOB2"),i=r("a+N5u/Cl"),a=r.n(i),s=r("7JhjQgus"),u=r("Nxrdcgel"),c=r("NOGqly5s"),l=r("6SzIBtPz"),p=r("UoPU7bBH"),f=r("oRqJmROU"),d=r("4c1CS0b3"),g=r("gh8QIhMV"),h=r("sa1Ed382"),m=r("tLZJUYWX"),y=r.n(m),v=r("GESwhXbR"),b=r("s0r7VfKc"),_=r("IssmDVnT"),S=r("gNFMJi3i"),T=r("tXAzI2u6"),E=r("XIKSkjsA"),O=r("tpcZd+E6"),w=r.n(O),C=r("cUZYBCvT"),I=E.h.concat(E.b),k=function(e){var t=o.f(e,2),r=t[0],n=t[1];if(!r)return[r,n];var i=r.version,a=void 0===i?"0.0.0":i,s=r.cellDescriptors;return w()(a,"10.7.0-beta.0")<=0?[o.a({},r,{cellDescriptors:s.map(function(e){var t=I.find(function(t){return e.key===t.key}),r=t?t.width:E.o;return o.a({},e,{width:Math.max(r,e.width)})})}),n]:[r,n]},j=function(e){var t=o.f(e,2),r=t[0],n=t[1];if(!r)return[r,n];var i=E.h.find(function(e){return"status"===e.key}),s=[E.h.find(function(e){return"name"===e.key}),i],u=r.cellDescriptors,c=r.columnOrder,l=s.map(function(e){return e.key});return 0===u.filter(function(e){var t=e.key;return a.a.contains(l,t)}).length?[o.a({},r,{cellDescriptors:a.a.uniq(s.concat(u),function(e){return Object(S.e)(e)}),columnOrder:a.a.uniq(l.concat(c))}),n]:[r,n]},A=["creator","created"],P=E.h.filter(function(e){var t=e.key;return A.indexOf(t)>=0}),R=function(e){var t=o.f(e,2),r=t[0],n=t[1];if(!r)return[r,n];var i=r.version,s=void 0===i?"0.0.0":i,u=r.columnOrder,c=r.cellDescriptors;return w()(s,"10.11.0-beta.0")<=0?[o.a({},r,{cellDescriptors:a.a.uniq(P.concat(c),function(e){return Object(S.e)(e)}),columnOrder:a.a.uniq(u.concat(A))}),n]:[r,n]},N=function(e){var t=o.f(e,2),r=t[0],n=t[1];if(!r)return[r,n];var i=r.columnOrder,s=["name","status"],u=i.filter(function(e){return!a.a.contains(s,e)});return u.unshift.apply(u,o.h(s)),[o.a({},r,{columnOrder:u}),n]},x=function(e){var t=o.f(e,2),r=t[0],n=t[1];if(!r)return[r,n];var i=r.version,s=void 0===i?"0.0.0":i,u=r.columnOrder,c=r.cellDescriptors,l=!Object(S.l)(n);if(w()(s,"10.14.0")<0&&l){var p=E.h.find(function(e){return"projecttags"===e.key}),f=Math.max(u.indexOf("name"),0);return u.splice(f,0,p.key),[o.a({},r,{cellDescriptors:a.a.uniq(c.concat([p]),function(e){return Object(S.e)(e)}),columnOrder:a.a.uniq(u)}),n]}return[r,n]},D=function(e){var t=o.f(e,2),r=t[0],n=t[1];if(!r)return[r,n];var i=r.columnOrder,a=r.cellDescriptors;return[o.a({},r,{columnOrder:i.filter(function(e){return"subordinateProjecttags"!==e}),cellDescriptors:a.filter(function(e){return"subordinateProjecttags"!==e.key})}),n]},M=["suspendedAt","suspendedBy"],F=E.h.filter(function(e){var t=e.key;return M.indexOf(t)>=0}),L=["startDate","endDate"],B=E.h.filter(function(e){var t=e.key;return L.indexOf(t)>=0}),U=a.a.compose(function(e){var t=o.f(e,2),r=t[0],n=t[1];if(!r)return[r,n];var i=r.cellDescriptors,a=i.find(function(e){return"status"===e.key});return a.width<E.a||a.minWidth<E.a?[o.a({},r,{cellDescriptors:i.map(function(e){return"status"===e.key?o.a({},e,{width:Math.max(e.width,E.a),minWidth:Math.max(e.minWidth,E.a)}):e})}),n]:[r,n]},function(e){var t=o.f(e,2),r=t[0],n=t[1];if(!r)return[r,n];var i=Object(S.l)(n),s=r.version,u=void 0===s?"0.0.0":s,c=r.cellDescriptors;if(w()(u,"10.17.0")<0){var l=c;if(i&&n===C.a.Suspended){var p=o.f(c),f=p[0],d=p[1],g=p.slice(2);l=o.h([f,d],F,g)}return l=a.a.uniq(l.concat(B),function(e){return Object(S.e)(e)}),[o.a({},r,{cellDescriptors:l,columnOrder:Object(S.f)(l)}),n]}return[r,n]},k,j,R,N,x,D,function(e){var t=o.f(e,2),r=t[0],n=t[1];if(!r)return[r,n];var i=Object(S.l)(n),a=r.columnOrder,s=r.cellDescriptors;return i?[o.a({},r,{columnOrder:a.filter(function(e){return"projecttags"!==e}),cellDescriptors:s.filter(function(e){return"projecttags"!==e.key})}),n]:[r,n]},D,x,N,R,j,k),G=function(e,t){var r=e.getNode(t);return!!r&&!!r.get("hideChild")};r.d(t,"a",function(){return K}),r.d(t,"c",function(){return W}),r.d(t,"b",function(){return Q});var q=function(e){return"PROJECT_CLUSTER/"+e},z=function(e){return q(e+"/SUCCESS")},V=function(e){return q(e+"/FAILURE")},K={mount:Object(l.a)(q("MOUNT")),fetchProjectClusterView:Object(l.a)(q("FETCHE_PROJECT_CLUSTER_VIEW")),fetchProjectClusterViewSuccess:Object(l.a)(z("FETCHE_PROJECT_CLUSTER_VIEW")),fetchProjectClusterViewFailure:Object(l.a)(V("FETCHE_PROJECT_CLUSTER_VIEW")),configureCellDescriptor:Object(l.a)(q("CONFIGURE_CELL_DESCRIPTOR")),addColumn:Object(l.a)(q("ADD_COLUMN")),columnResort:Object(l.a)(q("COLUMN_RESORT")),columnToggle:Object(l.a)(q("COLUMN_TOGGLE")),sortTable:Object(l.a)(q("SORT_TABLE")),setPage:Object(l.a)(q("SET_PAGE")),updateCustomFieldValues:Object(l.a)(q("UPDATE_CUSTOM_FIELD_VALUES")),batchAddCustomFields:Object(l.a)(q("BATCH_ADD_CUSTOM_FIELDS")),batchAddCustomFieldsSuccess:Object(l.a)(z("BATCH_ADD_CUSTOM_FIELDS")),batchAddCustomFieldsFailure:Object(l.a)(V("BATCH_ADD_CUSTOM_FIELDS")),updateProjects:Object(l.a)(q("UPDATE_PROJECTS")),fullScreenToggle:Object(l.a)(q("FULL_SCREEN_TOGGLE")),fetchSyncPermissionSuccess:Object(l.a)(z("FETCH_PERMISSION_SYNC_SUCCESS")),resetPageSize:Object(l.a)(q("RESET_PAGE_SIZE")),setCache:Object(l.a)(q("SET_CACHE")),requestCacheSuccess:Object(l.a)(z("REQUEST_CACHE")),listenProjects:Object(l.a)(q("LISTEN_PROJECTS")),unmount:Object(l.a)(q("UNMOUNT"))};function H(e,t,r){var n=e.cellDescriptors.filter(function(e){return!!e.customFieldEntity}),i=(t.customfield?o.h(t.customfield):[]).map(function(e,t){var i=n[t];if(!i)return e;var a=i.customFieldEntity._id,s=r.find(function(e){return e.id===a});return s?o.a({},e,{value:s.value}):e});return o.a({},t,{customfield:i})}var W=Object(l.b)(((n={})[""+K.mount]=function(e,t){var r,n=t.payload.viewId,i=!Object(S.l)(n);return o.a({},e,((r={})[n]=o.a({},Object(S.h)(i,n),{loading:!0}),r))},n[""+K.requestCacheSuccess]=function(e,t){var r;if(!t.payload||!t.payload.viewCache)return e;var n=t.payload,i=n.viewId,a=n.viewCache,s=e[i]||{projects:[],pageSize:E.k};return o.a({},e,((r={})[t.payload.viewId]=o.a({},s,a,{loading:!0}),r))},n[""+K.fetchProjectClusterViewSuccess]=function(e,t){var r;return t.payload?o.a({},e,((r={})[t.payload.viewId]=o.a({},t.payload.projectClusterView,{loading:!1}),r)):e},n[""+K.configureCellDescriptor]=function(e,t){var r;if(!t.payload)return e;var n=t.payload,i=n.viewId,s=n.cellDescriptors,u=Object(S.g)(s),c=e[i],l=c.cellDescriptors,p=[],f=l.map(function(e){var t=u[Object(S.e)(e)];return t||e}).filter(function(e){var t=!("customfield"===e.key&&e.hidden);return t||p.push(Object(S.e)(e)),t}),d=p.length?c.columnOrder.filter(function(e){return!a.a.contains(p,e)}):c.columnOrder,g=p.length?c.projects.map(function(e){if(e.customfield){var t=e.customfield.filter(function(e){return-1===p.indexOf(e._customfieldId)});return o.a({},e,{customfield:t})}return e}):c.projects,h=o.a({},e[i],{projects:g,cellDescriptors:f,columnOrder:d});return o.a({},e,((r={})[i]=h,r))},n[""+K.columnResort]=function(e,t){var r;if(!t.payload)return e;var n=t.payload,i=n.oldIndex,a=n.newIndex,s=n.viewId,c=e[s],l=c.cellDescriptors.filter(function(e){return e.unDraggable}).length,p=o.a({},c,{columnOrder:Object(u.arrayMove)(c.columnOrder,i+l,a+l)});return o.a({},e,((r={})[s]=p,r))},n[""+K.addColumn]=function(e,t){var r;if(!t.payload||!t.payload.cellDescriptors.length)return e;var n=t.payload,i=n.viewId,s=n.cellDescriptors,u=e[i],c=s.map(function(e){return Object(S.b)(e.customFieldEntity)}),l=a.a.uniq(u.cellDescriptors.concat(c),function(e){return Object(S.e)(e)}),p=a.a.uniq(u.columnOrder.concat(c.map(function(e){return Object(S.e)(e)}))),f=o.a({},u,{cellDescriptors:l,columnOrder:p});return o.a({},e,((r={})[i]=f,r))},n[""+K.sortTable]=function(e,t){var r;if(!t.payload)return e;var n=o.a({},e[t.payload.viewId],{sortBy:t.payload.sortBy});return o.a({},e,((r={})[t.payload.viewId]=n,r))},n[""+K.setPage]=function(e,t){var r;if(!t.payload)return e;var n=o.a({},e[t.payload.viewId],{currentPage:t.payload.page});return o.a({},e,((r={})[t.payload.viewId]=n,r))},n[""+K.fullScreenToggle]=function(e,t){var r;if(!t.payload)return e;var n=e[t.payload.viewId];if(!n)return e;var i=n.cellDescriptors.map(function(e){return t.payload.full?Object(S.m)(e,E.f,E.c,E.e):Object(S.o)(e,E.f,E.g,E.l)}),a=o.a({},n,{cellDescriptors:i,fullScreen:t.payload.full,pageSize:t.payload.full?n.pageSize:E.k,currentPage:1});return o.a({},e,((r={})[t.payload.viewId]=a,r))},n[""+K.updateCustomFieldValues]=function(e,t){if(!t.payload)return e;var r=t.payload,n=r.projectId,i=r.customFieldValues;return a.a.chain(e).keys().reduce(function(t,r){var a=e[r],s=a.projects.map(function(e){return n===e._id?H(a,e,Object(S.i)(i)):e}),u=o.a({},a,{projects:s});return t[r]=o.a({},u),t},a.a.extend({},E.i)).value()},n[""+K.updateProjects]=function(e,t){var r;if(!t.payload)return e;var n=t.payload,i=n.projectTagId,s=n.projects,u=e[i];if(!u)return e;var c=u.projects.map(function(e){var t=s.find(function(t){return t._id===e._id});return t?o.a({},H(u,e,Object(S.i)(t.customfields)),a.a.pick(t,"name","logo","created","updated","pinyin"),Object(S.j)(t.statusDegree)):e}),l=o.a({},u,{projects:c});return o.a({},e,((r={})[i]=l,r))},n[""+K.fetchSyncPermissionSuccess]=function(e,t){var r;if(!t.payload)return e;var n=t.payload,i=n.hasPermission,a=n.projectTagId,s=e[a];if(!s)return e;var u=o.a({},s,{syncPermission:i});return o.a({},e,((r={})[a]=u,r))},n[""+K.resetPageSize]=function(e,t){var r;if(!t.payload)return e;var n=t.payload,i=n.viewId,a=n.pageSize,s=e[i];if(!s)return e;var u=o.a({},s,{pageSize:a});return o.a({},e,((r={})[i]=u,r))},n),E.i);function J(e,t,r,n,i,s,u){var c=e?o.a({},e):o.a({},Object(S.h)(s,u));return r&&(c.projects=r),n&&(c.projects=Object(S.a)(c.projects,n.result),c.cellDescriptors=function(e,t,r){var n=t.map(function(e){return e._id});return e.filter(function(e){return!r||!e.customFieldEntity||a.a.contains(n,e.customFieldEntity._id)}).map(function(e){var r=t.find(function(t){var r=t._id;return Object(S.e)(e)===r});return r?o.a({},e,{customFieldEntity:o.a({},r),loading:!1}):e})}(c.cellDescriptors,n.infos,t),c.columnOrder=function(e,t,r){return e.filter(function(e){return!(r&&24===e.length&&!t.find(function(t){var r=t._id;return e===r}))})}(c.columnOrder,n.infos,t)),a.a.isNull(i)||(c.syncPermission=i),c}var Q=Object(c.a)(function(e){return e.ofType(""+K.mount).filter(f.a).groupBy(function(e){return e.payload.viewId}).mergeMap(function(t){return t.switchMap(function(t){var r=t.payload,n=r.viewId,i=r.organizationId,a=e.ofType(""+K.unmount).filter(f.a).filter(function(e){return e.payload.viewId===n});return Object(T.e)(i,n).take(1).takeUntil(a).concatMap(function(e){var t=[];e&&(t=e.cellDescriptors.filter(function(e){return e.loading&&e.customFieldEntity}).map(function(e){return e.customFieldEntity._id}));var r=o.f(U([e,n]),1)[0],a=[K.requestCacheSuccess({viewId:n,viewCache:r}),K.fetchProjectClusterView({viewId:n,organizationId:i,customFields:t,checkTitle:!0})];return d.Observable.from(a)})})}).catch(function(e){return Object(g.throwError)(e),d.Observable.of({type:"error"})})},function(e,t){return e.ofType(""+K.fetchProjectClusterView).filter(f.a).groupBy(function(e){return e.payload.viewId}).mergeMap(function(r){return r.switchMap(function(r){var n=r.payload,i=n.organizationId,a=n.customFields,s=n.customFieldOnly,u=n.viewId,c=n.hideChild,l=a&&a.length,p=d.Observable.of(null),f=Object(S.l)(u),h=f?void 0:u,m=f?f?u:void 0:"projecttag",b=a||[],_=!c;if(void 0===c&&h){var E=t.getState().ui.organizationPortal.projectTree;_=!G(E,h)}var O=s?p:Object(T.b)(i,m,_,h).do(function(e){e.queryOverflow&&v.Toast.warning(y.a.get("project.cluster.query.overflow.warning"))}).map(function(e){return e.result}),w=l?Object(T.c)(i,b,m,_,h):p,C=!s&&h?Object(T.d)(h):p,I=e.ofType(""+K.unmount).filter(function(e){return!!e.payload&&e.payload.viewId===u});return d.Observable.combineLatest(O,w,C).takeUntil(I).map(function(e){var r=o.f(e,3),i=r[0],a=r[1],s=r[2];return i||a?J(t.getState().ui.projectClusterViews[u],!!n.checkTitle,i,a,s,!!h,u):null}).filter(function(e){return null!==e}).concatMap(function(e){return d.Observable.from([K.fetchProjectClusterViewSuccess({projectClusterView:e,viewId:n.viewId}),K.listenProjects({viewId:n.viewId,projects:e.projects})])}).catch(function(e){return Object(g.throwError)(e),d.Observable.of(K.fetchProjectClusterViewFailure())})})})},function(e,t){return e.ofType(""+K.columnToggle).filter(f.a).groupBy(function(e){return e.payload.viewId}).mergeMap(function(e){return e.debounceTime(100).switchMap(function(e){var r=e.payload,n=r.viewId,o=t.getState().ui.projectClusterViews[n],i=[],a=[];r.cellDescriptors.forEach(function(e){o.cellDescriptors.find(function(t){return Object(S.e)(t)===Object(S.e)(e)})?i.push(e):a.push(e)});var s=a.concat(i.filter(function(e){return e.loading})).map(function(e){return e.customFieldEntity._id}),u=[];return a.length&&u.push(K.addColumn({viewId:n,cellDescriptors:a})),u.push(K.configureCellDescriptor({viewId:n,cellDescriptors:r.cellDescriptors})),u.push(K.fetchProjectClusterView({viewId:n,customFields:s,organizationId:r.organizationId,customFieldOnly:!0})),s.length&&v.Toast.success({message:y.a.get("add.success")}),d.Observable.from(u)})})},function(e,t){return e.ofType(""+K.setCache).filter(f.a).debounceTime(1e3).switchMap(function(){var e=t.getState().ui.projectClusterViews,r=t.getState().ui.organizationPortal._organizationId;return Object(T.f)(r,e)}).filter(function(){return!1}).catch(function(e){return Object(g.throwError)(e),d.Observable.of({type:"error"})})},function(e,t){return e.ofType(""+K.batchAddCustomFields).filter(f.a).groupBy(function(e){return e.payload.projectTagId}).mergeMap(function(r){return r.switchMap(function(r){var n=r.payload,o=n.projectTagId,i=n.customFieldIds,a=e.ofType(""+K.unmount).filter(function(e){return e.payload&&e.payload.viewId===o}),s=t.getState().ui.organizationPortal.projectTree,u=!G(s,o);return Object(T.a)(o,i,u).takeUntil(a).map(K.batchAddCustomFieldsSuccess).do(function(){h.gta.event({action:"added project field success",method:"trace",page:"Organization Page",segment:"project table view",control:"project table setting"}),v.Toast.success({message:y.a.get("add.success")})}).catch(function(e){return Object(g.throwError)(e),h.gta.event({action:"added project field failed",method:"trace",page:"Organization Page",segment:"project table view",control:"project table setting"}),v.Toast.error({message:y.a.get("project.cluster.add.customfield.failure")}),d.Observable.of(K.batchAddCustomFieldsFailure())})})})},function(e){return e.ofType(""+s.a.putTagMemberPermissionsSuccess).filter(f.a).groupBy(function(e){return e.payload.projecttag._id}).mergeMap(function(e){return e.switchMap(function(e){var t=e.payload.projecttag._id;return Object(T.d)(t).map(function(e){return K.fetchSyncPermissionSuccess({projectTagId:t,hasPermission:e})}).catch(function(e){return Object(g.throwError)(e),d.Observable.of({type:"error"})})})})},function(e,t){return e.ofType(""+K.mount).groupBy(function(e){return e.payload.viewId}).mergeMap(function(r){return r.switchMap(function(r){var n=r.payload.viewId,o=e.ofType(""+s.a.setChildProjectsVisible).filter(f.a).filter(function(e){return e.payload.projectTagId===n}),i=e.ofType(""+K.unmount).filter(function(e){var t=e.payload;return n===t.viewId});return o.takeUntil(i).switchMap(function(e){var r=e.payload,n=r.projectTagId,o=r.hideChild,i=t.getState().ui,a=i.organizationPortal._organizationId,s=i.projectClusterViews[n];if(!a||!s)return d.Observable.of(Object(p.a)());var u=s.cellDescriptors.filter(function(e){return e.customFieldEntity}).map(function(e){return e.customFieldEntity._id});return d.Observable.of(K.fetchProjectClusterView({viewId:n,organizationId:a,customFields:u,checkTitle:!0,hideChild:o}))})})})},function(e){return e.ofType(""+K.listenProjects).filter(f.a).groupBy(function(e){return e.payload.viewId}).mergeMap(function(t){return t.switchMap(function(t){var r=t.payload,n=r.projects,o=r.viewId,i=e.ofType(""+K.unmount).filter(function(e){return!!e.payload&&e.payload.viewId===o});return b.default.lift({cacheValidate:_.CacheStrategy.Request,tableName:"Project",request:d.Observable.of([]),query:{where:{_id:{$in:n.map(function(e){return e._id})}},fields:["_id","name","logo","updated","pinyin","customfields","suspendedBy","suspendedAt","startDate","endDate","statusDegree"]}}).changes().takeUntil(i).debounceTime(500).map(function(e){return K.updateProjects({projectTagId:o,projects:e})})})})},function(e){return e.ofType(""+K.configureCellDescriptor,""+K.sortTable,""+K.columnResort).debounceTime(500).map(K.setCache).catch(function(e){return Object(g.throwError)(e),d.Observable.of({type:"error"})})})},EU9jWpLq:function(e,t){},EVgboMlz:function(e,t,r){e.exports={"range-input":"range-input__3cbJ"}},EWQzZJIA:function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"c",function(){return s}),r.d(t,"a",function(){return u});var n=r("HYobN8SQ"),o=n.namespace("currentCustomView"),i=function(e,t){return e+"_"+t},a=function(e,t){var r=i(e,t);return o.get(r,null)},s=function(e,t,r){var n=i(t,r);o.set(n,e)},u=function(e,t){var r=i(e,t);o.remove(r)}},EXoLhZ0Z:function(e,t,r){"use strict";r.d(t,"b",function(){return s}),r.d(t,"c",function(){return c}),r.d(t,"a",function(){return f});var n=r("zT6SYcu2"),o=n.c.le,i=n.c.ge,a=n.c.eq;function s(e){return e.op===n.c.in?e.value.value.map(function(e){return e.value}):e.value.value}function u(e){return e.values?e.values:[]}function c(e){return u(e).map(s)}function l(e){var t=u(e);return t.filter(function(e){return"text"===e.field.value}).length>0?["activityContent","title","content"]:t.map(function(e){return e.field.value})}function p(e,t){var r=u(e).filter(function(e){return e.op===t})[0];return r?r.value.value:null}function f(e,t){if(!e)return function(e){switch(e){case n.f.Select:case n.f.MultiSelect:return{values:[]};case n.f.RangeText:return{values:[],q:""};case n.f.Number:case n.f.Date:return{min:null,max:null,relative:void 0};case n.f.Text:case n.f.StrictText:return{value:""};default:return{values:[]}}}(t);switch(t){case n.f.RangeText:return{values:l(e),q:""};case n.f.Text:case n.f.StrictText:var r=u(e).map(function(e){return e.value})[0];return r?'"'===r.quote?{value:'"'+r.value+'"'}:{value:r.value}:{value:""};case n.f.Number:case n.f.Date:return{min:p(e,i),max:p(e,o),relative:p(e,a)};default:return{values:c(e)}}}},"EaRYHo/L":function(e,t,r){"use strict";r.d(t,"a",function(){return g}),r.d(t,"b",function(){return h});var n,o=r("mrSGxOB2"),i=r("M6knRl17"),a=r("tLZJUYWX"),s=r("6SzIBtPz"),u=r("NOGqly5s"),c=r("GESwhXbR"),l=r("G5hTTzDg"),p=r("nMjh9H6T"),f=r("bZr3G77e"),d=function(e){return"PROJECT_EXPORT_MODAL/"+e},g={getProjectExport:Object(s.a)(d("GET_PROJECT_EXPORT")),getProjectExportSuccess:Object(s.a)((n="GET_PROJECT_EXPORT",d(n+"/SUCCESS"))),getProjectExportFailed:Object(s.a)(function(e){return d(e+"/FAILURE")}("GET_PROJECT_EXPORT"))},h=Object(u.a)(function(e){return e.ofType(""+g.getProjectExport).filter(function(e){return void 0!==typeof e.payload}).switchMap(function(e){var t=e.payload;c.Toast.success({message:a.get("search.export.start.download")});var r=t,n=r.fields,s=void 0===n?[]:n,u=o.g(r,["fields"]);return Object(l.a)("tis/export/resources",o.a({},u,{fields:s.map(p.d).join(","),timezone:f.timezone()})).map(g.getProjectExportSuccess).catch(function(e){return~e.indexOf("NoPermission")?c.Toast.error(a.get("tasklist.dump.export.error.no.permission")):c.Toast.error(a.get("tasklist.dump.export.error")),i.Observable.of(g.getProjectExportFailed())})})})},EcZ0z2mK:function(e,t,r){"use strict";var n,o;r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o}),function(e){e.WorkItem="workitem",e.App="app",e.Cr="cr",e.Sprint="sprint",e.TestJob="testjob",e.TestCase="testcase",e.Doc="doc"}(n||(n={})),function(e){e.WorkItem="workitem",e.App="app",e.Cr="cr",e.Sprint="sprint",e.TestJob="testjob",e.TestCase="testcase",e.Doc="doc"}(o||(o={}))},Egn3IaiG:function(e,t,r){},Eh9DeT6B:function(e,t,r){e.exports=r.p+"images/events-2.3fe3fa89.png"},EiUFTky8:function(e,t,r){"use strict";r.r(t);var n,o=r("mrSGxOB2"),i=function(e,t){return!(!e._organizationId||!(t.length>1||t[0]&&t[0].displayed))},a=function(e){return void 0!==e.name};!function(e){e[e.Up=-1]="Up",e[e.Down=2]="Down"}(n||(n={}));var s=function(e,t,r,i){void 0===t&&(t={}),void 0===r&&(r=[]);var c=e.filter(function(e){return!a(e.entity)}).length;return e.reduce(function(l,p,f){var d=e[f+n.Down],g=e[f+n.Up],h=d&&!a(d.entity)?d.entity._id:null,m=g&&!a(g.entity)?g.entity._id:null;return p=o.a({},p,{parent:i,indexes:r.concat(f),total:c,nextId:h,prevId:m}),l.push(p),t[p.entity._id]&&(p.pseudoBefore&&l.push(u(p.pseudoBefore,p)),p.children&&l.push.apply(l,o.h(s(p.children,t,p.indexes,p))),p.pseudoAfter&&l.push(u(p.pseudoAfter,p))),l},[])},u=function(e,t){return o.a({},e,{parent:t,indexes:(t.indexes||[]).concat(-1),isPseudo:!0})},c=function(e){return e.customField?e.customField._customfieldId:e.key},l=function(e,t){return e.reduce(function(e,r,n){return t(e,r,n),e},new Map)};function p(e){return"pseudo-after"===e.objectType}var f,d=r("O3GlWwSR"),g=function(e,t){return!e&&!t||!(!e||!t)&&(e.length===t.length&&e.every(function(e,r){return e===t[r]}))},h=r("OcUPLOSr"),m=r("3eMzznN/"),y=function(e,t,r,n){return Object(m.mergeSort)(e.map(function(e){return e.children?o.a({},e,{children:y(e.children,t,r,n)}):e}),function(e,i){var a;return n===h.SortOrder.DESC&&(e=(a=o.f([i,e],2))[0],i=a[1]),t(e.entity,i.entity,r)<=0})},v=r("a+N5u/Cl"),b=r.n(v),_=r("oRqJmROU");!function(e){e[e.Low=2e10]="Low",e[e.Mid=2e8]="Mid",e[e.High=0]="High"}(f||(f={}));var S={cannotHide:!1,fixed:!1,headHeight:40,height:36,hidden:!0,minWidth:52,sortable:!0,width:300},T=[{key:"content",width:300,sortIndex:f.High+0,cannotHide:!0,fixed:!0,minWidth:200},{key:"scenarioFieldConfig",width:150,sortIndex:f.High+1,hidden:!1},{key:"isDone",width:110,sortIndex:f.High+2,hidden:!1,minWidth:40,sortable:!1},{key:"parent",width:200,sortIndex:f.High+2,hidden:!1,minWidth:100},{key:"stage",width:150,sortIndex:f.High+3,hidden:!1},{key:"_taskflowstatusId",width:150,sortIndex:f.High+3,hidden:!1},{key:"executor",width:150,sortIndex:f.High+4,hidden:!1,minWidth:48},{key:"startDate",width:150,sortIndex:f.High+5,hidden:!1,factor:{type:h.FactorType.PLUGIN,name:"startDate"}},{key:"dueDate",width:150,sortIndex:f.High+6,hidden:!1},{key:"recurrence",width:150,sortIndex:f.High+7,sortable:!1},{key:"reminder",width:150,sortIndex:f.High+8,sortable:!1},{key:"involveMembers",width:200,sortIndex:f.Low,sortable:!1},{key:"likesCount",width:110,sortIndex:f.Low},{key:"creator",width:150,sortIndex:f.Low},{key:"created",width:150,sortIndex:f.Low},{key:"accomplished",width:150,sortIndex:f.Low,sortable:!1},{key:"updated",width:150,sortIndex:f.Low},{key:"sprint",width:110,factor:{type:h.FactorType.SCENARIO,name:"sprint"}},{key:"note",width:300,hidden:!1,factor:{type:h.FactorType.SCENARIO,name:"note"}},{key:"priority",width:110,hidden:!1,factor:{type:h.FactorType.SCENARIO,name:"priority"}},{key:"tagIds",width:200,hidden:!1,factor:{type:h.FactorType.SCENARIO,name:"tag"},sortable:!1},{key:"workTime",width:300,factor:{type:h.FactorType.SCENARIO,name:"worktimes"}},{key:"uniqueId",width:110,factor:{type:h.FactorType.PLUGIN,name:"taskUniqueId"}},{key:"storyPoint",width:110,factor:{type:h.FactorType.SCENARIO,name:"storyPoint"}},{key:"progress",width:110,factor:{type:h.FactorType.SCENARIO,name:"taskProgress"}}],E=T.reduce(function(e,t){return e.set(t.key,t)},new Map),O=function(e,t){void 0===t&&(t=[]);var r=e.map(function(e,t){var r=E.get(e);return r?o.a({},r,{hidden:!1,sortIndex:t+1}):null}).filter(_.c),n=T.reduce(function(e,n,i){return v.includes(t,n.key)?e:e.concat(o.a({},n,{hidden:!0,sortIndex:"number"==typeof n.sortIndex?f.High+r.length-1+i:f.Mid+i}))},[]);return v.uniq(o.h(r,n),function(e){return e.key})},w=O(["content","uniqueId","executor","parent","_taskflowstatusId","sprint","dueDate","storyPoint","priority","note","tagIds"],["stage","isDone"]),C=O(["content","uniqueId","executor","parent","_taskflowstatusId","sprint","dueDate","storyPoint","priority","note","tagIds"],["stage","isDone"]),I=v.uniq(o.h(w,C),function(e){return e.key}),k=O(["content","uniqueId","executor","parent","_taskflowstatusId","sprint","dueDate","storyPoint","priority","note","tagIds"],["isDone"]),j={date:{width:150},dropDown:{width:200},multipleChoice:{width:200,sortable:!1},number:{width:110},text:{width:300},lookup:{width:300},commongroup:{width:300},work:{width:150}},A=r("RSFv0j4e"),P=function(e,t){return Object(A.a)(e.accomplished&&new Date(e.accomplished).getTime(),t.accomplished&&new Date(t.accomplished).getTime())},R=function(e){var t=e.accomplished,r=t&&Object(m.formatDate)(t,{isUsePref:!0});return r&&r.dateString},N=function(e,t){return Object(A.a)(e&&e.created&&new Date(e.created).getTime(),t&&t.created&&new Date(t.created).getTime())},x=function(e){var t=e.created,r=t&&Object(m.formatDate)(t,{isUsePref:!0});return r&&r.dateString},D=function(e,t){var r=e&&e.creator&&(e.creator.pinyin||e.creator.name),n=t&&t.creator&&(t.creator.pinyin||t.creator.name);return Object(A.a)(r&&r.trim(),n&&n.trim())},M=function(e,t){return Object(A.a)(e.content.trim(),t.content.trim())},F=r("tLZJUYWX"),L=r("V6edIaEd");function B(e){var t=Object(L.getSingleValue)(e);switch(e.type){case"text":case"number":return t;case"date":return t&&m.formatDate(t,{isUsePref:!0}).dateString;case"dropDown":return Object(L.getLegacySingleValue)(e,e.choices)||"";case"multipleChoice":case"lookup":return Object(L.getMultiValue)(e,e.choices).join(F.get("comma"));case"commongroup":return Object(L.getCommonGroupChoiceValue)(e,e);case"work":var r=e.value.length;return F.get("library.works.count",r)}}var U=function(e){return B(e)||null};var G,q=function(e,t){var r=e.customfields.find(function(e){return e._customfieldId===t});return r&&function(e){var t=Object(L.getSingleValue)(e);switch(e.type){case"number":return t&&parseFloat(t);case"date":return t&&new Date(t).getTime();default:return B(e)}}(r)||null},z=function(e,t,r){return Object(A.a)(q(e,r),q(t,r))},V=function(e){var t=e.dueDate;return t&&m.formatDate(t,{isUsePref:!0})},K=function(e,t){return Object(A.a)(e.dueDate&&new Date(e.dueDate).getTime(),t.dueDate&&new Date(t.dueDate).getTime())},H=function(e,t){var r=e.executor,n=t.executor,o=r&&(r.pinyin||r.name),i=n&&(n.pinyin||n.name);return Object(A.a)(o&&o.trim(),i&&i.trim())},W=function(e,t){return Object(A.a)(e.likesCount,t.likesCount)},J=function(e){var t=e.note;return(t=(t||"").trim())&&window._encodeHTML(t,"md",{sanitize:!1},{ALLOWED_TAGS:["a"]})},Q=function(e,t){return Object(A.a)(e.note&&e.note.trim(),t.note&&t.note.trim())},Y=r("fpIMfP/U"),X=function(e){var t=e.priority;return F.get(Y.a[t].title)},$=function(e,t){return Object(A.a)(e.priority,t.priority)},Z=function(e,t){return Object(A.a)(e.progress,t.progress)},ee=r("HHtVDBJc"),te=function(e){var t=e.recurrence,r=ee.getRRuleSet(t);return r&&ee.freq2Title(r)},re=function(e,t){return Object(A.a)(te(e),te(t))},ne=function(e,t){return Object(A.a)(e.reminderParsed,t.reminderParsed)},oe=function(e,t){var r=e.scenarioFieldConfig,n=t.scenarioFieldConfig;return Object(A.a)(r&&r.name,n&&n.name)},ie=function(e,t){var r=e.sprint,n=t.sprint;return Object(A.a)(r&&r.name,n&&n.name)},ae=function(e,t){var r=e.stage,n=t.stage;return Object(A.a)(r&&r.order,n&&n.order)},se=function(e){var t=e.startDate,r=t&&m.formatDate(t,{isUsePref:!0});return r&&r.dateString},ue=function(e,t){return Object(A.a)(e.startDate&&new Date(e.startDate).getTime(),t.startDate&&new Date(t.startDate).getTime())},ce=function(e,t){return Object(A.a)(e.isDone,t.isDone)},le=function(e,t){return Object(A.a)(e.storyPoint&&parseFloat(e.storyPoint),t.storyPoint&&parseFloat(t.storyPoint))},pe=function(e,t){var r=e.taskflowstatus,n=t.taskflowstatus;return Object(A.a)(r&&r.pos,n&&n.pos)};!function(e){e[e.MINUTE=60]="MINUTE"}(G||(G={}));var fe=function(e){var t=e.workTime;if(!t||!t.totalTime&&!t.usedTime)return null;var r=t.totalTime,n=t.usedTime;switch(t.unit){case"minute":r/=G.MINUTE,n/=G.MINUTE}return r?F.get("task.worktime.summary",r,n):F.get("task.worktime.summary.totalTime.initial",n)},de=function(e,t){var r=e.workTime,n=t.workTime;return r&&n?r.totalTime===n.totalTime?Object(A.a)(r.usedTime,n.usedTime):Object(A.a)(r.totalTime,n.totalTime):Object(A.a)(!!r,!!n)},ge=function(e,t){return Object(A.a)(e.uniqueId,t.uniqueId)},he=function(e,t){return Object(A.a)(e.updated&&new Date(e.updated).getTime(),t.updated&&new Date(t.updated).getTime())},me=function(e){var t=e.updated,r=t&&Object(m.formatDate)(t,{isUsePref:!0});return r&&r.dateString},ye=function(e){var t=e.followers;return t?t.map(function(e){return e.name}).filter(function(e){return!!e}).join(F.get("comma")):null},ve={_executorId:H,_stageId:ae,_taskflowstatusId:pe,accomplished:P,content:M,created:N,creator:D,customfields:z,dueDate:K,executor:H,isDone:ce,likesCount:W,note:Q,priority:$,progress:Z,recurrence:re,reminder:ne,scenarioFieldConfig:oe,sprint:ie,stage:ae,startDate:ue,storyPoint:le,uniqueId:ge,updated:he,workTime:de},be=function(e,t){return e.length>t?e.slice(0,t-"".length)+"":e},_e=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||""},Se=r("CrgVhEYo"),Te=r("HDJEOtNh"),Ee=r("gh8QIhMV"),Oe=r("zDJ6609A");function we(e,t,r){switch(e&&e.type){case null:case void 0:return;case"story":if(!("commongroup"===t.type&&"story"===t.subtype))return;var n=r.find(function(e){return"sprint"===e.key});return n&&n.sortIndex;case"bug":case"sprint":default:return}}r.d(t,"entitiesToRows",function(){return Ce}),r.d(t,"rowsToEntities",function(){return Ie}),r.d(t,"rowsAndChildrenToEntities",function(){return ke}),r.d(t,"rowsAndChildren",function(){return je}),r.d(t,"isSubtask",function(){return Ae}),r.d(t,"hasSubtasks",function(){return Pe}),r.d(t,"getAllChildrenRows",function(){return Re}),r.d(t,"composeTableViewAppId",function(){return Ne}),r.d(t,"composeCellDescriptorList",function(){return xe}),r.d(t,"pickCellDescriptorIdentity",function(){return De}),r.d(t,"pickCellDescriptorSnippet",function(){return Me}),r.d(t,"defaultCellDescriptorListByAppName",function(){return Fe}),r.d(t,"checkTaskTableFeature",function(){return Le}),r.d(t,"displayScenarioFieldConfig",function(){return i}),r.d(t,"flatten",function(){return s}),r.d(t,"getColumnKey",function(){return c}),r.d(t,"mapify",function(){return l}),r.d(t,"isTaskPseudoAfter",function(){return p}),r.d(t,"shallowEqual",function(){return d.a}),r.d(t,"shallowEqualArray",function(){return g}),r.d(t,"sortRows",function(){return y}),r.d(t,"ColumnPriorityDatum",function(){return f}),r.d(t,"DEFAULT_CELL_DESCRIPTOR",function(){return S}),r.d(t,"SYSTEM_FIELD_DEFAULT_CELL_DESCRIPTOR_LIST",function(){return T}),r.d(t,"SYSTEM_FIELD_DEFAULT_CELL_DESCRIPTOR_LIST_FOR_STORY",function(){return w}),r.d(t,"SYSTEM_FIELD_DEFAULT_CELL_DESCRIPTOR_LIST_FOR_BUG",function(){return C}),r.d(t,"SYSTEM_FIELD_DEFAULT_CELL_DESCRIPTOR_LIST_FOR_SPRINT",function(){return I}),r.d(t,"SYSTEM_FIELD_DEFAULT_CELL_DESCRIPTOR_LIST_FOR_TASKFLOW",function(){return k}),r.d(t,"CUSTOM_FIELD_DEFAULT_CELL_DESCRIPTOR_MAP",function(){return j}),r.d(t,"toTaskComparator",function(){return ve}),r.d(t,"accomplishedAtDateComparator",function(){return P}),r.d(t,"accomplishedAtDateFormatter",function(){return R}),r.d(t,"taskContentComparator",function(){return M}),r.d(t,"createdAtDateComparator",function(){return N}),r.d(t,"createdAtDateFormatter",function(){return x}),r.d(t,"creatorComparator",function(){return D}),r.d(t,"handleTaskCustomFieldFormatter",function(){return B}),r.d(t,"taskCustomFieldFormatter",function(){return U}),r.d(t,"taskCustomFieldComparator",function(){return z}),r.d(t,"taskDueDateFormatter",function(){return V}),r.d(t,"taskDueDateComparator",function(){return K}),r.d(t,"taskExecutorComparator",function(){return H}),r.d(t,"taskFollowerListFormatter",function(){return ye}),r.d(t,"taskLikeCountComparator",function(){return W}),r.d(t,"taskNoteFormatter",function(){return J}),r.d(t,"taskNoteComparator",function(){return Q}),r.d(t,"taskPriorityFormatter",function(){return X}),r.d(t,"taskPriorityComparator",function(){return $}),r.d(t,"taskProgressComparator",function(){return Z}),r.d(t,"taskRecurrenceFormatter",function(){return te}),r.d(t,"taskRecurrenceComparator",function(){return re}),r.d(t,"taskReminderComparator",function(){return ne}),r.d(t,"taskScenarioComparator",function(){return oe}),r.d(t,"taskSprintComparator",function(){return ie}),r.d(t,"taskStageComparator",function(){return ae}),r.d(t,"taskStartDateFormatter",function(){return se}),r.d(t,"taskStartDateComparator",function(){return ue}),r.d(t,"taskStatusComparator",function(){return ce}),r.d(t,"taskStoryPointComparator",function(){return le}),r.d(t,"taskTaskflowStatusComparator",function(){return pe}),r.d(t,"taskTimeCostFormatter",function(){return fe}),r.d(t,"taskTimeCostComparator",function(){return de}),r.d(t,"taskUniqueIdComparator",function(){return ge}),r.d(t,"updatedAtDateComparator",function(){return he}),r.d(t,"updatedAtDateFormatter",function(){return me}),r.d(t,"toEllipsis",function(){return be}),r.d(t,"toPlain",function(){return _e}),r.d(t,"parseReminder",function(){return Se.getDescription}),r.d(t,"isCommonGroup",function(){return a});var Ce=function(e){return e.map(function(e){return{entity:e}})},Ie=function(e){return e.filter(function(e){return!!e&&!e.isPseudo}).map(function(e){return e.entity})},ke=function(e){for(var t=o.h(e),r=[];t.length>0;){var n=t.shift();n&&!n.isPseudo&&(r.push(n.entity),t.push.apply(t,o.h(n.children||[])))}return r},je=function(e){for(var t=[],r=o.h(e);r.length>0;){var n=r.shift();n&&!n.isPseudo&&(t.push(n),r.push.apply(r,o.h(n.children||[])))}return t},Ae=function(e,t){void 0===t&&(t={});var r=e.ancestorIds[0]||null,n=t.filteredTasks||[];return t.isUsingFilter?!!r&&n.some(function(e){return e._id===r}):!!r},Pe=function(e,t){void 0===t&&(t={});var r=t.filteredTasks||[];return t.isUsingFilter?r.some(function(t){return(t._taskId||t.ancestorIds[0]||null)===e._id}):!!e.subtaskCount.total},Re=function(e,t){return(e.children||[]).reduce(function(e,r){var n=r||t&&!r;return e.concat(n&&a(r.entity)?Re(r):r||[])},[])},Ne=function(e){var t=e.projectId,r=e.tasklistId,n=e.smartGroup;return n?Oe.allTasksView.checkId(n._id)?t+"/"+n._id:n._id:r||(Object(Ee.throwError)(new Error("SmartGroupId or TasklistId required")),t)},xe=function(e,t,r,n,i,a){var s,u=e.filter(function(e){return!e.factor||e.factor.type===h.FactorType.PLUGIN&&b.a.includes(r,e.factor.name)}),p=l(e,function(e,t){t.factor&&t.factor.type===h.FactorType.SCENARIO&&e.set(t.factor.name,t)}),d=l(i,function(e,t){e.set(t._customfieldId,t)}),g=(s=[]).concat.apply(s,o.h(n.map(function(e){return e.scenariofields}))).map(function(t){if("customfield"!==t.fieldType){var r=p.get(t.fieldType);return r?o.a({},r,{hidden:!t.displayed}):null}var n=d.get(t._customfieldId);return n?o.a({},j[n.type],{key:"customfields",customField:n,sortIndex:we(a,n,e),hidden:!t.displayed}):null}).filter(_.c),m=b.a.uniq(o.h(u,g),function(e){return c(e)}),y=l(t,function(e,t){var r=c(t);e.set(r,t)}),v=m.map(function(e){var t=c(e),r=y.get(t),n=b.a.defaults(r?Me(r):{},e,S);return n.cannotHide&&(n.hidden=!1),n});return b.a.sortBy(v,function(e){return"number"==typeof e.sortIndex?e.sortIndex:f.Mid})},De=function(e){return{key:e.key,customField:e.customField?b.a.pick(e.customField,["_id","_customfieldId"]):void 0}},Me=function(e){return b.a.pick(e,["width","hidden","sortIndex","cannotHide"])},Fe={story:w,bug:C,sprint:I},Le=function(e){var t=Te.ProjectAccess.hasPermission(e.projectId,"task.post");return{enableTaskCreate:t&&!e.useGroups,enableGroupTaskCreate:t,enableSubtaskCreate:t}}},EjIl6N9o:function(e,t,r){var n,o={}.hasOwnProperty;n=r("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="stage",t.prototype.urlRoot="stages",t.prototype.defaults={name:"",_tasklistId:"",_prevId:""},t}()},EtDCcJeX:function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"b",function(){return s}),r.d(t,"a",function(){return u});var n,o=r("mrSGxOB2"),i=r("4c1CS0b3"),a=r("gh8QIhMV");function s(e){var t,r;return{observable:i.Observable.defer(function(){return new i.Observable(function(e){return t&&Object(a.throwError)("observeCallback: observable is subscribed by multiple subscribers,","please broadcast the source observable with operators such as share() or publishReplay(1).refCount()."),r&&(e.next(r.value),r=void 0),t=e,function(){t=void 0,r=void 0}})}),callback:function(n){var o=void 0===n?e:n;t?t.next(o):r={value:o}}}}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.map(function(e){return e.map(function(e){return{status:"fulfilled",value:e}}).catch(function(e){return i.Observable.of({status:"rejected",reason:e})})});return i.Observable.combineLatest.apply(i.Observable,o.h(r)).map(function(e){return o.f(e).slice(0)})}!function(e){e.interruptedDuring=function(e,t){return function(r){return new i.Observable(function(n){var o=!1,a=null,s=r.subscribe({next:function(e){o?a={value:e}:n.next(e)},error:function(e){return n.error(e)},complete:function(){return n.complete()}}),u=e.concatMap(function(e){return i.Observable.concat(i.Observable.of(!0),t(e).take(1).mapTo(!1))}).subscribe({next:function(e){!(o=e)&&a&&(n.next(a.value),a=null)},error:function(){return o=!1},complete:function(){return o=!1}});return function(){s.unsubscribe(),u.unsubscribe(),a=null}})}}}(n||(n={})),function(e){e.isRejected=function(e){return"rejected"===e.status},e.isFulfilled=function(e){return"fulfilled"===e.status},e.unwrap=function(e){return"rejected"===e.status?e.reason:e.value}}(u||(u={}))},"F/3q5TdB":function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n,o=r("mrSGxOB2"),i=r("6SzIBtPz"),a=r("ohd6/vMg"),s={isOrganization:null,isValidSearchValue:null,lists:null,isLoadingTeams:!1,isLoadingGroups:!1,isLoadingMembers:!1,membersCount:null,membersTotal:null,organizationId:null,searchValue:null,selectedIds:null,syncedIds:null,tab:null,teamsBreadcrumb:null},u=Object(i.b)(((n={})[""+a.a]=function(e,t){return o.a({},e,t.payload)},n[""+a.b]=function(){return s},n),s)},F3WdH5q6:function(e,t,r){"use strict";r("afows5Ma");var n=r("UBgZPSQF");r.d(t,"assignDataToProjectCategoryManagerModalAction",function(){return n.a}),r.d(t,"projectCategoryManagerModalReducer",function(){return n.b}),r.d(t,"unmountProjectCategoryManagerModalAction",function(){return n.c});r("EU9jWpLq")},F4Sfg53m:function(e,t,r){"use strict";r.r(t),r.d(t,"BoardTaskFlowProjectStorage",function(){return n});var n,o=r("mrSGxOB2"),i=r("4c1CS0b3"),a=r("HYobN8SQ"),s=r.n(a),u=r("B9Qi/5SX"),c=r("bMnB8TLD"),l=r("RIjxGFt6"),p=r("bvmrLhnu");!function(e){var t=s.a.namespace("board_taskflow_project_2019_06_14"),r={viewType:"kanban"};e.getAllTasksView=function(e,n){var i=Object(p.composeBoardViewAppId)(e,n);return o.a({},t.get(e,r),{paneType:Object(c.getAxisCache)(i,Object(c.getTaskflowAxis)(),{isScrumProject:!1,isTaskflowProject:!0,isUsingTasklist:!1}).pane})},e.setAllTasksView=function(e,r){try{t.set(e,r)}catch(n){}},e.getAllTasksViewCustomView=function(t,r){var n=Object(p.composeBoardViewAppId)(t,r),i=e.getAllTasksView(t,r),a=u.b.get(i.viewType),s=Object(l.getTaskLayer)({boardViewAppId:n,viewType:i.viewType});return o.a({},a,{view:o.a({},a.view,{taskLayer:s,vertical:i.paneType})})},e.getAllTasksViewCustomView$=function(t,r){return i.Observable.of(e.getAllTasksViewCustomView(t,r))}}(n||(n={}))},F7XczqYE:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("NOGqly5s"),i=r("4c1CS0b3"),a=r("a+N5u/Cl"),s=r("vwABXCbh"),u=r("s0r7VfKc"),c=r("5pBrSTAv");r.d(t,"a",function(){return g});var l=function(e){return!!e.payload},p=function(e){var t=e.payload.selectedProjectTagId;return"string"==typeof t&&t.length>0},f=function(e){var t=e.payload.organizationId;return"string"==typeof t||!!t&&t.length>0},d=function(e){var t=e.payload.customFieldIds;return Array.isArray(t)},g=Object(o.a)(function(e){return e.ofType(""+c.b).filter(l).switchMap(function(t){var r=t.payload,n=r.organizationId,o=r.projectsOfProjectTagCount,a=r.projectsOfProjectTagPage,s=r.selectedProjectTagId;return i.Observable.of(Object(c.l)({organizationId:n}),Object(c.o)({organizationId:n,projectsOfProjectTagCount:o,projectsOfProjectTagPage:a,selectedProjectTagId:s}),Object(c.f)({organizationId:n}),Object(c.i)({organizationId:n})).takeUntil(e.ofType(""+c.v))})},function(e){return e.ofType(""+c.c).filter(l).switchMap(function(t){var r=t.payload.organizationId;return i.Observable.of(Object(c.f)({organizationId:r})).takeUntil(e.ofType(""+c.w))})},function(e,t){return e.ofType(""+c.f).filter(f).filter(function(e){return function(t){return!e.getState().ui.projectsInformationBoardApp.projectBoard}}(t)).switchMap(function(t){return function(e){var t="organizations/"+e+"/projectboard";return u.default.fetch.get(t)}(t.payload.organizationId).takeUntil(e.ofType(""+c.v)).map(function(e){return Object(c.h)({projectBoard:e})})}).catch(function(e){return i.Observable.of(Object(c.g)(e))})},function(e){return e.ofType(""+c.i).filter(f).switchMap(function(t){return function(e){var t="organizations/"+e+"/customfields/project";return u.default.fetch.get(t)}(t.payload.organizationId).takeUntil(e.ofType(""+c.v)).map(function(e){return Object(c.k)({projectCustomFields:e})})}).catch(function(e){return i.Observable.of(Object(c.j)(e))})},function(e,t){return e.ofType(""+c.o).filter(l).filter(f).map(function(e){var t=e.payload,r=t.projectsOfProjectTagCount,o=t.projectsOfProjectTagPage,i=t.selectedProjectTagId;return r||(e=n.a({},e,{payload:n.a({},e.payload,{projectsOfProjectTagCount:c.d.projectsOfProjectTagCount})})),o||(e=n.a({},e,{payload:n.a({},e.payload,{projectsOfProjectTagPage:c.d.projectsOfProjectTagPage})})),i||(e=n.a({},e,{payload:n.a({},e.payload,{selectedProjectTagId:c.d.selectedProjectTagId})})),e}).filter(p).filter(function(e){return function(t){var r=e.getState().ui.projectsInformationBoardApp,n=r.projectsOfProjectTagCount,o=r.projectsOfProjectTagPage;return"number"==typeof n&&!isNaN(n)&&"number"==typeof o&&!isNaN(o)}}(t)).filter(function(e){return function(t){if(1===t.payload.projectsOfProjectTagPage)return!0;var r=e.getState().ui.projectsInformationBoardApp.projectsOfProjectTagHasMore;return"boolean"==typeof r&&!1!==r}}(t)).switchMap(function(t){var r=t.payload,n=r.organizationId,o=r.projectsOfProjectTagCount,i=r.projectsOfProjectTagPage;return function(e,t,r){var n="organizations/"+e;a.some(s.forgedProjectTagIdList,function(e){return e===t})&&t===s.forgedProjectTagIdAll?n+="/projects/joined":"string"==typeof t&&(n=n+"/projecttags/"+t+"/projects");var o=r.count,i=r.page;return u.default.fetch.get(n,{count:o,page:i})}(n,r.selectedProjectTagId,{count:o,page:i}).takeUntil(e.ofType(""+c.v)).map(function(e){var t={projects:e,projectsOfProjectTagHasMore:Array.isArray(e)&&e.length===o,projectsOfProjectTagPage:i+1};return i>1?Object(c.r)(t):Object(c.q)(t)})}).catch(function(e){return i.Observable.of(Object(c.p)(e))})},function(e){return e.ofType(""+c.l).filter(f).switchMap(function(t){return function(e){var t="organizations/"+e+"/projecttags";return u.default.fetch.get(t)}(t.payload.organizationId).takeUntil(e.ofType(""+c.v)).map(function(e){return Object(c.n)({projectTags:e})})}).catch(function(e){return i.Observable.of(Object(c.m)(e))})},function(e){return e.ofType(""+c.x).filter(f).filter(d).switchMap(function(t){var r=t.payload,n=r.customFieldIds;return function(e,t){var r="organizations/"+e+"/projectboard",n={customfieldIds:t.customFieldIds};return u.default.fetch.put(r,n)}(r.organizationId,{customFieldIds:n}).takeUntil(e.ofType(""+c.v)).map(function(e){return Object(c.z)({projectBoard:e})})}).catch(function(e){return i.Observable.of(Object(c.y)(e))})})},FR9pfWDH:function(e,t,r){e.exports={tree:"tree__2UNw"}},FSFeKvjj:function(e,t){e.exports="\nfragment reportSchema on Report {\n  all\n  done\n  unallocated\n  overdue\n}\n"},"FeA/FqsW":function(e,t){e.exports=function(e){return'<div class="popover"> <header class="popover-header"> <a class="popover-back-handler icon icon-chevron-left"></a> <h3 class="popover-title">Popover Title</h3> <a class="popover-close-handler icon icon-remove"></a> </header> <div class="popover-content thin-scroll"></div></div>'}},FoX6irlC:function(e,t,r){var n,o,i={}.hasOwnProperty;o=r("a+N5u/Cl"),n=r("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="tasklist",t.prototype.urlRoot="tasklists",t.prototype.defaults={objectType:"tasklist",stageIds:[],totalCount:0},t.prototype.forkOrMoveTasklist=function(e,t,r){return r||(r={}),r.url=this.url()+"/"+e,r.attrs={_projectId:t},this.sync("update",this,r),this},t.prototype.getRangeDate=function(e){return e||(e={}),e.url=this.url()+"/tasks/date-range",e.attrs=o.extend({withInvolves:!0},e.attrs),this.sync("read",this,e),this},t}()},G5hTTzDg:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("2qRnoGmE"),o=r("4c1CS0b3"),i=r("3gwnn8Cw"),a=r("+2RfZ2TT"),s=r("QyjeWo4p");function u(e,t){var r=a.fileDownload,u=n.API_HOST+"/"+e+"?"+s.stringify(t);return"function"==typeof r?Object(i.fromPromise)(r(u)):o.Observable.throw(new Error("$.fileDownload is undefined."))}},G94ZpdML:function(e,t,r){"use strict";var n,o=r("mrSGxOB2"),i=r("sa1Ed382"),a=r("s0r7VfKc"),s=r("6SzIBtPz"),u=r("NOGqly5s"),c=r("4c1CS0b3"),l=r("peh1clMB"),p=r("eO8HY5nz"),f=r("gh8QIhMV"),d=r("L342T8FT"),g=(d.push,d.replace,d.goBack,function(e){return"/organization/"+e+"/:featureName"}),h=function(e){return"/organization/"+e+"/plugin/:pluginId"},m=r("RUL1qgth"),y=r("2qRnoGmE"),v=r.n(y),b=r("CxY0Mkc1"),_=r.n(b);r.d(t,"c",function(){return S}),r.d(t,"a",function(){return O}),r.d(t,"j",function(){return w}),r.d(t,"i",function(){return C}),r.d(t,"b",function(){return I}),r.d(t,"g",function(){return k}),r.d(t,"d",function(){return j}),r.d(t,"f",function(){return A}),r.d(t,"e",function(){return P}),r.d(t,"h",function(){return R});var S=Object(s.a)("FETCH_ORGANIZATION_INSTALLED_FEATURES"),T=Object(s.a)("FETCH_ORGANIZATION_INSTALLED_FEATURES_SUCCESS"),E=Object(s.a)("FETCH_ORGANIZATION_INSTALLED_FEATURES_FAILED"),O=Object(s.a)("DISABLE_ORGANIZATION_ADDED_APPLICATION"),w=Object(s.a)("TOGGLE_DOCK_DROPDOWN"),C=Object(s.b)(((n={})[""+S]=function(e){return o.a({},e,{apps:null})},n[""+T]=function(e,t){return o.a({},e,{apps:t.payload})},n[""+E]=function(e){return o.a({},e,{apps:[]})},n[""+O]=function(e,t){var r=e.apps,n=t.payload,i=r&&r.filter(function(e){return e._consumerId!==n});return o.a({},e,{apps:i})},n[""+w]=function(e,t){return o.a({},e,{opened:t.payload})},n),{apps:null,opened:!1}),I=Object(u.a)(function(e){return e.ofType(""+S).switchMap(function(){var e=i.PREFERENCE.get("lastWorkspace");return"personal"===e?c.Observable.of():a.default.fetch.get("organizations/"+e+"/installedFeatures",null,{apiHost:v.a.HOST+"/appstore/api"}).map(function(e){return T(e)}).catch(function(e){return Object(f.throwError)(e),c.Observable.of(E())})})}),k=Object(l.createSelector)(function(e){return e.ui.dock.apps},function(e){return(e||[]).filter(function(e){return"app_for_topnavigation"===e.type})}),j=Object(l.createSelector)(function(e){return e.ui.dock.apps},function(e){return(e||[]).filter(function(e){return"app_for_navigation_creator"===e.type})}),A=Object(l.createSelector)(function(e){return e.ui.dock.apps},function(e){return(e||[]).filter(function(e){return"app_for_organization"===e.type})}),P=Object(l.createSelector)(function(e){return e.router.location},function(e){return e.ui.search.workspaceId},function(e){return e.ui.dock.apps},function(e,t,r){var n=null;if(!r||"personal"===t)return null;var o=Object(p.matchPath)(e.pathname,{path:h(t)});if(o){var i=o.params.pluginId;n=r.filter(function(e){return e._id===i})[0]}else{var a=Object(p.matchPath)(e.pathname,{path:g(t)});if(a){var s=a.params.featureName;"profile"===s?s="members":"statistics"===s&&(s="statistics/project"),n=r.filter(function(e){var t=_.a.parse(e.url,!0),r=t.protocol,n=t.hostname,o=t.pathname,i=void 0===o?"":o;return"teambition:"===r&&Object(m.orgAppNameByTarget)(""+n+i)===s})[0]}}return n}),R=Object(l.createSelector)(function(e){return e.ui.dock.apps},function(e){if(e)return e.find(function(e){return e.isEntryApp})})},GHDEvYBf:function(e,t,r){"use strict";var n=r("tLZJUYWX"),o=r("q1tIBJhx"),i=r("mrSGxOB2"),a=r("TSYQbtd+"),s=r.n(a),u=r("GESwhXbR"),c=r("ceN0Itwj"),l={workitem:"dev-project",doc:"dev-doc",sprint:"iteration",cr:"git-o",app:"applications",testcase:"testcase",testjob:"test"},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.d(t,e),t.prototype.renderIcon=function(){return this.props.icon?this.props.icon:o.createElement(u.Icon,{className:"abstract-item-leading",name:l[this.props.type]})},t.prototype.renderContent=function(){var e=this.props.content,t=!!e&&Object(c.a)(e);return!!t&&o.createElement("div",{className:"abstract-item-content",dangerouslySetInnerHTML:{__html:t}})},t.prototype.render=function(){var e=this.props,t=e.title,r=e.label,n=e.type,i=s()("abstract-item","abstract-item-"+n,this.props.classNames),a=Object(c.a)(t);return o.createElement("div",{className:i},this.renderIcon(),o.createElement("div",{className:"abstract-item-info"},o.createElement("div",{className:"abstract-item-title",dangerouslySetInnerHTML:{__html:a}}),this.renderContent(),o.createElement("div",{className:"abstract-item-label"},r)))},t}(o.PureComponent);r.d(t,"a",function(){return f}),r.d(t,"c",function(){return d}),r.d(t,"b",function(){return g}),r.d(t,"d",function(){return h});var f=["workitem","app","cr","sprint","testjob","testcase","doc"],d=function(){return{project:n.get("projects"),user:n.get("search.type.member"),task:n.get("search.type.task"),event:n.get("search.type.event"),post:n.get("search.type.post"),work:n.get("search.type.work"),workitem:n.get("aone.search.type.workitem"),app:n.get("aone.search.type.app"),cr:n.get("aone.search.type.cr"),sprint:n.get("aone.search.type.sprint"),testjob:n.get("aone.search.type.testjob"),testcase:n.get("aone.search.type.testcase"),doc:n.get("aone.search.type.doc")}},g={workitem:function(e){var t=e.name;return o.createElement(p,{title:t,type:"workitem"})},app:function(e){var t=e.name;return o.createElement(p,{type:"app",title:t})},cr:function(e){var t=e.reason,r=e.branch,i=r&&n.get("aone.search.result.item.branch",r);return o.createElement(p,{type:"cr",title:t,content:i})},sprint:function(e){var t=e.name,r=e.projectName,i=r&&n.get("aone.search.result.item.project.name",r);return o.createElement(p,{title:t,content:i,type:"sprint"})},testjob:function(e){var t=e.name,r=e.app,i=r&&n.get("aone.search.result.item.testjob.app",r);return o.createElement(p,{title:t,content:i,type:"testjob"})},testcase:function(e){var t=e.title,r=e.description;return o.createElement(p,{title:t,content:r,type:"testcase"})},doc:function(e){var t=e.title,r=e.workspaceName;return o.createElement(p,{type:"doc",title:t,content:r})}},h=function(e){return f.some(function(t){return e===t})}},GeeOS9xn:function(e,t,r){"use strict";r.r(t),r.d(t,"SPLIT_SYMBOL",function(){return o}),r.d(t,"getCombinedAxisId",function(){return i}),r.d(t,"splitCombinedAxisId",function(){return a});var n=r("mrSGxOB2"),o="@@",i=function(e){return e.filter(function(e){return"string"==typeof e&&e.length>0}).join(o)},a=function(e){if(-1===e.indexOf(o))return[e];var t=n.f(e.split(o),2);return[t[0],t[1]]}},"Gz76M/6t":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"colloquium",use:"colloquium-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="colloquium"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#9ED979" rx="2" /><path fill="#FFFFFF" d="M13.125 8.125c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25zm-6.25-2.5c.69 0 1.25.56 1.25 1.25s-.56 1.25-1.25 1.25-1.25-.56-1.25-1.25.56-1.25 1.25-1.25zm-.937 5.754l-.846-.846a.312.312 0 0 1-.092-.22V8.75c0-.172.14-.312.313-.312h1.932a.927.927 0 0 0-.057.312v2.5c0 .25.097.486.274.663l.663.663v.862c0 .172-.14.312-.312.312H6.25a.313.313 0 0 1-.312-.312v-2.059zm8.75-2.941c.172 0 .312.14.312.312v1.563a.312.312 0 0 1-.092.22l-.845.846v2.059c0 .172-.14.312-.313.312h-1.563a.313.313 0 0 1-.312-.313v-.861l.663-.663a.93.93 0 0 0 .274-.663v-2.5a.927.927 0 0 0-.057-.312h1.932zm-2.5 2.812a.312.312 0 0 1-.092.22l-.846.847v2.37c0 .173-.14.313-.313.313H9.063a.313.313 0 0 1-.313-.313v-2.37l-.846-.846a.312.312 0 0 1-.091-.221v-2.5c0-.172.14-.312.312-.312h3.75c.172 0 .313.14.313.312v2.5zm-.626-4.687c0 .861-.7 1.562-1.562 1.562-.862 0-1.562-.7-1.562-1.562C8.438 5.7 9.138 5 10 5c.862 0 1.563.7 1.563 1.563z" /></g></symbol>'});a.a.add(s);t.default=s},H1tYRyKz:function(e,t,r){e.exports=r.p+"images/logo0.b82b5f2d.jpg"},HDJEOtNh:function(e,t,r){"use strict";r.r(t);var n,o,i=r("cY+V28dO"),a=r("mrSGxOB2"),s=r("sa1Ed382"),u=r("s0r7VfKc"),c=r("Nb+/DKSJ"),l=r("gLTu//Kz"),p=r("77NnVLwu"),f=r("0FRv5rrl"),d=r("qHH6+g6Q"),g=Object.create(null),h={task:["task.del","task.put.archive"],testcase:["testcase.del","testcase.put.archive"]},m=new RegExp("^(organization|profile|projecttag|projecttemplate|role|team)"),y=function(e){function t(r,n,o){var i=e.call(this)||this;if(i.boundToObjectId=r,i.boundToObjectType=n,i.object=o,null==r||!n)throw Error("boundToObjectId and boundToObjectType is required");return i.root=null,i.isObject=t.isObject(n),"organization"===i.boundToObjectType?i.rules=t.OrganizationRules.slice(0):"project"===i.boundToObjectType?i.rules=t.ProjectRules.slice(0):i.rules=t.DefinedRules.filter(function(e){return t.isObjectKey(e)?i.isObject:0===e.indexOf(i.boundToObjectType+".")}),o?(i.objectListener=function(){return i.update(i.object)},i.update(o)):i.update(),i}return a.d(t,e),t.get=function(e,r,n){var o=t.Cache.get(e);if(!o){var i=new t(e,r,n);return t.Cache.set(e,i),i}return o},t.remove=function(e){t.Cache.delete(e)},t.refreshProject=function(e){return t.pullProject(e).do(function(){return t.remove(e)}).toPromise()},t.refreshOrganization=function(e){return t.pullOrganization(e).do(function(){return t.remove(e)}).toPromise()},t.refreshMember=function(e){return t.pullMember(e).do(function(e){"project"===e.boundToObjectType&&t.refreshProject(e._boundToObjectId)}).toPromise()},t.addTaskPrivilege=function(e){return t.pullTaskPrivilege(e).toPromise()},t.updateProject=function(e){var r=e.permissionBinding;if(r){var n=e._id;t.remove(n),t.resetProject(n,a.a({type:"project",_projectId:n},r))}},t.updateOrganization=function(e){var r=e.role;if(r){var n=e._id;t.remove(n),t.resetOrganization(n,{_creatorId:r._creatorId,_id:r._id,_organizationId:n,created:r.created,level:r.level,name:r.name,permissions:r.permissions,type:"organization"})}},t.setup=function(e){u.default.socketProxy.on(":refresh:projects",function(e){"string"==typeof e.data&&(t.refreshProject(e.data),t.addTaskPrivilege(e.data))}),u.default.socketProxy.on(":change:member",function(e){if("string"==typeof e.id&&e.data._roleId){var r=e.id;t.refreshMember(r)}}),u.default.socketProxy.on(":refresh:organizations",function(e){"string"==typeof e.data&&t.refreshOrganization(e.data)}),u.default.socketProxy.on(":quit:organizations",function(e){"string"==typeof e.data&&t.refreshOrganization(e.data)}),t.DefinedRules=e,e.forEach(function(e){t.DefaultPermMap[e]=!1,(m.test(e)?t.OrganizationRules:t.ProjectRules).push(e),/^object\./.test(e)&&t.ObjectRules.push(e),0===e.indexOf("post.")&&(g[e]=!0)}),d.prototype.getPermissions=function(){var e=null!=this.id?this.id:"new_"+this.name,r="archive"===this.name?this.get("boundToObjectType"):this.name;return t.get(e,r,this)},d.prototype.hasPermission=function(e){return this.getPermissions().has(e)},d.prototype.hasPermissions=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n={},o=this.getPermissions();return e.forEach(function(e){n[t.camelize(e)]=o.has(e)}),n},d.prototype.updatePermissions=function(){return this.getPermissions().update(this),this},d.prototype.getPermissionBinding=function(){var e="project"===this.name?this.get("_id"):this.get("_projectId");return e?t.ProjectPermsPool.get(e):null},d.prototype.isJoined=function(){var e=this.getPermissionBinding();return e&&e.isJoined},d.prototype.getJoinProjectRole=function(){var e=this.getPermissionBinding();return e&&e.joinProjectRole},d.prototype.isOwner=function(){var e=this.get("_id");return"organization"===this.name?t.getOrganizationRole(e).level===c.b.Owner:"project"===this.name?t.getProjectRole(e).level===c.b.Owner:s.user.id===this.get("_creatorId")},d.prototype._getRoleLevel=function(){var e=void 0;switch(this.name){case"member":e=this.get("role");break;case"organization":e=t.getOrganizationRole(this.get("_id")).level;break;case"project":e=t.getProjectRole(this.get("_id")).level;break;default:var r=this.get("_projectId"),n=this.get("_organizationId");r?e=t.getProjectRole(r).level:n&&(e=t.getOrganizationRole(n).level)}return void 0!==e?e:c.b.Guest},d.prototype.getRoleScope=function(){var e=this._getRoleLevel();return e>c.b.Forbidden?e:c.b.Forbidden};var r=p.prototype.parse;p.prototype.parse=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=r.apply(this,e);try{var i=a.f(e,1)[0];t.updateProject(i)}catch(s){}return o}},t.prototype.update=function(e){if(this.permMap=Object.create(t.DefaultPermMap),!e)return this;switch(this.object&&this.object.off(null,this.objectListener),this.object=e,this.boundToObjectType){case"organization":var r=t.getOrganizationRole(this.boundToObjectId);this.merge(r.permissions.filter(function(e){return m.test(e)}));break;case"project":(n=e.get("_organizationId"))&&(this.root=t.get(n,"organization",f.find(n)));r=t.getProjectRole(this.boundToObjectId);this.merge(r.permissions);break;default:var n=e.get("_organizationId"),o=e.get("_projectId");if(o){var i=t.projectModelDict[o];i&&!i.__noCache||((i=p.find(o)||i)||((i=new p({_id:o},{bindByMatrix:!1})).__noCache=!0),t.projectModelDict[o]=i),this.root=t.get(o,"project",i)}else n?this.root=t.get(n,"organization",f.find(n)):"activity"===this.boundToObjectType&&(this.root=t.get(e.get("_boundToObjectId"),e.get("boundToObjectType")));this.object.isOwner()&&"task"!==this.boundToObjectType&&(this.merge(!0),"post"===this.boundToObjectType?this.permMap["post.put.pin"]=!1:"entry"===this.boundToObjectType&&(this.permMap["entry.put.approve"]=!1))}if(this.object){this.object.on("change:_roleId change:_organizationId change:_projectId",this.objectListener)}return this},t.prototype.find=function(e){var t=Object.create(null),r=l.find(e);return r&&r.get("permissions").forEach(function(e){t[e]=!0}),t},t.prototype.has=function(e){return/^(post|put|get|del)/.test(e)&&!g[e]?this.hasPerms(this.boundToObjectType+"."+e):this.hasPerms(e)},t.prototype.hasPerms=function(e){var r=this;if(t.isObject(this.boundToObjectType)&&0===e.indexOf(this.boundToObjectType)){var n=e.replace(this.boundToObjectType,"object");if(t.isObjectKey(n))return this.hasPerms(n)}var o=!!this.permMap[e];if(!o&&this.object&&this.rules.indexOf(e)>=0)switch(this.boundToObjectType){case"stage":var i=this.object.get("_tasklistId"),a=t.get(i,"tasklist");a.object&&a.object.isOwner()&&(o=!0);break;case"testcase":var u=s.user.id;o||this.object.get("_executorId")!==u||(o=this.hasExecutorPerm(e,"testcase")),o=o||this.object.get("_creatorId")===u;break;case"task":var c=s.user.id,l=this.object.get("parent"),p=[function(){return r.object.get("_creatorId")===c},function(){return l&&l._creatorId===c}];!o&&[function(){return r.object.get("_executorId")===c},function(){return l&&l._executorId===c}].some(function(e){return e()})&&(o=this.hasExecutorPerm(e,"task",this.object.get("_projectId"))),!o&&p.some(function(e){return e()})&&(o=this.hasCreatorPerm(e,this.object.get("_projectId")))}return!o&&this.root&&(o=this.root.hasPerms(e)),o},t.prototype.hasCreatorPerm=function(e,r){var n=r&&t.TaskPrivileges.get(r);if(!n)return!0;if(this.root&&"project"===this.root.boundToObjectType&&n.isEnabled){var o=n.creator[e];return"boolean"!=typeof o||o}return!0},t.prototype.hasExecutorPerm=function(e,r,n){if(0!==e.indexOf(r+".")&&t.ObjectRules.indexOf(e)<0)return!1;var o="task"===r?n&&t.TaskPrivileges.get(n):void 0;if(this.root&&"project"===this.root.boundToObjectType&&o&&o.isEnabled){var i=o.executor[e];return"boolean"!=typeof i||i}return h[r].indexOf(e)<0},t.prototype.merge=function(e){var t=this;return Array.isArray(e)?(e.forEach(function(e){return t.permMap[e]=!0}),this):(this.rules.forEach(function(r){e?t.permMap[r]=!0:"boolean"==typeof e[r]&&(t.permMap[r]=e[r])}),this)},t.projectModelDict={},t}(c.a);function v(e){var t=function(e){return y.getProjectRole(e).level}(e);return t>=c.b.Forbidden?t:c.b.Guest}function b(e){return v(e)}function _(e){if(!e)return c.b.Forbidden;var t=function(e){return y.getOrganizationRole(e).level}(e);return t>=c.b.Forbidden?t:c.b.Guest}r.d(t,"getRoleScopeByProjId",function(){return b}),r.d(t,"getRoleScopeByOrgId",function(){return _}),r.d(t,"ProjectAccess",function(){return n}),r.d(t,"OrganizationAccess",function(){return o}),r.d(t,"RoleScope",function(){return c.b}),r.d(t,"Core",function(){return c.a}),r.d(t,"PermissionController",function(){return y}),function(e){e.hasMemberAuthority=function(e){return b(e)>=c.b.Member},e.hasAdminAuthority=function(e){return b(e)>=c.b.Admin},e.hasOwnerAuthority=function(e){return b(e)==c.b.Owner},e.isJoined=function(e){var t=y.ProjectPermsPool.get(e);return t&&t.isJoined},e.hasProjectPrivacyPermission=function(e){var t=y.ProjectPermsPool.get(e);return!!t&&t.permissions.indexOf(i.c.GetProjectPrivacy)>-1},e.getPermissionBinding=function(e){return y.ProjectPermsPool.get(e)},e.hasPermission=function(e,t){return y.getProjectRole(e).permissions.indexOf(t)>=0}}(n||(n={})),function(e){e.hasGuestAuthority=function(e){return _(e)>=c.b.Guest},e.hasMemberAuthority=function(e){return _(e)>=c.b.Member},e.hasAdminAuthority=function(e){return _(e)>=c.b.Admin},e.hasOwnerAuthority=function(e){return _(e)==c.b.Owner},e.hasPermission=function(e,t){return y.getOrganizationRole(e).permissions.indexOf(t)>=0},e.canAddOuterMember=function(t){return e.hasPermission(t,"organization.post.member")||e.hasPermission(t,"organization.post.outer")}}(o||(o={}))},HEY5Vn8K:function(e,t,r){e.exports={"trigger-icon":"trigger-icon__3xxk","trigger-label":"trigger-label__xQBp",empty:"empty__1Bwd",disabled:"disabled__10nt",trigger:"trigger__1COR"}},HHtVDBJc:function(e,t,r){var n,o,i,a,s,u,c,l,p;a=r("a+N5u/Cl"),n=r("q1z7EYOi"),o=r("wd/RKGTj"),i=r("XQ5nL9cp"),s=r("WlCGY8BB"),p=r("gh8QIhMV").throwError,u=(c=r("u2/Ky9MJ")).isFakeEvent,l=c.resetEventId,e.exports={getRRuleSet:function(e){var t,r;if(r=null,e)try{r=i.rrulestr(e.join("\n"),{forceset:!0})}catch(n){t=n,s.error(t)}return r},getRepeatDates:function(e,t,r){var o,i;if(t instanceof Date||(t=new Date(t)),r instanceof Date||(r=new Date(r)),e instanceof n.Model&&(e=e.toJSON()),!(t.valueOf()>r.valueOf()))return(i=this.getRRuleSet(e.recurrence))&&(o=i.between(t,r,!0)),o||[];p("startTime is after endTime!")},fakeByModel:function(e,t,r,i){var s,u,c,l,f,d,g,h,m,y;if(t instanceof Date||(t=new Date(t)),r instanceof Date||(r=new Date(r)),e instanceof n.Model&&(e=e.toJSON()),t.valueOf()>r.valueOf())return p("startTime is after endTime!"),[];if(g=[],h=this.getRRuleSet(e.recurrence)){for(f=new Date(e.endDate).valueOf()-new Date(e.startDate).valueOf(),d=h.between(t,r,!0),i&&0===(null!=d?d.length:void 0)&&(c=h.after(t))&&d.push(c),u=0,l=d.length;u<l;u++)m=d[u],y=new Date(m).valueOf(),(s=a.clone(e))._id=e._id+"_"+y,s._originEventId=e._id,s.startDate=o(m).toISOString(),s.endDate=o(m).add(f).toISOString(),g.push(s);g=a.sortBy(g,function(e){return e.startDate})}else g.push(e);return g},isFakeEvent:u,resetEventId:l,fakeByCollection:function(e,t,r,o){var i;return t instanceof Date||(t=new Date(t)),r instanceof Date||(r=new Date(r)),e instanceof n.Collection&&(e=e.models),e=e.map((i=this,function(e){return i.fakeByModel(e,t,r,o)})),e=a.union.apply(null,e),e=a.sortBy(e,function(e){return e.startDate})},fakeWeek:function(e,t){var r,n;return n=o().startOf("day"),r=o().add(6,"day").endOf("day"),this.fakeByCollection(e,n,r,t)},fakeMonth:function(e,t){var r,n;return n=o().startOf("day"),r=o().add(1,"month").endOf("day"),this.fakeByCollection(e,n,r,t)},label2RepeatOptions:function(e){return function(){switch(e){case"DAILY":return{freq:3,interval:1,byweekday:[],bymonthday:[]};case"WEEKLY":return{freq:2,interval:1,byweekday:[],bymonthday:[]};case"MONTHLY":return{freq:1,interval:1,byweekday:[],bymonthday:[]};case"YEARLY":return{freq:0,interval:1,byweekday:[],bymonthday:[]};case"WORKDAY":return{freq:2,interval:1,byweekday:[0,1,2,3,4],bymonthday:[]};default:return null}}()},rruleSet2recurrence:function(e){var t,r,n,o;return r=null,(t=null!=e&&null!=(n=e._rrule)&&null!=(o=n[0])?o.origOptions:void 0)&&t.freq>=0&&t.interval&&(r=e.valueOf()),r},freq2Label:function(e){var t,r,n,i,s,u,c,l,p,f,d,g,h,m;return p="NO",(f=null!=e&&null!=(d=e._rrule)&&null!=(g=d[0])?g.origOptions:void 0)?(n=f.freq,s=f.interval,r=null!=(h=f.byweekday)?h.map(function(e){return a.isNumber(e)?e:e.weekday}):void 0,t=null!=(m=f.bymonthday)?m.map(function(e){return a.isNumber(e)?e:e.monthday}):void 0,i=!!((null!=r?r.length:void 0)||(null!=t?t.length:void 0)),c=1===(null!=r?r.length:void 0)&&r[0]===o(f.dtstart).day()-1,u=1===(null!=t?t.length:void 0)&&t[0]===o(f.dtstart).date(),l=(null!=r?r.sort().toString():void 0)===[0,1,2,3,4].toString(),p=2===n&&1===s&&l?"WORKDAY":3!==n||1!==s||i?2!==n||1!==s||i&&!c?1!==n||1!==s||i&&!u?0!==n||1!==s||i?1<=n&&n<=3&&i||s>1?"CUSTOM":"NO":"YEARLY":"MONTHLY":"WEEKLY":"DAILY"):p},freq2Title:function(e){var t;return t=this.freq2Label(e),this.label2Title(t)},freq2Description:function(e){var t,r;return"CUSTOM"===this.freq2Label(e)?(r=this.freq2RepeatOptions(e),t=this.repeatOptions2Description(r)):t="",t},freq2RepeatOptions:function(e){var t,r,n,i,s,u,c;return 2!==(u=null!=e&&null!=(r=e._rrule)&&null!=(n=r[0])?n.origOptions:void 0).freq||2!==u.interval||u.byweekday||(u.byweekday=[o(u.dtstart).day()-1]),c=function(e){return a.isNumber(e)?e:e.weekday},t=function(e){return a.isNumber(e)?e:e.monthday},u.byweekday&&(u.byweekday=null!=(i=u.byweekday)?i.map(c):void 0),u.bymonthday&&(u.bymonthday=null!=(s=u.bymonthday)?s.map(t):void 0),u},repeatOptions2Description:function(e){var t,r,n,i,s,u;return i=e.freq,s=1===e.interval?"":e.interval,r=e.byweekday,t=e.bymonthday,3===i?n=tb_i18n.get("repeat.description.daily",s):2===i?(u=null!=(r=null!=r?r.map(function(e){return a.isNumber(e)?e:e.weekday}):void 0)?r.map(function(e){return o().day(e+1).format("ddd")}).join(", "):void 0,n=tb_i18n.get("repeat.description.weekly",s,u)):1===i?(u=null!=(t=null!=t?t.map(function(e){return a.isNumber(e)?e:e.monthday}):void 0)?t.join(", "):void 0,n=tb_i18n.get("repeat.description.monthly",s,u)):n="",n},label2Title:function(e){return{NO:tb_i18n.get("repeat.freq.NO"),DAILY:tb_i18n.get("repeat.freq.DAILY"),WEEKLY:tb_i18n.get("repeat.freq.WEEKLY"),MONTHLY:tb_i18n.get("repeat.freq.MONTHLY"),YEARLY:tb_i18n.get("repeat.freq.YEARLY"),WORKDAY:tb_i18n.get("repeat.freq.WORKDAY"),CUSTOM:tb_i18n.get("repeat.freq.CUSTOM")}[e]},getRepeats:function(e){var t;return null==e&&(e=!1),t=[{_id:"NO",title:tb_i18n.get("repeat.freq.NO")},{_id:"DAILY",title:tb_i18n.get("repeat.freq.DAILY")},{_id:"WEEKLY",title:tb_i18n.get("repeat.freq.WEEKLY")},{_id:"MONTHLY",title:tb_i18n.get("repeat.freq.MONTHLY")},{_id:"YEARLY",title:tb_i18n.get("repeat.freq.YEARLY")},{_id:"WORKDAY",title:tb_i18n.get("repeat.freq.WORKDAY")},{_id:"CUSTOM",title:tb_i18n.get("repeat.freq.CUSTOM")}],e||(t=t.slice(0,-2)),t},updateRRuleSet:function(e,t){return e._rrule[0]=null===t?new i:new i(a.extend(e._rrule[0].origOptions,t)),e},getOriginDate:function(e){var t,r,n;return null!=e&&null!=(t=e._rrule)&&null!=(r=t[0])&&null!=(n=r.origOptions)?n.dtstart:void 0},shiftExDatesByMilliseconds:function(e,t){var r;return r=e._exdate,Array.isArray(r)&&(e._exdate=r.reduce(function(e,r){return e.push(o(r).add(t,"ms").toDate()),e},[])),e},clearBeginning:function(e){var t,r;return r=e.after(this.getOriginDate(e),!0),this.updateRRuleSet(e,{dtstart:r}),t=e._exdate,Array.isArray(t)&&(e._exdate=t.filter(function(e){return e>r})),e}}},HSiQYofP:function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"a",function(){return s});var n,o=r("mrSGxOB2"),i=r("6SzIBtPz"),a=Object(i.a)("SWITCH_CHAT_ROOM_PANEL_STATE"),s=Object(i.b)(((n={})[""+a]=function(e,t){return o.a({},e,t.payload)},n),{inCreatingChat:!1})},HUhQ835W:function(e,t,r){"use strict";r.r(t);var n,o,i,a=r("mrSGxOB2"),s=r("a+N5u/Cl"),u=r("s0r7VfKc"),c=r("NOGqly5s"),l=r("6SzIBtPz"),p=function(e){return"PROJECT/"+e},f={mount:Object(l.a)(p("MOUNT")),mountFailure:Object(l.a)((i="MOUNT",p(i+"/FAILURE"))),mountSuccess:Object(l.a)(function(e){return p(e+"/SUCCESS")}("MOUNT")),unmount:Object(l.a)(p("UNMOUNT"))},d={},g=Object(l.b)(((n={})[""+f.mount]=function(e,t){return a.a({},d,t.payload)},n[""+f.mountSuccess]=function(e,t){return a.a({},e,t.payload)},n[""+f.unmount]=function(){return d},n),d),h=((o={})[""+f.mount]=function(e){return e.ofType(""+f.mount).filter(function(e){return!!e.payload}).switchMap(function(t){var r=t.payload.projectId;return u.default.getProject(r,{withOwner:!0}).changes().map(function(e){return a.f(e,1)[0]}).takeUntil(e.ofType(""+f.unmount)).map(function(e){return f.mountSuccess({project:e})}).catch(function(){return[f.mountFailure()]})})},o),m=c.a.apply(void 0,a.h(s.values(h))),y=r("fio7jWQ0"),v=function(e){y.store.dispatch(f.mount(e))},b=function(){y.store.dispatch(f.unmount())};r.d(t,"actions",function(){return f}),r.d(t,"reducer",function(){return g}),r.d(t,"epic",function(){return m}),r.d(t,"dispatchMountAction",function(){return v}),r.d(t,"dispatchUnmountAction",function(){return b})},HYobN8SQ:function(e,t,r){var n,o,i;n=r("2qRnoGmE"),i=r("z/ifOGtP"),e.exports=i.namespace((null!=(o=n.user)?o._id:void 0)||"ghost")},"Hb0+frtR":function(e,t,r){"use strict";var n={name:{name:"name",key:"basic:project.name",icon:"custom-text"},status:{name:"status",key:"basic:project.status.degree",icon:"single-selection"},durationDay:{name:"durationDay",key:"basic:project.duration.time",icon:"clock"},owner:{name:"owner",key:"basic:project.member.owners",icon:"custom-text"},unallocated:{name:"unallocated",key:"basic:project.report.task.unallocated",icon:"custom-number"},dueRate:{name:"dueRate",key:"basic:project.task.overdue.degree",icon:"custom-number"},doneRate:{name:"doneRate",key:"basic:project.task.done.degree",icon:"custom-number"},creator:{name:"creator",key:"basic:project.creator",icon:"custom-text"},created:{name:"created",key:"basic:project.create.time",icon:"calendar"},projecttags:{name:"subordinateProjecttags",key:"basic:project.subordinate.projecttags",icon:"time-view"},suspendedAt:{name:"suspendedAt",key:"basic:project.suspend.time",icon:"archive"},suspendedBy:{name:"suspendedBy",key:"basic:project.suspend.user",icon:"org-user"},startDate:{name:"startDate",key:"basic:project.start.time",icon:"start-date"},endDate:{name:"endDate",key:"basic:project.end.time",icon:"end-date"}},o=function(e){return e.type?"customfield:"+e.id:n[e.id].key},i=r("gNFMJi3i"),a=r("oEuShWjr");function s(e){return e.map(function(e){return"customfield"===e.key?{id:Object(i.e)(e),get name(){return Object(a.a)(e)},isDefault:!1,description:e.customFieldEntity.description,subtype:null,type:e.customFieldEntity.type}:{id:Object(i.e)(e),get name(){return Object(a.a)(e)},isDefault:!0}})}var u=r("sa1Ed382"),c=r("HYobN8SQ"),l=r.n(c),p=r("mrSGxOB2"),f=r("a+N5u/Cl"),d=r.n(f),g=r("tpcZd+E6"),h=r.n(g),m=s(r("XIKSkjsA").h),y=d.a.compose(function(e){var t=e.version,r=e.fields;if(h()(t,"10.17.0")<0){var n=p.f(["suspendedAt","suspendedBy","startDate","endDate"].map(function(e){return m.find(function(t){return t.id===e})}),4),o=n[0],i=n[1],a=n[2],s=n[3];return{version:t,fields:d.a.uniq(r.concat([o,i,a,s]),function(e){return e.id})}}return e},function(e){var t=e.fields;return p.a({},e,{fields:t.filter(function(e){return"subordinateProjecttags"!==e.id})})});function v(){return u.PREFERENCE.get("lastWorkspace")||"default"}var b=new(function(){function e(){this.version=u.version,this.LocalStorage=l.a.namespace("temp").namespace("export-fields-cache")}return e.prototype.getFixedCacheData=function(e){return y(e).fields},e.prototype.get=function(e){var t=this.LocalStorage.namespace(v()).get(e);return t?this.getFixedCacheData(function(e){return d.a.isArray(e)?{version:"0.0.0",fields:e}:e}(t)):[]},e.prototype.set=function(e,t){return this.LocalStorage.namespace(v()).set(e,{version:this.version,fields:t})},e}());r.d(t,"a",function(){return n}),r.d(t,"c",function(){return o}),r.d(t,"b",function(){return s}),r.d(t,"d",function(){return b})},HnrV0Jrl:function(e,t,r){"use strict";var n,o=r("mrSGxOB2"),i=r("q1tIBJhx"),a=r.n(i),s=r("TSYQbtd+"),u=r.n(s),c=r("LvDlAkAJ"),l=r("/onrLvIr"),p=r("YAWvrHae"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){return a.a.createElement("div",o.a({className:p["insert-line"]},this.props),a.a.createElement("div",{className:"line-head"}))},t}(a.a.PureComponent),d=r("n5vI8skG"),g=r.n(d);r.d(t,"a",function(){return n}),r.d(t,"b",function(){return h}),function(e){e.BEGIN="begin",e.MIDDLE="middle",e.END="end"}(n||(n={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){e.stopPropagation(),t.props.canDrag&&0===e.button&&t.callDragHandler(e,t.props.onMousedownDocument)},t.onMouseMove=function(e){t.callDragHandler(e,t.props.onMousemoveDocument)},t.onMouseUp=function(e){t.props.canDrop&&t.callDragHandler(e,t.props.onMouseupDocument)},t.onToggle=function(){t.props.onToggle(t.props.node)},t}return o.d(t,e),t.prototype.callDragHandler=function(e,t){t&&t(this.props.node,e,this.calculateMoveInfo(e))},t.prototype.calculateMoveInfo=function(e){var t=e.nativeEvent,r=e.currentTarget,o=Object(l.c)(e.target,e.currentTarget),i={x:o.left+t.offsetX,y:o.top+t.offsetY},a=r.clientHeight;return{area:function(e,t){var r=e/t;return Object(c.inRange)(r,1/3,2/3)?n.MIDDLE:Object(c.inRange)(r,0,1/3)?n.BEGIN:n.END}(i.y,a),target:this.props.node}},t.prototype.renderInsertLine=function(){if(!this.props.canDrop)return null;var e=this.props,t=e.node,r=e.dragging,o=e.over,i={display:"none"};if(r&&t._id==o.target._id){var s=20*o.target.depth+32,u="calc(100% - "+s+"px)";o.area===n.BEGIN?i={left:s,top:0,width:u}:o.area===n.END&&(i={left:s,width:u})}return a.a.createElement(f,{style:i})},t.prototype.renderNode=function(){var e=this.props,t=e.node,r=e.dragging,o=e.over,i=r&&t._id==o.target._id&&o.area===n.MIDDLE;return this.props.renderNode({depth:t.depth,data:t.data,hasChildren:t.hasChildren,onToggle:this.onToggle,isExpanded:this.props.isExpanded,canDrag:this.props.canDrag,canDrop:this.props.canDrag,isDragOver:i,notAllowedDrop:this.props.notAllowedDrop})},t.prototype.render=function(){var e=this.props,t=e.node,r=e.dragging,o=e.over,i=r&&t._id==o.target._id&&o.area===n.MIDDLE,s=u()(g.a.node,{isDragOver:i});return a.a.createElement("div",{className:s,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp},this.renderNode(),this.renderInsertLine())},t}(a.a.PureComponent)},Hpzfvxp2:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"tap-num-0",use:"tap-num-0-usage",viewBox:"0 0 14 32",content:'<symbol viewBox="0 0 14 32" id="tap-num-0"><path d="M1.5 8.508c0-.864.15-1.632.45-2.304.3-.672.702-1.248 1.206-1.728a5.188 5.188 0 0 1 1.746-1.098A5.754 5.754 0 0 1 6.972 3c.72 0 1.41.126 2.07.378.66.252 1.242.618 1.746 1.098.504.48.906 1.056 1.206 1.728.3.672.45 1.44.45 2.304v15.048c0 .864-.15 1.632-.45 2.304a5.391 5.391 0 0 1-1.206 1.728 5.188 5.188 0 0 1-1.746 1.098c-.66.252-1.35.378-2.07.378-.72 0-1.41-.126-2.07-.378a5.188 5.188 0 0 1-1.746-1.098A5.391 5.391 0 0 1 1.95 25.86c-.3-.672-.45-1.44-.45-2.304V8.508zm3.672 15.048c0 .528.168.966.504 1.314.336.348.768.522 1.296.522s.96-.174 1.296-.522c.336-.348.504-.786.504-1.314V8.508c0-.528-.168-.966-.504-1.314-.336-.348-.768-.522-1.296-.522s-.96.174-1.296.522c-.336.348-.504.786-.504 1.314v15.048z" /></symbol>'});a.a.add(s);t.default=s},IAxPrA1L:function(e,t,r){var n,o,i,a,s,u,c,l,p,f,d,g,h;n=r("+2RfZ2TT"),a=r("a+N5u/Cl"),h=r("sa1Ed382"),u=r("2qRnoGmE"),o=r("bZr3G77e"),i=r("GESwhXbR").Toast,f=r("8y0JNx5d").getFileHost,l=function(e){var t,r;return t=e.downloadUrl,r=e.fileCategory,/^link/.test(r)?window.open(t):n.fileDownload(t)},p=function(e){return e.downloadUrl,null!=window.WebExtensionWin10&&(e.downloadUrl+="&filekey="+e.fileKey+"&workid="+e._id),l(e)},c=function(e){var t;return t={collections:[e],works:[]},s(e._projectId,e.title,t)},s=function(e,t,r){var o;return o=g(),d(e,t,r).then(function(e){return n.fileDownload(o,{httpMethod:"POST",data:e})}).catch(function(e){return i.error({message:tb_i18n.get("download.failed"),description:e})})},g=function(){var e;return e=h.user.get("strikerAuth")||"",f()+"/archive?Signature="+e.split(" ")[1]},d=function(e,t,r){var n,i,s,c,l,p,f;return null==r&&(r={}),c=r.collections||[],f=r.works||[],s=a.pluck(c,"_id"),p=a.pluck(f,"_id"),s.length>0?(n="_collectionIds="+s.join("&_collectionIds="),i="&_workIds="+p.join("&_workIds="),l="projects/"+e+"/download-info?"+n+i,new Promise(function(e,r){return o.get(l,{zipName:t},{silentError:!0,success:e,error:function(e){return r(e.message)}})})):a.chain(f).pluck("fileSize").compact().reduce(function(e,t){return e+t}).value()>u.FILE_MAX_SIZE?Promise.reject(tb_i18n.get("batch.download.error.fileSize.exceed")):Promise.resolve({zipName:t,downloadUrls:f.map(function(e){return e.downloadUrl})})},t.downloadItem=function(e,t){return null==t&&(t="work"),"work"===t?p(e):c(e)},t.downloadFile=l,t.batchDownload=s,t.getStrikerDownloadConfig=g},ICBFVo7D:function(e,t,r){"use strict";r.d(t,"c",function(){return g}),r.d(t,"b",function(){return h}),r.d(t,"g",function(){return m}),r.d(t,"f",function(){return y}),r.d(t,"d",function(){return v}),r.d(t,"a",function(){return b}),r.d(t,"e",function(){return S}),r.d(t,"h",function(){return T});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r("4c1CS0b3"),a=r("IssmDVnT"),s=r("s0r7VfKc"),u=r("HDJEOtNh"),c=r("oRqJmROU"),l=r("2GFv99bj"),p=r("2emWbNH6"),f=r("RIjxGFt6"),d=r("zxyTAlCn"),g=function(e,t,r,n){void 0===t&&(t=d.a.All),void 0===n&&(n={});var o="",i=e.join(", ");return o="string"==typeof r&&"complete"===i?"isDone = true AND _sprintId = "+r:"sprintStatus IN "+function(e,t){void 0===t&&(t={});var r=e.join(", ");return t.useSquareBracket?"["+r+"]":"("+r+")"}(e,{useSquareBracket:n.useSquareBracket}),t&&(o+=" AND "+Object(f.taskLayerToTQL)(t,n.useSquareBracket)),o},h=function(e){var t=e.projectId,r=e.smartGroupId,a=e.statuses,c=e.taskLayer,l=e.scenarioFieldConfigId,p=e.sprintId,d=a||[],h={filter:g(d,c,p,{useSquareBracket:!0})};return i.Observable.combineLatest(d.map(function(e){var r={status:e};return s.default.getProjectSprints(t,r).changes()})).debounceTime(100).map(function(e){return o.flatten(e)}).map(function(e){return e.map(function(e){return e._id})}).switchMap(function(e){var o=[n.a({_sprintId:{$in:n.h(e,[p])}},c?Object(f.taskLayerToRDBQuery)(c):void 0)];l&&o.push({_scenariofieldconfigId:l});var i=u.ProjectAccess.hasProjectPrivacyPermission(t);return s.default.getSmartGroupProjectTasks(t,r,o,i,{urlQuery:h}).changes()})},m=function(e,t){void 0===t&&(t={});var r="_sprintId=null";return e.taskLayer&&(r+=" AND "+Object(f.taskLayerToTQL)(e.taskLayer,t.useSquareBracket)),Object(c.c)(e.isDone)&&(r+=" AND isDone="+e.isDone),r},y=function(e,t,r,o){void 0===o&&(o={});var i={filter:m({taskLayer:r,isDone:o.isDone},{useSquareBracket:!0})},a=[n.a({_sprintId:{$isNull:!0}},r?Object(f.taskLayerToRDBQuery)(r):void 0)];o.scenarioFieldConfigId&&a.push({_scenariofieldconfigId:o.scenarioFieldConfigId}),Object(c.c)(o.isDone)&&a.push({isDone:o.isDone});var l=u.ProjectAccess.hasProjectPrivacyPermission(e);return s.default.getSmartGroupProjectTasks(e,t,a,l,{urlQuery:i}).changes()},v=function(e,t){return void 0===t&&(t={}),t.taskLayer?"_sprintId="+e+" AND "+Object(f.taskLayerToTQL)(t.taskLayer,t.useSquareBracket):"_sprintId="+e},b=function(e,t,r,o){void 0===o&&(o={});var i=o.taskLayer,a={filter:v(r,{useSquareBracket:!0,taskLayer:i})},c=[n.a({_sprintId:r},i?Object(f.taskLayerToRDBQuery)(i):void 0)],l=u.ProjectAccess.hasProjectPrivacyPermission(e);return s.default.getSmartGroupProjectTasks(e,t,c,l,{urlQuery:a}).changes()};function _(e,t,r,i,a){return void 0===a&&(a={}),{dbQuery:[n.a({isDone:i,_scenariofieldconfigId:r},a.taskLayer?Object(f.taskLayerToRDBQuery)(a.taskLayer):void 0)],urlQuery:{filter:o.compact(["isDone = "+i,a.taskLayer&&Object(f.taskLayerToTQL)(a.taskLayer,a.useSquareBracket),t.filter]).join(" AND ")}}}function S(e){var t=e.projectId,r=e.smartGroup,n=e.scenarioFieldConfigId,o=e.me,i=e.showAll,a=_(0,r,n,!1,{taskLayer:e.taskLayer,useSquareBracket:!0}),u=a.dbQuery,c=a.urlQuery,p=s.default.fetch.getSmartGroupProjectTasks(t,r._id,c);return Object(l.a)(s.default,p,t,o,u,{showAll:i}).changes()}function T(e){var t=e.projectId,r=e.smartGroup,n=e.scenarioFieldConfigId,o=e.me,u=e.showAll,c=e.taskLayer,f=e.pageSize,d=e.loadMore$,g=_(0,r,n,!0,{taskLayer:c,useSquareBracket:!0}),h=g.dbQuery,m=g.urlQuery,y=Object(p.a)(t,r._id),v=a.Page.defaultState(y,{kind:a.Page.Kind.PageCount,urlQuery:m,pageSize:f}),b=[{fieldName:"accomplished",orderBy:"DESC"}];return s.default.fetch.expandPage(v,{loadMore$:d,skipConcat:!0}).switchMap(function(e){var r=a.Page.queryInfo(e),n=r.patch,c=r.limit,p=i.Observable.of(n||[]);return Object(l.a)(s.default,p,t,o,h,{showAll:u,limit:c,orderBy:b}).changes().map(function(t){return{tasks:t,hasMore:e.hasMore}})})}},ISwK6kId:function(e,t,r){"use strict";r.d(t,"b",function(){return u}),r.d(t,"a",function(){return c});var n=r("a+N5u/Cl"),o=r("n0MKG6gI"),i=r("zT6SYcu2");function a(e,t,r){void 0===r&&(r="'");var n=i.g.word;return[i.f.RangeText,i.f.Text,i.f.StrictText].indexOf(t)>-1&&(n=i.g.string),{type:n,value:e,quote:r}}function s(e,t,r){var s,u=r.field,c=r.matchTextMode,l=r.aggregation;switch(t){case i.f.RangeText:return e.values.map(function(e){return{field:{type:i.g.field,fieldType:"text",value:e},type:i.g.expression,op:i.c.beq,value:a("",t)}});case i.f.Text:return e.value.length?(s=Object(o.b)(e.value),[{field:{type:i.g.field,fieldType:u,value:u},type:i.g.expression,op:i.c.beq,value:a(s.escapedQuery,t,s.quote)}]):[];case i.f.StrictText:return s=Object(o.b)(e.value),[{field:{type:i.g.field,fieldType:u,value:u},type:i.g.expression,op:i.c.eq,value:a(s.escapedQuery,t,s.quote)}];case i.f.Date:case i.f.Number:return null===e.relative?[{field:{type:i.g.field,fieldType:u,value:u},type:i.g.expression,op:i.c.eq,value:a("null",t)}]:n.compact([null!==e.max&&{field:{type:i.g.field,fieldType:u,value:u},type:i.g.expression,op:i.c.le,value:a(e.max,t)},null!==e.min&&{field:{type:i.g.field,fieldType:u,value:u},type:i.g.expression,op:i.c.ge,value:a(e.min,t)}]);default:return e.values.map(function(e){var r,n,p="'",f=!!c;return f&&(e=(s=Object(o.b)(String(e),c===i.b.exact)).escapedQuery,p=s.quote),l?(r=i.c.in,n={value:e.map(function(e){return a(e,t,p)}),type:i.g.array}):f?(r=i.c.beq,n={value:e,quote:p,type:i.g.string}):(r=i.c.eq,n=a(e,t,p)),{op:r,field:{type:i.g.field,fieldType:u,value:u},value:n,type:i.g.expression}})}}function u(){return{text:c({values:["text"]},i.f.RangeText),isInArchivedProject:c({values:["false"]},i.f.Select),isArchived:c({values:["false"]},i.f.Select)}}function c(e,t,r){return{type:i.g.expression,logic:t===i.f.Date||t===i.f.Number?"AND":"OR",values:s(e,t,r||{})}}},Ix19R6XQ:function(e,t,r){"use strict";var n=r("IssmDVnT");n.SDKFetch.prototype.createTaskflowStatus=function(e,t){var r={name:t.name,_prevId:t.prevStatusId};return this.post("taskflows/"+e+"/taskflowstatus",r)},n.SDK.prototype.createTaskflowStatus=function(e,t){return this.lift({method:"create",tableName:"TaskflowStatus",request:this.fetch.createTaskflowStatus(e,t)})}},Ix24LjFp:function(e,t,r){e.exports={"flying-node":"flying-node__2DSl"}},J6lI8p1l:function(e,t,r){"use strict";r.d(t,"i",function(){return h}),r.d(t,"h",function(){return m}),r.d(t,"e",function(){return y}),r.d(t,"g",function(){return v}),r.d(t,"d",function(){return b}),r.d(t,"j",function(){return _}),r.d(t,"b",function(){return S}),r.d(t,"a",function(){return T}),r.d(t,"c",function(){return j}),r.d(t,"f",function(){return A});var n,o=r("mrSGxOB2"),i=r("NOGqly5s"),a=r("6SzIBtPz"),s=r("s0r7VfKc"),u=r("a+N5u/Cl"),c=r("4c1CS0b3"),l=r("gh8QIhMV"),p=r("3eMzznN/"),f=Object(a.a)("REQUEST_POSTS"),d=Object(a.a)("POSTS_REJECTED"),g=Object(a.a)("POSTS_FULFILLED"),h=Object(a.a)("SWITCH_POSTS_SECTION"),m=Object(a.a)("SWITCH_POSTS_ORDER_BY"),y=Object(a.a)("POSTS_PAGING"),v=Object(a.a)("SELECT_A_POST"),b=Object(a.a)("PATCH_POSTS_DATA"),_=Object(a.a)("TOGGLE_POSTS_MENU"),S=Object(a.a)("CLOSE_POSTS"),T=Object(a.a)("BOOTSTRAP_POSTS");function E(e,t){var r=e.getState().ui.posts;return t?r[t]:r}var O=function(e){return u.pick(e,"orderBy","page","projectId","section","userId","postIdFromUrl")},w=function(e){return u.pick(e,"section","orderBy")};function C(e){var t,r=["pin"],n=["created","lastCommentedAt"];switch(e){case"created":case"lastCommentedAt":r.push(e),t=n.filter(function(t){return t!==e});break;default:t=n}return o.h(r,t).map(function(e){return{fieldName:e,orderBy:"DESC"}})}var I,k=(I={all:function(e){return s.default.getAllProjectPosts(e.projectId,{count:e.pageSize,page:e.page,type:e.section,orderBy:C(e.orderBy)})},my:function(e){return s.default.getMyProjectPosts(e.userId,e.projectId,{count:e.pageSize,page:e.page,type:e.section,orderBy:C(e.orderBy)})}},function(e,t){var r,n,o=t.section,i=I[o](t);return{query:(r=e.payload,n=t,r&&r.section===n.section&&r.orderBy===n.orderBy&&n.page>1?e.query.concat(i):i),payload:t}}),j=Object(i.a)(function(e,t){return e.ofType(""+T).map(function(e){return O(e.payload)}).map(function(e){return o.a({},e,w(E(t)))}).map(f)},function(e,t){return e.ofType(""+f).map(function(e){return e.payload}).scan(function(e,r){return r.pageSize=E(t,"pageSize"),k(e,r)},{query:null,payload:null}).switchMap(function(t){return t.query.changes().takeUntil(e.ofType(""+S)).catch(function(e){return Object(l.throwError)(e),c.Observable.of(d())})}).map(g)},function(e,t){return e.ofType(""+y,""+h,""+m).map(function(){return O(E(t))}).map(f)},function(e,t){return e.ofType(""+b).filter(function(e){var r=e.payload;return!(!r||!r.postIdFromUrl||r.section!==E(t,"section"))}).map(function(e){return e.payload.postIdFromUrl}).map(v)}),A=Object(a.b)(((n={})[""+g]=function(e,t){var r,n=t.payload||[],i=n.length,a=i===e.pageSize*e.page,s=[],u=null,c=e.currentId||e.postIdFromUrl||e.savedCurrentId;return n.forEach(function(e){r=p.genPostDescription(e),s.push(o.a({},e,{description:r})),u=u||e._id===c&&c||null}),u||(u=!i?null:n[0]._id),o.a({},e,{posts:s,hasMore:a,currentId:u,isLoading:!1})},n[""+d]=function(e){return o.a({},e,{isLoading:!1})},n[""+h]=function(e,t){return o.a({},e,t.payload,{page:1})},n[""+v]=function(e,t){return o.a({},e,{currentId:t.payload})},n[""+m]=function(e,t){return o.a({},e,{page:1,orderBy:t.payload})},n[""+y]=function(e){return o.a({},e,{page:e.page+1})},n[""+b]=function(e,t){var r=t.payload||{};return r.postIdFromUrl?o.a({},e,r,{currentId:null}):o.a({},e,r)},n[""+f]=function(e){return o.a({},e,{isLoading:!0})},n[""+S]=function(e){return o.a({},w(e),{currentId:null,savedCurrentId:e.currentId})},n[""+T]=function(e,t){return o.a({},t.payload,e)},n),{})},JYfZVjQh:function(e,t,r){e.exports=r.p+"images/jinshuju-0.94ea5ef6.png"},"JcXuB+uV":function(e,t,r){"use strict";r.d(t,"g",function(){return n}),r.d(t,"e",function(){return o}),r.d(t,"b",function(){return i}),r.d(t,"f",function(){return a}),r.d(t,"c",function(){return s}),r.d(t,"d",function(){return u}),r.d(t,"a",function(){return c});var n=296,o=8,i=48,a="kanban-scroll-container",s=12,u=192,c="has-permission"},"Jvpq/adM":function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("4c1CS0b3"),i=r("s0r7VfKc"),a=r("IssmDVnT"),s=function(e){return i.default.fetch.get("tags",{_projectId:e})},u=function(e){return i.default.fetch.get("v2/tasklists/"+e+"/tasks")},c=function(e,t){return void 0===t&&(t={}),i.SocketUpdateInterceptor.IgnoreOnce(e,5e3),i.default.fetch.put("tasks/"+e+"/move",t)};r.d(t,"a",function(){return l}),r.d(t,"b",function(){return p}),r.d(t,"h",function(){return f}),r.d(t,"f",function(){return d}),r.d(t,"i",function(){return g}),r.d(t,"g",function(){return h}),r.d(t,"c",function(){return m}),r.d(t,"e",function(){return y}),r.d(t,"j",function(){return v}),r.d(t,"d",function(){return b});var l=["_id","name","avatarUrl"],p=["_id","name","avatarUrl"],f=["_id","name","order"],d=["_id","_creatorId","_executorId","isDone","content","parent","_taskId"],g=["_id","_taskflowId","kind","name","pos","rejectStatusIds"],h=["_id","name"],m=function(e){return i.default.lift({cacheValidate:a.CacheStrategy.Request,tableName:"Tag",request:s(e),query:{where:[{_projectId:e,$or:[{isArchived:!1},{isArchived:null}]}],orderBy:[{fieldName:"updated",orderBy:"DESC"}]}}).changes()},y=function(e){return i.default.lift({cacheValidate:a.CacheStrategy.Request,tableName:"Task",request:u(e),query:{where:[{_tasklistId:e},{isArchived:!1}]},assocFields:{executor:p,stage:f}}).changes()},v=function(e,t){return void 0===t&&(t={}),i.default.lift({method:"update",tableName:"Task",request:c(e,t),clause:{_id:e}})},b=function(e){return o.Observable.combineLatest(i.default.getTasklistStages(e).changes(),i.default.getTasklist(e).changes().map(function(e){var t=n.f(e,1)[0];return t?t.stageIds:[]})).map(function(e){var t=n.f(e,2),r=t[0],o=t[1];return r.length===o.length&&(r=r.map(function(e){var t=o.indexOf(e._id);return t>=0&&(e.order=t),e})),r=r.sort(function(e,t){return e.order-t.order})})}},KAy9iCWM:function(e,t,r){},"KIkj+38N":function(e,t,r){"use strict";r.r(t),r.d(t,"isEqualArraySet",function(){return i});var n=r("a+N5u/Cl"),o=r.n(n),i=function(e,t){return!(!e||!t||e.length!==t.length)&&(!o.a.difference(e,t).length&&!o.a.difference(t,e).length)}},KSXnA8QZ:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r("q1tIBJhx"),o=r.n(n),i=r("+2RfZ2TT"),a=r.n(i),s=r("ZHQdWuUF"),u=r.n(s),c=function(e){var t=Object(n.useRef)(null);return Object(n.useEffect)(function(){var r=t.current&&t.current.querySelector("a");return r&&a()(r).one("click",e.onClick),function(){r&&a()(r).off("click")}},[t,e.onClick]),o.a.createElement("span",{ref:t,className:u.a["raw-html-with-anchor-formatter"],dangerouslySetInnerHTML:{__html:e.html}})}},KlEKgzUp:function(e,t){e.exports="\nfragment projecttagsSchema on ProjectTag {\n  name\n  _id\n  pos\n}\n"},KrjRt4fZ:function(e,t,r){e.exports={"custom-view-wrapper":"custom-view-wrapper__2HPO","view-icon":"view-icon__cOky","custom-view":"custom-view__135O","view-name":"view-name__2e2q","view-menu-trigger":"view-menu-trigger__2ORo","menu-item":"menu-item__29gk",modal:"modal__2FnP","modal-title":"modal-title__1oSS","edit-name-wrapper":"edit-name-wrapper__3Jmz","item-title":"item-title__16FH","modal-error-hint":"modal-error-hint__29D3","modal-delete-buttons":"modal-delete-buttons__2WFF","modal-save":"modal-save__3CTh","modal-delete-hint":"modal-delete-hint__2TCV","confirm-contnet":"confirm-contnet__3iU1","confirm-button-group":"confirm-button-group__2ZAw"}},KxHPiOLo:function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a});var n=r("tLZJUYWX"),o=r("EcZ0z2mK"),i=[{type:o.b.WorkItem,name:function(){return n.get("aone.search.type.workitem")}},{type:o.b.App,name:function(){return n.get("aone.search.type.app")}},{type:o.b.Cr,name:function(){return n.get("aone.search.type.cr")}},{type:o.b.Sprint,name:function(){return n.get("aone.search.type.sprint")}},{type:o.b.TestJob,name:function(){return n.get("aone.search.type.testjob")}},{type:o.b.TestCase,name:function(){return n.get("aone.search.type.testcase")}},{type:o.b.Doc,name:function(){return n.get("aone.search.type.doc")}}],a=[o.a.WorkItem,o.a.App,o.a.Cr,o.a.Sprint,o.a.TestJob,o.a.TestCase,o.a.Doc]},L15bjuDV:function(e,t,r){e.exports={customfield__loading:"customfield__loading__tL3c",loading:"loading__1A_l",avator:"avator__2m6a",inner:"inner__1Qcg",placeholder:"placeholder__B2wl"}},L2bYkKUI:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABGdBTUEAALGPC/xhBQAABIJJREFUaAXtWklLI0EUfmlj3OKC+y4qqBCIBxe8eBlkYPwBHjx7mev8kLnJXDx78Co4Ipq7IooBRfGgRtxQxCW4RI1TX2G1nbaTqm5bTcM86KSq3uvv+15119JJ+8hkk5OTIU3TxpLJ5Hefz9f8/PwcNIV8apVpiDMNMaZpjmmaGB0dXTcK8InK1NRU4Onp6TcL/snaNNGeZd9JltCfnJycXyMjIwlo4wm8iP/LxH/LMsGWclgSEZbEDyTBe/ql5z0hHhmho6EZZR/uefYdZUe23jbQaWVJ1hhmY0MbYwWviUdCXLuG2QY1Lxq0a5gqvSgemqFdYwPiS+f593QetHvx3k/J2Z9Ss1EJBoMUDoeppqaG8vPzbZz5Gnp3d0cnJycUjUYpHo+/OmyUHCVQUlJCQ0NDlJeXZ4PqbSgSb2lpodraWpqfn6erq6u3QZIWRwn09fXp4vf29ujy8lJCY+0uLS3lCaAjgLmwsGAdmKHVdgKVlZVUXV3NITc3N2l1dTUDvNx1e3tLXV1dHBPYZ2dn8pMMEbYHMchgbCmnjY0NA5SzIjCABRPYdpBsJVBUVEQNDQ0cf3d3l+7v7+1wWcYCA1gwYIPDjtlKoLOzE+s3x9/a2rLDkzFWYAEbHHZMOYHc3Fxqa2vj2IeHh44HrpU4TAJHR0fcBQ5wqZpyAu3t7Tqw6DFVEpU4TAgwiAeXqiklwPYc1NHRwTEvLi7o+PhYFV85DpjAhoELnCqmlEBzc7M+uERPqYDbjRHYGMjgVDGlBMTAwpyNheujDNjggAlOGZc0gaqqKqqoqOA429vbxPbgMkzHfmCDAwZOcMtMuhIbFxdc1rq6OktMbMaWl5fp8fHR0i8a/X4/9fb2EjaDVmacgcB9enpqFaa3SROor6/Xg8vKyvSyuYDeYvtzWlxcNLtS6j09PdTa2prSlq5i5E4XI01ALFzX19eEw8rQm9ihYg6PxWL6nG6OxdUTawl2num20MXFxYRDcJtxjHVpAiJ4Z2eH1tdTfhQTLiooKKDh4WEKBALU399PMzMz9PDwoPtRwK0BHyyRSFAkEtEHLG80fIRCIf6sYWhKW1ROIC0Cc2DmWFlZoYGBASosLOTf+/v7Kac0NTVxHxoRK2ablCAHFVcSAC+uEERiQ9bY2MgPKz0HBwc81srnpE06jdoBXVpaopubm7SnwIcYN821KwBReMadnp5O+4wMv9vriHICqnsTCMx0FVR6X5ULWNJbSEyd5eXlKtyuxAguwZ0JVHoFsEvEnIzBOTg4SOfn55nw3u2DePHUp7LrlSawtrbGtw9YrDLNLu9WbgLAIgdumUkTwII0OztL3d3d/PcbXI2PNNw26HmINy+GVrzSBHASgLBRy0aTDuJsFG3U9D8BY298RRl/cDj7Wfgr1Jo4oR1/cMRM7Z6pQjt7ZtDmPKPYJBTa8SffBGv/uCd1E6mLVSY9OaHh3QN2L/1xEfhToKAZ2vk0incPWEPkU5hdIIFWaAYUTwDvHODdA+YYZ23ZfDvhZY9x8Z4EEnjzA6TXXrf5B3PfpryAVcnGAAAAAElFTkSuQmCC"},L4lJ71Hm:function(e,t,r){e.exports={wrap:"wrap__1zxb"}},LRkdc6RD:function(e,t,r){e.exports=r.p+"images/tableView-1.a940c48f.png"},LSIBDi4B:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("AsfohlkG"),o=r("zT6SYcu2"),i=["executorId","creatorId","involveMembers"],a=function(e,t){var r;return i.indexOf(e)>=0||t===o.a.Member?r=n.c.member:"projectId"===e?r=n.c.project:"scenariofieldconfigId"===e?r=n.c.scenariofieldconfig:"tagId"===e?r=n.c.tagId:"sprintId"===e&&(r=n.c.sprintId),r}},LTPoIfvT:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"tap-num-percent",use:"tap-num-percent-usage",viewBox:"0 0 14 32",content:'<symbol viewBox="0 0 14 32" id="tap-num-percent"><path d="M4.06 8.868c.24 0 .45-.09.63-.27.18-.18.27-.402.27-.666V6.096a.905.905 0 0 0-.27-.666.863.863 0 0 0-.63-.27c-.24 0-.45.09-.63.27a.905.905 0 0 0-.27.666v1.836c0 .264.09.486.27.666.18.18.39.27.63.27zm0 2.16c-.936 0-1.68-.252-2.232-.756C1.276 9.768 1 9.108 1 8.292v-2.34c0-.912.276-1.632.828-2.16C2.38 3.264 3.124 3 4.06 3c.936 0 1.68.264 2.232.792.552.528.828 1.248.828 2.16v2.34c0 .816-.276 1.476-.828 1.98-.552.504-1.296.756-2.232.756zm5.004 14.94c0 .264.09.486.27.666.18.18.39.27.63.27s.45-.09.63-.27c.18-.18.27-.402.27-.666v-1.836a.905.905 0 0 0-.27-.666.863.863 0 0 0-.63-.27c-.24 0-.45.09-.63.27a.905.905 0 0 0-.27.666v1.836zm.9 3.096c-.936 0-1.68-.252-2.232-.756-.552-.504-.828-1.164-.828-1.98v-2.34c0-.912.276-1.632.828-2.16.552-.528 1.296-.792 2.232-.792.936 0 1.68.264 2.232.792.552.528.828 1.248.828 2.16v2.34c0 .816-.276 1.476-.828 1.98-.552.504-1.296.756-2.232.756zm.252-25.848h2.376L3.808 28.848H1.432l8.784-25.632z" /></symbol>'});a.a.add(s);t.default=s},"Lh5+POaI":function(e,t,r){e.exports={"member-menu":"member-menu__3Lxj","member-menu-body-component":"member-menu-body-component__1JN-","search-wrap":"search-wrap__3ows",focused:"focused__aV96","search-input":"search-input__hf4v","clear-input":"clear-input__1T-k"}},LiDyQ5v5:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"tap-num-4",use:"tap-num-4-usage",viewBox:"0 0 14 32",content:'<symbol viewBox="0 0 14 32" id="tap-num-4"><path d="M7.808 24.816H.5V21.36L5.792 3H9.68L4.172 21.36h3.636v-7.308h3.672v7.308h1.764v3.456H11.48v3.816H7.808z" /></symbol>'});a.a.add(s);t.default=s},LzIVR7qZ:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r("6SzIBtPz"),a=r("peh1clMB"),s=function(e,t,r){var s,u=Object(i.a)(e+"_TOGGLE_SELECTION"),c=Object(i.a)(e+"_SET_SELECTIONS"),l=Object(i.a)(e+"_TOGGLE_ALL_SELECTION"),p=Object(i.a)(e+"_CLEAR_SELECTIONS"),f={singleSelections:{}},d=((s={})[""+u]=function(e,r){var o,i=t(r.payload),a=!!e.singleSelections[i],s=n.a({},e.singleSelections,((o={})[i]=!a,o));return n.a({},e,{singleSelections:s})},s[""+c]=function(e,r){var o=r.payload.items,i=r.payload.selected,a=e.singleSelections;return o.forEach(function(e){var r;a=n.a({},a,((r={})[t(e)]=i,r))}),n.a({},e,{singleSelections:a})},s[""+l]=function(e,r){var i=r.payload,a=o.values(e.singleSelections).filter(function(e){return e}),s=i.length>0&&i.length===a.length,u={};return i.forEach(function(e){u[t(e)]=!s}),n.a({},e,{singleSelections:u})},s[""+p]=function(e){return n.a({},e,f)},s),g=function(e){return e.singleSelections},h=Object(a.createSelector)(r,g,function(e,r){return void 0===e&&(e=[]),e.map(function(e){return n.a({},e,{selected:!!r[t(e)]})})}),m=Object(a.createSelector)(r,g,function(e,r){return void 0===e&&(e=[]),e.map(t).filter(function(e){return r[e]})}),y=Object(a.createSelector)(r,g,function(e,t){void 0===e&&(e=[]);var r=o.chain(e).filter(function(e){return t[e._id]}).groupBy(function(e){return e.fileKey?"work":"collection"}).value();return{work:r.work||[],collection:r.collection||[]}}),v=Object(a.createSelector)(r,m,function(e,t){return void 0===e&&(e=[]),e.length>0&&e.length===t.length});return{action:{toggleSelection:u,setSelections:c,toggleAllSelection:l,clearSelections:p},reducer:d,defaultState:f,reselect:{assignSelections:h,getSelections:m,getSelectAll:v,getSelectItems:y}}}},M31RQLwG:function(e,t,r){e.exports={"group-menu-trigger":"group-menu-trigger__3HbM","group-menu-popup-title":"group-menu-popup-title__Lbx2","group-menu-popup":"group-menu-popup__2tGX"}},MWiWfNEw:function(e,t,r){var n,o,i={}.hasOwnProperty;n=r("VuB9cZyl"),o=r("q6u3XLOb"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="sprints",t.prototype.model=o,t.prototype.url=function(){return"projects/"+this._boundToObjectId+"/"+this.name},t.prototype.comparator="created",t.prototype.sync=function(e,r,n){return n.url=this.url(),t.__super__.sync.apply(this,arguments)},t}()},MinzmEda:function(e,t,r){"use strict";r.r(t),r.d(t,"setScrumPanelOpen",function(){return a}),r.d(t,"getScrumPanelOpenObservable",function(){return s}),r.d(t,"setFilterStatus",function(){return l}),r.d(t,"getFilterStatus",function(){return p}),r.d(t,"getFilterObservable",function(){return f});var n=r("8yf6doCl"),o=r("nDsjpj50"),i=new n.Subject,a=function(){return i.next()},s=function(){return i.asObservable()},u=!1,c=new o.BehaviorSubject(!1),l=function(e){u=e,c.next(e)},p=function(){return u},f=function(){return c.distinctUntilChanged()}},MmYzUhjM:function(e,t,r){"use strict";r.r(t),r.d(t,"UNLIMIT_MEMBERS",function(){return s}),r.d(t,"CRITICAL_PERIOD",function(){return u}),r.d(t,"VERY_CRITICAL_PERIOD",function(){return c}),r.d(t,"PERSONAL_PROJECT_MEMBER_QUOTA",function(){return l}),r.d(t,"MIGRATION_PRICE",function(){return p}),r.d(t,"MIGRATION_PERIOD",function(){return f}),r.d(t,"OrganizationPaymentPlanPayType",function(){return i}),r.d(t,"UserPaymentPlanPayType",function(){return a}),r.d(t,"getPayType",function(){return d}),r.d(t,"getFileSizeLimit",function(){return g});var n=r("80gYlwjC"),o=r("2qRnoGmE");r.d(t,"FILE_FREE_SIZE",function(){return o.FILE_FREE_SIZE}),r.d(t,"FILE_MAX_SIZE",function(){return o.FILE_MAX_SIZE});var i,a,s=9999,u=30,c=7,l=10,p={NORMAL:"2490",HALF:"1299",OLD:"4990"},f=30;!function(e){e.ORGANIZATION="organization"}(i||(i={})),function(e){e.PROFESSIONAL="professional",e.FREE="free"}(a||(a={}));var d=function(e){return e?e.ofUser()?e.isPaid?a.PROFESSIONAL:a.FREE:i.ORGANIZATION:a.FREE},g=function(e){return e?e.ofUser()&&e.isFree?o.FILE_FREE_SIZE:o.FILE_MAX_SIZE:o.FILE_FREE_SIZE};n.Payment.configure({FREE:o.FREE,CRITICAL_PERIOD:u,PERSONAL_PROJECT_MEMBER_QUOTA:l,PERSONAL_PROJECT_MEMBER_QUOTA_LIMIT:s,VERY_CRITICAL_PERIOD:c})},Mnrsus5c:function(e,t,r){e.exports={"board-view-mode-trigger":"board-view-mode-trigger__1fQc","filter-trigger":"filter-trigger__3-M0"}},N99aBceX:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"subtask",use:"subtask-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="subtask"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#69D0CA" rx="2" /><path stroke="#FFFFFF" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7.041 8.263l1.985 2.105 4.549-4.723M6.308 13.877h7.693" /></g></symbol>'});a.a.add(s);t.default=s},NDHLXIeW:function(e,t,r){e.exports=r.p+"images/timeview-0.ccb148ed.png"},NN9oPjpy:function(e,t){e.exports=function(e){var t='<div class="modal-view modal-dialog"> ';return(e.title||e.modalClose)&&(t+=' <header class="modal-header '+(e.title?"":"no-title")+" "+("left"===e.titlePosition?"title-left":"")+'"> ',e.title&&(t+=' <h4 class="modal-title">'+e.title+"</h4> "),t+=' <a class="modal-close pull-right icon icon-remove" data-dismiss="modal"></a> </header> '),t+=' <div class="modal-body"></div></div>'}},NPtG5Xaa:function(e,t,r){e.exports=r.p+"images/groupchat-2.1c62bfc7.png"},NQM26xch:function(e,t,r){"use strict";r.d(t,"a",function(){return h}),r.d(t,"c",function(){return m}),r.d(t,"b",function(){return y});var n,o,i=r("mrSGxOB2"),a=r("6SzIBtPz"),s=r("NOGqly5s"),u=r("4c1CS0b3"),c=r("a+N5u/Cl"),l=r.n(c),p=r("s0r7VfKc"),f=r("oRqJmROU"),d={isFetched:!1,invisibleTasksAmount:0,hasMore:!1,tasks:[],totalSize:null,scenarios:[],scenarioDisplayed:!1},g=function(e){return"LIST_VIEW/"+e},h={mounted:Object(a.a)(g("MOUNTED")),mountedSuccess:Object(a.a)(g((o="MOUNTED",o+"/SUCCESS"))),unmount:Object(a.a)(g("UNMOUNT")),onError:Object(a.a)(g(function(e){return e+"/FAILURE"}("ON_ERROR")))},m=Object(a.b)(((n={})[""+h.mounted]=function(e,t){var r=t.payload.projectId;return i.a({},e,{projectId:r})},n[""+h.mountedSuccess]=function(e,t){var r=t.payload,n=r.tasks,o=void 0===n?[]:n,a=r.scenarios,s=void 0===a?[]:a,u=r.hasMore,c=r.totalSize,l=r.invisibleTasksAmount,p=[s.length>1,1===s.length&&s[0].displayed].some(function(e){return e});return i.a({},e,{isFetched:!0,invisibleTasksAmount:l,hasMore:u,tasks:o,totalSize:c,scenarios:s,scenarioDisplayed:p})},n[""+h.unmount]=function(){return d},n),d),y=Object(s.a)(function(e){return e.ofType(""+h.mounted).filter(f.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.taskflowEnabled,a=r.tasks$;return u.Observable.combineLatest(p.default.getScenarioFieldConfigs(n,"task",{withTaskflowstatus:o}),a).map(function(e){var t=i.f(e,2),r=t[0],n=t[1];return h.mountedSuccess({invisibleTasksAmount:n.invisibleCount,hasMore:n.hasMore,tasks:n.result,totalSize:l.a.isNumber(n.totalCount)?n.totalCount:null,scenarios:r})}).takeUntil(e.ofType(""+h.unmount)).catch(function(){return u.Observable.of(h.onError)})})})},NSliPjIn:function(e,t,r){"use strict";r.r(t),r.d(t,"getUnsetSprint",function(){return h}),r.d(t,"getUnsetProject",function(){return m}),r.d(t,"actions",function(){return v}),r.d(t,"reducer",function(){return E}),r.d(t,"epic",function(){return O});var n,o=r("mrSGxOB2"),i=r("a+N5u/Cl"),a=r.n(i),s=r("6SzIBtPz"),u=r("NOGqly5s"),c=r("4c1CS0b3"),l=r("tLZJUYWX"),p=r("s0r7VfKc"),f=r("gh8QIhMV"),d=r("bvmrLhnu"),g=function(e){return"TASK_LOCATOR/"+e},h=function(){return{_id:"default",name:l.get("none")}},m=function(){return{_id:"default",name:l.get("project.selector.project.unset")}},y={projects:null,tasklists:null,stages:null,sprints:null,scenarioFields:null,taskflowStatuses:null,projectList:null,hideIndieEntry:!1,organizationId:void 0,noFilter:!1,selectedProject:null,selectedTasklist:null,selectedStage:null,selectedSprint:null,selectedScenarioField:null,selectedTaskflowStatus:null,stageSelectorOpened:!1,tasklistSelectorOpened:!1,sprintSelectorOpened:!1,scenarioSelectorOpened:!1,taskflowStatusOpened:!1},v={bootstrapTaskLocator:Object(s.a)(g("BOOTSTRAP_TASK_LOCATOR")),readDataSuccess:Object(s.a)(g("READ_DATA_SUCCESS")),fetchTasklistsByProject:Object(s.a)(g("FETCH_TASKLISTS_BY_PROJECT")),fetchTasklistsByProjectFailed:Object(s.a)(g("FETCH_TASKLISTS_BY_PROJECT_FAILED")),fetchStagesByTasklist:Object(s.a)(g("FETCH_STAGES_BY_TASKLIST")),fetchStagesByTasklistFailed:Object(s.a)(g("FETCH_STAGES_BY_TASKLIST_FAILED")),setCertainTasklist:Object(s.a)(g("SET_CERTAIN_TASKLSIT")),fetchSprintsByProject:Object(s.a)(g("FETCH_SPRINTS_BY_PROJECT")),fetchSprintsByProjectFailed:Object(s.a)(g("FETCH_SPRINTS_BY_PROJECT_FAILED")),fetchScenarioFieldsByProject:Object(s.a)(g("FETCH_SCENARIO_FIELDS_BY_PROJECT")),fetchScenarioFieldsByProjectSuccess:Object(s.a)(g("FETCH_SCENARIO_FIELDS_BY_PROJECT")),fetchScenarioFieldsByProjectFailed:Object(s.a)(g("FETCH_SCENARIO_FIELDS_BY_PROJECT")),selectProject:Object(s.a)(g("SELECT_PROJECT")),selectProjectFailed:Object(s.a)(g("SELECT_PROJECT_FAILED")),updateProject:Object(s.a)(g("UPDATE_PROJECT")),selectTasklist:Object(s.a)(g("SELECT_TASKLIST")),selectStage:Object(s.a)(g("SELECT_STAGE")),selectSprint:Object(s.a)(g("SELECT_SPRINT")),selectScenarioField:Object(s.a)(g("SELECT_SCENARIO_FIELD")),selectTaskflowStatus:Object(s.a)(g("SELECT_TASKFLOW_STATUS")),toggleTasklistSelector:Object(s.a)(g("TOGGLE_TASKLIST_SELECTOR")),toggleStageSelector:Object(s.a)(g("TOGGLE_STAGE_SELECTOR")),toggleSprintSelector:Object(s.a)(g("TOGGLE_SPRINT_SELECTOR")),toggleScenarioSelector:Object(s.a)(g("TOGGLE_SCENARIO_SELECTOR")),toggleStatusSelector:Object(s.a)(g("TOGGLE_STATUS_SELECTOR")),exitTaskLocator:Object(s.a)(g("EXIT_TASK_LOCATOR"))},b=function(e){return function(t){var r;return o.a({},t,((r={})[e]=[],r))}},_=function(e){return function(t,r){var n;return o.a({},t,((n={})[e]=r.payload,n))}},S=function(e){return function(t,r){var n,i={};return"selectedProject"===e?i={tasklists:y.tasklists,sprints:y.sprints,stages:y.stages,selectedTasklist:y.selectedTasklist,selectedSprint:y.selectedSprint,selectedStage:y.selectedStage,selectedScenarioField:y.selectedScenarioField,selectedTaskflowStatus:y.selectedTaskflowStatus}:"selectedTasklist"===e?i={stages:y.stages,selectedStage:y.selectedStage}:"selectedScenarioField"===e&&(i={selectedTaskflowStatus:y.selectedTaskflowStatus}),o.a({},t,i,((n={})[e]=r.payload,n))}},T=function(e){return a.a.pick(e,"selectedProject")},E=Object(s.b)(((n={})[""+v.bootstrapTaskLocator]=function(e,t){return o.a({},y,t.payload)},n[""+v.readDataSuccess]=function(e,t){return o.a({},e,t.payload)},n[""+v.fetchTasklistsByProjectFailed]=b("tasklists"),n[""+v.fetchStagesByTasklistFailed]=b("stages"),n[""+v.fetchSprintsByProjectFailed]=b("sprints"),n[""+v.toggleTasklistSelector]=_("tasklistSelectorOpened"),n[""+v.toggleStageSelector]=_("stageSelectorOpened"),n[""+v.toggleSprintSelector]=_("sprintSelectorOpened"),n[""+v.toggleScenarioSelector]=_("scenarioSelectorOpened"),n[""+v.toggleStatusSelector]=_("taskflowStatusOpened"),n[""+v.updateProject]=S("selectedProject"),n[""+v.selectSprint]=S("selectedSprint"),n[""+v.selectTasklist]=S("selectedTasklist"),n[""+v.selectStage]=S("selectedStage"),n[""+v.selectScenarioField]=S("selectedScenarioField"),n[""+v.selectTaskflowStatus]=S("selectedTaskflowStatus"),n[""+v.exitTaskLocator]=function(e){return o.a({},y,T(e))},n),y),O=Object(u.a)(function(e,t){return e.ofType(""+v.toggleTasklistSelector).filter(function(){return t.getState().ui.taskLocator.tasklistSelectorOpened}).map(v.fetchTasklistsByProject)},function(e,t){return e.ofType(""+v.toggleStageSelector).filter(function(){return t.getState().ui.taskLocator.stageSelectorOpened}).map(v.fetchStagesByTasklist)},function(e,t){return e.ofType(""+v.toggleSprintSelector).filter(function(){return t.getState().ui.taskLocator.sprintSelectorOpened}).map(v.fetchSprintsByProject)},function(e,t){return e.ofType(""+v.toggleScenarioSelector).filter(function(){return t.getState().ui.taskLocator.scenarioSelectorOpened}).map(v.fetchScenarioFieldsByProject)},function(e,t){return e.ofType(""+v.setCertainTasklist).filter(function(){var e=t.getState().ui.taskLocator.selectedProject;return!!e&&e._id!==m()._id}).switchMap(function(){var e=t.getState().ui.taskLocator.selectedProject._id;return p.default.getTasklists(e).values().map(function(e){return{tasklists:e,selectedTasklist:e[0]}})}).map(v.readDataSuccess).catch(function(e){return Object(f.throwError)(e),c.Observable.of(v.fetchTasklistsByProjectFailed())})},function(e){return e.ofType(""+v.selectProject).switchMap(function(e){var t=e.payload.projectId;return t?"default"===t?c.Observable.of(m()):p.default.getProject(t).values().map(function(e){return e[0]}):c.Observable.of()}).map(v.updateProject).catch(function(e){return Object(f.throwError)(e),c.Observable.of(v.selectProjectFailed())})},function(e,t){return e.ofType(""+v.fetchTasklistsByProject).filter(function(){return!!t.getState().ui.taskLocator.selectedProject}).switchMap(function(){var e=t.getState().ui.taskLocator.selectedProject._id;return p.default.getTasklists(e).values().map(function(e){return{tasklists:e}})}).map(v.readDataSuccess).catch(function(e){return Object(f.throwError)(e),c.Observable.of(v.fetchTasklistsByProjectFailed())})},function(e,t){return e.ofType(""+v.fetchStagesByTasklist).filter(function(){return!!t.getState().ui.taskLocator.selectedTasklist}).switchMap(function(){var e=t.getState().ui.taskLocator.selectedTasklist._id;return p.default.getTasklistStages(e).values().map(function(e){return{stages:e}})}).map(v.readDataSuccess).catch(function(e){return Object(f.throwError)(e),c.Observable.of(v.fetchStagesByTasklistFailed())})},function(e,t){return e.ofType(""+v.fetchSprintsByProject).filter(function(){return!!t.getState().ui.taskLocator.selectedProject}).switchMap(function(){var e=t.getState().ui.taskLocator.selectedProject._id;return p.default.getProjectSprints(e).values().map(function(e){var t=e.filter(function(e){return"complete"!==e.status});return{sprints:[h()].concat(t)}})}).map(v.readDataSuccess).catch(function(e){return Object(f.throwError)(e),c.Observable.of(v.fetchSprintsByProjectFailed())})},function(e,t){return e.ofType(""+v.fetchScenarioFieldsByProject).filter(function(){return!!t.getState().ui.taskLocator.selectedProject}).switchMap(function(){var e=t.getState().ui.taskLocator.selectedProject,r=e._id,n=Boolean(e&&Object(d.isTaskflowEnabled)(e));return p.default.getScenarioFieldConfigs(r,"task",{withTaskflowstatus:n}).take(1).map(function(e){return{scenarioFields:e}})}).map(v.readDataSuccess)})},"NXI+L8V4":function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return u});var n,o=r("mrSGxOB2"),i=r("q1tIBJhx"),a=r("i8i4LrFt"),s=r("XO839WrT");!function(e){e[e.below=0]="below",e[e.above=1]="above",e[e.left=2]="left",e[e.right=3]="right",e[e.inside=4]="inside",e[e.outside=5]="outside"}(n||(n={}));var u=function(t){function r(e){var r=t.call(this,e)||this;return r.saveRef=function(e){return r.ref.root=Object(a.findDOMNode)(e)},r.getPosition=function(e){return e.lowerBounds-e.upperBounds==0?n.outside:e.elSkew<=e.upperBounds&&e.elSkew>=e.lowerBounds?n.inside:e.lowerBounds<e.elSkew?r.isVertical?n.below:n.right:e.elSkew<e.upperBounds?r.isVertical?n.above:n.left:n.outside},r.ref=Object.create(null),r.isVertical="vertical"===r.props.direction,r.onScroll=r.props.throttle(r.scrollHandler.bind(r)),r}return o.d(r,t),r.prototype.componentDidMount=function(){var t=this;this.ancestor=this.findScrollableAncestor(),this.ancestor.addEventListener("scroll",this.onScroll,{passive:!0}),e(function(){return t.initialExpand(0)})},r.prototype.componentWillUnmount=function(){this.ancestor.removeEventListener("scroll",this.onScroll),clearTimeout(this.initialExpandTimer)},r.prototype.componentDidUpdate=function(){"undefined"!=typeof window&&this.onScroll()},r.prototype.findScrollableAncestor=function(){var e=this.props.scrollableNode;if("function"==typeof e){var t=e();if(t)return t}else if(e&&"function"!=typeof e)return e;for(var r=this.ref.root;r.parentNode;)if((r=r.parentNode)!==document&&r!==document.documentElement){var n=this.isVertical?"overflow-y":"overflow-x",o=window.getComputedStyle(r),i=o.getPropertyValue(n)||o.getPropertyValue("overflow");if("auto"===i||"scroll"===i)return r}return window},r.prototype.initialExpand=function(e){var t=this,r=e,o=this.props,i=o.onEnter,a=o.initialLoadLimit;if(this.ref.root&&i&&r!==a){var s=this.getScrollbarBounds();this.getPosition(s)===n.inside&&(i.call(this),this.initialExpandTimer=setTimeout(function(){t.initialExpand(r+1)},1e3))}},r.prototype.scrollHandler=function(){if(this.ref.root){var e=this.getScrollbarBounds(),t=this.getPosition(e),r=this.prevPostion;if(this.prevPostion=t,r!==t){var o=this.props,i=o.onEnter,a=o.onLeave;t===n.inside?"function"==typeof i&&i.call(this):r===n.inside&&"function"==typeof a&&a.call(this)}}},r.prototype.getElRect=function(e){if(e===window)return{top:0,left:0,width:window.innerWidth,height:window.innerHeight};var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}},r.prototype.getScrollbarBounds=function(){var e=this.getElRect(this.ref.root),t=this.isVertical?e.top:e.left,r={upper:0,lower:0},n=this.getElRect(this.ancestor),o=n.top,i=n.left,a=n.width,u=n.height,c=this.isVertical?u:a;r.upper=this.isVertical?o:i;var l=this.props,p=l.upperBounds,f=l.lowerBounds,d=Object(s.a)(p||0,c),g=Object(s.a)(f||0,c);return r.lower=r.upper+c,{elSkew:t,upperBounds:r.lower-d,lowerBounds:r.upper-g-(this.isVertical?e.height:e.width)}},r.prototype.render=function(){var e=i.Children.only(this.props.children);return i.cloneElement(e,o.a({},e.props,{ref:this.saveRef}))},r.defaultProps={direction:"vertical",throttle:function(e){return e},initialLoadLimit:1},r}(i.PureComponent)}).call(this,r("CfyGlvHn").setImmediate)},"Nb+/DKSJ":function(e,t,r){"use strict";var n,o=r("mrSGxOB2"),i=r("4c1CS0b3"),a=r("s0r7VfKc"),s=r("sa1Ed382"),u="coldBackup";!function(e){e.Read="readonly",e.Write="readwrite"}(n||(n={}));var c,l,p=function(){return new Promise(function(e,t){if(window.indexedDB){var r=indexedDB.open("teambition");r.onsuccess=function(t){e(t.target.result)},r.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(u)||t.createObjectStore(u,{keyPath:"id"})},r.onerror=function(e){t(e.target.errorCode)}}else t(-1)})},f=r("RHI1qqXu"),d=r.n(f),g=[/\./g,"-"],h=[/-/g,"."];function m(e,t){return void 0===t&&(t=!1),d()(e,function(e,r){return r.replace.apply(r,o.h(t?g:h))})}r.d(t,"b",function(){return c}),r.d(t,"a",function(){return b}),function(e){e[e.Forbidden=-2]="Forbidden",e[e.Guest=-1]="Guest",e[e.Member=0]="Member",e[e.Admin=1]="Admin",e[e.Owner=2]="Owner"}(c||(c={})),function(e){e[e.Network=100]="Network",e[e.Local=200]="Local"}(l||(l={}));var y=i.Observable.forkJoin([a.default.fetch.getProjectPermissions(),a.default.fetch.getOrganizationPermissions()]).shareReplay(1),v=y.concatMap(function(e){var t=o.f(e,1)[0];return a.default.getTaskPrivileges(t.result.taskprivileges).changes()}).shareReplay(1),b=function(){function e(){}return e.isObject=function(e){return/^(task|post|event|work|entry|testcase)$/.test(e)},e.isObjectKey=function(t){return e.ObjectRules.indexOf(t)>=0},e.camelize=function(e){return e.replace(/\.([a-z])/g,function(e,t){return t.toUpperCase()})},e.clear=function(){e.ProjectPermsPool.clear(),e.OrganizationPermsPool.clear(),e.TaskPrivileges.clear(),e.Cache.clear()},e.prepare=function(t){void 0===t&&(t=null);var r,a=i.Observable.from((r=s.user.id,p().then(function(e){var t=e.transaction(u,n.Read).objectStore(u);return new Promise(function(e){t.get(r).onsuccess=function(t){e(t.target.result)}})}).catch(function(){return null}))).filter(function(e){var r=t||s.PREFERENCE.get("lastWorkspace");if(!e)return!1;var n=e.OrganizationPermsPool&&e.OrganizationPermsPool.length>0,o="personal"!==r&&e.OrganizationPermsPool&&e.OrganizationPermsPool.some(function(e){return e[0]===r});return n&&o}).map(function(e){return{state:l.Local,payload:e}}),c=i.Observable.forkJoin(y,v.take(1)).map(function(e){return{state:l.Network,payload:e}});i.Observable.race(c,a).subscribe(function(t){if(t.state===l.Local){var r=t.payload;return r.ProjectPermsPool&&(e.ProjectPermsPool=new Map(r.ProjectPermsPool)),r.OrganizationPermsPool&&(e.OrganizationPermsPool=new Map(r.OrganizationPermsPool)),void(r.TaskPrivileges&&(e.TaskPrivileges=new Map(r.TaskPrivileges)))}if(t.state===l.Network){e.skipCount=1;var n=o.f(t.payload,2),i=n[0],a=n[1];e.permsHandler(i),e.privilegesHandler(a)}e.startBackgroundMonitor()})},e.getProjectRole=function(t){return e.ProjectPermsPool.get(t)||{_id:-1,level:c.Guest,permissions:["activity.post","object.put.like"]}},e.getOrganizationRole=function(t){return e.OrganizationPermsPool.get(t)||{_id:-10,level:c.Forbidden,permissions:[]}},e.startBackgroundMonitor=function(){var t=v.take(1).concatMap(function(){var t,r;return t=function(){return{id:s.user.id,ProjectPermsPool:e.serialize(e.ProjectPermsPool),OrganizationPermsPool:e.serialize(e.OrganizationPermsPool),TaskPrivileges:e.serialize(e.TaskPrivileges)}},r=s.user.id,i.Observable.interval(6e5).startWith(0).concatMap(function(){return p().then(function(e){var o=e.transaction(u,n.Write),i=o.objectStore(u);return i.delete(r),i.add(t()),new Promise(function(e,t){o.oncomplete=e,o.onerror=t})})})}),r=i.Observable.merge(y.skip(e.skipCount).do(function(t){return e.permsHandler(t)}),v.skip(e.skipCount).do(function(t){return e.privilegesHandler(t)}));i.Observable.merge(r,t).subscribe()},e.pullProject=function(t){return a.default.fetch.getProjectPermisson(t).do(function(r){return e.ProjectPermsPool.set(t,r)})},e.pullOrganization=function(t){return a.default.fetch.getOrganizationPermisson(t).do(function(r){return e.OrganizationPermsPool.set(t,r)})},e.pullMember=function(e){return a.default.fetch.getMember(e)},e.pullTaskPrivilege=function(t){return a.default.getTaskPrivilege({_projectId:t}).values().do(function(r){var n=o.f(r,1)[0];return e.TaskPrivileges.set(t,n)})},e.resetProject=function(t,r){e.ProjectPermsPool.set(t,r)},e.resetOrganization=function(t,r){e.OrganizationPermsPool.set(t,r)},e.serialize=function(e){var t=[];return e.forEach(function(e,r){var n=[r,e];t.push(n)}),t},e.OrganizationRules=[],e.ProjectRules=[],e.DefinedRules=[],e.ObjectRules=[],e.DefaultPermMap=Object.create(null),e.ProjectPermsPool=new Map,e.OrganizationPermsPool=new Map,e.TaskPrivileges=new Map,e.Cache=new Map,e.skipCount=0,e.permsHandler=function(t){var r=o.f(t,2),n=r[0],i=r[1];n.result.permissionBindings.forEach(function(t){e.ProjectPermsPool.set(t._projectId,t)}),i.result.roles.forEach(function(t){e.OrganizationPermsPool.set(t._organizationId,t)})},e.privilegesHandler=function(t){t.forEach(function(t){e.TaskPrivileges.set(t._projectId,o.a({},t,{creator:m(t.creator),executor:m(t.executor)}))})},e}()},O3GlWwSR:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("a+N5u/Cl"),o=function(e,t,r){if(void 0===r&&(r=[]),!e&&!t)return!0;if(e&&t){var o=[],i=[];for(var a in e)if(!n.includes(r,a)){if(e[a]!==t[a])return!1;o.push(a)}for(var s in t)n.includes(r,s)||i.push(s);return o.length===i.length}return!1}},OFi9R5Le:function(e,t){},OcUPLOSr:function(e,t,r){"use strict";var n=r("2cYYE+FO");r.o(n,"FactorType")&&r.d(t,"FactorType",function(){return n.FactorType}),r.o(n,"Mode")&&r.d(t,"Mode",function(){return n.Mode}),r.o(n,"SortOrder")&&r.d(t,"SortOrder",function(){return n.SortOrder});var o=r("YJHhhC9o");r.o(o,"FactorType")&&r.d(t,"FactorType",function(){return o.FactorType}),r.o(o,"Mode")&&r.d(t,"Mode",function(){return o.Mode}),r.o(o,"SortOrder")&&r.d(t,"SortOrder",function(){return o.SortOrder});var i=r("s6VidTkT");r.d(t,"FactorType",function(){return i.a}),r.d(t,"Mode",function(){return i.b}),r.d(t,"SortOrder",function(){return i.c});r("SabpdlYo")},OmupbwLD:function(e,t,r){var n,o,i,a,s,u,c={}.hasOwnProperty;s=r("a+N5u/Cl"),o=r("uQSzQ+fH"),i=r("3eMzznN/"),a=r("vmWJWrVe"),u=[],n=$("body"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,a),t.prototype.viewName="WindowView",t.prototype.className="modal fade",t.prototype.hotkeys={esc:function(e){return e.preventDefault(),this.close()}},t.prototype.preventHotkeys=["h","i","m","s","c","g","j","k"],t.prototype.events={scroll:"onscroll"},t.prototype.initialize=function(e){return this.options=null!=e?e:{},this.options.cssClass&&this.$el.addClass(this.options.cssClass),this},t.prototype.delegateModalEvents=function(){var e;return this.$el.on("shown.bs.modal",(e=this,function(){return e.onOpen()})),this.$el.on("hidden.bs.modal",function(e){return function(){return e.remove()}}(this)),this},t.prototype.open=function(e,t){var r,i,a;return null==t&&(t={}),i=s.find(u,function(e){return/[0-9]+/.test(e.$el.css("z-index"))}),u.unshift(this),this.$el.one("showing.bs.modal",(a=this,function(e){var t,r;if(i&&(r=parseInt(i.$el.css("z-index"),10)+1,$(e.target).data("bs.modal"),a.$el.css("z-index",r)),null!=a.options.cssClass)return null!=(t=$(e.target).data("bs.modal").$backdrop)?t.addClass(a.options.cssClass).one("click",function(){return a.close()}):void 0})),t.parentView=this,this.currentView=this.requestSubView(e,t),this.renderDialog?this.renderDialog(this.currentView):this.$el.html(this.currentView.$el),!1===t.isAnimation&&this.$el.removeClass("fade"),this.delegateModalEvents(),n.addClass("modals-open"),r=null==(null!=t?t.backdrop:void 0)||t.backdrop,this.modal=this.$el.modal({keyboard:!1,backdrop:r}).data("bs.modal"),o.add(this),this},t.prototype.onscroll=function(e){var t;return null!=(t=this.currentView)&&"function"==typeof t.onscroll?t.onscroll(e):void 0},t.prototype.close=function(){var e;return null!=(e=this.modal)&&e.hide(),this},t.prototype.onOpen=function(){var e,t,r;return $(document).off("focusin.bs.modal"),null!=(e=this.currentView)&&"function"==typeof e.onOpen&&e.onOpen(),null!=(t=this.currentView)&&null!=(r=t.options)&&"function"==typeof r.onOpen&&r.onOpen(),this},t.prototype.remove=function(){var e,r,a,s,c;return null!=(e=this.options)&&"function"==typeof e.onRemove&&e.onRemove(),null!=(r=this.modal)&&r.removeBackdrop(),null!=(a=this.currentView)&&"function"==typeof a.onClose&&a.onClose(),null!=(s=this.currentView)&&null!=(c=s.options)&&"function"==typeof c.onClose&&c.onClose(),i.removeItem(u,this),o.remove(this),u.length||($(".modal-backdrop").remove(),n.removeClass("modals-open modal-open")),t.__super__.remove.apply(this,arguments)},t}()},Oqv97qYP:function(e,t,r){"use strict";r.d(t,"a",function(){return g});var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r("tLZJUYWX"),a=r("TSYQbtd+"),s=r.n(a),u=r("a+N5u/Cl"),c=r("wd/RKGTj"),l=r.n(c),p=r("GESwhXbR"),f=r("kUx8H0Nt");r("blOzeFgC");function d(e){return e?/startOf|endOf|now/.test(e)?Object(f.d)(e):l()(e):null}var g=function(e){function t(t){var r=e.call(this,t)||this;return r.reportChanged=function(){var e=null,t=r.props.onChange,n=r.state,o=n.relative,i=n.min,a=n.max;e=void 0!==o?null===o?{relative:null}:u.pick(Object(f.c)(o),"min","max","specific"):{min:i?i.toISOString():null,max:a?a.endOf("day").toISOString():null,specific:!0};var s=Object(f.a)(e);return t&&t(e,Object(f.a)(e)),{filter:e,label:s}},r.onSubmit=function(){var e=r.reportChanged(),t=e.filter,n=e.label;r.props.onSubmit&&r.props.onSubmit({filter:t,label:n,state:r.state})},r.onCancelChoice=function(){r.setState({min:null,max:null,relative:null})},r.onSpecificItemClick=function(e){-1===e.currentTarget.className.indexOf("checked")&&r.setState(n.a({},r.state,{relative:void 0,min:l()().startOf("day").subtract(6,"days"),max:l()().endOf("day")}))},r.onMinChange=function(e){var t=e.date.startOf("day"),o=n.a({},r.state,{min:t});t.isAfter(r.state.max)&&(o.max=void 0),r.setState(o)},r.onMaxChange=function(e){var t=e.date.endOf("day"),o=n.a({},r.state,{max:t});t.isBefore(r.state.min)&&(o.min=void 0),r.setState(o)},r.onMinClear=function(){return r.setState(n.a({},r.state,{min:void 0}),r.reportChanged)},r.onMaxClear=function(){return r.setState(n.a({},r.state,{max:void 0}),r.reportChanged)},r.datePickerProps=function(e){var t=r.state,o=t.min,i=t.max,a={};return"min"==e?o&&(a.date=o):i&&(a.date=i),n.a({},a,{nested:!0,timepicker:!1,onChange:"min"===e?r.onMinChange:r.onMaxChange,onClear:"min"===e?r.onMinClear:r.onMaxClear})},r.renderCancelDateChoice=function(){var e=r.state,t=e.min,n=e.max,a=null===e.relative&&!t&&!n;return o.createElement(p.MenuItem,{onClick:r.onCancelChoice,className:"search-filter-date-item"},o.createElement("span",null,i.get("searcher.filter.date.not.choice")),a?o.createElement(p.Icon,{name:"tick"}):null)},r.renderSepcificRange=function(){var e=r.state,t=e.min,n=e.max,a=!(e.relative||!t&&!n);return o.createElement(p.MenuItem,{onClick:r.onSpecificItemClick,className:s()("custom-range-menu-item",{checked:a})},o.createElement("span",{className:"range-menu-item-main-content"},i.get("searcher.filter.date.customize")),a&&o.createElement(p.Icon,{name:"tick"}),a&&r.renderDetails())},r.renderHeader=function(){var e=r.props,t=e.onContentTab,n=e.title,i=e.openedInner,a=e.onHide;return o.createElement("header",{className:"search-filter-date-selector-header"},i&&o.createElement(p.IconButton,{color:"gray",onClick:t,name:"chevron-left"}),o.createElement("div",{className:"search-filter-date-selector-title"},n),o.createElement(p.IconButton,{color:"gray",onClick:a,name:"remove"}))},r.renderPresetRelativesOuter=function(){var e=f.f.map(function(e){var t=u.findWhere(e.children,{type:r.state.relative});return o.createElement(p.MenuItem,{key:e.type,className:"search-filter-date-item",onClick:function(){r.setState({dateSelecteds:e.children}),r.props.onContentTab()}},o.createElement("span",null,i.get("searcher.filter.date."+e.type)),o.createElement("div",{className:"icon-wrap"},t&&i.get("library.handler.selects.hint",1),o.createElement(p.Icon,{name:"chevron-right"})))});return o.createElement(p.Menu,{className:"date-picker-content"},r.renderCancelDateChoice(),e,r.renderSepcificRange())},r.renderPresetRelativesInner=function(){var e=r.state.dateSelecteds.map(function(e){return o.createElement(p.MenuItem,{key:e.type,className:"search-filter-date-item",onClick:function(){r.setState({relative:r.state.relative===e.type?void 0:e.type,max:null,min:null})}},o.createElement("span",null,Object(f.b)(e.type)),r.state.relative===e.type?o.createElement(p.Icon,{name:"tick"}):null)});return o.createElement(p.Menu,{className:"date-picker-content thin-scroll"},e)},r.state=function(e){var t=e.min,r=e.max,n=e.relative,o=Object(f.e)(e),i=e.dateSelecteds||[];return o?{min:o.min,max:o.max,relative:o.type,dateSelecteds:i}:{min:d(t),max:d(r),relative:"null"===n?null:n||void 0,dateSelecteds:i}}(r.props),r}return n.d(t,e),t.prototype.renderDetails=function(){var e=this.state,t=e.min,r=e.max,a=e.relative,s=i.get("searcher.filter.date.not.defined");return!(a||!t&&!r)&&o.createElement("small",null,o.createElement(p.DatePicker,n.a({},this.datePickerProps("min")),o.createElement(p.TextButton,null,t?t.format("YYYY.MM.DD"):s)),o.createElement("span",null,"  "),o.createElement(p.DatePicker,n.a({},this.datePickerProps("max")),o.createElement(p.TextButton,null,r?r.format("YYYY.MM.DD"):s)))},t.prototype.renderSubmitButton=function(){return o.createElement("div",{className:"search-filter-date-submit"},o.createElement(p.Button,{onClick:this.onSubmit},i.get("search.filter.searcher.filter.selector.submit")))},t.prototype.render=function(){var e=this.props.openedInner;return o.createElement("div",{className:"search-filter-date-selector"},this.renderHeader(),e&&this.renderPresetRelativesInner(),!e&&this.renderPresetRelativesOuter(),this.renderSubmitButton())},t}(o.PureComponent)},"PHHYd/Ws":function(e,t,r){"use strict";r.d(t,"a",function(){return A}),r.d(t,"d",function(){return M}),r.d(t,"b",function(){return B}),r.d(t,"c",function(){return G});var n,o,i=r("mrSGxOB2"),a=r("a+N5u/Cl"),s=r.n(a),u=r("6SzIBtPz"),c=r("NOGqly5s"),l=r("4c1CS0b3"),p=r("gh8QIhMV"),f=r("oRqJmROU"),d=r("EtDCcJeX"),g=r("fio7jWQ0"),h=r("peh1clMB"),m=r("50927W45"),y=r("92Y4NLYL"),v=r("ZKYHwlYi"),b=r("EcZ0z2mK"),_=r("suI5NDUm"),S=r("9Ip6qvet"),T=r("p7RaAO2S"),E=r("79Xm+sqc"),O=r("QyjeWo4p"),w=/\d+/,C={tql:"",isLoading:!1,hasMore:!1,totalSize:0,exceedWarningNumber:void 0,searchResult:{event:[],post:[],project:[],task:[],user:[],work:[],collection:[],workitem:[],app:[],cr:[],doc:[],sprint:[],testjob:[],testcase:[]}},I=function(e){return"SEARCH/"+e},k=function(e){return I(e+"/FAILURE")},j=function(e){return I(e+"/SUCCESS")},A={searchAll:Object(u.a)(I("SEARCH_ALL")),searchAllFailure:Object(u.a)(k("SEARCH_ALL")),searchAllSuccess:Object(u.a)(j("SEARCH_ALL")),searchAllInUserSpace:Object(u.a)(I("SEARCH_ALL_IN_USER_SPACE")),searchAllInUserSpaceFailure:Object(u.a)(k("SEARCH_ALL_IN_USER_SPACE")),searchAllInUserSpaceSuccess:Object(u.a)(j("SEARCH_ALL_IN_USER_SPACE")),searchEvents:Object(u.a)(I("SEARCH_EVENTS")),searchEventsFailure:Object(u.a)(k("SEARCH_EVENTS")),searchEventsSuccess:Object(u.a)(j("SEARCH_EVENTS")),searchPosts:Object(u.a)(I("SEARCH_POSTS")),searchPostsFailure:Object(u.a)(k("SEARCH_POSTS")),searchPostsSuccess:Object(u.a)(j("SEARCH_POSTS")),searchProjects:Object(u.a)(I("SEARCH_PROJECTS")),searchProjectsFailure:Object(u.a)(k("SEARCH_PROJECTS")),searchProjectsSuccess:Object(u.a)(j("SEARCH_PROJECTS")),searchTasks:Object(u.a)(I("SEARCH_TASKS")),searchTasksFailure:Object(u.a)(k("SEARCH_TASKS")),searchTasksSuccess:Object(u.a)(j("SEARCH_TASKS")),searchUsers:Object(u.a)(I("SEARCH_USERS")),searchUsersFailure:Object(u.a)(k("SEARCH_USERS")),searchUsersSuccess:Object(u.a)(j("SEARCH_USERS")),searchWorks:Object(u.a)(I("SEARCH_WORKS")),searchWorksFailure:Object(u.a)(k("SEARCH_WORKS")),searchWorksSuccess:Object(u.a)(j("SEARCH_WORKS")),searchCollections:Object(u.a)(I("SEARCH_COLLECTIONS")),searchCollectionsFailure:Object(u.a)(k("SEARCH_COLLECTIONS")),searchCollectionsSuccess:Object(u.a)(j("SEARCH_COLLECTIONS")),searchWorkItem:Object(u.a)(I("SEARCH_WORKITEM")),searchWorkItemFailure:Object(u.a)(k("SEARCH_WORKITEM")),searchWorkItemSuccess:Object(u.a)(j("SEARCH_WORKITEM")),searchApp:Object(u.a)(I("SEARCH_APP")),searchAppFailure:Object(u.a)(k("SEARCH_APP")),searchAppSuccess:Object(u.a)(j("SEARCH_APP")),searchCr:Object(u.a)(I("SEARCH_CR")),searchCrFailure:Object(u.a)(k("SEARCH_CR")),searchCrSuccess:Object(u.a)(j("SEARCH_CR")),searchSprint:Object(u.a)(I("SEARCH_SPRINT")),searchSprintFailure:Object(u.a)(k("SEARCH_SPRINT")),searchSprintSuccess:Object(u.a)(j("SEARCH_SPRINT")),searchTestJob:Object(u.a)(I("SEARCH_TESTJOB")),searchTestJobFailure:Object(u.a)(k("SEARCH_TESTJOB")),searchTestJobSuccess:Object(u.a)(j("SEARCH_TESTJOB")),searchTestCase:Object(u.a)(I("SEARCH_TESTCASE")),searchTestCaseFailure:Object(u.a)(k("SEARCH_TESTCASE")),searchTestCaseSuccess:Object(u.a)(j("SEARCH_TESTCASE")),searchDoc:Object(u.a)(I("SEARCH_DOC")),searchDocFailure:Object(u.a)(k("SEARCH_DOC")),searchDocSuccess:Object(u.a)(j("SEARCH_DOC")),getMoreEventResults:Object(u.a)(I("GET_MORE_EVENT_RESULTS")),getMorePostResults:Object(u.a)(I("GET_MORE_POST_RESULTS")),getMoreProjectResults:Object(u.a)(I("GET_MORE_PROJECT_RESULTS")),getMoreTaskResults:Object(u.a)(I("GET_MORE_TASK_RESULTS")),getMoreUserResults:Object(u.a)(I("GET_MORE_USER_RESULTS")),getMoreWorkResults:Object(u.a)(I("GET_MORE_WORK_RESULTS")),getMoreCollectionResults:Object(u.a)(I("GET_MORE_COLLECTION_RESULTS")),getMoreWorkItemResults:Object(u.a)(I("GET_MORE_WORKITEM_RESULTS")),getMoreAppResults:Object(u.a)(I("GET_MORE_APP_RESULTS")),getMoreTestJobResults:Object(u.a)(I("GET_MORE_TESTJOB_RESULTS")),getMoreTestCaseResults:Object(u.a)(I("GET_MORE_TESTCASE_RESULTS")),getMoreCrResults:Object(u.a)(I("GET_MORE_CR_RESULTS")),getMoreSprintResults:Object(u.a)(I("GET_MORE_SPRINT_RESULTS")),getMoreDocResults:Object(u.a)(I("GET_MORE_DOC_RESULTS")),setOrderByTqlKey:Object(u.a)(I("SET_ORDER_BY_TQL_KEY")),setOrder:Object(u.a)(I("SET_ORDER")),updateTQLString:Object(u.a)(I("UPDATE_TQL_STRING")),forceSearch:Object(u.a)(I("FORCE_SEARCH")),refreshSearch:Object(u.a)(I("REFRESH_SEARCH")),exitPagination:Object(u.a)(I("EXIT_PAGINATION")),exitGlobalSearch:Object(u.a)(I("EXIT_GLOBAL_SEARCH"))},P=function(){return function(e){return i.a({},e,{isLoading:!0,searchResult:C.searchResult})}},R=function(){return function(e,t){var r=t.payload,n=r.result,o=r.totalSize;return i.a({},e,{totalSize:o,isLoading:!1,searchResult:i.a({},e.searchResult,n)})}},N=function(e){return i.a({},e,{searchResult:C.searchResult,isLoading:!0})},x=function(e){return i.a({},e,{totalSize:0,isLoading:!1})},D=function(e){return function(t,r){var n,o=r.payload,a=o.result,s=o.hasMore,u=o.totalSize,c=a[0]&&a[0].exceedWarning,l=c&&w.exec(c),p=l?Number(l[0]):void 0;return i.a({},t,{isLoading:!1,hasMore:s,totalSize:u,exceedWarningNumber:p,searchResult:i.a({},t.searchResult,(n={},n[e]=a,n))})}},M=Object(u.b)(((n={})[""+A.searchAll]=P(),n[""+A.searchAllFailure]=x,n[""+A.searchAllSuccess]=R(),n[""+A.searchAllInUserSpace]=P(),n[""+A.searchAllInUserSpaceFailure]=x,n[""+A.searchAllInUserSpaceSuccess]=R(),n[""+A.searchEvents]=N,n[""+A.searchEventsFailure]=x,n[""+A.searchEventsSuccess]=D(m.a.Event),n[""+A.searchPosts]=N,n[""+A.searchPostsFailure]=x,n[""+A.searchPostsSuccess]=D(m.a.Post),n[""+A.searchProjects]=N,n[""+A.searchProjectsFailure]=x,n[""+A.searchProjectsSuccess]=D(m.a.Project),n[""+A.searchTasks]=N,n[""+A.searchTasksFailure]=x,n[""+A.searchTasksSuccess]=D(m.a.Task),n[""+A.searchUsers]=N,n[""+A.searchUsersFailure]=x,n[""+A.searchUsersSuccess]=D(m.a.User),n[""+A.searchWorks]=N,n[""+A.searchWorksFailure]=x,n[""+A.searchWorksSuccess]=D(m.a.Work),n[""+A.searchCollections]=N,n[""+A.searchCollectionsFailure]=x,n[""+A.searchCollectionsSuccess]=D(m.a.Collection),n[""+A.searchWorkItem]=N,n[""+A.searchWorkItemFailure]=x,n[""+A.searchWorkItemSuccess]=D(b.a.WorkItem),n[""+A.searchApp]=N,n[""+A.searchAppFailure]=x,n[""+A.searchAppSuccess]=D(b.a.App),n[""+A.searchCr]=N,n[""+A.searchCrFailure]=x,n[""+A.searchCrSuccess]=D(b.a.Cr),n[""+A.searchTestCase]=N,n[""+A.searchTestCaseFailure]=x,n[""+A.searchTestCaseSuccess]=D(b.a.TestCase),n[""+A.searchTestJob]=N,n[""+A.searchTestJobFailure]=x,n[""+A.searchTestJobSuccess]=D(b.a.TestJob),n[""+A.searchSprint]=N,n[""+A.searchSprintFailure]=x,n[""+A.searchSprintSuccess]=D(b.a.Sprint),n[""+A.searchDoc]=N,n[""+A.searchDocFailure]=x,n[""+A.searchDocSuccess]=D(b.a.Doc),n[""+A.refreshSearch]=function(e,t){return i.a({},e,{tql:t.payload})},n[""+A.exitGlobalSearch]=function(){return C},n),C),F=function(e,t){return e.getState().ui.globalSearch[t]},L=((o={})[m.b.All]=A.searchAll,o[m.b.Task]=A.searchTasks,o[m.b.Event]=A.searchEvents,o[m.b.Work]=A.searchWorks,o[m.b.Collection]=A.searchCollections,o[m.b.Post]=A.searchPosts,o[m.b.Project]=A.searchProjects,o[m.b.User]=A.searchUsers,o[b.b.WorkItem]=A.searchWorkItem,o[b.b.App]=A.searchApp,o[b.b.Cr]=A.searchCr,o[b.b.TestCase]=A.searchTestCase,o[b.b.TestJob]=A.searchTestJob,o[b.b.Sprint]=A.searchSprint,o[b.b.Doc]=A.searchDoc,o),B=Object(c.a)(function(e,t){return e.ofType(""+A.searchAll).filter(f.a).switchMap(function(e){var r=e.payload,n=r.q,o=r._organizationId,a=r.pageSize,u=t.getState(),c=Object(T.e)(u.ui.search.input,{forceAccurate:!0,isBasicObject:!1}),f=Object(T.e)(u.ui.search.input,{forceAccurate:!0,isBasicObject:!1,withArchived:!1}),g=Object(T.e)(u.ui.search.input),h=Object(_.isAone)()?[v.j(n,a,o),v.d(n,a,o),v.e(n,a,o),v.h(n,a,o),v.i(n,a,o),v.g(n,a,o),v.f(n,a,o)]:[];return d.a.apply(void 0,i.h([y.h(n,o),y.d(n,g,a,o),y.e(n,g,a,o),y.f(n,c,a,o),y.g(n,g,a,o),y.i(n,f,a,o),y.j(n,g,a,o),y.c(n,g,a,o)],h)).concatMap(function(e){if(e.some(d.a.isFulfilled)){var t=e.map(function(e){return d.a.isFulfilled(e)?d.a.unwrap(e):{result:[],totalSize:0}});return l.Observable.of(t)}return l.Observable.throw(new Error("searchall failed"))}).map(function(e){var t=s.a.pluck(e,"totalSize").reduce(function(e,t){return e+t}),r=i.f(s.a.pluck(e,"result"),15),n=r[0],o=r[1],a=r[2],u=r[3],c=r[4],l=r[5],p=r[6],f=r[7],d=r[8],g=r[9],h=r[10],m=r[11],y=r[12],v=r[13],b=r[14],S={tasksById:n,event:o,post:a,project:u,user:l,work:p,collection:f,task:s.a.chain(n).map(function(e){return i.a({},e,{taskId:e.project.uniqueIdPrefix+"-"+e.uniqueId})}).concat(c).uniq("_id").value()},T=Object(_.isAone)()?i.a({},S,{workitem:d,app:g,cr:h,testcase:m,testjob:y,sprint:v,doc:b}):S;return A.searchAllSuccess({totalSize:t,result:T})}).catch(function(e){return Object(p.throwError)(e),[A.searchAllFailure()]})})},function(e,t){return e.ofType(""+A.searchAllInUserSpace).filter(function(e){return void 0!==e.payload}).switchMap(function(e){var r=e.payload,n=r.q,o=r._organizationId,a=r.pageSize,u=t.getState(),c=Object(T.b)({},u.ui.search.input,!1),f=Object(T.b)({},u.ui.search.input,!0),d=Object(_.isAone)()?[v.j(n,a,o),v.d(n,a,o),v.e(n,a,o),v.h(n,a,o),v.i(n,a,o),v.g(n,a,o),v.f(n,a,o)]:[];return l.Observable.combineLatest.apply(l.Observable,i.h([y.h(n,o),y.d(n,c,a,o),y.e(n,c,a,o),y.f(n,f,a,o),y.g(n,c,a,o),y.j(n,c,a,o),y.c(n,c,a,o)],d)).map(function(e){var t=s.a.pluck(e,"totalSize").reduce(function(e,t){return e+t}),r=i.f(s.a.pluck(e,"result"),14),n=r[0],o=r[1],a=r[2],u=r[3],c=r[4],l=r[5],p=r[6],f=r[7],d=r[8],g=r[9],h=r[10],m=r[11],y=r[12],v=r[13],b={tasksById:n,event:o,post:a,project:u,work:l,collection:p,task:s.a.chain(n).map(function(e){return i.a({},e,{taskId:e.project.uniqueIdPrefix+"-"+e.uniqueId})}).concat(c).uniq("_id").value()},S=Object(_.isAone)()?i.a({},b,{workitem:f,app:d,cr:g,testcase:h,testjob:m,sprint:y,doc:v}):b;return A.searchAllInUserSpaceSuccess({totalSize:t,result:S})}).catch(function(e){return Object(p.throwError)(e),[A.searchAllInUserSpaceFailure()]})})},function(e){var t=y.b[m.a.Event],r=e.ofType(""+A.searchEvents).filter(f.a),n=e.ofType(""+A.getMoreEventResults);return r.switchMap(function(r){var o=r.payload,i=o.q,a=o.tql,s=o.pageSize,u=o._organizationId,c=t(i,a,s,u);return y.a(c,{loadMore$:n}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchEventsSuccess).catch(function(){return l.Observable.of(A.searchEventsFailure())})})},function(e){var t=y.b[m.a.Post],r=e.ofType(""+A.searchPosts).filter(f.a),n=e.ofType(""+A.getMorePostResults);return r.switchMap(function(r){var o=r.payload,i=o.q,a=o.tql,s=o.pageSize,u=o._organizationId,c=t(i,a,s,u);return y.a(c,{loadMore$:n}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchPostsSuccess).catch(function(){return l.Observable.of(A.searchPostsFailure())})})},function(e){var t=y.b[m.a.Work],r=e.ofType(""+A.searchWorks).filter(f.a),n=e.ofType(""+A.getMoreWorkResults);return r.switchMap(function(r){var o=r.payload,i=o.q,a=o.tql,s=o.pageSize,u=o._organizationId,c=t(i,a,s,u);return y.a(c,{loadMore$:n}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchWorksSuccess).catch(function(){return l.Observable.of(A.searchWorksFailure())})})},function(e){var t=y.b[m.a.Collection],r=e.ofType(""+A.searchCollections).filter(f.a),n=e.ofType(""+A.getMoreCollectionResults);return r.switchMap(function(r){var o=r.payload,i=o.q,a=o.tql,s=o.pageSize,u=o._organizationId,c=t(i,a,s,u);return y.a(c,{loadMore$:n}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchCollectionsSuccess).catch(function(){return l.Observable.of(A.searchCollectionsFailure())})})},function(e){var t=y.b[m.a.Project],r=e.ofType(""+A.searchProjects).filter(f.a),n=e.ofType(""+A.getMoreProjectResults);return r.switchMap(function(r){var o=r.payload,i=o.q,a=o.tql,s=o.pageSize,u=o._organizationId,c=t(i,a,s,u);return y.a(c,{loadMore$:n}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchProjectsSuccess).catch(function(){return l.Observable.of(A.searchProjectsFailure())})})},function(e){var t=y.b[m.a.User],r=e.ofType(""+A.searchUsers).filter(f.a),n=e.ofType(""+A.getMoreUserResults);return r.switchMap(function(r){var o=r.payload,i=o.q,a=o.tql,s=o.pageSize,u=o._organizationId,c=t(i,a,s,u);return y.a(c,{loadMore$:n}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchUsersSuccess).catch(function(){return l.Observable.of(A.searchUsersFailure())})})},function(e){var t=y.b[m.a.Task],r=e.ofType(""+A.searchTasks).filter(f.a),n=e.ofType(""+A.getMoreTaskResults);return r.switchMap(function(r){var o=r.payload,a=o.q,u=o.tql,c=o.pageSize,f=o._organizationId,d=t(a,u,c,f),g=y.h(a,f);return y.a(d,{loadMore$:n}).concatMap(function(e,t){return 0!==t?l.Observable.of(e):g.map(function(t){return function(e,t){var r=s.a.chain(e.result).map(function(e){return i.a({},e,{taskId:e.project.uniqueIdPrefix+"-"+e.uniqueId})}).concat(t.result).uniq("_id").value();return i.a({},t,{result:r,totalSize:t.totalSize+e.totalSize})}(t,e)})}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchTasksSuccess).catch(function(e){return Object(p.throwError)(e),l.Observable.of(A.searchTasksFailure())})})},function(e){return e.ofType(""+A.exitGlobalSearch).map(A.exitPagination).map(S.d)},function(e,t){return e.ofType(""+A.updateTQLString).map(function(){var e=F(t,"tql"),r=U(t.getState());return e===r?Object(g.noOpAction)():A.refreshSearch(r)})},function(e,t){return e.ofType(""+A.forceSearch).map(function(){var e=U(t.getState());return A.refreshSearch(e)})},function(e,t){return e.ofType(""+A.refreshSearch).map(function(){var e=F(t,"tql"),r=G(t.getState()).searchType,n=t.getState().ui.search,o=n.workspaceId,i=n.workspaceType,a=n.input;return L[r]({q:a.trim(),tql:e,pageSize:50,_organizationId:"organization"===i?o:void 0})})},function(e){var t=v.a[b.a.WorkItem],r=e.ofType(""+A.searchWorkItem).filter(f.a),n=e.ofType(""+A.getMoreWorkItemResults);return r.switchMap(function(r){var o=r.payload,i=o.q,a=o.pageSize,s=o._organizationId,u=t(i,a,s);return v.b(u,{loadMore$:n}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchWorkItemSuccess).catch(function(){return l.Observable.of(A.searchWorkItemFailure())})})},function(e){var t=v.a[b.a.App],r=e.ofType(""+A.searchApp).filter(f.a),n=e.ofType(""+A.getMoreAppResults);return r.switchMap(function(r){var o=r.payload,i=o.q,a=o.pageSize,s=o._organizationId,u=t(i,a,s);return v.b(u,{loadMore$:n}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchAppSuccess).catch(function(){return l.Observable.of(A.searchAppFailure())})})},function(e){var t=v.a[b.a.Cr],r=e.ofType(""+A.searchCr).filter(f.a),n=e.ofType(""+A.getMoreCrResults);return r.switchMap(function(r){var o=r.payload,i=o.q,a=o.pageSize,s=o._organizationId,u=t(i,a,s);return v.b(u,{loadMore$:n}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchCrSuccess).catch(function(){return l.Observable.of(A.searchCrFailure())})})},function(e){var t=v.a[b.a.Sprint],r=e.ofType(""+A.searchSprint).filter(f.a),n=e.ofType(""+A.getMoreSprintResults);return r.switchMap(function(r){var o=r.payload,i=o.q,a=o.pageSize,s=o._organizationId,u=t(i,a,s);return v.b(u,{loadMore$:n}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchSprintSuccess).catch(function(){return l.Observable.of(A.searchSprintFailure())})})},function(e){var t=v.a[b.a.TestCase],r=e.ofType(""+A.searchTestCase).filter(f.a),n=e.ofType(""+A.getMoreTestCaseResults);return r.switchMap(function(r){var o=r.payload,i=o.q,a=o.pageSize,s=o._organizationId,u=t(i,a,s);return v.b(u,{loadMore$:n}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchTestCaseSuccess).catch(function(){return l.Observable.of(A.searchTestCaseFailure())})})},function(e){var t=v.a[b.a.TestJob],r=e.ofType(""+A.searchTestJob).filter(f.a),n=e.ofType(""+A.getMoreTestJobResults);return r.switchMap(function(r){var o=r.payload,i=o.q,a=o.pageSize,s=o._organizationId,u=t(i,a,s);return v.b(u,{loadMore$:n}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchTestJobSuccess).catch(function(){return l.Observable.of(A.searchTestJobFailure())})})},function(e){var t=v.a[b.a.Doc],r=e.ofType(""+A.searchDoc).filter(f.a),n=e.ofType(""+A.getMoreDocResults);return r.switchMap(function(r){var o=r.payload,i=o.q,a=o.pageSize,s=o._organizationId,u=t(i,a,s);return v.b(u,{loadMore$:n}).takeUntil(e.ofType(""+A.exitPagination)).map(A.searchDocSuccess).catch(function(){return l.Observable.of(A.searchDocFailure())})})}),U=Object(h.createSelector)(function(e){return G(e).searchType},function(e){return e.ui.search.input},function(e){return e.ui.searchFilter},function(e,t,r){var n=r.filters,o=r.sortedTqlKey,i=r.order,a=r.showedSearchers,u=r.searcherGroups,c=r.customfieldsSearchers;if(e===m.b.All)return"";var l=s.a.chain(u).pluck("searchers").flatten().filter(function(t){return s.a.contains(t.objectType,e)}).concat(E.a(e)?c:[]).map(function(e){return e.id}).value(),p=s.a.pick(n,s.a.intersection(l,a)),f=[m.b.User,m.b.Project].indexOf(e)>=0;return Object(T.b)(p,t,f,o,i)}),G=Object(h.createSelector)(function(e){return e.router.location},function(e){var t=O.parse(e.search.slice(1));return{q:t.q||"",searchType:t.type||"all"}})},PHWukW8L:function(e,t,r){"use strict";r.d(t,"a",function(){return g});var n=r("q1tIBJhx"),o=r.n(n),i=r("TSYQbtd+"),a=r.n(i),s=r("GESwhXbR"),u=r("tLZJUYWX"),c=r.n(u),l=r("3eMzznN/"),p=r("yWbDNQIY"),f=r("HEY5Vn8K"),d=r.n(f),g=Object(p.a)(function(e){var t,r=Object(n.useCallback)(function(t){t.stopPropagation(),!e.disabled&&e.onClear&&e.onClear()},[e.onClear,e.disabled]),i=a()(d.a["trigger-label"],((t={})[d.a.empty]=e.isEmpty,t[d.a.disabled]=e.disabled,t)),u=e.isEmpty||!e.onClear||Object(l.isIE)()?o.a.createElement(s.Icon,{className:d.a["trigger-icon"],name:"arrow-down-s"}):o.a.createElement(s.Tooltip,{title:c.a.get("searcher.unit.remove.value.tips")},o.a.createElement(s.Icon,{name:"circle-remove",className:d.a["trigger-icon"],onClick:r}));return o.a.createElement(s.TextButton,{className:d.a.trigger,disabled:e.disabled,onClick:e.onClick},o.a.createElement(s.Tooltip,{title:e.label||"",hidden:e.isEmpty},o.a.createElement("span",{className:i},e.label)),u)})},PXasOaBr:function(e,t,r){"use strict";r.d(t,"g",function(){return n}),r.d(t,"h",function(){return o}),r.d(t,"b",function(){return i}),r.d(t,"f",function(){return a}),r.d(t,"e",function(){return s}),r.d(t,"d",function(){return u}),r.d(t,"a",function(){return c}),r.d(t,"c",function(){return l});var n=300,o=10,i=30,a=20,s=30,u=7,c=9,l=14},PjENi0m4:function(e,t,r){var n,o,i,a,s,u={}.hasOwnProperty;a=r("a+N5u/Cl"),n=r("VuB9cZyl"),o=r("xgXXo4nF"),s=r("QyjeWo4p"),i=r("CxY0Mkc1"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="tags",t.prototype.model=o,t.prototype.boundToObjectType="project",t.prototype.orderBy="name",t.prototype.fetch=function(e){var r;return null==e&&(e={}),r=e.boundToObjectType||"project",e=Object.assign({},e,{url:i.format({search:s.stringify({tagType:r}),pathname:"tags"})}),t.__super__.fetch.call(this,e)},t.prototype.getTagsbyIds=function(e){var t,r;return t=[],a.each(e,(r=this,function(e){var n,o;if(o=null!=(n=r.get(e))?n.toJSON():void 0)return t.push(o)})),t},t}()},PtGmnN04:function(e,t,r){"use strict";r.r(t);r("fxowQlhT"),r("OUKRSD97"),r("oKwwQALP"),r("sG15cojG")},PuhIbk01:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r("tLZJUYWX"),a=r("GESwhXbR"),s=r("rGq9vsrD"),u=r("2vrtUeQe"),c={value:"",changed:!1},l=function(e){function t(t){var r=e.call(this,t)||this;return r.onInputChange=function(e){var t=e.target.value;r.setState({value:t,changed:!0})},r.onClickConfirm=function(){r.isValid()&&(r.props.onChange({value:r.state.value.trim()}),r.setState({value:r.state.value.trim(),changed:!1}))},r.onPressEnter=function(e){13===e.which&&r.onClickConfirm()},r.state={value:t.value,changed:!1},r}return n.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.clearSub$=s.b.subscribe(function(){e.setState(c)})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.value!==this.props.value&&this.setState({value:e.value,changed:!1})},t.prototype.componentWillUnmount=function(){this.clearSub$.unsubscribe()},t.prototype.isValid=function(){return this.state.changed},t.prototype.render=function(){var e=this.state.value;return o.createElement("div",{className:u["text-input"]},o.createElement("input",{className:"input",placeholder:i.get("searcher.filter.text.placeholder"),value:e||"",onChange:this.onInputChange,onKeyDown:this.onPressEnter}),o.createElement(a.Button,{className:"confirm-btn",type:"primary",disabled:!this.isValid(),onClick:this.onClickConfirm},i.get("confirm")))},t}(o.PureComponent);r.d(t,"a",function(){return l})},"Q/bs5bE9":function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("peh1clMB"),i=r("s6VidTkT"),a=r("RSFv0j4e"),s=function(e){return function(t,r){var n=new Date(t[e]).getTime(),o=new Date(r[e]).getTime();return Object(a.a)(n,o)}},u=s("created"),c=r("sD09NJbS"),l=r("wbimh+Ox"),p=r("5Cm92wlC"),f=r("kNfZ2KN4"),d=r("zyyVdOGF"),g=s("updated"),h=r("nn33r5fQ"),m={customfield:c.b,doneRate:l.b,dueRate:l.c,name:p.b,owner:h.b,status:f.b,created:u,creator:function(e,t){return r=e.creator.name,n=t.creator.name,r.localeCompare(n);var r,n},updated:g,taskCount:function(e,t){return Object(a.a)(e.taskCount,t.taskCount)},durationDay:function(e,t){return Object(a.a)(e.durationDay,t.durationDay)},unallocated:d.b,projecttags:function(e,t){var r=e.projecttags&&e.projecttags[0]?e.projecttags[0].name:"",n=t.projecttags&&t.projecttags[0]?t.projecttags[0].name:"";return Object(a.a)(r.trim(),n.trim())}},y=r("gNFMJi3i"),v=r("3eMzznN/"),b=r("dMp4HTVj");r.d(t,"b",function(){return _}),r.d(t,"a",function(){return E});var _=Object(o.createSelector)([function(e){return e.cellDescriptors},function(e){return e.columnOrder}],function(e,t){return t.map(function(t){return Object(y.c)(e,t)})}),S=Object(o.createSelector)([function(e){return e.sortBy},function(e){return e.projects},function(e){return e.currentPage},function(e,t){return t.ui.organizationPortal.tagProjectsOrder},function(e){return e.pageSize},function(e,t){var r=t.ui.organizationPortal;if(r.cursor)return r.cursor;if(r.focusedStarId&&r.tagStars){var n=Object(b.c)(r.projectTree,r.tagStars,r.focusedStarId);if(n)return n.id}}],function(e,t,r,o,a){if(!t||!t.length)return[];var s=e?e.order:null,u=e?e.key:null,c=u&&(24===u.length?m.customfield:m[u]);u&&(c=24===u.length?m.customfield:m[u]);var l="name"===o?"name":"updated";return T(function(e,t,r,o){return Object(v.mergeSort)(e,function(e,a){var s;return o===i.c.DESC&&(e=(s=n.f([a,e],2))[0],a=s[1]),t(e,a,r)<=0})}(t,c||m[l],u||l,s||i.c.DESC),a,r||1)}),T=function(e,t,r){var n=t*(r-1),o=n+t;return e.slice(n,o)},E=Object(o.createSelector)([function(e){return e},function(e,t){return e.ui.projectClusterViews[t]}],function(e,t){if(!t)return t;var r=_(t);return n.a({},t,{projects:S(t,e),cellDescriptors:r,totalRows:t.projects.length,currentPage:t.currentPage||1})})},QEOS9Poo:function(e,t,r){"use strict";r.d(t,"b",function(){return f}),r.d(t,"c",function(){return d}),r.d(t,"a",function(){return g});var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r("a+N5u/Cl"),a=r("tLZJUYWX"),s=r("TSYQbtd+"),u=r.n(s),c=r("GESwhXbR"),l=r("ZlXCU/aY"),p=(r("kRZr8HQY"),"tapestry-multi-checkbox-menu"),f="999999999999999999999999",d="000000000000000000000000",g=function(e){function t(t){var r=e.call(this,t)||this;r.handleItemChange=function(e){var t,n=r.state.selected,o=r.props.items;if(e===f)t=i.contains(n,e)?[]:o.map(function(e){return e.id});else{var a=i.contains(n,e)?i.chain(n).without(e).without(f).value():i.union(n,[e]);t=a.length===o.length-1?o.map(function(e){return e.id}):a}r.setState({selected:t},function(){return r.reportChanged()})},r.renderMenuItems=function(){var e=r.props.items,t=r.state.selected;return i.map(e,function(e){return o.createElement(l.a,{key:e.id,onChange:r.handleItemChange,checked:i.contains(t,e.id),label:e.name,id:e.id})})},r.reportChanged=function(){var e,t=r.state.selected,n=r.props,o=n.onChange,i=n.type;o&&o(((e={})[""+i]=t,e))},r.handleConfirmClick=function(){var e=r.state.selected,t=r.props,n=t.onConfirm,o=t.items;n&&n(e.length===o.length?void 0:e)},r.renderContent=function(){return o.createElement("ul",{className:"thin-scroll "+p+"_content"},r.renderMenuItems())};var n=t.items.map(function(e){return e.id}),a=void 0===t.selected?[]:i.contains(t.selected,f)?n:i.intersection(n,t.selected);return r.state={selected:a},r}return n.d(t,e),t.prototype.render=function(){var e,t=1===i.filter(this.props.items,function(e){return e.id!==d}).length,r=u()(p+"_content",((e={})[p+"-empty"]=t,e)),n=0===this.state.selected.length;return o.createElement("div",{className:p},t?o.createElement("div",{className:r},a.get("tapestry.picker."+this.props.type+".empty")):this.renderContent(),o.createElement("div",{className:"tapestry-filter-menu-action-button"},o.createElement(c.Button,{disabled:n,onClick:this.handleConfirmClick},a.get("confirm"))))},t}(o.PureComponent)},QGSdtXpg:function(e,t,r){e.exports=r.p+"images/preciseDate-poster.cb8cae86.png"},QHFeugHF:function(e,t,r){"use strict";r.r(t),r.d(t,"updatePreference",function(){return u}),r.d(t,"reducer",function(){return c}),r.d(t,"getSortMethodFactory",function(){return l}),r.d(t,"getLibraryOrder",function(){return p}),r.d(t,"getMyFileOrder",function(){return f});var n,o=r("mrSGxOB2"),i=r("a+N5u/Cl"),a=r("6SzIBtPz"),s=r("peh1clMB"),u=Object(a.a)("UPDATE_PREFERENCE"),c=Object(a.b)(((n={})[""+u]=function(e,t){return o.a({},e,Object(i.pick)(t.payload,"libraryMode","libraryOrder","myFileOrder"))},n),{libraryMode:"list",libraryOrder:"updatedDesc",myFileOrder:"updatedDesc"}),l=function(e){return Object(s.createSelector)(function(t){return t.preference[e]},function(e){var t=e.match(/^([a-z]*)(Asc|Desc)$/);return t?{sortMethod:t[1],asc:"asc"===t[2].toLowerCase()}:{sortMethod:"updated",asc:!0}})},p=l("libraryOrder"),f=l("myFileOrder")},"QQ/Xj7Ar":function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("mrSGxOB2"),o=r("IssmDVnT"),i=function(){function e(e,t,r,n,o){void 0===o&&(o={}),this.sdk=e,this.pageSize=t,this.nextPageToken="",this.apiHost=o.apiHost,this.path=r,this.urlQuery=n,this.hasMore=!0,this.nextPage=1,this.responseAcc=[],this.mapper=o.mapper,this.useCache=!!o.useCache,this.useCache&&(this.tableName=o.useCache.tableName,this.sqlQuery=o.useCache.sqlQuery,this.limit=t,this.assocFields=o.useCache.assocFields)}return e.prototype.reset=function(){this.nextPageToken="",this.nextPage=1,this.hasMore=!0,this.totalSize=void 0,this.responseAcc=[],this.queryToken=void 0},e.prototype.next=function(){var e=this,t=n.a({},this.urlQuery,{pageToken:this.nextPageToken,pageSize:this.pageSize}),r=this.sdk.fetch.get(this.path,t,{includeHeaders:!0,apiHost:this.apiHost}).do(function(t){var r=t.body,n=r.nextPageToken,o=r.result,i=r.totalSize;e.nextPageToken=n,e.hasMore=o.length>=e.pageSize&&Boolean(n),e.totalSize=i}).map(function(t){var r=t.headers,n=t.body.result;return"function"==typeof e.mapper?n.map(function(t,n){return e.mapper.call(null,r,t,n)}):n}).shareReplay(1);if(this.useCache){var i=this.sdk.lift({tableName:this.tableName,request:r,cacheValidate:o.CacheStrategy.Cache,query:n.a({},this.sqlQuery,Object(o.pagination)(this.limit,this.nextPage)),assocFields:this.assocFields});this.queryToken=this.queryToken?this.queryToken.concat(i):i}return this.nextPage++,{update$:(this.useCache?this.queryToken.changes():r.map(function(t){return e.responseAcc=e.responseAcc.concat(t),e.responseAcc})).map(function(t){return{result:t,hasMore:e.hasMore,totalSize:e.totalSize}}),page:this.nextPage}},e}()},QSzw2VcL:function(e,t,r){var n,o,i,a={}.hasOwnProperty;i=r("a+N5u/Cl"),n=r("VuB9cZyl"),o=r("v4t1pgGK"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="teams",t.prototype.model=o,t.prototype.getNoneDefaultTeams=function(){return this.filter(function(e){return"default"!==e.get("type")})},t.prototype.getTeamById=function(e){return this.find(function(t){return t.get("_id")===e})},t.prototype.isInTeams=function(e){return i.chain(this.toJSON()).map(function(e){return e.hasMembers}).flatten().map(function(e){return e._id}).uniq().contains(e).value()},t}()},QaD1KplC:function(e,t,r){e.exports={fly:"fly__2c3p","drag-handle":"drag-handle__1WY0",content:"content__1Z1Y"}},Qlod0euf:function(e,t,r){"use strict";r.r(t);var n,o=r("mrSGxOB2"),i=r("a+N5u/Cl"),a=r("4c1CS0b3"),s=r("IssmDVnT"),u=r("sa1Ed382"),c=r("s0r7VfKc"),l=r("HDJEOtNh"),p=r("px/Tdvb+"),f=r("oRqJmROU"),d=r("90U+kJWN"),g=r("7AbqSH+U"),h=r("Jvpq/adM"),m=r("wVuowLdP"),y=function(e,t){var r=u.user.id;return c.default.fetch.expandPage(e,{loadMore$:t,skipConcat:!0}).scan(function(e,t){var r=(e.taskIds||[]).concat(t.result.map(function(e){return e._id}));return o.a({},t,{taskIds:r})},{}).switchMap(function(e){var t=e.taskIds;return function(e,t){var r=function(e){return t.indexOf(e._id)};return c.default.lift({cacheValidate:s.CacheStrategy.Cache,request:a.Observable.of(e),tableName:"Task",query:{where:[{_id:{$in:t}},k(null,{taskLayer:void 0,sensitivity:n.MyVisible})]},fields:["_id","_projectId","_scenariofieldconfigId","_tasklistId","_stageId","_taskflowstatusId","content","dueDate","involveMembers","isDone","priority","startDate","visible","stage"],assocFields:{executor:h.b,parent:h.f,stage:h.h,taskflowstatus:h.i}}).changes().map(function(e){return Object(i.sortBy)(e,r)})}(e.result,t).map(function(t){var n=t.filter(function(e){return j(e,r)});return{invisibleCount:t.length-n.length,hasMore:e.hasMore,totalCount:e.totalSize,result:n}})})},v=r("oPs7WnEA"),b=r("zxyTAlCn"),_=r("EiUFTky8"),S=r("RIjxGFt6");r.d(t,"Sensitivity",function(){return n}),r.d(t,"PAGE_SIZE",function(){return E}),r.d(t,"tasksFilter",function(){return I}),r.d(t,"tasksWhere",function(){return k}),r.d(t,"isVisible",function(){return j}),r.d(t,"getApproxDoneTaskCount",function(){return A}),r.d(t,"prependCondToTql",function(){return P}),r.d(t,"tasksFetch",function(){return R}),r.d(t,"generalTasksPagination",function(){return N}),r.d(t,"generalGetUndoneTasksFetch",function(){return x}),r.d(t,"generalGetUndoneTasks",function(){return D}),r.d(t,"generalGetDoneTasks",function(){return M}),r.d(t,"observeTasksByTaskIds",function(){return F}),r.d(t,"generalGetTasksByTql",function(){return L}),r.d(t,"openOptionsByKey",function(){return U}),r.d(t,"openOptionsByStage",function(){return G}),r.d(t,"openOptionsByTaskField",function(){return q}),r.d(t,"openOptionsByPriority",function(){return z}),r.d(t,"openOptionsByTaskflowStatus",function(){return V}),r.d(t,"openOptionsByScenarioFieldStatus",function(){return K}),r.d(t,"openOptionsListView",function(){return H}),r.d(t,"openOptionsTableView",function(){return W}),function(e){e[e.MyVisible=0]="MyVisible",e[e.MyInvisible=1]="MyInvisible"}(n||(n={}));var T,E=40,O=["content","visible","customfields"],w=["_taskId"],C={creator:h.a,executor:h.b,stage:h.h,parent:h.f,taskflowstatus:h.i,sprint:h.g};function I(e){var t=e.$or,r=o.g(e,["$or"]),n="";if(t&&t.length>0){var a=t.filter(function(e){return!!e._scenariofieldconfigId});a.length>0&&(n=I(a[0]))}var s=Object.keys(r).reduce(function(t,r){var n=e[r];if(Array.isArray(n)&&!i.isEmpty(n)){var o=n.map(function(e){return r+"="+String(e)}).join(" OR ");t.push("("+o+")")}else void 0!==n&&t.push(r+"="+n);return t},[]).join(" AND ");return n?s+" AND "+n:s}function k(e,t){void 0===t&&(t={});var r=t.taskLayer?Object(S.taskLayerToRDBQuery)(t.taskLayer):void 0,a={};t.sensitivity===n.MyVisible?a={content:{$ne:""}}:t.sensitivity===n.MyInvisible&&(a={content:""});var s=o.a({},r,a,{$or:[{isArchived:!1},{isArchived:null}]});if(e){var u=i.mapObject(e,function(e,t){return Array.isArray(e)&&"_scenariofieldconfigId"===t?{$in:e}:e});return[Object(i.omit)(u,function(e){return void 0===e}),s]}return s}function j(e,t){return Object(d.isVisibleTask)(e,t,l.ProjectAccess.hasProjectPrivacyPermission)}function A(e){var t=e.result.length,r=e.pageSize*(e.nextPage-1),n=Object(f.c)(e.totalSize)?e.totalSize:t;return t<r?t:n}function P(e,t){return e?t?0===e.indexOf("ORDER BY")?t+" "+e:t+" AND "+e:e:t}function R(e,t,r){void 0===r&&(r={});var i=r.tql||"",a=r.taskLayer?Object(S.taskLayerToTQL)(r.taskLayer):"",s="";r.sensitivity===n.MyVisible?s="myVisible=myVisible(true)":r.sensitivity===n.MyInvisible&&(s="myVisible=myVisible(false)");var u=e._projectId,c=o.g(e,["_projectId"]),l=I(o.a({},t,c));return i=P(i,a),i=P(i,s),{urlPath:"v2/projects/"+u+"/tasks",urlQuery:{filter:i=P(i,l)}}}function N(e,t,r){void 0===r&&(r={});var n=R(e,t,{tql:r.orderByTql||"",taskLayer:r.taskLayer,sensitivity:r.sensitivity}),o=n.urlPath,i=n.urlQuery;return s.Page.defaultState(o,{pageSize:r.pageSize||E,urlQuery:i})}function x(e,t,r){var n=o.a({},t,e,{isDone:!1}),i={taskLayer:r},s=R(e,n,i),u=s.urlPath,l=s.urlQuery;return{request$:c.default.fetch.get(u,o.a({},l,{pageSize:5e3})).map(function(e){return e.result}).catch(function(){return a.Observable.of([])}),rdbQuery:{where:k(n,i)},required:r!==b.a.All?o.h(w,O):O}}function D(e,t,r){void 0===r&&(r=b.a.All);var n=x(e,t,r),o=n.request$,i=n.rdbQuery,u=n.required;return c.default.lift({cacheValidate:s.CacheStrategy.Request,request:o,tableName:"Task",query:i,required:u,padding:function(e){return c.default.fetch.getTask(e,{_paddingRequestStats:!0}).catch(function(){return a.Observable.empty()})},assocFields:C}).changes()}function M(e,t,r,n){void 0===r&&(r=b.a.All);var i=n.patch,u=n.limit,l=o.a({},t,e,{isDone:!0}),p={taskLayer:r};return c.default.lift({cacheValidate:s.CacheStrategy.Cache,request:a.Observable.of(i||[]),tableName:"Task",query:{where:k(l,p),limit:u},required:r!==b.a.All?o.h(w,O):O,padding:function(e){return c.default.fetch.getTask(e,{_padddingRequestStats:!0}).catch(function(){return a.Observable.empty()})},assocFields:C}).changes()}!function(e){e.Unset="unset",e.Manual="manual",e.Auto="auto"}(T||(T={}));var F=function(e){return void 0===e&&(e={}),function(t){return t.switchMap(function(t){var r=o.a({_id:{$in:t}},e),n=function(e){return t.indexOf(e._id)};return c.default.lift({cacheValidate:s.CacheStrategy.Cache,request:a.Observable.of([]),tableName:"Task",query:{where:r},assocFields:C}).changes().map(function(e){return Object(i.sortBy)(e,n)})})}};function L(e,t,r,n,i){void 0===i&&(i={});var u={taskLayer:i.taskLayer,sensitivity:i.sensitivity},l=R(e,o.a({},t,e),o.a({tql:r},u)),p=l.urlPath,f=l.urlQuery,d=i.pageSize||50,g=s.Page.defaultState(p,{urlQuery:f,pageSize:d}),h=c.default.fetch.expandPage(g,{loadMore$:n,skipConcat:!0}).publishReplay(1).refCount(),m=h.delayWhen(function(e){return c.default.lift({cacheValidate:s.CacheStrategy.Cache,request:a.Observable.of(e.result),tableName:"Task",query:{},fields:["_id"]}).values()}).map(function(e){return e.result.map(function(e){return e._id})}).scan(function(e,t){return e.concat(t)},[]),y=k(null,u);return m.pipe(F(y)).withLatestFrom(h).map(function(e){var t=o.f(e,2),r=t[0],n=t[1];return o.a({},n,{result:r})})}var B=function(e){return function(t){return new a.Observable(function(r){var n=e,o=t.subscribe({next:function(e){n=e,r.next(e)},error:function(){r.next(n),r.complete()},complete:function(){r.complete()}});return function(){o.unsubscribe(),n=null}})}};function U(e,t,r){void 0===r&&(r={});var n=Object(d.observeCallback)(),l=n.observable,f=n.callback,g=Object(d.observeCallback)(),h=g.observable,m=g.callback,y=Object(d.observeCallback)(),b=y.observable,_=y.callback,O=h.startWith(!1).distinctUntilChanged().switchMap(function(e){return e?b:a.Observable.of(r.tql||"")}).debounceTime(200).publishReplay(1).refCount(),w=Object(S.observeTaskLayer)().publishReplay(1).refCount(),C=u.user.id,I=r.getTasksByTql||L,k=r.getUndoneTasks||D,P=r.tasksPagination||N,R=r.getDoneTasks||M,x={};return{onLoadBucketTasks:function(e,t){var r=e.id;f([r,e,t,e.isFirstPage])},pagedTasks$:l.delayWhen(function(e){var t=o.f(e,2),r=(t[0],t[1]),n=r.paneIndex,i=r.noDelay,s=void 0!==i&&i?0:Math.floor((n||0)/6);return a.Observable.timer(2e3*s)}).groupBy(function(e){return o.f(e,1)[0]}).mergeMap(function(r){var n=o.f(r.partition(function(e){var t=o.f(e,4),r=(t[0],t[1],t[2],t[3]);return Boolean(r)}),2),l=n[0],d=n[1],g=d.share();return a.Observable.combineLatest(l,O,w).switchMap(function(r){var n,l=o.f(r,3),h=o.f(l[0],3),m=h[0],y=h[1],b=h[2],_=l[1],S=l[2],O=t(y),w=Object(v.getOrderByTql)(y.sortMethod||p.SortMethod.CUSTOM);if(_){var N=o.a({},x,{pageSize:E});n=I(e,O,_,g,o.a({},N,{taskLayer:S})).map(function(e){return o.a({},e,{totalCount:e.totalSize||e.result.length})})}else{var D=k(e,O,S),M=P(e,o.a({},O,{isDone:!0}),o.a({orderByTql:w,taskLayer:S},x)),F=c.default.fetch.expandPage(M,{loadMore$:d,skipConcat:!0}).pipe(B(M)).switchMap(function(t){return R(e,O,S,s.Page.queryInfo(t)).map(function(e){return o.a({},t,{result:e})})});n=a.Observable.combineLatest(D,F).map(function(e){var t=o.f(e,2),r=t[0],n=t[1];return o.a({},n,{nonpagedResult:r,totalCount:r.length+A(n)})})}return n.scan(function(e,t){var r=function(e,t,r){var n=u.user.id,o=e.nextPage,i=t.result.filter(function(e){return j(e,n)}).length,a=r||E,s=Math.ceil(200/a)+1,c=t.hasMore&&i<a&&t.nextPage>=s,l=t.hasMore&&i<a&&t.nextPage-o==1&&t.nextPage<s,p=T.Unset;return c?p=T.Manual:l&&(p=T.Auto),{prevPage:o,loadState:p}}(e,t),n=r.prevPage,i=r.loadState;return o.a({},t,{prevPage:n,loadState:i})},{nextPage:1}).do(function(e){e.loadState===T.Auto&&f([m,y,b,!1])}).map(function(e){var t=(e.nonpagedResult||[]).concat(e.result),r=o.f(Object(i.partition)(t,function(e){return j(e,C)}),2),n=r[0],a=r[1],s=!e.hasMore&&e.nextPage>2;return{totalCount:e.totalCount,visibleTasks:n,invisibleCount:a.length,hasMore:e.hasMore,shouldManuallyTrigger:e.loadState===T.Manual,loadingEnded:s}}).do(function(e){var t=e.invisibleCount,r=e.totalCount,n=e.shouldManuallyTrigger,o=e.loadingEnded;b&&b(t,r,n,o)}).map(function(e){var t=e.visibleTasks,r=e.hasMore;return[m,t,r]})})}).scan(function(e,t){var r=o.f(t,3),n=r[0],i=r[1],a=r[2];return e.set(n,{tasks:i,hasMore:a})},new Map).map(function(e){var t,r,n={tasks:[],bucketsResult:{}};try{for(var i=o.i(e),a=i.next();!a.done;a=i.next()){var s=o.f(a.value,2),u=s[0],c=s[1];n.tasks=n.tasks.concat(c.tasks),n.bucketsResult[u]={hasMore:c.hasMore}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n}).startWith({}),isDefaultBucket:r.isDefaultBucket,setIsUsingFilter:m,setTql:_}}var G=function(e,t){return U(e,function(e){return{_stageId:e.paneId}},o.a({},t?{tql:t.filter}:{}))},q=function(e,t){var r=function(e){return e.paneId};return U(e,function(e){var t=r(e);return e.isDefault?{$or:[{_scenariofieldconfigId:t},{_scenariofieldconfigId:null}]}:{_scenariofieldconfigId:t}},o.a({},t?{tql:t.filter}:{},{isDefaultBucket:function(t,n){var o=r(t);if(o===e._defaultScenariofieldconfigId)return!0;var i=n.scenarios.filter(function(e){return"default"===e.type})[0];return Boolean(i)&&o===i._id}}))},z=function(e,t){return U(e,function(e){var t=e.paneId;return{priority:Object(g.getPriorityByValue)(t)}},o.a({},t?{tql:t.filter}:{}))},V=function(e,t){return U(e,function(e){return{_taskflowstatusId:e.paneId}},o.a({},t?{tql:t.filter}:{}))},K=function(e,t){return U(e,function(e){return{_taskflowstatusId:e.paneId}},o.a({},t?{tql:t.filter}:{}))},H=function(e,t){var r,i=Object(d.observeCallback)(),u=i.observable,l=i.callback,p=Object(d.observeCallback)(void 0),g=p.observable,h=p.callback,m=Object(S.observeTaskLayer)();return r=t?t.filter:e._tasklistId?"_tasklistId="+e._tasklistId:"",{tasks$:a.Observable.combineLatest(u.startWith(r),m).debounceTime(200).switchMap(function(t){var r=o.f(t,2),i={tql:r[0],taskLayer:r[1]},u=R(e,{},o.a({},i,{sensitivity:n.MyVisible})),l=y(s.Page.defaultState(u.urlPath,{urlQuery:u.urlQuery,pageSize:50}),g),p=R(e,{},o.a({},i,{sensitivity:n.MyInvisible})),d=c.default.fetch.page(s.Page.defaultState(p.urlPath,{urlQuery:p.urlQuery,pageSize:20})).map(function(e){return e.totalSize}).filter(f.c);return a.Observable.combineLatest(l,d.startWith(0)).debounceTime(50).map(function(e){var t=o.f(e,2),r=t[0],n=t[1],i=(r.totalCount||0)+n;return o.a({},r,{totalCount:i,invisibleCount:n})})}),setTql:l,loadMore:h}},W=function(e,t){var r={tableFeatureMap:Object(_.checkTaskTableFeature)({projectId:e._projectId}),tableViewAppId:Object(_.composeTableViewAppId)({projectId:e._projectId,tasklistId:e._tasklistId,smartGroup:t})};if(!t)return r;var n=Object(d.observeCallback)(),i=n.observable,s=n.callback,u=Object(d.observeCallback)(void 0),c=u.observable,l=u.callback,p=Object(S.observeTaskLayer)(),f=t.filter,g=a.Observable.combineLatest(i.startWith(f),p).debounceTime(200).switchMap(function(t){var r=o.f(t,2),n=r[0],i=r[1];return Object(m.getTasksByTql)(e,n,{taskLayer:i,loadMore$:c,pageSize:20})});return o.a({},r,{tasks$:g,setTql:s,loadMore:l})}},"Qmu8NI+v":function(e,t,r){e.exports=r.p+"images/weibo-0.73412d6a.png"},R8KUFp9i:function(e,t,r){e.exports=r.p+"images/groupchat-poster.916cfde8.png"},"RFMl/ow3":function(e,t,r){e.exports={"user-avatar":"user-avatar__XO1M"}},RIjxGFt6:function(e,t,r){"use strict";r.r(t),r.d(t,"changeBoardViewTypeAndPaneType",function(){return y}),r.d(t,"observeBoardViewTypeAndPaneType",function(){return v}),r.d(t,"resetBoardViewTypeAndPaneType",function(){return b}),r.d(t,"observeTaskLayer",function(){return _}),r.d(t,"getTaskLayer",function(){return S}),r.d(t,"getDefaultTaskLayer",function(){return T}),r.d(t,"observeIsUsingTaskLayer",function(){return E}),r.d(t,"isUsingTaskLayer",function(){return O}),r.d(t,"taskLayerToTQL",function(){return w}),r.d(t,"taskLayerToTQLValues",function(){return C}),r.d(t,"taskLayerToRDBQuery",function(){return I}),r.d(t,"setTaskLayerCache",function(){return A}),r.d(t,"composeTaskLayerCacheId",function(){return P}),r.d(t,"retrieveCustomViewTaskLayer",function(){return R});var n=r("mrSGxOB2"),o=r("4c1CS0b3"),i=r("nDsjpj50"),a=r("a+N5u/Cl"),s=r.n(a),u=r("fcolQD49"),c=r("HYobN8SQ"),l=r.n(c),p=r("p7RaAO2S"),f=r("2Dvc1YJz"),d=r("bvmrLhnu"),g=r("zxyTAlCn"),h={boardViewAppId:null,boardViewType:null,paneType:u.a.AxisType.stage,smartGroup:null,tasklistId:null,taskLayer:void 0},m=new i.BehaviorSubject(h),y=function(e){return m.next(e)},v=function(){return m.distinctUntilChanged(function(e,t){return s.a.isEqual(e,t)})},b=function(){return m.next(h)},_=function(){return m.map(function(e){return e.taskLayer}).distinctUntilChanged()},S=function(e){var t=e.boardViewAppId,r=e.viewType,o=P({boardViewAppId:t,viewType:r}),i=j(o);if(i)return i;var a=n.f(Object(d.parseBoardViewAppId)(t),2)[1];return T({appName:a,viewType:r})},T=function(e){switch(e.viewType){case"kanban":switch(e.appName){case"story":case"bug":case"sprint":return g.a.All;case"tasks":return g.a.OnlyTopLevel}case"list":case"table":case"time":return g.a.All}},E=function(){var e=m.map(function(e){return e.boardViewAppId}).distinctUntilChanged(),t=m.map(function(e){return e.boardViewType}).distinctUntilChanged(),r=_();return o.Observable.combineLatest(e,t,r).map(function(e){return O.apply(void 0,n.h(e))}).distinctUntilChanged()},O=function(e,t,r){if(!e||!t)return!1;var o=n.f(Object(d.parseBoardViewAppId)(e),2)[1];return r!==T({appName:o,viewType:t})},w=function(e,t){return void 0===t&&(t=!1),t?"taskLayer IN ["+C(e)+"]":"taskLayer IN ("+C(e)+")"},C=function(e){switch(e){case g.a.All:return s.a.range(0,9).map(String);case g.a.OnlyTopLevel:return s.a.range(0,1).map(String);case g.a.ExceptTopLevel:return s.a.range(1,9).map(String)}},I=function(e){switch(e){case g.a.All:return{};case g.a.OnlyTopLevel:return{_taskId:{$isNull:!0}};case g.a.ExceptTopLevel:return{_taskId:{$isNotNull:!0}}}},k=l.a.namespace("board-view-task-layer"),j=function(e){return k.get(e)},A=function(e,t){k.set(e,t)},P=function(e){return e.boardViewAppId+":"+e.viewType},R=function(e,t){if(e.view.taskLayer)return e.view.taskLayer;if(t.isSubTask){var r=Object(p.a)(t.isSubTask,f.b.isSubTask).values[0];switch("boolean"==typeof r||"string"==typeof r?Boolean(r):null){case!0:return g.a.ExceptTopLevel;case!1:return g.a.OnlyTopLevel;default:return g.a.All}}}},"RLD3BeS/":function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"rename",function(){return v}),r.d(n,"archive",function(){return b}),r.d(n,"unarchive",function(){return _}),r.d(n,"forkWork",function(){return T}),r.d(n,"moveWork",function(){return E});var o=r("ksn0Grpi"),i=r("q1tIBJhx"),a=r.n(i),s=r("GESwhXbR"),u=r("tLZJUYWX"),c=r.n(u),l=r("sa1Ed382"),p=r("ypWNgh6R"),f=r.n(p),d=r("KSXnA8QZ"),g=r("mIQGOuVv"),h=r.n(g);function m(e,t){return a.a.createElement(d.a,{html:t,onClick:function(){return function(e){var t=function(e){var t=e.name,r=e.toJSON(),n=r._id;return"archive"===t&&(t=r.boundToObjectType,n=r._boundToObjectId),{type:t,_id:n,_projectId:r._projectId}}(e),n=t.type,o=t._id,i=t._projectId;if(~["task","post","work","event","entry","testcase"].indexOf(n))l.APP.openObjectPreviewer(o,n);else switch(n){case"collection":l.router.navigate("project/"+i+"/works/"+o,{trigger:!0});break;case"tasklist":l.router.navigate("project/"+i+"/tasks/scrum/"+o,{trigger:!0});break;case"tag":r.e(0).then(function(e){new f.a("tag").open(r("rvh1g4f9"),{_projectId:i})}.bind(null,r)).catch(r.oe)}}(e)}})}function y(e){return a.a.createElement("span",{className:h.a.clickable,onClick:function(){s.Toast.closeAll(),e()}},c.a.get("revoke"))}function v(e){s.Toast.success({message:c.a.get("rename.success.message"),handlers:y(e)})}function b(){s.Toast.success({message:c.a.get("archived.success.message"),description:c.a.get("archived.success.hint")})}function _(e){var t="archive"===e.name?e.get("boundToObjectType"):e.name,r=c.a.get("unarchived.success.hint."+t);s.Toast.success({message:c.a.get("unarchived.success.message"),description:m(e,r)})}var S=function(e){return function(t,r){if(void 0===r&&(r=1),e){var n,o,i=t.escape("title");"fork"===e?(n=c.a.get("library.success.fork",r),o=c.a.get("library.success.forkTo",i)):(n=c.a.get("library.success.move",r),o=c.a.get("library.success.moveTo",i)),s.Toast.success({message:n,description:m(t,o)})}}},T=S("fork"),E=S("move");r.d(t,"ToastFormatterUtilStyles",function(){return O}),r.d(t,"ToastMessageWithUrl",function(){return o.ToastMessageWithUrl}),r.d(t,"ToastWithObject",function(){return n}),r.d(t,"RawHTMLWithAnchorFormatter",function(){return d.a});var O=r("mIQGOuVv")},RQ44psah:function(e,t,r){"use strict";r.r(t),r.d(t,"bbs",function(){return i}),r.d(t,"blog",function(){return a}),r.d(t,"form",function(){return s}),r.d(t,"orgAdmin",function(){return u}),r.d(t,"site",function(){return c}),r.d(t,"pay",function(){return l}),r.d(t,"account",function(){return p}),r.d(t,"help",function(){return f}),r.d(t,"payHelp",function(){return d});var n=r("2qRnoGmE"),o=r.n(n),i={root:o.a.BBS_URL},a={zh:{updates:o.a.BLOG_URL+"/zh/blog/update/latest",ceoLetter:o.a.BLOG_URL+"/zh/ceoletter"},en:{updates:o.a.BLOG_URL+"/zh/blog/update/latest",ceoLetter:o.a.BLOG_URL+"/en/ceoletter"}},s={consult:"https://form.teambition.net/f/xtqUHj?x_field_1=TBweb"},u={customFieldManager:function(e){return o.a.HOST+"/organization-admin/"+e+"/custom-field-manager"},scenarioFieldConfig:function(e,t){return o.a.HOST+"/organization-admin/"+e+"/"+t+"-scenario-field-config"},organizationPermission:function(e){return o.a.HOST+"/organization-admin/"+e+"/organization-permissions"}},c={pricing:o.a.HOST+"/pricing"},l={plans:o.a.PAY_HOST+"/plans",userNew:o.a.PAY_HOST+"/orders/new?payType=user-new",userRenew:o.a.PAY_HOST+"/orders/new?payType=user-renew",userMigrate:o.a.PAY_HOST+"/api/users/migrate-organization",order:function(e){return o.a.PAY_HOST+"/orders/"+e},orgOrder:function(e){return o.a.PAY_HOST+"/organizations/"+e+"/orders"},orgProTrial:function(e){return o.a.PAY_HOST+"/organizations/api/"+e+"/pro-trial"},orgNew:function(e){return o.a.PAY_HOST+"/organizations/"+e+"/orders/new?payType=organization-new"},orgNewPro:function(e){return o.a.PAY_HOST+"/organizations/"+e+"/orders/new?payType=organization-new&grade=2"},orgRenew:function(e){return o.a.PAY_HOST+"/organizations/"+e+"/orders/new?payType=organization-renew"},orgOldRenew:function(e){return o.a.PAY_HOST+"/organizations/"+e+"/orders/new?payType=organization-old-renew"},orgUpgrade:function(e){return o.a.PAY_HOST+"/organizations/"+e+"/orders/new?payType=organization-upgrade"},orgAddMember:function(e){return o.a.PAY_HOST+"/organizations/"+e+"/orders/new?payType=organization-addmember"},orgInformant:function(e){return o.a.PAY_HOST+"/intercom/organizations/"+e},confirmOrder:function(e,t,r){return o.a.PAY_HOST+"/organizations/"+e+"/orders/new?payType=organization-new"}},p={orgs:o.a.ACCOUNT_HOST+"/my/orgs",emailSubscriptions:o.a.ACCOUNT_HOST+"/my/email-subscriptions"},f={outerMember:"https://guide.teambition.net/hc/kb/article/1259886/",upgradeToPro:"https://guide.teambition.net/hc/kb/article/1162646"},d={renewHelp:"https://guide.teambition.net/hc/kb/article/1232930/"}},RSFv0j4e:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=["",!1,0],o=function(e,t){if(e===t)return 0;var r=!e,o=!t;return r&&o?n.indexOf(e)-n.indexOf(t):r?-1:o?1:e>t?1:-1}},RUL1qgth:function(e,t,r){"use strict";r.r(t),r.d(t,"appForWhat",function(){return i}),r.d(t,"parseNativeUrl",function(){return a}),r.d(t,"orgAppNameByTarget",function(){return u}),r.d(t,"composeTargetUrl",function(){return c}),r.d(t,"getAppNameByTargetUrl",function(){return l});var n=r("CxY0Mkc1"),o=r("2qRnoGmE");function i(e){var t="app_for_".length;return"app_for_"===e.slice(0,t)?e.slice(t):""}function a(e){var t=n.parse(e,!0);if("teambition:"!==t.protocol)return null;var r=t.hostname;return t.pathname&&(r+=t.pathname),{target:r,query:t.query}}var s={"organization/testcase":"testhub","organization/analytics":"analysis","organization/dashboard":"statistics/project","organization/administration":"organization-admin"},u=function(e){var t=s[e];if(t)return t;var r="organization/".length;return"organization/"===e.slice(0,r)?e.slice(r):e};function c(e){var t=e.id,r=e.type,n=e.target,i=n;if("organization"===r&&"organization-admin"===(i=u(n)))return o.HOST+"/"+i+"/"+t;return r+"/"+t+"/"+i}function l(e){return e.split("/",3)[2]}},RUNuRapa:function(e,t,r){"use strict";r.r(t);r("GESwhXbR")},Rmym59ay:function(e,t,r){"use strict";r.r(t);var n=r("mrSGxOB2"),o=r("4c1CS0b3"),i=r("rfFCs9L9"),a=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.img=r,o.loadImage(n),o}return n.d(t,e),t.prototype.next=function(e){this.destination.next&&this.destination.next(e)},t.prototype.cleanUp=function(){URL.revokeObjectURL(this.blobURL),this.img.removeEventListener("load",this.onImageLoad),this.img.removeEventListener("error",this.onImageError)},t.prototype.loadImage=function(e){var t=this;this.blobURL=URL.createObjectURL(e),this.onImageLoad=function(){t.next(t.img),t.complete()},this.onImageError=function(e){t.error(e)},this.img.addEventListener("load",this.onImageLoad),this.img.addEventListener("error",this.onImageError),this.img.src=this.blobURL},t.prototype.unsubscribe=function(){this.cleanUp(),e.prototype.unsubscribe.call(this)},t}(i.Subscriber),s=function(e){function t(t,r){var n=e.call(this)||this;return n.img=t,n.blob=r,n}return n.d(t,e),t.prototype._subscribe=function(e){return new a(e,this.img,this.blob)},t}(o.Observable),u=function(){function e(e){this.size=0,this.capacity=e,this.initChain(),this.map=new Map}return e.prototype.initChain=function(){this.head={next:null},this.tail={prev:this.head},this.head.next=this.tail},e.prototype.has=function(e){return 0!==this.capacity&&0!==this.size&&this.map.has(e)},e.prototype.clear=function(){var e=this;this.map.forEach(function(t){return e.onInvalidate(t)}),this.map.clear(),this.initChain()},e.prototype.get=function(e){if(this.has(e)){var t=this.map.get(e);return t.prev.next=t.next,t.next.prev=t.prev,this.head.next.prev=t,t.next=this.head.next,this.head.next=t,t.prev=this.head,t.val}return null},e.prototype.set=function(e,t){if(this.has(e)){(r=this.map.get(e)).val=t,r.prev.next=r.next,r.next.prev=r.prev,this.head.next.prev=r,r.next=this.head.next,this.head.next=r,r.prev=this.head}else{var r={key:e,val:t,prev:this.head,next:this.head.next};if(this.map.set(e,r),this.head.next.prev=r,this.head.next=r,this.size>=this.capacity){var n=this.tail.prev;this.map.delete(n.key),this.tail.prev=n.prev,this.tail.prev.next=this.tail,this.onInvalidate(n),--this.size}++this.size}},e.prototype.onInvalidate=function(e){},e}(),c=function(e){function t(t,r){var n=e.call(this,t)||this;return n.read(r),n}return n.d(t,e),t.prototype.next=function(e){this.destination.next&&this.destination.next(e)},t.prototype.read=function(e){var t=this;this.reader=new FileReader,this.reader.onload=function(e){t.next(e.target.result),t.complete()},this.reader.onerror=function(e){return t.error(e.target.error)},this.reader.readAsArrayBuffer(e)},t.prototype.unsubscribe=function(){this.reader.abort(),e.prototype.unsubscribe.call(this)},t}(i.Subscriber),l=function(e){function t(t,r){void 0===r&&(r=0);var n=e.call(this)||this;return n.blob=0===r?t:t.slice(0,r),n}return n.d(t,e),t.prototype._subscribe=function(e){return new c(e,this.blob)},t}(o.Observable),p=r("7r7CHmrc"),f=function(){function e(e){void 0===e&&(e=0),this.capacity=e,this.cache=new u(this.capacity),this.freeBlobURLs=new Set}return e.prototype.getBlob=function(e){var t=this.cache.get(e);if(t)return t;var r=o.Observable.ajax({url:e,responseType:"blob"}).map(function(e){return e.response}).publishLast().refCount();return this.cache.set(e,r),r},e.prototype.getOrientation=function(e){try{return p.load(e).Orientation.value}catch(t){return 1}},e.prototype.fetchBlob=function(e,t){var r=this;void 0===t&&(t={});var i=this.getBlob(e);if(!0!==t.withOrientation)return i.map(function(e){return{blob:e}});var a=i.switchMap(function(e){return new l(e,1<<17)}).map(function(e){return r.getOrientation(e)});return o.Observable.combineLatest(i,a).map(function(e){var t=n.f(e,2);return{blob:t[0],orientation:t[1]}})},e.prototype.fetchArrayBuffer=function(e,t){var r=this;void 0===t&&(t={});var i=this.getBlob(e).switchMap(function(e){return new l(e)});if(!0!==t.withOrientation)return i.map(function(e){return{arrayBuffer:e}});var a=i.map(function(e){return r.getOrientation(e)});return o.Observable.combineLatest(i,a).map(function(e){var t=n.f(e,2);return{arrayBuffer:t[0],orientation:t[1]}})},e.prototype.fetchBlobURL=function(e,t){var r=this;return void 0===t&&(t={}),this.fetchBlob(e,t).map(function(e){var t=URL.createObjectURL(e.blob);return r.freeBlobURLs.add(t),n.a({},e,{blobURL:t})})},e.prototype.revokeBlobURL=function(e){URL.revokeObjectURL(e),this.freeBlobURLs.delete(e)},e.prototype.getImage=function(e,t){void 0===t&&(t={});var r=new Image;return!0===t.enableCORS&&(r.crossOrigin=""),this.fillImage(e,r,t).subscribe(function(e){var t=e.orientation;return r.orientation=t}),r},e.prototype.fetchImage=function(e,t){void 0===t&&(t={});var r=new Image;return!0===t.enableCORS&&(r.crossOrigin=""),this.fillImage(e,r,t)},e.prototype.fillImage=function(e,t,r){void 0===r&&(r={});var i=this.fetchBlob(e,r),a=i.switchMap(function(e){var r=e.blob;return new s(t,r)});return o.Observable.combineLatest(i,a).map(function(e){var t=n.f(e,2),r=t[0].orientation;return{image:t[1],orientation:r}})},e.prototype.destroy=function(){this.cache.clear(),this.freeBlobURLs.forEach(function(e){return URL.revokeObjectURL(e)}),this.freeBlobURLs.clear()},e}();r.d(t,"ImageObservable",function(){return s}),r.d(t,"ImageLoader",function(){return f}),r.d(t,"ExifOrientation",function(){})},RrGWskkW:function(e,t,r){e.exports=r.p+"images/yinxiang-1.4079f478.png"},RxOUBZ4r:function(e,t,r){"use strict";r.d(t,"c",function(){return d}),r.d(t,"b",function(){return g}),r.d(t,"a",function(){return h}),r.d(t,"h",function(){return m}),r.d(t,"g",function(){return y}),r.d(t,"i",function(){return v}),r.d(t,"d",function(){return b}),r.d(t,"e",function(){return _}),r.d(t,"f",function(){return S});var n,o=r("mrSGxOB2"),i=r("tLZJUYWX"),a=r.n(i),s=r("lfya3Nc5"),u=r("pYq0h+Ab"),c=r("CGal/mJM"),l=r("bMnB8TLD"),p=r("bvmrLhnu"),f=r("D15MKVbL"),d=[{data:u.AxisType.taskflow,get label(){return a.a.get("none")}},{data:u.AxisType.iterationSprint,get label(){return a.a.get("scrum.panel.taskflow.lane.top.level")}}],g=[{data:u.AxisType.scenarioConfigStatus,get label(){return a.a.get("table.task.taskflowstatus")}},{data:u.AxisType.stage,get label(){return a.a.get("table.task.stage")}},{data:u.AxisType.scenarioConfig,get label(){return a.a.get("task.scenarios")}},{data:u.AxisType.priority,get label(){return a.a.get("priority")}}],h=((n={})[c.BoardViewType.Kanban]={icon:s.ViewTypeIconName.get(c.BoardViewType.Kanban),get label(){return a.a.get("scrum.view")},get title(){return a.a.get("scrum.view.title")}},n[c.BoardViewType.List]={icon:s.ViewTypeIconName.get(c.BoardViewType.List),get label(){return a.a.get("list.view")},get title(){return a.a.get("list.view.title")}},n[c.BoardViewType.Time]={icon:s.ViewTypeIconName.get(c.BoardViewType.Time),get label(){return a.a.get("timeline.view")},get title(){return a.a.get("timeline.view")}},n[c.BoardViewType.Table]={icon:s.ViewTypeIconName.get(c.BoardViewType.Table),get label(){return a.a.get("table.view")},get title(){return a.a.get("table.view.title")}},n),m=function(e,t,r,n){var i,a,s,u,c=new Set,l=function(t){e.some(function(e){return e._taskflowId===t})&&c.add(t)};try{for(var p=o.i(t),d=p.next();!d.done;d=p.next()){l(d.value._id)}}catch(v){i={error:v}}finally{try{d&&!d.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var g=[function(){var t=e.find(function(e){return e._id===n});return t&&t._taskflowId},function(){return r},function(){var t=Object(f.findDefaultScenarioFieldConfig)(e);return t&&t._taskflowId}];try{for(var h=o.i(g),m=h.next();!m.done;m=h.next()){var y=(0,m.value)();if(y&&c.has(y))return y}}catch(b){s={error:b}}finally{try{m&&!m.done&&(u=h.return)&&u.call(h)}finally{if(s)throw s.error}}return null};function y(e,t){if(t&&t.length)return e.filter(function(e){return t.some(function(t){return t===e._id})}).map(function(e){return e._id});var r=Object(f.findDefaultScenarioFieldConfig)(e);return r?[r._id]:[]}var v=function(e,t){return["sprint"===t,!!e,"all"!==e,"unplanned"!==e].every(function(e){return e})},b=function(e,t,r,n,i,a){if(a){var c=Object(l.getDefaultAxises)(e,{isTaskflowProject:n,isUsingTasklist:i});!n&&!r&&!i&&t&&(c=o.a({},c,{pane:u.AxisType.scenarioConfig}));var f=a.view;if(!f.vertical&&!f.horizontal)return{laneType:c.lane,paneType:c.pane,taskflowId:null,scenarioFieldIds:[]};var d=o.f(Object(p.parseBoardViewAppId)(e),2)[1],g=a.view,h=g.vertical,m=g.horizontal,y=g._verticalIds,v=h&&s.BackendAxisType[h]||u.AxisType.noop;return{laneType:"tasks"===d?u.AxisType.noop:m&&s.BackendAxisType[m]||u.AxisType.noop,paneType:v,scenarioFieldIds:Object(s.isScenarioConfigStatus)(v)?y:[],taskflowId:null}}},_=function(e,t,r,n){if(t&&t.view)return t.view.type;var o=c.BoardViewType.Kanban;return("sprint"!==r||v(e,r))&&n.cachedBoardViewType?n.cachedBoardViewType:r&&function(e,t){if(!t)return null;var r="story"===t,n="bug"===t,o="sprint"===t;return v(e,t)?c.BoardViewType.Kanban:[r,n,o&&("all"===e||"unplanned"===e)].some(function(e){return e})?c.BoardViewType.Table:null}(e,r)||o};function S(e){if(e&&"all"!==e&&"unplanned"!==e)return e}},"S/NKUfrv":function(e,t){},SBLePl9R:function(e,t,r){"use strict";var n,o,i;r.d(t,"b",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"c",function(){return i}),function(e){e.organizationMember="organizationMember",e.organizationRole="organizationRole",e.teamLeader="teamLeader",e.organizationTeam="organizationTeam",e.organizationGroup="organizationGroup"}(n||(n={})),function(e){e.FromGroup="fromGroup",e.FromTeam="fromTeam",e.Inherit="inherit",e.Inner="inner"}(o||(o={})),function(e){e.PutMember="projecttag.put.member",e.Create="projecttag.post",e.Del="projecttag.del",e.Put="projecttag.put",e.Move="projecttag.move",e.PostProject="projecttag.post.project",e.JoinProject="projecttag.join.project",e.AccessProject="projecttag.access.project",e.GetProjectPrivacy="projecttag.get.project.privacy"}(i||(i={}))},SMR95uLj:function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"a",function(){return s});var n,o=r("mrSGxOB2"),i=r("6SzIBtPz"),a=Object(i.a)("BROWSER_SWITCH_PRINT_STATE"),s=Object(i.b)(((n={})[""+a]=function(e,t){return o.a({},e,{activate:!!t.payload})},n),{activate:!1})},SabpdlYo:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("q1tIBJhx");!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n.d(t,e)}(o.Component)},St2ODdzM:function(e,t,r){"use strict";r.d(t,"d",function(){return c}),r.d(t,"b",function(){return l}),r.d(t,"e",function(){return p}),r.d(t,"f",function(){return f}),r.d(t,"a",function(){return d}),r.d(t,"c",function(){return g});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r("peh1clMB"),a=r("vwABXCbh"),s=function(e){return e.ui.projectsInformationBoardApp.projectTags},u=function(e){return e.ui.projectsInformationBoardApp.selectedProjectTagId},c=Object(i.createSelector)(function(e){return e.ui.projectsInformationBoardApp.projectBoard},function(e){return e.ui.projectsInformationBoardApp.projectCustomFields},function(e,t){return e&&t?e instanceof Error||t instanceof Error?null:o.filter(t,function(t){return o.every(e.customfieldIds,function(e){return t._id!==e})}):null}),l=function(e){return Object(i.createSelector)(s,u,function(t,r){return t&&r?t instanceof Error?null:t=n.h(t,[Object(a.createForgedProjectTagAll)(e)]):null})},p=function(e){return Object(i.createSelector)(s,u,function(t,r){return!(t=e||t)||!r||t instanceof Error||!Array.isArray(t)?null:o.find(t,function(e){return e._id===r})||null})},f=function(e){return Object(i.createSelector)(s,u,function(t,r){return(t=e||t)instanceof Error||!r||!Array.isArray(t)?null:o.sortBy(t,"pos")})},d=Object(i.createSelector)(function(e){return e.ui.projectsInformationBoardApp.projectBoard},function(e){return!e||o.isEmpty(e)||e instanceof Error?[]:e.customfields}),g=Object(i.createSelector)(function(e){return e.ui.projectsInformationBoardApp.projects},function(e){return e.ui.projectsInformationBoardApp.filter},function(e){return e.ui.projectsInformationBoardApp.sort},function(e,t,r){if(!o.isArray(e)||e instanceof Error)return null;var i=n.h(e);null!==t&&(i=o.chain(e).filter(function(e){var r=t.id,n=t.type,i=t.value,a=e.customfields,s=o.find(a,function(e){return e._customfieldId===r});if(!s)return!1;switch(n){case"date":var u=i,c=u.endDate,l=u.startDate,p=s.values,f=l?new Date(l).valueOf():-1/0,d=c?new Date(c).valueOf():1/0;return!!(g=!(!o.isArray(p)||!p[0])&&new Date(p[0]).valueOf())&&(f<=g&&g<=d);case"number":var g,h=i,m=h.endRange,y=h.startRange;p=s.values,f="number"==typeof y?y:-1/0,d="number"==typeof m?m:1/0;return!(!(g=!(!o.isArray(p)||!p[0])&&parseFloat(p[0]))||isNaN(g))&&(f<=g&&g<=d);case"dropDown":case"multipleChoice":var v=i.choiceIds;p=s.values;return!(!o.isArray(p)||0===p.length)&&o.some(p,function(e){return o.contains(v,e)})}return!1}).value());var a=function(e){switch(e){case"asc":return-1;case"desc":return 1;default:return 0}};return null!==r&&(i=i.sort(function(e,t){var i=r.id,s=r.type,u=r.value,c=e.customfields,l=o.find(c,function(e){return e._customfieldId===i});if(!l)return a(u);var p=l.values;if(!o.isArray(p)||0===p.length)return a(u);var f=n.f(p,1)[0];if("string"!=typeof f)return a(u);var d=t.customfields,g=o.find(d,function(e){return e._customfieldId===i});if(!g)return-a(u);var h=g.values;if(!o.isArray(h)||0===h.length)return-a(u);var m=n.f(h,1)[0];if("string"!=typeof m)return-a(u);switch(s){case"date":var y=new Date(f).valueOf(),v=new Date(m).valueOf();return a(u)*(v-y);case"number":var b=parseFloat(f),_=parseFloat(m);return a(u)*(_-b)}return a(u)})),i})},T6KpLPMz:function(e,t,r){"use strict";r.r(t),r.d(t,"TASK_VALID_STATUS_KINDS",function(){return i}),r.d(t,"isValidUndoneTaskStatusKind",function(){return a}),r.d(t,"correctRecurrence",function(){return s});var n=r("HHtVDBJc"),o=r.n(n),i={DONE:["start","end"],UNDONE:["start"]};function a(e){return i.UNDONE.includes(e)}function s(e){if(e.recurrence){var t=o.a.getRRuleSet(e.recurrence);if(!t)return;var r=e.startDate||e.dueDate,n=o.a.updateRRuleSet(t,{dtstart:r?new Date(r):new Date});e.recurrence=n.valueOf()}}},"TN1MO+cS":function(e,t,r){"use strict";var n,o,i=r("7Hwn9Jye"),a=r("RxOUBZ4r"),s=r("/MKjzBat"),u=r("fvjXLGkK"),c=r("mrSGxOB2"),l=r("a+N5u/Cl"),p=r.n(l),f=r("tLZJUYWX"),d=r.n(f),g=r("TSYQbtd+"),h=r.n(g),m=r("q1tIBJhx"),y=r.n(m),v=r("2qRnoGmE"),b=r.n(v),_=r("sa1Ed382"),S=r("GESwhXbR"),T=r("lfya3Nc5"),E=r("KIkj+38N"),O=r("0mES+Bis"),w=r("ojFLe4v5"),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.d(t,e),t.prototype.render=function(){var e={backgroundImage:"url("+O+")"};return y.a.createElement("div",{className:h()(w["not-found"])},y.a.createElement("section",{style:e}),y.a.createElement("span",null,this.props.notice),y.a.createElement(S.Button,{"data-pay":this.props.payProtocol},d.a.get("organization.trail.pro.getStarted")))},t}(y.a.PureComponent),I=r("CGal/mJM"),k=r("B9Qi/5SX"),j=r("pYq0h+Ab"),A=r("bMnB8TLD"),P=r("RIjxGFt6"),R=r("j6KeIaDK"),N=r("1trQBWPx"),x=r("zxyTAlCn"),D=r("qibhmspl"),M=r.n(D),F=function(e){return y.a.createElement("div",{className:M.a.container},y.a.createElement("div",{className:M.a["kanban-selector"]},y.a.createElement("p",{className:M.a.caption},d.a.get("scrum.panel.task.layer.caption")),y.a.createElement("ul",null,L.map(function(t){var r=t.data===e.taskLayer;return y.a.createElement("li",{className:M.a["selector-item"],key:t.data,onClick:function(){return e.setTaskLayer({taskLayer:t.data})}},t.label,r&&y.a.createElement(S.Icon,{name:"tick"}))}))))},L=[{data:x.a.All,get label(){return d.a.get("scrum.panel.task.layer.option.all")}},{data:x.a.OnlyTopLevel,get label(){return d.a.get("scrum.panel.task.layer.option.only.top.level")}},{data:x.a.ExceptTopLevel,get label(){return d.a.get("scrum.panel.task.layer.option.except.top.level")}}],B=function(e,t){_.gta.event({action:"switch task level",category:U[e],segment:t})},U=((n={})[x.a.All]="all",n[x.a.OnlyTopLevel]="parent",n[x.a.ExceptTopLevel]="subtask",n),G=r("ojFLe4v5"),q=function(e){function t(t){var r=e.call(this,t)||this;return r.rootClassName="board-mode-list",r.getScenarioFieldIdsFromCacheOrDefault=function(e){var t=r.props,n=t.tasklistId,o=t.getDefaultScenarioFieldId,i=t.currentSprint,s=t.isScrum,u=t.scrumSmartGroupType,c=e||r.props.paneType;if(!Object(T.isScenarioConfigStatus)(c))return[];var l=Object(a.f)(i),f="sprint"===u&&!!l&&Object(N.a)(l).scenarioFieldIds;if(f&&!p.a.isEmpty(f))return f;var d=!s&&!!n&&Object(N.b)(n).scenarioFieldIds;if(d&&!p.a.isEmpty(d))return d;var g=o();return g?[g]:[]},r.selectAxis=function(e){var t=Object(T.isScenarioConfigStatus)(e.paneType)?r.getScenarioFieldIdsFromCacheOrDefault(e.paneType):e.scenarioFieldIds;r.props.onPaneTypeChange(),r.props.actions.selectAxis(c.a({},e,{scenarioFieldIds:t,withCache:r.getShouldCacheAxisInfo()})),r.dropdownRef.close()},r.setDropdownRef=function(e){r.dropdownRef=e},r.onChangeBoardMode=function(e){e!==r.props.boardMode&&(r.props.onSwitchBoardMode(e),r.props.actions.changeBoardMode({boardMode:e}),e!==I.BoardViewType.Kanban&&r.dropdownRef.close())},r.onChangeTaskLayer=function(e){if(r.props.actions.setTaskLayer(e),r.dropdownRef.close(),!r.props.currentSmartGroup){var t=r.props,n=t.boardViewAppId,o=t.boardMode,i=Object(P.composeTaskLayerCacheId)({boardViewAppId:n,viewType:o});Object(P.setTaskLayerCache)(i,e.taskLayer)}B(e.taskLayer,r.props.boardMode)},r.renderScrumViewSection=function(){var e=r.getKanbanIsDisabled(),t=r.getBoardTypeContent(I.BoardViewType.Kanban,e),n=y.a.createElement(S.Tooltip,{title:d.a.get("board.view.mode.list.stage.disabled.tips")},t);return e?n:t},r.saveUpgradeTableViewDropdownRef=function(e){r.upgradeTableViewDropdownRef=e},r.onVisibleChange=function(e){r.setState({boardViewModeOpened:e},function(){e&&_.gta.event({action:"edit view mode",control:"task panel menu"})})},r.state={boardViewModeOpened:!1},r}return c.d(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.boardViewAppId,r=e.projectId,n=e.isScrum,o=e.isTaskflow,i=this.getDefaultBoardMode(this.props),a=this.getInitAxises(),s=this.getScenarioFieldIdsFromCacheOrDefault(a.pane),u=this.getDefaultTaskLayer(this.props,{boardViewAppId:t,viewType:i});this.props.actions.mounted({boardViewAppId:this.props.boardViewAppId,boardMode:i,projectId:r,isScrumProject:n,isTaskflowProject:o,isUsingTasklist:this.getIsUsingTasklist(),taskflowEnabled:o||n,paneType:a.pane,laneType:a.lane,taskflowId:a.taskflowId||null,scenarioFieldIds:s,taskLayer:u})},t.prototype.componentDidUpdate=function(e){var t=this.props.boardViewAppId,r=this.getValidatedBoardMode(e),n=p.a.pick(this.props,"paneType","laneType","scenarioFieldIds","taskflowId"),o=this.getValidatedPaneAndLane(e)||n,i=this.getValidatedTaskLayer(e,{boardViewAppId:t,viewType:r});Object(P.changeBoardViewTypeAndPaneType)({boardViewAppId:t,boardViewType:r,paneType:o.paneType,laneType:o.laneType,tasklistId:this.props.tasklistId,scenarioFieldIds:o.scenarioFieldIds,smartGroup:this.props.currentSmartGroup,taskLayer:i}),r!==this.props.boardMode&&this.props.actions.changeBoardMode({boardMode:r}),i!==this.props.taskLayer&&this.props.actions.setTaskLayer({taskLayer:i});var a=p.a.omit(n,"scenarioFieldIds","taskflowId"),s=p.a.omit(o,"scenarioFieldIds","taskflowId");p.a.isEqual(a,s)&&Object(E.isEqualArraySet)(n.scenarioFieldIds,o.scenarioFieldIds)||this.props.actions.resetAxis(c.a({},o,{withCache:this.getShouldCacheAxisInfo()}))},t.prototype.componentWillUnmount=function(){Object(P.resetBoardViewTypeAndPaneType)(),this.props.actions.unmount()},t.prototype.getIsUsingTasklist=function(){return Boolean(this.props.tasklistId)},t.prototype.getKanbanIsDisabled=function(){var e=!this.props.isScrum&&!this.props.isTaskflow;return!this.props.isOrgPro&&e&&!this.props.tasklistId},t.prototype.getTimeViewIsDisabled=function(){return!this.props.tasklistId},t.prototype.getDefaultBoardMode=function(e){return Object(a.e)(e.currentSprint,e.currentSmartGroup,e.scrumSmartGroupType,{cachedBoardViewType:e.defaultBoardMode})},t.prototype.getDefaultTaskLayer=function(e,t){var r=e.currentSmartGroup&&e.currentSmartGroupFilters?Object(P.retrieveCustomViewTaskLayer)(e.currentSmartGroup,e.currentSmartGroupFilters):void 0;return r||Object(P.getTaskLayer)(t)},t.prototype.getIsViewChanged=function(e){var t=this;return["tasklistId","currentSmartGroup","currentSprint","scrumSmartGroupType","commonGroupId"].some(function(r){return n=e[r],o=t.props[r],!(!n&&!o||p.a.isEqual(n,o));var n,o})},t.prototype.getValidatedBoardMode=function(e){var t=this.props.boardMode;this.getIsViewChanged(e)&&(t=this.getDefaultBoardMode(this.props));var r=this.getKanbanIsDisabled(),n=this.getTimeViewIsDisabled()||!this.props.isTimeViewEnable,o=!this.props.isTableViewEnable||!this.isSupportTable();return[n&&t===I.BoardViewType.Time,o&&t===I.BoardViewType.Table,r&&t===I.BoardViewType.Kanban].some(function(e){return e})&&(t=r?I.BoardViewType.List:I.BoardViewType.Kanban),t},t.prototype.getValidatedPaneAndLane=function(e){if(this.getIsViewChanged(e)){var t=this.props,r=t.currentSmartGroup,n=t.showAsKanban,o=!r||n&&r._id===k.b._id,i=this.props.tasklistId&&o,s=this.isSingleSprintView()&&!r,u=!!r;if(i||s||u){if(i&&!this.props.isTaskflow&&!this.props.isScrum)return{laneType:(c=this.getInitAxises()).lane,paneType:c.pane,taskflowId:null,scenarioFieldIds:[]};if(i||s){var c=this.getInitAxises(),l=this.getScenarioFieldIdsFromCacheOrDefault(c.pane);return{laneType:c.lane,paneType:c.pane,taskflowId:c.taskflowId||null,scenarioFieldIds:l}}return u?Object(a.d)(this.props.boardViewAppId,this.props.isOrgPro,this.props.isScrum,this.props.isTaskflow,!!this.props.tasklistId,this.props.currentSmartGroup):void 0}}},t.prototype.getValidatedTaskLayer=function(e,t){var r={boardViewAppId:e.boardViewAppId,viewType:e.boardMode};return!p.a.isEqual(t,r)||!p.a.isEqual(this.props.currentSmartGroup,e.currentSmartGroup)||!p.a.isEqual(this.props.currentSmartGroupFilters.isSubTask,e.currentSmartGroupFilters.isSubTask)?this.getDefaultTaskLayer(this.props,t):this.props.taskLayer},t.prototype.getShouldCacheAxisInfo=function(){return this.props.tasklistId&&!this.props.currentSmartGroup||this.isSingleSprintView()&&!this.props.currentSmartGroup||this.props.showAsKanban},t.prototype.isSupportTable=function(){return this.props.isOrgPro||this.props.isTaskflow},t.prototype.getInitAxises=function(){var e=this.props,t=e.boardViewAppId,r=e.isTaskflow,n=this.getIsUsingTasklist(),o=Object(A.getInitAxises)(t,{isTaskflowProject:r,isUsingTasklist:n}),i=o.pane===j.AxisType.scenarioConfig||o.pane===j.AxisType.priority;return!this.props.isOrgPro&&i?(Object(A.setAxisCache)(t,{pane:j.AxisType.stage},{isTaskflowProject:r,isUsingTasklist:n}),Object(A.getInitAxises)(t,{isTaskflowProject:r,isUsingTasklist:n})):o},t.prototype.isSingleSprintView=function(){return!!this.props.scrumSmartGroupType&&Object(a.i)(this.props.currentSprint,this.props.scrumSmartGroupType)},t.prototype.renderProBadge=function(){return y.a.createElement("span",{className:G.badge},"Pro")},t.prototype.renderKanbanAxisSelector=function(){var e=!this.props.isOrgPro&&this.props.paymentOfUser&&!b.a.FEATURES.newOrganization,t=d.a.get("guide.horizontal.groups.toggler.pro.tips");return e||this.props.boardMode!==I.BoardViewType.Kanban?null:y.a.createElement(J,{isOrgPro:this.props.isOrgPro,laneType:this.props.laneType,paneType:this.props.paneType,selectMode:this.props.isScrum?o.SelectLane:o.SelectPane,isTaskflow:this.props.isTaskflow,tasklistId:this.props.tasklistId,taskflows:this.props.taskflows,taskflowId:this.props.taskflowId,payProtocol:this.props.payProtocol,notFoundNotice:t,onChangeBoardMode:this.onChangeBoardMode,selectAxis:this.selectAxis})},t.prototype.renderTaskLayerSelector=function(){return this.props.taskLayer?y.a.createElement(F,{taskLayer:this.props.taskLayer,setTaskLayer:this.onChangeTaskLayer}):null},t.prototype.getBoardTypeContent=function(e,t){var r,n=this,o=a.a[e],i=this.props.boardMode===e,s=h()(this.rootClassName+"__item",((r={})[this.rootClassName+"__item-selected"]=i,r[this.rootClassName+"__item-disabled"]=t,r)),u=!this.isSupportTable()&&e===I.BoardViewType.Table;return y.a.createElement("li",{onClick:function(){t||(u&&n.upgradeTableViewDropdownRef?n.upgradeTableViewDropdownRef.open():n.onChangeBoardMode(e))},className:s},y.a.createElement("span",{className:h()(this.rootClassName+"__item-text")},y.a.createElement(S.Icon,{name:o.icon}),o.label,u&&this.renderProBadge()),i&&y.a.createElement(S.Icon,{name:"tick"}))},t.prototype.renderListViewSection=function(){return this.getBoardTypeContent(I.BoardViewType.List)},t.prototype.renderTimeViewSection=function(){if(!this.props.isTimeViewEnable)return null;var e=this.getTimeViewIsDisabled();return this.getBoardTypeContent(I.BoardViewType.Time,e)},t.prototype.renderTableViewSection=function(){if(!this.props.isTableViewEnable)return null;var e=this.getBoardTypeContent(I.BoardViewType.Table);if(this.isSupportTable())return e;var t=d.a.get("organization.trail.pro.getStarted.table"),r=y.a.createElement("div",{className:G["not-found-wrapper"]},y.a.createElement(C,{payProtocol:this.props.payProtocol,notice:t}));return y.a.createElement(S.Dropdown,{content:r,ref:this.saveUpgradeTableViewDropdownRef},e)},t.prototype.renderTrigger=function(){return Object(R.b)({isActive:this.state.boardViewModeOpened,name:a.a[this.props.boardMode].title})},t.prototype.renderContent=function(){var e=h()(this.props.className,this.rootClassName),t=!this.props.isScrum||"story"===this.props.scrumSmartGroupType||"bug"===this.props.scrumSmartGroupType||this.isSingleSprintView(),r=!this.props.isScrum||"story"===this.props.scrumSmartGroupType||"bug"===this.props.scrumSmartGroupType,n=!this.props.isScrum,o=this.props.boardMode===I.BoardViewType.Kanban&&(this.props.isTaskflow||"story"===this.props.scrumSmartGroupType||"bug"===this.props.scrumSmartGroupType||this.isSingleSprintView()&&this.props.laneType===j.AxisType.taskflow)||this.props.boardMode===I.BoardViewType.List||this.props.boardMode===I.BoardViewType.Time||this.props.boardMode===I.BoardViewType.Table,i=!this.props.isScrum||this.isSingleSprintView();return y.a.createElement("div",{className:G["board-view-mode-dropdown"]},y.a.createElement("ul",{className:e},t&&this.renderScrumViewSection(),r&&this.renderListViewSection(),n&&this.renderTimeViewSection(),this.renderTableViewSection()),o&&this.renderTaskLayerSelector(),i&&this.renderKanbanAxisSelector())},t.prototype.render=function(){return y.a.createElement(S.Dropdown,{ref:this.setDropdownRef,content:this.renderContent(),placement:"bottomLeft",persistence:!0,opened:this.state.boardViewModeOpened,onVisibleChange:this.onVisibleChange},this.renderTrigger())},t}(y.a.PureComponent),z=r("zDJ6609A"),V=function(e,t){var r=e.ui.sprintPanel;if(r.currentSprint&&r.projectId===t)return r.currentSprint;var n=e.ui.customViews,o=n.projectId===t&&n.smartGroups.find(function(e){return e._id===n.currentSmartGroupId});return o?Object(z.getSprintIdFromSmartGroup)(o):null},K=Object(s.connect)(function(e,t){var r=t.projectId,n=e.ui.board.boardViewType;return{currentSprint:V(e,r),boardMode:n.boardMode,taskflows:n.taskflows,taskflowId:n.taskflowId,laneType:n.laneType,paneType:n.paneType,scenarioFieldIds:n.scenarioFieldIds,taskLayer:n.taskLayer}},function(e){return{actions:Object(u.bindActionCreators)({mounted:i.a.mounted,unmount:i.a.unmount,changeBoardMode:i.a.changeBoardMode,selectAxis:i.a.selectAxis,resetAxis:i.a.resetAxis,setTaskLayer:i.a.setTaskLayer},e)}})(q),H=r("qibhmspl"),W=r("ojFLe4v5");!function(e){e.SelectPane="select-pane",e.SelectLane="select-lane"}(o||(o={}));var J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.proDropdownRefs=new Map,t.getDropdownRef=function(e){return t.proDropdownRefs[e]||(t.proDropdownRefs[e]=m.createRef()),t.proDropdownRefs[e]},t.onSelectLaneType=function(e){e!==t.props.laneType&&(t.props.selectAxis({laneType:e,paneType:t.props.paneType,taskflowId:t.props.taskflowId,scenarioFieldIds:[]}),t.props.onChangeBoardMode(I.BoardViewType.Kanban))},t.stopPropagation=function(e){e.stopPropagation()},t.onSelectPaneType=function(e){e!==t.props.paneType&&(t.showWithPro(e)&&t.proDropdownRefs[e]&&t.proDropdownRefs[e].current?t.proDropdownRefs[e].current.open():(t.gtaHandler(e),t.props.selectAxis({laneType:t.props.laneType,paneType:e,taskflowId:t.props.taskflowId,scenarioFieldIds:[]}),t.props.onChangeBoardMode(I.BoardViewType.Kanban)))},t}return c.d(t,e),t.prototype.render=function(){var e=this.props.selectMode;return m.createElement("div",{className:H.container},e===o.SelectPane&&this.renderPaneSelect(),e===o.SelectLane&&this.renderLaneSelect())},t.prototype.renderLaneSelect=function(){var e=this,t=a.c.map(function(t){var r=t.data===e.props.laneType;return m.createElement("li",{className:H["selector-item"],key:t.data,onClick:function(){return e.onSelectLaneType(t.data)}},t.label,r&&m.createElement(S.Icon,{name:"tick"}))});return m.createElement("div",{className:H["kanban-selector"]},m.createElement("p",{className:H.caption},f.get("scrum.panel.taskflow.lane.choice")),m.createElement("ul",null,t))},t.prototype.renderProBadge=function(){return m.createElement("span",{className:W.badge},"Pro")},t.prototype.renderNotFound=function(){return m.createElement(C,{payProtocol:this.props.payProtocol,notice:this.props.notFoundNotice})},t.prototype.renderPaneSelect=function(){var e=this.getPaneOptions(),t=this.renderNotFound();if(!e||!e.length)return t;var r=!this.props.isOrgPro&&!this.props.isTaskflow;return m.createElement("div",{className:H["kanban-selector"],onClick:this.stopPropagation},m.createElement("p",{className:H.caption},f.get("scrum.panel.taskflow"),r&&this.renderProBadge()),m.createElement("ul",null,e))},t.prototype.getValidateOptions=function(){return this.props.isOrgPro&&this.props.isTaskflow?a.b.filter(function(e){return e.data!==j.AxisType.stage}):!this.props.isOrgPro&&this.props.isTaskflow?a.b.filter(function(e){return e.data===j.AxisType.scenarioConfigStatus}):a.b.filter(function(e){return e.data!==j.AxisType.scenarioConfigStatus})},t.prototype.showWithPro=function(e){return!(this.props.isOrgPro||this.props.isTaskflow||e!==j.AxisType.scenarioConfig&&e!==j.AxisType.priority)},t.prototype.renderWithProOption=function(e,t){var r=f.get("organization.trail.pro.getStarted.table"),n=m.createElement("div",{className:H["not-found-wrapper"]},m.createElement(C,{payProtocol:this.props.payProtocol,notice:r})),o=this.getDropdownRef(t);return m.createElement(S.Dropdown,{key:t,content:n,ref:o},e)},t.prototype.getPaneOptions=function(){var e=this;return(this.getValidateOptions()||[]).map(function(t){var r,n=!e.props.tasklistId&&t.data===j.AxisType.stage,o=t.data===e.props.paneType,i=h()(H["selector-item"],((r={})[H["selector-item-disabled"]]=n,r)),a=m.createElement("li",{className:i,onClick:function(){n||e.onSelectPaneType(t.data)},key:t.data},m.createElement(S.Tooltip,{hidden:!n,title:f.get("board.view.mode.list.stage.disabled.tips")},t.label),o&&m.createElement(S.Icon,{name:"tick"}));return e.showWithPro(t.data)?e.renderWithProOption(a,t.data):a})},t.prototype.gtaHandler=function(e){var t,r=((t={})[j.AxisType.scenarioConfig]="type",t[j.AxisType.priority]="priority",t[j.AxisType.stage]="stage",t[j.AxisType.taskflowStatus]="workflow",t[j.AxisType.scenarioConfigStatus]="workflow",t)[e]||"";_.gta.event({action:"switch board view",control:"task panel menu",category:r})},t}(m.PureComponent);r.d(t,"e",function(){return i.c}),r.d(t,"d",function(){return i.b}),r.d(t,"a",function(){return K}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return J})},TRGq6Jgz:function(e,t,r){e.exports=r.p+"images/posts-0.968788b0.png"},"TcA98U6+":function(e,t,r){e.exports=r.p+"images/logo1.4f44ab8f.jpg"},TomBcwt9:function(e,t,r){e.exports=r.p+"images/jinshuju-1.0bc30dec.png"},TzW6Qno6:function(e,t,r){e.exports=r.p+"images/startdate-1.2e4ad99b.png"},U3116aoz:function(e,t,r){"use strict";r.r(t);var n,o=r("mrSGxOB2"),i=r("q1tIBJhx"),a=r.n(i),s=r("GESwhXbR"),u=r("s0r7VfKc"),c=r("TSYQbtd+"),l=r.n(c),p=r("tLZJUYWX"),f=r.n(p),d=r("a+N5u/Cl"),g=r.n(d),h=r("2+HppBUm"),m=20,y=function(e){function t(t){var r=e.call(this,t)||this;return r.onVisibleChange=function(e){r.props.onModalVisibleChange(e)},r.validateName=function(e){var t=r.props,n=t.modalItem,o=t.mode;if("edit"===o&&n&&n.name===e)r.setState({hasError:!1});else{var i=null;"add"===o?i=n?n._id:null:"edit"===o&&(i=n?n.ancestorIds[0]:null);var a=r.props.onCheckIsDuplicateName(i,e);r.setState({hasError:a})}},r.onInputChange=function(e){var t=e.target.value;t.length>m||(r.checkNameValidationThrottle(t),r.setState({name:t}))},r.onTextareaChange=function(e){var t=e.target.value;r.setState({description:t})},r.onSave=function(){var e=r.state.name.trim(),t=r.state.description.trim();e&&r.props.onSave(e,t)},r.state=r.getInitState(t),r.checkNameValidationThrottle=g.a.debounce(r.validateName.bind(r),300),r}return o.d(t,e),t.prototype.getInitState=function(e){var t=e.modalItem,r="",n="";return"edit"===e.mode&&(r=t?t.name:"",n=t?t.description:""),{name:r,description:n,hasError:!1}},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState(this.getInitState(e))},t.prototype.renderSeparator=function(){return a.a.createElement("div",{className:"modal-separator"},a.a.createElement(s.Separator,null))},t.prototype.renderSaveButton=function(){var e=!!this.state.name&&!this.state.hasError,t="add"===this.props.mode?f.a.get("create"):f.a.get("save");return a.a.createElement("div",{className:h["group-modal-save"]},a.a.createElement(s.Button,{disabled:!e,onClick:this.onSave},t))},t.prototype.renderError=function(){return a.a.createElement("div",{className:h["group-modal-error-hint"]},a.a.createElement(s.Icon,{name:"circle-remove"}),a.a.createElement("span",null,this.props.i18nContext["modal.duplicate"]))},t.prototype.renderName=function(){var e=this.state.hasError,t=l()(h["group-modal-item"],{"display-error":e});return a.a.createElement("div",{className:t},a.a.createElement("div",{className:"item-title"},f.a.get("name"),a.a.createElement("span",{className:"required-mark"},"*")),a.a.createElement("input",{placeholder:f.a.get("please.enter"),className:"form-control",value:this.state.name,onChange:this.onInputChange}),e&&this.renderError())},t.prototype.renderDescription=function(){return a.a.createElement("div",{className:h["group-modal-item"]},a.a.createElement("div",{className:"item-title"},f.a.get("description")),a.a.createElement("textarea",{placeholder:f.a.get("please.enter"),className:"form-control",value:this.state.description,onChange:this.onTextareaChange,maxLength:400}))},t.prototype.render=function(){var e="edit"===this.props.mode?this.props.i18nContext["modal.edit"]:this.props.i18nContext["modal.create"];return a.a.createElement(s.Modal,{className:h["group-modal"],titleCls:h["group-modal-title"],title:e,width:600,opened:this.props.modalOpened,onVisibleChange:this.onVisibleChange},a.a.createElement("div",{className:h["group-modal-contents"]},this.renderName(),this.renderDescription()),this.renderSeparator(),this.renderSaveButton())},t}(a.a.PureComponent),v=r("xhXG/roP"),b=r("90U+kJWN"),_=r("/a0nv5kO"),S=r("HnrV0Jrl"),T=r("3wkBMzjd"),E=r("QaD1KplC"),O=r.n(E),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){var e={paddingLeft:(this.props.node.depth+1)*Number(Object(s.getQuadUnit)(5))},t=this.props.node.data.resourceCount>0?this.props.node.name+"  "+this.props.node.data.resourceCount:this.props.node.name;return a.a.createElement("div",{className:O.a.fly},a.a.createElement("div",{className:O.a["drag-handle"]},a.a.createElement(s.Icon,{name:"draggable-circle"})),a.a.createElement("div",{style:e,className:O.a.content},t))},t}(i.PureComponent),C=r("sa1Ed382"),I=function(e,t){C.gta.event(o.a({},t,{action:"add content",control:k(e),series:e}))},k=function(e){return 1===e?"Bottom Button":"List Button"},j=function(e){C.gta.event(o.a({},e,{action:"unfold all",control:"Sidebar"}))},A=function(e){C.gta.event(o.a({},e,{action:"fold all",control:"Sidebar"}))},P=function(e,t){C.gta.event(o.a({},t,{action:"unfold",control:"Sidebar",series:e}))},R=function(e,t){C.gta.event(o.a({},t,{action:"fold",control:"Sidebar",series:e}))},N=function(e,t){C.gta.event(o.a({},t,{action:"change order",control:"Sidebar",series:e,method:"drag"}))},x=function(e,t){C.gta.event(o.a({},t,{action:"changed order",control:"Sidebar",series:e,method:"drag"}))},D=function(e){C.gta.event(o.a({},e,{action:"toggle more menu",control:"Sidebar"}))},M=function(e){C.gta.event(o.a({},e,{action:"edit content",control:"More Menu"}))},F=function(e){C.gta.event(o.a({},e,{action:"delete content",control:"More Menu"}))},L=function(e){C.gta.event(o.a({},e,{action:"deleted content",control:"More Menu"}))},B=r("M31RQLwG");!function(e){e[e.MainPage=0]="MainPage",e[e.DeletePage=1]="DeletePage"}(n||(n={}));var U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setPopupRef=function(e){t.popupRef=e},t.onEnterDeletePage=function(){F(t.props.gtaContext)},t.onDelete=function(){t.popupRef.close(),t.props.onDeleteItem(t.props.item._id),L(t.props.gtaContext)},t.onEditItem=function(){t.props.onEditItem(t.props.item),t.popupRef.close()},t.onClickTrigger=function(e){e.stopPropagation()},t.onOpen=function(){t.props.onToggleMenu(!0)},t.onClose=function(){t.props.onToggleMenu(!1)},t}return o.d(t,e),t.prototype.renderMainPage=function(){return a.a.createElement(s.PopupMenuView,{className:"popup-menu",index:n.MainPage,title:this.props.i18nContext["menu.title"]},a.a.createElement("div",{className:"menu-item",onClick:this.onEditItem},a.a.createElement(s.Icon,{name:"pencil"}),this.props.i18nContext["menu.edit"]),a.a.createElement(s.PopupMenuLink,{goto:n.DeletePage},a.a.createElement("div",{className:"menu-item",onClick:this.onEnterDeletePage},a.a.createElement(s.Icon,{name:"trash"}),this.props.i18nContext["menu.delete"])))},t.prototype.renderDeletePage=function(){return a.a.createElement(s.PopupMenuView,{className:"popup-menu delete-view",index:n.DeletePage,title:this.props.i18nContext["menu.delete"]},a.a.createElement("p",null,this.props.i18nContext["menu.delete.hint"]),a.a.createElement(s.Button,{danger:!0,onClick:this.onDelete},f.a.get("confirm")))},t.prototype.renderTrigger=function(){return a.a.createElement("div",{className:B["group-menu-trigger"],onClick:this.onClickTrigger},a.a.createElement(s.IconButton,{type:"subtle",color:"gray",name:"more"}))},t.prototype.render=function(){return a.a.createElement(s.PopupMenu,{className:B["group-menu-popup"],main:n.MainPage,titleCls:B["group-menu-popup-title"],trigger:this.renderTrigger(),ref:this.setPopupRef,onOpen:this.onOpen,onClose:this.onClose},this.renderMainPage(),this.renderDeletePage())},t}(a.a.PureComponent),G=r("lt+6VDK1"),q=r.n(G),z=function(e){function t(t){var r=e.call(this,t)||this;return r.renderTreeRoot=function(e){var t={depth:-1,data:{_id:v.a.All,resourceCount:r.props.resourceCount,name:r.props.fixedGroupNames[v.a.All]},hasChildren:!0,onMouseDown:g.a.noop,onToggle:r.wrapToggle(o.a({depth:-1},e)),isExpanded:e.isExpanded,canDrag:!1,canDrop:!1,isDragOver:!1,notAllowedDrop:!1};return a.a.createElement(T.a,o.a({},t,{active:r.isActive(t.data._id),handler:r.renderTreeRootHandler(e),onClick:r.handleClick}))},r.renderTreeNode=function(e){var t=l()(q.a["tree-node"],{hover:e.data._id===r.state.groupIdOnMenuOpened});return a.a.createElement(T.a,o.a({},e,{active:r.isActive(e.data._id),handler:r.renderTreeNodeHandler(e),onClick:r.handleClick,onToggle:r.wrapToggle(e),className:t}))},r.renderTreeFly=function(e){return a.a.createElement(w,{node:e})},r.onDrop=function(e,t,n){switch(N(e.depth+1,r.props.gtaContext),n){case S.a.BEGIN:r.insertBeforeGroup(e,t);break;case S.a.MIDDLE:r.moveIntoGroup(e,t);break;case S.a.END:r.insertAfterGroup(e,t)}},r.handleGroupMove=function(e,t){r.props.onGroupMove(e._id,t),x(e.depth+1,r.props.gtaContext)},r.canDrag=function(e){return Boolean(r.props.hasPermission&&!Object(b.isUncategorizedCommonGroup)(e.data))},r.canDrop=function(e){return Boolean(r.props.hasPermission&&!Object(b.isUncategorizedCommonGroup)(e.data))},r.wrapToggleAll=function(e){return function(){e.onToggleAll(),r.setAllFoldedLocal(e.isAllExpanded),e.isAllExpanded?A(r.props.gtaContext):j(r.props.gtaContext)}},r.wrapToggle=function(e){return function(){e.onToggle();var t=e.depth+1;e.isExpanded?R(t,r.props.gtaContext):P(t,r.props.gtaContext)}},r.handleClick=function(e){r.props.onGroupClick(e._id)},r.handleCreate=function(e){return function(){r.props.onGroupCreate(e)}},r.handleMenuToggle=function(e){return function(t){var n=t?e._id:null;r.setState({groupIdOnMenuOpened:n}),t&&D(r.props.gtaContext)}},r.state={groupIdOnMenuOpened:null},r}return o.d(t,e),t.prototype.render=function(){var e=this.props.nodes.map(function(e){return o.a({},e)}),t=Object(v.f)(this.props.appId);return a.a.createElement(_.a,{initialFolded:t,className:q.a["tree-wrapper"],nodes:e,draggable:!0,renderRoot:this.renderTreeRoot,renderNode:this.renderTreeNode,renderFlyContent:this.renderTreeFly,onDrop:this.onDrop,canDrag:this.canDrag,canDrop:this.canDrop})},t.prototype.renderTreeRootHandler=function(e){var t=e.isAllExpanded?f.a.get("collapse"):f.a.get("expand"),r=e.isAllExpanded?"arrow-collapse":"dashed-vertical";return this.props.nodes.some(function(e){return 0===e.depth&&e.hasChildren})?a.a.createElement(s.Button,{onClick:this.wrapToggleAll(e),type:"subtle",color:"gray",size:"smaller",className:q.a["all-toggler"]},a.a.createElement("span",{className:"text"},t),a.a.createElement(s.Icon,{name:r,className:"icon"})):void 0},t.prototype.renderTreeNodeHandler=function(e){if(this.props.hasPermission&&!Object(b.isUncategorizedCommonGroup)(e.data))return a.a.createElement("div",{className:q.a["handler-list"]},this.renderGroupCreator(e.data),this.renderGroupMenu(e.data))},t.prototype.renderGroupCreator=function(e){return e.ancestorIds.length+2>=9?null:a.a.createElement(s.IconButton,{type:"subtle",color:"gray",name:"circle-plus-o",className:q.a.handler,onClick:this.handleCreate(e)})},t.prototype.renderGroupMenu=function(e){return a.a.createElement("div",{className:q.a.handler},a.a.createElement(U,{i18nContext:this.props.i18nContext,gtaContext:this.props.gtaContext,item:e,onEditItem:this.props.onGroupEdit,onDeleteItem:this.props.onGroupDelete,onToggleMenu:this.handleMenuToggle(e)}))},t.prototype.insertBeforeGroup=function(e,t){var r=e.data._id,n=Object(b.isUncategorizedCommonGroup)(t.data)?null:t.data._id;if(r!==n){var o=this.props.nodes,i=o[g.a.findIndex(o,function(e){return e._id===t._id})-1];if(!(i&&i.data._id===n||i&&i.data.ancestorIds.indexOf(r)>=0)){var a=e._parentId===t._parentId?{_nextId:n}:{_parentId:t.data.ancestorIds[0]||null,_nextId:n};this.handleGroupMove(e,a)}}},t.prototype.moveIntoGroup=function(e,t){var r=e.data._id,n=t.data._id,o=e._parentId;if(!Object(b.isUncategorizedCommonGroup)(t.data)&&o!==t._id&&r!==t._id&&t.data.ancestorIds.indexOf(r)<0){var i={_parentId:n,_nextId:null};this.handleGroupMove(e,i)}},t.prototype.insertAfterGroup=function(e,t){if(t._id!==e._id&&!Object(b.isUncategorizedCommonGroup)(t.data)){var r=this.props.nodes,n=g.a.findIndex(r,function(e){return e._id===t._id}),o=r.slice(n+1).find(function(e){return e._parentId===t._parentId}),i=r.find(function(e){return e._id===t._parentId});o?this.insertBeforeGroup(e,o):i&&this.moveIntoGroup(e,i)}},t.prototype.isActive=function(e){return e===this.props.activeGroupId},t.prototype.setAllFoldedLocal=function(e){Object(v.l)(this.props.appId,e)},t}(i.PureComponent),V=r("ioHUo57O"),K=function(e){function t(t){var r=e.call(this,t)||this;return r.subscriptionList=[],r.onModalVisibleChange=function(e){r.setState({modalOpened:e})},r.onEditItem=function(e){r.setState({modalItem:e,modalOpened:!0,modalMode:"edit"}),M(r.props.gtaContext)},r.onCreateSubItem=function(e){r.setState({modalItem:e,modalOpened:!0,modalMode:"add"}),I(e.ancestorIds.length+2,r.props.gtaContext)},r.onCreateItem=function(){r.setState({modalItem:null,modalOpened:!0,modalMode:"add"}),I(1,r.props.gtaContext)},r.onChooseItem=function(e){e!==r.props.currentSection&&(r.props.actions.onChooseCurrentGroup({section:e}),r.props.onChooseCommonGroup(e,r.props.appId))},r.onCheckIsDuplicateName=function(e,t){var n=r.props.treeData||[];return(Object(v.h)(n,e)||[]).findIndex(function(e){return Object(v.g)(n,e,"name")===t})>=0},r.onSaveGroupItem=function(e,t){"add"===r.state.modalMode?r.createCommonGroup(e,t):r.updateCommonGroup(e,t),r.setState({modalOpened:!1})},r.onDeleteItem=function(e){var t=r.props.projectId;r.props.actions.deleteCommonGroup({id:e,projectId:t})},r.state={modalOpened:!1,modalMode:"add",modalItem:null},r}return o.d(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,r=t.projectId,n=t.appId,o=Object(v.i)(r,n);this.props.actions.mounted({projectId:r,appId:n,section:o});var i=u.default.socketProxy.fromRefresh(this.props.appSocketPattern,"commonGroups").filter(function(e){return e.id===n}).debounceTime(800).subscribe(function(){return e.props.actions.fetchCommonGroups({projectId:r,appId:n})});this.subscriptionList.push(i)},t.prototype.componentWillUnmount=function(){this.props.actions.unmount(),this.subscriptionList.forEach(function(e){return e.unsubscribe()})},t.prototype.componentDidUpdate=function(){var e=this.props,t=e.currentSection,r=e.commonGroups;t&&!Object(v.j)(t)&&r&&!r.some(function(e){return e._id===t})&&this.onChooseItem(v.a.All)},t.prototype.createCommonGroup=function(e,t){var r,n,i=this.state.modalItem?this.state.modalItem._id:void 0,a={name:e,description:t,_projectId:this.props.projectId,_appId:this.props.appId,_parentId:i};this.props.actions.createCommonGroup(a),r=this.state.modalItem?this.state.modalItem.ancestorIds.length+2:1,n=this.props.gtaContext,C.gta.event(o.a({},n,{action:"added content",control:k(r),series:r}))},t.prototype.updateCommonGroup=function(e,t){var r=this.state.modalItem;if(r){var n,i={id:r._id,name:e,description:t,projectId:this.props.projectId};this.props.actions.updateCommonGroup(i),n=this.props.gtaContext,C.gta.event(o.a({},n,{action:"edited content",control:"More Menu"}))}},t.prototype.renderTitle=function(){var e=this.props.i18nContext["panel.title"];return a.a.createElement("div",{className:V["common-groups-title"]},a.a.createElement("div",{className:"name"},e))},t.prototype.renderCreateLink=function(){return this.props.hasPermission&&a.a.createElement("div",{className:V["common-groups-create-link"]},a.a.createElement(s.TextButton,{color:"blue",onClick:this.onCreateItem},a.a.createElement("div",{className:"create-wrapper"},a.a.createElement(s.Icon,{name:"circle-plus",className:"create-icon"}),a.a.createElement("span",null,this.props.i18nContext["create.button"]))))},t.prototype.renderTree=function(){return this.props.treeData?a.a.createElement(z,{appId:this.props.appId,i18nContext:this.props.i18nContext,gtaContext:this.props.gtaContext,resourceCount:this.props.resourceCount,nodes:this.props.treeData,fixedGroupNames:this.props.fixedGroupNames,activeGroupId:this.props.currentSection,hasPermission:this.props.hasPermission,onGroupClick:this.onChooseItem,onGroupMove:this.props.onMoveCommonGroup,onGroupCreate:this.onCreateSubItem,onGroupEdit:this.onEditItem,onGroupDelete:this.onDeleteItem}):a.a.createElement(s.Loading,null)},t.prototype.renderEditModal=function(){return a.a.createElement(y,{i18nContext:this.props.i18nContext,mode:this.state.modalMode,modalItem:this.state.modalItem,modalOpened:this.state.modalOpened,onModalVisibleChange:this.onModalVisibleChange,onCheckIsDuplicateName:this.onCheckIsDuplicateName,onSave:this.onSaveGroupItem})},t.prototype.renderMain=function(){return a.a.createElement("div",{className:V["common-groups"]},this.renderTitle(),this.renderTree(),this.renderCreateLink())},t.prototype.render=function(){return a.a.createElement(a.a.Fragment,null,this.renderMain(),this.renderEditModal())},t}(a.a.PureComponent),H=r("/MKjzBat"),W=r("fvjXLGkK"),J=Object(H.connect)(function(e){return{commonGroups:e.ui.commonGroups.commonGroups,treeData:e.ui.commonGroups.treeData,currentSection:e.ui.commonGroups.currentSection}},function(e){return{actions:Object(W.bindActionCreators)({mounted:v.b.mounted,unmount:v.b.unmount,fetchCommonGroups:v.b.fetchCommonGroups,onChooseCurrentGroup:v.b.onChooseCurrentGroup,createCommonGroup:v.b.createCommonGroup,updateCommonGroup:v.b.updateCommonGroup,deleteCommonGroup:v.b.deleteCommonGroup},e)}})(K);r.d(t,"CommonGroups",function(){return K}),r.d(t,"CommonGroupsConnect",function(){return J}),r.d(t,"FixedCommonGroup",function(){return v.a}),r.d(t,"isFixedCommonGroup",function(){return v.j}),r.d(t,"actions",function(){return v.b}),r.d(t,"dispatchUpdateCurrentCommonGroup",function(){return v.d}),r.d(t,"getStoredCurrentCommonGroup",function(){return v.i}),r.d(t,"getCommonGroupFolded",function(){return v.f}),r.d(t,"setCommonGroupFolded",function(){return v.l}),r.d(t,"reducer",function(){return v.k}),r.d(t,"epic",function(){return v.e}),r.d(t,"getSiblingCommonGroups",function(){return v.h}),r.d(t,"getCommonGroupInfo",function(){return v.g}),r.d(t,"sortMethod",function(){return v.m}),r.d(t,"currentGroupAsFilterValue",function(){return v.c})},UBgZPSQF:function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"c",function(){return u}),r.d(t,"b",function(){return c});var n,o=r("mrSGxOB2"),i=r("6SzIBtPz"),a={projectTags:null},s=Object(i.a)("ASSIGN_DATA_TO_PROJECT_CATEGORY_MANAGER_MODAL_ACTION"),u=Object(i.a)("UNMOUNT_PROJECT_CATEGORY_MANAGER_MODAL_ACTION"),c=Object(i.b)(((n={})[""+s]=function(e,t){return o.a({},e,t.payload)},n[""+u]=function(){return a},n),a)},ULWpA99H:function(e,t,r){"use strict";var n=r("nhsrbVjK");r.d(t,"a",function(){return n.a});var o=r("kUx8H0Nt");r.d(t,"b",function(){return o.a});r("Oqv97qYP")},UTVzL6OD:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"testcase",use:"testcase-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="testcase"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#77C2F8" rx="2" /><path fill="#FFFFFF" fill-rule="nonzero" d="M14.135 13.333c-1.315-3.404-2.85-4.302-2.85-6v-2h.322c.178 0 .321-.149.321-.333v-.667a.328.328 0 0 0-.32-.333H8.392a.328.328 0 0 0-.321.333V5c0 .184.143.333.32.333h.322v2c0 1.698-1.534 2.596-2.849 6C5.447 14.417 4.372 16 10 16s4.553-1.583 4.135-2.667zm-1.357.84c-.4.114-1.194.245-2.738.245-1.545 0-2.34-.13-2.739-.245-.141-.04-.197-.199-.147-.344.126-.367.362-1 .803-1.707 1.078-1.729 2.197.271 3.128.271.93 0 .676-.853 1.037-.271.44.708.678 1.34.803 1.707.05.145-.005.303-.147.344z" /></g></symbol>'});a.a.add(s);t.default=s},UTp6Kxqj:function(e,t,r){e.exports=r.p+"images/posts-2.adf3b220.png"},Uml19jGR:function(e,t,r){e.exports=r.p+"images/taskUniqueId-2.26304d3f.png"},UoPU7bBH:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("6SzIBtPz"),o=Object(n.a)("NO_OP_ACTION")},Ut4AWhQd:function(e,t,r){e.exports=r.p+"images/zoom-poster.4efc9a0b.png"},V5LbGzmV:function(e,t,r){e.exports=r.p+"images/preciseDate-0.7ffc4796.png"},V6edIaEd:function(e,t,r){"use strict";r.r(t);var n=r("mrSGxOB2"),o=r("tLZJUYWX"),i=r.n(o),a=r("a+N5u/Cl"),s=r.n(a),u={dropDown:"single-selection",multipleChoice:"multi-selection",number:"custom-number",date:"calendar",text:"custom-text",work:"file",story:"intelligence",bug:"lightning"},c=function(e){return u[e]},l={bullseye:"focus",building:"building",document:"text-file",members:"users",person:"user","stack-tick":"stack-tick"};function p(e){var t=e.type,r=e.subtype,n=e.advancedCustomfield;if("lookup"===t){var o=n&&n.icon||"";return l[o]}return u[("commongroup"===t?r:t)||""]}var f={get date(){return i.a.get("custom.fields.data.type.date")},get dropDown(){return i.a.get("custom.fields.data.type.dropDown")},get multipleChoice(){return i.a.get("custom.fields.data.type.multipleChoice")},get number(){return i.a.get("custom.fields.data.type.number")},get text(){return i.a.get("custom.fields.data.type.text")},get work(){return i.a.get("custom.fields.data.type.work")}};function d(e,t){return"lookup"===e?t&&t.name||"":f[e]}function g(e,t){switch(e.type){case"date":case"number":case"text":return k(t)||"";case"dropDown":return j(t,e.choices)||"";case"multipleChoice":return A(t,e.choices);case"commongroup":return h(e,t);case"lookup":case"work":return t.value}}function h(e,t){var r=e.choices||[],n=t.value[0]||{};return r.find(function(e){return e._id===n._id})||m(e)}function m(e){return(e.choices||[]).find(function(e){return Boolean(e.isRoot)})}function y(e,t){var r=h(e,t);return r&&r.value}function v(e,t){var r=g(e,t);return!s.a.isEmpty(r)}function b(e,t){return 0!==t.length&&(!e||t.some(function(t){return e.includes(t)}))}function _(e,t,r){return!!e._id&&E(e,t)||b(t,r)}function S(e,t,r){return!(!e._id||t.includes(e._id))||0!==r.length&&r.some(function(e){return!t.includes(e)})}function T(e,t,r,n){return n.some(function(n){switch(n){case"creator":return e===r;case"executor":return e===t;default:return!1}})}function E(e,t){return t instanceof Set?t.has(e._id):!t||t.some(function(t){return t===e._id})}function O(e,t){return t.includes(e)}function w(e){var t=e.isDefault,r=0===e.level;return t&&r}function C(e){var t=e.isDefault,r=1===e.level;return t&&r}function I(e){var t=e.isDefault,r=2===e.level;return t&&r}function k(e){return e.value&&e.value.length>0?e.value[0].title:e.values[0]}function j(e,t){if(e.value&&e.value.length>0)return e.value[0].title;var r=t&&(t||[]).find(function(t){return t._id===e.values[0]});return r&&r.value}function A(e,t){return e.value&&e.value.length>0?e.value.map(function(e){return e.title}):t?e.values.map(function(e){var r=(t||[]).find(function(t){return t._id===e});return r&&r.value}).filter(function(e){return!!e}):[]}function P(e){var t=e.customfield,r=(e._customfieldId,e._id),o=e.projects,i=n.g(e,["customfield","_customfieldId","_id","projects"]);return n.a({},t,{projects:o,choices:i.choices,customfieldentity:e,_customfieldentityId:r})}r.d(t,"customFieldIconMap",function(){return u}),r.d(t,"getCustomFieldIcon",function(){return c}),r.d(t,"advancedCustomFieldIconMap",function(){return l}),r.d(t,"castCustomFiledTypeToIconName",function(){return p}),r.d(t,"getCustomFieldTypeName",function(){return d}),r.d(t,"getCustomFieldValue",function(){return g}),r.d(t,"getCommonGroupChoice",function(){return h}),r.d(t,"getUncategorizedCommonGroupChoice",function(){return m}),r.d(t,"getCommonGroupChoiceValue",function(){return y}),r.d(t,"checkCustomFieldHasValue",function(){return v}),r.d(t,"isExternalRoleIdsAllowed",function(){return b}),r.d(t,"canRoleEditCustomField",function(){return _}),r.d(t,"canRoleEditCustomFieldByBanned",function(){return S}),r.d(t,"canActorEditCustomField",function(){return T}),r.d(t,"isRoleAllowed",function(){return E}),r.d(t,"isActorAllowed",function(){return O}),r.d(t,"isGeneratedMember",function(){return w}),r.d(t,"isGeneratedAdmin",function(){return C}),r.d(t,"isGeneratedOwner",function(){return I}),r.d(t,"getSingleValue",function(){return k}),r.d(t,"getLegacySingleValue",function(){return j}),r.d(t,"getMultiValue",function(){return A}),r.d(t,"formatEntityToField",function(){return P})},VC8z115W:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r("a+N5u/Cl"),a=r("NXI+L8V4"),s=r("DOZCBSCZ"),u=(r("y/L8RYEm"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.render=function(){var e=o.createElement("span",{className:"react-end-point"});return o.createElement(this.props.component,{className:"react-end-point-wrapper",key:"end-point"},e)},t.defaultProps={component:"div"},t}(o.PureComponent));r.d(t,"a",function(){return c});var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.throttleHandler=function(e){return i.throttle(e,t.props.throttleDelay)},t.onEnterHandler=function(){var e=t.props,r=e.clause,n=e.onEnter;("function"==typeof r?r():r)&&n.call(t)},t}return n.d(t,e),t.prototype.renderWayPoint=function(){var e=this.props,t=e.direction,r=e.distance,n=e.scrollNode,i=e.initialLoadLimit;return o.createElement(a.a,{direction:t,upperBounds:r,onEnter:this.onEnterHandler,throttle:this.throttleHandler,scrollableNode:n,initialLoadLimit:i},this.props.spinner)},t.prototype.renderEndPoint=function(){var e=this.props.endWith;return e?o.createElement(u,{component:e}):null},t.prototype.render=function(){return this.props.hasMore?this.renderWayPoint():this.renderEndPoint()},t.defaultProps={distance:-20,direction:"vertical",spinner:o.createElement(s.a,null),throttleDelay:218,clause:!0,hasMore:!0,endWith:"div",initialLoadLimit:1},t}(o.PureComponent)},VFdZXmy3:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"event",use:"event-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="event"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#77C2F8" rx="2" /><path fill="#FFFFFF" d="M13.106 5.059V4.45c0-.248-.202-.45-.652-.45s-.653.202-.653.45v.609H8.2V4.45c0-.248-.202-.45-.653-.45-.45 0-.652.202-.652.45v.609h-.886c-.83 0-1.508.675-1.508 1.5V14.5c0 .825.679 1.5 1.508 1.5h7.984c.83 0 1.508-.675 1.508-1.5V6.559c0-.825-.679-1.5-1.508-1.5h-.886zm.537 9.641H6.357a.55.55 0 0 1-.55-.534V9.01h8.386v5.155a.55.55 0 0 1-.55.534z" /></g></symbol>'});a.a.add(s);t.default=s},VNCONshu:function(e,t,r){e.exports=r.p+"images/analytics-poster.e8cd8cfa.png"},VYV1JQTD:function(e,t,r){e.exports=r.p+"images/markdown-0.59fc2514.png"},VZAukzxm:function(e,t,r){"use strict";r("/n75eoyq");var n=r("WPfcBNQv");r.d(t,"readMoreTeamsAction",function(){return n.a}),r.d(t,"readTeamsAction",function(){return n.b}),r.d(t,"searchMoreTeamsAction",function(){return n.c}),r.d(t,"searchTeamsAction",function(){return n.d}),r.d(t,"teamsListSelectEpic",function(){return n.e}),r.d(t,"teamsListSelectReducer",function(){return n.f}),r.d(t,"unmountTeamsListAction",function(){return n.g});var o=r("b3H2wOxq");r.o(o,"getSortedTeamsSelector")&&r.d(t,"getSortedTeamsSelector",function(){return o.getSortedTeamsSelector});var i=r("409HBpnm");r.d(t,"getSortedTeamsSelector",function(){return i.a})},VqAGOIEF:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"training",use:"training-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="training"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#A1A4D9" rx="2" /><path fill="#FFFFFF" d="M7.233 4.502L5.86 4.5a.458.458 0 0 0-.459.457v10.086c0 .253.206.457.46.457l7.515-.014c.642 0 1.192-.496 1.192-1.17V5.689c0-.648-.55-1.175-1.194-1.175l-3.206-.007v3.239c0 .223-.147.307-.33.187l-.971-.582a.324.324 0 0 0-.332 0l-.971.582c-.182.12-.33.039-.33-.187V4.502z" /></g></symbol>'});a.a.add(s);t.default=s},VuB9cZyl:function(e,t,r){var n,o,i,a,s,u,c,l,p={}.hasOwnProperty;u=r("a+N5u/Cl"),l=r("sa1Ed382"),c=r("2qRnoGmE"),n=r("q1z7EYOi"),i=r("bZr3G77e"),a=r("wu4EEviu"),s=r("yiO17FlF"),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)p.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n.Collection),t.prototype.synced=!1,t.prototype.listened=!1,t.prototype.orderBy="latest-created",t.prototype.initialize=function(e,t){if(this.pageIndex=0,this._boundToObjectId=(null!=t?t._boundToObjectId:void 0)||0,null!=(null!=t?t.boundToObjectType:void 0)&&(this.boundToObjectType=t.boundToObjectType),"activities"===this.name)return this.listen()},t.prototype.add=function(e,r){return r||(r={}),r.merge=!0,t.__super__.add.apply(this,arguments)},t.prototype.set=function(e,r){return r||(r={}),r.parse=!0,r.merge=!0,t.__super__.set.apply(this,arguments)},t.prototype.sync=function(e,r,n){var o,a,s,p,f;switch(n.url||(n.url=this.name),n.xhrFields={withCredentials:!0},n.headers=i.wrapHeaders(n.headers),n.success=i.wrapSuccess(n.success),n.error=i.wrapError(n.error,{silentError:n.silentError,requestHeaders:n.headers}),p=n.success||function(){},e){case"read":s=n.attrs||("function"==typeof this.getParams?this.getParams(e,n):void 0)||{},this.pageNum&&!s.all&&(s.noPagination||(s.count=this.pageNum,s.page=++this.pageIndex)),!n.skipBoundToObjectType&&this.boundToObjectType&&(s[a="_"+this.boundToObjectType+"Id"]||(s[a]=s._boundToObjectId||this._boundToObjectId)),l.user.get("isGhost")&&(s=u.extend(s,l._global)),n.data=s,f=this,o=function(e){return f.synced=!0,f.pageNum&&(f.hasMore=f.checkHasMore(e)),p(e),f.listen()};break;case"one":n.type="GET",n.processData=!0,n.url+="/"+n._modelId,o=function(e){return function(t){return e.update(t),p(e.get(t._id))}}(this)}return/^http(s)?:\/\//.test(n.url)||(n.url=c.API_HOST+"/"+n.url),null==n.cache&&(n.cache=!1),n.success=function(e){return(null!=e?e.code:void 0)?n.error(e):(o||p)(e)},t.__super__.sync.apply(this,arguments)},t.prototype.listen=function(){var e,t;if(!this.listened)return this.listened=!0,e=this.name,this._boundToObjectId&&(e+="/"+this._boundToObjectId),"projects"!==this.name&&this.on("change:isArchived",(t=this,function(e,r){if(r)return t.remove(e)})),a.on(":new:"+e,function(e){return function(t){return e.add(t)}}(this)),a.on(":change:"+e,function(e){return function(t){return e.update(t)}}(this)),a.on(":refresh:"+e,function(e){return function(t){return t?e.model?new e.model({_id:t}).fetch({success:function(t){return e.add(t)},silentError:!0}):void 0:e.refresh?e.refresh():e.fetch()}}(this)),a.on(":remove:"+e,function(e){return function(t){return e.remove(t)}}(this)),e!==this.name&&a.on(":remove:"+this.name,function(e){return function(t){return e.remove(t)}}(this)),this},t.prototype.last=function(){return 0===this.length?{}:this.at(this.length-1)},t.prototype.comparator=function(e){var t;switch(this.orderBy){case"latest-created":return-new Date(e.get("created")||0).getTime();case"earliest-created":return new Date(e.get("created")||0).getTime();case"latest-updated":return-new Date(e.get("updated")||0).getTime();case"earliest-updated":return new Date(e.get("updated")||0).getTime()}if(this.orderBy)return(null!=(t=e.get(this.orderBy))&&"function"==typeof t.toLowerCase?t.toLowerCase():void 0)||t},t.prototype.updateSort=function(e,t){var r;return e&&e.length?(r=function(r){return e.indexOf(r)+1||(t?0:9999)},this.models.sort(function(e,t){return r(e.id)-r(t.id)}),this):this},t.prototype.update=function(e,t){return t||(t={}),t.remove=!1,this.set(e,t)},t.prototype.checkHasMore=function(e){var t;return(null!=(null!=(t=e.results)?t.length:void 0)?e.results.length:e.length)>0},t.prototype.loadMore=function(e){var t,r;if(this.hasMore)return e||(e={}),e.remove=!1,t=e.error||function(){},e.error=(r=this,function(){return t.apply(r,arguments)}),this.fetch(e)},t.prototype.fetchOne=function(e,t){return t||(t={}),t._modelId=e,this.sync("one",this,t)},t.prototype.resetSoft=function(){return this.pageIndex=0,this.synced=!1,this.hasMore=!1},t.prototype.reset=function(){return this.resetSoft(),t.__super__.reset.apply(this,arguments)},t}(),e.exports=s.bindToCollection(o)},W5zQERVw:function(e,t,r){"use strict";r.r(t);r("+2RfZ2TT"),r("LvDlAkAJ"),r("a+N5u/Cl"),r("q1z7EYOi"),r("K+7dShhL"),r("DdwvUwFp"),r("J9DuUOSg"),r("aWeRvbyH"),r("wMS7wN+j"),r("9jPx0rLz"),r("7r7CHmrc"),r("RETC28Ri"),r("Lj/ldHVx"),r("AMFPHTRh"),r("imBbjl9T"),r("bZMmrEms"),r("NS4ZqriE"),r("u7uKHmtP"),r("QyjeWo4p"),r("XQ5nL9cp"),r("p3BxYchr"),r("k7+OBFO9"),r("z/ifOGtP"),r("tLZJUYWX"),r("zsrTy1Hg"),r("dahkxBq4"),r("K4CHbgVz"),r("CxY0Mkc1"),r("eWa34jGb"),r("PV4AwzOQ"),r("pVe2NLek"),r("uHRdHWpl"),r("jvgq3JKC"),r("32f0a3rt"),r("08Xabq3j"),r("9D5xdHW1"),r("r+Tp39ea"),r("YhK8NXnX"),r("OobPBGYB"),r("si6pCx9z"),r("9/yfZeop"),r("chtWgZec"),r("kCXGwHrz"),r("NvoQP0Id"),r("cBBk+vyC"),r("jT6uwKgv"),r("qKs0Z8KE"),r("9GYKvbC2"),r("VXxgOQI1"),r("vqGAP1xU"),r("vSmz5XnS"),r("FDphbCrW"),r("NK4fc//k"),r("zFFnmF86"),r("TIpRdivD"),r("dRSKTbT+"),r("HEwtAF8a"),r("INYriTCn"),r("ls82xohD"),r("4c1CS0b3"),r("Qros3QnH"),r("8yf6doCl"),r("AvXNRgE6"),r("JwtWcGrN"),r("PMMzMK36"),r("ZiWuABAJ"),r("5eVA7Ggo"),r("7uu2VGkf"),r("K4wuF8rN"),r("sx9yqNer"),r("TGZE1KE5"),r("neMAwlMA"),r("T3prb3wx"),r("uwfAeVC+"),r("N2eyfQ88"),r("VBoaco5r"),r("eOMzMiWJ"),r("S7rWVi1n"),r("m/g1DQWu"),r("hyLG9e0g"),r("wpj7aAKq"),r("hh2c+p4K"),r("DTok0101"),r("DlyVJOsV"),r("yYKyhSkr"),r("6ANj/pFO"),r("98u3KsSk"),r("92bnoOmF"),r("5EkBZL8K"),r("k8pCFieH"),r("fjAU4jyp"),r("gxrElbei"),r("9redQBOy"),r("Tg8muX4V"),r("4XzM5oUL"),r("Wj7NNWaq"),r("OA6Iqxq6"),r("GhFGRVlq"),r("K9+pEiPD"),r("G7k463d8"),r("a6vsCwwY"),r("mPU7ngXj"),r("F7y8taHE"),r("ll0jgMaT"),r("M67Xxkkf"),r("eZA3bOPD"),r("ylHofnxg"),r("whEGQwuH"),r("MhQTxTKF"),r("MSNSkilk"),r("3e/75yxJ"),r("H161uNUc"),r("MKA96lnu"),r("VcZd2Ah1"),r("Qc3QMdeB"),r("6OjodyzK"),r("f02I4NeD"),r("4PPTp6x8"),r("g3QqRHgI"),r("964DHnXC"),r("oKDzPhAd"),r("T6aK3J9C"),r("4el8NOgd")},WPfcBNQv:function(e,t,r){"use strict";r.d(t,"b",function(){return d}),r.d(t,"a",function(){return g}),r.d(t,"d",function(){return h}),r.d(t,"c",function(){return m}),r.d(t,"g",function(){return b}),r.d(t,"f",function(){return S}),r.d(t,"e",function(){return T});var n,o=r("mrSGxOB2"),i=r("4c1CS0b3"),a=r("6SzIBtPz"),s=r("NOGqly5s"),u=r("GESwhXbR"),c=r("s0r7VfKc"),l=r("fio7jWQ0"),p=r("oRqJmROU"),f="TEAMS_LIST_SELECT_ACTION",d=Object(a.a)(f+"/READ_TEAMS_ACTION"),g=Object(a.a)(f+"/READ_MORE__TEAMS_ACTION"),h=Object(a.a)(f+"/SEARCH_TEAMS_ACTION"),m=Object(a.a)(f+"/SEARCH_MORE_TEAMS_ACTION"),y=Object(a.a)(f+"/READ_TEAMS_ACTION/SUCCESS"),v=Object(a.a)(f+"/SEARCH_TEAMS_ACTION/SUCCESS"),b=Object(a.a)(f+"/UNMOUNT_TEAMS_LIST"),_={teams:null,searchedTeams:null,isLoadingMore:!1,isLoadingMoreSearch:!1},S=Object(a.b)(((n={})[""+b]=function(){return _},n[""+d]=function(e){return o.a({},e,{isLoadingMoreSearch:!1})},n[""+g]=function(e){return o.a({},e,{isLoadingMore:!0})},n[""+h]=function(e){return o.a({},e,{isLoadingMore:!1})},n[""+m]=function(e){return o.a({},e,{isLoadingMoreSearch:!0})},n[""+y]=function(e,t){return t.payload?o.a({},e,{teams:t.payload.result,isLoadingMore:t.payload.hasMore}):e},n[""+v]=function(e,t){return t.payload?o.a({},e,{searchedTeams:t.payload.result,isLoadingMoreSearch:t.payload.hasMore}):e},n),_),T=Object(s.a)(function(e){var t=e.ofType(""+g);return e.ofType(""+d).filter(p.a).switchMap(function(e){var r=e.payload,n=c.default.fetch.readTeamsPagination(r);return c.default.fetch.expandPage(n,{loadMore$:t}).map(function(e){return y(e)}).catch(function(e){return u.Toast.error(e),i.Observable.of(Object(l.noOpAction)())})})},function(e){var t=e.ofType(""+m);return e.ofType(""+h).filter(p.a).switchMap(function(e){var r=e.payload,n=c.default.fetch.searchTeamsPagination(r);return c.default.fetch.expandPage(n,{loadMore$:t}).map(function(e){return v(e)}).catch(function(e){return u.Toast.error(e),i.Observable.of(Object(l.noOpAction)())})})})},Wk6U1j2J:function(e,t,r){e.exports={label:"label__3fOX",empty:"empty__1sCb",disabled:"disabled__2w41",root:"root__22lb"}},WlCGY8BB:function(e,t,r){"use strict";r.r(t),r.d(t,"init",function(){return m}),r.d(t,"reportInitPerformance",function(){return y});var n=r("2qRnoGmE"),o=r.n(n),i=r("+2RfZ2TT"),a=r.n(i),s=r("OUKRSD97"),u=r("cpgmk0C4"),c=r("3Y3DhWJy"),l=r("Ht53lnzN"),p=r("quWP7MGD"),f=r("RZ0XRn1L"),d=r("5V57DkyA");for(var g in c)["init","reportInitPerformance","default"].indexOf(g)<0&&function(e){r.d(t,e,function(){return c[e]})}(g);var h=r("sa1Ed382");a.a.ajaxPrefilter(function(e,t,r){var n=Object(s.now)();r.always(function(){var t=Object(s.now)()-n,o=e.url.replace(/(\?|&)_=\d+/,"");t>=1e3&&Object(c.logEx)(["ajax-stall"],{url:o,time:t,type:e.type,status:r.status}),r.status>=400&&Object(c.logEx)(["ajax-failure"],{url:o,type:e.type,status:r.status})})});var m=function(e){if(o.a.ECHO_CONFIG){var t=new s.Echo({namespace:e,report:o.a.ECHO_CONFIG.report}),r=new l.PerformanceCollector(o.a.ECHO_CONFIG.collect.performance);t.addCollector(new u.JSGlobalCollector),t.addCollector(new c.LoggingCollector(o.a.ECHO_CONFIG.collect.logging)),t.addCollector(new p.PromiseCollector),t.addCollector(new f.RxCollector),t.addCollector(r),"development"!==h.env&&o.a.APM&&t.addReporter(new d.APMReporter({host:o.a.APM_HOST})),h.echo=t}},y=function(){Object(l.reportDocumentPerformance)(),Object(l.reportRuntimePerformance)(["perf-static"],function(e){return e instanceof PerformanceResourceTiming&&("link"===e.initiatorType||"script"===e.initiatorType)})}},"WqxAlg/b":function(e,t,r){e.exports=r.p+"images/preciseDate-1.d37215dd.png"},WspGoV4E:function(e,t,r){e.exports={"member-menu":"member-menu__3Jy1"}},X7169US4:function(e,t,r){"use strict";r.r(t),r.d(t,"dispatchCreateSmartGroup",function(){return E}),r.d(t,"actions",function(){return j}),r.d(t,"reducer",function(){return A}),r.d(t,"epic",function(){return R}),r.d(t,"getTQLString",function(){return N});var n,o=r("mrSGxOB2"),i=r("a+N5u/Cl"),a=r("tLZJUYWX"),s=r.n(a),u=r("6SzIBtPz"),c=r("NOGqly5s"),l=r("peh1clMB"),p=r("GESwhXbR"),f=r("s0r7VfKc"),d=r("oRqJmROU"),g=r("4c1CS0b3"),h=r("fio7jWQ0"),m=r("79Xm+sqc"),y=r("50927W45"),v=r("p7RaAO2S"),b=r("oPs7WnEA"),_=r("zDJ6609A"),S=r("gh8QIhMV"),T=r("MinzmEda"),E=function(e,t){h.store.dispatch(j.createSmartGroup({projectId:e,options:t}))},O={searchInput:"",filters:{},tql:null,showedSearchers:[]},w={shouldUpdateStatus:!1,projectId:null,tasklistId:null,smartGroupId:null,scrumSmartGroupId:null,scrumSmartGroupType:null,sprintId:null,sortMethod:null,searchInput:"",input:"",dropdownOpened:!1,sortedTqlKey:"",searcherGroups:[],showedSearchers:[],invisibleSearcherIds:[],filters:{},tql:null,tqlValues:{},hasFilters:!1,isLoading:!1,isCustomFiltersLoading:!1,hasMore:!1,customfieldsSearchers:[],isSearchLoading:!1,searchHasMore:!1,customfieldsResult:[]},C=function(e){return"SCRUM_PANEL/"+e},I=function(e){return e+"/SUCCESS"},k=function(e){return e+"/FAILURE"},j={mount:Object(u.a)(C("MOUNT")),unmount:Object(u.a)(C("UNMOUNT")),updatedStatus:Object(u.a)(C("UPDATED_STATUS")),setSortMethod:Object(u.a)(C("CHANGE_SORT_METHOD")),getSearchers:Object(u.a)(C("GET_SEARCHERS")),getSearchersSuccess:Object(u.a)(C(I("GET_SEARCHERS"))),getSearchersFailure:Object(u.a)(C(k("GET_SEARCHERS_SUCCESS"))),saveSearchers:Object(u.a)(C("SAVE_SEARCHERS")),hideSearcher:Object(u.a)(C("HIDE_SEARCHER")),showSearcher:Object(u.a)(C("SHOW_SEARCHER")),changeSearchInput:Object(u.a)(C("CHANGE_SEARCH_INPUT")),changeSearchInputSuccess:Object(u.a)(C(I("CHANGE_SEARCH_INPUT"))),changeFilter:Object(u.a)(C("CHANGE_FILTER")),removeFilter:Object(u.a)(C("REMOVE_FILTER")),resetFilters:Object(u.a)(C("RESET_FILTERS")),updateTQLString:Object(u.a)(C("UPDATE_TQL_STRING")),changeHasFilters:Object(u.a)(C("CHANGE_HAS_FILTERS")),changeInput:Object(u.a)(C("CHANGE_INPUT")),toggleDropdown:Object(u.a)(C("TOGGLE_DROPDOWN")),getCustomfieldsSearchers:Object(u.a)(C("GET_CUSTOMFIELDS_SEARCHERS")),getCustomfieldsSearchersSuccess:Object(u.a)(C(I("GET_CUSTOMFIELDS_SEARCHERS_SUCCESS"))),getCustomfieldsSearchersFailed:Object(u.a)(C(k("GET_CUSTOMFIELDS_SEARCHERS_FAILED"))),getCustomfieldsSearchersLoadMore:Object(u.a)(C("GET_CUSTOMFIELDS_SESARCHERS_LOAD_MORE")),searchCustomfieldsSearchersLoadMore:Object(u.a)(C("SEARCH_CUSTOMFIELDS_SESARCHERS_LOAD_MORE")),searchCustomfieldsSearchers:Object(u.a)(C("SEARCH_CUSTOMFIELDS_SEARCHERS")),searchCustomfieldsSearchersSuccess:Object(u.a)(C(I("SEARCH_CUSTOMFIELDS_SEARCHERS_SUCCESS"))),searchCustomfieldsSearchersFailed:Object(u.a)(C(k("SEARCH_CUSTOMFIELDS_SEARCHERS_FAILED"))),showCustomfieldsSearcher:Object(u.a)(C("SHOW_CUSTOMFIELDS_SEARCHER")),createSmartGroup:Object(u.a)(C("CREATE_SMART_GROUP")),updateSmartGroup:Object(u.a)(C("UPDATE_SMART_GROUP")),updateSmartGroupSuccess:Object(u.a)(C(I("UPDATE_SMART_GROUP"))),updateSmartGroupFailed:Object(u.a)(C(k("UPDATE_SMART_GROUP")))},A=Object(u.b)(((n={})[""+j.mount]=function(e,t){return t.payload?o.a({},w,t.payload,{shouldUpdateStatus:!0}):e},n[""+j.updatedStatus]=function(e){return o.a({},e,{shouldUpdateStatus:!1})},n[""+j.setSortMethod]=function(e,t){return t.payload?o.a({},e,t.payload):e},n[""+j.changeSearchInput]=function(e,t){var r=t.payload.searchInput;return o.a({},e,{searchInput:r})},n[""+j.changeInput]=function(e,t){var r=t.payload;return o.a({},e,{input:r,isSearchLoading:!!e.projectId,hasSearchMore:!!e.projectId,customfieldsResult:[]})},n[""+j.toggleDropdown]=function(e,t){return o.a({},e,{dropdownOpened:t.payload})},n[""+j.getSearchers]=function(e){return o.a({},e,{isLoading:!0})},n[""+j.getSearchersSuccess]=function(e,t){return t.payload?o.a({},e,{isLoading:!1},t.payload):e},n[""+j.hideSearcher]=function(e,t){var r=t.payload;return o.a({},e,{showedSearchers:e.showedSearchers.filter(function(e){return e!==r})})},n[""+j.showSearcher]=function(e,t){return o.a({},e,{showedSearchers:i.chain(e.showedSearchers).concat([t.payload]).uniq().value()})},n[""+j.showCustomfieldsSearcher]=function(e,t){var r=t.payload;return o.a({},e,{customfieldsSearchers:i.chain(e.customfieldsSearchers).concat([r]).uniq("id").value(),showedSearchers:i.chain(e.showedSearchers).concat([r.id]).uniq().value()})},n[""+j.getCustomfieldsSearchers]=function(e){return o.a({},e,{isCustomFiltersLoading:!!e.projectId,hasMore:!1})},n[""+j.getCustomfieldsSearchersSuccess]=function(e,t){return o.a({},e,t.payload,{isCustomFiltersLoading:!1})},n[""+j.getCustomfieldsSearchersFailed]=function(e){return o.a({},e,{isCustomFiltersLoading:!1})},n[""+j.searchCustomfieldsSearchers]=function(e){return o.a({},e,{hasSearchMore:!1})},n[""+j.searchCustomfieldsSearchersSuccess]=function(e,t){return o.a({},e,t.payload,{isSearchLoading:!1})},n[""+j.searchCustomfieldsSearchersFailed]=function(e){return o.a({},e,{isSearchLoading:!1,hasSearchMore:!1})},n[""+j.changeFilter]=function(e,t){var r=t.payload;if(!r)return e;var n=Object.assign({},e.filters,r.filter),i=Object(b.formatFiltersLinkage)(n,r.filter),a=Object(b.getTqlValuesByFilters)(i);return o.a({},e,{filters:i,tqlValues:a})},n[""+j.removeFilter]=function(e,t){var r=i.omit(e.filters,t.payload),n=Object(b.getTqlValuesByFilters)(r);return o.a({},e,{filters:r,tqlValues:n})},n[""+j.changeHasFilters]=function(e,t){var r=t.payload;return r?r.hasFilters===e.hasFilters?e:o.a({},e,r):e},n[""+j.resetFilters]=function(e){return o.a({},e,{searchInput:O.searchInput,filters:O.filters,tqlValues:Object(b.getTqlValuesByFilters)(O.filters),showedSearchers:O.showedSearchers})},n[""+j.updateTQLString]=function(e,t){var r=t.payload;return r?o.a({},e,r):e},n[""+j.unmount]=function(){return w},n),w),P=function(e){return e.getState().ui.scrumPanel},R=Object(c.a)(function(e,t){return e.ofType(""+j.getSearchers).switchMap(function(r){var n=r.payload.presetFilters,a=P(t),s=a.projectId,u=a.tasklistId,c=a.smartGroupId,l=a.scrumSmartGroupId,p=a.scrumSmartGroupType;if(!s)return g.Observable.of();var d=Object(b.getSearchersTag)(s,c,l);return f.default.getSearchersWithTag(d).takeUntil(e.ofType(""+j.unmount)).map(function(e){var t=e.defaultSearchers,r=e.groups,a=e.q,s=[],l=[],f=i.chain(r).map(function(e){var r=i.filter(e.searchers,function(e){var t=i.contains(e.objectType,y.a.Task),r=Object(b.isVaildSearcherByScrumType)(e.id,p),n="projectId"!==e.id;return t&&r&&n});r.forEach(function(e){Object(b.filterSearcher)({searcher:e,tasklistId:u,scrumSmartGroupType:p,smartGroupId:c})||l.push(e.id)});var n=r.map(function(e){var r=t.concat(l);return i.include(r,e.id)?Object(b.formatSearchers)(e):e});return"CUSTOMFIELD"===e.category&&(s=n),o.a({},e,{searchers:n})}).filter(function(e){return"CUSTOMFIELD"!==e.category}).value(),d=i.difference(t,l),g=Object(b.getFilteredSearchers)(d.concat(l),f,s),h=Object(b.getInitialFilter)(n,g),m=Object(b.getTqlValuesByFilters)(h);return{showedSearchers:d,searcherGroups:f,customfieldsSearchers:s,filters:h,tqlValues:m,searchInput:a||"",invisibleSearcherIds:l}}).catch(function(e){return Object(S.throwError)(e),g.Observable.of(j.getSearchersFailure())})}).map(j.getSearchersSuccess)},function(e,t){var r=e.ofType(""+j.getCustomfieldsSearchers),n=e.ofType(""+j.getCustomfieldsSearchersLoadMore);return r.filter(function(){return!!P(t).projectId}).switchMap(function(){var r=f.default.getCustomfieldsSearchers(void 0,P(t).projectId);return f.default.fetch.expandPage(r,{loadMore$:n}).takeUntil(e.ofType(""+j.unmount)).map(function(e){return j.getCustomfieldsSearchersSuccess({hasMore:e.hasMore,isCustomFiltersLoading:!1,customfieldsSearchers:i.chain(P(t).customfieldsSearchers).concat(e.result).uniq("id").value()})}).catch(function(e){return Object(S.throwError)(e),g.Observable.of(j.getCustomfieldsSearchersFailed())})})},function(e,t){var r=e.ofType(""+j.searchCustomfieldsSearchers),n=e.ofType(""+j.searchCustomfieldsSearchersLoadMore);return r.filter(function(){return!!P(t).projectId}).switchMap(function(){var r=f.default.getCustomfieldsSearchers(void 0,P(t).projectId,P(t).input.trim());return f.default.fetch.expandPage(r,{loadMore$:n}).takeUntil(e.ofType(""+j.unmount)).map(function(e){return j.searchCustomfieldsSearchersSuccess({isSearchLoading:!1,searchHasMore:e.hasMore,customfieldsResult:e.result})}).catch(function(e){return Object(S.throwError)(e),g.Observable.of(j.searchCustomfieldsSearchersFailed())})})},function(e){return e.ofType(""+j.changeSearchInput).debounceTime(400).map(function(e){return j.changeSearchInputSuccess(e.payload)})},function(e,t){return e.ofType(""+j.changeInput).debounceTime(400).filter(function(){return P(t).input.trim().length>0}).map(j.searchCustomfieldsSearchers)},function(e){return e.ofType(""+j.toggleDropdown).map(function(e){return e.payload?Object(h.noOpAction)():j.changeInput("")})},function(e){return e.ofType(""+j.hideSearcher).map(function(e){return j.removeFilter(e.payload)})},function(e,t){return e.ofType(""+j.getSearchersSuccess,""+j.changeSearchInputSuccess,""+j.changeFilter,""+j.removeFilter,""+j.resetFilters).flatMap(function(){var e=P(t),r=e.shouldUpdateStatus,n=e.searchInput,o=e.filters,i=e.showedSearchers,a=e.tql,s=e.hasFilters,u=N(t.getState()),c=[];r&&(O={searchInput:n,filters:o,tql:u,showedSearchers:i},c.push(j.updatedStatus()));var l=O.tql!==u;return s!==l&&c.push(j.changeHasFilters({hasFilters:l})),a!==u&&c.push(j.updateTQLString({tql:u})),g.Observable.from(c).do(function(){Object(T.setFilterStatus)(l)})})},function(e,t){return e.ofType(""+j.updateSmartGroup).filter(d.a).switchMap(function(r){var n=r.payload,o=n.id,i=n.options;return f.default.updateSmartGroup(o,i).takeUntil(e.ofType(""+j.unmount)).switchMap(function(e){var r=P(t),n=r.searchInput,o=r.filters,i=r.showedSearchers,a=r.tql;return O={searchInput:n,filters:o,tql:a,showedSearchers:i},p.Toast.success(s.a.get("custom.view.save.success")),g.Observable.from([j.changeHasFilters({hasFilters:!1}),j.saveSearchers({smartGroup:e})])}).catch(function(e){return Object(S.throwError)(e),g.Observable.of(j.updateSmartGroupFailed())})})},function(e,t){return e.ofType(""+j.createSmartGroup).filter(d.a).switchMap(function(r){var n=r.payload,i=n.projectId,a=n.options,s=t.getState().ui.board.boardViewType,u=s.paneType,c=s.laneType,l=s.scenarioFieldIds,p=s.boardMode,d=s.taskLayer,h=P(t),m=h.tql,y=h.sortMethod,v=Object(b.getSmartGroupViewOption)(p,u,c,l,d),T=o.a({filter:m||"",view:v,orderBy:Object(b.getOrderBy)(y)},a);return f.default.createSmartGroup(i,T).takeUntil(e.ofType(""+j.unmount)).concatMap(function(e){return g.Observable.from([j.saveSearchers({smartGroup:e}),_.actions.setNewSmartGroupId({id:e._id})])}).catch(function(e){return Object(S.throwError)(e),g.Observable.of(j.updateSmartGroupFailed())})})},function(e,t){return e.ofType(""+j.saveSearchers).filter(d.a).switchMap(function(r){var n=r.payload.smartGroup._id,o=P(t),a=o.showedSearchers,s=o.invisibleSearcherIds,u=o.searcherGroups,c=o.searchInput,l=o.tqlValues,p=o.customfieldsSearchers,d={};i.chain(u).pluck("searchers").flatten().concat(p).forEach(function(e){return d[e.id]=e}).value();var h=a.concat(s).map(function(e){return d[e]}),m="smartgroup:"+n,y=x(h,l);return f.default.updateSearchersWithTag(m,y,c).takeUntil(e.ofType(""+j.unmount)).map(j.updateSmartGroupSuccess).catch(function(e){return Object(S.throwError)(e),g.Observable.of()})})}),N=Object(l.createSelector)(function(e){return e.ui.scrumPanel},function(e){var t=e.searchInput,r=e.filters,n=e.showedSearchers,o=e.searcherGroups,a=e.customfieldsSearchers,s=e.invisibleSearcherIds,u=y.b.Task,c=i.chain(o).pluck("searchers").flatten().filter(function(e){return i.contains(e.objectType,u)&&"projectId"!==e.id}).concat(m.a(y.a.Task)?a:[]).map(function(e){return e.id}).value(),l=i.intersection(c,n).concat(s),p=i.pick(r,l),f=[y.b.User,y.b.Project].indexOf(u)>=0;return Object(v.b)(p,t,f)}),x=function(e,t){var r=[];return e.forEach(function(e){var n=t[e.id];r.push(o.a({},e,{tqlValue:n||""}))}),r}},XArW7AVN:function(e,t,r){"use strict";r.d(t,"e",function(){return o}),r.d(t,"b",function(){return i}),r.d(t,"d",function(){return a}),r.d(t,"c",function(){return s}),r.d(t,"a",function(){return u});var n=r("a+N5u/Cl"),o=["note","priority","tag","worktimes","storyPoint","taskProgress","sprint"],i=["location","content","tag"],a=n.union(o,i),s=["customfield"],u=["executor","creator"]},XIKSkjsA:function(e,t,r){"use strict";r.d(t,"n",function(){return o}),r.d(t,"m",function(){return i}),r.d(t,"g",function(){return a}),r.d(t,"l",function(){return s}),r.d(t,"o",function(){return u}),r.d(t,"k",function(){return c}),r.d(t,"j",function(){return l}),r.d(t,"f",function(){return p}),r.d(t,"c",function(){return f}),r.d(t,"e",function(){return d}),r.d(t,"d",function(){return g}),r.d(t,"a",function(){return h}),r.d(t,"i",function(){return m}),r.d(t,"h",function(){return y}),r.d(t,"b",function(){return v});var n=r("cUZYBCvT"),o=776,i=99999,a=39,s=56,u=112,c=10,l=30,p=1.25,f=47,d=60,g=20,h=128,m={},y=[{key:"name",unDraggable:!0,fixed:!0,cannotHide:!0,sortable:!0,headHeight:a,height:s,width:232,minWidth:232,official:!0,maxWidth:525},{key:"status",unDraggable:!0,fixed:!0,cannotHide:!0,sortable:!0,headHeight:a,height:s,width:128,minWidth:128,official:!0,maxWidth:175},{key:"suspendedAt",sortable:!0,headHeight:a,height:s,width:150,minWidth:150,official:!0,onlyProjectCategory:n.a.Suspended},{key:"suspendedBy",sortable:!0,headHeight:a,height:s,width:136,minWidth:136,official:!0,onlyProjectCategory:n.a.Suspended},{key:"projecttags",sortable:!0,headHeight:a,height:s,width:120,minWidth:120,official:!0,onlyProjectTag:!0},{key:"doneRate",sortable:!0,headHeight:a,height:s,width:152,minWidth:105,official:!0},{key:"dueRate",sortable:!0,headHeight:a,height:s,width:152,minWidth:105,official:!0},{key:"unallocated",sortable:!0,hidden:!0,headHeight:a,height:s,width:u,minWidth:76,official:!0},{key:"durationDay",sortable:!0,headHeight:a,height:s,width:u,minWidth:76,official:!0},{key:"owner",sortable:!0,headHeight:a,height:s,width:136,minWidth:136,unResizable:!0,official:!0},{key:"creator",sortable:!0,headHeight:a,height:s,width:152,minWidth:136,official:!0},{key:"created",sortable:!0,headHeight:a,height:s,width:120,minWidth:120,official:!0},{key:"startDate",sortable:!0,headHeight:a,height:s,width:150,minWidth:150,official:!0},{key:"endDate",sortable:!0,headHeight:a,height:s,width:150,minWidth:150,official:!0}],v={key:"customfield",sortable:!0,headHeight:a,height:s,width:u,minWidth:76,loading:!0}},XNNEmibk:function(e,t,r){e.exports=r.p+"images/tableView-0.ca281286.png"},XO839WrT:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(e,t){if("number"==typeof e)return e;var r=function(e){var t=parseFloat(e);if(!isNaN(t)&&isFinite(t))return t;if("px"===e.slice(-2))return parseFloat(e.slice(0,-2));throw new Error("cannot parse this string as px")}(e);if("number"==typeof r)return r;var n=function(e){if("%"===e.slice(-1))return parseFloat(e.slice(0,-1))/100;throw new TypeError("cannot parse this string as %")}(e);if("number"==typeof n)return n*t;throw new TypeError("parse Offset failed.")}},XzLKzFPG:function(e,t,r){e.exports=r.p+"images/timeview-poster.6dc0df9e.jpg"},Y5oJiebU:function(e,t,r){},YAWvrHae:function(e,t,r){e.exports={"insert-line":"insert-line__1p1D"}},YCobQTHr:function(e,t,r){e.exports=r.p+"images/evernote-0.03943100.png"},YJHhhC9o:function(e,t){},YdqH4v7N:function(e,t){var r,n;r=$("body"),n=$(window),e.exports={scrollTo:function(e,t,n){var o;return this.$scrollFrame!==r&&(o=r.scrollTop()),n||(n=0),this.$scrollFrame.scrollTop(this._getScrollposition(e,t)-n),null!=o&&r.scrollTop(o),this},slideTo:function(e,t,r,n){if(this.$scrollFrame)return r||(r=0),this.$scrollFrame.stop(!0),this.$scrollFrame.animate({scrollTop:this._getScrollposition(e,t)-r},"fast",null,function(){return"function"==typeof n?n():void 0})},_getScrollposition:function(e,t){var o,i,a;return e&&this.$scrollFrame!==e?(a=e[0].getBoundingClientRect(),this.$scrollFrame===r?i=!0===t?a.top-170:a.bottom-n.height()+170:(o=this.$scrollFrame[0].getBoundingClientRect(),i=!0===t?a.top-o.top-20:a.bottom-o.bottom+20),i+=this.$scrollFrame.scrollTop()):(i=this.$scrollFrame[0].scrollHeight,i-=this.$scrollFrame===r?n.height():this.$scrollFrame.height()),i},setupScroll:function(e,t){var n,o;if(t||(t={}),null!=(n=this.$scrollFrame)&&n.scrollTop(0).off("scroll"),this.$scrollFrame=e||r,t.shadow&&(this.$scrollFrame.on("scroll",(o=this,function(){return o._updateScrollStyle()})),this._updateScrollStyle()),this.loadMore)return this.setupLoadMore()},_updateScrollStyle:function(){var e;return null!=(e=this.$el)?e.toggleClass("overflow-top",!!this.$scrollFrame.scrollTop()):void 0},setupLoadMore:function(e,t){var o,i,a;if("scroll.loadmore",null!=(o=this.$scrollFrame===r?$(document):this.$scrollFrame)&&o.off("scroll.loadmore"),!1!==e)return e||(e=100),a=this,(i=function(){if(a.$el)return null!=o?o.on("scroll.loadmore",function(r){var s,u;return a.$el?(u=o.scrollTop(),s=a.$scrollFrame[0].scrollHeight-u,r.currentTarget.body?s-=n.height():s-=a.$scrollFrame.height(),t&&u<=0||!t&&s<=e&&u>=0?(null!=o&&o.off("scroll.loadmore"),a.loadMore(i,t&&u<=0)):void 0):null!=o?o.off("scroll.loadmore"):void 0}):void 0})(),function(){return null!=o?o.trigger("scroll.loadmore"):void 0}}}},YqUJfXDr:function(e,t,r){"use strict";r.r(t);var n=r("VC8z115W");r.d(t,"LoadMore",function(){return n.a})},"Z/GsRxmw":function(e,t,r){e.exports=r.p+"images/startdate-poster.08240b76.png"},Z5YuF96j:function(e,t,r){e.exports=r.p+"images/preciseDate-2.5009e2cb.png"},Z7XVTGXp:function(e,t,r){"use strict";var n,o,i,a={unset:108,day:108,week:36,month:8,quarter:4,year:1},s=r("wd/RKGTj"),u=r.n(s),c=r("a+N5u/Cl"),l=r("tLZJUYWX"),p=r("PXasOaBr"),f=r("ctsD9mWH"),d=function(){var e=f.store.getState();return e.browser.print.activate||e.ui.board.gantt.ganttExportMode},g=function(e,t){return e<=t?1:t/e},h=function(){for(var e={},t=0;t<9;t++)e[t]=t+9;return e[9]=18,e}(),m=function(e){var t=e.get("hour");return t<10?0:t>=17?8:t-9},y=function(e){return function(t,r,n,o){void 0===o&&(o=!1);var i=e(n),a=o?Math.ceil(r/i):Math.floor(r/i);return Math.abs(a)<1?t:t.clone().startOf("day").add({day:a,hour:9})}},v=function(e){return function(t,r,n){var o=e(n)/p.a;if(r>=0&&r<o)return t;var i=t.clone().startOf("day"),a=m(t),s=Math.floor(r/o)+a,u=Math.floor(s/p.a),c=s%p.a;c<0&&(c=p.a+c);var l=h[c];return i.add(u,"day").add(l,"hour"),i}},b=r("px/Tdvb+").sort,_=function(e,t){return t?e.sort(function(e,r){return b(e,r,t)}):e},S=function(e,t){return e.diff(t,"day")},T=function(e,t){switch(t){case"unset":case"day":case"week":return l.get("gantt.cal.scale1.month",e.year(),e.format("MMM"));case"month":return l.get("gantt.cal.scale1.quarter",e.year(),e.quarter());case"quarter":case"year":return l.get("gantt.cal.scale1.year",e.year())}},E=function(e){return a[e]*function(e,t){if(void 0===t&&(t=2400),!f.store||!d())return 1;var r=f.store.getState().ui.board.gantt,n=r.startDate,o=r.endDate,i=K(n,e),s=Q(n,o,e,!1);switch(e){case"unset":case"day":return g(a.day*s.diff(i,"day"),t);case"week":return g(a.week*s.diff(i,"week")*7,t);case"month":return g(a.month*s.diff(i,"month")*30,t);case"quarter":return g(a.quarter*s.diff(i,"quarter")*90,t);case"year":return g(a.year*s.diff(i,"year")*365,t)}}(e)},O=(o=v(n=E),i=y(n),function(e,t,r){switch(r){case"unset":case"day":case"week":return o(e,t,r);case"month":case"quarter":case"year":return i(e,t,r)}}),w=y(E);var C={get unset(){return E("unset")},get day(){return E("day")},get week(){return 7*E("week")},get month(){return 31*E("month")},get quarter(){return 92*E("quarter")},get year(){return 366*E("year")}},I=function(e,t){switch(e){case"unset":case"day":case"week":return C[e];case"month":case"quarter":case"year":return t?function(e,t){var r=u()(e).startOf(t),n=r.clone().endOf(t).add(1,"day");return Y(n,r,t)}(t,e):C[e]}},k=function(e){return E(e)/p.a},j={unset:"day",day:"month",week:"month",month:"quarter",quarter:"year",year:"year"},A=function(e){return j[e]};var P=function(e,t,r,n,o){var i,a=function(e){switch(e){case"unset":case"day":case"week":return k(e);case"month":case"quarter":case"year":return E(e)}}(t);return i=r?u()(r):R(t,"start",n||void 0),{startDate:O(i,o&&e<0?e+a:e,t).toISOString(),dueDate:x(n?u()(n):R(t,"due",r||void 0),o&&e>0?e-a:e,t).toISOString()}},R=function(e,t,r){switch(t){case"start":return u()(r).subtract(pe(e));case"due":return u()(r).add(pe(e));default:return u()(r)}},N=function(e){var t=e.clone().startOf("day"),r=e.diff(t,"hour",!0);return 0===r?0:r<=10?1:r>=18?9:Math.ceil(r-9)};function x(e,t,r){switch(r){case"unset":case"day":case"week":return function(e,t,r){var n=E(r)/p.a,o=e.clone().startOf("day"),i=N(e),a=Math.ceil(t/n)+i,s=Math.floor(a/p.a),u=a%p.a;0===u&&s--;u<=0&&(u=p.a+u);var c=h[u];return o.add(s,"day").add(c,"hour"),o}(e,t,r);case"month":case"quarter":case"year":return w(e,t,r,!0)}}var D=function(e){var t="translate3d("+e+"px, 0, 0)";return{msTransform:t,WebkitTransform:t,transform:t}};function M(e,t,r){switch(r){case"unset":case"day":case"week":return F(e,t,r,!0);case"month":case"quarter":case"year":return F(e,t,r)}}function F(e,t,r,n){void 0===n&&(n=!1);var o=E(r),i=S(t,e)*o,a=n?o/p.a*m(t):0;return Math.round(i+a)}var L=function(e,t,r){return D(M(e,t,r))},B={get unset(){return k("unset")},get day(){return k("day")},get week(){return k("week")},get month(){return E("month")},get quarter(){return E("quarter")},get year(){return 4*E("year")}};function U(e){return B[e]}function G(e,t,r){var n=function(e,t,r){switch(r){case"unset":case"day":case"week":return function(e,t,r){var n=m(e),o=N(t),i=E(r),a=i/p.a,s=0;if(t.isSame(e,"day"))s=a*(o-n);else{var u=(p.a-n+o)*a,c=e.clone().endOf("day"),l=t.clone().startOf("day"),f=S(l,c),d=f*i;s=d+u}return Math.round(s)}(e,t,r);case"month":case"quarter":case"year":return function(e,t,r){return Y(t.clone().startOf("day").add(1,"day"),e.startOf("day"),r)}(e,t,r)}}(e,t,r),o=U(r);return n<o?o:n}var q={unset:k("unset"),day:k("day"),week:3*k("week"),month:3*E("month"),quarter:3*E("quarter"),year:12*E("year")},z=function(e,t){var r=function(r){void 0===r&&(r=!1);var n=r?k(t):E(t),o=q[t]/n;return n*((9===e.get("hour")?o-1:o)||1)};switch(t){case"unset":case"day":return e.add(1,"h");case"week":return x(e,r(!0),t);case"month":case"quarter":case"year":return x(e,r(!1),t)}},V={unset:void 0,day:u.a.duration(7,"day"),week:u.a.duration(1,"week"),month:u.a.duration(1,"month"),quarter:u.a.duration(1,"quarter"),year:u.a.duration(1,"year")};function K(e,t){return u()(e).subtract(V[t]).startOf(ue(t))}function H(e,t,r){var n=u()(t),o=u()(e),i=n.diff(o,ue(r)),a=Math.ceil(W()/I(r));return i<a&&n.add(a-i,ue(r)),n.toISOString()}var W=function(){return window.innerWidth-p.g-2*p.h},J=function(e){switch(e){case"day":return 2;default:return 1}};function Q(e,t,r,n){void 0===n&&(n=!0);var o=u()(t).add(V[r]),i=n?H(e,o,r):o;return u()(i).endOf(ue(r))}var Y=function(e,t,r){return E(r)*e.diff(t,"day")},X={unset:void 0,day:u.a.duration(2,"day"),week:u.a.duration(1,"week"),month:u.a.duration(1,"month"),quarter:u.a.duration(1,"quarter"),year:u.a.duration(1,"year")};function $(e){return u()().subtract(X[e]).startOf(ue(e))}function Z(e,t,r){var n=Math.floor(t/E(e)),o=u()(r).add(n,"day"),i=A(e);return{isPinCurrent:o.clone().endOf(i).diff(o,ue(e))>0,currentDay:o.toISOString()}}var ee=function(e,t){var r=e-J(t);return d()?0:r<0?0:r},te=function(e,t,r,n){var o=u()(r).diff(u()(t),ue(e)),i=n+function(e){var t=I(e);return Math.ceil(W()/t)}(e)+J(e);return d()?o:i>o?o:i};function re(e,t,r){var n=u()(e).subtract(1,"day"),o=u()(t),i=Y(o,n,r),a=W();return i<a?a:i}var ne=function(e){return{WebkitTransform:e,msTransform:e,transform:e}},oe=function(e,t,r){var n=[];return function e(o,i){var a=r[o];a&&a.length&&i&&a.forEach(function(r){var o=t[r];o&&(n.push(t[r]),e(r,o.isVisible))})}(e,!0),n},ie=function(e,t){var r=e.ancestorIds,n=!0;return r.forEach(function(e){n=n&&c.contains(t,e)}),n},ae=function(e,t,r){return[function(){return e.totalCount>p.f},function(){return t.length>0},function(){return t.length<e.totalCount}].every(function(e){return e()})&&!r},se={unset:"day",day:"day",week:"week",month:"month",quarter:"quarter",year:"year"};function ue(e){return se[e]}function ce(e){var t=E(e);return 36<t?u.a.duration(36/k(e),"hour"):u.a.duration(36/t,"day")}var le={get unset(){return ce("unset")},get day(){return ce("day")},get week(){return ce("week")},get month(){return ce("month")},get quarter(){return ce("quarter")},get year(){return ce("year")}};function pe(e){return le[e]}r.d(t,"G",function(){return a}),r.d(t,"D",function(){return _}),r.d(t,"l",function(){return S}),r.d(t,"m",function(){return T}),r.d(t,"x",function(){return E}),r.d(t,"B",function(){return O}),r.d(t,"z",function(){return w}),r.d(t,"y",function(){return I}),r.d(t,"w",function(){return k}),r.d(t,"r",function(){return A}),r.d(t,"o",function(){return P}),r.d(t,"A",function(){return x}),r.d(t,"n",function(){return D}),r.d(t,"h",function(){return M}),r.d(t,"i",function(){return L}),r.d(t,"u",function(){return U}),r.d(t,"k",function(){return G}),r.d(t,"b",function(){return z}),r.d(t,"f",function(){return K}),r.d(t,"a",function(){return H}),r.d(t,"s",function(){return J}),r.d(t,"d",function(){return Q}),r.d(t,"j",function(){return Y}),r.d(t,"p",function(){return $}),r.d(t,"c",function(){return Z}),r.d(t,"e",function(){return ee}),r.d(t,"g",function(){return te}),r.d(t,"q",function(){return re}),r.d(t,"v",function(){return ne}),r.d(t,"C",function(){return oe}),r.d(t,"F",function(){return ie}),r.d(t,"E",function(){return ae}),r.d(t,"H",function(){return ue}),r.d(t,"t",function(){return pe})},ZHQdWuUF:function(e,t,r){e.exports={clickable:"clickable__2PbT","raw-html-with-anchor-formatter":"raw-html-with-anchor-formatter__qX3C"}},ZKYHwlYi:function(e,t,r){"use strict";r.d(t,"b",function(){return d}),r.d(t,"j",function(){return g}),r.d(t,"d",function(){return h}),r.d(t,"g",function(){return m}),r.d(t,"e",function(){return y}),r.d(t,"h",function(){return v}),r.d(t,"i",function(){return b}),r.d(t,"f",function(){return _}),r.d(t,"a",function(){return S}),r.d(t,"c",function(){return T});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r("s0r7VfKc"),a=r("IssmDVnT"),s=r("2qRnoGmE"),u=r.n(s),c=r("EcZ0z2mK"),l=r("zzqnp9bg"),p=function(e){return function(t,r,o){var a={_organizationId:o,pageSize:r,q:t,type:e,spaceType:"organization"};return i.default.fetch.get("search",a,{includeHeaders:!0,apiHost:u.a.AONE_ADAPTER_HOST}).map(function(e){var t=e.headers,r=e.body,o=t.get(l.a);return n.a({},r,{result:r.result.map(function(e){return n.a({},e,{sessionId:o})})})})}},f=function(e){return function(t,r,n){var o={q:t,_organizationId:n,type:e};return a.Page.defaultState("search",{pageSize:r,urlQuery:o})}},d=function(e,t){return void 0===t&&(t={}),i.default.fetch.expandPage(e,{loadMore$:t.loadMore$,apiHost:u.a.AONE_ADAPTER_HOST,mapFn:function(e,t,r,o){var i=o.get(l.a);return n.a({},e,{sessionId:i})}})},g=p(c.b.WorkItem),h=p(c.b.App),m=p(c.b.Sprint),y=p(c.b.Cr),v=p(c.b.TestCase),b=p(c.b.TestJob),_=p(c.b.Doc),S={workitem:f(c.b.WorkItem),app:f(c.b.App),sprint:f(c.b.Sprint),cr:f(c.b.Cr),testcase:f(c.b.TestCase),testjob:f(c.b.TestJob),doc:f(c.b.Doc)},T=function(e){var t={q:e.q,spaceType:"organization",type:"workitem,app,cr,sprint,testjob,testcase,doc",pageSize:6,_organizationId:e.organizationId};return i.default.fetch.get("search",t,{includeHeaders:!0,apiHost:u.a.AONE_ADAPTER_HOST}).map(l.b).map(function(e){var t=e.result,r=e.requestId,i=o.groupBy(t,"objectType");return o.mapObject(i,function(e){return e.map(function(e){return n.a({},e,{sessionId:r})})})})}},Zb29duIX:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"tap-num-3",use:"tap-num-3-usage",viewBox:"0 0 14 32",content:'<symbol viewBox="0 0 14 32" id="tap-num-3"><path d="M5.856 14.016c1.104 0 1.866-.132 2.286-.396.42-.264.63-.876.63-1.836V8.472c0-.528-.162-.96-.486-1.296-.324-.336-.762-.504-1.314-.504-.648 0-1.11.204-1.386.612-.276.408-.414.804-.414 1.188v2.088H1.5V8.436c0-.744.144-1.452.432-2.124A5.164 5.164 0 0 1 3.12 4.584a5.904 5.904 0 0 1 1.764-1.152A5.425 5.425 0 0 1 7.044 3c1.008 0 1.842.198 2.502.594.66.396 1.158.798 1.494 1.206.24.288.45.582.63.882.18.3.324.648.432 1.044.108.396.192.876.252 1.44s.09 1.254.09 2.07c0 .888-.018 1.608-.054 2.16-.036.552-.132 1.014-.288 1.386-.156.372-.384.69-.684.954-.3.264-.714.552-1.242.864.576.36 1.014.696 1.314 1.008.3.312.522.678.666 1.098.144.42.228.924.252 1.512.024.588.036 1.338.036 2.25 0 .84-.018 1.536-.054 2.088-.036.552-.09 1.014-.162 1.386-.072.372-.168.69-.288.954a5.744 5.744 0 0 1-2.232 2.502c-.72.444-1.644.666-2.772.666a6.472 6.472 0 0 1-1.836-.288 5.006 5.006 0 0 1-1.764-.936c-.528-.432-.966-.996-1.314-1.692-.348-.696-.522-1.548-.522-2.556v-2.088h3.672v1.908c0 .576.162 1.05.486 1.422.324.372.762.558 1.314.558s.99-.186 1.314-.558c.324-.372.486-.87.486-1.494v-3.672c0-.504-.042-.912-.126-1.224a1.405 1.405 0 0 0-.45-.738c-.216-.18-.51-.3-.882-.36a9.508 9.508 0 0 0-1.458-.09v-3.24z" /></symbol>'});a.a.add(s);t.default=s},ZkU9LyAY:function(e,t){},"ZlXCU/aY":function(e,t,r){"use strict";var n=r("a+N5u/Cl"),o=r("zPyQ/BVG"),i=r("mrSGxOB2"),a=r("q1tIBJhx"),s=r("GESwhXbR"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){var e=t.props,r=e.id,n=e.onChange;n&&n(r)},t}return i.d(t,e),t.prototype.render=function(){var e=this.props,t=e.label,r=e.checked;return a.createElement("li",{onClick:this.onClick},a.createElement(s.Checkbox,{checked:r}),a.createElement("span",null,t))},t}(a.PureComponent);function c(e,t){if(e.length!==t.length)return!1;var r={};return n.each(t,function(e){return r[e.id]=!0}),n.every(e,function(e){return n.has(r,e)})}r.d(t,"c",function(){return c}),r.d(t,"b",function(){return o.a}),r.d(t,"a",function(){return u})},Zz1nN0mI:function(e,t,r){e.exports=r.p+"images/zoom-2.065c032b.png"},a2Z1fDJ7:function(e,t,r){"use strict";r.r(t),r.d(t,"sanitize",function(){return i});var n=r("wMS7wN+j"),o=r.n(n),i=function(e){return o.a.sanitize(e)}},afows5Ma:function(e,t,r){"use strict";var n;r.d(t,"a",function(){return n}),function(e){e.Create="organization.projecttag.post",e.Del="organization.projecttag.del",e.Put="organization.projecttag.put",e.Move="organization.projecttag.move",e.MemberManage="organization.projecttagmember.manage"}(n||(n={}))},b3H2wOxq:function(e,t){},bMnB8TLD:function(e,t,r){"use strict";r.r(t),r.d(t,"getAxisCache",function(){return d}),r.d(t,"setAxisCache",function(){return g}),r.d(t,"getNormalAllViewAxis",function(){return m}),r.d(t,"getScrumAxis",function(){return y}),r.d(t,"getTaskflowAxis",function(){return v}),r.d(t,"getDefaultAxises",function(){return b}),r.d(t,"getInitAxises",function(){return _});var n=r("mrSGxOB2"),o=r("LvDlAkAJ"),i=r("HYobN8SQ"),a=r.n(i),s=r("77NnVLwu"),u=r.n(s),c=r("lfya3Nc5"),l=r("fcolQD49"),p=r("bvmrLhnu"),f=a.a.namespace("kanban_axis"),d=function(e,t,r){var i=f.get(e)||function(e){var t=n.f(Object(p.parseBoardViewAppId)(e),2),r=t[0],o=t[1],i=u.a.find(r);return i&&[i.isScrum()&&"sprint"===o,!i.isScrum()&&"tasks"===o].some(Boolean)?f.get(r):null}(e),a=i&&function(e,t,r){switch(n.f(Object(p.parseBoardViewAppId)(e),2)[1]){case"tasks":return t.lane===l.a.AxisType.noop&&Object(o.compact)([r.isUsingTasklist&&l.a.AxisType.stage,l.a.AxisType.scenarioConfigStatus,l.a.AxisType.scenarioConfig,l.a.AxisType.priority]).includes(t.pane);default:return!0}}(e,i,r)?i:t,s=Object(c.getValidatePaneType)(a.pane);return n.a({},a,{pane:s})},g=function(e,t,r){var o=_(e,r),i=Object(c.getValidatePaneType)(t.pane||o.pane),a=n.a({},o,t,{pane:i});return f.set(e,a)},h={lane:l.a.AxisType.noop,pane:l.a.AxisType.stage},m=function(){return{lane:l.a.AxisType.noop,pane:l.a.AxisType.scenarioConfig}},y=function(){return{lane:l.a.AxisType.taskflow,pane:l.a.AxisType.scenarioConfigStatus}},v=function(){return{lane:l.a.AxisType.noop,pane:l.a.AxisType.scenarioConfigStatus}},b=function(e,t){var r=n.f(Object(p.parseBoardViewAppId)(e),2)[1],o=t.isTaskflowProject,i=t.isUsingTasklist;switch(r){case"story":case"bug":return v();case"sprint":return y()}return o?v():i?h:m()},_=function(e,t){var r=b(e,t);return d(e,r,t)}},bWU6aNtL:function(e,t,r){var n,o={}.hasOwnProperty;n=r("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="smartgroup",t.prototype.isSprint=function(){return"sprint"===this.get("type")},t.prototype.isBug=function(){return"bug"===this.get("type")},t.prototype.isStory=function(){return"story"===this.get("type")},t}()},bZr3G77e:function(e,t,r){var n,o,i,a,s,u,c,l,p,f,d,g,h,m,y,v;p=r("a+N5u/Cl"),n=r("+2RfZ2TT"),o=r("q1z7EYOi"),f=r("2qRnoGmE"),a=r("9jPx0rLz"),h=r("IssmDVnT"),s=h.HttpHeaders,l=h.Utils,u=r("GESwhXbR").Toast,c=r("ksn0Grpi").ToastMessageWithUrl,m=r("gh8QIhMV").throwError,i=1e3*p.random(5,10),g=!0,d=f.API_X_PORT?{"x-port":f.API_X_PORT}:{},v=-(new Date).getTimezoneOffset()/60,y={get:function(){return v},update:function(){return v=-(new Date).getTimezoneOffset()/60}},e.exports=p.extend({},o.Events,{timezone:function(){return y.get()},initialize:function(){var e;return e=null,n(window).on("offline",function(){return e=u.error({message:tb_i18n.get("disconnected"),duration:null})}).on("online",function(){return u.close(e)}),this.on("reconnected",function(){return g||u.success({message:tb_i18n.get("connected")}),i,g=!0,y.update()}),this.on("disconnect",function(){return g&&u.error({message:tb_i18n.get("disconnected"),duration:null}),i,g=!1})},wrapSuccess:function(e){return t=this,function(r){return g||t.trigger("reconnected"),"function"==typeof e?e(r):void 0};var t},wrapError:function(e,t){var r,n,o;return o=(r=null!=t?t:{}).silentError,n=r.requestHeaders,function(t){var r,i;return r={code:"",message:"",name:"",status:t.status,requestId:null!=n?n[s.Key.RequestId]:void 0},t.responseJSON?r=p.extend(r,t.responseJSON):p.isObject(t)?(r.code=t.code||t.status||1,r.message=t.message||r.message||t.statusText||"",r.name=t.name,r.stack=r.stack,r.requestId=("function"==typeof t.getResponseHeader?t.getResponseHeader(s.Key.RequestId):void 0)||r.requestId):r.message=t,o||(401===r.status&&"AccessTokenMissing"!==r.name?c.error({messageTitle:tb_i18n.get("token.expired"),urlTitle:tb_i18n.get("login"),onClickUrl:function(){return window.location.href=f.ACCOUNT_HOST+"/login?next_url="+encodeURIComponent(window.location.href)},duration:null}):"abort"!==t.statusText&&(i=r.message||tb_i18n.get("error"),429===r.status?i=tb_i18n.get("xhr.error.429"):405===r.status&&(i=tb_i18n.get("xhr.error.405")),u.error(i))),"function"==typeof e?e(r):void 0}},wrapForExpireCache:function(e){var t,r,n,o,i,s,u;return o=e.expireCache,t=e.beforeSend||p.noop,u=e.success||p.noop,n=e.url.replace(/_=\d+/,"_="),i=a,o.namespace&&(i=i.namespace(o.namespace,o.expire)),r=i(n),s=null!=r?p.noop:p.partial(i,n),e.beforeSend=function(){if(t.apply(this,arguments),r)return u(r),!1},e.success=function(e){return s(e),u(e)},r},wrapHeaders:function(e,t){var r;return r=(null!=t?t:{}).disableRequestId,s.create(d,{customHeaders:e,disableRequestId:r})},ajax:function(e,t){var r,n,i,a,s,u;if(p.isString(e)?(t.url||(t.url=e),/^http(s)?:\/\//.test(t.url)||(t.url=f.API_HOST+"/"+t.url)):t=e,s=(t.type||t.method||"GET").toUpperCase(),n=p.omit(t,"type"),n=p.defaults(n,{dataType:"json",method:s}),r=["POST","PUT","DELETE"],p.contains(r,s)&&!p.isString(n.contentType)&&(n.contentType="application/json; charset=utf-8",!p.isString(n.data)&&-1!==n.contentType.indexOf("application/json")))try{n.data=JSON.stringify(n.data)}catch(c){m(c)}return(a=-1===n.url.indexOf(f.API_HOST+"/"))||(n.xhrFields={withCredentials:!0}),n.headers=this.wrapHeaders(t.headers,{disableRequestId:a}),n.success=this.wrapSuccess(t.success),n.error=this.wrapError(t.error,{silentError:t.silentError,requestHeaders:n.headers}),"GET"===s&&n.expireCache&&(i=this.wrapForExpireCache(n)),u=n.success||p.noop,n.success=function(e,t,r){var o,i;return o=l.parseHeaders(r.getAllResponseHeaders()),i=Number(o.get("x-http-status"))||r.status,e&&(e.code||i>=400)?n.error(e):u(e)},new Promise(function(e,r){var a;return 0===(a=o.ajax(n)).status&&t.expireCache?e(i):a.then(e,r)})},get:function(e,t,r){return arguments.length<=2?r=t||{}:3===arguments.length&&(r.data=t),r.method="GET",this.ajax(e,r)},put:function(e,t,r){return null==t&&(t={}),null==r&&(r={}),r=p.extend({},r,{data:t,method:"PUT"}),this.ajax(e,r)},post:function(e,t,r){return null==t&&(t={}),null==r&&(r={}),r=p.extend({},r,{data:t,method:"POST"}),this.ajax(e,r)},del:function(e,t,r){return null==t&&(t={}),null==r&&(r={}),r=p.extend({},r,{data:t,method:"DELETE"}),this.ajax(e,r)}})},bhrhDTdJ:function(e,t,r){e.exports=r.p+"images/works-0.a08cc52d.png"},blJV7IFk:function(e,t){},blOzeFgC:function(e,t,r){},bqYxFEmS:function(e,t,r){"use strict";r.r(t),r.d(t,"DONE_CONDITION",function(){return u}),r.d(t,"UNDO_CONDITION",function(){return c}),r.d(t,"EMPTY_CONDITION",function(){return l}),r.d(t,"getConditionBucket",function(){return d});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r("gh8QIhMV"),a=r("pYq0h+Ab"),s=r("GeeOS9xn"),u="DONE_CONDITION",c="UNDO_CONDITION",l="EMPTY_CONDITION",p=function(e,t){return function(r){if("object"!=typeof r||null===r)return!1;switch(e){case a.AxisType.noop:return!0;case a.AxisType.general:return!1;case a.AxisType.isDone:return r.isDone===t.value;case a.AxisType.executor:return(n=t.value,function(e){if("boolean"==typeof e&&!1===e){var t=o.isArray(n)?n:[n];return o.contains(t,l)}return!!e})(r._executorId===t.value);case a.AxisType.iterationSprint:case a.AxisType.taskflow:return!1;case a.AxisType.priority:return r.priority===t.value;case a.AxisType.stage:return r._stageId===t.value;case a.AxisType.taskflowStatus:case a.AxisType.scenarioConfigStatus:return r._taskflowstatusId===t.value;case a.AxisType.scenarioConfig:return r._scenariofieldconfigId===t.value}var n}};var f=function(e,t,r){return t.reduce(function(t,o){var a,u,c=o.predicate||function(e,t){var r=p(e,t);return r||Object(i.throwError)(new Error("unresolve AxisType "+e+" of Axis "+JSON.stringify(t))),r||function(){return!1}}(e,o);if(r.size>0)try{for(var l=n.i(r.entries()),f=l.next();!f.done;f=l.next()){var d=n.f(f.value,2),g=d[0],h=d[1],m=Object(s.getCombinedAxisId)([g,o.id]);h=Array.isArray(h)&&h.length>0?h.filter(function(e){return"function"==typeof e}).concat(c):[c],t.set(m,h)}}catch(y){a={error:y}}finally{try{f&&!f.done&&(u=l.return)&&u.call(l)}finally{if(a)throw a.error}}else{m=o.id;t.set(m,[c])}return t},new Map)},d=function(e,t,r,n){var o=new Map;return Array.isArray(t)&&t.length>0&&(o=f(e,t,o)),Array.isArray(n)&&n.length>0&&(o=f(r,n,o)),o}},btPWu6us:function(e,t,r){"use strict";var n=r("F7XczqYE");r.d(t,"projectsInformationBoardAppEpic",function(){return n.a});var o=r("5pBrSTAv");r.d(t,"filterProjectsInformationBoardTableAction",function(){return o.a}),r.d(t,"mountProjectsInformationBoardAppAction",function(){return o.b}),r.d(t,"mountProjectsInformationTableHeadManagerAction",function(){return o.c}),r.d(t,"projectsInformationBoardAppReducer",function(){return o.e}),r.d(t,"readProjectCustomFieldsAction",function(){return o.i}),r.d(t,"readProjectsOfProjectTagAction",function(){return o.o}),r.d(t,"resetProjectsOfProjectTagAction",function(){return o.s}),r.d(t,"selectProjectTagAction",function(){return o.t}),r.d(t,"sortProjectsInformationBoardTableAction",function(){return o.u}),r.d(t,"unmountProjectsInformationBoardAppAction",function(){return o.v}),r.d(t,"unmountProjectsInformationTableHeadManagerAction",function(){return o.w}),r.d(t,"updateProjectBoardAction",function(){return o.x});var i=r("2ZkDO+ZE");r.o(i,"getSortedProjectBoardCustomFieldIds")&&r.d(t,"getSortedProjectBoardCustomFieldIds",function(){return i.getSortedProjectBoardCustomFieldIds}),r.o(i,"projectBoardCustomFieldsTableHeadSelector")&&r.d(t,"projectBoardCustomFieldsTableHeadSelector",function(){return i.projectBoardCustomFieldsTableHeadSelector}),r.o(i,"projectTagsWithForgedProjectTagAllSelector")&&r.d(t,"projectTagsWithForgedProjectTagAllSelector",function(){return i.projectTagsWithForgedProjectTagAllSelector}),r.o(i,"projectsSelector")&&r.d(t,"projectsSelector",function(){return i.projectsSelector}),r.o(i,"remainedProjectCustomFieldsSelector")&&r.d(t,"remainedProjectCustomFieldsSelector",function(){return i.remainedProjectCustomFieldsSelector}),r.o(i,"selectedProjectTagSelector")&&r.d(t,"selectedProjectTagSelector",function(){return i.selectedProjectTagSelector}),r.o(i,"sortedProjectTagsSelector")&&r.d(t,"sortedProjectTagsSelector",function(){return i.sortedProjectTagsSelector});var a=r("St2ODdzM");r.d(t,"projectBoardCustomFieldsTableHeadSelector",function(){return a.a}),r.d(t,"projectTagsWithForgedProjectTagAllSelector",function(){return a.b}),r.d(t,"projectsSelector",function(){return a.c}),r.d(t,"remainedProjectCustomFieldsSelector",function(){return a.d}),r.d(t,"selectedProjectTagSelector",function(){return a.e}),r.d(t,"sortedProjectTagsSelector",function(){return a.f});var s=r("snjoL1ZZ");r.d(t,"getSortedProjectBoardCustomFieldIds",function(){return s.a})},bvmrLhnu:function(e,t,r){"use strict";r.r(t),r.d(t,"isTaskflow",function(){return l}),r.d(t,"isScrum",function(){return p}),r.d(t,"isNormal",function(){return f}),r.d(t,"isNewTaskflow",function(){return g}),r.d(t,"isAppEnabled",function(){return h}),r.d(t,"hideTasklist",function(){return m}),r.d(t,"hideCustomView",function(){return y}),r.d(t,"getProjectGtaType",function(){return v}),r.d(t,"getGtaCategory",function(){return b}),r.d(t,"composeBoardViewAppId",function(){return _}),r.d(t,"parseBoardViewAppId",function(){return S}),r.d(t,"isStoryEnabled",function(){return T}),r.d(t,"isBugEnabled",function(){return E}),r.d(t,"isSprintEnabled",function(){return O}),r.d(t,"isTaskflowEnabled",function(){return w}),r.d(t,"isTasklistIgnored",function(){return C}),r.d(t,"hasScrumAppEnabled",function(){return k}),r.d(t,"enableSmartGroupSortMethod",function(){return j}),r.d(t,"findEnabledScrumAppNames",function(){return A}),r.d(t,"canUseTaskFeature",function(){return P});var n=r("HZIIco56"),o=r.n(n),i=r("wd/RKGTj"),a=r.n(i),s=r("a+N5u/Cl"),u=r.n(s),c=r("sa1Ed382");function l(e){return!p(e)&&"taskflow"===e.normalType}function p(e){return"scrum"===e.proTemplateType}function f(e){return!p(e)&&!l(e)}var d=o()(function(){var e="2019-05-30";switch(c.env){case"ga":case"us-ga":e="2019-06-20";break;case"br":case"release":case"us":e="2019-07-04"}return a()(e)});function g(e){return l(e)&&d().isBefore(e.created)}var h=function(e,t){return!!u.a.find(e.applications||[],{name:t})};function m(e,t){return!!C(e)||!h(e,"tasklist")&&w(e)&&1===t}function y(e,t){return e.isTemplate||"sprint"===t.type}function v(e){return k(e)?"scrum":l(e)?"workflow":"media"}function b(e){return l(e)?"workflow":e.proTemplateType||e.category}var _=function(e,t){return e+":"+t},S=function(e){return e.split(":")};function T(e){return h(e,"story")}function E(e){return h(e,"bug")}function O(e){return h(e,"sprint")}function w(e){return p(e)||l(e)}function C(e){return p(e)}var I=["story","bug","sprint"];function k(e){return Boolean(e.applications&&e.applications.some(function(e){return I.includes(e.name)}))}function j(e){return k(e)}function A(e){return(e.applications||[]).filter(function(e){return I.includes(e.name)}).map(function(e){return e.name})}function P(e){return h(e,"tasks")||k(e)}},"c+4N9jKQ":function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"a",function(){return a});var n=r("tLZJUYWX"),o="all",i=[o,"joined","starred","unsorted"],a=function(e){return{_id:o,_organizationId:e,created:(new Date).toISOString(),isDeleted:!1,name:n.get("all.projects"),pos:0,projectIds:[],updated:(new Date).toISOString(),ancestorIds:[],childProjectIds:[],color:"blue"}}},c0yVuYMM:function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r("q1tIBJhx"),o=r.n(n),i=r("TSYQbtd+"),a=r.n(i),s=r("GESwhXbR"),u=r("yWbDNQIY"),c=r("Wk6U1j2J"),l=r.n(c),p=Object(u.a)(function(e){var t,r=a()(l.a.label,((t={})[l.a.empty]=e.isEmpty,t[l.a.disabled]=e.disabled,t));return o.a.createElement("div",{className:l.a.root,onClick:e.onClick},o.a.createElement(s.Tooltip,{title:e.label||"",hidden:e.isEmpty},o.a.createElement("div",{className:r},e.label)))})},c8AfT5ki:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("L342T8FT"),o=n.push,i=n.replace,a=n.goBack,s=function(){return"search"},u={push:o,replace:i,goBack:a,base:s,organization:function(e){return e&&e.params._organizationId?"/organization/"+e.params._organizationId+"/search":"/organization/:_organizationId/search"}}},cDm32Cmn:function(e,t,r){var n,o,i,a,s,u,c,l,p,f,d,g,h={}.hasOwnProperty;l=r("a+N5u/Cl"),g=r("sa1Ed382"),o=r("qHH6+g6Q"),i=r("wd/RKGTj"),a=r("gLTu//Kz"),n=r("bZr3G77e"),d=r("a2Z1fDJ7").sanitize,s=r("wu4EEviu"),f=r("QyjeWo4p"),u=r("CxY0Mkc1"),c=r("80gYlwjC").UserPayment,p=r("MmYzUhjM").getPayType,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o),t.prototype.name="member",t.prototype.urlRoot="members",t.prototype.defaults={objectType:"member",name:"",title:"",avatar:"",isOnline:!0,isQuited:!1,birthday:null},t.prototype.initialize=function(e,r){var n;return(n=this.get("plan"))&&new c(n),Object.defineProperty(this,"payment",{get:function(){var e;return(e=new c(this.get("plan"))).payType=p(e),e}}),r||(r={}),r.bindByMatrix=!1,this.listen(),t.__super__.initialize.apply(this,arguments)},t.prototype.listen=function(){var e;if(!this.listened)return s.on(":change:member/"+this.get("_memberId"),(e=this,function(t){return e.set(e.parse(t))})),t.__super__.listen.apply(this,arguments)},t.prototype.url=function(){return"members/"+this.get("_memberId")},t.prototype.parse=function(e){var t;return(e=l.extend(this.toJSON(),e))._userId?e._id=e._userId:e._userId=e._id,e.isNew=i().diff(e.joined,"days")<30,(null!=e?e.website:void 0)?("string"==typeof(t=e.website)&&""!==t.replace(/\s/g,"")?(t=d(t),/^[http:|https:|ftp:]/.test(t)||(t="http://"+t)):t=null,e.website=t,e.avatarUrl=d(e.avatarUrl),e):e},t.prototype.getBirthdayString=function(){var e,t;if(t=this.get("birthday"))return(e=new Date(t)).getFullYear()+".\n"+(e.getMonth()+1)+".\n"+e.getDate()},t.prototype.getRole=function(){var e;if(e=a.get(this.get("_roleId")).get("name"),l.isEmpty(e)&&void 0!==this.get("role"))switch(this.get("role")){case 2:return tb_i18n.get("owner");case 1:return tb_i18n.get("manager");case 0:return tb_i18n.get("member");default:return tb_i18n.get("guest")}switch(e){case"owner":return tb_i18n.get("owner");case"admin":return tb_i18n.get("manager");case"member":return tb_i18n.get("member");case"guest":return tb_i18n.get("guest");default:return e||"guest"}},t.prototype.getTasksCount=function(e){var t,r,n,o;return n=e.memberId,r=e.projectId,t=e.organizationId,o=u.format({search:f.stringify({_projectId:r,_organizationId:t}),pathname:"users/"+n+"/taskscount"}),this.sync("read",this,{url:o,success:e.success})},t.prototype.fetchMemberTasks=function(e){return e.url=this.url()+"/undonetasks",e.attrs=l.extend({withInvolves:!0},e.attrs),this.sync("read",this,e),this},t.prototype.fetchMemberDoneTasks=function(e){return e.attrs=l.extend({page:1,count:30,withInvolves:!0},e.attrs),e.url=this.url()+"/donetasks",this.sync("read",this,e),this},t.prototype.fetchMemberEvents=function(e){return e.url=this.url()+"/events",e.headers||(e.headers={}),Object.assign(e.headers,{"x-timezone":n.timezone()}),this.sync("read",this,e),this},t.prototype.canSetSelfOwner=function(e,t,r){var n;return null!=e&&null!=t&&((n=g.user.id===this.id)&&2===e&&!(2===t)||n&&r&&(t>=0&&t<2))},t.prototype.getMemberId=function(){return this.get("_memberId")||this.get("_id")},t.prototype.getUserId=function(){return this.get("_userId")||this.get("_id")},t.prototype.getModelId=function(){return this.getMemberId()},t}()},cQgplHA6:function(e,t,r){"use strict";r.d(t,"a",function(){return v}),r.d(t,"c",function(){return _}),r.d(t,"b",function(){return S});var n,o=r("mrSGxOB2"),i=r("6SzIBtPz"),a=r("NOGqly5s"),s=r("4c1CS0b3"),u=r("tLZJUYWX"),c=r.n(u),l=r("s0r7VfKc"),p=r("oRqJmROU"),f=r("gh8QIhMV"),d=r("GESwhXbR"),g=r("+8el6hca"),h=function(e){return"TASKFLOW/"+e},m=function(e){return e+"/SUCCESS"},y=function(e){return e+"/FAILURE"},v={mounted:Object(i.a)(h("MOUNTED")),fetchTaskflowsSuccess:Object(i.a)(h(m("FETCH_TASKFLOWS"))),fetchTaskflowsFailure:Object(i.a)(h(y("FETCH_TASKFLOWS"))),createTaskflow:Object(i.a)(h("CREATE_TASKFLOW")),updateTaskflow:Object(i.a)(h("UPDATE_TASKFLOW")),updateTaskScenarioTaskflow:Object(i.a)(h("UPDATE_TASK_SCENARIO_TASKFLOW")),deleteTaskflow:Object(i.a)(h("DELETE_TASKFLOW")),updateSuccess:Object(i.a)(h(m("UPDATE"))),updateFailure:Object(i.a)(h(y("UPDATE"))),unmount:Object(i.a)(h("UNMOUNT"))},b={isLoaded:!1,taskflows:[],scenarioFieldConfigs:[]},_=Object(i.b)(((n={})[""+v.fetchTaskflowsSuccess]=function(e,t){var r=t.payload,n=r.taskflows,i=r.scenarioFieldConfigs;return o.a({},e,{isLoaded:!0,taskflows:n,scenarioFieldConfigs:i})},n[""+v.fetchTaskflowsFailure]=function(){return b},n[""+v.unmount]=function(){return b},n),b),S=Object(a.a)(function(e){return e.ofType(""+v.mounted).filter(p.a).switchMap(function(t){var r=t.payload.projectId;return s.Observable.combineLatest(l.default.getTaskflows(r).changes(),l.default.getScenarioFieldConfigs(r,"task")).map(function(e){var t=o.f(e,2),r=t[0],n=t[1];return v.fetchTaskflowsSuccess({taskflows:r,scenarioFieldConfigs:n})}).takeUntil(e.ofType(""+v.unmount)).catch(function(e){return Object(f.throwError)(e),s.Observable.of(v.fetchTaskflowsFailure())})})},function(e){return e.ofType(""+v.createTaskflow).filter(p.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.name;return l.default.createTaskflow(n,{name:o}).map(function(){return v.updateSuccess()}).takeUntil(e.ofType(""+v.unmount)).catch(function(e){return Object(f.throwError)(e),s.Observable.of(v.updateFailure())})})},function(e){return e.ofType(""+v.updateTaskflow).filter(p.a).switchMap(function(t){var r=t.payload,n=r.taskflowId,o=r.name;return l.default.updateTaskflow(n,{name:o}).map(function(){return Object(g.d)("edited"),v.updateSuccess()}).takeUntil(e.ofType(""+v.unmount)).catch(function(e){return Object(f.throwError)(e),s.Observable.of(v.updateFailure())})})},function(e){return e.ofType(""+v.updateTaskScenarioTaskflow).filter(p.a).switchMap(function(t){var r=t.payload,n=r.taskflowId,o=r.scenarioFieldConfigId;return l.default.updateTaskScenarioTaskflow(o,n).map(function(){return Object(g.b)("changed","drag"),v.updateSuccess()}).takeUntil(e.ofType(""+v.unmount)).catch(function(e){return Object(f.throwError)(e),s.Observable.of(v.updateFailure())})})},function(e){return e.ofType(""+v.deleteTaskflow).filter(p.a).switchMap(function(t){var r=t.payload.taskflowId;return l.default.deleteTaskflow(r).map(function(){return d.Toast.success(c.a.get("project.settings.taskflow.delete.success")),Object(g.c)("deleted"),v.updateSuccess()}).takeUntil(e.ofType(""+v.unmount)).catch(function(e){return d.Toast.error(c.a.get("project.settings.taskflow.delete.failed")),Object(f.throwError)(e),s.Observable.of(v.updateFailure())})})})},cUZYBCvT:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("IssmDVnT");o.SDKFetch.prototype.getProjectsPagination=function(e){var t=e.pageSize,r=n.g(e,["pageSize"]);return o.Page.defaultState("v2/projects",{pageSize:t,urlQuery:r})};var i=r("BG7MerIK");r.d(t,"a",function(){return i.a})},cVY30NxL:function(e,t,r){"use strict";r.r(t),r.d(t,"getSprintWeeks",function(){return f}),r.d(t,"checkDateValidation",function(){return d}),r.d(t,"sprintLeftDaysText",function(){return g}),r.d(t,"getTaskAmount",function(){return h}),r.d(t,"observeIsSprintEmpty",function(){return m}),r.d(t,"sumTaskCount",function(){return y}),r.d(t,"mergeTaskCount",function(){return v});var n=r("wd/RKGTj"),o=r.n(n),i=r("a+N5u/Cl"),a=r("LvDlAkAJ"),s=r("4c1CS0b3"),u=r("tLZJUYWX"),c=r.n(u),l=r("IssmDVnT"),p=r("s0r7VfKc"),f=function(e,t){if(e&&t){var r=o()(e).subtract(1,"day"),n=o()(t).diff(r,"week",!0);return Object(a.includes)([1,2,3,4],n)?n:0}return 0},d=function(e,t,r){return e&&t?o()(e).isSameOrBefore(o()(t)):!r},g=function(e,t){var r=o()(t).startOf("day"),n=o()(e).diff(r,"days");return n>=0?c.a.get("sprint.left.days",n):c.a.get("sprint.overdue.days",Math.abs(n))},h=function(e){var t=0;return Object(i.each)(e,function(e){return t+=e}),t},m=function(e,t){return s.Observable.concat(p.default.fetch.getSprintsTaskCount(t,["active","future"]).map(function(t){var r=t.find(function(t){return t._id===e});if(r)return h(r.unDone)+h(r.done)===0}),p.default.lift({cacheValidate:l.CacheStrategy.Request,request:s.Observable.of([]),tableName:"Task",query:{where:{_sprintId:e}},fields:["_id"]}).changes().skip(1).map(function(e){return 0===e.length})).distinctUntilChanged()},y=function(e){return Object(a.reduce)(e,function(e,t){return e+t},0)},v=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?{}:Object(a.mapValues)(e[0],function(t,r){return Object(a.sumBy)(e,function(e){return e[r]})})}},cW1Ogi02:function(e,t,r){e.exports=r.p+"images/processon-1.412e43c0.png"},"cY+V28dO":function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("IssmDVnT");o.SDKFetch.prototype.getProjectTags=function(e){return this.get("v2/organizations/"+e._organizationId+"/projecttags",e)},o.SDKFetch.prototype.getProjectTag=function(e){return this.get("v2/projecttags/"+e)},o.SDKFetch.prototype.getProjectExternalMembers=function(e,t,r){return void 0===r&&(r=50),this.get("projects/"+e+"/external-members",{pageSize:r,urlQuery:t?{subjectTypes:t}:void 0})},o.SDKFetch.prototype.getProjectTagMembersPagination=function(e){var t=e.projectTagId,r=e.pageSize,i=n.g(e,["projectTagId","pageSize"]);return o.Page.defaultState("projecttags/"+t+"/members",{pageSize:r,urlQuery:i})},o.SDKFetch.prototype.getWholeRoute=function(e){return this.get("projecttags/"+e+"/whole-route")},o.SDKFetch.prototype.searchProjectTagInnerMembers=function(e){var t=e.projectTagId,r=n.g(e,["projectTagId"]);return this.get("projecttags/"+t+"/search-inner-members",r)},o.SDK.prototype.getProjectTags=function(e){return this.lift({cacheValidate:o.CacheStrategy.Request,tableName:"ProjectTag",request:this.fetch.getProjectTags({_organizationId:e,withProjectCount:!1}).map(function(e){return e.result}),query:{where:{_organizationId:e}}})},o.SDK.prototype.getProjectExternalMembersPagination=function(e,t,r){return void 0===r&&(r=50),o.Page.defaultState("projects/"+e+"/external-members",{pageSize:r,urlQuery:{subjectTypes:t}})},o.SDKFetch.prototype.updateProjectTag=function(e){return this.put("v2/projecttags/"+e._id,e)},o.SDKFetch.prototype.moveProjectTag=function(e){return this.put("v2/projecttags/"+e.id+"/move",e)},o.SDKFetch.prototype.putProjectTagMemberPermissions=function(e){var t=e.projectTagId,r=e.projectTagMemberId,o=n.g(e,["projectTagId","projectTagMemberId"]);return this.put("projecttags/"+t+"/members/"+r,o)},o.SDKFetch.prototype.createProjectTag=function(e){return this.post("v2/organizations/"+e._organizationId+"/projecttags",e)},o.SDKFetch.prototype.addProjectTagMember=function(e){var t=e._id,r=n.g(e,["_id"]);return this.post("projecttags/"+t+"/members",r)},o.SDKFetch.prototype.delProjectTag=function(e){return this.delete("v2/projecttags/"+e._id)},o.SDKFetch.prototype.delProjectTagMember=function(e){var t=e.projectTagId,r=e.projectTagMemberId,o=n.g(e,["projectTagId","projectTagMemberId"]);return this.delete("projecttags/"+t+"/members/"+r,o)};var i=r("SBLePl9R");r.d(t,"b",function(){return i.b}),r.d(t,"a",function(){return i.a}),r.d(t,"c",function(){return i.c})},cYPCnssF:function(e,t,r){"use strict";r.r(t),r.d(t,"UploadError",function(){return i});var n=r("tLZJUYWX"),o=r("3eMzznN/").formatFileSize,i=function(){function e(e,t){this.state=e,this.data=t}return e.prototype.message=function(){var t=this.data.file&&this.data.file.name||"";switch(this.state){case e.Normal:return n.get("uploader.error",t);case e.Directory:return n.get("uploader.directory.error",this.data.file.path.split("/")[0]);case e.NumLimit:var r=this.data.options.fileNumLimit,i=this.data.filesLength;return n.get("uploader.files.exceed.number",""+r,""+i);case e.SizeLimit:var a=this.data.options.fileSizeLimit;return n.get("uploader.file.exceed.size",t,""+o(a,0));case e.Empty:return n.get("uploader.size.no.allowed",t);case e.Type:return n.get("uploader.type.no.allowed",t);case e.Name:return n.get("uploader.name.no.allowed",t);default:return""}},e.Normal="Normal",e.NumLimit="FileNumLimit",e.SizeLimit="FileSizeLimit",e.Type="FileType",e.Empty="FileEmpty",e.Directory="Directory",e.Name="Name",e}()},cZTZA4fV:function(e,t,r){"use strict";r.r(t),r.d(t,"BackboneMap",function(){return d}),r.d(t,"myFilesChangeSection",function(){return h}),r.d(t,"myFilesUpdateSort",function(){return m}),r.d(t,"myFilesClose",function(){return y}),r.d(t,"getMyFilesRequest",function(){return v}),r.d(t,"getMyFilesSuccess",function(){return b}),r.d(t,"getMyFilesError",function(){return _}),r.d(t,"getMyFilesLoadMore",function(){return S}),r.d(t,"myFilesSelectOne",function(){return T}),r.d(t,"myFilesClearSelections",function(){return E}),r.d(t,"reducer",function(){return w}),r.d(t,"epic",function(){return C}),r.d(t,"getFiles",function(){return I}),r.d(t,"getSelections",function(){return k}),r.d(t,"getSelectItems",function(){return j});var n,o=r("mrSGxOB2"),i=r("a+N5u/Cl"),a=r("NOGqly5s"),s=r("4c1CS0b3"),u=r("6SzIBtPz"),c=r("s0r7VfKc"),l=r("LzIVR7qZ"),p=r("sa1Ed382"),f=r("8N+zwa3A"),d={},g=Object(l.a)("MY_FILES",function(e){return e._id},function(e){return e.files}),h=Object(u.a)("MY_FILES_CHANGE_SECTION"),m=Object(u.a)("MY_FILES_UPDATE_SORT"),y=Object(u.a)("MY_FILES_CLOSE"),v=Object(u.a)("GET_MY_FILES_REQUEST"),b=Object(u.a)("GET_MY_FILES_SUCCESS"),_=Object(u.a)("GET_MY_FILES_ERROR"),S=Object(u.a)("GET_MY_FILES_LOAD_MORE"),T=g.action.toggleSelection,E=g.action.clearSelections,O=o.a({},g.defaultState,{section:"create",files:[],isLoading:!1,page:1,hasMore:!1,isLoadingMore:!1}),w=Object(u.b)(o.a({},g.reducer,((n={})[""+h]=function(e,t){return o.a({},O,{section:t.payload,isLoading:!0})},n[""+m]=function(e){return o.a({},e,{isLoading:!0,files:[],page:1})},n[""+S]=function(e){return o.a({},e,{isLoadingMore:!0})},n[""+b]=function(e,t){return o.a({},e,{isLoading:!1,isLoadingMore:!1},t.payload)},n[""+_]=function(e){return o.a({},e,{isLoading:!1,files:[]})},n[""+y]=function(){return O},n)),O),C=Object(a.a)(function(e,t){return e.ofType(""+h,""+m,""+v,""+S).scan(function(e){var r=t.getState(),n=r.ui.myFiles,o=n.page,i=n.section,a={order:r.preference.myFileOrder,page:o,limit:40},s="create"===i?c.default.getMyCreateFiles(p.user.id,a):c.default.getMyInvolveFiles(p.user.id,a);return i===e.section&&o===e.page&&(s=e.token.concat(s)),{token:s,section:i,page:o+1}},{token:null,section:null,page:null}).switchMap(function(t){var r=t.token,n=t.page;return r.changes().takeUntil(e.ofType(""+y)).map(function(e){return{files:e,page:n,hasMore:e.length>=40*(n-1)}}).catch(function(e){return o.b(void 0,void 0,void 0,function(){var t;return o.e(this,function(r){switch(r.label){case 0:return e instanceof s.Observable?[4,e.toPromise()]:[3,2];case 1:return t=r.sent(),[3,3];case 2:t=e,r.label=3;case 3:return[2,s.Observable.of(_(t))]}})})})}).do(function(e){e.files.forEach(function(e){e._id in d||(d[e._id]=new f(e,{bindByMatrix:!1}))})}).map(b)}),I=Object(i.compose)(function(e){return e.forEach(function(e){var t=d[e._id];t&&(e.canArchive=t.hasPermission("put.archive"),e.canDelete=t.hasPermission("del"),e.canDownload=t.hasPermission("work.get.download"),e.canModify=t.hasPermission("put"),e.canMove=t.hasPermission("put.move"),e.canUpdate=t.hasPermission("put.version"))}),e},g.reselect.assignSelections),k=g.reselect.getSelections,j=g.reselect.getSelectItems},ceN0Itwj:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("wMS7wN+j"),o=r.n(n),i=function(e){return o.a.sanitize(e,{ALLOWED_TAGS:["hl"]})}},cl35kkSI:function(e,t,r){"use strict";r.r(t),r.d(t,"getChannelListFulfilled",function(){return g}),r.d(t,"getChannelListRequest",function(){return h}),r.d(t,"deleteChannelRequest",function(){return m}),r.d(t,"addPseudoChannel",function(){return y}),r.d(t,"preheadChannelByCreatorId",function(){return v}),r.d(t,"preheadChannelByObjectId",function(){return b}),r.d(t,"preheadPrivateChannelByCreatorInfo",function(){return _}),r.d(t,"activeChannel",function(){return S}),r.d(t,"activeChannelByCreatorId",function(){return T}),r.d(t,"clearActivedChannel",function(){return E}),r.d(t,"markChannelRead",function(){return O}),r.d(t,"markAllChannelsRead",function(){return w}),r.d(t,"clearAllReadedChannels",function(){return C}),r.d(t,"enterChannelRoom",function(){return I}),r.d(t,"closeChannelList",function(){return k}),r.d(t,"deleteChannelRejected",function(){return j}),r.d(t,"markChannelRejected",function(){return A}),r.d(t,"markAllChannelsReadRejected",function(){return P}),r.d(t,"clearAllReadedChannelsRejected",function(){return R}),r.d(t,"getChannelListRejected",function(){return N}),r.d(t,"reducer",function(){return L}),r.d(t,"epic",function(){return B}),r.d(t,"enterSelectedRoom",function(){return U}),r.d(t,"closeView",function(){return G}),r.d(t,"preheadChannelForPM",function(){return q}),r.d(t,"preheadChannelForNotification",function(){return z}),r.d(t,"deleteActivedChannel",function(){return V}),r.d(t,"preheadChannelForCreator",function(){return K}),r.d(t,"preheadPrivateChannel",function(){return H});var n,o=r("mrSGxOB2"),i=r("6SzIBtPz"),a=r("4c1CS0b3"),s=r("NOGqly5s"),u=r("a+N5u/Cl"),c=r.n(u),l=r("s0r7VfKc"),p=r("uYqc/Zh+"),f=r("fio7jWQ0"),d=r("gh8QIhMV"),g=Object(i.a)("GET_CHANNEL_LIST_FULFILLED"),h=Object(i.a)("GET_CHANNEL_LIST_REQUEST"),m=Object(i.a)("DELETE_CHANNEL_REQUEST"),y=Object(i.a)("ADD_PSEUDO_CHANNEL"),v=Object(i.a)("PREHEAD_CHANNEL_BY_CREATORID"),b=Object(i.a)("PREHEAD_CHANNEL_BY_OBJECTID"),_=Object(i.a)("PREHEAD_PRIVATE_CHANNEL_BY_CREATOR_INFO"),S=Object(i.a)("ACTIVE_CHANNEL"),T=Object(i.a)("ACTIVE_CHANNEL_BY_CREATORID"),E=Object(i.a)("CLEAR_ACTIVED_CHANNEL"),O=Object(i.a)("MARK_CHANNEL_READ"),w=Object(i.a)("MARK_ALL_CHANNEL_READ"),C=Object(i.a)("CLEAR_ALL_READED_CHANNELS"),I=Object(i.a)("ENTER_SELECTED_CHANNEL_ROOM"),k=Object(i.a)("CLOSE_MESSAGES"),j=Object(i.a)("DELETE_CHANNEL_REJECTED"),A=Object(i.a)("MARK_CHANNEL_READ_REJECTED"),P=Object(i.a)("MARK_ALL_CHANNEL_READ_REJECTED"),R=Object(i.a)("CLEAR_ALL_READED_CHANNELS_REJECTED"),N=Object(i.a)("GET_CHANNEL_LIST_REJECTED"),x={channels:[],activedChannel:null,page:1,pageSize:20,hasMore:!0,isLoading:!1,initialMeta:null},D=function(e,t){return c.a.find(t,function(t){return Object(p.b)(t)===e})},M=function(e,t){return c.a.find(t,function(t){return t._objectId===e})},F=function(e,t,r){var n=t.payload,i=e.channels.slice(0);if(0===i.length)return e;var a=c.a.find(i,function(e){return r(e)===n});return a?o.a({},e,{messages:o.h([a],i.filter(function(e){return r(e)!==n}))}):e},L=Object(i.b)(((n={})[h.toString()]=function(e){return o.a({},e,{isLoading:!0})},n[g.toString()]=function(e,t){if(0===e.channels.length&&e.initialMeta){var r=o.f(e.initialMeta,2),n=r[0],i=r[1],a=("creatorId"===n?D:M)(i,t.payload.channels);return o.a({},e,{activedChannel:a,isLoading:!1,initialMeta:null},t.payload)}var s=p.a.process(e.activedChannel,e.channels,t.payload.channels);return o.a({},e,{activedChannel:s.activedChannel,isLoading:!1},t.payload,{channels:s.channels})},n[N.toString()]=function(e){return o.a({},e,{isLoading:!1,channels:[]})},n[m.toString()]=function(e,t){return o.a({},e,{channels:e.channels.filter(function(e){return e._id!==t.payload._id})})},n[y.toString()]=function(e,t){return o.a({},e,{channels:o.h([t.payload],e.channels)})},n[v.toString()]=function(e,t){return 0===e.channels.length?o.a({},e,{initialMeta:["creatorId",t.payload]}):F(e,t,p.b)},n[b.toString()]=function(e,t){return 0===e.channels.length?o.a({},e,{initialMeta:["objectId",t.payload]}):F(e,t,function(e){return e._objectId})},n[S.toString()]=function(e,t){var r=t.payload,n=c.a.find(e.channels,function(e){return e._id===r});return n?o.a({},e,{activedChannel:n}):e},n[T.toString()]=function(e,t){var r=t.payload,n=c.a.find(e.channels,function(e){return Object(p.b)(e)===r});return n?o.a({},e,{activedChannel:n}):e},n[E.toString()]=function(e){var t=e.activedChannel;return t?o.a({},e,{channels:e.channels.filter(function(e){return e._id!==t._id}),activedChannel:null}):e},n[w.toString()]=function(e){return o.a({},e,{channels:e.channels.map(function(e){return o.a({},e,{unreadActivitiesCount:0,isRead:!0})})})},n[C.toString()]=function(e){return o.a({},e,{channels:e.channels.filter(function(e){return!e.isRead})})},n[_.toString()]=function(e,t){var r=t.payload,n=r._id,i=r.name,a=r.avatarUrl,s=e.channels.slice(0),u=c.a.find(s,function(e){return Object(p.b)(e)===n}),l=u?o.a({},u,{updated:(new Date).toISOString()}):p.a.create(n,i,a,t.payload.channelType);return o.a({},e,{channels:o.h([l],s.filter(function(e){return Object(p.b)(e)!==n}))})},n[k.toString()]=function(){return x},n),x),B=Object(s.a)(function(e,t){return e.ofType(I.toString()).map(function(e){return e.payload}).do(function(e){if(t.getState().ui.chat.channels.find(function(t){return Object(p.b)(t)===e._id}))f.store.dispatch(v(e._id));else{var r=p.a.create(e._id,e.name,e.avatarUrl,e.channelType);f.store.dispatch(y(r))}}).map(f.noOpAction)},function(e,t){var r=e.ofType(h.toString());return r.scan(function(e){var r=t.getState().ui.chat,n=r.page,o=r.pageSize,i=l.default.getMessages({page:n,count:o}),a=i.queryToken,s=i.requestHasMore$,u=a;return e.token&&e.page===n&&(u=e.token.concat(u)),{page:n+1,token:u,requestHasMore$:s}},{}).switchMap(function(r){var n=r.page,i=r.token,s=r.requestHasMore$,u=i.changes().debounceTime(0).do(function(e){var t=e.findIndex(function(e){return!e.creator});t>=0&&Object(d.throwError)("message: no."+t+" channel("+e[t]._id+") has no creator.")});return a.Observable.combineLatest(u,s).map(function(e){var r=o.f(e,2),i=r[0],a=r[1];return function(e,r,n){var o=t.getState().ui.chat.pageSize,i=r.length>=o*(e-1);return{page:e,channels:r,hasMore:n||i}}(n,i,a)}).map(g).takeUntil(e.ofType(k.toString())).catch(function(e){return Object(d.throwError)(e),a.Observable.of(N(e))})})},function(e,t){return e.ofType(m.toString()).map(function(e){return e.payload}).switchMap(function(e){var r=e._id;return e.isPseudo?a.Observable.of(Object(f.noOpAction)()):l.default.deleteMessage(r).map(function(){var e=t.getState().ui.chat.activedChannel;return!r||e&&r===e._id?E():Object(f.noOpAction)()}).catch(function(e){return Object(d.throwError)(e),a.Observable.of(j(e))})})},function(e,t){return e.ofType(v.toString(),b.toString(),y.toString()).map(function(e){return e.payload._id?e.payload.creator._id:e.payload}).concatMap(function(e){var r=t.getState().ui.chat.channels,n=D(e,r)||M(e,r);return n?l.default.updateMessage(n._id,{boundToObjectUpdated:(new Date).toISOString()}).mapTo(Object(p.b)(n)):a.Observable.of(e)}).map(T)},function(e){return e.ofType(_.toString()).map(function(e){return e.payload._id}).map(T)},function(e){return e.ofType(O.toString()).switchMap(function(e){var t=e.payload;return l.default.markMessageRead(t).map(f.noOpAction).catch(function(e){return Object(d.throwError)(e),a.Observable.of(A(e))})})},function(e){return e.ofType(w.toString()).switchMap(function(){return l.default.markAllMessageRead().map(f.noOpAction).catch(function(e){return Object(d.throwError)(e),a.Observable.of(P(e))})})},function(e){return e.ofType(C.toString()).switchMap(function(){return l.default.deleteReadedMessages().map(E).catch(function(e){return Object(d.throwError)(e),a.Observable.of(R(e))})})}),U=function(e){f.store.dispatch(I(e))},G=function(){f.store.dispatch(k())},q=function(e){f.store.dispatch(_(e))},z=function(e){f.store.dispatch(b(e))},V=function(){f.store.dispatch(E())},K=function(e){f.store.dispatch(v(e))},H=function(e){f.store.dispatch(_(e))}},ctsD9mWH:function(e,t,r){"use strict";r.r(t);var n=r("mrSGxOB2"),o=r("bpk+w7fn"),i=r.n(o),a=r("fvjXLGkK"),s=r("NOGqly5s"),u=r("nDsjpj50"),c=r("ALrmuhC4"),l=r("sa1Ed382"),p=["ga","development"],f=function(){var e=p.indexOf(l.env)>-1,t=window.__REDUX_DEVTOOLS_EXTENSION__||window.devToolsExtension,r=!(!e||!t),n=function(e){t&&(e?t.connect():t.disconnect())},o=e?{get:function(){return r},set:function(e){n(e),r=e}}:{value:!1,writable:!1,enumerable:!1,configurable:!1};return l.redux=Object.defineProperty({},"debug",o),window.__REDUX_DEVTOOLS_EXTENSION__&&"function"==typeof window.devToolsExtension&&(window.__REDUX_DEVTOOLS_EXTENSION__=Object.create(null)),window.devToolsExtension&&"function"==typeof window.devToolsExtension&&(window.devToolsExtension=Object.create(null)),setTimeout(function(){n(r)},5e3),t?t({name:"Teambition",actionsBlacklist:["NO_OP_ACTION"],predicate:function(e){return!!l.redux.debug}}):function(e){return e}},d=r("cl35kkSI"),g=r("r8ayFxb7"),h=r("cZTZA4fV"),m=r("7JhjQgus"),y=r("f0NJUF9/"),v=r("yx23kki3"),b=r("5lGttqQN"),_=r("x89q56rT"),S=r("9Ip6qvet"),T=r("PHHYd/Ws"),E=r("nMjh9H6T"),O=r("rGq9vsrD"),w=r("EaRYHo/L"),C=r("NSliPjIn"),I=r("6SzIBtPz"),k=r("sa1Ed382"),j=Object(I.a)("TASK_OPEN_DETAIL"),A=Object(I.a)("TASK_OPEN_DETAIL_SUCCESS"),P=Object(s.a)(function(e){return e.ofType(j.toString()).do(function(e){k.APP.openTaskPreviewer(e.payload)}).map(A)}),R=r("J6lI8p1l"),N=r("ESuIIMP0"),x=r("mNUNGEpO"),D=r("btPWu6us"),M=r("VZAukzxm"),F=r("dbBRp+if"),L=r("t6tM/GMl"),B=r("Dz/Pstls"),U=r("cQgplHA6"),G=r("HUhQ835W"),q=r("X7169US4"),z=r("TN1MO+cS"),V=r("G94ZpdML"),K=r("vaFGDeZz"),H=r("/A1HOqjB"),W=r("U3116aoz"),J=r("i/yG9/km"),Q=r("zir0hWNI"),Y=r("eKedrZ+V"),X=r("zDJ6609A"),$=r("NQM26xch"),Z=[r("lDYZCKQt").a,z.d,d.epic,W.epic,H.epic,V.b,X.epic,g.epic,$.b,h.epic,m.b,y.j,R.c,N.b,x.b,G.epic,v.epic,b.epic,D.projectsInformationBoardAppEpic,_.epic,S.c,T.b,E.b,O.c,w.b,q.epic,C.epic,P,M.teamsListSelectEpic,F.epic,L.b,U.b,B.b,J.b,Q.a,Y.b,K.epic],ee=r("slMuA5KH");r.d(t,"history",function(){return ie}),r.d(t,"store",function(){return ue}),r.d(t,"addUIReducer",function(){return le}),r.d(t,"addEpic",function(){return fe});var te,re,ne=r("L342T8FT").routerMiddleware,oe=r("fxowQlhT"),ie=i()(),ae=new u.BehaviorSubject(s.a.apply(void 0,n.h(Z))),se={},ue=(te=Object(s.b)(function(e,t){return ae.mergeMap(function(r){return r(e,t)})}),(re=Object(a.createStore)(Object(ee.a)({}),se,Object(a.compose)(Object(a.applyMiddleware)(Object(c.a)(oe),te,ne(ie)),f()))).asyncReducers={},re),ce=new Set,le=function(e,t){t&&"string"==typeof t&&ce.has(t)||(ue.asyncReducers=n.a({},ue.asyncReducers,e),ue.replaceReducer(Object(ee.a)(ue.asyncReducers)),t&&ce.add(t))},pe=[],fe=function(e){pe.every(function(t){return t!==e})&&(pe.push(e),ae.next(e))}},d1K7YqRS:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"tap-num-5",use:"tap-num-5-usage",viewBox:"0 0 14 32",content:'<symbol viewBox="0 0 14 32" id="tap-num-5"><path d="M12.444 6.456H5.172v6.912c.336-.336.768-.618 1.296-.846a4.405 4.405 0 0 1 1.764-.342c1.248 0 2.262.384 3.042 1.152.78.768 1.17 1.896 1.17 3.384v6.624c0 .864-.15 1.632-.45 2.304a5.391 5.391 0 0 1-1.206 1.728 5.188 5.188 0 0 1-1.746 1.098c-.66.252-1.35.378-2.07.378-.72 0-1.41-.126-2.07-.378a5.188 5.188 0 0 1-1.746-1.098 5.391 5.391 0 0 1-1.206-1.728c-.3-.672-.45-1.44-.45-2.304v-1.08h3.672v.936c0 .624.174 1.11.522 1.458.348.348.798.522 1.35.522s.978-.168 1.278-.504c.3-.336.45-.804.45-1.404v-6.012a1.87 1.87 0 0 0-.486-1.296c-.324-.36-.738-.54-1.242-.54-.312 0-.576.054-.792.162a2.056 2.056 0 0 0-.54.378 1.8 1.8 0 0 0-.342.468l-.198.396h-3.24V3h10.512v3.456z" /></symbol>'});a.a.add(s);t.default=s},dHPtFte7:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("ux+kwdQL"),i=function(e){return JSON.parse(JSON.stringify(e))},a=function(){function e(e,t){void 0===t&&(t={}),this._subNodes=[],this._data={},this.id=e,this._data=t}return e.prototype.getSubNodes=function(){return n.h(this._subNodes)},e.prototype.setSubNodes=function(t){void 0===t&&(t=function(e){return e});var r=t(n.h(this._subNodes)),o=new e(this.id,this.get());return o._subNodes=n.h(r),o},Object.defineProperty(e.prototype,"hasChild",{get:function(){return this.getSubNodes().length>0},enumerable:!0,configurable:!0}),e.prototype.set=function(t,r){var o,a,s=this;return a="string"==typeof t?n.a({},this._data,((o={})[t]=r,o)):"object"==typeof t?n.a({},this._data,t):n.a({},this._data,t(i(this._data))),new e(this.id,a).setSubNodes(function(){return s.getSubNodes()})},e.prototype.get=function(e){var t=i(this._data);return void 0!==e?t[e]:t},e.prototype.insertAt=function(e,t){void 0===t&&(t=this.getSubNodes().length);var r=Array.isArray(e)?e:[e];if(t<0||t>this.getSubNodes().length)throw new Error("Position not correct.");return this.setSubNodes(function(e){return e.splice.apply(e,n.h([t,0],r)),e})},e.prototype.insertBefore=function(e,t){var r=t.id?t.id:t,n=this.getSubNodes().findIndex(function(e){return e.id===r});if(-1===n)throw new Error("BeforeId not found.");return this.insertAt(e,Math.max(n,0))},e.prototype.insertAfter=function(e,t){var r=t.id?t.id:t,n=this.getSubNodes().findIndex(function(e){return e.id===r});if(-1===n)throw new Error("AfterId not found.");return this.insertAt(e,Math.min(n+1,this.getSubNodes().length))},e.prototype.append=function(e){return this.insertAt(e)},e}(),s=r("2KPNj85v");r.d(t,"b",function(){return u}),r.d(t,"d",function(){return c}),r.d(t,"c",function(){return l}),r.d(t,"a",function(){return p});var u=function(e){var t=new a(e,{folded:!1,isSelected:!1,ancestorIds:[]});return new o.a(t)},c=function(e){return new a(e._id,n.a({},e,{folded:!0,isSelected:!1}))},l=function(e,t,r){void 0===r&&(r=[e.root.id]);var n=t.map(function(e){return c(e)});return e.setSubNodesIn(r,function(e){return n.map(function(t){var r=e.find(function(e){return e.id===t.id});return r?t.set("folded",r.get("folded")).setSubNodes(function(){return r.getSubNodes()}):t})})},p=function(e,t){var r=function(e){return 0===e.indexOf(s.g)?e:n.h(e,[s.g]).reverse()}(e);return t?n.h(r,[t]):r}},dLlRnP2h:function(e,t,r){var n,o,i,a,s;n=r("GESwhXbR").Toast,s=r("sa1Ed382"),o=r("2qRnoGmE"),i=RegExp(window.location.host+"/(projects|project/|organizations|organization/|task|search|event)"),a=RegExp(o.ACCOUNT_HOST+"/login"),t.linkHandler=function(e,t,o,u){var c,l,p;if(e||t){if(u&&n.closeAll(),e){if(c=$(e),t=e.href||c.data("url"),c.closest(".post-editor-textarea").length)return;if(p=e.pathname,!t)return}else t=t.replace(/^\//,""),p="/"+t,t=window.location.host+"/"+t;return i.test(t)?"project"===(l=p.split("/").slice(1))[0]?Promise.resolve().then(function(e){return r("nL4olqOP").fetchOne(0,l[1],{success:function(){return"function"==typeof o&&o(),s.router.navigate(p,{trigger:!0})},error:function(){return n.error({message:tb_i18n.get("noRight.view")})}})}.bind(null,r)).catch(r.oe):("function"==typeof o&&o(),s.router.navigate(p,{trigger:!0})):a.test(t)?s.router.gotoLogin():window.open(t)}}},dMp4HTVj:function(e,t,r){"use strict";r.d(t,"c",function(){return f}),r.d(t,"d",function(){return d}),r.d(t,"h",function(){return g}),r.d(t,"f",function(){return h}),r.d(t,"g",function(){return m}),r.d(t,"j",function(){return y}),r.d(t,"i",function(){return v}),r.d(t,"l",function(){return b}),r.d(t,"k",function(){return _}),r.d(t,"a",function(){return S}),r.d(t,"b",function(){return T}),r.d(t,"e",function(){return E});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r.n(o),a=r("sa1Ed382"),s=r("gGLCgK+J"),u=r("CFOPnz30"),c=r("dHPtFte7"),l=r("2KPNj85v"),p=r("ux+kwdQL");function f(e,t,r){var n=t.find(function(e){return e._id===r});if(!n)return null;if(!Object(u.a)(n)){var o=n.projecttag._id,i=e.getNode(o);if(i)return{path:Object(c.a)(i.get("ancestorIds")),id:i.get("_id")}}return null}function d(e){return!e||e<=0?"":e>s.a?s.a+"+":""+e}function g(e){return!(!e.user||e.user._id!==a.user.id)}function h(e,t){return e.indexOf(t)>-1}function m(e,t,r){return r?t.every(function(t){return e.indexOf(t)>-1}):i.a.intersection(e,t).length>0}function y(e,t){return!t||!!i.a.find(l.f,function(t){return t===e})}function v(e,t){if(!e||!t)return!1;var r=e.find(function(e){return e._id===t});return!(!r||!r.projecttag)&&!r.projecttag.strictVisible}function b(e){return 24===e.length}function _(e){for(var t=e.map(c.d),r=function(){for(var e=t[t.length-1],r=e.get("ancestorIds")[0],o=t.length-2;o>=0;o--)if(r===t[o].id){t[o]=t[o].set("folded",!1),t[o]=t[o].setSubNodes(function(){return n.h([e],t[o].getSubNodes())}),t.pop();break}};t.length>1;)r();var o=t[0];return new p.a(o)}function S(e){var t=[],r=function(e){t.push(e),e.subNodes.length&&e.subNodes.forEach(function(e){return r(e)})};return r(e),t[0].id===l.g&&t.shift(),t}var T=function(e){var t=[];return e.filter(function(e){var r=0===e.depthIgnoreRoot;return e.folded&&t.push(e._id),!!r||!!!e.ancestorIds.find(function(e){return t.includes(e)})})};function E(e,t){if(!e.parent)return null;var r=e.parent.subNodes.findIndex(function(t){return t.id===e.id});return e.parent.subNodes[r+t]||null}},dWbDnvg6:function(e,t,r){"use strict";var n,o=r("mrSGxOB2"),i=r("q1tIBJhx"),a=r("TSYQbtd+"),s=r.n(a),u=r("GESwhXbR");!function(e){e[e.Icon=0]="Icon",e[e.Img=1]="Img"}(n||(n={}));var c=r("34uCsfcM"),l=r("gb6sH9ot"),p=function(e){return e=e.src?e:o.a({},e,{src:l}),i.createElement(u.Avatar,o.a({},e))};function f(e){var t=e.color,r=e.name,n=e.circleSize,a=e.circleClassName,l=o.g(e,["color","name","circleSize","circleClassName"]),p={borderColor:t,height:n,width:n},f={color:t},d=r.replace(/^icon-(\S+)/,"$1");return i.createElement("div",{className:s()(c["icon-with-circle"],a),style:p},i.createElement(u.Icon,o.a({},l,{name:d,style:f})))}function d(e){var t=e.avatar,r=e.iconProps,a=void 0===r?{}:r,u=e.imgProps,c=void 0===u?{}:u,l=e.className;switch(t.type){case n.Icon:var d=t.name,g=t.color,h=a.className,m=o.g(a,["className"]);return i.createElement(f,o.a({circleSize:32,name:d,color:g,circleClassName:s()(l,h)},m));case n.Img:var y=t.src,v=c.className,b=o.g(c,["className"]);return i.createElement(p,o.a({size:"medium",shape:"circle",src:y,className:s()(l,v)},b))}}r.d(t,"a",function(){return p}),r.d(t,"c",function(){return f}),r.d(t,"d",function(){return d}),r.d(t,"b",function(){return n})},"dbBRp+if":function(e,t,r){"use strict";r.r(t),r.d(t,"getCurrentSprint",function(){return f}),r.d(t,"actions",function(){return m}),r.d(t,"dispatchUpdateCurrentSprint",function(){return y}),r.d(t,"reducer",function(){return v}),r.d(t,"epic",function(){return b});var n,o=r("mrSGxOB2"),i=r("6SzIBtPz"),a=r("NOGqly5s"),s=r("4c1CS0b3"),u=r("peh1clMB"),c=r("fio7jWQ0"),l=r("s0r7VfKc"),p=r("ICBFVo7D"),f=Object(u.createSelector)(function(e){return e.ui.sprintPanel.currentSprint},function(e){return e.ui.sprintPanel.sprints},function(e,t){return e?t.find(function(t){return t._id===e}):void 0}),d=function(e){return"SPRINT_PANEL/"+e},g=function(e){return e+"/SUCCESS"},h=function(e){return e+"/FAILURE"},m={mounted:Object(i.a)(d("MOUNTED")),switchProject:Object(i.a)(d("SWITCH_PROJECT")),initLeftPanel:Object(i.a)(d("INIT_LEFT_PANEL")),fetchSprints:Object(i.a)(d("FETCH_SPRINTS")),fetchSprintsSuccess:Object(i.a)(d(g("FETCH_SPRINTS"))),fetchSprintsFailure:Object(i.a)(d(h("FETCH_SPRINTS"))),fetchSprintsTaskCount:Object(i.a)(d("FETCH_SPRINTS_TASK_COUNT")),fetchSprintsTaskCountWithTasksSync:Object(i.a)(d("FETCH_SPRINTS_TASK_COUNT_WITH_TASKS_SYNC")),fetchSprintsTaskCountSuccess:Object(i.a)(d(g("FETCH_SPRINTS_TASK_COUNT"))),fetchSprintsTaskCountFailure:Object(i.a)(d(h("FETCH_SPRINTS_TASK_COUNT"))),updateCurrentSprint:Object(i.a)(d("UPDATE_CURRENT_SPRINT")),handleCompletedSprintModalOpened:Object(i.a)(d("HANDLE_COMPLETED_SPRINT_MODAL_OPENED")),onCompletedSprintModalVisibleChange:Object(i.a)(d("ON_COMPLETED_SPRINT_MODAL_VISIBLE_CHANGE")),unmount:Object(i.a)(d("UNMOUNT"))},y=function(e){c.store.dispatch(m.updateCurrentSprint({currentSprint:e}))},v=Object(i.b)(((n={})[""+m.fetchSprintsSuccess]=function(e,t){var r=t.payload;return o.a({},e,{sprints:r.sprints,isFetched:r.isFetched})},n[""+m.switchProject]=function(e,t){var r=t.payload.projectId;return r===e.projectId?e:o.a({},e,{projectId:r,sprintsTaskCount:{},isFetched:!1})},n[""+m.fetchSprintsTaskCountSuccess]=function(e,t){var r=t.payload,n={};r.sprintsTaskCount.forEach(function(e){n[e._id]=e});var i=o.a({},e.sprintsTaskCount,n);return o.a({},e,{sprintsTaskCount:i})},n[""+m.updateCurrentSprint]=function(e,t){var r=t.payload;return o.a({},e,{currentSprint:r.currentSprint})},n[""+m.handleCompletedSprintModalOpened]=function(e,t){var r=t.payload;return o.a({},e,r)},n[""+m.onCompletedSprintModalVisibleChange]=function(e,t){var r=t.payload;return o.a({},e,{sprintCompletedModalOpened:r})},n),{projectId:null,sprints:[],sprintsTaskCount:{},isFetched:!1,currentSprint:null,sprintCompletedModalOpened:!1,doneTasksStatus:null}),b=Object(a.a)(function(e){return e.ofType(""+m.mounted).concatMap(function(e){var t=e.payload,r=t.smartGroupId,n=t.projectId,o=[m.initLeftPanel({smartGroupId:r}),m.switchProject({projectId:n}),m.fetchSprints({projectId:n}),m.fetchSprintsTaskCount({projectId:n}),m.fetchSprintsTaskCountWithTasksSync({projectId:n,smartGroupId:r})];return s.Observable.from(o)})},function(e){return e.ofType(""+m.fetchSprints).filter(function(e){return void 0!==e.payload}).switchMap(function(t){var r=t.payload.projectId;return l.default.getProjectSprints(r).changes().takeUntil(e.ofType(""+m.unmount)).map(function(e){return m.fetchSprintsSuccess({sprints:e,isFetched:!0})}).catch(function(){return s.Observable.of(m.fetchSprintsFailure())})})},function(e){return e.ofType(""+m.fetchSprintsTaskCount).filter(function(e){return void 0!==e.payload}).switchMap(function(t){var r=t.payload.projectId;return l.default.fetch.getSprintsTaskCount(r).takeUntil(e.ofType(""+m.unmount)).map(function(e){return m.fetchSprintsTaskCountSuccess({sprintsTaskCount:e})}).catch(function(){return s.Observable.of(m.fetchSprintsTaskCountFailure())})})},function(e){return e.ofType(""+m.fetchSprintsTaskCountWithTasksSync).filter(function(e){return void 0!==e.payload}).delay(5e3).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.smartGroupId,i=Object(p.b)({projectId:n,smartGroupId:o,statuses:["active","future"]}),a=["future","active"];return s.Observable.combineLatest(i,function(){return""}).startWith("").takeUntil(e.ofType(""+m.unmount)).debounceTime(2e3).switchMap(function(){return l.default.fetch.getSprintsTaskCount(n,a).takeUntil(e.ofType(""+m.unmount)).map(function(e){return m.fetchSprintsTaskCountSuccess({sprintsTaskCount:e})}).catch(function(){return s.Observable.of(m.fetchSprintsTaskCountFailure())})}).catch(function(){return s.Observable.of(m.fetchSprintsTaskCountFailure())})})})},dmM8qtRc:function(e,t,r){e.exports=r.p+"images/jinshuju-poster.34c54e84.png"},e2BLJDjb:function(e,t,r){"use strict";r.d(t,"e",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"d",function(){return a}),r.d(t,"b",function(){return s});var n=function(e){return"task"===e.objectType},o=function(e){return"event"===e.objectType},i=function(e){return!(e._projectId||!e._organizationId)},a=function(e){return!e._projectId},s=function(e){return!e._projectId}},"eKedrZ+V":function(e,t,r){"use strict";r.d(t,"a",function(){return P}),r.d(t,"c",function(){return R}),r.d(t,"b",function(){return x}),r.d(t,"d",function(){return D});var n,o=r("mrSGxOB2"),i=r("ijCdHo2S"),a=r.n(i),s=r("hxiM8Hy+"),u=r.n(s),c=r("s0r7VfKc"),l=r("tLZJUYWX"),p=r.n(l),f=r("GESwhXbR"),d=r("ctsD9mWH"),g=r("6SzIBtPz"),h=r("4c1CS0b3"),m=r("NOGqly5s"),y=r("peh1clMB"),v=r("fio7jWQ0"),b=r("Nxrdcgel"),_=r("oRqJmROU"),S=r("gh8QIhMV"),T=r("yfEWqN/6"),E=r("+jTfkVXR"),O=r("zir0hWNI"),w=r("wVXDg9Ql"),C=[{cannotHide:!0,height:36,headHeight:40,minWidth:200,width:500,key:"title",sortIndex:T.a.High+0,sortable:!0,fixed:!0,unDraggable:!0},{height:36,headHeight:40,width:118,key:"priority",sortIndex:T.a.Low+0,sortable:!0,hidden:!1},{height:36,headHeight:40,minWidth:48,width:118,key:"executor",sortIndex:T.a.Low+1,sortable:!0,hidden:!1},{height:36,headHeight:40,minWidth:40,width:132,key:"caseType",sortIndex:T.a.Low+3,sortable:!0,hidden:!1}],I={_id:T.b.All,ancestorIds:[],pos:0,get name(){return p.a.get("testgroup.tree.all")},kind:"group",resourceCount:0},k=function(e){e.error.json().then(function(t){"Exceeded limit 500: _testcaseIds"===t.error&&(w.SDKInterceptor.ignore(e),f.Toast.error(p.a.get("usercase.set.exceeded.limit.fail")))})},j={cellDescriptors:C,selectedTestcaseRows:null,sortBy:null,toGroupIsExpanded:{},toRowIsExpanded:{},toRowIsLoadingSubRows:{}},A=function(e){return"TESTHUB_TABLE/"+e},P={updateUsercases:Object(g.a)(A("UPDATE_USER_CASES")),updateUsercasesSuccess:Object(g.a)(A("UPDATE_USER_CASES_SUCCESS")),copyUsercases:Object(g.a)(A("COPY_USER_CASES")),deleteUsercases:Object(g.a)(A("DELETE_USER_CASES")),deleteUsercasesSuccess:Object(g.a)(A("DELETE_USER_CASES_SUCCESS")),onResetTable:Object(g.a)(A("ON_RESET_TABLE")),onColumnResort:Object(g.a)(A("ON_COLUMNS_RESORT")),onConfigure:Object(g.a)(A("ON_CONFIGURE")),onSelectTestcases:Object(g.a)(A("ON_SELECT_TEST_CASES")),onDeselectTestcases:Object(g.a)(A("ON_DESELECT_TEST_CASES")),onGroupCollapse:Object(g.a)(A("ON_GROUP_COLLAPSE")),onGroupExpand:Object(g.a)(A("ON_GROUP_EXPAND")),onRowCollapse:Object(g.a)(A("ON_ROW_COLLAPSE")),expandChildrenGroup:Object(g.a)(A("EXPAND_CHILDREN_GROUP")),onRowExpand:Object(g.a)(A("ON_ROW_EXPAND")),onToggleRow:Object(g.a)(A("ON_TOGGLE_ROW")),onSort:Object(g.a)(A("ON_SORT"))},R=Object(g.b)(((n={})[""+P.onResetTable]=function(e){return o.a({},e,{selectedTestcaseRows:[]})},n[""+P.onColumnResort]=function(e,t){var r=t.payload;if(!r)return e;var n=r,i=n.oldIndex,a=n.newIndex,s=Object(b.arrayMove)(e.cellDescriptors,i,a).map(function(e,t){return o.a({},e,{sortIndex:t})});return o.a({},e,{cellDescriptors:s})},n[""+P.onConfigure]=function(e,t){var r=t.payload;if(!r)return e;var n=Object(E.e)(r,function(e,t){return e.set(Object(E.c)(t),t)}),i=e.cellDescriptors.map(function(e){return o.a({},e,n.get(Object(E.c)(e)))});return o.a({},e,{cellDescriptors:i})},n[""+P.onSelectTestcases]=function(e,t){var r=t.payload;if(!r)return e;var n=u()(r,e.selectedTestcaseRows||[],function(e){return e.entity._id});return o.a({},e,{selectedTestcaseRows:n})},n[""+P.onDeselectTestcases]=function(e,t){var r=t.payload;if(!r)return e;var n=r.map(function(e){return e.entity._id}),i=(e.selectedTestcaseRows||[]).filter(function(e){return!a()(n,e.entity._id)});return o.a({},e,{selectedTestcaseRows:i})},n[""+P.onSort]=function(e,t){var r=t.payload;return o.a({},e,{sortBy:r||null})},n[""+P.onRowExpand]=function(e,t){var r=t.payload;if(!r)return e;var n={};return r.forEach(function(e){n[e.entity._id]=!0}),o.a({},e,{toRowIsExpanded:o.a({},e.toRowIsExpanded,n)})},n[""+P.onRowCollapse]=function(e,t){var r=t.payload;if(!r)return e;var n={};return r.forEach(function(e){n[e.entity._id]=!1}),o.a({},e,{toRowIsExpanded:o.a({},e.toRowIsExpanded,n)})},n[""+P.onToggleRow]=function(e,t){var r,n=t.payload;return n?o.a({},e,{toRowIsExpanded:o.a({},e.toRowIsExpanded,(r={},r[n._id]=!e.toRowIsExpanded[n._id],r))}):e},n[""+P.onGroupExpand]=function(e,t){var r,n=t.payload;return n?o.a({},e,{toGroupIsExpanded:o.a({},e.toGroupIsExpanded,(r={},r[n.entity._id]=!0,r))}):e},n[""+P.onGroupCollapse]=function(e,t){var r,n=t.payload;return n?o.a({},e,{toGroupIsExpanded:o.a({},e.toGroupIsExpanded,(r={},r[n.entity._id]=!1,r))}):e},n[""+P.expandChildrenGroup]=function(e,t){var r,n,i=t.payload,a=d.store.getState().ui.testhubPage,s=a.usercases,u=a.testgroups;if(!s||!u)return e;var c=Object(E.b)(u,i,0),l={},p={},f=function(e,t){if(c.entity._id===T.b.All&&0!==e)return"break";var r=Object(E.a)(t,s.map(function(e){return{entity:e}}));p[r.entity._id]=!0;for(var n=[r];n.length;){var o=n.shift();l[o.entity._id]=!0,o.children.forEach(function(e){return n.push(e)})}};try{for(var g=o.i(c.children.entries()),h=g.next();!h.done;h=g.next()){var m=o.f(h.value,2);if("break"===f(m[0],m[1]))break}}catch(y){r={error:y}}finally{try{h&&!h.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}return o.a({},e,{toRowIsExpanded:o.a({},e.toRowIsExpanded,l),toGroupIsExpanded:o.a({},e.toGroupIsExpanded,p)})},n),j),N=function(e,t){return e.getState().ui.testhubTable[t]},x=Object(m.a)(function(e,t){return e.ofType(""+P.copyUsercases).filter(_.a).switchMap(function(e){var r=e.payload,n=t.getState().ui.testhubPage.testhub._id,o=N(t,"selectedTestcaseRows").map(function(e){return e.entity._id});return c.default.fetch.bulkUpdateUsercases(n,"copy",o,r).map(function(){return P.onResetTable()}).do(function(){return f.Toast.success(p.a.get("table.copy.success"))}).catch(function(e){return k(e),Object(S.throwError)(e),h.Observable.of(Object(v.noOpAction)())})})},function(e,t){return e.ofType(""+P.updateUsercases).filter(_.a).switchMap(function(e){var r=e.payload,n=t.getState().ui.testhubPage.testhub._id,o=N(t,"selectedTestcaseRows").map(function(e){return e.entity._id});return c.default.bulkUpdateUsercases(r.type,n,o,r.query).switchMap(function(){return"move"===r.type?(f.Toast.success(p.a.get("table.move.success")),h.Observable.of(P.onResetTable())):"executor"===r.type?(f.Toast.success(p.a.get("usercase.set.executor.success")),h.Observable.of(P.onResetTable())):"priority"===r.type?(f.Toast.success(p.a.get("usercase.set.priority.success")),h.Observable.of(P.onResetTable())):h.Observable.of(Object(v.noOpAction)())}).catch(function(e){return k(e),Object(S.throwError)(e),h.Observable.of(Object(v.noOpAction)())})})},function(e,t){return e.ofType(""+P.deleteUsercases).switchMap(function(){var e=t.getState().ui.testhubPage.testhub._id,r=N(t,"selectedTestcaseRows").map(function(e){return e.entity._id});return c.default.bulkDeleteUsercases(e,r).map(P.onResetTable).do(function(){return f.Toast.success(p.a.get("table.delete.success"))}).catch(function(e){return k(e),Object(S.throwError)(e),h.Observable.of(Object(v.noOpAction)())})})},function(e,t){return e.ofType(""+P.onToggleRow).filter(_.a).filter(function(e){var r=e.payload;return!!N(t,"toRowIsExpanded")[r._id]}).switchMap(function(e){var t=e.payload;return h.Observable.of(Object(O.e)(t._id))})}),D={selectCurrentTree:Object(y.createSelector)(function(e){return Object(O.h)(e)},function(e){return e.ui.testhubPage.testgroups},function(e,t){if(!t)return{entity:I,children:[],hasChildren:!1,level:0};var r=t.find(function(t){return t._id===e.currentTestgroupId})||I;return Object(E.b)(t,r)}),selectRows:Object(y.createSelector)(function(e){return Object(O.h)(e)},function(e){return e.ui.testhubPage.usercases},function(e){return e.ui.testhubTable.sortBy},function(e,t,r){if(!e.organizationId||!t)return null;var n=Array.from(t).filter(function(t){return!e.currentTestgroupId||e.currentTestgroupId===t._commongroupId});return Object(E.f)(n,r).map(function(e){return{entity:e}})}),selectGroups:Object(y.createSelector)(function(e){return Object(O.h)(e)},function(e){return e.ui.testhubPage.usercases},function(e){return e.ui.testhubPage.testgroups},function(e){return e.ui.testhubTable.toGroupIsExpanded},function(e){return e.ui.testhubTable.sortBy},function(e,t,r,n,o){if(!e.organizationId||!t||!r)return null;var i=Object(E.f)(t,o),a=r.find(function(t){return t._id===e.currentTestgroupId})||I,s=Object(E.b)(r,a,0),u=null;return s.entity._id===T.b.All?s.children.map(function(e,t){u=Object(E.a)(e,i.map(function(e){return{entity:e}}));var r=!0!==n[u.entity._id]&&(void 0!==n[u.entity._id]||!!t);return{key:"group__"+u.entity._id,entity:u.entity,data:u.children,title:u.entity.name+"  "+u.entity.resourceCount,new:null,order:0,isCollapsed:r,allCompleted:!1}}):[{key:"group__"+(u=Object(E.a)(s,i.map(function(e){return{entity:e}}))).entity._id,entity:u.entity,data:u.children,title:u.entity.name+"  "+u.entity.resourceCount,new:null,order:0,isCollapsed:!1,allCompleted:!1}]})}},eOtWl4Ym:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"lightning",use:"lightning-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="lightning"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#FF8478" rx="2" /><path fill="#FFFFFF" d="M6.274 10.926h3.708l-.36 4.719a.3.3 0 0 0 .565.162l3.8-7.253a.3.3 0 0 0-.265-.44h-3.74l.348-3.758a.3.3 0 0 0-.556-.182l-3.758 6.299a.3.3 0 0 0 .258.453z" /></g></symbol>'});a.a.add(s);t.default=s},"eXmkf+pY":function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r.n(o),a=r("TSYQbtd+"),s=r.n(a),u=r("GESwhXbR"),c=r("tLZJUYWX"),l=r.n(c),p=r("Lh5+POaI");var f=i.a.memo(function(e){var t,r=n.f(Object(o.useState)(!1),2),a=r[0],c=r[1],f=s()(p["search-wrap"],"flex flex-vcenter",((t={})[p.focused]=a,t)),d=s()("form-control search-input",p["search-input"]),g=i.a.createRef(),h=i.a.createElement("input",{ref:g,className:d,onKeyDown:e.onKeyDown,placeholder:e.placeholder||l.a.get("search"),value:e.value,onChange:e.onChange,autoFocus:!0,onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}),m=e.value?i.a.createElement(u.Icon,{className:s()(p["clear-input"],"flex-static"),name:"circle-remove",onClick:function(){e.clearInput(),g.current&&g.current.focus()}}):null;return i.a.createElement("div",{className:"search-input-wrap"},i.a.createElement("div",{className:f},h,m))})},"ebZ+QxSc":function(e,t,r){e.exports={item:"item__3JJx"}},ekFMsdcC:function(e,t,r){e.exports=r.p+"images/evernote-poster.427bc4de.png"},"f0NJUF9/":function(e,t,r){"use strict";var n,o=r("tLZJUYWX"),i=r.n(o),a=[{_id:"myStar",get name(){return i.a.get("organization.report.app.my.star")},type:"default",gtaCategory:"starred"},{_id:"myCreate",get name(){return i.a.get("organization.report.app.my.create")},type:"default",gtaCategory:"created by me"},{_id:"myShare",get name(){return i.a.get("organization.report.app.my.share")},type:"default",gtaCategory:"shared with me"}],s={get default(){return i.a.get("organization.report.app.default.report")},get myCreate(){return i.a.get("organization.report.app.my.create")}},u={get myStar(){return i.a.get("organization.report.app.no.star.report")},get myCreate(){return i.a.get("organization.report.app.no.create.report")},get myShare(){return i.a.get("organization.report.app.no.share.report")}},c=r("fio7jWQ0"),l=r("mrSGxOB2"),p=r("GESwhXbR"),f=r("sa1Ed382"),d=r("JZM8nUfk"),g=r.n(d),h=r("hxiM8Hy+"),m=r.n(h),y=r("6SzIBtPz"),v=r("NOGqly5s"),b=r("4c1CS0b3"),_=r("oRqJmROU"),S=r("gh8QIhMV");!function(e){e.MyStar="myStar",e.MyCreate="myCreate",e.MyShare="myShare"}(n||(n={}));var T=new(r("8yf6doCl").Subject);function E(e){for(var t=e.length,r=0,n=-1,o=0;o<t;o++)r+=(n=e.charCodeAt(o))>=0&&n<=128?1:2;return r}function O(e,t){return t?e.replace(/\$([\s\S]*?)\$/g,function(e,r){return encodeURIComponent(t[r])||""}):e}var w,C=function(e){T.next(e)},I=function(e){return e.preventDefault(),e.returnValue=i.a.get("organization.report.app.has.leaving.lock"),i.a.get("organization.report.app.has.leaving.lock")},k=r("s0r7VfKc"),j=r("QQ/Xj7Ar"),A=r("2qRnoGmE"),P={apiHost:A.DEVELOPER_HOST+"/reportapp"},R={fetchCategories:function(e){return k.default.fetch.get("organizations/"+e+"/installedApps",{featureType:"plugin_for_chart"},{apiHost:A.HOST+"/appstore/api"})},fetchDefaultReports:function(e,t){return k.default.fetch.get("charts",{_organizationId:e,_consumerId:t},P)},fetchMyStarReports:function(e,t){return new j.a(k.default,t,"charts/starred",{_organizationId:e},P)},fetchMyCreateReports:function(e,t,r){return new j.a(k.default,t,"charts/create",{_organizationId:e,_consumerId:r},P)},fetchMyShareReports:function(e,t){return new j.a(k.default,t,"charts/share",{_organizationId:e},P)},fetchReport:function(e,t){return k.default.fetch.get("charts/"+e,{_organizationId:t},P)},updateReportName:function(e,t){return k.default.fetch.put("charts/"+e+"/name",t,P)},starReport:function(e){return k.default.fetch.post("charts/"+e+"/star",{},P)},cancelStarReport:function(e){return k.default.fetch.delete("charts/"+e+"/star",{},P)},saveReport:function(e,t){return k.default.fetch.post("charts",l.a({_organizationId:e},t),P)},shareReport:function(e,t){return k.default.fetch.put("charts/"+e+"/share",t,P)},deleteReport:function(e){return k.default.fetch.delete("charts/"+e,{},P)}},N={organizationId:null,categories:[],category:a[0],reports:[],reportsMap:{default:{result:[]}},currentReport:null,loadedIframe:!1,thirdPartyPermissions:{save:!0,saveAs:!0},isLoadingCategories:!1,isLoadingReports:!1,isLoadingReport:!1,hasLeavingLock:!1},x=function(e){return"ORGANIZATION_REPORT_APP/"+e},D=function(e){return x(e+"/FAILURE")},M=function(e){return x(e+"/SUCCESS")},F=function(e,t){return e.getState().ui.organizationReportApp[t]},L=Object(y.a)(x("MOUNT")),B=Object(y.a)(x("UNMOUNT")),U=Object(y.a)(x("MOUNT_DETAIL")),G=Object(y.a)(x("CHANGE_CATEGORY")),q=Object(y.a)(x("LOAD_IFRAME")),z=Object(y.a)(x("ADD_THIRD_PARTY_PERMISSIONS")),V=Object(y.a)(x("FETCH_CATEGORIES")),K=Object(y.a)(D("FETCH_CATEGORIES")),H=Object(y.a)(M("FETCH_CATEGORIES")),W=Object(y.a)(x("FETCH_REPORTS")),J=Object(y.a)(D("FETCH_REPORTS")),Q=Object(y.a)(M("FETCH_REPORTS")),Y=Object(y.a)(x("LOAD_MORE_REPORTS")),X=Object(y.a)(M("LOAD_MORE_REPORTS")),$=Object(y.a)(x("FETCH_REPORT")),Z=Object(y.a)(D("FETCH_REPORT")),ee=Object(y.a)(M("FETCH_REPORT")),te=Object(y.a)(x("UPDATE_REPORT_NAME")),re=Object(y.a)(M("UPDATE_REPORT_NAME")),ne=Object(y.a)(x("STAR_REPORT")),oe=Object(y.a)(M("STAR_REPORT")),ie=Object(y.a)(x("CANCEL_STAR_REPORT")),ae=Object(y.a)(M("CANCEL_STAR_REPORT")),se=Object(y.a)(x("SAVE_AS_REPORT")),ue=Object(y.a)(M("SAVE_AS_REPORT")),ce=Object(y.a)(x("SHARE_REPORT")),le=Object(y.a)(M("SHARE_REPORT")),pe=Object(y.a)(x("DELETE_REPORT")),fe=Object(y.a)(M("DELETE_REPORT")),de=Object(y.a)(x("REQUEST_LEAVING_LOCK")),ge=Object(y.a)(x("RELEASE_LEAVING_LOCK")),he=Object(y.b)(((w={})[""+L]=function(e,t){return t.payload?l.a({},e,{organizationId:t.payload}):e},w[""+B]=function(){return N},w[""+U]=function(e,t){if(!t.payload)return e;var r=e.reports.find(function(e){return e._id===t.payload})||null;return l.a({},e,{currentReport:r,loadedIframe:N.loadedIframe,thirdPartyPermissions:N.thirdPartyPermissions})},w[""+G]=function(e,t){if(!t.payload)return e;var r=a.concat(e.categories);return l.a({},e,{category:r.find(function(e){return e._id===t.payload})})},w[""+q]=function(e,t){return l.a({},e,{loadedIframe:!!t.payload})},w[""+z]=function(e,t){if(!t.payload)return e;var r=l.a({},e.thirdPartyPermissions,t.payload);return l.a({},e,{thirdPartyPermissions:r})},w[""+V]=function(e){return l.a({},e,{isLoadingCategories:!0})},w[""+K]=function(e){return l.a({},e,{isLoadingCategories:!1})},w[""+H]=function(e,t){return t.payload?l.a({},e,{categories:t.payload,isLoadingCategories:!1}):e},w[""+W]=function(e){return l.a({},e,{isLoadingReports:!0})},w[""+J]=function(e){return l.a({},e,{isLoadingReports:!1})},w[""+Q]=function(e,t){if(!t.payload)return e;var r=e.reports;for(var n in t.payload)r=m()(r,t.payload[n].result,"_id");return l.a({},e,{reportsMap:t.payload,isLoadingReports:!1,reports:r})},w[""+X]=function(e,t){if(!t.payload)return e;var r=e.reports;for(var n in t.payload)r=m()(r,t.payload[n].result,"_id");return l.a({},e,{reportsMap:Object.assign({},e.reportsMap,t.payload),reports:r})},w[""+$]=function(e){return l.a({},e,{isLoadingReport:!0})},w[""+Z]=function(e){return l.a({},e,{isLoadingReport:!1})},w[""+ee]=function(e,t){return t.payload?l.a({},e,{currentReport:t.payload,isLoadingReport:!1,reports:e.reports.concat(t.payload)}):e},w[""+re]=function(e,t){if(!t.payload)return e;var r=e.reports.map(function(e){return e._id===t.payload._id?t.payload:e});return l.a({},e,{currentReport:t.payload,reports:r})},w[""+oe]=function(e,t){if(!t.payload)return e;var r=e.reports.map(function(e){return e._id===t.payload._id?t.payload:e});return l.a({},e,{currentReport:t.payload,reports:r})},w[""+ae]=function(e,t){if(!t.payload)return e;var r=e.reports.map(function(e){return e._id===t.payload._id?t.payload:e});return l.a({},e,{currentReport:t.payload,reports:r})},w[""+ue]=function(e,t){return t.payload?l.a({},e,{reports:e.reports.concat(t.payload)}):e},w[""+le]=function(e,t){if(!t.payload)return e;var r=e.reports.map(function(e){return e._id===t.payload._id?t.payload:e});return l.a({},e,{currentReport:t.payload,reports:r})},w[""+fe]=function(e,t){if(!t.payload)return e;var r=e.reports.filter(function(e){return e._id!==t.payload._id});return l.a({},e,{currentReport:null,reports:r})},w[""+de]=function(e){return e.hasLeavingLock?e:l.a({},e,{hasLeavingLock:!0})},w[""+ge]=function(e){return e.hasLeavingLock?l.a({},e,{hasLeavingLock:!1}):e},w),N),me=Object(v.a)(function(e,t){return e.ofType(""+V).switchMap(function(){var r=F(t,"organizationId");return R.fetchCategories(r).map(H).takeUntil(e.ofType(""+B)).catch(function(e){return p.Toast.error(i.a.get("load.error")),Object(S.throwError)(e),b.Observable.of(K())})})},function(e,t){return e.ofType(""+W).exhaustMap(function(){var r=F(t,"organizationId"),o=F(t,"category"),a=!!~[n.MyStar,n.MyCreate,n.MyShare].indexOf(o._id),s=R.fetchMyCreateReports(r,15);"myStar"===o._id?s=R.fetchMyStarReports(r,15):"myShare"===o._id&&(s=R.fetchMyShareReports(r,15)),a||(s=R.fetchMyCreateReports(r,15,o._id));var u,c=R.fetchDefaultReports(r,o._id);return u=a?[s.next().update$]:[c,s.next().update$],b.Observable.combineLatest.apply(b.Observable,l.h(u)).map(function(e){var t,r;return a?((t={}).myCreate={result:e[0].result,hasMore:e[0].hasMore,pagination:s},t):((r={}).default={result:e[0]},r.myCreate={result:e[1].result,hasMore:e[1].hasMore,pagination:s},r)}).map(Q).takeUntil(e.ofType(""+B)).catch(function(e){return p.Toast.error(i.a.get("load.error")),Object(S.throwError)(e),b.Observable.of(J())})})},function(e,t){return e.ofType(""+$).filter(_.a).switchMap(function(r){var n=r.payload,o=F(t,"organizationId");return R.fetchReport(n,o).map(ee).takeUntil(e.ofType(""+B)).catch(function(e){return p.Toast.error(i.a.get("load.error")),Object(S.throwError)(e),b.Observable.of(Z())})})},function(e){return e.ofType(""+G).map(W)},function(e,t){return e.ofType(""+U).filter(_.a).switchMap(function(e){var r=e.payload,n=F(t,"currentReport");return n&&n._id===r?b.Observable.empty():b.Observable.of($(r))})},function(e,t){return e.ofType(""+te).filter(_.a).switchMap(function(r){var n=r.payload,o=F(t,"currentReport");return R.updateReportName(o._id,n).map(re).takeUntil(e.ofType(""+B)).catch(function(e){return Object(S.throwError)(e),b.Observable.of(Object(c.noOpAction)())})})},function(e,t){return e.ofType(""+ne).filter(_.a).switchMap(function(){var r=F(t,"currentReport");return R.starReport(r._id).map(oe).takeUntil(e.ofType(""+B)).catch(function(e){return Object(S.throwError)(e),b.Observable.of(Object(c.noOpAction)())})})},function(e,t){return e.ofType(""+ie).filter(_.a).switchMap(function(){var r=F(t,"currentReport");return R.cancelStarReport(r._id).map(ae).takeUntil(e.ofType(""+B)).catch(function(e){return Object(S.throwError)(e),b.Observable.of(Object(c.noOpAction)())})})},function(e,t){return e.ofType(""+se).filter(_.a).switchMap(function(r){var n=r.payload,o=F(t,"organizationId");return R.saveReport(o,n).do(function(e){C({type:"SAVE_AS",payload:g()(e,"_id","logo","name","created","updated","_organizationId","_featureId")})}).delay(200).map(ue).takeUntil(e.ofType(""+B)).catch(function(e){return Object(S.throwError)(e),b.Observable.of(Object(c.noOpAction)())})})},function(e,t){return e.ofType(""+ce).filter(_.a).switchMap(function(r){var n=r.payload,o=F(t,"organizationId"),i=F(t,"currentReport"),a=n.delInvolvers&&!!~n.delInvolvers.indexOf(f.user.id);return R.shareReport(i._id,n).map(function(e){return a?fe(e):le(e)}).do(function(){a&&f.router.navigate("organization/"+o+"/reportapp")}).takeUntil(e.ofType(""+B)).catch(function(e){return Object(S.throwError)(e),b.Observable.of(Object(c.noOpAction)())})})},function(e,t){return e.ofType(""+pe).filter(_.a).switchMap(function(){var r=F(t,"organizationId"),n=F(t,"currentReport");return R.deleteReport(n._id).do(function(){C({type:"DELETE",payload:g()(n,"_id")})}).delay(200).map(fe).do(function(){f.router.navigate("organization/"+r+"/reportapp")}).takeUntil(e.ofType(""+B)).catch(function(e){return Object(S.throwError)(e),b.Observable.of(Object(c.noOpAction)())})})},function(e,t){return e.ofType(""+Y).exhaustMap(function(){var r=F(t,"reportsMap").myCreate,n=r&&r.pagination;return n?n.next().update$.map(function(e){var t;return(t={}).myCreate={result:e.result,hasMore:e.hasMore,pagination:n},t}).map(X).takeUntil(e.ofType(""+B)).catch(function(e){return p.Toast.error(i.a.get("load.error")),Object(S.throwError)(e),b.Observable.of(J())}):b.Observable.of(J())})},function(e){return e.ofType(""+de).do(function(){window.addEventListener("beforeunload",I)}).map(function(){return Object(c.noOpAction)()})},function(e){return e.ofType(""+ge).do(function(){window.removeEventListener("beforeunload",I)}).map(function(){return Object(c.noOpAction)()})}),ye=function(){function e(){}return e.prototype.start=function(){},e.prototype.essage=function(){},e.prototype.finish=function(){},e.prototype.requestLeavingLock=function(){c.store.dispatch(de())},e.prototype.releaseLeavingLock=function(){c.store.dispatch(ge())},e.prototype.handle=function(e){var t=this[e.method];if("function"==typeof t)return t.apply(this,e.params);throw Error("Target method cannot be found.")},e.prototype.cleanup=function(){},e.prototype.isolatedAPI=function(){return[]},e}(),ve=r("L342T8FT"),be=ve.push,_e=ve.replace,Se=ve.goBack,Te=function(e){return e&&e.params.organizationId?"/organization/"+e.params.organizationId+"/reportapp":"/organization/:organizationId/reportapp"},Ee={push:be,replace:_e,goBack:Se,base:Te,detail:function(e,t){return e&&t?Te(e)+"/report/"+t:Te(e)+"/report/:reportId"}};r.d(t,"a",function(){return a}),r.d(t,"c",function(){return s}),r.d(t,"b",function(){return u}),r.d(t,"e",function(){return ye}),r.d(t,"q",function(){return L}),r.d(t,"z",function(){return B}),r.d(t,"r",function(){return U}),r.d(t,"h",function(){return G}),r.d(t,"o",function(){return q}),r.d(t,"f",function(){return z}),r.d(t,"k",function(){return V}),r.d(t,"l",function(){return W}),r.d(t,"p",function(){return Y}),r.d(t,"A",function(){return te}),r.d(t,"y",function(){return ne}),r.d(t,"g",function(){return ie}),r.d(t,"w",function(){return se}),r.d(t,"x",function(){return ce}),r.d(t,"i",function(){return pe}),r.d(t,"u",function(){return ge}),r.d(t,"t",function(){return he}),r.d(t,"j",function(){return me}),r.d(t,"v",function(){return Ee}),r.d(t,"s",function(){return T}),r.d(t,"d",function(){return n}),r.d(t,"n",function(){return E}),r.d(t,"m",function(){return O})},fB8F65SE:function(e,t,r){"use strict";r.r(t),r.d(t,"mockMessage",function(){return o});var n=r("s0r7VfKc"),o=function(e,t,r){var o={id:e,type:"request",data:{id:e,jsonrpc:"2.0",method:"publish",params:[{data:JSON.stringify({e:t,d:r})}]}};n.default.socketClient._onmessage(o)}},"fDZdky4/":function(e,t,r){e.exports=r.p+"images/github-1.91c54fb1.png"},fSJp128c:function(e,t,r){"use strict";var n,o=r("mrSGxOB2"),i=r("q1tIBJhx"),a=r.n(i),s=r("tLZJUYWX"),u=r.n(s),c=r("a+N5u/Cl"),l=r.n(c),p=r("GESwhXbR"),f=r("TSYQbtd+"),d=r.n(f),g=r("wn+bmAxP"),h=r("wllcsNoH"),m=r.n(h),y="999999999999999999999999",v="000000000000000000000000",b=function(e){function t(t){var r=e.call(this,t)||this;r.onConfirm=function(){g.b.selectedSprint(),r.props.onLoadGraphData(r.state.selected),r.props.onSelect(r.state.selected),r.props.handleHide()},r.onClickOption=function(e){return function(){var t,n=r.props.options,o=r.state.selected;t=e===y?c.contains(o,e)?[]:n.map(function(e){return e._id}).concat([e,v]):c.contains(o,e)?c.chain(o).without(e).without(y).value():c.union(o,[e]),r.setState({selected:t})}};var n=c.contains(t.selected,y)?t.options.map(function(e){return e._id}).concat([y,v]):t.selected;return r.state={selected:n},r}return o.d(t,e),t.prototype.renderSelectList=function(){return c.isEmpty(this.props.options)?a.a.createElement("div",{className:m.a.placeholder},s.get("project.overview.progress.sprint.selector.no.sprint")):a.a.createElement("div",{className:d()("thin-scroll",m.a.list)},this.renderOptions())},t.prototype.renderOptions=function(){var e=this;return[{_id:y,name:s.get("project.overview.progress.sprint.selector.all")},{_id:v,name:s.get("project.overview.progress.sprint.selector.without.sprint")}].concat(this.props.options).map(function(t){return a.a.createElement("li",{key:t._id,className:m.a["list-item"],onClick:e.onClickOption(t._id)},a.a.createElement(p.Checkbox,{checked:c.contains(e.state.selected,t._id)}),a.a.createElement("span",{className:"item-name"},t.name),t.status&&"active"===t.status&&a.a.createElement(p.Icon,{name:"wave"}))})},t.prototype.renderConfirm=function(){return a.a.createElement("div",{className:m.a.confirm},a.a.createElement(p.Button,{disabled:c.isEmpty(this.state.selected),onClick:this.onConfirm},s.get("confirm")))},t.prototype.render=function(){return a.a.createElement("div",{className:m.a["sprint-selector"]},this.renderSelectList(),this.renderConfirm())},t}(a.a.PureComponent),_=function(e){function t(t){var r=e.call(this,t)||this;return r.onVisibleChange=function(e){r.setState({opened:e})},r.handleHideDropdown=function(){r.onVisibleChange(!1)},r.state={opened:!1},r}return o.d(t,e),t.prototype.renderContent=function(){return a.a.createElement(b,{options:this.props.options,selected:this.props.selected,onSelect:this.props.onSelect,onLoadGraphData:this.props.onLoadGraphData,handleHide:this.handleHideDropdown})},t.prototype.renderTrigger=function(){var e=c.contains(this.props.selected,y)?s.get("project.overview.progress.statistics.sprint.selector.label"):s.get("project.overview.progress.statistics.sprint.selector.selected",this.props.selected.length);return a.a.createElement(p.TextButton,{className:m.a.trigger},a.a.createElement("span",{className:m.a["trigger-lable"]},e),a.a.createElement(p.Icon,{name:"chevron-down"}))},t.prototype.render=function(){return a.a.createElement(p.Dropdown,{action:"click",opened:this.state.opened,persistence:!0,content:this.renderContent(),onVisibleChange:this.onVisibleChange},this.renderTrigger())},t}(a.a.PureComponent),S=r("9K6UCx6U"),T=r("6USodP/l"),E=r("9X6GDvc5"),O=r.n(E);!function(e){e.Done="done_detail",e.Undone="undone_detail",e.Overdue="overdue_detail",e.Unassigned="unassigned_detail",e.Duetoday="duetoday_detail",e.Overduedone="overduedone_detail"}(n||(n={}));var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),Object.defineProperty(t.prototype,"StatisticsTypeName",{get:function(){var e;return(e={})[n.Done]={name:s.get("project.overview.statistics.chart.done"),progressColor:["#F1F9EB","#9ED979"]},e[n.Undone]={name:s.get("project.overview.statistics.chart.undone"),progressColor:["#FFEDEB","#FF8478"]},e[n.Overdue]={name:s.get("project.overview.statistics.chart.overdue"),progressColor:["#FFEDEB","#FF8478"]},e[n.Unassigned]={name:s.get("project.overview.statistics.chart.unassigned"),progressColor:["#ECEDF4","#A1A4D9"]},e[n.Duetoday]={name:s.get("project.overview.statistics.chart.duetoday"),progressColor:["#FAF2E6","#FFC774"]},e[n.Overduedone]={name:s.get("project.overview.statistics.chart.overduedone"),progressColor:["#FFEDEB","#FF8478"]},e},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.number,r=e.percent,n=e.type;return a.a.createElement("div",{className:O.a.chart,onClick:this.props.onClick},a.a.createElement("span",{className:"chart-title"},this.StatisticsTypeName[n].name),a.a.createElement(p.Tooltip,{title:s.get("project.overview.click.show.more")},a.a.createElement("div",{className:"chart-number"},a.a.createElement(S.a,{number:t}))),a.a.createElement(T.a,{percent:r,underBgColor:this.StatisticsTypeName[n].progressColor[0],aboveBgColor:this.StatisticsTypeName[n].progressColor[1]}))},t}(a.a.PureComponent),C=r("4XXUDhs8"),I=r("Bi3w3DSB"),k=r.n(I),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){var e=this.props,t=e.payload;if(!e.active||!t||!t[0])return!1;var r=t[0].payload,n=r.name,o=r.undone,i=r.done;if(!l.a.isNumber(o)||!l.a.isNumber(i))return!1;var s=o-i;return a.a.createElement("div",{className:k.a.tooltip},a.a.createElement("div",null,n),a.a.createElement("div",{className:"tooltip__todo"},s," ",u.a.get("activity.card.table.todoTasks")),a.a.createElement("div",{className:"tooltip__done"},i," ",u.a.get("activity.card.table.doneTasks")))},t}(a.a.PureComponent),A=r("wd/RKGTj"),P=r.n(A),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.getActiveDot=function(e){return{stroke:e,strokeWidth:1,r:3,fill:p.colors.$G20}},t.prototype.getItemUndone=function(e){return c.isNumber(e.undone)?e.undone:null},t.prototype.getItemDone=function(e){return c.isNumber(e.done)?e.done:null},t.prototype.getItemUndoneFuture=function(e){return c.isNumber(e.undoneFuture)?e.undoneFuture:null},t.prototype.render=function(){var e=function(e){var t=o.h(e),r=t[t.length-1];return r&&(t[t.length-1]=o.a({},r,{undoneFuture:r.undone}),t.push({name:"FUTURE",done:void 0,undone:void 0,undoneFuture:r.undone})),t}(function(e){var t=P()().subtract(e.length-1,"day"),r=P()();return e.reduce(function(e,n){var i=e[e.length-1],a=o.f(n,2),s=a[0],u=a[1];return i&&(s+=i.undone,u+=i.done),e=o.h(e,[{name:t.isSame(r,"d")?t.calendar():t.fromNow(),undone:s,done:u}]),t.add(1,"day"),e},[])}(this.props.data));return a.a.createElement(C.b,{width:Object(p.getQuadUnit)(88),height:Object(p.getQuadUnit)(36),data:e,onClick:this.props.onClick,margin:{top:Object(p.getQuadUnit)(1),right:0,bottom:0,left:0}},a.a.createElement("defs",null,a.a.createElement("linearGradient",{id:"colorTasks",x1:"0",y1:"0",x2:"0",y2:"1"},a.a.createElement("stop",{offset:"5%",stopColor:"#FFEDEB",stopOpacity:.8}),a.a.createElement("stop",{offset:"95%",stopColor:"#FFEDEB",stopOpacity:0})),a.a.createElement("linearGradient",{id:"colorDone",x1:"0",y1:"0",x2:"0",y2:"1"},a.a.createElement("stop",{offset:"5%",stopColor:"#F1F9EB",stopOpacity:1}),a.a.createElement("stop",{offset:"95%",stopColor:"#F1F9EB",stopOpacity:0}))),a.a.createElement(C.c,{content:a.a.createElement(j,null)}),a.a.createElement(C.a,{type:"monotone",dataKey:this.getItemUndoneFuture,stroke:p.colors.$R30,fillOpacity:1,fill:p.colors.$White,activeDot:!1}),a.a.createElement(C.a,{type:"monotone",dataKey:this.getItemUndoneFuture,stroke:p.colors.$R30,fillOpacity:1,fill:p.colors.$White,activeDot:!1}),a.a.createElement(C.a,{type:"monotone",dataKey:this.getItemUndone,stroke:p.colors.$R30,fillOpacity:1,fill:"url(#colorTasks)",legendType:"diamond",activeDot:this.getActiveDot(p.colors.$R30)}),a.a.createElement(C.a,{type:"monotone",dataKey:this.getItemDone,stroke:p.colors.$GN30,fillOpacity:1,fill:"url(#colorDone)",legendType:"none",activeDot:this.getActiveDot(p.colors.$GN30)}))},t}(a.a.PureComponent);r.d(t,"a",function(){return _}),r.d(t,"e",function(){return y}),r.d(t,"f",function(){return v}),r.d(t,"c",function(){return n}),r.d(t,"b",function(){return w}),r.d(t,"d",function(){return R})},fSzoRVzu:function(e,t,r){e.exports=r.p+"images/testplan-0.a0a55f3d.png"},fUCTkFSf:function(e,t,r){e.exports={"node-wrapper":"node-wrapper__5kSy",node:"node__1kl6",toggler:"toggler__pwY-","toggler-triangle":"toggler-triangle__1Tfx","toggler-circle":"toggler-circle__3j4_",content:"content__3ujz",name:"name__z5wb",count:"count__1dm3",handler:"handler__1Jaz","drag-handle":"drag-handle__3nDq"}},"fVL/a9Qu":function(e,t,r){e.exports={"menu-item":"menu-item__9Pfn"}},fZoV3jYy:function(e,t,r){"use strict";var n=r("dWbDnvg6"),o=r("tHFGQRix"),i=r("mrSGxOB2"),a=r("q1tIBJhx"),s=r.n(a),u=r("tLZJUYWX"),c=r("TSYQbtd+"),l=r.n(c),p=r("a+N5u/Cl"),f=r.n(p),d=r("GESwhXbR"),g=r("oRqJmROU"),h=r("DOZCBSCZ"),m=r("eXmkf+pY"),y=r("3ggaFlxY"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseEnter=function(){t.props.onMouseEnter&&t.props.onMouseEnter(t.props.item)},t.onClick=function(){var e=t.props,r=e.item,n=e.onClick;e.disabled||n(r)},t.onClickNext=function(e){e.stopPropagation(),t.props.onClickNext&&t.props.onClickNext(t.props.item)},t}return i.d(t,e),t.prototype.renderAvatar=function(){var e=this.props,t=e.item,r=e.iconShape,o=t.avatar;if(!o)return null;var i={shape:r};return s.a.createElement(n.d,{avatar:o,className:"item-img-avatar",imgProps:i})},t.prototype.renderTick=function(){return this.props.item.checked?s.a.createElement("div",{className:"item-tick"},s.a.createElement(d.Icon,{name:"tick",size:14})):null},t.prototype.renderCheckBox=function(){var e=this.props,t=e.item,r=e.disabled,n=t.checked;return s.a.createElement(d.Checkbox,{className:"item-checkbox",checked:n||!1,disabled:r})},t.prototype.renderNext=function(){var e=this.props,t=e.item,r=e.disabled,n=e.hideNextWhenChecked,o=t.checked,i=t.hasChildren;return n&&o||r||!i?null:s.a.createElement("div",{className:"item-next",onClick:this.onClickNext},s.a.createElement(d.IconButton,{name:"arrow-right-s",color:"gray"}))},t.prototype.render=function(){var e=this.props,t=e.item,r=e.descShowed,n=e.className,o=e.disabled,i=e.checkStyle,a=t.name,u=t.desc,c=l()(y["member-menu-item"],n,{disabled:o}),p=u&&r?s.a.createElement(d.Tooltip,{title:u},s.a.createElement("div",{className:"item-desc"},u)):null,f=t.toggleTip&&s.a.createElement(d.Tooltip,{title:t.toggleTip},s.a.createElement(d.Icon,{className:"item-warning-icon",name:"warning"}));return s.a.createElement("li",{className:c,onClick:this.onClick,onMouseEnter:this.onMouseEnter},"checkbox"===i&&this.renderCheckBox(),this.renderAvatar(),s.a.createElement("div",{className:"item-content-wrap"},s.a.createElement("div",{className:"item-content"},s.a.createElement("div",{className:"item-name"},s.a.createElement("span",{className:"item-title"},a),f),p)),this.renderNext(),"tick"===i&&this.renderTick())},t.defaultProps={className:""},t}(s.a.PureComponent),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.d(t,e),t.prototype.render=function(){var e="thin-scroll member-list",t={};return Object(g.c)(this.props.customHeight)?Object.assign(t,{height:this.props.customHeight}):this.props.fullHeight?e+=" full-height":this.props.lessHeight?e+=" less-height":e+=" default-height",this.props.isPlaceholder&&(e+=" placeholder"),this.props.applySpaceTop&&(e+=" apply-space-top"),s.a.createElement("ul",{className:e,style:t},this.props.children)},t}(s.a.PureComponent),_=Object(d.Selectable)(b);var S,T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.d(t,e),t.prototype.render=function(){var e=this.props,t=e.label,r=e.children,n=e.className,o=l()("select-option-group",n),s=this.props.provideEl?{ref:this.props.provideEl}:{};return a.createElement("li",i.a({className:o},s),t&&a.createElement("div",{className:"option-group-label"},t),a.createElement("ul",null,r))},t.defaultProps={groupped:!0},t}(a.PureComponent),E=r("90U+kJWN"),O=r("u/LJYZ+h"),w=r("WspGoV4E"),C=r("SCi816Ey");function I(e){return s.a.createElement("li",{className:"empty-tips",key:"empty-tips"},!!e.imgSrc&&s.a.createElement("img",{src:e.imgSrc}),s.a.createElement("span",null,e.text))}!function(e){e.Default="default",e.Search="search",e.Sublist="sublist"}(S||(S={}));var k=function(e){function t(t){var r=e.call(this,t)||this;return r.getSelectable=function(e){r.selectable=e},r.getList=function(){switch(r.getScreen()){case S.Search:return r.props.searched;case S.Sublist:return r.props.childrenResults;default:var e=r.props,t=e.hideSelected,n=e.selected,o=e.recommend;return t?o:n.concat(o)}},r.getIndex=function(e){return f.a.findIndex(r.getList(),function(t){return t.id===e.id})},r.onSearchInputChange=function(e){var t=e.target.value;r.props.search(t)},r.onSelect=function(e){var t=e>=0?e:0,n=r.getList()[t];n&&r.onClickItem(n)},r.onClickItem=function(e){var t,n=r.props,i=n.mode,a=n.onClickSearched,s=n.onClickRecommend,u=n.onClickChildren;switch(r.getScreen()){case S.Search:t=a;break;case S.Sublist:t=u||a;break;default:t=s}if(!r.isForbidden(e))switch(t(e),i){case o.a.Single:r.onConfirm()}},r.onMouseEnter=function(e){if(r.props.reactToHover){var t=r.getIndex(e);r.resetIndexTo(t)}},r.resetIndexTo=function(e){r.setState({index:e},function(){r.mounted&&r.setState({index:-1})})},r.onConfirm=function(e){e&&e.stopPropagation(),r.props.onConfirm&&r.props.onConfirm()},r.onKeyDown=function(e){r.selectable&&r.selectable.keyboardHandler(e)},r.clearSearch=function(){r.props.query&&r.props.search("")},r.filterFn=function(e){return e.type===v},r.captureRecommendSectionEl=function(e){r.recommendSectionEl=e},r.state={index:-1},r}return i.d(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.getScreen=function(){var e=S.Default;return this.props.historyPath&&this.props.historyPath.length>0?e=S.Sublist:"string"==typeof this.props.query&&""!==this.props.query.trim()&&(e=S.Search),e},t.prototype.isSearching=function(){return this.getScreen()===S.Search},t.prototype.isForbidden=function(e){return Boolean(e.disableToggle)},t.prototype.renderSearchInput=function(){var e=this.props.searchBoxPlaceholder||u.get("search");return s.a.createElement(m.a,{onKeyDown:this.onKeyDown,placeholder:e,value:this.props.query,onChange:this.onSearchInputChange,clearInput:this.clearSearch})},t.prototype.renderMembers=function(e,t){var r=this;return e.map(function(e){return s.a.createElement(v,{key:e.id,disabled:r.isForbidden(e),item:e,descShowed:Boolean(t),onClick:r.onClickItem,onMouseEnter:r.onMouseEnter,iconShape:r.props.iconShape,checkStyle:r.props.checkStyle||"tick",onClickNext:r.props.onClickNext})})},t.prototype.renderSelectedSection=function(){var e=this.props,t=e.selectedTitle,r=e.selected;return s.a.createElement(T,{label:t||""},this.renderMembers(r))},t.prototype.componentDidUpdate=function(e){var t,r;this.props.recommendTop!==e.recommendTop&&this.recommendSectionEl&&(t=this.recommendSectionEl,r=this.recommendSectionEl.offsetParent,C(t,"scroll",{container:r,offset:0}))},t.prototype.renderRecommendSection=function(){var e=this.props,t=e.recommendTitle,r=e.recommend,n=null===t?void 0:t||u.get("recommend");return s.a.createElement(T,{label:n,provideEl:this.captureRecommendSectionEl},this.renderMembers(r))},t.prototype.renderDefaultItems=function(){var e=this.props,t=e.hideSelected,r=e.selected,n=e.recommend,o=[];return!t&&r.length>0&&o.push(this.renderSelectedSection()),n.length>0&&o.push(this.renderRecommendSection()),o},t.prototype.renderSelectableContent=function(e,t){void 0===t&&(t={});var r=e.filter(Boolean),n=Object(g.c)(this.props.customHeight)?{customHeight:this.props.customHeight-72}:{},o=!1,a=!1;return 1===r.length&&"extra"===r[0].key&&(o=!0,a=!0),s.a.createElement(_,i.a({ref:this.getSelectable,focusable:t.focusable||!1,index:this.state.index,filterFn:this.filterFn,onEnter:this.onSelect,fullHeight:!1,lessHeight:o,applySpaceTop:a,isPlaceholder:t.isPlaceholder},n),r)},t.prototype.renderDefaultScreen=function(){var e,t=this.props.isRecommendLoading,r=t||this.getList().length>0||this.props.alwaysShowSearch;if(t)e=this.renderLoading();else{var n=Object(E.flattenPlainGroup)(Object(E.iterator)(this.renderDefaultItems())),o=this.props.contentPlaceholder&&0===this.getList().length?I(this.props.contentPlaceholder):null,a=this.props.extra?s.a.createElement("div",{key:"extra"},this.props.extra):null;e=this.renderSelectableContent(i.h(n,[o,a]),{isPlaceholder:Boolean(o)})}return s.a.createElement(s.a.Fragment,null,r&&this.renderSearchInput(),e,this.renderConfirmBtn())},t.prototype.renderSearchScreen=function(){var e,t=this.props.isSearchLoading,r=this.props.searched,n=this.renderSearchInput();if(t)e=this.renderLoading();else if(0===this.props.searched.length)e=this.renderSelectableContent([I(i.a({imgSrc:O,text:u.get("selector.search.no.content")},this.props.searchNotFoundPlaceholder))],{isPlaceholder:!0});else{var o=s.a.createElement(T,{label:u.get("search.results.count",r.length)},this.renderMembers(r,!0)),a=Object(E.flattenPlainGroup)(Object(E.iterator)(o));e=this.renderSelectableContent(a)}return s.a.createElement(s.a.Fragment,null,n,e,this.renderConfirmBtn())},t.prototype.renderSublistScreen=function(){var e,t=this.props.isChildrenLoading,r=s.a.createElement("div",{className:"back"},s.a.createElement(d.TextButton,{color:"gray",onClick:this.props.onClickBack},s.a.createElement(d.Icon,{name:"arrow-left-s"}),u.get("back")));if(t)e=this.renderLoading();else{var n=this.renderMembers(this.props.childrenResults,!0);e=this.renderSelectableContent(n,{focusable:!0})}return s.a.createElement(s.a.Fragment,null,r,e,this.renderConfirmBtn())},t.prototype.renderConfirmBtn=function(){if(this.props.mode!==o.a.Single){var e=l()("confirm-btn-wrap",{"with-info":this.props.withMultiInfo});return s.a.createElement("div",{className:e},this.props.withMultiInfo&&s.a.createElement("div",null,u.get("selector.selected.count",this.calcSelected())),s.a.createElement(d.Button,{className:"confirm-btn",onClick:this.onConfirm},u.get("confirm")))}},t.prototype.calcSelected=function(){var e=this.props,t=e.recommend,r=e.searched;return f.a.chain(t).concat(r).unique("id").filter(function(e){return!!e.checked}).value().length},t.prototype.renderLoading=function(){var e=this.props.customHeight?{height:this.props.customHeight-72}:{};return s.a.createElement("div",{className:"loading-wrap",style:e},s.a.createElement(h.a,null))},t.prototype.render=function(){var e,t,r=this.props.classNames,n=this.getScreen(),o=l()(w["member-menu"],"member-menu-component","member-menu-body",((e={})[""+r]=!!r,e));switch(n){case S.Search:t=this.renderSearchScreen();break;case S.Sublist:t=this.renderSublistScreen();break;default:t=this.renderDefaultScreen()}return s.a.createElement("div",{className:o},t)},t.defaultProps={nested:!1,reactToHover:!1},t}(s.a.PureComponent),j=r("AJKJAcwg"),A=r("4c1CS0b3"),P=r("7OaXMmhv"),R=function(e){return function(t){var r;return r=e.toggledResult[t.id]?Object(P.i)(t):Object(P.m)(t),e.canToggleFn&&(r=Object(P.d)(r,e.canToggleFn(r,{result:e.toggledResult,added:e.added,removed:e.removed},r.id))),r}},N=Object(P.b)("load-pool",function(e){return i.a({},e,{isPoolLoading:!0})}),x=Object(P.b)("load-pool-success",function(e,t){return i.a({},e,{pool:t.filter(function(t){return!e.initSet[t.id]}).map(R(e)),isPoolLoading:!1})}),D=Object(P.b)("load-pool-fail",function(e,t){return i.a({},e,{isPoolLoading:!1})}),M=Object(P.b)("toggled",function(e,t){var r=t.entry,n=t.source,o=R(e),a=e.selected,s=e.pool,u="pool"!==n&&"selected"!==n,c=e.toggledResult[r.id],l=a.find(function(e){return e.id===r.id});if(u&&c&&!l){var p=s.findIndex(function(e){return e.id===r.id}),f=i.h([r],s);return p>=0&&f.splice(p-s.length,1),i.a({},e,{pool:f.map(o)})}return i.a({},e,{selected:a.map(o),pool:s.map(o)})}),F=Object(P.b)("toggle-entry",function(e,t){var r=t.entry;if(r.disableToggle)return e;var n=(e.mode===o.a.Multi?P.k:P.l)(e.toggledResult,r.id,r),a=n.dict,s=n.selected,u=n.unselected;if(a===e.toggledResult){var c=Object(p.clone)(e.toggledResult);return i.a({},e,{toggledResult:c})}var l={toggledResult:a};return s&&(l.removed=z(e.removed,s),e.initSet[s]||(l.added=q(e.added,s))),u&&(l.added=z(e.added,u),e.initSet[u]&&(l.removed=q(e.removed,u))),i.a({},e,l)}),L=Object(P.b)("commit",function(e){return e}),B=i.a({},N.reducer,x.reducer,D.reducer,F.reducer,M.reducer,L.reducer),U=function(e){return function(t,r){var n=t.share(),o=N.from(n).switchMap(function(){return e.loadRecommend().map(x.create).catch(function(e){return A.Observable.of(D.create(e))})}),i=F.from(n).map(M.create),a=L.from(n).do(function(){if(e.commit){var t=r(),n={result:t.toggledResult,added:t.added,removed:t.removed};e.commit(n)}}).filter(function(e){return!1});return A.Observable.merge(o,i,a).debounceTime(0)}},G=function(e){var t=e.selected.map(P.i),r=t.reduce(function(e,t){return e[t.id]=t,e},{});return{mode:e.mode,selected:t,initSet:r,pool:[],isPoolLoading:!1,toggledResult:r,added:[],removed:[],canToggleFn:e.canToggle}},q=function(e,t){return e.indexOf(t)>=0?e:i.h(e,[t])},z=function(e,t){var r=e.indexOf(t);return r<0?e:i.h(e.slice(0,r),e.slice(r+1))},V=Object(P.b)("search-term-change",function(e,t){return i.a({},e,{searchTerm:t,isSearchLoading:!0})}),K=Object(P.b)("search-success",function(e,t){var r=t||e.searchResults;return i.a({},e,{searchResults:r.map(R(e)),isSearchLoading:!1})}),H=Object(P.b)("search-fail",function(e,t){return i.a({},e,{isSearchLoading:!1})}),W=i.a({},V.reducer,K.reducer,H.reducer),J=function(e){return function(t){var r=t.share(),n=V.from(r).publishReplay(1).refCount(),o=n.map(function(e){return e.trim()}).filter(Boolean),i=n.filter(function(e){return""===e}),a=o.debounceTime(400).switchMap(function(t){return e.loadSearch(t).map(K.create).takeUntil(i).catch(function(e){return A.Observable.of(H.create(e))})}),s=F.from(r).filter(function(e){return"searchResults"===e.source}).mapTo(void 0).map(K.create);return A.Observable.merge(a,s)}},Q=function(){return{searchTerm:"",isSearchLoading:!1,searchResults:[]}},Y=Object(P.b)("hierarchy-path-change",function(e,t){return i.a({},e,{hierarchyPath:t?e.hierarchyPath.concat(t):e.hierarchyPath.slice(0,-1),isHierarchyLoading:!0})}),X=Object(P.b)("hierarchy-success",function(e,t){var r=t||e.hierarchyResults;return i.a({},e,{hierarchyResults:r.map(R(e)),isHierarchyLoading:!1})}),$=Object(P.b)("hierarchy-fail",function(e,t){return i.a({},e,{isHierarchyLoading:!1})}),Z=i.a({},Y.reducer,X.reducer,$.reducer),ee=function(e){return function(t,r){var n=e.loadChildren||function(){return A.Observable.of([])},o=t.share(),i=Y.from(o).map(function(){return r().hierarchyPath}).publishReplay(1).refCount(),a=i.filter(function(e){return e.length>0}),s=i.filter(function(e){return 0===e.length}),u=a.debounceTime(400).switchMap(function(e){var t=e[e.length-1];return n(t).map(X.create).takeUntil(s).catch(function(e){return A.Observable.of($.create(e))})}),c=F.from(o).filter(function(e){return"hierarchyResults"===e.source}).mapTo(void 0).map(X.create);return A.Observable.merge(u,c)}},te=function(){return{hierarchyPath:[],isHierarchyLoading:!1,hierarchyResults:[]}},re=r("nDsjpj50"),ne=function(e,t,r,n){var o;void 0===n&&(n={type:"noop"});return[new A.Observable(function(i){var a=new re.BehaviorSubject(n),s=e,u=a.scan(t,e).do(function(e){s=e,i.next(e)}),c=r(a.asObservable(),function(){return s}).do(function(e){return a.next(e)}),l=A.Observable.merge(u,c).subscribe();return o=a,function(){a.complete(),l.unsubscribe()}}).distinctUntilChanged(),function(e){o&&!o.closed&&o.next(e)}]},oe=i.a({},B,W,Z);function ie(e,t){var r=t.type&&oe[t.type];return r?r(e,t):e}function ae(e){return{query:e.searchTerm,historyPath:e.hierarchyPath,isSearchLoading:e.isSearchLoading,isRecommendLoading:e.isPoolLoading,selected:e.selected,recommend:e.pool,searched:e.searchResults,childrenResults:e.hierarchyResults}}var se=function(){return{selected:[],recommend:[],recommendTop:void 0,isRecommendLoading:!1,query:"",searched:[],isSearchLoading:!1}};function ue(e){var t=e.loadRecommend,r=e.loadSearch,n=e.loadChildren,o=e.canToggle,a=e.commit,u=i.g(e,["loadRecommend","loadSearch","loadChildren","canToggle","commit"]),c=i.f(function(e){var t=e.loadRecommend,r=e.loadSearch,n=e.loadChildren,o=e.canToggle,a=e.commit,u=e.mode,c=e.selected,l=s.a.useMemo(function(){return i.a({},G({mode:u,selected:c,canToggle:o}),Q(),te())},[u,c,o]),p=i.f(s.a.useMemo(function(){var e=N.create({}),o=Object(P.c)(U({loadRecommend:t,commit:a}),J({loadSearch:r}),ee({loadChildren:n}));return ne(l,ie,o,e)},[l,t,r,n,o,a]),2),f=p[0],d=p[1],g=i.f(s.a.useState(ae(l)),2),h=g[0],m=g[1];return s.a.useEffect(function(){var e=f.map(ae).subscribe(function(e){return m(e)});return function(){return e.unsubscribe()}},[f]),[h,s.a.useMemo(function(){return{search:function(e){d(V.create(e))},onClickNext:function(e){d(Y.create(e))},onClickBack:function(){d(Y.create(void 0))},onClickSelected:function(e){d(F.create({entry:e,source:"selected"}))},onClickRecommend:function(e){d(F.create({entry:e,source:"pool"}))},onClickSearched:function(e){d(F.create({entry:e,source:"searchResults"}))},onClickChildren:function(e){d(F.create({entry:e,source:"hierarchyResults"}))},onConfirm:function(){d(L.create({}))}}},[d])]}({loadRecommend:t,loadSearch:r,loadChildren:n,canToggle:o,commit:a,mode:e.mode,selected:e.selected}),2),l=c[0],p=c[1],f=Object(P.h)(p,e);return s.a.createElement(k,i.a({},i.a({},u,l,f)))}var ce=function(e){return{query:e.searchTerm,isSearchLoading:e.isSearchLoading,isRecommendLoading:e.isPoolLoading,selected:e.list,recommend:e.pool,searched:e.searchResults,recommendTop:e.poolTop,historyPath:e.historyPath,childrenResults:e.childrenResults,isChildrenLoading:e.isChildrenLoading}};r.d(t,"b",function(){return n.b}),r.d(t,"a",function(){return k}),r.d(t,"c",function(){return o.a}),r.d(t,"g",function(){return j.c}),r.d(t,"h",function(){return j.d}),r.d(t,"f",function(){return j.b}),r.d(t,"e",function(){return se}),r.d(t,"d",function(){return ue}),r.d(t,"i",function(){return ce})},fcolQD49:function(e,t,r){"use strict";var n={};r.r(n),r.d(n,"createEmptyAxis",function(){return c}),r.d(n,"isDoneAxis",function(){return p}),r.d(n,"isEmptyAxis",function(){return f}),r.d(n,"createAxises",function(){return d}),r.d(n,"noopAxises",function(){return g}),r.d(n,"executorAxises",function(){return h}),r.d(n,"priorityAxises",function(){return m}),r.d(n,"stageAxises",function(){return y}),r.d(n,"taskflowStatusAxises",function(){return v}),r.d(n,"scenarioFieldConfigStatusAxises",function(){return b}),r.d(n,"storyAxises",function(){return S}),r.d(n,"bugAxises",function(){return T}),r.d(n,"sprintAxises",function(){return E}),r.d(n,"findTopLevelTasks",function(){return O}),r.d(n,"iterativeSprintAxises",function(){return C}),r.d(n,"taskflowAxises",function(){return I}),r.d(n,"scenarioConfigAxises",function(){return k});var o={};r.r(o),r.d(o,"getTaskBucket",function(){return j});var i=r("pYq0h+Ab"),a=r("mrSGxOB2"),s=r("tLZJUYWX"),u=r("bqYxFEmS"),c=function(e){void 0===e&&(e={});var t=e.title||s.get("other"),r="";return e.hasOwnProperty("value")&&(r=e.value),a.a({id:u.EMPTY_CONDITION,title:t,value:r},e.predicate?{predicate:e.predicate}:{})};function l(e,t,r){var n,o;return void 0===e&&(e=s.get("other")),void 0===r&&(r={}),t?Array.isArray(t)?(n=r.id||"",o=function(e){var r=e._sprintId;return Boolean(r&&t.indexOf(r)>-1)}):(n=t,o=function(e){return e._sprintId===t}):(n=u.EMPTY_CONDITION,o=function(e){return!e._sprintId}),{id:n,title:e,value:"",predicate:o}}var p=function(e){return e===u.DONE_CONDITION},f=function(e){return e===u.EMPTY_CONDITION},d=function(e,t){return Array.isArray(e)&&e.length>0?e.map(t):[]},g=function(){return[{id:i.AxisType.noop,title:i.AxisType.noop,value:0}]},h=function(e){return d(e,function(e){return{id:e._id,title:e.name,value:e._id}})},m=function(){return[{id:"priority_0",title:s.get("priority.none"),value:0},{id:"priority_1",title:s.get("priority.high"),value:1},{id:"priority_2",title:s.get("priority.urgent"),value:2}]},y=function(e){return d(e,function(e){return{id:e._id,title:e.name,value:e._id}})},v=function(e){return d(e,function(e){return{id:e._id,title:e.name,value:e._id}})},b=function(e,t){return d(e,function(e){return{id:e._id,title:e.name,predicate:function(r){return r._taskflowstatusId===e._id&&t.some(function(e){return e===r._scenariofieldconfigId})},value:e._id}})},_=function(e){return function(){return[{id:u.DONE_CONDITION,title:e.doneTitle,value:!0},{id:u.UNDO_CONDITION,title:e.todoTitle,value:!1}]}},S=_({get doneTitle(){return s.get("table.sprint.story.done")},get todoTitle(){return s.get("table.sprint.story.undo")}}),T=_({get doneTitle(){return s.get("table.sprint.bug.done")},get todoTitle(){return s.get("table.sprint.bug.undone")}}),E=function(e){var t=[],r=[];return e.forEach(function(e){var n=l(e.name,e._id);"complete"===e.status?r.push(a.a({},n,{done:!0,completedDate:new Date(e.updated).valueOf()})):t.push(n)}),a.h(t,[l(s.get("sprint.unplanned"),null)],r)},O=function(e){var t,r,n=new Map;e.forEach(function(e){n.set(e._id,e)});var o=[];try{for(var i=a.i(n.values()),s=i.next();!s.done;s=i.next()){var u=s.value,c=u.ancestorIds;(!c[0]||!n.get(c[0]))&&o.push(u)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return o},w=function(e){return{id:e._id,title:e.content,value:e._id,predicate:function(t){return function(e,t){return Array.isArray(e.ancestorIds)&&e.ancestorIds[0]===t}(t,e._id)}}},C=function(e){return O(e).sort(function(e,t){return new Date(e.created).valueOf()-new Date(t.created).valueOf()}).map(w)},I=function(e,t){if(!t)return[];var r=(t.taskflowstatuses||[]).map(function(e){return e._id}),n=e.filter(function(e){return r.indexOf(e._taskflowstatusId)>-1}),o=new Set(n.map(function(e){return e._id}));return[{id:i.AxisType.taskflow,title:i.AxisType.taskflow,value:0,predicate:function(e){return o.has(e._id)}}]},k=function(e){var t=e.filter(function(e){return"default"===e.type})[0];return d(e,function(e){var r=e._id,n=Boolean(t)&&r===t._id;return{id:r,title:e.name,value:r,predicate:function(e){var t=e._scenariofieldconfigId;return t===r||n&&!t}}})},j=function(e,t,r,n,o){var i,s,c,l,p=Object(u.getConditionBucket)(r,t,o,n),f=new Map;try{for(var d=a.i(p.entries()),g=d.next();!g.done;g=d.next()){var h=a.f(g.value,2),m=h[0],y=h[1],v=[];if(f.set(m,v),e.length>0){var b=[],_=function(e){y.every(function(t){return t(e)})?v.push(e):b.push(e)};try{for(var S=(c=void 0,a.i(e)),T=S.next();!T.done;T=S.next()){_(T.value)}}catch(E){c={error:E}}finally{try{T&&!T.done&&(l=S.return)&&l.call(S)}finally{if(c)throw c.error}}e=b}}}catch(O){i={error:O}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}return f},A=r("GeeOS9xn");r.d(t,"a",function(){return i}),r.d(t,"b",function(){return n}),r.d(t,"c",function(){return o}),r.d(t,"d",function(){return A})},fgCHRV6l:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"waterdrop",use:"waterdrop-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="waterdrop"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#69D0CA" rx="2" /><path fill="#FFFFFF" fill-rule="nonzero" d="M10.003 15c1.076 0 2.08-.426 2.842-1.19a4.048 4.048 0 0 0 .121-5.533l-.048-.056c-.048-.056-.109-.112-.157-.18L10.39 5.18a.5.5 0 0 0-.388-.18.52.52 0 0 0-.387.18L7.233 8.053l-.157.18-.048.055a4.035 4.035 0 0 0 .133 5.522A3.968 3.968 0 0 0 10.003 15z" /></g></symbol>'});a.a.add(s);t.default=s},fio7jWQ0:function(e,t,r){"use strict";r.r(t);var n=r("slMuA5KH");r.d(t,"createReducer",function(){return n.a});var o=r("ctsD9mWH");r.d(t,"history",function(){return o.history}),r.d(t,"store",function(){return o.store}),r.d(t,"addUIReducer",function(){return o.addUIReducer}),r.d(t,"addEpic",function(){return o.addEpic});var i=r("UoPU7bBH");r.d(t,"noOpAction",function(){return i.a});var a=r("ALrmuhC4");r.d(t,"withGta",function(){return a.b})},"fpIMfP/U":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=[{title:"priority.none",className:"btn btn-normal",number:0},{title:"priority.high",className:"btn btn-high",number:1},{title:"priority.urgent",className:"btn btn-urgent",number:2}]},fqeXJ4zE:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("2qRnoGmE"),o=r.n(n),i=function(){return!!o.a.AONE}},"g6ymz/dA":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"forum",use:"forum-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="forum"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#A6A6A6" rx="2" /><path fill="#FFFFFF" fill-rule="nonzero" d="M14.387 11.2h-.952a.2.2 0 0 1-.2-.2V7.787a1 1 0 0 0-1-1H7.848a.2.2 0 0 1-.2-.2v-.904c0-.376.308-.682.689-.682h5.974c.38 0 .689.306.689.682v4.857c0 .377-.233.662-.613.662zm-2.035-2.84V13.2c0 .376-.308.68-.689.68H9.904L8.89 14.908a.3.3 0 0 1-.426 0l-1.015-1.025H5.689a.684.684 0 0 1-.689-.68V8.358c0-.376.308-.68.69-.68h5.973c.38 0 .69.304.69.68z" /></g></symbol>'});a.a.add(s);t.default=s},gBe2F1Rz:function(e,t,r){var n,o,i,a,s,u,c,l={}.hasOwnProperty;u=r("a+N5u/Cl"),c=r("px/Tdvb+").sort,o=r("VuB9cZyl"),i=r("wu4EEviu"),a=r("oq1bWpp9"),n=r("CrUnfw5r"),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o),t.prototype.name="tasks",t.prototype.model=a,t.prototype.boundToObjectType="stage",t.prototype.pageNum=20,t.prototype.initialize=function(e,r){var o;return null==r&&(r={}),t.__super__.initialize.apply(this,arguments),r.pageNum&&(this.pageNum=r.pageNum),i.on(":change:tasks/"+this._boundToObjectId+"/locked",(o=this,function(e){var t;return t=e.lockedStageId,u.each(o.models.slice(),function(e){return e.get("isDone")?e.set("_stageId",t):o._boundToObjectId===t?e.set({isDone:!0,accomplished:(new Date).toISOString()}):void 0})})),i.on(":archive:tasks/"+this._boundToObjectId,function(e){return function(t){var r;return u.each(u.clone(e.models),function(e){return e.set({isArchived:!0,updated:t.updated})}),null!=(r=n.find(t._projectId+"_task"))?r.reset():void 0}}(this))},t.prototype.listen=function(){var e;if(!this.listened)return t.__super__.listen.apply(this,arguments),this.on("change:_stageId",(e=this,function(r,n){if(24===e._boundToObjectId.length&&!e.isSubtasks())return e.boundToObjectType&&e._boundToObjectId!==n&&e.remove(r),null==r.get("_taskflowstatusId")&&n?t.fetchT(n)(function(e,t){return t.add(r.toJSON())}):void 0})),this.on("resetCollection",function(){return this.each(function(e){var r;return null!=(r=t.find(e.id))?r.trigger("resetCollection"):void 0}),this.reset()}),this.on("change:ancestorIds",function(e){var t,r,n;if(t=null!=(r=e.previous("ancestorIds"))?r[0]:void 0,(null!=(n=e.get("ancestorIds"))?n[0]:void 0)&&!t)return this.remove(e)}),this.isSubtasks()?this.delegateSubtaskListeners():void 0},t.prototype.delegateSubtaskListeners=function(){return this.off("change:isArchived"),this.on("change:pos change:accomplished",this.sort),this.on("change:ancestorIds",function(e){var t,r;if((null!=(t=e.previous("ancestorIds"))?t[0]:void 0)!==(null!=(r=e.get("ancestorIds"))?r[0]:void 0))return this.remove(e)})},t.prototype.refresh=function(){return new Promise((e=this,function(t,r){return e.fetch({silent:!0,attrs:{isDone:!1,noPagination:!0},success:t})})).then(function(e){return function(){return e.pageIndex=0,new Promise(function(t,r){return e.fetch({silent:!0,remove:!1,attrs:{isDone:!0},success:t})})}}(this)).then(function(e){return function(){return e.trigger("reset")}}(this)).catch(function(e){return function(){return e.trigger("reset")}}(this));var e},t.prototype.sync=function(e,r,n){var o,i;return null==n&&(n={}),this.isSubtasks()?(n=u.assign({skipBoundToObjectType:!0},n)).attrs=u.assign({_ancestorId:this._boundToObjectId,all:!0},n.attrs):(o=(null!=(i=n.attrs)?i._stageId:void 0)||this._boundToObjectId,n.url=n.url||"stages/"+o+"/tasks"),t.__super__.sync.apply(this,arguments)},t.prototype.create=function(e,r){return this.isSubtasks()&&(e=u.assign({_ancestorId:this._boundToObjectId},e)),t.__super__.create.apply(this,arguments)},t.prototype.getDoneTaskCount=function(){return this.where({isDone:!0}).length},t.prototype.comparator=function(e,t){return this.isSubtasks()?this._sortSubtasks(e,t):c(e,t,this.orderBy)},t.prototype._sortSubtasks=function(e,t){return e.get("isDone")!==t.get("isDone")?e.get("isDone")?1:-1:e.get("isDone")?new Date(t.get("accomplished"))-new Date(e.get("accomplished")):e.get("pos")-t.get("pos")},t.prototype.checkHasMore=function(e){return this.pageNum<=e.reduce(function(e,t){return+t.isDone+e},0)},t.prototype.isSubtasks=function(){return"task"===this.boundToObjectType},t.prototype.getVisibleModels=function(){return this.filter(function(e){return e.checkIsVisible()})},t}(),a.Collection=s,e.exports=s},"gGLCgK+J":function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return o});var n=50,o=99},"gLTu//Kz":function(e,t,r){var n,o={}.hasOwnProperty;n=r("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="role",t.prototype.urlRoot="roles",t.prototype.defaults={name:"",permissions:[]},t}()},gNFMJi3i:function(e,t,r){"use strict";r.d(t,"e",function(){return g}),r.d(t,"f",function(){return h}),r.d(t,"c",function(){return m}),r.d(t,"b",function(){return y}),r.d(t,"a",function(){return v}),r.d(t,"g",function(){return b}),r.d(t,"d",function(){return _}),r.d(t,"l",function(){return S}),r.d(t,"k",function(){return T}),r.d(t,"m",function(){return E}),r.d(t,"o",function(){return w}),r.d(t,"i",function(){return C}),r.d(t,"j",function(){return I}),r.d(t,"h",function(){return j}),r.d(t,"n",function(){return A});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r.n(o),a=r("tLZJUYWX"),s=r.n(a),u=r("wd/RKGTj"),c=r.n(u),l=r("cUZYBCvT"),p=r("3eMzznN/"),f=r("V6edIaEd"),d=r("XIKSkjsA"),g=function(e){return e.customFieldEntity?e.customFieldEntity._id:e.key},h=function(e){return e.map(g)},m=function(e,t){return e.find(function(e){return g(e)===t})},y=function(e,t){return i.a.extend({},d.b,{customFieldEntity:e},t||{})},v=function(e,t){return e.map(function(e,r){var o=(e.customfield||[]).concat(t[r]);return n.a({},e,{customfield:o})})},b=function(e){return e.reduce(function(e,t){return e[g(t)]=t,e},{})};function _(e){if(null===e.value)return null;switch(e.type){case"multipleChoice":return Object(f.getMultiValue)(e).join(s.a.get("comma"));case"date":var t=Object(f.getSingleValue)(e);return t?p.formatDate(t,{isUsePref:!0}).dateTimeString:null;case"number":case"text":case"dropDown":return Object(f.getSingleValue)(e);case"lookup":return e.value.map(function(e){return e.title}).join(s.a.get("comma"));case"work":var r=e.value.length;return s.a.get("library.works.count",r);default:return null}}var S=function(e){return!!i.a.values(l.a).concat("all").find(function(t){return t===e})};function T(e){if(null===e.value)return null;var t=_(e);switch(e.type){case"number":return t&&parseFloat(t);case"date":return t&&new Date(Object(f.getSingleValue)(e)).getTime();case"work":return e.value.length;case"multipleChoice":case"text":case"dropDown":case"lookup":return t;default:return null}}var E=function(e,t,r,o){return n.a({},e,{width:Math.min((e.maxWidth||999)*t,e.width*t),maxWidth:e.maxWidth?e.maxWidth*t:void 0,headHeight:r,height:o})},O=d.h.concat(d.b),w=function(e,t,r,o){var i=O.find(function(t){return t.key===e.key}),a=i?i.width:d.o,s=e.width===a*t?e.width/t:Math.max(e.minWidth||0,e.width/t);return n.a({},e,{width:s,headHeight:r,height:o,maxWidth:e.maxWidth?e.maxWidth/t:void 0})},C=function(e){return e.map(function(e){return{type:e.type,id:e._customfieldId,value:e.value}})},I=function(e){return{status:e.degree,statusName:e.name,statusUpdated:c()(e.updated).format("MMMDo"),statusDescription:e.content}},k={projects:[],cellDescriptors:d.h,columnOrder:h(d.h),pageSize:d.k};function j(e,t){var r=A(e?"projectTag":t||"projectCategory",k.cellDescriptors);return n.a({},k,{cellDescriptors:r,columnOrder:h(r)})}function A(e,t){return t.filter(function(t){switch(e){case"projectTag":return!Boolean(t.onlyProjectCategory);case"projectCategory":return!t.onlyProjectTag}var r=!!t.onlyProjectTag,n=!(i.a.isUndefined(t.onlyProjectCategory)||t.onlyProjectCategory===e);return!(r||n)})}},gb6sH9ot:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAABGlBMVEWmpqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqapqamtra2zs7O6urrAwMDCwsLDw8PExMTFxcXGxsbKysrMzMzS0tLY2Nje3t7f39/i4uLk5OTm5ubp6ent7e3v7+/x8fH09PT5+fn6+vr9/f3+/v7///9sumsYAAAAQHRSTlMABAUGExQWFxkaGxwlJikqTk9QUVdYW1xmaXBxcnV2enuNjo+TlJW2t7jLzM7P0NjZ2+zt7vHy8/T19vj5+vz+SWi1rwAAAhZJREFUGBmFwQ1b0mAUBuATirYyJZMCib6WikIqqUwxt6e5aeEGCoQ4Pf//byS6C8/7buB9U8LcilnZ2Ts+3tupmCtz9IzZ0pYDwdkqzdJkL78eIuHou0HpXpQtpLLKGUqxUMNEP5Yo4e0BprCWSVOwMZVdIEURzyqSkLOh8IMwDH0Xkp2jsUULgtuJ+FHXg2AtUiyzDcGL+EkAYTtDj8oQ3CFLHoRP9MCwILRZMYBgGTSyBsGNWOVDWKd72SYEnzUhhGaWiFYh+awJIa0SURWSz5oQ0hbRnAPJZY0PyTEoD1XEKg+K92RC4Q5Z5UFhUgWKkDVdKDaoDkXImj4UdWpAEbCmA0WDoHIHrIg8qAi6PguRC9UvakATstCF5ifVoTllIYCmThXo2jw2gG6DTCQMOBadQmdSHgktjrWR8IHmHeh8joXQOQZRFbqQY13oqkS0Cl2fY5ELzUciyjahCnisA1UzS/fWoQhZ6LiQ1mnEsPDE77NiGOCJZdCDMmJu0OeEYXiK2Cd6lKlhxOtEnK7bwkgtQ7GFAyAY8BTD8Dcab2gsZ+OSp7qEnSOhCFzwFBdAkRQFG61bnuCuBbtAmuUDeD1O1fNgvaOEhRrw5x8nDP4C20uUYuZzEzi7umPh7uoMaH6ZoXSvvh0COG/3rm9ub2+ue+1zAEdrr2mybKnqQHCqpSw9Yz5vbu7un5zs726a+XnS/QfUNwZ8HxlD9AAAAABJRU5ErkJggg=="},gf3sYyKz:function(e,t,r){e.exports={project:"project__2AM1"}},gh8QIhMV:function(e,t,r){"use strict";r.r(t),r.d(t,"throwError",function(){return i});var n=r("WlCGY8BB"),o=r("LJY3djHV");function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{n.error(e)}catch(r){Object(o.nativeConsole)("error")(r)}}},gorePX7J:function(e,t,r){"use strict";var n,o=r("6SzIBtPz"),i=r("fio7jWQ0"),a=function(e){return"TASK_BOARD_UI/"+e},s={initialize:Object(o.a)(a("INITIALIZE")),withLeftPanel:Object(o.a)(a("WITH_LEFT_PANEL")),withLeftPanelFolded:Object(o.a)(a("WITH_LEFT_PANEL_FOLDED")),toggleIndicator:Object(o.a)(a("TOGGLE_INDICATOR")),destroy:Object(o.a)(a("WITH_LEFT_PANEL_DESTROY"))},u=r("mrSGxOB2"),c=r("HYobN8SQ"),l=r("a+N5u/Cl"),p=r.n(l),f=r("sa1Ed382"),d=r("oRqJmROU"),g={withLeftPanel:!1,withLeftPanelFolded:!1,identityKey:""},h=c.namespace("taskBoardLeftPanel"),m=function(e){return e},y=Object(o.b)(((n={})[""+s.initialize]=function(e,t){var r=t.payload,n=r.identityKey,o=r.withLeftPanelFolded,i=void 0!==o&&o,a=r.withLeftPanel,s=void 0===a||a,c=m(n),l=h.get(c)||{};p.a.defaults(l,{withLeftPanelFolded:i});var f=u.a({},l,{identityKey:n,withLeftPanel:s});return u.a({},e,f)},n[""+s.withLeftPanel]=function(e,t){return u.a({},e,{withLeftPanel:t.payload})},n[""+s.withLeftPanelFolded]=function(e,t){return u.a({},e,{withLeftPanelFolded:t.payload})},n[""+s.toggleIndicator]=function(e){var t=e.identityKey,r=!e.withLeftPanelFolded;if(t){var n=m(t),o=h.get(n)||{};o.withLeftPanelFolded=r,h.set(n,o)}return u.a({},e,{withLeftPanelFolded:r})},n[""+s.destroy]=function(){return g},n),g),v=function(e,t){return e.ofType(s.toggleIndicator.toString()).filter(d.a).do(function(e){var r=e.payload.useIndicator,n=t.getState().ui.board.taskBoard.withLeftPanelFolded;f.gta.event({action:(n?"hide":"show")+" sidebar",control:r?"sidebar":"grouptitle"})}).mapTo(Object(i.noOpAction)())};function b(e,t,r){void 0===e&&(e="");var n=e.match(/^(-?\d+)(\D*)$/);if(!n)return"";var o=u.f(n,3),i=o[1],a=void 0===i?"0":i,s=o[2];return[parseInt(a,10)+t*(r?1:-1),s].join("")}r.d(t,"b",function(){return s}),r.d(t,"a",function(){return 298}),r.d(t,"c",function(){return y}),r.d(t,"e",function(){return v}),r.d(t,"d",function(){return b})},gucFzxrO:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"tap-num-1",use:"tap-num-1-usage",viewBox:"0 0 14 32",content:'<symbol viewBox="0 0 14 32" id="tap-num-1"><path d="M6.672 6.888L3 9.588V5.7L6.672 3h3.672v25.632H6.672z" /></symbol>'});a.a.add(s);t.default=s},"gw+SRCSr":function(e,t,r){e.exports=r.p+"images/testplan-1.094679cf.png"},hGNqppva:function(e,t,r){var n,o,i,a,s,u={}.hasOwnProperty;a=r("a+N5u/Cl"),n=r("FeA/FqsW"),o=r("3eMzznN/"),i=r("vmWJWrVe"),s=r("gh8QIhMV").throwError,$("body"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,i),t.prototype.viewName="PopoverView",t.prototype.hotkeys={esc:function(e){return e.preventDefault(),this.hide()}},t.prototype.initialize=function(e){if(this.hidePopoverView=this._hidePopoverView.bind(this),e.$toggler&&"function"==typeof this.render)return this.options=a.extend({animation:!1,container:"body",hideDelay:218,html:!0,placement:"bottom",showHeader:!0,template:n(),title:this.popoverTitle,trigger:"click",viewport:{padding:20,selector:"body"},zIndex:999},e),e.width&&(this.width=e.width),this.$toggler=$(e.$toggler),this.setup().delegatePopoverEvents(),this.subMenus=[],this._onBindedClickBackHandler=this.onClickBackHandler.bind(this),this},t.prototype.setup=function(){return this.$toggler.popover(this.options),this.popover=this.$toggler.data("bs.popover"),this.$popover=this.popover.tip(),this.$content=this.$popover.find(".popover-content"),this.$title=this.$popover.find(".popover-title"),this.setElement(this.$content),this.width&&this.$popover.width(this.width),this.className&&this.$popover.addClass(this.className),this.$popover.css("z-index",this.options.zIndex),this},t.prototype._hidePopoverView=function(){if(!1===this.isHidden)return this.hide()},t.prototype.delegatePopoverEvents=function(){var e;return this.$popover.find(".popover-close-handler").click((e=this,function(){return e.hide()})),this.$toggler.on("shown.bs.popover",function(e){return function(){return e.onShown()}}(this)),this.$toggler.on("hidden.bs.popover",function(e){return function(){return e.onHidden()}}(this)),this},t.prototype.delegateOutsideEvents=function(){return this._cancelOutside=this.$popover.handleClickOutside((e=this,function(t){var r;if(r=e.$toggler[0],e._cancelOutside&&t.target!==r&&!$.contains(r,t.target))return a.delay(function(){return e.hide()},e.options.hideDelay)}),"click.popover");var e},t.prototype.undelegateOutsideEvents=function(){return"function"==typeof this._cancelOutside&&this._cancelOutside(),this._cancelOutside=null},t.prototype.show=function(){return this.popover.show(),this},t.prototype.onShown=function(){var e;return"function"==typeof this.reset&&this.reset(),this.delegateOutsideEvents(),this.$toggler.addClass("open"),this.returnMainMenu(),!0!==this.options.showHeader&&(this.$header=this.$popover.find(".popover-header"),this.$header.hide()),this.fixPosition(),this.delegateEvents(),"function"==typeof(e=this.options).onShown&&e.onShown(),this.setupHotKey(),this.$(".thin-scroll").on("mousewheel",o.mousewheel),this},t.prototype.setupHotKey=function(){var e;return(null!=(e=this.$popover)?e.is(":hidden"):void 0)||t.__super__.setupHotKey.apply(this,arguments),this},t.prototype.hide=function(){var e;return null!=(e=this.popover)&&e.hide(),this},t.prototype.onHidden=function(){var e,t,r,n;return null!=(t=this.$(".thin-scroll"))&&t.off("mousewheel"),this.removeHotKey(),null!=(r=this.$popover)&&r.detach(),null!=(n=this.$toggler)&&n.removeClass("open"),"function"==typeof(e=this.options).onHidden&&e.onHidden(),this},t.prototype.enterSubMenu=function(e,t){var r;return e=e.trim(),this.$popover.addClass("in-submenu"),e&&this.$title.text(e),this.$popover.find(".popover-back-handler").one("click",(r=this,function(e){return e.stopPropagation(),r.returnMainMenu()})),t()},t.prototype.returnMainMenu=function(e){var t;return this.$popover.removeClass("in-submenu"),(null!=(t=this.options.title)?t.trim():void 0)&&this.$title.text(this.options.title),"function"==typeof this.render&&this.render(),this},t.prototype.fixPosition=function(){var e,t,r,n,o,i;return null!=(r=this.$popover)&&r.hasClass("in")&&this.$popover.parent()[0]===document.body?(i=window.innerHeight,n=this.$popover[0].getBoundingClientRect(),o=this.$toggler[0].getBoundingClientRect(),t=document.documentElement.scrollTop||document.body.scrollTop,e=this.options.withChat?n.bottom+62:n.bottom,n.top<=0?(this.$popover.removeClass("top").addClass("bottom"),this.$popover.css("top",t+o.bottom)):e>=i&&!this.options.keepPositionOnBottom?(this.$popover.removeClass("bottom").addClass("top"),this.$popover.css("top",t+o.top-n.height)):n.top<o.top&&n.bottom<i&&n.bottom>o.bottom&&o.bottom+n.height<i&&this.$popover.css("top",t+o.bottom),this.options.fixed?(n=this.$popover[0].getBoundingClientRect(),this.$popover.css({position:"fixed",top:n.top,left:n.left})):void 0):this},t.prototype.remove=function(){var e,r,n;return $("[data-toggle=dropdown]").off("click.bs.dropdown",this.hidePopoverView),this.$el&&this.onHidden(),null!=(e=this.$popover)&&e.remove(),null!=(r=this.$toggler)&&r.off(".popover"),null!=(n=this.popover)&&n.destroy(),t.__super__.remove.apply(this,arguments)},t.prototype.onClickBackHandler=function(e){return e.stopPropagation(),this.enterPreviousMenu()},t.prototype.enterNextMenu=function(e,t){if(null!=e&&null!=t)return e=e.trim(),this.subMenus.push({callback:t,title:e}),this.$title.text(e),this.$popover.hasClass("in-submenu")||this.$popover.addClass("in-submenu"),this.$popover.find(".popover-back-handler").off("click",this._onBindedClickBackHandler).one("click",this._onBindedClickBackHandler),t()},t.prototype.enterPreviousMenu=function(){var e;if(this.subMenus.pop(),this.subMenus.length>0&&(e=this.subMenus[this.subMenus.length-1]),null==e)return this.subMenus=[],this.returnMainMenu();try{return this.$title.text(e.title),this.$popover.find(".popover-back-handler").off("click",this._onBindedClickBackHandler).one("click",this._onBindedClickBackHandler),e.callback()}catch(t){return s(t)}},t}()},hjlWMrAw:function(e,t){},ho6nsCmg:function(e,t,r){e.exports=r.p+"images/taskUniqueId-poster.aea3d387.png"},"i/yG9/km":function(e,t,r){"use strict";r.d(t,"c",function(){return b}),r.d(t,"d",function(){return _}),r.d(t,"a",function(){return E}),r.d(t,"f",function(){return O}),r.d(t,"e",function(){return w}),r.d(t,"b",function(){return I});var n,o=r("mrSGxOB2"),i=r("6SzIBtPz"),a=r("NOGqly5s"),s=r("4c1CS0b3"),u=r("eO8HY5nz"),c=r("wXiA47ap"),l=r("GESwhXbR"),p=r("sa1Ed382"),f=r("tLZJUYWX"),d=r.n(f),g=r("s0r7VfKc"),h=r("wu4EEviu"),m=r("2qRnoGmE"),y={hasMore:!1,totalSize:0,testhubs:null,testhubPagination:null,creatorOpened:!1},v=function(e){return"TESTHUB_APP/"+e},b=Object(i.a)(v("EXIT_TESTHUBS")),_=Object(i.a)(v("FETCH_TESTCASE_LIBRARIES")),S=Object(i.a)(v("FETCH_TESTCASE_LIBRARIES_SUCCESS")),T=Object(i.a)(v("FETCH_TESTCASE_LIBRARIES_FAILED")),E=Object(i.a)(v("CREATE_TESTHUB")),O=Object(i.a)(v("SET_CREATOR_OPENED_STATE")),w=Object(i.b)(((n={})[""+S]=function(e,t){var r=t.payload,n=r.result,i=r.hasMore,a=r.totalSize,s=r.pagination;return o.a({},e,{hasMore:i,totalSize:a,testhubs:n,testhubPagination:s})},n[""+T]=function(e){return o.a({},e,{testhubs:[]})},n[""+O]=function(e,t){return o.a({},e,{creatorOpened:t.payload})},n[""+b]=function(){return y},n),y),C=function(e){var t=e.getState().router.location;return Object(u.matchPath)(t.pathname,{path:c.a.base()}).params.organizationId},I=Object(a.a)(function(e,t){return e.ofType(""+_).switchMap(function(){var r=C(t),n=t.getState().ui.testhubApp.testhubPagination||g.default.getTesthubs(r,{useCache:!0});return n.next().update$.takeUntil(e.ofType(""+b)).map(function(e){return S(o.a({},e,{pagination:n}))}).catch(function(){return s.Observable.of(T())})})},function(e,t){return e.ofType(""+E).switchMap(function(e){var r=C(t),n=e.payload;return g.default.createTesthub(r,n).do(function(e){p.router.navigate(c.a.testhub({params:{organizationId:r}},e._id),{trigger:!0}),h.join(m.HOST+"/testhub/api/testhubs/"+e._id),l.Toast.success({message:d.a.get("testhub.creator.success")})}).map(function(){return O(!1)})})})},iIRfvRcY:function(e,t,r){e.exports={progress:"progress__3onl"}},iV9vK7yl:function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"b",function(){return u});var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r("D5oRvhYV"),a=r("nlT03vip"),s=function(e){return e===i.a.NEW},u=function(){var e=n.f(Object(o.useState)(!1),2),t=e[0],r=e[1];return Object(o.useEffect)(function(){var e=Object(a.a)().subscribe(function(e){return r(s(e))});return function(){return e.unsubscribe()}},[]),t}},iiTVEhTg:function(e,t,r){var n,o,i,a,s,u,c,l,p,f,d,g,h={}.hasOwnProperty,m=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};u=r("a+N5u/Cl"),f=r("sa1Ed382"),c=r("2qRnoGmE"),i=r("wd/RKGTj"),o=r("qHH6+g6Q"),s=r("HYobN8SQ"),n=r("nDsjpj50").BehaviorSubject,a=r("4c1CS0b3").Observable,p=r("ctsD9mWH").store,g=r("QHFeugHF").updatePreference,l=s.namespace("preference"),d=function(e){var t,r;return(r=location.host.split(".").slice(-2))[1]>=0||(t=r.join(".")),$.removeCookie(c.LANGUAGE_COOKIE),$.cookie(c.LANGUAGE_COOKIE,e,{domain:c.SESSION_DOMAIN||t||location.host,expires:7,path:"/"})},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o),t.prototype.name="preference",t.prototype.urlRoot="preferences",t.prototype.defaults={portalMode:"grid",tagProjectsMode:"grid",projectOrder:"name",tagProjectsOrder:"name",libraryMode:"list",memberBarMode:"mini",inboxSortMode:"updated",dateFormat:"relative",myTaskExecuteSort:"dueDate",myTaskCreatedSort:"dueDate",myTaskInvolvesSort:"dueDate",hideDoneTasks:0,postMode:"html",activityMode:"text",quickCreateTask:!1,quickReply:!1,tips:{}},t.prototype.language$=new n(void 0),t.prototype.initialize=function(){var e,r;return this.user=f.user.toJSON(),this.localCacheId=this.get("_userId"),(e=l(this.localCacheId))&&this.set(e),p.dispatch(g(this.toJSON())),this.on("change",(r=this,function(){var e;return e=r.toJSON(),p.dispatch(g(e)),l(r.localCacheId,e)})),t.__super__.initialize.apply(this,arguments)},t.prototype.toggleCollectBehavior=function(e){var t;if(e!==this.get("collectBehaviorLogs"))return t={collectBehaviorLogs:e},this.save(t,{attrs:t}),e},t.prototype.togglePortalMode=function(e){var t;if(e!==this.get("portalMode"))return f.user.get("isGhost")?this.set("portalMode",e):(t={portalMode:e},this.save(t,{attrs:t})),e},t.prototype.toggleTagProjectsMode=function(e){var t;return t={tagProjectsMode:e},this.save(t,{attrs:t}),this.get("tagProjectsMode")},t.prototype.toggleLibraryMode=function(e){var t;if(e!==this.get("libraryMode"))return t={libraryMode:e},this.save(t,{attrs:t}),e},t.prototype.toggleSortOrder=function(e,t){var r,n,o,i;return(n=this.get(e).match(/^([a-z]*)(Asc|Desc)$/))&&(n[0],i=n[1],o=n[2]),(r={})[e]=t+(i===t?"Asc"===o?"Desc":"Asc":o),this.save(r,{attrs:r})},t.prototype.toggleLibraryOrder=function(e){return this.toggleSortOrder("libraryOrder",e)},t.prototype.toggleMyFileOrder=function(e){return this.toggleSortOrder("myFileOrder",e)},t.prototype.toggleProjectOrder=function(e){var t;return t={projectOrder:e},this.save(t,{attrs:t}),this.get("projectOrder")},t.prototype.toggleTagProjectsOrder=function(e){var t;return t={tagProjectsOrder:e},this.save(t,{attrs:t}),this.get("tagProjectsOrder")},t.prototype.togglePrivacyPolicyAccepted=function(e){var t;return t={acceptPrivacyPolicy:e},this.save(t,{attrs:t}),this.get("acceptPrivacyPolicy")},t.prototype.getSortMethod=function(e){var t,r,n;return n="updated",!0,(t=this.get(e).match(/^([a-z]*)(Asc|Desc)$/))&&(t[0],n=t[1],r=t[2]),{sortMethod:n,asc:"asc"===r.toLowerCase()}},t.prototype.toggleMemberBarMode=function(e){var t;return null==e&&(e="full"===this.get("memberBarMode")?"mini":"full"),f.user.get("isGhost")?this.set("memberBarMode",e):(t={memberBarMode:e},this.save(t,{attrs:t})),e},t.prototype.quickReply=function(e){var t;return t={quickReply:!!e},null!=e&&this.save(t,{attrs:t}),this.get("quickReply")},t.prototype.quickCreateTask=function(e){var t;return t={quickCreateTask:!!e},null!=e&&this.save(t,{attrs:t}),this.get("quickCreateTask")},t.prototype.togglePostMode=function(e){var t;return t={postMode:e},e&&this.save(t,{attrs:t}),this.get("postMode")},t.prototype.toggleInboxSortMode=function(e){var t;return t={inboxSortMode:e},this.save(t,{attrs:t}),this.get("inboxSortMode")},t.prototype.toggleMyTaskExecuteSort=function(e){var t;return t={myTaskExecuteSort:e},this.save(t,{attrs:t}),this.get("myTaskExecuteSort")},t.prototype.toggleMyTaskCreatedSort=function(e){var t;return t={myTaskCreatedSort:e},this.save(t,{attrs:t}),this.get("myTaskCreatedSort")},t.prototype.toggleMyTaskInvolvesSort=function(e){var t;return t={myTaskInvolvesSort:e},this.save(t,{attrs:t}),this.get("myTaskInvolvesSort")},t.prototype.updateEmailsSetting=function(e){return this.save(null,{attrs:{emails:e}})},t.prototype.updateNotificationsSetting=function(e){return this.save(null,{attrs:{notifications:e}})},t.prototype.updateFilterSetting=function(e){var t,r;if(e)return e.url=this.urlRoot+"/selections",e.attrs={selects:e.selects,_projectId:e._projectId},t=e.success,e.success=(r=this,function(e){var n,o,i,a,s;return n=(i=null!=e?e:{})._projectId,s=i.selects,o=r.get("selections"),a=u.clone(o),n&&(a[n]=s),r.set({selections:a}),"function"==typeof t?t():void 0}),this.sync("update",this,e)},t.prototype.tasklistSortInProject=function(e,t,r){var n,o;return null==r&&(r={}),o=this.get("tasklist")||{},this.get("tasklist")||this.set("tasklist",o),u.isArray(t)&&!u.isEqual(t,o[e])?((n={})[e]=t,this.saveAttr("tasklist",n,r),t):o[e]||[]},t.prototype.updateFeatureGuide=function(e,t){var r;if(null==t&&(t={}),!this.user.isGhost)return(r=u.clone(this.get("tips")))[e]=!0,t.url=this.url()+"/tips",this.save({tips:r},t),this},t.prototype.patchTips=function(e){return this.sync("patch",this,{url:this.urlRoot+"/tips",attrs:{tips:e},success:(t=this,function(e){return t.set("tips",e)})});var t},t.prototype.patchTableHeaders=function(e){return new Promise((t=this,function(r,n){return t.sync("patch",t,{url:t.urlRoot+"/table-headers",attrs:{tableHeaders:e},success:function(n){return t.set("tableHeaders",n),r(u.pick(n,u.keys(e)))},error:n})}));var t},t.prototype.putTableHeaders=function(e){return new Promise((t=this,function(r,n){return t.sync("update",t,{url:t.urlRoot+"/table-headers",attrs:{tableHeaders:e},success:function(e){return t.set("tableHeaders",e.tableHeaders),r(e.tableHeaders)},error:n})}));var t},t.prototype.observeTableHeaders=function(e){return new a((t=this,function(r){var n,o,i;return o=t.removeTableHeadersInTableHeaders(t.get("tableHeaders")||{}),r.next(o[e]),n="change:tableHeaders",i=function(t,n){return r.next(n[e])},t.on(n,i),function(){return t.off(n,i)}}));var t},t.prototype.initLanguage=function(){var e;return e=this.getLanguage(),$("html").attr("lang",e),i.locale({zh:"zh-cn",zh_tw:"zh-tw",en:"en"}[e]||e),this.language$.next(e),d(e),"function"==typeof window.initNwPlugin?window.initNwPlugin(e):void 0},t.prototype.getLanguage=function(){var e,t,r,n;return r={"zh-TW":"zh_tw"},e=c.acceptLanguages,n=c.LANGUAGES,t=tb_i18n.guessLanguage(e,n,r),f.user.getLanguage()||this.get("language")||t},t.prototype.getLanguage$=function(){return this.language$.filter(function(e){return void 0!==e}).distinctUntilChanged()},t.prototype.setLanguage=function(e){return e===this.getLanguage()?Promise.reject():m.call(c.LANGUAGES,e)<0?Promise.reject():f.user.updateLanguage(e).then((t=this,function(){return t.initLanguage(),d(e)}));var t},t.prototype.getDateFormat=function(){return this.get("dateFormat")},t.prototype.setDateFormat=function(e){var t;return e!==this.getDateFormat()&&(t={dateFormat:e},this.save(null,{attrs:t}),f.APP.reset(),f.router.loadUrl())},t.prototype.getActivityMode=function(){return this.get("activityMode")},t.prototype.setActivityMode=function(e){var t;return t={activityMode:e},this.save(null,{attrs:t})},t.prototype.getIsUsePanelToOpenTask=function(){return"slide"===this.get("openWindowMode")},t.prototype.setOrganizationWorkspace=function(e){return this.updateLastWorkspace(e)},t.prototype.updateLastWorkspace=function(e,t){if(null==t&&(t={}),!this.user.isGhost&&e!==this.get("lastWorkspace")&&e)return this.set("lastWorkspace",e),this.save(null,{attrs:{lastWorkspace:e},url:this.urlRoot+"/last-workspace"}),this},t.prototype.isPersonalWorkspace=function(){return"personal"===this.get("lastWorkspace")},t.prototype.preferenceTempCache=function(e,t){return null!=t&&l("temp_"+e,t),l("temp_"+e)},t.prototype.cacheExecutorPreference=function(e){var t;if(e===f.user.id||!e)return t=e===f.user.id?f.user.id:null,this.preferenceTempCache("task_creator",{_executorId:t})},t.prototype.removeTableHeadersInTableHeaders=function(e){var t;return e&&e.tableHeaders?(t=u.omit(e,"tableHeaders"),this.putTableHeaders(t),this.set("tableHeaders",t),t):e},t}()},ikNQxojh:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n={en:function(){return r.e("locale_en").then(r.bind(null,"qE6LFSj3"))},zh:function(){return r.e("locale_zh").then(r.bind(null,"Fcnu8GIE"))},zh_tw:function(){return r.e("locale_zh-tw").then(r.bind(null,"hX82SoLl"))}};function o(e){return n[e]()}},ioHUo57O:function(e,t,r){e.exports={"common-groups":"common-groups__3ybD","common-groups-title":"common-groups-title__12m6","common-groups-create-link":"common-groups-create-link___HhG"}},ioaOqjIU:function(e,t,r){var n,o,i,a,s={}.hasOwnProperty;n=r("VuB9cZyl"),i=r("FoX6irlC"),o=r("+BDmEJp8"),a=r("gBe2F1Rz"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="tasklists",t.prototype.model=i,t.prototype.boundToObjectType="project",t.prototype.listen=function(){return t.__super__.listen.apply(this,arguments),this.on("remove",function(e){var t;if(t=o.find(e.id))return t.each(function(e){var t;return null!=(t=a.find(e.id))?t.trigger("resetCollection"):void 0})})},t}()},ipOL5xdz:function(e,t,r){e.exports=r.p+"images/processon-poster.e73d00cf.png"},itycypeK:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"call",use:"call-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="call"><path fill="#77C2F8" fill-rule="evenodd" d="M2 0h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm4.221 7.774a5.339 5.339 0 0 0-.1-.178l-.15-.357c.05-.048.101-.1.16-.16l.334-.334.073-.071c.242-.239.36-.415.381-.69.016-.21-.011-.36-.094-.665l-.014-.052a2.438 2.438 0 0 1-.042-.177 10.31 10.31 0 0 1-.163-1.218c-.033-.479-.334-.798-.81-.872l-1.805.014a.73.73 0 0 0-.675.284.808.808 0 0 0-.226.575c0 1.266.232 2.46.697 3.579a9.737 9.737 0 0 0 1.92 2.899c.783.808 1.727 1.457 2.83 1.946a8.523 8.523 0 0 0 3.5.7c.218.02.445-.06.62-.235.173-.213.254-.413.254-.624v-1.537c0-.542-.263-.937-.79-1.058a5.964 5.964 0 0 0-.486-.09 13.158 13.158 0 0 1-.917-.187 2.391 2.391 0 0 1-.157-.044 1.697 1.697 0 0 0-.408-.089c-.414-.03-.656.143-.993.542l-.072.086c-.034.04-.06.069-.084.094a3.703 3.703 0 0 0-.277.325 11.44 11.44 0 0 1-.74-.491c-.156-.111-.301-.228-.437-.352a7.198 7.198 0 0 1-.412-.412 4.456 4.456 0 0 1-.395-.412 7.178 7.178 0 0 1-.353-.456c-.05-.071-.089-.136-.169-.283z" /></symbol>'});a.a.add(s);t.default=s},j5JlF2rJ:function(e,t,r){"use strict";r.r(t),r.d(t,"clickCustomViewGta",function(){return i}),r.d(t,"sortCustomViewGta",function(){return a}),r.d(t,"deleteCustomViewGta",function(){return s}),r.d(t,"deleteCustomViewSuccessGta",function(){return u}),r.d(t,"createCustomViewGta",function(){return c}),r.d(t,"saveCustomViewGta",function(){return l}),r.d(t,"savedCustomViewGta",function(){return p}),r.d(t,"editCustomViewFilterGta",function(){return f}),r.d(t,"editCustomViewNameGta",function(){return d}),r.d(t,"editCustomViewMenuGta",function(){return g});var n=r("sa1Ed382"),o=r("B9Qi/5SX"),i=function(e,t){n.gta.event({action:"switch view",control:t?"sidebar":"dropdown",segment:"taskspage",type:function(){if(o.b.checkId(e._id))return"all";switch(e.icon){case"taskToday":return"today";case"taskUndone":return"unfinished";case"taskDone":return"done";case"taskNotAssigned":return"unassigned";case"taskMyExecuted":return"me";default:return"custom"}}()})},a=function(){n.gta.event({action:"order view",method:"drag",control:"Task Group Menu"})},s=function(){n.gta.event({action:"delete view",control:"Task Group Menu"})},u=function(){n.gta.event({action:"deleted view",control:"Task Group Menu"})},c=function(){n.gta.event({action:"create view",control:"Task Group Menu"})},l=function(){n.gta.event({action:"save view",control:"Task Group Menu",type:"create"})},p=function(){n.gta.event({action:"saved view",control:"Task Group Menu",type:"create"})},f=function(){n.gta.event({action:"edit view config",control:"Task Group Menu"})},d=function(){n.gta.event({action:"edit view name",control:"Task Group Menu"})},g=function(){n.gta.event({action:"view menu",control:"Task Group Menu"})}},j6KeIaDK:function(e,t,r){"use strict";r.d(t,"b",function(){return f}),r.d(t,"a",function(){return d});var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r.n(o),a=r("TSYQbtd+"),s=r.n(a),u=r("GESwhXbR"),c=r("Mnrsus5c"),l=r.n(c),p=i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},i.a.createElement("path",{d:"M12.7 7.9L10 10.6 7.3 7.9c-.3-.3-.7-.3-1 0-.3.3-.3.7 0 1l3.2 3.2c.3.3.7.3 1 0l3.2-3.2c.1-.1.2-.3.2-.5s-.1-.4-.2-.5c-.3-.2-.8-.2-1 0z"}));function f(e){var t="string"==typeof e.leftIcon?i.a.createElement(u.Icon,{name:e.leftIcon}):e.leftIcon,r=s()(l.a["board-view-mode-trigger"],{active:e.isActive},e.className),o=i.a.createElement("span",{className:"mode-icon"},p);return i.a.createElement("div",n.a({className:r},e.eventHandlers),t,e.name&&i.a.createElement("span",{className:"mode-name"},e.name),e.rightIcon||o)}function d(e){var t=e.hasFilters&&i.a.createElement(u.DotBadge,null)||i.a.createElement(i.a.Fragment,null);return f({className:s()(l.a["filter-trigger"],e.cls),leftIcon:t,name:e.name,eventHandlers:e.eventHandlers,isActive:e.isActive})}},"jEqYcS/s":function(e,t,r){"use strict";r.d(t,"n",function(){return u}),r.d(t,"a",function(){return c}),r.d(t,"m",function(){return p}),r.d(t,"i",function(){return d}),r.d(t,"j",function(){return g}),r.d(t,"h",function(){return h}),r.d(t,"b",function(){return m}),r.d(t,"k",function(){return y}),r.d(t,"g",function(){return v}),r.d(t,"f",function(){return b}),r.d(t,"c",function(){return _}),r.d(t,"d",function(){return S}),r.d(t,"l",function(){return T}),r.d(t,"e",function(){return O});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r("tLZJUYWX"),a=r("XArW7AVN"),s=r("V6edIaEd"),u=function(e){return e.map(function(e){return n.a({},e,{id:e._customfieldId,isOfficial:!1,fieldType:"customfield",choices:n.h(e.choices),categoryIds:n.h(e.categoryIds)})})},c=function(e){return a.c.indexOf(e)>-1},l=function(){return{note:{iconName:"book",title:i.get("note")},priority:{iconName:"circle",title:i.get("priority")},tag:{iconName:"tag",title:i.get("tags")},worktimes:{iconName:"tachometer",title:i.get("worktime")},storyPoint:{iconName:"story-points",title:"Story Points"},taskProgress:{iconName:"normal",title:i.get("taskProgress")},sprint:{iconName:"sprint",title:i.get("sprint")},location:{iconName:"location",title:i.get("event.creator.location.placeholder")},content:{iconName:"book",title:i.get("note")},rating:{iconName:"star",title:i.get("note")}}},p=function(e,t){void 0===t&&(t={});var r="task"===e?a.e:a.b,n=[];return t.isSprintEnabled||n.push("sprint"),r.filter(function(e){return!o.contains(n,e)}).map(function(e){return{id:e,isOfficial:!0,fieldType:e,name:g(e),description:"",choices:[],categoryIds:[]}})},f=o.mapObject(l(),function(e){return e.iconName});function d(e){return f[e]}var g=function(e){return l()[e].title},h=function(e){return l()[e]},m=function(e){return a.d.indexOf(e)>-1},y=function(e){var t=[];switch(e.proTemplateConfigType){case"story":t=["story"];break;case"bug":t=["bug"];break;case"subtask":default:t=[]}return e.isSprintEnabled&&t.push("sprint"),t},v=function(e){var t=e.fieldType;return m(t)?h(t):c(t)?{iconName:Object(s.castCustomFiledTypeToIconName)(e),title:e.name}:{iconName:"",title:""}};function b(e,t,r){return r?d(e):Object(s.castCustomFiledTypeToIconName)(t)}function _(e,t,r){void 0===r&&(r={});var n=u(e),o=p(t,{isSprintEnabled:r.isSprintEnabled});return n.concat(o)}var S=function(e){var t=new Map,r={};return e.forEach(function(e){var n=o.pick(e,"displayed","required","default","allowedRoleIds","allowedActors");c(e.fieldType)?(t.set(e._customfieldId,e._customfieldentityId),r[e._customfieldId]=n):m(e.fieldType)&&(t.set(e.fieldType,e._customfieldentityId),r[e.fieldType]=n)}),{usedFieldIds:t,usedFieldsAttrMap:r}},T=function(e,t){var r={};return o.union(o.keys(e),o.keys(t)).forEach(function(n){var i=e[n],a=t[n]||{};if(i){var s=null===a.allowedRoleIds?null:null===i.allowedRoleIds?a.allowedRoleIds:o.union(i.allowedRoleIds,a.allowedRoleIds);r[n]=Object.assign(i,{allowedRoleIds:s,allowedActors:o.union(a.allowedActors,i.allowedActors)})}else r[n]=a}),r},E={event:["creator"],task:["executor","creator"],project:[]},O=function(e){return E[e]}},jMCr0Gn6:function(e,t,r){e.exports=r.p+"images/weibo-poster.7dd4ed89.png"},jPXpMdIv:function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return a}),r.d(t,"h",function(){return s}),r.d(t,"e",function(){return u}),r.d(t,"f",function(){return c}),r.d(t,"d",function(){return l}),r.d(t,"c",function(){return p}),r.d(t,"i",function(){return f}),r.d(t,"g",function(){return d}),r.d(t,"j",function(){return g});var n=r("mrSGxOB2"),o=r("tLZJUYWX"),i=2,a=6,s=function(e,t){return[void 0===e?i:e,void 0===t?a:t]},u=function(e,t,r){var o=n.f(s(t,r),2);return function(e,t){var r=n.f(s(e,t),2),o=r[0],i=r[1];return new RegExp("^[A-z]{"+o+","+i+"}$")}(o[0],o[1]).test(e)},c=function(e,t){return u(e,0,t)},l=function(e,t,r){return"involves"!==e||t.indexOf(r)>=0},p=function(e,t){return void 0===e&&(e=[]),!t||e.indexOf(t)>=0?n.h(e):e.concat([t])},f=function(e,t,r,n){var i,a={name:o.get("task.detail.no.executor")};return e?Array.isArray(t)&&(i=t.find(function(t){return t._id===e}))?i:(i=n&&n.get(e))?i:(i=r&&r.get("executor"))||a:a},d=function(e,t){var r,n;return r=e.priority||0,(n=t.priority||0)-r?n-r:(r=new Date(e.dueDate||null).valueOf()||Number.MAX_VALUE)-(n=new Date(t.dueDate||null).valueOf()||Number.MAX_VALUE)?r-n:(r=new Date(e.startDate||null).valueOf()||Number.MAX_VALUE)-(n=new Date(t.startDate||null).valueOf()||Number.MAX_VALUE)?r-n:(r=new Date(e.created||null).valueOf()||Number.MAX_VALUE)-(n=new Date(t.created||null).valueOf()||Number.MAX_VALUE)};function g(e,t,r){return"members"===e.visible||"involves"===e.visible&&e.involveMembers&&e.involveMembers.indexOf(t)>=0||null===e.visible&&Boolean(e.content)||e._projectId&&r&&r(e._projectId)||!1}},"jpEw/7nX":function(e,t,r){var n,o,i,a={}.hasOwnProperty;o=r("qHH6+g6Q"),i=r("wu4EEviu"),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o),t.prototype.name="archive",t.prototype.urlRoot="archives",t.prototype.initialize=function(e,t){var r,n,o;return o=e.boundToObjectType,r=e._id.split("_archived")[0],n=e._projectId,"task"!==o&&"post"!==o&&"event"!==o&&"work"!==o&&"entry"!==o&&"tag"!==o&&"collection"!==o&&"tasklist"!==o&&"testcase"!==o||i.on(":destroy:"+o+"/"+r,function(){return i.trigger(":remove:archives/"+n,""+r)}),this},t.prototype.getObjectUrl=function(e){return function(){switch(this.get("boundToObjectType")){case"task":return"tasks";case"post":return"posts";case"work":return"works";case"event":return"events";case"tag":return"tags";case"tasklist":return"tasklists";case"collection":return"collections";case"entry":return"entries";case"testcase":return"testcases"}}.call(this)+"/"+this.get("_boundToObjectId")},t.prototype.unarchiveObject=function(e){var t,r;return e||(e={}),e.url=this.getObjectUrl()+"/archive","testcase"!==this.get("boundToObjectType")&&(e.attrs={_stageId:e._stageId?e._stageId:void 0,_taskId:e._taskId?e._taskId:void 0,_sprintId:e._sprintId||null}),t=e.success||function(){},e.success=(r=this,function(){var e;return null!=(e=r.collection)&&e.remove(r),t(r)}),this.sync("delete",this,e),this},t.prototype.deleteObject=function(e){var t,r;return e||(e={}),e.url=""+this.getObjectUrl(),e.attrs={},t=e.success||function(){},e.success=(r=this,function(){var e;return null!=(e=r.collection)&&e.remove(r),t(r)}),this.sync("delete",this,e),this},t}(),e.exports=n},"jy/pKeSr":function(e,t,r){"use strict";r.d(t,"a",function(){return g});var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r.n(o),a=r("TSYQbtd+"),s=r.n(a),u=r("tLZJUYWX"),c=r.n(u),l=r("a+N5u/Cl"),p=r("GESwhXbR"),f=r("KrjRt4fZ"),d=20,g=function(e){function t(t){var r=e.call(this,t)||this;return r.rootRef=i.a.createRef(),r.inputRef=i.a.createRef(),r.onVisibleChange=function(e){r.resetInitState(),r.props.onModalVisibleChange(e)},r.onFocusAtEnd=function(){var e=r.state.name.length;r.inputRef.current.focus(),r.inputRef.current.setSelectionRange(e,e)},r.onKeyDown=function(e){13===e.which&&(e.stopPropagation(),e.preventDefault(),r.onSave())},r.onInputChange=function(e){var t=e.target.value,n=t.trim().length>d;r.setState({name:t,hasError:n})},r.onSave=function(){var e=r.state.name.trim();e&&!r.state.hasError&&(r.props.onSave(e),r.resetInitState())},r.modalMountIn=function(){return r.rootRef.current||document.body},r.state={name:t.name||"",hasError:!1},r}return n.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.name!==this.props.name&&this.setState({name:e.name||""})},t.prototype.componentDidUpdate=function(e){var t=this;!1===e.modalOpened&&!0===this.props.modalOpened&&Object(l.delay)(function(){return t.onFocusAtEnd()},200)},t.prototype.resetInitState=function(){this.setState({name:this.props.name||"",hasError:!1})},t.prototype.renderSeparator=function(){return i.a.createElement("div",{className:"modal-separator"},i.a.createElement(p.Separator,null))},t.prototype.renderSaveButton=function(){var e=!!this.state.name&&!this.state.hasError;return i.a.createElement("div",{className:f["modal-save"]},i.a.createElement(p.Button,{disabled:!e,onClick:this.onSave},c.a.get("save")))},t.prototype.renderError=function(){return i.a.createElement("div",{className:f["modal-error-hint"]},i.a.createElement(p.Icon,{name:"circle-remove"}),i.a.createElement("span",null,c.a.get("name.max.length.error",d)))},t.prototype.renderEditName=function(){var e=this.state.hasError,t=s()(f["edit-name-wrapper"],{"display-error":e}),r="create"===this.props.editMode?c.a.get("custom.view.edit.modal.save.hint"):c.a.get("custom.views.name.title");return i.a.createElement("div",{className:t},i.a.createElement("div",{className:f["item-title"]},r),i.a.createElement("input",{ref:this.inputRef,placeholder:c.a.get("custom.view.edit.name.input.please.enter"),className:"form-control",value:this.state.name,onChange:this.onInputChange,onKeyDown:this.onKeyDown}),e&&this.renderError())},t.prototype.renderModal=function(){var e="edit"===this.props.editMode?c.a.get("custom.views.edit"):c.a.get("custom.views.create"),t=f.modal+" dls-modal-outer-selector";return i.a.createElement(p.Modal,{className:t,titleCls:f["modal-title"],title:e,width:460,mountIn:this.props.shouldLayerNested?this.modalMountIn:void 0,opened:this.props.modalOpened,onVisibleChange:this.onVisibleChange},i.a.createElement("div",{className:f["modal-contents"]},this.renderEditName()),this.renderSeparator(),this.renderSaveButton())},t.prototype.render=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{ref:this.rootRef}),this.renderModal())},t}(i.a.PureComponent)},"kD/XU5AD":function(e,t){},kNfZ2KN4:function(e,t,r){"use strict";var n=r("GESwhXbR"),o=r("sa1Ed382"),i=r("TSYQbtd+"),a=r.n(i),s=r("tLZJUYWX"),u=r.n(s),c=r("q1tIBJhx"),l=r.n(c),p=r("yUvm8b1W"),f=function(e){var t=e.statusName,r=e.statusUpdated,i=e.statusDegree,s=e.content,c=e.className,f=e.projectId,d=e.gotoProject,g=e.full,h=a()(p["status-wrap"],c),m=a()("status-dot",i),y=a()("status-name",i),v=s||u.a.get("project.cluster.status.placeholder"),b=t||function(e){if(e)return u.a.get("project.overview.degree."+e)}(i)||u.a.get("project.cluster.status.placeholder");return l.a.createElement("div",{className:h},l.a.createElement(n.Tooltip,{title:v},l.a.createElement("div",{className:"status",onClick:function(){o.gta.event({action:"view project status",method:"click",projectid:f,type:"project",segment:"project table view",control:g?"full":"table"}),d(f)}},l.a.createElement("div",{className:"status-content"},l.a.createElement("div",{className:m}),l.a.createElement("div",{className:y},b)),s&&l.a.createElement("div",{className:"publish-time"},r))))},d=r("RSFv0j4e"),g={normal:3,risky:2,urgent:1,none:4},h=function(e){return g[e||"none"]},m=function(e,t){return Object(d.a)(h(e.status),h(t.status))};r.d(t,"a",function(){return f}),r.d(t,"b",function(){return m})},kRZr8HQY:function(e,t,r){},kUx8H0Nt:function(e,t,r){"use strict";r.d(t,"f",function(){return f}),r.d(t,"e",function(){return d}),r.d(t,"c",function(){return g}),r.d(t,"b",function(){return h}),r.d(t,"d",function(){return m}),r.d(t,"a",function(){return v});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r("tLZJUYWX"),a=r("wd/RKGTj"),s=r.n(a),u="day|d|week|w|month|M|year|y|hour|h|minute|min|m|second|sec|s",c=/startOf|endOf|now/,l=new RegExp("(start|end)Of\\(\\s*("+u+")\\s*(?:,\\s*(-?\\d*)("+u+")\\s*)?\\)"),p=function(e,t,r,n){return void 0===r&&(r="now()"),void 0===n&&(n=!1),{type:e,min:t,max:r,specific:n}},f=[{type:"days",children:[n.a({},p("today","startOf(d)","endOf(d)")),n.a({},p("beforetoday",null,"endOf(d, -1d)")),n.a({},p("yesterday","startOf(d, -1d)","endOf(d, -1d)")),n.a({},p("past3days","startOf(d, -3d)","endOf(d, -1d)")),n.a({},p("past7days","startOf(d, -7d)","endOf(d, -1d)")),n.a({},p("past30days","startOf(d, -30d)","endOf(d, -1d)")),n.a({},p("past90days","startOf(d, -90d)","endOf(d, -1d)")),n.a({},p("near3days","startOf(d, -2d)","endOf(d)")),n.a({},p("near7days","startOf(d, -6d)","endOf(d)")),n.a({},p("next3days","startOf(d, 1d)","endOf(d, 3d)")),n.a({},p("next7days","startOf(d, 1d)","endOf(d, 7d)"))]},{type:"week",children:[n.a({},p("thisweek","startOf(w)","endOf(w)")),n.a({},p("pastweek","startOf(w, -1w)","endOf(w, -1w)"))]},{type:"month",children:[n.a({},p("thismonths","startOf(M)","endOf(M)")),n.a({},p("pastmonths","startOf(M, -1M)","endOf(M, null, -1M)"))]},{type:"year",children:[n.a({},p("thisyear","startOf(y)","endOf(y)")),n.a({},p("lastyear","startOf(y, -1y)","endOf(y, null, -1y)"))]}];function d(e){var t=e.min,r=e.max,n=o.chain(f).map(function(e){return e.children}).flatten().findWhere({min:t,max:r}).value();return n||!1}function g(e){return o.chain(f).map(function(e){return e.children}).flatten().findWhere({type:e}).value()}function h(e){var t=parseInt(e.replace(/[^0-9]/gi,"")),r=t?e.replace(t.toString(),""):e;return i.get("searcher.filter.date.relative."+r,t)}var m=function(e){var t=l.exec(e);if(t){var r=t[2],n=void 0!==t[3]?parseInt(t[3]):0;return"start"===t[1]?s()().startOf(r).add(n,r):s()().endOf(r).add(n,r)}return s()()},y=function(e){return c.test(e)?s()(m(e)).format("M/D"):s()(e).format("M/D")};function v(e){var t=e.min,r=e.max,n=e.relative;if(d(e))return h(d(e).type);if(t&&r&&c.test(t)&&c.test(r)){var o=m(t),a=m(r);return s()(o).format("M/D")+"  "+s()(a).format("M/D")}return r&&!t?""+i.get("searcher.filter.date.description.end.with")+y(r):!r&&t?""+i.get("searcher.filter.date.description.start.from")+y(t):r&&t?y(t)+"  "+y(r):"null"===n?i.get("searcher.filter.date.not.choice"):r||t||n?i.get("searcher.filter.date.unset"):i.get("searcher.filter.date.relative.all")}},kd9O6c5q:function(e,t,r){e.exports=r.p+"images/tasks-1.2a23ecfe.png"},kdujOLHg:function(e,t,r){e.exports=r.p+"images/shimo-0.d147b17f.png"},ksn0Grpi:function(e,t,r){"use strict";r.r(t),r.d(t,"ToastMessageWithUrl",function(){return f});var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r.n(o),a=r("GESwhXbR"),s=r("sa1Ed382"),u=r("dLlRnP2h"),c=r("mIQGOuVv"),l=r.n(c);function p(e){return function(t){return a.Toast[e]((o=(r=t).onClickUrl||function(){r.url&&Object(u.linkHandler)(void 0,r.url,function(){return s.APP.Float.close()},!0)},c=i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,r.messageTitle),"",i.a.createElement("span",{className:l.a.clickable,onClick:o},r.urlTitle)),r.messageTitle,r.urlTitle,r.url,p=n.g(r,["messageTitle","urlTitle","url"]),n.a({message:c},p)));var r,o,c,p}}var f={error:p("error"),success:p("success"),warning:p("warning")}},lDYZCKQt:function(e,t,r){"use strict";r.d(t,"d",function(){return d}),r.d(t,"e",function(){return g}),r.d(t,"b",function(){return h}),r.d(t,"c",function(){return y}),r.d(t,"a",function(){return v});var n,o=r("mrSGxOB2"),i=r("6SzIBtPz"),a=r("NOGqly5s"),s=r("suI5NDUm"),u=r("5qt3k8Zi"),c=u.hasVisitedAoneGuideStep1,l=u.hasVisitedAoneGuideStep2,p=u.markVisitedAoneGuideStep1,f=u.markVisitedAoneGuideStep2,d=Object(i.a)("VISIT_AONE_GUIDE_STEP1"),g=Object(i.a)("VISIT_AONE_GUIDE_STEP2"),h=Object(i.a)("VISIT_AONE_INIT"),m=Object(i.a)("VISIT_AONE_SET_VISITED"),y=Object(i.b)(((n={})[""+d]=function(e){return o.a({},e,{hasVisitedAoneGuideStep1:!0})},n[""+g]=function(e){return o.a({},e,{hasVisitedAoneGuideStep2:!0})},n[""+m]=function(e,t){return o.a({},e,{hasVisitedAoneGuideStep1:t.payload[0],hasVisitedAoneGuideStep2:t.payload[1]})},n),{hasVisitedAoneGuideStep1:!0,hasVisitedAoneGuideStep2:!0}),v=Object(a.a)(function(e){return e.ofType(""+d).do(function(){return p()}).ignoreElements()},function(e){return e.ofType(""+g).do(function(){return f()}).ignoreElements()},function(e){return e.ofType(""+h).switchMap(s.getAoneVersion).filter(function(e){return e===s.AoneUserType.TAB}).map(function(){return m([c(),l()])})})},lIadzMji:function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"b",function(){return c}),r.d(t,"c",function(){return l}),r.d(t,"d",function(){return p}),r.d(t,"g",function(){return f}),r.d(t,"e",function(){return d}),r.d(t,"f",function(){return g});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r.n(o),a=r("lfya3Nc5"),s=20,u={taskToday:"calendar",taskUndone:"checkbox",taskDone:"checkbox-checked-s",taskNotAssigned:"add-user",taskMyExecuted:"circle-user"},c=function(e){var t="custom-view";return e.icon?t=u[e.icon]:e.view.type&&(t=a.ViewTypeIconName.get(e.view.type)),t},l=function(e){if(!e)return"custom";switch(e){case"story":return"story.custom";case"bug":return"bug.custom";case"sprint":return"sprint.custom";default:return"custom"}},p=function(e,t){return e+"_"+t},f=function(e,t){if(!t)return e.map(function(e){return e._id});var r={};t.forEach(function(e){r[e]=null});var n=[];e.forEach(function(e){i.a.isUndefined(r[e._id])?n.push(e._id):r[e._id]=e});var o=t.filter(function(e){return!!r[e]});return n.concat(o)},d=function(e){if(!e||!e.filter)return null;var t=e.filter.match(/\(sprintId\s?=\s?(null|\w{24})\s?\)/);if(!t||!t.length)return null;var r=n.f(t,2)[1];return r?"null"===r?"unplanned":r:null},g=function(e){if(!e||!e.filter)return null;var t=e.filter.match(/\(tasklistId\s?=\s?(\w{24})\s?\)/);return t&&t.length&&n.f(t,2)[1]||null}},lSKi634H:function(e,t,r){"use strict";r.r(t),r.d(t,"statusPostSuceess$",function(){return T}),r.d(t,"actions",function(){return C}),r.d(t,"reducer",function(){return k}),r.d(t,"epic",function(){return j}),r.d(t,"getProjectCustomfieldlinkIds",function(){return A});var n,o=r("mrSGxOB2"),i=r("6SzIBtPz"),a=r("NOGqly5s"),s=r("4c1CS0b3"),u=r("tLZJUYWX"),c=r.n(u),l=r("8yf6doCl"),p=r("s0r7VfKc"),f=r("GESwhXbR"),d=r("fio7jWQ0"),g=r("dKBra1Y/"),h=r("0PrS9efm"),m=r("NVK113Rt"),y=r("oRqJmROU"),v=r("gh8QIhMV"),b=r("fB8F65SE"),_=r("pSso42HE"),S=r("wn+bmAxP"),T=new l.Subject,E=function(e){return"PROJECT_OVERVIEW/"+e},O=function(e){return e+"/SUCCESS"},w=function(e){return e+"/FAILURE"},C={mounted:Object(i.a)(E("MOUNTED")),mountedSuccess:Object(i.a)(E(O("MOUNTED"))),mountedFailure:Object(i.a)(E(w("MOUNTED"))),fetchInfoTemplateFields:Object(i.a)(E("FETCH_TEMPLATE_FIELDS")),fetchInfoTemplateFieldsFulfilled:Object(i.a)(E(O("FETCH_TEMPLATE_FIELDS"))),importFieldsFromTemplate:Object(i.a)(E("IMPORT_TEMPLATE_FIELDS")),clearCurrentTemplate:Object(i.a)(E("CLEAR_CURRENT_TEMPLATE")),addCustomFieldLinks:Object(i.a)(E("ADD_CUSTOM_FIELD_LINKS")),addCustomFieldLinksSuccess:Object(i.a)(E(O("ADD_CUSTOM_FIELD_LINKS"))),addCustomFieldLinksError:Object(i.a)(E(w("ADD_CUSTOM_FIELD_LINKS"))),updateCustomfieldlinkPos:Object(i.a)(E("UPDATE_CUSTOM_FIELD_LINK_POS")),updateCustomfieldlinkRoleIds:Object(i.a)(E("UPDATE_CUSTOM_FIELD_LINK_ROLE_IDS")),deleteCustomfieldlink:Object(i.a)(E("DELETE_CUSTOM_FIELD_LINK")),updateSuccess:Object(i.a)(E(O("UPDATE"))),updateFailed:Object(i.a)(E(w("UPDATE"))),fetchActivities:Object(i.a)(E("FETCH_ACTIVITIES")),fetchActivitiesLoadMore:Object(i.a)(E("FETCH_ACTIVITIES_LOAD_MORE")),fetchActivitiesSuccess:Object(i.a)(O("FETCH_ACTIVITIES")),fetchStatistic:Object(i.a)(E("FETCH_STATISTIC")),fetchStatisticSuccess:Object(i.a)(O("FETCH_STATISTIC")),fetchSprints:Object(i.a)(E("FETCH_SPRINTS")),fetchSprintsSuccess:Object(i.a)(O("FETCH_SPRINTS")),fetchGraphData:Object(i.a)(E("FETCH_GRAPH_DATA")),fetchGraphDataSuccess:Object(i.a)(O("FETCH_GRAPH_DATA")),fetchStatusSetting:Object(i.a)(E("FETCH_STATUS_SETTING")),fetchStatusSettingSuccess:Object(i.a)(O("FETCH_STATUS_SETTING")),fetchCustomStatusTemplates:Object(i.a)(E("\bFETCH_CUSTOM_STATUS_TEMPLATES")),fetchCustomStatusTemplatesSuccess:Object(i.a)(O("FETCH_CUSTOM_STATUS_TEMPLATES")),updateStatusReminder:Object(i.a)(E("UPDATE_STATUS_REMINDER")),updateStatusReminderSuccess:Object(i.a)(O("UPDATE_STATUS_REMINDER")),updateStatusNames:Object(i.a)(E("UPDATE_STATUS_NAMES")),updateStatusNamesSuccess:Object(i.a)(O("UPDATE_STATUS_NAMES")),updateProjectDescription:Object(i.a)(E("UPDATE_PROJECT_DESCRIPTION")),updateProjectDescriptionSuccess:Object(i.a)(E("UPDATE_PROJECT_DESCRIPTION_SUCCESS")),updateProjectDescriptionError:Object(i.a)(E("UPDATE_PROJECT_DESCRIPTION_ERROR")),updateProjectDate:Object(i.a)(E("UPDATE_PROJECT_DATE")),updateProjectDateSuccess:Object(i.a)(O("UPDATE_PROJECT_DATE_SUCCESS")),setProjectStatusName:Object(i.a)(E("SET_PROJECT_STATUS_NAME")),setProjectStatusDegree:Object(i.a)(E("SET_PROJECT_STATUS_DEGREE")),setProjectStatusInfo:Object(i.a)(E("SET_PROJECT_STATUS_INFO")),fetchProjectStatus:Object(i.a)(E("FETCH_PROJECT_STATUS")),fetchProjectStatusLoadMore:Object(i.a)(E("FETCH_PROJECT_STATUS_LOAD_MORE")),fetchProjectStatusSuccess:Object(i.a)(O("FETCH_PROJECT_STATUS")),fetchProjectStatusFailure:Object(i.a)(w("FETCH_PROJECT_STATUS")),postProjectStatus:Object(i.a)(E("POST_PROJECT_STATUS")),postProjectStatusSuccess:Object(i.a)(E(O("POST_PROJECT_STATUS"))),postProjectStatusFailure:Object(i.a)(E(w("POST_PROJECT_STATUS"))),togglePushStatusToGroupChat:Object(i.a)(E("TOGGLE_PUSH_STATUS_TO_GROUP_CHAT")),getOrgProjRoles:Object(i.a)(E("GET_ORG_PROJ_ROLES")),setOrgProjRoles:Object(i.a)(E("SET_ORG_PROJ_ROLES")),unmount:Object(i.a)(E("UNMOUNT"))},I={projectStatusHasMore:!0,pushStatustoGroupChat:!0,addCustomFieldLinksLoading:!1},k=Object(i.b)(((n={})[""+C.mounted]=function(e){return e},n[""+C.mountedSuccess]=function(e,t){var r=t.payload,n=r.customfieldlinks,i=r.customFieldCategories,a=r.templates;return o.a({},e,{templates:a,customfieldlinks:n,customFieldCategories:i})},n[""+C.fetchInfoTemplateFields]=function(e,t){return o.a({},e,{currentTemplateId:t.payload.templateId,customfieldlinksPreview:null})},n[""+C.fetchInfoTemplateFieldsFulfilled]=function(e,t){return o.a({},e,{customfieldlinksPreview:t.payload})},n[""+C.clearCurrentTemplate]=function(e){return o.a({},e,{customfieldlinksPreview:void 0,currentTemplateId:void 0})},n[""+C.importFieldsFromTemplate]=function(e){return o.a({},e,{isLoading:!0})},n[""+C.updateFailed]=function(e){var t=e.customfieldlinks;return o.a({},e,{customfieldlinks:o.h(t)})},n[""+C.addCustomFieldLinks]=function(e){return o.a({},e,{addCustomFieldLinksLoading:!0})},n[""+C.addCustomFieldLinksSuccess]=function(e){return o.a({},e,{addCustomFieldLinksLoading:!1})},n[""+C.mountedFailure]=function(e){return o.a({},e,{isLoading:!1})},n[""+C.fetchActivities]=function(e,t){return t.payload.query?o.a({},e,{activityQuery:t.payload.query}):o.a({},e)},n[""+C.fetchActivitiesSuccess]=function(e,t){return o.a({},e,{activities:t.payload})},n[""+C.fetchStatisticSuccess]=function(e,t){return o.a({},e,{statistic:t.payload})},n[""+C.fetchSprintsSuccess]=function(e,t){return o.a({},e,{sprints:t.payload})},n[""+C.fetchGraphDataSuccess]=function(e,t){return o.a({},e,{graphData:t.payload})},n[""+C.fetchStatusSettingSuccess]=function(e,t){var r=t.payload.reminder;return o.a({},e,{statusSetting:t.payload,statusNameOptions:t.payload.statuses,statusReminder:r,projectStatusName:t.payload.statuses[0]?t.payload.statuses[0].name:""})},n[""+C.fetchCustomStatusTemplatesSuccess]=function(e,t){return o.a({},e,{customTemplates:t.payload})},n[""+C.setProjectStatusDegree]=function(e,t){return o.a({},e,{projectStatusDegree:t.payload})},n[""+C.setProjectStatusName]=function(e,t){return o.a({},e,{projectStatusName:t.payload})},n[""+C.fetchProjectStatusSuccess]=function(e,t){return t.payload?o.a({},e,{projectStatusHasMore:t.payload.hasMore,projectStatuses:t.payload.result}):e},n[""+C.setProjectStatusInfo]=function(e,t){return o.a({},e,{projectStatusInfo:t.payload})},n[""+C.postProjectStatus]=function(e,t){return o.a({},e,{postStatusLoading:!0})},n[""+C.updateStatusNamesSuccess]=function(e,t){return o.a({},e,{statusNameOptions:t.payload.statuses,projectStatusName:t.payload.statuses[0]?t.payload.statuses[0].name:""})},n[""+C.updateStatusReminderSuccess]=function(e,t){var r=t.payload.reminder;return o.a({},e,{statusReminder:r})},n[""+C.postProjectStatusSuccess]=function(e){return o.a({},e,{postStatusLoading:!1,projectStatusInfo:""})},n[""+C.postProjectStatusFailure]=function(e){return o.a({},e,{postStatusLoading:!1})},n[""+C.togglePushStatusToGroupChat]=function(e,t){return void 0===t.payload?e:o.a({},e,{pushStatustoGroupChat:t.payload})},n[""+C.setOrgProjRoles]=function(e,t){return o.a({},e,t.payload)},n[""+C.unmount]=function(){return I},n),I),j=Object(a.a)(function(e){return e.ofType(""+C.mounted).filter(y.a).switchMap(function(t){var r=t.payload,n=r.projectId,i=r.organizationId,a=r.hasTemplatePermission,u=p.default.getCustomFieldLinks(n,"project").changes(),c=p.default.getCustomfieldCategories(i,n).changes().catch(function(){return s.Observable.of([])});return s.Observable.combineLatest(u,c).switchMap(function(e){var t=o.f(e,2),r=t[0],n=t[1];return a?p.default.fetch.getProjectTemplatesHasProjectInfoFetch(i).catch(function(){return s.Observable.of([])}).map(function(e){return{customfieldlinks:r,customFieldCategories:n,templates:e}}):s.Observable.of({customfieldlinks:r,customFieldCategories:n,templates:[]})}).map(function(e){return C.mountedSuccess(e)}).takeUntil(e.ofType(""+C.unmount)).catch(function(){return s.Observable.of(C.mountedFailure)})})},function(e){return e.ofType(""+C.fetchInfoTemplateFields).filter(y.a).switchMap(function(t){var r=t.payload.templateId;return p.default.fetch.getProjectInfoFromTemplateFetch(r).map(function(e){return C.fetchInfoTemplateFieldsFulfilled(e)}).takeUntil(e.ofType(""+C.unmount)).catch(function(e){return Object(v.throwError)(e),s.Observable.of({})})})},function(e){return e.ofType(""+C.importFieldsFromTemplate).filter(y.a).switchMap(function(t){var r=t.payload,n=r.templateId,o=r.projectId;return p.default.fetch.importProjectCustomfieldsFromTemplate(n,o).do(function(e){return b.mockMessage("",":new:customfieldlink",e)}).map(function(){return C.updateSuccess()}).takeUntil(e.ofType(""+C.unmount)).catch(function(e){return Object(v.throwError)(e),s.Observable.of(C.updateFailed())})})},function(e){return e.ofType(""+C.updateCustomfieldlinkPos).filter(y.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.customfieldlinkId,i=r.nextId;return p.default.updateCustomFieldLinkPos(n,o,{_nextId:i}).map(function(){return C.updateSuccess()}).takeUntil(e.ofType(""+C.unmount)).catch(function(e){return f.Toast.error(c.a.get("error")),Object(v.throwError)(e),s.Observable.of(C.updateFailed())})})},function(e){return e.ofType(""+C.updateCustomfieldlinkRoleIds).filter(y.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.customfieldlinkId,i=r.roleIds;return p.default.updateCustomFieldLinkRoleIds(n,o,{_roleIds:i}).do(function(){return f.Toast.success(c.a.get("project.info.set.item.permission.success"))}).map(function(){return C.updateSuccess()}).takeUntil(e.ofType(""+C.unmount)).catch(function(e){return f.Toast.error(c.a.get("project.info.set.item.permission.failed")),Object(v.throwError)(e),s.Observable.of(C.updateFailed())})})},function(e){return e.ofType(""+C.deleteCustomfieldlink).filter(y.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.customfieldlinkId;return p.default.deleteCustomFieldLink(n,o).do(S.b.deleteField).map(function(){return f.Toast.success(c.a.get("project.info.delete.item.success")),C.updateSuccess()}).takeUntil(e.ofType(""+C.unmount)).catch(function(e){return f.Toast.error(c.a.get("project.info.delete.item.failed")),Object(v.throwError)(e),s.Observable.of(C.updateFailed())})})},function(e){var t=e.ofType(""+C.unmount),r=e.ofType(""+C.fetchActivities),n=e.ofType(""+C.fetchActivitiesLoadMore);return r.pipe(Object(h.filter)(y.a),Object(m.map)(function(e){return e.payload}),Object(_.i)(function(e){var t=e.projectId,r=e.page,n=e.count,o=e.query;return p.default.getProjectActivities(t,r,n,o)},_.i.Mode.PageCount,n,t),Object(m.map)(C.fetchActivitiesSuccess),Object(g.catchError)(function(e){return Object(v.throwError)(e),s.Observable.empty()}))},function(e){return e.ofType(""+C.fetchStatistic).filter(y.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.date,i=r.sprintFilter,a=r.sprintIds;return p.default.fetch.getProjectStatistic(o,n,a,i).takeUntil(e.ofType(""+C.unmount)).map(C.fetchStatisticSuccess).catch(function(e){return Object(v.throwError)(e),s.Observable.of({})})})},function(e){return e.ofType(""+C.fetchSprints).filter(y.a).switchMap(function(t){var r=t.payload.projectId;return p.default.fetch.getProjectSprints(r).takeUntil(e.ofType(""+C.unmount)).map(C.fetchSprintsSuccess).catch(function(e){return Object(v.throwError)(e),s.Observable.empty()})})},function(e){return e.ofType(""+C.fetchGraphData).filter(y.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.sprintIds,i=o?{filter:{sprintId:o}}:null;return p.default.fetch.post("boards/tproject/tdr/project/"+n+"/report/overview_report/preview",i).takeUntil(e.ofType(""+C.unmount)).map(function(e){return e.graphData[0].rows.filter(function(e){return"total"!==e[3]&&"ontimedone_detail"!==e[3]}).map(function(e){return{type:e[3],number:e[1],percent:e[2]}})}).map(C.fetchGraphDataSuccess).catch(function(e){return Object(v.throwError)(e),s.Observable.empty()})})},function(e){return e.ofType(""+C.fetchStatusSetting).filter(y.a).switchMap(function(t){var r=t.payload.projectId;return p.default.fetch.get("projects/"+r+"/status-setting").takeUntil(e.ofType(""+C.unmount)).map(C.fetchStatusSettingSuccess).catch(function(e){return Object(v.throwError)(e),s.Observable.empty()})})},function(e){return e.ofType(""+C.fetchCustomStatusTemplates).filter(y.a).switchMap(function(t){var r=t.payload.organizationId;return p.default.fetch.get("organizations/"+r+"/projecttemplates/status-setting").takeUntil(e.ofType(""+C.unmount)).map(C.fetchCustomStatusTemplatesSuccess).catch(function(e){return Object(v.throwError)(e),s.Observable.empty()})})},function(e){return e.ofType(""+C.updateStatusNames).filter(y.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.statuses,i=r.message;return p.default.fetch.put("projects/"+n+"/status-setting",{statuses:o}).takeUntil(e.ofType(""+C.unmount)).map(C.updateStatusNamesSuccess).do(function(){i&&f.Toast.success(i)}).catch(function(e){return Object(v.throwError)(e),s.Observable.empty()})})},function(e){return e.ofType(""+C.updateStatusReminder).filter(y.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.reminderPayload,i={rules:o?[{rrule:o.rrule}]:[],members:o?o.members:[]};return p.default.fetch.put("projects/"+n+"/status-setting/reminder",{reminder:i}).takeUntil(e.ofType(""+C.unmount)).map(C.updateStatusReminderSuccess).do(function(){f.Toast.success(c.a.get("project.overview.status.reminder.update.success"))}).catch(function(e){return Object(v.throwError)(e),s.Observable.empty()})})},function(e){return e.ofType(""+C.updateProjectDescription).filter(y.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.description;return p.default.fetch.put("projects/"+n,{description:o}).takeUntil(e.ofType(""+C.unmount)).map(C.updateProjectDescriptionSuccess).do(S.b.editedProjectDescription).do(function(){f.Toast.success(c.a.get("project.overview.progress.update.success.toast"))}).catch(function(e){var t=e.responseText,r=e.statusText,n=e.status;return f.Toast.error(t||r||n),Object(v.throwError)(e),[C.updateProjectDescriptionError()]})})},function(e){return e.ofType(""+C.updateProjectDate).filter(y.a).switchMap(function(t){var r,n=t.payload,o=n.projectId,i=n.type,a=n.date;return p.default.fetch.put("projects/"+o,(r={},r[""+i]=a,r)).takeUntil(e.ofType(""+C.unmount)).map(C.updateProjectDateSuccess).catch(function(e){return Object(v.throwError)(e),s.Observable.empty()})})},function(e){return e.ofType(""+C.addCustomFieldLinks).filter(y.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r._customfieldLinkIds;return p.default.fetch.forkTemplateCustomfieldlinks(n,o).takeUntil(e.ofType(""+C.unmount)).map(C.addCustomFieldLinksSuccess).do(function(){return S.b.addedProjectDetail1(o.length)}).do(function(){f.Toast.success(c.a.get("add.success"))}).catch(function(e){var t=e.responseText,r=e.statusText,n=e.status;return f.Toast.error(t||r||n),Object(v.throwError)(e),[C.updateProjectDescriptionError()]})})},function(e){return e.ofType(""+C.getOrgProjRoles).filter(y.a).switchMap(function(t){var r=t.payload.orgId;return p.default.getCustomRoles(r,"project").changes().takeUntil(e.ofType(""+C.unmount)).map(function(e){var t;return{orgProjRoles:(t=[]).concat.apply(t,o.h(e))}}).map(C.setOrgProjRoles).catch(function(e){var t=e.responseText,r=e.statusText,n=e.status;return f.Toast.error(t||r||n),Object(v.throwError)(e),s.Observable.empty()})})},function(e,t){return e.ofType(""+C.postProjectStatus).filter(y.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.content,i=r.pushToGroupChat,a=r.degree,s=r.name,u=r.mentions;return p.default.postProjectStatusActivity(n,a,o,s,u,i).takeUntil(e.ofType(""+C.unmount)).do(function(){return T.next()}).do(function(){return S.b.publishedStatus(i?S.a.enable:S.a.disable,_.c[a])}).map(C.postProjectStatusSuccess).catch(function(e){var t=e.responseText,r=e.statusText,n=e.status;return f.Toast.error(t||r||n),Object(v.throwError)(e),[C.postProjectStatusFailure()]})})},function(e){var t=e.ofType(""+C.fetchProjectStatus),r=e.ofType(""+C.fetchProjectStatusLoadMore);return t.pipe(Object(h.filter)(y.a),Object(m.map)(function(e){return e.payload}),Object(_.i)(function(e){var t=e.projectId,r=e.page,n=e.count;return p.default.getProjectStatusActivities(t,r,n)},_.i.Mode.PageCount,r),Object(m.map)(C.fetchProjectStatusSuccess),Object(g.catchError)(function(e){var t=e.responseText,r=e.statusText,n=e.status;return f.Toast.error(t||r||n),Object(v.throwError)(e),[C.fetchProjectStatusFailure()]}))});function A(){var e=d.store.getState().ui.projectOverview.customfieldlinks;return new Map((void 0===e?[]:e).map(function(e){return[e._customfieldId,e._customfieldentityId]}))}},lWa0K2st:function(e,t,r){e.exports=r.p+"images/618-doodle@10x.6101130d.png"},lfya3Nc5:function(e,t,r){"use strict";r.r(t),r.d(t,"BackendAxisType",function(){return s}),r.d(t,"supportCustomSortPane",function(){return u}),r.d(t,"isScenarioConfigStatus",function(){return c}),r.d(t,"isTaskflowStatus",function(){return l}),r.d(t,"getValidatePaneType",function(){return p}),r.d(t,"isStatusPaneType",function(){return f}),r.d(t,"showStatusSelector",function(){return d}),r.d(t,"formatConfigsFromScrumPanel",function(){return g}),r.d(t,"getTaskflowIdFromSFCId",function(){return h}),r.d(t,"getScenarioConfigs",function(){return m}),r.d(t,"ViewTypeIconName",function(){return n}),r.d(t,"getScenarioFieldIdsFromCustomView",function(){return y});var n,o=r("pYq0h+Ab"),i=r("EXoLhZ0Z"),a=r("CGal/mJM"),s={iterationSprint:o.AxisType.iterationSprint,priority:o.AxisType.priority,stage:o.AxisType.stage,taskflowStatus:o.AxisType.taskflowStatus,scenarioConfigStatus:o.AxisType.scenarioConfigStatus,taskflow:o.AxisType.taskflow,scenarioConfig:o.AxisType.scenarioConfig};function u(e){return[o.AxisType.scenarioConfigStatus,o.AxisType.stage].some(function(t){return t===e})}function c(e){return e===o.AxisType.scenarioConfigStatus}function l(e){return e===o.AxisType.taskflowStatus}function p(e){return l(e)?o.AxisType.scenarioConfigStatus:e}function f(e){return c(e)||l(e)}function d(e,t,r){return e===a.BoardViewType.Kanban&&f(t)&&r.length>1}function g(e,t){var r=t&&t.values;return r&&0!==r.length?m(e,r.map(i.b)):e}function h(e,t){var r=e.find(function(e){return e._id===t});return r&&r._taskflowId}function m(e,t){var r=e.filter(function(e){return t.some(function(t){return t===e._id})});return r&&r.length?r:[e[0]]}function y(e){var t=e.view,r=t.vertical,n=t._verticalIds;return c(r&&s[r]||o.AxisType.noop)&&n||[]}!function(e){var t,r=((t={})[a.BoardViewType.Kanban]="view-board",t[a.BoardViewType.List]="ul",t[a.BoardViewType.Time]="time-view",t[a.BoardViewType.Table]="table",t);e.get=function(e){return r[e]}}(n||(n={}))},"lt+6VDK1":function(e,t,r){e.exports={"all-toggler":"all-toggler__2Pmd","handler-list":"handler-list__1D70",handler:"handler__2Iez","tree-node":"tree-node__302Q","tree-wrapper":"tree-wrapper__2IS_"}},mIQGOuVv:function(e,t,r){e.exports={clickable:"clickable__AkkF"}},mNUNGEpO:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("NOGqly5s"),i=r("6SzIBtPz"),a=r("4c1CS0b3"),s=r("GESwhXbR"),u=r("tLZJUYWX"),c=r("s0r7VfKc"),l=r("oRqJmROU"),p=r("gh8QIhMV"),f=r("sa1Ed382"),d=r("3gwnn8Cw"),g=r("IssmDVnT"),h=r("2qRnoGmE"),m=r.n(h),y=r("bZr3G77e"),v=r("CxY0Mkc1");var b,_=r("XIKSkjsA"),S=r("gNFMJi3i"),T=r("Q/bs5bE9"),E=r("Hb0+frtR"),O=r("tXAzI2u6");r.d(t,"a",function(){return j}),r.d(t,"c",function(){return P}),r.d(t,"b",function(){return R});var w={selectedFields:[],presetFields:Object(E.b)(_.h),customFields:[],hasMore:!1,isCustomFieldsLoading:!1},C=function(e){return"PROJECT_CLUSTER_EXPORT/"+e},I=function(e){return C(e+"/SUCCESS")},k=function(e){return C(e+"/FAILURE")},j={getDefaultFields:Object(i.a)(C("GET_DEFAULT_FIELDS")),getDefaultFieldsSuccess:Object(i.a)(I("GET_DEFAULT_FIELDS")),setSelectedFields:Object(i.a)(C("SET_SELECTED_FIELDS")),getCustomFields:Object(i.a)(C("GET_CUSTOM_FIELDS")),getCustomFieldsSuccess:Object(i.a)(I("GET_CUSTOM_FIELDS")),getCustomFieldsFailed:Object(i.a)(k("GET_CUSTOM_FIELDS")),getMoreCustomFields:Object(i.a)(C("GET_MORE_CUSTOM_FIELDS")),exportTable:Object(i.a)(C("EXPORT_TABLE")),exportTableSuccess:Object(i.a)(I("EXPORT_TABLE")),exportTableFailed:Object(i.a)(k("EXPORT_TABLE")),exitPagination:Object(i.a)(C("EXIT_PAGINATION")),initExport:Object(i.a)(C("INIT_EXPORT"))},A=function(e,t){return t.payload?n.a({},e,{selectedFields:t.payload}):e},P=Object(i.b)(((b={})[""+j.getDefaultFieldsSuccess]=A,b[""+j.setSelectedFields]=A,b[""+j.getCustomFields]=function(e){return n.a({},e,{isCustomFieldsLoading:!0})},b[""+j.getCustomFieldsSuccess]=function(e,t){var r=t.payload,o=r.result,i=r.hasMore;return n.a({},e,{isCustomFieldsLoading:!1,customFields:o,hasMore:i})},b[""+j.getCustomFieldsFailed]=function(e){return n.a({},e,{isCustomFieldsLoading:!1})},b[""+j.initExport]=function(){return n.a({},w)},b),w),R=Object(o.a)(function(e){return e.ofType(""+j.getDefaultFields).filter(l.a).switchMap(function(e){var t=e.payload,r=t.organizationId,n=t.viewId,o=t.exportCacheId,i=E.d.get(o);return i.length?a.Observable.of(i):Object(O.e)(r,n).map(function(e){var t=e;if(t){var r=Object(T.b)(t).filter(function(e){return!e.hidden});return Object(E.b)(r)}var o=_.h.filter(function(e){return!e.hidden});return Object(S.l)(n)&&(o=Object(S.n)("projectCategory",o)),Object(E.b)(o)})}).map(j.getDefaultFieldsSuccess)},function(e){var t=e.ofType(""+j.getCustomFields).filter(l.a),r=e.ofType(""+j.getMoreCustomFields);return t.switchMap(function(t){var o,i,s,u,l,p=t.payload,f=(i=(o=p).pageSize,s=o.q,u=n.g(o,["pageSize","q"]),l=n.a({},u,{q:encodeURIComponent(s)}),g.Page.defaultState("search/export-fields/customfields",{pageSize:i||20,urlQuery:l}));return c.default.fetch.expandPage(f,{loadMore$:r}).takeUntil(e.ofType(""+j.exitPagination)).map(function(e){return n.a({},e,{result:e.result.filter(function(e){return"commongroup"!==e.type})})}).map(j.getCustomFieldsSuccess).catch(function(){return a.Observable.of(j.getCustomFieldsFailed())})})},function(e){return e.ofType(""+j.exportTable).filter(l.a).switchMap(function(e){var t=e.payload,r=t.organizationId,o=t.viewId,i=t.fieldKeys,c=t.withChild,l=Object(S.l)(o);return function(e,t,r,o,i){var s={_organizationId:e,headers:JSON.stringify(r),timezone:y.timezone(),selectBy:o,withChild:i};"projecttag"===o&&(s._projecttagId=t);var u=n.f(m.a.HOST.split("//"),2),c=u[0],l=u[1],p=v.format({protocol:c,host:l+"/api/tis/export/project-cluster",query:s}),f=$.fileDownload;return"function"==typeof f?Object(d.fromPromise)(f(p)):a.Observable.throw(new Error("$.fileDownload is undefined."))}(r,o,i,l?l?o:void 0:"projecttag",c).map(j.exportTableSuccess).do(function(){s.Toast.success({description:u.get("project.cluster.export.results.limit",1e3),message:u.get("search.export.start.download")}),f.gta.event({action:"exported project data",method:"trace",page:"Organization Page",type:"table | list | cover"})}).catch(function(e){return"string"==typeof e&&/ExceedLimit/gi.test(e)?s.Toast.error(u.get("project.cluster.export.exceed.limit",1e3)):"string"==typeof e&&/Forbidden/gi.test(e)?s.Toast.error(u.get("project.cluster.export.no.permission")):s.Toast.error(u.get("tasklist.dump.export.error")),Object(p.throwError)(e),a.Observable.of(j.exportTableFailed())})})})},mSCPNUQI:function(e,t,r){var n,o,i,a,s;o=r("fxowQlhT"),a=r("sa1Ed382"),r("0FRv5rrl"),r("nL4olqOP"),r("85182E8g"),i=r("zpLHwT1h").plugins,s=r("gh8QIhMV").throwError,a.gta=o,e.exports=n={},n.init=function(){var e,t,r,n,o,u,c;try{t=a.user.get("created"),r=a.user.get("email"),o=a.user.get("locationByIP"),n={userKey:{alias:{fullstory:"userId_str"},value:a.user.id},name:{wlist:["customer.io"],value:a.user.get("name")},email:{wlist:["customer.io"],value:r},created_at:{alias:{fullstory:"createdAt_date"},value:t},language:{alias:{fullstory:"language_str",tbpanel:"userLanguage"},value:(null!=(u=a.PREFERENCE)?u.getLanguage():void 0)||"zh"},env:{alias:{fullstory:"env_str"},value:a.env},version:{alias:{fullstory:"version_str"},value:a.version},daysSinceRegistered:{alias:{fullstory:"daysSinceRegistered_real"},value:(c=Date.now()-new Date(t))<-864e5?-1:0|Math.ceil(c/864e5)},timezone:{alias:{fullstory:"timezone_real"},value:(new Date).getTimezoneOffset()/-60}},o&&(n.city=o.city,n.country=o.country,n.region=o.region),a.ab&&(n.experiments=a.ab.toGTAProperties()),e=!a.PREFERENCE||a.PREFERENCE.get("collectBehaviorLogs"),a.gta.setUser(a.user.id,n,!e)}catch(l){s(l.toString())}return i.forEach(function(e){return a.gta.registerPlugin(e)})}},mbcAhQmk:function(e,t,r){e.exports=r.p+"images/taskUniqueId-1.962e038c.png"},mjaT7wPX:function(e,t,r){e.exports=r.p+"images/works-2.bea8d2e2.png"},mmJiykER:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r.n(o),a=r("a+N5u/Cl"),s=r("tLZJUYWX"),u=r("sa1Ed382"),c=r("s0r7VfKc"),l=r("zT6SYcu2"),p=r("c0yVuYMM"),f=r("PHWukW8L"),d=r("p7RaAO2S"),g=r("8zoxEjTT"),h=r("AsfohlkG"),m=r("t744iB9e"),y=function(e){var t=n.f(Object(o.useState)([]),2),r=t[0],a=t[1],s=n.f(Object(o.useState)(!1),2),u=s[0],c=s[1];return Object(o.useEffect)(function(){var t=e.getOptions("",{isFirstPage:!0}).subscribe(function(t){var r=t.result,o=Object(d.i)(r.length);a(r.map(function(e){return n.a({},e,{i18Key:"",value:e.value})})),c(o),e.inline||(e.setShowClear(!o),e.setWithMinHeight(!o))});return function(){return t.unsubscribe()}},[e.getOptions,e.inline,e.setShowClear,e.setWithMinHeight]),u?i.a.createElement(g.b,n.a({},e)):i.a.createElement(m.a,n.a({},e,{options:r}))};var v=r("ULWpA99H"),b=r("4cGZg14d"),_=r("GESwhXbR"),S=r("rGq9vsrD"),T=r("EVgboMlz"),E=function(e){return"number"==typeof e},O={min:null,max:null,changed:!1},w=function(e){function t(t){var r=e.call(this,t)||this;return r.onInputChange=function(e){return function(t){var o=r.props.ratio,i=r.state,a=i.min,s=i.max,u=t.target.value,c=""===u?null:Number(u)*o,l=null;switch(e){case"min":l={min:c,max:s};break;case"max":l={min:a,max:c};break;default:return}r.setState(n.a({},l,{changed:!0}))}},r.onClickConfirm=function(){var e,t=r.state,o=t.min,i=t.max,a=r.props.onChange;if(r.isValid()){var s=r.makeNumberValid(o),u=r.makeNumberValid(i);E(s)&&E(u)&&s>u&&(s=(e=n.f([u,s],2))[0],u=e[1]);var c={min:s,max:u};a(c),r.setState(n.a({},c,{changed:!1}))}},r.onPressEnter=function(e){13===e.which&&r.onClickConfirm()},r.state={min:t.min,max:t.max,changed:!1},r}return n.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.clearSub$=S.b.subscribe(function(){e.setState(O)})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t={},r=t.changed;e.min!==this.props.min&&(t.min=e.min,r=!1),e.max!==this.props.max&&(t.max=e.max,r=!1),this.setState(n.a({},t,{changed:r}))},t.prototype.componentWillUnmount=function(){this.clearSub$.unsubscribe()},t.prototype.isValid=function(){return this.state.changed},t.prototype.makeNumberValid=function(e){return null===e?e:(e=(e=e<0?0:e)>999999?999999:e,e=Math.round(e))},t.prototype.render=function(){var e=this.props.ratio,t=this.state,r=t.min,n=t.max,i=E(r)?""+r/e:"",a=E(n)?""+n/e:"";return o.createElement("div",{className:T["range-input"]},o.createElement("input",{type:"number",className:"min-input",min:"0",placeholder:s.get("searcher.filter.number.placeholder.min"),value:i,onChange:this.onInputChange("min"),onKeyDown:this.onPressEnter}),o.createElement("span",{className:"gap"},"-"),o.createElement("input",{type:"number",className:"max-input",min:"0",placeholder:s.get("searcher.filter.number.placeholder.max"),value:a,onChange:this.onInputChange("max"),onKeyDown:this.onPressEnter}),o.createElement(_.Button,{className:"confirm-btn",type:"primary",disabled:!this.isValid(),onClick:this.onClickConfirm},s.get("confirm")))},t.defaultProps={ratio:1},t}(o.PureComponent),C=r("PuhIbk01"),I=r("LSIBDi4B"),k=r("CamDZG+a");function j(e){return n.a({action:"filter content",method:"click"},e)}var A=function(e){function t(t){var r=e.call(this,t)||this;return r.searcherOptionsQuery="",r.getScopeIds=function(e,t){if(!t)return[];var r=[],n=t._tasklistId;if("stageId"===e&&n)return n.forEach(function(e){r.push("tasklist:"+e)}),r;var o=t._scenariofieldconfigId;return["taskflowstatusId","flowstatusId"].indexOf(e)>=0&&o?(o.forEach(function(e){r.push("scenariofieldconfig:"+e)}),r):[]},r.getType=function(){return Object(I.a)(r.props.searcherId,r.props.advancedCustomfieldObjectType)},r.getRemoteOptions=function(e,t){void 0===t&&(t={});var n=r.props,o=n.organizationId,i=n.projectId,a=n.searcherId,s=n.scopes;if(e!==r.searcherOptionsQuery||t.isFirstPage){var u=r.getScopeIds(a,s);r.searcherOptionsQuery=e,r.searcherOptionsPageState=c.default.getSearcherOptionsInPage({q:e,scopeIds:u,_organizationId:i?void 0:o,_projectId:i,id:a})}return c.default.fetch.expandPage(r.searcherOptionsPageState,{mutate:!0})},r.getComponent=function(e){var t,n=r.props.triggerEl,i=r.state.showClear;switch(r.props.type){case l.f.Select:Object(d.h)(l.f.Select,r.getFormatOptions().length)?(t=b.a,i=r.showClearBtn(),n=r.getDefaultTriggerEl()):t=m.a;break;case l.f.RangeText:t=m.a;break;case l.f.Text:case l.f.StrictText:t=C.a;break;case l.f.Date:t=Object(v.a)(),n=r.getDefaultTriggerEl(),i=r.showClearBtn();break;case l.f.MultiSelect:e&&function(e){return e===h.c.scenariofieldconfig}(e)&&!r.isUsingCustomTriggerEl()?t=y:e&&e.length||Object(d.g)(l.f.MultiSelect,r.props.searchable,r.getFormatOptions().length)?(t=g.b,i=r.showClearBtn()):t=m.a;break;case l.f.Number:t=w;break;default:t=function(){return o.createElement("noscript",null)},i=!1}return{Comp:t,showClear:i,triggerEl:n}},r.getFormatOptions=function(){return(r.props.options||[]).map(function(e){var t=e.name||s.get(e.i18Key);return n.a({},e,{name:t})})},r.onChange=function(e){var t=r.props,n=t.onChange,o=t.field,i=t.type,a=t.matchTextMode,s=t.aggregation;n&&n(Object(d.c)(e,i,{field:o,matchTextMode:a,aggregation:s})),r.gta(e)},r.onClearValue=function(){r.props.onChange&&(r.props.onChange(void 0),r.props.skipLocalStorage||g.a.set(r.props.field,null)),r.gta(void 0,{action:"reset filter"})},r.handleGTASearch=function(){u.gta.event(n.a({action:"search field",category:r.props.type,method:"keyboard"},r.props.gta))},r.setShowClear=function(e){r.setState({showClear:e})},r.setWithMinHeight=function(e){r.setState({withMinHeight:e})},r.state={showClear:!0,withMinHeight:!1},r}return n.d(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.organizationId,r=e.projectId,n=e.searcherId,o=e.scopes,i=this.getScopeIds(n,o);this.searcherOptionsPageState=c.default.getSearcherOptionsInPage({scopeIds:i,id:n,_organizationId:t,_projectId:r})},t.prototype.getDefaultTriggerEl=function(){var e=this.props.triggerEl;if(e)return e;var t={disabled:!!this.props.disabled,isEmpty:!this.hasValue()};return this.props.inline?o.createElement(p.a,n.a({},t)):o.createElement(f.a,n.a({},t,{onClear:this.onClearValue}))},t.prototype.isUsingCustomTriggerEl=function(){return!!this.props.triggerEl},t.prototype.shouldWithMinHeight=function(e){return this.state.withMinHeight||!this.props.inline&&!!t.shouldWithMinHeightComps.find(function(t){return t===e})},t.prototype.hasValue=function(){var e=this.props.node;return!!e&&!!e.values.length},t.prototype.showClearBtn=function(){return!!this.props.inline},t.prototype.gta=function(e,t){if(!this.props.skipFilterContentGTA){var r=this.props,o=r.field,i=r.type,s=r.node,c={};if("text"===o&&e){var p=Object(d.a)(s,i).values,f=e.values,g=a.difference(f,p),h=a.difference(p,f);c={note1:g[0]||h[0],control:g.length?"on":"off"}}else if(i===l.f.Select){var m=e&&e.values[0];c={note1:void 0===m?"all":String(m)}}u.gta.event(j(n.a({category:o,type:this.getType()||i.toLowerCase()},c,this.props.gta,t)))}},t.prototype.render=function(){var e=this.props,t=e.type,r=e.node,i=e.title,s=e.searchable,u=this.getType(),c=this.getComponent(u),p=c.Comp,f=c.showClear,g=c.triggerEl,h=n.a({},a.omit(this.props,"node","type","tqlValue"),Object(d.a)(r,t),{inline:this.props.inline,isEmpty:!this.hasValue(),title:i,triggerEl:g,searchable:s,multiple:t!==l.f.Select,disabled:this.props.disabled,onChange:this.onChange,onClearValue:this.onClearValue,options:this.getFormatOptions(),type:u,handleGTASearch:this.handleGTASearch,getOptions:this.getRemoteOptions,setShowClear:this.setShowClear,setWithMinHeight:this.setWithMinHeight},t===l.f.MultiSelect?{selected:this.props.multiSelectorSelected}:{},t===l.f.Date?this.props.dateSelectorState:{}),m=o.createElement(p,n.a({},h));return this.isUsingCustomTriggerEl()?m:o.createElement(k.a,{showClear:f,minHeightSupport:this.shouldWithMinHeight(p),onClearValue:this.onClearValue,hasValue:this.hasValue(),inline:this.props.inline,disabled:this.props.disabled},m)},t.defaultProps={aggregation:!1},t.shouldWithMinHeightComps=[m.a,w,C.a],t}(o.PureComponent);r.d(t,"b",function(){return j}),r.d(t,"a",function(){return A})},ms7sa36K:function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"a",function(){return i});var n=r("eWa34jGb"),o=function(e){return n(e)&&/^[\x00-\x7F]*$/.test(e)},i=function(e){return o(e)&&e.indexOf("@mail.teambition.com")>=0}},n0MKG6gI:function(e,t,r){"use strict";r.d(t,"b",function(){return l}),r.d(t,"a",function(){return p}),r.d(t,"c",function(){return f});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r("d8Lq9UW2"),a=r("zT6SYcu2"),s=r("ISwK6kId"),u=r("EXoLhZ0Z"),c=Object(i.parserFactory)(),l=function(e,t){void 0===t&&(t=!1);var r=/^".*"$/.test(e),n=/^'.*'$/.test(e),o=r||n,i="'";return o?i=n?"'":'"':t&&(i='"'),{isAccurate:r,quote:i,escapedQuery:(o?e.substring(1,e.length-1):e).replace(/["'\\]/g,"\\$&").trim()}};var p=function(e,t,r,i,s){var p=function(e,t,r){var i=l(t.trim(),r),s=e.text;return 0===i.escapedQuery.length?o.omit(e,"text"):s?0===s.values.length?o.omit(e,"text"):n.a({},e,{text:n.a({},s,{values:s.values.map(function(e){return n.a({},e,{value:n.a({},e.value,{quote:i.quote,value:i.escapedQuery})})})})}):n.a({},e,{text:{logic:"OR",type:a.g.expression,values:[{field:{fieldType:a.f.Text,type:a.g.field,value:"text"},op:a.c.beq,type:a.g.expression,value:{quote:i.quote,type:a.g.string,value:i.escapedQuery}}]}})}(e,t,r),f=p.isInArchivedProject;f&&(p=o.omit(p,"isInArchivedProject"));var d=p.isInSuspendedProject;d&&(p=o.omit(p,"isInSuspendedProject"));var g=p.isSuspended;g&&(p=o.omit(p,"isSuspended"));var h=p.isArchived;h&&(p=o.omit(p,"isArchived"));var m=p.isTemplate;m&&(p=o.omit(p,"isTemplate"));var y={type:a.g.expression,logic:"AND",values:o.chain(p).values().compact().filter(function(e){return e.values.length>0}).value()},v=c.stringify(y);if(f&&f.values.length>0){var b=Object(u.c)(f)[0],_="";_="true"===b?"projectId IN tql(project, 'isArchived = "+b+"')":"(projectId = null OR projectId IN tql(project, 'isArchived = "+b+"'))",v=o.chain([v,_]).compact().join(" AND ").value()}if(d&&d.values.length>0){var S=Object(u.c)(d)[0],T="";T="true"===S?"projectId IN tql(project, 'isSuspended = "+S+"')":"(projectId = null OR projectId IN tql(project, 'isSuspended = "+S+"'))",v=o.chain([v,T]).compact().join(" AND ").value()}if(h&&h.values.length>0){var E="(isArchived = "+Object(u.c)(h)[0]+")";v=o.chain([v,E]).compact().join(" AND ").value()}if(g&&g.values.length>0){var O="(isSuspended = "+Object(u.c)(g)[0]+")";v=o.chain([v,O]).compact().join(" AND ").value()}if(m&&m.values.length>0){var w="(isTemplate = "+Object(u.c)(m)[0]+")";v=o.chain([v,w]).compact().join(" AND ").value()}return i&&(v=(v+" ORDER BY "+i+" "+s).trim()),v},f=function(e,t){void 0===t&&(t={});var r=t.forceAccurate,n=void 0!==r&&r,i=t.isBasicObject,a=void 0===i||i,u=t.withArchived,c=void 0===u||u,l=Object(s.b)();return a||(l=o.omit(l,"isInArchivedProject")),c||(l=o.omit(l,"isArchived")),p(l,e,n)}},n3Dgp7QT:function(e,t,r){"use strict";r.r(t),r.d(t,"librarySelectOne",function(){return a}),r.d(t,"libraryToggleAll",function(){return s}),r.d(t,"librarySetAll",function(){return u}),r.d(t,"libraryClearAll",function(){return c}),r.d(t,"reducer",function(){return l}),r.d(t,"getSelectAll",function(){return p}),r.d(t,"getList",function(){return f}),r.d(t,"getSelections",function(){return d}),r.d(t,"getSelectItems",function(){return g});var n=r("6SzIBtPz"),o=r("LzIVR7qZ"),i=Object(o.a)("LIBRARY",function(e){return e._id},function(e){return e.list}),a=i.action.toggleSelection,s=i.action.toggleAllSelection,u=i.action.setSelections,c=i.action.clearSelections,l=Object(n.b)(i.reducer,i.defaultState),p=i.reselect.getSelectAll,f=i.reselect.assignSelections,d=i.reselect.getSelections,g=i.reselect.getSelectItems},n5vI8skG:function(e,t,r){e.exports={node:"node__APNi"}},n84PV4hp:function(e,t,r){e.exports=r.p+"images/startdate-0.4cc9ae57.png"},nIZnkqXD:function(e,t,r){"use strict";var n=r("p58YVWMP"),o=r("mrSGxOB2"),i=r("IssmDVnT");i.SDKFetch.prototype.getProjectTemplateMembersPagination=function(e){var t="projecttemplates/"+e.projectTemplateId+"/members";return i.Page.defaultState(t,{pageSize:e.pageSize})},i.SDKFetch.prototype.getProjectTemplateRecommendMembers=function(e){var t="projecttemplates/"+e+"/recommend-members";return this.get(t)},i.SDKFetch.prototype.searchProjectTemplateInnerMembersPagination=function(e){var t="projecttemplates/"+e.projectTemplateId+"/members",r={q:e.keyword};return i.Page.defaultState(t,{pageSize:e.pageSize,urlQuery:r})},i.SDKFetch.prototype.searchProjectTemplateMembers=function(e,t,r){return this.get("projecttemplates/"+t+"/search-members",{_organizationId:e,q:r})},i.SDKFetch.prototype.getProjectTemplate=function(e){var t="projecttemplates/"+e;return this.get(t)},i.SDKFetch.prototype.filterProjectTemplatesFetch=function(e){var t="v2/organizations/"+e.organizationId+"/projecttemplates",r=e.filter.members,n=void 0===r?{}:r,i=e.filter?o.a({visible:e.filter.visible,q:e.filter.keyword,pageSize:e.pageSize||1e3},n):void 0;return this.get(t,i).map(function(e){return e.result})},i.SDKFetch.prototype.putProjectTemplateVisible=function(e,t){return this.put("projecttemplates/"+e+"/visible",{visible:t})},i.SDKFetch.prototype.putProjectTemplateMemberPermissions=function(e,t,r){return this.put("projecttemplates/"+e+"/members/"+t,{permissions:r.filter(function(e){return e!==n.a.get})})},i.SDKFetch.prototype.addProjectTemplateMembers=function(e,t,r){return this.post("projecttemplates/"+t+"/members",{_organizationId:e,$add:r.map(function(e){return{subjectType:e.subjectType,_subjectId:e.subjectId,permissions:e.permissions.filter(function(e){return e!==n.a.get})}})})},i.SDKFetch.prototype.delProjectTemplateMember=function(e,t){return this.delete("projecttemplates/"+e+"/members/"+t)},i.SDKFetch.prototype.delProjectTemplate=function(e){return this.delete("projecttemplates/"+e)};var a=r("nJ3YrKjr");r.d(t,"b",function(){return n.a}),r.d(t,"a",function(){return a.ProjectTemplateEventEmitter$})},nJ3YrKjr:function(e,t,r){"use strict";r.r(t),r.d(t,"ProjectTemplateEventEmitter$",function(){return o});var n=r("8yf6doCl"),o=new n.Subject},nL4olqOP:function(e,t,r){var n,o,i,a,s,u,c,l={}.hasOwnProperty;s=r("a+N5u/Cl"),c=r("sa1Ed382"),n=r("VuB9cZyl"),o=r("77NnVLwu"),a=r("wu4EEviu"),r("QyjeWo4p"),r("CxY0Mkc1"),u=["task","event"],i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="projects",t.prototype.model=o,t.prototype.initialize=function(){var e;return s.delay((e=this,function(){var r;return r=e._boundToObjectId||c.user.id,a.on(":new:projects/"+r,function(t){return e.add(t)}),e.on("add",function(e){var r,n;if((r=e.get("_organizationId"))&&!e.get("isArchived"))return null!=(n=t.find(r))?n.add(e.toJSON()):void 0})})),t.__super__.initialize.apply(this,arguments)},t.prototype.getStarProjects=function(){return this.filter(function(e){return e.get("isStar")})},t.prototype.getInvolvedStarProjects=function(){return this.filter(function(e){return e.get("isStar")&&e.getRoleScope()>=-1})},t.prototype.getInvolvedOrganizationProjects=function(){return this.filter(function(e){return null!=e.get("_organizationId")&&e.getRoleScope()>=-1})},t.prototype.getGroupedByWorkspace=function(){var e,t;return e=c.PREFERENCE.get("lastWorkspace"),t=this.getCurrentWorkspaceProjects(e),[{id:"star",title:tb_i18n.get("flagged.projects"),projects:t.filter(function(e){return e.get("isStar")})},{id:"joined",title:tb_i18n.get("all.project"),projects:t}]},t.prototype.getGroupByOrganization=function(e,t){var r,n,i,a,c,l,p;return e?(l=this.models,u.indexOf(t)>-1&&(i=function(){switch(t){case"task":return tb_i18n.get("indie.space.task");case"event":return tb_i18n.get("indie.space.event")}}(),n=e.map(function(e){var t;return t=e.id,new o({_id:t,_organizationId:t,name:i},{bindByMatrix:!1})}),l=l.concat(n)),r=s.groupBy(l,function(e){return e.get("_organizationId")}),a=function(t,r){return!!e.get(r)},p=s.chain(r).omit(a).values().flatten().value(),c=s.chain(r).pick(a).map(function(t,r){return{id:r,title:e.get(r).get("name"),projects:s.sortBy(t,function(e){return e.id!==r})}}).sortBy(function(t){return e.get(t.id).get("pinyin")}).value(),[{id:"star",title:tb_i18n.get("flagged.projects"),projects:this.getStarProjects()}].concat(c,{id:"joined",title:tb_i18n.get("my.projects"),projects:p})):[]},t.prototype.comparator=function(e){return e.get("pinyin")||e.get("name")},t.prototype.joinRooms=function(){if(!this.subscribed)return this.subscribed=!0,a.join("projects"),this.on("add",function(e){return e.joinRoom()}),this.on("remove",function(e){return e.leaveRoom()})},t.prototype.getOrgWorkspaceProjects=function(e){return this.filter(function(t){return t.get("_organizationId")===e}).filter(function(e){return e.getRoleScope()>=0})},t.prototype.getPersonalStarredProjects=function(){return this.filter(function(e){return e.get("orgLevel")<-1&&e.get("isStar")&&!e.get("isArchived")&&!e.get("isSuspended")})},t.prototype.getPersonalWorkspaceProjects=function(){return this.filter(function(e){return e.get("orgLevel")<-1}).filter(function(e){return e.getRoleScope()>=0})},t.prototype.getCurrentWorkspaceProjects=function(e){return"personal"===e?this.getPersonalWorkspaceProjects():this.getOrgWorkspaceProjects(e)},t.prototype.getStarredProjects=function(){return this.models.filter(function(e){return e.get("isStar")})},t.prototype.getPersonalOwnedProjects=function(){return s.chain(this.getPersonalWorkspaceProjects()).filter(function(e){return 2===e.getRoleScope()}).value()},t.prototype.getGroupListByStared=function(e){var t,r,n,o,i,a,u;return null==e&&(e={}),t=this.models,e.isWorkspace&&(o=c.PREFERENCE.get("lastWorkspace"),t=this.getCurrentWorkspaceProjects(o)),t=t.filter(function(t){var r,n;return(r=e.checkAppEnabled)?(n={tasks:"task.post",posts:"post.post",events:"event.post"},t.getRoleScope()>=0&&t.isAppEnabled(r)&&t.hasPermission(n[r])):t.getRoleScope()>=0}),n={_id:null,title:tb_i18n.get("flagged.projects"),name:tb_i18n.get("flagged.projects"),pinyin:null,py:null,isGroup:!0},r={_id:null,title:tb_i18n.get("unflagged.projects"),name:tb_i18n.get("unflagged.projects"),pinyin:null,py:null,isGroup:!0},u=(a=s.partition(t,function(e){return e.get("isStar")}))[0],i=a[1],s.flatten([u.length?n:[],u,i.length?r:[],i]).map(function(e){return e.isGroup?e:{_id:e.get("_id"),title:e.get("name"),name:e.get("name"),pinyin:e.get("pinyin"),py:e.get("py"),isStar:e.get("isStar"),_organizationId:e.get("_organizationId"),_orgRoleId:e.get("_orgRoleId"),_roleId:e.get("_roleId")}})},t}(),o.Collection=i,delete i.getOne,delete i.findOne,e.exports=i},nMjh9H6T:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("4c1CS0b3"),i=r("6SzIBtPz"),a=r("NOGqly5s"),s=r("tLZJUYWX"),u=r("GESwhXbR"),c=r("s0r7VfKc"),l=r("oRqJmROU"),p=r("IssmDVnT");function f(){return c.default.fetch.get("search/export-fields")}var d,g=r("G5hTTzDg");r.d(t,"a",function(){return _}),r.d(t,"d",function(){return I}),r.d(t,"c",function(){return k}),r.d(t,"b",function(){return j});var h=r("bZr3G77e"),m={presetFields:[],customFields:[],hasMore:!1,isPresetFieldsLoading:!1,isCustomFieldsLoading:!1},y=function(e){return"SEARCH_EXPORT_MODAL/"+e},v=function(e){return y(e+"/SUCCESS")},b=function(e){return y(e+"/FAILURE")},_={getPresetFields:Object(i.a)(y("GET_PRESET_FIELDS")),getPresetFieldsSuccess:Object(i.a)(v("GET_PRESET_FIELDS")),getPresetFieldsFailed:Object(i.a)(b("GET_PRESET_FIELDS")),getCustomFields:Object(i.a)(y("GET_CUSTOM_FIELDS")),getCustomFieldsSuccess:Object(i.a)(v("GET_CUSTOM_FIELDS")),getCustomFieldsFailed:Object(i.a)(b("GET_CUSTOM_FIELDS")),getCustomFieldsInProject:Object(i.a)(y("GET_PROJECT_CUSTOM_FIELDS")),getCustomFieldsInProjectSuccess:Object(i.a)(v("GET_PROJECT_CUSTOM_FIELDS")),getCustomFieldsInProjectFailed:Object(i.a)(b("GET_PROJECT_CUSTOM_FIELDS")),getMoreCustomFields:Object(i.a)(y("GET_MORE_CUSTOM_FIELDS")),getMoreCustomFieldsInProject:Object(i.a)(y("GET_MORE_PROJECT_CUSTOM_FIELDS")),getSearchResultsExport:Object(i.a)(y("GET_SEARCH_RESULTS_EXPORT")),getSearchResultsExportSuccess:Object(i.a)(v("GET_SEARCH_RESULTS_EXPORT")),getSearchResultsExportFailed:Object(i.a)(b("GET_SEARCH_RESULTS_EXPORT")),exitPagination:Object(i.a)(y("EXIT_PAGINATION")),initExport:Object(i.a)(y("INIT_EXPORT"))},S=function(e){return n.a({},e,{isCustomFieldsLoading:!0})},T=S,E=function(e,t){var r=t.payload,o=r.result,i=r.hasMore;return n.a({},e,{isCustomFieldsLoading:!1,customFields:o,hasMore:i})},O=E,w=function(e){return n.a({},e,{isCustomFieldsLoading:!1})},C=w,I=function(e){return e.indexOf("cf:")>-1?e.slice("cf:".length):e},k=Object(i.b)(((d={})[""+_.getPresetFields]=function(e){return n.a({},e,{isPresetFieldsLoading:!0})},d[""+_.getPresetFieldsSuccess]=function(e,t){var r=t.payload.result;return n.a({},e,{isPresetFieldsLoading:!1,presetFields:r})},d[""+_.getPresetFieldsFailed]=function(e){return n.a({},e,{isPresetFieldsLoading:!1})},d[""+_.getCustomFields]=S,d[""+_.getCustomFieldsSuccess]=E,d[""+_.getCustomFieldsFailed]=w,d[""+_.getCustomFieldsInProject]=T,d[""+_.getCustomFieldsInProjectSuccess]=O,d[""+_.getCustomFieldsInProjectFailed]=C,d[""+_.initExport]=function(){return n.a({},m)},d),m),j=Object(a.a)(function(e){return e.ofType(""+_.getPresetFields).switchMap(f).map(_.getPresetFieldsSuccess).catch(function(){return o.Observable.of(_.getPresetFieldsFailed())})},function(e){var t=e.ofType(""+_.getCustomFields).filter(l.a),r=e.ofType(""+_.getMoreCustomFields);return t.switchMap(function(t){var i,a,s,u,l,f=t.payload,d=(a=(i=f).pageSize,s=i.q,u=n.g(i,["pageSize","q"]),l=n.a({},u,{q:encodeURIComponent(s)}),p.Page.defaultState("search/export-fields/customfields",{pageSize:a||20,urlQuery:l}));return c.default.fetch.expandPage(d,{loadMore$:r}).takeUntil(e.ofType(""+_.exitPagination)).map(_.getCustomFieldsSuccess).catch(function(){return o.Observable.of(_.getCustomFieldsFailed())})})},function(e){var t=e.ofType(""+_.getCustomFieldsInProject).filter(l.a),r=e.ofType(""+_.getMoreCustomFieldsInProject);return t.switchMap(function(t){var i,a,s,u,l,f=t.payload,d=(a=(i=f).pageSize,s=i.q,u=n.g(i,["pageSize","q"]),l=n.a({},u,{q:s}),p.Page.defaultState("searchers/customfields",{pageSize:a||20,urlQuery:l}));return c.default.fetch.expandPage(d,{loadMore$:r}).takeUntil(e.ofType(""+_.exitPagination)).map(_.getCustomFieldsInProjectSuccess).catch(function(){return o.Observable.of(_.getCustomFieldsInProjectFailed())})})},function(e){return e.ofType(""+_.getSearchResultsExport).filter(function(e){return void 0!==e.payload}).switchMap(function(e){var t=e.payload;u.Toast.success({message:s.get("search.export.start.download")});var r=t,i=r.fields,a=void 0===i?[]:i,c=n.g(r,["fields"]);return Object(g.a)("tis/search/export",n.a({},c,{fields:a.map(I).join(","),timezone:h.timezone()})).map(_.getSearchResultsExportSuccess).catch(function(){return u.Toast.error(s.get("tasklist.dump.export.error")),o.Observable.of(_.getSearchResultsExportFailed())})})})},nOpTYCro:function(e,t,r){e.exports=r.p+"images/bookkeeping-poster.bd9e3736.png"},nhsrbVjK:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r("TSYQbtd+"),a=r.n(i),s=r("GESwhXbR"),u=(r("og6C1zr4"),"search-new__filter-anchor"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.render=function(){var e=this.props,t=e.label,r=e.className,i=(e.collapsed,n.g(e,["label","className","collapsed"])),c=a()(u,r);return o.createElement("div",{className:c},o.createElement(s.TextButton,n.a({},i),o.createElement("span",{className:u+"__text"},t),o.createElement(s.Icon,{className:u+"__icon",name:"chevron-down"})))},t}(o.PureComponent),l=r("Oqv97qYP"),p=r("kUx8H0Nt"),f=r("5650NvE0");r.d(t,"a",function(){return d});var d=function(){var e=Object(f.a)(c);return function(t){function r(e){var r=t.call(this,e)||this;return r.setAnchorFrameRef=function(e){return r.anchorFrameRef=e},r.handleSelectorChange=function(e,t){r.payload=e,r.setState({label:t}),r.anchorFrameRef.getDropdownRef().close(),r.onContentTab()},r.onContentTab=function(){r.setState({openedInner:!r.state.openedInner})},r.onMenuHide=function(){r.anchorFrameRef.getDropdownRef().close()},r.renderContent=function(){var e=r.props,t=e.min,n=e.max,i=e.relative,a=e.dateSelecteds,s=e.title,u=e.onSubmit;return o.createElement(l.a,{min:t,max:n,relative:i,dateSelecteds:a,openedInner:r.state.openedInner,onContentTab:r.onContentTab,onChange:r.handleSelectorChange,title:s,onHide:r.onMenuHide,onSubmit:u})},r.handleDropdownHide=function(){var e=r.props.onChange;r.setState({openedInner:!1}),e&&r.payload&&e(r.payload)},r.state={label:Object(p.a)(e),openedInner:!1},r}return n.d(r,t),r.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({label:Object(p.a)(e)})},r.prototype.render=function(){return o.createElement(e,{className:"search-filter-date-selector-anchor",ref:this.setAnchorFrameRef,persistence:!0,label:this.state.label,onHide:this.handleDropdownHide,content:this.renderContent(),anchorEl:this.props.triggerEl})},r}(o.PureComponent)}},nlT03vip:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r("4c1CS0b3"),o=r("s0r7VfKc"),i=r("sa1Ed382"),a=r("fqeXJ4zE"),s=r("D5oRvhYV"),u=n.Observable.defer(function(){return o.default.fetch.getAoneUserType(i.user.get("openId"))}).timeout(2e3).catch(function(){return n.Observable.of(s.a.NEW)}).shareReplay(1),c=function(){return Object(a.a)()?u:n.Observable.of(s.a.NEW)}},nn33r5fQ:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("GESwhXbR"),i=r("TSYQbtd+"),a=r.n(i),s=r("q1tIBJhx"),u=r.n(s),c=r("RFMl/ow3"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onOpenMemberCard=function(e,r){return function(n){n.stopPropagation(),n.nativeEvent&&(n.nativeEvent.stopPropagation(),n.nativeEvent.stopImmediatePropagation()),t.props.openMemberCardHandler(r,e,t.toggleRef)}},t.saveRef=function(e){t.toggleRef=e},t.renderAvatar=function(e){return u.a.createElement("div",{key:e._id,ref:t.saveRef,className:"avatar-wrap",onClick:t.onOpenMemberCard(e._id,t.props.projectId)},u.a.createElement(o.Tooltip,{title:e.name},u.a.createElement(o.Avatar,{size:"small",src:e.avatarUrl})))},t}return n.d(t,e),t.prototype.componentWillUnmount=function(){this.memberCardView&&this.memberCardView.remove()},t.prototype.renderAvatars=function(){var e=this.props.users.slice(0,3),t=this.props.users.slice(3),r=e.map(this.renderAvatar);return t.length&&r.push(u.a.createElement("div",{className:"avatar-mask",key:"rest-users"},this.props.users.length)),r},t.prototype.render=function(){var e=a()(c["user-avatar"],this.props.className);return u.a.createElement("div",{className:e},this.renderAvatars())},t}(u.a.PureComponent),p=r("RSFv0j4e"),f=function(e,t){return e.localeCompare(t)},d=function(e,t){var r=null,n=null;e.owner&&e.owner.length&&(r=e.owner[0].name),t.owner&&t.owner.length&&(n=t.owner[0].name);var o=0,i=0;return r&&n&&(o=f(r,n),i=f(n,r)),Object(p.a)(o,i)};r.d(t,"a",function(){return l}),r.d(t,"b",function(){return d})},oEuShWjr:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("tLZJUYWX"),o=r.n(n),i=function(e){return e.customFieldEntity?e.customFieldEntity.name:o.a.get("project.cluster."+e.key)}},oPs7WnEA:function(e,t,r){"use strict";r.r(t),r.d(t,"getOnSwitchBoardMode",function(){return v}),r.d(t,"formatFiltersLinkage",function(){return _}),r.d(t,"filterSearcher",function(){return S}),r.d(t,"isVaildSearcherByScrumType",function(){return T}),r.d(t,"getSearchersTag",function(){return E}),r.d(t,"presetFiltersByAppName",function(){return w}),r.d(t,"getDefaultPresetFilters",function(){return C}),r.d(t,"getFilteredSearchers",function(){return I}),r.d(t,"getInitialFilter",function(){return k}),r.d(t,"formatSearchers",function(){return j}),r.d(t,"getTqlValuesByFilters",function(){return A}),r.d(t,"getValuesByTqlValue",function(){return P}),r.d(t,"getOrderByInfo",function(){return R}),r.d(t,"getOrderByTql",function(){return N}),r.d(t,"getCustomViewBySmartGroup",function(){return x}),r.d(t,"getDefaultSortMethod",function(){return D}),r.d(t,"getOrderBy",function(){return M}),r.d(t,"getSmartGroupViewOption",function(){return F});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r.n(o),a=r("WbsqMM+H"),s=r.n(a),u=r("d8Lq9UW2"),c=r("px/Tdvb+"),l=r("lfya3Nc5"),p=r("zT6SYcu2"),f=r("CGal/mJM"),d=r("B9Qi/5SX"),g=r("F4Sfg53m"),h=r("ISwK6kId"),m=r("n0MKG6gI"),y=Object(u.parserFactory)(),v=s()(function(e){return function(t){g.BoardTaskFlowProjectStorage.setAllTasksView(e,{viewType:t})}},{length:1}),b={projectId:["tasklistId","stageId"],tasklistId:["stageId"],scenariofieldconfigId:["taskflowId","taskflowstatusId"]},_=function(e,t){var r=Object.assign({},e);return Object.keys(t).forEach(function(e){b[e]&&(r=i.a.omit(r,b[e]))}),r},S=function(e){var t=e.searcher,r=e.tasklistId,n=e.scrumSmartGroupType,o=e.smartGroupId;return"isSubTask"!==t.id&&(("tasklistId"!==t.id||!r)&&(!(!o&&"sprintId"===t.id&&"sprint"===n)&&(!(!o&&"storygroupId"===t.id&&"story"===n)&&!(!o&&"buggroupId"===t.id&&"bug"===n))))},T=function(e,t){if(!t)return!0;var r={story:["scenariofieldconfigId","tasklistId","stageId"],"story.custom":["scenariofieldconfigId","tasklistId","stageId"],bug:["scenariofieldconfigId","tasklistId","stageId"],"bug.custom":["scenariofieldconfigId","tasklistId","stageId"],sprint:["tasklistId","stageId"],"sprint.custom":["tasklistId","stageId"]};if(r[t]){var n=r[t];return!n||n.indexOf(e)<0}return!0};function E(e,t,r){var n=!!t&&!d.b.checkId(t);return O(n?{smartGroupId:t}:r?{smartGroupId:r}:{projectId:e})}var O=function(e){var t=e.projectId,r=e.smartGroupId;return t?"project:"+t:r?"smartgroup:"+r:""},w={sprint:function(e){var t=e.sprintId,r={};if(t&&"all"!==t){var n="unplanned"===t?"null":t;r.sprintId=Object(h.a)({values:[n]},p.f.Select,{field:"sprintId"})}return r},story:function(e){var t=e.commonGroupId,r={};return r.storygroupId=t?Object(h.a)({values:[t]},p.f.Select,{field:"storygroupId"}):Object(h.a)({values:["all"]},p.f.Select,{field:"storygroupId"}),r},bug:function(e){var t=e.commonGroupId,r={};return r.buggroupId=t?Object(h.a)({values:[t]},p.f.Select,{field:"buggroupId"}):Object(h.a)({values:["all"]},p.f.Select,{field:"buggroupId"}),r}},C=function(e){var t=e.tasklistId,r=e.scrumSmartGroupId,n={};return t&&!r&&(n.tasklistId=Object(h.a)({values:[t]},p.f.Select,{field:"tasklistId"})),n};function I(e,t,r){return t.reduce(function(e,t){var r=t.searchers;return n.h(e,r)},[]).concat(r).filter(function(t){var r=t.id,n=t.tqlValue;return e.indexOf(r)>=0&&(void 0!==n&&""!==n)})}function k(e,t){var r={text:Object(h.a)({values:["text"]},p.f.RangeText)};return Object.assign(r,e),t.forEach(function(e){var t=Object(h.a)(e.tqlValue,e.type,{field:e.id,matchTextMode:e.matchTextMode});t&&(r[e.id]=t)}),r}function j(e){if(void 0===e.tqlValue||""===e.tqlValue)return e;switch(e.type){case p.f.Select:case p.f.MultiSelect:if(!Array.isArray(e.tqlValue))return console.warn(""+e.id+" tqlValue  "+e.type+" "),e;var t=e.options||[],r=e.tqlValue,o=t.map(function(e){return""+e.value});r.forEach(function(e){o.indexOf(""+e.value)<0&&(e.name||e.i18Key)&&t.push(e)});var i=r.map(function(e){return e.value});return n.a({},e,{options:t,tqlValue:{values:i}});case p.f.Number:var a={max:(s=e.tqlValue[0]).max,min:s.min,relative:!0};return n.a({},e,{tqlValue:a});case p.f.Date:var s=e.tqlValue,u=y.tokenize(s)[0],c=null,l=null;if(u.left||u.right)c=u.right?y.stringify(u.right.value):null,l=u.left?y.stringify(u.left.value):null;else{var f=y.stringify(u.value);u.op===p.c.le?l=f:u.op===p.c.ge&&(c=f)}var d={min:c,max:l,relative:!(!c&&!l)||null};return n.a({},e,{tqlValue:d});case p.f.Text:case p.f.StrictText:r=e.tqlValue;return n.a({},e,{tqlValue:{value:r}})}return e}function A(e){var t={};return Object.keys(e).forEach(function(r){var n,o=((n={})[r]=e[r],n);t[r]=Object(m.a)(o,"",!1)}),t}var P=function(e,t){if(t===p.f.MultiSelect||t===p.f.Select){var r=e.match(/^\((.+)\)$/);return r?r[1].split(" OR ").map(function(e){return e.split(" = ")[1]}):[]}return[]},R=function(e){var t;return((t={})[c.SortMethod.CUSTOM]={sortedTqlKey:"custom",order:p.d.Asc},t[c.SortMethod.CREATED_ASC]={sortedTqlKey:"created",order:p.d.Asc},t[c.SortMethod.CREATED_DESC]={sortedTqlKey:"created",order:p.d.Desc},t[c.SortMethod.UPDATED_ASC]={sortedTqlKey:"updated",order:p.d.Asc},t[c.SortMethod.UPDATED_DESC]={sortedTqlKey:"updated",order:p.d.Desc},t[c.SortMethod.STARTDATE]={sortedTqlKey:"startDate",order:p.d.Asc},t[c.SortMethod.STARTDATE_DESC]={sortedTqlKey:"startDate",order:p.d.Desc},t[c.SortMethod.DUEDATE]={sortedTqlKey:"dueDate",order:p.d.Asc},t[c.SortMethod.PRIORITY]={sortedTqlKey:"priority",order:p.d.Desc},t)[e]||{sortedTqlKey:void 0,order:void 0}},N=function(e){if(!e)return"";var t=R(e);return Object(m.a)({},"",!1,t.sortedTqlKey,t.order)},x=function(e){return!e||d.b.checkId(e._id)?null:e},D=function(e,t,r){var n;return r&&(n=r.orderBy),n||e.getCurrentSortMethod(t)},M=function(e){switch(e){case c.SortMethod.CREATED_ASC:return"created_asc";case c.SortMethod.DUEDATE:return"duedate";case c.SortMethod.PRIORITY:return"priority";case c.SortMethod.STARTDATE:return"startdate";case c.SortMethod.STARTDATE_DESC:return"startdate_desc";default:return"created_desc"}};function F(e,t,r,n,o){var i=e===f.BoardViewType.Kanban,a=i?t:void 0,s=i?r:void 0;return{type:e,vertical:"noop"===a?void 0:a,horizontal:"noop"===s?void 0:s,_verticalIds:Object(l.isScenarioConfigStatus)(a)&&n||void 0,_horizontalId:void 0,taskLayer:o}}},oRPyOBnq:function(e,t,r){"use strict";r.r(t);var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r.n(o),a=r("GESwhXbR"),s={task:r("xfUIC7bO").default,requirement:r("/3r4N/+c").default,bug:r("eOtWl4Ym").default,hr:r("7szm2rLY").default,resource:r("fgCHRV6l").default,order:r("4lDISsSE").default,salesLead:r("8Es+kdS2").default,subtask:r("N99aBceX").default,call:r("itycypeK").default,visit:r("oa/9+PSW").default,forum:r("5e77VwZ1").default},u={event:r("VFdZXmy3").default,lecture:r("wo9V/tbg").default,training:r("VqAGOIEF").default,workshop:r("A0zvKtnb").default,forum:r("g6ymz/dA").default,seminar:r("Gz76M/6t").default,personal:r("uk8NZOVN").default},c={testcase:r("UTVzL6OD").default},l=(r("KAy9iCWM"),{task:s,event:u,testcase:c}),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.render=function(){var e=this.props,r=e.className,i=e.type,a=e.icon,s=n.g(e,["className","type","icon"]),c=(l[i]||u)[a];return c?!!c&&o.createElement("svg",n.a({className:r||t.defaultElmCls,"aria-hidden":"true"},s),o.createElement("use",{xlinkHref:"#"+c.id})):null},t.defaultElmCls="field-config-icon",t}(o.PureComponent),f=r("fVL/a9Qu"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickConfig=function(){t.props.onClickConfig(t.props.config)},t}return n.d(t,e),t.prototype.render=function(){var e=this.props,t=e.config,r=e.isChosen;return i.a.createElement("li",{className:f["menu-item"],onClick:this.onClickConfig},i.a.createElement(p,{icon:t.icon,type:this.props.boundToObjectType}),i.a.createElement("span",{className:"config-name"},t.name),r&&i.a.createElement(a.Icon,{name:"tick"}))},t}(i.a.PureComponent);r.d(t,"FieldConfigMenuItem",function(){return d}),r.d(t,"FieldIcon",function(){return p}),r.d(t,"TaskFieldConfigIconMap",function(){return s}),r.d(t,"EventFieldConfigIconMap",function(){return u}),r.d(t,"TestcaseFieldConfigIconMap",function(){return c})},oRqJmROU:function(e,t,r){"use strict";function n(e){return null!=e}function o(e){return!0===e}function i(e){return null!=e.payload}function a(e){return e instanceof Element}r.d(t,"c",function(){return n}),r.d(t,"d",function(){return o}),r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a})},"oa/9+PSW":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"visit",use:"visit-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="visit"><path fill="#FFB74C" fill-rule="evenodd" d="M2 0h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm11.1 9.275V6.087c0-.382-.255-.637-.637-.637H10.55V3.537c0-.382-.255-.637-.638-.637H6.087c-.382 0-.637.255-.637.637V5.45H3.537c-.382 0-.637.255-.637.638v3.187c0 .383.255.637.637.637h8.925c.383 0 .638-.255.638-.637zm-6.375-5.1h2.55V5.45h-2.55V4.175zm-3.188 7.013v1.274c0 .383.256.638.638.638h7.65c.383 0 .638-.255.638-.637v-1.275H3.537z" /></symbol>'});a.a.add(s);t.default=s},odY26VIi:function(e,t,r){var n,o,i,a,s,u,c={}.hasOwnProperty;a=r("a+N5u/Cl"),u=r("sa1Ed382"),n=r("VuB9cZyl"),o=r("cDm32Cmn"),i=r("wu4EEviu"),s=r("a2Z1fDJ7").sanitize,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="members",t.prototype.model=o,t.prototype.boundToObjectType="project",t.prototype.parse=function(e,t){var r,n,o,i;if(!e)return e;for(n=0,o=(r=Array.isArray(e)?e:[e]).length;n<o;n++)(i=r[n])._userId?i._id=i._userId:i._userId=i._id,i.avatarUrl=s(i.avatarUrl);return e},t.prototype.listen=function(){var e,t;if(!this.listened)return this.listened=!0,e=this.name,this._boundToObjectId&&(e+="/"+this._boundToObjectId),i.on(":new:"+e,(t=this,function(e){return t.add(e)})),i.on(":refresh:"+e,function(e){return function(t){var r;return t?(r=e.findWhere({_memberId:t}))?r.fetch({success:function(t){return e.add(t)}}):r||"project"!==e.boundToObjectType?void 0:o.fetch(t,{url:"members/"+t,success:function(t){return e.add(t)}}):e.fetch()}}(this)),i.on(":remove:"+e,function(e){return function(t){var r;return r=e.findWhere({_memberId:t}),e.remove(r)}}(this))},t.prototype.sync=function(e,r,n){var o,i;switch(n||(n={}),n.url||(n.url="v2/"+this.boundToObjectType+"s/"+this._boundToObjectId+"/members"),o=n.success||function(){},e){case"search":n.url="users",n.type="GET",n.processData=!0;break;case"create":n.success=(i=this,function(e){return i.update(e,n),o(e)})}return t.__super__.sync.apply(this,arguments)},t.prototype.comparator=function(e,t){var r,n;return n=u.user.id,e.get("_id")===n?-1:t.get("_id")===n?1:e.get("isDisabled")?1:t.get("isDisabled")?-1:((r=t.getRoleScope()-e.getRoleScope())||(e.get("pinyin")>t.get("pinyin")?r=1:e.get("pinyin")<t.get("pinyin")&&(r=-1)),r)},t.prototype.getParams=function(e,t){if("read"===e)return{boundToObjectType:t.boundToObjectType||this.boundToObjectType,_boundToObjectId:this._boundToObjectId,all:!0}},t.prototype.search=function(e,t,r){return r||(r={}),r.data||(r.data={}),r.data[e]=t,this.sync("search",this,r)},t.prototype.getMemberIds=function(){return this.pluck("_id")},t.prototype.toJSONActive=function(){return this.toJSON().filter(function(e){return!e.isDisabled})},t.prototype.addMember=function(e,t){return t||(t={}),t.attrs=e,this.sync("create",this,t)},t.prototype.fetchMembers=function(e,t){return null==t&&(t={}),e=Array.isArray(e)?e:[e],t.attrs={_userId:e},this.sync("read",this,t)},t.prototype.removeMember=function(e,t){return null==t&&(t={}),t.url=this.boundToObjectType+"s/"+this._boundToObjectId+"/members/"+e,t.wait=!0,this.sync("delete",this,t)},t.prototype.enableMember=function(e,t){return null==t&&(t={}),t=a.extend({url:"organizations/"+this._boundToObjectId+"/members/"+e+"/enable",wait:!0,attrs:{isDisabled:!1}},t),this.sync("update",this,t)},t.prototype.disableMember=function(e,t){return null==t&&(t={}),t=a.extend({url:"organizations/"+this._boundToObjectId+"/members/"+e+"/disable",wait:!0,attrs:{isDisabled:!0}},t),this.sync("update",this,t)},t.prototype.findMember=function(e){return this.findWhere({_userId:e})},t.prototype.getOrganizationMembers=function(){return this.filter(function(e){return null!=e.get("_organizationId")})},t}()},og6C1zr4:function(e,t,r){},"ohd6/vMg":function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return i});var n=r("6SzIBtPz"),o=Object(n.a)("ASSIGN_STATE_TO_INVITE_MEMBERS_MODAL"),i=Object(n.a)("UNMOUNT_INVITE_MEMBERS_MODAL")},ojFLe4v5:function(e,t,r){e.exports={badge:"badge__rWCV","board-view-mode-dropdown":"board-view-mode-dropdown__1fyn","not-found-wrapper":"not-found-wrapper__1DZw","not-found":"not-found__1z4e"}},olrDaloP:function(e,t,r){e.exports=r.p+"images/posts-poster.ae43943c.png"},oq1bWpp9:function(e,t,r){var n,o,i,a,s,u,c,l,p,f,d,g,h={}.hasOwnProperty;f=r("a+N5u/Cl"),g=r("sa1Ed382"),n=r("qHH6+g6Q"),o=r("wd/RKGTj"),a=r("XQ5nL9cp"),p=r("3eMzznN/"),l=r("GESwhXbR").Toast,s=r("HHtVDBJc"),u=r("wu4EEviu"),c=r("T6KpLPMz").TASK_VALID_STATUS_KINDS,d=r("90U+kJWN").isVisibleTask,i=r("HDJEOtNh").ProjectAccess,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="task",t.prototype.urlRoot="tasks",t.prototype.defaults=function(){return{ancestorIds:[],objectType:"task",isDone:!1,isRedo:!1,content:"",note:"",priority:0,involveMembers:[],reminder:{rules:[],members:[]},subtaskCount:{total:0,done:0},workTime:{totalTime:0,usedTime:0,unit:"minute"}}},t.prototype.listen=function(){var e;if(!this.listened)return t.__super__.listen.apply(this,arguments),this.on("change:visible change:involveMembers",function(){return this.set("isVisible",this.checkIsVisible())}),this.on("change:isDone",function(){var e;if(this.get("isDone"))return null!=(e=t.Collection.find(this.id))?e.each(function(e){if(!e.get("isDone"))return e.set({isDone:!0})}):void 0}),this.on("change:isArchived",function(){var e;if(this.get("isArchived"))return null!=(e=t.Collection.find(this.id))?e.each(function(e){if(!e.get("isArchived"))return e.set({isArchived:!0})}):void 0}),u.on(":change:"+this.name+"/"+this.id,(e=this,function(t){var r;if(null!=t.isArchived)return t.isArchived&&null!=(r=e.collection)?r.remove(e):void 0})),this.get("parent")?u.on(":change:task/"+this.get("parent")._id,function(e){return function(t){var r;if(null!=t.isDone)return(r=f.clone(e.get("parent"))).isDone=t.isDone,e.set({parent:r})}}(this)):void 0},t.prototype.parse=function(e){return(e=f.extend(this.toJSON(),e))._executorId||(e._executorId=""),e.executor&&e.executor._id!==e._executorId&&(e.executor=null),e.isVisible=d(e,g.user.id,i.hasProjectPrivacyPermission),e},t.prototype.isIntegral=function(){var e,t;return"ancestorIds",e=["ancestorIds","parent","involvers"],f.every(e,(t=this,function(e){var r,n,o,i;return i=t.get(e),n=!f.isUndefined(i),"ancestorIds"===e?(r=i,n&&(null!=(o=t.get("ancestors"))?o.length:void 0)===(null!=r?r.length:void 0)):n}))},t.prototype.fetchDependencies=function(e){var t,r;return e||(e={}),e.url=this.url()+"/dependencies",t=e.success||function(){},e.success=(r=this,function(e){return r.set(e),t(e)}),this.sync("read",this,e),this},t.prototype.markDone=function(){return this.saveAttr("isDone",!0)},t.prototype.markUndo=function(){return this.saveAttr("isDone",!1)},t.prototype.editDate=function(e,t,r){var n;return null==r&&(r={}),(null!=(n=(n=this.get(e))?new Date(n):null)?n.toString():void 0)!==(null!=t?t.toString():void 0)?(r.attrs={},r.attrs[e]=t,this.save(null,r)):"function"==typeof r.success?r.success():void 0},t.prototype.updateStartDueDate=function(e){return this.saveAttr("start_due",null,e)},t.prototype.updateContent=function(e){return this.save(null,{attrs:{content:e}}),this},t.prototype.updateExecutor=function(e,t){return t||(t={}),t.attrs={_executorId:e},this.save(null,t),this},t.prototype.updateCustomField=function(e){return new Promise((t=this,function(r,n){return t.sync("update",t,{url:t.url()+"/customfields",attrs:e,success:function(e){return t.set(e),r(e)},error:n})}));var t},t.prototype.checkReminderChanged=function(e){var t;return t=this.get("reminder"),!f.isEqual(t,e)},t.prototype.setReminder=function(e){if(this.checkReminderChanged(e))return this.set("reminder",e)},t.prototype.updateReminder=function(e){var t,r,n;return r=this.get("reminder"),this.checkReminderChanged(e)?(t={rules:e.rules,changeMembers:{add:f.difference(e.members,r.members),del:f.difference(r.members,e.members)}},new Promise((n=this,function(e,r){return n.sync("update",n,{url:n.url()+"/reminder",silentError:!0,attrs:{reminder:t},success:function(t){return n.set(t),e(t)},error:function(e){return l.error(e),r()}})}))):Promise.resolve()},t.prototype.getScope=function(){var e,t;return this.get("isDone")?"past":(e=o(this.get("dueDate")||null).valueOf(),t=o().endOf("day"),this.get("startOnToday")||e&&e<=t.valueOf()?"today":e&&e<=t.add(7,"days").valueOf()?"recent":"future")},t.prototype.isIndie=function(){return!this.get("_projectId")&&this.get("_organizationId")},t.prototype.isInvolved=function(e){return f.find(this.get("involveMembers"),function(t){return t===e})},t.prototype.isExecutor=function(e){var t,r;return!(t=this.get("_executorId")===e)&&(r=this.get("subtasks"))&&(t=!!f.find(r,function(t){return t._executorId===e})),t},t.prototype.isSubtask=function(){return this.get("ancestorIds").length>0},t.prototype.isSubtaskDone=function(){var e;return(e=this.get("subtaskCount")).total===e.done},t.prototype.canRedoTask=function(){var e;return!(null!=(e=this.get("parent"))?e.isDone:void 0)},t.prototype.getAcceptedStatusKinds=function(){switch(this.get("isDone")){case!0:return c.DONE;default:return c.UNDONE}},t.prototype.getRRule=function(){var e,t;return(t=this.get("recurrence"))?(e={forceset:!0},-1===(t=t.join("\n")).indexOf("DTSTART")&&(e.dtstart=new Date),t&&(t=a.rrulestr(t,e)),t):null},t.prototype.getRepeatTitle=function(){var e;return this.isSubtask()?"":(e=s.getRRuleSet(this.get("recurrence")))?"CUSTOM"===s.freq2Label(e)?s.freq2Description(e):s.freq2Title(e):""},t.prototype.getRRuleLabel=function(){var e;return e=this.getRRule(),s.freq2Label(e)},t.prototype.forkOrMove=function(e,t,r){var n;return r||(r={}),r.url=this.url()+"/"+e,n=this.isSubtask()||"move"!==e?{}:{doLink:void 0,doLinked:void 0},r.attrs=f.extend({_stageId:t},r.attrs,n),this.sync("update",this,r),this},t.prototype.forkByStatus=function(e,t){var r;return null==t&&(t={}),r=this.get("_id"),t.url="taskflowstatus/"+e+"/tasks/"+r+"/copy",this.sync("update",this,t)},t.prototype.moveByStatus=function(e,t){return null==t&&(t={}),t.attrs=f.extend({_taskflowstatusId:e},t.attrs),this.saveAttr("taskflowstatus",null,t)},t.prototype.unarchiveByStatus=function(e,t){var r;return null==t&&(t={}),r=this.get("_id"),t.url="taskflowstatus/"+e+"/tasks/"+r+"/unArchive",this.sync("update",this,t)},t.prototype.unarchive=function(e){var t,r;return e||(e={}),e.url=this.url()+"/archive",e.attrs={_stageId:e._stageId,_taskId:e._taskId,_sprintId:e._sprintId,_organizationId:this.get("_organizationId")},t=e.success||function(){},e.success=(r=this,function(e){return r.set(e),t(r)}),this.sync("delete",this,e),this},t.prototype.transform=function(e){return this.saveAttr("transform",null,e)},t.prototype.datetimeFormatString=function(e,t){var r;return r={date:"dateString",time:"timeFormatString"}[t],e?p.formatDate(e)[r]:""},t.prototype.batchCreateSubtasks=function(e,t){if(null==e&&(e={}),null==t&&(t={}),!f.isEmpty(e))return t.url=this.url()+"/import-subtasks",t.attrs=e,this.sync("create",this,t)},t.prototype.hasPermission=function(){return!!this.isIndie()||t.__super__.hasPermission.apply(this,arguments)},t.prototype.hasPermissions=function(){var e;return this.isIndie()?(e=t.__super__.hasPermissions.apply(this,arguments),f.mapObject(e,function(){return!0})):t.__super__.hasPermissions.apply(this,arguments)},t}()},"oyYm+z2s":function(e,t,r){e.exports={root:"root__3Q1i",inline:"inline__2Awr","with-min-height":"with-min-height__2ATn","anchor-clear":"anchor-clear__3nND","has-value":"has-value__3K1A","clear-wrapper":"clear-wrapper__3HD3"}},p58YVWMP:function(e,t,r){"use strict";var n;r.d(t,"a",function(){return n}),function(e){e.get="projecttemplate.get",e.manage="projecttemplate.manage"}(n||(n={}))},p7RaAO2S:function(e,t,r){"use strict";var n=r("ISwK6kId"),o=r("EXoLhZ0Z"),i=r("n0MKG6gI"),a=r("zT6SYcu2"),s=5;function u(e){return e>s}var c=function(e,t,r){return void 0===r&&(r=0),e===a.f.MultiSelect&&(t||u(r))},l=function(e,t){return void 0===t&&(t=0),function(e){return e===a.f.Select}(e)&&u(t)};function p(e){return!e||!Object.keys(e).length||Object.values(e).every(function(e){return!e||!e.values.length})}var f=r("Z0cmtJMN"),d=r.n(f);function g(e,t){return d()(e)&&d()(t)?[""].concat(e).join(",")===[""].concat(t).join(","):e===t}function h(e){return d()(e)?e.join(","):e}function m(e,t){return void 0!==e.find(function(e){return g(e,t)})}r.d(t,"f",function(){return n.b}),r.d(t,"c",function(){return n.a}),r.d(t,"a",function(){return o.a}),r.d(t,"b",function(){return i.a}),r.d(t,"e",function(){return i.c}),r.d(t,"i",function(){return u}),r.d(t,"g",function(){return c}),r.d(t,"h",function(){return l}),r.d(t,"l",function(){return p}),r.d(t,"j",function(){return g}),r.d(t,"d",function(){return h}),r.d(t,"k",function(){return m})},pSso42HE:function(e,t,r){"use strict";r.d(t,"d",function(){return T}),r.d(t,"i",function(){return E}),r.d(t,"j",function(){return A}),r.d(t,"h",function(){return P}),r.d(t,"e",function(){return R}),r.d(t,"a",function(){return N}),r.d(t,"b",function(){return x}),r.d(t,"c",function(){return O}),r.d(t,"g",function(){return D}),r.d(t,"f",function(){return F});var n,o,i=r("mrSGxOB2"),a=r("4c1CS0b3"),s=r("LHr5qcqN"),u=r("NVK113Rt"),c=r("cxTK3sM8"),l=r("YNO1Ll7x"),p=r("/LR135zw"),f=r("H9Zwx2PB"),d=r("G4OQvx5B"),g=r("a+N5u/Cl"),h=r.n(g),m=r("tLZJUYWX"),y=r.n(m),v=r("xH1xrXdo"),b=r("bvmrLhnu"),_="unknown",S=["application","collection","entry","event","organization","post","project","tag","task","tasklist","team","user","users","work","works",_];function T(e){return h.a.find(S,function(t){return h.a.has(e,t)})||_}function E(e,t,r,n,o){return void 0===r&&(r=Object(s.empty)()),void 0===n&&(n=a.Observable.never()),void 0===o&&(o=function(e,t){return i.h(e,t)}),function(s){return new a.Observable(function(g){return s.pipe(Object(c.switchMap)(function(s){var g,h=i.a({},w[t],s),m=C(t,h),y=!1,v=[],b=!0,_=!1;return Object(f.concat)(Object(d.of)(h),r.pipe(Object(u.map)(function(){return _=!0,h}))).pipe(Object(c.switchMap)(function(r){var s=e(r),c=a.Observable.of(null);if(s.queryToken&&(c=s.requestHasMore$.takeUntil(n),s=s.queryToken),s instanceof a.Observable)return s.takeUntil(n).pipe(Object(l.take)(1),Object(p.tap)(function(e){var r=I(t,e);m=m||r.length,y=k(t,e,m),v=o(v,r)}));var f=(g=g?g.concat(s):s).changes().takeUntil(n);return a.Observable.combineLatest(f,c).pipe(Object(p.tap)(function(e){var r=i.f(e,2),n=r[0],o=r[1];m=m||n.length,v=n,y=null===o?k(t,n,m*h.page):o}),Object(u.map)(function(e){return i.f(e,1)[0]}))}),Object(p.tap)(function(e){(b||_)&&(b=!1,_=!1,h=j(t,e,h))}),Object(u.map)(function(){return{hasMore:y,result:v}}))})).subscribe(g)})}}!function(e){e[e.PageCount=1]="PageCount",e[e.PageToken=2]="PageToken"}(o||(o={})),function(e){e.Mode=o}(E||(E={}));var O,w=((n={})[o.PageCount]={page:1},n[o.PageToken]={},n),C=function(e,t){switch(e){case o.PageCount:return t.count;case o.PageToken:return t.pageSize}},I=function(e,t){switch(e){case o.PageCount:return t;case o.PageToken:return t.result}},k=function(e,t,r){switch(e){case o.PageCount:return t.length>=r&&r>0;case o.PageToken:return!!t.nextPageToken}},j=function(e,t,r){switch(e){case o.PageCount:return i.a({},r,{page:r.page+1});case o.PageToken:return i.a({},r,{pageToken:t.nextPageToken})}},A=function(e){var t={};if(e){if(e.users&&e.users.length&&(t._creatorId=e.users.map(function(e){return e.id}).join(",")),e.week&&"all"!==e.week){var r=Object(v.a)(e.week),n=r.startTime,o=r.endTime;t.created__gte=n,t.created__lte=o}e.types&&"all"!==e.types[0]&&(t.type=h.a.flatten(e.types.map(function(e){return x[e].realData})).join(","))}if(0!==Object(g.size)(t))return t},P=function(e){return e.indexOf("activity.project.standard.")>-1},R=function(e){var t="";return e.content.users&&(t=e.content.users[0].name),e.content.team&&(t=e.content.team.name),{"activity.project.add.team.and.members":y.a.get("project.panel.activity.project.add.team.and.members"),"activity.project.archive":y.a.get("project.panel.activity.project.archive"),"activity.project.archive.collection":y.a.get("project.panel.activity.project.archive.collection"),"activity.project.archive.entry":y.a.get("project.panel.activity.project.archive.entry"),"activity.project.archive.event":y.a.get("project.panel.activity.project.archive.event"),"activity.project.archive.post":y.a.get("project.panel.activity.project.archive.post"),"activity.project.archive.tag":y.a.get("project.panel.activity.project.archive.tag"),"activity.project.archive.task":y.a.get("project.panel.activity.project.archive.task"),"activity.project.archive.tasklist":y.a.get("project.panel.activity.project.archive.tasklist"),"activity.project.archive.work":y.a.get("project.panel.activity.project.archive.work"),"activity.project.change.to.subtask":y.a.get("project.panel.activity.project.change.to.subtask"),"activity.project.create.collection":y.a.get("project.panel.activity.project.create.collection"),"activity.project.create.entry":y.a.get("project.panel.activity.project.create.entry"),"activity.project.create.event":y.a.get("project.panel.activity.project.create.event"),"activity.project.create.post":y.a.get("project.panel.activity.project.create.post"),"activity.project.create.tag":y.a.get("project.panel.activity.project.create.tag"),"activity.project.create.task":y.a.get("project.panel.activity.project.create.task"),"activity.project.create.tasklist":y.a.get("project.panel.activity.project.create.tasklist"),"activity.project.create.works":y.a.get("project.panel.activity.project.create.works"),"activity.project.disable.application":y.a.get("project.panel.activity.project.disable.application"),"activity.project.disable.plugin":y.a.get("project.panel.activity.project.disable.plugin"),"activity.project.enable.application":y.a.get("project.panel.activity.project.enable.application"),"activity.project.enable.plugin":y.a.get("project.panel.activity.project.enable.plugin"),"activity.project.finish.task":y.a.get("project.panel.activity.project.finish.task"),"activity.project.invite.members":y.a.get("project.panel.activity.project.invite.members",t),"activity.project.join.as.organization.owner":y.a.get("project.panel.activity.project.join.as.organization.owner"),"activity.project.join.from.invite.link":y.a.get("project.panel.activity.project.join.from.invite.link"),"activity.project.join.from.qrcode":y.a.get("project.panel.activity.project.join.from.qrcode"),"activity.project.join.from.user.invite.link":y.a.get("project.panel.activity.project.join.from.user.invite.link",t),"activity.project.join.from.user.qrcode":y.a.get("project.panel.activity.project.join.from.user.qrcode",t),"activity.project.join.from.weixin":y.a.get("project.panel.activity.project.join.from.weixin"),"activity.project.redo.task":y.a.get("project.panel.activity.project.redo.task"),"activity.project.remove":y.a.get("project.panel.activity.project.remove"),"activity.project.remove.collection":y.a.get("project.panel.activity.project.remove.collection"),"activity.project.remove.entry":y.a.get("project.panel.activity.project.remove.entry"),"activity.project.remove.event":y.a.get("project.panel.activity.project.remove.event"),"activity.project.remove.member":y.a.get("project.panel.activity.project.remove.member"),"activity.project.remove.post":y.a.get("project.panel.activity.project.remove.post"),"activity.project.remove.self":y.a.get("project.panel.activity.project.remove.self"),"activity.project.remove.tag":y.a.get("project.panel.activity.project.remove.tag"),"activity.project.remove.task":y.a.get("project.panel.activity.project.remove.task"),"activity.project.remove.tasklist":y.a.get("project.panel.activity.project.remove.tasklist"),"activity.project.remove.team":y.a.get("project.panel.activity.project.remove.team",t),"activity.project.remove.team.and.members":y.a.get("project.panel.activity.project.remove.team.and.members"),"activity.project.remove.work":y.a.get("project.panel.activity.project.remove.work"),"activity.project.share.event.invited":y.a.get("project.panel.activity.project.share.event.invited"),"activity.project.share.event.readonly":y.a.get("project.panel.activity.project.share.event.readonly"),"activity.project.share.post.invited":y.a.get("project.panel.activity.project.share.post.invited"),"activity.project.share.post.readonly":y.a.get("project.panel.activity.project.share.post.readonly"),"activity.project.share.task.invited":y.a.get("project.panel.activity.project.share.task.invited"),"activity.project.share.task.readonly":y.a.get("project.panel.activity.project.share.task.readonly"),"activity.project.share.task.off":y.a.get("project.panel.activity.project.share.task.off"),"activity.project.share.task.on":y.a.get("project.panel.activity.project.share.task.on"),"activity.project.share.work.invited":y.a.get("project.panel.activity.project.share.work.invited"),"activity.project.share.work.readonly":y.a.get("project.panel.activity.project.share.work.readonly"),"activity.project.subtask.change.parent":y.a.get("project.panel.activity.project.subtask.change.parent"),"activity.project.suspend":y.a.get("project.panel.activity.project.suspend"),"activity.project.transfer.to.organization":y.a.get("project.panel.activity.project.transfer.to.organization"),"activity.project.transfer.to.user":y.a.get("project.panel.activity.project.transfer.to.user"),"activity.project.unarchive":y.a.get("project.panel.activity.project.unarchive"),"activity.project.unarchive.collection":y.a.get("project.panel.activity.project.unarchive.collection"),"activity.project.unarchive.entry":y.a.get("project.panel.activity.project.unarchive.entry"),"activity.project.unarchive.event":y.a.get("project.panel.activity.project.unarchive.event"),"activity.project.unarchive.post":y.a.get("project.panel.activity.project.unarchive.post"),"activity.project.unarchive.tag":y.a.get("project.panel.activity.project.unarchive.tag"),"activity.project.unarchive.task":y.a.get("project.panel.activity.project.unarchive.task"),"activity.project.unarchive.tasklist":y.a.get("project.panel.activity.project.unarchive.tasklist"),"activity.project.unarchive.work":y.a.get("project.panel.activity.project.unarchive.work"),"activity.project.unshare.event.invited":y.a.get("project.panel.activity.project.unshare.event.invited"),"activity.project.unshare.event.readonly":y.a.get("project.panel.activity.project.unshare.event.readonly"),"activity.project.unshare.post.invited":y.a.get("project.panel.activity.project.unshare.post.invited"),"activity.project.unshare.post.readonly":y.a.get("project.panel.activity.project.unshare.post.readonly"),"activity.project.unshare.task.invited":y.a.get("project.panel.activity.project.unshare.task.invited"),"activity.project.unshare.task.readonly":y.a.get("project.panel.activity.project.unshare.task.readonly"),"activity.project.unshare.work.invited":y.a.get("project.panel.activity.project.unshare.work.invited"),"activity.project.unshare.work.readonly":y.a.get("project.panel.activity.project.unshare.work.readonly"),"activity.project.unsuspend":y.a.get("project.panel.activity.project.unsuspend"),"activity.project.update.description":y.a.get("project.panel.activity.project.update.description"),"activity.project.update.logo":y.a.get("project.panel.activity.project.update.logo"),"activity.project.update.name":y.a.get("project.panel.activity.project.update.name"),"activity.project.update.visibility":y.a.get("project.panel.activity.project.update.visibility"),"activity.project.panel.entry.income":y.a.get("project.panel.entry.income"),"activity.project.panel.entry.outcome":y.a.get("project.panel.entry.outcome")}[e.action]||e.title},N=[{_id:"all",types:["all"],icon:"icon-th",title:"activity.panel.filter.allType"},{_id:"task",types:["task","tasklist"],icon:"icon-checkbox-checked",title:"task"},{_id:"post",types:["post"],icon:"icon-wall",title:"post"},{_id:"work",types:["work","works","collection"],icon:"icon-file",title:"file"},{_id:"event",types:["event"],icon:"icon-calendar",title:"event"},{_id:"entry",types:["entry"],icon:"icon-bookkeeping-logo",title:"entry"},{_id:"tag",types:["tag"],icon:"icon-tag",title:"tags"},{_id:"system",types:["system"],icon:"icon-info",title:"activity.panel.filter.system"}],x=N.reduce(function(e,t){return e[t._id]={get label(){return y.a.get(t.title)},data:t._id,realData:t.types.join(",")},e},{});!function(e){e[e.normal=3]="normal",e[e.risky=2]="risky",e[e.urgent=1]="urgent"}(O||(O={}));var D=function(e,t){return Object(b.isAppEnabled)(e,t)},M={"thoughts.document":"thoughts","crm.organization":"accounts","crm.deal":"deal","crm.people":"contacts","teambition.member":"member","teambition.version":"version"},F=function(e){return"lookup"===e.type&&e.advancedCustomfield?M[e.advancedCustomfield.objectType]:e.type}},"pYq0h+Ab":function(e,t,r){"use strict";var n;r.r(t),r.d(t,"AxisType",function(){return n}),function(e){e.noop="noop",e.general="general",e.isDone="isDone",e.executor="executor",e.iterationSprint="iterationSprint",e.priority="priority",e.stage="stage",e.taskflowStatus="taskflowStatus",e.taskflow="taskflow",e.scenarioConfig="scenarioConfig",e.scenarioConfigStatus="scenarioConfigStatus"}(n||(n={}))},puS85ofv:function(e,t,r){e.exports=r.p+"images/github-0.ed98e5d3.png"},"px/Tdvb+":function(e,t,r){"use strict";r.r(t);var n,o,i=r("a+N5u/Cl"),a=r.n(i),s=r("q1z7EYOi");!function(e){e.CUSTOM="custom",e.PRIORITY="priority",e.STARTDATE="startdate",e.STARTDATE_DESC="startdate_desc",e.DUEDATE="duedate",e.CREATED_ASC="created_asc",e.CREATED_DESC="created_desc",e.UPDATED_ASC="updated_asc",e.UPDATED_DESC="updated_desc"}(n||(n={})),r.d(t,"sort",function(){return f}),r.d(t,"SortMethod",function(){return n});var u=function(e,t){if(a.a.isObject(e))return e instanceof s.Model?e.get(t):e[t]},c=function(e,t,r,n){return(new Date(e).valueOf()||Number.MAX_VALUE)-(new Date(t).valueOf()||Number.MAX_VALUE)},l={isDone:function(e,t,r,n){if(e&&t){var o=new Date(u(n,"accomplished")),i=new Date(u(r,"accomplished"));return o.valueOf()-i.valueOf()}return e-t},priority:function(e,t,r,n){return t-e},startDate:c,dueDate:c,created:c,updated:c},p=((o={})[n.CUSTOM]=["isDone","pos"],o[n.PRIORITY]=["isDone","priority","dueDate","created"],o[n.STARTDATE]=["isDone","startDate","priority","created"],o[n.STARTDATE_DESC]=["isDone","revert","startDate","priority","created"],o[n.DUEDATE]=["isDone","dueDate","priority","created"],o[n.CREATED_ASC]=["isDone","created"],o[n.CREATED_DESC]=["isDone","revert","created"],o[n.UPDATED_ASC]=["isDone","updated"],o[n.UPDATED_DESC]=["isDone","revert","updated"],o),f=function(e,t,r){void 0===r&&(r="custom");var n=p[r];return n?function(e,t,r){var n=0,o=!1;return a.a.some(r,function(r){if("revert"===r)return o=!0,!1;var i=u(e,r),a=u(t,r),s=l[r];return n=s?s(i,a,e,t):i-a,o&&(n=-n,o=!1),0!==n}),n}(e,t,n):0}},q6u3XLOb:function(e,t,r){var n,o={}.hasOwnProperty;n=r("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="sprint",t.prototype.urlRoot="sprints",t.prototype.sync=function(e,r,n){var o;switch(e){case"create":o=n.projectId,n.url="projects/"+o+"/"+this.url()}return t.__super__.sync.apply(this,arguments)},t}()},qAdKz6JV:function(e,t,r){e.exports=r.p+"images/bookkeeping-2.62f95d82.png"},"qFDw/T91":function(e,t){},qH10BoOc:function(e,t,r){e.exports=r.p+"images/events-1.9d76f8f5.png"},"qHH6+g6Q":function(e,t,r){var n,o,i,a,s,u,c,l,p,f,d,g,h={}.hasOwnProperty,m=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};p=r("a+N5u/Cl"),d=r("QyjeWo4p"),g=r("sa1Ed382"),c=r("IssmDVnT").Utils,f=r("2qRnoGmE"),n=r("q1z7EYOi"),a=r("bZr3G77e"),s=r("wu4EEviu"),l=r("yiO17FlF"),u=r("HYobN8SQ"),i=r("fB8F65SE"),o=function(e){function t(e,r){null==r&&(r={}),r.parse=!0,t.__super__.constructor.call(this,e,r)}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n.Model),t.prototype.idAttribute="_id",t.prototype.listened=!1,t.prototype.initialize=function(e,t){var r;return!1!==(null!=t?t.bindByMatrix:void 0)&&this.listen(),r=("_id"===this.idAttribute||"_cid"===this.idAttribute)&&!1!==(null!=t?t.bindByMatrix:void 0),null!=this.id&&r?l.bindByMatrix(this):r&&this.on("change:"+this.idAttribute,function(e){return l.bindByMatrix(e)}),this.initSubscribe(),this},t.prototype.save=function(e,r,n){var o,a;return void 0===e||"object"==typeof e?(e,n=r):{}[e]=r,o=null!=n?n.success:void 0,null!=n&&(n.success=(a=this,function(e,t,r){var s;if(s=p.extend(t,{"#":"mocked"}),"message"===a.name&&(s="room"!==e.get("objectType")?p.extend(s,{msgType:"normal"}):p.extend(s,{msgType:"pm"})),null!=s&&i.mockMessage(a.id,":change:"+a.name+"/"+a.getModelId(),s),"function"==typeof o)return o.call(n.context,e,t,r)})),t.__super__.save.call(this,e,r,n)},t.prototype.destroy=function(e){var r,n;return r=null!=e?e.success:void 0,null!=e&&(e.success=(n=this,function(t){if(n.subscription&&"function"==typeof n.subscription.unsubscribe&&n.subscription.unsubscribe(),i.mockMessage(n.id,":destroy:"+n.name+"/"+n.getModelId(),null),"function"==typeof r)return r.call(e.context,n,t,e)})),t.__super__.destroy.apply(this,arguments)},t.prototype.sync=function(e,r,n){var o,i;switch(n.url||(n.url=this.url()),/^http(s)?:\/\//.test(n.url)||(n.url=f.API_HOST+"/"+n.url),n.xhrFields={withCredentials:!0},n.headers=a.wrapHeaders(n.headers),n.success=a.wrapSuccess(n.success),n.error=a.wrapError(n.error,{silentError:n.silentError,requestHeaders:n.headers}),n.expireCache&&"read"===e&&a.wrapForExpireCache(n),o=n.success||function(){},null==n.cache&&(n.cache=!1),n.success=(i=this,function(e,t,r){var a,s;return a=c.parseHeaders(r.getAllResponseHeaders()),s=Number(a.get("x-http-status"))||r.status,(null!=e?e.code:void 0)||s>=400?n.error(e):(o(e),i.listen())}),e){case"read":n.attrs&&(n.data=n.attrs),g.user.get("isGhost")&&(n.data=p.extend(n.data||{},g._global));break;case"delete":n.attrs&&(n.url+=d.stringify(n.attrs,{addQueryPrefix:!0}))}return t.__super__.sync.apply(this,arguments)},t.prototype.saveAttr=function(e,t,r){var n,o;return r||(r={}),r.url=this.url()+"/"+e,r.attrs||(r.attrs={}),null!=t&&(r.attrs[e]=t),n=r.success||function(){},r.success=(o=this,function(e){return null!=e&&(r.silent?o.set(e,{silent:!0}):o.set(e),i.mockMessage(o.id,":change:"+o.name+"/"+o.getModelId(),e)),n(o)}),r.wait||this.set(r.attrs),this.sync("update",this,r)},t.prototype.clone=function(e){return null==e&&(e=!1),new this.constructor(this.attributes,{bindByMatrix:e})},t.prototype.destroyWithoutSync=function(e){return null==e&&(e={}),this,this.stopListening(),this.trigger("destroy",this,this.collection,e)},t.prototype.listen=function(){var e;if(!this.listened&&this.id)return this.listened=!0,this._socketHandle=(e=this,function(t){return e.set(e.parse(t))}),s.on(":change:"+this.name+"/"+this.id,this._socketHandle),s.on(":destroy:"+this.name+"/"+this.id,this.destroyWithoutSync.bind(this)),this},t.prototype.reset=function(e,t){var r,n;for(n in t||(t={}),t.silent||this.trigger("reset",this,t),this.listened=!1,this._socketHandle&&s.off(":change:"+this.name+"/"+this.id,this._socketHandle),this.stopListening(),this.off(),(r=this.collection)&&m.call(r.models,this)>=0&&r.remove(this),this.attributes)n!==this.idAttribute&&delete this.attributes[n];return t.parse&&(e=this.parse(e,t)),e=p.defaults({},e,p.result(this,"defaults")),this.set(e,t),this.initialize(e,t),null!=r&&r.add(this),this},t.prototype.archive=function(e){var t,r;return e||(e={}),e.url=this.url()+"/archive",e.attrs={},t=e.success||function(){},e.success=(r=this,function(e){var n;return null!=(n=r.collection)&&n.remove(r),r.set(e),t(r)}),this.sync("create",this,e),this},t.prototype.unarchive=function(e){var t,r;return e||(e={}),e.url=this.url()+"/archive",e.attrs={},t=e.success||function(){},e.success=(r=this,function(e){return r.set(e),t(r)}),this.sync("delete",this,e),this},t.prototype.thumbUp=function(e,t,r){return r||(r={}),r.url=this.url()+"/"+e,r.attrs||(r.attrs={}),this.sync(t,this,r),this},t.prototype.doFavorite=function(e){return this.thumbUp("favorite","create",e),this},t.prototype.unFavorite=function(e){return this.thumbUp("favorite","delete",e),this},t.prototype.share=function(e){return e.attrs||(e.attrs={}),e.attrs.readonly=!0,e.attrs.commentMode="public_comment",this.thumbUp("sharelink","create",e),this},t.prototype.shareDetails=function(e){return e.attrs||(e.attrs={}),e.attrs.readonly=!0,this.thumbUp("sharelink","read",e)},t.prototype.cancelShare=function(e,t){return t.attrs||(t.attrs={}),t.attrs.readonly=!0,this.thumbUp("sharelink/"+e,"delete",t),this},t.prototype.initSubscribe=function(){return this},t.prototype.setMemCache=function(e){return u[this.id+"-cache"]=e,this},t.prototype.getMemCache=function(e){var t;return t=u[this.id+"-cache"],e?(t||{})[e]:t},t.prototype.clearMemCache=function(){return delete u[this.id+"-cache"],this},t.prototype.checkIsVisible=function(){var e,r,n,o;return r=(null!=(o=this.get("involveMembers"))?o.indexOf(g.user.id):void 0)>-1,n="involves"!==this.get("visible"),e=t.prototype.hasPermission.call(this,"projecttag.get.project.privacy"),r||n||e},t.prototype.canModifyVisibility=function(){var e,t,r;return t=g.user.id,e=~(null!=(r=this.get("involveMembers"))?r.indexOf(t):void 0),this.hasPermission("put.visible")&&Boolean(e)},t.prototype.canPutShareStatus=function(){return"involves"!==this.get("visible")||this.canModifyVisibility()},t.prototype.stopListening=function(){return this.subscription&&"function"==typeof this.subscription.unsubscribe&&this.subscription.unsubscribe(),t.__super__.stopListening.apply(this,arguments)},t.prototype.getModelId=function(){return this.id},t}(),e.exports=l.bindToModel(o)},qibhmspl:function(e,t,r){e.exports={"kanban-selector":"kanban-selector__11Zm",caption:"caption__3Y3D","selector-item":"selector-item__7Zzz","selector-item-disabled":"selector-item-disabled__3xgt","not-found-wrapper":"not-found-wrapper__3XNN"}},r7PQv9Rc:function(e,t,r){e.exports=r.p+"images/markdown-poster.37be7bfa.png"},r8ayFxb7:function(e,t,r){"use strict";r.r(t);var n,o=r("mrSGxOB2"),i=r("wd/RKGTj"),a=r.n(i),s=r("NOGqly5s"),u=r("4c1CS0b3"),c=r("IssmDVnT"),l=r("a+N5u/Cl"),p=r("zB/8RwQ+"),f=r("HDJEOtNh"),d=r("gh8QIhMV"),g=r("s0r7VfKc"),h=r("6SzIBtPz"),m=r("HHtVDBJc"),y=Object(h.a)("SWITCH_PROJECT"),v=Object(h.a)("LOAD_AN_EVENT"),b=Object(h.a)("AN_EVENT_LOADED"),_=Object(h.a)("AN_EVENT_LOAD_FAILED"),S=Object(h.a)("LOAD_NEXT_EVENTS"),T=Object(h.a)("NEXT_EVENTS_LOADED"),E=Object(h.a)("NEXT_EVENTS_LOAD_FAILED"),O=Object(h.a)("LOAD_PAST_EVENT_GROUPS"),w=Object(h.a)("PAST_EVENT_GROUPS_LOADED"),C=Object(h.a)("PAST_EVENT_GROUPS_LOAD_FAILED"),I=Object(h.a)("TOGGLE_PAST_EVENT_GROUPS"),k=Object(h.a)("OPEN_EVENT_GROUP"),j=Object(h.a)("GROUP_EVENTS_LOADED"),A=Object(h.a)("GROUP_EVENTS_LOAD_FAILED"),P=Object(h.a)("CLOSE_EVENT_GROUP"),R=Object(h.a)("EVENT_GROUP_CLOSED"),N=Object(h.a)("ADD_MEMBER_TO_EVENT"),x=Object(h.a)("REMOVE_MEMBER_FROM_EVENT"),D={projectId:null,nextEvents:{events:[],isLoading:!1},startOfToday:a()().startOf("day"),pastEvents:{totalCount:0,shown:!1,groups:{}}},M=Object(h.b)(((n={})[""+y]=function(e,t){return o.a({},D,{projectId:t.payload.projectId})},n[""+S]=function(e){return o.a({},e,{nextEvents:o.a({},e.nextEvents,{isLoading:!0})})},n[""+T]=function(e,t){return o.a({},e,{nextEvents:{events:t.payload,isLoading:!1}})},n[""+E]=function(e){return o.a({},e,{nextEvents:o.a({},e.nextEvents,{isLoading:!1})})},n[""+w]=function(e,t){var r=t.payload,n=r.reduce(function(e,t){return e+t.count},0);return o.a({},e,{pastEvents:o.a({},e.pastEvents,{totalCount:n,shown:0!==n&&e.pastEvents.shown,groups:F(e.pastEvents.groups,e.startOfToday,r)})})},n[""+I]=function(e){return o.a({},e,{pastEvents:o.a({},e.pastEvents,{shown:!e.pastEvents.shown})})},n[""+k]=function(e,t){var r=t.payload,n=e.pastEvents.groups;return o.a({},e,{pastEvents:o.a({},e.pastEvents,{groups:L(n,r,{isLoading:!0})})})},n[""+j]=function(e,t){var r=o.f(t.payload,2),n=r[0],i=r[1],a=e.pastEvents.groups;return o.a({},e,{pastEvents:o.a({},e.pastEvents,{groups:L(a,n,{events:i,isLoading:!1})})})},n[""+R]=function(e,t){var r=t.payload,n=e.pastEvents.groups;return o.a({},e,{pastEvents:o.a({},e.pastEvents,{groups:L(n,r,{events:[]})})})},n[""+N]=function(e,t){var r=o.f(t.payload,2),n=r[0],i=r[1],a=e.nextEvents.events,s=l.findIndex(a,function(e){return e._id===n});return s<0?e:o.a({},e,{nextEvents:o.a({},e.nextEvents,{events:B(a,s,{involveMembers:o.h(a[s].involveMembers,[i])})})})},n[""+x]=function(e,t){var r=o.f(t.payload,2),n=r[0],i=r[1],a=e.nextEvents.events,s=l.findIndex(a,function(e){return e._id===n});if(s<0)return e;var u=a[s].involveMembers,c=l.findIndex(u,function(e){return e===i});return c<0?e:o.a({},e,{nextEvents:o.a({},e.nextEvents,{events:B(a,s,{involveMembers:o.h(u.slice(0,c),u.slice(c+1))})})})},n),D),F=function(e,t,r){return void 0===r&&(r=[]),r.reduce(function(r,n){if(e[n.month])return r[n.month]=e[n.month],r;var o=l.range("YYYYMM".length-n.month.length).reduce(function(e){return e+"0"},""),i=a()(o+n.month,"YYYYMM"),s=i.clone().add(1,"month");return s=s.diff(t)>0?t:s,r[n.month]={isLoading:!1,events:[],range:{from:i,to:s}},r},{})},L=function(e,t,r){var n;void 0===t&&(t="");var i=e[t];return i?o.a({},e,((n={})[t]=o.a({},i,r),n)):e},B=function(e,t,r){var n=e[t];if(!n)return e;var i=e.slice();return i[t]=o.a({},n,r),i},U=function(e){return l.groupBy(e,function(e){return e.startDate?e.startDate.split("T",1)[0]:""})},G=function(e){return a.a.utc(e).local()},q=function(e){return 0===e.length?"":m.freq2Title(m.getRRuleSet(e))},z=function(e){return Object.keys(e).reduce(function(t,r){return t.push(o.a({},e[r],{name:r})),t},[]).sort(function(e,t){var r=e.name,n=t.name;return Number(n)-Number(r)})},V=function(e){var t=e.reduce(function(e,t){var r=t.month;return void 0===e[r]?e[r]=t.count:e[r]+=t.count,e},{});return Object.keys(t).map(function(e){return{month:e,count:t[e]}})},K=function(e){for(var t=a()(e.startDate),r=a()(e.endDate),n=o.f([t.year(),t.month()+1],2),i=n[0],s=n[1],u=o.f([r.year(),r.month()+1],2),c=u[0],l=u[1],p=[],f=o.f([i,s],2),d=f[0],g=f[1];d===c&&g<=l||d<c;)p.push(""+d+(g<10?"0"+g:g)),d=12===g?d+1:d,g=12===g?1:g+1;return p.map(function(e,t){return{month:e,count:0===t?1:0}})};r.d(t,"epic",function(){return J}),r.d(t,"handleErrorAndCreateAction$",function(){return Q}),r.d(t,"projectEvents$",function(){return Y}),r.d(t,"quickRemoveMember$",function(){return X}),r.d(t,"switchProject",function(){return y}),r.d(t,"loadAnEvent",function(){return v}),r.d(t,"anEventLoaded",function(){return b}),r.d(t,"anEventLoadFailed",function(){return _}),r.d(t,"loadNextEvents",function(){return S}),r.d(t,"nextEventsLoaded",function(){return T}),r.d(t,"nextEventsLoadFailed",function(){return E}),r.d(t,"loadPastEventGroups",function(){return O}),r.d(t,"pastEventGroupsLoaded",function(){return w}),r.d(t,"pastEventGroupsLoadFailed",function(){return C}),r.d(t,"togglePastEvents",function(){return I}),r.d(t,"openEventGroup",function(){return k}),r.d(t,"groupEventsLoaded",function(){return j}),r.d(t,"groupEventsLoadFailed",function(){return A}),r.d(t,"closeEventGroup",function(){return P}),r.d(t,"eventGroupClosed",function(){return R}),r.d(t,"addMemberToEvent",function(){return N}),r.d(t,"removeMemberFromEvent",function(){return x}),r.d(t,"defaultState",function(){return D}),r.d(t,"reducer",function(){return M}),r.d(t,"groupEventsInDates",function(){return U}),r.d(t,"utcToLocal",function(){return G}),r.d(t,"recurrentEventLabel",function(){return q}),r.d(t,"groupsDictToArray",function(){return z}),r.d(t,"mergeEventCounts",function(){return V}),r.d(t,"eventToEventCounts",function(){return K});var H=r("sa1Ed382");function W(e,t){return e.getState().ui.events[t]}var J=Object(s.a)(function(e){return e.ofType(""+y).concatMap(function(e){var t=e.payload,r=[S(),O()];return t&&t.loadSelectedEvent&&r.push(v(t.loadSelectedEvent)),u.Observable.from(r)})},function(e){return e.ofType(""+v).map(function(e){return e.payload}).switchMap(function(e){var t=e.eventId,r=e.openDetail,n=e.routeBackHome;return g.default.fetch.getEvent(c.EventSDK.originEventId(t)).map(function(e){var r=new c.EventSDK.Generator(e).findByEventId(t);if(!r)throw n(),new Error("failed to find event "+t+" in its event generator");return r}).do(function(e){r(e)}).map(b).catch(Q(_))})},function(e,t){return e.ofType(""+S).switchMap(function(){var e=W(t,"projectId"),r=W(t,"startOfToday");return Y(e,{from:r}).map(T).catch(Q(E))})},function(e,t){return e.ofType(""+O).map(function(){var e=W(t,"startOfToday").toISOString();return{projectId:W(t,"projectId"),exclusiveUntil:e}}).switchMap(function(e){var t=e.projectId,r=e.exclusiveUntil,n=f.ProjectAccess.hasProjectPrivacyPermission(t);return p.getPastProjectEventsInCache(t,H.user.id,n,a()(r)).changes().switchMap(function(e){var n=l.flatten(e.filter(function(e){return c.EventSDK.isRecurrent(e)}).map(function(e){return new c.EventSDK.Generator(e).takeUntil(new Date(r),new Date(r)).map(K)}));return g.default.fetch.getProjectEventsCount(t,{endDate:r}).map(function(e){return V(e.concat(n))})}).map(w).catch(Q(C))})},function(e,t){return e.ofType(""+k).map(function(e){var r=e.payload;return{group:r,range:W(t,"pastEvents").groups[r].range,until:W(t,"startOfToday")}}).switchMap(function(r){var n=r.group,o=r.range,i=r.until,a=W(t,"projectId");return Y(a,o,!0,i).map(function(e){return[n,e]}).map(j).catch(Q(A)).takeUntil(e.ofType(""+P).filter(function(e){return e.payload===n}))})},function(e){return e.ofType(""+P).map(function(e){var t=e.payload;return R(t)})}),Q=function(e){return function(t){return Object(d.throwError)(t),u.Observable.of(e(t))}},Y=function(e,t,r,n){var i,a=r?-1:1,s=function(e,t){return a*(new Date(e.startDate).valueOf()-new Date(t.startDate).valueOf()||new Date(e.endDate).valueOf()-new Date(t.endDate).valueOf())},c=t.from,l=t.to;if(c&&!l)i=function(e){return p.getNextEventsFrom(e,c)};else{if(!c||!l)return u.Observable.empty();i=function(e){return e.takeFrom(c.toDate(),l.toDate(),n&&n.toDate())}}var d=f.ProjectAccess.hasProjectPrivacyPermission(e);return p.getProjectEvents(e,H.user.id,t,d,n).changes().map(function(e){return e.map(i).reduce(function(e,t){return e.concat(t)},[]).sort(s)}).map(function(e){return e.map(function(e){var t=G(e.startDate).format(),r=G(e.endDate).format(),n=G(e.sourceDate).format(),i=G(e.untilDate).format();return o.a({},e,{startDate:t,endDate:r,sourceDate:n,untilDate:i})})})},X=function(e,t){return g.default.fetch.updateEventInvolveMembers(e,{delInvolvers:[t]}).map(function(e){return e.involveMembers})}},rGq9vsrD:function(e,t,r){"use strict";r.d(t,"b",function(){return m}),r.d(t,"a",function(){return b}),r.d(t,"d",function(){return _}),r.d(t,"c",function(){return T});var n,o=r("mrSGxOB2"),i=r("8yf6doCl"),a=r("a+N5u/Cl"),s=r("6SzIBtPz"),u=r("NOGqly5s"),c=r("s0r7VfKc"),l=r("4c1CS0b3"),p=r("fio7jWQ0"),f=r("p7RaAO2S"),d=r("zT6SYcu2"),g=r("2Dvc1YJz"),h=r("PHHYd/Ws"),m=new i.Subject,y={input:"",dropdownOpened:!1,sortedTqlKey:"",order:d.d.None,searcherGroups:[],showedSearchers:[],filters:Object(f.f)(),isLoading:!1,isCustomFiltersLoading:!1,hasMore:!1,customfieldsSearchers:[],isSearchLoading:!1,searchHasMore:!1,customfieldsResult:[]},v=function(e){return"SEARCH_FILTER/"+e},b={assignOrganizationId:Object(s.a)(v("ASSIGN_ORGANIZATION_ID")),exitSearcherFilter:Object(s.a)(v("EXIT_SEARCHER_FILTER")),changeInput:Object(s.a)(v("CHANGE_INPUT")),toggleDropdown:Object(s.a)(v("TOGGLE_DROPDOWN")),getSearchers:Object(s.a)(v("GET_SEARCHERS")),getSearchersSuccess:Object(s.a)(v("GET_SEARCHERS_SUCCESS")),hideSearcher:Object(s.a)(v("HIDE_SEARCHER")),showSearcher:Object(s.a)(v("SHOW_SEARCHER")),showCustomfieldsSearcher:Object(s.a)(v("SHOW_CUSTOMFIELDS_SEARCHER")),getCustomfieldsSearchers:Object(s.a)(v("GET_CUSTOMFIELDS_SEARCHERS")),getCustomfieldsSearchersSuccess:Object(s.a)(v("GET_CUSTOMFIELDS_SEARCHERS_SUCCESS")),getCustomfieldsSearchersFailed:Object(s.a)(v("GET_CUSTOMFIELDS_SEARCHERS_FAILED")),searchCustomfieldsSearchers:Object(s.a)(v("SEARCH_CUSTOMFIELDS_SEARCHERS")),searchCustomfieldsSearchersSuccess:Object(s.a)(v("SEARCH_CUSTOMFIELDS_SEARCHERS_SUCCESS")),searchCustomfieldsSearchersFailed:Object(s.a)(v("SEARCH_CUSTOMFIELDS_SEARCHERS_FAILED")),getCustomfieldsSearchersLoadMore:Object(s.a)(v("GET_CUSTOMFIELDS_SESARCHERS_LOAD_MORE")),searchCustomfieldsSearchersLoadMore:Object(s.a)(v("SEARCH_CUSTOMFIELDS_SESARCHERS_LOAD_MORE")),changeFilter:Object(s.a)(v("CHANGE_FILTER")),removeFilter:Object(s.a)(v("REMOVE_FILTER")),clearFilters:Object(s.a)(v("CLEAR_FILTER")),updateSortedTqlKey:Object(s.a)(v("UPDATE_SORTED_TQL_KEY")),updateOrder:Object(s.a)(v("UPDATE_ORDER")),searchGuideChangeFilter:Object(s.a)("SEARCH_GUIDE_CHANGE_FILTER")},_=Object(s.b)(((n={})[""+b.assignOrganizationId]=function(e,t){return o.a({},e,{organizationId:t.payload})},n[""+b.exitSearcherFilter]=function(){return y},n[""+b.changeInput]=function(e,t){var r=t.payload;return o.a({},e,{input:r,isSearchLoading:!!e.organizationId,hasSearchMore:!!e.organizationId,customfieldsResult:[]})},n[""+b.toggleDropdown]=function(e,t){return o.a({},e,{dropdownOpened:t.payload})},n[""+b.getSearchers]=function(e){return o.a({},e,{isLoading:!0})},n[""+b.getSearchersSuccess]=function(e,t){return o.a({},e,{isLoading:!1},t.payload)},n[""+b.hideSearcher]=function(e,t){var r=t.payload;return o.a({},e,{showedSearchers:e.showedSearchers.filter(function(e){return e!==r})})},n[""+b.showSearcher]=function(e,t){return o.a({},e,{showedSearchers:a.chain(e.showedSearchers).concat([t.payload]).uniq().value()})},n[""+b.showCustomfieldsSearcher]=function(e,t){var r=t.payload;return o.a({},e,{customfieldsSearchers:a.chain(e.customfieldsSearchers).concat([r]).uniq("id").value(),showedSearchers:a.chain(e.showedSearchers).concat([r.id]).uniq().value()})},n[""+b.getCustomfieldsSearchers]=function(e){return o.a({},e,{isCustomFiltersLoading:!!e.organizationId,hasMore:!1})},n[""+b.getCustomfieldsSearchersSuccess]=function(e,t){return o.a({},e,t.payload,{isCustomFiltersLoading:!1})},n[""+b.getCustomfieldsSearchersFailed]=function(e){return o.a({},e,{isCustomFiltersLoading:!1})},n[""+b.searchCustomfieldsSearchers]=function(e){return o.a({},e,{hasSearchMore:!1})},n[""+b.searchCustomfieldsSearchersSuccess]=function(e,t){return o.a({},e,t.payload,{isSearchLoading:!1})},n[""+b.searchCustomfieldsSearchersFailed]=function(e){return o.a({},e,{isSearchLoading:!1,hasSearchMore:!1})},n[""+b.changeFilter]=function(e,t){return o.a({},e,{filters:o.a({},e.filters,t.payload)})},n[""+b.removeFilter]=function(e,t){return o.a({},e,{filters:a.omit(e.filters,t.payload)})},n[""+b.clearFilters]=function(e){return o.a({},e,{filters:Object(f.f)()})},n[""+b.updateSortedTqlKey]=function(e,t){var r=t.payload,n=r?e.order||d.d.Desc:d.d.None;return o.a({},e,{sortedTqlKey:r,order:n})},n[""+b.updateOrder]=function(e,t){return o.a({},e,{order:t.payload})},n[""+b.searchGuideChangeFilter]=function(e,t){var r=t.payload,n=Object(g.c)()[r],i=n.filters,s=n.order,u=n.sortedTqlKey,c=a.mapObject(i,function(e,t){return Object(f.c)(e,g.b[t],{field:t})}),l=a.chain(["text"]).concat(Object.keys(i)).uniq().value();return o.a({},e,{order:s,sortedTqlKey:u,showedSearchers:l,filters:o.a({},c,e.filters)})},n),y),S=function(e){return e.getState().ui.searchFilter},T=Object(u.a)(function(e,t){return e.ofType(""+b.getSearchers).switchMap(function(){var e=S(t).showedSearchers;return c.default.fetch.get("searchers").map(function(t){var r=t.defaultSearchers,n=t.groups;return{showedSearchers:a.uniq(o.h(e,r)),searcherGroups:n}})}).map(b.getSearchersSuccess)},function(e,t){var r=e.ofType(""+b.getCustomfieldsSearchers),n=e.ofType(""+b.getCustomfieldsSearchersLoadMore);return r.filter(function(){return!!t.getState().ui.searchFilter.organizationId}).switchMap(function(){var r=t.getState().ui.searchFilter.organizationId,o=c.default.getCustomfieldsSearchers(r,void 0);return c.default.fetch.expandPage(o,{loadMore$:n}).takeUntil(e.ofType(""+b.exitSearcherFilter)).map(function(e){return b.getCustomfieldsSearchersSuccess({hasMore:e.hasMore,isCustomFiltersLoading:!1,customfieldsSearchers:a.chain(S(t).customfieldsSearchers).concat(e.result).uniq("id").value()})}).catch(function(){return l.Observable.of(b.getCustomfieldsSearchersFailed())})})},function(e,t){var r=e.ofType(""+b.searchCustomfieldsSearchers),n=e.ofType(""+b.searchCustomfieldsSearchersLoadMore);return r.filter(function(){return!!t.getState().ui.searchFilter.organizationId}).switchMap(function(){var r=t.getState().ui.searchFilter.organizationId,o=t.getState().ui.searchFilter.input.trim(),i=c.default.getCustomfieldsSearchers(r,void 0,o);return c.default.fetch.expandPage(i,{loadMore$:n}).takeUntil(e.ofType(""+b.exitSearcherFilter)).map(function(e){return b.searchCustomfieldsSearchersSuccess({isSearchLoading:!1,searchHasMore:e.hasMore,customfieldsResult:e.result})}).catch(function(){return l.Observable.of(b.searchCustomfieldsSearchersFailed())})})},function(e,t){return e.ofType(""+b.changeInput).debounceTime(400).filter(function(){return S(t).input.trim().length>0}).map(b.searchCustomfieldsSearchers)},function(e){return e.ofType(""+b.toggleDropdown).map(function(e){return e.payload?Object(p.noOpAction)():b.changeInput("")})},function(e){return e.ofType(""+b.hideSearcher).map(function(e){return b.removeFilter(e.payload)})},function(e){return e.ofType(""+b.changeFilter,""+b.removeFilter,""+b.clearFilters,""+b.updateSortedTqlKey,""+b.updateOrder,""+b.getSearchersSuccess,""+b.exitSearcherFilter).map(h.a.updateTQLString)},function(e){return e.ofType(""+b.clearFilters).switchMap(function(){return m.next(),l.Observable.of()})})},rhK5Yt5v:function(e,t,r){"use strict";r.d(t,"b",function(){return c}),r.d(t,"a",function(){return l}),r.d(t,"n",function(){return p}),r.d(t,"j",function(){return f}),r.d(t,"o",function(){return d}),r.d(t,"k",function(){return g}),r.d(t,"p",function(){return h}),r.d(t,"l",function(){return m}),r.d(t,"g",function(){return y}),r.d(t,"i",function(){return v}),r.d(t,"h",function(){return b}),r.d(t,"f",function(){return _}),r.d(t,"d",function(){return S}),r.d(t,"r",function(){return T}),r.d(t,"c",function(){return E}),r.d(t,"q",function(){return O}),r.d(t,"m",function(){return w}),r.d(t,"e",function(){return C});var n=r("tLZJUYWX"),o=r("80gYlwjC"),i=r("wd/RKGTj"),a=r.n(i),s=r("bvmrLhnu"),u=r("85182E8g"),c=function(e){return!1===function(e){return e&&"boolean"==typeof e.canAddMember&&!0===e.canAddMember}(e)},l=function(e){return e&&"boolean"==typeof e.canArchive&&!0===e.canArchive},p=function(e){return!e||"boolean"!=typeof e.isArchived||!0===e.isArchived},f=function(e){return!1===p(e)},d=function(e){return!e||"boolean"!=typeof e.isOverdue||!0===e.isOverdue},g=function(e){return!1===d(e)},h=function(e){return e&&"boolean"==typeof e.isStar&&!0===e.isStar},m=function(e){return!1===h(e)},y=function(e){return!1===function(e){return e&&"string"==typeof e.logo&&e.logo.length>0}(e)},v=function(e){return!1===function(e){return e&&"string"==typeof e.visibility&&e.visibility.length>0}(e)},b=function(e){return!1===function(e){return e&&"string"==typeof e.name&&e.name.length>0}(e)},_=function(e){return!1===function(e){return e&&"string"==typeof e.description&&e.description.length>0}(e)},S=function(e){if(v(e))return null;switch(e.visibility){case"organization":return n.get("organization.visible");case"all":return n.get("public");default:return null}},T=function(e){var t=function(e){var t=u.findOne(0,e._organizationId);return t?o.Payment.create(t.get("plan")):e.plan&&o.Payment.create(e.plan)}(e),r=!!t&&t.ofOrganization()&&t.isProfessional;switch(e.proTemplateType){case"scrum":return r;case void 0:case null:return!(Object(s.hasScrumAppEnabled)(e)&&!r);default:return!1}},E=function(e){return e&&"boolean"==typeof e.canSuspend&&!0===e.canSuspend},O=function(e){return!e||"boolean"!=typeof e.isSuspended||!0===e.isSuspended},w=function(e){return!1===O(e)},C=function(e,t){var r=a()(e).format("LL");return t?n.get("project.suspend.message.with.user",t.name,r):n.get("project.suspend.message",r)}},s0r7VfKc:function(e,t,r){"use strict";r.r(t);var n=r("IssmDVnT"),o=r("2qRnoGmE"),i=r.n(o),a=r("mrSGxOB2"),s=r("a+N5u/Cl"),u=r.n(s),c=r("wd/RKGTj"),l=r.n(c),p={disableRequestId:!0,credentials:null};n.SDKFetch.prototype.getProjectTapDashboards=function(e){return this.get("boards/tproject/project/"+e+"/dashboards",{},a.a({},p))},n.SDKFetch.prototype.getDashboardCustomDetails=function(e,t,r){return/[0-9a-fA-F]{24}/.test(e)?this.post("boards/tproject/tdr/report/"+e,t,a.a({},p)):this.get("boards/tproject/udr/project/"+r+"/template/"+e,{},a.a({},p))},n.SDKFetch.prototype.getDashboardCustomFilters=function(e){return this.get("boards/tproject/udr/project/"+e+"/providedInfo",{},a.a({},p))},n.SDKFetch.prototype.dashboardChartDownLoadFetch=function(e){var t,r={headers:(t={merge:!1},t["content-type"]="application/zip",t)};return this.get("boards/tproject/tdr/report/"+e+"/export",{},a.a({},p,r,{includeHeaders:!0}))},n.SDKFetch.prototype.dashboardChartTasksFetch=function(e,t){return this.get("v2/projects/"+e+"/tasks",t)},n.SDKFetch.prototype.dashboardChartDynamicFetch=function(e,t){return this.get("boards/tproject/tdr/project/"+e+"/report/"+t+"/filters/dynamic",{},a.a({},p))},n.SDKFetch.prototype.getTapDashboardDetails=function(e,t,r){return/[0-9a-fA-F]{24}/.test(e)?this.post("boards/tproject/tdr/report/"+e,t,a.a({},p)):this.post("boards/tproject/tdr/project/"+r+"/report/"+e+"/preview",t,a.a({},p))},n.SDKFetch.prototype.getTapChartDetails=function(e,t,r,n){return this.post("boards/tproject/tdr/project/"+e+"/report/"+t+"/preview/more/"+r,a.a({},n,{ignoreSaved:!0}),a.a({},p))},n.SDKFetch.prototype.getCustomTapChartDetails=function(e,t,r){return this.post("boards/tproject/tdr/project/"+e+"/report/"+t+"/preview",r,a.a({},p))},n.SDKFetch.prototype.chartCreateFetch=function(e,t,r){return this.post("boards/tproject/tdr/project/"+e+"/report/"+t+"/create",r,a.a({},p))},n.SDKFetch.prototype.customChartFetch=function(e,t,r){return/[0-9a-fA-F]{24}/.test(r||"")?this.post("boards/tproject/udr/report/"+r,t,a.a({},p)):this.post("boards/tproject/udr/project/"+e+"/preview",t,a.a({},p))},n.SDKFetch.prototype.customChartDetailFetch=function(e,t){return this.post("boards/tproject/udr/report/"+e,t,a.a({},p))},n.SDKFetch.prototype.dashboardTapChartChange=function(e){return this.put("boards/tproject/report/"+e+"/size",{},a.a({},p))},n.SDKFetch.prototype.dashboardTapChartPosChange=function(e){return this.put("boards/tproject/dashboards/location",e,a.a({},p))},n.SDKFetch.prototype.updateProjectDashboardProps=function(e,t){return this.put("boards/tproject/tdr/report/"+e+"/condition/save",t,a.a({},p))},n.SDKFetch.prototype.dashboardTapCustomChartFetch=function(e,t){return this.put("boards/tproject/udr/project/"+e+"/save",t,a.a({},p))},n.SDKFetch.prototype.dashboardChartNameUpdateFetch=function(e,t){return this.put("boards/tproject/report/"+e+"/name",{name:t},a.a({},p))},n.SDKFetch.prototype.daeshboardChartDeleteFetch=function(e){return this.delete("boards/tproject/report/"+e,{},a.a({},p))},n.SDKFetch.prototype.getAoneUserType=function(e){return this.get("issue/version/get",{staffId:e},{apiHost:"https://k3.alibaba-inc.com/api"}).pluck("results")},n.SDKFetch.prototype.getCommonGroup=function(e){return this.get("commongroups/"+e)},n.SDKFetch.prototype.getCommonGroups=function(e,t,r){void 0===r&&(r={});var n=r.all,o={_projectId:e,_appId:t,all:void 0===n||n};return this.get("commongroups",o)},n.SDK.prototype.getCommonGroup=function(e){return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"CommonGroup",request:this.fetch.getCommonGroup(e),query:{where:{_id:e}}})},n.SDK.prototype.getCommonGroups=function(e,t,r){void 0===r&&(r={});var o=r.cacheValidate||n.CacheStrategy.Request;return this.lift({cacheValidate:o,tableName:"CommonGroup",request:this.fetch.getCommonGroups(e,t,{all:!0}),query:{where:{_projectId:e,_appId:t}}})},n.SDK.prototype.getCommonGroupsByTree=function(e,t,r){var n=function(t){var r=t._id,n=t.ancestorIds;return r===e||n.indexOf(e)>=0};return this.getCommonGroups(t,r).map(function(e){return e.map(function(e){return e.filter(n)})})},n.SDKFetch.prototype.deleteCommonGroup=function(e,t){var r="commongroups/"+e,n={_projectId:t};return this.delete(r,n)},n.SDK.prototype.deleteCommonGroup=function(e,t){return this.lift({method:"delete",tableName:"CommonGroup",request:this.fetch.deleteCommonGroup(e,t),clause:{_id:e}})},n.SDKFetch.prototype.createCommonGroup=function(e){return this.post("commongroups",e)},n.SDK.prototype.createCommonGroup=function(e){return this.lift({method:"create",tableName:"CommonGroup",request:this.fetch.createCommonGroup(e)})},n.SDKFetch.prototype.updateCommonGroup=function(e,t){var r="commongroups/"+e;return this.put(r,t)},n.SDK.prototype.updateCommonGroup=function(e,t){return this.lift({method:"update",tableName:"CommonGroup",request:this.fetch.updateCommonGroup(e,t),clause:{_id:e}})},n.SDKFetch.prototype.moveCommonGroup=function(e,t,r,n){var o="commongroups/"+e+"/move",i=a.a({_projectId:t,_smartgroupId:r},n);return this.put(o,i)};var f=r("4c1CS0b3"),d=r("90U+kJWN"),g=r("oRqJmROU"),h=r("2GFv99bj"),m=r("RIjxGFt6");n.SDKFetch.prototype.getTasksByCommonGroup=function(e,t){return this.get("commongroups/"+e+"/tasks",{isDone:t})};var y=function(e,t){return e.customfields.findIndex(function(e){if("commongroup"!==e.type||0===e.value.length)return!1;var r=e.value[0]._id;return t.indexOf(r)>=0})>=0};function v(e){return"organizations/"+e+"/customfields"}n.SDK.prototype.getTasksByCommonGroup=function(e,t,r,o,i){void 0===i&&(i={});var s=r,c=i.query||{},l=(e?this.getCommonGroupsByTree(e,t,s).changes():this.getCommonGroups(t,s).changes().map(function(e){return e.filter(u.a.negate(d.isUncategorizedCommonGroup))})).map(function(e){return e.map(function(e){return e._id})}),p=u.a.compact(["_commongroupId="+e,Object(g.c)(c.isDone)&&"isDone="+c.isDone,i.taskLayer&&Object(m.taskLayerToTQL)(i.taskLayer,!0),!e&&"_appId="+s,i.tql]).join(" AND "),v=[a.a({},c,i.taskLayer?Object(m.taskLayerToRDBQuery)(i.taskLayer):void 0)],b=i.tasks$||Object(h.a)(this,this.fetch.getSmartGroupProjectTasks(t,r,{filter:p}),t,o,v,{cacheValidate:n.CacheStrategy.Cache,showAll:i.showAll}).changes(),_=e?y:u.a.negate(y);return f.Observable.combineLatest(l,b).map(function(e){var t=a.f(e,2),r=t[0];return t[1].filter(function(e){return _(e,r)})})},n.SDKFetch.prototype.getCustomfieldCategories=function(e,t){return this.get("customfieldcategories",{pageSize:500,_organizationId:e,_projectId:t}).map(function(e){return e.result})},n.SDK.prototype.getCustomfieldCategories=function(e,t){return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"CustomFieldCategory",request:this.fetch.getCustomfieldCategories(e,t),query:{where:{_organizationId:e}}})},n.SDKFetch.prototype.getCustomfieldsByCategory=function(e,t,r,n,o){return void 0===o&&(o=100),this.get(v(e),{pageToken:n,pageSize:o,"categoryIds[]":t,uncategory:!!r})},n.SDKFetch.prototype.getCustomfieldBySearch=function(e,t){return this.get(v(e)+"/search",{pageSize:20,name:t}).map(function(e){return e.result})},n.SDKFetch.prototype.createCustomfield=function(e,t){return this.post(v(e),u.a.omit(t,"_id"))},n.SDKFetch.prototype.updateCustomfield=function(e,t){var r=u.a.pick(t,["name","choices","description","categoryIds"]);return u.a.isEmpty(r)?f.Observable.empty():this.put(v(e)+"/"+t._id,r)},n.SDKFetch.prototype.getCustomFieldEntitiesByRecommend=function(e){return this.get("organizations/"+e+"/customfieldentities/recommend")},n.SDKFetch.prototype.getCustomFieldEntitiesByCategory=function(e,t,r,n,o){return void 0===o&&(o=100),this.get("organizations/"+e+"/customfieldentities",{pageToken:n,pageSize:o,"categoryIds[]":t,uncategory:!!r})},n.SDKFetch.prototype.getCustomFieldEntitiesBySearch=function(e,t){return this.get("organizations/"+e+"/customfieldentities/search",{pageSize:20,name:t}).map(function(e){return e.result})},n.SDKFetch.prototype.getCustomFieldEntity=function(e,t,r){return this.get("organizations/"+e+"/customfieldentities/choices",{_customfieldId:t,_customfieldentityId:r,allChoices:!1})},n.SDKFetch.prototype.getCustomFieldChoices=function(e,t){return this.get("organizations/"+e+"/customfieldentities/choices",{_customfieldId:t,allChoices:!0})},n.SDKFetch.prototype.createCustomFieldEntity=function(e,t){return this.post("organizations/"+e+"/customfieldentities",t)},n.SDKFetch.prototype.putCustomFieldEntity=function(e,t,r){return this.put("organizations/"+e+"/customfieldentities/"+t,r)},n.SDKFetch.prototype.deleteCustomFieldEntity=function(e,t){return this.delete("organizations/"+e+"/customfieldentities/"+t)},n.SDKFetch.prototype.addCustomFieldLinks=function(e,t,r){return void 0===r&&(r="project"),this.post("projects/"+e+"/customfieldlinks",{customfields:t,boundType:r})},n.SDKFetch.prototype.forkTemplateCustomfieldlinks=function(e,t){return this.post("projects/"+e+"/customfieldlinks/fork",{_customfieldlinkIds:t})},n.SDK.prototype.addCustomFieldLinks=function(e,t,r){return this.lift({method:"create",tableName:"CustomFieldLink",request:this.fetch.addCustomFieldLinks(e,t,r)})},n.SDKFetch.prototype.deleteCustomFieldLink=function(e,t){var r="projects/"+e+"/customfieldlinks/"+t;return this.delete(r)},n.SDK.prototype.deleteCustomFieldLink=function(e,t){return this.lift({method:"delete",tableName:"CustomFieldLink",request:this.fetch.deleteCustomFieldLink(e,t),clause:{_id:t}})},n.SDKFetch.prototype.updateCustomFieldLinkPos=function(e,t,r){return this.put("projects/"+e+"/customfieldlinks/"+t+"/pos",r)},n.SDKFetch.prototype.updateCustomFieldLinkRoleIds=function(e,t,r){return this.put("projects/"+e+"/customfieldlinks/"+t+"/_roleIds",r)},n.SDKFetch.prototype.updateCustomFieldLinkLock=function(e,t){return this.put("customfieldlinks/"+e+"/islinklocked",{isLinkLocked:t})},n.SDK.prototype.updateCustomFieldLinkPos=function(e,t,r){return this.lift({method:"update",tableName:"CustomFieldLink",request:this.fetch.updateCustomFieldLinkPos(e,t,r),clause:{_id:t}})},n.SDK.prototype.updateCustomFieldLinkRoleIds=function(e,t,r){return this.lift({method:"update",tableName:"CustomFieldLink",request:this.fetch.updateCustomFieldLinkRoleIds(e,t,r),clause:{_id:t}})},n.SDK.prototype.updateCustomFieldLinkLock=function(e,t){return this.lift({method:"update",tableName:"CustomFieldLink",request:this.fetch.updateCustomFieldLinkLock(e,t),clause:{_id:e}})};var b=r("50927W45"),_=r("QyjeWo4p"),S=r("CxY0Mkc1"),T=r("2qRnoGmE");function E(e,t,r){return this.lift({tableName:"Member",request:this.fetch.delete(e+"s/"+t+"/members/"+r),method:"delete",clause:{_id:r}})}n.SDKFetch.prototype.getDashboardCardById=function(e){return this.get("dashboardcards/"+e)},n.SDKFetch.prototype.getCardResults=function(e,t){var r=S.parse(e.dataUrl),o=r.pathname,i=r.query;return this.get(o,_.parse(i),{headers:t,apiHost:T.HOST,includeHeaders:!0}).map(function(e){var t=e.body.map(function(e){return e.objectType===b.a.Event?n.EventSDK.marshaler.parse(e):e});return a.a({},e,{body:t})})},n.SDK.prototype.getEventInstance=function(e){return this.getEvent(n.EventSDK.originEventId(e)).changes().switchMap(function(t){var r=a.f(t,1)[0],n=r&&(r.findByEventId(e)||r.after(l()().startOf("day").toDate())||r.next().value);return f.Observable.of(n||null)})},n.SDK.prototype.commentsRepeatEvent=function(e,t){var r=this.fetch.commentsRepeatEvent(e,t).publishReplay(1).refCount(),n=this.lift({request:r.map(function(e){return e.repeat}),tableName:"Event",method:"update",clause:{_id:e}}),o=this.lift({request:r.map(function(e){return e.new}),tableName:"Event",method:"create"});return f.Observable.forkJoin(n,o).map(function(e){var t=a.f(e,2);return{repeat:t[0],new:t[1]}})},n.SDKFetch.prototype.getFeaturesByProject=function(e){return this.get("v2/projects/"+e+"/addedFeatures",null,{apiHost:i.a.HOST+"/appstore/api"})},n.SDK.prototype.getFeaturesByProject=function(e){return this.lift({cacheValidate:n.CacheStrategy.Cache,request:this.fetch.getFeaturesByProject(e),tableName:"Feature",query:{where:[{_projectId:e}]}})},n.SDKFetch.prototype.getGroups=function(e,t){return this.get("projects/"+e+"/groups",t)},n.SDK.prototype.getGroups=function(e,t){var r={_projectId:e};return this.lift({cacheValidate:n.CacheStrategy.Request,request:this.fetch.getGroups(e,t?a.a({},r,t):r),tableName:"Group",query:{where:{_projectId:e}}})},n.SDK.prototype.getGroupsInPages=function(e,t,r,o){return void 0===o&&(o={}),n.Page.defaultState("v2/"+e+"/"+t+"/groups",{pageSize:r,urlQuery:o})},n.SDK.prototype.createGroup=function(e){return this.lift({tableName:"Group",request:this.fetch.post("groups",e),method:"create"})},n.SDK.prototype.deleteOrganizationMember=function(e,t){return E.call(this,"organization",e,t)},n.SDK.prototype.deleteTeamMember=function(e,t){return E.call(this,"team",e,t)},n.SDK.prototype.deleteGroupMember=function(e,t){return E.call(this,"group",e,t)},n.SDK.prototype.getMembersInPages=function(e,t,r,o,i){void 0===r&&(r=null),void 0===o&&(o=50),void 0===i&&(i={});var a=r?e+"s/"+t+"/members/"+r:"v3/"+e+"s/"+t+"/members";return n.Page.defaultState(a,{pageSize:o,urlQuery:i})},n.SDKFetch.prototype.getMembers=function(e,t){return this.get("v2/projects/"+e+"/members",t)},n.SDKFetch.prototype.getMember=function(e){return this.get("members/"+e)},n.SDKFetch.prototype.getMembersCount=function(e){return this.get("v3/organizations/"+e+"/members",{pageToken:void 0,pageSize:10}).map(function(e){return e.totalSize})};var O=["email","hasVisited","joined","latestActived","location","nickname","nicknamePinyin","nicknamePy","phone","profile","projectExperience","projectExperienceIds","pushStatus","title","visited","website"];function w(e,t,r,n){return this.lift({tableName:"Member",request:this.fetch.put("organizations/"+e+"/members/"+t+"/"+r,n).map(function(e){return a.a({},e,{_id:t})}),method:"update",clause:{_id:t}})}n.SDK.prototype.getMembers=function(e,t){var r={users:1,all:!0,_projectId:e},o=t&&t._userId;return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"Member",request:this.fetch.getMembers(e,t?a.a({},r,t):r),query:{where:a.a({boundToObjectType:"project",_boundToObjectId:e},o&&{_userId:o})},excludeFields:O})},n.SDK.prototype.getMember=function(e){return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"Member",request:this.fetch.getMember(e),query:{where:{_memberId:e}}})},n.SDK.prototype.disableMember=function(e,t){return w.call(this,e,t,"disable")},n.SDK.prototype.enableMember=function(e,t){return w.call(this,e,t,"enable")},n.SDK.prototype.setMemberRole=function(e,t){return this.fetch.put("members/"+e+"/_roleId",{_roleId:t})},n.SDK.prototype.searchMembers=function(e,t){return this.fetch.get("v2/organizations/"+e+"/members/search",t).map(function(e){return e.result})};var C=r("4lhOPbG6"),I=r("gh8QIhMV");n.SDK.prototype.getMessages=function(e){var t=this,r={type:"private",sort:"updated",count:20,page:1},o=e?a.a({},r,e):r,i=this.fetch.getMessages(o).publishReplay(1).refCount();return{queryToken:this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"Message",request:i,query:a.a({},Object(C.pagination)(o.count,o.page),{orderBy:[{fieldName:"boundToObjectUpdated",orderBy:"DESC"}],where:{_id:{$isNotNull:!0}}}),required:["_objectId"],padding:function(e){return e?t.fetch.getMessage(e,{_paddingRequestStats:!0}).map(function(t){return"room"!==t.objectType?null:t.creator?t:(Object(I.throwError)("message: 'creator' not found on padding to "+e),null)}).catch(function(e){return f.Observable.of(null)}):f.Observable.of(null)}}),requestHasMore$:i.map(function(e){return e.length>=o.count})}},n.SDK.prototype.deleteMessage=function(e){return this.lift({tableName:"Message",request:this.fetch.deleteMessage(e),method:"delete",clause:{where:{_id:e}}})},n.SDK.prototype.deleteReadedMessages=function(){return this.lift({tableName:"Message",request:this.fetch.deleteReadedMessages(),method:"delete",clause:{where:{isRead:!0}}})},n.SDK.prototype.markMessageRead=function(e,t){var r={isRead:!0,unreadActivitiesCount:0},n=t?a.a({},t,r):r;return this.lift({request:this.fetch.markMessageRead(e,n).map(function(t){return a.a({},t,{_id:e})}),tableName:"Message",method:"update",clause:{_id:e}})},n.SDK.prototype.markAllMessageRead=function(e){var t=this,r={type:"private"},n=e?a.a({},e,r):r;return this.fetch.markAllMessagesRead(n).map(function(e){return{isRead:!0}}).concatMap(function(){return t.database.update("Message",{_id:{$isNotNull:!0}},{isRead:!0,unreadActivitiesCount:0})})},n.SDK.prototype.updateMessage=function(e,t){return this.database.update("Message",{_id:e},t)};var k=r("i/xYpItT"),j={updatedAsc:[["updated",1],["fileName",1],["fileSize",-1]],updatedDesc:[["updated",-1],["fileName",1],["fileSize",-1]],sizeAsc:[["fileSize",1],["updated",-1],["fileName",1]],sizeDesc:[["fileSize",-1],["updated",-1],["fileName",1]],nameAsc:[["fileName",1],["updated",-1],["fileSize",-1]],nameDesc:[["fileName",-1],["updated",-1],["fileSize",-1]]};function A(e,t,r){var o,i=this;return this.lift({tableName:"File",request:e(t),cacheValidate:n.CacheStrategy.Request,query:a.a({},Object(k.pagination)(t.limit,t.page),{where:a.a({},r,{$or:[{isArchived:null},{isArchived:!1}]}),orderBy:(o=t.order,j[o].map(function(e){var t=a.f(e,2);return{fieldName:t[0],orderBy:t[1]>0?"ASC":"DESC"}}))}),assocFields:{creator:["_id","name","avatarUrl"]},required:["_creatorId","fileKey"],padding:function(e){return i.fetch.getFile(e,{_paddingRequestStats:!0}).catch(function(e){return f.Observable.of(null)})}})}n.SDKFetch.prototype.updatePreferences=function(e,t){return this.put("preferences/"+e,t)},n.SDKFetch.prototype.getSiteConfig=function(){return this.get("envs/view-supports-config")},n.SDKFetch.prototype.isRealName=function(){return this.post("realname-identify/check",null,{apiHost:i.a.ACCOUNT_HOST+"/api"})},n.SDK.prototype.getMyCreateFiles=function(e,t){return A.call(this,this.fetch.getMyCreateFiles.bind(this.fetch),t,{_creatorId:e})},n.SDK.prototype.getMyInvolveFiles=function(e,t){return A.call(this,this.fetch.getMyInvolveFiles.bind(this.fetch),t,{involveMembers:{$has:e},_creatorId:{$ne:e}})},n.SDKFetch.prototype.getOrganizationBindInfos=function(e){return this.get("organizations/"+e+"/bind")},n.SDKFetch.prototype.getProjectsCount=function(e){return this.get("organizations/"+e+"/projects/count")},n.SDKFetch.prototype.getOrganization=function(e){return this.get("organizations/"+e,{withOwner:!0})},n.SDKFetch.prototype.getOrganizationVouched=function(e){return this.get("organizations/"+e+"/vouched")};r("cUZYBCvT");function P(e){return this.post("organizations/api/"+e+"/pro-trial",null,{apiHost:i.a.PAY_HOST,credentials:"include"})}n.SDKFetch.prototype.inviteMemberByEmail=function(e,t){return this.post("v2/organizations/"+e+"/members",{email:t})},n.SDKFetch.prototype.getTrialPro=P,n.SDKFetch.prototype.basic2Pro=P,n.SDKFetch.prototype.getPreference=function(){return this.get("preferences",{})},n.SDK.prototype.getPreference=function(){return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"Preference",request:this.fetch.getPreference(),query:{}})},n.SDKFetch.prototype.updatePreferenceTips=function(e,t){var r="preferences/"+e+"/tips",n={tips:t};return this.put(r,n)},n.SDK.prototype.updatePreferenceTips=function(e,t){var r=this.fetch.updatePreferenceTips(e,t).map(function(t){return a.a({_id:e},t)});return this.lift({method:"update",tableName:"Preference",request:r,clause:{_id:e}})},n.SDKFetch.prototype.getProjectStatusActivities=function(e,t,r){return this.get("projects/"+e+"/projectinfos",{page:t,count:r})},n.SDK.prototype.getProjectStatusActivities=function(e,t,r){var o=this.fetch.getProjectStatusActivities(e,t,r).publishReplay(1).refCount(),i=o.map(function(e){return e.length>=r});return{queryToken:this.lift({cacheValidate:n.CacheStrategy.Request,request:o,tableName:"ProjectStatusActivity",query:a.a({},Object(n.pagination)(r,t),{orderBy:[{fieldName:"created",orderBy:"DESC"}],where:{_boundToObjectId:e,boundToObjectType:"project"}})}),requestHasMore$:i}},n.SDKFetch.prototype.postProjectStatusActivityFetch=function(e,t,r,n,o,i){return this.post("projects/"+e+"/projectinfos"+(i?"?isPushGroupChat=true":""),{degree:t,content:n,name:r,mentions:o})},n.SDK.prototype.postProjectStatusActivity=function(e,t,r,n,o,i){return this.lift({tableName:"ProjectStatusActivity",request:this.fetch.postProjectStatusActivityFetch(e,t,n,r,o,i),method:"create"})};var R="v2/roles";n.SDKFetch.prototype.getProjectPermissions=function(){return this.get(R,{type:"project"})},n.SDKFetch.prototype.getOrganizationPermissions=function(){return this.get(R,{type:"organization"})},n.SDKFetch.prototype.getProjectPermisson=function(e){return this.get("projects/"+e+"/permission-binding").map(function(t){return t?a.a({type:"project",_projectId:e},t):t})},n.SDKFetch.prototype.getOrganizationPermisson=function(e){return this.get("v2/organizations/"+e+"/role")};var N=r("pSso42HE"),x={task:["create.task","remove.task","archive.task","unarchive.task","finish.task","redo.task","share.task.readonly","share.task.invited","unshare.task.readonly","unshare.task.invited","task.share.on","task.share.off","change.to.subtask","subtask.change.parent"],post:["create.post","remove.post","archive.post","unarchive.post","share.post.readonly","share.post.invited","unshare.post.readonly","unshare.post.invited"],event:["create.event","remove.event","archive.event","unarchive.event","share.event.readonly","share.event.invited","unshare.event.readonly","unshare.event.invited"],entry:["create.entry","remove.entry","archive.entry","unarchive.entry"],work:["create.works","remove.work","archive.work","unarchive.work","share.work.readonly","share.work.invited","unshare.work.readonly","unshare.work.invited"],tag:["create.tag","remove.tag","archive.tag","unarchive.tag"],tasklist:["create.tasklist","remove.tasklist","archive.tasklist","unarchive.tasklist"],collection:["create.collection","remove.collection","archive.collection","unarchive.collection"],projectInfo:["create.project.info","remove.project.info"]},D=u.a.union(x.task,x.post,x.event,x.entry,x.work,x.collection,x.tasklist,x.tag),M=function(e,t){return t.some(function(t){return function(e){switch(e){case"all":return function(){return!0};case"system":return function(e){return D.every(function(t){return!new RegExp(t+"$","i").test(e)})};default:return function(t){return x[e].some(function(e){return new RegExp(e+"$","i").test(t)})}}}(t)(e)})};n.SDKFetch.prototype.getProjectsFetch=function(e){return e?this.get("projects",{_organizationId:e}):this.get("projects")},n.SDKFetch.prototype.getRecentProjectsFetch=function(e){return this.get("projects/history",e)},n.SDKFetch.prototype.getProjectInfoFromTemplateFetch=function(e){return this.get("projecttemplates/"+e+"/projectinfo")},n.SDKFetch.prototype.getProjectTemplatesHasProjectInfoFetch=function(e){return this.get("projecttemplates/projectinfo",{_organizationId:e})},n.SDK.prototype.getProjects=function(e,t){void 0===t&&(t=!1);var r=e?[{_organizationId:e},{$or:[{isArchived:!1},{isArchived:null}]}]:{$or:[{isArchived:!1},{isArchived:null}]},o=t?[]:["organization"];return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"Project",request:this.fetch.getProjectsFetch(e),excludeFields:o,query:{where:r}})},n.SDK.prototype.getRecentProjects=function(e){var t=e._organizationId,r=t?[{_organizationId:t},{$or:[{isArchived:!1},{isArchived:null}]}]:{$or:[{isArchived:!1},{isArchived:null}]};return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"Project",request:this.fetch.getRecentProjectsFetch(e),query:{where:r},assocFields:{organization:["_id","description","isExpired","isPublic","logo","name","plan"]}})},n.SDKFetch.prototype.getProjectActivities=function(e,t,r,n){var o=a.a({page:t,count:r},n);return this.get("projects/"+e+"/activities",o)},n.SDK.prototype.getProjectActivities=function(e,t,r,o){var i=Object(N.j)(o),s={_boundToObjectId:e,boundToObjectType:"project"};i&&(i._creatorId&&(s._creatorId={$in:i._creatorId.split(",")}),(i.created__gte||i.created__lte)&&(s.created={},i.created__gte&&(s.created.$gte=new Date(i.created__gte).getTime()),i.created__lte&&(s.created.$lte=new Date(i.created__lte).getTime())));var u=this.fetch.getProjectActivities(e,t,r,i).publishReplay(1).refCount(),c=u.map(function(e){return e.length>=r});return{queryToken:this.lift({cacheValidate:n.CacheStrategy.Cache,tableName:"HomeActivity",request:u,query:a.a({},Object(C.pagination)(r,t),{where:s,orderBy:[{fieldName:"updated",orderBy:"DESC"}]})}).map(function(e){return e.map(function(e){return e.map(function(e){return a.a({},e,{type:Object(N.d)(e.content)})}).filter(function(e){return!i||!i.type||M(e.action,o.types)})})}),requestHasMore$:c}},n.SDKFetch.prototype.getProjectStatistic=function(e,t,r,n){return this.post("v2/projects/"+t+"/statistic",{today:e,sprintIds:r,sprintFilter:n})},n.SDKFetch.prototype.setProjCustomFieldValue=function(e,t,r){return this.put("projects/"+e+"/customfieldlinks/"+t,r)},n.SDK.prototype.setProjCustomFieldValue=function(e,t,r){return this.lift({method:"update",tableName:"Project",request:this.fetch.setProjCustomFieldValue(e,t,r).map(function(t){return a.a({},t,{_id:e})}),clause:{_id:e}})},n.SDKFetch.prototype.updateOrgCustomField=function(e,t,r){var n="organizations/"+e+"/customfields/"+t,o=r;return this.put(n,o)},n.SDK.prototype.updateOrgCustomField=function(e,t,r){return this.lift({method:"update",request:this.fetch.updateOrgCustomField(e,t,r),tableName:"CustomField",clause:{_id:t}})},n.SDKFetch.prototype.importProjectCustomfieldsFromTemplate=function(e,t){return this.post("projects/"+t+"/projectinfo",{_fromTemplateId:e})};r("cY+V28dO");n.SDKFetch.prototype.getCustomRoles=function(e,t){var r="organizations/"+e+"/roles",n={type:t};return this.get(r,n)},n.SDK.prototype.getCustomRoles=function(e,t){return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"CustomRole",request:this.fetch.getCustomRoles(e,t),query:{where:{_organizationId:e,type:t}}})},n.SDKFetch.prototype.getDefaultRoles=function(){return this.get("roles",{})},n.SDK.prototype.getDefaultRoles=function(){return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"DefaultRole",request:this.fetch.getDefaultRoles(),query:{}})};var F=["_id","name","avatarUrl","isRobot"];n.SDK.prototype.getMoreRoomActivities=function(e,t){var r=this.fetch.getMoreRoomActivities(e,t);return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"Activity",request:r,query:a.a({},Object(C.pagination)(t.count,t.page),{where:{_boundToObjectId:e},orderBy:[{fieldName:"created",orderBy:"DESC"}]}),assocFields:{creator:F}})},n.SDK.prototype.getRoomActivities=function(e,t){var r={_bindToObjectId:e,count:30,page:1},o=t?a.a({},r,t):r,i=this.fetch.getRoomActivities(e,o);return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"Activity",request:i,query:a.a({},Object(C.pagination)(o.count,o.page),{where:{_boundToObjectId:e},orderBy:[{fieldName:"created",orderBy:"DESC"}]}),assocFields:{creator:F}})},n.SDK.prototype.getRoomInfo=function(e,t,r){var o={_bindToObjectId:"0",count:30,page:1},i=r?a.a({},o,r):o,s=this.fetch.getRoomInfo(e,t,i);return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"Room",request:s,query:a.a({},Object(C.pagination)(i.count,i.page),{where:{$or:{userChannel:{$match:t},_boundToObjectId:t}}}),assocFields:{project:["isPublic","logo","modelType","name","pinyin","py","_id"],group:["logo","modelType","name","pinyin","py","_id"]}})},n.SDK.prototype.markMute=function(e,t){var r=this.fetch.markRoomMute(e,{isMute:t}).map(function(t){return a.a({},t,{_id:e})});return this.lift({tableName:"Room",request:r,method:"update",clause:{_id:e}})},n.SDKFetch.prototype.bulkGetScenarioFieldConfigs=function(e,t,r){void 0===r&&(r={});var n=r.withCustomfields,o=void 0===n||n,i=a.a({},r,{objectType:t,withCustomfields:o,"_projectIds[]":e});return this.get("projects/scenariofieldconfigs",i)},n.SDK.prototype.bulkGetScenarioFieldConfigs=function(e,t,r){return void 0===r&&(r={}),this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"ScenarioFieldConfig",request:this.fetch.bulkGetScenarioFieldConfigs(e,t,a.a({},r,{withCustomfields:!0})),method:"get",query:{where:{_projectId:{$in:e}}}})},n.SDKFetch.prototype.updateTaskScenarioTaskflow=function(e,t){var r="scenariofieldconfigs/"+e+"/taskflows";return this.put(r,{_taskflowId:t})},n.SDK.prototype.updateTaskScenarioTaskflow=function(e,t){return this.lift({method:"update",tableName:"ScenarioFieldConfig",request:this.fetch.updateTaskScenarioTaskflow(e,t),clause:{_id:e}})},n.SDK.prototype.getSearchersWithTag=function(e){return this.fetch.get("searchers",{tag:e})},n.SDK.prototype.getCustomfieldsSearchers=function(e,t,r,o){return void 0===r&&(r=""),void 0===o&&(o=50),n.Page.defaultState("searchers/customfields",{pageSize:o,urlQuery:{_organizationId:t?void 0:e,_projectId:t,q:r}})},n.SDK.prototype.getSearcherOptionsInPage=function(e,t){return void 0===t&&(t=50),n.Page.defaultState("searchers/options",{pageSize:t,urlQuery:a.a({q:""},e)})},n.SDK.prototype.updateSearchersWithTag=function(e,t,r){return this.fetch.put("searchers",{tag:e,searchers:t,q:r})},n.SDKFetch.prototype.getSmartGroups=function(e,t){var r="projects/"+e+"/smartgroups",n={type:t};return this.get(r,n)},n.SDKFetch.prototype.getSmartGroup=function(e){return this.get("smartgroups/"+e)},n.SDK.prototype.getSmartGroups=function(e,t){return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"SmartGroup",request:this.fetch.getSmartGroups(e,t),query:{where:{_projectId:e,type:t}}})},n.SDK.prototype.getSmartGroup=function(e,t){void 0===t&&(t={});var r=t.cacheValidate||n.CacheStrategy.Request;return this.lift({cacheValidate:r,tableName:"SmartGroup",request:this.fetch.getSmartGroup(e),query:{where:{_id:e}}})},n.SDKFetch.prototype.deleteSmartGroup=function(e){var t="smartgroups/"+e;return this.delete(t)},n.SDK.prototype.deleteSmartGroup=function(e){return this.lift({method:"delete",tableName:"SmartGroup",request:this.fetch.deleteSmartGroup(e),clause:{_id:e}})},n.SDKFetch.prototype.updateSmartGroup=function(e,t){var r="smartgroups/"+e;return this.put(r,t)},n.SDKFetch.prototype.moveSmartGroup=function(e,t){var r="smartgroups/"+e+"/move";return this.put(r,{_nextId:t})},n.SDK.prototype.updateSmartGroup=function(e,t){return this.lift({method:"update",tableName:"SmartGroup",request:this.fetch.updateSmartGroup(e,t),clause:{_id:e}})},n.SDK.prototype.moveSmartGroup=function(e,t){return this.lift({method:"update",tableName:"SmartGroup",request:this.fetch.moveSmartGroup(e,t),clause:{_id:e}})},n.SDKFetch.prototype.createSmartGroup=function(e,t){var r="projects/"+e+"/smartgroups";return this.post(r,t)},n.SDK.prototype.createSmartGroup=function(e,t){return this.lift({method:"create",tableName:"SmartGroup",request:this.fetch.createSmartGroup(e,t)})};r("2emWbNH6");n.SDKFetch.prototype.getTasklistStages=function(e){return this.get("stages",{_tasklistId:e})},n.SDK.prototype.getTasklistStages=function(e){return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"Stage",request:this.fetch.getTasklistStages(e),query:{where:[{_tasklistId:e},{$or:[{isArchived:!1},{isArchived:null}]}],orderBy:[{fieldName:"order",orderBy:"ASC"}]}})},n.SDKFetch.prototype.createStage=function(e,t){return this.post("tasklists/"+e+"/stages",t)},n.SDK.prototype.createStage=function(e,t){return this.lift({method:"create",tableName:"Stage",request:this.fetch.createStage(e,t),clause:{_tasklistId:e}})},n.SDKFetch.prototype.deleteStage=function(e){return this.delete("stages/"+e)},n.SDK.prototype.deleteStage=function(e){return this.lift({method:"delete",tableName:"Stage",request:this.fetch.deleteStage(e),clause:{_id:e}})},n.SDKFetch.prototype.updateStage=function(e,t){return this.put("stages/"+e,t)},n.SDK.prototype.updateStage=function(e,t){return this.lift({method:"update",tableName:"Stage",request:this.fetch.updateStage(e,t),clause:{_id:e}})};r("CFOPnz30");n.SDKFetch.prototype.getProjectInviteLink=function(e){return this.getObjectInviteLink("projects",e)},n.SDKFetch.prototype.getObjectInviteLink=function(e,t){return this.get(e+"/"+t+"/invitelink",null,{apiHost:i.a.SHARE_HOST+"/api"})},n.SDKFetch.prototype.getTaskShare=function(e){return this.get("tasks/"+e+"/share",null,{apiHost:i.a.SHARE_HOST+"/api"})},n.SDKFetch.prototype.updateTaskShare=function(e,t){return this.put("tasks/"+e+"/share",{isShared:t},{apiHost:i.a.SHARE_HOST+"/api"})},n.SDKFetch.prototype.enableTaskShare=function(e){return this.updateTaskShare(e,!0)},n.SDKFetch.prototype.disableTaskShare=function(e){return this.updateTaskShare(e,!1)};var L=r("fG2DBEXl"),B=r("ppMOaM6d");B.SDKFetch.prototype.createTag=function(e){var t=e;return this.post("tags",t)},L.SDK.prototype.createTag=function(e){return this.lift({tableName:"Tag",method:"create",request:this.fetch.createTag(e)})},B.SDKFetch.prototype.getTagCategories=function(e,t){var r="organizations/"+e+"/tagcategories",n={_projectId:t};return this.get(r,n)};var U=r("OFL0i0gL"),G=r.n(U);n.SDKFetch.prototype.bulkUpdateTasks=function(e,t,r){var n="projects/"+e+"/tasks/"+t+"/bulk";return"move"===t&&r&&G()(r,"_taskflowstatusId")&&(n="projects/"+e+"/tasks/taskflowstatus/bulk"),this.put(n,r).map(function(){return[]})},n.SDKFetch.prototype.bulkForkStageTasksToTaskflow=function(e,t){return this.put("taskflowstatus/"+e+"/tasks/copy/bulk",t).map(function(){return[]})},n.SDK.prototype.bulkUpdateTasks=function(e,t,r,n){return this.lift({request:this.fetch.bulkUpdateTasks(e,r,n),method:"update",tableName:"Task",clause:{_id:{$in:t}}})},n.SDK.prototype.bulkCreateTasks=function(e,t,r){return this.lift({request:this.fetch.bulkUpdateTasks(e,t,r),tableName:"Task",method:"create"})},n.SDK.prototype.bulkDeleteTasks=function(e,t,r,n){return this.lift({request:this.fetch.bulkUpdateTasks(e,r,n),tableName:"Task",method:"delete",clause:{_id:{$in:t}}})},n.SDK.prototype.bulkForkStageTasksToTaskflow=function(e,t){return this.lift({request:this.fetch.bulkForkStageTasksToTaskflow(e,t),tableName:"Task",method:"create"})},n.SDKFetch.prototype.checkTaskFieldPermission=function(e,t,r){var n="projects/"+e+"/bulk/tasks-field-permission",o={_ids:t,field:{fieldType:r.name,_customfieldId:r.customFieldId}};return this.post(n,o)},n.SDKFetch.prototype.bulkEditTaskField=function(e,t,r,n,o){var i="projects/"+e+"/bulk/tasks-field-update",a={_ids:t,operation:n,field:{fieldType:r.name,_customfieldId:r.customFieldId,value:o}};return this.put(i,a)};var q=r("T89odf70");n.SDKFetch.prototype.updateTask=function(e,t){var r=t.priority,n=t.note,o=a.g(t,["priority","note"]),i=Object(q.a)(o)?f.Observable.empty():this.put("tasks/"+e,o),s=void 0===r?f.Observable.empty():this.put("tasks/"+e+"/priority",{priority:r}),u=void 0===n?f.Observable.empty():this.put("tasks/"+e+"/note",{note:n});return f.Observable.merge(i,s,u)},n.SDKFetch.prototype.updateTaskTaskflowStatus=function(e,t,r,n){var o={_id:e,_taskflowstatusId:t};return r&&(o._scenariofieldconfigId=r),n&&(o.pos=n),this.put("tasks/"+e+"/taskflowstatus",o)},n.SDKFetch.prototype.updateTaskPosTaskflowStatus=function(e,t){return this.put("tasks/"+e+"/taskflowstatus/pos",{pos:t})},n.SDKFetch.prototype.updateTaskIsDone=function(e,t){return this.put("tasks/"+e+"/isDone",{isDone:t})},n.SDKFetch.prototype.updateTaskSprint=function(e,t,r){return void 0===r&&(r={}),this.put("tasks/"+e+"/sprints",{_sprintId:t,withSubtasks:Boolean(r.withSubtasks)})},n.SDKFetch.prototype.updateTaskStage=function(e,t){return this.put("tasks/"+e+"/move",t)},n.SDKFetch.prototype.updateTaskScenarioFieldConfig=function(e,t){return this.put("tasks/"+e+"/scenariofieldconfigId",t)},n.SDK.prototype.updateTask=function(e,t){return this.lift({request:this.fetch.updateTask(e,t),method:"update",tableName:"Task",clause:{where:{_id:e}}})},n.SDK.prototype.updateTaskTaskflowStatus=function(e,t,r,n){return this.lift({request:this.fetch.updateTaskTaskflowStatus(e,t,r,n),method:"update",tableName:"Task",clause:{where:{_id:e}}})},n.SDK.prototype.updateTaskPosTaskflowStatus=function(e,t){return this.lift({request:this.fetch.updateTaskPosTaskflowStatus(e,t).map(function(t){return a.a({_id:e},t)}),method:"update",tableName:"Task",clause:{where:{_id:e}}})},n.SDK.prototype.updateTaskStage=function(e,t){return this.lift({request:this.fetch.updateTaskStage(e,t),method:"update",tableName:"Task",clause:{where:{_id:e}}})},n.SDK.prototype.updateTaskScenarioFieldConfig=function(e,t){return this.lift({request:this.fetch.updateTaskScenarioFieldConfig(e,t),method:"update",tableName:"Task",clause:{where:{_id:e}}})};var z=r("sa1Ed382");n.SDKFetch.prototype.getTaskflowStatusTasks=function(e,t){return this.get("taskflowstatus/"+e+"/tasks",t).map(function(e){return e.result})},n.SDKFetch.prototype.getTaskflowStatusTaskCount=function(e,t){return this.get("taskflowstatus/"+e+"/tasks/count",t)},n.SDKFetch.prototype.getTestflowStatusTestcaseCount=function(e,t){return this.get("taskflowstatus/"+e+"/testcases/count",t)},n.SDK.prototype.getTaskflowStatusTasks=function(e,t,r){var o={done:{isDone:!0},undone:{isDone:!1},all:{}}[r&&r.status||"all"],i=[a.a({_taskflowstatusId:e},o)];return t||i.push({$or:[{$not:{visible:"involves"}},{involveMembers:{$has:z.user.id}}]}),this.lift({cacheValidate:n.CacheStrategy.Request,request:this.fetch.getTaskflowStatusTasks(e,r),tableName:"Task",query:{where:i}})},n.SDKFetch.prototype.getTasklistsFetch=function(e){return this.get("tasklists",{_projectId:e})},n.SDKFetch.prototype.getTasklistFetch=function(e){return this.get("tasklists/"+e)},n.SDK.prototype.getTasklists=function(e){return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"Tasklist",request:this.fetch.getTasklistsFetch(e),query:{where:[{_projectId:e},{$or:[{isArchived:!1},{isArchived:null}]}]}})},n.SDK.prototype.getTasklist=function(e){return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"Tasklist",request:this.fetch.getTasklistFetch(e),query:{where:[{_id:e}]}})},n.SDKFetch.prototype.updateTasklistStageIds=function(e,t){return this.put("tasklists/"+e+"/stageIds",t).map(function(t){return{_id:e,stageIds:t.stageIds}})},n.SDK.prototype.updateTasklistStageIds=function(e,t){return this.lift({method:"update",tableName:"Tasklist",request:this.fetch.updateTasklistStageIds(e,t),clause:{_id:e}})},n.SDKFetch.prototype.getDependenciesByTaskId=function(e){return this.get("tasks/"+e+"/dependencies")};var V=["_id","_taskflowstatusId","content","startDate","dueDate","isDone","taskflowstatus","project","executor","involveMembers","visible"];n.SDK.prototype.getDependenciesByTaskId=function(e,t){return void 0===t&&(t={}),this.lift(a.a({tableName:"TaskDependency",request:this.fetch.getDependenciesByTaskId(e),cacheValidate:n.CacheStrategy.Cache,query:{where:{$or:{_fromId:e,_toId:e}}}},t.withTask?{assocFields:{from:V,to:V}}:{excludeFields:["from","to"]}))},n.SDKFetch.prototype.createTaskDependency=function(e){return this.post("dependencies",e)},n.SDK.prototype.createTaskDependency=function(e){return this.lift({method:"create",tableName:"TaskDependency",request:this.fetch.createTaskDependency(e)})},n.SDKFetch.prototype.updateTaskDependency=function(e,t){return this.put("dependencies/"+e,t)},n.SDK.prototype.updateTaskDependency=function(e,t){return this.lift({method:"update",tableName:"TaskDependency",request:this.fetch.updateTaskDependency(e,t),clause:{_id:e}})},n.SDKFetch.prototype.deleteTaskDependency=function(e){return this.delete("dependencies/"+e)},n.SDK.prototype.deleteTaskDependency=function(e){return this.lift({method:"delete",tableName:"TaskDependency",request:this.fetch.deleteTaskDependency(e),clause:{_id:e}})},n.SDKFetch.prototype.getTaskPrivilege=function(e){var t=function(e){return!!e._id}(e)?"taskprivileges/"+e._id:"projects/"+e._projectId+"/taskprivileges";return this.get(t)},n.SDK.prototype.getTaskPrivilege=function(e){return this.lift({tableName:"TaskPrivilege",cacheValidate:n.CacheStrategy.Request,request:this.fetch.getTaskPrivilege(e),query:{where:e}})},n.SDK.prototype.getTaskPrivileges=function(e){return this.lift({tableName:"TaskPrivilege",cacheValidate:n.CacheStrategy.Request,request:f.Observable.of(e),query:{}})},n.SDKFetch.prototype.updateTaskPrivilege=function(e,t){var r="taskprivileges/"+e+"/"+(function(e){return void 0!==e.isEnabled}(t)?"is-enabled":"privileges");return this.put(r,t)},n.SDK.prototype.updateTaskPrivilege=function(e,t){return this.lift({method:"update",tableName:"TaskPrivilege",request:this.fetch.updateTaskPrivilege(e,t),clause:{_id:e}})},n.SDKFetch.prototype.getTaskflows=function(e,t,r){var n={withTaskflowstatus:t,type:r};return this.get("projects/"+e+"/taskflows",n).map(function(e){return e.result})},n.SDK.prototype.getTaskflows=function(e,t,r){void 0===t&&(t=!0),void 0===r&&(r="task");var o=t?{taskflowstatuses:["_id","_taskflowId","name","kind","rejectStatusIds","pos"]}:{};return this.lift({cacheValidate:n.CacheStrategy.Request,tableName:"Taskflow",request:this.fetch.getTaskflows(e,t,r),query:{where:{_boundToObjectId:e,objectType:r}},assocFields:o})},n.SDKFetch.prototype.updateTaskflow=function(e,t){return this.put("taskflows/"+e,t)},n.SDK.prototype.updateTaskflow=function(e,t){return this.lift({method:"update",tableName:"Taskflow",request:this.fetch.updateTaskflow(e,t),clause:{_id:e}})},n.SDKFetch.prototype.createTaskflow=function(e,t){return this.post("projects/"+e+"/taskflows",t)},n.SDK.prototype.createTaskflow=function(e,t){return this.lift({method:"create",tableName:"Taskflow",request:this.fetch.createTaskflow(e,t)})},n.SDKFetch.prototype.deleteTaskflow=function(e){return this.delete("taskflows/"+e)},n.SDK.prototype.deleteTaskflow=function(e){return this.lift({method:"delete",tableName:"Taskflow",request:this.fetch.deleteTaskflow(e),clause:{_id:e}})};r("8+055njQ");n.SDKFetch.prototype.deleteTeam=function(e){return this.delete("teams/"+e)},n.SDK.prototype.deleteOrganizationTeam=function(e,t){return this.lift({tableName:"Team",request:this.fetch.deleteTeam(e),method:"delete",clause:{_id:{$in:t}}})},n.SDKFetch.prototype.getTeamsV1=function(e){return this.get("teams",e)},n.SDKFetch.prototype.getTeams=function(e,t,r){return this.get("v2/"+e+"/"+t+"/teams",r).map(function(e){return e.result})},n.SDKFetch.prototype.getSubTeams=function(e,t){return this.get("teams/"+e+"/subTeams",t).map(function(e){return e.result})},n.SDK.prototype.getTeams=function(e){return this.lift({cacheValidate:n.CacheStrategy.Request,request:this.fetch.getTeamsV1({_projectId:e}),tableName:"Team",query:{where:{_projectId:e}}})},n.SDK.prototype.getOrganizationTeams=function(e){return this.lift({cacheValidate:n.CacheStrategy.Cache,tableName:"Team",request:this.fetch.getTeams("organizations",e,{}),query:{where:{_organizationId:e},orderBy:[{fieldName:"pos"}]},excludeFields:["hasMembers"]})},n.SDK.prototype.getTeamSubTeams=function(e,t,r){return this.lift({cacheValidate:n.CacheStrategy.Cache,tableName:"Team",request:this.fetch.getSubTeams(t,r),query:{where:{_organizationId:e},orderBy:[{fieldName:"pos"}]},excludeFields:["hasMembers"]})},n.SDK.prototype.createTeam=function(e,t){return this.lift({tableName:"Team",request:this.fetch.post("v2/teams",t),method:"create",clause:{_organizationId:e}})},n.SDK.prototype.orderTeam=function(e,t,r){return this.lift({tableName:"Team",request:this.fetch.post("v2/teams/"+t+"/move",r),method:"update",clause:{_organizationId:e}})},n.SDKFetch.prototype.updateTeam=function(e,t){return this.put("teams/"+e,t)},n.SDK.prototype.updateOrganizationTeam=function(e,t,r){return this.lift({tableName:"Team",method:"update",request:this.fetch.updateTeam(t,r),clause:{where:{_organizationId:e}}})},n.SDKFetch.prototype.deleteTestplan=function(e,t){return this.delete("projects/"+e+"/testplans/"+t)},n.SDKFetch.prototype.deleteTestplanGroup=function(e,t,r){return this.delete("testplans/"+e+"/commongroups/"+t,r)},n.SDK.prototype.deleteTestplan=function(e,t){return this.lift({method:"delete",tableName:"Testplan",request:this.fetch.deleteTestplan(e,t),clause:{_id:t}})},n.SDK.prototype.deleteTestplanGroup=function(e,t,r){return this.lift({method:"delete",tableName:"CommonGroup",request:this.fetch.deleteTestplanGroup(e,t,r),clause:{_id:t}})},n.SDKFetch.prototype.getTestplans=function(e){return this.get("projects/"+e+"/testplans")},n.SDKFetch.prototype.getTestplan=function(e,t){return this.get("projects/"+e+"/testplans/"+t)},n.SDKFetch.prototype.getTestplansStatistics=function(e){return this.get("projects/"+e+"/testplans/testcases-count")},n.SDKFetch.prototype.getTestplanGroups=function(e){return this.get("testplans/"+e+"/commongroups")},n.SDKFetch.prototype.getTestplanQuickFilterStatus=function(e){return this.get("testplans/"+e+"/status-count")},n.SDK.prototype.getTestplan=function(e,t){return this.lift({method:"update",tableName:"Testplan",request:this.fetch.getTestplan(e,t),clause:{where:{_id:t}}})},n.SDK.prototype.getTestplans=function(e){return this.lift({cacheValidate:n.CacheStrategy.Cache,request:this.fetch.getTestplans(e),tableName:"Testplan",query:{where:{_projectId:e},orderBy:[{fieldName:"created",orderBy:"DESC"}]}})},n.SDK.prototype.getTestplansRequest=function(e){return this.lift({cacheValidate:n.CacheStrategy.Request,request:this.fetch.getTestplans(e),tableName:"Testplan",query:{where:{_projectId:e},orderBy:[{fieldName:"created",orderBy:"DESC"}]}})},n.SDK.prototype.getTestplanGroups=function(e){return this.lift({cacheValidate:n.CacheStrategy.Cache,request:this.fetch.getTestplanGroups(e),tableName:"CommonGroup",query:{where:{_testplanId:e},orderBy:[{fieldName:"pos",orderBy:"DESC"}]}})},n.SDKFetch.prototype.createTestplan=function(e,t){return this.post("projects/"+e+"/testplans",t)},n.SDKFetch.prototype.createTestplanGroup=function(e,t){return this.post("testplans/"+e+"/commongroups",t)},n.SDK.prototype.createTestplan=function(e,t){return this.lift({method:"create",tableName:"Testplan",request:this.fetch.createTestplan(e,t)})},n.SDK.prototype.createTestplanGroup=function(e,t){return this.lift({method:"create",tableName:"CommonGroup",request:this.fetch.createTestplanGroup(e,t)})},n.SDKFetch.prototype.updateTestplan=function(e,t,r){return this.put("projects/"+e+"/testplans/"+t,r).map(function(e){return a.a({},e,{_id:t})})},n.SDKFetch.prototype.moveTestplanGroup=function(e,t,r){return this.put("testplans/"+e+"/commongroups/"+t+"/move",r)},n.SDKFetch.prototype.copyTestplanGroup=function(e,t,r){return this.put("testplans/"+e+"/commongroups/"+t+"/copy",r)},n.SDKFetch.prototype.updateTestplanGroup=function(e,t,r){return this.put("testplans/"+e+"/commongroups/"+t,r)},n.SDK.prototype.updateTestplan=function(e,t,r){return this.lift({method:"update",tableName:"Testplan",request:this.fetch.updateTestplan(e,t,r),clause:{where:{_id:t}}})},n.SDK.prototype.moveTestplanGroup=function(e,t,r){return this.lift({method:"update",tableName:"CommonGroup",request:this.fetch.moveTestplanGroup(e,t,r),clause:{where:{_id:t}}})},n.SDK.prototype.copyTestplanGroup=function(e,t,r){return this.lift({method:"update",tableName:"CommonGroup",request:this.fetch.copyTestplanGroup(e,t,r),clause:{where:{_id:t}}})},n.SDK.prototype.updateTestplanGroup=function(e,t,r){return this.lift({method:"update",tableName:"CommonGroup",request:this.fetch.updateTestplanGroup(e,t,r),clause:{where:{_testplanId:e}}})},n.SDKFetch.prototype.planTestplan=function(e,t){return this.post("testplans/"+e+"/planning",{data:t})},n.SDKFetch.prototype.bulkUpdateTestcases=function(e,t,r,n){return this.put("projects/"+e+"/testcases/"+t+"/bulk",a.a({testcaseIds:r},n))},n.SDKFetch.prototype.bulkSyncTestcaseFromHub=function(e,t){return this.put("testplans/"+e+"/bulk/pull-from-hubcase",{_testcaseIds:t})},n.SDKFetch.prototype.bulkSyncTestcaseToHub=function(e,t){return this.put("testplans/"+e+"/bulk/push-to-hubcase",{_testcaseIds:t})},n.SDKFetch.prototype.bulkSaveTestcaseToHub=function(e,t){return this.post("projects/"+e+"/testcases/save-to-hubcase/bulk",t)},n.SDK.prototype.bulkCopyTestcases=function(e,t,r){return this.lift({request:this.fetch.bulkUpdateTestcases(e,"copy",t,r),tableName:"Testcase",method:"create"})},n.SDK.prototype.bulkArchiveTestcases=function(e,t){return this.lift({request:this.fetch.bulkUpdateTestcases(e,"archive",t).map(function(e){return(e.testcaseIds||t).map(function(t){return a.a({},e,{_id:t})})}),method:"update",tableName:"Testcase",clause:{_id:{$in:t}}})},n.SDK.prototype.bulkUpdateTestcases=function(e,t,r,n){return this.lift({request:this.fetch.bulkUpdateTestcases(t,e,r,n).map(function(e){return(e.testcaseIds||r).map(function(t){return a.a({},e,{_id:t})})}),method:"update",tableName:"Testcase",clause:{_id:{$in:r}}})},n.SDKFetch.prototype.getTestcases=function(e,t,r,n,o){return this.get("projects/"+e+"/testcases",{filter:t,status:r,includeNodes:o,_commongroupId:n})},n.SDK.prototype.getTestcasesByTestplan=function(e,t,r){var o={_testplanId:t},i=this.fetch.getTestcases(e,"_testplanId="+t);if(r){var s=r.map(function(e){return e._id});o=a.a({},o,{_id:{$in:s}}),i=f.Observable.of(r)}return this.lift({cacheValidate:n.CacheStrategy.Cache,request:i,tableName:"Testcase",query:{where:[o,{$or:[{isArchived:!1},{isArchived:null}]}],orderBy:[{fieldName:"created",orderBy:"ASC"}]},assocFields:{executor:["_id","name","avatarUrl"],commongroup:["_id","name","isRoot"]}})},n.SDK.prototype.getTestcasesByGroup=function(e,t,r,o){var i=Object.assign({_testplanId:r},"all"!==o?{_commongroupId:o}:{});return this.lift({cacheValidate:n.CacheStrategy.Request,request:this.fetch.getTestcases(e,t),tableName:"Testcase",query:{where:[i,{$or:[{isArchived:!1},{isArchived:null}]}],orderBy:[{fieldName:"created",orderBy:"ASC"}]},assocFields:{executor:["_id","name","avatarUrl"],commongroup:["_id","name","isRoot"]}})},n.SDK.prototype.getTestcase=function(e){return this.lift({cacheValidate:n.CacheStrategy.Request,request:this.fetch.get("testcases/"+e),tableName:"Testcase",query:{where:[{_id:e}]},assocFields:{commongroup:["_id","name","isRoot"]}})},n.SDK.prototype.createTestcase=function(e){return this.lift({request:this.fetch.post("testcases",e),tableName:"Testcase",method:"create"})},n.SDK.prototype.saveTestcaseToTesthub=function(e,t){return this.lift({request:this.fetch.post("testcases/"+e+"/save-to-hubcase",{_testhubId:t.testhubId,_commongroupId:t.testgroupId}),tableName:"Testcase",method:"create"})},n.SDK.prototype.deleteTestcase=function(e){return this.lift({tableName:"Testcase",request:this.fetch.delete("testcases/"+e),method:"delete",clause:{_id:e}})};var K=r("3eMzznN/");n.SDK.prototype.updateTestcase=function(e,t,r){var n,o=Object(K.hyphenate)(t);return this.lift({method:"update",tableName:"Testcase",request:this.fetch.put("testcases/"+e+"/"+o,(n={},n[t]=r,n)),clause:{where:{_id:e}}})},n.SDK.prototype.moveTestcase=function(e,t,r){return this.lift({method:"update",tableName:"Testcase",request:this.fetch.put("testcases/"+e+"/commongroups/move",{_commongroupId:r,_testplanId:t}),clause:{where:{_id:e}}})},n.SDK.prototype.forkTestcase=function(e,t){return this.lift({request:this.fetch.put("testcases/"+e+"/fork",t),method:"update",tableName:"Testcase",clause:{where:{_id:e}}})},n.SDKFetch.prototype.syncTestcaseToTesthub=function(e){return this.put("testcases/"+e+"/sync-to-hubcase")},n.SDKFetch.prototype.syncTestcaseFromTesthub=function(e){return this.put("testcases/"+e+"/pull-from-hubcase")},n.SDK.prototype.archiveTestcase=function(e){return this.lift({tableName:"Testcase",request:this.fetch.post("testcases/"+e+"/archive"),method:"update",clause:{_id:e}})},n.SDK.prototype.unarchiveTestcase=function(e){return this.lift({tableName:"Testcase",request:this.fetch.delete("testcases/"+e+"/archive"),method:"update",clause:{_id:e}})};var H=r("QQ/Xj7Ar");n.SDK.prototype.getTesthubs=function(e,t){void 0===t&&(t={});var r=t.useCache?{useCache:{tableName:"Testhub",sqlQuery:{where:{_organizationId:e},orderBy:[{fieldName:"created",orderBy:"ASC"}]}}}:{};return new H.a(this,50,"testhubs",{_organizationId:e,q:t.q},a.a({apiHost:i.a.HOST+"/testhub/api"},r))},n.SDK.prototype.getTesthub=function(e){return this.lift({cacheValidate:n.CacheStrategy.Request,request:this.fetch.get("testhubs/"+e,null,{apiHost:i.a.HOST+"/testhub/api"}),tableName:"Testhub",query:{where:[{_id:e}]}})},n.SDK.prototype.createTesthub=function(e,t){return this.lift({request:this.fetch.post("testhubs",a.a({},t,{_organizationId:e}),{apiHost:i.a.HOST+"/testhub/api"}),tableName:"Testhub",method:"create"})},n.SDK.prototype.deleteTesthub=function(e){return this.lift({tableName:"Testhub",request:this.fetch.delete("testhubs/"+e,null,{apiHost:i.a.HOST+"/testhub/api"}),method:"delete",clause:{_id:e}})},n.SDK.prototype.updateTesthub=function(e,t){return this.lift({method:"update",tableName:"Testhub",request:this.fetch.put("testhubs/"+e,t,{apiHost:i.a.HOST+"/testhub/api"}),clause:{where:{_id:e}}})},n.SDKFetch.prototype.getTestgroupsFetch=function(e){return this.get("testhubs/"+e+"/groups",null,{apiHost:i.a.HOST+"/testhub/api"})},n.SDK.prototype.getTestgroups=function(e){return this.lift({cacheValidate:n.CacheStrategy.Cache,request:this.fetch.getTestgroupsFetch(e),tableName:"CommonGroup",query:{where:[{_boundToObjectId:e}]}})},n.SDK.prototype.createTestgroup=function(e){return this.lift({request:this.fetch.post("groups",e,{apiHost:i.a.HOST+"/testhub/api"}),tableName:"CommonGroup",method:"create"})},n.SDK.prototype.deleteTestgroup=function(e,t){return this.lift({tableName:"CommonGroup",request:this.fetch.delete("groups/"+e,t,{apiHost:i.a.HOST+"/testhub/api"}),method:"delete",clause:{_id:e}})},n.SDK.prototype.updateTestgroup=function(e,t){return this.lift({method:"update",tableName:"CommonGroup",request:this.fetch.put("groups/"+e,t,{apiHost:i.a.HOST+"/testhub/api"}),clause:{where:{_id:e}}})},n.SDK.prototype.moveTestgroup=function(e,t){return this.lift({method:"update",tableName:"CommonGroup",request:this.fetch.put("groups/"+e+"/move",t,{apiHost:i.a.HOST+"/testhub/api"}),clause:{where:{_id:e}}})},n.SDK.prototype.copyTestgroup=function(e,t){return this.lift({method:"update",tableName:"CommonGroup",request:this.fetch.put("groups/"+e+"/copy",t,{apiHost:i.a.HOST+"/testhub/api"}),clause:{where:{_id:e}}})},n.SDKFetch.prototype.bulkUpdateUsercases=function(e,t,r,n){return this.put("testhubs/"+e+"/testcases/"+t+"/bulk",a.a({testcaseIds:r},n),{apiHost:i.a.HOST+"/testhub/api"})},n.SDK.prototype.bulkCopyUsercases=function(e,t,r){return this.lift({request:this.fetch.bulkUpdateUsercases(e,"copy",t,r),tableName:"Testcase",method:"create"})},n.SDK.prototype.bulkDeleteUsercases=function(e,t){return this.lift({request:this.fetch.bulkUpdateUsercases(e,"remove",t),method:"delete",tableName:"Testcase",clause:{_id:{$in:t}}})},n.SDK.prototype.bulkUpdateUsercases=function(e,t,r,n){return this.lift({request:this.fetch.bulkUpdateUsercases(t,e,r,n).map(function(e){return(e.testcaseIds||r).map(function(t){return a.a({},e,{_id:t})})}),method:"update",tableName:"Testcase",clause:{_id:{$in:r}}})},n.SDKFetch.prototype.getUsercaseFetch=function(e){return this.get("testcases/"+e,null,{apiHost:i.a.HOST+"/testhub/api"})},n.SDKFetch.prototype.getUsercasesFetch=function(e,t){return void 0===t&&(t=!1),this.get("groups/"+e+"/testcases",{includeNodes:t},{apiHost:i.a.HOST+"/testhub/api"})},n.SDK.prototype.getUsercase=function(e){return this.lift({cacheValidate:n.CacheStrategy.Request,request:this.fetch.getUsercaseFetch(e),tableName:"Testcase",query:{where:[{_id:e}]},assocFields:{executor:["_id","name","avatarUrl"],testhub:["_id","name"],commongroup:["_id","name","isRoot"]}})},n.SDK.prototype.getUsercasesByHub=function(e){return this.lift({cacheValidate:n.CacheStrategy.Request,request:f.Observable.of([]),tableName:"Testcase",query:{where:[{_testhubId:e},{$or:[{isArchived:!1},{isArchived:null}]}],orderBy:[{fieldName:"created",orderBy:"ASC"}]},assocFields:{executor:["_id","name","avatarUrl"],testhub:["_id","name"],commongroup:["_id","name","isRoot"]}})},n.SDK.prototype.getUsercasesByGroup=function(e,t){return void 0===t&&(t=!1),this.lift({cacheValidate:n.CacheStrategy.Cache,request:this.fetch.getUsercasesFetch(e,t),tableName:"Testcase",query:{where:[{_commongroupId:e},{$or:[{isArchived:!1},{isArchived:null}]}],orderBy:[{fieldName:"created",orderBy:"ASC"}]},assocFields:{executor:["_id","name","avatarUrl"],testhub:["_id","name"],commongroup:["_id","name","isRoot"]}})},n.SDK.prototype.createUsercase=function(e){return this.lift({request:this.fetch.post("testcases",e,{apiHost:i.a.HOST+"/testhub/api"}),tableName:"Testcase",method:"create"})},n.SDK.prototype.updateUsercase=function(e,t,r){var n,o=Object(K.hyphenate)(t);return this.lift({method:"update",tableName:"Testcase",request:this.fetch.put("testcases/"+e+"/"+o,(n={},n[t]=r,n),{apiHost:i.a.HOST+"/testhub/api"}),clause:{where:{_id:e}}})},n.SDK.prototype.forkUsercase=function(e,t){return this.lift({method:"update",tableName:"Testcase",request:this.fetch.put("testcases/"+e+"/copy",{_commongroupId:t},{apiHost:i.a.HOST+"/testhub/api"}),clause:{where:{_id:e}}})},n.SDK.prototype.sortUsercase=function(e,t,r){return this.lift({method:"update",tableName:"Testcase",request:this.fetch.put("testcases/"+e+"/move",{_commongroupId:t,_nextId:r},{apiHost:i.a.HOST+"/testhub/api"}),clause:{where:{_id:e}}})},n.SDK.prototype.deleteUsercase=function(e){return this.lift({tableName:"Testcase",request:this.fetch.delete("testcases/"+e,null,{apiHost:i.a.HOST+"/testhub/api"}),method:"delete",clause:{_id:e}})};r("nIZnkqXD");var W=function(){function e(){}return e.IgnoreOnce=function(t,r){void 0===r&&(r=e.expiration),e.objectIds.push(t),setTimeout(function(){e.Contain(t)&&e.Remove(t)},r)},e.Remove=function(t){e.objectIds=e.objectIds.filter(function(e){return e!==t})},e.Contain=function(t){return e.objectIds.indexOf(t)>=0},e.objectIds=[],e.expiration=5e3,e}(),J=new n.Socket.Interceptors;J.append(function(e,t){var r,o,i=e.type,s=e.method,u=e.data,c=e.id;if(u&&/^events?/.test(i))if("new"!==s){if("change"===s){var l=n.Socket.mapMsgTypeToTable.getTableInfo("event"),p=l.tabName,d=l.pkName,g=Array.isArray(u)?u:[a.a({},u,(r={},r[d]=c,r))];return t.get(p,{where:(o={},o[d]={$in:g.map(function(e){return e[d]})},o)}).values().switchMap(function(e){return f.Observable.from(g).map(function(r){var o=r[d],i=e.find(function(e){return e[d]===o}),a=n.EventSDK.marshaler.parsePatch(r,i);return t.upsert(p,a)}).mergeAll()})}}else Object.assign(u,n.EventSDK.marshaler.parse(u))},{mutate:!0}),J.append(function(e){var t=e.type,r=e.data;"task"===t&&r&&!r._executorId&&void 0!==r.executor&&delete r.executor},{mutate:!0}),J.append(function(e){var t=e.data,r=e.type;if(t&&/^messages?/.test(r))return/^readAll:(private|normal|later)$/.test(t)||"pm"!==t.msgType?f.Observable.of(null):void delete t.updated},{mutate:!0}),J.append(function(e){var t=e.type,r=e.method;if("activities"===t&&("new"===r||"change"===r))return f.Observable.of(null)}),J.append(function(e){var t=e.method,r=e.id;if("change"===t&&W.Contain(r))return W.Remove(r),f.Observable.of(null)});var Q,Y,X,$=function(e,t){return"new"===e.method||"change"===e.method?J.apply(e,t):n.Socket.InterceptorsControlFlow.PassThrough},Z=r("nDsjpj50"),ee=r("LvDlAkAJ"),te=r.n(ee);!function(e){e.Initialize="@worker/initialize",e.Unsubscribe="@worker/unsubscribe",e.Close="@worker/close",e.Debug="@worker/debug"}(Q||(Q={})),function(e){e[e.Closed=-3]="Closed",e[e.Loaded=-2]="Loaded",e[e.Ready=-1]="Ready"}(Y||(Y={})),function(e){e[e.Stopped=0]="Stopped",e[e.Running=1]="Running"}(X||(X={}));var re=function(e){return!!e.error},ne=function(){function e(t,r,n){var o=this;this.name=t,this.workerCreator=r,this.initParams=n,this.nextId=0,this.status$$=new Z.BehaviorSubject(X.Stopped),this._debug=!1,this.request=function(e,t){return f.Observable.create(function(r){var n=o.nextId++,i={id:n,method:e,params:t};o.debug&&(i.__timestamp=Date.now(),console.info("Client request",{id:n,method:e,params:t},"at:",i.__timestamp,"ms")),o.worker.postMessage(i);var a=o.message$.filter(function(e){return e.id===n}).mergeMap(function(e){return re(e)?f.Observable.throw(e.error):f.Observable.of(e)}).do(function(e){if(o.debug){var t=Date.now()-e.__timestamp;console.info("Client received",te.a.omit(e,"__timestamp"),"after worker post:",t,"ms")}}).takeWhile(function(e){return!e.result.complete}).pluck("result","data").subscribe(r),s=o.status$$.subscribe(function(e){e!==X.Running&&r.error("Worker is stopped")});return function(){a.unsubscribe(),s.unsubscribe(),o.worker.postMessage({id:n,method:Q.Unsubscribe})}})},this.notify=function(e,t){o.status$$.first().subscribe(function(r){if(r!==X.Running)throw new Error("Worker is stopped");o.worker.postMessage({method:e,params:t}),o.debug&&console.info("Client notify",{method:e,params:t},"at:",Date.now(),"ms")})},this.close=function(){o.worker.postMessage({id:Y.Closed,method:Q.Close}),delete e.instances[o.name],o.status$$.next(X.Stopped)},e.instances[this.name]=this}return e.create=function(t,r,n){if(!("Worker"in window))throw new Error("Browser dos not support web worker");return e.instances[t]?e.instances[t]:new e(t,r,n)},e.get=function(t){return e.instances[t]},Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.notify(Q.Debug,[e])},enumerable:!0,configurable:!0}),e.prototype.run=function(){var e=this;return f.Observable.defer(function(){return e.worker=e.workerCreator(),e.message$=f.Observable.fromEvent(e.worker,"message",function(e){return e.data}).share(),e.ready$=e.message$.first(function(e){return e.id===Y.Ready}).shareReplay(1),e.error$=f.Observable.fromEvent(e.worker,"error").share(),e.status$$.next(X.Running),e.notify(Q.Initialize,e.initParams),e.ready$})},e.instances={},e}(),oe=r("rA5Lr6AX"),ie=r("Z19A9xxA"),ae=0;function se(e){return Object.keys(e).forEach(function(t){var r=e[t];r.virtual&&(r.virtual.where=r.virtual.where.toString())}),e}var ue=function(){function e(e,t,r,n,o){void 0===r&&(r=[]),this.rdbWorker=e,this.params=t,this.constitution=r,this.mapFn=n,this.lastEmit=o}return e.buildTokenTree=function(t){return{params:t.params,lastEmit:t.lastEmit,children:t.constitution.map(function(t){return{type:t.type,selectors:t.selectors.map(function(t){return e.buildTokenTree(t)})}})}},e.prototype.values=function(){var e=this.rdbWorker.request("token.values",[this.tokenTree]);return this.mapFn?e.pipe(this.mapFn):e},e.prototype.changes=function(){var e=this,t=this.rdbWorker.request("token.traces",[this.tokenTree]).map(function(t){var r=t.result,n=a.g(t,["result"]),o=e.lastEmit;return o?Object(oe.getPatchResult)(o,r,n):r}).do(function(t){e.lastEmit=t.slice(0)});return this.mapFn?t.pipe(this.mapFn):t},e.prototype.map=function(e){return this.mapFn=e,this},e.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new e(this.rdbWorker,this.params,a.h(this.constitution,[{type:"concat",selectors:t,lastEmit:this.lastEmit}]),this.mapFn,this.lastEmit)},e.prototype.combine=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new e(this.rdbWorker,this.params,a.h(this.constitution,[{type:"combine",selectors:t,lastEmit:this.lastEmit}]),this.mapFn,this.lastEmit)},Object.defineProperty(e.prototype,"tokenTree",{get:function(){return e.buildTokenTree(this)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.rdbWorker.request("token.toString",[this.tokenTree])},e}();r("sx9yqNer"),r("T3prb3wx"),r("gxrElbei"),r("vJfdXfAs"),r("fjAU4jyp"),r("4XzM5oUL"),r("OA6Iqxq6"),r("dAiZTu0g"),r("6OjodyzK"),r("92bnoOmF"),r("qKs0Z8KE"),r("VXxgOQI1"),r("vqGAP1xU"),r("HEwtAF8a"),self;r.d(t,"SocketUpdateInterceptor",function(){return W});var ce=r("sa1Ed382"),le=new n.SDK;le.fetch.setAPIHost(""+i.a.API_HOST),le.setGraphQLEndpoint("graphql",{merge:!0}),le.socketClient.interceptors.append($,{mutate:!0}),i.a.API_X_PORT&&le.fetch.setHeaders({Accept:"application/json","Content-Type":"application/json","x-port":i.a.API_X_PORT}),ce.sdk=le;t.default=le;var pe=r("zPd2KppM"),fe=["development","ga"].indexOf(ce.env)>-1,de=ne.create("rdb-worker",pe,[fe]);ce.WorkerClient=ne,de.run().first().switchMap(function(){return le.initReactiveDB((e=de,ie.QueryToken.prototype.toString=function(){return this.selector$.switchMap(function(e){return e instanceof ue?e.toString():f.Observable.of(e.toString())})},{inTransaction:!1,getMethodName:function(e){return(this.inTransaction?this.id+":@inTransaction:":"")+e},defineSchema:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=a.f(t,2),o=n[0],i=n[1];return e.request("defineSchema",[o,se(i)]).subscribe(),this},connect:function(){e.request("connect").subscribe()},insert:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.request(this.getMethodName("insert"),t)},upsert:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.request(this.getMethodName("upsert"),t)},update:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.request(this.getMethodName("update"),t)},delete:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.request(this.getMethodName("delete"),t)},remove:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.request(this.getMethodName("remove"),t)},get:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=new ue(e,t);return new ie.QueryToken(f.Observable.of(n))},dispose:function(){return e.request("dispose")},load:function(t){return e.request("load",[t])},dump:function(){return e.request("dump")},transaction:function(){var t=this;return f.Observable.create(function(r){var n=ae++,o=e.request("transaction",[n]).map(function(){return[Object.create(t,{inTransaction:{get:function(){return!0}},id:{get:function(){return n}}}),{commit:function(){return e.request("transaction.commit",[n])},abort:function(){e.request("transaction.abort",[n]).subscribe()}}]}).subscribe(r);return function(){o.unsubscribe(),e.notify("transactionGC",[n])}})},attachTx:function(){throw Error("Unexpected transaction use")}}));var e}).subscribe()},s59ACGQN:function(e,t,r){"use strict";r.d(t,"a",function(){return g});var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r("i8i4LrFt"),a=r("/MKjzBat"),s=r("fio7jWQ0"),u=r("2ivs9lcN"),c=r("nL4olqOP"),l=r("ioaOqjIU"),p=r("QSzw2VcL"),f=r("MWiWfNEw"),d=r("odY26VIi"),g=new(function(){function e(){var e=this;this.fetchProjectModel=function(e){return new Promise(function(t,r){return c.fetchOne(0,e,{error:r,success:function(e){return t(e)}})})},this.setProjectModel=function(t){return e.projectModal=t},this.mountAnalutics=function(){r.e(4).then(function(){var t=r("fuL6wZyI"),u=t.analyticsEpic,c=t.analyticsReducer,l=r("wS4E+uIC"),p=r("ZxLt4cgr").connectedChart,f=e.requestModel,d=f.report,g=f._projectId,h={params:{_chartId:d,_projectId:g}};Object(s.addEpic)(u),Object(s.addUIReducer)({analytics:c}),s.store.dispatch(l.setSuperUserAction(e.projectModal.getRoleScope()>=1)),s.store.dispatch(l.setProjectIdAction(g));var m=n.a({},e.requestModel,{_id:e.requestModel.report});i.render(o.createElement(a.Provider,{store:s.store},o.createElement(p,{match:h,dialogRequest:m})),e.mountNode)}.bind(null,r)).catch(r.oe)},this.initFetch=function(){var t=e.requestModel._projectId;return Promise.all([new Promise(function(e,r){return p.fetch(t,{boundToObjectType:"project",error:r,success:e})}),new Promise(function(e,r){return u.fetch(t,{boundToObjectType:"project",error:r,success:e})}),new Promise(function(e,r){return l.fetch(t,{boundToObjectType:"project",error:r,success:e})}),new Promise(function(e,r){return f.fetch(t,{error:r,success:e})}),new Promise(function(e,r){return d.fetch(t,{error:r,success:e})})])},this.createMountNode=function(){var e=document.createElement("div");return document.body.appendChild(e),e}}return e.prototype.onOpen=function(e){this.requestModel=e,this.mountNode=this.createMountNode(),this.fetchProjectModel(this.requestModel._projectId).then(this.setProjectModel).then(this.initFetch).then(this.mountAnalutics)},e.prototype.destroy=function(){this.mountNode&&(i.unmountComponentAtNode(this.mountNode),document.body.removeChild(this.mountNode),delete this.mountNode,delete this.requestModel,delete this.projectModal)},e}())},s6VidTkT:function(e,t,r){"use strict";var n,o,i;r.d(t,"b",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"c",function(){return i}),function(e){e[e.SINGLE=0]="SINGLE",e[e.MULTIPLE=1]="MULTIPLE"}(n||(n={})),function(e){e[e.PLUGIN=0]="PLUGIN",e[e.SCENARIO=1]="SCENARIO"}(o||(o={})),function(e){e.ASC="asc",e.DESC="desc"}(i||(i={}))},sAKKuOjO:function(e,t,r){e.exports=r.p+"images/testplan-poster.e5fa641f.png"},sD09NJbS:function(e,t,r){"use strict";var n=r("TSYQbtd+"),o=r.n(n),i=r("q1tIBJhx"),a=r.n(i),s=r("gNFMJi3i"),u=r("L15bjuDV"),c=function(e){var t=o()(u.customfield__loading,{avator:e.avator});return a.a.createElement("span",{className:t})},l=function(e){var t,r=e.customfieldValue;return t=e.descriptor.loading?a.a.createElement(c,null):r&&null!==r.value?Object(s.d)(r):a.a.createElement("span",{className:u.placeholder},"-"),a.a.createElement("div",{className:e.className},a.a.createElement("div",{className:u.inner},t))},p=r("RSFv0j4e"),f=function(e,t){var r=e.customfield;if(!r)return null;var n=r.find(function(e){return e._customfieldId===t});return n?Object(s.k)(n):null},d=function(e,t,r){var n=f(e,r),o=f(t,r);return Object(p.a)(n,o)};r.d(t,"a",function(){return l}),r.d(t,"b",function(){return d})},sP18MwMK:function(e,t,r){e.exports=r.p+"images/logo2.fe891ffc.jpg"},sa1Ed382:function(e,t,r){var n=r("2qRnoGmE"),o={name:"teambition",env:n.env,version:n.version,config:n,language:n.language,redux:null,consumerId:null,ua:null,perf:function(){r.e(48).then(r.bind(null,"o8NOevo+")).then(function(e){e.startMemMonitor(),e.startFPSMonitor()})}};e.exports=o},slMuA5KH:function(e,t,r){"use strict";r.d(t,"a",function(){return $});var n=r("mrSGxOB2"),o=r("fvjXLGkK"),i=r("L342T8FT"),a=r("QHFeugHF"),s=r("yx23kki3"),u=r("cl35kkSI"),c=r("HSiQYofP"),l=r("x89q56rT"),p=r("5lGttqQN"),f=r("9Ip6qvet"),d=r("r8ayFxb7"),g=r("n3Dgp7QT"),h=r("yLnoFmrj"),m=r("wj/icwnL"),y=r("cZTZA4fV"),v=r("f0NJUF9/"),b=r("btPWu6us"),_=r("NSliPjIn"),S=r("VZAukzxm"),T=r("7JhjQgus"),E=r("F3WdH5q6"),O=r("vaFGDeZz"),w=r("J6lI8p1l"),C=r("+69hA2nB"),I=r("dbBRp+if"),k=r("t6tM/GMl"),j=r("gorePX7J"),A=r("PHHYd/Ws"),P=r("rGq9vsrD"),R=r("nMjh9H6T"),N=r("Dz/Pstls"),x=r("cQgplHA6"),D=r("HUhQ835W"),M=r("ESuIIMP0"),F=r("mNUNGEpO"),L=r("X7169US4"),B=r("TN1MO+cS"),U=r("G94ZpdML"),G=r("lDYZCKQt"),q=r("SMR95uLj"),z=r("/A1HOqjB"),V=r("xhXG/roP"),K=r("i/yG9/km"),H=r("zir0hWNI"),W=r("eKedrZ+V"),J=r("zDJ6609A"),Q=r("NQM26xch"),Y=r("zQo2g8Yu").createUUIDReducer,X=r("MCI9yZEr").reducer,$=function(e){return Object(o.combineReducers)({router:i.routerReducer,form:X,preference:a.reducer,ui:Object(o.combineReducers)(n.a({board:Object(o.combineReducers)({taskBoard:j.c,gantt:s.reducer,boardViewType:B.e}),scrumPanel:L.reducer,applicationFields:C.reducer,chat:u.reducer,chatRoomPanel:c.a,commonGroups:V.k,customViews:J.reducer,dashboardModal:z.reducer,dock:U.i,aoneGuide:G.c,events:d.reducer,globalSearch:A.d,groupChat:p.reducer,inviteMembersModal:m.inviteMembersModalReducer,library:g.reducer,listView:Q.c,myFiles:y.reducer,organizationPortal:T.c,organizationReportApp:v.t,posts:w.f,project:D.reducer,projectCategoryManagerModal:E.projectCategoryManagerModalReducer,projectClusterViews:M.c,projectClusterExport:F.c,projectOverview:O.reducer,projectsInformationBoardApp:b.projectsInformationBoardAppReducer,room:l.reducer,search:f.h,searchExport:R.c,searchFilter:P.d,taskLocator:_.reducer,teamsListSelect:S.teamsListSelectReducer,sprintPanel:I.reducer,sprintPlanning:k.h,taskflow:x.c,taskflowStatus:N.c,testhubApp:K.e,testhubPage:H.i,testhubTable:W.c},e)),uuid:Y({imagePreviewer:h.g}),browser:Object(o.combineReducers)({print:q.a})})}},snjoL1ZZ:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("mrSGxOB2"),o=function(e,t,r){var o=n.h(e);if(t>=e.length)for(var i=t-e.length;1+i--;)o.push(void 0);return o.splice(t,0,o.splice(r,1)[0]),o}},suI5NDUm:function(e,t,r){"use strict";r.r(t);var n=r("fqeXJ4zE"),o=r("EcZ0z2mK");function i(e){return Object.values(o.b).some(function(t){return t===e})}var a=r("90U+kJWN"),s=r("2qRnoGmE"),u=r.n(s),c=r("CxY0Mkc1"),l=function(e,t){void 0===t&&(t="all");var r=c.format({pathname:u.a.AONE_SEARCH_URL+"/services/search",query:{keyword:e,domains:t}});Object(a.openInNewTab)(r)},p=r("iV9vK7yl"),f=r("nlT03vip"),d=r("D5oRvhYV");r.d(t,"isAone",function(){return n.a}),r.d(t,"isAoneSearchType",function(){return i}),r.d(t,"toAoneSearch",function(){return l}),r.d(t,"isAoneNewUser",function(){return p.a}),r.d(t,"useIsAoneNewUser",function(){return p.b}),r.d(t,"getAoneVersion",function(){return f.a}),r.d(t,"AoneUserType",function(){return d.a})},"svve/QA+":function(e,t,r){"use strict";r.d(t,"a",function(){return l}),r.d(t,"d",function(){return p}),r.d(t,"c",function(){return f}),r.d(t,"j",function(){return d}),r.d(t,"h",function(){return g}),r.d(t,"i",function(){return h}),r.d(t,"g",function(){return y}),r.d(t,"k",function(){return v}),r.d(t,"f",function(){return b}),r.d(t,"e",function(){return _}),r.d(t,"b",function(){return T});var n=r("mrSGxOB2"),o=r("fZoV3jYy"),i=r("cUZYBCvT"),a=r("2KPNj85v"),s=r("HYobN8SQ"),u=r.n(s),c=u.a.namespace("actived-project-tag"),l=function(e,t,r){var n=t.added;return!Object(o.g)(e)||n.indexOf(r)>=0};function p(e){var t=e?a.b:a.e;return t.length>0?t:[i.a.Joined]}function f(e,t){var r=p(e);return e&&t?t:r[0]}function d(e,t){(e?c.namespace(e):c).set(a.a,t)}function g(e){return(e?c.namespace(e):c).get(a.a)||void 0}function h(e){(e?c.namespace(e):c).remove(a.a)}var m=u.a.namespace("NOT_SHOW_CHILD_PROJECT_TAG_STORE");function y(e,t){return(e?m.namespace(e):m).has(t)}function v(e,t,r){var n=e?m.namespace(e):m;r?n.set(t,1):n.remove(t)}function b(e,t){return n.a({},t,{hideChild:y(e,t._id)})}function _(e,t,r){var n=t[e];return n?r?n.projectCount:n.currentProjectCount:null}var S=999;function T(e){return e>S?"999+":e}},"t6tM/GMl":function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r("4c1CS0b3"),a=r("NOGqly5s"),s=r("peh1clMB"),u=r("GESwhXbR"),c=r("tLZJUYWX"),l=r.n(c),p=r("IssmDVnT"),f=r("wVXDg9Ql"),d=r("gh8QIhMV"),g=r("oRqJmROU"),h=r("s0r7VfKc"),m=r("sa1Ed382"),y=r("Qlod0euf"),v=r("mmJiykER"),b=r("n0MKG6gI"),_=r("cVY30NxL");function S(){return o.identity}function T(e,t,r){var o=!1,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o=!0,r.apply(void 0,n.h(e))},a=e.map(function(e,r){return t(e,r)?i(e):e});return o||a.push(i()),a}var E=r("q1tIBJhx"),O=r.n(E),w={marginBottom:"1em"},C={padding:"2px"};function I(e){var t=n.f(O.a.useState(e.defaultChecked),2),r=t[0],o=t[1];return O.a.createElement(O.a.Fragment,null,O.a.createElement("p",{style:w},l.a.get("sprint.planning.move.tasks.warning.tip",e.count,e.toSprintName)),O.a.createElement(u.Checkbox,{checked:r,onClick:function(){var t=!r;o(t),e.onChange(t)},label:l.a.get("sprint.list.with.subtask.hint"),style:C}))}var k,j=r("zxyTAlCn");r.d(t,"a",function(){return M}),r.d(t,"h",function(){return F}),r.d(t,"b",function(){return G}),r.d(t,"e",function(){return z}),r.d(t,"g",function(){return V}),r.d(t,"d",function(){return K}),r.d(t,"c",function(){return H}),r.d(t,"f",function(){return W});var A,P,R,N,x,D=function(){return{modalOpened:!1,openModalSuccess:!1,planningSprintId:null,isPlanningSprintEmpty:!1,projectId:null,projectUniqueIdPrefix:"",projectScenarioFieldConfigs:[],sprintPool:[],todos:[],isMoving:!1,taskGroups:[],leftSprintLabel:"unplanned",rightSprintLabel:"unplanned"}},M=(k=n.f((A={defaultState:D,openModal:function(e,t){return n.a({},e,t,{modalOpened:!0,rightSprintLabel:t.planningSprintId})},openModalSuccess:function(e,t){return n.a({},e,t,{openModalSuccess:!0})},closeModal:D,loadTasks:function(e,t){return n.a({},e,{taskGroups:T(e.taskGroups,function(e){return e.label===t.label},function(e){var r=Boolean(t.searchTerm||t.tql),o={label:t.label,isLoading:!0};return n.a({},r||!e?o:e,{isUsingFilter:r})})})},loadMoreTasks:S(),loadTasksSuccess:function(e,t){return n.a({},e,{taskGroups:T(e.taskGroups,function(e){return e.label===t.label},function(e){return n.a({},e,t,{isLoading:!1})})})},loadTasksFail:function(e,t){return n.a({},e,{taskGroups:T(e.taskGroups,function(e){return e.label===t},function(e){return n.a({},e,{label:t,isLoading:!1})})})},switchSprintLabel:function(e,t){var r="left"===t.side?{leftSprintLabel:t.label}:{rightSprintLabel:t.label};return n.a({},e,r)},toggleTodo:function(e,t){var r=e.todos.filter(function(e){return e.taskId!==t.taskId});return r.length===e.todos.length&&r.push(t),n.a({},e,{todos:r})},batchCheck:function(e,t){var r,o,i=e.taskGroups.find(function(e){return e.label===t.label});if(!i||!i.tasks)return e;var a=new Set(e.todos.map(function(e){return e.taskId})),s=[];try{for(var u=n.i(i.tasks),c=u.next();!c.done;c=u.next()){var l=c.value;!a.has(l._id)&&s.push({taskId:l._id,fromSide:t.side})}}catch(p){r={error:p}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}return 0===s.length?e:n.a({},e,{todos:n.h(e.todos,s)})},batchUncheck:function(e,t){var r=e.taskGroups.find(function(e){return e.label===t.label});if(!r||!r.tasks)return e;var o=new Set(r.tasks.map(function(e){return e._id}));return n.a({},e,{todos:e.todos.filter(function(e){var t=e.taskId;return!o.has(t)})})},moveBegin:function(e,t){return n.a({},e,{isMoving:!0})},moveEnd:function(e){return n.a({},e,{isMoving:!1})},moveOneSuccess:function(e,t){return n.a({},e,{todos:e.todos.filter(function(e){return e.taskId!==t})})},moveOneFail:S()},P="SPRINT_PLANNING",R=function(e){return P+"/"+e},N=Object(o.mapObject)(A,function(e,t){return r=R(t),n=function(e){return e.type===r},{create:function(e){return{type:r,payload:e}},from:function(e){return e.filter(n).map(function(e){return e.payload})}};var r,n}),x=Object.keys(A).reduce(function(e,t){return e[R(t)]=function(e,r){return A[t](e,r.payload)},e},{}),[N,function(e,t){if(!e)return x[R("defaultState")](e,t);var r=x[t.type];return r?r(e,t):e}]),2))[0],F=k[1],L=function(e){return function(t){var r,o=t._scenariofieldconfigId,i=t._taskflowstatusId;o&&(r=e.find(function(e){return e._id===o})),r||(r=e.find(function(e){return e.isDefault}));var a=i&&r?r.taskflowstatuses.find(function(e){return e._id===i}):null;return n.a({},t,{scenariofieldconfig:r,taskflowstatus:a})}},B=function(e,t,r,n){void 0===n&&(n={});var o=function(r,n){return{cacheValidate:p.CacheStrategy.Cache,request:i.Observable.of(r),tableName:"Task",query:{where:{_projectId:e,_sprintId:t,$and:[{content:{$ne:""}},{content:{$isNotNull:!0}}],$or:[{isArchived:!1},{isArchived:null}]},orderBy:[{fieldName:"updated",orderBy:"DESC"}],limit:n},assocFields:{executor:["_id","name","avatarUrl"],parent:["_id","content"]}}};return n.filtered?r.switchMap(function(e){var t=e.result,r=e.hasMore,n=o(t);return Object.assign(n,{fields:["_id"]}),h.default.lift(n).changes().map(function(e){var n=new Set(e.map(function(e){return e._id}));return{tasks:t.filter(function(e){var t=e._id;return n.has(t)}),hasMore:r}})}):r.switchMap(function(e){var t=e.result,r=e.limit,n=e.hasMore;return h.default.lift(o(t,r)).changes().map(function(e){return{tasks:e,hasMore:n}})})};function U(e,t){var r=e?e.trim():"";r&&(r="(text ~ '"+Object(b.b)(r).escapedQuery+"')");var n=r;return n&&t?n=n+" AND "+t:t&&(n=t),n}var G=Object(a.a)(function(e){return M.openModal.from(e).switchMap(function(t){var r=t.projectId,o=t.planningSprintId,a=h.default.getProject(r).values(),s=h.default.fetch.getScenarioFieldConfigs(r,"task",{withTaskflowstatus:!0}),u=h.default.fetch.getProjectSprints(r,{status:"future"}).catch(function(){return i.Observable.of([])}),c=h.default.fetch.getProjectSprints(r,{status:"active"}).catch(function(){return i.Observable.of([])}),l=Object(_.observeIsSprintEmpty)(o,r).take(1);return i.Observable.forkJoin(a,s,u,c,l).takeUntil(M.closeModal.from(e)).map(function(e){var t=n.f(e,5),r=n.f(t[0],1)[0],o=t[1],i=t[2],a=t[3],s=t[4];return M.openModalSuccess.create({projectUniqueIdPrefix:r?r.uniqueIdPrefix:"",projectScenarioFieldConfigs:o,sprintPool:n.h(i,a),isPlanningSprintEmpty:s})})})},function(e,t){return M.loadTasks.from(e).delayWhen(function(){return t.getState().ui.sprintPlanning.openModalSuccess?i.Observable.of(void 0):M.openModalSuccess.from(e)}).groupBy(function(e){return e.label}).mergeMap(function(r){var n=r.key;return r.debounceTime(200).switchMap(function(r){var o=r.searchTerm,a=r.tql,s=t.getState().ui.sprintPlanning,u=s.projectId,c=s.projectScenarioFieldConfigs,l=L(c),f=i.Observable.empty();if(Object(g.c)(u)){var m="unplanned"===n?null:n,v=Object(y.tasksFetch)({_projectId:u},{_sprintId:m},{tql:U(o,a),taskLayer:j.a.All,sensitivity:y.Sensitivity.MyVisible}),b=v.urlPath,_=v.urlQuery,S=p.Page.defaultState(b,{urlQuery:_,pageSize:40}),T=M.loadMoreTasks.from(e).filter(function(e){return e.label===n}),E=Boolean(o||a),O=h.default.fetch.expandPage(S,{loadMore$:T,skipConcat:!E});f=B(u,m,O,{filtered:E})}return f.map(function(e){var t=e.tasks,r=e.hasMore;return M.loadTasksSuccess.create({label:n,tasks:t.map(l),hasMore:r})}).catch(function(e){return i.Observable.of(M.loadTasksFail.create(n)).do(function(){return Object(d.throwError)(e)})}).takeUntil(M.closeModal.from(e))})})},function(e,t){return M.moveBegin.from(e).groupBy(function(e){return e.from}).mergeMap(function(e){var r=e.key;return e.concatMap(function(e){var o=e.to,a=t.getState().ui.sprintPlanning,s="unplanned"===o?null:o,c=s&&a.sprintPool.find(function(e){return e._id===o}),p=a.todos.filter(function(e){return e.fromSide===r}),d=new i.Observable(function(e){var t,r,n,i=p.length,a="unplanned"===o?l.a.get("sprint.unplanned"):c?c.name:"";t={count:i,toSprintName:a,onConfirm:function(t){e.next(t),e.complete()},onAbort:function(){return e.complete()}},r=!0,n=O.a.createElement(I,{count:t.count,toSprintName:t.toSprintName,onChange:function(e){r=e},defaultChecked:r}),u.Alert.warning({title:l.a.get("sprint.planning.move.tasks.warning.title"),content:n,confirmText:l.a.get("confirm"),cancelText:l.a.get("cancel"),onConfirm:function(){t.onConfirm(r)},onClose:t.onAbort,onCancel:t.onAbort})}),g=n.f([0,0],2),m=g[0],y=g[1],v=i.Observable.of(M.moveEnd.create({})).do(function(){y>0?u.Toast.error(l.a.get("sprint.planning.move.tasks.fail")):m>0&&u.Toast.success(l.a.get("sprint.planning.move.tasks.success"))});return i.Observable.concat(d.concatMap(function(e){return i.Observable.from(p).mergeMap(function(t){var r=t.taskId;return h.default.fetch.updateTaskSprint(r,s,{withSubtasks:e}).do({next:function(){return m++},error:function(e){y++,f.SDKInterceptor.ignore(e)}}).mapTo(M.moveOneSuccess.create(r)).catch(function(){return i.Observable.of(M.moveOneFail.create(r))})},5)}),v)})})},function(e){var t={page:"Sprint Page",control:"Plan Sprint Panel",method:"click"},r=M.openModal.from(e).filter(function(e){var t=e.gtaControl;return Boolean(t)}).map(function(e){return{action:"plan sprint",control:e.gtaControl}}),o=M.closeModal.from(e).map(function(){return{action:"close plan sprint"}}),a=M.switchSprintLabel.from(e).map(function(){return{action:"switch sprint"}}),s=M.loadTasks.from(e).pairwise().filter(function(e){var t=n.f(e,2),r=t[0],o=t[1];return!r.searchTerm&&Boolean(o.searchTerm)}).map(function(){return{action:"search content"}}),u=M.loadTasks.from(e).filter(function(e){var t=e.tql,r=e.gtaCategories;return Boolean(t&&r)}).concatMap(function(e){var t=e.gtaCategories;return i.Observable.from(t).map(function(e){return Object(v.b)({category:e})})}),c=M.moveBegin.from(e).map(function(){return{action:"change sprint"}}),l=M.moveEnd.from(e).map(function(){return{action:"changed sprint"}});return i.Observable.merge(r,o,a,s,u,c,l).do(function(e){m.gta.event(n.a({},t,e))}).filter(function(){return!1})});function q(e,t,r){var o=t.find(function(t){return t.label===e});if(!o||!o.tasks)return o;var i=new Set(r.map(function(e){return e.taskId})),a=o.tasks.map(function(e){return i.has(e._id)?n.a({},e,{checked:!0}):e}),s=a.length>0?a.every(function(e){var t=e.checked;return Boolean(t)}):void 0;return n.a({},o,{tasks:a,allChecked:s})}var z=Object(s.createSelector)(function(e){return e.leftSprintLabel},function(e){return e.taskGroups},function(e){return e.todos},q),V=Object(s.createSelector)(function(e){return e.rightSprintLabel},function(e){return e.taskGroups},function(e){return e.todos},q),K=Object(s.createSelector)(function(e){return e.todos},function(e){return e.some(function(e){return"left"===e.fromSide})}),H=Object(s.createSelector)(function(e){return e.todos},function(e){return e.some(function(e){return"right"===e.fromSide})}),W=Object(s.createSelector)(function(e){return e.planningSprintId},function(e){return e.sprintPool},function(e,t){var r=n.f(Object(o.partition)(t,function(t){return t._id===e}),2);return[n.f(r[0],1)[0],r[1]]})},t744iB9e:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r("TSYQbtd+"),a=r.n(i),s=r("a+N5u/Cl"),u=r("GESwhXbR"),c=r("p7RaAO2S"),l=r("y+syBcQ7"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(){t.props.onChange(t.props.option.value)},t}return n.d(t,e),t.prototype.render=function(){var e=Object(c.k)(this.props.checkedValues,this.props.option.value);return o.createElement(u.Checkbox,{checked:e,label:this.props.option.name,onChange:this.onChange})},t}(o.PureComponent),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getOptions=function(){return t.props.options},t.onChange=function(e){t.onOptionChange(e.target.value)},t.onOptionChange=function(e){var r=t.props.values,n=t.props,o=n.multiple,i=n.values,a=o?Object(c.k)(i,e)?i.filter(function(t){return!Object(c.j)(t,e)}):i.concat([e]):[e];s.isEqual(r,a)||t.props.onChange({values:a})},t}return n.d(t,e),t.prototype.getListCls=function(){var e;return a()(l.list,((e={})[l.inline]=this.props.inline,e[l.empty]=this.props.isEmpty,e))},t.prototype.renderOptions=function(){var e=this;return this.getOptions().map(function(t){return o.createElement(p,{key:""+t.value,option:t,checkedValues:e.props.values,onChange:e.onOptionChange})})},t.prototype.renderRadios=function(){return this.getOptions().map(function(e){return o.createElement(u.Radio,{key:""+e.value,label:e.name,value:""+e.value})})},t.prototype.renderRadioGroups=function(){var e=this.props.values[0],t=s.isUndefined(e)?e:""+e;return o.createElement(u.RadioGroup,{value:t,disabled:this.props.disabled,onChange:this.onChange,className:this.getListCls()},this.renderRadios())},t.prototype.renderList=function(){return this.props.multiple?o.createElement("div",{className:this.getListCls()},this.renderOptions()):this.renderRadioGroups()},t.prototype.render=function(){return o.createElement("div",{className:l["select-list"]},this.renderList())},t.defaultProps={multiple:!1},t}(o.PureComponent);r.d(t,"a",function(){return f})},tHFGQRix:function(e,t,r){"use strict";var n;r.d(t,"a",function(){return n}),function(e){e[e.Single=0]="Single",e[e.Multi=1]="Multi"}(n||(n={}))},tNhyAXOq:function(e,t,r){e.exports=r("9Zxc0Pdq")+r("KlEKgzUp")+r("FSFeKvjj")+r("BT4yaUWL")+r("9wRXORqD")+"\n\nfragment projectSchema on Project {\n  _id\n  name\n  logo\n  created\n  updated\n  pinyin\n  suspendedAt\n  suspendedBy {\n    _id\n    name\n    avatarUrl\n    email\n  }\n  startDate\n  endDate\n}\n\nquery projectCluster (\n  $selectBy: ProjectSelectBy,\n  $organizationId: ObjectId!,\n  $projectTagId: ObjectId,\n  $pageSize: PageSizeType = 1000,\n  $customfieldIds: [ObjectId],\n  $customfieldsOnly: Boolean!\n  $withChild: Boolean\n) {\n  Projects(\n    _organizationId: $organizationId,\n    pageSize: $pageSize,\n    filters: {\n      roles: [2]\n    \t_projecttagId: $projectTagId\n      _customfieldIds: $customfieldIds,\n      selectBy: $selectBy,\n      withChild: $withChild,\n    }\n  ) {\n    nextPageToken\n    result {\n      ...projectSchema\n      alien @skip(if: $customfieldsOnly) {\n        refId\n        url\n      }\n      creator @skip(if: $customfieldsOnly) {\n        name\n        avatarUrl\n        _id\n      }\n      members @skip(if: $customfieldsOnly) {\n        role\n        user {\n        \tname\n          avatarUrl\n          _id\n      \t}\n      }\n      statusInfo @skip(if: $customfieldsOnly) {\n        ...statusInfoSchema\n      }\n      projecttags @skip(if: $customfieldsOnly) {\n        ...projecttagsSchema\n      }\n      report @skip(if: $customfieldsOnly) {\n        ...reportSchema\n      }\n      customfields: customfieldsV2 @include(if: $customfieldsOnly) {\n        ...customfieldValue\n      }\n    }\n  }\n\n  Customfields(\n    _organizationId: $organizationId,\n    filters: {\n      _customfieldIds: $customfieldIds\n  \t},\n    pageSize: 1000\n  ) @include(if: $customfieldsOnly) {\n    result {\n      ...customfieldSchema\n    }\n  }\n}\n\n"},tXAzI2u6:function(e,t,r){"use strict";r.d(t,"b",function(){return S}),r.d(t,"c",function(){return T}),r.d(t,"a",function(){return E}),r.d(t,"d",function(){return O}),r.d(t,"e",function(){return I}),r.d(t,"f",function(){return k});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r.n(o),a=r("4c1CS0b3"),s=r("Nb+/DKSJ"),u=r("wd/RKGTj"),c=r.n(u),l=r("s0r7VfKc"),p=r("oRqJmROU"),f=r("HYobN8SQ"),d=r.n(f),g=r("sa1Ed382"),h=r("tNhyAXOq"),m=r.n(h),y=r("2hAsauku"),v=r.n(y),b=r("gNFMJi3i"),_=r("XIKSkjsA");function S(e,t,r,n){var o={organizationId:e,selectBy:t,projectTagId:n,customfieldsOnly:!1,withChild:r};return l.default.graph(m.a,o,!0).map(function(e){var t=e.Projects,r=t.result;return{queryOverflow:""!==t.nextPageToken||e.headers&&!!e.headers.get("query-size-overflow"),result:r.map(function(e){var t=e._id,r=e.alien,n=e.created,o=e.creator,a=e.logo,s=e.members,u=e.name,l=e.pinyin,p=e.updated,f=e.projecttags,d=e.startDate,g=e.endDate,h=e.suspendedAt,m=e.suspendedBy,y=e.report||{},v=y.all,b=y.done,_=y.overdue,S=y.unallocated,T=e.statusInfo||{},E=T.content,O=T.degree,w=T.name,C=T.updated,I=function(e){return i.a.isNull(e)||i.a.isUndefined(e)?0:e};return{_id:t,alien:r,creator:o,logo:a,name:u,pinyin:l,status:O,statusDescription:E,statusName:w,updated:p,projecttags:f,startDate:d,endDate:g,suspendedAt:h,suspendedBy:m,unallocated:I(S),taskCount:I(v),created:c()(n).format("YYYY-MM-DD"),doneRate:{all:I(v),current:I(b)},dueRate:{all:I(v),current:I(_)},durationDay:Math.ceil(c.a.duration(c()().diff(c()(n)),"ms").asDays()),owner:s.map(function(e){return e.user}),statusUpdated:c()(C).format("MMMDo")}})}})}function T(e,t,r,n,o){var i={organizationId:e,selectBy:r,projectTagId:o,customfieldIds:t,customfieldsOnly:!0,withChild:n};return l.default.graph(m.a,i).map(function(e){var t=e.Projects.result,r=e.Customfields.result,n=t.map(function(e){return e.customfields.map(function(e){var t=e.value,n=e._customfieldId,o=r.find(function(e){return e._id===n});if(o)return{_customfieldId:o._id,type:o.type,value:t,choices:o.choices,values:[]}}).filter(p.c)});return{infos:r,result:n}})}function E(e,t,r){return l.default.fetch.post("projecttags/"+e+"/customfieldlinks",{_customfieldIds:t,withChild:!!r})}function O(e){return l.default.graph(v.a,{projectTagId:e}).map(function(e){var t=e.ProjectTag.permissionBinding,r=t.level,n=t.permissions;return!(r<s.b.Admin)&&i.a.contains(n,"project.put.info")})}var w=d.a.namespace("project-cluster"),C=function(e,t){return e+"/"+t};function I(e,t){return g.PREFERENCE.observeTableHeaders(C(e,t)).map(function(r){if(r)return r;var n=w.get(e);return n?n[t]:void 0})}function k(e,t){var r={};return i.a.keys(t).forEach(function(o){var a=t[o],s=a.fullScreen,u=n.a({},i.a.pick(a,"cellDescriptors","columnOrder","sortBy"),{version:g.version});u.cellDescriptors=u.cellDescriptors.map(function(e){var t=s?Object(b.o)(e,_.f,_.g,_.l):e;return"customfield"===t.key?n.a({},t,{loading:!0}):t}),r[C(e,o)]=u}),a.Observable.fromPromise(g.PREFERENCE.patchTableHeaders(r))}},"u/LJYZ+h":function(e,t,r){e.exports=r.p+"images/magnifier@2x.e60d4f05.png"},"u2/Ky9MJ":function(e,t,r){"use strict";r.r(t),r.d(t,"isFakeEvent",function(){return i}),r.d(t,"resetEventId",function(){return a});var n=r("mrSGxOB2"),o=r("IssmDVnT"),i=function(e){return e._id!==o.EventSDK.originEventId(e._id)},a=function(e,t){void 0===t&&(t={});var r=e._originEventId||o.EventSDK.originEventId(e._id);return t.clone?n.a({},e,{_id:r}):Object.assign(e,{_id:r})}},"uQSzQ+fH":function(e,t,r){var n,o,i,a,s,u,c,l,p,f=[].slice;i=r("a+N5u/Cl"),o=r("imBbjl9T"),a=r("2qRnoGmE"),n=$("body").data("hotkeys",{}),u={},c=function(){},l=o.prototype.stopCallback,o.prototype.stopCallback=function(e,t){return!a.FEATURES.enableHotKey||l.call(this,e,t)},p=function(e,t){if(e&&e.length)return e.filter(function(e){return e.get(0)!==t.get(0)})},s=function(e,t){var r,i;for(r=u[t][0];!r.data("hotkeys");)u[t].shift(),r=u[t][0];return(i=r.data("hotkeys")[t])?i(e,t):r===n?o.unbind(t):void 0},e.exports={add:function(e){var t,r;return e&&e.hotkeys?(r=i.clone(e.hotkeys),t=$(e.$el)||n,i.each(e.preventHotkeys,function(e){return r[e]=c}),i.each(r,function(a,c){var l,f;if(null==(l=e.currentView)||null==(f=l.hotkeys)||!f[c])return i.isFunction(a)||(a=e[a]),a&&i.isFunction(a)?(a=i.bind(a,e),c=c.split("|"),i.each(c,function(e){var i;if(r[e]=a,o.bind(e,s),u[e]||(u[e]=[n]),t!==n)return u[e]=p(u[e],t),null!=(i=u[e])?i.unshift(t):void 0})):delete r[c]}),t===n?i.extend(n.data("hotkeys"),r):t.data("hotkeys",r),this):this},remove:function(){var e,t,r,o,a;return t=arguments[0],o=2<=arguments.length?f.call(arguments,1):[],t?(a=!o.length,e=$(t.$el)||n,r=e.data("hotkeys"),a&&(o=i.keys(t.hotkeys||{})),o=i.chain(o).map(function(e){return e.split("|").concat(e)}).flatten().uniq().value(),r&&i.each(o,function(t){if(delete r[t],a&&e!==n)return u[t]=p(u[t],e)}),this):this},reset:function(){return o.reset(),n.data("hotkeys",{}),u={},this}}},"uYqc/Zh+":function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r.n(o),a=r("/oI3bVAP"),s=function(e){var t=e.group||e.project||e.creator||null;return t?t._id:""},u=function(){function e(){}return Object.defineProperty(e,"symbol",{get:function(){return"pseudo_"},enumerable:!0,configurable:!0}),e.create=function(e,t,r,o){void 0===o&&(o=a.a.direct);var i=(new Date).toISOString(),s={_id:e,name:t,logo:r},u={_id:"pseudo_"+e,_objectId:void 0,title:"&nbsp;",isRead:!0,creator:{_id:e,name:t,avatarUrl:r},updated:i,isPseudo:!0,objectType:"room",boundToObjectUpdated:i};if(o===a.a.direct)return u;if(o===a.a.group)return n.a({},u,{group:s});if(o===a.a.project)return n.a({},u,{project:s});throw new Error("unreachable code path")},e.process=function(e,t,r){var n=[],o=[];if(0===t.length)return{channels:r,activedChannel:e};var a=[function(e){var t=e.isPseudo,i=e.creator&&e.creator._id,a=r.find(function(e){return s(e)===i});t&&a||o.push(e),a&&n.push(a)}];t.length>0&&a.unshift(function(e){var r=t.find(function(t){return t._id===e._id||s(e)===s(t)}),n=e.boundToObjectUpdated;if(null!=r){var o=i.a.isNumber(n)?n:new Date(n).getTime(),a=r["@timestamp"]||r.boundToObjectUpdated,u=i.a.isNumber(a)?a:new Date(a).getTime();n=Math.max(o,u)}e["@timestamp"]=n}),i.a.chain(r).clone().concat(t.filter(function(e){return e.isPseudo})).forEach(function(e){return a.forEach(function(t){return t(e)})}).value();var u=i.a.sortBy(o,function(e){var t=e["@timestamp"];return-1*(i.a.isString(t)?new Date(t).getTime():t)});if(e&&n.length){var c=s(e);return{activedChannel:n.find(function(e){return s(e)===c})||e,channels:u}}return{activedChannel:e,channels:u}},e.isReplaced=function(e,t){return!(!e||!t)&&(!(!e.isPseudo||t.isPseudo)&&(!(!e.creator||!t.creator)&&e.creator._id===t.creator._id))},e.is=function(e){return e._id.slice(0,this.symbol.length)===this.symbol},e}();r.d(t,"a",function(){return u}),r.d(t,"b",function(){return s})},uk8NZOVN:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"personal",use:"personal-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="personal"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#69D0CA" rx="2" /><path fill="#FFFFFF" d="M6.021 6.433H5.6a.2.2 0 0 1-.2-.2V5.145c0-.3.244-.545.545-.545h8.076c.301 0 .546.244.546.545v1.088a.2.2 0 0 1-.2.2h-.421l-.593 5.928h-6.74l-.592-5.928zm3.962 4.4a1.528 1.528 0 1 0 0-3.055 1.528 1.528 0 0 0 0 3.055zm3.235 2.873l-.09.894a1 1 0 0 1-.994.9H7.833a1 1 0 0 1-.995-.9l-.09-.894h6.47z" /></g></symbol>'});a.a.add(s);t.default=s},"ux+kwdQL":function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("mrSGxOB2"),o=function(){function e(e){this.root=e}return e.prototype.find=function(e){var t=function(e,r){var o,i;if(r(e))return e;try{for(var a=n.i(e.getSubNodes()),s=a.next();!s.done;s=a.next()){var u=s.value,c=t(u,r);if(c)return c}}catch(l){o={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}},r=function(e,t){var o,i,a=n.h(t);if(e.id===a[a.length-1])return e;a.shift();var s=a[0];if(s)try{for(var u=n.i(e.getSubNodes()),c=u.next();!c.done;c=u.next()){var l=c.value;if(l.id===s){var p=r(l,a);if(p)return p}}}catch(f){o={error:f}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}};return Array.isArray(e)?r(this.root,e):t(this.root,e)},e.prototype.getNode=function(e){return this.find(function(t){return t.id===e})},e.prototype.getNodePath=function(e){var t=[],r=this.find(function(r){return t.push(r),r.id===e});if(r){var n=t.reverse();return n.reduce(function(e,t,r){var o=n[r+1]||null;if(!o)return e;var i=e[e.length-1];return o.getSubNodes().find(function(e){return e.id===i})&&e.push(o.id),e},[r.id]).reverse()}},e.prototype.set=function(t,r){return new e(this.root.set(t,r))},e.prototype.setIn=function(t,r,n){return new e(this.map(t,function(e){return e.set(r,n)}))},e.prototype.map=function(e,t){var r=function(e,o){var i=function(e){return e===o[o.length-1]&&1===o.length};if(i(e.id))return t(e,o);var a=n.h(o);a.shift();var s=a[0];return e.setSubNodes(function(e){return e.map(function(e){return e.id===s?i(e.id)?t(e,o):r(e,a):e})})};return r(this.root,e)},e.prototype.mapIn=function(t,r){var n=function(e){return e.setSubNodes(function(e){return e.map(function(e){return r(n(e))})})};return new e(this.map(t,function(e){return r(n(e))}))},e.prototype.checkIdDuplicate=function(e){return!!this.getNode(e)},e.prototype.hasDuplicatedNodes=function(e){var t=this;if((Array.isArray(e)?e:[e]).find(function(e){return t.checkIdDuplicate(e.id)}))throw new Error("Node id can not duplicate.")},e.prototype.append=function(t,r){return this.hasDuplicatedNodes(t),new e(r?this.root.insertBefore(t,r):this.root.append(t))},e.prototype.appendIn=function(t,r,n){return this.hasDuplicatedNodes(r),new e(this.map(t,function(e){return n?e.insertBefore(r,n):e.append(r)}))},e.prototype.removeIn=function(t){var r=n.h(t),o=r.pop(),i=n.h(r);if(0===i.length)throw new Error("Cannot remove root node.");return new e(this.map(i,function(e){return e.setSubNodes(function(e){return e.filter(function(e){return e.id!==o})})}))},e.prototype.moveIn=function(e,t,r){var n=this.find(e);if(!n)throw new Error("Node not found.");if(t.includes(n.id))throw new Error("Cannot move to their own child nodes.");return this.removeIn(e).appendIn(t,n,r)},e.prototype.setSubNodesIn=function(t,r){return void 0===r&&(r=function(e){return e}),new e(this.map(t,function(e){return e.setSubNodes(r)}))},e.prototype.toJSON=function(){var e=this,t=function(r,o,i,a){void 0===r&&(r=e.root),void 0===i&&(i=null),void 0===a&&(a=[]);var s=n.a({},r.get(),{id:r.id,parentId:i,path:a,subNodes:[],depth:o});return s.subNodes=r.getSubNodes().map(function(e){return t(e,o+1,s.id,n.h(a,[r.id]))}),s};return t(this.root,0)},e.prototype.toJS=function(e){var t=this;void 0===e&&(e=function(e){return e});var r=function(o,i,a,s){void 0===o&&(o=t.root),void 0===a&&(a=null),void 0===s&&(s=[]);var u=n.a({},o.get(),{id:o.id,parent:a,ancestors:s,path:s.map(function(e){return e.id}),subNodes:[],depth:i});return u.subNodes=o.getSubNodes().map(function(e){return r(e,i+1,u,n.h(s,[u]))}),e(u)};return r(this.root,0)},e}()},"uysLJ+PI":function(e,t,r){e.exports=r.p+"images/yinxiang-poster.964146fd.png"},v4t1pgGK:function(e,t,r){var n,o,i,a={}.hasOwnProperty;i=r("a+N5u/Cl"),o=r("qHH6+g6Q"),n=r("bZr3G77e"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o),t.prototype.name="team",t.prototype.urlRoot="teams",t.prototype.defaults={activeMembersCount:0,membersCount:0,projectsCount:0},t.prototype.parse=function(e){var t;return null==(t=i.extend(this.toJSON(),e)).pos&&(t.pos=65536),"number"==typeof t.membersCount?t.activeMembersCount=t.membersCount:t.hasMembers&&(t.activeMembersCount=t.hasMembers.filter(function(e){return!e.isDisabled}).length),t},t.prototype.addProject=function(e,t){return t||(t={}),t.url=this.url()+"/projects/"+e,t.attrs||(t.attrs={}),this.sync("update",this,t),this},t.prototype.removeProject=function(e,t){return t||(t={}),t.url=this.url()+"/projects/"+e,t.attrs||(t.attrs={}),this.sync("delete",this,t),this},t.prototype.fetchMemberTasks=function(e){return e.url="teams/"+this.get("_id")+"/undonetasks",e.attrs=i.extend({withInvolves:!0},e.attrs),this.sync("read",this,e),this},t.prototype.fetchMemberDoneTasks=function(e){return e.attrs=i.extend({page:1,count:30,withInvolves:!0},e.attrs),e.url="teams/"+this.get("_id")+"/donetasks",this.sync("read",this,e),this},t.prototype.fetchEvents=function(e){return e.url="teams/"+this.get("_id")+"/events",e.headers||(e.headers={}),Object.assign(e.headers,{"x-timezone":n.timezone()}),this.sync("read",this,e),this},t.prototype.move=function(e){return e||(e={}),e.url=this.url()+"/move",this.sync("create",this,e)},t.prototype.quit=function(e){return e||(e={}),e.url=this.url()+"/quit",e.attrs={},this.sync("update",this,e),this},t.prototype.updateLeader=function(e,t){return this.saveAttr("leader",null,{attrs:{_leaderId:e},success:function(){return t.success()}}),this},t}()},vJfEDQKx:function(e,t,r){var n,o,i,a,s,u,c,l,p;i=r("PjENi0m4"),n=r("nL4olqOP"),s=r("90U+kJWN").genUniqueIdPrefixLenRange,t.TASK_ID_REGEX=(l=(p=s())[0],c=p[1],o=new RegExp("^([A-Za-z]{"+l+","+c+"})-(\\d+)$")),u=function(e,t,r){return Promise.all([new Promise(function(e,r){return i.fetch(t,{success:e,error:r})}),r?new Promise(function(e,t){return i.fetch(r,{boundToObjectType:"organization",success:e,error:t})}):Promise.resolve()]).then(function(t){var r,n,o,i,a,s;return s=t[0],o=t[1],i=e.get("tagIds"),a=s.getTagsbyIds(i),n=o?o.getTagsbyIds(i):[],r=a.concat(n).map(function(e){return{name:e.name}}),e.set("tagIds",r,{silent:!0})})},a=function(e,t){return new Promise(function(r,n){return e.searchForUniqueTask({attrs:t,success:r,error:n})})},t.searchForUniqueTask=function(e,t){var r,i,s,c,l,p,f,d,g,h,m;return s=t.query,g=null!=(c=t.spaceType)?c:"all",r=null!=(l=t._organizationId)?l:void 0,d=null==(p=t.setTag)||p,i=n.get(0),e.reset(),(f=s.match(o))?(f[0],m=f[1],h=f[2],d?a(e,{uniqueIdPrefix:m,uniqueId:h,spaceType:g,_organizationId:r}).then(function(){var t;return t=e.map(function(e){var t,n;return t=e.get("_projectId"),n=i.get(t),r=n.get("_organizationId"),n.isAppEnabled("taskUniqueId")?u(e,t,r):Promise.resolve()}),Promise.all(t)}):a(e,{uniqueIdPrefix:m,uniqueId:h,spaceType:g,_organizationId:r})):Promise.resolve()}},vaFGDeZz:function(e,t,r){"use strict";r.r(t);var n=r("lSKi634H");r.d(t,"statusPostSuceess$",function(){return n.statusPostSuceess$}),r.d(t,"actions",function(){return n.actions}),r.d(t,"reducer",function(){return n.reducer}),r.d(t,"epic",function(){return n.epic}),r.d(t,"getProjectCustomfieldlinkIds",function(){return n.getProjectCustomfieldlinkIds});var o=r("S/NKUfrv");for(var i in o)["statusPostSuceess$","actions","reducer","epic","getProjectCustomfieldlinkIds","default"].indexOf(i)<0&&function(e){r.d(t,e,function(){return o[e]})}(i)},vf9BdEDZ:function(e,t,r){e.exports=r.p+"images/tasks-poster.7974347f.png"},vjUSHlq3:function(e,t,r){e.exports=r.p+"images/bookkeeping-1.b80e2ba4.png"},vmWJWrVe:function(e,t,r){var n,o,i,a,s,u,c,l,p,f,d,g,h,m,y={}.hasOwnProperty,v=[].slice;c=r("a+N5u/Cl"),g=r("sa1Ed382"),n=r("q1z7EYOi"),i=r("uQSzQ+fH"),u=r("3eMzznN/"),s=r("q1tIBJhx"),a=r("/MKjzBat").Provider,f=r("i8i4LrFt"),d=f.render,m=f.unmountComponentAtNode,o=r("L342T8FT").ConnectedRouter,l=r("Ziqv+WXf").asap,p=r("wScl0p2y").createErrorBoundary,h=r("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)y.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n.View),t.prototype.hotkeys={},t.prototype.routes={},t.prototype.setupHotKey=function(){return i.add(this),this},t.prototype.removeHotKey=function(){return i.remove(this),this},t.prototype.requestSubView=function(e,t){var r;return t||(t={}),(r=new(e.Constructor||e)(t)).parentView=this,"function"==typeof r.setupHotKey&&r.setupHotKey(),this.subViews||(this.subViews=[]),this.subViews.push(r),r},t.prototype.requestReactView=function(e,t,r,n,o){var i,a;return this.subReactViews||(this.subReactViews=new Map),a=this,i=function(){return a._unmountReact(e)},this.subReactViews.set(e,i),this.mountReact(e,t,r,n,o)},t.prototype.mountReact=function(e,t,n,i,c){var l,f,g,m,y,v,b,_;if(null==i&&(i={}),b=null,f=new Promise(function(e){return b=e}),"function"==typeof i&&(c=i,i={}),n=(v=u.splitObject(n,["onError","fallback"]))[0],m=v[1],e)return g=s.createElement(t,n),i.router&&(y=r("ctsD9mWH").history,g=s.createElement(o,{history:y},g)),(i.redux||i.router)&&(_=r("ctsD9mWH").store,g=s.createElement(a,{store:_},g)),i.errorBoundary&&(l=p({displayName:i.displayName}),g=s.createElement(l,Object.assign(m,{children:g}))),d(g,e,function(){if("function"==typeof b&&b(),"function"==typeof c)return c()}),f;h("rendering react to undefined html element "+t)},t.prototype.unmountReact=function(e){var t;return this.subReactViews&&(t=this.subReactViews.get(e))?(t(),this.subReactViews.delete(e)):this._unmountReact(e)},t.prototype._unmountReact=function(e){if(e&&e.childNodes&&(!(!e.childNodes.length>0)||e._reactRootContainer))return m(e)?void 0:console.warn("Unmount react component failed "+e)},t.prototype.removeSubViews=function(){var e,t,r;if(e=1<=arguments.length?v.call(arguments,0):[],r=this.subViews){for(c.each(e,function(e){return u.removeItem(r,e)});r.length;)null!=(t=r.pop())&&t.remove();this.subViews=e}return this},t.prototype.removeReactViews=function(){if(this.subReactViews)return this.subReactViews.forEach(function(e){return e()}),this.subReactViews.clear()},t.prototype.resetView=function(){return this._resetView(),this},t.prototype._resetView=function(){var e;return this.stopListening(),"function"==typeof this.removeSubViews&&this.removeSubViews(),this.removeReactViews(),this.removeSubscriptions(),this.el&&!this.el._reactRootContainer&&null!=(e=this.$el)&&e.empty(),this},t.prototype.subscribe=function(e,t){var r;return null==t&&(t=l),this.subscriptions||(this.subscriptions=[]),r=e.subscribeOn(t).subscribe(),this.subscriptions.push(r),r},t.prototype.removeSubscriptions=function(){var e;return null!=(e=this.subscriptions)?e.forEach(function(e){return null!=e&&"function"==typeof e.unsubscribe?e.unsubscribe():void 0}):void 0},t.prototype.remove=function(){var e,t;return this.$el?(this.removeHotKey(),this.deregisterAsResponsive(),this._resetView(),this.$el&&this._removeElement(),(null!=(e=this.parentView)?e.subViews:void 0)&&u.removeItem(this.parentView.subViews,this),c.each(this,(t=this,function(e,r){return t[r]=null})),this):this},t.prototype.registerAsResponsive=function(){return g.APP.responsiveViews[this.cid]=this,this},t.prototype.deregisterAsResponsive=function(){return delete g.APP.responsiveViews[this.cid],this},t.prototype.delegateEventsOnElement=function(e,t){var r;return t&&(this.$el=t),r=n.View.prototype.delegateEvents.apply(this,arguments),t&&(this.$el=$(this.el)),r},t.prototype.undelegateEventsOnElement=function(e){var t;return e&&(this.$el=e),t=n.View.prototype.undelegateEvents.apply(this,arguments),e&&(this.$el=$(this.el)),t},t.prototype.setupPlaceholder=function(e,t){var r,n;return n=this,r=function(){return e.length?n.$placeholder?n.hidePlaceholder(t):void 0:n.showPlaceholder(t)},this.listenTo(e,"add remove",r),c.delay(function(){return r()})},t.prototype.showPlaceholder=function(e){var t;return this.$el.addClass("empty"),null!=(t=this.$placeholder)&&t.remove(),this.$placeholder=$("<div class='no-"+e+"-placeholder placeholder'></div>").appendTo(this.$el)},t.prototype.hidePlaceholder=function(){var e;return this.$el.removeClass("empty"),null!=(e=this.$placeholder)&&e.remove(),delete this.$placeholder},t.prototype.showLoadingIndicator=function(e,t){var r,n;return null==e&&(e=this.$el),n=(null!=t?t.isPrepend:void 0)?"prependTo":"appendTo",this.hasOwnProperty("$loadingIcons")||(this.$loadingIcons=[]),r=$('<div class="loading-indicator">\n  <span class="loader-dot"></span>\n  <span class="loader-dot"></span>\n  <span class="loader-dot"></span>\n</div>'),(null!=t?t.style:void 0)&&r.css(null!=t?t.style:void 0),this.$loadingIcons.push(r[n](e)),this},t.prototype.hideLoadingIndicator=function(e,t){var r;return(null!=e?e.find:void 0)?r=[e.find(".loading-indicator")]:(t=e,this.hasOwnProperty("$loadingIcons")&&(r=this.$loadingIcons)),(null!=t?t.animated:void 0)?c.each(r,function(e){return e.animate({opacity:0,height:0},function(){return null!=e?e.remove():void 0})}):c.each(r,function(e){return e.remove()}),this},t.prototype.showEndPoint=function(e){var t;return null==e&&(e=this.$el),null!=(t=this.$endPoint)&&t.remove(),this.$endPoint=$('<div class="end-point-wrapper">\n  <span class="end-point"></span>\n</div>').appendTo(e),this},t.prototype.setupPlugins=function(e){},t}()},vtu3Osjv:function(e,t,r){e.exports={"custom-views-wrapper":"custom-views-wrapper__a4Hb","empty-placeholder-wrapper":"empty-placeholder-wrapper__2Dhy","empty-placeholder-title":"empty-placeholder-title___Jn2","empty-placeholder-image":"empty-placeholder-image__35Vt","title-wrapper":"title-wrapper__1JAX",title:"title__33C6","hint-icon":"hint-icon__11WK"}},vwABXCbh:function(e,t,r){"use strict";r("5VFN72OM");var n=r("/STBqBW9");r.o(n,"createForgedProjectTagAll")&&r.d(t,"createForgedProjectTagAll",function(){return n.createForgedProjectTagAll}),r.o(n,"forgedProjectTagIdAll")&&r.d(t,"forgedProjectTagIdAll",function(){return n.forgedProjectTagIdAll}),r.o(n,"forgedProjectTagIdList")&&r.d(t,"forgedProjectTagIdList",function(){return n.forgedProjectTagIdList});var o=r("blJV7IFk");r.o(o,"createForgedProjectTagAll")&&r.d(t,"createForgedProjectTagAll",function(){return o.createForgedProjectTagAll}),r.o(o,"forgedProjectTagIdAll")&&r.d(t,"forgedProjectTagIdAll",function(){return o.forgedProjectTagIdAll}),r.o(o,"forgedProjectTagIdList")&&r.d(t,"forgedProjectTagIdList",function(){return o.forgedProjectTagIdList});var i=r("1Z7xq/6v");r.o(i,"createForgedProjectTagAll")&&r.d(t,"createForgedProjectTagAll",function(){return i.createForgedProjectTagAll}),r.o(i,"forgedProjectTagIdAll")&&r.d(t,"forgedProjectTagIdAll",function(){return i.forgedProjectTagIdAll}),r.o(i,"forgedProjectTagIdList")&&r.d(t,"forgedProjectTagIdList",function(){return i.forgedProjectTagIdList});var a=r("hjlWMrAw");r.o(a,"createForgedProjectTagAll")&&r.d(t,"createForgedProjectTagAll",function(){return a.createForgedProjectTagAll}),r.o(a,"forgedProjectTagIdAll")&&r.d(t,"forgedProjectTagIdAll",function(){return a.forgedProjectTagIdAll}),r.o(a,"forgedProjectTagIdList")&&r.d(t,"forgedProjectTagIdList",function(){return a.forgedProjectTagIdList});var s=r("kD/XU5AD");r.o(s,"createForgedProjectTagAll")&&r.d(t,"createForgedProjectTagAll",function(){return s.createForgedProjectTagAll}),r.o(s,"forgedProjectTagIdAll")&&r.d(t,"forgedProjectTagIdAll",function(){return s.forgedProjectTagIdAll}),r.o(s,"forgedProjectTagIdList")&&r.d(t,"forgedProjectTagIdList",function(){return s.forgedProjectTagIdList});var u=r("c+4N9jKQ");r.d(t,"createForgedProjectTagAll",function(){return u.a}),r.d(t,"forgedProjectTagIdAll",function(){return u.b}),r.d(t,"forgedProjectTagIdList",function(){return u.c})},wIHaTtmc:function(e,t,r){e.exports=r.p+"images/github-poster.aa7b9124.png"},wKLGLwqK:function(e,t,r){var n,o,i={}.hasOwnProperty;o=r("a+N5u/Cl"),n=r("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="projecttag",t.prototype.toJSON=function(){return this.has("getI18n")&&"function"==typeof this.get("getI18n")&&(this.set("name",this.get("getI18n")()),this.unset("getI18n")),t.__super__.toJSON.apply(this,arguments)},t.prototype.getCurrentTagProjectModelsByProjectModels=function(e){return o.chain(e).filter((t=this,function(e){return o.contains(t.get("projectIds"),e.id)})).value();var t},t.prototype.hasProjectId=function(e){var t;return t=this.get("projectIds"),!!(o.isArray(t)&&t.length>0)&&o.contains(t,e)},t}()},wScl0p2y:function(e,t,r){"use strict";r.r(t);var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r.n(o),a=r("WlCGY8BB"),s=function(e){function t(t){var r=e.call(this,t)||this;return r.state={hasError:!1},r}return n.d(t,e),t.prototype.componentDidCatch=function(e,t){this.setState({hasError:!0}),a.errorEx(["errorboundary"],e),"function"==typeof this.props.onError&&this.props.onError(e,t)},t.prototype.render=function(){return this.state.hasError?this.props.fallback?this.props.fallback:null:this.props.children},t}(i.a.Component);function u(e){if(e&&e.displayName){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t}(s);return t.displayName=e.displayName,t}return s}function c(e){return function(t){return function(r){function i(e){var t=r.call(this,e)||this;return t.state={hasError:!1},t}return n.d(i,r),i.prototype.componentDidCatch=function(t,r){this.setState({hasError:!0}),e&&"function"==typeof e.onError&&e.onError(t,r)},i.prototype.render=function(){return this.state.hasError?e&&e.fallback?e.fallback:null:o.createElement(t,this.props)},i}(o.Component)}}r.d(t,"ErrorBoundary",function(){return s}),r.d(t,"createErrorBoundary",function(){return u}),r.d(t,"WithErrorBoundary",function(){return c})},wVXDg9Ql:function(e,t,r){"use strict";r.r(t);var n=r("mrSGxOB2"),o=r("IssmDVnT"),i=r("tLZJUYWX"),a=r("GESwhXbR"),s=r("oRqJmROU"),u=function(e){return e.error.headers.get(o.HttpHeaders.Key.RequestId)||e.requestId},c=function(e,t){return e&&e.error&&e.error[t]?e.error[t]():Promise.resolve()},l=function(){function e(){this.ignoreSet=new Set}return e.prototype.listen=function(){var e=this;this.errorSub=o.HttpError$.filter(function(t){var r=u(t);return!r||!e.ignoreSet.has(r)||(e.ignoreSet.delete(r),!1)}).flatMap(function(e){return c(e,"text")}).filter(s.c).map(function(e){try{return JSON.parse(e)||{}}catch(t){return{message:e}}}).map(function(e){return e.message?e:n.a({},e,{message:i.get("error")})}).subscribe(function(e){a.Toast.error(e)})},e.prototype.stopListen=function(){this.errorSub.unsubscribe()},e.prototype.ignore=function(e){var t=u(e);t&&this.ignoreSet.add(t)},e}();r.d(t,"SDKInterceptor",function(){return p}),r.d(t,"getHttpErrorBody",function(){return c}),r.d(t,"HttpErrorObject",function(){});var p=new l},wVuowLdP:function(e,t,r){"use strict";r.r(t),r.d(t,"getUndoneAndDoneTasks",function(){return S}),r.d(t,"getTasksByTql",function(){return T}),r.d(t,"getStageTasksFromServerToCache",function(){return E}),r.d(t,"getTaskFromServerToCache",function(){return O}),r.d(t,"getSubtasks",function(){return w}),r.d(t,"updateTasks",function(){return C}),r.d(t,"archiveTasks",function(){return I}),r.d(t,"deleteTasks",function(){return k}),r.d(t,"forkTasks",function(){return j}),r.d(t,"moveTasks",function(){return A}),r.d(t,"updateTaskScenarioFieldConfig",function(){return P}),r.d(t,"normSmartGroup",function(){return R}),r.d(t,"getUserCellDescriptorList",function(){return x}),r.d(t,"saveUserCellDescriptorList",function(){return D});var n=r("mrSGxOB2"),o=r("a+N5u/Cl"),i=r("sa1Ed382"),a=r("HYobN8SQ"),s=r.n(a),u=r("s0r7VfKc"),c=r("IssmDVnT"),l=r("4c1CS0b3"),p=r("Qlod0euf"),f=r("oPs7WnEA"),d=r("EiUFTky8"),g=r("RIjxGFt6"),h={creator:["_id","name","avatarUrl","pinyin"],executor:["_id","name","avatarUrl"],parent:["_id","content"],sprint:["_id","name","status"]},m=["attachmentsCount","commentsCount","involvers","isDeleted","isFavorite","objectlinksCount","project","shareStatus","stage","subtaskIds","tags","tasklist","url"],y=["subtaskCount"],v=function(e){return u.default.fetch.getTask(e,{_paddingRequestStats:!0})},b=function(e,t,r){void 0===r&&(r={});var n=r.pageInfo,i=[{_tasklistId:e},{$or:[{isArchived:!1},{isArchived:null}]},{isDone:r.isDone}],a=r.taskLayer?Object(g.taskLayerToRDBQuery)(r.taskLayer):void 0;a&&!o.isEmpty(a)&&i.push(a);var s={where:i};n&&(s.limit=n.limit);var f=n?l.Observable.of(n.patch||[]):Object(p.generalGetUndoneTasksFetch)({_projectId:t,_tasklistId:e},{},r.taskLayer).request$;return u.default.lift({cacheValidate:c.CacheStrategy.Request,tableName:"Task",request:f,query:s,assocFields:h,excludeFields:m,required:y,padding:v})},_=function(e,t,r,o,i){var a=function(e,t,r,o,i){var a={_projectId:t,_tasklistId:e},s=n.a({taskLayer:i,pageSize:20},o?{orderByTql:Object(f.getOrderByTql)(o)}:{});return Object(p.generalTasksPagination)(a,r,s)}(e,t,{isDone:!0},o,i);return u.default.fetch.expandPage(a,{loadMore$:r,skipConcat:!0}).switchMap(function(r){return b(e,t,{taskLayer:i,isDone:!0,pageInfo:c.Page.queryInfo(r)}).changes().map(function(e){return n.a({},r,{result:e})})})},S=function(e,t,r,o,a){return l.Observable.combineLatest(b(e,t,{taskLayer:a,isDone:!1}).changes(),_(e,t,r,o,a)).map(function(e){var t=n.f(e,2),r=t[0],o=t[1],a=i.user.id,s=r.concat(o.result),u=s.filter(function(e){return Object(p.isVisible)(e,a)}),c=o.hasMore,l=r.length+Object(p.getApproxDoneTaskCount)(o);return{tasks:u,hasMore:c,totalCount:l,remainingCount:l-s.length,invisibleCount:s.length-u.length}})},T=function(e,t,r){void 0===r&&(r={});var n=r.taskLayer,o=r.loadMore$||l.Observable.empty(),a=r.pageSize||50,s=i.user.id;return Object(p.generalGetTasksByTql)(e,{},t,o,{taskLayer:n,pageSize:a}).map(function(e){var t=e.result,r=t.filter(function(e){return Object(p.isVisible)(e,s)}),n=e.hasMore,o=e.totalSize||t.length;return{tasks:r,hasMore:n,totalCount:o,remainingCount:o-t.length,invisibleCount:t.length-r.length}})},E=function(e,t){return u.default.lift({cacheValidate:c.CacheStrategy.Cache,request:u.default.fetch.get("stages/"+e+"/tasks",t),tableName:"Task",query:{where:{_stageId:e}}})},O=function(e){return u.default.lift({cacheValidate:c.CacheStrategy.Cache,request:u.default.fetch.get("tasks/"+e).map(function(e){return n.a({},e,{_taskId:e.ancestorIds[0]})}),tableName:"Task",query:{where:{_id:e}}})},w=function(e,t){return void 0===t&&(t=!1),u.default.lift({cacheValidate:c.CacheStrategy.Request,tableName:"Task",request:u.default.fetch.get("tasks",{_ancestorId:e,withSubtasks:t}),query:{where:[t?{ancestorIds:{$has:e}}:{_taskId:e},{$or:[{isArchived:!1},{isArchived:null}]}]},assocFields:h,excludeFields:m})},C=function(e,t,r,i){var a=o.keys(r)[0],s={_executorId:"executor",_sprintId:"sprints",dueDate:"dueDate",startDate:"startDate"}[a];if(!a||!s)return l.Observable.empty();var c=n.a({},r,{taskIds:t}),p=u.default.fetch.put("projects/"+e+"/tasks/"+s+"/bulk",c,i).map(function(e){return(e.taskIds||t).map(function(t){return n.a({},e,{_id:t})})});return u.default.lift({method:"update",tableName:"Task",request:p,clause:{_id:{$in:t}}})},I=function(e,t){var r={taskIds:t},n=u.default.fetch.put("projects/"+e+"/tasks/archive/bulk",r).map(function(){return[]});return u.default.lift({method:"update",tableName:"Task",request:n,clause:{_id:{$in:t}}})},k=function(e,t){var r={taskIds:t},n=u.default.fetch.put("projects/"+e+"/tasks/delete/bulk",r).map(function(){return[]});return u.default.lift({method:"delete",tableName:"Task",request:n,clause:{_id:{$in:t}}})},j=function(e,t,r){var i,a=n.a({},r,{taskIds:t});if(r._taskflowstatusId){var s=r._taskflowstatusId;i=u.default.fetch.put("taskflowstatus/"+s+"/tasks/copy/bulk",a).map(function(){return[]})}else a=o.omit(n.a({},a,{newStageId:r._stageId}),"_stageId"),i=u.default.fetch.put("projects/"+e+"/tasks/copy/bulk",a).map(function(){return[]});return u.default.lift({method:"create",tableName:"Task",request:i})},A=function(e,t,r){var i,a={taskIds:t};return r._taskflowstatusId?(a=o.extend(a,{_taskflowstatusId:r._taskflowstatusId,_scenariofieldconfigId:r._scenariofieldconfigId,_sprintId:r._sprintId,_tasklistId:r._tasklistId}),i=u.default.fetch.put("projects/"+e+"/tasks/taskflowstatus/bulk",a)):(a=o.extend(a,{newStageId:r._stageId,_scenariofieldconfigId:r._scenariofieldconfigId}),i=u.default.fetch.put("projects/"+e+"/tasks/move/bulk",a).map(function(e){return e.taskIds.map(function(t){return n.a({},r,e,{_id:t,_stageId:e.newStageId})})})),u.default.lift({method:"update",tableName:"Task",request:i,clause:{_id:{$in:t}}})},P=function(e,t){return u.default.lift({method:"update",tableName:"Task",request:u.default.fetch.put("tasks/"+e+"/scenariofieldconfigId",t),clause:{_id:e}})},R=function(e){var t=e.type,r=(e.taskCount,e.updated,n.g(e,["type","taskCount","updated"])),o=t&&t.split(".")[0];return n.a({},r,{type:o})},N=s.a.namespace("table"),x=function(e,t){return i.PREFERENCE.observeTableHeaders(e).map(function(e){if(e)return e;var r="cellDescriptors/"+t;return N.get(r)})},D=function(e,t){var r;return t=t.map(function(e){return n.a({},Object(d.pickCellDescriptorIdentity)(e),Object(d.pickCellDescriptorSnippet)(e))}),l.Observable.fromPromise(i.PREFERENCE.patchTableHeaders(((r={})[e]=t,r)))}},wXiA47ap:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r("L342T8FT"),o=n.push,i=n.replace,a=n.goBack,s=function(e){return e&&e.params.organizationId?"/organization/"+e.params.organizationId+"/testhub":"/organization/:organizationId/testhub"},u=function(e,t){return e&&t?s(e)+"/"+t+"/testgroup":s(e)+"/:testhubId/testgroup"},c=function(e,t,r){return e&&t?r?u(e,t)+"/"+r:u(e,t):u(e)+"/:groupId?"},l={push:o,replace:i,goBack:a,base:s,testhub:u,group:c,usercase:function(e,t,r,n){return e&&t&&n?c(e,t,r)+"/usercase/"+n:c(e)+"/usercase/:usercaseId"}}},"wbimh+Ox":function(e,t,r){"use strict";var n=r("q1tIBJhx"),o=r.n(n),i=r("TSYQbtd+"),a=r.n(i),s=r("S3Uj9fSO"),u=r.n(s),c=r("sa1Ed382"),l=r("GESwhXbR"),p=r("s59ACGQN"),f=r("QEOS9Poo"),d=r("iIRfvRcY"),g=function(e){var t=e.className,r=e.title,n=e.current,i=e.all,s=e.projectId,g=e.type,h=e.organizationId,m=0===n?0:Number(Math.round(n/i*100).toFixed(2)),y=a()(t,d.progress),v=a()("progress__bar",{orange:"overdue"===g}),b={entering:0,entered:m};return o.a.createElement("div",{className:y,onClick:function(){c.gta.event({action:"open detail",method:"click",organizationid:h,projectid:s,page:"Organization Page",type:g,segment:"project table view"}),p.a.onOpen({filter:{isSubtask:!1,sprintId:[f.b]},report:"overview_report",temp:"finished"===g?"done_detail":"overdue_detail",_projectId:s})}},o.a.createElement(l.Tooltip,{title:r},o.a.createElement("div",{className:"tooltip-wrap"},o.a.createElement("span",{className:"progress__left"},o.a.createElement(u.a,{in:!0,appear:!0,timeout:50},function(e){return o.a.createElement(l.LinearBar,{percent:b[e],className:v})})),o.a.createElement("span",{className:"progress__right"},""+m,"%"))))},h=r("RSFv0j4e"),m=function(e,t){return 0===e?0:Math.floor(e/t*100)},y=function(e,t){return Object(h.a)(m(e.doneRate.current,e.doneRate.all),m(t.doneRate.current,t.doneRate.all))},v=function(e,t){return Object(h.a)(m(e.dueRate.current,e.dueRate.all),m(t.dueRate.current,t.dueRate.all))};r.d(t,"a",function(){return g}),r.d(t,"b",function(){return y}),r.d(t,"c",function(){return v})},wfzXWiua:function(e,t,r){e.exports=r.p+"images/bookkeeping-0.5b40c2ea.png"},"wj/icwnL":function(e,t,r){"use strict";r.r(t);var n=r("ohd6/vMg");r.d(t,"assignStateToInviteMembersModal",function(){return n.a}),r.d(t,"unmountInviteMembersModal",function(){return n.b});var o=r("CLvghb9h");r.d(t,"ListTypes",function(){return o.b}),r.d(t,"DisplayTypes",function(){return o.a}),r.d(t,"SearchTypes",function(){return o.c}),r.d(t,"TabTypes",function(){return o.d});var i=r("F/3q5TdB");r.d(t,"inviteMembersModalReducer",function(){return i.a});var a=r("OFi9R5Le");for(var s in a)["assignStateToInviteMembersModal","unmountInviteMembersModal","ListTypes","DisplayTypes","SearchTypes","TabTypes","inviteMembersModalReducer","default"].indexOf(s)<0&&function(e){r.d(t,e,function(){return a[e]})}(s);var u=r("qFDw/T91");for(var s in u)["assignStateToInviteMembersModal","unmountInviteMembersModal","ListTypes","DisplayTypes","SearchTypes","TabTypes","inviteMembersModalReducer","default"].indexOf(s)<0&&function(e){r.d(t,e,function(){return u[e]})}(s)},wllcsNoH:function(e,t,r){e.exports={"sprint-selector":"sprint-selector__3pyy",list:"list__2wKL",placeholder:"placeholder__Xdxf","list-item":"list-item__3JM6",confirm:"confirm__1GqS",trigger:"trigger__9Haa"}},"wn+bmAxP":function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return s});var n,o=r("pSso42HE"),i=r("fSJp128c"),a=r("sa1Ed382");!function(e){e[e.enable=1]="enable",e[e.disable=0]="disable"}(n||(n={}));var s={publishStatus:function(){a.gta.event({action:"publish status",method:"click"})},publishedStatus:function(e,t){a.gta.event({action:"published status",method:"trace",category:e,type:t})},checkPush:function(e){a.gta.event({action:"check push",method:"click",category:e})},viewHistory:function(){a.gta.event({action:"view history",method:"click"})},viewChat:function(){a.gta.event({action:"view chat",method:"click"})},addProjectDetail1:function(){a.gta.event({action:"add project detail1",method:"click"})},addProjectDetail2:function(){a.gta.event({action:"add project detail2",method:"click"})},addedProjectDetail1:function(e){a.gta.event({actions:"added project detail1",method:"trace",note1:e})},addField:function(){a.gta.event({actions:"add field",method:"click"})},addedProjectDetail2:function(e,t){a.gta.event({actions:"added project detail2",method:"trace",note1:e.length}),a.gta.event({action:"add customfield to project",page:t+" Type Configuration Page",category:"on",note1:e.length,customfieldentityids:e.join(",")})},deleteField:function(){a.gta.event({actions:"delete field",method:"click"})},openFieldMenu:function(){a.gta.event({action:"open field menu",method:"click"})},editedField:function(e){var t=Object(o.f)(e);a.gta.event({category:t,action:"edited field",method:"trace"})},editedRight:function(){a.gta.event({action:"edited right",method:"trace"})},addProjectDetail:function(){a.gta.event({action:"add project detail",method:"click"})},addedCompany:function(){a.gta.event({action:"added company",method:"trace"})},filteredNews:function(){a.gta.event({action:"filtered news",method:"trace"})},loadedMore:function(){a.gta.event({action:"loaded more",method:"trace"})},editProjectDescription:function(){a.gta.event({action:"edit project description",method:"click"})},editedProjectDescription:function(){a.gta.event({action:"edited project description",method:"trace"})},viewChart:function(){a.gta.event({action:"view chart",method:"click"})},openProjectinfoapp:function(){a.gta.event({action:"open projectinfoapp",control:"Side Menu",method:"click"})},openedProjectinfoapp:function(){a.gta.event({action:"opened projectinfoapp",control:"Side Menu",method:"trace"})},editProjectCircle:function(){a.gta.event({action:"edited project cycle"})},viewStatisticsChart:function(e){var t="";switch(e){case i.c.Done:t="finished";break;case i.c.Undone:t="unfinished";break;case i.c.Overdue:t="overdue";break;case i.c.Overduedone:t="overdue finished";break;case i.c.Unassigned:t="unclaime";break;case i.c.Duetoday:t="due"}a.gta.event({action:"view chart",type:t})},selectedSprint:function(){a.gta.event({action:"screened sprint"})},openCustomFieldEditProtecter:function(){a.gta.event({action:"show edit customfield",method:"trace"})},confirmCustomFieldEditProtecter:function(e){a.gta.event({type:e,action:"config edited customfield"})},cancelCustomFieldEditProtecter:function(){a.gta.event({action:"cancel edited customfield"})},switchCustomFieldCategory:function(){a.gta.event({action:"switch customfield category"})},searchCustomFieldEntity:function(){a.gta.event({action:"search customfield category",method:"trace"})}}},"wo9V/tbg":function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"lecture",use:"lecture-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="lecture"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#FF8478" rx="2" /><path fill="#FFFFFF" d="M11.132 13.165H8.868L7.204 14.91a.544.544 0 0 1-.696.056.394.394 0 0 1-.058-.607l1.139-1.195H5.715c-.395 0-.715-.41-.715-.914V5.9a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v6.351c0 .505-.321.914-.715.914H12.41l1.138 1.195a.393.393 0 0 1-.058.607.545.545 0 0 1-.695-.056l-1.664-1.746zm-.79-2.677a.38.38 0 0 0 .537-.057l1.931-2.06a.47.47 0 0 0-.025-.624.38.38 0 0 0-.57.027l-1.687 1.768-1.221-.983a.38.38 0 0 0-.526.044L7.2 10.328a.47.47 0 0 0 0 .624.38.38 0 0 0 .573 0l1.333-1.456 1.234.992z" /></g></symbol>'});a.a.add(s);t.default=s},wu4EEviu:function(e,t,r){var n,o,i,a,s,u,c,l,p,f,d,g;n=r("q1z7EYOi"),l=r("2qRnoGmE"),d=r("sa1Ed382"),c=r("a+N5u/Cl"),o=r("nDsjpj50").BehaviorSubject,a=r("HDK4lIiT").ReplaySubject,i=r("bZr3G77e"),f=r("4o0kOWKX").socketDispatcher,g=r("gh8QIhMV").throwError,s=[],u=function(){function e(e){this.isLegacyMode=e.isLegacyMode,this.onOpen=e.onOpen,this.joined=new Set,this.clients=new Set,this._client=void 0,this.options={token:""},this.connectIfParamsAreReady=void 0,this.consumerId$=new a(1),this.opened$=new o(!1)}return e.prototype.initClient=function(e){var t,r,n;return this._client=e,this._client._join=this._join.bind(this),this._client.onmessage=this._onmessage.bind(this),this._client.onopen=this._onopen.bind(this),this._client.onclose=this._onclose.bind(this),this._client.options=this.options,t=l.FEATURES.useSnapperPushService?l.PUSH_HOST:l.TCM_PUSH_HOST,r=l.FEATURES.useSnapperPushService?l.PUSH_PATH:l.TCM_PUSH_PATH,window.addEventListener("offline",(n=this,function(){return n.close()}),!1),window.addEventListener("online",function(e){return function(){return e.connect(t,{path:r})}}(this),!1)},e.prototype.close=function(){var e;return null!=(e=this._client)?e.close():void 0},e.prototype.connect=function(e,t){return this._client&&!1===this._client.connected?this.getValidToken().then((r=this,function(n){return r._client.connect(e,c.extend(t,{token:n}))})).catch(function(e){return g("failed to get refreshed token "+e)}):this._client?void 0:this.connectIfParamsAreReady=this.connect.bind(this,e,t);var r},e.prototype._onopen=function(){var e,t;return this.joined.forEach((t=this,function(e){return t.join(e)})),this.opened$.next(!0),"development"===d.env&&console.info("--- WebSocket Opened ---"),"function"==typeof this.onOpen?this.onOpen({consumerId:(null!=(e=this._client)?e.consumerId:void 0)||null}):void 0},e.prototype._onclose=function(){return this.opened$.next(!1)},e.prototype._onmessage=function(e){var t,r,n,o,i,a;if(this.clients.forEach(function(t){return t._onmessage(e)}),"request"!==e.type)return this._client.onerror(new Error("It is not a request: "+JSON.stringify(e.data)));for(a=[];e.data.params.length;)try{r="string"==typeof(o=e.data.params.shift())?o:o.data,t=JSON.parse(r),"ga"!==(i=d.env)&&"development"!==i||this.pushMessage(t),t&&"string"==typeof t.e?a.push(this.trigger(t.e,t.d)):a.push(this._client.onerror(new Error("Unprocessable entity: "+JSON.stringify(t))))}catch(s){n=s,a.push(this._client.onerror(n))}return a},e.prototype.addClient=function(e){if("function"==typeof e._onmessage)return this.clients.add(e)},e.prototype.pushMessage=function(e){if(s.unshift(e),s.length>1e3)return s.pop()},e.prototype.getMessage=function(e){return null==e&&(e=0),e?s.slice(0,e):s.slice(0)},e.prototype.getValidToken=function(){var e;return e=this.isLegacyMode?"snapperToken":"tcmToken",new Promise(function(t,r){var n;return(n=d.user.get(e))||r("failed to get "+e+"("+n+") from user model"),d.user._checkToken(n)?t(n):p.refreshToken().then(function(e){return t(e)}).catch(function(e){return r(e)})})},e.prototype.refreshToken=function(){var e,t;return e=this.isLegacyMode?"snapperToken":"tcmToken",new Promise((t=this,function(r,n){return t.isLegacyMode?(d.user.checkSnapperToken(),r(d.user.get(e))):t._client.request("refresh_token",[],function(t,o){return t?n(t):(d.user.set(e,o),r(o))})}))},e.prototype.leave=function(e,t){return i.del(e+"/subscribe",{consumerId:t},{contentType:"application/x-www-form-urlencoded; charset=utf-8"}).then((r=this,function(){return r.joined.delete(e)}));var r},e.prototype.join=function(e){return this.opened$.filter(Boolean).take(1).toPromise().then((t=this,function(){if(t._client)return t.joined.has(e)?t._client:t._client.join.call(t._client,e)}));var t},e.prototype._join=function(e,t){return this.consumerId$.next(t),this.joined.add(e),i.post(e+"/subscribe",{consumerId:t},{contentType:"application/x-www-form-urlencoded; charset=utf-8"})},e.prototype.getConsumerId$=function(){return this.consumerId$.distinctUntilChanged()},e}(),c.extend(u.prototype,n.Events),f(p=new u({isLegacyMode:l.FEATURES.useSnapperPushService,onOpen:function(e){var t;return t=e.consumerId,d.consumerId=t}})),e.exports=p,r.e(25).then(function(e){var t;return t=r("K5WRN+Ws"),p.initClient(new t),"function"==typeof p.connectIfParamsAreReady?p.connectIfParamsAreReady():void 0}.bind(null,r)).catch(r.oe)},"x/qLPrBw":function(e,t,r){e.exports={"clear-btn":"clear-btn__36oW"}},x89q56rT:function(e,t,r){"use strict";r.r(t),r.d(t,"bootstrapChatRoom",function(){return y}),r.d(t,"closeChatRoom",function(){return v}),r.d(t,"getRoomInfoRequest",function(){return b}),r.d(t,"getRoomInfoFulfilled",function(){return _}),r.d(t,"getRoomInfoRejected",function(){return S}),r.d(t,"getRoomActivitiesRequest",function(){return T}),r.d(t,"getRoomActivitiesFulfilled",function(){return E}),r.d(t,"getRoomActivitiesRejected",function(){return O}),r.d(t,"getRoomActivitiesLoadMore",function(){return w}),r.d(t,"markMute",function(){return C}),r.d(t,"markRoomRead",function(){return I}),r.d(t,"markRoomReadRejected",function(){return k}),r.d(t,"recallMessage",function(){return j}),r.d(t,"recallMessageReject",function(){return A}),r.d(t,"subscribeGroupRejected",function(){return P}),r.d(t,"quitGroup",function(){return R}),r.d(t,"reducer",function(){return N}),r.d(t,"epic",function(){return x}),r.d(t,"mapDispatchToProps",function(){return D}),r.d(t,"mapStateToProps",function(){return M}),r.d(t,"bootstrapView",function(){return F}),r.d(t,"closeView",function(){return L}),r.d(t,"quitFromGroup",function(){return B});var n,o=r("mrSGxOB2"),i=r("4c1CS0b3"),a=r("6SzIBtPz"),s=r("NOGqly5s"),u=r("fio7jWQ0"),c=r("tLZJUYWX"),l=r("s0r7VfKc"),p=r("sa1Ed382"),f=r("GESwhXbR"),d=r("gh8QIhMV"),g=r("/oI3bVAP"),h=r("cl35kkSI"),m={room:[],activities:[],page:1,pageSize:30,hasMore:!0,isLoading:!1,maxId:"",roomType:null},y=Object(a.a)("BOOTSTRAP_CHAT_ROOM"),v=Object(a.a)("CLOSE_CHAT_ROOM"),b=Object(a.a)("GET_ROOM_INFO_REQUEST"),_=Object(a.a)("GET_ROOM_INFO_FULFILLED"),S=Object(a.a)("GET_ROOM_INFO_REJECTED"),T=Object(a.a)("GET_ACTIVITIES_REQUEST"),E=Object(a.a)("GET_ACTIVITIES_FULFILLED"),O=Object(a.a)("GET_ACTIVITIES_REJECT"),w=Object(a.a)("GET_ACTIVITIES_LOAD_MORE"),C=Object(a.a)("MARK_MUTE"),I=Object(a.a)("MARK_ROOM_READ"),k=Object(a.a)("MARK_ROOM_READ_REJECTED"),j=Object(a.a)("RECALL_MESSAGE"),A=Object(a.a)("RECALL_MESSAGE_REJECT"),P=Object(a.a)("SUBSCRIBE_GROUP_REJECTED"),R=Object(a.a)("QUIT_GROUP"),N=Object(a.b)(((n={})[b.toString()]=function(e){return o.a({},e,{page:1,pageSize:30,activities:[],isLoading:!0})},n[_.toString()]=function(e,t){return o.a({},e,{room:t.payload})},n[S.toString()]=function(e){return o.a({},e,{hasMore:!1,isLoading:!1})},n[T.toString()]=function(e){return o.a({},e,{isLoading:!0})},n[E.toString()]=function(e,t){var r=t.payload.activities,n=e.maxId,i=o.h(r).reverse();i.length&&(n=o.f(i,1)[0]._id);return o.a({},e,t.payload,{isLoading:!1,activities:i,maxId:n})},n[w.toString()]=function(e){return o.a({},e,{isLoading:!0})},n[y.toString()]=function(e,t){return o.a({},e,{roomType:t.payload.type})},n[P.toString()]=function(e){return o.a({},e,{isLoading:!1,hasMore:!1})},n[v.toString()]=function(){return m},n),m),x=Object(s.a)(function(e){return e.ofType(y.toString()).map(function(e){return e.payload}).concatMap(function(e){var t=o.a({},e);if(t.type===g.a.group){var r=p.consumerId;return l.default.fetch.subscribeGroup(t.roomId,r).mapTo(t).map(b).catch(function(e){return Object(d.throwError)(e),i.Observable.of(P(e))})}return i.Observable.of(t).map(b)})},function(e){return e.ofType(v.toString()).map(function(e){return e.payload}).concatMap(function(e){var t=e.type,r=e.roomId;return r?i.Observable.of({type:t,roomId:r}):i.Observable.of({})}).map(u.noOpAction)},function(e){return e.ofType(C.toString()).switchMap(function(e){var t=e.payload;return t?l.default.markMute(t._id,!t.isMute):i.Observable.of(null)}).map(u.noOpAction)},function(e){return e.ofType(I.toString()).concatMap(function(e){var t=e.payload;return t?l.default.fetch.markRoomRead(t).map(function(e){return o.a({},e,{_id:t})}).catch(function(e){return Object(d.throwError)(e),i.Observable.of(k(e))}):i.Observable.of(null)}).map(u.noOpAction)},function(e){return e.ofType(j.toString()).map(function(e){return e.payload}).exhaustMap(function(e){return l.default.fetch.recallChatMessage(e).map(u.noOpAction).catch(function(e){return f.Toast.error(c.get("chat.message.recall.fail")),i.Observable.of(A(e))})})},function(e){return e.ofType(b.toString()).map(function(e){return e.payload}).switchMap(function(t){var r=t.type,n=t.roomId;return l.default.getRoomInfo(r,n).changes().debounceTime(0).takeUntil(e.ofType(v.toString())).scan(function(e,t){var r=o.f(e,1)[0],n=o.f(t,1)[0];return[n,!(r&&r._id===n._id)]},[null,null]).map(_).catch(function(e){return Object(d.throwError)(e),i.Observable.of(S(e))})})},function(e,t){return e.ofType(T.toString(),w.toString()).scan(function(e,r){var n,i=t.getState().ui.room,a=i.page,s=i.pageSize,u=i.maxId,c={page:a,count:s};return n=r.type===T.toString()?l.default.getRoomActivities(r.payload,c):l.default.getMoreRoomActivities(r.payload,o.a({maxId:u},c)),a===e.page&&(n=e.token.concat(n)),{token:n,page:a+1}},{token:null,page:null}).switchMap(function(r){var n=r.token,o=r.page;return n.changes().takeUntil(e.ofType(v.toString(),R.toString())).debounceTime(10).map(function(e){var r=t.getState().ui.room.pageSize;return{activities:e,page:o,hasMore:e.length>=r*(o-1)}}).map(E).do(function(){var e=t.getState(),r=e.ui.room,n=r.room,o=r.roomType,i=e.ui.chat.activedChannel;o===g.a.group||o===g.a.project?u.store.dispatch(I(n[0]._id)):i&&!i.isPseudo&&u.store.dispatch(Object(h.markChannelRead)(i._id))}).catch(function(e){return Object(d.throwError)(e),i.Observable.of(O(e))})})},function(e){return e.ofType(_.toString()).map(function(e){var t=o.f(e.payload,2),r=t[0];return t[1]?T(r._id):Object(u.noOpAction)()})}),D={onGetRoomInfoRequest:b,onGetRoomActivitiesLoadMoreRequest:w,recall:j,markMute:C},M=function(e){var t=e.ui.room,r=t.room,n=t.isLoading,i=t.hasMore,a=t.activities,s=o.f(r,1)[0],u=e.ui.chat.activedChannel;return{roomInfo:s,isLoading:n,hasMore:i,activities:a,isPseudo:!!u&&u.isPseudo}},F=function(e){u.store.dispatch(y(e))},L=function(e){u.store.dispatch(v(e))},B=function(){u.store.dispatch(R())}},xH1xrXdo:function(e,t,r){"use strict";r.d(t,"b",function(){return s}),r.d(t,"a",function(){return u});var n=r("wd/RKGTj"),o=r.n(n),i=r("tLZJUYWX"),a=r.n(i),s=function(e){if(!e||isNaN(e.getTime()))return[];for(var t=o()(e).startOf("week"),r=o()().startOf("week").add(1,"w"),n=Math.abs(t.diff(o()(),"week"))+1,i=[{string:a.a.get("activity.panel.weeker.all"),startDate:"all"}],s=n;s>0;){var u=o()(r).add(-1,"ms"),c=o()(u).startOf("week"),l=void 0;l=s===n?a.a.get("project.overview.filter.week.this"):s===n-1?a.a.get("project.overview.filter.week.last",s):a.a.get("project.overview.filter.week",s),i.push({startDate:String(c.valueOf()),string:c.format("MM.DD")+" - "+u.format("MM.DD")+l}),s--,r=o()(c)}return i},u=function(e){var t=o()(Number(e));return{startTime:t.clone().startOf("week").toISOString(),endTime:t.clone().endOf("week").toISOString()}}},xOayBrgP:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"tap-num-2",use:"tap-num-2-usage",viewBox:"0 0 14 32",content:'<symbol viewBox="0 0 14 32" id="tap-num-2"><path d="M1.5 25.392L8.124 12.9c.336-.624.528-1.17.576-1.638a17.592 17.592 0 0 0 .036-2.736 2.956 2.956 0 0 0-.198-.918 1.562 1.562 0 0 0-.522-.666c-.24-.18-.588-.27-1.044-.27-.552 0-.99.156-1.314.468-.324.312-.486.768-.486 1.368v2.088H1.5V8.58c0-.768.144-1.488.432-2.16a5.73 5.73 0 0 1 1.17-1.764A5.606 5.606 0 0 1 4.848 3.45C5.52 3.15 6.24 3 7.008 3c.96 0 1.782.174 2.466.522a4.753 4.753 0 0 1 1.692 1.422c.444.6.768 1.284.972 2.052.204.768.306 1.584.306 2.448 0 .624-.012 1.146-.036 1.566-.024.42-.072.822-.144 1.206a5.315 5.315 0 0 1-.36 1.152c-.168.384-.396.852-.684 1.404l-5.4 10.404h6.624v3.672H1.5v-3.456z" /></symbol>'});a.a.add(s);t.default=s},xfUIC7bO:function(e,t,r){"use strict";r.r(t);var n=r("4BeYQFX4"),o=r.n(n),i=r("IaFtV71y"),a=r.n(i),s=new o.a({id:"checkmark",use:"checkmark-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" id="checkmark"><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#77C2F8" rx="2" /><path stroke="#FFFFFF" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.5 10.954L7.9 13.5l6.6-7" /></g></symbol>'});a.a.add(s);t.default=s},xgXXo4nF:function(e,t,r){var n,o={}.hasOwnProperty;n=r("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="tag",t.prototype.urlRoot="tags",t.prototype._cache=(new Date).valueOf(),t.prototype.defaults={name:"",color:"blue",postsCount:0,tasksCount:0,eventsCount:0,worksCount:0,entriesCount:0},t.prototype.fetchRelation=function(e,t){return t||(t={}),t.url=this.url()+"/"+e,t.expireCache={namespace:"tag_"+e+"_"+this._cache,expire:10},this.sync("read",this,t),this},t.prototype.refreshCache=function(){return this._cache=(new Date).valueOf()},t}()},"xhXG/roP":function(e,t,r){"use strict";var n,o,i=r("mrSGxOB2"),a=r("6SzIBtPz"),s=r("IssmDVnT"),u=r("NOGqly5s"),c=r("4c1CS0b3"),l=r("HYobN8SQ"),p=r("oRqJmROU"),f=r("gh8QIhMV"),d=r("ctsD9mWH"),g=r("s0r7VfKc"),h=r("/onrLvIr"),m=r("a+N5u/Cl"),y=r.n(m),v=function(e,t){return e.filter(function(e){return e._parentId===t||!e._parentId&&!t}).map(function(e){return e._id})},b=function(e,t,r){var n=y.a.find(e,function(e){return e._id===t});if(n)return n.data[r]},_=function(e){return e.data.pos};function S(e){return e===o.All}!function(e){e.All="all"}(o||(o={}));var T,E={projectId:null,appId:null,commonGroups:null,treeData:null,currentSection:o.All},O=function(e){return"COMMON_GROUPS/"+e},w=function(e){return e+"/SUCCESS"},C=l.namespace("currentGroupLocal"),I=function(e,t){return e+"-"+t},k=l.namespace("commonGroupFoldedLocal"),j=function(e){return e},A={mounted:Object(a.a)(O("MOUNTED")),fetchCommonGroups:Object(a.a)(O("FETCH_COMMON_GROUPS")),fetchCommonGroupsSuccess:Object(a.a)(O(w("FETCH_COMMON_GROUPS"))),onChooseCurrentGroup:Object(a.a)(O("ON_CHOOSE_CURRENT_GROUP")),createCommonGroup:Object(a.a)(O("CREATE_COMMON_GROUP")),updateCommonGroup:Object(a.a)(O("UPDATE_COMMON_GROUP")),deleteCommonGroup:Object(a.a)(O("DELETE_COMMON_GROUP")),updateFailed:Object(a.a)(O((T="UPDATE",T+"/FAILURE"))),updateSuccess:Object(a.a)(O(w("UPDATE"))),unmount:Object(a.a)(O("UNMOUNT"))},P=function(e){d.store.dispatch(A.onChooseCurrentGroup({section:e}))},R=function(e,t){var r=I(e,t);return C.get(r,o.All)},N=function(e){var t=j(e);return k.get(t,!0)},x=function(e,t){var r=j(e);k.set(r,t)},D=Object(a.b)(((n={})[""+A.mounted]=function(e,t){var r=t.payload,n=r.projectId,o=r.appId,a=r.section;return i.a({},e,{projectId:n,appId:o,currentSection:a})},n[""+A.fetchCommonGroupsSuccess]=function(e,t){var r=t.payload.commonGroups,n=void 0===r?[]:r,o=Object(h.b)(n,_);return i.a({},e,{commonGroups:n,treeData:o})},n[""+A.onChooseCurrentGroup]=function(e,t){var r=t.payload.section;return i.a({},e,{currentSection:r})},n[""+A.unmount]=function(){return E},n),E),M=Object(u.a)(function(e){return e.ofType(""+A.mounted).filter(p.a).map(function(e){var t=e.payload,r=t.projectId,n=t.appId;return A.fetchCommonGroups({projectId:r,appId:n})})},function(e){return e.ofType(""+A.fetchCommonGroups).filter(p.a).switchMap(function(t){var r=t.payload,n=r.projectId,o=r.appId;return g.default.getCommonGroups(n,o,{cacheValidate:s.CacheStrategy.Cache}).changes().map(function(e){return A.fetchCommonGroupsSuccess({commonGroups:e})}).takeUntil(e.ofType(""+A.unmount)).catch(function(e){return Object(f.throwError)(e),c.Observable.of(A.updateFailed())})})},function(e,t){return e.ofType(""+A.onChooseCurrentGroup).filter(p.a).do(function(e){var r=e.payload,n=t.getState().ui.commonGroups,o=n.projectId,i=n.appId;o&&i&&function(e,t,r){var n=I(e,t);C.set(n,r)}(o,i,r.section)}).filter(function(){return!1})},function(e){return e.ofType(""+A.createCommonGroup).filter(p.a).switchMap(function(t){var r=t.payload;return g.default.createCommonGroup(r).map(function(){return A.updateSuccess()}).takeUntil(e.ofType(""+A.unmount)).catch(function(e){return Object(f.throwError)(e),c.Observable.of(A.updateFailed())})})},function(e){return e.ofType(""+A.updateCommonGroup).filter(p.a).switchMap(function(t){var r=t.payload,n=r.id,o={name:r.name,description:r.description,_projectId:r.projectId};return g.default.updateCommonGroup(n,o).map(function(){return A.updateSuccess()}).takeUntil(e.ofType(""+A.unmount)).catch(function(e){return Object(f.throwError)(e),c.Observable.of(A.updateFailed())})})},function(e){return e.ofType(""+A.deleteCommonGroup).filter(p.a).switchMap(function(t){var r=t.payload,n=r.id,o=r.projectId;return g.default.deleteCommonGroup(n,o).map(function(){return A.updateSuccess()}).takeUntil(e.ofType(""+A.unmount)).catch(function(e){return Object(f.throwError)(e),c.Observable.of(A.updateFailed())})})}),F=r("peh1clMB"),L=r("90U+kJWN"),B=Object(F.createSelector)(function(e){return e.currentSection},function(e){return e.commonGroups},function(e,t){if(e&&e!==o.All){var r=t&&t.find(function(t){return t._id===e});return r&&Object(L.isUncategorizedCommonGroup)(r)?"null":e}});r.d(t,"a",function(){return o}),r.d(t,"j",function(){return S}),r.d(t,"b",function(){return A}),r.d(t,"d",function(){return P}),r.d(t,"i",function(){return R}),r.d(t,"f",function(){return N}),r.d(t,"l",function(){return x}),r.d(t,"k",function(){return D}),r.d(t,"e",function(){return M}),r.d(t,"h",function(){return v}),r.d(t,"g",function(){return b}),r.d(t,"m",function(){return _}),r.d(t,"c",function(){return B})},"y+syBcQ7":function(e,t,r){e.exports={"select-list":"select-list__tziJ",list:"list__3Ncx",inline:"inline__kl1p",empty:"empty__2ZXJ"}},"y/L8RYEm":function(e,t,r){},yLnoFmrj:function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"m",function(){return s}),r.d(t,"n",function(){return u}),r.d(t,"o",function(){return c}),r.d(t,"j",function(){return l}),r.d(t,"k",function(){return p}),r.d(t,"h",function(){return d}),r.d(t,"l",function(){return g}),r.d(t,"e",function(){return h}),r.d(t,"f",function(){return m}),r.d(t,"i",function(){return y}),r.d(t,"c",function(){return v}),r.d(t,"d",function(){return b}),r.d(t,"g",function(){return _});var n,o=r("mrSGxOB2"),i=r("6SzIBtPz"),a="imagePreviewer",s=Object(i.a)("PREVIEWER_IMAGE_ZOOM_IN"),u=Object(i.a)("PREVIEWER_IMAGE_ZOOM_OUT"),c=Object(i.a)("PREVIEWER_IMAGE_ZOOM_TO"),l=Object(i.a)("PREVIEWER_IMAGE_SET_NATURAL"),p=Object(i.a)("PREVIEWER_IMAGE_SET_NATURAL_RATIO"),f=Object(i.a)("PREVIEWER_IMAGE_TOGGLE_ORIGIN"),d=Object(i.a)("PREVIEWER_IMAGE_ROTATE_CLOCKWISELY"),g=Object(i.a)("PREVIEWER_IMAGE_TOGGLE_SKITCH_DISPLAY"),h=Object(i.a)("PREVIEWER_IMAGE_ENTER_SKITCH_CREATING_MODE"),m=Object(i.a)("PREVIEWER_IMAGE_EXIT_SKITCH_CREATING_MODE"),y=Object(i.a)("PREVIEWER_IMAGE_SET_ACTIVE_IDS"),v=Object(i.a)("PREVIEWER_IMAGE_CLEAR_ACTIVE_IDS"),b={degree:0,ratio:100,naturalRatio:100,skitchMode:!0,skitchCreating:!1},_=Object(i.b)(((n={})[""+s]=function(e){var t=e.ratio+10;return o.a({},e,{ratio:Math.floor(t)<500?t:e.ratio})},n[""+u]=function(e){var t=e.ratio-10;return o.a({},e,{ratio:Math.floor(t)>0?t:e.ratio})},n[""+c]=function(e,t){return o.a({},e,{ratio:t.payload})},n[""+f]=function(e){return e},n[""+l]=function(e){return o.a({},e,{ratio:e.naturalRatio})},n[""+p]=function(e,t){return o.a({},e,{naturalRatio:t.payload})},n[""+d]=function(e){var t=e.degree;return o.a({},e,{degree:(270===t?0:t+90)%450})},n[""+g]=function(e){return o.a({},e,{skitchMode:!e.skitchMode})},n[""+h]=function(e){return o.a({},e,{skitchCreating:!0})},n[""+m]=function(e){return o.a({},e,{skitchCreating:!1})},n[""+y]=function(e,t){return o.a({},e,t.payload)},n[""+v]=function(e){return o.a({},e,{activeSkitchId:void 0,activeActivityId:void 0})},n),b)},yUvm8b1W:function(e,t,r){e.exports={"status-wrap":"status-wrap__1SK1"}},"yWNQg+iF":function(e,t,r){e.exports=r.p+"images/logo4.6d90fb43.jpg"},yWbDNQIY:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r.n(o),a=r("tLZJUYWX"),s=r.n(a);function u(e){return function(t){var r=t.disabled,o=t.isEmpty,a=t.label,u=t.onClick,c=n.a({},t,{label:o?s.a.get("search.filter.searcher.trigger.empty"):a,onClick:r?void 0:u});return i.a.createElement(e,n.a({},c))}}},"yfEWqN/6":function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return o});var n,o,i,a=r("mrSGxOB2"),s=r("q1tIBJhx"),u=r.n(s);!function(e){e.All="all"}(n||(n={})),function(e){e[e.Low=2e10]="Low",e[e.Mid=2e8]="Mid",e[e.High=0]="High"}(o||(o={})),function(e){e[e.PLUGIN=0]="PLUGIN",e[e.SCENARIO=1]="SCENARIO"}(i||(i={}));!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}a.d(t,e)}(u.a.Component)},yhsIzoL6:function(e,t,r){e.exports=r.p+"images/timeview-1.41c010b8.png"},ymFCWmUp:function(e,t,r){var n,o,i,a,s,u,c,l,p,f,d=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};n=r("a+N5u/Cl"),p=r("3eMzznN/").isDefaultEmail,t.calcStrWeightCurry=c=function(e,t){return function(r){var n;return r?(n=r.toLowerCase().indexOf(t.toLowerCase()),r===t?e:r.toLowerCase()===t.toLowerCase()?e-10:-1===n?0:e-50-n):0}},s=function(e,t){return null==e&&(e=""),c(1e3,t)(e)},u=function(e,t){var r,n,o,i,a;return null==e&&(e=""),r=c(800,t),n=function(e){var r,n,o,i,a,s,u,c,l,p,f;for(r=i=0,c=e.length;0<=c?i<c:i>c;r=0<=c?++i:--i)for(f="",n=a=0,l=e.length-r;0<=l?a<l:a>l;n=0<=l?++a:--a){for(o=s=1,p=(u=e[r+n]).length+1;1<=p?s<p:s>p;o=1<=p?++s:--s)if(f+u.substr(0,o)===t)return r;f+=u}return-1},(i=(a=e.split(" ")).map(function(e){return r(e)})).some(function(e){return 800===e})?800-i.indexOf(800):750===Math.max.apply(Math,i)?790-i.indexOf(Math.max.apply(Math,i)):(o=n(a))>=0?790-o:0},i=function(e,t){return null==e&&(e=""),c(600,t)(e)},o=function(e,t){return null==e&&(e=""),p(e)?0:c(400,t)(e)},a=function(e,t,r){var n,a,c,l,p,f,g,h,m,y;return g=e.profileName,c=e.name,p=e.pinyin,m=e.py,n=e.email,h=d.call(r,"profileName")>=0&&i(g,t)||0,l=d.call(r,"name")>=0&&i(c,t)||0,f=d.call(r,"pinyin")>=0&&u(p,t)||0,y=d.call(r,"py")>=0&&s(m,t)||0,a=d.call(r,"email")>=0&&o(n,t)||0,Math.max(y,f,l,h,a)},l=function(e,t){return function(r){return a(r,e,t)}},f=function(e,t){return function(r){return-a(r,e,t)}},t.objectsFilter=function(e,t,r){var o,i,a,s;return null==r&&(r={}),o=r.fields||["name","pinyin","py"],s=r.spaceReserve,t?(s||(t=t.trim().replace(/\s/g,"")),t?(i=l(t,o),a=f(t,o),n.chain(e).filter(i).sortBy(a).value()):e):e}},ypWNgh6R:function(e,t,r){var n,o,i,a,s,u={}.hasOwnProperty;s=r("a+N5u/Cl"),n=r("NN9oPjpy"),a=r("OmupbwLD"),o=r("BVh3nimv"),i={small:"modal-sm",middle:"modal-md",large:"modal-lg"},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,a),t.prototype.viewName="ModalView",t.prototype.events={"click .modal-close":"close"},t.prototype.initialize=function(e){var r;if(e)return r="string"==typeof e?o.get(e):e,this.config=this.configure(r),t.__super__.initialize.apply(this,arguments)},t.prototype.configure=function(e){var t;return t=o.DEFAULTS,s.extend({},t,e)},t.prototype.layout=function(){var e,t,r,n,o,a,s,u;if(e=(a=this.config).autoHeight,r=a.headerFixed,n=a.modalClass,o=a.modalPadding,s=a.size,u=a.width,t=(e?"auto-height":"")+" "+(r?"header-fixed":"")+" "+(o?"modal-padding":"")+" "+i[s]+" "+(n||""),this.$modalView.addClass(t),null!=u)return this.$modalView.width(u)},t.prototype.renderDialog=function(e){var t,r,o,i;return o=(r=this.config).title,i=r.titlePosition,t=r.modalClose,this.$el.html(n({title:o,titlePosition:i,modalClose:t})),this.$modalView=this.$(".modal-view"),this.$(".modal-body").append(e.el),this.layout()},t}()},yx23kki3:function(e,t,r){"use strict";r.r(t),r.d(t,"ganttAssignProject",function(){return _}),r.d(t,"ganttAssignDefaultMode",function(){return S}),r.d(t,"ganttChangeViewMode",function(){return T}),r.d(t,"ganttDestroy",function(){return E}),r.d(t,"ganttAssignTasklist",function(){return O}),r.d(t,"ganttAssignStages",function(){return w}),r.d(t,"ganttAssignStagesDate",function(){return C}),r.d(t,"ganttAssignTasks",function(){return I}),r.d(t,"ganttAssignTasksSuccess",function(){return k}),r.d(t,"ganttAssignScenarioFieldConfigs",function(){return j}),r.d(t,"ganttExpandStage",function(){return A}),r.d(t,"ganttUnexpandStage",function(){return P}),r.d(t,"ganttRenderPreviousDate",function(){return R}),r.d(t,"ganttRenderNextDate",function(){return N}),r.d(t,"ganttFilterCondition",function(){return x}),r.d(t,"ganttFilterConditionSuccess",function(){return D}),r.d(t,"ganttSortMethod",function(){return M}),r.d(t,"ganttChangeDashedLine",function(){return F}),r.d(t,"ganttUpdateTaskPosition",function(){return L}),r.d(t,"ganttAssignDependencyLines",function(){return B}),r.d(t,"ganttChangeDrawingPosition",function(){return U}),r.d(t,"ganttToggleTask",function(){return G}),r.d(t,"ganttRemoveTask",function(){return q}),r.d(t,"ganttSetIsUsingFilter",function(){return z}),r.d(t,"ganttSwitchExportMode",function(){return V}),r.d(t,"dispatchGanttAssignProject",function(){return K}),r.d(t,"dispatchGanttGetDefaultViewMode",function(){return H}),r.d(t,"dispatchGanttAssignTasklist",function(){return W}),r.d(t,"dispatchGanttAssignStages",function(){return J}),r.d(t,"dispatchGanttAssignScenarioFieldConfigs",function(){return Q}),r.d(t,"dispatchGanttDependencyLines",function(){return Y}),r.d(t,"dispatchGanttAssignTasklistRangeDate",function(){return X}),r.d(t,"dispatchGanttAssignTasks",function(){return $}),r.d(t,"dispatchGanttRemoveTask",function(){return Z}),r.d(t,"dispatchGanttToggleTask",function(){return ee}),r.d(t,"dispatchGanttExpandStage",function(){return te}),r.d(t,"dispatchGanttSortMethod",function(){return re}),r.d(t,"appendExpandedInfo",function(){return ne}),r.d(t,"initialDashedLine",function(){return ue}),r.d(t,"initialDrawingPosition",function(){return ce}),r.d(t,"defaultState",function(){return le}),r.d(t,"epic",function(){return pe}),r.d(t,"reducer",function(){return fe});var n,o=r("mrSGxOB2"),i=r("wd/RKGTj"),a=r.n(i),s=r("4c1CS0b3"),u=r("a+N5u/Cl"),c=r("6SzIBtPz"),l=r("IssmDVnT"),p=r("NOGqly5s"),f=r("gh8QIhMV"),d=r("SMR95uLj"),g=r("s0r7VfKc"),h=r("fio7jWQ0"),m=r("Qlod0euf"),y=r("PXasOaBr"),v=r("Z7XVTGXp");function b(e,t){return e.getState().ui.board.gantt[t]}var _=Object(c.a)("GANTT_ASSIGN_PROJECT"),S=Object(c.a)("GANTT_ASSIGN_DEFAULT_MODE"),T=Object(c.a)("GANTT_CHANGE_VIEW_MODE"),E=Object(c.a)("GANTT_DESTROY"),O=Object(c.a)("GANTT_ASSIGN_TASKLIST"),w=Object(c.a)("GANTT_ASSIGN_STAGES"),C=Object(c.a)("GANTT_ASSIGN_STAGES_DATE"),I=Object(c.a)("GANTT_ASSIGN_TASKS"),k=Object(c.a)("GANTT_ASSIGN_TASKS_SUCCESS"),j=Object(c.a)("GANTT_ASSIGN_SCENARIO_FIELD_CONFIGS"),A=Object(c.a)("GANTT_EXPAND_STAGE"),P=Object(c.a)("GANTT_UNEXPAND_STAGE"),R=Object(c.a)("GANTT_RENDER_PREVIOUS_DATE"),N=Object(c.a)("GANTT_RENDER_NEXT_DATE"),x=Object(c.a)("GANTT_FILTER_CONDITION"),D=Object(c.a)("GANTT_FILTER_CONDITION_SUCCESS"),M=Object(c.a)("GANTT_SORT_METHOD"),F=Object(c.a)("GANTT_CHANGE_DASHED_LINE"),L=Object(c.a)("GANTT_UPDATE_TASK_POSITION"),B=Object(c.a)("GANTT_ASSIGN_DEPENDENCY_LINES"),U=Object(c.a)("GANTT_CHANGE_DRAWING_POSITION"),G=Object(c.a)("GANTT_TOGGLE_TASK"),q=Object(c.a)("GANTT_REMOVE_TASK"),z=Object(c.a)("GANTT_SET_IS_USING_FILTER"),V=Object(c.a)("GANTT_SWITCH_EXPORT_MODE"),K=function(e){h.store.dispatch(_(e))},H=function(e){h.store.dispatch(S(e))},W=function(e){h.store.dispatch(O({tasklist:e}))},J=function(e){h.store.dispatch(w({stages:e}))},Q=function(e){h.store.dispatch(j(e))},Y=function(e){h.store.dispatch(B(e))},X=function(e){h.store.dispatch(C(e))},$=function(e,t,r){h.store.dispatch(I({stageId:e,parentTaskId:t,tasks:r}))},Z=function(e){h.store.dispatch(q({task:e}))},ee=function(e){h.store.dispatch(G({taskId:e}))},te=function(e){h.store.dispatch(A(e))},re=function(e){h.store.dispatch(M(e))},ne=function(e,t){return e&&t?e.map(function(e){var r=t[e._tasklistId]||[],n=u.contains(r,e._id);return o.a({},e,{isExpanded:n})}):[]},oe=function(e){var t=Object(v.H)(e);return a()().subtract(1,"month").startOf(t).toISOString()},ie=function(e){var t=Object(v.H)(e);return a()().add(1,"month").endOf(t).toISOString()},ae=r("HYobN8SQ"),se=r("sa1Ed382"),ue={startX:0,startY:0,_fromId:"",_toId:"",kind_start:null,kind_finish:null,startDrawing:!1,drawing:!1,finishDrawing:!1},ce={endX:0,endY:0},le={mode:"day",projectId:null,tasklist:null,stages:null,stageTasksMap:{},filterStageTasksMap:{},scenarioFieldConfigs:null,sortMethod:null,startDate:oe("day"),endDate:ie("day"),taskFilter:null,stagesExpanded:{},isLoading:!0,dashedLine:ue,dependencyLines:[],taskPositions:{},drawingPosition:ce,tasksMap:{},tasksTreeMap:{},tasksExpanded:[],browserPrintMode:!1,ganttExportMode:!1},pe=Object(p.a)(function(e,t){return e.ofType(""+x).switchMap(function(e){var r=e.payload,n=b(t,"projectId"),o=Object(m.tasksFetch)({_projectId:n},{},{tql:r.tql,taskLayer:r.taskLayer}),i=o.urlPath,a=o.urlQuery,u=l.Page.defaultState(i,{urlQuery:a,pageSize:5e3});return g.default.fetch.page(u).map(function(e){var t=e.result.map(function(e){return e._id});return D(t)}).catch(function(e){return Object(f.throwError)(e),s.Observable.empty()})})},function(e,t){return e.ofType(""+I).mergeMap(function(e){var r=e.payload;return b(t,"isUsingFilter")?s.Observable.interval(200).startWith(-1).skipWhile(function(){return!b(t,"isTaskFilterSynced")}).take(1).map(function(){return k(r)}):s.Observable.of(k(r))})}),fe=Object(c.b)(((n={})[_.toString()]=function(e,t){return o.a({},e,{projectId:t.payload})},n[S.toString()]=function(e,t){var r=t.payload||e.projectId,n=ae.namespace("temp").namespace("project_view_mode").namespace(r)(se.user.id)||"day";return o.a({},e,{mode:n,ganttExportMode:!1})},n[T.toString()]=function(e,t){var r=t.payload,n=e.tasklist;if(n){var i=n._projectId;ae.namespace("temp").namespace("project_view_mode").namespace(i)(se.user.id,r)}return o.a({},e,{mode:r})},n[E.toString()]=function(e){return o.a({},e,{mode:"day",startDate:oe("day"),endDate:ie("day"),isLoading:!0})},n[O.toString()]=function(e,t){var r=t.payload.tasklist;return o.a({},e,{tasklist:r})},n[w.toString()]=function(e,t){var r,n=t.payload.stages,i=e.stages,a=n.map(function(t){var r=e.stageTasksMap[t._id]||[],a=Object(v.E)(t,r,e.taskFilter),s=!(u.findLastIndex(n,t)!==n.length-1),c=o.a({},t,{hasMore:a,isLast:s}),l=i&&u.findWhere(i,{_id:t._id});return l?o.a({},l,c):c}),s=a[0]&&a[0]._tasklistId,c=e.stagesExpanded[s]||[],l=[];c.forEach(function(e){!!u.findWhere(a,{_id:e})&&l.push(e)});var p=o.a({},e.stagesExpanded,((r={})[s]=l,r));return o.a({},e,{stages:a,stagesExpanded:p,isLoading:!1})},n[G.toString()]=function(e,t){var r=t.payload.taskId,n=e.tasksExpanded,i=[];return i=!u.contains(n,r)?n.concat([r]):u.without(n,r),o.a({},e,{tasksExpanded:i})},n[q.toString()]=function(e,t){var r=t.payload.task,n=u.omit(e.tasksMap,r._id);return o.a({},e,{tasksMap:n})},n[k.toString()]=function(e,t){var r,n,i=t.payload.stageId,a=t.payload.parentTaskId,s=t.payload.tasks,u=e.taskFilter,c={};s.forEach(function(e){c[e._id]=e});var l=o.a({},e.tasksMap,c),p={},f=s.map(function(e){return e._id});p[a]=f;var d,g=o.a({},e.tasksTreeMap,p),h=Object(v.C)(i,l,g),m=o.a({},e.stageTasksMap,((r={})[i]=h,r)),y=function(e){return!u||u(e)};e.isUsingFilter?d=Object(v.D)(h,e.sortMethod).filter(y):d=h.filter(y);var b=o.a({},e.filterStageTasksMap,((n={})[i]=d,n)),_=e.stages;return i===a&&(_=_&&_.map(function(e){var t=Object(v.E)(e,s,u);return e._id!==i?e:o.a({},e,{hasMore:t})})),o.a({},e,{stageTasksMap:m,filterStageTasksMap:b,stages:_,tasksMap:l,tasksTreeMap:g})},n[""+j]=function(e,t){return o.a({},e,{scenarioFieldConfigs:t.payload})},n[A.toString()]=function(e,t){var r,n=t.payload,i=n._id,a=n._tasklistId,s=e.stagesExpanded[a]||[];if(u.contains(s,i))return o.a({},e);var c=o.a({},e.stagesExpanded,((r={})[a]=s.concat([i]),r));return o.a({},e,{stagesExpanded:c})},n[P.toString()]=function(e,t){var r,n=t.payload,i=n._id,a=n._tasklistId,s=e.stagesExpanded[a]||[],u=s.indexOf(i);if(-1===u)return o.a({},e);s.splice(u,1);var c=o.a({},e.stagesExpanded,((r={})[a]=s,r));return o.a({},e,{stagesExpanded:c})},n[C.toString()]=function(e,t){var r=t.payload,n=e.stages,i=n&&n.map(function(e){var t=r[e._id],n=t.startDate,i=t.dueDate,a=t.minDate,s=t.maxDate;return o.a({},e,{startDate:n,endDate:i,minDate:a,maxDate:s})}),s=u.values(r);if(s.length){var c=u.chain(s).pluck("startDate").compact().value(),l=c.length&&u.chain(c).map(function(e){return a()(e).startOf("day")}).min().value().toISOString(),p=u.chain(s).pluck("dueDate").compact().value(),f=p.length&&u.chain(p).map(function(e){return a()(e).startOf("day")}).max().value().toISOString();return l&&(e=o.a({},e,{startDate:l})),f&&(e=o.a({},e,{endDate:f})),o.a({},e,{stages:i})}return o.a({},e,{stages:i})},n[R.toString()]=function(e){var t,r=(e.stages||[]).filter(function(e){return!!e.startDate}),n=e.startDate;if(0===r.length)t=le.startDate;else{var i=a()(n).subtract(y.e,"day"),s=r.map(function(e){return a()(e.startDate).valueOf()}),c=a()(le.startDate),l=u.min(s),p=a()(l).subtract(y.d,"day");c<p&&(p=c),t=p<i?i.toISOString():p.toISOString()}return o.a({},e,{startDate:t})},n[N.toString()]=function(e){var t,r=(e.stages||[]).filter(function(e){return!!e.endDate}),n=e.endDate;if(0===r.length)t=le.endDate;else{var i=a()(n).add(y.e,"day"),s=r.map(function(e){return new Date(e.endDate).valueOf()}),c=a()(le.endDate),l=u.max(s),p=a()(l).add(y.d,"day");c>p&&(p=c),t=i<p?i.toISOString():p.toISOString()}return o.a({},e,{endDate:t})},n[x.toString()]=function(e,t){var r=t.payload,n=r.tql,i=r.taskLayer,a=!e.isUsingFilter;return o.a({},e,{taskFilter:null,tql:n,taskLayer:i,isTaskFilterSynced:a})},n[D.toString()]=function(e,t){return e.isTaskFilterSynced?e:o.a({},e,{taskFilter:function(e){return t.payload.some(function(t){return t===e._id})},isTaskFilterSynced:!0})},n[M.toString()]=function(e,t){var r=t.payload;return o.a({},e,{sortMethod:r})},n[F.toString()]=function(e,t){var r=t.payload;return o.a({},e,{dashedLine:r})},n[U.toString()]=function(e,t){var r=t.payload;return o.a({},e,{drawingPosition:r})},n[L.toString()]=function(e,t){var r,n=t.payload;if(!n)return e;var i=n.taskId,a=e.taskPositions,s=o.a({},a,((r={})[i]=n,r));return o.a({},e,{taskPositions:s})},n[B.toString()]=function(e,t){var r=t.payload;return o.a({},e,{dependencyLines:r})},n[z.toString()]=function(e,t){return t.payload===e.isUsingFilter?e:o.a({},e,{isUsingFilter:t.payload})},n[""+V]=function(e,t){return o.a({},e,{ganttExportMode:t.payload})},n[""+d.b]=function(e,t){return o.a({},e,{ganttExportMode:t.payload})},n),le)},yz2uMg7c:function(e,t,r){e.exports=r.p+"images/processon-0.3efee916.png"},z4K9ImfL:function(e,t,r){"use strict";var n=r("IssmDVnT");n.SDKFetch.prototype.deleteTaskflowStatus=function(e){return this.delete("taskflowstatus/"+e)},n.SDK.prototype.deleteTaskflowStatus=function(e){return this.lift({method:"delete",tableName:"TaskflowStatus",request:this.fetch.deleteTaskflowStatus(e),clause:{_id:e}})}},"zB/8RwQ+":function(e,t,r){"use strict";r.r(t),r.d(t,"getProjectEvents",function(){return s}),r.d(t,"getPastProjectEventsInCache",function(){return u}),r.d(t,"getNextEventsFrom",function(){return c});var n=r("4c1CS0b3"),o=r("IssmDVnT"),i=r("s0r7VfKc"),a=function(e,t){var r=e.from,n=e.to,o=[];return r||n?(r&&o.push({endDate:{$gt:r.valueOf()}}),n&&o.push({startDate:{$lt:n.valueOf()}}),t&&o.push({endDate:{$lte:t.valueOf()}}),{$and:o}):o},s=function(e,t,r,n,s){var u=[{_projectId:e},{$or:[{isArchived:!1},{isArchived:null}]},{$or:[a(r,s),{recurrence:{$isNotNull:!0}}]}];n||u.push({$or:[{visible:"members"},{$and:[{visible:"involves"},{involveMembers:{$has:t}}]}]});var c={where:u};c.orderBy=[{fieldName:"startDate",orderBy:"ASC"}];var l={startDate:r.from.toISOString()};return r.to&&(l.endDate=r.to.toISOString()),i.default.lift({request:i.default.fetch.getProjectEvents(e,l),query:c,tableName:"Event",cacheValidate:o.CacheStrategy.Request}).map(function(e){return e.map(function(e){return e.map(function(e){return new o.EventSDK.Generator(e)})})})},u=function(e,t,r,s){var u=[{_projectId:e},{$or:[{isArchived:!1},{isArchived:null}]},{$or:[a({to:s}),{recurrence:{$isNotNull:!0}}]}];r||u.push({$or:[{visible:"members"},{$and:[{visible:"involves"},{involveMembers:{$has:t}}]}]});var c={where:u};return i.default.lift({tableName:"Event",cacheValidate:o.CacheStrategy.Request,request:n.Observable.of([]),query:c})},c=function(e,t){var r=t.clone().add(1,"week"),n=e.takeFrom(t.toDate(),r.toDate());if(n.length>0)return n;var o=e.after(t.toDate());return o?[o]:[]}},zDJ6609A:function(e,t,r){"use strict";r.r(t);var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r.n(o),a=r("a+N5u/Cl"),s=r.n(a),u=r("tLZJUYWX"),c=r.n(u),l=r("GESwhXbR"),p=r("HDJEOtNh"),f=r("lIadzMji"),d=r("jy/pKeSr"),g=r("Nxrdcgel"),h=r("TSYQbtd+"),m=r.n(h),y=r("KrjRt4fZ"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootRef=i.a.createRef(),t.onVisibleChange=function(e){t.props.onModalVisibleChange(e)},t.onDelete=function(){t.props.onDelete()},t.onCancel=function(){t.props.onCancel()},t.modalMountIn=function(){return t.rootRef.current||document.body},t}return n.d(t,e),t.prototype.renderSeparator=function(){return i.a.createElement("div",{className:"modal-separator"},i.a.createElement(l.Separator,null))},t.prototype.renderDeleteButton=function(){return i.a.createElement("div",{className:y["modal-delete-buttons"]},i.a.createElement(l.Button,{danger:!0,onClick:this.onDelete},c.a.get("delete")),i.a.createElement(l.TextButton,{onClick:this.onCancel},c.a.get("cancel")))},t.prototype.renderDeleteHint=function(){return i.a.createElement("div",{className:y["modal-delete-hint"]},c.a.get("custom.views.delete.confirm",this.props.name))},t.prototype.renderModal=function(){var e=y.modal+" dls-modal-outer-selector";return i.a.createElement(l.Modal,{className:e,titleCls:y["modal-title"],title:c.a.get("custom.views.delete"),width:460,opened:this.props.modalOpened,mountIn:this.props.shouldLayerNested?this.modalMountIn:void 0,onVisibleChange:this.onVisibleChange},i.a.createElement("div",{className:y["modal-contents"]},this.renderDeleteHint()),this.renderSeparator(),this.renderDeleteButton())},t.prototype.render=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{ref:this.rootRef}),this.renderModal())},t}(i.a.PureComponent),b=r("B9Qi/5SX"),_=r("j5JlF2rJ"),S=r("KrjRt4fZ"),T=function(e){function t(t){var r=e.call(this,t)||this;return r.rootRef=i.a.createRef(),r.setDropdownRef=function(e){r.dropdownRef=e},r.onDeleteModalVisibleChange=function(e){r.setState({deleteModalOpened:e})},r.onDelete=function(){r.props.onDeleteSmartGroup(r.props.smartGroup._id),r.setState({deleteModalOpened:!1})},r.onCancelDelete=function(){r.setState({deleteModalOpened:!1})},r.onClickEditView=function(){Object(_.editCustomViewNameGta)(),r.dropdownRef.close(),r.props.onEditSmartGroupName(r.props.smartGroup)},r.onClickView=function(){r.props.onChooseSmartGroup(r.props.smartGroup._id)},r.onClickTrigger=function(e){Object(_.editCustomViewMenuGta)(),e.stopPropagation()},r.onClickDeleteView=function(){Object(_.deleteCustomViewGta)(),r.dropdownRef.close(),r.setState({deleteModalOpened:!0})},r.layerMountIn=function(){return r.rootRef.current||document.body},r.state={deleteModalOpened:!1},r.isDefaultView=b.b.checkId(t.smartGroup._id),r}return n.d(t,e),t.prototype.needReviseIncon=function(e){return["unordered-list","checkbox"].includes(e)},t.prototype.renderDeleteViewModal=function(){return i.a.createElement(v,{name:this.props.smartGroup.name,modalOpened:this.state.deleteModalOpened,shouldLayerNested:this.props.shouldLayerNested,onModalVisibleChange:this.onDeleteModalVisibleChange,onDelete:this.onDelete,onCancel:this.onCancelDelete})},t.prototype.renderMenuItems=function(){return i.a.createElement(l.Menu,null,i.a.createElement(l.MenuItem,{className:S["menu-item"],onClick:this.onClickEditView},i.a.createElement(l.Icon,{name:"pencil"}),i.a.createElement("span",null,c.a.get("custom.views.edit"))),i.a.createElement(l.MenuItem,{className:S["menu-item"],onClick:this.onClickDeleteView},i.a.createElement(l.Icon,{name:"trash"}),i.a.createElement("span",null,c.a.get("custom.views.delete"))))},t.prototype.renderMenu=function(){return i.a.createElement(l.Dropdown,{content:this.renderMenuItems(),persistence:!0,ref:this.setDropdownRef,mountIn:this.props.shouldLayerNested?this.layerMountIn:void 0},i.a.createElement(l.IconButton,{name:"more",color:"gray",className:S["view-menu-trigger"],onClick:this.onClickTrigger}))},t.prototype.renderName=function(){return i.a.createElement("div",{className:S["view-name"]},this.props.smartGroup.name)},t.prototype.renderIcon=function(){var e=this.isDefaultView?"unordered-list":Object(f.b)(this.props.smartGroup),t=this.needReviseIncon(e)?14.5:16;return i.a.createElement(l.Icon,{name:e,className:S["view-icon"],size:t})},t.prototype.render=function(){var e=m()(S["custom-view"],{"is-active":this.props.isActive});return i.a.createElement("div",{className:S["custom-view-wrapper"],ref:this.rootRef},i.a.createElement("div",{className:e,onClick:this.onClickView},this.renderIcon(),this.renderName(),!this.isDefaultView&&this.renderMenu()),!this.isDefaultView&&this.renderDeleteViewModal())},t}(i.a.PureComponent),E=r("38idLN3K"),O=Object(g.SortableElement)(T),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getSmartGroupInSearchQuery=function(e){return e.name.toLowerCase().indexOf(t.props.searchQuery)>-1},t}return n.d(t,e),t.prototype.getDisplayedSmartGroups=function(){var e=this,t=s.a.sortBy(this.props.smartGroups,function(t){return e.props.orders.indexOf(t._id)});return this.props.searchQuery?t.filter(function(t){return e.getSmartGroupInSearchQuery(t)}):t},t.prototype.getAllTasksSmartGroup=function(){if(!("custom"===this.props.smartGroupType))return null;var e=b.b.get();return this.props.searchQuery?this.getSmartGroupInSearchQuery(e)?e:null:e},t.prototype.renderSearchEmptyPlaceholder=function(){return i.a.createElement("div",{className:E["empty-placeholder-wrapper"]},i.a.createElement("div",{className:E["empty-placeholder-image"]}),i.a.createElement("div",{className:E["empty-placeholder-title"]},c.a.get("custom.views.search.empty",this.props.searchQuery)))},t.prototype.renderAllTaskLabel=function(e){if(!e)return null;var t=e._id===this.props.currentSmartGroupId;return i.a.createElement(T,{isActive:t,shouldLayerNested:this.props.shouldLayerNested,smartGroup:e,onChooseSmartGroup:this.props.onChooseSmartGroup,onDeleteSmartGroup:this.props.onDeleteSmartGroup,onEditSmartGroupName:this.props.onEditSmartGroupName})},t.prototype.renderList=function(){var e=this,t=this.getDisplayedSmartGroups(),r=this.getAllTasksSmartGroup();if(this.props.searchQuery&&0===t.length&&!r)return this.renderSearchEmptyPlaceholder();var n=this.renderAllTaskLabel(r),o=t.map(function(t,r){var n=!!e.props.searchQuery||b.b.checkId(t._id),o=e.props.currentSmartGroupId===t._id;return i.a.createElement(O,{key:t._id,index:r,isActive:!!o,disabled:n,shouldLayerNested:e.props.shouldLayerNested,smartGroup:t,onChooseSmartGroup:e.props.onChooseSmartGroup,onDeleteSmartGroup:e.props.onDeleteSmartGroup,onEditSmartGroupName:e.props.onEditSmartGroupName})});return i.a.createElement(i.a.Fragment,null,n,o)},t.prototype.render=function(){return i.a.createElement("ul",null,this.renderList())},t}(i.a.PureComponent),C=Object(g.SortableContainer)(w),I=function(e){function t(t){var r=e.call(this,t)||this;return r.onUpdatePos=function(e,t){r.props.onMoveSmartGroup(e,t)},r.onSortEnd=function(e){var t=n.h(r.state.orders),o=e.oldIndex,i=e.newIndex;if(o!==i){var a=n.f(t.splice(o,1),1)[0];t.splice(i,0,a);var s=t[i+1]||null;r.setState({orders:t}),Object(_.sortCustomViewGta)(),r.onUpdatePos(a,s)}},r.state={orders:r.getOrders(t)},r}return n.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({orders:this.getOrders(e)})},t.prototype.getOrders=function(e){return e.orders||e.smartGroups.map(function(e){return e._id})},t.prototype.render=function(){return i.a.createElement(C,{axis:"y",lockAxis:"y",distance:5,lockToContainerEdges:!0,helperClass:E["is-dragging"],orders:this.state.orders,searchQuery:this.props.searchQuery,shouldLayerNested:this.props.shouldLayerNested,currentSmartGroupId:this.props.currentSmartGroupId,smartGroupType:this.props.smartGroupType,smartGroups:this.props.smartGroups,onSortEnd:this.onSortEnd,onChooseSmartGroup:this.props.onChooseSmartGroup,onEditSmartGroupName:this.props.onEditSmartGroupName,onDeleteSmartGroup:this.props.onDeleteSmartGroup})},t}(i.a.PureComponent),k=r("EWQzZJIA"),j=r("X7169US4"),A=r("vtu3Osjv"),P=function(e){function t(t){var r=e.call(this,t)||this;return r.onDeleteSmartGroup=function(e){r.props.actions.deleteSmartGroup({id:e})},r.onEditModalVisibleChange=function(e){r.setState({editModalOpened:e})},r.onCreateCustomView=function(e){var t={name:e,type:r.props.smartGroupType};Object(j.dispatchCreateSmartGroup)(r.props.projectId,t),s.a.delay(function(){r.onEditModalVisibleChange(!1)},200)},r.onSaveEdit=function(e){var t=r.state.editedSmartGroup;if(!t||!t.name||t.name!==e){if(!t)return r.onCreateCustomView(e),void Object(_.savedCustomViewGta)();r.props.actions.updateSmartGroup({id:t._id,options:{name:e}}),r.onEditModalVisibleChange(!1)}},r.onChooseSmartGroup=function(e){e&&e!==r.props.currentSmartGroupId&&(r.props.actions.chooseSmartGroup({id:e,projectId:r.props.projectId,smartGroupType:r.props.smartGroupType}),r.props.onUpdateUrl("smartGroup",e))},r.onEditSmartGroupName=function(e){r.setState({editModalOpened:!0,editedSmartGroup:e})},r.onMoveSmartGroup=function(e,t){r.props.actions.moveSmartGroup({id:e,nextId:t})},r.handleCreateButtonClick=function(){Object(_.createCustomViewGta)(),r.setState({editModalOpened:!0,editedSmartGroup:null})},r.state={editModalOpened:!1,editedSmartGroup:null},r}return n.d(t,e),t.prototype.componentDidMount=function(){this.props.actions.mounted({projectId:this.props.projectId,smartGroupType:this.props.smartGroupType})},t.prototype.componentDidUpdate=function(){this.validateCurrentSmartGroup(),this.validateNewSmartGroup()},t.prototype.componentWillUnmount=function(){!1!==this.props.autoDispatchUnmount&&this.props.actions.unmount()},t.prototype.validateCurrentSmartGroup=function(){var e=this.props,t=e.currentSmartGroupId,r=e.smartGroups,n=b.b.checkId(t);t&&!n&&this.props.isLoaded&&(!r.find(function(e){return e._id===t})&&(Object(k.a)(this.props.projectId,this.props.smartGroupType),this.redirectUrl()))},t.prototype.validateNewSmartGroup=function(){var e=this,t=this.props.newSmartGroupId?this.props.smartGroups.find(function(t){return t._id===e.props.newSmartGroupId}):null;t&&(this.onChooseSmartGroup(t._id),this.props.actions.setNewSmartGroupId({id:null}))},t.prototype.redirectUrl=function(){if("custom"!==this.props.smartGroupType)this.props.onRedirectAgileUrl&&this.props.onRedirectAgileUrl();else{var e=b.b._id;this.props.onUpdateUrl("smartGroup",e)}},t.prototype.renderCreateButton=function(){if(!p.ProjectAccess.hasMemberAuthority(this.props.projectId)||this.props.isTimeView)return null;var e=this.props.smartGroups.length>=f.a,t=e?c.a.get("custom.views.create.limit"):c.a.get("custom.views.create.hint"),r=e?void 0:this.handleCreateButtonClick;return i.a.createElement(l.Tooltip,{title:t},i.a.createElement(l.IconButton,{name:"plus",color:"gray",type:"subtle",disabled:e,onClick:r}))},t.prototype.renderTitle=function(){return i.a.createElement("div",{className:A["title-wrapper"]},i.a.createElement("div",{className:A.title},i.a.createElement("div",null,c.a.get("custom.views")),i.a.createElement(l.Tooltip,{title:c.a.get("custom.views.title.hint"),placement:"right"},i.a.createElement(l.Icon,{name:"circle-question-o",className:A["hint-icon"]}))),this.renderCreateButton())},t.prototype.renderCustomViews=function(e){return e?i.a.createElement(I,{shouldLayerNested:this.props.shouldLayerNested,smartGroupType:this.props.smartGroupType,currentSmartGroupId:this.props.currentSmartGroupId,searchQuery:this.props.searchQuery,smartGroups:this.props.smartGroups,orders:this.props.orders,onChooseSmartGroup:this.onChooseSmartGroup,onEditSmartGroupName:this.onEditSmartGroupName,onMoveSmartGroup:this.onMoveSmartGroup,onDeleteSmartGroup:this.onDeleteSmartGroup}):null},t.prototype.renderEmptyPlaceholder=function(e){return this.props.isLoaded?!e?i.a.createElement("div",{className:A["empty-placeholder-wrapper"]},i.a.createElement("div",{className:A["empty-placeholder-image"]}),i.a.createElement("div",{className:A["empty-placeholder-title"]},c.a.get("custom.views.empty"))):null:i.a.createElement(l.Loading,null)},t.prototype.renderEditModal=function(){var e=this.state.editedSmartGroup?this.state.editedSmartGroup.name:"",t=this.state.editedSmartGroup?"edit":"create";return i.a.createElement(d.a,{editMode:t,name:e,modalOpened:this.state.editModalOpened,shouldLayerNested:this.props.shouldLayerNested,onModalVisibleChange:this.onEditModalVisibleChange,onSave:this.onSaveEdit})},t.prototype.render=function(){var e="custom"===this.props.smartGroupType||this.props.smartGroups.length>0;return i.a.createElement("div",{className:A["custom-views-wrapper"]},this.renderTitle(),this.renderCustomViews(e),this.renderEmptyPlaceholder(e),this.renderEditModal())},t}(i.a.PureComponent),R=r("/MKjzBat"),N=r("fvjXLGkK"),x=r("CGal/mJM"),D=Object(R.connect)(function(e,t){var r=t.projectId,n=t.smartGroupType,o=Object(f.d)(r,n),i=e.ui.customViews.smartGroupOrdersInProject[o]||null,a=e.ui.board.boardViewType.boardMode===x.BoardViewType.Time;return{currentSmartGroupId:e.ui.customViews.currentSmartGroupId,newSmartGroupId:e.ui.customViews.newSmartGroupId,smartGroupType:n,isLoaded:e.ui.customViews.isLoaded,smartGroups:e.ui.customViews.smartGroups,orders:i,isTimeView:a}},function(e){return{actions:Object(N.bindActionCreators)({mounted:b.a.mounted,unmount:b.a.unmount,chooseSmartGroup:b.a.chooseSmartGroup,deleteSmartGroup:b.a.deleteSmartGroup,updateSmartGroup:b.a.updateSmartGroup,moveSmartGroup:b.a.moveSmartGroup,setNewSmartGroupId:b.a.setNewSmartGroupId},e)}})(P),M=r("4c1CS0b3"),F=r("s0r7VfKc");function L(e,t,r,n){if(void 0===n&&(n={}),b.b.checkId(e))return M.Observable.of(b.b.get(n.viewType));var o=n.fallbackToAll?b.b.get():null;return F.default.getSmartGroups(t,r).changes().map(function(t){var r=t.find(function(t){return t._id===e});return r||o}).distinctUntilChanged(a.isEqual)}r.d(t,"CustomViews",function(){return P}),r.d(t,"CustomViewsConnect",function(){return D}),r.d(t,"allTasksView",function(){return b.b}),r.d(t,"dispatchUpdateCurrentSmartGroup",function(){return b.d}),r.d(t,"dispatchUnmountCustomViews",function(){return b.c}),r.d(t,"actions",function(){return b.a}),r.d(t,"reducer",function(){return b.f}),r.d(t,"epic",function(){return b.e}),r.d(t,"CUSTOM_VIEWS_AMOUNT_LIMIT",function(){return f.a}),r.d(t,"getCustomViewIcon",function(){return f.b}),r.d(t,"getCustomViewType",function(){return f.c}),r.d(t,"getSmartGroupOrdersKey",function(){return f.d}),r.d(t,"getUpdatedSmartGroupOrders",function(){return f.g}),r.d(t,"getSprintIdFromSmartGroup",function(){return f.e}),r.d(t,"getTasklistIdFromSmartGroup",function(){return f.f}),r.d(t,"getLocalCurrentCustomViewId",function(){return k.b}),r.d(t,"setLocalCurrentCustomViewId",function(){return k.c}),r.d(t,"clearLocalCurrentCustomViewId",function(){return k.a}),r.d(t,"getCustomView",function(){return L})},zPd2KppM:function(e,t,r){e.exports=function(){return r("d4XPzaS9")('!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s="BPnvjz8n")}({"+6/L5mVI":function(e,t,r){"use strict";var o=r("hDVK8her");t.combineAll=function(e){return function(t){return t.lift(new o.CombineLatestOperator(e))}}},"+AwBtVxW":function(e,t,r){"use strict";var o=r("rRE7ETfd"),n=r("PIcZKVs2"),i=r("SUh3uWYz"),a=r("H9Zwx2PB"),s=r("z6YPpxqM");t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){var r=e[e.length-1];s.isScheduler(r)?e.pop():r=null;var l=e.length;return 1===l?a.concat(new n.ScalarObservable(e[0],r),t):l>1?a.concat(new o.ArrayObservable(e,r),t):a.concat(new i.EmptyObservable(r),t)}}},"+EyIUOe9":function(e,t,r){"use strict";var o=r("NVK113Rt");t.map=function(e,t){return o.map(e,t)(this)}},"+J1YLSRB":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ARRAY_BUFFER=100]="ARRAY_BUFFER",e[e.BOOLEAN=101]="BOOLEAN",e[e.DATE_TIME=102]="DATE_TIME",e[e.INTEGER=103]="INTEGER",e[e.NUMBER=104]="NUMBER",e[e.OBJECT=105]="OBJECT",e[e.STRING=106]="STRING",e[e.LITERAL_ARRAY=107]="LITERAL_ARRAY"}(t.RDBType||(t.RDBType={})),function(e){e[e.oneToMany=500]="oneToMany",e[e.oneToOne=501]="oneToOne",e[e.manyToMany=502]="manyToMany"}(t.Relationship||(t.Relationship={})),function(e){e[e.INDEXED_DB=0]="INDEXED_DB",e[e.MEMORY=1]="MEMORY",e[e.LOCAL_STORAGE=2]="LOCAL_STORAGE",e[e.WEB_SQL=3]="WEB_SQL",e[e.OBSERVABLE_STORE=4]="OBSERVABLE_STORE"}(t.DataStoreType||(t.DataStoreType={})),function(e){e[e.Insert=1001]="Insert",e[e.Update=1002]="Update",e[e.Delete=1003]="Delete",e[e.Select=1004]="Select"}(t.StatementType||(t.StatementType={})),function(e){e[e.imlicit=2001]="imlicit",e[e.explicit=2002]="explicit"}(t.JoinMode||(t.JoinMode={})),function(e){e[e.column=300]="column",e[e.navigator=301]="navigator"}(t.LeafType||(t.LeafType={}))},"+q8Ve0Jk":function(e,t,r){"use strict";var o=r("/LR135zw");t._do=function(e,t,r){return o.tap(e,t,r)(this)}},"+rLvKx+n":function(e,t,r){var o=r("dyZXAqyT").document;e.exports=o&&o.documentElement},"/LR135zw":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9");t.tap=function(e,t,r){return function(o){return o.lift(new i(e,t,r))}};var i=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.nextOrObserver,this.error,this.complete))},e}(),a=function(e){function t(t,r,o,i){e.call(this,t);var a=new n.Subscriber(r,o,i);a.syncErrorThrowable=!0,this.add(a),this.safeSubscriber=a}return o(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(n.Subscriber)},"/R2TB7II":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("VtYuyi7W");t.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.Logger.warn.apply(o.Logger,e)}},"/Trfdaa9":function(e,t,r){"use strict";t.isPromise=function(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},"0+0oBmNy":function(e,t,r){"use strict";var o=r("CtA1ySyd");t.partition=function(e,t){return o.partition(e,t)(this)}},"0/R4TaPX":function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"0PrS9efm":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9");t.filter=function(e,t){return function(r){return r.lift(new i(e,t))}};var i=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg))},e}(),a=function(e){function t(t,r,o){e.call(this,t),this.predicate=r,this.thisArg=o,this.count=0}return o(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)},t}(n.Subscriber)},"10Uvv+NS":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return o(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,o){return void 0===o&&(o=0),null!==o&&o>0||null===o&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,o):t.flush(this)},t}(r("1Re5jPji").AsyncAction);t.QueueAction=n},"17JF7D0B":function(module,exports,__webpack_require__){(function(module){var require;self.window||(window=self),function(){"use strict";var $jscomp={scope:{}},goog=goog||{},JSCompiler_inline_result$jscomp$1;goog.global=this,goog.isDef=function(e){return void 0!==e},goog.exportPath_=function(e,t,r){var o,n=e.split("."),i=r||goog.global;n[0]in i||!i.execScript||i.execScript("var "+n[0]);for(;n.length&&(o=n.shift());)!n.length&&goog.isDef(t)?i[o]=t:i=i[o]&&Object.prototype.hasOwnProperty.call(i,o)?i[o]:i[o]={}},goog.define=function(e,t){var r=t;goog.exportPath_(e,r)},goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide can not be used within a goog.module.");goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){goog.exportPath_(e,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You\'re likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=e},goog.module.get=function(){return null},goog.module.getInternal_=function(){return null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(){},goog.getObjectByName=function(e,t){for(var r,o=e.split("."),n=t||goog.global;r=o.shift();){if(!goog.isDefAndNotNull(n[r]))return null;n=n[r]}return n},goog.globalize=function(e,t){var r,o=t||goog.global;for(r in e)o[r]=e[r]},goog.addDependency=function(e,t,r,o){if(goog.DEPENDENCIES_ENABLED){var n,i,a=e.replace(/\\\\/g,"/"),s=goog.dependencies_;o&&"boolean"!=typeof o||(o=o?{module:"goog"}:{});for(var l=0;n=t[l];l++)s.nameToPath[n]=a,s.loadFlags[a]=o;for(var c=0;i=r[c];c++)a in s.requires||(s.requires[a]={}),s.requires[a][i]=!0}},goog.useStrictRequires=!1,goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(){},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!1,goog.TRANSPILE="detect",goog.TRANSPILER="transpile.js",goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={loadFlags:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var e=goog.global.document.getElementsByTagName("SCRIPT"),t=e.length-1;0<=t;--t){var r=e[t].src,o=r.lastIndexOf("?"),n=-1==o?r.length:o;if("base.js"==r.substr(n-7,7)){goog.basePath=r.substr(0,n-7);break}}},goog.importScript_=function(e,t){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importProcessedScript_=function(e,t,r){var o=\'goog.retrieveAndExec_("\'+e+\'", \'+t+", "+r+");";goog.importScript_("",o)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\\n//# sourceURL="+e+"\\n")+");":\'goog.loadModule(function(exports) {"use strict";\'+t+"\\n;return exports});\\n//# sourceURL="+e+"\\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(0<e){var t=goog.queuedModules_;goog.queuedModules_=[];for(var r=0;r<e;r++){var o=t[r];goog.maybeProcessDeferredPath_(o)}}},goog.maybeProcessDeferredDep_=function(e){if(goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)){var t=goog.getPathFromDeps_(e);goog.maybeProcessDeferredPath_(goog.basePath+t)}},goog.isDeferredModule_=function(e){var t=goog.getPathFromDeps_(e),r=t&&goog.dependencies_.loadFlags[t]||{},o=r.lang||"es3";return!(!t||"goog"!=r.module&&!goog.needsTranspile_(o))&&goog.basePath+t in goog.dependencies_.deferred},goog.allDepsAreAvailable_=function(e){var t=goog.getPathFromDeps_(e);if(t&&t in goog.dependencies_.requires)for(var r in goog.dependencies_.requires[t])if(!goog.isProvided_(r)&&!goog.isDeferredModule_(r))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e],goog.globalEval(t)}},goog.loadModuleFromUrl=function(){},goog.writeScriptSrcNode_=function(e){goog.global.document.write(\'<script type="text/javascript" src="\'+e+\'"><\\/script>\')},goog.appendScriptSrcNode_=function(e){var t=goog.global.document,r=t.createElement("script");r.type="text/javascript",r.src=e,r.defer=!1,r.async=!1,t.head.appendChild(r)},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var r=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==r.readyState){if(/\\bdeps.js$/.test(e))return!1;throw Error(\'Cannot write "\'+e+\'" after document load\')}if(void 0===t)if(goog.IS_OLD_IE_){var o=" onreadystatechange=\'goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")\' ";r.write(\'<script type="text/javascript" src="\'+e+\'"\'+o+"><\\/script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(e):goog.writeScriptSrcNode_(e);else r.write(\'<script type="text/javascript">\'+goog.protectScriptTag_(t)+"<\\/script>");return!0}return!1},goog.protectScriptTag_=function(e){return e.replace(/<\\/(SCRIPT)/gi,"\\\\x3c\\\\$1")},goog.needsTranspile_=function(e){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(goog.requiresTranspilation_||(goog.requiresTranspilation_=goog.createRequiresTranspilation_()),e in goog.requiresTranspilation_)return goog.requiresTranspilation_[e];throw Error("Unknown language mode: "+e)},goog.requiresTranspilation_=null,goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){return"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(e){var t=[],r={},o=goog.dependencies_;!function e(n){if(!(n in o.written||n in o.visited)){if(o.visited[n]=!0,n in o.requires)for(var i in o.requires[n])if(!goog.isProvided_(i)){if(!(i in o.nameToPath))throw Error("Undefined nameToPath for "+i);e(o.nameToPath[i])}n in r||(r[n]=!0,t.push(n))}}(e);for(var n=0;n<t.length;n++){var i=t[n];goog.dependencies_.written[i]=!0}var a=goog.moduleLoaderState_;for(goog.moduleLoaderState_=null,n=0;n<t.length;n++){if(!(i=t[n]))throw goog.moduleLoaderState_=a,Error("Undefined script input");var s=o.loadFlags[i]||{},l=s.lang||"es3",c=goog.needsTranspile_(l);"goog"==s.module||c?goog.importProcessedScript_(goog.basePath+i,"goog"==s.module,c):goog.importScript_(goog.basePath+i)}goog.moduleLoaderState_=a},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.hasBadLetScoping=null,goog.useSafari10Workaround_=function(){if(null==goog.hasBadLetScoping){var result;try{result=!!eval(\'"use strict";let x = 1; function f() { return typeof x; };f() == "number";\')}catch(e){result=!1}goog.hasBadLetScoping=result}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){var t=/\\/\\/# sourceURL.*\\n/g,r=/\\/\\/# sourceMappingURL.*\\n/g,o=goog.getLastREMatch_(e,t),n=goog.getLastREMatch_(e,r);return"(function(){"+(e=(e=e.replace(t,"")).replace(r,""))+"\\n;})();\\n"+n+o},goog.getLastREMatch_=function(e,t){var r=e.match(t);return r?r[r.length-1]:""},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{var r;if(goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1},goog.isFunction(e))r=e.call(void 0,{});else{if(!goog.isString(e))throw Error("Invalid module definition");goog.useSafari10Workaround_&&(e=goog.workaroundSafari10EvalBug(e)),r=goog.loadModuleFromSource_.call(void 0,e)}var o=goog.moduleLoaderState_.moduleName;if(!goog.isString(o)||!o)throw Error(\'Invalid module name "\'+o+\'"\');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(o,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof r&&null!=r&&Object.seal(r),goog.loadedModules_[o]=r}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(JSCompiler_OptimizeArgumentsArray_p0){var exports={};return eval(JSCompiler_OptimizeArgumentsArray_p0),exports},goog.normalizePath_=function(e){for(var t=e.split("/"),r=0;r<t.length;)"."==t[r]?t.splice(r,1):r&&".."==t[r]&&t[r-1]&&".."!=t[r-1]?t.splice(--r,2):r++;return t.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(r){return null}},goog.retrieveAndExec_=function(){},goog.transpile_=function(code$jscomp$0,path$jscomp$0){var jscomp=goog.global.$jscomp;jscomp||(goog.global.$jscomp=jscomp={});var transpile=jscomp.transpile;if(!transpile){var transpilerPath=goog.basePath+goog.TRANSPILER,transpilerCode=goog.loadFileSync_(transpilerPath);if(transpilerCode){if(eval(transpilerCode+"\\n//# sourceURL="+transpilerPath),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error(\'The transpiler did not properly export the "transpile" method. $gwtExport: \'+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,jscomp=goog.global.$jscomp,transpile=jscomp.transpile}}if(!transpile)var suffix=" requires transpilation but no transpiler was found.",suffix=suffix+\' Please add "//javascript/closure:transpiler" as a data dependency to ensure it is included.\',transpile=jscomp.transpile=function(e,t){return goog.logToConsole_(t+suffix),e};return transpile(code$jscomp$0,path$jscomp$0)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var r,o="array"==t?[]:{};for(r in e)o[r]=goog.cloneObject(e[r]);return o}return e},goog.bindNative_=function(e,t,r){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,r){if(!e)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,o),e.apply(t,r)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,r){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var r in t)e[r]=t[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(o){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,r=t.createElement("SCRIPT");r.type="text/javascript",r.defer=!1,r.appendChild(t.createTextNode(e)),t.body.appendChild(r),t.body.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error(\'className passed in goog.getCssName must not start with ".". You passed: \'+e);var r,o=function(e){return goog.cssNameMapping_[e]||e};r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?o:function(e){for(var t=e.split("-"),r=[],n=0;n<t.length;n++)r.push(o(t[n]));return r.join("-")}:function(e){return e};var n=t?e+"-"+r(t):r(e);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(n):n},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.getMsg=function(e,t){return t&&(e=e.replace(/\\{\\$([^}]+)}/g,function(e,r){return null!=t&&r in t?t[r]:e})),e},goog.getMsgWithFallback=function(e){return e},goog.exportSymbol=function(e,t,r){goog.exportPath_(e,t,r)},goog.exportProperty=function(e,t,r){e[t]=r},goog.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.base=function(e,r,o){for(var n=Array(arguments.length-2),i=2;i<arguments.length;i++)n[i-2]=arguments[i];return t.prototype[r].apply(e,n)}},goog.base=function(e,t,r){var o=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!o)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(o.superClass_){for(var n=Array(arguments.length-1),i=1;i<arguments.length;i++)n[i-1]=arguments[i];return o.superClass_.constructor.apply(e,n)}var a=Array(arguments.length-2);for(i=2;i<arguments.length;i++)a[i-2]=arguments[i];for(var s=!1,l=e.constructor;l;l=l.superClass_&&l.superClass_.constructor)if(l.prototype[t]===o)s=!0;else if(s)return l.prototype[t].apply(e,a);if(e[t]===o)return e.constructor.prototype[t].apply(e,a);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a goog.module.");e.call(goog.global)},goog.defineClass=function(e,t){var r=t.constructor,o=t.statics;r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")});var n=goog.defineClass.createSealingConstructor_(r,e);return e&&goog.inherits(n,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(n.prototype,t),null!=o&&(o instanceof Function?o(n):goog.defineClass.applyProperties_(n,o)),n},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var r=!goog.defineClass.isUnsealable_(t),o=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===o&&r&&Object.seal instanceof Function&&Object.seal(t),t};return o},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);for(var o=0;o<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;o++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},goog.tagUnsealableClass=function(){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.createRequiresTranspilation_=function(){function addNewerLanguageTranspilationCheck(e,t){transpilationRequiredForAllLaterModes?requiresTranspilation[e]=!0:t()?requiresTranspilation[e]=!1:transpilationRequiredForAllLaterModes=requiresTranspilation[e]=!0}function evalCheck(code){try{return!!eval(code)}catch(ignored){return!1}}var requiresTranspilation={es3:!1},transpilationRequiredForAllLaterModes=!1;return addNewerLanguageTranspilationCheck("es5",function(){return evalCheck("[1,].length==1")}),addNewerLanguageTranspilationCheck("es6",function(){return evalCheck(\'(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()\')}),addNewerLanguageTranspilationCheck("es6-impl",function(){return!0}),addNewerLanguageTranspilationCheck("es7",function(){return evalCheck("2 ** 2 == 4")}),addNewerLanguageTranspilationCheck("es8",function(){return evalCheck("async () => 1, true")}),requiresTranspilation},goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.string={},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:""},goog.string.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.endsWith=function(e,t){var r=e.length-t.length;return 0<=r&&e.indexOf(t,r)==r},goog.string.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.subs=function(e,t){for(var r=e.split("%s"),o="",n=Array.prototype.slice.call(arguments,1);n.length&&1<r.length;)o+=r.shift()+n.shift();return o+r.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\\s\\xa0]+/g," ").replace(/^\\s+|\\s+$/g,"")},goog.string.isEmptyOrWhitespace=function(e){return/^[\\s\\xa0]*$/.test(e)},goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\\t\\n\\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"">=e},goog.string.stripNewlines=function(e){return e.replace(/(\\r\\n|\\r|\\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\\r\\n|\\r|\\n)/g,"\\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\\xa0|\\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\\xa0|[ \\t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\\t\\r\\n ]+/g," ").replace(/^[\\t\\r\\n ]+|[\\t\\r\\n ]+$/g,"")},goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\\s\\xa0]+|[\\s\\xa0]+$/g,"")},goog.string.trimLeft=function(e){return e.replace(/^[\\s\\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\\s\\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(e,t){var r=String(e).toLowerCase(),o=String(t).toLowerCase();return r<o?-1:r==o?0:1},goog.string.numberAwareCompare_=function(e,t,r){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var o=e.toLowerCase().match(r),n=t.toLowerCase().match(r),i=Math.min(o.length,n.length),a=0;a<i;a++){var s=o[a],l=n[a];if(s!=l){var c=parseInt(s,10);if(!isNaN(c)){var u=parseInt(l,10);if(!isNaN(u)&&c-u)return c-u}return s<l?-1:1}}return o.length!=n.length?o.length-n.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\\d+|\\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\\d+|\\.\\d+|\\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\\+/g," "))},goog.string.newLineToBr=function(e,t){return e.replace(/(\\r\\n|\\r|\\n)/g,t?"<br />":"<br>")},goog.string.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;"));else{if(!goog.string.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.GT_RE_,"&gt;")),-1!=e.indexOf(\'"\')&&(e=e.replace(goog.string.QUOT_RE_,"&quot;")),-1!=e.indexOf("\'")&&(e=e.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\\0")&&(e=e.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&-1!=e.indexOf("e")&&(e=e.replace(goog.string.E_RE_,"&#101;"))}return e},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/\'/g,goog.string.NULL_RE_=/\\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\\x00&<>"\'e]/:/[\\x00&<>"\']/,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var r,o={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":\'"\'};return r=t?t.createElement("div"):goog.global.document.createElement("div"),e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,t){var n=o[e];if(n)return n;if("#"==t.charAt(0)){var i=Number("0"+t.substr(1));isNaN(i)||(n=String.fromCharCode(i))}return n||(r.innerHTML=e+" ",n=r.firstChild.nodeValue.slice(0,-1)),o[e]=n})},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return\'"\';default:if("#"==t.charAt(0)){var r=Number("0"+t.substr(1));if(!isNaN(r))return String.fromCharCode(r)}return e}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var r=t.length,o=0;o<r;o++){var n=1==r?t:t.charAt(o);if(e.charAt(0)==n&&e.charAt(e.length-1)==n)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,r){return r&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),r&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,r,o){if(r&&(e=goog.string.unescapeEntities(e)),o&&e.length>t){o>t&&(o=t);var n=e.length-o,i=t-o;e=e.substring(0,i)+"..."+e.substring(n)}else if(e.length>t){var a=Math.floor(t/2),s=e.length-a;a=a+t%2;e=e.substring(0,a)+"..."+e.substring(s)}return r&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\\0":"\\\\0","\\b":"\\\\b","\\f":"\\\\f","\\n":"\\\\n","\\r":"\\\\r","\\t":"\\\\t","\\v":"\\\\x0B",\'"\':\'\\\\"\',"\\\\":"\\\\\\\\","<":"<"},goog.string.jsEscapeCache_={"\'":"\\\\\'"},goog.string.quote=function(e){e=String(e);for(var t=[\'"\'],r=0;r<e.length;r++){var o=e.charAt(r),n=o.charCodeAt(0);t[r+1]=goog.string.specialEscapeChars_[o]||(31<n&&127>n?o:goog.string.escapeChar(o))}return t.push(\'"\'),t.join("")},goog.string.escapeString=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=goog.string.escapeChar(e.charAt(r));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t,r=e.charCodeAt(0);return 31<r&&127>r?t=e:(256>r?(t="\\\\x",(16>r||256<r)&&(t+="0")):(t="\\\\u",4096>r&&(t+="0")),t+=r.toString(16).toUpperCase()),goog.string.jsEscapeCache_[e]=t},goog.string.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.caseInsensitiveContains=function(e,t){return goog.string.contains(e.toLowerCase(),t.toLowerCase())},goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,r){var o=e;return 0<=t&&t<e.length&&0<r&&(o=e.substr(0,t)+e.substr(t+r,e.length-t-r)),o},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){var r=new RegExp(goog.string.regExpEscape(t),"g");return e.replace(r,"")},goog.string.replaceAll=function(e,t,r){var o=new RegExp(goog.string.regExpEscape(t),"g");return e.replace(o,r.replace(/\\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1").replace(/\\x08/g,"\\\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,r){var o=goog.isDef(r)?e.toFixed(r):String(e),n=o.indexOf(".");return-1==n&&(n=o.length),goog.string.repeat("0",Math.max(0,t-n))+o},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=function(e,t){for(var r=0,o=goog.string.trim(String(e)).split("."),n=goog.string.trim(String(t)).split("."),i=Math.max(o.length,n.length),a=0;0==r&&a<i;a++){var s=o[a]||"",l=n[a]||"";do{var c=/(\\d*)(\\D*)(.*)/.exec(s)||["","","",""],u=/(\\d*)(\\D*)(.*)/.exec(l)||["","","",""];if(0==c[0].length&&0==u[0].length)break;var f=0==c[1].length?0:parseInt(c[1],10),g=0==u[1].length?0:parseInt(u[1],10);r=goog.string.compareElements_(f,g)||goog.string.compareElements_(0==c[2].length,0==u[2].length)||goog.string.compareElements_(c[2],u[2]),s=c[3],l=u[3]}while(0==r)}return r},goog.string.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.string.hashCode=function(e){for(var t=0,r=0;r<e.length;++r)t=31*t+e.charCodeAt(r)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\\-([a-z])/g,function(e,t){return t.toUpperCase()})},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){var r=(r=goog.isString(t)?goog.string.regExpEscape(t):"\\\\s")?"|["+r+"]+":"",o=new RegExp("(^"+r+")([a-z])","g");return e.replace(o,function(e,t,r){return t+r.toUpperCase()})},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),goog.isString(e)?/^\\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,r){for(var o=e.split(t),n=[];0<r&&o.length;)n.push(o.shift()),r--;return o.length&&n.push(o.join(t)),n},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var r=-1,o=0;o<t.length;o++)if(""!=t[o]){var n=e.lastIndexOf(t[o]);n>r&&(r=n)}return-1==r?e:e.slice(r+1)},goog.string.editDistance=function(e,t){var r=[],o=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var n=0;n<t.length+1;n++)r[n]=n;for(n=0;n<e.length;n++){o[0]=n+1;for(var i=0;i<t.length;i++){var a=Number(e[n]!=t[i]);o[i+1]=Math.min(o[i]+1,r[i+1]+1,r[i]+a)}for(i=0;i<r.length;i++)r[i]=o[i]}return o[t.length]},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){t.unshift(e),goog.debug.Error.call(this,goog.string.subs.apply(null,t)),t.shift()},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(e,t,r,o){var n="Assertion failed";if(r){n=n+": "+r;var i=o}else e&&(n+=": "+e,i=t);var a=new goog.asserts.AssertionError(""+n,i||[]);goog.asserts.errorHandler_(a)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,r,o){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],r,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.async={},goog.async.FreeList=function(e,t,r){this.limit_=r,this.create_=e,this.reset_=t,this.occupants_=0,this.head_=null},goog.async.FreeList.prototype.get=function(){var e;return 0<this.occupants_?(this.occupants_--,e=this.head_,this.head_=e.next,e.next=null):e=this.create_(),e},goog.async.FreeList.prototype.put=function(e){this.reset_(e),this.occupants_<this.limit_&&(this.occupants_++,e.next=this.head_,this.head_=e)},goog.debug.entryPointRegistry={},goog.debug.EntryPointMonitor=function(){},goog.debug.entryPointRegistry.refList_=[],goog.debug.entryPointRegistry.monitors_=[],goog.debug.entryPointRegistry.monitorsMayExist_=!1,goog.debug.entryPointRegistry.register=function(e){if(goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=e,goog.debug.entryPointRegistry.monitorsMayExist_)for(var t=goog.debug.entryPointRegistry.monitors_,r=0;r<t.length;r++)e(goog.bind(t[r].wrap,t[r]))},goog.debug.entryPointRegistry.monitorAll=function(e){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var t=goog.bind(e.wrap,e),r=0;r<goog.debug.entryPointRegistry.refList_.length;r++)goog.debug.entryPointRegistry.refList_[r](t);goog.debug.entryPointRegistry.monitors_.push(e)},goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(e){var t=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(e==t[t.length-1],"Only the most recent monitor can be unwrapped.");for(var r=goog.bind(e.unwrap,e),o=0;o<goog.debug.entryPointRegistry.refList_.length;o++)goog.debug.entryPointRegistry.refList_[o](r);t.length--},goog.dom.TagName=function(e){this.tagName_=e},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.functions={},goog.functions.constant=function(e){return function(){return e}},goog.functions.FALSE=goog.functions.constant(!1),goog.functions.TRUE=goog.functions.constant(!0),goog.functions.NULL=goog.functions.constant(null),goog.functions.identity=function(e){return e},goog.functions.error=function(e){return function(){throw Error(e)}},goog.functions.fail=function(e){return function(){throw e}},goog.functions.lock=function(e,t){return t=t||0,function(){return e.apply(this,Array.prototype.slice.call(arguments,0,t))}},goog.functions.nth=function(e){return function(){return arguments[e]}},goog.functions.partialRight=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=Array.prototype.slice.call(arguments);return t.push.apply(t,r),e.apply(this,t)}},goog.functions.withReturnValue=function(e,t){return goog.functions.sequence(e,goog.functions.constant(t))},goog.functions.equalTo=function(e,t){return function(r){return t?e==r:e===r}},goog.functions.compose=function(e,t){var r=arguments,o=r.length;return function(){var e;o&&(e=r[o-1].apply(this,arguments));for(var t=o-2;0<=t;t--)e=r[t].call(this,e);return e}},goog.functions.sequence=function(e){var t=arguments,r=t.length;return function(){for(var e,o=0;o<r;o++)e=t[o].apply(this,arguments);return e}},goog.functions.and=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(!t[e].apply(this,arguments))return!1;return!0}},goog.functions.or=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(t[e].apply(this,arguments))return!0;return!1}},goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}},goog.functions.create=function(e,t){var r=function(){};r.prototype=e.prototype;var o=new r;return e.apply(o,Array.prototype.slice.call(arguments,1)),o},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(e){var t,r=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(r||(t=e(),r=!0),t):e()}},goog.functions.once=function(e){var t=e;return function(){if(t){var e=t;t=null,e()}}},goog.functions.debounce=function(e,t,r){var o=0;return function(n){goog.global.clearTimeout(o);var i=arguments;o=goog.global.setTimeout(function(){e.apply(r,i)},t)}},goog.functions.throttle=function(e,t,r){var o=0,n=!1,i=[],a=function(){o=0,n&&(n=!1,s())},s=function(){o=goog.global.setTimeout(a,t),e.apply(r,i)};return function(e){i=arguments,o?n=!0:s()}},goog.functions.rateLimit=function(e,t,r){var o=0,n=function(){o=0};return function(i){o||(o=goog.global.setTimeout(n,t),e.apply(r,arguments))}},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=!1,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,r)}:function(e,t,r){var o=null==r?0:0>r?Math.max(0,e.length+r):r;if(goog.isString(e))return goog.isString(t)&&1==t.length?e.indexOf(t,o):-1;for(var n=o;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,r){goog.asserts.assert(null!=e.length);var o=null==r?e.length-1:r;return Array.prototype.lastIndexOf.call(e,t,o)}:function(e,t,r){var o=null==r?e.length-1:r;if(0>o&&(o=Math.max(0,e.length+o)),goog.isString(e))return goog.isString(t)&&1==t.length?e.lastIndexOf(t,o):-1;for(var n=o;0<=n;n--)if(n in e&&e[n]===t)return n;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,r){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,r)}:function(e,t,r){for(var o=e.length,n=goog.isString(e)?e.split(""):e,i=0;i<o;i++)i in n&&t.call(r,n[i],i,e)},goog.array.forEachRight=function(e,t,r){for(var o=e.length,n=goog.isString(e)?e.split(""):e,i=o-1;0<=i;--i)i in n&&t.call(r,n[i],i,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,r)}:function(e,t,r){for(var o=e.length,n=[],i=0,a=goog.isString(e)?e.split(""):e,s=0;s<o;s++)if(s in a){var l=a[s];t.call(r,l,s,e)&&(n[i++]=l)}return n},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,r)}:function(e,t,r){for(var o=e.length,n=Array(o),i=goog.isString(e)?e.split(""):e,a=0;a<o;a++)a in i&&(n[a]=t.call(r,i[a],a,e));return n},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,r,o){return goog.asserts.assert(null!=e.length),o&&(t=goog.bind(t,o)),Array.prototype.reduce.call(e,t,r)}:function(e,t,r,o){var n=r;return goog.array.forEach(e,function(r,i){n=t.call(o,n,r,i,e)}),n},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,r,o){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),o&&(t=goog.bind(t,o)),Array.prototype.reduceRight.call(e,t,r)}:function(e,t,r,o){var n=r;return goog.array.forEachRight(e,function(r,i){n=t.call(o,n,r,i,e)}),n},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,r)}:function(e,t,r){for(var o=e.length,n=goog.isString(e)?e.split(""):e,i=0;i<o;i++)if(i in n&&t.call(r,n[i],i,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,r)}:function(e,t,r){for(var o=e.length,n=goog.isString(e)?e.split(""):e,i=0;i<o;i++)if(i in n&&!t.call(r,n[i],i,e))return!1;return!0},goog.array.count=function(e,t,r){var o=0;return goog.array.forEach(e,function(e,n,i){t.call(r,e,n,i)&&++o},r),o},goog.array.find=function(e,t,r){var o=goog.array.findIndex(e,t,r);return 0>o?null:goog.isString(e)?e.charAt(o):e[o]},goog.array.findIndex=function(e,t,r){for(var o=e.length,n=goog.isString(e)?e.split(""):e,i=0;i<o;i++)if(i in n&&t.call(r,n[i],i,e))return i;return-1},goog.array.findRight=function(e,t,r){var o=goog.array.findIndexRight(e,t,r);return 0>o?null:goog.isString(e)?e.charAt(o):e[o]},goog.array.findIndexRight=function(e,t,r){for(var o=e.length,n=goog.isString(e)?e.split(""):e,i=o-1;0<=i;i--)if(i in n&&t.call(r,n[i],i,e))return i;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,r){goog.array.splice(e,r,0,t)},goog.array.insertArrayAt=function(e,t,r){goog.partial(goog.array.splice,e,r,0).apply(null,t)},goog.array.insertBefore=function(e,t,r){var o;2==arguments.length||0>(o=goog.array.indexOf(e,r))?e.push(t):goog.array.insertAt(e,t,o)},goog.array.remove=function(e,t){var r,o=goog.array.indexOf(e,t);return(r=0<=o)&&goog.array.removeAt(e,o),r},goog.array.removeLast=function(e,t){var r=goog.array.lastIndexOf(e,t);return 0<=r&&(goog.array.removeAt(e,r),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,r){var o=goog.array.findIndex(e,t,r);return 0<=o&&(goog.array.removeAt(e,o),!0)},goog.array.removeAllIf=function(e,t,r){var o=0;return goog.array.forEachRight(e,function(n,i){t.call(r,n,i,e)&&goog.array.removeAt(e,i)&&o++}),o},goog.array.concat=function(e){return Array.prototype.concat.apply(Array.prototype,arguments)},goog.array.join=function(e){return Array.prototype.concat.apply(Array.prototype,arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var r=Array(t),o=0;o<t;o++)r[o]=e[o];return r}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var r=1;r<arguments.length;r++){var o=arguments[r];if(goog.isArrayLike(o)){var n=e.length||0,i=o.length||0;e.length=n+i;for(var a=0;a<i;a++)e[n+a]=o[a]}else e.push(o)}},goog.array.splice=function(e,t,r,o){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,r){return goog.asserts.assert(null!=e.length),2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,r)},goog.array.removeDuplicates=function(e,t,r){for(var o=t||e,n=r||function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e},i={},a=0,s=0;s<e.length;){var l=e[s++],c=n(l);Object.prototype.hasOwnProperty.call(i,c)||(i[c]=!0,o[a++]=l)}o.length=a},goog.array.binarySearch=function(e,t,r){return goog.array.binarySearch_(e,r||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,r){return goog.array.binarySearch_(e,t,!0,void 0,r)},goog.array.binarySearch_=function(e,t,r,o,n){for(var i,a=0,s=e.length;a<s;){var l,c=a+s>>1;0<(l=r?t.call(n,e[c],c,e):t(o,e[c]))?a=c+1:(s=c,i=!l)}return i?a:~a},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var r=Array(e.length),o=0;o<e.length;o++)r[o]={index:o,value:e[o]};var n=t||goog.array.defaultCompare;for(goog.array.sort(r,function(e,t){return n(e.value,t.value)||e.index-t.index}),o=0;o<e.length;o++)e[o]=r[o].value},goog.array.sortByKey=function(e,t,r){var o=r||goog.array.defaultCompare;goog.array.sort(e,function(e,r){return o(t(e),t(r))})},goog.array.sortObjectsByKey=function(e,t,r){goog.array.sortByKey(e,function(e){return e[t]},r)},goog.array.isSorted=function(e,t,r){for(var o=t||goog.array.defaultCompare,n=1;n<e.length;n++){var i=o(e[n-1],e[n]);if(0<i||0==i&&r)return!1}return!0},goog.array.equals=function(e,t,r){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;for(var o=e.length,n=r||goog.array.defaultCompareEquality,i=0;i<o;i++)if(!n(e[i],t[i]))return!1;return!0},goog.array.compare3=function(e,t,r){for(var o=r||goog.array.defaultCompare,n=Math.min(e.length,t.length),i=0;i<n;i++){var a=o(e[i],t[i]);if(0!=a)return a}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,r){var o=goog.array.binarySearch(e,t,r);return 0>o&&(goog.array.insertAt(e,t,-(o+1)),!0)},goog.array.binaryRemove=function(e,t,r){var o=goog.array.binarySearch(e,t,r);return 0<=o&&goog.array.removeAt(e,o)},goog.array.bucket=function(e,t,r){for(var o={},n=0;n<e.length;n++){var i=e[n],a=t.call(r,i,n,e);if(goog.isDef(a))(o[a]||(o[a]=[])).push(i)}return o},goog.array.toObject=function(e,t,r){var o={};return goog.array.forEach(e,function(n,i){o[t.call(r,n,i,e)]=n}),o},goog.array.range=function(e,t,r){var o=[],n=0,i=e,a=r||1;if(void 0!==t&&(n=e,i=t),0>a*(i-n))return[];if(0<a)for(var s=n;s<i;s+=a)o.push(s);else for(s=n;s>i;s+=a)o.push(s);return o},goog.array.repeat=function(e,t){for(var r=[],o=0;o<t;o++)r[o]=e;return r},goog.array.flatten=function(e){for(var t=[],r=0;r<arguments.length;r++){var o=arguments[r];if(goog.isArray(o))for(var n=0;n<o.length;n+=8192)for(var i=goog.array.slice(o,n,n+8192),a=goog.array.flatten.apply(null,i),s=0;s<a.length;s++)t.push(a[s]);else t.push(o)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(0<(t%=e.length)?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,r){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=r&&r<e.length);var o=Array.prototype.splice.call(e,t,1);Array.prototype.splice.call(e,r,0,o[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],r=arguments[0].length,o=1;o<arguments.length;o++)arguments[o].length<r&&(r=arguments[o].length);for(o=0;o<r;o++){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i][o]);t.push(n)}return t},goog.array.shuffle=function(e,t){for(var r=t||Math.random,o=e.length-1;0<o;o--){var n=Math.floor(r()*(o+1)),i=e[o];e[o]=e[n],e[n]=i}},goog.array.copyByIndex=function(e,t){var r=[];return goog.array.forEach(t,function(t){r.push(e[t])}),r},goog.array.concatMap=function(e,t,r){return goog.array.concat.apply([],goog.array.map(e,t,r))},goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},goog.object.forEach=function(e,t,r){for(var o in e)t.call(r,e[o],o,e)},goog.object.filter=function(e,t,r){var o,n={};for(o in e)t.call(r,e[o],o,e)&&(n[o]=e[o]);return n},goog.object.map=function(e,t,r){var o,n={};for(o in e)n[o]=t.call(r,e[o],o,e);return n},goog.object.some=function(e,t,r){for(var o in e)if(t.call(r,e[o],o,e))return!0;return!1},goog.object.every=function(e,t,r){for(var o in e)if(!t.call(r,e[o],o,e))return!1;return!0},goog.object.getCount=function(e){var t,r=0;for(t in e)r++;return r},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,r=[],o=0;for(t in e)r[o++]=e[t];return r},goog.object.getKeys=function(e){var t,r=[],o=0;for(t in e)r[o++]=t;return r},goog.object.getValueByKeys=function(e,t){for(var r=goog.isArrayLike(t),o=r?t:arguments,n=r?0:1;n<o.length&&(e=e[o[n]],goog.isDef(e));n++);return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var r in e)if(e[r]==t)return!0;return!1},goog.object.findKey=function(e,t,r){for(var o in e)if(t.call(r,e[o],o,e))return o},goog.object.findValue=function(e,t,r){var o=goog.object.findKey(e,t,r);return o&&e[o]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var r;return(r=t in e)&&delete e[t],r},goog.object.add=function(e,t,r){if(null!==e&&t in e)throw Error(\'The object already contains the key "\'+t+\'"\');goog.object.set(e,t,r)},goog.object.get=function(e,t,r){return null!==e&&t in e?e[t]:r},goog.object.set=function(e,t,r){e[t]=r},goog.object.setIfUndefined=function(e,t,r){return t in e?e[t]:e[t]=r},goog.object.setWithReturnValueIfNotSet=function(e,t,r){if(t in e)return e[t];var o=r();return e[t]=o},goog.object.equals=function(e,t){for(var r in e)if(!(r in t)||e[r]!==t[r])return!1;for(r in t)if(!(r in e))return!1;return!0},goog.object.clone=function(e){var t,r={};for(t in e)r[t]=e[t];return r},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();var r,o="array"==t?[]:{};for(r in e)o[r]=goog.object.unsafeClone(e[r]);return o}return e},goog.object.transpose=function(e){var t,r={};for(t in e)r[e[t]]=t;return r},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var r,o,n=1;n<arguments.length;n++){for(r in o=arguments[n])e[r]=o[r];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)r=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var r={},o=0;o<t;o+=2)r[arguments[o]]=arguments[o+1];return r},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},o=0;o<t;o++)r[arguments[o]]=!0;return r},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var r={},o=e;o&&(o!==Object.prototype||t);){for(var n=Object.getOwnPropertyNames(o),i=0;i<n.length;i++)r[n[i]]=!0;o=Object.getPrototypeOf(o)}return goog.object.getKeys(r)},goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();if(e){var t=e.userAgent;if(t)return t}return""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,r=/(\\w[\\w ]+)\\/([^\\s]+)\\s*(?:\\((.*?)\\))?/g,o=[];t=r.exec(e);)o.push([t[1],t[2],t[3]||void 0]);return o},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdge_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){var t=goog.array.find(e,n);return o[t]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);var r=goog.labs.userAgent.util.extractVersionTuples(t),o={};goog.array.forEach(r,function(e){var t=e[0],r=e[1];o[t]=r});var n=goog.partial(goog.object.containsKey,o);if(goog.labs.userAgent.browser.isOpera())return e(["Version","Opera"]);if(goog.labs.userAgent.browser.isEdge())return e(["Edge"]);if(goog.labs.userAgent.browser.isChrome())return e(["Chrome","CriOS"]);var i=r[2];return i&&i[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\\d\\.]*)/.exec(e);if(t&&t[1])return t[1];var r="",o=/MSIE +([\\d\\.]+)/.exec(e);if(o&&o[1]){var n=/Trident\\/(\\d.\\d)/.exec(e);if("7.0"==o[1])if(n&&n[1])switch(n[1]){case"4.0":r="8.0";break;case"5.0":r="9.0";break;case"6.0":r="10.0";break;case"7.0":r="11.0"}else r="7.0";else r=o[1]}return r},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){var t=goog.labs.userAgent.util.extractVersionTuples(e),r=goog.labs.userAgent.engine.getEngineTuple_(t);if(r)return"Gecko"==r[0]?goog.labs.userAgent.engine.getVersionForKey_(t,"Firefox"):r[1];var o,n=t[0];if(n&&(o=n[2])){var i=/Trident\\/([^\\s;]+)/.exec(o);if(i)return i[1]}}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var r=e[t];if("Edge"==r[0])return r}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){var r=goog.array.find(e,function(e){return t==e[0]});return r&&r[1]||""},goog.async.throwException=function(e){goog.global.setTimeout(function(){throw e},0)},goog.async.nextTick=function(e,t,r){var o=e;t&&(o=goog.bind(e,t)),o=goog.async.nextTick.wrapCallback_(o),goog.isFunction(goog.global.setImmediate)&&(r||goog.async.nextTick.useSetImmediate_())?goog.global.setImmediate(o):(goog.async.nextTick.setImmediate_||(goog.async.nextTick.setImmediate_=goog.async.nextTick.getSetImmediateEmulator_()),goog.async.nextTick.setImmediate_(o))},goog.async.nextTick.useSetImmediate_=function(){return!(goog.global.Window&&goog.global.Window.prototype&&!goog.labs.userAgent.browser.isEdge()&&goog.global.Window.prototype.setImmediate==goog.global.setImmediate)},goog.async.nextTick.getSetImmediateEmulator_=function(){var e=goog.global.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!goog.labs.userAgent.engine.isPresto()&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow,r=t.document;r.open(),r.write(""),r.close();var o="callImmediate"+Math.random(),n="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host,i=goog.bind(function(e){"*"!=n&&e.origin!=n||e.data!=o||this.port1.onmessage()},this);t.addEventListener("message",i,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(o,n)}}}),void 0!==e&&!goog.labs.userAgent.browser.isIE()){var t=new e,r={},o=r;return t.port1.onmessage=function(){if(goog.isDef(r.next)){var e=(r=r.next).cb;r.cb=null,e()}},function(e){o.next={cb:e},o=o.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){goog.global.setTimeout(e,0)}},goog.async.nextTick.wrapCallback_=goog.functions.identity,goog.debug.entryPointRegistry.register(function(e){goog.async.nextTick.wrapCallback_=e}),goog.async.WorkQueue=function(){this.workTail_=this.workHead_=null},goog.async.WorkQueue.DEFAULT_MAX_UNUSED=100,goog.async.WorkQueue.freelist_=new goog.async.FreeList(function(){return new goog.async.WorkItem},function(e){e.reset()},goog.async.WorkQueue.DEFAULT_MAX_UNUSED),goog.async.WorkQueue.prototype.add=function(e,t){var r=this.getUnusedItem_();r.set(e,t),this.workTail_?this.workTail_.next=r:(goog.asserts.assert(!this.workHead_),this.workHead_=r),this.workTail_=r},goog.async.WorkQueue.prototype.remove=function(){var e=null;return this.workHead_&&(e=this.workHead_,this.workHead_=this.workHead_.next,this.workHead_||(this.workTail_=null),e.next=null),e},goog.async.WorkQueue.prototype.returnUnused=function(e){goog.async.WorkQueue.freelist_.put(e)},goog.async.WorkQueue.prototype.getUnusedItem_=function(){return goog.async.WorkQueue.freelist_.get()},goog.async.WorkItem=function(){this.next=this.scope=this.fn=null},goog.async.WorkItem.prototype.set=function(e,t){this.fn=e,this.scope=t,this.next=null},goog.async.WorkItem.prototype.reset=function(){this.next=this.scope=this.fn=null},goog.async.run=function(e,t){goog.async.run.schedule_||goog.async.run.initializeRunner_(),goog.async.run.workQueueScheduled_||(goog.async.run.schedule_(),goog.async.run.workQueueScheduled_=!0),goog.async.run.workQueue_.add(e,t)},goog.async.run.initializeRunner_=function(){if(-1!=String(goog.global.Promise).indexOf("[native code]")){var e=goog.global.Promise.resolve(void 0);goog.async.run.schedule_=function(){e.then(goog.async.run.processWorkQueue)}}else goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue)}},goog.async.run.forceNextTick=function(e){goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue),e&&e(goog.async.run.processWorkQueue)}},goog.async.run.workQueueScheduled_=!1,goog.async.run.workQueue_=new goog.async.WorkQueue,goog.DEBUG&&(goog.async.run.resetQueue=function(){goog.async.run.workQueueScheduled_=!1,goog.async.run.workQueue_=new goog.async.WorkQueue}),goog.async.run.processWorkQueue=function(){for(var e;e=goog.async.run.workQueue_.remove();){try{e.fn.call(e.scope)}catch(t){goog.async.throwException(t)}goog.async.run.workQueue_.returnUnused(e)}goog.async.run.workQueueScheduled_=!1},goog.promise={},goog.promise.Resolver=function(){},goog.Thenable=function(){},goog.Thenable.prototype.then=function(){},goog.Thenable.IMPLEMENTED_BY_PROP="$goog_Thenable",goog.Thenable.addImplementation=function(e){e.prototype.then=e.prototype.then,e.prototype[goog.Thenable.IMPLEMENTED_BY_PROP]=!0},goog.Thenable.isImplementedBy=function(e){if(!e)return!1;try{return!!e[goog.Thenable.IMPLEMENTED_BY_PROP]}catch(t){return!1}},goog.Promise=function(e,t){if(this.state_=goog.Promise.State_.PENDING,this.result_=void 0,this.callbackEntriesTail_=this.callbackEntries_=this.parent_=null,this.executing_=!1,0<goog.Promise.UNHANDLED_REJECTION_DELAY?this.unhandledRejectionId_=0:0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1),goog.Promise.LONG_STACK_TRACES&&(this.stack_=[],this.addStackTrace_(Error("created")),this.currentStep_=0),e!=goog.nullFunction)try{var r=this;e.call(t,function(e){r.resolve_(goog.Promise.State_.FULFILLED,e)},function(e){if(goog.DEBUG&&!(e instanceof goog.Promise.CancellationError))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}r.resolve_(goog.Promise.State_.REJECTED,e)})}catch(o){this.resolve_(goog.Promise.State_.REJECTED,o)}},goog.Promise.LONG_STACK_TRACES=!1,goog.Promise.UNHANDLED_REJECTION_DELAY=0,goog.Promise.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3},goog.Promise.CallbackEntry_=function(){this.next=this.context=this.onRejected=this.onFulfilled=this.child=null,this.always=!1},goog.Promise.CallbackEntry_.prototype.reset=function(){this.context=this.onRejected=this.onFulfilled=this.child=null,this.always=!1},goog.Promise.DEFAULT_MAX_UNUSED=100,goog.Promise.freelist_=new goog.async.FreeList(function(){return new goog.Promise.CallbackEntry_},function(e){e.reset()},goog.Promise.DEFAULT_MAX_UNUSED),goog.Promise.getCallbackEntry_=function(e,t,r){var o=goog.Promise.freelist_.get();return o.onFulfilled=e,o.onRejected=t,o.context=r,o},goog.Promise.returnEntry_=function(e){goog.Promise.freelist_.put(e)},goog.Promise.resolve=function(e){if(e instanceof goog.Promise)return e;var t=new goog.Promise(goog.nullFunction);return t.resolve_(goog.Promise.State_.FULFILLED,e),t},goog.Promise.reject=function(e){return new goog.Promise(function(t,r){r(e)})},goog.Promise.resolveThen_=function(e,t,r){goog.Promise.maybeThen_(e,t,r,null)||goog.async.run(goog.partial(t,e))},goog.Promise.race=function(e){return new goog.Promise(function(t,r){e.length||t(void 0);for(var o,n=0;n<e.length;n++)o=e[n],goog.Promise.resolveThen_(o,t,r)})},goog.Promise.all=function(e){return new goog.Promise(function(t,r){var o=e.length,n=[];if(o)for(var i,a=function(e,r){o--,n[e]=r,0==o&&t(n)},s=function(e){r(e)},l=0;l<e.length;l++)i=e[l],goog.Promise.resolveThen_(i,goog.partial(a,l),s);else t(n)})},goog.Promise.allSettled=function(e){return new goog.Promise(function(t){var r=e.length,o=[];if(r)for(var n,i=function(e,n,i){r--,o[e]=n?{fulfilled:!0,value:i}:{fulfilled:!1,reason:i},0==r&&t(o)},a=0;a<e.length;a++)n=e[a],goog.Promise.resolveThen_(n,goog.partial(i,a,!0),goog.partial(i,a,!1));else t(o)})},goog.Promise.firstFulfilled=function(e){return new goog.Promise(function(t,r){var o=e.length,n=[];if(o)for(var i,a=function(e){t(e)},s=function(e,t){o--,n[e]=t,0==o&&r(n)},l=0;l<e.length;l++)i=e[l],goog.Promise.resolveThen_(i,a,goog.partial(s,l));else t(void 0)})},goog.Promise.withResolver=function(){var e,t,r=new goog.Promise(function(r,o){e=r,t=o});return new goog.Promise.Resolver_(r,e,t)},goog.Promise.prototype.then=function(e,t,r){return null!=e&&goog.asserts.assertFunction(e,"opt_onFulfilled should be a function."),null!=t&&goog.asserts.assertFunction(t,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then")),this.addChildPromise_(goog.isFunction(e)?e:null,goog.isFunction(t)?t:null,r)},goog.Thenable.addImplementation(goog.Promise),goog.Promise.prototype.thenVoid=function(e,t,r){null!=e&&goog.asserts.assertFunction(e,"opt_onFulfilled should be a function."),null!=t&&goog.asserts.assertFunction(t,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then")),this.addCallbackEntry_(goog.Promise.getCallbackEntry_(e||goog.nullFunction,t||null,r))},goog.Promise.prototype.thenCatch=function(e,t){return goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenCatch")),this.addChildPromise_(null,e,t)},goog.Promise.prototype.addCallbackEntry_=function(e){this.hasEntry_()||this.state_!=goog.Promise.State_.FULFILLED&&this.state_!=goog.Promise.State_.REJECTED||this.scheduleCallbacks_(),this.queueEntry_(e)},goog.Promise.prototype.addChildPromise_=function(e,t,r){var o=goog.Promise.getCallbackEntry_(null,null,null);return o.child=new goog.Promise(function(n,i){o.onFulfilled=e?function(t){try{var o=e.call(r,t);n(o)}catch(a){i(a)}}:n,o.onRejected=t?function(e){try{var o=t.call(r,e);!goog.isDef(o)&&e instanceof goog.Promise.CancellationError?i(e):n(o)}catch(a){i(a)}}:i}),o.child.parent_=this,this.addCallbackEntry_(o),o.child},goog.Promise.prototype.unblockAndFulfill_=function(e){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED),this.state_=goog.Promise.State_.PENDING,this.resolve_(goog.Promise.State_.FULFILLED,e)},goog.Promise.prototype.unblockAndReject_=function(e){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED),this.state_=goog.Promise.State_.PENDING,this.resolve_(goog.Promise.State_.REJECTED,e)},goog.Promise.prototype.resolve_=function(e,t){this.state_==goog.Promise.State_.PENDING&&(this===t&&(e=goog.Promise.State_.REJECTED,t=new TypeError("Promise cannot resolve to itself")),this.state_=goog.Promise.State_.BLOCKED,goog.Promise.maybeThen_(t,this.unblockAndFulfill_,this.unblockAndReject_,this)||(this.result_=t,this.state_=e,this.parent_=null,this.scheduleCallbacks_(),e!=goog.Promise.State_.REJECTED||t instanceof goog.Promise.CancellationError||goog.Promise.addUnhandledRejection_(this,t)))},goog.Promise.maybeThen_=function(e,t,r,o){if(e instanceof goog.Promise)return e.thenVoid(t,r,o),!0;if(goog.Thenable.isImplementedBy(e))return e.then(t,r,o),!0;if(goog.isObject(e))try{var n=e.then;if(goog.isFunction(n))return goog.Promise.tryThen_(e,n,t,r,o),!0}catch(i){return r.call(o,i),!0}return!1},goog.Promise.tryThen_=function(e,t,r,o,n){var i=!1,a=function(e){i||(i=!0,o.call(n,e))};try{t.call(e,function(e){i||(i=!0,r.call(n,e))},a)}catch(s){a(s)}},goog.Promise.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,goog.async.run(this.executeCallbacks_,this))},goog.Promise.prototype.hasEntry_=function(){return!!this.callbackEntries_},goog.Promise.prototype.queueEntry_=function(e){goog.asserts.assert(null!=e.onFulfilled),this.callbackEntriesTail_?this.callbackEntriesTail_.next=e:this.callbackEntries_=e,this.callbackEntriesTail_=e},goog.Promise.prototype.popEntry_=function(){var e=null;return this.callbackEntries_&&(e=this.callbackEntries_,this.callbackEntries_=e.next,e.next=null),this.callbackEntries_||(this.callbackEntriesTail_=null),null!=e&&goog.asserts.assert(null!=e.onFulfilled),e},goog.Promise.prototype.executeCallbacks_=function(){for(var e;e=this.popEntry_();)goog.Promise.LONG_STACK_TRACES&&this.currentStep_++,this.executeCallback_(e,this.state_,this.result_);this.executing_=!1},goog.Promise.prototype.executeCallback_=function(e,t,r){if(t==goog.Promise.State_.REJECTED&&e.onRejected&&!e.always&&this.removeUnhandledRejection_(),e.child)e.child.parent_=null,goog.Promise.invokeCallback_(e,t,r);else try{e.always?e.onFulfilled.call(e.context):goog.Promise.invokeCallback_(e,t,r)}catch(o){goog.Promise.handleRejection_.call(null,o)}goog.Promise.returnEntry_(e)},goog.Promise.invokeCallback_=function(e,t,r){t==goog.Promise.State_.FULFILLED?e.onFulfilled.call(e.context,r):e.onRejected&&e.onRejected.call(e.context,r)},goog.Promise.prototype.addStackTrace_=function(e){if(goog.Promise.LONG_STACK_TRACES&&goog.isString(e.stack)){var t=e.stack.split("\\n",4)[3],r=(r=e.message)+Array(11-r.length).join(" ");this.stack_.push(r+t)}},goog.Promise.prototype.appendLongStack_=function(e){if(goog.Promise.LONG_STACK_TRACES&&e&&goog.isString(e.stack)&&this.stack_.length){for(var t=["Promise trace:"],r=this;r;r=r.parent_){for(var o=this.currentStep_;0<=o;o--)t.push(r.stack_[o]);t.push("Value: ["+(r.state_==goog.Promise.State_.REJECTED?"REJECTED":"FULFILLED")+"] <"+String(r.result_)+">")}e.stack+="\\n\\n"+t.join("\\n")}},goog.Promise.prototype.removeUnhandledRejection_=function(){if(0<goog.Promise.UNHANDLED_REJECTION_DELAY)for(var e=this;e&&e.unhandledRejectionId_;e=e.parent_)goog.global.clearTimeout(e.unhandledRejectionId_),e.unhandledRejectionId_=0;else if(0==goog.Promise.UNHANDLED_REJECTION_DELAY)for(e=this;e&&e.hadUnhandledRejection_;e=e.parent_)e.hadUnhandledRejection_=!1},goog.Promise.addUnhandledRejection_=function(e,t){0<goog.Promise.UNHANDLED_REJECTION_DELAY?e.unhandledRejectionId_=goog.global.setTimeout(function(){e.appendLongStack_(t),goog.Promise.handleRejection_.call(null,t)},goog.Promise.UNHANDLED_REJECTION_DELAY):0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(e.hadUnhandledRejection_=!0,goog.async.run(function(){e.hadUnhandledRejection_&&(e.appendLongStack_(t),goog.Promise.handleRejection_.call(null,t))}))},goog.Promise.handleRejection_=goog.async.throwException,goog.Promise.setUnhandledRejectionHandler=function(e){goog.Promise.handleRejection_=e},goog.Promise.CancellationError=function(e){goog.debug.Error.call(this,e)},goog.inherits(goog.Promise.CancellationError,goog.debug.Error),goog.Promise.CancellationError.prototype.name="cancel",goog.Promise.Resolver_=function(e,t,r){this.promise=e,this.resolve=t,this.reject=r},goog.math={},goog.math.randomInt=function(e){return Math.floor(Math.random()*e)},goog.math.uniformRandom=function(e,t){return e+Math.random()*(t-e)},goog.math.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},goog.math.modulo=function(e,t){var r=e%t;return 0>r*t?r+t:r},goog.math.lerp=function(e,t,r){return e+r*(t-e)},goog.math.nearlyEquals=function(e,t,r){return Math.abs(e-t)<=(r||1e-6)},goog.math.standardAngle=function(e){return goog.math.modulo(e,360)},goog.math.standardAngleInRadians=function(e){return goog.math.modulo(e,2*Math.PI)},goog.math.toRadians=function(e){return e*Math.PI/180},goog.math.toDegrees=function(e){return 180*e/Math.PI},goog.math.angleDx=function(e,t){return t*Math.cos(goog.math.toRadians(e))},goog.math.angleDy=function(e,t){return t*Math.sin(goog.math.toRadians(e))},goog.math.angle=function(e,t,r,o){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(o-t,r-e)))},goog.math.angleDifference=function(e,t){var r=goog.math.standardAngle(t)-goog.math.standardAngle(e);return 180<r?r-=360:-180>=r&&(r=360+r),r},goog.math.sign=function(e){return 0<e?1:0>e?-1:e},goog.math.longestCommonSubsequence=function(e,t,r,o){for(var n=r||function(e,t){return e==t},i=o||function(t){return e[t]},a=e.length,s=t.length,l=[],c=0;c<a+1;c++)l[c]=[],l[c][0]=0;for(var u=0;u<s+1;u++)l[0][u]=0;for(c=1;c<=a;c++)for(u=1;u<=s;u++)n(e[c-1],t[u-1])?l[c][u]=l[c-1][u-1]+1:l[c][u]=Math.max(l[c-1][u],l[c][u-1]);var f=[];for(c=a,u=s;0<c&&0<u;)n(e[c-1],t[u-1])?(f.unshift(i(c-1,u-1)),c--,u--):l[c-1][u]>l[c][u-1]?c--:u--;return f},goog.math.sum=function(e){return goog.array.reduce(arguments,function(e,t){return e+t},0)},goog.math.average=function(e){return goog.math.sum.apply(null,arguments)/arguments.length},goog.math.sampleVariance=function(e){var t=arguments.length;if(2>t)return 0;var r=goog.math.average.apply(null,arguments);return goog.math.sum.apply(null,goog.array.map(arguments,function(e){return Math.pow(e-r,2)}))/(t-1)},goog.math.standardDeviation=function(e){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))},goog.math.isInt=function(e){return isFinite(e)&&0==e%1},goog.math.isFiniteNumber=function(e){return isFinite(e)&&!isNaN(e)},goog.math.isNegativeZero=function(e){return 0==e&&0>1/e},goog.math.log10Floor=function(e){if(0<e){var t=Math.round(Math.log(e)*Math.LOG10E);return t-(parseFloat("1e"+t)>e?1:0)}return 0==e?-1/0:NaN},goog.math.safeFloor=function(e,t){return goog.asserts.assert(!goog.isDef(t)||0<t),Math.floor(e+(t||2e-15))},goog.math.safeCeil=function(e,t){return goog.asserts.assert(!goog.isDef(t)||0<t),Math.ceil(e-(t||2e-15))},goog.iter={},goog.iter.StopIteration="StopIteration"in goog.global?goog.global.StopIteration:{message:"StopIteration",stack:""},goog.iter.Iterator=function(){},goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration},goog.iter.Iterator.prototype.__iterator__=function(){return this},goog.iter.toIterator=function(e){if(e instanceof goog.iter.Iterator)return e;if("function"==typeof e.__iterator__)return e.__iterator__(!1);if(goog.isArrayLike(e)){var t=0,r=new goog.iter.Iterator;return r.next=function(){for(;;){if(t>=e.length)throw goog.iter.StopIteration;if(t in e)return e[t++];t++}},r}throw Error("Not implemented")},goog.iter.forEach=function(e,t,r){if(goog.isArrayLike(e))try{goog.array.forEach(e,t,r)}catch(o){if(o!==goog.iter.StopIteration)throw o}else{e=goog.iter.toIterator(e);try{for(;;)t.call(r,e.next(),void 0,e)}catch(n){if(n!==goog.iter.StopIteration)throw n}}},goog.iter.filter=function(e,t,r){var o=goog.iter.toIterator(e),n=new goog.iter.Iterator;return n.next=function(){for(;;){var e=o.next();if(t.call(r,e,void 0,o))return e}},n},goog.iter.filterFalse=function(e,t,r){return goog.iter.filter(e,goog.functions.not(t),r)},goog.iter.range=function(e,t,r){var o=0,n=e,i=r||1;if(1<arguments.length&&(o=e,n=t),0==i)throw Error("Range step argument must not be zero");var a=new goog.iter.Iterator;return a.next=function(){if(0<i&&o>=n||0>i&&o<=n)throw goog.iter.StopIteration;var e=o;return o+=i,e},a},goog.iter.join=function(e,t){return goog.iter.toArray(e).join(t)},goog.iter.map=function(e,t,r){var o=goog.iter.toIterator(e),n=new goog.iter.Iterator;return n.next=function(){var e=o.next();return t.call(r,e,void 0,o)},n},goog.iter.reduce=function(e,t,r,o){var n=r;return goog.iter.forEach(e,function(e){n=t.call(o,n,e)}),n},goog.iter.some=function(e,t,r){e=goog.iter.toIterator(e);try{for(;;)if(t.call(r,e.next(),void 0,e))return!0}catch(o){if(o!==goog.iter.StopIteration)throw o}return!1},goog.iter.every=function(e,t,r){e=goog.iter.toIterator(e);try{for(;;)if(!t.call(r,e.next(),void 0,e))return!1}catch(o){if(o!==goog.iter.StopIteration)throw o}return!0},goog.iter.chain=function(e){return goog.iter.chainFromIterable(arguments)},goog.iter.chainFromIterable=function(e){var t=goog.iter.toIterator(e),r=new goog.iter.Iterator,o=null;return r.next=function(){for(;;){if(null==o){var e=t.next();o=goog.iter.toIterator(e)}try{return o.next()}catch(r){if(r!==goog.iter.StopIteration)throw r;o=null}}},r},goog.iter.dropWhile=function(e,t,r){var o=goog.iter.toIterator(e),n=new goog.iter.Iterator,i=!0;return n.next=function(){for(;;){var e=o.next();if(!i||!t.call(r,e,void 0,o))return i=!1,e}},n},goog.iter.takeWhile=function(e,t,r){var o=goog.iter.toIterator(e),n=new goog.iter.Iterator;return n.next=function(){var e=o.next();if(t.call(r,e,void 0,o))return e;throw goog.iter.StopIteration},n},goog.iter.toArray=function(e){if(goog.isArrayLike(e))return goog.array.toArray(e);e=goog.iter.toIterator(e);var t=[];return goog.iter.forEach(e,function(e){t.push(e)}),t},goog.iter.equals=function(e,t,r){var o=goog.iter.zipLongest({},e,t),n=r||goog.array.defaultCompareEquality;return goog.iter.every(o,function(e){return n(e[0],e[1])})},goog.iter.nextOrValue=function(e,t){try{return goog.iter.toIterator(e).next()}catch(r){if(r!=goog.iter.StopIteration)throw r;return t}},goog.iter.product=function(e){if(goog.array.some(arguments,function(e){return!e.length})||!arguments.length)return new goog.iter.Iterator;var t=new goog.iter.Iterator,r=arguments,o=goog.array.repeat(0,r.length);return t.next=function(){if(o){for(var e=goog.array.map(o,function(e,t){return r[t][e]}),t=o.length-1;0<=t;t--){if(goog.asserts.assert(o),o[t]<r[t].length-1){o[t]++;break}if(0==t){o=null;break}o[t]=0}return e}throw goog.iter.StopIteration},t},goog.iter.cycle=function(e){var t=goog.iter.toIterator(e),r=[],o=0,n=new goog.iter.Iterator,i=!1;return n.next=function(){var e=null;if(!i)try{return e=t.next(),r.push(e),e}catch(n){if(n!=goog.iter.StopIteration||goog.array.isEmpty(r))throw n;i=!0}return e=r[o],o=(o+1)%r.length,e},n},goog.iter.count=function(e,t){var r=e||0,o=goog.isDef(t)?t:1,n=new goog.iter.Iterator;return n.next=function(){var e=r;return r+=o,e},n},goog.iter.repeat=function(e){var t=new goog.iter.Iterator;return t.next=goog.functions.constant(e),t},goog.iter.accumulate=function(e){var t=goog.iter.toIterator(e),r=0,o=new goog.iter.Iterator;return o.next=function(){return r+=t.next()},o},goog.iter.zip=function(e){var t=arguments,r=new goog.iter.Iterator;if(0<t.length){var o=goog.array.map(t,goog.iter.toIterator);r.next=function(){return goog.array.map(o,function(e){return e.next()})}}return r},goog.iter.zipLongest=function(e,t){var r=goog.array.slice(arguments,1),o=new goog.iter.Iterator;if(0<r.length){var n=goog.array.map(r,goog.iter.toIterator);o.next=function(){var t=!1,r=goog.array.map(n,function(r){var o;try{o=r.next(),t=!0}catch(n){if(n!==goog.iter.StopIteration)throw n;o=e}return o});if(!t)throw goog.iter.StopIteration;return r}}return o},goog.iter.compress=function(e,t){var r=goog.iter.toIterator(t);return goog.iter.filter(e,function(){return!!r.next()})},goog.iter.GroupByIterator_=function(e,t){this.iterator=goog.iter.toIterator(e),this.keyFunc=t||goog.functions.identity},goog.inherits(goog.iter.GroupByIterator_,goog.iter.Iterator),goog.iter.GroupByIterator_.prototype.next=function(){for(;this.currentKey==this.targetKey;)this.currentValue=this.iterator.next(),this.currentKey=this.keyFunc(this.currentValue);return this.targetKey=this.currentKey,[this.currentKey,this.groupItems_(this.targetKey)]},goog.iter.GroupByIterator_.prototype.groupItems_=function(e){for(var t=[];this.currentKey==e;){t.push(this.currentValue);try{this.currentValue=this.iterator.next()}catch(r){if(r!==goog.iter.StopIteration)throw r;break}this.currentKey=this.keyFunc(this.currentValue)}return t},goog.iter.groupBy=function(e,t){return new goog.iter.GroupByIterator_(e,t)},goog.iter.starMap=function(e,t,r){var o=goog.iter.toIterator(e),n=new goog.iter.Iterator;return n.next=function(){var e=goog.iter.toArray(o.next());return t.apply(r,goog.array.concat(e,void 0,o))},n},goog.iter.tee=function(e,t){var r=goog.iter.toIterator(e),o=goog.isNumber(t)?t:2,n=goog.array.map(goog.array.range(o),function(){return[]});return goog.array.map(n,function(e){var t=new goog.iter.Iterator;return t.next=function(){var t;return goog.array.isEmpty(e)&&(t=r.next(),goog.array.forEach(n,function(e){e.push(t)})),goog.asserts.assert(!goog.array.isEmpty(e)),e.shift()},t})},goog.iter.enumerate=function(e,t){return goog.iter.zip(goog.iter.count(t),e)},goog.iter.limit=function(e,t){goog.asserts.assert(goog.math.isInt(t)&&0<=t);var r=goog.iter.toIterator(e),o=new goog.iter.Iterator,n=t;return o.next=function(){if(0<n--)return r.next();throw goog.iter.StopIteration},o},goog.iter.consume=function(e,t){goog.asserts.assert(goog.math.isInt(t)&&0<=t);for(var r=goog.iter.toIterator(e);0<t--;)goog.iter.nextOrValue(r,null);return r},goog.iter.slice=function(e,t,r){goog.asserts.assert(goog.math.isInt(t)&&0<=t);var o=goog.iter.consume(e,t);return goog.isNumber(r)&&(goog.asserts.assert(goog.math.isInt(r)&&r>=t),o=goog.iter.limit(o,r-t)),o},goog.iter.hasDuplicates_=function(e){var t=[];return goog.array.removeDuplicates(e,t),e.length!=t.length},goog.iter.permutations=function(e,t){var r=goog.iter.toArray(e),o=goog.isNumber(t)?t:r.length,n=goog.array.repeat(r,o),i=goog.iter.product.apply(void 0,n);return goog.iter.filter(i,function(e){return!goog.iter.hasDuplicates_(e)})},goog.iter.combinations=function(e,t){function r(e){return o[e]}var o=goog.iter.toArray(e),n=goog.iter.range(o.length),i=goog.iter.permutations(n,t),a=goog.iter.filter(i,function(e){return goog.array.isSorted(e)}),s=new goog.iter.Iterator;return s.next=function(){return goog.array.map(a.next(),r)},s},goog.iter.combinationsWithReplacement=function(e,t){function r(e){return o[e]}var o=goog.iter.toArray(e),n=goog.array.range(o.length),i=goog.array.repeat(n,t),a=goog.iter.product.apply(void 0,i),s=goog.iter.filter(a,function(e){return goog.array.isSorted(e)}),l=new goog.iter.Iterator;return l.next=function(){return goog.array.map(s.next(),r)},l},goog.structs={},goog.structs.Map=function(e,t){this.map_={},this.keys_=[],this.version_=this.count_=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var o=0;o<r;o+=2)this.set(arguments[o],arguments[o+1])}else e&&this.addAll(e)},goog.structs.Map.prototype.getCount=function(){return this.count_},goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();for(var e=[],t=0;t<this.keys_.length;t++){var r=this.keys_[t];e.push(this.map_[r])}return e},goog.structs.Map.prototype.getKeys=function(){return this.cleanupKeysArray_(),this.keys_.concat()},goog.structs.Map.prototype.containsKey=function(e){return goog.structs.Map.hasKey_(this.map_,e)},goog.structs.Map.prototype.containsValue=function(e){for(var t=0;t<this.keys_.length;t++){var r=this.keys_[t];if(goog.structs.Map.hasKey_(this.map_,r)&&this.map_[r]==e)return!0}return!1},goog.structs.Map.prototype.equals=function(e,t){if(this===e)return!0;if(this.count_!=e.getCount())return!1;var r=t||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var o,n=0;o=this.keys_[n];n++)if(!r(this.get(o),e.get(o)))return!1;return!0},goog.structs.Map.defaultEquals=function(e,t){return e===t},goog.structs.Map.prototype.isEmpty=function(){return 0==this.count_},goog.structs.Map.prototype.clear=function(){this.map_={},this.version_=this.count_=this.keys_.length=0},goog.structs.Map.prototype.remove=function(e){return!!goog.structs.Map.hasKey_(this.map_,e)&&(delete this.map_[e],this.count_--,this.version_++,this.keys_.length>2*this.count_&&this.cleanupKeysArray_(),!0)},goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){for(var e=0,t=0;e<this.keys_.length;){var r=this.keys_[e];goog.structs.Map.hasKey_(this.map_,r)&&(this.keys_[t++]=r),e++}this.keys_.length=t}if(this.count_!=this.keys_.length){var o={};for(t=e=0;e<this.keys_.length;)r=this.keys_[e],goog.structs.Map.hasKey_(o,r)||(this.keys_[t++]=r,o[r]=1),e++;this.keys_.length=t}},goog.structs.Map.prototype.get=function(e,t){return goog.structs.Map.hasKey_(this.map_,e)?this.map_[e]:t},goog.structs.Map.prototype.set=function(e,t){goog.structs.Map.hasKey_(this.map_,e)||(this.count_++,this.keys_.push(e),this.version_++),this.map_[e]=t},goog.structs.Map.prototype.addAll=function(e){var t,r;e instanceof goog.structs.Map?(t=e.getKeys(),r=e.getValues()):(t=goog.object.getKeys(e),r=goog.object.getValues(e));for(var o=0;o<t.length;o++)this.set(t[o],r[o])},goog.structs.Map.prototype.forEach=function(e,t){for(var r=this.getKeys(),o=0;o<r.length;o++){var n=r[o],i=this.get(n);e.call(t,i,n,this)}},goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)},goog.structs.Map.prototype.transpose=function(){for(var e=new goog.structs.Map,t=0;t<this.keys_.length;t++){var r=this.keys_[t],o=this.map_[r];e.set(o,r)}return e},goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();for(var e={},t=0;t<this.keys_.length;t++){var r=this.keys_[t];e[r]=this.map_[r]}return e},goog.structs.Map.prototype.__iterator__=function(e){this.cleanupKeysArray_();var t=0,r=this.version_,o=this,n=new goog.iter.Iterator;return n.next=function(){if(r!=o.version_)throw Error("The map has changed since the iterator was created");if(t>=o.keys_.length)throw goog.iter.StopIteration;var n=o.keys_[t++];return e?n:o.map_[n]},n},goog.structs.Map.hasKey_=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";if(goog.labs.userAgent.platform.isWindows()){var r=/Windows (?:NT|Phone) ([0-9.]+)/.exec(e);t=r?r[1]:"0.0"}else goog.labs.userAgent.platform.isIos()?t=(r=/(?:iPhone|iPod|iPad|CPU)\\s+OS\\s+(\\S+)/.exec(e))&&r[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?t=(r=/Mac OS X ([0-9_.]+)/.exec(e))?r[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isAndroid()?t=(r=/Android\\s+([^\\);]+)(\\)|;)/.exec(e))&&r[1]:goog.labs.userAgent.platform.isChromeOS()&&(t=(r=/(?:CrOS\\s+(?:i686|x86_64)\\s+([0-9.]+))/.exec(e))&&r[1]);return t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(r){}return!1},goog.reflect.cache=function(e,t,r,o){var n=o?o(t):t;return Object.prototype.hasOwnProperty.call(e,n)?e[n]:e[n]=r(t)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigator=function(){return goog.global.navigator||null},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigator();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigator();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();if(t&&(e=t?t[1]:""),goog.userAgent.IE){var r=goog.userAgent.getDocumentMode_();if(null!=r&&r>parseFloat(e))return String(r)}return e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv\\:([^\\);]+)(\\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\\/([\\d\\.]+)/.exec(e):goog.userAgent.IE?/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\\/(\\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \\/]?(\\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;var doc$jscomp$inline_3=goog.global.document,mode$jscomp$inline_4=goog.userAgent.getDocumentMode_();JSCompiler_inline_result$jscomp$1=doc$jscomp$inline_3&&goog.userAgent.IE?mode$jscomp$inline_4||("CSS1Compat"==doc$jscomp$inline_3.compatMode?parseInt(goog.userAgent.VERSION,10):5):void 0,goog.userAgent.DOCUMENT_MODE=JSCompiler_inline_result$jscomp$1,goog.userAgent.platform={},goog.userAgent.platform.determineVersion_=function(){if(goog.userAgent.WINDOWS){var e=/Windows NT ([0-9.]+)/.exec(goog.userAgent.getUserAgentString());return e?e[1]:"0"}return goog.userAgent.MAC?(e=/10[_.][0-9_.]+/.exec(goog.userAgent.getUserAgentString()))?e[0].replace(/_/g,"."):"10":goog.userAgent.ANDROID?(e=/Android\\s+([^\\);]+)(\\)|;)/.exec(goog.userAgent.getUserAgentString()))?e[1]:"":goog.userAgent.IPHONE||goog.userAgent.IPAD||goog.userAgent.IPOD?(e=/(?:iPhone|CPU)\\s+OS\\s+(\\S+)/.exec(goog.userAgent.getUserAgentString()))?e[1].replace(/_/g,"."):"":""},goog.userAgent.platform.VERSION=goog.userAgent.platform.determineVersion_(),goog.userAgent.platform.isVersion=function(e){return 0<=goog.string.compareVersions(goog.userAgent.platform.VERSION,e)},goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_();var lf={Capability:function(){this.legacySafari_=goog.labs.userAgent.browser.isSafari()&&!goog.userAgent.isVersionOrHigher(10)||(goog.userAgent.product.IPAD||goog.userAgent.product.IPHONE)&&!goog.userAgent.platform.isVersion(10),this.indexedDb=!(this.legacySafari_||goog.userAgent.product.IE&&!goog.userAgent.isVersionOrHigher(10)),!goog.userAgent.product.IE||goog.userAgent.isVersionOrHigher(11),this.webSql=goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isSafari(),this.nativeMap=goog.isDef(window.Map)&&goog.isDef(window.Map.prototype.values)&&goog.isDef(window.Map.prototype.forEach)&&!this.legacySafari_,this.nativeSet=goog.isDef(window.Set)&&goog.isDef(window.Set.prototype.values)&&goog.isDef(window.Set.prototype.forEach)&&!this.legacySafari_}};lf.Capability.get=function(){return goog.isDef(lf.Capability.instance_)||(lf.Capability.instance_=new lf.Capability),lf.Capability.instance_},lf.Flags={},lf.Flags.MEMORY_ONLY=!1,lf.Flags.NATIVE_ES6=!1,lf.structs={},lf.structs.map={},$jscomp.scope.detectUseNative=function(){return lf.Flags.NATIVE_ES6||lf.Capability.get().nativeMap},lf.structs.MapPolyFill_=function(){this.map_=new goog.structs.Map,Object.defineProperty(this,"size",{get:function(){return this.map_.getCount()}})},lf.structs.MapPolyFill_.prototype.clear=function(){this.map_.clear()},goog.exportProperty(lf.structs.MapPolyFill_.prototype,"clear",lf.structs.MapPolyFill_.prototype.clear),lf.structs.MapPolyFill_.prototype.delete=function(e){return this.map_.remove(e)},goog.exportProperty(lf.structs.MapPolyFill_.prototype,"delete",lf.structs.MapPolyFill_.prototype.delete),lf.structs.MapPolyFill_.prototype.forEach=function(e,t){return this.map_.forEach(e,t)},goog.exportProperty(lf.structs.MapPolyFill_.prototype,"forEach",lf.structs.MapPolyFill_.prototype.forEach),lf.structs.MapPolyFill_.prototype.get=function(e){return this.map_.get(e)},goog.exportProperty(lf.structs.MapPolyFill_.prototype,"get",lf.structs.MapPolyFill_.prototype.get),lf.structs.MapPolyFill_.prototype.has=function(e){return this.map_.containsKey(e)},goog.exportProperty(lf.structs.MapPolyFill_.prototype,"has",lf.structs.MapPolyFill_.prototype.has),lf.structs.MapPolyFill_.prototype.set=function(e,t){return this.map_.set(e,t)},goog.exportProperty(lf.structs.MapPolyFill_.prototype,"set",lf.structs.MapPolyFill_.prototype.set),$jscomp.scope.USE_NATIVE=(0,$jscomp.scope.detectUseNative)(),lf.structs.map.create=function(){return $jscomp.scope.USE_NATIVE?new window.Map:new lf.structs.MapPolyFill_},lf.structs.map.keys=function(e){if(e instanceof lf.structs.MapPolyFill_)return e.map_.getKeys();var t=0,r=Array(e.size);return e.forEach(function(e,o){r[t++]=o}),r},lf.structs.map.values=function(e){if(e instanceof lf.structs.MapPolyFill_)return e.map_.getValues();var t=0,r=Array(e.size);return e.forEach(function(e){r[t++]=e}),r},lf.Row=function(e,t){this.id_=e,this.payload_=t||this.defaultPayload()},lf.Row.nextId_=0,lf.Row.DUMMY_ID=-1,lf.Row.getNextId=function(){return lf.Row.nextId_++},lf.Row.setNextId=function(e){lf.Row.nextId_=e},lf.Row.setNextIdIfGreater=function(e){lf.Row.nextId_=Math.max(lf.Row.nextId_,e)},lf.Row.prototype.id=function(){return this.id_},lf.Row.prototype.assignRowId=function(e){this.id_=e},lf.Row.prototype.defaultPayload=function(){return{}},lf.Row.prototype.toDbPayload=function(){return this.payload_},lf.Row.prototype.serialize=function(){return{id:this.id_,value:this.toDbPayload()}},lf.Row.prototype.keyOfIndex=function(e){return"#"==e.substr(-1)?this.id_:null},lf.Row.deserialize=function(e){return new lf.Row(e.id,e.value)},lf.Row.create=function(e){return new lf.Row(lf.Row.getNextId(),e||{})},lf.Row.binToHex=function(e){if(!goog.isDefAndNotNull(e))return null;for(var t=new Uint8Array(e),r="",o=0;o<t.length;++o){var n=t[o].toString(16);r=r+(2>n.length?"0"+n:n)}return r},lf.Row.hexToBin=function(e){if(!goog.isDefAndNotNull(e)||""==e)return null;0!=e.length%2&&(e="0"+e);for(var t=new ArrayBuffer(e.length/2),r=new Uint8Array(t),o=0,n=0;o<e.length;o+=2)r[n++]=parseInt(e.substr(o,2),16);return t},lf.TransactionType={},goog.exportSymbol("lf.TransactionType",lf.TransactionType),lf.TransactionType.READ_ONLY=0,goog.exportProperty(lf.TransactionType,"READ_ONLY",lf.TransactionType.READ_ONLY),lf.TransactionType.READ_WRITE=1,goog.exportProperty(lf.TransactionType,"READ_WRITE",lf.TransactionType.READ_WRITE),lf.Transaction=function(){},lf.TransactionStats=function(e,t,r,o,n){this.success_=e,this.insertedRowCount_=t,this.updatedRowCount_=r,this.deletedRowCount_=o,this.changedTableCount_=n},goog.exportSymbol("lf.TransactionStats",lf.TransactionStats),lf.TransactionStats.prototype.success=function(){return this.success_},goog.exportProperty(lf.TransactionStats.prototype,"success",lf.TransactionStats.prototype.success),lf.TransactionStats.prototype.insertedRowCount=function(){return this.insertedRowCount_},goog.exportProperty(lf.TransactionStats.prototype,"insertedRowCount",lf.TransactionStats.prototype.insertedRowCount),lf.TransactionStats.prototype.updatedRowCount=function(){return this.updatedRowCount_},goog.exportProperty(lf.TransactionStats.prototype,"updatedRowCount",lf.TransactionStats.prototype.updatedRowCount),lf.TransactionStats.prototype.deletedRowCount=function(){return this.deletedRowCount_},goog.exportProperty(lf.TransactionStats.prototype,"deletedRowCount",lf.TransactionStats.prototype.deletedRowCount),lf.TransactionStats.prototype.changedTableCount=function(){return this.changedTableCount_},goog.exportProperty(lf.TransactionStats.prototype,"changedTableCount",lf.TransactionStats.prototype.changedTableCount),lf.TransactionStats.getDefault=function(){return new lf.TransactionStats(!1,0,0,0,0)},lf.backstore={},lf.backstore.TableType={DATA:0,INDEX:1},lf.backstore.Tx=function(){},lf.backstore.BaseTx=function(e,t){this.txType=e,this.journal_=t||null,this.resolver=goog.Promise.withResolver(),this.success_=!1,this.stats_=null},lf.backstore.BaseTx.prototype.commit=function(){return(this.txType==lf.TransactionType.READ_ONLY?this.commitInternal():this.commitReadWrite_()).then(function(e){return this.success_=!0,e}.bind(this))},lf.backstore.BaseTx.prototype.commitReadWrite_=function(){try{this.journal_.checkDeferredConstraints()}catch(e){return goog.Promise.reject(e)}return this.mergeIntoBackstore_().then(function(e){return this.journal_.commit(),e}.bind(this))},lf.backstore.BaseTx.prototype.mergeIntoBackstore_=function(){return this.mergeTableChanges_(),this.mergeIndexChanges_(),this.commitInternal()},lf.backstore.BaseTx.prototype.mergeTableChanges_=function(){this.journal_.tableDiffs_.forEach(function(e,t){var r=this.journal_.getScope().get(t),o=this.getTable(r.getName(),r.deserializeRow.bind(r),lf.backstore.TableType.DATA),n=lf.structs.map.values(e.deleted_).map(function(e){return e.id()});0<n.length&&o.remove(n).thenCatch(this.handleError_,this);var i=lf.structs.map.values(e.modified_).map(function(e){return e[1]}).concat(lf.structs.map.values(e.added_));o.put(i).thenCatch(this.handleError_,this)},this)},lf.backstore.BaseTx.prototype.mergeIndexChanges_=function(){this.journal_.getIndexDiff().forEach(function(e){var t=this.getTable(e.getName(),lf.Row.deserialize,lf.backstore.TableType.INDEX);t.remove([]),t.put(e.serialize())},this)},lf.backstore.BaseTx.prototype.handleError_=function(e){this.resolver.reject(e)},lf.backstore.BaseTx.prototype.stats=function(){if(goog.isNull(this.stats_))if(this.success_)if(this.txType==lf.TransactionType.READ_ONLY)this.stats_=new lf.TransactionStats(!0,0,0,0,0);else{var e=this.journal_.tableDiffs_,t=0,r=0,o=0,n=0;e.forEach(function(e){n++,t+=e.added_.size,o+=e.modified_.size,r+=e.deleted_.size}),this.stats_=new lf.TransactionStats(!0,t,o,r,n)}else this.stats_=lf.TransactionStats.getDefault();return this.stats_},lf.service={},lf.service.ServiceId=function(e){this.serviceId_=e},lf.service.ServiceId.prototype.toString=function(){return this.serviceId_},lf.service.BACK_STORE=new lf.service.ServiceId("backstore"),lf.service.CACHE=new lf.service.ServiceId("cache"),lf.service.INDEX_STORE=new lf.service.ServiceId("indexstore"),lf.service.QUERY_ENGINE=new lf.service.ServiceId("engine"),lf.service.RUNNER=new lf.service.ServiceId("runner"),lf.service.OBSERVER_REGISTRY=new lf.service.ServiceId("observerregistry"),lf.service.SCHEMA=new lf.service.ServiceId("schema"),lf.Table=function(){},goog.structs.Collection=function(){},goog.structs.getCount=function(e){return e.getCount&&"function"==typeof e.getCount?e.getCount():goog.isArrayLike(e)||goog.isString(e)?e.length:goog.object.getCount(e)},goog.structs.getValues=function(e){if(e.getValues&&"function"==typeof e.getValues)return e.getValues();if(goog.isString(e))return e.split("");if(goog.isArrayLike(e)){for(var t=[],r=e.length,o=0;o<r;o++)t.push(e[o]);return t}return goog.object.getValues(e)},goog.structs.getKeys=function(e){if(e.getKeys&&"function"==typeof e.getKeys)return e.getKeys();if(!e.getValues||"function"!=typeof e.getValues){if(goog.isArrayLike(e)||goog.isString(e)){for(var t=[],r=e.length,o=0;o<r;o++)t.push(o);return t}return goog.object.getKeys(e)}},goog.structs.contains=function(e,t){return e.contains&&"function"==typeof e.contains?e.contains(t):e.containsValue&&"function"==typeof e.containsValue?e.containsValue(t):goog.isArrayLike(e)||goog.isString(e)?goog.array.contains(e,t):goog.object.containsValue(e,t)},goog.structs.isEmpty=function(e){return e.isEmpty&&"function"==typeof e.isEmpty?e.isEmpty():goog.isArrayLike(e)||goog.isString(e)?goog.array.isEmpty(e):goog.object.isEmpty(e)},goog.structs.clear=function(e){e.clear&&"function"==typeof e.clear?e.clear():goog.isArrayLike(e)?goog.array.clear(e):goog.object.clear(e)},goog.structs.forEach=function(e,t,r){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,r);else if(goog.isArrayLike(e)||goog.isString(e))goog.array.forEach(e,t,r);else for(var o=goog.structs.getKeys(e),n=goog.structs.getValues(e),i=n.length,a=0;a<i;a++)t.call(r,n[a],o&&o[a],e)},goog.structs.filter=function(e,t,r){if("function"==typeof e.filter)return e.filter(t,r);if(goog.isArrayLike(e)||goog.isString(e))return goog.array.filter(e,t,r);var o,n=goog.structs.getKeys(e),i=goog.structs.getValues(e),a=i.length;if(n){o={};for(var s=0;s<a;s++)t.call(r,i[s],n[s],e)&&(o[n[s]]=i[s])}else for(o=[],s=0;s<a;s++)t.call(r,i[s],void 0,e)&&o.push(i[s]);return o},goog.structs.map=function(e,t,r){if("function"==typeof e.map)return e.map(t,r);if(goog.isArrayLike(e)||goog.isString(e))return goog.array.map(e,t,r);var o,n=goog.structs.getKeys(e),i=goog.structs.getValues(e),a=i.length;if(n){o={};for(var s=0;s<a;s++)o[n[s]]=t.call(r,i[s],n[s],e)}else for(o=[],s=0;s<a;s++)o[s]=t.call(r,i[s],void 0,e);return o},goog.structs.some=function(e,t,r){if("function"==typeof e.some)return e.some(t,r);if(goog.isArrayLike(e)||goog.isString(e))return goog.array.some(e,t,r);for(var o=goog.structs.getKeys(e),n=goog.structs.getValues(e),i=n.length,a=0;a<i;a++)if(t.call(r,n[a],o&&o[a],e))return!0;return!1},goog.structs.every=function(e,t,r){if("function"==typeof e.every)return e.every(t,r);if(goog.isArrayLike(e)||goog.isString(e))return goog.array.every(e,t,r);for(var o=goog.structs.getKeys(e),n=goog.structs.getValues(e),i=n.length,a=0;a<i;a++)if(!t.call(r,n[a],o&&o[a],e))return!1;return!0},goog.structs.Set=function(e){this.map_=new goog.structs.Map,e&&this.addAll(e)},goog.structs.Set.getKey_=function(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+goog.getUid(e):t.substr(0,1)+e},goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()},goog.structs.Set.prototype.add=function(e){this.map_.set(goog.structs.Set.getKey_(e),e)},goog.structs.Set.prototype.addAll=function(e){for(var t=goog.structs.getValues(e),r=t.length,o=0;o<r;o++)this.add(t[o])},goog.structs.Set.prototype.removeAll=function(e){for(var t=goog.structs.getValues(e),r=t.length,o=0;o<r;o++)this.remove(t[o])},goog.structs.Set.prototype.remove=function(e){return this.map_.remove(goog.structs.Set.getKey_(e))},goog.structs.Set.prototype.clear=function(){this.map_.clear()},goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()},goog.structs.Set.prototype.contains=function(e){return this.map_.containsKey(goog.structs.Set.getKey_(e))},goog.structs.Set.prototype.difference=function(e){var t=this.clone();return t.removeAll(e),t},goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()},goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)},goog.structs.Set.prototype.equals=function(e){return this.getCount()==goog.structs.getCount(e)&&this.isSubsetOf(e)},goog.structs.Set.prototype.isSubsetOf=function(e){var t=goog.structs.getCount(e);return!(this.getCount()>t)&&(!(e instanceof goog.structs.Set)&&5<t&&(e=new goog.structs.Set(e)),goog.structs.every(this,function(t){return goog.structs.contains(e,t)}))},goog.structs.Set.prototype.__iterator__=function(){return this.map_.__iterator__(!1)},lf.structs.set={},$jscomp.scope.detectUseNative$jscomp$1=function(){return lf.Flags.NATIVE_ES6||lf.Capability.get().nativeSet},lf.structs.SetPolyFill_=function(e){this.set_=new goog.structs.Set(e),Object.defineProperty(this,"size",{get:function(){return this.set_.getCount()}})},lf.structs.SetPolyFill_.prototype.add=function(e){this.set_.add(e)},goog.exportProperty(lf.structs.SetPolyFill_.prototype,"add",lf.structs.SetPolyFill_.prototype.add),lf.structs.SetPolyFill_.prototype.clear=function(){this.set_.clear()},goog.exportProperty(lf.structs.SetPolyFill_.prototype,"clear",lf.structs.SetPolyFill_.prototype.clear),lf.structs.SetPolyFill_.prototype.delete=function(e){return this.set_.remove(e)},goog.exportProperty(lf.structs.SetPolyFill_.prototype,"delete",lf.structs.SetPolyFill_.prototype.delete),lf.structs.SetPolyFill_.prototype.forEach=function(e,t){this.set_.getValues().forEach(e,t)},lf.structs.SetPolyFill_.prototype.has=function(e){return this.set_.contains(e)},goog.exportProperty(lf.structs.SetPolyFill_.prototype,"has",lf.structs.SetPolyFill_.prototype.has),$jscomp.scope.USE_NATIVE$jscomp$1=(0,$jscomp.scope.detectUseNative$jscomp$1)(),lf.structs.set.create=function(e){return $jscomp.scope.USE_NATIVE$jscomp$1?goog.isDef(e)?new window.Set(e):new window.Set:new lf.structs.SetPolyFill_(e)},lf.structs.set.values=function(e){if(e instanceof lf.structs.SetPolyFill_)return e.set_.getValues();var t=0,r=Array(e.size);return e.forEach(function(e){r[t++]=e}),r},lf.structs.set.diff=function(e,t){if(e instanceof lf.structs.SetPolyFill_){var r=new lf.structs.SetPolyFill_;r.set_=e.set_.difference(t.set_)}else r=lf.structs.set.create(),lf.structs.set.values(e).forEach(function(e){t.has(e)||r.add(e)});return r},lf.structs.set.isSubset=function(e,t){if(t.size>e.size)return!1;var r=!0;return t.forEach(function(t){r=r&&e.has(t)}),r},lf.structs.set.equals=function(e,t){return e.size==t.size&&lf.structs.set.isSubset(e,t)},lf.backstore.Page=function(e,t){this.id_=e,this.payload_=t||{}},lf.backstore.Page.BUNDLE_EXPONENT=9,lf.backstore.Page.toPageIds=function(e){var t=lf.structs.set.create();return e.forEach(function(e){t.add(lf.backstore.Page.toPageId(e))}),lf.structs.set.values(t)},lf.backstore.Page.toPageId=function(e){return e>>lf.backstore.Page.BUNDLE_EXPONENT},lf.backstore.Page.getPageRange=function(e){return[e<<lf.backstore.Page.BUNDLE_EXPONENT,(e+1<<lf.backstore.Page.BUNDLE_EXPONENT)-1]},lf.backstore.Page.prototype.getId=function(){return this.id_},lf.backstore.Page.prototype.setRows=function(e){e.forEach(function(e){this.payload_[e.id()]=e.serialize()},this)},lf.backstore.Page.prototype.removeRows=function(e){e.forEach(function(e){delete this.payload_[e]},this)},lf.backstore.Page.prototype.serialize=function(){return{id:this.id_,value:JSON.stringify(this.payload_)}},lf.backstore.Page.deserialize=function(e){return new lf.backstore.Page(e.id,JSON.parse(e.value))},lf.backstore.BundledObjectStore=function(e,t,r){this.store_=e,this.deserializeFn_=t,this.retrievePageFn_=r},lf.backstore.BundledObjectStore.prototype.get=function(e){if(0==e.length)return this.getAll_();var t=this.deserializeFn_;return this.getPagesByRowIds_(e).then(function(r){return e.map(function(e){var o=r.get(lf.backstore.Page.toPageId(e));return goog.asserts.assert(o,"Containing page is empty"),t(o.payload_[e])})})},lf.backstore.BundledObjectStore.prototype.getPagesByRowIds_=function(e){var t=lf.structs.map.create(),r=goog.Promise.withResolver(),o=lf.backstore.Page.toPageIds(e).map(function(e){return new goog.Promise(function(r,o){var n;try{n=this.store_.get(e)}catch(i){return void o(i)}n.onerror=o,n.onsuccess=function(e){var o=lf.backstore.Page.deserialize(e.target.result);t.set(o.getId(),o),r()}},this)},this);return goog.Promise.all(o).then(function(){r.resolve(t)}),r.promise},lf.backstore.BundledObjectStore.prototype.getAll_=function(){return new goog.Promise(function(e,t){var r,o=[];try{r=this.store_.openCursor()}catch(n){return void t(n)}r.onerror=t,r.onsuccess=function(){var t=r.result;if(t){var n,i=lf.backstore.Page.deserialize(t.value).payload_;for(n in i)o.push(this.deserializeFn_(i[n]));t.continue()}else e(o)}.bind(this)},this)},lf.backstore.BundledObjectStore.prototype.performWriteOp_=function(e){return new goog.Promise(function(t,r){var o;try{o=e()}catch(n){return void r(n)}o.onsuccess=t,o.onerror=r},this)},lf.backstore.BundledObjectStore.prototype.put=function(e){if(0==e.length)return goog.Promise.resolve();var t=lf.structs.map.create();e.forEach(function(e){var r=lf.backstore.Page.toPageId(e.id()),o=t.get(r)||null;goog.isNull(o)&&(o=this.retrievePageFn_(this.store_.name,r)),o.setRows([e]),t.set(r,o)},this);var r=lf.structs.map.values(t).map(function(e){return this.performWriteOp_(function(){return this.store_.put(e.serialize())}.bind(this))},this);return goog.Promise.all(r)},lf.backstore.BundledObjectStore.prototype.remove=function(e){if(0==e.length)return this.performWriteOp_(function(){return this.store_.clear()}.bind(this));var t=lf.structs.map.create();e.forEach(function(e){var r=lf.backstore.Page.toPageId(e),o=t.get(r)||null;goog.isNull(o)&&(o=this.retrievePageFn_(this.store_.name,r)),o.removeRows([e]),t.set(r,o)},this);var r=lf.structs.map.values(t).map(function(e){return this.performWriteOp_(function(){return 0==Object.keys(e.payload_).length?this.store_.delete(e.getId()):this.store_.put(e.serialize())}.bind(this))},this);return goog.Promise.all(r)},lf.backstore.BundledObjectStore.getDataTablePage_=function(e,t,r){var o=e.getService(lf.service.CACHE),n=lf.backstore.Page.getPageRange(r),i=o.getRange(t,n[0],n[1]),a=new lf.backstore.Page(r);return a.setRows(i),a},lf.backstore.BundledObjectStore.getIndexTablePage_=function(e,t){return new lf.backstore.Page(t)},lf.backstore.BundledObjectStore.forTableType=function(e,t,r,o){var n=o==lf.backstore.TableType.DATA?goog.partial(lf.backstore.BundledObjectStore.getDataTablePage_,e):lf.backstore.BundledObjectStore.getIndexTablePage_;return new lf.backstore.BundledObjectStore(t,r,n)},lf.index={},lf.index.Favor={RHS:-1,TIE:0,LHS:1},lf.index.Comparator=function(){},lf.index.Index=function(){},lf.cache={},lf.cache.InMemoryUpdater=function(e){this.cache_=e.getService(lf.service.CACHE),this.indexStore_=e.getService(lf.service.INDEX_STORE),this.schema_=e.getService(lf.service.SCHEMA)},lf.cache.InMemoryUpdater.prototype.update=function(e){e.forEach(function(e){this.updateIndicesForDiff_(e),this.updateCacheForDiff_(e)},this)},lf.cache.InMemoryUpdater.prototype.updateCacheForDiff_=function(e){var t=e.getName();e.deleted_.forEach(function(e,r){this.cache_.remove(t,r)},this),e.added_.forEach(function(e){this.cache_.set(t,e)},this),e.modified_.forEach(function(e){this.cache_.set(t,e[1])},this)},lf.cache.InMemoryUpdater.prototype.updateIndicesForDiff_=function(e){var t=this.schema_.table(e.getName());e.getAsModifications().forEach(function(e){this.updateTableIndicesForRow(t,e)},this)},lf.cache.InMemoryUpdater.prototype.updateTableIndicesForRow=function(e,t){var r=this.indexStore_.getTableIndices(e.getName()),o=0;r.forEach(function(e){try{this.updateTableIndexForRow_(e,t),o++}catch(n){throw r.slice(0,o).forEach(function(e){this.updateTableIndexForRow_(e,[t[1],t[0]])},this),n}},this)},lf.cache.InMemoryUpdater.prototype.updateTableIndexForRow_=function(e,t){var r=goog.isNull(t[1])?void 0:t[1].keyOfIndex(e.getName()),o=goog.isNull(t[0])?void 0:t[0].keyOfIndex(e.getName());if(!goog.isDef(o)&&goog.isDef(r))e.add(r,t[1].id());else if(goog.isDef(o)&&goog.isDef(r)){if(goog.isNull(r)||goog.isNull(o)){if(r==o)return}else if(e.comparator().compare(o,r)==lf.index.Favor.TIE)return;e.add(r,t[1].id()),e.remove(o,t[0].id())}else goog.isDef(o)&&!goog.isDef(r)&&e.remove(o,t[0].id())},lf.type={},lf.ConstraintAction={},goog.exportSymbol("lf.ConstraintAction",lf.ConstraintAction),lf.ConstraintAction.RESTRICT=0,goog.exportProperty(lf.ConstraintAction,"RESTRICT",lf.ConstraintAction.RESTRICT),lf.ConstraintAction.CASCADE=1,goog.exportProperty(lf.ConstraintAction,"CASCADE",lf.ConstraintAction.CASCADE),lf.ConstraintTiming={},goog.exportSymbol("lf.ConstraintTiming",lf.ConstraintTiming),lf.ConstraintTiming.IMMEDIATE=0,goog.exportProperty(lf.ConstraintTiming,"IMMEDIATE",lf.ConstraintTiming.IMMEDIATE),lf.ConstraintTiming.DEFERRABLE=1,goog.exportProperty(lf.ConstraintTiming,"DEFERRABLE",lf.ConstraintTiming.DEFERRABLE),lf.Order={},goog.exportSymbol("lf.Order",lf.Order),lf.Order.DESC=0,goog.exportProperty(lf.Order,"DESC",lf.Order.DESC),lf.Order.ASC=1,goog.exportProperty(lf.Order,"ASC",lf.Order.ASC),lf.Type={},goog.exportSymbol("lf.Type",lf.Type),lf.Type.ARRAY_BUFFER=0,goog.exportProperty(lf.Type,"ARRAY_BUFFER",lf.Type.ARRAY_BUFFER),lf.Type.BOOLEAN=1,goog.exportProperty(lf.Type,"BOOLEAN",lf.Type.BOOLEAN),lf.Type.DATE_TIME=2,goog.exportProperty(lf.Type,"DATE_TIME",lf.Type.DATE_TIME),lf.Type.INTEGER=3,goog.exportProperty(lf.Type,"INTEGER",lf.Type.INTEGER),lf.Type.NUMBER=4,goog.exportProperty(lf.Type,"NUMBER",lf.Type.NUMBER),lf.Type.STRING=5,goog.exportProperty(lf.Type,"STRING",lf.Type.STRING),lf.Type.OBJECT=6,goog.exportProperty(lf.Type,"OBJECT",lf.Type.OBJECT),lf.type.DEFAULT_VALUES={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null},goog.exportSymbol("lf.type.DEFAULT_VALUES",lf.type.DEFAULT_VALUES),lf.Exception=function(e,t){if(this.code=e,this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+e,1<arguments.length)for(var r=1;r<=Math.min(4,arguments.length-1);++r)this.message+="&p"+(r-1)+"="+encodeURIComponent(String(arguments[r]).slice(0,64))},goog.inherits(lf.Exception,Error),lf.structs.MapSet=function(){this.map_=lf.structs.map.create(),this.size=0},lf.structs.MapSet.prototype.has=function(e){return this.map_.has(e)},lf.structs.MapSet.prototype.set=function(e,t){var r=this.map_.get(e)||null;return goog.isNull(r)&&(r=lf.structs.set.create(),this.map_.set(e,r)),r.has(t)||(r.add(t),this.size++),this},lf.structs.MapSet.prototype.setMany=function(e,t){var r=this.map_.get(e)||null;return goog.isNull(r)&&(r=lf.structs.set.create(),this.map_.set(e,r)),t.forEach(function(e){r.has(e)||(r.add(e),this.size++)},this),this},lf.structs.MapSet.prototype.merge=function(e){return e.keys().forEach(function(t){var r=e.get(t);this.setMany(t,r)},this),this},lf.structs.MapSet.prototype.delete=function(e,t){var r=this.map_.get(e)||null;if(goog.isNull(r))return!1;var o=r.delete(t);return o&&(--this.size,0==r.size&&this.map_.delete(e)),o},lf.structs.MapSet.prototype.get=function(e){var t=this.map_.get(e)||null;return goog.isNull(t)?null:lf.structs.set.values(t)},lf.structs.MapSet.prototype.clear=function(){this.map_.clear(),this.size=0},lf.structs.MapSet.prototype.keys=function(){return lf.structs.map.keys(this.map_)},lf.structs.MapSet.prototype.values=function(){var e=[];return this.map_.forEach(function(t){e.push.apply(e,lf.structs.set.values(t))}),e},lf.cache.ConstraintChecker=function(e){this.indexStore_=e.getService(lf.service.INDEX_STORE),this.schema_=e.getService(lf.service.SCHEMA),this.cache_=e.getService(lf.service.CACHE),this.foreignKeysParentIndices_=null},lf.cache.ConstraintChecker.prototype.findExistingRowIdInPkIndex=function(e,t){var r=e.constraint_.primaryKey_;return goog.isNull(r)?null:this.findExistingRowIdInIndex_(r,t)},lf.cache.ConstraintChecker.prototype.findExistingRowIdInIndex_=function(e,t){var r=e.getNormalizedName(),o=t.keyOfIndex(r),n=this.indexStore_.get(r).get(o);return 0==n.length?null:n[0]},lf.cache.ConstraintChecker.prototype.checkNotNullable=function(e,t){var r=e.constraint_.notNullable_;t.forEach(function(e){r.forEach(function(t){if(!goog.isDefAndNotNull(e.payload_[t.getName()]))throw new lf.Exception(202,t.getNormalizedName())},this)},this)},lf.cache.ConstraintChecker.prototype.checkReferredKeys_=function(e,t,r){e.constraint_.foreignKeys_.forEach(function(e){e.timing==r&&this.checkReferredKey_(e,t)},this)},lf.cache.ConstraintChecker.prototype.checkReferredKey_=function(e,t){var r=this.getParentIndex_(e);t.forEach(function(t){if(lf.cache.ConstraintChecker.didColumnValueChange_(t[0],t[1],e.name)){var o=t[1].keyOfIndex(e.name);if(!goog.isNull(o)&&!r.containsKey(o))throw new lf.Exception(203,e.name)}},this)},lf.cache.ConstraintChecker.prototype.findParentIndex_=function(e){var t=this.schema_.table(e.parentTable)[e.parentColumn].getIndex();return this.indexStore_.get(t.getNormalizedName())},lf.cache.ConstraintChecker.prototype.getParentIndex_=function(e){goog.isNull(this.foreignKeysParentIndices_)&&(this.foreignKeysParentIndices_=lf.structs.map.create());var t=this.foreignKeysParentIndices_.get(e.name)||null;return goog.isNull(t)&&(t=this.findParentIndex_(e),this.foreignKeysParentIndices_.set(e.name,t)),t},lf.cache.ConstraintChecker.didColumnValueChange_=function(e,t,r){return(goog.isNull(e)?!goog.isNull(t):goog.isNull(t))||e.keyOfIndex(r)!=t.keyOfIndex(r)},lf.cache.ConstraintChecker.prototype.checkReferringKeys_=function(e,t,r,o){var n=this.schema_.info().getReferencingForeignKeys(e.getName(),o);goog.isNull(n)||0!=(n=n.filter(function(e){return e.timing==r})).length&&this.loopThroughReferringRows_(n,t,function(e,t,r){if(t.containsKey(r))throw new lf.Exception(203,e.name)})},lf.cache.ConstraintChecker.prototype.findReferringRowIds_=function(e,t){var r=this.schema_.info().getReferencingForeignKeys(e.getName(),lf.ConstraintAction.CASCADE);if(goog.isNull(r))return null;var o=new lf.structs.MapSet;return this.loopThroughReferringRows_(r,t,function(e,t,r){var n=t.get(r);0<n.length&&o.setMany(e.childTable,n)}),o},lf.cache.ConstraintChecker.prototype.detectCascadeUpdates=function(e,t,r){var o=new lf.structs.MapSet;return this.loopThroughReferringRows_(r,t,function(e,t,r,n){t.get(r).forEach(function(t){o.set(t,{fkSpec:e,originalUpdatedRow:n[1]})})}),o},lf.cache.ConstraintChecker.prototype.loopThroughReferringRows_=function(e,t,r){e.forEach(function(e){var o=this.indexStore_.get(e.name),n=this.getParentIndex_(e);t.forEach(function(t){if(lf.cache.ConstraintChecker.didColumnValueChange_(t[0],t[1],n.getName())){var i=t[0].keyOfIndex(n.getName());r(e,o,i,t)}},this)},this)},lf.cache.ConstraintChecker.prototype.checkForeignKeysForInsert=function(e,t,r){if(0!=t.length){var o=t.map(function(e){return[null,e]});this.checkReferredKeys_(e,o,r)}},lf.cache.ConstraintChecker.prototype.checkForeignKeysForUpdate=function(e,t,r){0!=t.length&&(this.checkReferredKeys_(e,t,r),this.checkReferringKeys_(e,t,r,lf.ConstraintAction.RESTRICT))},lf.cache.ConstraintChecker.prototype.checkForeignKeysForDelete=function(e,t,r){if(0!=t.length){var o=t.map(function(e){return[e,null]});this.checkReferringKeys_(e,o,r,lf.ConstraintAction.RESTRICT)}},lf.cache.ConstraintChecker.prototype.detectCascadeDeletion=function(e,t){var r={tableOrder:[],rowIdsPerTable:new lf.structs.MapSet},o=new lf.structs.MapSet;o.setMany(e.getName(),t.map(function(e){return e.id()}));do{var n=new lf.structs.MapSet;o.keys().forEach(function(e){var t=this.schema_.table(e),i=o.get(e).map(function(e){return[this.cache_.get(e),null]},this),a=this.findReferringRowIds_(t,i);goog.isNull(a)||(r.tableOrder.unshift.apply(r.tableOrder,a.keys()),n.merge(a))},this),o=n,r.rowIdsPerTable.merge(o)}while(0<o.size);return r},lf.cache.TableDiff=function(e){this.added_=lf.structs.map.create(),this.modified_=lf.structs.map.create(),this.deleted_=lf.structs.map.create(),this.name_=e},lf.cache.TableDiff.prototype.getName=function(){return this.name_},lf.cache.TableDiff.prototype.add=function(e){if(this.deleted_.has(e.id())){var t=[this.deleted_.get(e.id()),e];this.modified_.set(e.id(),t),this.deleted_.delete(e.id())}else this.added_.set(e.id(),e)},lf.cache.TableDiff.prototype.modify=function(e){var t=e[0],r=e[1];goog.asserts.assert(t.id()==r.id(),"Row ID mismatch between old/new values.");var o=t.id();if(this.added_.has(o))this.added_.set(o,r);else if(this.modified_.has(o)){var n=[this.modified_.get(e[0].id())[0],r];this.modified_.set(o,n)}else this.modified_.set(o,e)},lf.cache.TableDiff.prototype.delete=function(e){if(this.added_.has(e.id()))this.added_.delete(e.id());else if(this.modified_.has(e.id())){var t=this.modified_.get(e.id())[0];this.modified_.delete(e.id()),this.deleted_.set(e.id(),t)}else this.deleted_.set(e.id(),e)},lf.cache.TableDiff.prototype.merge=function(e){e.added_.forEach(function(e){this.add(e)},this),e.modified_.forEach(function(e){this.modify(e)},this),e.deleted_.forEach(function(e){this.delete(e)},this)},lf.cache.TableDiff.prototype.getAsModifications=function(){var e=[];return this.added_.forEach(function(t){e.push([null,t])}),this.modified_.forEach(function(t){e.push(t)}),this.deleted_.forEach(function(t){e.push([t,null])}),e},lf.cache.TableDiff.prototype.toString=function(){return"["+lf.structs.map.keys(this.added_).toString()+"], ["+lf.structs.map.keys(this.modified_).toString()+"], ["+lf.structs.map.keys(this.deleted_).toString()+"]"},lf.cache.TableDiff.prototype.getReverse=function(){var e=new lf.cache.TableDiff(this.name_);return this.added_.forEach(function(t){e.delete(t)}),this.deleted_.forEach(function(t){e.add(t)}),this.modified_.forEach(function(t){e.modify([t[1],t[0]])}),e},lf.cache.TableDiff.prototype.isEmpty=function(){return 0==this.added_.size&&0==this.deleted_.size&&0==this.modified_.size},lf.cache.Journal=function(e,t){this.scope_=lf.structs.map.create(),t.forEach(function(e){this.scope_.set(e.getName(),e)},this),this.schema_=e.getService(lf.service.SCHEMA),this.cache_=e.getService(lf.service.CACHE),this.indexStore_=e.getService(lf.service.INDEX_STORE),this.constraintChecker_=new lf.cache.ConstraintChecker(e),this.inMemoryUpdater_=new lf.cache.InMemoryUpdater(e),this.pendingRollback_=this.terminated_=!1,this.tableDiffs_=lf.structs.map.create()},lf.cache.Journal.prototype.getIndexDiff=function(){var e=lf.structs.map.keys(this.tableDiffs_).map(function(e){return this.scope_.get(e)},this),t=[];return e.forEach(function(e){e.persistentIndex()&&(e.getIndices().forEach(function(e){t.push(this.indexStore_.get(e.getNormalizedName()))},this),t.push(this.indexStore_.get(e.getName()+".#")))},this),t},lf.cache.Journal.prototype.getScope=function(){return this.scope_},lf.cache.Journal.prototype.insert=function(e,t){this.assertJournalWritable_(),this.checkScope_(e),this.constraintChecker_.checkNotNullable(e,t),this.constraintChecker_.checkForeignKeysForInsert(e,t,lf.ConstraintTiming.IMMEDIATE);for(var r=0;r<t.length;r++)this.modifyRow_(e,[null,t[r]])},lf.cache.Journal.prototype.modifyRow_=function(e,t){var r=e.getName(),o=this.tableDiffs_.get(r)||new lf.cache.TableDiff(r);this.tableDiffs_.set(r,o);try{this.inMemoryUpdater_.updateTableIndicesForRow(e,t)}catch(a){throw this.pendingRollback_=!0,a}var n=t[0],i=t[1];goog.isNull(n)&&!goog.isNull(i)?(this.cache_.set(r,i),o.add(i)):goog.isNull(n)||goog.isNull(i)?!goog.isNull(n)&&goog.isNull(i)&&(this.cache_.remove(r,n.id()),o.delete(n)):(this.cache_.set(r,i),o.modify(t))},lf.cache.Journal.prototype.update=function(e,t){this.assertJournalWritable_(),this.checkScope_(e),this.constraintChecker_.checkNotNullable(e,t);var r=t.map(function(e){return[this.cache_.get(e.id()),e]},this);this.updateByCascade_(e,r),this.constraintChecker_.checkForeignKeysForUpdate(e,r,lf.ConstraintTiming.IMMEDIATE),r.forEach(function(t){this.modifyRow_(e,t)},this)},lf.cache.Journal.prototype.insertOrReplace=function(e,t){this.assertJournalWritable_(),this.checkScope_(e),this.constraintChecker_.checkNotNullable(e,t);for(var r=0;r<t.length;r++){var o=t[r],n=null,i=this.constraintChecker_.findExistingRowIdInPkIndex(e,o);if(goog.isDefAndNotNull(i)){n=this.cache_.get(i),o.assignRowId(i);var a=[n,o];this.constraintChecker_.checkForeignKeysForUpdate(e,[a],lf.ConstraintTiming.IMMEDIATE)}else this.constraintChecker_.checkForeignKeysForInsert(e,[o],lf.ConstraintTiming.IMMEDIATE);this.modifyRow_(e,[n,o])}},lf.cache.Journal.prototype.remove=function(e,t){this.assertJournalWritable_(),this.checkScope_(e),this.removeByCascade_(e,t),this.constraintChecker_.checkForeignKeysForDelete(e,t,lf.ConstraintTiming.IMMEDIATE);for(var r=0;r<t.length;r++)this.modifyRow_(e,[t[r],null])},lf.cache.Journal.prototype.updateByCascade_=function(e,t){var r=this.schema_.info().getReferencingForeignKeys(e.getName(),lf.ConstraintAction.CASCADE);if(!goog.isNull(r)){var o=this.constraintChecker_.detectCascadeUpdates(e,t,r);o.keys().forEach(function(e){o.get(e).forEach(function(t){var r=this.schema_.table(t.fkSpec.childTable),o=this.cache_.get(e),n=r.deserializeRow(o.serialize());n.payload_[t.fkSpec.childColumn]=t.originalUpdatedRow.payload_[t.fkSpec.parentColumn],this.modifyRow_(r,[o,n])},this)},this)}},lf.cache.Journal.prototype.removeByCascade_=function(e,t){var r=this.schema_.info().getReferencingForeignKeys(e.getName(),lf.ConstraintAction.CASCADE);if(!goog.isNull(r)){var o=this.constraintChecker_.detectCascadeDeletion(e,t),n=o.rowIdsPerTable;o.tableOrder.forEach(function(e){var t=this.schema_.table(e),r=n.get(e).map(function(e){return this.cache_.get(e)},this);this.constraintChecker_.checkForeignKeysForDelete(t,r,lf.ConstraintTiming.IMMEDIATE),r.forEach(function(e){this.modifyRow_(t,[e,null])},this)},this)}},lf.cache.Journal.prototype.checkDeferredConstraints=function(){this.tableDiffs_.forEach(function(e){var t=this.scope_.get(e.getName());this.constraintChecker_.checkForeignKeysForInsert(t,lf.structs.map.values(e.added_),lf.ConstraintTiming.DEFERRABLE),this.constraintChecker_.checkForeignKeysForDelete(t,lf.structs.map.values(e.deleted_),lf.ConstraintTiming.DEFERRABLE),this.constraintChecker_.checkForeignKeysForUpdate(t,lf.structs.map.values(e.modified_),lf.ConstraintTiming.DEFERRABLE)},this)},lf.cache.Journal.prototype.commit=function(){this.assertJournalWritable_(),this.terminated_=!0},lf.cache.Journal.prototype.assertJournalWritable_=function(){goog.asserts.assert(!this.pendingRollback_,"Attemptted to use journal that needs to be rolled back."),goog.asserts.assert(!this.terminated_,"Attemptted to commit a terminated journal.")},lf.cache.Journal.prototype.rollback=function(){goog.asserts.assert(!this.terminated_,"Attempted to rollback a terminated journal.");var e=lf.structs.map.values(this.tableDiffs_).map(function(e){return e.getReverse()});this.inMemoryUpdater_.update(e),this.terminated_=!0,this.pendingRollback_=!1},lf.cache.Journal.prototype.checkScope_=function(e){if(!this.scope_.has(e.getName()))throw new lf.Exception(106,e.getName())},lf.index.SingleKeyRange=function(e,t,r,o){this.from=e,this.to=t,this.excludeLower=!lf.index.SingleKeyRange.isUnbound(this.from)&&r,this.excludeUpper=!lf.index.SingleKeyRange.isUnbound(this.to)&&o},lf.index.UnboundKey=function(){},lf.index.SingleKeyRange.UNBOUND_VALUE=new lf.index.UnboundKey,lf.index.SingleKeyRange.isUnbound=function(e){return e==lf.index.SingleKeyRange.UNBOUND_VALUE},lf.index.SingleKeyRange.prototype.toString=function(){return(this.excludeLower?"(":"[")+(lf.index.SingleKeyRange.isUnbound(this.from)?"unbound":this.from)+", "+(lf.index.SingleKeyRange.isUnbound(this.to)?"unbound":this.to)+(this.excludeUpper?")":"]")},lf.index.SingleKeyRange.prototype.complement=function(){if(this.isAll())return[];var e=null,t=null;return lf.index.SingleKeyRange.isUnbound(this.from)||(e=new lf.index.SingleKeyRange(lf.index.SingleKeyRange.UNBOUND_VALUE,this.from,!1,!this.excludeLower)),lf.index.SingleKeyRange.isUnbound(this.to)||(t=new lf.index.SingleKeyRange(this.to,lf.index.SingleKeyRange.UNBOUND_VALUE,!this.excludeUpper,!1)),[e,t].filter(function(e){return!goog.isNull(e)})},lf.index.SingleKeyRange.prototype.reverse=function(){return new lf.index.SingleKeyRange(this.to,this.from,this.excludeUpper,this.excludeLower)},lf.index.SingleKeyRange.prototype.overlaps=function(e){var t=lf.index.SingleKeyRange.compareKey_(this.from,e.from,!0,this.excludeLower,e.excludeLower);if(t==lf.index.Favor.TIE)return!0;var r=t==lf.index.Favor.RHS?this:e,o=t==lf.index.Favor.LHS?this:e;return lf.index.SingleKeyRange.isUnbound(r.to)||r.to>o.from||r.to==o.from&&!r.excludeUpper&&!o.excludeLower},lf.index.SingleKeyRange.upperBound=function(e,t){return new lf.index.SingleKeyRange(lf.index.SingleKeyRange.UNBOUND_VALUE,e,!1,t||!1)},lf.index.SingleKeyRange.lowerBound=function(e,t){return new lf.index.SingleKeyRange(e,lf.index.SingleKeyRange.UNBOUND_VALUE,t||!1,!1)},lf.index.SingleKeyRange.only=function(e){return new lf.index.SingleKeyRange(e,e,!1,!1)},lf.index.SingleKeyRange.all=function(){return new lf.index.SingleKeyRange(lf.index.SingleKeyRange.UNBOUND_VALUE,lf.index.SingleKeyRange.UNBOUND_VALUE,!1,!1)},lf.index.SingleKeyRange.prototype.isAll=function(){return lf.index.SingleKeyRange.isUnbound(this.from)&&lf.index.SingleKeyRange.isUnbound(this.to)},lf.index.SingleKeyRange.prototype.isOnly=function(){return this.from==this.to&&!lf.index.SingleKeyRange.isUnbound(this.from)&&!this.excludeLower&&!this.excludeUpper},lf.index.SingleKeyRange.prototype.contains=function(e){var t=lf.index.SingleKeyRange.isUnbound(this.from)||e>this.from||e==this.from&&!this.excludeLower,r=lf.index.SingleKeyRange.isUnbound(this.to)||e<this.to||e==this.to&&!this.excludeUpper;return t&&r},lf.index.SingleKeyRange.prototype.equals=function(e){return this.from==e.from&&this.excludeLower==e.excludeLower&&this.to==e.to&&this.excludeUpper==e.excludeUpper},lf.index.SingleKeyRange.xor=function(e,t){return e?!t:t},lf.index.SingleKeyRange.compareKey_=function(e,t,r,o,n){var i=lf.index.Favor,a=o||!1,s=n||!1,l=function(e){return r?e:e==i.LHS?i.RHS:i.LHS},c=function(){return lf.index.SingleKeyRange.xor(a,s)?l(a?i.LHS:i.RHS):i.TIE};return lf.index.SingleKeyRange.isUnbound(e)?lf.index.SingleKeyRange.isUnbound(t)?c():l(i.RHS):lf.index.SingleKeyRange.isUnbound(t)?l(i.LHS):e<t?i.RHS:e==t?c():i.LHS},lf.index.SingleKeyRange.compare=function(e,t){var r=lf.index.SingleKeyRange.compareKey_(e.from,t.from,!0,e.excludeLower,t.excludeLower);return r==lf.index.Favor.TIE&&(r=lf.index.SingleKeyRange.compareKey_(e.to,t.to,!1,e.excludeUpper,t.excludeUpper)),r},lf.index.SingleKeyRange.getBoundingRange=function(e,t){var r=lf.index.SingleKeyRange.all();if(!lf.index.SingleKeyRange.isUnbound(e.from)&&!lf.index.SingleKeyRange.isUnbound(t.from)){var o=lf.index.SingleKeyRange.compareKey_(e.from,t.from,!0);o!=lf.index.Favor.LHS?(r.from=e.from,r.excludeLower=o!=lf.index.Favor.TIE?e.excludeLower:e.excludeLower&&t.excludeLower):(r.from=t.from,r.excludeLower=t.excludeLower)}return lf.index.SingleKeyRange.isUnbound(e.to)||lf.index.SingleKeyRange.isUnbound(t.to)||((o=lf.index.SingleKeyRange.compareKey_(e.to,t.to,!1))!=lf.index.Favor.RHS?(r.to=e.to,r.excludeUpper=o!=lf.index.Favor.TIE?e.excludeUpper:e.excludeUpper&&t.excludeUpper):(r.to=t.to,r.excludeUpper=t.excludeUpper)),r},lf.index.SingleKeyRange.and=function(e,t){if(!e.overlaps(t))return null;var r,o=lf.index.SingleKeyRange.all(),n=lf.index.SingleKeyRange.compareKey_(e.from,t.from,!0),i=n==lf.index.Favor.TIE?e.excludeLower?e:t:n!=lf.index.Favor.RHS?e:t;return o.from=i.from,o.excludeLower=i.excludeLower,lf.index.SingleKeyRange.isUnbound(e.to)||lf.index.SingleKeyRange.isUnbound(t.to)?r=lf.index.SingleKeyRange.isUnbound(e.to)?t:e:r=(n=lf.index.SingleKeyRange.compareKey_(e.to,t.to,!1))==lf.index.Favor.TIE?e.excludeUpper?e:t:n==lf.index.Favor.RHS?e:t,o.to=r.to,o.excludeUpper=r.excludeUpper,o},lf.index.SingleKeyRange.complement=function(e){if(0==e.length)return[];e.sort(lf.index.SingleKeyRange.compare);for(var t=Array(e.length+1),r=0;r<t.length;r++)t[r]=0==r?lf.index.SingleKeyRange.upperBound(e[r].from,!0):r==t.length-1?lf.index.SingleKeyRange.lowerBound(e[r-1].to,!0):new lf.index.SingleKeyRange(e[r-1].to,e[r].from,!0,!0);return t},lf.index.SingleKeyRangeSet=function(e){this.ranges_=[],goog.isDef(e)&&this.add(e)},lf.index.SingleKeyRangeSet.prototype.toString=function(){return this.ranges_.map(function(e){return e.toString()}).join(",")},lf.index.SingleKeyRangeSet.prototype.containsKey=function(e){return this.ranges_.some(function(t){return t.contains(e)})},lf.index.SingleKeyRangeSet.prototype.getValues=function(){return this.ranges_},lf.index.SingleKeyRangeSet.prototype.add=function(e){if(0!=e.length){var t=this.ranges_.concat(e);if(1==t.length)this.ranges_=t;else{t.sort(lf.index.SingleKeyRange.compare);for(var r=[],o=t[0],n=1;n<t.length;++n)o.overlaps(t[n])?o=lf.index.SingleKeyRange.getBoundingRange(o,t[n]):(r.push(o),o=t[n]);r.push(o),this.ranges_=r}}},lf.index.SingleKeyRangeSet.prototype.equals=function(e){return this.ranges_.length==e.ranges_.length&&(0==this.ranges_.length||this.ranges_.every(function(t,r){return t.equals(e.ranges_[r])}))},lf.index.SingleKeyRangeSet.prototype.getBoundingRange=function(){if(1>=this.ranges_.length)return 0==this.ranges_.length?null:this.ranges_[0];var e=this.ranges_.length-1;return lf.index.SingleKeyRange.getBoundingRange(this.ranges_[0],this.ranges_[e])},lf.index.SingleKeyRangeSet.intersect=function(e,t){var r=e.getValues().map(function(e){return t.getValues().map(function(t){return lf.index.SingleKeyRange.and(e,t)})}),o=[];return r.forEach(function(e){o=o.concat(e)}),new lf.index.SingleKeyRangeSet(o.filter(function(e){return!goog.isNull(e)}))},lf.proc={},lf.proc.Relation=function(e,t){this.entries=e,this.tables_=lf.structs.set.create(t),this.aggregationResults_=null},lf.proc.Relation.prototype.isCompatible=function(e){return lf.structs.set.equals(this.tables_,e.tables_)},lf.proc.Relation.assertCompatible_=function(e,t){goog.asserts.assert(e.isCompatible(t),"Intersection/union operations only apply to compatible relations.")},lf.proc.Relation.prototype.getTables=function(){return lf.structs.set.values(this.tables_)},lf.proc.Relation.prototype.isPrefixApplied=function(){return 1<this.tables_.size},lf.proc.Relation.prototype.getPayloads=function(){return this.entries.map(function(e){return e.row.payload_})},lf.proc.Relation.prototype.getRowIds=function(){return this.entries.map(function(e){return e.row.id()})},lf.proc.Relation.prototype.setAggregationResult=function(e,t){goog.isNull(this.aggregationResults_)&&(this.aggregationResults_=lf.structs.map.create()),this.aggregationResults_.set(e.getNormalizedName(),t)},lf.proc.Relation.prototype.getAggregationResult=function(e){goog.asserts.assert(!goog.isNull(this.aggregationResults_),"getAggregationResult called before any results have been calculated.");var t=this.aggregationResults_.get(e.getNormalizedName());return goog.asserts.assert(goog.isDef(t),"Could not find result for "+e.getNormalizedName()),t},lf.proc.Relation.prototype.hasAggregationResult=function(e){return!goog.isNull(this.aggregationResults_)&&this.aggregationResults_.has(e.getNormalizedName())},lf.proc.Relation.emptyRelation_=null,lf.proc.Relation.createEmpty=function(){return goog.isNull(lf.proc.Relation.emptyRelation_)&&(lf.proc.Relation.emptyRelation_=new lf.proc.Relation([],[])),lf.proc.Relation.emptyRelation_},lf.proc.Relation.intersect=function(e){if(0==e.length)return lf.proc.Relation.createEmpty();for(var t=e.reduce(function(t,r){return lf.proc.Relation.assertCompatible_(e[0],r),t+r.entries.length},0),r=Array(t),o=0,n=e.map(function(e){var t=lf.structs.map.create();return e.entries.forEach(function(e){r[o++]=e,t.set(e.id,e)}),t}),i=lf.structs.map.create(),a=0;a<r.length;a++){n.every(function(e){return e.has(r[a].id)})&&i.set(r[a].id,r[a])}return new lf.proc.Relation(lf.structs.map.values(i),lf.structs.set.values(e[0].tables_))},lf.proc.Relation.union=function(e){if(0==e.length)return lf.proc.Relation.createEmpty();var t=lf.structs.map.create();return e.forEach(function(r){lf.proc.Relation.assertCompatible_(e[0],r),r.entries.forEach(function(e){t.set(e.id,e)})}),new lf.proc.Relation(lf.structs.map.values(t),lf.structs.set.values(e[0].tables_))},lf.proc.Relation.fromRows=function(e,t){var r=1<t.length,o=e.map(function(e){return new lf.proc.RelationEntry(e,r)});return new lf.proc.Relation(o,t)},lf.proc.RelationEntry=function(e,t){this.row=e,this.id=lf.proc.RelationEntry.getNextId_(),this.isPrefixApplied_=t},lf.proc.RelationEntry.id_=0,lf.proc.RelationEntry.getNextId_=function(){return lf.proc.RelationEntry.id_++},lf.proc.RelationEntry.prototype.getField=function(e){var t=e.alias_;return!goog.isNull(t)&&this.row.payload_.hasOwnProperty(t)?this.row.payload_[t]:this.isPrefixApplied_?this.row.payload_[e.getTable().getEffectiveName()][e.getName()]:this.row.payload_[e.getName()]},lf.proc.RelationEntry.prototype.setField=function(e,t){var r=e.alias_;if(goog.isDefAndNotNull(r))this.row.payload_[r]=t;else if(this.isPrefixApplied_){var o=e.getTable().getEffectiveName(),n=this.row.payload_[o];goog.isDefAndNotNull(n)||(n={},this.row.payload_[o]=n),n[e.getName()]=t}else this.row.payload_[e.getName()]=t},lf.proc.RelationEntry.combineEntries=function(e,t,r,o){var n={},i=function(e,t){if(e.isPrefixApplied_){var r,o=e.row.payload_;for(r in o)n[r]=o[r]}else goog.asserts.assert(!n.hasOwnProperty(t[0]),"Attempted to join table with itself, without using table alias, or same alias "+t[0]+"is reused for multiple tables."),n[t[0]]=e.row.payload_};i(e,t),i(r,o);var a=new lf.Row(lf.Row.DUMMY_ID,n);return new lf.proc.RelationEntry(a,!0)},lf.bind=function(e){return new lf.Binder(e)},goog.exportSymbol("lf.bind",lf.bind),lf.Binder=function(e){this.index_=e},goog.exportSymbol("lf.Binder",lf.Binder),lf.Binder.prototype.getIndex=function(){return this.index_},lf.eval={},lf.eval.Type={BETWEEN:"between",EQ:"eq",GTE:"gte",GT:"gt",IN:"in",LTE:"lte",LT:"lt",MATCH:"match",NEQ:"neq"},lf.eval.Registry=function(){this.keyOfIndexConversionMap_=lf.eval.buildKeyOfIndexConversionMap_();var e=lf.eval.buildNumberEvaluatorMap_();this.evalMaps_=lf.structs.map.create(),this.evalMaps_.set(lf.Type.BOOLEAN,lf.eval.buildBooleanEvaluatorMap_()),this.evalMaps_.set(lf.Type.DATE_TIME,lf.eval.buildDateEvaluatorMap_()),this.evalMaps_.set(lf.Type.NUMBER,e),this.evalMaps_.set(lf.Type.INTEGER,e),this.evalMaps_.set(lf.Type.STRING,lf.eval.buildStringEvaluatorMap_()),this.evalMaps_.set(lf.Type.OBJECT,lf.eval.buildObjectEvaluatorMap_())},lf.eval.Registry.get=function(){return goog.isDefAndNotNull(lf.eval.Registry.instance_)||(lf.eval.Registry.instance_=new lf.eval.Registry),lf.eval.Registry.instance_},lf.eval.Registry.prototype.getEvaluator=function(e,t){var r=this.evalMaps_.get(e)||null;if(goog.isNull(r))throw new lf.Exception(550);var o=r.get(t)||null;if(goog.isNull(o))throw new lf.Exception(550);return o},lf.eval.Registry.prototype.getKeyOfIndexEvaluator=function(e){var t=this.keyOfIndexConversionMap_.get(e)||null;return goog.asserts.assert(!goog.isNull(t),"Could not find keyOfIndex evaluation function for "+e),t},lf.eval.buildKeyOfIndexConversionMap_=function(){var e=lf.structs.map.create();e.set(lf.Type.BOOLEAN,function(e){return goog.isNull(e)?null:e?1:0}),e.set(lf.Type.DATE_TIME,function(e){return goog.isNull(e)?null:e.getTime()});var t=function(e){return e};return e.set(lf.Type.INTEGER,t),e.set(lf.Type.NUMBER,t),e.set(lf.Type.STRING,t),e},lf.eval.buildBooleanEvaluatorMap_=function(){var e=lf.structs.map.create();return e.set(lf.eval.Type.EQ,function(e,t){return e==t}),e.set(lf.eval.Type.NEQ,function(e,t){return e!=t}),e},lf.eval.buildCommonEvaluatorMap_=function(){var e=lf.eval.buildBooleanEvaluatorMap_();return e.set(lf.eval.Type.BETWEEN,function(e,t){return!(goog.isNull(e)||goog.isNull(t[0])||goog.isNull(t[1]))&&(e>=t[0]&&e<=t[1])}),e.set(lf.eval.Type.GTE,function(e,t){return!goog.isNull(e)&&!goog.isNull(t)&&e>=t}),e.set(lf.eval.Type.GT,function(e,t){return!goog.isNull(e)&&!goog.isNull(t)&&e>t}),e.set(lf.eval.Type.IN,function(e,t){return-1!=t.indexOf(e)}),e.set(lf.eval.Type.LTE,function(e,t){return!goog.isNull(e)&&!goog.isNull(t)&&e<=t}),e.set(lf.eval.Type.LT,function(e,t){return!goog.isNull(e)&&!goog.isNull(t)&&e<t}),e},lf.eval.buildNumberEvaluatorMap_=function(){return lf.eval.buildCommonEvaluatorMap_()},lf.eval.buildStringEvaluatorMap_=function(){var e=lf.eval.buildCommonEvaluatorMap_();return e.set(lf.eval.Type.MATCH,function(e,t){return!goog.isNull(e)&&!goog.isNull(t)&&new RegExp(t).test(e)}),e},lf.eval.buildObjectEvaluatorMap_=function(){var e=lf.structs.map.create(),t=function(e){if(!goog.isNull(e))throw new lf.Exception(550)};return e.set(lf.eval.Type.EQ,function(e,r){return t(r),goog.isNull(e)}),e.set(lf.eval.Type.NEQ,function(e,r){return t(r),!goog.isNull(e)}),e},lf.eval.buildDateEvaluatorMap_=function(){var e=lf.structs.map.create();return e.set(lf.eval.Type.BETWEEN,function(e,t){return!(goog.isNull(e)||goog.isNull(t[0])||goog.isNull(t[1]))&&(e.getTime()>=t[0].getTime()&&e.getTime()<=t[1].getTime())}),e.set(lf.eval.Type.EQ,function(e,t){return(goog.isNull(e)?-1:e.getTime())==(goog.isNull(t)?-1:t.getTime())}),e.set(lf.eval.Type.GTE,function(e,t){return!goog.isNull(e)&&!goog.isNull(t)&&e.getTime()>=t.getTime()}),e.set(lf.eval.Type.GT,function(e,t){return!goog.isNull(e)&&!goog.isNull(t)&&e.getTime()>t.getTime()}),e.set(lf.eval.Type.IN,function(e,t){return t.some(function(t){return t.getTime()==e.getTime()})}),e.set(lf.eval.Type.LTE,function(e,t){return!goog.isNull(e)&&!goog.isNull(t)&&e.getTime()<=t.getTime()}),e.set(lf.eval.Type.LT,function(e,t){return!goog.isNull(e)&&!goog.isNull(t)&&e.getTime()<t.getTime()}),e.set(lf.eval.Type.NEQ,function(e,t){return(goog.isNull(e)?-1:e.getTime())!=(goog.isNull(t)?-1:t.getTime())}),e},lf.structs.TreeNode=function(){this.children_=this.parent_=null},lf.structs.TreeNode.EMPTY_ARRAY_=[],lf.structs.TreeNode.prototype.getParent=function(){return this.parent_},lf.structs.TreeNode.prototype.setParent=function(e){this.parent_=e},lf.structs.TreeNode.prototype.getRoot=function(){for(var e=this;!goog.isNull(e.getParent());)e=e.getParent();return e},lf.structs.TreeNode.prototype.getDepth=function(){for(var e=0,t=this;!goog.isNull(t.getParent());)e++,t=t.getParent();return e},lf.structs.TreeNode.prototype.isLeaf=function(){return goog.isNull(this.children_)},lf.structs.TreeNode.prototype.getChildren=function(){return this.children_||lf.structs.TreeNode.EMPTY_ARRAY_},lf.structs.TreeNode.prototype.getChildAt=function(e){return this.getChildren()[e]||null},lf.structs.TreeNode.prototype.getChildCount=function(){return this.getChildren().length},lf.structs.TreeNode.prototype.addChildAt=function(e,t){goog.asserts.assert(goog.isNull(e.getParent())),e.setParent(this),goog.isNull(this.children_)?(goog.asserts.assert(0==t),this.children_=[e]):(goog.asserts.assert(0<=t&&t<=this.children_.length),this.children_.splice(t,0,e))},lf.structs.TreeNode.prototype.addChild=function(e){goog.asserts.assert(goog.isNull(e.getParent())),e.setParent(this),goog.isNull(this.children_)?this.children_=[e]:this.children_.push(e)},lf.structs.TreeNode.prototype.removeChildAt=function(e){var t=this.children_&&this.children_[e];return t?(t.setParent(null),this.children_.splice(e,1),0==this.children_.length&&(this.children_=null),t):null},lf.structs.TreeNode.prototype.removeChild=function(e){return this.removeChildAt(this.getChildren().indexOf(e))},lf.structs.TreeNode.prototype.replaceChildAt=function(e,t){goog.asserts.assert(goog.isNull(e.getParent()),"New child must not have parent node");var r=this.getChildAt(t);return goog.asserts.assert(r,"Invalid child index"),r.setParent(null),e.setParent(this),this.children_[t]=e,r},lf.structs.TreeNode.prototype.traverse=function(e,t){!1!==e.call(t,this)&&this.getChildren().forEach(function(r){r.traverse(e,t)})},lf.Predicate=function(){},lf.PredicateProvider=function(){},lf.pred={},lf.pred.PredicateNode=function(){lf.structs.TreeNode.call(this),this.id_=lf.pred.PredicateNode.nextId_++},goog.inherits(lf.pred.PredicateNode,lf.structs.TreeNode),lf.pred.PredicateNode.nextId_=0,lf.pred.PredicateNode.prototype.getId=function(){return this.id_},lf.pred.PredicateNode.prototype.setId=function(e){this.id_=e},lf.pred.ValuePredicate=function(e,t,r){lf.pred.PredicateNode.call(this),this.column=e,this.value=t,this.evaluatorType=r,this.evaluatorFn_=lf.eval.Registry.get().getEvaluator(this.column.getType(),this.evaluatorType),this.isComplement_=!1,this.binder_=t},goog.inherits(lf.pred.ValuePredicate,lf.pred.PredicateNode),lf.pred.ValuePredicate.prototype.copy=function(){var e=new lf.pred.ValuePredicate(this.column,this.value,this.evaluatorType);return e.setBinder(this.binder_),e.setComplement(this.isComplement_),e.setId(this.getId()),e},lf.pred.ValuePredicate.prototype.getColumns=function(e){return goog.isDefAndNotNull(e)?(e.push(this.column),e):[this.column]},lf.pred.ValuePredicate.prototype.getTables=function(e){var t=goog.isDefAndNotNull(e)?e:lf.structs.set.create();return t.add(this.column.getTable()),t},lf.pred.ValuePredicate.prototype.setComplement=function(e){this.isComplement_=e},lf.pred.ValuePredicate.prototype.setBinder=function(e){this.binder_=e},lf.pred.ValuePredicate.prototype.checkBinding_=function(){var e=!1;if(this.value instanceof lf.Binder||(e=!goog.isArray(this.value)||!this.value.some(function(e){return e instanceof lf.Binder})),!e)throw new lf.Exception(501)},lf.pred.ValuePredicate.prototype.eval=function(e){if(this.checkBinding_(),this.evaluatorType==lf.eval.Type.IN)return this.evalAsIn_(e);var t=e.entries.filter(function(e){return this.evaluatorFn_(e.getField(this.column),this.value)!=this.isComplement_},this);return new lf.proc.Relation(t,e.getTables())},lf.pred.ValuePredicate.prototype.bind=function(e){var t=function(t){if(e.length<=t)throw new lf.Exception(510)};if(this.binder_ instanceof lf.Binder){var r=this.binder_.getIndex();t(r),this.value=e[r]}else goog.isArray(this.binder_)&&(this.value=this.binder_.map(function(r){return r instanceof lf.Binder?(t(r.getIndex()),e[r.getIndex()]):r}))},lf.pred.ValuePredicate.prototype.evalAsIn_=function(e){goog.asserts.assert(this.evaluatorType==lf.eval.Type.IN,"ValuePredicate#evalAsIn_() called for wrong predicate type.");var t=lf.structs.set.create(this.value),r=function(e){return!goog.isNull(e)&&t.has(e)!=this.isComplement_}.bind(this),o=e.entries.filter(function(e){return r(e.getField(this.column))},this);return new lf.proc.Relation(o,e.getTables())},lf.pred.ValuePredicate.prototype.toString=function(){return"value_pred("+this.column.getNormalizedName()+" "+this.evaluatorType+(this.isComplement_?"(complement)":"")+" "+this.value+")"},lf.pred.ValuePredicate.prototype.isKeyRangeCompatible=function(){return this.checkBinding_(),!goog.isNull(this.value)&&(this.evaluatorType==lf.eval.Type.BETWEEN||this.evaluatorType==lf.eval.Type.IN||this.evaluatorType==lf.eval.Type.EQ||this.evaluatorType==lf.eval.Type.GT||this.evaluatorType==lf.eval.Type.GTE||this.evaluatorType==lf.eval.Type.LT||this.evaluatorType==lf.eval.Type.LTE)},lf.pred.ValuePredicate.prototype.toKeyRange=function(){goog.asserts.assert(this.isKeyRangeCompatible(),"Could not convert predicate to key range.");var e=null;if(this.evaluatorType==lf.eval.Type.BETWEEN)e=new lf.index.SingleKeyRange(this.getValueAsKey_(this.value[0]),this.getValueAsKey_(this.value[1]),!1,!1);else{if(this.evaluatorType==lf.eval.Type.IN){var t=this.value.map(function(e){return lf.index.SingleKeyRange.only(e)});return new lf.index.SingleKeyRangeSet(this.isComplement_?lf.index.SingleKeyRange.complement(t):t)}var r=this.getValueAsKey_(this.value);e=this.evaluatorType==lf.eval.Type.EQ?lf.index.SingleKeyRange.only(r):this.evaluatorType==lf.eval.Type.GTE?lf.index.SingleKeyRange.lowerBound(r):this.evaluatorType==lf.eval.Type.GT?lf.index.SingleKeyRange.lowerBound(r,!0):this.evaluatorType==lf.eval.Type.LTE?lf.index.SingleKeyRange.upperBound(r):lf.index.SingleKeyRange.upperBound(r,!0)}return new lf.index.SingleKeyRangeSet(this.isComplement_?e.complement():[e])},lf.pred.ValuePredicate.prototype.getValueAsKey_=function(e){return this.column.getType()==lf.Type.DATE_TIME?e.getTime():e},lf.query={},lf.query.Context=function(e){this.schema=e,this.clonedFrom=this.predicateMap_=null},lf.query.Context.prototype.getPredicate=function(e){goog.isNull(this.predicateMap_)&&goog.isDefAndNotNull(this.where)&&(this.predicateMap_=lf.query.Context.buildPredicateMap_(this.where));var t=this.predicateMap_.get(e)||null;return goog.asserts.assert(!goog.isNull(t)),t},lf.query.Context.buildPredicateMap_=function(e){var t=lf.structs.map.create();return e.traverse(function(e){t.set(e.getId(),e)}),t},lf.query.Context.prototype.cloneBase=function(e){e.where&&(this.where=e.where.copy()),this.clonedFrom=e},lf.query.Context.prototype.bind=function(){return goog.asserts.assert(!goog.isDefAndNotNull(this.clonedFrom)),this},lf.query.Context.prototype.bindValuesInSearchCondition=function(e){var t=this.where;goog.isDefAndNotNull(t)&&t.traverse(function(t){t instanceof lf.pred.ValuePredicate&&t.bind(e)})},lf.query.SelectContext=function(e){lf.query.Context.call(this,e)},goog.inherits(lf.query.SelectContext,lf.query.Context),lf.query.SelectContext.orderByToString=function(e){var t="";return e.forEach(function(r,o){t+=r.column.getNormalizedName()+" ",t+=r.order==lf.Order.ASC?"ASC":"DESC",o<e.length-1&&(t+=", ")}),t},lf.query.SelectContext.prototype.getScope=function(){return lf.structs.set.create(this.from)},lf.query.SelectContext.prototype.clone=function(){var e=new lf.query.SelectContext(this.schema);return e.cloneBase(this),this.columns&&(e.columns=this.columns.slice()),this.from&&(e.from=this.from.slice()),e.limit=this.limit,e.skip=this.skip,this.orderBy&&(e.orderBy=this.orderBy.slice()),this.groupBy&&(e.groupBy=this.groupBy.slice()),this.limitBinder&&(e.limitBinder=this.limitBinder),this.skipBinder&&(e.skipBinder=this.skipBinder),e.outerJoinPredicates=this.outerJoinPredicates,e},lf.query.SelectContext.prototype.bind=function(e){return lf.query.SelectContext.superClass_.bind.call(this,e),goog.isDefAndNotNull(this.limitBinder)&&(this.limit=e[this.limitBinder.getIndex()]),goog.isDefAndNotNull(this.skipBinder)&&(this.skip=e[this.skipBinder.getIndex()]),this.bindValuesInSearchCondition(e),this},lf.proc.PhysicalQueryPlan=function(e,t){this.rootNode_=e,this.scope_=t},lf.proc.PhysicalQueryPlan.prototype.getRoot=function(){return this.rootNode_},lf.proc.PhysicalQueryPlan.prototype.getScope=function(){return this.scope_},lf.proc.PhysicalQueryPlan.getCombinedScope=function(e){var t=lf.structs.set.create();return e.forEach(function(e){e.getScope().forEach(t.add.bind(t))}),t},lf.proc.Task=function(){},lf.proc.TaskPriority={EXPORT_TASK:0,IMPORT_TASK:0,OBSERVER_QUERY_TASK:0,EXTERNAL_CHANGE_TASK:1,USER_QUERY_TASK:2,TRANSACTION_TASK:2},lf.proc.QueryTask=function(e,t){this.global=e,this.backStore_=e.getService(lf.service.BACK_STORE),this.queries=t.map(function(e){return e.context}),this.plans_=t.map(function(e){return e.plan}),this.combinedScope_=lf.proc.PhysicalQueryPlan.getCombinedScope(this.plans_),this.txType_=this.detectType_(),this.resolver_=goog.Promise.withResolver()},lf.proc.QueryTask.prototype.detectType_=function(){return this.queries.some(function(e){return!(e instanceof lf.query.SelectContext)})?lf.TransactionType.READ_WRITE:lf.TransactionType.READ_ONLY},lf.proc.QueryTask.prototype.exec=function(){var e=this.txType_==lf.TransactionType.READ_ONLY?void 0:new lf.cache.Journal(this.global,this.combinedScope_),t=[],r=this.plans_.slice(),o=this.queries,n=function(){var i=r.shift();if(i){var a=o[t.length];return i.getRoot().exec(e,a).then(function(e){return t.push(e[0]),n()})}return goog.Promise.resolve()};return n().then(function(){return this.tx_=this.backStore_.createTx(this.txType_,lf.structs.set.values(this.combinedScope_),e),this.tx_.commit()}.bind(this)).then(function(){return this.onSuccess(t),t}.bind(this),function(t){throw goog.isDefAndNotNull(e)&&e.rollback(),t})},lf.proc.QueryTask.prototype.getType=function(){return this.txType_},lf.proc.QueryTask.prototype.getScope=function(){return this.combinedScope_},lf.proc.QueryTask.prototype.getId=function(){return goog.getUid(this)},lf.proc.QueryTask.prototype.onSuccess=function(){},lf.proc.QueryTask.prototype.stats=function(){var e=null;return goog.isDefAndNotNull(this.tx_)&&(e=this.tx_.stats()),goog.isNull(e)?lf.TransactionStats.getDefault():e},lf.proc.ObserverQueryTask=function(e,t){lf.proc.QueryTask.call(this,e,t),this.observerRegistry_=e.getService(lf.service.OBSERVER_REGISTRY)},goog.inherits(lf.proc.ObserverQueryTask,lf.proc.QueryTask),lf.proc.ObserverQueryTask.prototype.getPriority=function(){return lf.proc.TaskPriority.OBSERVER_QUERY_TASK},lf.proc.ObserverQueryTask.prototype.onSuccess=function(e){this.queries.forEach(function(t,r){this.observerRegistry_.updateResultsForQuery(t,e[r])},this)},lf.proc.ExternalChangeTask=function(e,t){this.global_=e,this.observerRegistry_=e.getService(lf.service.OBSERVER_REGISTRY),this.runner_=e.getService(lf.service.RUNNER),this.inMemoryUpdater_=new lf.cache.InMemoryUpdater(e),this.tableDiffs_=t;var r=e.getService(lf.service.SCHEMA),o=this.tableDiffs_.map(function(e){return r.table(e.getName())});this.scope_=lf.structs.set.create(o),this.resolver_=goog.Promise.withResolver()},lf.proc.ExternalChangeTask.prototype.exec=function(){return this.inMemoryUpdater_.update(this.tableDiffs_),this.scheduleObserverTask_(),goog.Promise.resolve()},lf.proc.ExternalChangeTask.prototype.getType=function(){return lf.TransactionType.READ_WRITE},lf.proc.ExternalChangeTask.prototype.getScope=function(){return this.scope_},lf.proc.ExternalChangeTask.prototype.getId=function(){return goog.getUid(this)},lf.proc.ExternalChangeTask.prototype.getPriority=function(){return lf.proc.TaskPriority.EXTERNAL_CHANGE_TASK},lf.proc.ExternalChangeTask.prototype.scheduleObserverTask_=function(){var e=this.observerRegistry_.getTaskItemsForTables(this.scope_);if(0!=e.length){var t=new lf.proc.ObserverQueryTask(this.global_,e);this.runner_.scheduleTask(t)}},lf.backstore.ExternalChangeObserver=function(e){this.global_=e,this.backStore_=e.getService(lf.service.BACK_STORE),this.runner_=e.getService(lf.service.RUNNER)},lf.backstore.ExternalChangeObserver.prototype.startObserving=function(){this.backStore_.subscribe(this.onChange_.bind(this))},lf.backstore.ExternalChangeObserver.prototype.onChange_=function(e){var t=new lf.proc.ExternalChangeTask(this.global_,e);this.runner_.scheduleTask(t)},lf.BackStore=function(){},lf.raw={},lf.raw.BackStore=function(){},lf.backstore.FirebaseRawBackStore=function(e,t){this.version_=e,this.db_=t,this.tableIds_=lf.structs.map.create()},goog.exportSymbol("lf.backstore.FirebaseRawBackStore",lf.backstore.FirebaseRawBackStore),lf.backstore.FirebaseRawBackStore.prototype.getRawDBInstance=function(){return this.db_},lf.backstore.FirebaseRawBackStore.prototype.getRawTransaction=function(){throw new lf.Exception(351)},lf.backstore.FirebaseRawBackStore.getValue=function(e,t){var r=goog.Promise.withResolver(),o=e;return t.length&&(o=e.child(t)),o.once("value",function(e){r.resolve(e.val())},function(e){r.reject(e)}),r.promise},lf.backstore.FirebaseRawBackStore.setValue=function(e,t,r){var o=r||!1,n=goog.Promise.withResolver(),i=function(e){e?n.reject(e):n.resolve()};return o?e.set(t,i):e.update(t,i),n.promise},lf.backstore.FirebaseRawBackStore.prototype.init=function(e){return lf.backstore.FirebaseRawBackStore.getValue(this.db_,"@rev/R").then(function(e){return this.revision_=e,lf.backstore.FirebaseRawBackStore.getValue(this.db_,"@table")}.bind(this)).then(function(t){var r,o=0;for(r in t)this.tableIds_.set(r,t[r]),t[r]>o&&(o=t[r]);e.tables().forEach(function(e){this.tableIds_.has(e.getName())||(t[e.getName()]=++o)},this);var n=this.db_.child("@table");return lf.backstore.FirebaseRawBackStore.setValue(n,t)}.bind(this))},lf.backstore.FirebaseRawBackStore.prototype.transform_=function(e,t){var r=this.tableIds_.get(e);return goog.isDefAndNotNull(r)?function(){var e={},o=goog.Promise.withResolver();return this.db_.orderByChild("T").equalTo(r).once("value",function(r){r.forEach(function(r){var o=t(r.val());e[parseInt(r.key(),10)]=o}),o.resolve(e)}),o.promise}.bind(this)().then(function(e){return e["@rev"]={R:++this.revision_},lf.backstore.FirebaseRawBackStore.setValue(this.db_,e)}.bind(this)):goog.Promise.resolve()},lf.backstore.FirebaseRawBackStore.prototype.dropTable=function(e){return this.transform_(e,function(){return null}).then(function(){return this.tableIds_.delete(e),lf.backstore.FirebaseRawBackStore.setValue(this.db_.child("@table/"+e),null,!0)}.bind(this))},goog.exportProperty(lf.backstore.FirebaseRawBackStore.prototype,"dropTable",lf.backstore.FirebaseRawBackStore.prototype.dropTable),lf.backstore.FirebaseRawBackStore.prototype.addTableColumn=function(e,t,r){return this.transform_(e,function(e){var o=e.P;return o[t]=r,{R:this.revision_+1,T:e.T,P:o}}.bind(this))},goog.exportProperty(lf.backstore.FirebaseRawBackStore.prototype,"addTableColumn",lf.backstore.FirebaseRawBackStore.prototype.addTableColumn),lf.backstore.FirebaseRawBackStore.prototype.dropTableColumn=function(e,t){return this.transform_(e,function(e){var r=e.P;return delete r[t],{R:this.revision_+1,T:e.T,P:r}}.bind(this))},goog.exportProperty(lf.backstore.FirebaseRawBackStore.prototype,"dropTableColumn",lf.backstore.FirebaseRawBackStore.prototype.dropTableColumn),lf.backstore.FirebaseRawBackStore.prototype.renameTableColumn=function(e,t,r){return this.transform_(e,function(e){var o=e.P;return o[r]=o[t],delete o[t],{R:this.revision_+1,T:e.T,P:o}}.bind(this))},goog.exportProperty(lf.backstore.FirebaseRawBackStore.prototype,"renameTableColumn",lf.backstore.FirebaseRawBackStore.prototype.renameTableColumn),lf.backstore.FirebaseRawBackStore.prototype.createRow=function(){throw new lf.Exception(351)},goog.exportProperty(lf.backstore.FirebaseRawBackStore.prototype,"createRow",lf.backstore.FirebaseRawBackStore.prototype.createRow),lf.backstore.FirebaseRawBackStore.prototype.getVersion=function(){return this.version_},goog.exportProperty(lf.backstore.FirebaseRawBackStore.prototype,"getVersion",lf.backstore.FirebaseRawBackStore.prototype.getVersion),lf.backstore.FirebaseRawBackStore.prototype.dumpTable_=function(e){var t=goog.Promise.withResolver(),r=this.tableIds_.get(e);return this.db_.orderByChild("T").equalTo(r).once("value",function(e){var r=[];e.forEach(function(e){r.push(e.val().P)}),t.resolve(r)}),t.promise},lf.backstore.FirebaseRawBackStore.prototype.dump=function(){var e={},t=lf.structs.map.keys(this.tableIds_).map(function(t){return this.dumpTable_(t).then(function(r){e[t]=r})}.bind(this));return goog.Promise.all(t).then(function(){return e})},goog.exportProperty(lf.backstore.FirebaseRawBackStore.prototype,"dump",lf.backstore.FirebaseRawBackStore.prototype.dump),lf.backstore.FirebaseTx=function(e,t,r){lf.backstore.BaseTx.call(this,t,r),this.db_=e},goog.inherits(lf.backstore.FirebaseTx,lf.backstore.BaseTx),lf.backstore.FirebaseTx.prototype.getTable=function(e){return this.db_.getTableInternal(e)},lf.backstore.FirebaseTx.prototype.commitInternal=function(){if(this.txType==lf.TransactionType.READ_ONLY)return this.resolver.resolve(),this.resolver.promise;var e=this.journal_.tableDiffs_;if(0==e.size)this.resolver.resolve();else{var t=this.db_.revision_+1;this.db_.setRevision(t);var r={"@rev":{R:t}};e.forEach(function(e,o){var n=this.db_.getTableId(o);e.added_.forEach(function(e,o){r[o]={R:t,T:n,P:e.payload_}}),e.modified_.forEach(function(e,o){r[o]={R:t,T:n,P:e[1].payload_}}),e.deleted_.forEach(function(e,t){r[t]=null})},this),this.db_.db_.update(r,function(r){if(goog.isNull(r))this.resolver.resolve();else{this.db_.setRevision(t-1);var o=lf.structs.map.values(e).map(function(e){return this.db_.reloadTable(e.getName())},this);goog.Promise.all(o).then(this.resolver.reject.bind(this.resolver),this.resolver.reject.bind(this.resolver))}}.bind(this))}return this.resolver.promise},lf.backstore.MemoryTable=function(){this.data_=lf.structs.map.create()},lf.backstore.MemoryTable.prototype.getSync=function(e){if(0==e.length)return lf.structs.map.values(this.data_);var t=[];return e.forEach(function(e){var r=this.data_.get(e)||null;goog.isNull(r)||t.push(r)},this),t},lf.backstore.MemoryTable.prototype.getData=function(){return this.data_},lf.backstore.MemoryTable.prototype.get=function(e){return goog.Promise.resolve(this.getSync(e))},lf.backstore.MemoryTable.prototype.putSync=function(e){e.forEach(function(e){this.data_.set(e.id(),e)},this)},lf.backstore.MemoryTable.prototype.put=function(e){return this.putSync(e),goog.Promise.resolve()},lf.backstore.MemoryTable.prototype.removeSync=function(e){0==e.length||e.length==this.data_.size?this.data_.clear():e.forEach(function(e){this.data_.delete(e)},this)},lf.backstore.MemoryTable.prototype.remove=function(e){return this.removeSync(e),goog.Promise.resolve()},lf.backstore.MemoryTable.prototype.getMaxRowId=function(){return 0==this.data_.size?0:lf.structs.map.keys(this.data_).reduce(function(e,t){return e>t?e:t},0)},lf.backstore.Firebase=function(e,t){this.schema_=e,this.app_=t,this.removedRows_=lf.structs.map.create(),this.revision_=-1,this.tables_=lf.structs.map.create(),this.tableIds_=lf.structs.map.create(),this.changeHandler_=null},lf.backstore.Firebase.prototype.setRevision=function(e){this.revision_=e},lf.backstore.Firebase.prototype.init=function(e){this.db_=this.app_.child(this.schema_.name());var t=lf.backstore.FirebaseRawBackStore.getValue,r=e||function(){return goog.Promise.resolve()};return t(this.db_,"@db/version").then(function(e){return goog.isNull(e)?lf.backstore.FirebaseRawBackStore.setValue(this.db_,this.createNewDb_(),!0).then(function(){var e=new lf.backstore.FirebaseRawBackStore(0,this.db_);return r(e)}.bind(this)).then(function(){return this.init()}.bind(this)):e==this.schema_.version()?t(this.db_,"@rev/R").then(function(e){return this.revision_=e,t(this.db_,"@table")}.bind(this)).then(function(e){for(var t in e)this.tableIds_.set(t,e[t]);var r=this.schema_.tables().map(function(e){return this.reloadTable(e.getName())},this);return goog.Promise.all(r)}.bind(this)).then(function(){return this.initRowId_(),this.listen_(),goog.Promise.resolve()}.bind(this)):this.onUpgrade_(e,r).then(function(){return this.init()}.bind(this))}.bind(this))},lf.backstore.Firebase.prototype.onUpgrade_=function(e,t){var r=new lf.backstore.FirebaseRawBackStore(e,this.db_);return r.init(this.schema_).then(function(){return this.updateIndexTables_()}.bind(this)).then(function(){return t(r)}).then(function(){var e=this.db_.child("@db");return lf.backstore.FirebaseRawBackStore.setValue(e,{version:this.schema_.version()},!0)}.bind(this))},lf.backstore.Firebase.prototype.updateIndexTables_=function(){return goog.Promise.resolve()},lf.backstore.Firebase.prototype.listen_=function(){this.db_.off(),this.db_.on("child_removed",this.onRemoved_.bind(this)),this.change_&&(this.change_.off(),this.removedRows_.clear()),this.change_=this.db_.orderByChild("R").startAt(this.revision_+1),this.change_.on("value",this.onChange_.bind(this))},lf.backstore.Firebase.prototype.initRowId_=function(){var e=lf.structs.map.values(this.tables_).map(function(e){return e.getMaxRowId()}).reduce(function(e,t){return e>t?e:t},0);lf.Row.setNextId(e+1)},lf.backstore.Firebase.prototype.onRemoved_=function(e){var t=e.val(),r=this.removedRows_.get(t.T)||null;goog.isNull(r)&&(r=lf.structs.set.create(),this.removedRows_.set(t.T,r)),r.add(parseInt(e.key(),10))},lf.backstore.Firebase.prototype.onChange_=function(e){var t=e.child("@rev/R").val();if(goog.isDefAndNotNull(t)&&t!=this.revision_){this.revision_=t;var r=this.generateDiff_(e);r.forEach(function(e){var t=this.tables_.get(e.getName()),r=lf.structs.map.keys(e.deleted_);0<r.length&&t.removeSync(r);var o=lf.structs.map.values(e.added_);e.modified_.forEach(function(e){o.push(e[1])}),t.putSync(o)},this),0<r.length&&this.notify(r),this.listen_()}},lf.backstore.Firebase.prototype.generateDiff_=function(e){var t=lf.structs.set.create(),r=lf.structs.map.create();return this.tableIds_.forEach(function(e,o){var n=this.tables_.get(o),i=new lf.cache.TableDiff(o);if(this.removedRows_.has(e)){var a=lf.structs.set.values(this.removedRows_.get(e));a.forEach(function(e){t.add(e)}),n.getSync(a).forEach(function(e){i.delete(e)})}r.set(e,i)}.bind(this)),e.forEach(function(e){if("@rev"!=e.key()){var o=parseInt(e.key(),10);if(!t.has(o)){var n=e.val(),i=r.get(n.T),a=this.tables_.get(i.getName()),s=this.schema_.table(i.getName()).deserializeRow({id:o,value:n.P});a.getData().has(o)?i.modify([a.getSync([o])[0],s]):i.add(s)}}}.bind(this)),lf.structs.map.values(r).filter(function(e){return!e.isEmpty()})},lf.backstore.Firebase.prototype.reloadTable=function(e){var t=goog.Promise.withResolver(),r=this.getTableId(e),o=this.schema_.table(e);return this.db_.orderByChild("T").equalTo(r).once("value",function(r){var n=new lf.backstore.MemoryTable,i=[];r.forEach(function(e){i.push(o.deserializeRow({id:parseInt(e.key(),10),value:e.val().P}))}),n.putSync(i),this.tables_.set(e,n),t.resolve()}.bind(this)),t.promise},lf.backstore.Firebase.prototype.getTableId=function(e){return this.tableIds_.get(e)},lf.backstore.Firebase.prototype.createNewDb_=function(){var e={};return e["@db"]={version:this.schema_.version()},e["@rev"]={R:1},this.revision_=1,e["@table"]={},this.schema_.tables().forEach(function(t,r){var o=t.getName();e["@table"][o]=r,this.tables_.set(o,new lf.backstore.MemoryTable),this.tableIds_.set(o,r)},this),e},lf.backstore.Firebase.prototype.createTx=function(e,t,r){return new lf.backstore.FirebaseTx(this,e,r)},lf.backstore.Firebase.prototype.getTableInternal=function(e){var t=this.tables_.get(e)||null;if(!goog.isNull(t))return t;throw new lf.Exception(101,e)},lf.backstore.Firebase.prototype.close=function(){},lf.backstore.Firebase.prototype.subscribe=function(e){this.changeHandler_=e},lf.backstore.Firebase.prototype.notify=function(e){goog.isDefAndNotNull(this.changeHandler_)&&this.changeHandler_(e)},lf.backstore.IndexedDBRawBackStore=function(e,t,r,o){this.db_=t,this.tx_=r,this.version_=e,this.bundleMode_=o},goog.exportSymbol("lf.backstore.IndexedDBRawBackStore",lf.backstore.IndexedDBRawBackStore),lf.backstore.IndexedDBRawBackStore.prototype.getRawDBInstance=function(){return this.db_},goog.exportProperty(lf.backstore.IndexedDBRawBackStore.prototype,"getRawDBInstance",lf.backstore.IndexedDBRawBackStore.prototype.getRawDBInstance),lf.backstore.IndexedDBRawBackStore.prototype.getRawTransaction=function(){return this.tx_},goog.exportProperty(lf.backstore.IndexedDBRawBackStore.prototype,"getRawTransaction",lf.backstore.IndexedDBRawBackStore.prototype.getRawTransaction),lf.backstore.IndexedDBRawBackStore.prototype.dropTable=function(e){return new goog.Promise(function(t,r){try{this.db_.deleteObjectStore(e)}catch(o){return void r(o)}t()},this)},goog.exportProperty(lf.backstore.IndexedDBRawBackStore.prototype,"dropTable",lf.backstore.IndexedDBRawBackStore.prototype.dropTable),lf.backstore.IndexedDBRawBackStore.prototype.openCursorForWrite_=function(e,t,r){return new goog.Promise(function(o,n){var i;try{var a=this.tx_.objectStore(e);i=a.openCursor()}catch(s){return void n(s)}i.onsuccess=function(){var e=i.result;e?(t(e),e.continue()):(r(a),o())},i.onerror=n},this)},lf.backstore.IndexedDBRawBackStore.convert=function(e){return e instanceof ArrayBuffer?lf.Row.binToHex(e):e instanceof Date?e.getTime():e},lf.backstore.IndexedDBRawBackStore.prototype.transformRows_=function(e,t){return this.openCursorForWrite_(e,this.bundleMode_?function(e){var r,o=lf.backstore.Page.deserialize(e.value),n=o.payload_;for(r in n){var i=lf.Row.deserialize(n[r]);t(i),n[r]=i.serialize()}e.update(o.serialize())}:function(e){var r=lf.Row.deserialize(e.value);t(r),e.update(r.serialize())},function(){})},lf.backstore.IndexedDBRawBackStore.prototype.addTableColumn=function(e,t,r){var o=lf.backstore.IndexedDBRawBackStore.convert(r);return this.transformRows_(e,function(e){e.payload_[t]=o})},goog.exportProperty(lf.backstore.IndexedDBRawBackStore.prototype,"addTableColumn",lf.backstore.IndexedDBRawBackStore.prototype.addTableColumn),lf.backstore.IndexedDBRawBackStore.prototype.dropTableColumn=function(e,t){return this.transformRows_(e,function(e){delete e.payload_[t]})},goog.exportProperty(lf.backstore.IndexedDBRawBackStore.prototype,"dropTableColumn",lf.backstore.IndexedDBRawBackStore.prototype.dropTableColumn),lf.backstore.IndexedDBRawBackStore.prototype.renameTableColumn=function(e,t,r){return this.transformRows_(e,function(e){e.payload_[r]=e.payload_[t],delete e.payload_[t]})},goog.exportProperty(lf.backstore.IndexedDBRawBackStore.prototype,"renameTableColumn",lf.backstore.IndexedDBRawBackStore.prototype.renameTableColumn),lf.backstore.IndexedDBRawBackStore.prototype.getTableRows_=function(e){var t=[];return new goog.Promise(function(r,o){var n;try{n=this.tx_.objectStore(e).openCursor()}catch(i){return void o(i)}n.onsuccess=function(){var e=n.result;if(e){if(this.bundleMode_){var o,i=lf.backstore.Page.deserialize(e.value).payload_;for(o in i)t.push(i[o])}else t.push(e.value);e.continue()}else r(t)}.bind(this),n.onerror=o},this)},lf.backstore.IndexedDBRawBackStore.prototype.createRow=function(e){var t,r={};for(t in e)r[t]=lf.backstore.IndexedDBRawBackStore.convert(e[t]);return lf.Row.create(r)},goog.exportProperty(lf.backstore.IndexedDBRawBackStore.prototype,"createRow",lf.backstore.IndexedDBRawBackStore.prototype.createRow),lf.backstore.IndexedDBRawBackStore.prototype.getVersion=function(){return this.version_},goog.exportProperty(lf.backstore.IndexedDBRawBackStore.prototype,"getVersion",lf.backstore.IndexedDBRawBackStore.prototype.getVersion),lf.backstore.IndexedDBRawBackStore.prototype.dump=function(){for(var e=this.db_.objectStoreNames,t=[],r=0;r<e.length;++r){var o=e.item(r);t.push(this.dumpTable_(o))}return goog.Promise.all(t).then(function(t){var r={};return t.forEach(function(t,o){r[e.item(o)]=t}),r})},goog.exportProperty(lf.backstore.IndexedDBRawBackStore.prototype,"dump",lf.backstore.IndexedDBRawBackStore.prototype.dump),lf.backstore.IndexedDBRawBackStore.prototype.dumpTable_=function(e){return this.getTableRows_(e).then(function(e){return e.map(function(e){return e.value})})},lf.backstore.ObjectStore=function(e,t){this.store_=e,this.deserializeFn_=t},lf.backstore.ObjectStore.prototype.get=function(e){if(0==e.length)return goog.isDefAndNotNull(this.store_.getAll)?this.getAllBulk_():this.getAllWithCursor_();var t=e.map(function(e){return new goog.Promise(function(t,r){var o;try{o=this.store_.get(e)}catch(n){return void r(n)}o.onerror=r,o.onsuccess=function(e){t(this.deserializeFn_(e.target.result))}.bind(this)},this)},this);return goog.Promise.all(t)},lf.backstore.ObjectStore.prototype.getAllWithCursor_=function(){return new goog.Promise(function(e,t){var r,o=[];try{r=this.store_.openCursor()}catch(n){return void t(n)}r.onerror=t,r.onsuccess=function(){var t=r.result;t?(o.push(this.deserializeFn_(t.value)),t.continue()):e(o)}.bind(this)},this)},lf.backstore.ObjectStore.prototype.getAllBulk_=function(){return new goog.Promise(function(e,t){var r;try{r=this.store_.getAll()}catch(o){return void t(o)}r.onerror=t,r.onsuccess=function(){var t=r.result.map(function(e){return this.deserializeFn_(e)},this);e(t)}.bind(this)},this)},lf.backstore.ObjectStore.prototype.performWriteOp_=function(e){return new goog.Promise(function(t,r){var o;try{o=e()}catch(n){return void r(n)}o.onsuccess=t,o.onerror=r},this)},lf.backstore.ObjectStore.prototype.put=function(e){if(0==e.length)return goog.Promise.resolve();var t=e.map(function(e){return this.performWriteOp_(function(){return this.store_.put(e.serialize())}.bind(this))},this);return goog.Promise.all(t)},lf.backstore.ObjectStore.prototype.remove=function(e){return new goog.Promise(function(t,r){var o=this.store_.count();o.onsuccess=function(o){if(0==e.length||o.target.result==e.length)return this.performWriteOp_(function(){return this.store_.clear()}.bind(this)).then(t,r);var n=e.map(function(e){return this.performWriteOp_(function(){return this.store_.delete(e)}.bind(this))},this);goog.Promise.all(n).then(t,r)}.bind(this),o.onerror=r},this)},lf.backstore.IndexedDBTx=function(e,t,r,o,n){lf.backstore.BaseTx.call(this,r,n),this.global_=e,this.tx_=t,this.bundleMode_=o,this.tx_.oncomplete=this.resolver.resolve.bind(this.resolver),this.tx_.onabort=this.resolver.reject.bind(this.resolver)},goog.inherits(lf.backstore.IndexedDBTx,lf.backstore.BaseTx),lf.backstore.IndexedDBTx.prototype.getTable=function(e,t,r){if(this.bundleMode_){var o=goog.isDefAndNotNull(r)?r:lf.backstore.TableType.DATA;return lf.backstore.BundledObjectStore.forTableType(this.global_,this.tx_.objectStore(e),t,o)}return new lf.backstore.ObjectStore(this.tx_.objectStore(e),t)},lf.backstore.IndexedDBTx.prototype.commitInternal=function(){return this.resolver.promise},lf.backstore.IndexedDB=function(e,t){this.global_=e,this.schema_=t,this.bundledMode_=t.pragma_.enableBundledMode||!1},lf.backstore.IndexedDB.prototype.init=function(e){var t=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(!goog.isDefAndNotNull(t))throw new lf.Exception(352);var r=e||function(){return goog.Promise.resolve()};return new goog.Promise(function(e,o){var n;try{n=t.open(this.schema_.name(),this.schema_.version())}catch(i){return void o(i)}n.onerror=function(e){var t=e.target.error;o(new lf.Exception(361,t.name,t.message))},n.onupgradeneeded=function(e){this.onUpgradeNeeded_(r,e).then(function(){},o)}.bind(this),n.onsuccess=function(t){this.db_=t.target.result,this.scanRowId_().then(function(t){lf.Row.setNextIdIfGreater(t+1),e(this.db_)}.bind(this))}.bind(this)},this)},lf.backstore.IndexedDB.prototype.onUpgradeNeeded_=function(e,t){var r=t.target.result,o=t.target.transaction,n=new lf.backstore.IndexedDBRawBackStore(t.oldVersion,r,o,this.bundledMode_);return this.removeIndexTables_(r,o),this.createTables_(r),e(n)},lf.backstore.IndexedDB.prototype.removeIndexTables_=function(e){for(var t=[],r=0;r<e.objectStoreNames.length;++r){var o=e.objectStoreNames.item(r);-1!=o.indexOf(".")&&t.push(o)}t.forEach(function(t){try{e.deleteObjectStore(t)}catch(r){}})},lf.backstore.IndexedDB.prototype.createTables_=function(e){this.schema_.tables().forEach(goog.partial(this.createObjectStoresForTable_,e),this)},lf.backstore.IndexedDB.prototype.createObjectStoresForTable_=function(e,t){(e.objectStoreNames.contains(t.getName())||e.createObjectStore(t.getName(),{keyPath:"id"}),t.persistentIndex())&&(t.getIndices().forEach(function(t){this.createIndexTable_(e,t.getNormalizedName())},this),this.createIndexTable_(e,t.getRowIdIndexName()))},lf.backstore.IndexedDB.prototype.createIndexTable_=function(e,t){e.objectStoreNames.contains(t)||e.createObjectStore(t,{keyPath:"id"})},lf.backstore.IndexedDB.prototype.createTx=function(e,t,r){var o=this.db_.transaction(lf.backstore.IndexedDB.getIndexedDBScope_(t),e==lf.TransactionType.READ_ONLY?"readonly":"readwrite");return new lf.backstore.IndexedDBTx(this.global_,o,e,this.bundledMode_,r)},lf.backstore.IndexedDB.getIndexedDBScope_=function(e){var t=lf.structs.set.create();return e.forEach(function(e){(t.add(e.getName()),e.persistentIndex())&&(e.getIndices().forEach(function(e){t.add(e.getNormalizedName())}),t.add(e.getRowIdIndexName()))}),lf.structs.set.values(t)},lf.backstore.IndexedDB.prototype.scanRowId_=function(e){var t=this.schema_.tables().map(function(e){return e.getName()}),r=this.db_,o=0,n=function(e){if(this.bundledMode_){var t=lf.backstore.Page.deserialize(e.value);return Object.keys(t.payload_).reduce(function(e,t){return Math.max(e,t)},0)}return e.key}.bind(this),i=function(){return 0==t.length?goog.Promise.resolve():function(t){return new goog.Promise(function(i,a){var s;try{s=(e||r.transaction([t])).objectStore(t).openCursor(null,"prev")}catch(l){return void a(l)}s.onsuccess=function(e){var t=e.target.result;t&&(o=Math.max(o,n(t))),i(o)},s.onerror=function(){i(o)}})}(t.shift()).then(i)};return new goog.Promise(function(e){i().then(function(){e(o)})})},lf.backstore.IndexedDB.prototype.close=function(){this.db_.close()},lf.backstore.IndexedDB.prototype.getTableInternal=function(){throw new lf.Exception(511)},lf.backstore.IndexedDB.prototype.subscribe=function(){},lf.backstore.IndexedDB.prototype.notify=function(){},lf.backstore.LocalStorageTable=function(e){this.key_=e,this.data_={};var t=window.localStorage.getItem(e);goog.isDefAndNotNull(t)&&(this.data_=JSON.parse(t))},lf.backstore.LocalStorageTable.prototype.get=function(e){var t;return 0==e.length?t=Object.keys(this.data_).map(function(e){var t=parseInt(e,10);return new lf.Row(t,this.data_[e])},this):(t=[],e.forEach(function(e){this.data_.hasOwnProperty(e.toString())&&t.push(new lf.Row(e,this.data_[e.toString()]))},this)),goog.Promise.resolve(t)},lf.backstore.LocalStorageTable.prototype.put=function(e){return e.forEach(function(e){this.data_[e.id().toString()]=e.payload_},this),goog.Promise.resolve()},lf.backstore.LocalStorageTable.prototype.remove=function(e){return 0==e.length||e.length==Object.keys(this.data_).length?this.data_={}:e.forEach(function(e){delete this.data_[e]},this),goog.Promise.resolve()},lf.backstore.LocalStorageTable.prototype.commit=function(){window.localStorage.setItem(this.key_,JSON.stringify(this.data_))},lf.backstore.LocalStorageTable.prototype.diff=function(e){var t=Object.keys(this.data_),r=Object.keys(e),o=new lf.cache.TableDiff(this.key_);return r.forEach(function(t){var r=parseInt(t,10);this.data_.hasOwnProperty(t)?JSON.stringify(this.data_[t])!=JSON.stringify(e[t])&&o.modify([new lf.Row(r,this.data_[t]),new lf.Row(r,e[t])]):o.add(new lf.Row(r,e[t]))},this),t.filter(function(t){return!e.hasOwnProperty(t)},this).forEach(function(e){o.delete(new lf.Row(parseInt(e,10),this.data_[e]))},this),o},lf.backstore.LocalStorageTx=function(e,t,r){lf.backstore.BaseTx.call(this,t,r),this.store_=e,t==lf.TransactionType.READ_ONLY&&this.resolver.resolve()},goog.inherits(lf.backstore.LocalStorageTx,lf.backstore.BaseTx),lf.backstore.LocalStorageTx.prototype.getTable=function(e){return this.store_.getTableInternal(e)},lf.backstore.LocalStorageTx.prototype.commitInternal=function(){return this.store_.commit(),this.resolver.resolve(),this.resolver.promise},lf.backstore.LocalStorage=function(e){this.schema_=e,this.tables_=lf.structs.map.create(),this.listener_=this.changeHandler_=null},lf.backstore.LocalStorage.prototype.initSync=function(){if(!window.localStorage)throw new lf.Exception(359);var e=this.schema_.name()+".version#",t=window.localStorage.getItem(e);if(goog.isDefAndNotNull(t)){if(t!=this.schema_.version().toString())throw new lf.Exception(360);this.loadTables_()}else this.loadTables_(),window.localStorage.setItem(e,this.schema_.version().toString()),this.commit()},lf.backstore.LocalStorage.prototype.init=function(){return new goog.Promise(function(e){this.initSync(),e()}.bind(this))},lf.backstore.LocalStorage.prototype.loadTables_=function(){var e=this.schema_.name()+".";this.schema_.tables().forEach(function(t){var r=t.getName();(this.tables_.set(r,new lf.backstore.LocalStorageTable(e+r)),t.persistentIndex())&&t.getIndices().forEach(function(t){var r=t.getNormalizedName();this.tables_.set(r,new lf.backstore.LocalStorageTable(e+r))},this)},this)},lf.backstore.LocalStorage.prototype.getTableInternal=function(e){if(!this.tables_.has(e))throw new lf.Exception(101,e);return this.tables_.get(e)},lf.backstore.LocalStorage.prototype.createTx=function(e,t,r){return new lf.backstore.LocalStorageTx(this,e,r)},lf.backstore.LocalStorage.prototype.close=function(){},lf.backstore.LocalStorage.prototype.subscribe=function(e){this.changeHandler_=e,goog.isDefAndNotNull(this.listener_)||(this.listener_=this.onStorageEvent_.bind(this),window.addEventListener("storage",this.listener_,!1))},lf.backstore.LocalStorage.prototype.commit=function(){this.tables_.forEach(function(e){e.commit()})},lf.backstore.LocalStorage.prototype.notify=function(e){goog.isDefAndNotNull(this.changeHandler_)&&this.changeHandler_(e)},lf.backstore.LocalStorage.prototype.onStorageEvent_=function(e){var t=e;if(t.storageArea==window.localStorage&&0==t.key.indexOf(this.schema_.name()+".")){var r=window.localStorage.getItem(t.key),o={};if(!goog.isNull(r))try{o=JSON.parse(r)}catch(a){return}var n=t.key.slice(this.schema_.name().length+1),i=this.tables_.get(n);i&&this.changeHandler_([i.diff(o)])}},lf.backstore.MemoryTx=function(e,t,r){lf.backstore.BaseTx.call(this,t,r),this.store_=e,t==lf.TransactionType.READ_ONLY&&this.resolver.resolve()},goog.inherits(lf.backstore.MemoryTx,lf.backstore.BaseTx),lf.backstore.MemoryTx.prototype.getTable=function(e){return this.store_.getTableInternal(e)},lf.backstore.MemoryTx.prototype.commitInternal=function(){return this.resolver.resolve(),this.resolver.promise},lf.backstore.Memory=function(e){this.schema_=e,this.tables_=lf.structs.map.create()},lf.backstore.Memory.prototype.init=function(){return this.schema_.tables().forEach(this.initTable_,this),goog.Promise.resolve()},lf.backstore.Memory.prototype.getTableInternal=function(e){var t=this.tables_.get(e)||null;if(goog.isNull(t))throw new lf.Exception(101,e);return t},lf.backstore.Memory.prototype.createTx=function(e,t,r){return new lf.backstore.MemoryTx(this,e,r)},lf.backstore.Memory.prototype.createTable_=function(e){if(!this.tables_.has(e)){var t=new lf.backstore.MemoryTable;return this.tables_.set(e,t),t}return null},lf.backstore.Memory.prototype.initTable_=function(e){(this.createTable_(e.getName()),e.persistentIndex())&&(e.getIndices().forEach(function(e){this.createTable_(e.getNormalizedName())},this),this.createTable_(e.getRowIdIndexName()))},lf.backstore.Memory.prototype.close=function(){},lf.backstore.Memory.prototype.subscribe=function(){},lf.backstore.Memory.prototype.notify=function(){},lf.backstore.ObservableStore=function(e){lf.backstore.Memory.call(this,e),this.observer_=null},goog.inherits(lf.backstore.ObservableStore,lf.backstore.Memory),lf.backstore.ObservableStore.prototype.subscribe=function(e){goog.isNull(this.observer_)&&(this.observer_=e)},lf.backstore.ObservableStore.prototype.notify=function(e){goog.isNull(this.observer_)||this.observer_(e)},lf.backstore.WebSqlTable=function(e,t,r){this.tx_=e,this.name_=\'"\'+t+\'"\',this.deserializeFn_=r},lf.backstore.WebSqlTable.prototype.get=function(e){var t=0==e.length?"":"WHERE id IN ("+e.join(",")+")",r="SELECT id, value FROM "+this.name_+" "+t,o=this.deserializeFn_;return this.tx_.queue(r,[],function(e){for(var t=e.rows.length,r=Array(t),n=0;n<t;++n)r[n]=o({id:e.rows.item(n).id,value:JSON.parse(e.rows.item(n).value)});return r})},lf.backstore.WebSqlTable.prototype.put=function(e){if(0==e.length)return goog.Promise.resolve();var t="INSERT OR REPLACE INTO "+this.name_+"(id, value) VALUES (?, ?)";return e.forEach(function(e){this.tx_.queue(t,[e.id(),JSON.stringify(e.payload_)])},this),goog.Promise.resolve()},lf.backstore.WebSqlTable.prototype.remove=function(e){var t=0==e.length?"":"WHERE id IN ("+e.join(",")+")",r="DELETE FROM "+this.name_+" "+t;return this.tx_.queue(r,[]),goog.Promise.resolve()},lf.backstore.WebSqlTx=function(e,t,r){lf.backstore.BaseTx.call(this,t,r),this.db_=e,this.tables_=lf.structs.map.create(),this.commands_=[]},goog.inherits(lf.backstore.WebSqlTx,lf.backstore.BaseTx),lf.backstore.WebSqlTx.INDEX_MARK="__d__",lf.backstore.WebSqlTx.escapeTableName=function(e){return e.replace(".",lf.backstore.WebSqlTx.INDEX_MARK).replace("#","__s__")},lf.backstore.WebSqlTx.prototype.getTable=function(e,t){var r=this.tables_.get(e)||null;return goog.isNull(r)&&(r=new lf.backstore.WebSqlTable(this,lf.backstore.WebSqlTx.escapeTableName(e),t),this.tables_.set(e,r)),r},lf.backstore.WebSqlTx.prototype.queue=function(e,t,r){var o=goog.Promise.withResolver();return this.commands_.push({statement:e,params:t,transform:r,resolver:o}),o.promise},lf.backstore.WebSqlTx.prototype.commitInternal=function(){var e=null,t=this.resolver.reject.bind(this.resolver),r=function(e,t){this.resolver.reject(t)}.bind(this),o=[],n=function(t,i){if(!goog.isNull(e)){var a=i;goog.isDefAndNotNull(e.transform)&&goog.isDefAndNotNull(i)&&(a=e.transform(i)),o.push(a),e.resolver.resolve(a)}if(0<this.commands_.length){var s=this.commands_.shift();e=s,t.executeSql(s.statement,s.params,n,r)}else this.resolver.resolve(o)}.bind(this);return this.txType==lf.TransactionType.READ_ONLY?this.db_.readTransaction(n,t):this.db_.transaction(n,t),this.resolver.promise},lf.backstore.WebSqlRawBackStore=function(e,t,r){this.db_=r,this.global_=e,this.version_=t},goog.exportSymbol("lf.backstore.WebSqlRawBackStore",lf.backstore.WebSqlRawBackStore),lf.backstore.WebSqlRawBackStore.prototype.getRawDBInstance=function(){return this.db_},goog.exportProperty(lf.backstore.WebSqlRawBackStore.prototype,"getRawDBInstance",lf.backstore.WebSqlRawBackStore.prototype.getRawDBInstance),lf.backstore.WebSqlRawBackStore.prototype.getRawTransaction=function(){throw new lf.Exception(356)},goog.exportProperty(lf.backstore.WebSqlRawBackStore.prototype,"getRawTransaction",lf.backstore.WebSqlRawBackStore.prototype.getRawTransaction),lf.backstore.WebSqlRawBackStore.prototype.createTx_=function(){return new lf.backstore.WebSqlTx(this.db_,lf.TransactionType.READ_WRITE,new lf.cache.Journal(this.global_,lf.structs.set.create()))},lf.backstore.WebSqlRawBackStore.prototype.dropTable=function(e){var t=this.createTx_();return t.queue("DROP TABLE "+e,[]),t.commit()},goog.exportProperty(lf.backstore.WebSqlRawBackStore.prototype,"dropTable",lf.backstore.WebSqlRawBackStore.prototype.dropTable),lf.backstore.WebSqlRawBackStore.prototype.dumpTable_=function(e){var t=this.createTx_();return t.queue("SELECT id, value FROM "+e,[]),t.commit().then(function(e){for(var t=e[0].rows.length,r=Array(t),o=0;o<t;++o)r[o]={id:e[0].rows.item(o).id,value:JSON.parse(e[0].rows.item(o).value)};return goog.Promise.resolve(r)})},lf.backstore.WebSqlRawBackStore.prototype.transformColumn_=function(e,t){var r=this.createTx_(),o="UPDATE "+e+" SET value=? WHERE id=?";return this.dumpTable_(e).then(function(e){return e.forEach(function(e){var n=t(e);r.queue(o,[JSON.stringify(n.value),n.id])}),r.commit()})},lf.backstore.WebSqlRawBackStore.prototype.addTableColumn=function(e,t,r){var o=lf.backstore.IndexedDBRawBackStore.convert(r);return this.transformColumn_(e,function(e){return e.value[t]=o,e})},goog.exportProperty(lf.backstore.WebSqlRawBackStore.prototype,"addTableColumn",lf.backstore.WebSqlRawBackStore.prototype.addTableColumn),lf.backstore.WebSqlRawBackStore.prototype.dropTableColumn=function(e,t){return this.transformColumn_(e,function(e){return delete e.value[t],e})},goog.exportProperty(lf.backstore.WebSqlRawBackStore.prototype,"dropTableColumn",lf.backstore.WebSqlRawBackStore.prototype.dropTableColumn),lf.backstore.WebSqlRawBackStore.prototype.renameTableColumn=function(e,t,r){return this.transformColumn_(e,function(e){return e.value[r]=e.value[t],delete e.value[t],e})},goog.exportProperty(lf.backstore.WebSqlRawBackStore.prototype,"renameTableColumn",lf.backstore.WebSqlRawBackStore.prototype.renameTableColumn),lf.backstore.WebSqlRawBackStore.prototype.createRow=function(e){var t,r={};for(t in e)r[t]=lf.backstore.IndexedDBRawBackStore.convert(e[t]);return lf.Row.create(r)},goog.exportProperty(lf.backstore.WebSqlRawBackStore.prototype,"createRow",lf.backstore.WebSqlRawBackStore.prototype.createRow),lf.backstore.WebSqlRawBackStore.prototype.getVersion=function(){return this.version_},goog.exportProperty(lf.backstore.WebSqlRawBackStore.prototype,"getVersion",lf.backstore.WebSqlRawBackStore.prototype.getVersion),lf.backstore.WebSqlRawBackStore.queueListTables=function(e){e.queue(\'SELECT tbl_name FROM sqlite_master WHERE type="table"\',[],function(e){for(var t=Array(e.rows.length),r=0;r<t.length;++r)t[r]=e.rows.item(r).tbl_name;return t})},lf.backstore.WebSqlRawBackStore.prototype.dump=function(){var e=goog.Promise.withResolver(),t=this.createTx_();lf.backstore.WebSqlRawBackStore.queueListTables(t);var r={};return t.commit().then(function(t){var o=t[0].filter(function(e){return"__lf_ver"!=e&&"__WebKitDatabaseInfoTable__"!=e}).map(function(e){return this.dumpTable_(e).then(function(t){r[e]=t})},this);goog.Promise.all(o).then(function(){e.resolve(r)})}.bind(this)),e.promise},goog.exportProperty(lf.backstore.WebSqlRawBackStore.prototype,"dump",lf.backstore.WebSqlRawBackStore.prototype.dump),lf.backstore.WebSql=function(e,t,r){this.global_=e,this.schema_=t,this.size_=r||1},lf.backstore.WebSql.prototype.getEmptyJournal_=function(){return new lf.cache.Journal(this.global_,lf.structs.set.create())},lf.backstore.WebSql.prototype.init=function(e){if(!goog.isDefAndNotNull(window.openDatabase))throw new lf.Exception(353);var t=e||function(){return goog.Promise.resolve()};return new goog.Promise(function(e,r){var o=window.openDatabase(this.schema_.name(),"",this.schema_.name(),this.size_);if(!goog.isDefAndNotNull(o))throw new lf.Exception(354);this.db_=o,this.checkVersion_(t).then(function(){this.scanRowId_().then(e,r)}.bind(this),function(e){if(e instanceof lf.Exception)throw e;throw new lf.Exception(354,e.message)})},this)},lf.backstore.WebSql.prototype.checkVersion_=function(e){var t=goog.Promise.withResolver(),r=new lf.backstore.WebSqlTx(this.db_,lf.TransactionType.READ_WRITE,this.getEmptyJournal_());return r.queue("CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]),r.queue("SELECT v FROM __lf_ver WHERE id = 0",[]),r.commit().then(function(r){var o=0;r[1].rows.length&&(o=r[1].rows.item(0).v),o<this.schema_.version()?this.onUpgrade_(e,o).then(t.resolve.bind(t)):o>this.schema_.version()?t.reject(new lf.Exception(108)):t.resolve()}.bind(this),t.reject.bind(t)),t.promise},lf.backstore.WebSql.prototype.createTx=function(e,t,r){if(goog.isDefAndNotNull(this.db_))return new lf.backstore.WebSqlTx(this.db_,e,r);throw new lf.Exception(2)},lf.backstore.WebSql.prototype.close=function(){},lf.backstore.WebSql.prototype.getTableInternal=function(){throw new lf.Exception(512)},lf.backstore.WebSql.prototype.notSupported_=function(){throw new lf.Exception(355)},lf.backstore.WebSql.prototype.subscribe=function(){this.notSupported_()},lf.backstore.WebSql.prototype.notify=function(){this.notSupported_()},lf.backstore.WebSql.prototype.onUpgrade_=function(e,t){return this.preUpgrade_().then(function(){var r=new lf.backstore.WebSqlRawBackStore(this.global_,t,this.db_);return e(r)}.bind(this))},lf.backstore.WebSql.escape_=function(e){return\'"\'+e+\'"\'},lf.backstore.WebSql.prototype.preUpgrade_=function(){var e=this.schema_.tables(),t=new lf.backstore.WebSqlTx(this.db_,lf.TransactionType.READ_WRITE,this.getEmptyJournal_()),r=new lf.backstore.WebSqlTx(this.db_,lf.TransactionType.READ_WRITE,this.getEmptyJournal_());return t.queue("INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[this.schema_.version()]),lf.backstore.WebSqlRawBackStore.queueListTables(t),t.commit().then(function(t){var o=t[1];o.filter(function(e){return-1!=e.indexOf(lf.backstore.WebSqlTx.INDEX_MARK)}).forEach(function(e){r.queue("DROP TABLE "+lf.backstore.WebSql.escape_(e),[])});var n=[],i=[],a=[];return e.map(function(e){if(-1==o.indexOf(e.getName())&&n.push(e.getName()),e.persistentIndex){e.getIndices().forEach(function(e){var t=lf.backstore.WebSqlTx.escapeTableName(e.getNormalizedName());n.push(t),i.push(t)});var t=lf.backstore.WebSqlTx.escapeTableName(e.getRowIdIndexName());n.push(t),a.push(t)}}),n.forEach(function(e){r.queue("CREATE TABLE "+lf.backstore.WebSql.escape_(e)+"(id INTEGER PRIMARY KEY, value TEXT)",[])}),r.commit()})},lf.backstore.WebSql.prototype.scanRowId_=function(){var e=0,t=goog.Promise.withResolver(),r=function(t){var r=new lf.backstore.WebSqlTx(this.db_,lf.TransactionType.READ_ONLY);return r.queue("SELECT MAX(id) FROM "+lf.backstore.WebSql.escape_(t),[]),r.commit().then(function(t){var r=t[0].rows.item(0)["MAX(id)"];e=Math.max(r,e)})}.bind(this),o=this.schema_.tables().map(function(e){return r(e.getName())});return goog.Promise.all(o).then(function(){lf.Row.setNextIdIfGreater(e+1),t.resolve()},function(e){t.reject(e)}),t.promise},lf.cache.Cache=function(){},lf.cache.DefaultCache=function(e){this.map_=lf.structs.map.create(),this.tableRows_=lf.structs.map.create(),e.tables().forEach(function(e){this.tableRows_.set(e.getName(),lf.structs.set.create())},this)},lf.cache.DefaultCache.prototype.set=function(e,t){this.map_.set(t.id(),t),this.tableRows_.get(e).add(t.id())},lf.cache.DefaultCache.prototype.setMany=function(e,t){var r=this.tableRows_.get(e);t.forEach(function(e){this.map_.set(e.id(),e),r.add(e.id())},this)},lf.cache.DefaultCache.prototype.get=function(e){return this.map_.get(e)||null},lf.cache.DefaultCache.prototype.getMany=function(e){return e.map(function(e){return this.get(e)},this)},lf.cache.DefaultCache.prototype.getRange=function(e,t,r){var o=[],n=Math.min(t,r),i=Math.max(t,r),a=this.tableRows_.get(e);if(a.size<i-n)a.forEach(function(e){if(e>=n&&e<=i){var t=this.map_.get(e);goog.asserts.assert(goog.isDefAndNotNull(t),"Inconsistent cache"),o.push(t)}},this);else for(var s=n;s<=i;++s)if(a.has(s)){var l=this.map_.get(s);goog.asserts.assert(goog.isDefAndNotNull(l),"Inconsistent cache"),o.push(l)}return o},lf.cache.DefaultCache.prototype.remove=function(e,t){this.map_.delete(t),this.tableRows_.get(e).delete(t)},lf.cache.DefaultCache.prototype.getCount=function(e){return goog.isDefAndNotNull(e)?this.tableRows_.get(e).size:this.map_.size},lf.cache.DefaultCache.prototype.clear=function(){this.map_.clear(),this.tableRows_.clear()},lf.structs.array={},lf.structs.array.binarySearch_=function(e,t,r){for(var o=0,n=e.length,i=r||lf.structs.array.defaultComparator_;o<n;){var a=o+n>>1;0>i(e[a],t)?o=a+1:n=a}return o==n&&e[o]==t?o:~o},lf.structs.array.defaultComparator_=function(e,t){return e-t},lf.structs.array.binaryInsert=function(e,t,r){var o=lf.structs.array.binarySearch_(e,t,r);return 0>o&&(e.splice(-(o+1),0,t),!0)},lf.structs.array.binaryRemove=function(e,t,r){var o=lf.structs.array.binarySearch_(e,t,r);return!(0>o)&&(e.splice(o,1),!0)},lf.index.hashCode=function(e){for(var t=0,r=0;r<e.length;++r)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t},lf.index.hashArray=function(e){return e.map(function(e){return goog.isDefAndNotNull(e)?lf.index.hashCode(e.toString()).toString(32):""}).join("_")},lf.index.slice=function(e,t,r,o){var n=t?e.reverse():e;if(!goog.isDefAndNotNull(r)&&!goog.isDefAndNotNull(o))return n;var i=Math.min(goog.isDef(r)?r:n.length,n.length);if(0==i)return[];var a=Math.min(o||0,n.length);return n.slice(a,a+i)},lf.index.Stats=function(){this.totalRows=0,this.maxKeyEncountered=null},lf.index.Stats.prototype.add=function(e,t){this.totalRows+=t,goog.isNull(this.maxKeyEncountered)?this.maxKeyEncountered=e:this.maxKeyEncountered=e>this.maxKeyEncountered?e:this.maxKeyEncountered},lf.index.Stats.prototype.remove=function(e,t){this.totalRows-=t},lf.index.Stats.prototype.clear=function(){this.totalRows=0},lf.index.Stats.prototype.updateFromList=function(e){this.clear(),e.forEach(function(e){this.totalRows+=e.totalRows},this)},lf.index.BTree=function(e,t,r,o){this.name_=e,this.comparator_=t,this.uniqueKeyOnly_=r,this.stats_=new lf.index.Stats,o?this.root_=lf.index.BTreeNode_.fromData(this,o):this.clear()},lf.index.BTree.EMPTY=[],lf.index.BTree.prototype.getName=function(){return this.name_},lf.index.BTree.prototype.toString=function(){return this.root_.toString()},lf.index.BTree.prototype.add=function(e,t){this.root_=this.root_.insert(e,t)},lf.index.BTree.prototype.set=function(e,t){this.root_=this.root_.insert(e,t,!0)},lf.index.BTree.prototype.remove=function(e,t){this.root_=this.root_.remove(e,t)},lf.index.BTree.prototype.get=function(e){return this.root_.get(e)},lf.index.BTree.prototype.cost=function(e){if(!goog.isDefAndNotNull(e))return this.stats().totalRows;if(e instanceof lf.index.SingleKeyRange){if(e.isAll())return this.stats().totalRows;if(e.isOnly())return this.get(e.from).length}return this.getRange([e]).length},lf.index.BTree.prototype.stats=function(){return this.stats_},lf.index.BTree.prototype.getAll_=function(e,t,r,o){var n=t?this.stats_.totalRows-e-o:o,i=Array(e),a={offset:n,count:e,startIndex:0};return this.root_.fill(a,i),t?i.reverse():i},lf.index.BTree.prototype.getRange=function(e,t,r,o){var n=this.root_.getLeftMostNode().keys_[0];if(!goog.isDef(n)||0==r)return lf.index.BTree.EMPTY;var i=t||!1,a=goog.isDefAndNotNull(r)?Math.min(r,this.stats_.totalRows):this.stats_.totalRows,s=o||0,l=Math.min(Math.max(this.stats_.totalRows-s,0),a);if(0==l)return lf.index.BTree.EMPTY;if(!goog.isDef(e)||1==e.length&&e[0]instanceof lf.index.SingleKeyRange&&e[0].isAll())return this.getAll_(l,i,a,s);var c=this.comparator_.sortKeyRanges(e),u=Array(i?this.stats_.totalRows:l),f={count:0,limit:u.length,reverse:i,skip:s},g=1<this.comparator().keyDimensions();return c.forEach(function(e){for(var t=this.comparator_.rangeToKeys(e),r=this.comparator_.isLeftOpen(e)?n:t[0],o=this.root_.getContainingLeaf(r),i=0;goog.isDefAndNotNull(o)&&f.count<f.limit;)g?o.getRangeWithFilter(e,f,u):o.getRange(e,f,u),0!=f.skip||o.isFirstKeyInRange(e)?i=0:i++,o=2==i?null:o.next()},this),u.length>f.count&&u.splice(f.count,u.length-f.count),i?lf.index.slice(u,i,a,s):u},lf.index.BTree.prototype.clear=function(){this.root_=lf.index.BTreeNode_.create(this),this.stats_.clear()},lf.index.BTree.prototype.containsKey=function(e){return this.root_.containsKey(e)},lf.index.BTree.prototype.min=function(){return this.minMax_(this.comparator_.min.bind(this.comparator_))},lf.index.BTree.prototype.max=function(){return this.minMax_(this.comparator_.max.bind(this.comparator_))},lf.index.BTree.prototype.checkNullKey_=function(e,t){if(!this.comparator_.comparable(e.keys_[t])){if(!(1<e.keys_[t].length))return null;if(goog.isNull(e.keys_[t][0]))return null}return[e.keys_[t],this.uniqueKeyOnly_?[e.values_[t]]:e.values_[t]]},lf.index.BTree.prototype.findLeftMost_=function(){var e=this.root_.getLeftMostNode(),t=0;do{if(t>=e.keys_.length)e=e.next_,t=0;else{var r=this.checkNullKey_(e,t);if(!goog.isNull(r))return r;t++}}while(!goog.isNull(e));return null},lf.index.BTree.prototype.findRightMost_=function(){var e=this.root_.getRightMostNode(),t=e.keys_.length-1;do{if(0>t)e=e.prev_,t=0;else{var r=this.checkNullKey_(e,t);if(!goog.isNull(r))return r;t--}}while(!goog.isNull(e));return null},lf.index.BTree.prototype.minMax_=function(e){var t=this.findLeftMost_(),r=this.findRightMost_();return goog.isNull(t)||goog.isNull(r)?null:e(t[0],r[0])==lf.index.Favor.LHS?t:r},lf.index.BTree.prototype.isUniqueKey=function(){return this.uniqueKeyOnly_},lf.index.BTree.prototype.comparator=function(){return this.comparator_},lf.index.BTree.prototype.eq=function(e,t){return!!goog.isDefAndNotNull(e)&&this.comparator_.compare(e,t)==lf.index.Favor.TIE},lf.index.BTree.prototype.serialize=function(){var e=this.root_.getLeftMostNode();return lf.index.BTreeNode_.serialize(e)},lf.index.BTree.deserialize=function(e,t,r,o){var n=new lf.index.BTree(t,e,r),i=lf.index.BTreeNode_.deserialize(o,n);return n.root_=i,n},lf.index.BTreeNode_=function(e,t){this.id_=e,this.tree_=t,this.height_=0,this.next_=this.prev_=this.parent_=null,this.keys_=[],this.values_=[],this.children_=[],this.getContainingLeaf=1==t.comparator().keyDimensions()?this.getContainingLeaf_:this.getContainingLeafMultiKey_},lf.index.BTreeNode_.MAX_COUNT_=512,lf.index.BTreeNode_.MAX_KEY_LEN_=lf.index.BTreeNode_.MAX_COUNT_-1,lf.index.BTreeNode_.MIN_KEY_LEN_=lf.index.BTreeNode_.MAX_COUNT_>>1,lf.index.BTreeNode_.create=function(e){return new lf.index.BTreeNode_(lf.Row.getNextId(),e)},lf.index.BTreeNode_.prototype.isLeaf_=function(){return 0==this.height_},lf.index.BTreeNode_.prototype.isRoot_=function(){return goog.isNull(this.parent_)},lf.index.BTreeNode_.prototype.next=function(){return this.next_},lf.index.BTreeNode_.dumpLevel_=function(e){var t=e.id_+"["+e.keys_.join("|")+"]",r=e.children_.map(function(e){return e.id_}).join("|"),o=e.values_.join("/"),n=function(e){return goog.isDefAndNotNull(e)?e.id_.toString():"_"},i=n(e.prev_)+"{";i=(i=e.isLeaf_()?i+o:i+r)+"}"+n(e.parent_);if(e.next_){var a=lf.index.BTreeNode_.dumpLevel_(e.next_);t=t+"  "+a[0],i=i+"  "+a[1]}return[t,i]},lf.index.BTreeNode_.prototype.toString=function(){var e="",t=lf.index.BTreeNode_.dumpLevel_(this);e=e+(t[0]+"\\n")+t[1]+"\\n";return this.children_.length&&(e+=this.children_[0].toString()),e},lf.index.BTreeNode_.prototype.getLeftMostNode=function(){return this.isLeaf_()?this:this.children_[0].getLeftMostNode()},lf.index.BTreeNode_.prototype.getRightMostNode=function(){return this.isLeaf_()?this:this.children_[this.children_.length-1].getRightMostNode()},lf.index.BTreeNode_.associate_=function(e,t){t&&(t.prev_=e),e&&(e.next_=t)},lf.index.BTreeNode_.calcNodeLen_=function(e){var t=lf.index.BTreeNode_.MAX_KEY_LEN_,r=lf.index.BTreeNode_.MIN_KEY_LEN_+1;return e>=t+r?t:e>=r&&e<=t?e:r},lf.index.BTreeNode_.createLeaves_=function(e,t){for(var r=t.length,o=0,n=lf.index.BTreeNode_.create(e),i=n;0<r;){var a=lf.index.BTreeNode_.calcNodeLen_(r),s=t.slice(o,o+a);if(n.keys_=s.map(function(e){return e.key}),n.values_=s.map(function(e){return e.value}),o+=a,0<(r-=a)){var l=lf.index.BTreeNode_.create(n.tree_);lf.index.BTreeNode_.associate_(n,l),n=l}}return i},lf.index.BTreeNode_.createParent_=function(e){var t=e[0],r=lf.index.BTreeNode_.create(t.tree_);r.height_=t.height_+1,r.children_=e;for(var o=0;o<e.length;++o)e[o].parent_=r,0<o&&r.keys_.push(e[o].keys_[0]);return r},lf.index.BTreeNode_.createInternals_=function(e){var t,r=e,o=[];do{o.push(r),r=r.next_}while(r);if(o.length<=lf.index.BTreeNode_.MAX_KEY_LEN_+1)t=lf.index.BTreeNode_.createParent_(o);else{var n=o.length,i=0;for((t=lf.index.BTreeNode_.create(e.tree_)).height_=e.height_+2;0<n;){var a=lf.index.BTreeNode_.calcNodeLen_(n),s=o.slice(i,i+a),l=lf.index.BTreeNode_.createParent_(s);l.parent_=t,t.children_.length&&(t.keys_.push(s[0].keys_[0]),lf.index.BTreeNode_.associate_(t.children_[t.children_.length-1],l)),t.children_.push(l),i+=a,n-=a}}return t},lf.index.BTreeNode_.fromData=function(e,t){var r=(r=lf.index.BTreeNode_.MAX_KEY_LEN_)*r*r;if(t.length>=r)throw new lf.Exception(6,r);var o=lf.index.BTreeNode_.createLeaves_(e,t);return lf.index.BTreeNode_.createInternals_(o)},lf.index.BTreeNode_.prototype.get=function(e){var t=this.searchKey_(e);if(this.isLeaf_()){var r=lf.index.BTree.EMPTY;return this.tree_.eq(this.keys_[t],e)&&(r=r.concat(this.values_[t])),r}return t=this.tree_.eq(this.keys_[t],e)?t+1:t,this.children_[t].get(e)},lf.index.BTreeNode_.prototype.containsKey=function(e){var t=this.searchKey_(e);return!!this.tree_.eq(this.keys_[t],e)||!this.isLeaf_()&&this.children_[t].containsKey(e)},lf.index.BTreeNode_.prototype.remove=function(e,t){if(this.delete_(e,-1,t),this.isRoot_()){var r=this;return 1==this.children_.length&&((r=this.children_[0]).parent_=null),r}return this},lf.index.BTreeNode_.leftMostKey_=function(e){return e.isLeaf_()?e.keys_[0]:lf.index.BTreeNode_.leftMostKey_(e.children_[0])},lf.index.BTreeNode_.prototype.fix_=function(){this.keys_=[];for(var e=1;e<this.children_.length;++e)this.keys_.push(lf.index.BTreeNode_.leftMostKey_(this.children_[e]))},lf.index.BTreeNode_.prototype.delete_=function(e,t,r){var o=this.searchKey_(e),n=this.isLeaf_();if(n){if(!this.tree_.eq(this.keys_[o],e))return!1}else{var i=this.tree_.eq(this.keys_[o],e)?o+1:o;if(!this.children_[i].delete_(e,i,r))return!1;this.fix_()}if(this.keys_.length>o&&this.tree_.eq(this.keys_[o],e)){if(goog.isDef(r)&&!this.tree_.isUniqueKey()&&n&&(lf.structs.array.binaryRemove(this.values_[o],r)&&this.tree_.stats().remove(e,1),this.values_[o].length))return!1;if(this.keys_.splice(o,1),n){var a=this.tree_.isUniqueKey()?1:this.values_[o].length;this.values_.splice(o,1),this.tree_.stats().remove(e,a)}}return this.keys_.length<lf.index.BTreeNode_.MIN_KEY_LEN_&&!this.isRoot_()&&(this.steal_()||this.merge_(t)),!0},lf.index.BTreeNode_.prototype.steal_=function(){var e,t,r,o;if(this.next_&&this.next_.keys_.length>lf.index.BTreeNode_.MIN_KEY_LEN_)e=this.next_,r=t=0,o=this.keys_.length+1;else{if(!(this.prev_&&this.prev_.keys_.length>lf.index.BTreeNode_.MIN_KEY_LEN_))return!1;e=this.prev_,t=this.prev_.keys_.length-1,r=this.isLeaf_()?t:t+1,o=0}this.keys_.splice(o,0,e.keys_[t]),e.keys_.splice(t,1);var n,i=this.isLeaf_()?this.values_:this.children_;return this.isLeaf_()?n=e.values_:(n=e.children_)[r].parent_=this,i.splice(o,0,n[r]),n.splice(r,1),e.isLeaf_()||(e.fix_(),this.fix_()),!0},lf.index.BTreeNode_.prototype.merge_=function(e){var t,r,o;this.next_&&this.next_.keys_.length<lf.index.BTreeNode_.MAX_KEY_LEN_?(t=this.next_,o=r=0):this.prev_&&(r=(t=this.prev_).keys_.length,o=t.isLeaf_()?t.values_.length:t.children_.length);var n=[r,0].concat(this.keys_);Array.prototype.splice.apply(t.keys_,n);var i=null;this.isLeaf_()?i=this.values_:(i=this.children_).forEach(function(e){e.parent_=t}),n=[o,0].concat(i),Array.prototype.splice.apply(t.isLeaf_()?t.values_:t.children_,n),lf.index.BTreeNode_.associate_(this.prev_,this.next_),t.isLeaf_()||t.fix_(),-1!=e&&(this.parent_.keys_.splice(e,1),this.parent_.children_.splice(e,1))},lf.index.BTreeNode_.prototype.insert=function(e,t,r){var o=this.searchKey_(e);if(this.isLeaf_()){if(this.tree_.eq(this.keys_[o],e)){if(r)this.tree_.stats().remove(e,this.tree_.isUniqueKey()?1:this.values_[o].length),this.values_[o]=this.tree_.isUniqueKey()?t:[t];else{if(this.tree_.isUniqueKey())throw new lf.Exception(201,this.tree_.getName(),JSON.stringify(e));if(!lf.structs.array.binaryInsert(this.values_[o],t))throw new lf.Exception(109)}return this.tree_.stats().add(e,1),this}return this.keys_.splice(o,0,e),this.values_.splice(o,0,this.tree_.isUniqueKey()?t:[t]),this.tree_.stats().add(e,1),this.keys_.length==lf.index.BTreeNode_.MAX_COUNT_?this.splitLeaf_():this}o=this.tree_.eq(this.keys_[o],e)?o+1:o;var n=this.children_[o].insert(e,t,r);return n.isLeaf_()||1!=n.keys_.length||(this.keys_.splice(o,0,n.keys_[0]),n.children_[1].parent_=this,n.children_[0].parent_=this,this.children_.splice(o,1,n.children_[1]),this.children_.splice(o,0,n.children_[0])),this.keys_.length==lf.index.BTreeNode_.MAX_COUNT_?this.splitInternal_():this},lf.index.BTreeNode_.prototype.splitLeaf_=function(){var e=lf.index.BTreeNode_.MIN_KEY_LEN_,t=lf.index.BTreeNode_.create(this.tree_),r=lf.index.BTreeNode_.create(this.tree_);return r.height_=1,r.keys_=[this.keys_[e]],r.children_=[this,t],r.parent_=this.parent_,this.parent_=r,t.keys_=this.keys_.splice(e),t.values_=this.values_.splice(e),t.parent_=r,lf.index.BTreeNode_.associate_(t,this.next_),lf.index.BTreeNode_.associate_(this,t),r},lf.index.BTreeNode_.prototype.splitInternal_=function(){var e=lf.index.BTreeNode_.MIN_KEY_LEN_,t=lf.index.BTreeNode_.create(this.tree_),r=lf.index.BTreeNode_.create(this.tree_);return t.parent_=this.parent_,t.height_=this.height_+1,t.keys_=[this.keys_[e]],t.children_=[this,r],this.keys_.splice(e,1),r.parent_=t,r.height_=this.height_,r.keys_=this.keys_.splice(e),r.children_=this.children_.splice(e+1),r.children_.forEach(function(e){e.parent_=r}),this.parent_=t,lf.index.BTreeNode_.associate_(r,this.next_),lf.index.BTreeNode_.associate_(this,r),t},lf.index.BTreeNode_.prototype.searchKey_=function(e){for(var t=0,r=this.keys_.length,o=this.tree_.comparator();t<r;){var n=t+r>>1;o.compare(this.keys_[n],e)==lf.index.Favor.RHS?t=n+1:r=n}return t},lf.index.BTreeNode_.prototype.getContainingLeaf_=function(e){if(!this.isLeaf_()){var t=this.searchKey_(e);return this.tree_.eq(this.keys_[t],e)&&t++,this.children_[t].getContainingLeaf_(e)}return this},lf.index.BTreeNode_.prototype.getContainingLeafMultiKey_=function(e){if(!this.isLeaf_()){var t=this.searchKey_(e);if(this.tree_.eq(this.keys_[t],e))e.some(function(e){return e==lf.index.SingleKeyRange.UNBOUND_VALUE})||t++;return this.children_[t].getContainingLeafMultiKey_(e)}return this},lf.index.BTreeNode_.prototype.getRange=function(e,t,r){var o=this.tree_.comparator(),n=0,i=this.keys_.length-1,a=function(e){return e[0]?e[1]?lf.index.Favor.TIE:lf.index.Favor.LHS:lf.index.Favor.RHS},s=this.keys_,l=a(o.compareRange(s[n],e)),c=a(o.compareRange(s[i],e));if(l!=lf.index.Favor.LHS&&(l!=lf.index.Favor.RHS||c!=lf.index.Favor.RHS)){var u=function(e,t){var r=e+t>>1;return r==e?r+1:r},f=function(t,r,n){if(t>=r)return n==lf.index.Favor.TIE?r:-1;var i=a(o.compareRange(s[t],e));if(i==lf.index.Favor.TIE)return t;if(i==lf.index.Favor.LHS)return-1;var l=u(t,r);if(l==r)return n==lf.index.Favor.TIE?r:-1;var c=a(o.compareRange(s[l],e));return c==lf.index.Favor.TIE?f(t,l,c):c==lf.index.Favor.RHS?f(l+1,r,n):f(t+1,l,c)},g=function(t,r){if(t>=r)return t;var n=a(o.compareRange(s[r],e));if(n==lf.index.Favor.TIE)return r;if(n==lf.index.Favor.RHS)return t;var i=u(t,r);if(i==r)return t;var l=a(o.compareRange(s[i],e));return l==lf.index.Favor.TIE?g(i,r):l==lf.index.Favor.LHS?g(t,i-1):-1};l!=lf.index.Favor.TIE&&(n=f(n+1,i,c)),-1!=n&&(-1!=(i=g(n,i))&&i>=n&&this.appendResults_(t,r,n,i+1))}},lf.index.BTreeNode_.prototype.appendResultsAt_=function(e,t,r){if(this.tree_.isUniqueKey())!e.reverse&&e.skip?e.skip--:t[e.count++]=this.values_[r];else for(var o=0;o<this.values_[r].length&&e.count<t.length;++o)!e.reverse&&e.skip?e.skip--:t[e.count++]=this.values_[r][o]},lf.index.BTreeNode_.prototype.appendResults_=function(e,t,r,o){for(var n=r;n<o&&(e.reverse||!(e.count>=e.limit));++n)this.appendResultsAt_(e,t,n)},lf.index.BTreeNode_.prototype.getRangeWithFilter=function(e,t,r){for(var o=this.tree_.comparator(),n=-1,i=0;i<this.keys_.length;++i)if(o.isInRange(this.keys_[i],e)){n=i;break}if(-1!=n)for(i=n;i<this.keys_.length&&t.count<t.limit;++i)o.isInRange(this.keys_[i],e)&&this.appendResultsAt_(t,r,i)},lf.index.BTreeNode_.prototype.fill=function(e,t){if(this.isLeaf_())for(var r=0;r<this.values_.length&&0<e.count;++r)if(0<e.offset){if(e.offset-=this.tree_.isUniqueKey()?1:this.values_[r].length,0>e.offset)for(var o=this.values_[r].length+e.offset;o<this.values_[r].length&&0<e.count;++o)t[e.startIndex++]=this.values_[r][o],e.count--}else if(this.tree_.isUniqueKey())t[e.startIndex++]=this.values_[r],e.count--;else for(o=0;o<this.values_[r].length&&0<e.count;++o)t[e.startIndex++]=this.values_[r][o],e.count--;else for(r=0;r<this.children_.length&&0<e.count;++r)this.children_[r].fill(e,t)},lf.index.BTreeNode_.serialize=function(e){for(var t=[],r=e;r;){var o=[r.keys_,r.values_];t.push(new lf.Row(r.id_,o)),r=r.next_}return t},lf.index.BTreeNode_.deserialize=function(e,t){for(var r=t.stats(),o=e.map(function(e){var o=new lf.index.BTreeNode_(e.id(),t);return o.keys_=e.payload_[0],o.values_=e.payload_[1],o.keys_.forEach(function(e,n){r.add(e,t.isUniqueKey()?1:o.values_[n].length)}),o}),n=0;n<o.length-1;++n)lf.index.BTreeNode_.associate_(o[n],o[n+1]);return 1<o.length?lf.index.BTreeNode_.createInternals_(o[0]):o[0]},lf.index.BTreeNode_.prototype.isFirstKeyInRange=function(e){return this.tree_.comparator().isFirstKeyInRange(this.keys_[0],e)},lf.index.SimpleComparator=function(e){this.compareFn=e==lf.Order.DESC?lf.index.SimpleComparator.compareDescending:lf.index.SimpleComparator.compareAscending,this.normalizeKeyRange_=e==lf.Order.DESC?function(e){return goog.isDefAndNotNull(e)?e.reverse():null}:function(e){return e||null},this.orderRange_=e==lf.Order.DESC?lf.index.SimpleComparator.orderRangeDescending:lf.index.SimpleComparator.orderRangeAscending},lf.index.SimpleComparator.compareAscending=function(e,t){return e>t?lf.index.Favor.LHS:e<t?lf.index.Favor.RHS:lf.index.Favor.TIE},lf.index.SimpleComparator.compareDescending=function(e,t){return lf.index.SimpleComparator.compareAscending(t,e)},lf.index.SimpleComparator.orderRangeAscending=function(e,t){return lf.index.SingleKeyRange.compare(e,t)},lf.index.SimpleComparator.orderRangeDescending=function(e,t){return lf.index.SingleKeyRange.compare(t,e)},lf.index.SimpleComparator.prototype.compareRange=function(e,t){var r=this.normalizeKeyRange_(t),o=[lf.index.SingleKeyRange.isUnbound(r.from),lf.index.SingleKeyRange.isUnbound(r.to)];if(!o[0]){var n=this.compareFn(e,r.from);o[0]=r.excludeLower?n==lf.index.Favor.LHS:n!=lf.index.Favor.RHS}return o[1]||(n=this.compareFn(e,r.to),o[1]=r.excludeUpper?n==lf.index.Favor.RHS:n!=lf.index.Favor.LHS),o},lf.index.SimpleComparator.prototype.compare=function(e,t){return this.compareFn(e,t)},lf.index.SimpleComparator.prototype.min=function(e,t){return e<t?lf.index.Favor.LHS:e==t?lf.index.Favor.TIE:lf.index.Favor.RHS},lf.index.SimpleComparator.prototype.max=function(e,t){return e>t?lf.index.Favor.LHS:e==t?lf.index.Favor.TIE:lf.index.Favor.RHS},lf.index.SimpleComparator.prototype.isInRange=function(e,t){var r=this.compareRange(e,t);return r[0]&&r[1]},lf.index.SimpleComparator.prototype.isFirstKeyInRange=function(e,t){return this.isInRange(e,t)},lf.index.SimpleComparator.prototype.orderKeyRange=function(e,t){return this.orderRange_(e,t)},lf.index.SimpleComparator.prototype.sortKeyRanges=function(e){return e.filter(function(e){return!goog.isNull(e)}).sort(function(e,t){return this.orderRange_(e,t)}.bind(this))},lf.index.SimpleComparator.prototype.isLeftOpen=function(e){return lf.index.SingleKeyRange.isUnbound(this.normalizeKeyRange_(e).from)},lf.index.SimpleComparator.prototype.rangeToKeys=function(e){var t=this.normalizeKeyRange_(e);return[t.from,t.to]},lf.index.SimpleComparator.prototype.comparable=function(e){return!goog.isNull(e)},lf.index.SimpleComparator.prototype.keyDimensions=function(){return 1},lf.index.SimpleComparator.prototype.toString=function(){return this.compare==lf.index.SimpleComparator.compareDescending?"SimpleComparator_DESC":"SimpleComparator_ASC"},lf.index.SimpleComparatorWithNull=function(e){lf.index.SimpleComparator.call(this,e),this.compareFn=e==lf.Order.DESC?lf.index.SimpleComparatorWithNull.compareDescending:lf.index.SimpleComparatorWithNull.compareAscending},goog.inherits(lf.index.SimpleComparatorWithNull,lf.index.SimpleComparator),lf.index.SimpleComparatorWithNull.compareAscending=function(e,t){return goog.isNull(e)?goog.isNull(t)?lf.index.Favor.TIE:lf.index.Favor.RHS:goog.isNull(t)?lf.index.Favor.LHS:lf.index.SimpleComparator.compareAscending(e,t)},lf.index.SimpleComparatorWithNull.compareDescending=function(e,t){return lf.index.SimpleComparatorWithNull.compareAscending(t,e)},lf.index.SimpleComparatorWithNull.prototype.isInRange=function(e,t){return goog.isNull(e)?t.isAll():lf.index.SimpleComparatorWithNull.superClass_.isInRange.call(this,e,t)},lf.index.SimpleComparatorWithNull.prototype.minMax_=function(e,t){return goog.isNull(e)?goog.isNull(t)?lf.index.Favor.TIE:lf.index.Favor.RHS:goog.isNull(t)?lf.index.Favor.LHS:null},lf.index.SimpleComparatorWithNull.prototype.min=function(e,t){var r=this.minMax_(e,t);return goog.isNull(r)&&(r=lf.index.SimpleComparatorWithNull.superClass_.min.call(this,e,t)),r},lf.index.SimpleComparatorWithNull.prototype.max=function(e,t){var r=this.minMax_(e,t);return goog.isNull(r)&&(r=lf.index.SimpleComparatorWithNull.superClass_.max.call(this,e,t)),r},lf.index.MultiKeyComparator=function(e){this.comparators=e.map(function(e){return new lf.index.SimpleComparator(e)})},lf.index.MultiKeyComparator.createOrders=function(e,t){for(var r=Array(e),o=0;o<e;++o)r[o]=t;return r},lf.index.MultiKeyComparator.prototype.forEach_=function(e,t,r){for(var o=lf.index.Favor.TIE,n=0;n<this.comparators.length&&o==lf.index.Favor.TIE;++n)o=r(this.comparators[n],e[n],t[n]);return o},lf.index.MultiKeyComparator.prototype.compare=function(e,t){return this.forEach_(e,t,function(e,t,r){return t==lf.index.SingleKeyRange.UNBOUND_VALUE||r==lf.index.SingleKeyRange.UNBOUND_VALUE?lf.index.Favor.TIE:e.compare(t,r)})},lf.index.MultiKeyComparator.prototype.min=function(e,t){return this.forEach_(e,t,function(e,t,r){return e.min(t,r)})},lf.index.MultiKeyComparator.prototype.max=function(e,t){return this.forEach_(e,t,function(e,t,r){return e.max(t,r)})},lf.index.MultiKeyComparator.prototype.compareRange=function(e,t){for(var r=[!0,!0],o=0;o<this.comparators.length&&(r[0]||r[1]);++o){var n=this.comparators[o].compareRange(e[o],t[o]);r[0]=r[0]&&n[0],r[1]=r[1]&&n[1]}return r},lf.index.MultiKeyComparator.prototype.isInRange=function(e,t){for(var r=!0,o=0;o<this.comparators.length&&r;++o)r=this.comparators[o].isInRange(e[o],t[o]);return r},lf.index.MultiKeyComparator.prototype.isFirstKeyInRange=function(e,t){return this.comparators[0].isInRange(e[0],t[0])},lf.index.MultiKeyComparator.prototype.sortKeyRanges=function(e){for(var t=e.filter(function(e){return e.every(goog.isDefAndNotNull)}),r=Array(this.comparators.length),o=0;o<r.length;o++)r[o]=t.map(function(e){return e[o]});r.forEach(function(e,t){e.sort(function(e,r){return this.comparators[t].orderKeyRange(e,r)}.bind(this))},this);var n=Array(t.length);for(o=0;o<n.length;o++)n[o]=r.map(function(e){return e[o]});return n.sort(function(e,t){for(var r=lf.index.Favor.TIE,o=0;o<this.comparators.length&&r==lf.index.Favor.TIE;++o)r=this.comparators[o].orderKeyRange(e[o],t[o]);return r}.bind(this))},lf.index.MultiKeyComparator.prototype.isLeftOpen=function(e){return this.comparators[0].isLeftOpen(e[0])},lf.index.MultiKeyComparator.prototype.rangeToKeys=function(e){return[e.map(function(e,t){return this.comparators[t].rangeToKeys(e)[0]},this),e.map(function(e,t){return this.comparators[t].rangeToKeys(e)[1]},this)]},lf.index.MultiKeyComparator.prototype.comparable=function(e){return e.every(function(e,t){return this.comparators[t].comparable(e)},this)},lf.index.MultiKeyComparator.prototype.keyDimensions=function(){return this.comparators.length},lf.index.MultiKeyComparatorWithNull=function(e){lf.index.MultiKeyComparator.call(this,e),this.comparators=e.map(function(e){return new lf.index.SimpleComparatorWithNull(e)})},goog.inherits(lf.index.MultiKeyComparatorWithNull,lf.index.MultiKeyComparator),lf.index.ComparatorFactory={},lf.index.ComparatorFactory.create=function(e){if(1==e.columns.length)return new lf.index.SimpleComparator(e.columns[0].order);var t=e.columns.map(function(e){return e.order});return e.columns.some(function(e){return e.schema.isNullable()})?new lf.index.MultiKeyComparatorWithNull(t):new lf.index.MultiKeyComparator(t)},lf.index.NullableIndex=function(e){this.index_=e,this.nulls_=lf.structs.set.create(),this.statsNull_=new lf.index.Stats,this.stats_=new lf.index.Stats},lf.index.NullableIndex.prototype.getName=function(){return this.index_.getName()},lf.index.NullableIndex.prototype.add=function(e,t){goog.isNull(e)?(this.nulls_.add(t),this.statsNull_.add(e,1)):this.index_.add(e,t)},lf.index.NullableIndex.prototype.set=function(e,t){goog.isNull(e)?(this.nulls_.clear(),this.statsNull_.clear(),this.add(e,t)):this.index_.set(e,t)},lf.index.NullableIndex.prototype.remove=function(e,t){goog.isNull(e)?t?(this.nulls_.delete(t),this.statsNull_.remove(e,1)):(this.nulls_.clear(),this.statsNull_.clear()):this.index_.remove(e,t)},lf.index.NullableIndex.prototype.get=function(e){return goog.isNull(e)?lf.structs.set.values(this.nulls_):this.index_.get(e)},lf.index.NullableIndex.prototype.cost=function(e){return this.index_.cost(e)},lf.index.NullableIndex.prototype.stats=function(){return this.stats_.updateFromList([this.index_.stats(),this.statsNull_]),this.stats_},lf.index.NullableIndex.prototype.getRange=function(e,t,r,o){var n=this.index_.getRange(e,t,r,o);return goog.isDefAndNotNull(e)?n:n.concat(lf.structs.set.values(this.nulls_))},lf.index.NullableIndex.prototype.clear=function(){this.nulls_.clear(),this.index_.clear()},lf.index.NullableIndex.prototype.containsKey=function(e){return goog.isNull(e)?0!=this.nulls_.size:this.index_.containsKey(e)},lf.index.NullableIndex.prototype.min=function(){return this.index_.min()},lf.index.NullableIndex.prototype.max=function(){return this.index_.max()},lf.index.NullableIndex.NULL_ROW_ID_=-2,lf.index.NullableIndex.prototype.serialize=function(){return[new lf.Row(lf.index.NullableIndex.NULL_ROW_ID_,lf.structs.set.values(this.nulls_))].concat(this.index_.serialize())},lf.index.NullableIndex.prototype.comparator=function(){return this.index_.comparator()},lf.index.NullableIndex.deserialize=function(e,t){for(var r=-1,o=0;o<t.length;++o)if(t[o].id()==lf.index.NullableIndex.NULL_ROW_ID_){r=o;break}if(-1==r)throw new lf.Exception(102);var n=t[r].payload_,i=t.slice(0);i.splice(r,1);var a=e(i),s=new lf.index.NullableIndex(a);return n.forEach(function(e){s.nulls_.add(e)}),s},lf.index.NullableIndex.prototype.isUniqueKey=function(){return this.index_.isUniqueKey()},lf.index.RowId=function(e){this.name_=e,this.rows_=lf.structs.set.create(),this.comparator_=new lf.index.SimpleComparator(lf.Order.ASC)},lf.index.RowId.ROW_ID=0,lf.index.RowId.prototype.getName=function(){return this.name_},lf.index.RowId.prototype.add=function(e){if("number"!=typeof e)throw new lf.Exception(103);this.rows_.add(e)},lf.index.RowId.prototype.set=function(e,t){this.add(e,t)},lf.index.RowId.prototype.remove=function(e){this.rows_.delete(e)},lf.index.RowId.prototype.get=function(e){return this.containsKey(e)?[e]:[]},lf.index.RowId.prototype.min=function(){return this.minMax_(this.comparator_.min.bind(this.comparator_))},lf.index.RowId.prototype.max=function(){return this.minMax_(this.comparator_.max.bind(this.comparator_))},lf.index.RowId.prototype.minMax_=function(e){if(0==this.rows_.size)return null;var t=lf.structs.set.values(this.rows_).reduce(function(t,r){return goog.isNull(t)||e(r,t)==lf.index.Favor.LHS?r:t},null);return[t,[t]]},lf.index.RowId.prototype.cost=function(){return this.rows_.size},lf.index.RowId.prototype.getRange=function(e,t,r,o){var n=e||[lf.index.SingleKeyRange.all()],i=lf.structs.set.values(this.rows_).filter(function(e){return n.some(function(t){return this.comparator_.isInRange(e,t)},this)},this);return lf.index.slice(i,t,r,o)},lf.index.RowId.prototype.clear=function(){this.rows_.clear()},lf.index.RowId.prototype.containsKey=function(e){return this.rows_.has(e)},lf.index.RowId.prototype.serialize=function(){return[new lf.Row(lf.index.RowId.ROW_ID,lf.structs.set.values(this.rows_))]},lf.index.RowId.prototype.comparator=function(){return this.comparator_},lf.index.RowId.deserialize=function(e,t){var r=new lf.index.RowId(e);return t[0].payload_.forEach(function(e){r.add(e,e)}),r},lf.index.RowId.prototype.isUniqueKey=function(){return!0},lf.index.RowId.prototype.stats=function(){var e=new lf.index.Stats;return e.totalRows=this.rows_.size,e},lf.cache.Prefetcher=function(e){this.backStore_=e.getService(lf.service.BACK_STORE),this.indexStore_=e.getService(lf.service.INDEX_STORE),this.cache_=e.getService(lf.service.CACHE)},lf.cache.Prefetcher.prototype.init=function(e){var t=e.tables(),r=function(){if(0==t.length)return goog.Promise.resolve();var e=t.shift();return(e.persistentIndex()?this.fetchTableWithPersistentIndices_(e):this.fetchTable_(e)).then(r)}.bind(this);return r()},lf.cache.Prefetcher.prototype.fetchTable_=function(e){var t=this.backStore_.createTx(lf.TransactionType.READ_ONLY,[e]),r=t.getTable(e.getName(),e.deserializeRow.bind(e),lf.backstore.TableType.DATA).get([]).then(function(t){this.cache_.setMany(e.getName(),t),this.reconstructNonPersistentIndices_(e,t)}.bind(this));return t.commit(),r},lf.cache.Prefetcher.prototype.reconstructNonPersistentIndices_=function(e,t){var r=this.indexStore_.getTableIndices(e.getName());t.forEach(function(e){r.forEach(function(t){var r=e.keyOfIndex(t.getName());t.add(r,e.id())})})},lf.cache.Prefetcher.prototype.fetchTableWithPersistentIndices_=function(e){var t=this.backStore_.createTx(lf.TransactionType.READ_ONLY,[e]),r=t.getTable(e.getName(),e.deserializeRow,lf.backstore.TableType.DATA).get([]).then(function(t){this.cache_.setMany(e.getName(),t)}.bind(this)),o=e.getIndices().map(function(e){return this.reconstructPersistentIndex_(e,t)},this).concat(this.reconstructPersistentRowIdIndex_(e,t));return t.commit(),goog.Promise.all(o.concat(r))},lf.cache.Prefetcher.prototype.reconstructPersistentIndex_=function(e,t){var r=t.getTable(e.getNormalizedName(),lf.Row.deserialize,lf.backstore.TableType.INDEX),o=lf.index.ComparatorFactory.create(e);return r.get([]).then(function(t){if(0<t.length)if(e.hasNullableColumn()){var r=lf.index.BTree.deserialize.bind(void 0,o,e.getNormalizedName(),e.isUnique),n=lf.index.NullableIndex.deserialize(r,t);this.indexStore_.set(e.tableName,n)}else{var i=lf.index.BTree.deserialize(o,e.getNormalizedName(),e.isUnique,t);this.indexStore_.set(e.tableName,i)}}.bind(this))},lf.cache.Prefetcher.prototype.reconstructPersistentRowIdIndex_=function(e,t){return t.getTable(e.getRowIdIndexName(),lf.Row.deserialize,lf.backstore.TableType.INDEX).get([]).then(function(t){if(0<t.length){var r=lf.index.RowId.deserialize(e.getRowIdIndexName(),t);this.indexStore_.set(e.getName(),r)}}.bind(this))},lf.index.IndexStore=function(){},lf.index.MemoryIndexStore=function(){this.store_=lf.structs.map.create(),this.tableIndices_=lf.structs.map.create()},lf.index.MemoryIndexStore.prototype.init=function(e){return e.tables().forEach(function(e){var t=[];this.tableIndices_.set(e.getName(),t);var r=e.getRowIdIndexName(),o=this.get(r);if(goog.isNull(o)){var n=new lf.index.RowId(r);t.push(n),this.store_.set(r,n)}e.getIndices().forEach(function(e){var r=lf.index.MemoryIndexStore.createIndex_(e);t.push(r),this.store_.set(e.getNormalizedName(),r)},this)},this),goog.Promise.resolve()},lf.index.MemoryIndexStore.createIndex_=function(e){var t=lf.index.ComparatorFactory.create(e),r=new lf.index.BTree(e.getNormalizedName(),t,e.isUnique);return e.hasNullableColumn()&&1==e.columns.length?new lf.index.NullableIndex(r):r},lf.index.MemoryIndexStore.prototype.get=function(e){return this.store_.get(e)||null},lf.index.MemoryIndexStore.prototype.set=function(e,t){var r=this.tableIndices_.get(e)||null;goog.isNull(r)&&(r=[],this.tableIndices_.set(e,r));for(var o=null,n=0;n<r.length;n++)if(r[n].getName()==t.getName()){o=n;break}!goog.isNull(o)&&0<r.length?r.splice(o,1,t):r.push(t),this.store_.set(t.getName(),t)},lf.index.MemoryIndexStore.prototype.getTableIndices=function(e){return this.tableIndices_.get(e)||[]},lf.tree={},lf.tree.map=function(e,t){var r=[],o=null,n=null;return e.traverse(function(e){var i=t(e);null==e.getParent()?n=i:o.addChild(i);var a=e.getParent(),s=o;if(!goog.isNull(a)&&a.getChildCount()==s.getChildCount()){var l=r.indexOf(s);-1!=l&&r.splice(l,1)}1<e.getChildCount()&&r.push(i),o=e.isLeaf()?r[r.length-1]:i}),n},lf.tree.getLeafNodes=function(e){return lf.tree.find(e,function(e){return e.isLeaf()})},lf.tree.removeNode=function(e){var t=e.getParent(),r=0;goog.isNull(t)||(r=t.getChildren().indexOf(e),t.removeChild(e));var o=e.getChildren().slice();return o.forEach(function(o,n){e.removeChild(o),goog.isNull(t)||t.addChildAt(o,r+n)}),{parent:t,children:o}},lf.tree.insertNodeAt=function(e,t){e.getChildren().slice().forEach(function(r){e.removeChild(r),t.addChild(r)}),e.addChild(t)},lf.tree.swapNodeWithChild=function(e){goog.asserts.assert(1==e.getChildCount());var t=e.getChildAt(0);return goog.asserts.assert(1==t.getChildCount()),lf.tree.removeNode(e),lf.tree.insertNodeAt(t,e),t},lf.tree.pushNodeBelowChild=function(e,t,r){goog.asserts.assert(1==e.getChildCount());var o=e.getChildAt(0);goog.asserts.assert(1<o.getChildCount());var n=o.getChildren().slice();return n.some(function(e){return t(e)})?(lf.tree.removeNode(e),n.forEach(function(n,i){if(t(n)){var a=r(e);o.removeChildAt(i),a.addChild(n),o.addChildAt(a,i)}}),o):e},lf.tree.replaceChainWithChain=function(e,t,r,o){var n=e.getParent();if(!goog.isNull(n)){var i=n.getChildren().indexOf(e);n.removeChildAt(i),n.addChildAt(r,i)}return t.getChildren().slice().forEach(function(e){t.removeChild(e),o.addChild(e)}),r},lf.tree.replaceNodeWithChain=function(e,t,r){return lf.tree.replaceChainWithChain(e,e,t,r)},lf.tree.replaceChainWithNode=function(e,t,r){return lf.tree.replaceChainWithChain(e,t,r,r)},lf.tree.find=function(e,t,r){var o=[],n=function(e){t(e)&&o.push(e),goog.isDefAndNotNull(r)&&r(e)||e.getChildren().forEach(n)};return n(e),o},lf.tree.toString=function(e,t){var r=t||function(e){return e.toString()+"\\n"},o="";return e.traverse(function(e){for(var t=0;t<e.getDepth();t++)o+="-";o+=r(e)}),o},lf.pred.Operator={AND:"and",OR:"or"},lf.pred.CombinedPredicate=function(e){lf.pred.PredicateNode.call(this),this.operator=e,this.isComplement_=!1},goog.inherits(lf.pred.CombinedPredicate,lf.pred.PredicateNode),lf.pred.CombinedPredicate.prototype.copy=function(){return lf.tree.map(this,function(e){if(e instanceof lf.pred.CombinedPredicate){var t=new lf.pred.CombinedPredicate(e.operator);return t.isComplement_=e.isComplement_,t.setId(e.getId()),t}return e.copy()})},lf.pred.CombinedPredicate.prototype.getColumns=function(e){var t=e||[];this.traverse(function(e){e!=this&&e.getColumns(t)}.bind(this));var r=lf.structs.set.create(t);return lf.structs.set.values(r)},lf.pred.CombinedPredicate.prototype.getTables=function(e){var t=goog.isDefAndNotNull(e)?e:lf.structs.set.create();return this.traverse(function(e){e!=this&&e.getTables(t)}.bind(this)),t},lf.pred.CombinedPredicate.prototype.setComplement=function(e){this.isComplement_!=e&&(this.isComplement_=e,this.operator=this.operator==lf.pred.Operator.AND?lf.pred.Operator.OR:lf.pred.Operator.AND,this.getChildren().forEach(function(t){return t.setComplement(e)}))},lf.pred.CombinedPredicate.prototype.eval=function(e){var t=this.getChildren().map(function(t){return t.eval(e)});return this.combineResults_(t)},lf.pred.CombinedPredicate.prototype.combineResults_=function(e){return this.operator==lf.pred.Operator.AND?lf.proc.Relation.intersect(e):lf.proc.Relation.union(e)},lf.pred.CombinedPredicate.prototype.toString=function(){return"combined_pred_"+this.operator.toString()},lf.pred.CombinedPredicate.prototype.toKeyRange=function(){if(goog.asserts.assert(this.isKeyRangeCompatible(),"Could not convert combined predicate to key range."),this.operator==lf.pred.Operator.OR){var e=new lf.index.SingleKeyRangeSet;return this.getChildren().forEach(function(t){var r=t.toKeyRange().getValues();e.add(r)}),e}return goog.asserts.fail("toKeyRange() called for an AND predicate."),new lf.index.SingleKeyRangeSet};lf.pred.CombinedPredicate.prototype.isKeyRangeCompatible=function(){return this.operator==lf.pred.Operator.OR&&this.isKeyRangeCompatibleOr_()},lf.pred.CombinedPredicate.prototype.isKeyRangeCompatibleOr_=function(){var e=null;return this.getChildren().every(function(t){return!!(t instanceof lf.pred.ValuePredicate&&t.isKeyRangeCompatible())&&(goog.isNull(e)&&(e=t.column),e.getNormalizedName()==t.column.getNormalizedName())})},lf.pred.JoinPredicate=function(e,t,r){lf.pred.PredicateNode.call(this),this.leftColumn=e,this.rightColumn=t,this.evaluatorType=r,this.nullPayload_=null;var o=lf.eval.Registry.get();this.evaluatorFn_=o.getEvaluator(this.leftColumn.getType(),this.evaluatorType),this.keyOfIndexFn_=o.getKeyOfIndexEvaluator(this.leftColumn.getType())},goog.inherits(lf.pred.JoinPredicate,lf.pred.PredicateNode),lf.pred.JoinPredicate.BLOCK_SIZE_EXPONENT_=8,lf.pred.JoinPredicate.prototype.copy=function(){var e=new lf.pred.JoinPredicate(this.leftColumn,this.rightColumn,this.evaluatorType);return e.setId(this.getId()),e},lf.pred.JoinPredicate.prototype.getColumns=function(e){return goog.isDefAndNotNull(e)?(e.push(this.leftColumn),e.push(this.rightColumn),e):[this.leftColumn,this.rightColumn]},lf.pred.JoinPredicate.prototype.getTables=function(e){var t=goog.isDefAndNotNull(e)?e:lf.structs.set.create();return t.add(this.leftColumn.getTable()),t.add(this.rightColumn.getTable()),t},lf.pred.JoinPredicate.prototype.reverse=function(){var e=this.evaluatorType;switch(this.evaluatorType){case lf.eval.Type.GT:e=lf.eval.Type.LT;break;case lf.eval.Type.LT:e=lf.eval.Type.GT;break;case lf.eval.Type.GTE:e=lf.eval.Type.LTE;break;case lf.eval.Type.LTE:e=lf.eval.Type.GTE}return new lf.pred.JoinPredicate(this.rightColumn,this.leftColumn,e)},lf.pred.JoinPredicate.prototype.reverseSelf_=function(){var e,t=this.leftColumn;switch(this.leftColumn=this.rightColumn,this.rightColumn=t,this.evaluatorType){case lf.eval.Type.GT:e=lf.eval.Type.LT;break;case lf.eval.Type.LT:e=lf.eval.Type.GT;break;case lf.eval.Type.GTE:e=lf.eval.Type.LTE;break;case lf.eval.Type.LTE:e=lf.eval.Type.GTE;break;default:return}this.evaluatorType=e,this.evaluatorFn_=lf.eval.Registry.get().getEvaluator(this.leftColumn.getType(),this.evaluatorType)},lf.pred.JoinPredicate.prototype.eval=function(e){var t=e.entries.filter(function(e){var t=e.getField(this.leftColumn),r=e.getField(this.rightColumn);return this.evaluatorFn_(t,r)},this);return new lf.proc.Relation(t,e.getTables())},lf.pred.JoinPredicate.prototype.toString=function(){return"join_pred("+this.leftColumn.getNormalizedName()+" "+this.evaluatorType+" "+this.rightColumn.getNormalizedName()+")"},lf.pred.JoinPredicate.prototype.appliesToLeft_=function(e){return-1!=e.getTables().indexOf(this.leftColumn.getTable().getEffectiveName())},lf.pred.JoinPredicate.prototype.appliesToRight_=function(e){return-1!=e.getTables().indexOf(this.rightColumn.getTable().getEffectiveName())},lf.pred.JoinPredicate.prototype.detectLeftRight_=function(e,t){var r,o;return this.appliesToLeft_(e)?(this.assertRelationsApply_(e,t),r=e,o=t):(this.assertRelationsApply_(t,e),r=t,o=e),r.entries.length>o.entries.length?(this.reverseSelf_(),this.assertRelationsApply_(o,r),[o,r]):[r,o]},lf.pred.JoinPredicate.prototype.assertRelationsApply_=function(e,t){goog.asserts.assert(this.appliesToLeft_(e),"Mismatch between join predicate left operand and right relation."),goog.asserts.assert(this.appliesToRight_(t),"Mismatch between join predicate right operand and right relation.")},lf.pred.JoinPredicate.prototype.createNullPayload_=function(e){var t={};return e.getColumns().forEach(function(e){t[e.getName()]=null}),t},lf.pred.JoinPredicate.prototype.createCombinedEntryForUnmatched_=function(e,t){goog.isNull(this.nullPayload_)&&(this.nullPayload_=this.createNullPayload_(this.rightColumn.getTable()));var r=new lf.proc.RelationEntry(new lf.Row(lf.Row.DUMMY_ID,this.nullPayload_),!1);return lf.proc.RelationEntry.combineEntries(e,t,r,[this.rightColumn.getTable().getEffectiveName()])},lf.pred.JoinPredicate.prototype.evalRelationsNestedLoopJoin=function(e,t,r){var o=[e,t];r||(o=this.detectLeftRight_(e,t)),e=o[0],t=o[1];for(var n=[],i=e.getTables(),a=t.getTables(),s=e.entries.length,l=t.entries.length,c=lf.pred.JoinPredicate.BLOCK_SIZE_EXPONENT_,u=l+(1<<c)-1>>c,f=0;f<u;){for(var g=0;g<s;g++){var p=!1,h=e.entries[g].getField(this.leftColumn);if(!goog.isNull(h))for(var d=Math.min(f+1<<c,l),y=f<<c;y<d;y++){if(this.evaluatorFn_(h,t.entries[y].getField(this.rightColumn))){p=!0;var _=lf.proc.RelationEntry.combineEntries(e.entries[g],i,t.entries[y],a);n.push(_)}}r&&!p&&n.push(this.createCombinedEntryForUnmatched_(e.entries[g],i))}f++}var m=e.getTables().concat(t.getTables());return new lf.proc.Relation(n,m)},lf.pred.JoinPredicate.prototype.evalRelationsHashJoin=function(e,t,r){var o=[e,t];r||(o=this.detectLeftRight_(e,t));var n=e=o[0],i=t=o[1],a=this.leftColumn,s=this.rightColumn;r&&(n=t,i=e,a=this.rightColumn,s=this.leftColumn);var l=new lf.structs.MapSet,c=[];n.entries.forEach(function(e){var t=String(e.getField(a));l.set(t,e)});var u=n.getTables(),f=i.getTables();i.entries.forEach(function(e){var t=e.getField(s),o=String(t);!goog.isNull(t)&&l.has(o)?l.get(o).forEach(function(t){var r=lf.proc.RelationEntry.combineEntries(e,f,t,u);c.push(r)}):r&&c.push(this.createCombinedEntryForUnmatched_(e,f))}.bind(this));var g=e.getTables().concat(t.getTables());return new lf.proc.Relation(c,g)},lf.pred.JoinPredicate.prototype.evalRelationsIndexNestedLoopJoin=function(e,t,r,o){goog.asserts.assert(this.evaluatorType==lf.eval.Type.EQ,"For now, index nested loop join can only be leveraged for EQ.");var n=r.indexedColumn.getTable(),i=e,a=t;-1!=e.getTables().indexOf(n.getEffectiveName())&&(i=t,a=e);var s=[],l=a.getTables(),c=i.getTables(),u=function(e,t){var r=new lf.proc.RelationEntry(t,1<l.length),o=lf.proc.RelationEntry.combineEntries(e,c,r,l);s.push(o)};i.entries.forEach(function(e){var t=this.keyOfIndexFn_(e.getField(r.nonIndexedColumn)),n=r.index.get(t);0!=n.length&&(r.index.isUniqueKey()?u(e,o.get(n[0])):o.getMany(n).forEach(u.bind(null,e)))},this);var f=i.getTables().concat(a.getTables());return new lf.proc.Relation(s,f)},lf.pred.createPredicate=function(e,t,r){return goog.isNull(t)?new lf.pred.ValuePredicate(e,t,r):goog.isDef(t.getNormalizedName)?new lf.pred.JoinPredicate(e,t,r):new lf.pred.ValuePredicate(e,t,r)},lf.schema={},lf.schema.Column=function(){},lf.schema.Database=function(){},lf.schema.DataStoreType={},goog.exportSymbol("lf.schema.DataStoreType",lf.schema.DataStoreType),lf.schema.DataStoreType.INDEXED_DB=0,goog.exportProperty(lf.schema.DataStoreType,"INDEXED_DB",lf.schema.DataStoreType.INDEXED_DB),lf.schema.DataStoreType.MEMORY=1,goog.exportProperty(lf.schema.DataStoreType,"MEMORY",lf.schema.DataStoreType.MEMORY),lf.schema.DataStoreType.LOCAL_STORAGE=2,goog.exportProperty(lf.schema.DataStoreType,"LOCAL_STORAGE",lf.schema.DataStoreType.LOCAL_STORAGE),lf.schema.DataStoreType.FIREBASE=3,goog.exportProperty(lf.schema.DataStoreType,"FIREBASE",lf.schema.DataStoreType.FIREBASE),lf.schema.DataStoreType.WEB_SQL=4,goog.exportProperty(lf.schema.DataStoreType,"WEB_SQL",lf.schema.DataStoreType.WEB_SQL),lf.schema.DataStoreType.OBSERVABLE_STORE=5,goog.exportProperty(lf.schema.DataStoreType,"OBSERVABLE_STORE",lf.schema.DataStoreType.OBSERVABLE_STORE),lf.schema.Index=function(e,t,r,o){this.tableName=e,this.name=t,this.isUnique=r,this.columns=o},lf.schema.Index.prototype.getNormalizedName=function(){return this.tableName+"."+this.name},lf.schema.Index.prototype.hasNullableColumn=function(){return this.columns.some(function(e){return e.schema.isNullable()})},lf.schema.Table=function(e,t,r,o){this.name_=e,this.indices_=r,this.columns_=t,this.persistentIndex_=o,this.alias_=null},goog.exportSymbol("lf.schema.Table",lf.schema.Table),lf.schema.Table.prototype.getName=function(){return this.name_},goog.exportProperty(lf.schema.Table.prototype,"getName",lf.schema.Table.prototype.getName),lf.schema.Table.prototype.getEffectiveName=function(){return this.alias_||this.name_},lf.schema.Table.prototype.as=function(e){var t=new this.constructor(this.name_);return t.alias_=e,t.referencingForeignKeys_=this.referencingForeignKeys_,t},goog.exportProperty(lf.schema.Table.prototype,"as",lf.schema.Table.prototype.as),goog.exportProperty(lf.schema.Table.prototype,"createRow",lf.schema.Table.prototype.createRow),goog.exportProperty(lf.schema.Table.prototype,"deserializeRow",lf.schema.Table.prototype.deserializeRow),lf.schema.Table.prototype.getIndices=function(){return this.indices_},goog.exportProperty(lf.schema.Table.prototype,"getIndices",lf.schema.Table.prototype.getIndices),lf.schema.Table.prototype.getColumns=function(){return this.columns_},goog.exportProperty(lf.schema.Table.prototype,"getColumns",lf.schema.Table.prototype.getColumns),goog.exportProperty(lf.schema.Table.prototype,"getConstraint",lf.schema.Table.prototype.getConstraint),lf.schema.Table.prototype.persistentIndex=function(){return this.persistentIndex_},goog.exportProperty(lf.schema.Table.prototype,"persistentIndex",lf.schema.Table.prototype.persistentIndex),lf.schema.Table.ROW_ID_INDEX_PATTERN="#",lf.schema.Table.prototype.getRowIdIndexName=function(){return this.name_+"."+lf.schema.Table.ROW_ID_INDEX_PATTERN},lf.fn={},lf.fn.AggregatedColumn=function(e,t){this.child=e,this.aggregatorType=t,this.alias_=null},lf.fn.AggregatedColumn.prototype.getName=function(){return this.aggregatorType+"("+this.child.getName()+")"},lf.fn.AggregatedColumn.prototype.getNormalizedName=function(){return this.aggregatorType+"("+this.child.getNormalizedName()+")"},lf.fn.AggregatedColumn.prototype.getTable=function(){return this.child.getTable()},lf.fn.AggregatedColumn.prototype.toString=function(){return this.getNormalizedName()},lf.fn.AggregatedColumn.prototype.getType=function(){return this.child.getType()},lf.fn.AggregatedColumn.prototype.getIndices=function(){return[]},lf.fn.AggregatedColumn.prototype.getIndex=function(){return null},lf.fn.AggregatedColumn.prototype.isNullable=function(){return!1},lf.fn.AggregatedColumn.prototype.as=function(e){return this.alias_=e,this},goog.exportProperty(lf.fn.AggregatedColumn.prototype,"as",lf.fn.AggregatedColumn.prototype.as),lf.fn.AggregatedColumn.prototype.getColumnChain=function(){for(var e=[this],t=this;t instanceof lf.fn.AggregatedColumn;)e.push(t.child),t=t.child;return e},lf.fn.StarColumn=function(e){this.alias_=e||null,this.table_=new lf.schema.Table("#UnknownTable",[],[],!1)},lf.fn.StarColumn.prototype.getName=function(){return"*"},lf.fn.StarColumn.prototype.getNormalizedName=function(){return this.getName()},lf.fn.StarColumn.prototype.toString=function(){return this.getNormalizedName()},lf.fn.StarColumn.prototype.getTable=function(){return this.table_},lf.fn.StarColumn.prototype.getType=function(){return lf.Type.NUMBER},lf.fn.StarColumn.prototype.getIndices=function(){return[]},lf.fn.StarColumn.prototype.getIndex=function(){return null},lf.fn.StarColumn.prototype.isNullable=function(){return!1},lf.fn.Type={AVG:"AVG",COUNT:"COUNT",DISTINCT:"DISTINCT",GEOMEAN:"GEOMEAN",MAX:"MAX",MIN:"MIN",STDDEV:"STDDEV",SUM:"SUM"},lf.fn.avg=function(e){return new lf.fn.AggregatedColumn(e,lf.fn.Type.AVG)},goog.exportSymbol("lf.fn.avg",lf.fn.avg),lf.fn.count=function(e){var t=e||new lf.fn.StarColumn;return new lf.fn.AggregatedColumn(t,lf.fn.Type.COUNT)},goog.exportSymbol("lf.fn.count",lf.fn.count),lf.fn.distinct=function(e){return new lf.fn.AggregatedColumn(e,lf.fn.Type.DISTINCT)},goog.exportSymbol("lf.fn.distinct",lf.fn.distinct),lf.fn.max=function(e){return new lf.fn.AggregatedColumn(e,lf.fn.Type.MAX)},goog.exportSymbol("lf.fn.max",lf.fn.max),lf.fn.min=function(e){return new lf.fn.AggregatedColumn(e,lf.fn.Type.MIN)},goog.exportSymbol("lf.fn.min",lf.fn.min),lf.fn.stddev=function(e){return new lf.fn.AggregatedColumn(e,lf.fn.Type.STDDEV)},goog.exportSymbol("lf.fn.stddev",lf.fn.stddev),lf.fn.sum=function(e){return new lf.fn.AggregatedColumn(e,lf.fn.Type.SUM)},goog.exportSymbol("lf.fn.sum",lf.fn.sum),lf.fn.geomean=function(e){return new lf.fn.AggregatedColumn(e,lf.fn.Type.GEOMEAN)},goog.exportSymbol("lf.fn.geomean",lf.fn.geomean),lf.proc.PhysicalQueryPlanNode=function(e,t){lf.structs.TreeNode.call(this),this.execType_=t,this.numRelations_=e},goog.inherits(lf.proc.PhysicalQueryPlanNode,lf.structs.TreeNode),lf.proc.PhysicalQueryPlanNode.ExecType={NO_CHILD:-1,ALL:0,FIRST_CHILD:1},lf.proc.PhysicalQueryPlanNode.ANY=-1,lf.proc.PhysicalQueryPlanNode.prototype.exec=function(e,t){switch(this.execType_){case lf.proc.PhysicalQueryPlanNode.ExecType.FIRST_CHILD:return this.execFirstChild_(e,t);case lf.proc.PhysicalQueryPlanNode.ExecType.ALL:return this.execAllChildren_(e,t);default:return this.execNoChild_(e,t)}},lf.proc.PhysicalQueryPlanNode.prototype.toString=function(){return"dummy_node"},lf.proc.PhysicalQueryPlanNode.prototype.toContextString=function(){return this.toString()},lf.proc.PhysicalQueryPlanNode.prototype.assertInput_=function(e){goog.asserts.assert(this.numRelations_==lf.proc.PhysicalQueryPlanNode.ANY||e.length==this.numRelations_)},lf.proc.PhysicalQueryPlanNode.prototype.execNoChild_=function(e,t){return new goog.Promise(function(r){r(this.execInternal([],e,t))}.bind(this))},lf.proc.PhysicalQueryPlanNode.prototype.execFirstChild_=function(e,t){return this.getChildAt(0).exec(e,t).then(function(r){return this.assertInput_(r),this.execInternal(r,e,t)}.bind(this))},lf.proc.PhysicalQueryPlanNode.prototype.execAllChildren_=function(e,t){var r=this.getChildren().map(function(r){return r.exec(e,t)});return goog.Promise.all(r).then(function(r){var o=[];return r.forEach(function(e){for(var t=0;t<e.length;++t)o.push(e[t])}),this.assertInput_(o),this.execInternal(o,e,t)}.bind(this))},lf.proc.AggregationStep=function(e){lf.proc.PhysicalQueryPlanNode.call(this,lf.proc.PhysicalQueryPlanNode.ANY,lf.proc.PhysicalQueryPlanNode.ExecType.FIRST_CHILD),this.aggregatedColumns=e},goog.inherits(lf.proc.AggregationStep,lf.proc.PhysicalQueryPlanNode),lf.proc.AggregationStep.prototype.toString=function(){return"aggregation("+this.aggregatedColumns.map(function(e){return e.getNormalizedName()}).toString()+")"},lf.proc.AggregationStep.prototype.execInternal=function(e){return e.forEach(function(e){new lf.proc.AggregationStep.Calculator_(e,this.aggregatedColumns).calculate()},this),e},lf.proc.AggregationStep.Calculator_=function(e,t){this.relation_=e,this.columns_=t},lf.proc.AggregationStep.Calculator_.prototype.calculate=function(){this.columns_.forEach(function(e){for(var t=e.getColumnChain().reverse(),r=1;r<t.length;r++){var o=t[r],n=o.getColumnChain().slice(-1)[0],i=this.getInputRelationFor_(o);if(i.hasAggregationResult(o))break;var a=lf.proc.AggregationStep.Calculator_.evalAggregation_(o.aggregatorType,i,n);this.relation_.setAggregationResult(o,a)}},this)},lf.proc.AggregationStep.Calculator_.prototype.getInputRelationFor_=function(e){return e.child instanceof lf.fn.AggregatedColumn?this.relation_.getAggregationResult(e.child):this.relation_},lf.proc.AggregationStep.Calculator_.evalAggregation_=function(e,t,r){var o=null,n=lf.proc.AggregationStep.Calculator_;switch(e){case lf.fn.Type.MIN:o=n.reduce_(t,r,function(e,t){return t<e?t:e});break;case lf.fn.Type.MAX:o=n.reduce_(t,r,function(e,t){return t>e?t:e});break;case lf.fn.Type.DISTINCT:o=n.distinct_(t,r);break;case lf.fn.Type.COUNT:o=n.count_(t,r);break;case lf.fn.Type.SUM:o=n.sum_(t,r);break;case lf.fn.Type.AVG:var i=n.count_(t,r);0<i&&(o=n.sum_(t,r)/i);break;case lf.fn.Type.GEOMEAN:o=n.geomean_(t,r);break;default:o=n.stddev_(t,r)}return o},lf.proc.AggregationStep.Calculator_.reduce_=function(e,t,r){return e.entries.reduce(function(e,o){var n=o.getField(t);return goog.isNull(n)?e:goog.isNull(e)?n:r(e,n)},null)},lf.proc.AggregationStep.Calculator_.count_=function(e,t){return t instanceof lf.fn.StarColumn?e.entries.length:e.entries.reduce(function(e,r){return e+(goog.isNull(r.getField(t))?0:1)},0)},lf.proc.AggregationStep.Calculator_.sum_=function(e,t){return lf.proc.AggregationStep.Calculator_.reduce_(e,t,function(e,t){return t+e})},lf.proc.AggregationStep.Calculator_.stddev_=function(e,t){var r=[];return e.entries.forEach(function(e){var o=e.getField(t);goog.isNull(o)||r.push(o)}),0==r.length?null:goog.math.standardDeviation.apply(null,r)},lf.proc.AggregationStep.Calculator_.geomean_=function(e,t){var r=0,o=e.entries.reduce(function(e,o){var n=o.getField(t);return 0==n||goog.isNull(n)?e:(r++,e+Math.log(n))},0);return 0==r?null:Math.pow(Math.E,o/r)},lf.proc.AggregationStep.Calculator_.distinct_=function(e,t){var r=lf.structs.map.create();return e.entries.forEach(function(e){var o=e.getField(t);r.set(o,e)}),new lf.proc.Relation(lf.structs.map.values(r),e.getTables())},lf.proc.LogicalQueryPlan=function(e,t){this.rootNode_=e,this.scope_=t},lf.proc.LogicalQueryPlan.prototype.getRoot=function(){return this.rootNode_},lf.proc.LogicalQueryPlan.prototype.getScope=function(){return this.scope_},lf.proc.LogicalQueryPlanNode=function(){lf.structs.TreeNode.call(this)},goog.inherits(lf.proc.LogicalQueryPlanNode,lf.structs.TreeNode),lf.proc.InsertNode=function(e,t){lf.proc.LogicalQueryPlanNode.call(this),this.table=e,this.values=t},goog.inherits(lf.proc.InsertNode,lf.proc.LogicalQueryPlanNode),lf.proc.InsertOrReplaceNode=function(e,t){lf.proc.InsertNode.call(this,e,t)},goog.inherits(lf.proc.InsertOrReplaceNode,lf.proc.InsertNode),lf.proc.DeleteNode=function(e){lf.proc.LogicalQueryPlanNode.call(this),this.table=e},goog.inherits(lf.proc.DeleteNode,lf.proc.LogicalQueryPlanNode),lf.proc.DeleteNode.prototype.toString=function(){return"delete("+this.table.getName()+")"},lf.proc.UpdateNode=function(e){lf.proc.LogicalQueryPlanNode.call(this),this.table=e},goog.inherits(lf.proc.UpdateNode,lf.proc.LogicalQueryPlanNode),lf.proc.UpdateNode.prototype.toString=function(){return"update("+this.table.getName()+")"},lf.proc.SelectNode=function(e){lf.proc.LogicalQueryPlanNode.call(this),this.predicate=e},goog.inherits(lf.proc.SelectNode,lf.proc.LogicalQueryPlanNode),lf.proc.SelectNode.prototype.toString=function(){return"select("+this.predicate.toString()+")"},lf.proc.TableAccessNode=function(e){lf.proc.LogicalQueryPlanNode.call(this),this.table=e},goog.inherits(lf.proc.TableAccessNode,lf.proc.LogicalQueryPlanNode),lf.proc.TableAccessNode.prototype.toString=function(){var e="table_access("+this.table.getName();return goog.isNull(this.table.alias_)||(e+=" as "+this.table.alias_),e+")"},lf.proc.CrossProductNode=function(){lf.proc.LogicalQueryPlanNode.call(this)},goog.inherits(lf.proc.CrossProductNode,lf.proc.LogicalQueryPlanNode),lf.proc.CrossProductNode.prototype.toString=function(){return"cross_product"},lf.proc.ProjectNode=function(e,t){lf.proc.LogicalQueryPlanNode.call(this),this.columns=e,this.groupByColumns=t},goog.inherits(lf.proc.ProjectNode,lf.proc.LogicalQueryPlanNode),lf.proc.ProjectNode.prototype.toString=function(){var e="project("+this.columns.toString();if(!goog.isNull(this.groupByColumns))e=e+", groupBy("+this.groupByColumns.map(function(e){return e.getNormalizedName()}).join(", ")+")";return e+")"},lf.proc.OrderByNode=function(e){lf.proc.LogicalQueryPlanNode.call(this),this.orderBy=e},goog.inherits(lf.proc.OrderByNode,lf.proc.LogicalQueryPlanNode),lf.proc.OrderByNode.prototype.toString=function(){return"order_by("+lf.query.SelectContext.orderByToString(this.orderBy)+")"},lf.proc.AggregationNode=function(e){lf.proc.LogicalQueryPlanNode.call(this),this.columns=e},goog.inherits(lf.proc.AggregationNode,lf.proc.LogicalQueryPlanNode),lf.proc.AggregationNode.prototype.toString=function(){return"aggregation("+this.columns.toString()+")"},lf.proc.GroupByNode=function(e){lf.proc.LogicalQueryPlanNode.call(this),this.columns=e},goog.inherits(lf.proc.GroupByNode,lf.proc.LogicalQueryPlanNode),lf.proc.GroupByNode.prototype.toString=function(){return"group_by("+this.columns.toString()+")"},lf.proc.LimitNode=function(e){lf.proc.LogicalQueryPlanNode.call(this),this.limit=e},goog.inherits(lf.proc.LimitNode,lf.proc.LogicalQueryPlanNode),lf.proc.LimitNode.prototype.toString=function(){return"limit("+this.limit+")"},lf.proc.SkipNode=function(e){lf.proc.LogicalQueryPlanNode.call(this),this.skip=e},goog.inherits(lf.proc.SkipNode,lf.proc.LogicalQueryPlanNode),lf.proc.SkipNode.prototype.toString=function(){return"skip("+this.skip+")"},lf.proc.JoinNode=function(e,t){lf.proc.LogicalQueryPlanNode.call(this),this.predicate=e,this.isOuterJoin=t},goog.inherits(lf.proc.JoinNode,lf.proc.LogicalQueryPlanNode),lf.proc.JoinNode.prototype.toString=function(){return"join(type: "+(this.isOuterJoin?"outer":"inner")+", "+this.predicate.toString()+")"},lf.proc.RewritePass=function(){},lf.proc.AndPredicatePass=function(){},goog.inherits(lf.proc.AndPredicatePass,lf.proc.RewritePass),lf.proc.AndPredicatePass.prototype.rewrite=function(e){return this.rootNode=e,this.traverse_(this.rootNode),this.rootNode},lf.proc.AndPredicatePass.prototype.traverse_=function(e){if(e instanceof lf.proc.SelectNode){goog.asserts.assert(1==e.getChildCount(),"SelectNode must have exactly one child.");var t=this.breakAndPredicate_(e.predicate),r=this.createSelectNodeChain_(t);lf.tree.replaceNodeWithChain(e,r[0],r[1]),e==this.rootNode&&(this.rootNode=r[0]),e=r[0]}e.getChildren().forEach(function(e){this.traverse_(e)},this)},lf.proc.AndPredicatePass.prototype.breakAndPredicate_=function(e){if(0==e.getChildCount())return[e];var t=e;if(t.operator!=lf.pred.Operator.AND)return[e];var r=t.getChildren().slice().map(function(e){return t.removeChild(e),this.breakAndPredicate_(e)},this);return goog.array.flatten(r)},lf.proc.AndPredicatePass.prototype.createSelectNodeChain_=function(e){var t=null,r=null;return e.map(function(e,o){var n=new lf.proc.SelectNode(e);0==o?t=n:r.addChild(n),r=n},this),[t,r]},lf.proc.CrossProductPass=function(){},goog.inherits(lf.proc.CrossProductPass,lf.proc.RewritePass),lf.proc.CrossProductPass.prototype.rewrite=function(e,t){return 3>t.from.length?e:(this.rootNode=e,this.traverse_(this.rootNode),this.rootNode)},lf.proc.CrossProductPass.prototype.traverse_=function(e){if(e instanceof lf.proc.CrossProductNode)for(;2<e.getChildCount();){for(var t=new lf.proc.CrossProductNode,r=0;2>r;r++){var o=e.removeChildAt(0);t.addChild(o)}e.addChildAt(t,0)}e.getChildren().forEach(function(e){this.traverse_(e)},this)},lf.proc.CrossProductStep=function(){lf.proc.PhysicalQueryPlanNode.call(this,2,lf.proc.PhysicalQueryPlanNode.ExecType.ALL)},goog.inherits(lf.proc.CrossProductStep,lf.proc.PhysicalQueryPlanNode),lf.proc.CrossProductStep.prototype.toString=function(){return"cross_product"},lf.proc.CrossProductStep.prototype.execInternal=function(e){return lf.proc.CrossProductStep.crossProduct_(e[0],e[1])},lf.proc.CrossProductStep.crossProduct_=function(e,t){for(var r=[],o=e.getTables(),n=t.getTables(),i=0;i<e.entries.length;i++)for(var a=0;a<t.entries.length;a++){var s=lf.proc.RelationEntry.combineEntries(e.entries[i],o,t.entries[a],n);r.push(s)}var l=e.getTables().concat(t.getTables());return[new lf.proc.Relation(r,l)]},lf.query.Builder=function(){},lf.query.Select=function(){},lf.query.Insert=function(){},lf.query.Update=function(){},lf.query.Delete=function(){},lf.proc.UserQueryTask=function(e,t){lf.proc.QueryTask.call(this,e,t),this.runner_=e.getService(lf.service.RUNNER),this.observerRegistry_=e.getService(lf.service.OBSERVER_REGISTRY)},goog.inherits(lf.proc.UserQueryTask,lf.proc.QueryTask),lf.proc.UserQueryTask.prototype.getPriority=function(){return lf.proc.TaskPriority.USER_QUERY_TASK},lf.proc.UserQueryTask.prototype.onSuccess=function(e){this.getType()==lf.TransactionType.READ_ONLY?this.notifyObserversDirectly_(e):this.scheduleObserverTask_()},lf.proc.UserQueryTask.prototype.notifyObserversDirectly_=function(e){this.queries.forEach(function(t,r){t instanceof lf.query.SelectContext&&this.observerRegistry_.updateResultsForQuery(t,e[r])},this)},lf.proc.UserQueryTask.prototype.scheduleObserverTask_=function(){var e=this.observerRegistry_.getTaskItemsForTables(this.getScope());if(0!=e.length){var t=new lf.proc.ObserverQueryTask(this.global,e);this.runner_.scheduleTask(t)}},lf.query.DeleteContext=function(e){lf.query.Context.call(this,e)},goog.inherits(lf.query.DeleteContext,lf.query.Context),lf.query.DeleteContext.prototype.getScope=function(){var e=lf.structs.set.create();return e.add(this.from),this.expandTableScope_(this.from.getName(),e),e},lf.query.DeleteContext.prototype.expandTableScope_=function(e,t){var r=this.schema.info().getChildTables(e,lf.ConstraintAction.CASCADE);this.schema.info().getChildTables(e).forEach(t.add.bind(t)),r.forEach(function(e){this.expandTableScope_(e.getName(),t)},this)},lf.query.DeleteContext.prototype.clone=function(){var e=new lf.query.DeleteContext(this.schema);return e.cloneBase(this),e.from=this.from,e},lf.query.DeleteContext.prototype.bind=function(e){return lf.query.DeleteContext.superClass_.bind.call(this,e),this.bindValuesInSearchCondition(e),this},lf.query.InsertContext=function(e){lf.query.Context.call(this,e)},goog.inherits(lf.query.InsertContext,lf.query.Context),lf.query.InsertContext.prototype.getScope=function(){var e=lf.structs.set.create();e.add(this.into);var t=this.schema.info();return t.getParentTables(this.into.getName()).forEach(e.add.bind(e)),this.allowReplace&&t.getChildTables(this.into.getName()).forEach(e.add.bind(e)),e},lf.query.InsertContext.prototype.clone=function(){var e=new lf.query.InsertContext(this.schema);return e.cloneBase(this),e.into=this.into,this.values&&(e.values=this.values instanceof lf.Binder?this.values:this.values.slice()),e.allowReplace=this.allowReplace,e.binder=this.binder,e},lf.query.InsertContext.prototype.bind=function(e){return lf.query.InsertContext.superClass_.bind.call(this,e),this.binder&&(this.values=this.binder instanceof lf.Binder?e[this.binder.getIndex()]:this.binder.map(function(t){return t instanceof lf.Binder?e[t.getIndex()]:t})),this},lf.query.UpdateContext=function(e){lf.query.Context.call(this,e)},goog.inherits(lf.query.UpdateContext,lf.query.Context),lf.query.UpdateContext.prototype.getScope=function(){var e=lf.structs.set.create();e.add(this.table);var t=this.set.map(function(e){return e.column.getNormalizedName()}),r=this.schema.info();return r.getParentTablesByColumns(t).forEach(e.add.bind(e)),r.getChildTablesByColumns(t).forEach(e.add.bind(e)),e},lf.query.UpdateContext.prototype.clone=function(){var e=new lf.query.UpdateContext(this.schema);return e.cloneBase(this),e.table=this.table,e.set=this.set?lf.query.UpdateContext.cloneSet_(this.set):this.set,e},lf.query.UpdateContext.prototype.bind=function(e){return lf.query.UpdateContext.superClass_.bind.call(this,e),this.set.forEach(function(t){-1!=t.binding&&(t.value=e[t.binding])}),this.bindValuesInSearchCondition(e),this},lf.query.UpdateContext.cloneSet_=function(e){return e.map(function(e){var t,r={};for(t in e)r[t]=e[t];return r})},lf.query.escapeSqlValue_=function(e,t){if(!goog.isDefAndNotNull(t))return"NULL";switch(e){case lf.Type.BOOLEAN:return t?1:0;case lf.Type.INTEGER:case lf.Type.NUMBER:return t;case lf.Type.ARRAY_BUFFER:return"\'"+lf.Row.binToHex(t)+"\'";default:return"\'"+t.toString()+"\'"}},lf.query.insertToSql_=function(e,t){var r=e.allowReplace?"INSERT OR REPLACE":"INSERT",o=e.into.getColumns();r=(r=(r=r+" INTO "+e.into.getName()+"(")+o.map(function(e){return e.getName()}).join(", "))+") VALUES (";return e.values.map(function(e){var n=o.map(function(r){var o=e.payload_[r.getName()];return t?goog.isDefAndNotNull(o)?"#":"NULL":lf.query.escapeSqlValue_(r.getType(),o)});return r+n.join(", ")+");"}).join("\\n")},lf.query.evaluatorToSql_=function(e){switch(e){case lf.eval.Type.BETWEEN:return"BETWEEN";case lf.eval.Type.EQ:return"=";case lf.eval.Type.GTE:return">=";case lf.eval.Type.GT:return">";case lf.eval.Type.IN:return"IN";case lf.eval.Type.LTE:return"<=";case lf.eval.Type.LT:return"<";case lf.eval.Type.MATCH:return"LIKE";case lf.eval.Type.NEQ:return"<>";default:return"UNKNOWN"}},lf.query.valueToSql_=function(e,t,r,o){return e instanceof lf.Binder?"?"+e.getIndex().toString():o?goog.isDefAndNotNull(e)?"#":"NULL":t==lf.eval.Type.MATCH?"\'"+e.toString()+"\'":t==lf.eval.Type.IN?"("+e.map(function(e){return lf.query.escapeSqlValue_(r,e)}).join(", ")+")":t==lf.eval.Type.BETWEEN?lf.query.escapeSqlValue_(r,e[0])+" AND "+lf.query.escapeSqlValue_(r,e[1]):lf.query.escapeSqlValue_(r,e).toString()},lf.query.valuePredicateToSql_=function(e,t){var r=e.column.getNormalizedName(),o=lf.query.evaluatorToSql_(e.evaluatorType),n=lf.query.valueToSql_(e.value,e.evaluatorType,e.column.getType(),t);return"="==o&&"NULL"==n?[r,"IS NULL"].join(" "):"<>"==o&&"NULL"==n?[r,"IS NOT NULL"].join(" "):[r,o,n].join(" ")},lf.query.combinedPredicateToSql_=function(e,t){var r=e.getChildren().map(function(e){return"("+lf.query.parseSearchCondition_(e,t)+")"}),o=e.operator==lf.pred.Operator.AND?" AND ":" OR ";return r.join(o)},lf.query.joinPredicateToSql_=function(e){return[e.leftColumn.getNormalizedName(),lf.query.evaluatorToSql_(e.evaluatorType),e.rightColumn.getNormalizedName()].join(" ")},lf.query.parseSearchCondition_=function(e,t){if(e instanceof lf.pred.ValuePredicate)return lf.query.valuePredicateToSql_(e,t);if(e instanceof lf.pred.CombinedPredicate)return lf.query.combinedPredicateToSql_(e,t);if(e instanceof lf.pred.JoinPredicate)return lf.query.joinPredicateToSql_(e);throw new lf.Exception(357,typeof e)},lf.query.predicateToSql_=function(e,t){var r=lf.query.parseSearchCondition_(e,t);return r?" WHERE "+r:""},lf.query.deleteToSql_=function(e,t){var r="DELETE FROM "+e.from.getName();return e.where&&(r+=lf.query.predicateToSql_(e.where,t)),r+";"},lf.query.updateToSql_=function(e,t){var r=(r="UPDATE "+e.table.getName()+" SET ")+e.set.map(function(e){var t=e.column.getNormalizedName()+" = ";return-1!=e.binding?t+"?"+e.binding.toString():t+lf.query.escapeSqlValue_(e.column.getType(),e.value).toString()}).join(", ");return e.where&&(r+=lf.query.predicateToSql_(e.where,t)),r+";"},lf.query.selectToSql_=function(e,t){var r="*";e.columns.length&&(r=e.columns.map(function(e){return e.alias_?e.getNormalizedName()+" AS "+e.alias_:e.getNormalizedName()}).join(", "));var o="SELECT "+r+" FROM ";if(goog.isDefAndNotNull(e.outerJoinPredicates)&&0!=e.outerJoinPredicates.size?o+=lf.query.getFromListForOuterJoin_(e,t):(o+=lf.query.getFromListForInnerJoin_(e,t),e.where&&(o+=lf.query.predicateToSql_(e.where,t))),e.orderBy)o=o+" ORDER BY "+e.orderBy.map(function(e){return e.column.getNormalizedName()+(e.order==lf.Order.DESC?" DESC":" ASC")}).join(", ");if(e.groupBy)o=o+" GROUP BY "+e.groupBy.map(function(e){return e.getNormalizedName()}).join(", ");return e.limit&&(o+=" LIMIT "+e.limit.toString()),e.skip&&(o+=" SKIP "+e.skip.toString()),o+";"},lf.query.getTableNameToSql_=function(e){return e.getEffectiveName()!=e.getName()?e.getName()+" AS "+e.getEffectiveName():e.getName()},lf.query.getFromListForOuterJoin_=function(e,t){for(var r=lf.tree.find(e.where,function(e){return e instanceof lf.pred.JoinPredicate}),o=r.map(lf.query.joinPredicateToSql_),n=lf.query.getTableNameToSql_(e.from[0]),i=1;i<e.from.length;i++){var a=lf.query.getTableNameToSql_(e.from[i]);n=(n=e.outerJoinPredicates.has(r[o.length-i].getId())?n+" LEFT OUTER JOIN "+a:n+" INNER JOIN "+a)+" ON ("+o[o.length-i]+")"}var s=e.where,l=0<s.getChildCount()?s.getChildAt(0):s;return l instanceof lf.pred.JoinPredicate||(n+=" WHERE "+lf.query.parseSearchCondition_(l,t)),n},lf.query.getFromListForInnerJoin_=function(e){return e.from.map(lf.query.getTableNameToSql_).join(", ")},lf.query.toSql=function(e,t){var r=t||!1,o=e.getQuery();if(o instanceof lf.query.InsertContext)return lf.query.insertToSql_(o,r);if(o instanceof lf.query.DeleteContext)return lf.query.deleteToSql_(o,r);if(o instanceof lf.query.UpdateContext)return lf.query.updateToSql_(o,r);if(o instanceof lf.query.SelectContext)return lf.query.selectToSql_(o,r);throw new lf.Exception(358,typeof o)},lf.query.BaseBuilder=function(e,t){this.global=e,this.queryEngine_=e.getService(lf.service.QUERY_ENGINE),this.runner_=e.getService(lf.service.RUNNER),this.query=t},goog.exportSymbol("lf.query.BaseBuilder",lf.query.BaseBuilder),lf.query.BaseBuilder.prototype.exec=function(){try{this.assertExecPreconditions()}catch(e){return goog.Promise.reject(e)}return new goog.Promise(function(e,t){var r=new lf.proc.UserQueryTask(this.global,[this.getTaskItem()]);this.runner_.scheduleTask(r).then(function(t){e(t[0].getPayloads())},t)},this)},goog.exportProperty(lf.query.BaseBuilder.prototype,"exec",lf.query.BaseBuilder.prototype.exec),lf.query.BaseBuilder.prototype.explain=function(){var e=function(e){return e.toContextString(this.query)+"\\n"}.bind(this);return lf.tree.toString(this.getPlan_().getRoot(),e)},goog.exportProperty(lf.query.BaseBuilder.prototype,"explain",lf.query.BaseBuilder.prototype.explain),lf.query.BaseBuilder.prototype.bind=function(e){return this.query.bind(e),this},goog.exportProperty(lf.query.BaseBuilder.prototype,"bind",lf.query.BaseBuilder.prototype.bind),lf.query.BaseBuilder.prototype.toSql=function(e){return lf.query.toSql(this,e)},goog.exportProperty(lf.query.BaseBuilder.prototype,"toSql",lf.query.BaseBuilder.prototype.toSql),lf.query.BaseBuilder.prototype.assertExecPreconditions=function(){},lf.query.BaseBuilder.prototype.getQuery=function(){return this.query.clone()},lf.query.BaseBuilder.prototype.getPlan_=function(){return goog.isDefAndNotNull(this.plan_)||(this.plan_=this.queryEngine_.getPlan(this.query)),this.plan_},lf.query.BaseBuilder.prototype.getTaskItem=function(){return{context:this.getQuery(),plan:this.getPlan_()}},lf.query.BaseBuilder.prototype.getObservableTaskItem=function(){return{context:this.query,plan:this.getPlan_()}},lf.query.DeleteBuilder=function(e){lf.query.BaseBuilder.call(this,e,new lf.query.DeleteContext(e.getService(lf.service.SCHEMA)))},goog.inherits(lf.query.DeleteBuilder,lf.query.BaseBuilder),goog.exportSymbol("lf.query.DeleteBuilder",lf.query.DeleteBuilder),lf.query.DeleteBuilder.prototype.from=function(e){return this.assertFromPreconditions_(),this.query.from=e,this},goog.exportProperty(lf.query.DeleteBuilder.prototype,"from",lf.query.DeleteBuilder.prototype.from),lf.query.DeleteBuilder.prototype.where=function(e){return this.assertWherePreconditions_(),this.query.where=e,this},goog.exportProperty(lf.query.DeleteBuilder.prototype,"where",lf.query.DeleteBuilder.prototype.where),lf.query.DeleteBuilder.prototype.assertFromPreconditions_=function(){if(goog.isDefAndNotNull(this.query.from))throw new lf.Exception(515)},lf.query.DeleteBuilder.prototype.assertWherePreconditions_=function(){if(!goog.isDefAndNotNull(this.query.from))throw new lf.Exception(548);if(goog.isDefAndNotNull(this.query.where))throw new lf.Exception(516)},lf.query.DeleteBuilder.prototype.assertExecPreconditions=function(){if(lf.query.DeleteBuilder.superClass_.assertExecPreconditions.call(this),!goog.isDefAndNotNull(this.query.from))throw new lf.Exception(517)},lf.query.InsertBuilder=function(e,t){lf.query.BaseBuilder.call(this,e,new lf.query.InsertContext(e.getService(lf.service.SCHEMA))),this.query.allowReplace=t||!1},goog.inherits(lf.query.InsertBuilder,lf.query.BaseBuilder),goog.exportSymbol("lf.query.InsertBuilder",lf.query.InsertBuilder),lf.query.InsertBuilder.prototype.assertExecPreconditions=function(){lf.query.InsertBuilder.superClass_.assertExecPreconditions.call(this);var e=this.query;if(!goog.isDefAndNotNull(e.into)||!goog.isDefAndNotNull(e.values))throw new lf.Exception(518);if(e.allowReplace&&goog.isNull(e.into.constraint_.primaryKey_))throw new lf.Exception(519)},lf.query.InsertBuilder.prototype.into=function(e){return this.assertIntoPreconditions_(),this.query.into=e,this},goog.exportProperty(lf.query.InsertBuilder.prototype,"into",lf.query.InsertBuilder.prototype.into),lf.query.InsertBuilder.prototype.values=function(e){return this.assertValuesPreconditions_(),e instanceof lf.Binder||e.some(function(e){return e instanceof lf.Binder})?this.query.binder=e:this.query.values=e,this},goog.exportProperty(lf.query.InsertBuilder.prototype,"values",lf.query.InsertBuilder.prototype.values),lf.query.InsertBuilder.prototype.assertIntoPreconditions_=function(){if(goog.isDefAndNotNull(this.query.into))throw new lf.Exception(520)},lf.query.InsertBuilder.prototype.assertValuesPreconditions_=function(){if(goog.isDefAndNotNull(this.query.values))throw new lf.Exception(521)},lf.op={},lf.op.and=function(e){var t=Array.prototype.slice.call(arguments);return lf.op.createPredicate_(lf.pred.Operator.AND,t)},goog.exportSymbol("lf.op.and",lf.op.and),lf.op.or=function(e){var t=Array.prototype.slice.call(arguments);return lf.op.createPredicate_(lf.pred.Operator.OR,t)},goog.exportSymbol("lf.op.or",lf.op.or),lf.op.createPredicate_=function(e,t){var r=new lf.pred.CombinedPredicate(e);return t.forEach(function(e){r.addChild(e)}),r},lf.op.not=function(e){return e.setComplement(!0),e},goog.exportSymbol("lf.op.not",lf.op.not),lf.query.SelectBuilder=function(e,t){lf.query.BaseBuilder.call(this,e,new lf.query.SelectContext(e.getService(lf.service.SCHEMA))),this.fromAlreadyCalled_=this.whereAlreadyCalled_=!1,this.query.columns=t,this.checkDistinctColumn_(),this.checkAggregations_()},goog.inherits(lf.query.SelectBuilder,lf.query.BaseBuilder),goog.exportSymbol("lf.query.SelectBuilder",lf.query.SelectBuilder),lf.query.SelectBuilder.prototype.assertExecPreconditions=function(){lf.query.SelectBuilder.superClass_.assertExecPreconditions.call(this);var e=this.query;if(!goog.isDefAndNotNull(e.from))throw new lf.Exception(522);if(goog.isDef(e.limitBinder)&&!goog.isDef(e.limit)||goog.isDef(e.skipBinder)&&!goog.isDef(e.skip))throw new lf.Exception(523);this.checkProjectionList_()},lf.query.SelectBuilder.prototype.checkDistinctColumn_=function(){var e=this.query.columns.filter(function(e){return e instanceof lf.fn.AggregatedColumn&&e.aggregatorType==lf.fn.Type.DISTINCT},this);if(!(0==e.length||1==e.length&&1==this.query.columns.length))throw new lf.Exception(524)},lf.query.SelectBuilder.prototype.checkProjectionList_=function(){goog.isDefAndNotNull(this.query.groupBy)?this.checkGroupByColumns_():this.checkProjectionListNotMixed_()},lf.query.SelectBuilder.prototype.checkGroupByColumns_=function(){if(this.query.groupBy.some(function(e){var t=e.getType();return t==lf.Type.OBJECT||t==lf.Type.ARRAY_BUFFER}))throw new lf.Exception(525)},lf.query.SelectBuilder.prototype.checkProjectionListNotMixed_=function(){var e=this.query.columns.some(function(e){return e instanceof lf.fn.AggregatedColumn},this),t=this.query.columns.some(function(e){return!(e instanceof lf.fn.AggregatedColumn)},this)||0==this.query.columns.length;if(e&&t)throw new lf.Exception(526)},lf.query.SelectBuilder.prototype.checkAggregations_=function(){this.query.columns.forEach(function(e){if(!(!(e instanceof lf.fn.AggregatedColumn)||lf.query.SelectBuilder.isAggregationValid_(e.aggregatorType,e.getType())))throw new lf.Exception(527,e.getNormalizedName())},this)},lf.query.SelectBuilder.prototype.checkFrom_=function(e){if(!goog.isDefAndNotNull(this.query.from))throw new lf.Exception(e)},lf.query.SelectBuilder.prototype.from=function(e){if(this.fromAlreadyCalled_)throw new lf.Exception(515);return this.fromAlreadyCalled_=!0,goog.isDefAndNotNull(this.query.from)||(this.query.from=[]),this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments)),this},goog.exportProperty(lf.query.SelectBuilder.prototype,"from",lf.query.SelectBuilder.prototype.from),lf.query.SelectBuilder.prototype.where=function(e){if(this.checkFrom_(548),this.whereAlreadyCalled_)throw new lf.Exception(516);return this.whereAlreadyCalled_=!0,this.augmentWhereClause_(e),this},goog.exportProperty(lf.query.SelectBuilder.prototype,"where",lf.query.SelectBuilder.prototype.where),lf.query.SelectBuilder.prototype.augmentWhereClause_=function(e){if(goog.isDefAndNotNull(this.query.where)){var t=lf.op.and(e,this.query.where);this.query.where=t}else this.query.where=e},lf.query.SelectBuilder.prototype.innerJoin=function(e,t){if(this.checkFrom_(542),this.whereAlreadyCalled_)throw new lf.Exception(547);return this.query.from.push(e),this.augmentWhereClause_(t),this},goog.exportProperty(lf.query.SelectBuilder.prototype,"innerJoin",lf.query.SelectBuilder.prototype.innerJoin),lf.query.SelectBuilder.prototype.leftOuterJoin=function(e,t){if(this.checkFrom_(542),!(t instanceof lf.pred.JoinPredicate))throw new lf.Exception(541);if(this.whereAlreadyCalled_)throw new lf.Exception(547);this.query.from.push(e),goog.isDefAndNotNull(this.query.outerJoinPredicates)||(this.query.outerJoinPredicates=lf.structs.set.create());var r=t;return e.getEffectiveName()!=t.rightColumn.getTable().getEffectiveName()&&(r=t.reverse()),this.query.outerJoinPredicates.add(r.getId()),this.augmentWhereClause_(r),this},goog.exportProperty(lf.query.SelectBuilder.prototype,"leftOuterJoin",lf.query.SelectBuilder.prototype.leftOuterJoin),lf.query.SelectBuilder.prototype.limit=function(e){if(goog.isDefAndNotNull(this.query.limit||this.query.limitBinder))throw new lf.Exception(528);if(e instanceof lf.Binder)this.query.limitBinder=e;else{if(0>e)throw new lf.Exception(531);this.query.limit=e}return this},goog.exportProperty(lf.query.SelectBuilder.prototype,"limit",lf.query.SelectBuilder.prototype.limit),lf.query.SelectBuilder.prototype.skip=function(e){if(goog.isDefAndNotNull(this.query.skip||this.query.skipBinder))throw new lf.Exception(529);if(e instanceof lf.Binder)this.query.skipBinder=e;else{if(0>e)throw new lf.Exception(531);this.query.skip=e}return this},goog.exportProperty(lf.query.SelectBuilder.prototype,"skip",lf.query.SelectBuilder.prototype.skip),lf.query.SelectBuilder.prototype.orderBy=function(e,t){return this.checkFrom_(549),goog.isDefAndNotNull(this.query.orderBy)||(this.query.orderBy=[]),this.query.orderBy.push({column:e,order:goog.isDefAndNotNull(t)?t:lf.Order.ASC}),this},goog.exportProperty(lf.query.SelectBuilder.prototype,"orderBy",lf.query.SelectBuilder.prototype.orderBy),lf.query.SelectBuilder.prototype.groupBy=function(e){if(this.checkFrom_(549),goog.isDefAndNotNull(this.query.groupBy))throw new lf.Exception(530);return goog.isDefAndNotNull(this.query.groupBy)||(this.query.groupBy=[]),this.query.groupBy.push.apply(this.query.groupBy,Array.prototype.slice.call(arguments)),this},goog.exportProperty(lf.query.SelectBuilder.prototype,"groupBy",lf.query.SelectBuilder.prototype.groupBy),lf.query.SelectBuilder.isAggregationValid_=function(e,t){switch(e){case lf.fn.Type.COUNT:case lf.fn.Type.DISTINCT:return!0;case lf.fn.Type.AVG:case lf.fn.Type.GEOMEAN:case lf.fn.Type.STDDEV:case lf.fn.Type.SUM:return t==lf.Type.NUMBER||t==lf.Type.INTEGER;case lf.fn.Type.MAX:case lf.fn.Type.MIN:return t==lf.Type.NUMBER||t==lf.Type.INTEGER||t==lf.Type.STRING||t==lf.Type.DATE_TIME}return!1},lf.query.SelectBuilder.prototype.clone=function(){var e=new lf.query.SelectBuilder(this.global,this.query.columns);return e.query=this.query.clone(),e.query.clonedFrom=null,e},goog.exportProperty(lf.query.SelectBuilder.prototype,"clone",lf.query.SelectBuilder.prototype.clone),lf.query.UpdateBuilder=function(e,t){lf.query.BaseBuilder.call(this,e,new lf.query.UpdateContext(e.getService(lf.service.SCHEMA))),this.query.table=t},goog.inherits(lf.query.UpdateBuilder,lf.query.BaseBuilder),goog.exportSymbol("lf.query.UpdateBuilder",lf.query.UpdateBuilder),lf.query.UpdateBuilder.prototype.set=function(e,t){var r={binding:t instanceof lf.Binder?t.getIndex():-1,column:e,value:t};return goog.isDefAndNotNull(this.query.set)?this.query.set.push(r):this.query.set=[r],this},goog.exportProperty(lf.query.UpdateBuilder.prototype,"set",lf.query.UpdateBuilder.prototype.set),lf.query.UpdateBuilder.prototype.where=function(e){return this.assertWherePreconditions_(),this.query.where=e,this},goog.exportProperty(lf.query.UpdateBuilder.prototype,"where",lf.query.UpdateBuilder.prototype.where),lf.query.UpdateBuilder.prototype.assertWherePreconditions_=function(){if(goog.isDefAndNotNull(this.query.where))throw new lf.Exception(516)},lf.query.UpdateBuilder.prototype.assertExecPreconditions=function(){if(lf.query.UpdateBuilder.superClass_.assertExecPreconditions.call(this),!goog.isDefAndNotNull(this.query.set))throw new lf.Exception(532);if(this.query.set.some(function(e){return e.value instanceof lf.Binder}))throw new lf.Exception(501)},lf.proc.LogicalPlanGenerator=function(){},lf.proc.LogicalPlanGenerator.prototype.generate=function(){},lf.proc.BaseLogicalPlanGenerator=function(e){this.query=e,this.rootNode_=null},lf.proc.BaseLogicalPlanGenerator.prototype.generate=function(){return goog.isNull(this.rootNode_)&&(this.rootNode_=this.generateInternal()),this.rootNode_},lf.proc.InsertLogicalPlanGenerator=function(e){lf.proc.BaseLogicalPlanGenerator.call(this,e)},goog.inherits(lf.proc.InsertLogicalPlanGenerator,lf.proc.BaseLogicalPlanGenerator),lf.proc.InsertLogicalPlanGenerator.prototype.generateInternal=function(){return this.query.allowReplace?new lf.proc.InsertOrReplaceNode(this.query.into,this.query.values):new lf.proc.InsertNode(this.query.into,this.query.values)},lf.proc.UpdateLogicalPlanGenerator=function(e){lf.proc.BaseLogicalPlanGenerator.call(this,e)},goog.inherits(lf.proc.UpdateLogicalPlanGenerator,lf.proc.BaseLogicalPlanGenerator),lf.proc.UpdateLogicalPlanGenerator.prototype.generateInternal=function(){var e=new lf.proc.UpdateNode(this.query.table),t=goog.isDefAndNotNull(this.query.where)?new lf.proc.SelectNode(this.query.where.copy()):null,r=new lf.proc.TableAccessNode(this.query.table);return goog.isNull(t)?e.addChild(r):(t.addChild(r),e.addChild(t)),e},lf.proc.LogicalPlanRewriter=function(e,t,r){this.rootNode_=e,this.queryContext_=t,this.rewritePasses_=r},lf.proc.LogicalPlanRewriter.prototype.generate=function(){return this.rewritePasses_.forEach(function(e){this.rootNode_=e.rewrite(this.rootNode_,this.queryContext_)},this),this.rootNode_},lf.proc.DeleteLogicalPlanGenerator=function(e,t){lf.proc.BaseLogicalPlanGenerator.call(this,e),this.rewritePasses_=t},goog.inherits(lf.proc.DeleteLogicalPlanGenerator,lf.proc.BaseLogicalPlanGenerator),lf.proc.DeleteLogicalPlanGenerator.prototype.generateInternal=function(){var e=new lf.proc.DeleteNode(this.query.from),t=goog.isDefAndNotNull(this.query.where)?new lf.proc.SelectNode(this.query.where.copy()):null,r=new lf.proc.TableAccessNode(this.query.from);return goog.isNull(t)?e.addChild(r):(t.addChild(r),e.addChild(t)),new lf.proc.LogicalPlanRewriter(e,this.query,this.rewritePasses_).generate()},lf.proc.ImplicitJoinsPass=function(){},goog.inherits(lf.proc.ImplicitJoinsPass,lf.proc.RewritePass),lf.proc.ImplicitJoinsPass.prototype.rewrite=function(e,t){return 2>t.from.length?e:(this.rootNode=e,this.traverse_(this.rootNode,t),this.rootNode)},lf.proc.ImplicitJoinsPass.prototype.traverse_=function(e,t){if(e instanceof lf.proc.SelectNode&&e.predicate instanceof lf.pred.JoinPredicate){goog.asserts.assert(1==e.getChildCount(),"SelectNode must have exactly one child.");var r=e.predicate.getId(),o=e.getChildAt(0);if(o instanceof lf.proc.CrossProductNode){var n=goog.isDefAndNotNull(t.outerJoinPredicates)&&t.outerJoinPredicates.has(r),i=new lf.proc.JoinNode(e.predicate,n);lf.tree.replaceChainWithNode(e,o,i),e==this.rootNode&&(this.rootNode=i),e=i}}e.getChildren().forEach(function(e){this.traverse_(e,t)},this)},lf.proc.PushDownSelectionsPass=function(){this.alreadyPushedDown_=lf.structs.set.create()},goog.inherits(lf.proc.PushDownSelectionsPass,lf.proc.RewritePass),lf.proc.PushDownSelectionsPass.prototype.clear_=function(){this.alreadyPushedDown_.clear()},lf.proc.PushDownSelectionsPass.prototype.rewrite=function(e,t){return goog.isDef(t.where)?(this.clear_(),this.rootNode=e,this.traverse_(this.rootNode,t),this.clear_(),this.rootNode):e},lf.proc.PushDownSelectionsPass.prototype.traverse_=function(e,t){var r=function(e){e.getChildren().forEach(o)}.bind(this),o=function(e){if(!this.alreadyPushedDown_.has(e))if(this.isCandidateNode_(e)){var n=e,i=n.predicate.getTables(),a=function(e){return this.doesReferToTables_(e,i)}.bind(this),s=this.pushDownNodeRec_(t,n,a);this.alreadyPushedDown_.add(n),s!=n&&(goog.isNull(s.getParent())&&(this.rootNode=s),o(s)),r(n)}else r(e)}.bind(this);o(e)},lf.proc.PushDownSelectionsPass.prototype.pushDownNodeRec_=function(e,t,r){var o=t;if(this.shouldSwapWithChild_(e,t))o=lf.tree.swapNodeWithChild(t),this.pushDownNodeRec_(e,t,r);else if(this.shouldPushBelowChild_(t)){var n=[];o=lf.tree.pushNodeBelowChild(t,r,function(e){var t=new lf.proc.SelectNode(e.predicate);return n.push(t),t});n.forEach(function(t){this.pushDownNodeRec_(e,t,r)},this)}return o},lf.proc.PushDownSelectionsPass.prototype.doesReferToTables_=function(e,t){var r=lf.structs.set.create();return lf.tree.getLeafNodes(e).forEach(function(e){r.add(e.table)},this),e instanceof lf.proc.TableAccessNode&&r.add(e.table),lf.structs.set.isSubset(r,t)},lf.proc.PushDownSelectionsPass.prototype.isCandidateNode_=function(e){return e instanceof lf.proc.SelectNode},lf.proc.PushDownSelectionsPass.prototype.shouldPushBelowChild_=function(e){var t=e.getChildAt(0);return t instanceof lf.proc.CrossProductNode||t instanceof lf.proc.JoinNode},lf.proc.PushDownSelectionsPass.prototype.shouldSwapWithChild_=function(e,t){var r=t.getChildAt(0);if(!(r instanceof lf.proc.SelectNode))return!1;if(!goog.isDefAndNotNull(e.outerJoinPredicates))return!0;var o=t.predicate instanceof lf.pred.JoinPredicate,n=e.outerJoinPredicates.has(r.predicate.getId());return o||!n},lf.proc.SelectLogicalPlanGenerator=function(e,t){lf.proc.BaseLogicalPlanGenerator.call(this,e),this.rewritePasses_=t,this.projectNode_=this.limitNode_=this.skipNode_=this.orderByNode_=this.aggregationNode_=this.groupByNode_=this.selectNode_=this.crossProductNode_=this.tableAccessNodes_=null},goog.inherits(lf.proc.SelectLogicalPlanGenerator,lf.proc.BaseLogicalPlanGenerator),lf.proc.SelectLogicalPlanGenerator.prototype.generateInternal=function(){this.generateNodes_();var e=this.connectNodes_();return new lf.proc.LogicalPlanRewriter(e,this.query,this.rewritePasses_).generate()},lf.proc.SelectLogicalPlanGenerator.prototype.generateNodes_=function(){this.generateTableAccessNodes_(),this.generateCrossProductNode_(),this.generateSelectNode_(),this.generateOrderByNode_(),this.generateSkipNode_(),this.generateLimitNode_(),this.generateGroupByNode_(),this.generateAggregationNode_(),this.generateProjectNode_()},lf.proc.SelectLogicalPlanGenerator.prototype.connectNodes_=function(){for(var e=[this.limitNode_,this.skipNode_,this.projectNode_,this.orderByNode_,this.aggregationNode_,this.groupByNode_,this.selectNode_,this.crossProductNode_],t=-1,r=null,o=0;o<e.length;o++){var n=e[o];goog.isNull(n)||(goog.isNull(r)?r=n:e[t].addChild(n),t=o)}return this.tableAccessNodes_.forEach(function(r){e[t].addChild(r)}),r},lf.proc.SelectLogicalPlanGenerator.prototype.generateTableAccessNodes_=function(){this.tableAccessNodes_=this.query.from.map(function(e){return new lf.proc.TableAccessNode(e)},this)},lf.proc.SelectLogicalPlanGenerator.prototype.generateCrossProductNode_=function(){2<=this.query.from.length&&(this.crossProductNode_=new lf.proc.CrossProductNode)},lf.proc.SelectLogicalPlanGenerator.prototype.generateSelectNode_=function(){this.selectNode_=goog.isDefAndNotNull(this.query.where)?new lf.proc.SelectNode(this.query.where.copy()):null},lf.proc.SelectLogicalPlanGenerator.prototype.generateOrderByNode_=function(){this.query.orderBy&&(this.orderByNode_=new lf.proc.OrderByNode(this.query.orderBy))},lf.proc.SelectLogicalPlanGenerator.prototype.generateLimitNode_=function(){goog.isDefAndNotNull(this.query.limit)&&(this.limitNode_=new lf.proc.LimitNode(this.query.limit))},lf.proc.SelectLogicalPlanGenerator.prototype.generateSkipNode_=function(){goog.isDefAndNotNull(this.query.skip)&&0<this.query.skip&&(this.skipNode_=new lf.proc.SkipNode(this.query.skip))},lf.proc.SelectLogicalPlanGenerator.prototype.generateGroupByNode_=function(){goog.isDefAndNotNull(this.query.groupBy)&&(this.groupByNode_=new lf.proc.GroupByNode(this.query.groupBy))},lf.proc.SelectLogicalPlanGenerator.prototype.generateAggregationNode_=function(){var e=this.query.columns.filter(function(e){return e instanceof lf.fn.AggregatedColumn});goog.isDefAndNotNull(this.query.orderBy)&&this.query.orderBy.forEach(function(t){t.column instanceof lf.fn.AggregatedColumn&&e.push(t.column)}),0<e.length&&(this.aggregationNode_=new lf.proc.AggregationNode(e))},lf.proc.SelectLogicalPlanGenerator.prototype.generateProjectNode_=function(){this.projectNode_=new lf.proc.ProjectNode(this.query.columns||[],this.query.groupBy||null)},lf.proc.LogicalPlanFactory=function(){this.selectOptimizationPasses_=[new lf.proc.AndPredicatePass,new lf.proc.CrossProductPass,new lf.proc.PushDownSelectionsPass,new lf.proc.ImplicitJoinsPass],this.deleteOptimizationPasses_=[new lf.proc.AndPredicatePass]},lf.proc.LogicalPlanFactory.prototype.create=function(e){var t;if(e instanceof lf.query.InsertContext)t=new lf.proc.InsertLogicalPlanGenerator(e);else if(e instanceof lf.query.DeleteContext)t=new lf.proc.DeleteLogicalPlanGenerator(e,this.deleteOptimizationPasses_);else if(e instanceof lf.query.SelectContext)t=new lf.proc.SelectLogicalPlanGenerator(e,this.selectOptimizationPasses_);else{if(!(e instanceof lf.query.UpdateContext))throw new lf.Exception(513);t=new lf.proc.UpdateLogicalPlanGenerator(e)}var r=t.generate();return new lf.proc.LogicalQueryPlan(r,e.getScope())},lf.proc.DeleteStep=function(e){lf.proc.PhysicalQueryPlanNode.call(this,1,lf.proc.PhysicalQueryPlanNode.ExecType.FIRST_CHILD),this.table_=e},goog.inherits(lf.proc.DeleteStep,lf.proc.PhysicalQueryPlanNode),lf.proc.DeleteStep.prototype.toString=function(){return"delete("+this.table_.getName()+")"},lf.proc.DeleteStep.prototype.execInternal=function(e,t){var r=e[0].entries.map(function(e){return e.row});return t.remove(this.table_,r),[lf.proc.Relation.createEmpty()]},lf.proc.GetRowCountStep=function(e,t){lf.proc.PhysicalQueryPlanNode.call(this,0,lf.proc.PhysicalQueryPlanNode.ExecType.NO_CHILD),this.table=t,this.indexStore_=e.getService(lf.service.INDEX_STORE)},goog.inherits(lf.proc.GetRowCountStep,lf.proc.PhysicalQueryPlanNode),lf.proc.GetRowCountStep.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"},lf.proc.GetRowCountStep.prototype.execInternal=function(){var e=this.indexStore_.get(this.table.getRowIdIndexName()),t=new lf.proc.Relation([],[this.table.getName()]);return t.setAggregationResult(lf.fn.count(),e.stats().totalRows),[t]},lf.proc.TableAccessFullStep=function(e,t){lf.proc.PhysicalQueryPlanNode.call(this,0,lf.proc.PhysicalQueryPlanNode.ExecType.NO_CHILD),this.cache_=e.getService(lf.service.CACHE),this.indexStore_=e.getService(lf.service.INDEX_STORE),this.table=t},goog.inherits(lf.proc.TableAccessFullStep,lf.proc.PhysicalQueryPlanNode),lf.proc.TableAccessFullStep.prototype.toString=function(){var e="table_access("+this.table.getName();return goog.isNull(this.table.alias_)||(e+=" as "+this.table.alias_),e+")"},lf.proc.TableAccessFullStep.prototype.execInternal=function(){var e=this.indexStore_.get(this.table.getRowIdIndexName()).getRange();return[lf.proc.Relation.fromRows(this.cache_.getMany(e),[this.table.getEffectiveName()])]},lf.proc.GetRowCountPass=function(e){this.global_=e},goog.inherits(lf.proc.GetRowCountPass,lf.proc.RewritePass),lf.proc.GetRowCountPass.prototype.rewrite=function(e,t){if(this.rootNode=e,!this.canOptimize_(t))return e;var r=lf.tree.find(e,function(e){return e instanceof lf.proc.TableAccessFullStep})[0],o=new lf.proc.GetRowCountStep(this.global_,r.table);return lf.tree.replaceNodeWithChain(r,o,o),this.rootNode},lf.proc.GetRowCountPass.prototype.canOptimize_=function(e){if(!(1!=e.columns.length||1!=e.from.length||goog.isDefAndNotNull(e.where)||goog.isDefAndNotNull(e.limit)||goog.isDefAndNotNull(e.skip)||goog.isDefAndNotNull(e.groupBy))){var t=e.columns[0];return t instanceof lf.fn.AggregatedColumn&&t.aggregatorType==lf.fn.Type.COUNT&&t.child instanceof lf.fn.StarColumn}return!1},lf.proc.GroupByStep=function(e){lf.proc.PhysicalQueryPlanNode.call(this,1,lf.proc.PhysicalQueryPlanNode.ExecType.FIRST_CHILD),this.groupByColumns_=e},goog.inherits(lf.proc.GroupByStep,lf.proc.PhysicalQueryPlanNode),lf.proc.GroupByStep.prototype.toString=function(){return"groupBy("+this.groupByColumns_.map(function(e){return e.getNormalizedName()}).toString()+")"},lf.proc.GroupByStep.prototype.execInternal=function(e){return this.calculateGroupedRelations_(e[0])},lf.proc.GroupByStep.prototype.calculateGroupedRelations_=function(e){var t=new lf.structs.MapSet,r=function(e){return this.groupByColumns_.map(function(t){return e.getField(t)},this).join(",")}.bind(this);return e.entries.forEach(function(e){t.set(r(e),e)},this),t.keys().map(function(r){return new lf.proc.Relation(t.get(r),e.getTables())},this)},lf.proc.JoinStep=function(e,t,r){lf.proc.PhysicalQueryPlanNode.call(this,2,lf.proc.PhysicalQueryPlanNode.ExecType.ALL),this.indexStore_=e.getService(lf.service.INDEX_STORE),this.cache_=e.getService(lf.service.CACHE),this.predicate=t,this.isOuterJoin=r,this.algorithm_=this.predicate.evaluatorType==lf.eval.Type.EQ?lf.proc.JoinStep.Algorithm_.HASH:lf.proc.JoinStep.Algorithm_.NESTED_LOOP,this.indexJoinInfo_=null},goog.inherits(lf.proc.JoinStep,lf.proc.PhysicalQueryPlanNode),lf.proc.JoinStep.Algorithm_={HASH:0,INDEX_NESTED_LOOP:1,NESTED_LOOP:2},lf.proc.JoinStep.AlgorithmToString_=["hash","index_nested_loop","nested_loop"],lf.proc.JoinStep.prototype.toString=function(){return"join(type: "+(this.isOuterJoin?"outer":"inner")+", impl: "+lf.proc.JoinStep.AlgorithmToString_[this.algorithm_]+", "+this.predicate.toString()+")"},lf.proc.JoinStep.prototype.execInternal=function(e){switch(this.algorithm_){case lf.proc.JoinStep.Algorithm_.HASH:return[this.predicate.evalRelationsHashJoin(e[0],e[1],this.isOuterJoin)];case lf.proc.JoinStep.Algorithm_.INDEX_NESTED_LOOP:return[this.predicate.evalRelationsIndexNestedLoopJoin(e[0],e[1],this.indexJoinInfo_,this.cache_)];default:return[this.predicate.evalRelationsNestedLoopJoin(e[0],e[1],this.isOuterJoin)]}},lf.proc.JoinStep.prototype.markAsIndexJoin=function(e){this.algorithm_=lf.proc.JoinStep.Algorithm_.INDEX_NESTED_LOOP;var t=this.indexStore_.get(e.getIndex().getNormalizedName());this.indexJoinInfo_={indexedColumn:e,nonIndexedColumn:e==this.predicate.leftColumn?this.predicate.rightColumn:this.predicate.leftColumn,index:t}},lf.proc.NoOpStep=function(e){lf.proc.PhysicalQueryPlanNode.call(this,lf.proc.PhysicalQueryPlanNode.ANY,lf.proc.PhysicalQueryPlanNode.ExecType.NO_CHILD),this.relations_=e},goog.inherits(lf.proc.NoOpStep,lf.proc.PhysicalQueryPlanNode),lf.proc.NoOpStep.prototype.toString=function(){return"no_op_step("+this.relations_[0].getTables().join(",")+")"},lf.proc.NoOpStep.prototype.execInternal=function(){return this.relations_},lf.proc.IndexJoinPass=function(){},goog.inherits(lf.proc.IndexJoinPass,lf.proc.RewritePass),lf.proc.IndexJoinPass.prototype.rewrite=function(e,t){return this.rootNode=e,this.canOptimize_(t)?(lf.tree.find(e,function(e){return e instanceof lf.proc.JoinStep}).forEach(this.processJoinStep_,this),this.rootNode):e},lf.proc.IndexJoinPass.prototype.canOptimize_=function(e){return 1<e.from.length},lf.proc.IndexJoinPass.prototype.processJoinStep_=function(e){if(e.predicate.evaluatorType==lf.eval.Type.EQ&&!e.isOuterJoin){var t=function(t){if(!(t instanceof lf.proc.TableAccessFullStep))return null;var r=t.table.getEffectiveName()==e.predicate.rightColumn.getTable().getEffectiveName()?e.predicate.rightColumn:e.predicate.leftColumn;return goog.isNull(r.getIndex())?null:r},r=t(e.getChildAt(0)),o=t(e.getChildAt(1));if(!goog.isNull(r)||!goog.isNull(o)){var n=goog.isNull(o)?r:o;e.markAsIndexJoin(n);var i=new lf.proc.Relation([],[n.getTable().getEffectiveName()]);e.replaceChildAt(new lf.proc.NoOpStep([i]),n==r?0:1)}}},$jscomp.scope.calculateCartesianProduct=function(e){goog.asserts.assert(1<e.length,"Should only be called for cross-column indices.");var t=e.map(function(e){return e.getValues()}),r=goog.iter.product.apply(null,t),o=[];return goog.iter.forEach(r,function(e){o.push(e)}),o},lf.proc.IndexKeyRangeCalculator=function(){},lf.proc.NotBoundKeyRangeCalculator=function(e){this.indexSchema_=e},lf.proc.NotBoundKeyRangeCalculator.prototype.getKeyRangeCombinations=function(){return 1==this.indexSchema_.columns.length?[lf.index.SingleKeyRange.all()]:[this.indexSchema_.columns.map(function(){return lf.index.SingleKeyRange.all()})]},lf.proc.BoundKeyRangeCalculator=function(e,t){this.indexSchema_=e,this.predicateMap_=t,this.combinations_=this.lastQueryContext_=null},lf.proc.BoundKeyRangeCalculator.prototype.calculateKeyRangeMap_=function(e){var t=lf.structs.map.create();return this.predicateMap_.keys().forEach(function(r){var o=this.predicateMap_.get(r).map(function(t){return e.getPredicate(t)},this),n=new lf.index.SingleKeyRangeSet([lf.index.SingleKeyRange.all()]);o.forEach(function(e){n=lf.index.SingleKeyRangeSet.intersect(n,e.toKeyRange())}),t.set(r,n)},this),t},lf.proc.BoundKeyRangeCalculator.prototype.fillMissingKeyRanges_=function(e){for(var t=this.indexSchema_.columns.length-1;0<=t;t--){var r=this.indexSchema_.columns[t],o=e.get(r.schema.getName())||null;if(!goog.isNull(o))break;e.set(r.schema.getName(),new lf.index.SingleKeyRangeSet([lf.index.SingleKeyRange.all()]))}},lf.proc.BoundKeyRangeCalculator.prototype.getKeyRangeCombinations=function(e){if(this.lastQueryContext_==e)return this.combinations_;var t=this.calculateKeyRangeMap_(e);return this.fillMissingKeyRanges_(t),this.combinations_=1==this.indexSchema_.columns.length?lf.structs.map.values(t)[0].getValues():(0,$jscomp.scope.calculateCartesianProduct)(this.getSortedKeyRangeSets_(t)),this.lastQueryContext_=e,this.combinations_},lf.proc.BoundKeyRangeCalculator.prototype.getSortedKeyRangeSets_=function(e){var t=lf.structs.map.create(),r=0;return this.indexSchema_.columns.forEach(function(e){t.set(e.schema.getName(),r),r++}),lf.structs.map.keys(e).sort(function(e,r){return t.get(e)-t.get(r)}).map(function(t){return e.get(t)})},lf.proc.IndexCostEstimator=function(e,t){this.tableSchema_=t,this.indexStore_=e.getService(lf.service.INDEX_STORE)},$jscomp.scope.INDEX_QUERY_THRESHOLD_PERCENT=.02,lf.proc.IndexCostEstimator.prototype.getIndexQueryThreshold_=function(){var e=this.indexStore_.get(this.tableSchema_.getRowIdIndexName());return Math.floor(e.stats().totalRows*$jscomp.scope.INDEX_QUERY_THRESHOLD_PERCENT)},lf.proc.IndexCostEstimator.prototype.chooseIndexFor=function(e,t){var r=t.filter(this.isCandidate_,this);if(0==r.length)return null;var o=this.generateIndexRangeCandidates_(r);if(0==o.length)return null;if(1==o.length)return o[0];var n=Number.MAX_VALUE;return o.reduce(function(t,r){var o=r.calculateCost(e);return o<n?(n=o,r):t},null)},lf.proc.IndexCostEstimator.prototype.generateIndexRangeCandidates_=function(e){return this.tableSchema_.getIndices().map(function(t){var r=new lf.proc.IndexRangeCandidate(this.indexStore_,t);return r.consumePredicates_(e),r},this).filter(function(e){return e.isUsable()})},lf.proc.IndexCostEstimator.prototype.isCandidate_=function(e){return e instanceof lf.pred.ValuePredicate?this.isCandidateValuePredicate_(e):e instanceof lf.pred.CombinedPredicate&&this.isCandidateCombinedPredicate_(e)},lf.proc.IndexCostEstimator.prototype.isCandidateCombinedPredicate_=function(e){return!!e.isKeyRangeCompatible()&&(e.getChildAt(0).column.getTable()==this.tableSchema_&&e.getChildCount()<=this.getIndexQueryThreshold_())},lf.proc.IndexCostEstimator.prototype.isCandidateValuePredicate_=function(e){return!(!e.isKeyRangeCompatible()||e.column.getTable()!=this.tableSchema_||e.evaluatorType==lf.eval.Type.IN&&e.value.length>this.getIndexQueryThreshold_())},lf.proc.IndexRangeCandidate=function(e,t){this.indexStore_=e,this.indexSchema=t,this.indexedColumnNames_=lf.structs.set.create(this.indexSchema.columns.map(function(e){return e.schema.getName()})),this.keyRangeCalculator_=this.predicateMap_=null},lf.proc.IndexRangeCandidate.prototype.getPredicateIds=function(){return goog.isNull(this.predicateMap_)?[]:this.predicateMap_.values()},lf.proc.IndexRangeCandidate.prototype.getKeyRangeCalculator=function(){return goog.asserts.assert(this.predicateMap_),goog.isNull(this.keyRangeCalculator_)&&(this.keyRangeCalculator_=new lf.proc.BoundKeyRangeCalculator(this.indexSchema,this.predicateMap_)),this.keyRangeCalculator_},lf.proc.IndexRangeCandidate.prototype.consumePredicates_=function(e){e.forEach(function(e){var t=e.getColumns()[0].getName();this.indexedColumnNames_.has(t)&&(goog.isNull(this.predicateMap_)&&(this.predicateMap_=new lf.structs.MapSet),this.predicateMap_.set(t,e.getId()))},this)},lf.proc.IndexRangeCandidate.prototype.isUsable=function(){if(goog.isNull(this.predicateMap_))return!1;for(var e=!1,t=!0,r=0;r<this.indexSchema.columns.length;r++){var o=this.indexSchema.columns[r],n=this.predicateMap_.has(o.schema.getName());if(e&&n){t=!1;break}n||(e=!0)}return t},lf.proc.IndexRangeCandidate.prototype.calculateCost=function(e){var t=this.getKeyRangeCalculator().getKeyRangeCombinations(e),r=this.indexStore_.get(this.indexSchema.getNormalizedName());return t.reduce(function(e,t){return e+r.cost(t)},0)},lf.proc.IndexRangeScanStep=function(e,t,r,o){lf.proc.PhysicalQueryPlanNode.call(this,0,lf.proc.PhysicalQueryPlanNode.ExecType.NO_CHILD),this.indexStore_=e.getService(lf.service.INDEX_STORE),this.index=t,this.keyRangeCalculator=r,this.reverseOrder=o,this.useSkip=this.useLimit=!1},goog.inherits(lf.proc.IndexRangeScanStep,lf.proc.PhysicalQueryPlanNode),lf.proc.IndexRangeScanStep.prototype.toString=function(){return"index_range_scan("+this.index.getNormalizedName()+", ?, "+(this.reverseOrder?"reverse":"natural")+(this.useLimit?", limit:?":"")+(this.useSkip?", skip:?":"")+")"},lf.proc.IndexRangeScanStep.prototype.toContextString=function(e){var t=this.toString(),r=this.keyRangeCalculator.getKeyRangeCombinations(e);t=t.replace("?",r.toString());return this.useLimit&&(t=t.replace("?",e.limit.toString())),this.useSkip&&(t=t.replace("?",e.skip.toString())),t},lf.proc.IndexRangeScanStep.prototype.execInternal=function(e,t,r){var o=r,n=this.keyRangeCalculator.getKeyRangeCombinations(o),i=this.indexStore_.get(this.index.getNormalizedName()),a=(1==n.length&&n[0]instanceof lf.index.SingleKeyRange&&n[0].isOnly()?lf.index.slice(i.get(n[0].from),!1,this.useLimit?o.limit:void 0,this.useSkip?o.skip:void 0):i.getRange(n,this.reverseOrder,this.useLimit?o.limit:void 0,this.useSkip?o.skip:void 0)).map(function(e){return new lf.Row(e,{})},this);return[lf.proc.Relation.fromRows(a,[this.index.tableName])]},lf.proc.MultiIndexRangeScanStep=function(){lf.proc.PhysicalQueryPlanNode.call(this,lf.proc.PhysicalQueryPlanNode.ANY,lf.proc.PhysicalQueryPlanNode.ExecType.ALL)},goog.inherits(lf.proc.MultiIndexRangeScanStep,lf.proc.PhysicalQueryPlanNode),lf.proc.MultiIndexRangeScanStep.prototype.toString=function(){return"multi_index_range_scan()"},lf.proc.MultiIndexRangeScanStep.prototype.execInternal=function(e){var t=lf.structs.map.create();e.forEach(function(e){e.entries.forEach(function(e){t.set(e.row.id(),e)})});var r=lf.structs.map.values(t);return[new lf.proc.Relation(r,e[0].getTables())]},lf.proc.SelectStep=function(e){lf.proc.PhysicalQueryPlanNode.call(this,1,lf.proc.PhysicalQueryPlanNode.ExecType.FIRST_CHILD),this.predicateId=e},goog.inherits(lf.proc.SelectStep,lf.proc.PhysicalQueryPlanNode),lf.proc.SelectStep.prototype.toString=function(){return"select(?)"},lf.proc.SelectStep.prototype.toContextString=function(e){var t=e.getPredicate(this.predicateId);return this.toString().replace("?",t.toString())},lf.proc.SelectStep.prototype.execInternal=function(e,t,r){return[r.getPredicate(this.predicateId).eval(e[0])]},lf.proc.TableAccessByRowIdStep=function(e,t){lf.proc.PhysicalQueryPlanNode.call(this,1,lf.proc.PhysicalQueryPlanNode.ExecType.FIRST_CHILD),this.cache_=e.getService(lf.service.CACHE),this.table_=t},goog.inherits(lf.proc.TableAccessByRowIdStep,lf.proc.PhysicalQueryPlanNode),lf.proc.TableAccessByRowIdStep.prototype.toString=function(){return"table_access_by_row_id("+this.table_.getName()+")"},lf.proc.TableAccessByRowIdStep.prototype.execInternal=function(e){return[lf.proc.Relation.fromRows(this.cache_.getMany(e[0].getRowIds()),[this.table_.getEffectiveName()])]},lf.proc.IndexRangeScanPass=function(e){this.global_=e},goog.inherits(lf.proc.IndexRangeScanPass,lf.proc.RewritePass),lf.proc.IndexRangeScanPass.prototype.rewrite=function(e,t){return this.rootNode=e,lf.tree.find(e,function(e){return e instanceof lf.proc.TableAccessFullStep}).forEach(function(e){var r=this.findSelectSteps_(e);if(0!=r.length){var o=new lf.proc.IndexCostEstimator(this.global_,e.table).chooseIndexFor(t,r.map(function(e){return t.getPredicate(e.predicateId)}));if(!goog.isNull(o)){var n=lf.structs.map.create();r.forEach(function(e){n.set(e.predicateId,e)},this),this.rootNode=this.replaceWithIndexRangeScanStep_(o,n,e,t)}}},this),this.rootNode},lf.proc.IndexRangeScanPass.prototype.findSelectSteps_=function(e){for(var t=[],r=e.getParent();r;){if(r instanceof lf.proc.SelectStep)t.push(r);else if(r instanceof lf.proc.JoinStep)break;r=r.getParent()}return t},lf.proc.IndexRangeScanPass.prototype.replaceWithIndexRangeScanStep_=function(e,t,r){e.getPredicateIds().map(function(e){return t.get(e)}).forEach(lf.tree.removeNode);var o=new lf.proc.IndexRangeScanStep(this.global_,e.indexSchema,e.getKeyRangeCalculator(),!1),n=new lf.proc.TableAccessByRowIdStep(this.global_,r.table);return n.addChild(o),lf.tree.replaceNodeWithChain(r,n,o),o.getRoot()},lf.proc.InsertStep=function(e,t){lf.proc.PhysicalQueryPlanNode.call(this,0,lf.proc.PhysicalQueryPlanNode.ExecType.NO_CHILD),this.indexStore_=e.getService(lf.service.INDEX_STORE),this.table_=t},goog.inherits(lf.proc.InsertStep,lf.proc.PhysicalQueryPlanNode),lf.proc.InsertStep.prototype.toString=function(){return"insert("+this.table_.getName()+")"},lf.proc.InsertStep.prototype.execInternal=function(e,t,r){var o=r;return lf.proc.InsertStep.assignAutoIncrementPks_(this.table_,o.values,this.indexStore_),t.insert(this.table_,o.values),[lf.proc.Relation.fromRows(o.values,[this.table_.getName()])]},lf.proc.InsertStep.assignAutoIncrementPks_=function(e,t,r){var o=e.constraint_.primaryKey_;if(!goog.isNull(o)&&o.columns[0].autoIncrement){var n=o.columns[0].schema.getName(),i=r.get(o.getNormalizedName()).stats().maxKeyEncountered,a=goog.isNull(i)?0:i;t.forEach(function(e){0!=e.payload_[n]&&goog.isDefAndNotNull(e.payload_[n])||(a++,e.payload_[n]=a)})}},lf.proc.InsertOrReplaceStep=function(e,t){lf.proc.PhysicalQueryPlanNode.call(this,0,lf.proc.PhysicalQueryPlanNode.ExecType.NO_CHILD),this.indexStore_=e.getService(lf.service.INDEX_STORE),this.table_=t},goog.inherits(lf.proc.InsertOrReplaceStep,lf.proc.PhysicalQueryPlanNode),lf.proc.InsertOrReplaceStep.prototype.toString=function(){return"insert_replace("+this.table_.getName()+")"},lf.proc.InsertOrReplaceStep.prototype.execInternal=function(e,t,r){var o=r;return lf.proc.InsertStep.assignAutoIncrementPks_(this.table_,o.values,this.indexStore_),t.insertOrReplace(this.table_,o.values),[lf.proc.Relation.fromRows(o.values,[this.table_.getName()])]},lf.proc.LimitStep=function(){lf.proc.PhysicalQueryPlanNode.call(this,1,lf.proc.PhysicalQueryPlanNode.ExecType.FIRST_CHILD)},goog.inherits(lf.proc.LimitStep,lf.proc.PhysicalQueryPlanNode),lf.proc.LimitStep.prototype.toString=function(){return"limit(?)"},lf.proc.LimitStep.prototype.toContextString=function(e){return this.toString().replace("?",e.limit.toString())},lf.proc.LimitStep.prototype.execInternal=function(e,t,r){var o=r;return e[0].entries.splice(o.limit),e},lf.proc.OrderByStep=function(e){lf.proc.PhysicalQueryPlanNode.call(this,lf.proc.PhysicalQueryPlanNode.ANY,lf.proc.PhysicalQueryPlanNode.ExecType.FIRST_CHILD),this.orderBy=e},goog.inherits(lf.proc.OrderByStep,lf.proc.PhysicalQueryPlanNode),lf.proc.OrderByStep.prototype.toString=function(){return"order_by("+lf.query.SelectContext.orderByToString(this.orderBy)+")"},lf.proc.OrderByStep.prototype.execInternal=function(e){if(1==e.length){var t=this.findDistinctColumn_(e[0]);(goog.isNull(t)?e[0]:e[0].getAggregationResult(t)).entries.sort(this.entryComparatorFn_.bind(this))}else e.sort(this.relationComparatorFn_.bind(this));return e},lf.proc.OrderByStep.prototype.findDistinctColumn_=function(e){for(var t=null,r=0;r<this.orderBy.length;r++){var o=lf.fn.distinct(this.orderBy[r].column);if(e.hasAggregationResult(o)){t=o;break}}return t},lf.proc.OrderByStep.prototype.comparator_=function(e,t){var r,o,n,i=-1;do{i++;var a=this.orderBy[i].column;r=this.orderBy[i].order,o=e(a),n=t(a)}while(o==n&&i+1<this.orderBy.length);var s=o<n?-1:o>n?1:0;return r==lf.Order.ASC?s:-s},lf.proc.OrderByStep.prototype.relationComparatorFn_=function(e,t){return this.comparator_(function(t){return t instanceof lf.fn.AggregatedColumn?e.getAggregationResult(t):e.entries[e.entries.length-1].getField(t)},function(e){return e instanceof lf.fn.AggregatedColumn?t.getAggregationResult(e):t.entries[t.entries.length-1].getField(e)})},lf.proc.OrderByStep.prototype.entryComparatorFn_=function(e,t){return this.comparator_(function(t){return e.getField(t)},function(e){return t.getField(e)})},lf.proc.RelationTransformer=function(e,t){this.relation_=e,this.columns_=t},lf.proc.RelationTransformer.prototype.getTransformed=function(){return this.columns_.some(function(e){return e instanceof lf.fn.AggregatedColumn},this)?this.handleAggregatedColumns_():this.handleNonAggregatedColumns_()},lf.proc.RelationTransformer.prototype.handleAggregatedColumns_=function(){if(1==this.columns_.length&&this.columns_[0].aggregatorType==lf.fn.Type.DISTINCT){var e=this.relation_.getAggregationResult(this.columns_[0]).entries.map(function(e){var t=new lf.proc.RelationEntry(new lf.Row(lf.Row.DUMMY_ID,{}),this.relation_.isPrefixApplied());return t.setField(this.columns_[0],e.getField(this.columns_[0].child)),t},this);return new lf.proc.Relation(e,[])}var t=new lf.proc.RelationEntry(new lf.Row(lf.Row.DUMMY_ID,{}),this.relation_.isPrefixApplied());return this.columns_.forEach(function(e){var r=e instanceof lf.fn.AggregatedColumn?this.relation_.getAggregationResult(e):this.relation_.entries[0].getField(e);t.setField(e,r)},this),new lf.proc.Relation([t],this.relation_.getTables())},lf.proc.RelationTransformer.prototype.handleNonAggregatedColumns_=function(){var e=Array(this.relation_.entries.length),t=this.relation_.isPrefixApplied();return this.relation_.entries.forEach(function(r,o){e[o]=new lf.proc.RelationEntry(new lf.Row(r.row.id(),{}),t),this.columns_.forEach(function(t){e[o].setField(t,r.getField(t))},this)},this),new lf.proc.Relation(e,this.relation_.getTables())},lf.proc.RelationTransformer.transformMany=function(e,t){var r=e.map(function(e){return new lf.proc.RelationTransformer(e,t).getTransformed().entries[0]});return new lf.proc.Relation(r,e[0].getTables())},lf.proc.ProjectStep=function(e,t){lf.proc.PhysicalQueryPlanNode.call(this,lf.proc.PhysicalQueryPlanNode.ANY,lf.proc.PhysicalQueryPlanNode.ExecType.FIRST_CHILD),this.columns=e,this.groupByColumns=t},goog.inherits(lf.proc.ProjectStep,lf.proc.PhysicalQueryPlanNode),lf.proc.ProjectStep.prototype.toString=function(){var e="project("+this.columns.toString();if(!goog.isNull(this.groupByColumns))e=e+", groupBy("+this.groupByColumns.map(function(e){return e.getNormalizedName()}).join(", ")+")";return e+")"},lf.proc.ProjectStep.prototype.execInternal=function(e){return 0==e.length?[lf.proc.Relation.createEmpty()]:1==e.length?[this.execNonGroupByProjection_(e[0])]:[this.execGroupByProjection_(e)]},lf.proc.ProjectStep.prototype.hasAggregators=function(){return this.columns.some(function(e){return e instanceof lf.fn.AggregatedColumn})||!goog.isNull(this.groupByColumns)},lf.proc.ProjectStep.prototype.execGroupByProjection_=function(e){return lf.proc.RelationTransformer.transformMany(e,this.columns)},lf.proc.ProjectStep.prototype.execNonGroupByProjection_=function(e){return 0==this.columns.length?e:new lf.proc.RelationTransformer(e,this.columns).getTransformed()},lf.proc.SkipStep=function(){lf.proc.PhysicalQueryPlanNode.call(this,1,lf.proc.PhysicalQueryPlanNode.ExecType.FIRST_CHILD)},goog.inherits(lf.proc.SkipStep,lf.proc.PhysicalQueryPlanNode),lf.proc.SkipStep.prototype.toString=function(){return"skip(?)"},lf.proc.SkipStep.prototype.toContextString=function(e){return this.toString().replace("?",e.skip.toString())},lf.proc.SkipStep.prototype.execInternal=function(e,t,r){var o=r;return[new lf.proc.Relation(e[0].entries.slice(o.skip),e[0].getTables())]},lf.proc.LimitSkipByIndexPass=function(){},goog.inherits(lf.proc.LimitSkipByIndexPass,lf.proc.RewritePass),lf.proc.LimitSkipByIndexPass.prototype.rewrite=function(e,t){if(!goog.isDef(t.limit)&&!goog.isDef(t.skip))return e;var r=this.findIndexRangeScanStep_(e);return goog.isNull(r)?e:(lf.tree.find(e,function(e){return e instanceof lf.proc.LimitStep||e instanceof lf.proc.SkipStep}).forEach(function(e){this.mergeToIndexRangeScanStep_(e,r)},this),r.getRoot())},lf.proc.LimitSkipByIndexPass.prototype.mergeToIndexRangeScanStep_=function(e,t){return e instanceof lf.proc.LimitStep?t.useLimit=!0:t.useSkip=!0,lf.tree.removeNode(e).parent},lf.proc.LimitSkipByIndexPass.prototype.findIndexRangeScanStep_=function(e){var t=lf.tree.find(e,function(e){return e instanceof lf.proc.IndexRangeScanStep},function(e){return e instanceof lf.proc.ProjectStep&&e.hasAggregators()||e instanceof lf.proc.OrderByStep||1!=e.getChildCount()||e instanceof lf.proc.SelectStep});return 0<t.length?t[0]:null},lf.proc.MultiColumnOrPass=function(e){this.global_=e},goog.inherits(lf.proc.MultiColumnOrPass,lf.proc.RewritePass),lf.proc.MultiColumnOrPass.prototype.rewrite=function(e,t){this.rootNode=e;var r=this.findOrPredicates_(t);if(0==r.length)return this.rootNode;var o,n,i=0;do{n=r[i++],o=this.findIndexRangeCandidates_(n,t)}while(goog.isNull(o)&&i<r.length);if(goog.isNull(o))return this.rootNode;var a=this.findTableAccessFullStep_(o[0].indexSchema.tableName);return goog.isNull(a)?this.rootNode:this.rootNode=this.replaceWithIndexRangeScan_(n,a,o)},lf.proc.MultiColumnOrPass.prototype.findOrPredicates_=function(e){return lf.tree.find(this.rootNode,function(t){if(!(t instanceof lf.proc.SelectStep))return!1;var r=e.getPredicate(t.predicateId);return r instanceof lf.pred.CombinedPredicate&&r.operator==lf.pred.Operator.OR})},lf.proc.MultiColumnOrPass.prototype.findTableAccessFullStep_=function(e){return lf.tree.find(this.rootNode,function(t){return t instanceof lf.proc.TableAccessFullStep&&t.table.getName()==e})[0]||null},lf.proc.MultiColumnOrPass.prototype.findIndexRangeCandidates_=function(e,t){var r=t.getPredicate(e.predicateId),o=r.getTables();if(1!=o.size)return null;var n=lf.structs.set.values(o)[0],i=new lf.proc.IndexCostEstimator(this.global_,n),a=null;return r.getChildren().every(function(e){var r=i.chooseIndexFor(t,[e]);return goog.isNull(r)||(goog.isNull(a)?a=[r]:a.push(r)),!goog.isNull(r)})?a:null},lf.proc.MultiColumnOrPass.prototype.replaceWithIndexRangeScan_=function(e,t,r){var o=new lf.proc.TableAccessByRowIdStep(this.global_,t.table),n=new lf.proc.MultiIndexRangeScanStep;return o.addChild(n),r.forEach(function(e){var t=new lf.proc.IndexRangeScanStep(this.global_,e.indexSchema,e.getKeyRangeCalculator(),!1);n.addChild(t)},this),lf.tree.removeNode(e),lf.tree.replaceNodeWithChain(t,o,n),n.getRoot()},lf.proc.OrderByIndexPass=function(e){this.global_=e},goog.inherits(lf.proc.OrderByIndexPass,lf.proc.RewritePass),lf.proc.OrderByIndexPass.prototype.rewrite=function(e,t){var r=lf.proc.OrderByIndexPass.findOrderByStep_(e,t);if(goog.isNull(r))return e;var o=this.applyTableAccessFullOptimization_(r);return o==r&&(o=this.applyIndexRangeScanStepOptimization_(r)),o.getRoot()},lf.proc.OrderByIndexPass.prototype.applyTableAccessFullOptimization_=function(e){var t=e,r=lf.proc.OrderByIndexPass.findTableAccessFullStep_(e.getChildAt(0));if(!goog.isNull(r)){var o=lf.proc.OrderByIndexPass.findIndexCandidateForOrderBy_(r.table,e.orderBy);if(goog.isNull(o))return t;var n=new lf.proc.IndexRangeScanStep(this.global_,o.indexSchema,new lf.proc.NotBoundKeyRangeCalculator(o.indexSchema),o.isReverse),i=new lf.proc.TableAccessByRowIdStep(this.global_,r.table);i.addChild(n),lf.tree.removeNode(e),t=lf.tree.replaceNodeWithChain(r,i,n)}return t},lf.proc.OrderByIndexPass.prototype.applyIndexRangeScanStepOptimization_=function(e){var t=e,r=lf.proc.OrderByIndexPass.findIndexRangeScanStep_(e.getChildAt(0));if(!goog.isNull(r)){var o=lf.proc.OrderByIndexPass.getIndexCandidateForIndexSchema_(r.index,e.orderBy);if(goog.isNull(o))return t;r.reverseOrder=o.isReverse,t=lf.tree.removeNode(e).parent}return t},lf.proc.OrderByIndexPass.findIndexRangeScanStep_=function(e){var t=lf.tree.find(e,function(e){return e instanceof lf.proc.IndexRangeScanStep},function(e){return 1!=e.getChildCount()});return 0<t.length?t[0]:null},lf.proc.OrderByIndexPass.findTableAccessFullStep_=function(e){var t=lf.tree.find(e,function(e){return e instanceof lf.proc.TableAccessFullStep},function(e){return 1!=e.getChildCount()});return 0<t.length?t[0]:null},lf.proc.OrderByIndexPass.findOrderByStep_=function(e,t){return goog.isDef(t.orderBy)?lf.tree.find(e,function(e){return e instanceof lf.proc.OrderByStep})[0]:null},lf.proc.OrderByIndexPass.findIndexCandidateForOrderBy_=function(e,t){for(var r=null,o=e.getIndices(),n=0;n<o.length&&goog.isNull(r);n++)r=lf.proc.OrderByIndexPass.getIndexCandidateForIndexSchema_(o[n],t);return r},lf.proc.OrderByIndexPass.getIndexCandidateForIndexSchema_=function(e,t){if(!(e.columns.length==t.length&&t.every(function(t,r){var o=e.columns[r];return t.column.getName()==o.schema.getName()})))return null;var r=lf.proc.OrderByIndexPass.checkOrder_(t,e);return r[0]||r[1]?{indexSchema:e,isReverse:r[1]}:null},lf.proc.OrderByIndexPass.checkOrder_=function(e,t){var r=e.reduce(function(e,t){return e<<1|(t.order==lf.Order.DESC?0:1)},0)^t.columns.reduce(function(e,t){return e<<1|(t.order==lf.Order.DESC?0:1)},0);return[0==r,r==Math.pow(2,Math.max(e.length,t.columns.length))-1]},lf.proc.PhysicalPlanRewriter=function(e,t,r){this.rootNode_=e,this.queryContext_=t,this.rewritePasses_=r},lf.proc.PhysicalPlanRewriter.prototype.generate=function(){return this.rewritePasses_.forEach(function(e){this.rootNode_=e.rewrite(this.rootNode_,this.queryContext_)},this),this.rootNode_},lf.proc.UpdateStep=function(e){lf.proc.PhysicalQueryPlanNode.call(this,1,lf.proc.PhysicalQueryPlanNode.ExecType.FIRST_CHILD),this.table_=e},goog.inherits(lf.proc.UpdateStep,lf.proc.PhysicalQueryPlanNode),lf.proc.UpdateStep.prototype.toString=function(){return"update("+this.table_.getName()+")"},lf.proc.UpdateStep.prototype.execInternal=function(e,t,r){var o=e[0].entries.map(function(e){var t=this.table_.deserializeRow(e.row.serialize());return r.set.forEach(function(e){t.payload_[e.column.getName()]=e.value},this),t},this);return t.update(this.table_,o),[lf.proc.Relation.createEmpty()]},lf.proc.PhysicalPlanFactory=function(e){this.global_=e,this.selectOptimizationPasses_=[new lf.proc.IndexJoinPass,new lf.proc.IndexRangeScanPass(this.global_),new lf.proc.MultiColumnOrPass(this.global_),new lf.proc.OrderByIndexPass(this.global_),new lf.proc.LimitSkipByIndexPass,new lf.proc.GetRowCountPass(this.global_)],this.deleteOptimizationPasses_=[new lf.proc.IndexRangeScanPass(this.global_)]},lf.proc.PhysicalPlanFactory.prototype.create=function(e,t){var r=e.getRoot();if(r instanceof lf.proc.InsertOrReplaceNode||r instanceof lf.proc.InsertNode)return this.createPlan_(e,t);if(r instanceof lf.proc.ProjectNode||r instanceof lf.proc.LimitNode||r instanceof lf.proc.SkipNode)return this.createPlan_(e,t,this.selectOptimizationPasses_);if(r instanceof lf.proc.DeleteNode||r instanceof lf.proc.UpdateNode)return this.createPlan_(e,t,this.deleteOptimizationPasses_);throw new lf.Exception(8)},lf.proc.PhysicalPlanFactory.prototype.createPlan_=function(e,t,r){var o=lf.tree.map(e.getRoot(),this.mapFn_.bind(this));if(goog.isDefAndNotNull(r))o=new lf.proc.PhysicalPlanRewriter(o,t,r).generate();return new lf.proc.PhysicalQueryPlan(o,e.getScope())},lf.proc.PhysicalPlanFactory.prototype.mapFn_=function(e){if(e instanceof lf.proc.ProjectNode)return new lf.proc.ProjectStep(e.columns,e.groupByColumns);if(e instanceof lf.proc.GroupByNode)return new lf.proc.GroupByStep(e.columns);if(e instanceof lf.proc.AggregationNode)return new lf.proc.AggregationStep(e.columns);if(e instanceof lf.proc.OrderByNode)return new lf.proc.OrderByStep(e.orderBy);if(e instanceof lf.proc.SkipNode)return new lf.proc.SkipStep;if(e instanceof lf.proc.LimitNode)return new lf.proc.LimitStep;if(e instanceof lf.proc.SelectNode)return new lf.proc.SelectStep(e.predicate.getId());if(e instanceof lf.proc.CrossProductNode)return new lf.proc.CrossProductStep;if(e instanceof lf.proc.JoinNode)return new lf.proc.JoinStep(this.global_,e.predicate,e.isOuterJoin);if(e instanceof lf.proc.TableAccessNode)return new lf.proc.TableAccessFullStep(this.global_,e.table);if(e instanceof lf.proc.DeleteNode)return new lf.proc.DeleteStep(e.table);if(e instanceof lf.proc.UpdateNode)return new lf.proc.UpdateStep(e.table);if(e instanceof lf.proc.InsertOrReplaceNode)return new lf.proc.InsertOrReplaceStep(this.global_,e.table);if(e instanceof lf.proc.InsertNode)return new lf.proc.InsertStep(this.global_,e.table);throw new lf.Exception(514)},lf.proc.QueryEngine=function(){},lf.proc.DefaultQueryEngine=function(e){this.logicalPlanFactory_=new lf.proc.LogicalPlanFactory,this.physicalPlanFactory_=new lf.proc.PhysicalPlanFactory(e)},lf.proc.DefaultQueryEngine.prototype.getPlan=function(e){var t=this.logicalPlanFactory_.create(e);return this.physicalPlanFactory_.create(t,e)},lf.proc.LockManager=function(){this.lockTable_=lf.structs.map.create()},lf.proc.LockType={EXCLUSIVE:0,RESERVED_READ_ONLY:1,RESERVED_READ_WRITE:2,SHARED:3},lf.proc.LockManager.prototype.getEntry_=function(e){var t=this.lockTable_.get(e.getName())||null;return goog.isNull(t)&&(t=new lf.proc.LockTableEntry_,this.lockTable_.set(e.getName(),t)),t},lf.proc.LockManager.prototype.grantLock_=function(e,t,r){t.forEach(function(t){this.getEntry_(t).grantLock(e,r)},this)},lf.proc.LockManager.prototype.canAcquireLock_=function(e,t,r){var o=!0;return t.forEach(function(t){if(o){var n=this.getEntry_(t);o=n.canAcquireLock(e,r)}},this),o},lf.proc.LockManager.prototype.requestLock=function(e,t,r){var o=this.canAcquireLock_(e,t,r);return o&&this.grantLock_(e,t,r),o},lf.proc.LockManager.prototype.releaseLock=function(e,t){t.forEach(function(t){this.getEntry_(t).releaseLock(e)},this)},lf.proc.LockManager.prototype.clearReservedLocks=function(e){e.forEach(function(e){this.getEntry_(e).reservedReadWriteLock=null},this)},lf.proc.LockTableEntry_=function(){this.sharedLocks=this.reservedReadOnlyLocks=this.reservedReadWriteLock=this.exclusiveLock=null},lf.proc.LockTableEntry_.prototype.releaseLock=function(e){this.exclusiveLock==e&&(this.exclusiveLock=null),this.reservedReadWriteLock==e&&(this.reservedReadWriteLock=null),goog.isNull(this.reservedReadOnlyLocks)||this.reservedReadOnlyLocks.delete(e),goog.isNull(this.sharedLocks)||this.sharedLocks.delete(e)},lf.proc.LockTableEntry_.prototype.canAcquireLock=function(e,t){var r=goog.isNull(this.reservedReadOnlyLocks)||0==this.reservedReadOnlyLocks.size;return t==lf.proc.LockType.EXCLUSIVE?(goog.isNull(this.sharedLocks)||0==this.sharedLocks.size)&&r&&goog.isNull(this.exclusiveLock)&&!goog.isNull(this.reservedReadWriteLock)&&this.reservedReadWriteLock==e:t==lf.proc.LockType.SHARED?goog.isNull(this.exclusiveLock)&&goog.isNull(this.reservedReadWriteLock)&&!goog.isNull(this.reservedReadOnlyLocks)&&this.reservedReadOnlyLocks.has(e):t==lf.proc.LockType.RESERVED_READ_ONLY?goog.isNull(this.reservedReadWriteLock):r&&(goog.isNull(this.reservedReadWriteLock)||this.reservedReadWriteLock==e)},lf.proc.LockTableEntry_.prototype.grantLock=function(e,t){t==lf.proc.LockType.EXCLUSIVE?(this.reservedReadWriteLock=null,this.exclusiveLock=e):t==lf.proc.LockType.SHARED?(goog.isNull(this.sharedLocks)&&(this.sharedLocks=lf.structs.set.create()),this.sharedLocks.add(e),goog.isNull(this.reservedReadOnlyLocks)&&(this.reservedReadOnlyLocks=lf.structs.set.create()),this.reservedReadOnlyLocks.delete(e)):t==lf.proc.LockType.RESERVED_READ_ONLY?(goog.isNull(this.reservedReadOnlyLocks)&&(this.reservedReadOnlyLocks=lf.structs.set.create()),this.reservedReadOnlyLocks.add(e)):t==lf.proc.LockType.RESERVED_READ_WRITE&&(this.reservedReadWriteLock=e)},lf.proc.Runner=function(){this.queue_=new lf.proc.Runner.TaskQueue_,this.lockManager_=new lf.proc.LockManager},lf.proc.Runner.prototype.scheduleTask=function(e){return(e.getPriority()<lf.proc.TaskPriority.USER_QUERY_TASK||e.getPriority()<lf.proc.TaskPriority.TRANSACTION_TASK)&&this.lockManager_.clearReservedLocks(e.getScope()),this.queue_.insert(e),this.consumePending_(),e.resolver_.promise},lf.proc.Runner.prototype.consumePending_=function(){for(var e=this.queue_.getValues(),t=0;t<e.length;t++){var r=e[t];(r.getType()==lf.TransactionType.READ_ONLY?this.requestTwoPhaseLock_(r,lf.proc.LockType.RESERVED_READ_ONLY,lf.proc.LockType.SHARED):this.requestTwoPhaseLock_(r,lf.proc.LockType.RESERVED_READ_WRITE,lf.proc.LockType.EXCLUSIVE))&&(this.queue_.remove(r),this.execTask_(r))}},lf.proc.Runner.prototype.requestTwoPhaseLock_=function(e,t,r){var o=!1;return this.lockManager_.requestLock(e.getId(),e.getScope(),t)&&(o=this.lockManager_.requestLock(e.getId(),e.getScope(),r)),o},lf.proc.Runner.prototype.execTask_=function(e){e.exec().then(this.onTaskSuccess_.bind(this,e),this.onTaskError_.bind(this,e))},lf.proc.Runner.prototype.onTaskSuccess_=function(e,t){this.lockManager_.releaseLock(e.getId(),e.getScope()),e.resolver_.resolve(t),this.consumePending_()},lf.proc.Runner.prototype.onTaskError_=function(e,t){this.lockManager_.releaseLock(e.getId(),e.getScope()),e.resolver_.reject(t),this.consumePending_()},lf.proc.Runner.TaskQueue_=function(){this.queue_=[]},lf.proc.Runner.TaskQueue_.prototype.insert=function(e){lf.structs.array.binaryInsert(this.queue_,e,function(e,t){var r=e.getPriority()-t.getPriority();return 0==r?e.getId()-t.getId():r})},lf.proc.Runner.TaskQueue_.prototype.getValues=function(){return this.queue_.slice()},lf.proc.Runner.TaskQueue_.prototype.remove=function(e){return goog.array.remove(this.queue_,e)},lf.Global=function(){this.services_=lf.structs.map.create()},lf.Global.get=function(){return lf.Global.instance_||(lf.Global.instance_=new lf.Global),lf.Global.instance_},lf.Global.prototype.clear=function(){this.services_.clear()},goog.exportProperty(lf.Global.prototype,"clear",lf.Global.prototype.clear),lf.Global.prototype.registerService=function(e,t){return this.services_.set(e.toString(),t),t},goog.exportProperty(lf.Global.prototype,"registerService",lf.Global.prototype.registerService),lf.Global.prototype.getService=function(e){var t=this.services_.get(e.toString())||null;if(goog.isNull(t))throw new lf.Exception(7,e.toString());return t},goog.exportProperty(lf.Global.prototype,"getService",lf.Global.prototype.getService),lf.Global.prototype.isRegistered=function(e){return this.services_.has(e.toString())},goog.exportProperty(lf.Global.prototype,"isRegistered",lf.Global.prototype.isRegistered),lf.Global.prototype.listServices=function(){return lf.structs.map.keys(this.services_)},lf.debug={},lf.debug.inspect=function(e,t,r,o){return goog.isDefAndNotNull(e)?goog.isDefAndNotNull(t)?lf.debug.inspectTable_(e,t,r,o):lf.debug.listTables_(e):lf.debug.listDb_()},lf.debug.toString_=function(e){var t="";try{t=JSON.stringify(e)}catch(r){}return t},lf.debug.getGlobal_=function(e){var t=lf.Global.get(),r=new lf.service.ServiceId("ns_"+e);return t.isRegistered(r)?t.getService(r):null},lf.debug.listDb_=function(){var e=lf.Global.get(),t={};return e.listServices().forEach(function(e){if("ns_"==e.substring(0,3)){var r=e.substring(3);t[r]=lf.debug.getGlobal_(r).getService(lf.service.SCHEMA).version()}}),lf.debug.toString_(t)},lf.debug.listTables_=function(e){var t=lf.debug.getGlobal_(e),r={};if(goog.isDefAndNotNull(t)){var o=t.getService(lf.service.INDEX_STORE);t.getService(lf.service.SCHEMA).tables().forEach(function(e){r[e.getName()]=o.get(e.getRowIdIndexName()).stats().totalRows})}return lf.debug.toString_(r)},lf.debug.inspectTable_=function(e,t,r,o){var n=lf.debug.getGlobal_(e),i=[];if(goog.isDefAndNotNull(n)){var a=null;try{a=n.getService(lf.service.SCHEMA).table(t)}catch(u){}if(goog.isDefAndNotNull(a)){var s=n.getService(lf.service.INDEX_STORE),l=n.getService(lf.service.CACHE),c=s.get(a.getRowIdIndexName()).getRange(void 0,!1,r,o);c.length&&(i=l.getMany(c).map(function(e){return e.payload_}))}}return lf.debug.toString_(i)},lf.DiffCalculator=function(e,t){this.evalRegistry_=lf.eval.Registry.get(),this.query_=e,this.observableResults_=t,this.columns_=this.detectColumns_()},lf.DiffCalculator.prototype.detectColumns_=function(){if(0<this.query_.columns.length)return this.query_.columns;var e=[];return this.query_.from.forEach(function(t){t.getColumns().forEach(function(t){e.push(t)})}),e},lf.DiffCalculator.prototype.comparator_=function(e,t){return this.columns_.every(function(r){return r.getType()==lf.Type.OBJECT||r.getType()==lf.Type.ARRAY_BUFFER?e.getField(r)===t.getField(r):this.evalRegistry_.getEvaluator(r.getType(),lf.eval.Type.EQ)(e.getField(r),t.getField(r))},this)},lf.DiffCalculator.prototype.applyDiff=function(e,t){for(var r=goog.isNull(e)?[]:e.entries,o=goog.math.longestCommonSubsequence(r,t.entries,this.comparator_.bind(this),function(e){return r[e]}),n=[],i=0,a=0;a<r.length;a++){var s=r[a];if(o[i]==s)i++;else{var l=this.observableResults_.splice(i,1),c=lf.DiffCalculator.createChangeRecord_(a,l,0,this.observableResults_);n.push(c)}}var u=goog.math.longestCommonSubsequence(r,t.entries,this.comparator_.bind(this),function(e,r){return t.entries[r]});for(a=i=0;a<t.entries.length;a++)s=t.entries[a],u[i]==s?i++:(this.observableResults_.splice(a,0,s.row.payload_),c=lf.DiffCalculator.createChangeRecord_(a,[],1,this.observableResults_),n.push(c));return n},lf.DiffCalculator.createChangeRecord_=function(e,t,r,o){return{addedCount:r,index:e,object:o,removed:t,type:"splice"}},lf.ObserverRegistry=function(){this.entries_=lf.structs.map.create()},lf.ObserverRegistry.prototype.getQueryId_=function(e){return goog.getUid(e).toString()},lf.ObserverRegistry.prototype.addObserver=function(e,t){var r=e,o=this.getQueryId_(r.query),n=this.entries_.get(o)||null;goog.isNull(n)&&(n=new lf.ObserverRegistry.Entry_(r),this.entries_.set(o,n)),n.addObserver(t)},lf.ObserverRegistry.prototype.removeObserver=function(e,t){var r=e.query,o=this.getQueryId_(r),n=this.entries_.get(o)||null;goog.asserts.assert(goog.isDefAndNotNull(n),"Attempted to unobserve a query that was not observed.");var i=n.removeObserver(t);goog.asserts.assert(i,"removeObserver: Inconsistent state detected."),n.hasObservers()||this.entries_.delete(o)},lf.ObserverRegistry.prototype.getTaskItemsForTables=function(e){var t=lf.structs.set.create();e.forEach(function(e){t.add(e.getName())});var r=[];return this.entries_.forEach(function(e){var o=e.getTaskItem();o.context.from.some(function(e){return t.has(e.getName())})&&r.push(o)}),r},lf.ObserverRegistry.prototype.updateResultsForQuery=function(e,t){var r=this.getQueryId_(goog.isDefAndNotNull(e.clonedFrom)?e.clonedFrom:e),o=this.entries_.get(r)||null;return!goog.isNull(o)&&(o.updateResults(t),!0)},lf.ObserverRegistry.Entry_=function(e){this.builder_=e,this.observers_=lf.structs.set.create(),this.observable_=[],this.lastResults_=null,this.diffCalculator_=new lf.DiffCalculator(e.query,this.observable_)},lf.ObserverRegistry.Entry_.prototype.addObserver=function(e){this.observers_.has(e)?goog.asserts.fail("Attempted to register observer twice."):this.observers_.add(e)},lf.ObserverRegistry.Entry_.prototype.removeObserver=function(e){return this.observers_.delete(e)},lf.ObserverRegistry.Entry_.prototype.getTaskItem=function(){return this.builder_.getObservableTaskItem()},lf.ObserverRegistry.Entry_.prototype.hasObservers=function(){return 0<this.observers_.size},lf.ObserverRegistry.Entry_.prototype.updateResults=function(e){var t=this.diffCalculator_.applyDiff(this.lastResults_,e);this.lastResults_=e,0<t.length&&this.observers_.forEach(function(e){e(t)})},lf.base={},lf.base.init=function(e,t){var r=e.getService(lf.service.SCHEMA),o=t||{},n=new lf.cache.DefaultCache(r);e.registerService(lf.service.CACHE,n);var i=null,a=!1;if(lf.Flags.MEMORY_ONLY)i=new lf.backstore.Memory(r);else{var s;if(goog.isDefAndNotNull(o.storeType))s=o.storeType;else{var l=lf.Capability.get();s=l.indexedDb?lf.schema.DataStoreType.INDEXED_DB:l.webSql?lf.schema.DataStoreType.WEB_SQL:lf.schema.DataStoreType.MEMORY}switch(s){case lf.schema.DataStoreType.INDEXED_DB:i=new lf.backstore.IndexedDB(e,r);break;case lf.schema.DataStoreType.MEMORY:i=new lf.backstore.Memory(r);break;case lf.schema.DataStoreType.OBSERVABLE_STORE:i=new lf.backstore.ObservableStore(r);break;case lf.schema.DataStoreType.WEB_SQL:i=new lf.backstore.WebSql(e,r,o.webSqlDbSize);break;case lf.schema.DataStoreType.FIREBASE:i=new lf.backstore.Firebase(r,o.firebase),a=!0;break;default:throw new lf.Exception(300)}}e.registerService(lf.service.BACK_STORE,i);var c=new lf.index.MemoryIndexStore;return e.registerService(lf.service.INDEX_STORE,c),i.init(o.onUpgrade).then(function(){var t=new lf.proc.DefaultQueryEngine(e);e.registerService(lf.service.QUERY_ENGINE,t);var o=new lf.proc.Runner;e.registerService(lf.service.RUNNER,o);var n=new lf.ObserverRegistry;return e.registerService(lf.service.OBSERVER_REGISTRY,n),c.init(r)}).then(function(){a&&new lf.backstore.ExternalChangeObserver(e).startObserving();return o.enableInspector&&lf.base.enableInspector_(e),new lf.cache.Prefetcher(e).init(r)})},lf.base.enableInspector_=function(){window.top["#lfInspect"]=lf.debug.inspect},lf.base.closeDatabase=function(e){try{e.getService(lf.service.BACK_STORE).close()}catch(t){}},lf.Database=function(){},lf.proc.ExportTask=function(e){this.global_=e,this.schema_=e.getService(lf.service.SCHEMA),this.scope_=lf.structs.set.create(this.schema_.tables()),this.resolver_=goog.Promise.withResolver()},lf.proc.ExportTask.prototype.execSync=function(){var e=this.global_.getService(lf.service.INDEX_STORE),t=this.global_.getService(lf.service.CACHE),r={};return this.schema_.tables().forEach(function(o){var n=e.get(o.getRowIdIndexName()).getRange(),i=t.getMany(n).map(function(e){return e.payload_});r[o.getName()]=i}),{name:this.schema_.name(),version:this.schema_.version(),tables:r}},lf.proc.ExportTask.prototype.exec=function(){var e=this.execSync(),t=new lf.proc.RelationEntry(new lf.Row(lf.Row.DUMMY_ID,e),!0);return goog.Promise.resolve([new lf.proc.Relation([t],[])])},lf.proc.ExportTask.prototype.getType=function(){return lf.TransactionType.READ_ONLY},lf.proc.ExportTask.prototype.getScope=function(){return this.scope_},lf.proc.ExportTask.prototype.getId=function(){return goog.getUid(this)},lf.proc.ExportTask.prototype.getPriority=function(){return lf.proc.TaskPriority.EXPORT_TASK},lf.proc.ImportTask=function(e,t){this.global_=e,this.schema_=e.getService(lf.service.SCHEMA),this.scope_=lf.structs.set.create(this.schema_.tables()),this.resolver_=goog.Promise.withResolver(),this.data_=t,this.backStore_=e.getService(lf.service.BACK_STORE),this.cache_=e.getService(lf.service.CACHE),this.indexStore_=e.getService(lf.service.INDEX_STORE)},lf.proc.ImportTask.prototype.exec=function(){if(!(this.backStore_ instanceof lf.backstore.IndexedDB||this.backStore_ instanceof lf.backstore.Memory||this.backStore_ instanceof lf.backstore.WebSql))throw new lf.Exception(300);if(!this.isEmptyDB_())throw new lf.Exception(110);if(this.schema_.name()!=this.data_.name||this.schema_.version()!=this.data_.version)throw new lf.Exception(111);if(!goog.isDefAndNotNull(this.data_.tables))throw new lf.Exception(112);return this.import_()},lf.proc.ImportTask.prototype.getType=function(){return lf.TransactionType.READ_WRITE},lf.proc.ImportTask.prototype.getScope=function(){return this.scope_},lf.proc.ImportTask.prototype.getId=function(){return goog.getUid(this)},lf.proc.ImportTask.prototype.getPriority=function(){return lf.proc.TaskPriority.IMPORT_TASK},lf.proc.ImportTask.prototype.isEmptyDB_=function(){for(var e=this.schema_.tables(),t=0;t<e.length;++t){if(0<this.indexStore_.get(e[t].getRowIdIndexName()).stats().totalRows)return!1}return!0},lf.proc.ImportTask.prototype.import_=function(){var e,t=new lf.cache.Journal(this.global_,this.scope_),r=this.backStore_.createTx(this.getType(),lf.structs.set.values(this.scope_),t);for(e in this.data_.tables){var o=this.schema_.table(e),n=this.data_.tables[e].map(function(e){return o.createRow(e)}),i=r.getTable(e,o.deserializeRow,lf.backstore.TableType.DATA);this.cache_.setMany(e,n);var a=this.indexStore_.getTableIndices(e);n.forEach(function(e){a.forEach(function(t){var r=e.keyOfIndex(t.getName());t.add(r,e.id())})}),i.put(n)}return r.commit()},lf.proc.TransactionTask=function(e,t){this.global_=e,this.backStore_=e.getService(lf.service.BACK_STORE),this.runner_=e.getService(lf.service.RUNNER),this.observerRegistry_=e.getService(lf.service.OBSERVER_REGISTRY),this.scope_=lf.structs.set.create(t),this.journal_=new lf.cache.Journal(this.global_,this.scope_),this.resolver_=goog.Promise.withResolver(),this.execResolver_=goog.Promise.withResolver(),this.acquireScopeResolver_=goog.Promise.withResolver()},lf.proc.TransactionTask.prototype.exec=function(){return this.acquireScopeResolver_.resolve(),this.execResolver_.promise},lf.proc.TransactionTask.prototype.getType=function(){return lf.TransactionType.READ_WRITE},lf.proc.TransactionTask.prototype.getScope=function(){return this.scope_},lf.proc.TransactionTask.prototype.getId=function(){return goog.getUid(this)},lf.proc.TransactionTask.prototype.getPriority=function(){return lf.proc.TaskPriority.TRANSACTION_TASK},lf.proc.TransactionTask.prototype.acquireScope=function(){return this.runner_.scheduleTask(this),this.acquireScopeResolver_.promise},lf.proc.TransactionTask.prototype.attachQuery=function(e){var t=e.getTaskItem();return t.plan.getRoot().exec(this.journal_,t.context).then(function(e){return e[0].getPayloads()},function(e){this.journal_.rollback();var t=new goog.Promise.CancellationError(e.name);throw this.execResolver_.reject(t),e}.bind(this))},lf.proc.TransactionTask.prototype.commit=function(){return this.tx_=this.backStore_.createTx(this.getType(),lf.structs.set.values(this.scope_),this.journal_),this.tx_.commit().then(function(){this.scheduleObserverTask_(),this.execResolver_.resolve()}.bind(this),function(e){this.journal_.rollback(),this.execResolver_.reject(e)}.bind(this)),this.resolver_.promise},lf.proc.TransactionTask.prototype.rollback=function(){return this.journal_.rollback(),this.execResolver_.resolve(),this.resolver_.promise},lf.proc.TransactionTask.prototype.scheduleObserverTask_=function(){var e=this.observerRegistry_.getTaskItemsForTables(this.scope_);if(0!=e.length){var t=new lf.proc.ObserverQueryTask(this.global_,e);this.runner_.scheduleTask(t)}},lf.proc.TransactionTask.prototype.stats=function(){var e=null;return goog.isDefAndNotNull(this.tx_)&&(e=this.tx_.stats()),goog.isNull(e)?lf.TransactionStats.getDefault():e},lf.proc.Transaction=function(e){this.global_=e,this.runner_=e.getService(lf.service.RUNNER),this.task_=null,this.state_=lf.proc.TransactionState_.CREATED,0==lf.proc.StateTransitions_.size&&this.initStateTransitions_()},goog.exportSymbol("lf.proc.Transaction",lf.proc.Transaction),lf.proc.TransactionState_={CREATED:0,ACQUIRING_SCOPE:1,ACQUIRED_SCOPE:2,EXECUTING_QUERY:3,EXECUTING_AND_COMMITTING:4,COMMITTING:5,ROLLING_BACK:6,FINALIZED:7},lf.proc.StateTransitions_=lf.structs.map.create(),lf.proc.Transaction.prototype.initStateTransitions_=function(){lf.proc.StateTransitions_.set(lf.proc.TransactionState_.CREATED,lf.structs.set.create([lf.proc.TransactionState_.ACQUIRING_SCOPE,lf.proc.TransactionState_.EXECUTING_AND_COMMITTING])),lf.proc.StateTransitions_.set(lf.proc.TransactionState_.ACQUIRING_SCOPE,lf.structs.set.create([lf.proc.TransactionState_.ACQUIRED_SCOPE])),lf.proc.StateTransitions_.set(lf.proc.TransactionState_.ACQUIRED_SCOPE,lf.structs.set.create([lf.proc.TransactionState_.EXECUTING_QUERY,lf.proc.TransactionState_.COMMITTING,lf.proc.TransactionState_.ROLLING_BACK])),lf.proc.StateTransitions_.set(lf.proc.TransactionState_.EXECUTING_QUERY,lf.structs.set.create([lf.proc.TransactionState_.ACQUIRED_SCOPE,lf.proc.TransactionState_.FINALIZED])),lf.proc.StateTransitions_.set(lf.proc.TransactionState_.EXECUTING_AND_COMMITTING,lf.structs.set.create([lf.proc.TransactionState_.FINALIZED])),lf.proc.StateTransitions_.set(lf.proc.TransactionState_.COMMITTING,lf.structs.set.create([lf.proc.TransactionState_.FINALIZED])),lf.proc.StateTransitions_.set(lf.proc.TransactionState_.ROLLING_BACK,lf.structs.set.create([lf.proc.TransactionState_.FINALIZED]))},lf.proc.Transaction.prototype.stateTransition_=function(e){var t=lf.proc.StateTransitions_.get(this.state_)||null;if(goog.isNull(t)||!t.has(e))throw new lf.Exception(107,this.state_,e);this.state_=e},lf.proc.Transaction.prototype.exec=function(e){this.stateTransition_(lf.proc.TransactionState_.EXECUTING_AND_COMMITTING);var t=[];try{e.forEach(function(e){e.assertExecPreconditions(),t.push(e.getTaskItem())},this)}catch(r){return this.stateTransition_(lf.proc.TransactionState_.FINALIZED),goog.Promise.reject(r)}return this.task_=new lf.proc.UserQueryTask(this.global_,t),this.runner_.scheduleTask(this.task_).then(function(e){return this.stateTransition_(lf.proc.TransactionState_.FINALIZED),e.map(function(e){return e.getPayloads()})}.bind(this),function(e){throw this.stateTransition_(lf.proc.TransactionState_.FINALIZED),e}.bind(this))},goog.exportProperty(lf.proc.Transaction.prototype,"exec",lf.proc.Transaction.prototype.exec),lf.proc.Transaction.prototype.begin=function(e){return this.stateTransition_(lf.proc.TransactionState_.ACQUIRING_SCOPE),this.task_=new lf.proc.TransactionTask(this.global_,e),this.task_.acquireScope().then(function(){this.stateTransition_(lf.proc.TransactionState_.ACQUIRED_SCOPE)}.bind(this))},goog.exportProperty(lf.proc.Transaction.prototype,"begin",lf.proc.Transaction.prototype.begin),lf.proc.Transaction.prototype.attach=function(e){this.stateTransition_(lf.proc.TransactionState_.EXECUTING_QUERY);try{e.assertExecPreconditions()}catch(t){return this.stateTransition_(lf.proc.TransactionState_.FINALIZED),goog.Promise.reject(t)}return this.task_.attachQuery(e).then(function(e){return this.stateTransition_(lf.proc.TransactionState_.ACQUIRED_SCOPE),e}.bind(this),function(e){throw this.stateTransition_(lf.proc.TransactionState_.FINALIZED),e}.bind(this))},goog.exportProperty(lf.proc.Transaction.prototype,"attach",lf.proc.Transaction.prototype.attach),lf.proc.Transaction.prototype.commit=function(){return this.stateTransition_(lf.proc.TransactionState_.COMMITTING),this.task_.commit().then(function(){this.stateTransition_(lf.proc.TransactionState_.FINALIZED)}.bind(this))},goog.exportProperty(lf.proc.Transaction.prototype,"commit",lf.proc.Transaction.prototype.commit),lf.proc.Transaction.prototype.rollback=function(){return this.stateTransition_(lf.proc.TransactionState_.ROLLING_BACK),this.task_.rollback().then(function(){this.stateTransition_(lf.proc.TransactionState_.FINALIZED)}.bind(this))},goog.exportProperty(lf.proc.Transaction.prototype,"rollback",lf.proc.Transaction.prototype.rollback),lf.proc.Transaction.prototype.stats=function(){if(this.state_!=lf.proc.TransactionState_.FINALIZED)throw new lf.Exception(105);return this.task_.stats()},goog.exportProperty(lf.proc.Transaction.prototype,"stats",lf.proc.Transaction.prototype.stats),lf.proc.Database=function(e){this.global_=e,this.schema_=e.getService(lf.service.SCHEMA),this.isActive_=!1},goog.exportSymbol("lf.proc.Database",lf.proc.Database),lf.proc.Database.prototype.init=function(e){return this.global_.registerService(lf.service.SCHEMA,this.schema_),lf.base.init(this.global_,e).then(function(){return this.isActive_=!0,this.runner_=this.global_.getService(lf.service.RUNNER),this}.bind(this))},goog.exportProperty(lf.proc.Database.prototype,"init",lf.proc.Database.prototype.init),lf.proc.Database.prototype.getSchema=function(){return this.schema_},goog.exportProperty(lf.proc.Database.prototype,"getSchema",lf.proc.Database.prototype.getSchema),lf.proc.Database.prototype.checkActive_=function(){if(!this.isActive_)throw new lf.Exception(2)},lf.proc.Database.prototype.select=function(e){this.checkActive_();var t=1!=arguments.length||goog.isDefAndNotNull(arguments[0])?Array.prototype.slice.call(arguments):[];return new lf.query.SelectBuilder(this.global_,t)},goog.exportProperty(lf.proc.Database.prototype,"select",lf.proc.Database.prototype.select),lf.proc.Database.prototype.insert=function(){return this.checkActive_(),new lf.query.InsertBuilder(this.global_)},goog.exportProperty(lf.proc.Database.prototype,"insert",lf.proc.Database.prototype.insert),lf.proc.Database.prototype.insertOrReplace=function(){return this.checkActive_(),new lf.query.InsertBuilder(this.global_,!0)},goog.exportProperty(lf.proc.Database.prototype,"insertOrReplace",lf.proc.Database.prototype.insertOrReplace),lf.proc.Database.prototype.update=function(e){return this.checkActive_(),new lf.query.UpdateBuilder(this.global_,e)},goog.exportProperty(lf.proc.Database.prototype,"update",lf.proc.Database.prototype.update),lf.proc.Database.prototype.delete=function(){return this.checkActive_(),new lf.query.DeleteBuilder(this.global_)},goog.exportProperty(lf.proc.Database.prototype,"delete",lf.proc.Database.prototype.delete),lf.proc.Database.prototype.observe=function(e,t){this.checkActive_(),this.global_.getService(lf.service.OBSERVER_REGISTRY).addObserver(e,t)},goog.exportProperty(lf.proc.Database.prototype,"observe",lf.proc.Database.prototype.observe),lf.proc.Database.prototype.unobserve=function(e,t){this.checkActive_(),this.global_.getService(lf.service.OBSERVER_REGISTRY).removeObserver(e,t)},goog.exportProperty(lf.proc.Database.prototype,"unobserve",lf.proc.Database.prototype.unobserve),lf.proc.Database.prototype.createTransaction=function(){return this.checkActive_(),new lf.proc.Transaction(this.global_)},goog.exportProperty(lf.proc.Database.prototype,"createTransaction",lf.proc.Database.prototype.createTransaction),lf.proc.Database.prototype.close=function(){lf.base.closeDatabase(this.global_),this.global_.clear(),this.isActive_=!1},goog.exportProperty(lf.proc.Database.prototype,"close",lf.proc.Database.prototype.close),lf.proc.Database.prototype.export=function(){this.checkActive_();var e=new lf.proc.ExportTask(this.global_);return this.runner_.scheduleTask(e).then(function(e){return e[0].getPayloads()[0]})},goog.exportProperty(lf.proc.Database.prototype,"export",lf.proc.Database.prototype.export),lf.proc.Database.prototype.import=function(e){this.checkActive_();var t=new lf.proc.ImportTask(this.global_,e);return this.runner_.scheduleTask(t).then(function(){return null})},goog.exportProperty(lf.proc.Database.prototype,"import",lf.proc.Database.prototype.import),lf.schema.BaseColumn=function(e,t,r,o,n,i){this.table_=e,this.name_=t,this.isUnique_=r,this.isNullable_=o,this.type_=n,this.alias_=i||null},goog.exportSymbol("lf.schema.BaseColumn",lf.schema.BaseColumn),lf.schema.BaseColumn.prototype.getName=function(){return this.name_},lf.schema.BaseColumn.prototype.getNormalizedName=function(){return this.table_.getEffectiveName()+"."+this.name_},lf.schema.BaseColumn.prototype.toString=function(){return this.getNormalizedName()},lf.schema.BaseColumn.prototype.getTable=function(){return this.table_},lf.schema.BaseColumn.prototype.getType=function(){return this.type_},goog.exportProperty(lf.schema.BaseColumn.prototype,"getType",lf.schema.BaseColumn.prototype.getType),lf.schema.BaseColumn.prototype.getIndices=function(){return goog.isDefAndNotNull(this.indices_)||(this.indices_=[],this.getTable().getIndices().forEach(function(e){-1!=e.columns.map(function(e){return e.schema.getName()}).indexOf(this.name_)&&this.indices_.push(e)},this)),this.indices_},lf.schema.BaseColumn.prototype.getIndex=function(){if(!goog.isDef(this.index_)){var e=this.getIndices().filter(function(e){return 1==e.columns.length&&e.columns[0].schema.getName()==this.getName()},this);this.index_=0<e.length?e[0]:null}return this.index_},lf.schema.BaseColumn.prototype.isNullable=function(){return this.isNullable_},goog.exportProperty(lf.schema.BaseColumn.prototype,"isNullable",lf.schema.BaseColumn.prototype.isNullable),lf.schema.BaseColumn.prototype.isUnique=function(){return this.isUnique_},lf.schema.BaseColumn.prototype.eq=function(e){return lf.pred.createPredicate(this,e,lf.eval.Type.EQ)},goog.exportProperty(lf.schema.BaseColumn.prototype,"eq",lf.schema.BaseColumn.prototype.eq),lf.schema.BaseColumn.prototype.neq=function(e){return lf.pred.createPredicate(this,e,lf.eval.Type.NEQ)},goog.exportProperty(lf.schema.BaseColumn.prototype,"neq",lf.schema.BaseColumn.prototype.neq),lf.schema.BaseColumn.prototype.lt=function(e){return lf.pred.createPredicate(this,e,lf.eval.Type.LT)},goog.exportProperty(lf.schema.BaseColumn.prototype,"lt",lf.schema.BaseColumn.prototype.lt),lf.schema.BaseColumn.prototype.lte=function(e){return lf.pred.createPredicate(this,e,lf.eval.Type.LTE)},goog.exportProperty(lf.schema.BaseColumn.prototype,"lte",lf.schema.BaseColumn.prototype.lte),lf.schema.BaseColumn.prototype.gt=function(e){return lf.pred.createPredicate(this,e,lf.eval.Type.GT)},goog.exportProperty(lf.schema.BaseColumn.prototype,"gt",lf.schema.BaseColumn.prototype.gt),lf.schema.BaseColumn.prototype.gte=function(e){return lf.pred.createPredicate(this,e,lf.eval.Type.GTE)},goog.exportProperty(lf.schema.BaseColumn.prototype,"gte",lf.schema.BaseColumn.prototype.gte),lf.schema.BaseColumn.prototype.match=function(e){return lf.pred.createPredicate(this,e,lf.eval.Type.MATCH)},goog.exportProperty(lf.schema.BaseColumn.prototype,"match",lf.schema.BaseColumn.prototype.match),lf.schema.BaseColumn.prototype.between=function(e,t){return lf.pred.createPredicate(this,[e,t],lf.eval.Type.BETWEEN)},goog.exportProperty(lf.schema.BaseColumn.prototype,"between",lf.schema.BaseColumn.prototype.between),lf.schema.BaseColumn.prototype.in=function(e){return lf.pred.createPredicate(this,e,lf.eval.Type.IN)},goog.exportProperty(lf.schema.BaseColumn.prototype,"in",lf.schema.BaseColumn.prototype.in),lf.schema.BaseColumn.prototype.isNull=function(){return this.eq(null)},goog.exportProperty(lf.schema.BaseColumn.prototype,"isNull",lf.schema.BaseColumn.prototype.isNull),lf.schema.BaseColumn.prototype.isNotNull=function(){return this.neq(null)},goog.exportProperty(lf.schema.BaseColumn.prototype,"isNotNull",lf.schema.BaseColumn.prototype.isNotNull),lf.schema.BaseColumn.prototype.as=function(e){return new lf.schema.BaseColumn(this.table_,this.name_,this.isUnique_,this.isNullable_,this.type_,e)},goog.exportProperty(lf.schema.BaseColumn.prototype,"as",lf.schema.BaseColumn.prototype.as),lf.schema.Info=function(e){this.schema_=e,this.cascadeReferringFk_=new lf.structs.MapSet,this.restrictReferringFk_=new lf.structs.MapSet,this.parents_=new lf.structs.MapSet,this.colParent_=lf.structs.map.create(),this.children_=new lf.structs.MapSet,this.cascadeChildren_=new lf.structs.MapSet,this.restrictChildren_=new lf.structs.MapSet,this.colChild_=new lf.structs.MapSet,this.init_()},lf.schema.Info.prototype.init_=function(){this.schema_.tables().forEach(function(e){var t=e.getName();e.constraint_.foreignKeys_.forEach(function(r){this.parents_.set(t,this.schema_.table(r.parentTable)),this.children_.set(r.parentTable,e),r.action==lf.ConstraintAction.RESTRICT?(this.restrictReferringFk_.set(r.parentTable,r),this.restrictChildren_.set(r.parentTable,e)):(this.cascadeReferringFk_.set(r.parentTable,r),this.cascadeChildren_.set(r.parentTable,e)),this.colParent_.set(e.getName()+"."+r.childColumn,r.parentTable);var o=r.parentTable+"."+r.parentColumn;this.colChild_.set(o,e.getName())},this)},this)},lf.schema.Info.prototype.getReferencingForeignKeys=function(e,t){if(goog.isDefAndNotNull(t))return t==lf.ConstraintAction.CASCADE?this.cascadeReferringFk_.get(e):this.restrictReferringFk_.get(e);var r=this.cascadeReferringFk_.get(e),o=this.restrictReferringFk_.get(e);return goog.isNull(r)&&goog.isNull(o)?null:(r||[]).concat(o||[])},lf.schema.Info.prototype.expandScope_=function(e,t){var r=t.get(e);return goog.isNull(r)?[]:r},lf.schema.Info.prototype.getParentTables=function(e){return this.expandScope_(e,this.parents_)},lf.schema.Info.prototype.getParentTablesByColumns=function(e){var t=lf.structs.set.create();return e.forEach(function(e){var r=this.colParent_.get(e);r&&t.add(r)},this),lf.structs.set.values(t).map(function(e){return this.schema_.table(e)},this)},lf.schema.Info.prototype.getChildTables=function(e,t){return goog.isDefAndNotNull(t)?t==lf.ConstraintAction.RESTRICT?this.expandScope_(e,this.restrictChildren_):this.expandScope_(e,this.cascadeChildren_):this.expandScope_(e,this.children_)},lf.schema.Info.prototype.getChildTablesByColumns=function(e){var t=lf.structs.set.create();return e.forEach(function(e){var r=this.colChild_.get(e);r&&r.forEach(function(e){t.add(e)})},this),lf.structs.set.values(t).map(function(e){return this.schema_.table(e)},this)},lf.schema.Constraint=function(e,t,r){this.primaryKey_=e,this.notNullable_=t,this.foreignKeys_=r},goog.exportSymbol("lf.schema.Constraint",lf.schema.Constraint),lf.schema.Constraint.prototype.getPrimaryKey=function(){return this.primaryKey_},goog.exportProperty(lf.schema.Constraint.prototype,"getPrimaryKey",lf.schema.Constraint.prototype.getPrimaryKey),lf.schema.Constraint.prototype.getForeignKeys=function(){return this.foreignKeys_},goog.exportProperty(lf.schema.Constraint.prototype,"getForeignKeys",lf.schema.Constraint.prototype.getForeignKeys),lf.schema.ForeignKeySpec=function(e,t,r){var o=e.ref.split(".");if(2!=o.length)throw new lf.Exception(540,r);this.childTable=t,this.childColumn=e.local,this.parentTable=o[0],this.parentColumn=o[1],this.name=t+"."+r,this.action=e.action,this.timing=e.timing},lf.schema.TableBuilder=function(e){this.checkNamingRules_(e),this.evalRegistry_=lf.eval.Registry.get(),this.name_=e,this.columns_=lf.structs.map.create(),this.uniqueColumns_=lf.structs.set.create(),this.uniqueIndices_=lf.structs.set.create(),this.nullable_=lf.structs.set.create(),this.pkName_=null,this.indices_=lf.structs.map.create(),this.persistentIndex_=!1,this.fkSpecs_=[]},goog.exportSymbol("lf.schema.TableBuilder",lf.schema.TableBuilder),lf.schema.TableBuilder.IndexedColumn_=function(e){this.name=e.name,this.order=e.order,this.autoIncrement=e.autoIncrement},lf.schema.TableBuilder.NULLABLE_TYPES_BY_DEFAULT=lf.structs.set.create([lf.Type.ARRAY_BUFFER,lf.Type.OBJECT]),lf.schema.TableBuilder.toPascal_=function(e){return e[0].toUpperCase()+e.substring(1)},lf.schema.TableBuilder.prototype.checkNamingRules_=function(e){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(e))throw new lf.Exception(502,e)},lf.schema.TableBuilder.prototype.checkNameConflicts_=function(e){if(e==this.name_)throw new lf.Exception(546,e);if(this.columns_.has(e)||this.indices_.has(e)||this.uniqueIndices_.has(e))throw new lf.Exception(503,this.name_+"."+e)},lf.schema.TableBuilder.prototype.checkPrimaryKey_=function(e){var t=!1;if(e.forEach(function(e){var r=this.columns_.get(e.name);if(t=t||e.autoIncrement,e.autoIncrement&&r!=lf.Type.INTEGER)throw new lf.Exception(504)},this),t&&1<e.length)throw new lf.Exception(505)},lf.schema.TableBuilder.prototype.checkPrimaryKeyNotForeignKey_=function(){if(!goog.isNull(this.pkName_)){var e=this.indices_.get(this.pkName_).map(function(e){return e.name}),t=0;if(this.fkSpecs_.some(function(r,o){return t=o,-1!=e.indexOf(r.childColumn)},this))throw new lf.Exception(543,this.fkSpecs_[t].name)}},lf.schema.TableBuilder.prototype.checkPrimaryKeyDuplicateIndex_=function(){if(!goog.isNull(this.pkName_)){var e=function(e){return e.name},t=JSON.stringify(this.indices_.get(this.pkName_).map(e));this.indices_.forEach(function(r,o){if(o!=this.pkName_){var n=r.map(e);if(JSON.stringify(n)==t)throw new lf.Exception(544,this.name_+"."+o)}},this)}},lf.schema.TableBuilder.prototype.checkPrimaryKeyNotNullable_=function(){goog.isNull(this.pkName_)||this.indices_.get(this.pkName_).forEach(function(e){if(this.nullable_.has(e.name))throw new lf.Exception(545,this.name_+"."+e.name)},this)},lf.schema.TableBuilder.prototype.addColumn=function(e,t){return this.checkNamingRules_(e),this.checkNameConflicts_(e),this.columns_.set(e,t),lf.schema.TableBuilder.NULLABLE_TYPES_BY_DEFAULT.has(t)&&this.addNullable([e]),this},goog.exportProperty(lf.schema.TableBuilder.prototype,"addColumn",lf.schema.TableBuilder.prototype.addColumn),lf.schema.TableBuilder.prototype.addPrimaryKey=function(e,t){this.pkName_="pk"+lf.schema.TableBuilder.toPascal_(this.name_),this.checkNamingRules_(this.pkName_),this.checkNameConflicts_(this.pkName_);var r=this.normalizeColumns_(e,!0,void 0,t);return this.checkPrimaryKey_(r),1==r.length&&this.uniqueColumns_.add(r[0].name),this.uniqueIndices_.add(this.pkName_),this.indices_.set(this.pkName_,r),this},goog.exportProperty(lf.schema.TableBuilder.prototype,"addPrimaryKey",lf.schema.TableBuilder.prototype.addPrimaryKey),lf.schema.TableBuilder.prototype.addForeignKey=function(e,t){this.checkNamingRules_(e),this.checkNameConflicts_(e);var r=new lf.schema.ForeignKeySpec(t,this.name_,e);if(goog.isDef(r.action)||(r.action=lf.ConstraintAction.RESTRICT),goog.isDef(r.timing)||(r.timing=lf.ConstraintTiming.IMMEDIATE),r.action==lf.ConstraintAction.CASCADE&&r.timing==lf.ConstraintTiming.DEFERRABLE)throw new lf.Exception(506);if(!this.columns_.has(r.childColumn))throw new lf.Exception(540,e);return this.fkSpecs_.push(r),this.addIndex(e,[r.childColumn],this.uniqueColumns_.has(r.childColumn)),this},goog.exportProperty(lf.schema.TableBuilder.prototype,"addForeignKey",lf.schema.TableBuilder.prototype.addForeignKey),lf.schema.TableBuilder.prototype.addUnique=function(e,t){this.checkNamingRules_(e),this.checkNameConflicts_(e);var r=this.normalizeColumns_(t,!0);return 1==r.length&&(this.uniqueColumns_.add(r[0].name),this.markFkIndexForColumnUnique_(r[0].name)),this.indices_.set(e,r),this.uniqueIndices_.add(e),this},goog.exportProperty(lf.schema.TableBuilder.prototype,"addUnique",lf.schema.TableBuilder.prototype.addUnique),lf.schema.TableBuilder.prototype.markFkIndexForColumnUnique_=function(e){this.fkSpecs_.forEach(function(t){if(t.childColumn==e){var r=t.name.split(".")[1];this.uniqueIndices_.add(r)}},this)},lf.schema.TableBuilder.prototype.addNullable=function(e){return this.normalizeColumns_(e,!1).forEach(function(e){this.nullable_.add(e.name)},this),this},goog.exportProperty(lf.schema.TableBuilder.prototype,"addNullable",lf.schema.TableBuilder.prototype.addNullable),lf.schema.TableBuilder.prototype.addIndex=function(e,t,r,o){this.checkNamingRules_(e),this.checkNameConflicts_(e);var n=this.normalizeColumns_(t,!0,o);return r&&this.uniqueIndices_.add(e),this.indices_.set(e,n),this},goog.exportProperty(lf.schema.TableBuilder.prototype,"addIndex",lf.schema.TableBuilder.prototype.addIndex),lf.schema.TableBuilder.prototype.persistentIndex=function(e){this.persistentIndex_=e},goog.exportProperty(lf.schema.TableBuilder.prototype,"persistentIndex",lf.schema.TableBuilder.prototype.persistentIndex),lf.schema.TableBuilder.prototype.getSchema=function(){return this.checkPrimaryKeyNotForeignKey_(),this.checkPrimaryKeyDuplicateIndex_(),this.checkPrimaryKeyNotNullable_(),new(this.generateTableClass_())},goog.exportProperty(lf.schema.TableBuilder.prototype,"getSchema",lf.schema.TableBuilder.prototype.getSchema),lf.schema.TableBuilder.prototype.normalizeColumns_=function(e,t,r,o){var n=e;return(n="string"==typeof e[0]?e.map(function(e){return new lf.schema.TableBuilder.IndexedColumn_({name:e,order:goog.isDefAndNotNull(r)?r:lf.Order.ASC,autoIncrement:o||!1})}):e.map(function(e){return new lf.schema.TableBuilder.IndexedColumn_(e)})).forEach(function(e){if(!this.columns_.has(e.name))throw new lf.Exception(508,this.name_,e.name);if(t){var r=this.columns_.get(e.name);if(r==lf.Type.ARRAY_BUFFER||r==lf.Type.OBJECT)throw new lf.Exception(509,this.name_,e.name)}},this),n},lf.schema.TableBuilder.prototype.generateTableClass_=function(){var e=this,t=function(){var t=lf.structs.map.keys(e.columns_).map(function(t){return this[t]=new lf.schema.BaseColumn(this,t,e.uniqueColumns_.has(t),e.nullable_.has(t),e.columns_.get(t)),this[t]},this),r=function(t){return e.indices_.get(t).map(function(e){return{schema:this[e.name],order:e.order,autoIncrement:e.autoIncrement}},this)},o=lf.structs.map.keys(e.indices_).map(function(t){return new lf.schema.Index(e.name_,t,e.uniqueIndices_.has(t),r.call(this,t))},this);lf.schema.Table.call(this,e.name_,t,o,e.persistentIndex_);var n=goog.isNull(e.pkName_)?null:new lf.schema.Index(e.name_,e.pkName_,!0,r.call(this,e.pkName_)),i=t.filter(function(t){return!e.nullable_.has(t.getName())});this.constraint_=new lf.schema.Constraint(n,i,e.fkSpecs_),this.rowClass_=e.generateRowClass_(t,o)};return goog.inherits(t,lf.schema.Table),t.prototype.createRow=function(e){return new this.rowClass_(lf.Row.getNextId(),e)},goog.exportProperty(t.prototype,"createRow",t.prototype.createRow),t.prototype.deserializeRow=function(e){var t={};return this.getColumns().forEach(function(r){var o=r.getName(),n=r.getType(),i=e.value[o];t[o]=n==lf.Type.ARRAY_BUFFER?lf.Row.hexToBin(i):n==lf.Type.DATE_TIME?goog.isDefAndNotNull(i)?new Date(i):null:i},this),new this.rowClass_(e.id,t)},goog.exportProperty(t.prototype,"deserializeRow",t.prototype.deserializeRow),t.prototype.getConstraint=function(){return this.constraint_},goog.exportProperty(t.prototype,"getConstraint",t.prototype.getConstraint),t},lf.schema.TableBuilder.prototype.generateRowClass_=function(e,t){var r=function(r,o){this.columns_=e,this.indices_=t,lf.Row.call(this,r,o)};goog.inherits(r,lf.Row),r.prototype.defaultPayload=function(){var e={};return this.columns_.forEach(function(t){e[t.getName()]=t.isNullable()?null:lf.type.DEFAULT_VALUES[t.getType()]}),e},r.prototype.toDbPayload=function(){var e={};return this.columns_.forEach(function(t){var r=t.getName(),o=t.getType(),n=this.payload_[r];e[r]=o==lf.Type.ARRAY_BUFFER?goog.isDefAndNotNull(n)?lf.Row.binToHex(n):null:o==lf.Type.DATE_TIME?goog.isDefAndNotNull(n)?n.getTime():null:o==lf.Type.OBJECT?goog.isDefAndNotNull(n)?n:null:n},this),e};var o=function(e){var t=this.columns_.get(e.getName()),r=this.evalRegistry_.getKeyOfIndexEvaluator(t);return function(t){return r(t[e.getName()])}}.bind(this),n=function(e){var t=e.map(function(e){return o(e.schema)});return function(e){return t.map(function(t){return t(e)})}}.bind(this),i={};return t.forEach(function(e){var t,r=e.getNormalizedName(),a=e;t=1==a.columns.length?o(a.columns[0].schema):n(a.columns),i[r]=t}),r.prototype.keyOfIndex=function(e){return-1!=e.indexOf("#")?this.id():i.hasOwnProperty(e)?i[e](this.payload_):null},r},lf.schema.Builder=function(e,t){this.schema_=new lf.schema.DatabaseSchema(e,t),this.tableBuilders_=lf.structs.map.create(),this.finalized_=!1,this.db_=null,this.connectInProgress_=!1},goog.exportSymbol("lf.schema.Builder",lf.schema.Builder),lf.schema.Builder.prototype.checkForeignKeyValidity_=function(e){e.fkSpecs_.forEach(function(t){var r=t.parentTable;if(!this.tableBuilders_.has(r))throw new lf.Exception(536,t.name);var o=this.tableBuilders_.get(r).getSchema(),n=t.parentColumn;if(!o.hasOwnProperty(n))throw new lf.Exception(537,t.name);if(e.getSchema()[t.childColumn].getType()!=o[n].getType())throw new lf.Exception(538,t.name);if(!o[n].isUnique())throw new lf.Exception(539,t.name)},this)},lf.schema.Builder.prototype.checkForeignKeyChain_=function(e){e.fkSpecs_.forEach(function(e){this.tableBuilders_.get(e.parentTable).fkSpecs_.forEach(function(t){if(t.childColumn==e.parentColumn)throw new lf.Exception(534,e.name)},this)},this)},lf.schema.Builder.prototype.finalize_=function(){this.finalized_||(this.tableBuilders_.forEach(function(e){this.checkForeignKeyValidity_(e),this.schema_.setTable(e.getSchema())},this),lf.structs.map.values(this.tableBuilders_).forEach(this.checkForeignKeyChain_,this),this.checkFkCycle_(),this.tableBuilders_.clear(),this.finalized_=!0)},lf.schema.Builder.prototype.checkCycleUtil_=function(e,t){e.visited||(e.visited=!0,e.onStack=!0,e.edges.forEach(function(r){var o=t.get(r);if(o.visited){if(o.onStack&&e!=o)throw new lf.Exception(533)}else this.checkCycleUtil_(o,t)},this)),e.onStack=!1},lf.schema.Builder.prototype.checkFkCycle_=function(){var e=lf.structs.map.create();this.schema_.tables_.forEach(function(t,r){e.set(r,new lf.schema.GraphNode_(r))},this),this.tableBuilders_.forEach(function(t,r){t.fkSpecs_.forEach(function(t){e.get(t.parentTable).edges.add(r)})}),lf.structs.map.values(e).forEach(function(t){this.checkCycleUtil_(t,e)},this)},lf.schema.GraphNode_=function(e){this.onStack=this.visited=!1,this.edges=lf.structs.set.create(),this.tableName=e},lf.schema.Builder.prototype.getSchema=function(){return this.finalized_||this.finalize_(),this.schema_},goog.exportProperty(lf.schema.Builder.prototype,"getSchema",lf.schema.Builder.prototype.getSchema),lf.schema.Builder.prototype.getGlobal=function(){var e,t=new lf.service.ServiceId("ns_"+this.schema_.name()),r=lf.Global.get();return r.isRegistered(t)?e=r.getService(t):(e=new lf.Global,r.registerService(t,e)),e},goog.exportProperty(lf.schema.Builder.prototype,"getGlobal",lf.schema.Builder.prototype.getGlobal),lf.schema.Builder.prototype.connect=function(e){if(this.connectInProgress_||!goog.isNull(this.db_)&&this.db_.isActive_)throw new lf.Exception(113);if(this.connectInProgress_=!0,goog.isNull(this.db_)){var t=this.getGlobal();t.isRegistered(lf.service.SCHEMA)||t.registerService(lf.service.SCHEMA,this.getSchema()),this.db_=new lf.proc.Database(t)}return this.db_.init(e).then(function(e){return this.connectInProgress_=!1,e}.bind(this),function(e){throw this.connectInProgress_=!1,e}.bind(this))},goog.exportProperty(lf.schema.Builder.prototype,"connect",lf.schema.Builder.prototype.connect),lf.schema.Builder.prototype.createTable=function(e){if(this.tableBuilders_.has(e))throw new lf.Exception(503,e);if(this.finalized_)throw new lf.Exception(535);return this.tableBuilders_.set(e,new lf.schema.TableBuilder(e)),this.tableBuilders_.get(e)},goog.exportProperty(lf.schema.Builder.prototype,"createTable",lf.schema.Builder.prototype.createTable),lf.schema.Builder.prototype.setPragma=function(e){if(this.finalized_)throw new lf.Exception(535);return this.schema_.setPragma(e),this},goog.exportProperty(lf.schema.Builder.prototype,"setPragma",lf.schema.Builder.prototype.setPragma),lf.schema.DatabaseSchema=function(e,t){this.name_=e,this.version_=t,this.tables_=lf.structs.map.create(),this.pragma_={enableBundledMode:!1}},goog.exportSymbol("lf.schema.DatabaseSchema",lf.schema.DatabaseSchema),lf.schema.DatabaseSchema.prototype.name=function(){return this.name_},goog.exportProperty(lf.schema.DatabaseSchema.prototype,"name",lf.schema.DatabaseSchema.prototype.name),lf.schema.DatabaseSchema.prototype.version=function(){return this.version_},goog.exportProperty(lf.schema.DatabaseSchema.prototype,"version",lf.schema.DatabaseSchema.prototype.version),lf.schema.DatabaseSchema.prototype.tables=function(){return lf.structs.map.values(this.tables_)},goog.exportProperty(lf.schema.DatabaseSchema.prototype,"tables",lf.schema.DatabaseSchema.prototype.tables),lf.schema.DatabaseSchema.prototype.table=function(e){if(!this.tables_.has(e))throw new lf.Exception(101,e);return this.tables_.get(e)},goog.exportProperty(lf.schema.DatabaseSchema.prototype,"table",lf.schema.DatabaseSchema.prototype.table),lf.schema.DatabaseSchema.prototype.info=function(){return this.info_||(this.info_=new lf.schema.Info(this)),this.info_},lf.schema.DatabaseSchema.prototype.setTable=function(e){this.tables_.set(e.getName(),e)},lf.schema.DatabaseSchema.prototype.pragma=function(){return this.pragma_},goog.exportProperty(lf.schema.DatabaseSchema.prototype,"pragma",lf.schema.DatabaseSchema.prototype.pragma),lf.schema.DatabaseSchema.prototype.setPragma=function(e){this.pragma_=e},lf.schema.create=function(e,t){return new lf.schema.Builder(e,t)},goog.exportSymbol("lf.schema.create",lf.schema.create),goog.Promise.prototype.catch=goog.Promise.prototype.thenCatch,goog.exportProperty(goog.Promise.prototype,"catch",goog.Promise.prototype.catch);try{module&&(module.exports=lf)}catch(e){}}.bind(window)()}).call(this,__webpack_require__("YuTiLZs6")(module))},"1MBn2IOH":function(e,t,r){var o=r("DVgAQ7gs"),n=r("JiEaEVNT"),i=r("UqcFofGq");e.exports=function(e){var t=o(e),r=n.f;if(r)for(var a,s=r(e),l=i.f,c=0;s.length>c;)l.call(e,a=s[c++])&&t.push(a);return t}},"1R9wsEXu":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(t){e.call(this),this.errors=t;var r=Error.call(this,t?t.length+" errors occurred during unsubscription:\\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return o(t,e),t}(Error);t.UnsubscriptionError=n},"1Re5jPji":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("tSehy8ip"),i=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r,this.pending=!1}return o(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.delay=t,this.id=this.id||this.requestAsyncId(o,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),n.root.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;n.root.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,o=void 0;try{this.work(e)}catch(n){r=!0,o=!!n&&n||new Error(n)}if(r)return this.unsubscribe(),o},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,o=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&r.splice(o,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(r("C7Jbx66X").Action);t.AsyncAction=i},"1TsAvqxI":function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},"1ouXhM4E":function(e,t,r){"use strict";var o=r("10Uvv+NS"),n=r("9zIo8rnR");t.queue=new n.QueueScheduler(o.QueueAction)},"22vdDqAp":function(e,t,r){"use strict";t.identity=function(e){return e}},"2OiFDQHv":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"35WnazEF":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(){e.apply(this,arguments)}return o(t,e),t.prototype.notifyNext=function(e,t,r,o,n){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(r("rfFCs9L9").Subscriber);t.OuterSubscriber=n},"36VROgQT":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("GaSbzOnp");r("PPEettaf"),r("QnJ9uIvA"),r("GaSbzOnp"),o.__exportStar(r("U9Ham2Lb"),t),o.__exportStar(r("T5HjItxe"),t),o.__exportStar(r("iDRGSAQ8"),t),o.__exportStar(r("vKdEha3l"),t)},"3LyjJE0w":function(e,t,r){var o=r("KroJtBC/");e.exports=function(e,t,r){for(var n in t)o(e,n,t[n],r);return e}},"3gwnn8Cw":function(e,t,r){"use strict";var o=r("Rkh20UyL");t.fromPromise=o.PromiseObservable.create},"3oOovukc":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("8yf6doCl"),i=r("4c1CS0b3"),a=r("rfFCs9L9"),s=r("NTzudah4"),l=r("wHNhmth5"),c=function(e){function t(t,r){e.call(this),this.source=t,this.subjectFactory=r,this._refCount=0,this._isComplete=!1}return o(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new s.Subscription).add(this.source.subscribe(new f(this.getSubject(),this))),e.closed?(this._connection=null,e=s.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return l.refCount()(this)},t}(i.Observable);t.ConnectableObservable=c;var u=c.prototype;t.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:u._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}};var f=function(e){function t(t,r){e.call(this,t),this.connectable=r}return o(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(n.SubjectSubscriber),g=(function(){function e(e){this.connectable=e}e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var o=new g(e,r),n=t.subscribe(o);return o.closed||(o.connection=r.connect()),n}}(),function(e){function t(t,r){e.call(this,t),this.connectable=r}return o(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,o=e._connection;this.connection=null,!o||r&&o!==r||o.unsubscribe()}}else this.connection=null},t}(a.Subscriber))},"4/V0zjKT":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("4c1CS0b3"),n=r("HDK4lIiT");function i(e){return t.rawDb$.next(e),t.rawDb$.complete(),Promise.resolve()}t.rawDb$=new n.ReplaySubject(1),t.lfFactory=function(e,t){return o.Observable.create(function(r){t.onUpgrade=i,t.storeType>=3&&(t.storeType=t.storeType+1),e.connect(t).then(function(e){r.next(e),r.complete()}).catch(function(e){return r.error(e)})}).publishReplay(1)}},"47xDeUp/":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="0.10.4-alpha.16-diff"},"4EEHGQK0":function(e,t,r){"use strict";var o=r("ENbTyNsR");function n(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:o.noop}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n(e)},t.pipeFromArray=n},"4LiDeglH":function(e,t,r){"use strict";var o=r("dyZXAqyT"),n=r("XKFUp60F"),i=r("KroJtBC/"),a=r("3LyjJE0w"),s=r("Z6vFbDPU"),l=r("SlkYKCVx"),c=r("9gX7r8Mc"),u=r("0/R4TaPX"),f=r("eeVqVyzO"),g=r("XMVhRdiB"),p=r("fyDq9XZ+"),h=r("Xbziiu0X");e.exports=function(e,t,r,d,y,_){var m=o[e],v=m,b=y?"set":"add",S=v&&v.prototype,T={},E=function(e){var t=S[e];i(S,e,"delete"==e?function(e){return!(_&&!u(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(_&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return _&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof v&&(_||S.forEach&&!f(function(){(new v).entries().next()}))){var N=new v,x=N[b](_?{}:-0,1)!=N,w=f(function(){N.has(1)}),A=g(function(e){new v(e)}),R=!_&&f(function(){for(var e=new v,t=5;t--;)e[b](t,t);return!e.has(-0)});A||((v=t(function(t,r){c(t,v,e);var o=h(new m,t,v);return null!=r&&l(r,y,o[b],o),o})).prototype=S,S.constructor=v),(w||R)&&(E("delete"),E("has"),y&&E("get")),(R||x)&&E(b),_&&S.clear&&delete S.clear}else v=d.getConstructor(t,e,y,b),a(v.prototype,r),s.NEED=!0;return p(v,e),T[e]=v,n(n.G+n.W+n.F*(v!=m),T),_||d.setStrong(v,e,y),v}},"4R4ubiJj":function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"4XzM5oUL":function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("+EyIUOe9");o.Observable.prototype.map=n.map},"4c1CS0b3":function(e,t,r){"use strict";var o=r("tSehy8ip"),n=r("nA+3cBpY"),i=r("78uXI4TS"),a=r("4EEHGQK0"),s=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var o=this.operator,i=n.toSubscriber(e,t,r);if(o?o.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var r=this;if(t||(o.root.Rx&&o.root.Rx.config&&o.root.Rx.config.Promise?t=o.root.Rx.config.Promise:o.root.Promise&&(t=o.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,o){var n;n=r.subscribe(function(t){if(n)try{e(t)}catch(r){o(r),n.unsubscribe()}else e(t)},o,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[i.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 0===e.length?this:a.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;if(e||(o.root.Rx&&o.root.Rx.config&&o.root.Rx.config.Promise?e=o.root.Rx.config.Promise:o.root.Promise&&(e=o.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var o;t.subscribe(function(e){return o=e},function(e){return r(e)},function(){return e(o)})})},e.create=function(t){return new e(t)},e}();t.Observable=s},"556/UaWp":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("WdnSUq9g"),n=r("U9Ham2Lb"),i=r("r1kuiv4d"),a=r("U9Ham2Lb"),s=r("W5LEaZ1S");t.revise=function(e,t){switch(e){case a.Relationship.oneToOne:o.forEach(t,function(e){e.id&&(e.id=!1)});break;case a.Relationship.oneToMany:t=[t];break;case a.Relationship.manyToMany:throw new s.Exception(s.dbErrMsg.NotImplemented());default:throw new s.Exception(s.dbErrMsg.UnexpectedRelationship())}return t},t.create=function(e,t,r){return r===n.RDBType.LITERAL_ARRAY?{column:e,id:t,type:i.LiteralArray}:{column:e,id:t}}},"5PNMwb2Z":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(){var t=e.call(this,"argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}return o(t,e),t}(Error);t.ArgumentOutOfRangeError=n},"6OjodyzK":function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("Zu2Al+IQ");o.Observable.prototype.takeUntil=n.takeUntil},"78uXI4TS":function(e,t,r){"use strict";var o=r("tSehy8ip");function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}t.getSymbolObservable=n,t.observable=n(o.root),t.$$observable=t.observable},"7RDzPUY4":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hidden="__hidden__",t.hiddenColName=function(e){return""+t.hidden+e}},"7uu2VGkf":function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("IrFB9ApT");o.Observable.from=n.from},"8ZmwKLHE":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(t,r){e.call(this),this.subject=t,this.subscriber=r,this.closed=!1}return o(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(r("NTzudah4").Subscription);t.SubjectSubscription=n},"8a7rx0LP":function(e,t,r){"use strict";var o=r("hswaSTrv"),n=r("RjD/ZGJI");e.exports=function(e,t,r){t in e?o.f(e,t,n(0,r)):e[t]=r}},"8oxByP8V":function(e,t){var r,o,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var l,c=[],u=!1,f=-1;function g(){u&&l&&(u=!1,l.length?c=l.concat(c):f=-1,c.length&&p())}function p(){if(!u){var e=s(g);u=!0;for(var t=c.length;t;){for(l=c,c=[];++f<t;)l&&l[f].run();f=-1,t=c.length}l=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function d(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||u||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=d,n.addListener=d,n.once=d,n.off=d,n.removeListener=d,n.removeAllListeners=d,n.emit=d,n.prependListener=d,n.prependOnceListener=d,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},"8yf6doCl":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("4c1CS0b3"),i=r("rfFCs9L9"),a=r("NTzudah4"),s=r("VpWK6D1a"),l=r("8ZmwKLHE"),c=r("qWnhSdfT"),u=function(e){function t(t){e.call(this,t),this.destination=t}return o(t,e),t}(i.Subscriber);t.SubjectSubscriber=u;var f=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return o(t,e),t.prototype[c.rxSubscriber]=function(){return new u(this)},t.prototype.lift=function(e){var t=new g(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,o=t.slice(),n=0;n<r;n++)o[n].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,o=t.slice(),n=0;n<r;n++)o[n].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),o=0;o<t;o++)r[o].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new l.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new n.Observable;return e.source=this,e},t.create=function(e,t){return new g(e,t)},t}(n.Observable);t.Subject=f;var g=function(e){function t(t,r){e.call(this),this.destination=t,this.source=r}return o(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):a.Subscription.EMPTY},t}(f);t.AnonymousSubject=g},"92bnoOmF":function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("+q8Ve0Jk");o.Observable.prototype.do=n._do,o.Observable.prototype._do=n._do},"9A11jf2F":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9"),i=r("ty+vvJtE");t.first=function(e,t,r){return function(o){return o.lift(new a(e,t,r,o))}};var a=function(){function e(e,t,r,o){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=o}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),s=function(e){function t(t,r,o,n,i){e.call(this,t),this.predicate=r,this.resultSelector=o,this.defaultValue=n,this.source=i,this.index=0,this.hasCompleted=!1,this._emitted=!1}return o(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(o){return void this.destination.error(o)}r&&this._emit(e,t)},t.prototype._emit=function(e,t){this.resultSelector?this._tryResultSelector(e,t):this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(o){return void this.destination.error(o)}this._emitFinal(r)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||e.error(new i.EmptyError):(e.next(this.defaultValue),e.complete())},t}(n.Subscriber)},"9AAni4xE":function(e,t,r){"use strict";var o=r("wmvG3xga"),n=r("s5qYcagS");e.exports=r("4LiDeglH")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=o.getEntry(n(this,"Map"),e);return t&&t.v},set:function(e,t){return o.def(n(this,"Map"),0===e?0:e,t)}},o,!0)},"9F+QFB74":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapFn=function(e){return e},t.mapFn.toString=function(){return"RDB_DEFAULT_MAP_FN"}},"9cByp9Rv":function(e,t,r){"use strict";var o=r("1Re5jPji"),n=r("xA5P6dQl");t.async=new n.AsyncScheduler(o.AsyncAction)},"9gX7r8Mc":function(e,t){e.exports=function(e,t,r,o){if(!(e instanceof t)||void 0!==o&&o in e)throw TypeError(r+": incorrect invocation!");return e}},"9zIo8rnR":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(){e.apply(this,arguments)}return o(t,e),t}(r("xA5P6dQl").AsyncScheduler);t.QueueScheduler=n},AfnzePDl:function(e,t,r){"use strict";var o=r("LQAcWje+"),n=r("XKFUp60F"),i=r("KroJtBC/"),a=r("MukbbRF2"),s=r("hPIQAJUg"),l=r("QaDbgE37"),c=r("fyDq9XZ+"),u=r("OP3Ybgno"),f=r("K0xUtE8J")("iterator"),g=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,h,d,y,_){l(r,t,h);var m,v,b,S=function(e){if(!g&&e in x)return x[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},T=t+" Iterator",E="values"==d,N=!1,x=e.prototype,w=x[f]||x["@@iterator"]||d&&x[d],A=w||S(d),R=d?E?S("entries"):A:void 0,P="Array"==t&&x.entries||w;if(P&&(b=u(P.call(new e)))!==Object.prototype&&b.next&&(c(b,T,!0),o||"function"==typeof b[f]||a(b,f,p)),E&&w&&"values"!==w.name&&(N=!0,A=function(){return w.call(this)}),o&&!_||!g&&!N&&x[f]||a(x,f,A),s[t]=A,s[T]=p,d)if(m={values:E?A:S("values"),keys:y?A:S("keys"),entries:R},_)for(v in m)v in x||i(x,v,m[v]);else n(n.P+n.F*(g||N),t,m);return m}},AvREovsz:function(e,t,r){var o=r("RYi7EyyQ"),n=r("vhPUF841");e.exports=function(e){return function(t,r){var i,a,s=String(n(t)),l=o(r),c=s.length;return l<0||l>=c?e?"":void 0:(i=s.charCodeAt(l))<55296||i>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):i:e?s.slice(l,l+2):a-56320+(i-55296<<10)+65536}}},"B5Uge+x3":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9");t.scan=function(e,t){var r=!1;return arguments.length>=2&&(r=!0),function(o){return o.lift(new i(e,t,r))}};var i=function(){function e(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.accumulator,this.seed,this.hasSeed))},e}(),a=function(e){function t(t,r,o,n){e.call(this,t),this.accumulator=r,this._seed=o,this.hasSeed=n,this.index=0}return o(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.accumulator(this.seed,e,r)}catch(o){this.destination.error(o)}this.seed=t,this.destination.next(t)},t}(n.Subscriber)},B6eTE7Si:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("GaSbzOnp"),n=r("4c1CS0b3"),i=r("DbwpQKmZ"),a=r("NVK113Rt"),s=r("/LR135zw"),l=r("17JF7D0B"),c=r("W5LEaZ1S"),u=r("556/UaWp"),f=r("47xDeUp/"),g=r("T5HjItxe"),p=r("r41H6Sz0"),h=r("ydz6hq0f"),d=r("WdnSUq9g"),y=r("xM413arm"),_=r("+J1YLSRB"),m={error:function(){return d.warn("Execute failed, transaction is already marked for rollback.")}},v=function(){function e(e,t,r,o){void 0===e&&(e=_.DataStoreType.MEMORY),void 0===t&&(t=!1),void 0===r&&(r="ReactiveDB"),void 0===o&&(o=1);var n=this;this.inTransaction=!1,this.schemaDefs=new Map,this.schemas=new Map,this.connected=!1,this.storedIds=new Set,this.findPrimaryKey=function(e){return n.findSchema(e).pk},this.findSchema=function(e){var t=n.schemas.get(e);return d.assert(t,c.dbErrMsg.NonExistentTable(e)),t},this.schemaBuilder=l.schema.create(r,o),this.database$=y.lfFactory(this.schemaBuilder,{storeType:e,enableInspector:t})}return e.getTables=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(t){return e.getSchema().table(t)})},e.prototype.defineSchema=function(e,t){var r=!this.schemaDefs.has(e)&&!this.connected;d.assert(r,c.dbErrMsg.UnmodifiableTable());var o=Object.keys(t).some(function(e){return!0===t[e].primaryKey});return d.assert(o,c.dbErrMsg.PrimaryKeyNotProvided()),this.schemaDefs.set(e,t),this},e.prototype.connect=function(){this.buildTables(),this.connected=!0,this.schemaDefs.clear(),this.subscription=this.database$.connect()},e.prototype.dump=function(){return this.database$.pipe(i.concatMap(function(e){return e.export()}))},e.prototype.load=function(e){var t=this;d.assert(!this.connected,c.dbErrMsg.DatabaseIsNotEmpty());return this.database$.pipe(i.concatMap(function(r){return d.forEach(e.tables,function(e,r){var o=t.findSchema(r);e.forEach(function(e){return t.storedIds.add(h.fieldIdentifier(r,e[o.pk]))})}),r.import(e).catch(function(){d.forEach(e.tables,function(e,r){var o=t.findSchema(r);e.forEach(function(e){return t.storedIds.delete(h.fieldIdentifier(r,e[o.pk]))})})})}))},e.prototype.insert=function(t,r){var n=this;return this.database$.pipe(i.concatMap(function(i){var a=n.findSchema(t),l=a.pk,c=a.mapper,u=e.getTables(i,t)[0],f=[],g=d.clone(r);(Array.isArray(g)?g:[g]).forEach(function(e){var t=new p.Mutation(i,u),r=Object.create(null);c.forEach(function(t,o){if(d.hasOwn(e,o)&&o!==l){var n=e[o];r[o]=t(n),r[h.hiddenColName(o)]=n}}),t.patch(o.__assign({},e,r)),t.withId(l,e[l]),f.push(t)});var y=p.Mutation.aggregate(i,f,[]),_=y.contextIds,m=y.queries;_.forEach(function(e){return n.storedIds.add(e)});var v={error:function(){return _.forEach(function(e){return n.storedIds.delete(e)})}};return n.inTransaction?(n.attachTx(v),n.executor(i,m)):n.executor(i,m).pipe(s.tap(v))}))},e.prototype.get=function(e,t,r){var o=this;void 0===t&&(t={}),void 0===r&&(r=_.JoinMode.imlicit);var n=this.database$.pipe(a.map(function(n){return o.buildSelector(n,e,t,r)}));return new p.QueryToken(n)},e.prototype.update=function(t,r,a){var s=this,l=d.getType(a);if("Object"!==l)return n.Observable.throw(new c.Exception(c.dbErrMsg.InvalidType(["Object",l])));var u=d.tryCatch(this.findSchema)(t),f=u[0],g=u[1];if(g)return n.Observable.throw(g);return this.database$.pipe(i.concatMap(function(n){var i=d.clone(a),l=e.getTables(n,t)[0],c=f.mapper,u=Object.create(null);c.forEach(function(e,t){if(d.hasOwn(i,t)&&t!==f.pk){var r=i[t];u[t]=e(r),u[h.hiddenColName(t)]=r}});var g=o.__assign({},i,u),p=y.createPredicate(l,r),m=y.predicatableQuery(n,l,p,_.StatementType.Update);return d.forEach(g,function(e,r){var o=l[r];r===f.pk?d.warn("Primary key is not modifiable."):o?m.set(o,e):d.warn("Column: "+r+" is not existent on table:"+t)}),s.executor(n,[m])}))},e.prototype.delete=function(t,r){var o=this;void 0===r&&(r={});var a=d.tryCatch(this.findPrimaryKey)(t),l=a[0],c=a[1];if(c)return n.Observable.throw(c);return this.database$.pipe(i.concatMap(function(a){var c=e.getTables(a,t)[0],u=c[l],f=new p.PredicateProvider(c,r),g=y.predicatableQuery(a,c,f.getPredicate(),_.StatementType.Select,u);return n.Observable.fromPromise(g.exec()).pipe(i.concatMap(function(e){var r=y.predicatableQuery(a,c,f.getPredicate(),_.StatementType.Delete);e.forEach(function(e){return o.storedIds.delete(h.fieldIdentifier(t,e[l]))});var n={error:function(){e.forEach(function(e){return o.storedIds.add(h.fieldIdentifier(t,e[l]))})}};return o.inTransaction?(o.attachTx(n),o.executor(a,[r])):o.executor(a,[r]).pipe(s.tap(n))}))}))},e.prototype.upsert=function(e,t){var r=this;return this.database$.pipe(i.concatMap(function(o){var i=new Map,a=[],l=[];r.traverseCompound(o,e,d.clone(t),a,l,i);var c=p.Mutation.aggregate(o,a,l),u=c.contextIds,f=c.queries;if(f.length>0){u.forEach(function(e){return r.storedIds.add(e)});var g={error:function(){return u.forEach(function(e){return r.storedIds.delete(e)})}};return r.inTransaction?(r.attachTx(g),r.executor(o,f)):r.executor(o,f).pipe(s.tap(g))}return n.Observable.of({result:!1,insert:0,update:0,delete:0,select:0})}))},e.prototype.remove=function(t,r){var o=this;void 0===r&&(r={});var a=d.tryCatch(this.findSchema)(t),l=a[0],c=a[1];if(c)return n.Observable.throw(c);var u=l.dispose;return this.database$.pipe(i.concatMap(function(a){var c=e.getTables(a,t)[0],f=y.createPredicate(c,r.where),g=[],p=[];g.push(y.predicatableQuery(a,c,f,_.StatementType.Delete));var d=y.predicatableQuery(a,c,f,_.StatementType.Select);return n.Observable.fromPromise(d.exec()).pipe(i.concatMap(function(e){e.forEach(function(e){p.push(h.fieldIdentifier(t,e[l.pk]))});var r={error:function(){return p.forEach(function(e){return o.storedIds.add(e)})}};if(u){var n=o.createScopedHandler(a,g,p);return u(e,n).pipe(s.tap(function(){return p.forEach(function(e){return o.storedIds.delete(e)})}),i.concatMap(function(){return o.inTransaction?(o.attachTx(r),o.executor(a,g)):o.executor(a,g).pipe(s.tap(r))}))}return p.forEach(function(e){return o.storedIds.delete(e)}),o.inTransaction?(o.attachTx(r),o.executor(a,g)):o.executor(a,g).pipe(s.tap(r))}))}))},e.prototype.dispose=function(){var e=this;if(!this.connected)return n.Observable.throw(new c.Exception(c.dbErrMsg.NotConnected()));return this.database$.pipe(i.concatMap(function(t){var r=t.getSchema().tables().map(function(e){return t.delete().from(e)});return e.executor(t,r).pipe(s.tap(function(){t.close(),e.schemas.clear(),e.storedIds.clear(),e.schemaBuilder=null,e.subscription.unsubscribe()}))}))},e.prototype.attachTx=function(e){throw new c.Exception(c.dbErrMsg.UnexpectedTransactionUse())},e.prototype.executor=function(e,t){var r=e.createTransaction();return n.Observable.fromPromise(r.exec(t)).pipe(s.tap(m),a.map(function(e){return o.__assign({result:!0},y.mergeTransactionResult(t,e))}))},e.prototype.transaction=function(){var e=this;return this.database$.pipe(a.map(function(t){var r=t.createTransaction(),i=[],l=[],c={attachTx:{get:function(){return function(e){l.push(e)}}},executor:{get:function(){return function(e,t){return i.push.apply(i,t),n.Observable.of(null)}}},inTransaction:{get:function(){return!0}}},u={commit:function(){return l.reduce(function(e,t){return e.pipe(s.tap(t))},n.Observable.from(r.exec(i))).pipe(a.map(function(e){return o.__assign({result:!0},y.mergeTransactionResult(i,e))}))},abort:function(){l.length=0,i.length=0}};return[Object.create(e,c),u]}))},e.prototype.buildTables=function(){var e=this;this.schemaDefs.forEach(function(t,r){var o=e.schemaBuilder.createTable(r);e.parseSchemaDef(r,t,o)})},e.prototype.parseSchemaDef=function(e,t,r){var o=this,n=[],i=[],a=[],s=[],l=new Map,u=new Map,f=new Map,g="function"==typeof t.dispose&&t.dispose||"function"==typeof t[h.dispose]&&t[h.dispose]||void 0;d.forEach(t,function(e,t){"function"!=typeof e&&(e.virtual?u.set(t,{where:e.virtual.where,type:e.type,name:e.virtual.name}):(o.createColumn(r,t,e.type,s,f),l.set(t,e.type),e.primaryKey&&(d.assert(!a[0],c.dbErrMsg.PrimaryKeyConflict()),a.push(t)),e.unique&&n.push(t),e.index&&i.push(t),![e.primaryKey,e.index,e.unique].some(d.identity)&&s.push(t)))}),this.schemas.set(e,{pk:a[0],mapper:f,columns:l,dispose:g,associations:u}),i.length&&r.addIndex("index",i),n.length&&r.addUnique("unique",n),s.length&&r.addNullable(s),r.addPrimaryKey(a)},e.prototype.buildSelector=function(e,t,r,o){var n=this.findSchema(t),i=n.pk,a=!!r.fields,s=!a||d.contains(i,r.fields),c=a?new Set(r.fields):new Set(n.columns.keys()),u=this.traverseQueryFields(e,t,c,s,!a,[],{},o),f=u.table,g=u.columns,h=u.joinInfo,m=u.definition,v=y.predicatableQuery.apply(void 0,[e,f,null,_.StatementType.Select].concat(g));h.forEach(function(e){return v.leftOuterJoin(e.table,e.predicate)});var b=(r.orderBy||[]).map(function(e){return{column:f[e.fieldName],orderBy:e.orderBy?l.Order[e.orderBy]:null}}),S={pk:{name:i,queried:s},definition:m,mainTable:f},T=r.limit,E=r.skip,N=new p.PredicateProvider(f,r.where);return new p.Selector(e,v,S,N,T,E,b)},e.prototype.createColumn=function(e,t,r,o,n){var i=h.hiddenColName(t);switch(r){case _.RDBType.ARRAY_BUFFER:return e.addColumn(t,l.Type.ARRAY_BUFFER);case _.RDBType.BOOLEAN:return e.addColumn(t,l.Type.BOOLEAN);case _.RDBType.DATE_TIME:return o.push(i),n.set(t,function(e){return e?new Date(e).valueOf():new Date(0).valueOf()}),e.addColumn(t,l.Type.INTEGER).addColumn(i,l.Type.STRING);case _.RDBType.INTEGER:return e.addColumn(t,l.Type.INTEGER);case _.RDBType.LITERAL_ARRAY:return o.push(i),n.set(t,function(e){return e?e.join("|"):""}),e.addColumn(t,l.Type.STRING).addColumn(i,l.Type.OBJECT);case _.RDBType.NUMBER:return e.addColumn(t,l.Type.NUMBER);case _.RDBType.OBJECT:return e.addColumn(t,l.Type.OBJECT);case _.RDBType.STRING:return e.addColumn(t,l.Type.STRING);default:throw new c.Exception(c.dbErrMsg.InvalidType())}},e.prototype.traverseQueryFields=function(t,r,o,n,i,a,s,l){var f=this;void 0===a&&(a=[]),void 0===s&&(s={});var p=this.findSchema(r),m=Object.create(null),v=[],b=[],S=[];if(l===_.JoinMode.imlicit&&d.contains(r,a))return{columns:b,joinInfo:S,advanced:!1,table:null,definition:null};a.push(r),p.associations.forEach(function(e,t){i&&!d.contains(t,a)&&o.add(t),v.push(t)});var T=Array.from(o.keys()).every(function(e){return d.contains(e,v)});if(d.assert(!T,c.dbErrMsg.InvalidQuery()),!n){var E=Array.from(o);E.unshift(p.pk),o=new Set(E)}var N=(s[r]||0)+1;s[r]=N;var x=h.contextTableName(r,N),w=e.getTables(t,r)[0].as(x),A=function(e,t,o){if(e.advanced)if(b.push.apply(b,e.columns),d.assert(!m[t],c.dbErrMsg.AliasConflict(t,r)),o.column)m[t]=o;else{var n=o,i=n.where,a=n.type;m[t]=u.revise(a,e.definition);var s=d.tryCatch(y.createPredicate)(w,i(e.table)),l=s[0],f=s[1];f&&d.warn("Failed to build predicate, since "+f.message+", on table: "+e.table.getName());var g=l?[{table:e.table,predicate:l}].concat(e.joinInfo):e.joinInfo;S.push.apply(S,g)}},R=new g.Traversable(o);return R.context(function(e,t,o){if(!o||o.isRoot||"string"!=typeof e)return!1;var n=d.contains(e,v),i=n?_.LeafType.navigator:_.LeafType.column,a=o.key?o.key:t;if(n){var s=p.associations.get(o.key);return s?{type:i,key:a,leaf:f.navigatorLeaf(s,o.key,t)}:(d.warn("Build a relationship failed, field: "+o.key+"."),!1)}return w[e]?{type:i,key:a,leaf:f.columnLeaf(w,x,e)}:(d.warn("Column: "+e+" is not exist on "+r),!1)}),R.forEach(function(e){switch(e.type){case _.LeafType.column:var r=e.leaf,o=r.column,n=r.identifier,c=p.columns.get(e.key),g=u.create(n,p.pk===e.key,c);A({columns:[o],advanced:!0},e.key,g);break;case _.LeafType.navigator:var h=e.leaf,d=h.containKey,y=h.fields,m=h.assocaiation,v=f.traverseQueryFields(t,m.name,new Set(y),d,i,a.slice(0),s,l);A(v,e.key,m),e.skip()}}),{columns:b,joinInfo:S,advanced:!0,table:w,definition:m}},e.prototype.traverseCompound=function(t,r,o,n,i,a){var s=this;if(null!=o)if(Array.isArray(o))o.forEach(function(e){return s.traverseCompound(t,r,e,n,i,a)});else{var l=this.findSchema(r),u=l.pk,f=o[u];d.assert(void 0!==f,c.dbErrMsg.PrimaryKeyNotProvided());var y=e.getTables(t,r)[0],_=h.fieldIdentifier(r,f),m=d.contains(_,a),v=d.contains(_,this.storedIds),b=m?a.get(_):new p.Mutation(t,y);if(!m)(v?i:n).push(b),a.set(_,b);var S=new g.Traversable(o);S.context(function(e,t,r){var o=l.associations.has(e),n=l.columns.has(e),i=n&&l.mapper.get(e)||null;return n||o||r.isRoot||r.skip(),!(r.isRoot||!n&&!o)&&{mapper:i,visited:m,isNavigatorLeaf:o}}),S.forEach(function(e,r){if(e.skip(),e.isNavigatorLeaf){var o=l.associations.get(e.key).name;return s.traverseCompound(t,o,r,n,i,a)}if(e.key!==u){var c=e.mapper?((f={})[e.key]=e.mapper(r),f[h.hiddenColName(e.key)]=r,f):((g={})[e.key]=r,g);b.patch(c)}else e.key!==u||e.visited||b.withId(e.key,r);var f,g})}},e.prototype.columnLeaf=function(e,t,r){var o=e[r],n=h.hiddenColName(r),i=h.fieldIdentifier(t,r),a=e[n];return{identifier:i,column:a?a.as(i):o.as(i)}},e.prototype.navigatorLeaf=function(e,t,r){var o=this.findSchema(e.name);return{fields:"string"==typeof r?new Set(o.columns.keys()):r,assocaiation:e,containKey:d.contains(o.pk,r)}},e.prototype.createScopedHandler=function(t,r,o){var i=this;return function(a){var s=i.findPrimaryKey(a);return[function(r){void 0===r&&(r=null);var o=e.getTables(t,a)[0],i=d.tryCatch(y.createPredicate)(o,r),s=i[0],l=i[1];if(l)return n.Observable.throw(l);var c=y.predicatableQuery(t,o,s,_.StatementType.Select);return n.Observable.fromPromise(c.exec())},function(n){var i=e.getTables(t,a)[0];n.forEach(function(e){var n=e[s],l=y.createPkClause(s,n),c=y.createPredicate(i,l),u=y.predicatableQuery(t,i,c,_.StatementType.Delete);r.push(u),o.push(h.fieldIdentifier(a,n))})}]}},e.version=f.default,e}();t.Database=v},BPnvjz8n:function(e,t,r){"use strict";r.r(t);function o(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function n(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a}function i(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e}r("mPU7ngXj"),r("M67Xxkkf");var a,s,l,c=r("36VROgQT"),u=r("4c1CS0b3"),f=(r("sx9yqNer"),r("T3prb3wx"),r("gxrElbei"),r("vJfdXfAs"),r("fjAU4jyp"),r("4XzM5oUL"),r("OA6Iqxq6"),r("dAiZTu0g"),r("6OjodyzK"),r("92bnoOmF"),r("qKs0Z8KE"),r("VXxgOQI1"),r("vqGAP1xU"),r("HEwtAF8a"),r("nDsjpj50")),g=r("LvDlAkAJ"),p=r.n(g),h=function(e,t){return function(r){return r.method===e&&(void 0===t||r.id===t)}};!function(e){e.Initialize="@worker/initialize",e.Unsubscribe="@worker/unsubscribe",e.Close="@worker/close",e.Debug="@worker/debug"}(a||(a={})),function(e){e[e.Closed=-3]="Closed",e[e.Loaded=-2]="Loaded",e[e.Ready=-1]="Ready"}(s||(s={})),function(e){e[e.Stopped=0]="Stopped",e[e.Running=1]="Running"}(l||(l={}));var d=function(e){return!!e.error},y=(function(){function e(t,r,o){var n=this;this.name=t,this.workerCreator=r,this.initParams=o,this.nextId=0,this.status$$=new f.BehaviorSubject(l.Stopped),this._debug=!1,this.request=function(e,t){return u.Observable.create(function(r){var o=n.nextId++,i={id:o,method:e,params:t};n.debug&&(i.__timestamp=Date.now(),console.info("Client request",{id:o,method:e,params:t},"at:",i.__timestamp,"ms")),n.worker.postMessage(i);var s=n.message$.filter(function(e){return e.id===o}).mergeMap(function(e){return d(e)?u.Observable.throw(e.error):u.Observable.of(e)}).do(function(e){if(n.debug){var t=Date.now()-e.__timestamp;console.info("Client received",p.a.omit(e,"__timestamp"),"after worker post:",t,"ms")}}).takeWhile(function(e){return!e.result.complete}).pluck("result","data").subscribe(r),c=n.status$$.subscribe(function(e){e!==l.Running&&r.error("Worker is stopped")});return function(){s.unsubscribe(),c.unsubscribe(),n.worker.postMessage({id:o,method:a.Unsubscribe})}})},this.notify=function(e,t){n.status$$.first().subscribe(function(r){if(r!==l.Running)throw new Error("Worker is stopped");n.worker.postMessage({method:e,params:t}),n.debug&&console.info("Client notify",{method:e,params:t},"at:",Date.now(),"ms")})},this.close=function(){n.worker.postMessage({id:s.Closed,method:a.Close}),delete e.instances[n.name],n.status$$.next(l.Stopped)},e.instances[this.name]=this}e.create=function(t,r,o){if(!("Worker"in window))throw new Error("Browser dos not support web worker");return e.instances[t]?e.instances[t]:new e(t,r,o)},e.get=function(t){return e.instances[t]},Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.notify(a.Debug,[e])},enumerable:!0,configurable:!0}),e.prototype.run=function(){var e=this;return u.Observable.defer(function(){return e.worker=e.workerCreator(),e.message$=u.Observable.fromEvent(e.worker,"message",function(e){return e.data}).share(),e.ready$=e.message$.first(function(e){return e.id===s.Ready}).shareReplay(1),e.error$=u.Observable.fromEvent(e.worker,"error").share(),e.status$$.next(l.Running),e.notify(a.Initialize,e.initParams),e.ready$})},e.instances={}}(),self),_={N:function(e,t){return{id:e,result:{data:t.value}}},E:function(e,t){var r=t.error;return{id:e,error:r.message||r.toString()}},C:function(e){return{id:e,result:{complete:!0}}}},m=function(e){return void 0===e?u.Observable.empty():function(e){return e&&"function"==typeof e.then}(e)?u.Observable.fromPromise(e):e instanceof u.Observable?e:u.Observable.of(e)};self.window=self,self.window.top=self;var v,b,S,T,E,N,x,w,A,R,P,C,I,k=function(e,t){var r=t.params,o=t.children,n=t.lastEmit,a=e.get.apply(e,r),s=o.reduce(function(t,r){var o=r.type,n=r.selectors;return t[o].apply(t,i(n.map(function(t){return k(e,t)})))},a);return n&&n.length&&o.some(function(e){var t=e.type;return"concat"===t||"combine"===t})&&s.setTrace(n),s};v=function(e,t){var r=n(e,1)[0],o=new c.Database(c.DataStoreType.MEMORY,r,"teambition",1),i={};Object(c.aggresiveOptimizer)(),t("defineSchema",function(e,t,r){o.defineSchema(t,function(e){return Object.keys(e).forEach(function(t){var r=e[t];r.virtual&&(r.virtual.where=new Function("return "+r.virtual.where)())}),e}(r))}),t(/^token\\.(.*)/,function(e,t){return k(o,t)[e[1]]()}),t("transaction",function(e,t){return o.transaction().do(function(e){return i[t]=e}).map(function(){return null})}),t(/^transaction\\.(.*)/,function(e,t){var r=i[t];if(!r)throw Error("Could not use transaction handler outside the transaction subscription");return r[1][e[1]]()}),t(/^([0-9]+):@inTransaction:(.*)/,function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=i[parseInt(e[1])];if(!o)throw Error("Could not use transaction database outside the transaction subscription");var n=o[0];return n[e[2]].apply(n,t)}),t("transactionGC",function(e,t){delete i[t]}),t(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return o[e].apply(o,t)})},S=new Map,T=new Map,E=!1,N=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];1===e.length?S.set("default",e[0]):S.set.apply(S,i(e))},x=n(u.Observable.fromEvent(y,"message",function(e){return e.data}).partition(function(e){var t=e.method;return/^@worker\\//.test(t)}),2),w=x[0],A=x[1],R=w.first(h(a.Initialize)).mergeMap(function(e){var t=e.params;return m(v(t,N))}).do({complete:function(){return y.postMessage({id:s.Ready,result:{complete:!0}})}}),P=w.first(h(a.Close)).mergeMap(function(){return m(b&&b())}).do({complete:function(){return close()}}),C=w.filter(h(a.Debug)).do(function(e){var t=n(e.params,1)[0];return E=t}),I=A.mergeMap(function(e){var t,r=e.id,n=e.method,s=e.params,l=e.__timestamp;return E&&(t=Date.now(),console.info("Worker received",{id:r,method:n,params:s},"after Client post:",t-l,"ms")),m(function(e,t){void 0===t&&(t=[]);var r=null,n=void 0,a=function(){var t,i;if(S.has(e))return S.get(e);try{for(var a=o(S.keys()),s=a.next();!s.done;s=a.next()){var l=s.value;if(l instanceof RegExp){var c=e.match(l);if(c)return r=c,S.get(l)}}}catch(u){t={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}return n=!0,S.get("default")}();(r||n)&&(S.set(e,a),r&&T.set(e,r));try{return a.apply(void 0,i([r||T.get(e)||e],t))}catch(s){return u.Observable.throw(s)}}(n,s)).takeUntil(w.first(h(a.Unsubscribe,r))).materialize().filter(function(){return void 0!==r}).map(function(e){return _[e.kind](r,e)}).do(function(e){if(E){var r=Date.now();console.info("Worker post",e,"after last post or receive:",r-t,"ms"),t=r,e.__timestamp=r}y.postMessage(e)})}),u.Observable.merge(R,P,I,C).subscribe()},"BtvtXq+c":function(e,t,r){"use strict";var o=r("I8a+RXAe"),n={};n[r("K0xUtE8J")("toStringTag")]="z",n+""!="[object z]"&&r("KroJtBC/")(Object.prototype,"toString",function(){return"[object "+o(this)+"]"},!0)},C7Jbx66X:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(t,r){e.call(this)}return o(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(r("NTzudah4").Subscription);t.Action=n},CtA1ySyd:function(e,t,r){"use strict";var o=r("ZJR9rEQs"),n=r("0PrS9efm");t.partition=function(e,t){return function(r){return[n.filter(e,t)(r),n.filter(o.not(e,t))(r)]}}},DVgAQ7gs:function(e,t,r){var o=r("zhAbEczo"),n=r("4R4ubiJj");e.exports=Object.keys||function(e){return o(e,n)}},DVytGcct:function(e,t,r){"use strict";var o=r("HDK4lIiT"),n=r("xE8IhrvF");t.publishReplay=function(e,t,r,i){r&&"function"!=typeof r&&(i=r);var a="function"==typeof r?r:void 0,s=new o.ReplaySubject(e,t,i);return function(e){return n.multicast(function(){return s},a)(e)}}},DbwpQKmZ:function(e,t,r){"use strict";var o=r("ciX6mssW");t.concatMap=function(e,t){return o.mergeMap(e,t,1)}},DrjoHopv:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("uliLzgMX");o.Observable.throw=n._throw},ENbTyNsR:function(e,t,r){"use strict";t.noop=function(){}},"EWmCJ/uA":function(e,t,r){var o=r("LZWtDVA7");e.exports=Array.isArray||function(e){return"Array"==o(e)}},EcuZaM4J:function(e,t,r){"use strict";var o=r("yZ+eWRiI");t.fromEvent=o.FromEventObservable.create},EemHgGbk:function(e,t,r){var o=r("UqcFofGq"),n=r("RjD/ZGJI"),i=r("aCFjIdzX"),a=r("apmTvpNA"),s=r("aagx5GNa"),l=r("xpqlGfKw"),c=Object.getOwnPropertyDescriptor;t.f=r("nh4gaiGV")?c:function(e,t){if(e=i(e),t=a(t,!0),l)try{return c(e,t)}catch(r){}if(s(e,t))return n(!o.f.call(e,t),e[t])}},El9sSlIO:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("17JF7D0B"),n=r("WdnSUq9g"),i={$ne:function(e,t){return o.op.not(e.eq(t))},$lt:function(e,t){return e.lt(t)},$lte:function(e,t){return e.lte(t)},$gt:function(e,t){return e.gt(t)},$gte:function(e,t){return e.gte(t)},$match:function(e,t){return e.match(t)},$notMatch:function(e,t){return o.op.not(e.match(t))},$between:function(e,t){return e.between(t[0],t[1])},$has:function(e,t){return e.match(new RegExp("("+t+"\\\\b)"))},$in:function(e,t){return e.in(t)},$isNull:function(e){return e.isNull()},$isNotNull:function(e){return e.isNotNull()}},a={$and:function(e){return(t=o.op).and.apply(t,e);var t},$or:function(e){return(t=o.op).or.apply(t,e);var t},$not:function(e){return o.op.not(e[0])}},s=function(){function e(e,t){this.table=e,this.meta=t}return e.prototype.getPredicate=function(){var e,t=this.meta?this.normalizeMeta(this.meta):[];return t.length?1===t.length?t[0]:(e=o.op).and.apply(e,t):null},e.prototype.toString=function(){return this.getPredicate()?JSON.stringify(this.meta):""},e.prototype.normalizeMeta=function(e,t){var r=this,o=[];return n.forEach(e,function(e,s){var l,c;if(r.checkCompound(s))l=r.normalizeMeta(e,t),c=a[s](l);else if(r.checkPredicate(e))l=r.normalizeMeta(e,r.table[s]),c=a.$and(l);else{var u=t||r.table[s];if(!u)return void n.warn("Failed to build predicate, since column: "+s+" is not exist, on table: "+r.table.getName());c=function(e,t,o){return r.checkMethod(o)?i[o](e,t):e.eq(t)}(u,e,s)}o.push(c)}),o},e.prototype.checkMethod=function(e){return"function"==typeof i[e]},e.prototype.checkCompound=function(e){return"function"==typeof a[e]},e.prototype.checkPredicate=function(e){return e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof RegExp)&&!(e instanceof o.schema.BaseColumn)},e}();t.PredicateProvider=s},FJW5Sjft:function(e,t,r){var o=r("hswaSTrv"),n=r("y3w9bphm"),i=r("DVgAQ7gs");e.exports=r("nh4gaiGV")?Object.defineProperties:function(e,t){n(e);for(var r,a=i(t),s=a.length,l=0;s>l;)o.f(e,r=a[l++],t[r]);return e}},"FVBgd/GF":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9");t.skipWhile=function(e){return function(t){return t.lift(new i(e))}};var i=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate))},e}(),a=function(e){function t(t,r){e.call(this,t),this.predicate=r,this.skipping=!0,this.index=0}return o(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(r){this.destination.error(r)}},t}(n.Subscriber)},FrTVAacj:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getType=function(e){return Object.prototype.toString.call(e).match(/\\s\\w+/)[0].trim()}},G4OQvx5B:function(e,t,r){"use strict";var o=r("rRE7ETfd");t.of=o.ArrayObservable.of},GaSbzOnp:function(e,t,r){"use strict";r.r(t),r.d(t,"__extends",function(){return n}),r.d(t,"__assign",function(){return i}),r.d(t,"__rest",function(){return a}),r.d(t,"__decorate",function(){return s}),r.d(t,"__param",function(){return l}),r.d(t,"__metadata",function(){return c}),r.d(t,"__awaiter",function(){return u}),r.d(t,"__generator",function(){return f}),r.d(t,"__exportStar",function(){return g}),r.d(t,"__values",function(){return p}),r.d(t,"__read",function(){return h}),r.d(t,"__spread",function(){return d}),r.d(t,"__spreadArrays",function(){return y}),r.d(t,"__await",function(){return _}),r.d(t,"__asyncGenerator",function(){return m}),r.d(t,"__asyncDelegator",function(){return v}),r.d(t,"__asyncValues",function(){return b}),r.d(t,"__makeTemplateObject",function(){return S}),r.d(t,"__importStar",function(){return T}),r.d(t,"__importDefault",function(){return E});var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}function s(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function l(e,t){return function(r,o){t(r,o,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function s(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(a,s)}l((o=o.apply(e,t||[])).next())})}function f(e,t){var r,o,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function g(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function h(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var o=Array(e),n=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,n++)o[n]=i[a];return o}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function m(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=r.apply(e,t||[]),i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(e){n[e]&&(o[e]=function(t){return new Promise(function(r,o){i.push([e,t,r,o])>1||s(e,t)})})}function s(e,t){try{(r=n[e](t)).value instanceof _?Promise.resolve(r.value.v).then(l,c):u(i[0][2],r)}catch(o){u(i[0][3],o)}var r}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function v(e){var t,r;return t={},o("next"),o("throw",function(e){throw e}),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,n){t[o]=e[o]?function(t){return(r=!r)?{value:_(e[o](t)),done:"return"===o}:n?n(t):t}:n}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(r){t[r]=e[r]&&function(t){return new Promise(function(o,n){(function(e,t,r,o){Promise.resolve(o).then(function(t){e({value:t,done:r})},t)})(o,n,(t=e[r](t)).done,t.value)})}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}},GuQ8QGQj:function(e,t,r){"use strict";var o=r("ciX6mssW");t.mergeMap=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),o.mergeMap(e,t,r)(this)}},H6PxbLYg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("xSYwAM7J");t.forEach=function(e,t,r){var n,i=t;if(e instanceof Set||e instanceof Map)e.forEach(function(e,t){!1===i(e,t)&&(i=o.noop)});else if(e instanceof Array)if(n=e.length,r)for(a=n;a--&&!1!==t(e[a],a););else for(var a=-1;++a<n&&!1!==t(e[a],a););else if("object"==typeof e){var s=Object.keys(e),l=void 0;for(n=s.length,a=-1;++a<n&&!1!==t(e[l=s[a]],l););}}},"H6hfpV+r":function(e,t,r){var o=r("y3w9bphm");e.exports=function(e,t,r,n){try{return n?t(o(r)[0],r[1]):t(r)}catch(a){var i=e.return;throw void 0!==i&&o(i.call(e)),a}}},H9Zwx2PB:function(e,t,r){"use strict";var o=r("z6YPpxqM"),n=r("G4OQvx5B"),i=r("IrFB9ApT"),a=r("RcwyJjal");t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length||2===e.length&&o.isScheduler(e[1])?i.from(e[0]):a.concatAll()(n.of.apply(void 0,e))}},HDK4lIiT:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("8yf6doCl"),i=r("1ouXhM4E"),a=r("NTzudah4"),s=r("Ndu5g8yF"),l=r("VpWK6D1a"),c=r("8ZmwKLHE"),u=function(e){function t(t,r,o){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=o,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=r<1?1:r}return o(t,e),t.prototype.next=function(t){var r=this._getNow();this._events.push(new f(r,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._trimBufferThenGetEvents(),o=this.scheduler;if(this.closed)throw new l.ObjectUnsubscribedError;this.hasError?t=a.Subscription.EMPTY:this.isStopped?t=a.Subscription.EMPTY:(this.observers.push(e),t=new c.SubjectSubscription(this,e)),o&&e.add(e=new s.ObserveOnSubscriber(e,o));for(var n=r.length,i=0;i<n&&!e.closed;i++)e.next(r[i].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||i.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,n=o.length,i=0;i<n&&!(e-o[i].time<r);)i++;return n>t&&(i=Math.max(i,n-t)),i>0&&o.splice(0,i),o},t}(n.Subject);t.ReplaySubject=u;var f=function(){return function(e,t){this.time=e,this.value=t}}()},HEwtAF8a:function(e,t,r){"use strict";var o=r("m0Pp8OTl"),n=r("XKFUp60F"),i=r("S/j/IM3X"),a=r("H6hfpV+r"),s=r("M6Qjclun"),l=r("ne8iVkqJ"),c=r("8a7rx0LP"),u=r("J+6eTXW2");n(n.S+n.F*!r("XMVhRdiB")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,n,f,g=i(e),p="function"==typeof this?this:Array,h=arguments.length,d=h>1?arguments[1]:void 0,y=void 0!==d,_=0,m=u(g);if(y&&(d=o(d,h>2?arguments[2]:void 0,2)),null==m||p==Array&&s(m))for(r=new p(t=l(g.length));t>_;_++)c(r,_,y?d(g[_],_):g[_]);else for(f=m.call(g),r=new p;!(n=f.next()).done;_++)c(r,_,y?a(f,d,[n.value,_],!0):n.value);return r.length=_,r}})},HhvLnYpC:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hash=function(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}},I7wRp3Mc:function(e,t,r){(function(t){var r="[object AsyncFunction]",o="[object Function]",n="[object GeneratorFunction]",i="[object Null]",a="[object Proxy]",s="[object Undefined]",l="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),f=Object.prototype,g=f.hasOwnProperty,p=f.toString,h=u.Symbol,d=h?h.toStringTag:void 0;function y(e){return null==e?void 0===e?s:i:d&&d in Object(e)?function(e){var t=g.call(e,d),r=e[d];try{e[d]=void 0;var o=!0}catch(i){}var n=p.call(e);o&&(t?e[d]=r:delete e[d]);return n}(e):function(e){return p.call(e)}(e)}e.exports=function(e){if(!function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}(e))return!1;var t=y(e);return t==o||t==n||t==r||t==a}}).call(this,r("yLpjYHve"))},"I8a+RXAe":function(e,t,r){var o=r("LZWtDVA7"),n=r("K0xUtE8J")("toStringTag"),i="Arguments"==o(function(){return arguments}());e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(r){}}(t=Object(e),n))?r:i?o(t):"Object"==(a=o(t))&&"function"==typeof t.callee?"Arguments":a}},Ilo59Jo3:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9");t.defaultIfEmpty=function(e){return void 0===e&&(e=null),function(t){return t.lift(new i(e))}};var i=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.defaultValue))},e}(),a=function(e){function t(t,r){e.call(this,t),this.defaultValue=r,this.isEmpty=!0}return o(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(n.Subscriber)},IrFB9ApT:function(e,t,r){"use strict";var o=r("pHYFxBQl");t.from=o.FromObservable.create},Iw71Jug9:function(e,t,r){var o=r("0/R4TaPX"),n=r("dyZXAqyT").document,i=o(n)&&o(n.createElement);e.exports=function(e){return i?n.createElement(e):{}}},"J+6eTXW2":function(e,t,r){var o=r("I8a+RXAe"),n=r("K0xUtE8J")("iterator"),i=r("hPIQAJUg");e.exports=r("g3g5MAGG").getIteratorMethod=function(e){if(null!=e)return e[n]||e["@@iterator"]||i[o(e)]}},JiEaEVNT:function(e,t){t.f=Object.getOwnPropertySymbols},K0xUtE8J:function(e,t,r){var o=r("VTer505i")("wks"),n=r("ylqsz2Z8"),i=r("dyZXAqyT").Symbol,a="function"==typeof i;(e.exports=function(e){return o[e]||(o[e]=a&&i[e]||(a?i:n)("Symbol."+e))}).store=o},K3kmOnob:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose="@@dispose"},K4wuF8rN:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("3gwnn8Cw");o.Observable.fromPromise=n.fromPromise},KA4qVah4:function(e,t){var r=Array.isArray;e.exports=r},KQFQzhmp:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("El9sSlIO");t.createPredicate=function(e,t){return void 0===t&&(t=null),t?new o.PredicateProvider(e,t).getPredicate():null}},"KroJtBC/":function(e,t,r){var o=r("dyZXAqyT"),n=r("MukbbRF2"),i=r("aagx5GNa"),a=r("ylqsz2Z8")("src"),s=Function.toString,l=(""+s).split("toString");r("g3g5MAGG").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,s){var c="function"==typeof r;c&&(i(r,"name")||n(r,"name",t)),e[t]!==r&&(c&&(i(r,a)||n(r,a,e[t]?""+e[t]:l.join(String(t)))),e===o?e[t]=r:s?e[t]?e[t]=r:n(e,t,r):(delete e[t],n(e,t,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},Kuthha03:function(e,t,r){var o=r("y3w9bphm"),n=r("FJW5Sjft"),i=r("4R4ubiJj"),a=r("YTvAncny")("IE_PROTO"),s=function(){},l=function(){var e,t=r("Iw71Jug9")("iframe"),o=i.length;for(t.style.display="none",r("+rLvKx+n").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\\/script>"),e.close(),l=e.F;o--;)delete l.prototype[i[o]];return l()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=o(e),r=new s,s.prototype=null,r[a]=e):r=l(),void 0===t?r:n(r,t)}},L2oc0usH:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPkClause=function(e,t){return{where:(r={},r[e]=t,r)};var r}},LHr5qcqN:function(e,t,r){"use strict";var o=r("SUh3uWYz");t.empty=o.EmptyObservable.create},LOExMsvW:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("GaSbzOnp"),n=r("WdnSUq9g"),i=r("ydz6hq0f"),a=r("W5LEaZ1S"),s=function(){function e(e,t,r){void 0===r&&(r={}),this.db=e,this.table=t,this.params=o.__assign({},r)}return e.aggregate=function(e,t,r){for(var o=[],n=[],a=new Map,s=0;s<t.length;s++){var l=t[s],c=l.toRow(),u=c.table,f=c.row,g=u.getName(),p=a.get(g);o.push(i.fieldIdentifier(g,l.refId())),p?p.push(f):a.set(g,[f])}a.size&&a.forEach(function(t,r){var o=e.getSchema().table(r),i=e.insertOrReplace().into(o).values(t);n.push(i)});var h=[];for(s=0;s<r.length;s++)Object.keys(r[s].params).length>0&&h.push(r[s].toUpdater());return{contextIds:o,queries:n.concat(h)}},e.prototype.toUpdater=function(){var e=this;n.assert(this.meta,a.dbErrMsg.PrimaryKeyNotProvided());var t=this.db.update(this.table);return t.where(this.table[this.meta.key].eq(this.meta.val)),n.forEach(this.params,function(r,o){var i=e.table[o];i?t.set(i,r):n.warn("Column: "+o+" is not existent on table:"+e.table.getName())}),t},e.prototype.toRow=function(){return n.assert(this.meta,a.dbErrMsg.PrimaryKeyNotProvided()),{table:this.table,row:this.table.createRow(o.__assign((e={},e[this.meta.key]=this.meta.val,e),this.params))};var e},e.prototype.patch=function(e){var t=this;return n.forEach(e,function(e,r){t.params[r]=e}),this},e.prototype.withId=function(e,t){return this.meta={key:e,val:t},this},e.prototype.refId=function(){return this.meta?this.meta.val:null},e}();t.Mutation=s},"LQAcWje+":function(e,t){e.exports=!1},LZWtDVA7:function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},"Lh+U5N1+":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("GaSbzOnp"),n=r("4c1CS0b3"),i=r("+6/L5mVI"),a=r("0PrS9efm"),s=r("NVK113Rt"),l=r("hQiMwM1X"),c=r("DVytGcct"),u=r("wHNhmth5"),f=r("FVBgd/GF"),g=r("+AwBtVxW"),p=r("cxTK3sM8"),h=r("YNO1Ll7x"),d=r("/LR135zw"),y=r("iF0LBWLW"),_=r("iPvGACis"),m=r("XUb7KB3o"),v=r("rA5Lr6AX");var b=f.skipWhile(function(e){return e instanceof y.ProxySelector}),S=function(){function e(e,t){this.consumed=!1,this.selector$=e.pipe(c.publishReplay(1),u.refCount()),this.trace=t}return e.prototype.setTrace=function(e){this.trace=e},e.prototype.map=function(e){return this.selector$=this.selector$.pipe(d.tap(function(t){return t.map(e)})),this},e.prototype.values=function(){return _.assert(!this.consumed,m.TokenConsumed()),this.consumed=!0,this.selector$.pipe(p.switchMap(function(e){return e.values()}),h.take(1))},e.prototype.changes=function(){return _.assert(!this.consumed,m.TokenConsumed()),this.consumed=!0,this.selector$.pipe(p.switchMap(function(e){return e.changes()}))},e.prototype.traces=function(e){var t=this;return this.changes().pipe(g.startWith(this.trace),l.pairwise(),s.map(function(t){var r,n=t[0],i=t[1];if(!n)return r=i,{type:v.OpsType.Success,ops:r.map(function(e,t){return{type:v.OpType.New,index:t}}),result:r};var a=v.diff(n,i,e);return o.__assign({result:i},a)}),a.filter(function(e){return e.type!==v.OpsType.ShouldSkip}),d.tap(function(e){var r=e.result;return t.lastEmit=r}))},e.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.unshift(this),new e(n.Observable.from(t).pipe(s.map(function(e){return e.selector$.pipe(b)}),i.combineAll(),s.map(function(e){var t;return(t=e.shift()).concat.apply(t,e)})),this.lastEmit)},e.prototype.combine=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.unshift(this),new e(n.Observable.from(t).pipe(s.map(function(e){return e.selector$.pipe(b)}),i.combineAll(),s.map(function(e){var t;return(t=e.shift()).combine.apply(t,e)})),this.lastEmit)},e.prototype.toString=function(){return this.selector$.pipe(s.map(function(e){return e.toString()}))},e}();t.QueryToken=S},LvDlAkAJ:function(e,t,r){(function(e,o){var n;(function(){var i,a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="__lodash_hash_undefined__",u=500,f="__lodash_placeholder__",g=1,p=2,h=4,d=1,y=2,_=1,m=2,v=4,b=8,S=16,T=32,E=64,N=128,x=256,w=512,A=30,R="...",P=800,C=16,I=1,k=2,O=1/0,B=9007199254740991,D=1.7976931348623157e308,L=NaN,M=4294967295,F=M-1,U=M>>>1,j=[["ary",N],["bind",_],["bindKey",m],["curry",b],["curryRight",S],["flip",w],["partial",T],["partialRight",E],["rearg",x]],q="[object Arguments]",K="[object Array]",W="[object AsyncFunction]",V="[object Boolean]",G="[object Date]",z="[object DOMException]",Q="[object Error]",J="[object Function]",H="[object GeneratorFunction]",Y="[object Map]",X="[object Number]",$="[object Null]",Z="[object Object]",ee="[object Proxy]",te="[object RegExp]",re="[object Set]",oe="[object String]",ne="[object Symbol]",ie="[object Undefined]",ae="[object WeakMap]",se="[object WeakSet]",le="[object ArrayBuffer]",ce="[object DataView]",ue="[object Float32Array]",fe="[object Float64Array]",ge="[object Int8Array]",pe="[object Int16Array]",he="[object Int32Array]",de="[object Uint8Array]",ye="[object Uint8ClampedArray]",_e="[object Uint16Array]",me="[object Uint32Array]",ve=/\\b__p \\+= \'\';/g,be=/\\b(__p \\+=) \'\' \\+/g,Se=/(__e\\(.*?\\)|\\b__t\\)) \\+\\n\'\';/g,Te=/&(?:amp|lt|gt|quot|#39);/g,Ee=/[&<>"\']/g,Ne=RegExp(Te.source),xe=RegExp(Ee.source),we=/<%-([\\s\\S]+?)%>/g,Ae=/<%([\\s\\S]+?)%>/g,Re=/<%=([\\s\\S]+?)%>/g,Pe=/\\.|\\[(?:[^[\\]]*|(["\'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,Ce=/^\\w*$/,Ie=/^\\./,ke=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["\'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,Oe=/[\\\\^$.*+?()[\\]{}|]/g,Be=RegExp(Oe.source),De=/^\\s+|\\s+$/g,Le=/^\\s+/,Me=/\\s+$/,Fe=/\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,Ue=/\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,je=/,? & /,qe=/[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g,Ke=/\\\\(\\\\)?/g,We=/\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g,Ve=/\\w*$/,Ge=/^[-+]0x[0-9a-f]+$/i,ze=/^0b[01]+$/i,Qe=/^\\[object .+?Constructor\\]$/,Je=/^0o[0-7]+$/i,He=/^(?:0|[1-9]\\d*)$/,Ye=/[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g,Xe=/($^)/,$e=/[\'\\n\\r\\u2028\\u2029\\\\]/g,Ze="\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff",et="\\\\xac\\\\xb1\\\\xd7\\\\xf7\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf\\\\u2000-\\\\u206f \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000",tt="[\\\\ud800-\\\\udfff]",rt="["+et+"]",ot="["+Ze+"]",nt="\\\\d+",it="[\\\\u2700-\\\\u27bf]",at="[a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff]",st="[^\\\\ud800-\\\\udfff"+et+nt+"\\\\u2700-\\\\u27bfa-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xffA-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde]",lt="\\\\ud83c[\\\\udffb-\\\\udfff]",ct="[^\\\\ud800-\\\\udfff]",ut="(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}",ft="[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]",gt="[A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde]",pt="(?:"+at+"|"+st+")",ht="(?:"+gt+"|"+st+")",dt="(?:"+ot+"|"+lt+")"+"?",yt="[\\\\ufe0e\\\\ufe0f]?"+dt+("(?:\\\\u200d(?:"+[ct,ut,ft].join("|")+")[\\\\ufe0e\\\\ufe0f]?"+dt+")*"),_t="(?:"+[it,ut,ft].join("|")+")"+yt,mt="(?:"+[ct+ot+"?",ot,ut,ft,tt].join("|")+")",vt=RegExp("[\']","g"),bt=RegExp(ot,"g"),St=RegExp(lt+"(?="+lt+")|"+mt+yt,"g"),Tt=RegExp([gt+"?"+at+"+(?:[\'](?:d|ll|m|re|s|t|ve))?(?="+[rt,gt,"$"].join("|")+")",ht+"+(?:[\'](?:D|LL|M|RE|S|T|VE))?(?="+[rt,gt+pt,"$"].join("|")+")",gt+"?"+pt+"+(?:[\'](?:d|ll|m|re|s|t|ve))?",gt+"+(?:[\'](?:D|LL|M|RE|S|T|VE))?","\\\\d*(?:(?:1ST|2ND|3RD|(?![123])\\\\dTH)\\\\b)","\\\\d*(?:(?:1st|2nd|3rd|(?![123])\\\\dth)\\\\b)",nt,_t].join("|"),"g"),Et=RegExp("[\\\\u200d\\\\ud800-\\\\udfff"+Ze+"\\\\ufe0e\\\\ufe0f]"),Nt=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wt=-1,At={};At[ue]=At[fe]=At[ge]=At[pe]=At[he]=At[de]=At[ye]=At[_e]=At[me]=!0,At[q]=At[K]=At[le]=At[V]=At[ce]=At[G]=At[Q]=At[J]=At[Y]=At[X]=At[Z]=At[te]=At[re]=At[oe]=At[ae]=!1;var Rt={};Rt[q]=Rt[K]=Rt[le]=Rt[ce]=Rt[V]=Rt[G]=Rt[ue]=Rt[fe]=Rt[ge]=Rt[pe]=Rt[he]=Rt[Y]=Rt[X]=Rt[Z]=Rt[te]=Rt[re]=Rt[oe]=Rt[ne]=Rt[de]=Rt[ye]=Rt[_e]=Rt[me]=!0,Rt[Q]=Rt[J]=Rt[ae]=!1;var Pt={"\\\\":"\\\\","\'":"\'","\\n":"n","\\r":"r","\\u2028":"u2028","\\u2029":"u2029"},Ct=parseFloat,It=parseInt,kt="object"==typeof e&&e&&e.Object===Object&&e,Ot="object"==typeof self&&self&&self.Object===Object&&self,Bt=kt||Ot||Function("return this")(),Dt=t&&!t.nodeType&&t,Lt=Dt&&"object"==typeof o&&o&&!o.nodeType&&o,Mt=Lt&&Lt.exports===Dt,Ft=Mt&&kt.process,Ut=function(){try{return Ft&&Ft.binding&&Ft.binding("util")}catch(e){}}(),jt=Ut&&Ut.isArrayBuffer,qt=Ut&&Ut.isDate,Kt=Ut&&Ut.isMap,Wt=Ut&&Ut.isRegExp,Vt=Ut&&Ut.isSet,Gt=Ut&&Ut.isTypedArray;function zt(e,t){return e.set(t[0],t[1]),e}function Qt(e,t){return e.add(t),e}function Jt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Ht(e,t,r,o){for(var n=-1,i=null==e?0:e.length;++n<i;){var a=e[n];t(o,a,r(a),e)}return o}function Yt(e,t){for(var r=-1,o=null==e?0:e.length;++r<o&&!1!==t(e[r],r,e););return e}function Xt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function $t(e,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(!t(e[r],r,e))return!1;return!0}function Zt(e,t){for(var r=-1,o=null==e?0:e.length,n=0,i=[];++r<o;){var a=e[r];t(a,r,e)&&(i[n++]=a)}return i}function er(e,t){return!!(null==e?0:e.length)&&ur(e,t,0)>-1}function tr(e,t,r){for(var o=-1,n=null==e?0:e.length;++o<n;)if(r(t,e[o]))return!0;return!1}function rr(e,t){for(var r=-1,o=null==e?0:e.length,n=Array(o);++r<o;)n[r]=t(e[r],r,e);return n}function or(e,t){for(var r=-1,o=t.length,n=e.length;++r<o;)e[n+r]=t[r];return e}function nr(e,t,r,o){var n=-1,i=null==e?0:e.length;for(o&&i&&(r=e[++n]);++n<i;)r=t(r,e[n],n,e);return r}function ir(e,t,r,o){var n=null==e?0:e.length;for(o&&n&&(r=e[--n]);n--;)r=t(r,e[n],n,e);return r}function ar(e,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(e[r],r,e))return!0;return!1}var sr=hr("length");function lr(e,t,r){var o;return r(e,function(e,r,n){if(t(e,r,n))return o=r,!1}),o}function cr(e,t,r,o){for(var n=e.length,i=r+(o?1:-1);o?i--:++i<n;)if(t(e[i],i,e))return i;return-1}function ur(e,t,r){return t==t?function(e,t,r){var o=r-1,n=e.length;for(;++o<n;)if(e[o]===t)return o;return-1}(e,t,r):cr(e,gr,r)}function fr(e,t,r,o){for(var n=r-1,i=e.length;++n<i;)if(o(e[n],t))return n;return-1}function gr(e){return e!=e}function pr(e,t){var r=null==e?0:e.length;return r?_r(e,t)/r:L}function hr(e){return function(t){return null==t?i:t[e]}}function dr(e){return function(t){return null==e?i:e[t]}}function yr(e,t,r,o,n){return n(e,function(e,n,i){r=o?(o=!1,e):t(r,e,n,i)}),r}function _r(e,t){for(var r,o=-1,n=e.length;++o<n;){var a=t(e[o]);a!==i&&(r=r===i?a:r+a)}return r}function mr(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o}function vr(e){return function(t){return e(t)}}function br(e,t){return rr(t,function(t){return e[t]})}function Sr(e,t){return e.has(t)}function Tr(e,t){for(var r=-1,o=e.length;++r<o&&ur(t,e[r],0)>-1;);return r}function Er(e,t){for(var r=e.length;r--&&ur(t,e[r],0)>-1;);return r}var Nr=dr({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"\'n","":"s"}),xr=dr({"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#39;"});function wr(e){return"\\\\"+Pt[e]}function Ar(e){return Et.test(e)}function Rr(e){var t=-1,r=Array(e.size);return e.forEach(function(e,o){r[++t]=[o,e]}),r}function Pr(e,t){return function(r){return e(t(r))}}function Cr(e,t){for(var r=-1,o=e.length,n=0,i=[];++r<o;){var a=e[r];a!==t&&a!==f||(e[r]=f,i[n++]=r)}return i}function Ir(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function kr(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function Or(e){return Ar(e)?function(e){var t=St.lastIndex=0;for(;St.test(e);)++t;return t}(e):sr(e)}function Br(e){return Ar(e)?function(e){return e.match(St)||[]}(e):function(e){return e.split("")}(e)}var Dr=dr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":\'"\',"&#39;":"\'"});var Lr=function e(t){var r,o=(t=null==t?Bt:Lr.defaults(Bt.Object(),t,Lr.pick(Bt,xt))).Array,n=t.Date,Ze=t.Error,et=t.Function,tt=t.Math,rt=t.Object,ot=t.RegExp,nt=t.String,it=t.TypeError,at=o.prototype,st=et.prototype,lt=rt.prototype,ct=t["__core-js_shared__"],ut=st.toString,ft=lt.hasOwnProperty,gt=0,pt=(r=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",ht=lt.toString,dt=ut.call(rt),yt=Bt._,_t=ot("^"+ut.call(ft).replace(Oe,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$"),mt=Mt?t.Buffer:i,St=t.Symbol,Et=t.Uint8Array,Pt=mt?mt.allocUnsafe:i,kt=Pr(rt.getPrototypeOf,rt),Ot=rt.create,Dt=lt.propertyIsEnumerable,Lt=at.splice,Ft=St?St.isConcatSpreadable:i,Ut=St?St.iterator:i,sr=St?St.toStringTag:i,dr=function(){try{var e=Ki(rt,"defineProperty");return e({},"",{}),e}catch(t){}}(),Mr=t.clearTimeout!==Bt.clearTimeout&&t.clearTimeout,Fr=n&&n.now!==Bt.Date.now&&n.now,Ur=t.setTimeout!==Bt.setTimeout&&t.setTimeout,jr=tt.ceil,qr=tt.floor,Kr=rt.getOwnPropertySymbols,Wr=mt?mt.isBuffer:i,Vr=t.isFinite,Gr=at.join,zr=Pr(rt.keys,rt),Qr=tt.max,Jr=tt.min,Hr=n.now,Yr=t.parseInt,Xr=tt.random,$r=at.reverse,Zr=Ki(t,"DataView"),eo=Ki(t,"Map"),to=Ki(t,"Promise"),ro=Ki(t,"Set"),oo=Ki(t,"WeakMap"),no=Ki(rt,"create"),io=oo&&new oo,ao={},so=pa(Zr),lo=pa(eo),co=pa(to),uo=pa(ro),fo=pa(oo),go=St?St.prototype:i,po=go?go.valueOf:i,ho=go?go.toString:i;function yo(e){if(Cs(e)&&!vs(e)&&!(e instanceof bo)){if(e instanceof vo)return e;if(ft.call(e,"__wrapped__"))return ha(e)}return new vo(e)}var _o=function(){function e(){}return function(t){if(!Ps(t))return{};if(Ot)return Ot(t);e.prototype=t;var r=new e;return e.prototype=i,r}}();function mo(){}function vo(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function bo(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=M,this.__views__=[]}function So(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function To(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Eo(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function No(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Eo;++t<r;)this.add(e[t])}function xo(e){var t=this.__data__=new To(e);this.size=t.size}function wo(e,t){var r=vs(e),o=!r&&ms(e),n=!r&&!o&&Es(e),i=!r&&!o&&!n&&Fs(e),a=r||o||n||i,s=a?mr(e.length,nt):[],l=s.length;for(var c in e)!t&&!ft.call(e,c)||a&&("length"==c||n&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Hi(c,l))||s.push(c);return s}function Ao(e){var t=e.length;return t?e[xn(0,t-1)]:i}function Ro(e,t){return ua(ai(e),Mo(t,0,e.length))}function Po(e){return ua(ai(e))}function Co(e,t,r){(r===i||ds(e[t],r))&&(r!==i||t in e)||Do(e,t,r)}function Io(e,t,r){var o=e[t];ft.call(e,t)&&ds(o,r)&&(r!==i||t in e)||Do(e,t,r)}function ko(e,t){for(var r=e.length;r--;)if(ds(e[r][0],t))return r;return-1}function Oo(e,t,r,o){return Ko(e,function(e,n,i){t(o,e,r(e),i)}),o}function Bo(e,t){return e&&si(t,al(t),e)}function Do(e,t,r){"__proto__"==t&&dr?dr(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Lo(e,t){for(var r=-1,n=t.length,a=o(n),s=null==e;++r<n;)a[r]=s?i:tl(e,t[r]);return a}function Mo(e,t,r){return e==e&&(r!==i&&(e=e<=r?e:r),t!==i&&(e=e>=t?e:t)),e}function Fo(e,t,r,o,n,a){var s,l=t&g,c=t&p,u=t&h;if(r&&(s=n?r(e,o,n,a):r(e)),s!==i)return s;if(!Ps(e))return e;var f=vs(e);if(f){if(s=function(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&ft.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!l)return ai(e,s)}else{var d=Gi(e),y=d==J||d==H;if(Es(e))return ei(e,l);if(d==Z||d==q||y&&!n){if(s=c||y?{}:Qi(e),!l)return c?function(e,t){return si(e,Vi(e),t)}(e,function(e,t){return e&&si(t,sl(t),e)}(s,e)):function(e,t){return si(e,Wi(e),t)}(e,Bo(s,e))}else{if(!Rt[d])return n?e:{};s=function(e,t,r,o){var n,i=e.constructor;switch(t){case le:return ti(e);case V:case G:return new i(+e);case ce:return function(e,t){var r=t?ti(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,o);case ue:case fe:case ge:case pe:case he:case de:case ye:case _e:case me:return ri(e,o);case Y:return function(e,t,r){return nr(t?r(Rr(e),g):Rr(e),zt,new e.constructor)}(e,o,r);case X:case oe:return new i(e);case te:return function(e){var t=new e.constructor(e.source,Ve.exec(e));return t.lastIndex=e.lastIndex,t}(e);case re:return function(e,t,r){return nr(t?r(Ir(e),g):Ir(e),Qt,new e.constructor)}(e,o,r);case ne:return n=e,po?rt(po.call(n)):{}}}(e,d,Fo,l)}}a||(a=new xo);var _=a.get(e);if(_)return _;a.set(e,s);var m=f?i:(u?c?Di:Bi:c?sl:al)(e);return Yt(m||e,function(o,n){m&&(o=e[n=o]),Io(s,n,Fo(o,t,r,n,e,a))}),s}function Uo(e,t,r){var o=r.length;if(null==e)return!o;for(e=rt(e);o--;){var n=r[o],a=t[n],s=e[n];if(s===i&&!(n in e)||!a(s))return!1}return!0}function jo(e,t,r){if("function"!=typeof e)throw new it(l);return aa(function(){e.apply(i,r)},t)}function qo(e,t,r,o){var n=-1,i=er,s=!0,l=e.length,c=[],u=t.length;if(!l)return c;r&&(t=rr(t,vr(r))),o?(i=tr,s=!1):t.length>=a&&(i=Sr,s=!1,t=new No(t));e:for(;++n<l;){var f=e[n],g=null==r?f:r(f);if(f=o||0!==f?f:0,s&&g==g){for(var p=u;p--;)if(t[p]===g)continue e;c.push(f)}else i(t,g,o)||c.push(f)}return c}yo.templateSettings={escape:we,evaluate:Ae,interpolate:Re,variable:"",imports:{_:yo}},yo.prototype=mo.prototype,yo.prototype.constructor=yo,vo.prototype=_o(mo.prototype),vo.prototype.constructor=vo,bo.prototype=_o(mo.prototype),bo.prototype.constructor=bo,So.prototype.clear=function(){this.__data__=no?no(null):{},this.size=0},So.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},So.prototype.get=function(e){var t=this.__data__;if(no){var r=t[e];return r===c?i:r}return ft.call(t,e)?t[e]:i},So.prototype.has=function(e){var t=this.__data__;return no?t[e]!==i:ft.call(t,e)},So.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=no&&t===i?c:t,this},To.prototype.clear=function(){this.__data__=[],this.size=0},To.prototype.delete=function(e){var t=this.__data__,r=ko(t,e);return!(r<0||(r==t.length-1?t.pop():Lt.call(t,r,1),--this.size,0))},To.prototype.get=function(e){var t=this.__data__,r=ko(t,e);return r<0?i:t[r][1]},To.prototype.has=function(e){return ko(this.__data__,e)>-1},To.prototype.set=function(e,t){var r=this.__data__,o=ko(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this},Eo.prototype.clear=function(){this.size=0,this.__data__={hash:new So,map:new(eo||To),string:new So}},Eo.prototype.delete=function(e){var t=ji(this,e).delete(e);return this.size-=t?1:0,t},Eo.prototype.get=function(e){return ji(this,e).get(e)},Eo.prototype.has=function(e){return ji(this,e).has(e)},Eo.prototype.set=function(e,t){var r=ji(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this},No.prototype.add=No.prototype.push=function(e){return this.__data__.set(e,c),this},No.prototype.has=function(e){return this.__data__.has(e)},xo.prototype.clear=function(){this.__data__=new To,this.size=0},xo.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},xo.prototype.get=function(e){return this.__data__.get(e)},xo.prototype.has=function(e){return this.__data__.has(e)},xo.prototype.set=function(e,t){var r=this.__data__;if(r instanceof To){var o=r.__data__;if(!eo||o.length<a-1)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new Eo(o)}return r.set(e,t),this.size=r.size,this};var Ko=ui(Yo),Wo=ui(Xo,!0);function Vo(e,t){var r=!0;return Ko(e,function(e,o,n){return r=!!t(e,o,n)}),r}function Go(e,t,r){for(var o=-1,n=e.length;++o<n;){var a=e[o],s=t(a);if(null!=s&&(l===i?s==s&&!Ms(s):r(s,l)))var l=s,c=a}return c}function zo(e,t){var r=[];return Ko(e,function(e,o,n){t(e,o,n)&&r.push(e)}),r}function Qo(e,t,r,o,n){var i=-1,a=e.length;for(r||(r=Ji),n||(n=[]);++i<a;){var s=e[i];t>0&&r(s)?t>1?Qo(s,t-1,r,o,n):or(n,s):o||(n[n.length]=s)}return n}var Jo=fi(),Ho=fi(!0);function Yo(e,t){return e&&Jo(e,t,al)}function Xo(e,t){return e&&Ho(e,t,al)}function $o(e,t){return Zt(t,function(t){return ws(e[t])})}function Zo(e,t){for(var r=0,o=(t=Yn(t,e)).length;null!=e&&r<o;)e=e[ga(t[r++])];return r&&r==o?e:i}function en(e,t,r){var o=t(e);return vs(e)?o:or(o,r(e))}function tn(e){return null==e?e===i?ie:$:sr&&sr in rt(e)?function(e){var t=ft.call(e,sr),r=e[sr];try{e[sr]=i;var o=!0}catch(a){}var n=ht.call(e);return o&&(t?e[sr]=r:delete e[sr]),n}(e):function(e){return ht.call(e)}(e)}function rn(e,t){return e>t}function on(e,t){return null!=e&&ft.call(e,t)}function nn(e,t){return null!=e&&t in rt(e)}function an(e,t,r){for(var n=r?tr:er,a=e[0].length,s=e.length,l=s,c=o(s),u=1/0,f=[];l--;){var g=e[l];l&&t&&(g=rr(g,vr(t))),u=Jr(g.length,u),c[l]=!r&&(t||a>=120&&g.length>=120)?new No(l&&g):i}g=e[0];var p=-1,h=c[0];e:for(;++p<a&&f.length<u;){var d=g[p],y=t?t(d):d;if(d=r||0!==d?d:0,!(h?Sr(h,y):n(f,y,r))){for(l=s;--l;){var _=c[l];if(!(_?Sr(_,y):n(e[l],y,r)))continue e}h&&h.push(y),f.push(d)}}return f}function sn(e,t,r){var o=null==(e=na(e,t=Yn(t,e)))?e:e[ga(xa(t))];return null==o?i:Jt(o,e,r)}function ln(e){return Cs(e)&&tn(e)==q}function cn(e,t,r,o,n){return e===t||(null==e||null==t||!Cs(e)&&!Cs(t)?e!=e&&t!=t:function(e,t,r,o,n,a){var s=vs(e),l=vs(t),c=s?K:Gi(e),u=l?K:Gi(t),f=(c=c==q?Z:c)==Z,g=(u=u==q?Z:u)==Z,p=c==u;if(p&&Es(e)){if(!Es(t))return!1;s=!0,f=!1}if(p&&!f)return a||(a=new xo),s||Fs(e)?ki(e,t,r,o,n,a):function(e,t,r,o,n,i,a){switch(r){case ce:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case le:return!(e.byteLength!=t.byteLength||!i(new Et(e),new Et(t)));case V:case G:case X:return ds(+e,+t);case Q:return e.name==t.name&&e.message==t.message;case te:case oe:return e==t+"";case Y:var s=Rr;case re:var l=o&d;if(s||(s=Ir),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;o|=y,a.set(e,t);var u=ki(s(e),s(t),o,n,i,a);return a.delete(e),u;case ne:if(po)return po.call(e)==po.call(t)}return!1}(e,t,c,r,o,n,a);if(!(r&d)){var h=f&&ft.call(e,"__wrapped__"),_=g&&ft.call(t,"__wrapped__");if(h||_){var m=h?e.value():e,v=_?t.value():t;return a||(a=new xo),n(m,v,r,o,a)}}return!!p&&(a||(a=new xo),function(e,t,r,o,n,a){var s=r&d,l=Bi(e),c=l.length,u=Bi(t).length;if(c!=u&&!s)return!1;for(var f=c;f--;){var g=l[f];if(!(s?g in t:ft.call(t,g)))return!1}var p=a.get(e);if(p&&a.get(t))return p==t;var h=!0;a.set(e,t),a.set(t,e);for(var y=s;++f<c;){g=l[f];var _=e[g],m=t[g];if(o)var v=s?o(m,_,g,t,e,a):o(_,m,g,e,t,a);if(!(v===i?_===m||n(_,m,r,o,a):v)){h=!1;break}y||(y="constructor"==g)}if(h&&!y){var b=e.constructor,S=t.constructor;b!=S&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof S&&S instanceof S)&&(h=!1)}return a.delete(e),a.delete(t),h}(e,t,r,o,n,a))}(e,t,r,o,cn,n))}function un(e,t,r,o){var n=r.length,a=n,s=!o;if(null==e)return!a;for(e=rt(e);n--;){var l=r[n];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++n<a;){var c=(l=r[n])[0],u=e[c],f=l[1];if(s&&l[2]){if(u===i&&!(c in e))return!1}else{var g=new xo;if(o)var p=o(u,f,c,e,t,g);if(!(p===i?cn(f,u,d|y,o,g):p))return!1}}return!0}function fn(e){return!(!Ps(e)||(t=e,pt&&pt in t))&&(ws(e)?_t:Qe).test(pa(e));var t}function gn(e){return"function"==typeof e?e:null==e?kl:"object"==typeof e?vs(e)?mn(e[0],e[1]):_n(e):ql(e)}function pn(e){if(!ea(e))return zr(e);var t=[];for(var r in rt(e))ft.call(e,r)&&"constructor"!=r&&t.push(r);return t}function hn(e){if(!Ps(e))return function(e){var t=[];if(null!=e)for(var r in rt(e))t.push(r);return t}(e);var t=ea(e),r=[];for(var o in e)("constructor"!=o||!t&&ft.call(e,o))&&r.push(o);return r}function dn(e,t){return e<t}function yn(e,t){var r=-1,n=Ss(e)?o(e.length):[];return Ko(e,function(e,o,i){n[++r]=t(e,o,i)}),n}function _n(e){var t=qi(e);return 1==t.length&&t[0][2]?ra(t[0][0],t[0][1]):function(r){return r===e||un(r,e,t)}}function mn(e,t){return Xi(e)&&ta(t)?ra(ga(e),t):function(r){var o=tl(r,e);return o===i&&o===t?rl(r,e):cn(t,o,d|y)}}function vn(e,t,r,o,n){e!==t&&Jo(t,function(a,s){if(Ps(a))n||(n=new xo),function(e,t,r,o,n,a,s){var l=e[r],c=t[r],u=s.get(c);if(u)Co(e,r,u);else{var f=a?a(l,c,r+"",e,t,s):i,g=f===i;if(g){var p=vs(c),h=!p&&Es(c),d=!p&&!h&&Fs(c);f=c,p||h||d?vs(l)?f=l:Ts(l)?f=ai(l):h?(g=!1,f=ei(c,!0)):d?(g=!1,f=ri(c,!0)):f=[]:Os(c)||ms(c)?(f=l,ms(l)?f=zs(l):(!Ps(l)||o&&ws(l))&&(f=Qi(c))):g=!1}g&&(s.set(c,f),n(f,c,o,a,s),s.delete(c)),Co(e,r,f)}}(e,t,s,r,vn,o,n);else{var l=o?o(e[s],a,s+"",e,t,n):i;l===i&&(l=a),Co(e,s,l)}},sl)}function bn(e,t){var r=e.length;if(r)return Hi(t+=t<0?r:0,r)?e[t]:i}function Sn(e,t,r){var o=-1;return t=rr(t.length?t:[kl],vr(Ui())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(yn(e,function(e,r,n){return{criteria:rr(t,function(t){return t(e)}),index:++o,value:e}}),function(e,t){return function(e,t,r){for(var o=-1,n=e.criteria,i=t.criteria,a=n.length,s=r.length;++o<a;){var l=oi(n[o],i[o]);if(l){if(o>=s)return l;var c=r[o];return l*("desc"==c?-1:1)}}return e.index-t.index}(e,t,r)})}function Tn(e,t,r){for(var o=-1,n=t.length,i={};++o<n;){var a=t[o],s=Zo(e,a);r(s,a)&&Cn(i,Yn(a,e),s)}return i}function En(e,t,r,o){var n=o?fr:ur,i=-1,a=t.length,s=e;for(e===t&&(t=ai(t)),r&&(s=rr(e,vr(r)));++i<a;)for(var l=0,c=t[i],u=r?r(c):c;(l=n(s,u,l,o))>-1;)s!==e&&Lt.call(s,l,1),Lt.call(e,l,1);return e}function Nn(e,t){for(var r=e?t.length:0,o=r-1;r--;){var n=t[r];if(r==o||n!==i){var i=n;Hi(n)?Lt.call(e,n,1):Kn(e,n)}}return e}function xn(e,t){return e+qr(Xr()*(t-e+1))}function wn(e,t){var r="";if(!e||t<1||t>B)return r;do{t%2&&(r+=e),(t=qr(t/2))&&(e+=e)}while(t);return r}function An(e,t){return sa(oa(e,t,kl),e+"")}function Rn(e){return Ao(dl(e))}function Pn(e,t){var r=dl(e);return ua(r,Mo(t,0,r.length))}function Cn(e,t,r,o){if(!Ps(e))return e;for(var n=-1,a=(t=Yn(t,e)).length,s=a-1,l=e;null!=l&&++n<a;){var c=ga(t[n]),u=r;if(n!=s){var f=l[c];(u=o?o(f,c,l):i)===i&&(u=Ps(f)?f:Hi(t[n+1])?[]:{})}Io(l,c,u),l=l[c]}return e}var In=io?function(e,t){return io.set(e,t),e}:kl,kn=dr?function(e,t){return dr(e,"toString",{configurable:!0,enumerable:!1,value:Pl(t),writable:!0})}:kl;function On(e){return ua(dl(e))}function Bn(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=o(i);++n<i;)a[n]=e[n+t];return a}function Dn(e,t){var r;return Ko(e,function(e,o,n){return!(r=t(e,o,n))}),!!r}function Ln(e,t,r){var o=0,n=null==e?o:e.length;if("number"==typeof t&&t==t&&n<=U){for(;o<n;){var i=o+n>>>1,a=e[i];null!==a&&!Ms(a)&&(r?a<=t:a<t)?o=i+1:n=i}return n}return Mn(e,t,kl,r)}function Mn(e,t,r,o){t=r(t);for(var n=0,a=null==e?0:e.length,s=t!=t,l=null===t,c=Ms(t),u=t===i;n<a;){var f=qr((n+a)/2),g=r(e[f]),p=g!==i,h=null===g,d=g==g,y=Ms(g);if(s)var _=o||d;else _=u?d&&(o||p):l?d&&p&&(o||!h):c?d&&p&&!h&&(o||!y):!h&&!y&&(o?g<=t:g<t);_?n=f+1:a=f}return Jr(a,F)}function Fn(e,t){for(var r=-1,o=e.length,n=0,i=[];++r<o;){var a=e[r],s=t?t(a):a;if(!r||!ds(s,l)){var l=s;i[n++]=0===a?0:a}}return i}function Un(e){return"number"==typeof e?e:Ms(e)?L:+e}function jn(e){if("string"==typeof e)return e;if(vs(e))return rr(e,jn)+"";if(Ms(e))return ho?ho.call(e):"";var t=e+"";return"0"==t&&1/e==-O?"-0":t}function qn(e,t,r){var o=-1,n=er,i=e.length,s=!0,l=[],c=l;if(r)s=!1,n=tr;else if(i>=a){var u=t?null:wi(e);if(u)return Ir(u);s=!1,n=Sr,c=new No}else c=t?[]:l;e:for(;++o<i;){var f=e[o],g=t?t(f):f;if(f=r||0!==f?f:0,s&&g==g){for(var p=c.length;p--;)if(c[p]===g)continue e;t&&c.push(g),l.push(f)}else n(c,g,r)||(c!==l&&c.push(g),l.push(f))}return l}function Kn(e,t){return null==(e=na(e,t=Yn(t,e)))||delete e[ga(xa(t))]}function Wn(e,t,r,o){return Cn(e,t,r(Zo(e,t)),o)}function Vn(e,t,r,o){for(var n=e.length,i=o?n:-1;(o?i--:++i<n)&&t(e[i],i,e););return r?Bn(e,o?0:i,o?i+1:n):Bn(e,o?i+1:0,o?n:i)}function Gn(e,t){var r=e;return r instanceof bo&&(r=r.value()),nr(t,function(e,t){return t.func.apply(t.thisArg,or([e],t.args))},r)}function zn(e,t,r){var n=e.length;if(n<2)return n?qn(e[0]):[];for(var i=-1,a=o(n);++i<n;)for(var s=e[i],l=-1;++l<n;)l!=i&&(a[i]=qo(a[i]||s,e[l],t,r));return qn(Qo(a,1),t,r)}function Qn(e,t,r){for(var o=-1,n=e.length,a=t.length,s={};++o<n;){var l=o<a?t[o]:i;r(s,e[o],l)}return s}function Jn(e){return Ts(e)?e:[]}function Hn(e){return"function"==typeof e?e:kl}function Yn(e,t){return vs(e)?e:Xi(e,t)?[e]:fa(Qs(e))}var Xn=An;function $n(e,t,r){var o=e.length;return r=r===i?o:r,!t&&r>=o?e:Bn(e,t,r)}var Zn=Mr||function(e){return Bt.clearTimeout(e)};function ei(e,t){if(t)return e.slice();var r=e.length,o=Pt?Pt(r):new e.constructor(r);return e.copy(o),o}function ti(e){var t=new e.constructor(e.byteLength);return new Et(t).set(new Et(e)),t}function ri(e,t){var r=t?ti(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function oi(e,t){if(e!==t){var r=e!==i,o=null===e,n=e==e,a=Ms(e),s=t!==i,l=null===t,c=t==t,u=Ms(t);if(!l&&!u&&!a&&e>t||a&&s&&c&&!l&&!u||o&&s&&c||!r&&c||!n)return 1;if(!o&&!a&&!u&&e<t||u&&r&&n&&!o&&!a||l&&r&&n||!s&&n||!c)return-1}return 0}function ni(e,t,r,n){for(var i=-1,a=e.length,s=r.length,l=-1,c=t.length,u=Qr(a-s,0),f=o(c+u),g=!n;++l<c;)f[l]=t[l];for(;++i<s;)(g||i<a)&&(f[r[i]]=e[i]);for(;u--;)f[l++]=e[i++];return f}function ii(e,t,r,n){for(var i=-1,a=e.length,s=-1,l=r.length,c=-1,u=t.length,f=Qr(a-l,0),g=o(f+u),p=!n;++i<f;)g[i]=e[i];for(var h=i;++c<u;)g[h+c]=t[c];for(;++s<l;)(p||i<a)&&(g[h+r[s]]=e[i++]);return g}function ai(e,t){var r=-1,n=e.length;for(t||(t=o(n));++r<n;)t[r]=e[r];return t}function si(e,t,r,o){var n=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var l=t[a],c=o?o(r[l],e[l],l,r,e):i;c===i&&(c=e[l]),n?Do(r,l,c):Io(r,l,c)}return r}function li(e,t){return function(r,o){var n=vs(r)?Ht:Oo,i=t?t():{};return n(r,e,Ui(o,2),i)}}function ci(e){return An(function(t,r){var o=-1,n=r.length,a=n>1?r[n-1]:i,s=n>2?r[2]:i;for(a=e.length>3&&"function"==typeof a?(n--,a):i,s&&Yi(r[0],r[1],s)&&(a=n<3?i:a,n=1),t=rt(t);++o<n;){var l=r[o];l&&e(t,l,o,a)}return t})}function ui(e,t){return function(r,o){if(null==r)return r;if(!Ss(r))return e(r,o);for(var n=r.length,i=t?n:-1,a=rt(r);(t?i--:++i<n)&&!1!==o(a[i],i,a););return r}}function fi(e){return function(t,r,o){for(var n=-1,i=rt(t),a=o(t),s=a.length;s--;){var l=a[e?s:++n];if(!1===r(i[l],l,i))break}return t}}function gi(e){return function(t){var r=Ar(t=Qs(t))?Br(t):i,o=r?r[0]:t.charAt(0),n=r?$n(r,1).join(""):t.slice(1);return o[e]()+n}}function pi(e){return function(t){return nr(wl(ml(t).replace(vt,"")),e,"")}}function hi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=_o(e.prototype),o=e.apply(r,t);return Ps(o)?o:r}}function di(e){return function(t,r,o){var n=rt(t);if(!Ss(t)){var a=Ui(r,3);t=al(t),r=function(e){return a(n[e],e,n)}}var s=e(t,r,o);return s>-1?n[a?t[s]:s]:i}}function yi(e){return Oi(function(t){var r=t.length,o=r,n=vo.prototype.thru;for(e&&t.reverse();o--;){var a=t[o];if("function"!=typeof a)throw new it(l);if(n&&!s&&"wrapper"==Mi(a))var s=new vo([],!0)}for(o=s?o:r;++o<r;){var c=Mi(a=t[o]),u="wrapper"==c?Li(a):i;s=u&&$i(u[0])&&u[1]==(N|b|T|x)&&!u[4].length&&1==u[9]?s[Mi(u[0])].apply(s,u[3]):1==a.length&&$i(a)?s[c]():s.thru(a)}return function(){var e=arguments,o=e[0];if(s&&1==e.length&&vs(o))return s.plant(o).value();for(var n=0,i=r?t[n].apply(this,e):o;++n<r;)i=t[n].call(this,i);return i}})}function _i(e,t,r,n,a,s,l,c,u,f){var g=t&N,p=t&_,h=t&m,d=t&(b|S),y=t&w,v=h?i:hi(e);return function _(){for(var m=arguments.length,b=o(m),S=m;S--;)b[S]=arguments[S];if(d)var T=Fi(_),E=function(e,t){for(var r=e.length,o=0;r--;)e[r]===t&&++o;return o}(b,T);if(n&&(b=ni(b,n,a,d)),s&&(b=ii(b,s,l,d)),m-=E,d&&m<f){var N=Cr(b,T);return Ni(e,t,_i,_.placeholder,r,b,N,c,u,f-m)}var x=p?r:this,w=h?x[e]:e;return m=b.length,c?b=function(e,t){for(var r=e.length,o=Jr(t.length,r),n=ai(e);o--;){var a=t[o];e[o]=Hi(a,r)?n[a]:i}return e}(b,c):y&&m>1&&b.reverse(),g&&u<m&&(b.length=u),this&&this!==Bt&&this instanceof _&&(w=v||hi(w)),w.apply(x,b)}}function mi(e,t){return function(r,o){return function(e,t,r,o){return Yo(e,function(e,n,i){t(o,r(e),n,i)}),o}(r,e,t(o),{})}}function vi(e,t){return function(r,o){var n;if(r===i&&o===i)return t;if(r!==i&&(n=r),o!==i){if(n===i)return o;"string"==typeof r||"string"==typeof o?(r=jn(r),o=jn(o)):(r=Un(r),o=Un(o)),n=e(r,o)}return n}}function bi(e){return Oi(function(t){return t=rr(t,vr(Ui())),An(function(r){var o=this;return e(t,function(e){return Jt(e,o,r)})})})}function Si(e,t){var r=(t=t===i?" ":jn(t)).length;if(r<2)return r?wn(t,e):t;var o=wn(t,jr(e/Or(t)));return Ar(t)?$n(Br(o),0,e).join(""):o.slice(0,e)}function Ti(e){return function(t,r,n){return n&&"number"!=typeof n&&Yi(t,r,n)&&(r=n=i),t=Ks(t),r===i?(r=t,t=0):r=Ks(r),function(e,t,r,n){for(var i=-1,a=Qr(jr((t-e)/(r||1)),0),s=o(a);a--;)s[n?a:++i]=e,e+=r;return s}(t,r,n=n===i?t<r?1:-1:Ks(n),e)}}function Ei(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=Gs(t),r=Gs(r)),e(t,r)}}function Ni(e,t,r,o,n,a,s,l,c,u){var f=t&b;t|=f?T:E,(t&=~(f?E:T))&v||(t&=~(_|m));var g=[e,t,n,f?a:i,f?s:i,f?i:a,f?i:s,l,c,u],p=r.apply(i,g);return $i(e)&&ia(p,g),p.placeholder=o,la(p,e,t)}function xi(e){var t=tt[e];return function(e,r){if(e=Gs(e),r=null==r?0:Jr(Ws(r),292)){var o=(Qs(e)+"e").split("e");return+((o=(Qs(t(o[0]+"e"+(+o[1]+r)))+"e").split("e"))[0]+"e"+(+o[1]-r))}return t(e)}}var wi=ro&&1/Ir(new ro([,-0]))[1]==O?function(e){return new ro(e)}:Ml;function Ai(e){return function(t){var r=Gi(t);return r==Y?Rr(t):r==re?kr(t):function(e,t){return rr(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ri(e,t,r,n,a,s,c,u){var g=t&m;if(!g&&"function"!=typeof e)throw new it(l);var p=n?n.length:0;if(p||(t&=~(T|E),n=a=i),c=c===i?c:Qr(Ws(c),0),u=u===i?u:Ws(u),p-=a?a.length:0,t&E){var h=n,d=a;n=a=i}var y=g?i:Li(e),w=[e,t,r,n,a,h,d,s,c,u];if(y&&function(e,t){var r=e[1],o=t[1],n=r|o,i=n<(_|m|N),a=o==N&&r==b||o==N&&r==x&&e[7].length<=t[8]||o==(N|x)&&t[7].length<=t[8]&&r==b;if(!i&&!a)return e;o&_&&(e[2]=t[2],n|=r&_?0:v);var s=t[3];if(s){var l=e[3];e[3]=l?ni(l,s,t[4]):s,e[4]=l?Cr(e[3],f):t[4]}(s=t[5])&&(l=e[5],e[5]=l?ii(l,s,t[6]):s,e[6]=l?Cr(e[5],f):t[6]),(s=t[7])&&(e[7]=s),o&N&&(e[8]=null==e[8]?t[8]:Jr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=n}(w,y),e=w[0],t=w[1],r=w[2],n=w[3],a=w[4],!(u=w[9]=w[9]===i?g?0:e.length:Qr(w[9]-p,0))&&t&(b|S)&&(t&=~(b|S)),t&&t!=_)A=t==b||t==S?function(e,t,r){var n=hi(e);return function a(){for(var s=arguments.length,l=o(s),c=s,u=Fi(a);c--;)l[c]=arguments[c];var f=s<3&&l[0]!==u&&l[s-1]!==u?[]:Cr(l,u);return(s-=f.length)<r?Ni(e,t,_i,a.placeholder,i,l,f,i,i,r-s):Jt(this&&this!==Bt&&this instanceof a?n:e,this,l)}}(e,t,u):t!=T&&t!=(_|T)||a.length?_i.apply(i,w):function(e,t,r,n){var i=t&_,a=hi(e);return function t(){for(var s=-1,l=arguments.length,c=-1,u=n.length,f=o(u+l),g=this&&this!==Bt&&this instanceof t?a:e;++c<u;)f[c]=n[c];for(;l--;)f[c++]=arguments[++s];return Jt(g,i?r:this,f)}}(e,t,r,n);else var A=function(e,t,r){var o=t&_,n=hi(e);return function t(){return(this&&this!==Bt&&this instanceof t?n:e).apply(o?r:this,arguments)}}(e,t,r);return la((y?In:ia)(A,w),e,t)}function Pi(e,t,r,o){return e===i||ds(e,lt[r])&&!ft.call(o,r)?t:e}function Ci(e,t,r,o,n,a){return Ps(e)&&Ps(t)&&(a.set(t,e),vn(e,t,i,Ci,a),a.delete(t)),e}function Ii(e){return Os(e)?i:e}function ki(e,t,r,o,n,a){var s=r&d,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var f=-1,g=!0,p=r&y?new No:i;for(a.set(e,t),a.set(t,e);++f<l;){var h=e[f],_=t[f];if(o)var m=s?o(_,h,f,t,e,a):o(h,_,f,e,t,a);if(m!==i){if(m)continue;g=!1;break}if(p){if(!ar(t,function(e,t){if(!Sr(p,t)&&(h===e||n(h,e,r,o,a)))return p.push(t)})){g=!1;break}}else if(h!==_&&!n(h,_,r,o,a)){g=!1;break}}return a.delete(e),a.delete(t),g}function Oi(e){return sa(oa(e,i,ba),e+"")}function Bi(e){return en(e,al,Wi)}function Di(e){return en(e,sl,Vi)}var Li=io?function(e){return io.get(e)}:Ml;function Mi(e){for(var t=e.name+"",r=ao[t],o=ft.call(ao,t)?r.length:0;o--;){var n=r[o],i=n.func;if(null==i||i==e)return n.name}return t}function Fi(e){return(ft.call(yo,"placeholder")?yo:e).placeholder}function Ui(){var e=yo.iteratee||Ol;return e=e===Ol?gn:e,arguments.length?e(arguments[0],arguments[1]):e}function ji(e,t){var r,o,n=e.__data__;return("string"==(o=typeof(r=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?n["string"==typeof t?"string":"hash"]:n.map}function qi(e){for(var t=al(e),r=t.length;r--;){var o=t[r],n=e[o];t[r]=[o,n,ta(n)]}return t}function Ki(e,t){var r=function(e,t){return null==e?i:e[t]}(e,t);return fn(r)?r:i}var Wi=Kr?function(e){return null==e?[]:(e=rt(e),Zt(Kr(e),function(t){return Dt.call(e,t)}))}:Vl,Vi=Kr?function(e){for(var t=[];e;)or(t,Wi(e)),e=kt(e);return t}:Vl,Gi=tn;function zi(e,t,r){for(var o=-1,n=(t=Yn(t,e)).length,i=!1;++o<n;){var a=ga(t[o]);if(!(i=null!=e&&r(e,a)))break;e=e[a]}return i||++o!=n?i:!!(n=null==e?0:e.length)&&Rs(n)&&Hi(a,n)&&(vs(e)||ms(e))}function Qi(e){return"function"!=typeof e.constructor||ea(e)?{}:_o(kt(e))}function Ji(e){return vs(e)||ms(e)||!!(Ft&&e&&e[Ft])}function Hi(e,t){return!!(t=null==t?B:t)&&("number"==typeof e||He.test(e))&&e>-1&&e%1==0&&e<t}function Yi(e,t,r){if(!Ps(r))return!1;var o=typeof t;return!!("number"==o?Ss(r)&&Hi(t,r.length):"string"==o&&t in r)&&ds(r[t],e)}function Xi(e,t){if(vs(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Ms(e))||Ce.test(e)||!Pe.test(e)||null!=t&&e in rt(t)}function $i(e){var t=Mi(e),r=yo[t];if("function"!=typeof r||!(t in bo.prototype))return!1;if(e===r)return!0;var o=Li(r);return!!o&&e===o[0]}(Zr&&Gi(new Zr(new ArrayBuffer(1)))!=ce||eo&&Gi(new eo)!=Y||to&&"[object Promise]"!=Gi(to.resolve())||ro&&Gi(new ro)!=re||oo&&Gi(new oo)!=ae)&&(Gi=function(e){var t=tn(e),r=t==Z?e.constructor:i,o=r?pa(r):"";if(o)switch(o){case so:return ce;case lo:return Y;case co:return"[object Promise]";case uo:return re;case fo:return ae}return t});var Zi=ct?ws:Gl;function ea(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||lt)}function ta(e){return e==e&&!Ps(e)}function ra(e,t){return function(r){return null!=r&&r[e]===t&&(t!==i||e in rt(r))}}function oa(e,t,r){return t=Qr(t===i?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=Qr(n.length-t,0),s=o(a);++i<a;)s[i]=n[t+i];i=-1;for(var l=o(t+1);++i<t;)l[i]=n[i];return l[t]=r(s),Jt(e,this,l)}}function na(e,t){return t.length<2?e:Zo(e,Bn(t,0,-1))}var ia=ca(In),aa=Ur||function(e,t){return Bt.setTimeout(e,t)},sa=ca(kn);function la(e,t,r){var o=t+"";return sa(e,function(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(Fe,"{\\n/* [wrapped with "+t+"] */\\n")}(o,function(e,t){return Yt(j,function(r){var o="_."+r[0];t&r[1]&&!er(e,o)&&e.push(o)}),e.sort()}(function(e){var t=e.match(Ue);return t?t[1].split(je):[]}(o),r)))}function ca(e){var t=0,r=0;return function(){var o=Hr(),n=C-(o-r);if(r=o,n>0){if(++t>=P)return arguments[0]}else t=0;return e.apply(i,arguments)}}function ua(e,t){var r=-1,o=e.length,n=o-1;for(t=t===i?o:t;++r<t;){var a=xn(r,n),s=e[a];e[a]=e[r],e[r]=s}return e.length=t,e}var fa=function(e){var t=cs(e,function(e){return r.size===u&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return Ie.test(e)&&t.push(""),e.replace(ke,function(e,r,o,n){t.push(o?n.replace(Ke,"$1"):r||e)}),t});function ga(e){if("string"==typeof e||Ms(e))return e;var t=e+"";return"0"==t&&1/e==-O?"-0":t}function pa(e){if(null!=e){try{return ut.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function ha(e){if(e instanceof bo)return e.clone();var t=new vo(e.__wrapped__,e.__chain__);return t.__actions__=ai(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var da=An(function(e,t){return Ts(e)?qo(e,Qo(t,1,Ts,!0)):[]}),ya=An(function(e,t){var r=xa(t);return Ts(r)&&(r=i),Ts(e)?qo(e,Qo(t,1,Ts,!0),Ui(r,2)):[]}),_a=An(function(e,t){var r=xa(t);return Ts(r)&&(r=i),Ts(e)?qo(e,Qo(t,1,Ts,!0),i,r):[]});function ma(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var n=null==r?0:Ws(r);return n<0&&(n=Qr(o+n,0)),cr(e,Ui(t,3),n)}function va(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var n=o-1;return r!==i&&(n=Ws(r),n=r<0?Qr(o+n,0):Jr(n,o-1)),cr(e,Ui(t,3),n,!0)}function ba(e){return null!=e&&e.length?Qo(e,1):[]}function Sa(e){return e&&e.length?e[0]:i}var Ta=An(function(e){var t=rr(e,Jn);return t.length&&t[0]===e[0]?an(t):[]}),Ea=An(function(e){var t=xa(e),r=rr(e,Jn);return t===xa(r)?t=i:r.pop(),r.length&&r[0]===e[0]?an(r,Ui(t,2)):[]}),Na=An(function(e){var t=xa(e),r=rr(e,Jn);return(t="function"==typeof t?t:i)&&r.pop(),r.length&&r[0]===e[0]?an(r,i,t):[]});function xa(e){var t=null==e?0:e.length;return t?e[t-1]:i}var wa=An(Aa);function Aa(e,t){return e&&e.length&&t&&t.length?En(e,t):e}var Ra=Oi(function(e,t){var r=null==e?0:e.length,o=Lo(e,t);return Nn(e,rr(t,function(e){return Hi(e,r)?+e:e}).sort(oi)),o});function Pa(e){return null==e?e:$r.call(e)}var Ca=An(function(e){return qn(Qo(e,1,Ts,!0))}),Ia=An(function(e){var t=xa(e);return Ts(t)&&(t=i),qn(Qo(e,1,Ts,!0),Ui(t,2))}),ka=An(function(e){var t=xa(e);return t="function"==typeof t?t:i,qn(Qo(e,1,Ts,!0),i,t)});function Oa(e){if(!e||!e.length)return[];var t=0;return e=Zt(e,function(e){if(Ts(e))return t=Qr(e.length,t),!0}),mr(t,function(t){return rr(e,hr(t))})}function Ba(e,t){if(!e||!e.length)return[];var r=Oa(e);return null==t?r:rr(r,function(e){return Jt(t,i,e)})}var Da=An(function(e,t){return Ts(e)?qo(e,t):[]}),La=An(function(e){return zn(Zt(e,Ts))}),Ma=An(function(e){var t=xa(e);return Ts(t)&&(t=i),zn(Zt(e,Ts),Ui(t,2))}),Fa=An(function(e){var t=xa(e);return t="function"==typeof t?t:i,zn(Zt(e,Ts),i,t)}),Ua=An(Oa);var ja=An(function(e){var t=e.length,r=t>1?e[t-1]:i;return r="function"==typeof r?(e.pop(),r):i,Ba(e,r)});function qa(e){var t=yo(e);return t.__chain__=!0,t}function Ka(e,t){return t(e)}var Wa=Oi(function(e){var t=e.length,r=t?e[0]:0,o=this.__wrapped__,n=function(t){return Lo(t,e)};return!(t>1||this.__actions__.length)&&o instanceof bo&&Hi(r)?((o=o.slice(r,+r+(t?1:0))).__actions__.push({func:Ka,args:[n],thisArg:i}),new vo(o,this.__chain__).thru(function(e){return t&&!e.length&&e.push(i),e})):this.thru(n)});var Va=li(function(e,t,r){ft.call(e,r)?++e[r]:Do(e,r,1)});var Ga=di(ma),za=di(va);function Qa(e,t){return(vs(e)?Yt:Ko)(e,Ui(t,3))}function Ja(e,t){return(vs(e)?Xt:Wo)(e,Ui(t,3))}var Ha=li(function(e,t,r){ft.call(e,r)?e[r].push(t):Do(e,r,[t])});var Ya=An(function(e,t,r){var n=-1,i="function"==typeof t,a=Ss(e)?o(e.length):[];return Ko(e,function(e){a[++n]=i?Jt(t,e,r):sn(e,t,r)}),a}),Xa=li(function(e,t,r){Do(e,r,t)});function $a(e,t){return(vs(e)?rr:yn)(e,Ui(t,3))}var Za=li(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});var es=An(function(e,t){if(null==e)return[];var r=t.length;return r>1&&Yi(e,t[0],t[1])?t=[]:r>2&&Yi(t[0],t[1],t[2])&&(t=[t[0]]),Sn(e,Qo(t,1),[])}),ts=Fr||function(){return Bt.Date.now()};function rs(e,t,r){return t=r?i:t,t=e&&null==t?e.length:t,Ri(e,N,i,i,i,i,t)}function os(e,t){var r;if("function"!=typeof t)throw new it(l);return e=Ws(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=i),r}}var ns=An(function(e,t,r){var o=_;if(r.length){var n=Cr(r,Fi(ns));o|=T}return Ri(e,o,t,r,n)}),is=An(function(e,t,r){var o=_|m;if(r.length){var n=Cr(r,Fi(is));o|=T}return Ri(t,o,e,r,n)});function as(e,t,r){var o,n,a,s,c,u,f=0,g=!1,p=!1,h=!0;if("function"!=typeof e)throw new it(l);function d(t){var r=o,a=n;return o=n=i,f=t,s=e.apply(a,r)}function y(e){var r=e-u;return u===i||r>=t||r<0||p&&e-f>=a}function _(){var e=ts();if(y(e))return m(e);c=aa(_,function(e){var r=t-(e-u);return p?Jr(r,a-(e-f)):r}(e))}function m(e){return c=i,h&&o?d(e):(o=n=i,s)}function v(){var e=ts(),r=y(e);if(o=arguments,n=this,u=e,r){if(c===i)return function(e){return f=e,c=aa(_,t),g?d(e):s}(u);if(p)return c=aa(_,t),d(u)}return c===i&&(c=aa(_,t)),s}return t=Gs(t)||0,Ps(r)&&(g=!!r.leading,a=(p="maxWait"in r)?Qr(Gs(r.maxWait)||0,t):a,h="trailing"in r?!!r.trailing:h),v.cancel=function(){c!==i&&Zn(c),f=0,o=u=n=c=i},v.flush=function(){return c===i?s:m(ts())},v}var ss=An(function(e,t){return jo(e,1,t)}),ls=An(function(e,t,r){return jo(e,Gs(t)||0,r)});function cs(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new it(l);var r=function(){var o=arguments,n=t?t.apply(this,o):o[0],i=r.cache;if(i.has(n))return i.get(n);var a=e.apply(this,o);return r.cache=i.set(n,a)||i,a};return r.cache=new(cs.Cache||Eo),r}function us(e){if("function"!=typeof e)throw new it(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}cs.Cache=Eo;var fs=Xn(function(e,t){var r=(t=1==t.length&&vs(t[0])?rr(t[0],vr(Ui())):rr(Qo(t,1),vr(Ui()))).length;return An(function(o){for(var n=-1,i=Jr(o.length,r);++n<i;)o[n]=t[n].call(this,o[n]);return Jt(e,this,o)})}),gs=An(function(e,t){var r=Cr(t,Fi(gs));return Ri(e,T,i,t,r)}),ps=An(function(e,t){var r=Cr(t,Fi(ps));return Ri(e,E,i,t,r)}),hs=Oi(function(e,t){return Ri(e,x,i,i,i,t)});function ds(e,t){return e===t||e!=e&&t!=t}var ys=Ei(rn),_s=Ei(function(e,t){return e>=t}),ms=ln(function(){return arguments}())?ln:function(e){return Cs(e)&&ft.call(e,"callee")&&!Dt.call(e,"callee")},vs=o.isArray,bs=jt?vr(jt):function(e){return Cs(e)&&tn(e)==le};function Ss(e){return null!=e&&Rs(e.length)&&!ws(e)}function Ts(e){return Cs(e)&&Ss(e)}var Es=Wr||Gl,Ns=qt?vr(qt):function(e){return Cs(e)&&tn(e)==G};function xs(e){if(!Cs(e))return!1;var t=tn(e);return t==Q||t==z||"string"==typeof e.message&&"string"==typeof e.name&&!Os(e)}function ws(e){if(!Ps(e))return!1;var t=tn(e);return t==J||t==H||t==W||t==ee}function As(e){return"number"==typeof e&&e==Ws(e)}function Rs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=B}function Ps(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Cs(e){return null!=e&&"object"==typeof e}var Is=Kt?vr(Kt):function(e){return Cs(e)&&Gi(e)==Y};function ks(e){return"number"==typeof e||Cs(e)&&tn(e)==X}function Os(e){if(!Cs(e)||tn(e)!=Z)return!1;var t=kt(e);if(null===t)return!0;var r=ft.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&ut.call(r)==dt}var Bs=Wt?vr(Wt):function(e){return Cs(e)&&tn(e)==te};var Ds=Vt?vr(Vt):function(e){return Cs(e)&&Gi(e)==re};function Ls(e){return"string"==typeof e||!vs(e)&&Cs(e)&&tn(e)==oe}function Ms(e){return"symbol"==typeof e||Cs(e)&&tn(e)==ne}var Fs=Gt?vr(Gt):function(e){return Cs(e)&&Rs(e.length)&&!!At[tn(e)]};var Us=Ei(dn),js=Ei(function(e,t){return e<=t});function qs(e){if(!e)return[];if(Ss(e))return Ls(e)?Br(e):ai(e);if(Ut&&e[Ut])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Ut]());var t=Gi(e);return(t==Y?Rr:t==re?Ir:dl)(e)}function Ks(e){return e?(e=Gs(e))===O||e===-O?(e<0?-1:1)*D:e==e?e:0:0===e?e:0}function Ws(e){var t=Ks(e),r=t%1;return t==t?r?t-r:t:0}function Vs(e){return e?Mo(Ws(e),0,M):0}function Gs(e){if("number"==typeof e)return e;if(Ms(e))return L;if(Ps(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ps(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(De,"");var r=ze.test(e);return r||Je.test(e)?It(e.slice(2),r?2:8):Ge.test(e)?L:+e}function zs(e){return si(e,sl(e))}function Qs(e){return null==e?"":jn(e)}var Js=ci(function(e,t){if(ea(t)||Ss(t))si(t,al(t),e);else for(var r in t)ft.call(t,r)&&Io(e,r,t[r])}),Hs=ci(function(e,t){si(t,sl(t),e)}),Ys=ci(function(e,t,r,o){si(t,sl(t),e,o)}),Xs=ci(function(e,t,r,o){si(t,al(t),e,o)}),$s=Oi(Lo);var Zs=An(function(e){return e.push(i,Pi),Jt(Ys,i,e)}),el=An(function(e){return e.push(i,Ci),Jt(cl,i,e)});function tl(e,t,r){var o=null==e?i:Zo(e,t);return o===i?r:o}function rl(e,t){return null!=e&&zi(e,t,nn)}var ol=mi(function(e,t,r){e[t]=r},Pl(kl)),nl=mi(function(e,t,r){ft.call(e,t)?e[t].push(r):e[t]=[r]},Ui),il=An(sn);function al(e){return Ss(e)?wo(e):pn(e)}function sl(e){return Ss(e)?wo(e,!0):hn(e)}var ll=ci(function(e,t,r){vn(e,t,r)}),cl=ci(function(e,t,r,o){vn(e,t,r,o)}),ul=Oi(function(e,t){var r={};if(null==e)return r;var o=!1;t=rr(t,function(t){return t=Yn(t,e),o||(o=t.length>1),t}),si(e,Di(e),r),o&&(r=Fo(r,g|p|h,Ii));for(var n=t.length;n--;)Kn(r,t[n]);return r});var fl=Oi(function(e,t){return null==e?{}:function(e,t){return Tn(e,t,function(t,r){return rl(e,r)})}(e,t)});function gl(e,t){if(null==e)return{};var r=rr(Di(e),function(e){return[e]});return t=Ui(t),Tn(e,r,function(e,r){return t(e,r[0])})}var pl=Ai(al),hl=Ai(sl);function dl(e){return null==e?[]:br(e,al(e))}var yl=pi(function(e,t,r){return t=t.toLowerCase(),e+(r?_l(t):t)});function _l(e){return xl(Qs(e).toLowerCase())}function ml(e){return(e=Qs(e))&&e.replace(Ye,Nr).replace(bt,"")}var vl=pi(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),bl=pi(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Sl=gi("toLowerCase");var Tl=pi(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});var El=pi(function(e,t,r){return e+(r?" ":"")+xl(t)});var Nl=pi(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),xl=gi("toUpperCase");function wl(e,t,r){return e=Qs(e),(t=r?i:t)===i?function(e){return Nt.test(e)}(e)?function(e){return e.match(Tt)||[]}(e):function(e){return e.match(qe)||[]}(e):e.match(t)||[]}var Al=An(function(e,t){try{return Jt(e,i,t)}catch(r){return xs(r)?r:new Ze(r)}}),Rl=Oi(function(e,t){return Yt(t,function(t){t=ga(t),Do(e,t,ns(e[t],e))}),e});function Pl(e){return function(){return e}}var Cl=yi(),Il=yi(!0);function kl(e){return e}function Ol(e){return gn("function"==typeof e?e:Fo(e,g))}var Bl=An(function(e,t){return function(r){return sn(r,e,t)}}),Dl=An(function(e,t){return function(r){return sn(e,r,t)}});function Ll(e,t,r){var o=al(t),n=$o(t,o);null!=r||Ps(t)&&(n.length||!o.length)||(r=t,t=e,e=this,n=$o(t,al(t)));var i=!(Ps(r)&&"chain"in r&&!r.chain),a=ws(e);return Yt(n,function(r){var o=t[r];e[r]=o,a&&(e.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=e(this.__wrapped__);return(r.__actions__=ai(this.__actions__)).push({func:o,args:arguments,thisArg:e}),r.__chain__=t,r}return o.apply(e,or([this.value()],arguments))})}),e}function Ml(){}var Fl=bi(rr),Ul=bi($t),jl=bi(ar);function ql(e){return Xi(e)?hr(ga(e)):function(e){return function(t){return Zo(t,e)}}(e)}var Kl=Ti(),Wl=Ti(!0);function Vl(){return[]}function Gl(){return!1}var zl=vi(function(e,t){return e+t},0),Ql=xi("ceil"),Jl=vi(function(e,t){return e/t},1),Hl=xi("floor");var Yl,Xl=vi(function(e,t){return e*t},1),$l=xi("round"),Zl=vi(function(e,t){return e-t},0);return yo.after=function(e,t){if("function"!=typeof t)throw new it(l);return e=Ws(e),function(){if(--e<1)return t.apply(this,arguments)}},yo.ary=rs,yo.assign=Js,yo.assignIn=Hs,yo.assignInWith=Ys,yo.assignWith=Xs,yo.at=$s,yo.before=os,yo.bind=ns,yo.bindAll=Rl,yo.bindKey=is,yo.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return vs(e)?e:[e]},yo.chain=qa,yo.chunk=function(e,t,r){t=(r?Yi(e,t,r):t===i)?1:Qr(Ws(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var a=0,s=0,l=o(jr(n/t));a<n;)l[s++]=Bn(e,a,a+=t);return l},yo.compact=function(e){for(var t=-1,r=null==e?0:e.length,o=0,n=[];++t<r;){var i=e[t];i&&(n[o++]=i)}return n},yo.concat=function(){var e=arguments.length;if(!e)return[];for(var t=o(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return or(vs(r)?ai(r):[r],Qo(t,1))},yo.cond=function(e){var t=null==e?0:e.length,r=Ui();return e=t?rr(e,function(e){if("function"!=typeof e[1])throw new it(l);return[r(e[0]),e[1]]}):[],An(function(r){for(var o=-1;++o<t;){var n=e[o];if(Jt(n[0],this,r))return Jt(n[1],this,r)}})},yo.conforms=function(e){return function(e){var t=al(e);return function(r){return Uo(r,e,t)}}(Fo(e,g))},yo.constant=Pl,yo.countBy=Va,yo.create=function(e,t){var r=_o(e);return null==t?r:Bo(r,t)},yo.curry=function e(t,r,o){var n=Ri(t,b,i,i,i,i,i,r=o?i:r);return n.placeholder=e.placeholder,n},yo.curryRight=function e(t,r,o){var n=Ri(t,S,i,i,i,i,i,r=o?i:r);return n.placeholder=e.placeholder,n},yo.debounce=as,yo.defaults=Zs,yo.defaultsDeep=el,yo.defer=ss,yo.delay=ls,yo.difference=da,yo.differenceBy=ya,yo.differenceWith=_a,yo.drop=function(e,t,r){var o=null==e?0:e.length;return o?Bn(e,(t=r||t===i?1:Ws(t))<0?0:t,o):[]},yo.dropRight=function(e,t,r){var o=null==e?0:e.length;return o?Bn(e,0,(t=o-(t=r||t===i?1:Ws(t)))<0?0:t):[]},yo.dropRightWhile=function(e,t){return e&&e.length?Vn(e,Ui(t,3),!0,!0):[]},yo.dropWhile=function(e,t){return e&&e.length?Vn(e,Ui(t,3),!0):[]},yo.fill=function(e,t,r,o){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&Yi(e,t,r)&&(r=0,o=n),function(e,t,r,o){var n=e.length;for((r=Ws(r))<0&&(r=-r>n?0:n+r),(o=o===i||o>n?n:Ws(o))<0&&(o+=n),o=r>o?0:Vs(o);r<o;)e[r++]=t;return e}(e,t,r,o)):[]},yo.filter=function(e,t){return(vs(e)?Zt:zo)(e,Ui(t,3))},yo.flatMap=function(e,t){return Qo($a(e,t),1)},yo.flatMapDeep=function(e,t){return Qo($a(e,t),O)},yo.flatMapDepth=function(e,t,r){return r=r===i?1:Ws(r),Qo($a(e,t),r)},yo.flatten=ba,yo.flattenDeep=function(e){return null!=e&&e.length?Qo(e,O):[]},yo.flattenDepth=function(e,t){return null!=e&&e.length?Qo(e,t=t===i?1:Ws(t)):[]},yo.flip=function(e){return Ri(e,w)},yo.flow=Cl,yo.flowRight=Il,yo.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,o={};++t<r;){var n=e[t];o[n[0]]=n[1]}return o},yo.functions=function(e){return null==e?[]:$o(e,al(e))},yo.functionsIn=function(e){return null==e?[]:$o(e,sl(e))},yo.groupBy=Ha,yo.initial=function(e){return null!=e&&e.length?Bn(e,0,-1):[]},yo.intersection=Ta,yo.intersectionBy=Ea,yo.intersectionWith=Na,yo.invert=ol,yo.invertBy=nl,yo.invokeMap=Ya,yo.iteratee=Ol,yo.keyBy=Xa,yo.keys=al,yo.keysIn=sl,yo.map=$a,yo.mapKeys=function(e,t){var r={};return t=Ui(t,3),Yo(e,function(e,o,n){Do(r,t(e,o,n),e)}),r},yo.mapValues=function(e,t){var r={};return t=Ui(t,3),Yo(e,function(e,o,n){Do(r,o,t(e,o,n))}),r},yo.matches=function(e){return _n(Fo(e,g))},yo.matchesProperty=function(e,t){return mn(e,Fo(t,g))},yo.memoize=cs,yo.merge=ll,yo.mergeWith=cl,yo.method=Bl,yo.methodOf=Dl,yo.mixin=Ll,yo.negate=us,yo.nthArg=function(e){return e=Ws(e),An(function(t){return bn(t,e)})},yo.omit=ul,yo.omitBy=function(e,t){return gl(e,us(Ui(t)))},yo.once=function(e){return os(2,e)},yo.orderBy=function(e,t,r,o){return null==e?[]:(vs(t)||(t=null==t?[]:[t]),vs(r=o?i:r)||(r=null==r?[]:[r]),Sn(e,t,r))},yo.over=Fl,yo.overArgs=fs,yo.overEvery=Ul,yo.overSome=jl,yo.partial=gs,yo.partialRight=ps,yo.partition=Za,yo.pick=fl,yo.pickBy=gl,yo.property=ql,yo.propertyOf=function(e){return function(t){return null==e?i:Zo(e,t)}},yo.pull=wa,yo.pullAll=Aa,yo.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?En(e,t,Ui(r,2)):e},yo.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?En(e,t,i,r):e},yo.pullAt=Ra,yo.range=Kl,yo.rangeRight=Wl,yo.rearg=hs,yo.reject=function(e,t){return(vs(e)?Zt:zo)(e,us(Ui(t,3)))},yo.remove=function(e,t){var r=[];if(!e||!e.length)return r;var o=-1,n=[],i=e.length;for(t=Ui(t,3);++o<i;){var a=e[o];t(a,o,e)&&(r.push(a),n.push(o))}return Nn(e,n),r},yo.rest=function(e,t){if("function"!=typeof e)throw new it(l);return An(e,t=t===i?t:Ws(t))},yo.reverse=Pa,yo.sampleSize=function(e,t,r){return t=(r?Yi(e,t,r):t===i)?1:Ws(t),(vs(e)?Ro:Pn)(e,t)},yo.set=function(e,t,r){return null==e?e:Cn(e,t,r)},yo.setWith=function(e,t,r,o){return o="function"==typeof o?o:i,null==e?e:Cn(e,t,r,o)},yo.shuffle=function(e){return(vs(e)?Po:On)(e)},yo.slice=function(e,t,r){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&Yi(e,t,r)?(t=0,r=o):(t=null==t?0:Ws(t),r=r===i?o:Ws(r)),Bn(e,t,r)):[]},yo.sortBy=es,yo.sortedUniq=function(e){return e&&e.length?Fn(e):[]},yo.sortedUniqBy=function(e,t){return e&&e.length?Fn(e,Ui(t,2)):[]},yo.split=function(e,t,r){return r&&"number"!=typeof r&&Yi(e,t,r)&&(t=r=i),(r=r===i?M:r>>>0)?(e=Qs(e))&&("string"==typeof t||null!=t&&!Bs(t))&&!(t=jn(t))&&Ar(e)?$n(Br(e),0,r):e.split(t,r):[]},yo.spread=function(e,t){if("function"!=typeof e)throw new it(l);return t=null==t?0:Qr(Ws(t),0),An(function(r){var o=r[t],n=$n(r,0,t);return o&&or(n,o),Jt(e,this,n)})},yo.tail=function(e){var t=null==e?0:e.length;return t?Bn(e,1,t):[]},yo.take=function(e,t,r){return e&&e.length?Bn(e,0,(t=r||t===i?1:Ws(t))<0?0:t):[]},yo.takeRight=function(e,t,r){var o=null==e?0:e.length;return o?Bn(e,(t=o-(t=r||t===i?1:Ws(t)))<0?0:t,o):[]},yo.takeRightWhile=function(e,t){return e&&e.length?Vn(e,Ui(t,3),!1,!0):[]},yo.takeWhile=function(e,t){return e&&e.length?Vn(e,Ui(t,3)):[]},yo.tap=function(e,t){return t(e),e},yo.throttle=function(e,t,r){var o=!0,n=!0;if("function"!=typeof e)throw new it(l);return Ps(r)&&(o="leading"in r?!!r.leading:o,n="trailing"in r?!!r.trailing:n),as(e,t,{leading:o,maxWait:t,trailing:n})},yo.thru=Ka,yo.toArray=qs,yo.toPairs=pl,yo.toPairsIn=hl,yo.toPath=function(e){return vs(e)?rr(e,ga):Ms(e)?[e]:ai(fa(Qs(e)))},yo.toPlainObject=zs,yo.transform=function(e,t,r){var o=vs(e),n=o||Es(e)||Fs(e);if(t=Ui(t,4),null==r){var i=e&&e.constructor;r=n?o?new i:[]:Ps(e)&&ws(i)?_o(kt(e)):{}}return(n?Yt:Yo)(e,function(e,o,n){return t(r,e,o,n)}),r},yo.unary=function(e){return rs(e,1)},yo.union=Ca,yo.unionBy=Ia,yo.unionWith=ka,yo.uniq=function(e){return e&&e.length?qn(e):[]},yo.uniqBy=function(e,t){return e&&e.length?qn(e,Ui(t,2)):[]},yo.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?qn(e,i,t):[]},yo.unset=function(e,t){return null==e||Kn(e,t)},yo.unzip=Oa,yo.unzipWith=Ba,yo.update=function(e,t,r){return null==e?e:Wn(e,t,Hn(r))},yo.updateWith=function(e,t,r,o){return o="function"==typeof o?o:i,null==e?e:Wn(e,t,Hn(r),o)},yo.values=dl,yo.valuesIn=function(e){return null==e?[]:br(e,sl(e))},yo.without=Da,yo.words=wl,yo.wrap=function(e,t){return gs(Hn(t),e)},yo.xor=La,yo.xorBy=Ma,yo.xorWith=Fa,yo.zip=Ua,yo.zipObject=function(e,t){return Qn(e||[],t||[],Io)},yo.zipObjectDeep=function(e,t){return Qn(e||[],t||[],Cn)},yo.zipWith=ja,yo.entries=pl,yo.entriesIn=hl,yo.extend=Hs,yo.extendWith=Ys,Ll(yo,yo),yo.add=zl,yo.attempt=Al,yo.camelCase=yl,yo.capitalize=_l,yo.ceil=Ql,yo.clamp=function(e,t,r){return r===i&&(r=t,t=i),r!==i&&(r=(r=Gs(r))==r?r:0),t!==i&&(t=(t=Gs(t))==t?t:0),Mo(Gs(e),t,r)},yo.clone=function(e){return Fo(e,h)},yo.cloneDeep=function(e){return Fo(e,g|h)},yo.cloneDeepWith=function(e,t){return Fo(e,g|h,t="function"==typeof t?t:i)},yo.cloneWith=function(e,t){return Fo(e,h,t="function"==typeof t?t:i)},yo.conformsTo=function(e,t){return null==t||Uo(e,t,al(t))},yo.deburr=ml,yo.defaultTo=function(e,t){return null==e||e!=e?t:e},yo.divide=Jl,yo.endsWith=function(e,t,r){e=Qs(e),t=jn(t);var o=e.length,n=r=r===i?o:Mo(Ws(r),0,o);return(r-=t.length)>=0&&e.slice(r,n)==t},yo.eq=ds,yo.escape=function(e){return(e=Qs(e))&&xe.test(e)?e.replace(Ee,xr):e},yo.escapeRegExp=function(e){return(e=Qs(e))&&Be.test(e)?e.replace(Oe,"\\\\$&"):e},yo.every=function(e,t,r){var o=vs(e)?$t:Vo;return r&&Yi(e,t,r)&&(t=i),o(e,Ui(t,3))},yo.find=Ga,yo.findIndex=ma,yo.findKey=function(e,t){return lr(e,Ui(t,3),Yo)},yo.findLast=za,yo.findLastIndex=va,yo.findLastKey=function(e,t){return lr(e,Ui(t,3),Xo)},yo.floor=Hl,yo.forEach=Qa,yo.forEachRight=Ja,yo.forIn=function(e,t){return null==e?e:Jo(e,Ui(t,3),sl)},yo.forInRight=function(e,t){return null==e?e:Ho(e,Ui(t,3),sl)},yo.forOwn=function(e,t){return e&&Yo(e,Ui(t,3))},yo.forOwnRight=function(e,t){return e&&Xo(e,Ui(t,3))},yo.get=tl,yo.gt=ys,yo.gte=_s,yo.has=function(e,t){return null!=e&&zi(e,t,on)},yo.hasIn=rl,yo.head=Sa,yo.identity=kl,yo.includes=function(e,t,r,o){e=Ss(e)?e:dl(e),r=r&&!o?Ws(r):0;var n=e.length;return r<0&&(r=Qr(n+r,0)),Ls(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&ur(e,t,r)>-1},yo.indexOf=function(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var n=null==r?0:Ws(r);return n<0&&(n=Qr(o+n,0)),ur(e,t,n)},yo.inRange=function(e,t,r){return t=Ks(t),r===i?(r=t,t=0):r=Ks(r),function(e,t,r){return e>=Jr(t,r)&&e<Qr(t,r)}(e=Gs(e),t,r)},yo.invoke=il,yo.isArguments=ms,yo.isArray=vs,yo.isArrayBuffer=bs,yo.isArrayLike=Ss,yo.isArrayLikeObject=Ts,yo.isBoolean=function(e){return!0===e||!1===e||Cs(e)&&tn(e)==V},yo.isBuffer=Es,yo.isDate=Ns,yo.isElement=function(e){return Cs(e)&&1===e.nodeType&&!Os(e)},yo.isEmpty=function(e){if(null==e)return!0;if(Ss(e)&&(vs(e)||"string"==typeof e||"function"==typeof e.splice||Es(e)||Fs(e)||ms(e)))return!e.length;var t=Gi(e);if(t==Y||t==re)return!e.size;if(ea(e))return!pn(e).length;for(var r in e)if(ft.call(e,r))return!1;return!0},yo.isEqual=function(e,t){return cn(e,t)},yo.isEqualWith=function(e,t,r){var o=(r="function"==typeof r?r:i)?r(e,t):i;return o===i?cn(e,t,i,r):!!o},yo.isError=xs,yo.isFinite=function(e){return"number"==typeof e&&Vr(e)},yo.isFunction=ws,yo.isInteger=As,yo.isLength=Rs,yo.isMap=Is,yo.isMatch=function(e,t){return e===t||un(e,t,qi(t))},yo.isMatchWith=function(e,t,r){return r="function"==typeof r?r:i,un(e,t,qi(t),r)},yo.isNaN=function(e){return ks(e)&&e!=+e},yo.isNative=function(e){if(Zi(e))throw new Ze(s);return fn(e)},yo.isNil=function(e){return null==e},yo.isNull=function(e){return null===e},yo.isNumber=ks,yo.isObject=Ps,yo.isObjectLike=Cs,yo.isPlainObject=Os,yo.isRegExp=Bs,yo.isSafeInteger=function(e){return As(e)&&e>=-B&&e<=B},yo.isSet=Ds,yo.isString=Ls,yo.isSymbol=Ms,yo.isTypedArray=Fs,yo.isUndefined=function(e){return e===i},yo.isWeakMap=function(e){return Cs(e)&&Gi(e)==ae},yo.isWeakSet=function(e){return Cs(e)&&tn(e)==se},yo.join=function(e,t){return null==e?"":Gr.call(e,t)},yo.kebabCase=vl,yo.last=xa,yo.lastIndexOf=function(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var n=o;return r!==i&&(n=(n=Ws(r))<0?Qr(o+n,0):Jr(n,o-1)),t==t?function(e,t,r){for(var o=r+1;o--;)if(e[o]===t)return o;return o}(e,t,n):cr(e,gr,n,!0)},yo.lowerCase=bl,yo.lowerFirst=Sl,yo.lt=Us,yo.lte=js,yo.max=function(e){return e&&e.length?Go(e,kl,rn):i},yo.maxBy=function(e,t){return e&&e.length?Go(e,Ui(t,2),rn):i},yo.mean=function(e){return pr(e,kl)},yo.meanBy=function(e,t){return pr(e,Ui(t,2))},yo.min=function(e){return e&&e.length?Go(e,kl,dn):i},yo.minBy=function(e,t){return e&&e.length?Go(e,Ui(t,2),dn):i},yo.stubArray=Vl,yo.stubFalse=Gl,yo.stubObject=function(){return{}},yo.stubString=function(){return""},yo.stubTrue=function(){return!0},yo.multiply=Xl,yo.nth=function(e,t){return e&&e.length?bn(e,Ws(t)):i},yo.noConflict=function(){return Bt._===this&&(Bt._=yt),this},yo.noop=Ml,yo.now=ts,yo.pad=function(e,t,r){e=Qs(e);var o=(t=Ws(t))?Or(e):0;if(!t||o>=t)return e;var n=(t-o)/2;return Si(qr(n),r)+e+Si(jr(n),r)},yo.padEnd=function(e,t,r){e=Qs(e);var o=(t=Ws(t))?Or(e):0;return t&&o<t?e+Si(t-o,r):e},yo.padStart=function(e,t,r){e=Qs(e);var o=(t=Ws(t))?Or(e):0;return t&&o<t?Si(t-o,r)+e:e},yo.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),Yr(Qs(e).replace(Le,""),t||0)},yo.random=function(e,t,r){if(r&&"boolean"!=typeof r&&Yi(e,t,r)&&(t=r=i),r===i&&("boolean"==typeof t?(r=t,t=i):"boolean"==typeof e&&(r=e,e=i)),e===i&&t===i?(e=0,t=1):(e=Ks(e),t===i?(t=e,e=0):t=Ks(t)),e>t){var o=e;e=t,t=o}if(r||e%1||t%1){var n=Xr();return Jr(e+n*(t-e+Ct("1e-"+((n+"").length-1))),t)}return xn(e,t)},yo.reduce=function(e,t,r){var o=vs(e)?nr:yr,n=arguments.length<3;return o(e,Ui(t,4),r,n,Ko)},yo.reduceRight=function(e,t,r){var o=vs(e)?ir:yr,n=arguments.length<3;return o(e,Ui(t,4),r,n,Wo)},yo.repeat=function(e,t,r){return t=(r?Yi(e,t,r):t===i)?1:Ws(t),wn(Qs(e),t)},yo.replace=function(){var e=arguments,t=Qs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},yo.result=function(e,t,r){var o=-1,n=(t=Yn(t,e)).length;for(n||(n=1,e=i);++o<n;){var a=null==e?i:e[ga(t[o])];a===i&&(o=n,a=r),e=ws(a)?a.call(e):a}return e},yo.round=$l,yo.runInContext=e,yo.sample=function(e){return(vs(e)?Ao:Rn)(e)},yo.size=function(e){if(null==e)return 0;if(Ss(e))return Ls(e)?Or(e):e.length;var t=Gi(e);return t==Y||t==re?e.size:pn(e).length},yo.snakeCase=Tl,yo.some=function(e,t,r){var o=vs(e)?ar:Dn;return r&&Yi(e,t,r)&&(t=i),o(e,Ui(t,3))},yo.sortedIndex=function(e,t){return Ln(e,t)},yo.sortedIndexBy=function(e,t,r){return Mn(e,t,Ui(r,2))},yo.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var o=Ln(e,t);if(o<r&&ds(e[o],t))return o}return-1},yo.sortedLastIndex=function(e,t){return Ln(e,t,!0)},yo.sortedLastIndexBy=function(e,t,r){return Mn(e,t,Ui(r,2),!0)},yo.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=Ln(e,t,!0)-1;if(ds(e[r],t))return r}return-1},yo.startCase=El,yo.startsWith=function(e,t,r){return e=Qs(e),r=null==r?0:Mo(Ws(r),0,e.length),t=jn(t),e.slice(r,r+t.length)==t},yo.subtract=Zl,yo.sum=function(e){return e&&e.length?_r(e,kl):0},yo.sumBy=function(e,t){return e&&e.length?_r(e,Ui(t,2)):0},yo.template=function(e,t,r){var o=yo.templateSettings;r&&Yi(e,t,r)&&(t=i),e=Qs(e),t=Ys({},t,o,Pi);var n,a,s=Ys({},t.imports,o.imports,Pi),l=al(s),c=br(s,l),u=0,f=t.interpolate||Xe,g="__p += \'",p=ot((t.escape||Xe).source+"|"+f.source+"|"+(f===Re?We:Xe).source+"|"+(t.evaluate||Xe).source+"|$","g"),h="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++wt+"]")+"\\n";e.replace(p,function(t,r,o,i,s,l){return o||(o=i),g+=e.slice(u,l).replace($e,wr),r&&(n=!0,g+="\' +\\n__e("+r+") +\\n\'"),s&&(a=!0,g+="\';\\n"+s+";\\n__p += \'"),o&&(g+="\' +\\n((__t = ("+o+")) == null ? \'\' : __t) +\\n\'"),u=l+t.length,t}),g+="\';\\n";var d=t.variable;d||(g="with (obj) {\\n"+g+"\\n}\\n"),g=(a?g.replace(ve,""):g).replace(be,"$1").replace(Se,"$1;"),g="function("+(d||"obj")+") {\\n"+(d?"":"obj || (obj = {});\\n")+"var __t, __p = \'\'"+(n?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\\nfunction print() { __p += __j.call(arguments, \'\') }\\n":";\\n")+g+"return __p\\n}";var y=Al(function(){return et(l,h+"return "+g).apply(i,c)});if(y.source=g,xs(y))throw y;return y},yo.times=function(e,t){if((e=Ws(e))<1||e>B)return[];var r=M,o=Jr(e,M);t=Ui(t),e-=M;for(var n=mr(o,t);++r<e;)t(r);return n},yo.toFinite=Ks,yo.toInteger=Ws,yo.toLength=Vs,yo.toLower=function(e){return Qs(e).toLowerCase()},yo.toNumber=Gs,yo.toSafeInteger=function(e){return e?Mo(Ws(e),-B,B):0===e?e:0},yo.toString=Qs,yo.toUpper=function(e){return Qs(e).toUpperCase()},yo.trim=function(e,t,r){if((e=Qs(e))&&(r||t===i))return e.replace(De,"");if(!e||!(t=jn(t)))return e;var o=Br(e),n=Br(t);return $n(o,Tr(o,n),Er(o,n)+1).join("")},yo.trimEnd=function(e,t,r){if((e=Qs(e))&&(r||t===i))return e.replace(Me,"");if(!e||!(t=jn(t)))return e;var o=Br(e);return $n(o,0,Er(o,Br(t))+1).join("")},yo.trimStart=function(e,t,r){if((e=Qs(e))&&(r||t===i))return e.replace(Le,"");if(!e||!(t=jn(t)))return e;var o=Br(e);return $n(o,Tr(o,Br(t))).join("")},yo.truncate=function(e,t){var r=A,o=R;if(Ps(t)){var n="separator"in t?t.separator:n;r="length"in t?Ws(t.length):r,o="omission"in t?jn(t.omission):o}var a=(e=Qs(e)).length;if(Ar(e)){var s=Br(e);a=s.length}if(r>=a)return e;var l=r-Or(o);if(l<1)return o;var c=s?$n(s,0,l).join(""):e.slice(0,l);if(n===i)return c+o;if(s&&(l+=c.length-l),Bs(n)){if(e.slice(l).search(n)){var u,f=c;for(n.global||(n=ot(n.source,Qs(Ve.exec(n))+"g")),n.lastIndex=0;u=n.exec(f);)var g=u.index;c=c.slice(0,g===i?l:g)}}else if(e.indexOf(jn(n),l)!=l){var p=c.lastIndexOf(n);p>-1&&(c=c.slice(0,p))}return c+o},yo.unescape=function(e){return(e=Qs(e))&&Ne.test(e)?e.replace(Te,Dr):e},yo.uniqueId=function(e){var t=++gt;return Qs(e)+t},yo.upperCase=Nl,yo.upperFirst=xl,yo.each=Qa,yo.eachRight=Ja,yo.first=Sa,Ll(yo,(Yl={},Yo(yo,function(e,t){ft.call(yo.prototype,t)||(Yl[t]=e)}),Yl),{chain:!1}),yo.VERSION="4.17.4",Yt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){yo[e].placeholder=yo}),Yt(["drop","take"],function(e,t){bo.prototype[e]=function(r){r=r===i?1:Qr(Ws(r),0);var o=this.__filtered__&&!t?new bo(this):this.clone();return o.__filtered__?o.__takeCount__=Jr(r,o.__takeCount__):o.__views__.push({size:Jr(r,M),type:e+(o.__dir__<0?"Right":"")}),o},bo.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Yt(["filter","map","takeWhile"],function(e,t){var r=t+1,o=r==I||3==r;bo.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ui(e,3),type:r}),t.__filtered__=t.__filtered__||o,t}}),Yt(["head","last"],function(e,t){var r="take"+(t?"Right":"");bo.prototype[e]=function(){return this[r](1).value()[0]}}),Yt(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");bo.prototype[e]=function(){return this.__filtered__?new bo(this):this[r](1)}}),bo.prototype.compact=function(){return this.filter(kl)},bo.prototype.find=function(e){return this.filter(e).head()},bo.prototype.findLast=function(e){return this.reverse().find(e)},bo.prototype.invokeMap=An(function(e,t){return"function"==typeof e?new bo(this):this.map(function(r){return sn(r,e,t)})}),bo.prototype.reject=function(e){return this.filter(us(Ui(e)))},bo.prototype.slice=function(e,t){e=Ws(e);var r=this;return r.__filtered__&&(e>0||t<0)?new bo(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==i&&(r=(t=Ws(t))<0?r.dropRight(-t):r.take(t-e)),r)},bo.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},bo.prototype.toArray=function(){return this.take(M)},Yo(bo.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),n=yo[o?"take"+("last"==t?"Right":""):t],a=o||/^find/.test(t);n&&(yo.prototype[t]=function(){var t=this.__wrapped__,s=o?[1]:arguments,l=t instanceof bo,c=s[0],u=l||vs(t),f=function(e){var t=n.apply(yo,or([e],s));return o&&g?t[0]:t};u&&r&&"function"==typeof c&&1!=c.length&&(l=u=!1);var g=this.__chain__,p=!!this.__actions__.length,h=a&&!g,d=l&&!p;if(!a&&u){t=d?t:new bo(this);var y=e.apply(t,s);return y.__actions__.push({func:Ka,args:[f],thisArg:i}),new vo(y,g)}return h&&d?e.apply(this,s):(y=this.thru(f),h?o?y.value()[0]:y.value():y)})}),Yt(["pop","push","shift","sort","splice","unshift"],function(e){var t=at[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);yo.prototype[e]=function(){var e=arguments;if(o&&!this.__chain__){var n=this.value();return t.apply(vs(n)?n:[],e)}return this[r](function(r){return t.apply(vs(r)?r:[],e)})}}),Yo(bo.prototype,function(e,t){var r=yo[t];if(r){var o=r.name+"";(ao[o]||(ao[o]=[])).push({name:t,func:r})}}),ao[_i(i,m).name]=[{name:"wrapper",func:i}],bo.prototype.clone=function(){var e=new bo(this.__wrapped__);return e.__actions__=ai(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ai(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ai(this.__views__),e},bo.prototype.reverse=function(){if(this.__filtered__){var e=new bo(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},bo.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=vs(e),o=t<0,n=r?e.length:0,i=function(e,t,r){for(var o=-1,n=r.length;++o<n;){var i=r[o],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Jr(t,e+a);break;case"takeRight":e=Qr(e,t-a)}}return{start:e,end:t}}(0,n,this.__views__),a=i.start,s=i.end,l=s-a,c=o?s:a-1,u=this.__iteratees__,f=u.length,g=0,p=Jr(l,this.__takeCount__);if(!r||!o&&n==l&&p==l)return Gn(e,this.__actions__);var h=[];e:for(;l--&&g<p;){for(var d=-1,y=e[c+=t];++d<f;){var _=u[d],m=_.iteratee,v=_.type,b=m(y);if(v==k)y=b;else if(!b){if(v==I)continue e;break e}}h[g++]=y}return h},yo.prototype.at=Wa,yo.prototype.chain=function(){return qa(this)},yo.prototype.commit=function(){return new vo(this.value(),this.__chain__)},yo.prototype.next=function(){this.__values__===i&&(this.__values__=qs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},yo.prototype.plant=function(e){for(var t,r=this;r instanceof mo;){var o=ha(r);o.__index__=0,o.__values__=i,t?n.__wrapped__=o:t=o;var n=o;r=r.__wrapped__}return n.__wrapped__=e,t},yo.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof bo){var t=e;return this.__actions__.length&&(t=new bo(this)),(t=t.reverse()).__actions__.push({func:Ka,args:[Pa],thisArg:i}),new vo(t,this.__chain__)}return this.thru(Pa)},yo.prototype.toJSON=yo.prototype.valueOf=yo.prototype.value=function(){return Gn(this.__wrapped__,this.__actions__)},yo.prototype.first=yo.prototype.head,Ut&&(yo.prototype[Ut]=function(){return this}),yo}();Bt._=Lr,(n=function(){return Lr}.call(t,r,t,o))===i||(o.exports=n)}).call(this)}).call(this,r("yLpjYHve"),r("YuTiLZs6")(e))},M67Xxkkf:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("OwKBVfwt");o.Observable.prototype.scan=n.scan},M6Qjclun:function(e,t,r){var o=r("hPIQAJUg"),n=r("K0xUtE8J")("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||i[n]===e)}},Mbtw4ANu:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contains=function(e,t){return t instanceof Set||t instanceof Map?t.has(e):t.indexOf(e)>-1}},MukbbRF2:function(e,t,r){var o=r("hswaSTrv"),n=r("RjD/ZGJI");e.exports=r("nh4gaiGV")?function(e,t,r){return o.f(e,t,n(1,r))}:function(e,t,r){return e[t]=r,e}},N8g3kmGx:function(e,t,r){t.f=r("K0xUtE8J")},NTzudah4:function(e,t,r){"use strict";var o=r("luwtdXCP"),n=r("rkVwUF8t"),i=r("xqEhgZH1"),a=r("PBwOJWhM"),s=r("s4BYIvw4"),l=r("1R9wsEXu"),c=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this._parent,c=this._parents,f=this._unsubscribe,g=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,h=c?c.length:0;r;)r.remove(this),r=++p<h&&c[p]||null;if(i.isFunction(f))a.tryCatch(f).call(this)===s.errorObject&&(t=!0,e=e||(s.errorObject.e instanceof l.UnsubscriptionError?u(s.errorObject.e.errors):[s.errorObject.e]));if(o.isArray(g))for(p=-1,h=g.length;++p<h;){var d=g[p];if(n.isObject(d))if(a.tryCatch(d.unsubscribe).call(d)===s.errorObject){t=!0,e=e||[];var y=s.errorObject.e;y instanceof l.UnsubscriptionError?e=e.concat(u(y.errors)):e.push(y)}}if(t)throw new l.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var o=r;(r=new e)._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.prototype._addParent=function(e){var t=this._parent,r=this._parents;t&&t!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=((t=new e).closed=!0,t),e}();function u(e){return e.reduce(function(e,t){return e.concat(t instanceof l.UnsubscriptionError?t.errors:t)},[])}t.Subscription=c},NVK113Rt:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9");t.map=function(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new i(e,t))}};var i=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}();t.MapOperator=i;var a=function(e){function t(t,r,o){e.call(this,t),this.project=r,this.count=0,this.thisArg=o||this}return o(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)},t}(n.Subscriber)},Ndu5g8yF:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9"),i=r("i2FkeMGK");t.observeOn=function(e,t){return void 0===t&&(t=0),function(r){return r.lift(new a(e,t))}};var a=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=a;var s=function(e){function t(t,r,o){void 0===o&&(o=0),e.call(this,t),this.scheduler=r,this.delay=o}return o(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new l(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(i.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(i.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(i.Notification.createComplete())},t}(n.Subscriber);t.ObserveOnSubscriber=s;var l=function(){return function(e,t){this.notification=e,this.destination=t}}();t.ObserveOnMessage=l},NeSJOS89:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryCatch=function(e){var t=this;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];try{return[e.apply(t,r),null]}catch(n){return[null,n]}}}},Nv52qpEa:function(e,t){var r=9007199254740991,o="[object Arguments]",n="[object Function]",i="[object GeneratorFunction]",a=/^(?:0|[1-9]\\d*)$/;var s,l,c=Object.prototype,u=c.hasOwnProperty,f=c.toString,g=c.propertyIsEnumerable,p=(s=Object.keys,l=Object,function(e){return s(l(e))});function h(e,t){var r=_(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&m(e)}(e)&&u.call(e,"callee")&&(!g.call(e,"callee")||f.call(e)==o)}(e)?function(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o}(e.length,String):[],n=r.length,i=!!n;for(var a in e)!t&&!u.call(e,a)||i&&("length"==a||y(a,n))||r.push(a);return r}function d(e){if(r=(t=e)&&t.constructor,o="function"==typeof r&&r.prototype||c,t!==o)return p(e);var t,r,o,n=[];for(var i in Object(e))u.call(e,i)&&"constructor"!=i&&n.push(i);return n}function y(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||a.test(e))&&e>-1&&e%1==0&&e<t}var _=Array.isArray;function m(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?f.call(e):"";return t==n||t==i}(e)}e.exports=function(e){return m(e)?h(e):d(e)}},OA6Iqxq6:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("GuQ8QGQj");o.Observable.prototype.mergeMap=n.mergeMap,o.Observable.prototype.flatMap=n.mergeMap},OAeUKeET:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("rRE7ETfd"),i=r("z6YPpxqM"),a=r("XlJgMqu5");t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=Number.POSITIVE_INFINITY,s=null,l=e[e.length-1];return i.isScheduler(l)?(s=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof l&&(r=e.pop()),null===s&&1===e.length&&e[0]instanceof o.Observable?e[0]:a.mergeAll(r)(new n.ArrayObservable(e,s))}},OP3Ybgno:function(e,t,r){var o=r("aagx5GNa"),n=r("S/j/IM3X"),i=r("YTvAncny")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=n(e),o(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},OnI7boEN:function(e,t,r){var o=r("dyZXAqyT"),n=r("g3g5MAGG"),i=r("LQAcWje+"),a=r("N8g3kmGx"),s=r("hswaSTrv").f;e.exports=function(e){var t=n.Symbol||(n.Symbol=i?{}:o.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},OwKBVfwt:function(e,t,r){"use strict";var o=r("B5Uge+x3");t.scan=function(e,t){return arguments.length>=2?o.scan(e,t)(this):o.scan(e)(this)}},PBwOJWhM:function(e,t,r){"use strict";var o,n=r("s4BYIvw4");function i(){try{return o.apply(this,arguments)}catch(e){return n.errorObject.e=e,n.errorObject}}t.tryCatch=function(e){return o=e,i}},PIcZKVs2:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(t,r){e.call(this),this.value=t,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return o(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.done,r=e.value,o=e.subscriber;t?o.complete():(o.next(r),o.closed||(e.done=!0,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.value,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{done:!1,value:r,subscriber:e});e.next(r),e.closed||e.complete()},t}(r("4c1CS0b3").Observable);t.ScalarObservable=n},PPEettaf:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r("ZiWuABAJ"),r("7uu2VGkf"),r("K4wuF8rN"),r("neMAwlMA"),r("DrjoHopv")},Q5ARUZxk:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(t,r){e.call(this),this.error=t,this.scheduler=r}return o(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.error;e.subscriber.error(t)},t.prototype._subscribe=function(e){var r=this.error,o=this.scheduler;if(e.syncErrorThrowable=!0,o)return o.schedule(t.dispatch,0,{error:r,subscriber:e});e.error(r)},t}(r("4c1CS0b3").Observable);t.ErrorObservable=n},QaDbgE37:function(e,t,r){"use strict";var o=r("Kuthha03"),n=r("RjD/ZGJI"),i=r("fyDq9XZ+"),a={};r("MukbbRF2")(a,r("K0xUtE8J")("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=o(a,{next:n(1,r)}),i(e,t+" Iterator")}},QnJ9uIvA:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),void 0!==e&&(e.self||(e.self=e),e.location||(e.location=Object.create(null)))}).call(this,r("yLpjYHve"))},Qros3QnH:function(e,t,r){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},"R0YvpVk+":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.context="#",t.contextTableName=function(e,r){return""+e+t.context+r}},RYi7EyyQ:function(e,t){var r=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},RcwyJjal:function(e,t,r){"use strict";var o=r("XlJgMqu5");t.concatAll=function(){return o.mergeAll(1)}},"RjD/ZGJI":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},Rkh20UyL:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("tSehy8ip"),i=function(e){function t(t,r){e.call(this),this.promise=t,this.scheduler=r}return o(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t=this,r=this.promise,o=this.scheduler;if(null==o)this._isScalar?e.closed||(e.next(this.value),e.complete()):r.then(function(r){t.value=r,t._isScalar=!0,e.closed||(e.next(r),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(e){n.root.setTimeout(function(){throw e})});else if(this._isScalar){if(!e.closed)return o.schedule(a,0,{value:this.value,subscriber:e})}else r.then(function(r){t.value=r,t._isScalar=!0,e.closed||e.add(o.schedule(a,0,{value:r,subscriber:e}))},function(t){e.closed||e.add(o.schedule(s,0,{err:t,subscriber:e}))}).then(null,function(e){n.root.setTimeout(function(){throw e})})},t}(r("4c1CS0b3").Observable);function a(e){var t=e.value,r=e.subscriber;r.closed||(r.next(t),r.complete())}function s(e){var t=e.err,r=e.subscriber;r.closed||r.error(t)}t.PromiseObservable=i},"S/j/IM3X":function(e,t,r){var o=r("vhPUF841");e.exports=function(e){return Object(o(e))}},SUh3uWYz:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(t){e.call(this),this.scheduler=t}return o(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){e.subscriber.complete()},t.prototype._subscribe=function(e){var r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{subscriber:e});e.complete()},t}(r("4c1CS0b3").Observable);t.EmptyObservable=n},SlkYKCVx:function(e,t,r){var o=r("m0Pp8OTl"),n=r("H6hfpV+r"),i=r("M6Qjclun"),a=r("y3w9bphm"),s=r("ne8iVkqJ"),l=r("J+6eTXW2"),c={},u={};(t=e.exports=function(e,t,r,f,g){var p,h,d,y,_=g?function(){return e}:l(e),m=o(r,f,t?2:1),v=0;if("function"!=typeof _)throw TypeError(e+" is not iterable!");if(i(_)){for(p=s(e.length);p>v;v++)if((y=t?m(a(h=e[v])[0],h[1]):m(e[v]))===c||y===u)return y}else for(d=_.call(e);!(h=d.next()).done;)if((y=n(d,m,h.value,t))===c||y===u)return y}).BREAK=c,t.RETURN=u},T39bHvfn:function(e,t,r){"use strict";var o=r("wmvG3xga"),n=r("s5qYcagS");e.exports=r("4LiDeglH")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return o.def(n(this,"Set"),e=0===e?0:e,e)}},o)},T3prb3wx:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("OAeUKeET");o.Observable.merge=n.merge},T5HjItxe:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("GaSbzOnp"),n=r("VtYuyi7W");t.ContextLogger=n.ContextLogger,t.Level=n.Level,t.Logger=n.Logger,o.__exportStar(r("p7PDwGED"),t)},U9Ham2Lb:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("+J1YLSRB");t.RDBType=o.RDBType,t.Relationship=o.Relationship,t.LeafType=o.LeafType,t.StatementType=o.StatementType,t.JoinMode=o.JoinMode,t.DataStoreType=o.DataStoreType},UqcFofGq:function(e,t){t.f={}.propertyIsEnumerable},V9SPQ2of:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9"),i=r("5PNMwb2Z"),a=r("SUh3uWYz");t.takeLast=function(e){return function(t){return 0===e?new a.EmptyObservable:t.lift(new s(e))}};var s=function(){function e(e){if(this.total=e,this.total<0)throw new i.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.total))},e}(),l=function(e){function t(t,r){e.call(this,t),this.total=r,this.ring=new Array,this.count=0}return o(t,e),t.prototype._next=function(e){var t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var r=this.count>=this.total?this.total:this.count,o=this.ring,n=0;n<r;n++){var i=t++%r;e.next(o[i])}e.complete()},t}(n.Subscriber)},VTer505i:function(e,t,r){var o=r("g3g5MAGG"),n=r("dyZXAqyT"),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:o.version,mode:r("LQAcWje+")?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},VXxgOQI1:function(e,t,r){r("BtvtXq+c"),r("XfO3KJfl"),r("rGqokKvT"),r("T39bHvfn"),e.exports=r("g3g5MAGG").Set},VnRQYvuk:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("GaSbzOnp"),n=function(e){function t(r){var o=e.call(this,r)||this;return o.name="ReactiveDBError",Object.setPrototypeOf(o,t.prototype),o}return o.__extends(t,e),t}(Error);t.ReactiveDBException=n},VpWK6D1a:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return o(t,e),t}(Error);t.ObjectUnsubscribedError=n},VtYuyi7W:function(e,t,r){"use strict";(function(e){var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.debug=10]="debug",e[e.info=20]="info",e[e.warning=30]="warning",e[e.error=40]="error",e[e.test=1e3]="test"}(r=t.Level||(t.Level={}));var o=function(){function e(e,t,r,o){void 0===o&&(o=console),this.name=e,this.level=t,this.formatter=r,this.adapter=o,this.destroy=function(){},this.effects=new Map}return e.prototype.invoke=function(e,t){var r="";if(this.formatter){var o=[this.name,this.level].concat(t);r=this.formatter.apply(this,o)}this.adapter[e].call(this.adapter,r),(this.effects.get(e)||[]).forEach(function(e){return e.apply(void 0,t)})},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.info>=this.level&&this.invoke("info",e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.warning>=this.level&&this.invoke("warn",e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.error>=this.level&&this.invoke("error",e)},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.debug>=this.level&&this.invoke("debug",e)},e.prototype.setLevel=function(e){this.level=e},e.prototype.replaceAdapter=function(e){e!==this.adapter&&(this.adapter=e)},e.prototype.replaceFormatter=function(e){e!==this.formatter&&(this.formatter=e)},e.prototype.effect=function(e,t){if(this.effects.has(e)){var r=this.effects.get(e);r.every(function(e){return e!==t})&&r.push(t)}else this.effects.set(e,[t])},e.prototype.clearEffects=function(){this.effects.clear()},e}();t.ContextLogger=o;var n=function(){function e(){}return e.get=function(t,r,n,i){void 0===i&&(i=console);var a=e.contextMap.get(t);if(!a){var s=new o(t,n||e.defaultLevel,r,i);return e.contextMap.set(t,s),s.destroy=function(){e.contextMap.delete(t),s.clearEffects()},s}return a},e.setLevel=function(t){e.outputLogger.setLevel(t)},e.warn=function(){for(var t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];(t=e.outputLogger).warn.apply(t,r)},e.info=function(){for(var t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];(t=e.outputLogger).info.apply(t,r)},e.debug=function(){for(var t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];(t=e.outputLogger).debug.apply(t,r)},e.error=function(){for(var t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];(t=e.outputLogger).error.apply(t,r)},e.contextMap=new Map,e.defaultLevel=r.debug,e.outputLogger=new o("[ReactiveDB]",e.defaultLevel,function(e,t,r){var o=Array.isArray(r)?r.join(""):r;return(e?"["+e+"] ":"")+"at "+(new Date).toLocaleString()+": \\r\\n    "+o}),e}();t.Logger=n;n.setLevel((e&&e.env,r.error))}).call(this,r("8oxByP8V"))},W5LEaZ1S:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("lfTSU3R9");t.dbErrMsg=o;var n=r("XUb7KB3o");t.tokenErrMsg=n;var i=r("VnRQYvuk");t.Exception=i.ReactiveDBException},WFSm3rjW:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identity=function(e){return e}},WdnSUq9g:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("GaSbzOnp");o.__exportStar(r("HhvLnYpC"),t),o.__exportStar(r("gGPOCt/k"),t),o.__exportStar(r("c2UzbEbu"),t),o.__exportStar(r("zohQovrk"),t),o.__exportStar(r("iPvGACis"),t),o.__exportStar(r("kzw1iLML"),t),o.__exportStar(r("Mbtw4ANu"),t),o.__exportStar(r("H6PxbLYg"),t),o.__exportStar(r("WFSm3rjW"),t),o.__exportStar(r("FrTVAacj"),t),o.__exportStar(r("NeSJOS89"),t),o.__exportStar(r("rA5Lr6AX"),t);var n=r("/R2TB7II");t.warn=n.warn},X4Qd2fOp:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("U9Ham2Lb");t.predicatableQuery=function(e,t,r,n){for(var i,a=[],s=4;s<arguments.length;s++)a[s-4]=arguments[s];switch(n){case o.StatementType.Select:i=e.select.apply(e,a).from(t);break;case o.StatementType.Delete:i=e.delete().from(t);break;case o.StatementType.Update:i=e.update(t);break;default:throw TypeError("unreachable code path")}return r?i.where(r):i}},XKFUp60F:function(e,t,r){var o=r("dyZXAqyT"),n=r("g3g5MAGG"),i=r("MukbbRF2"),a=r("KroJtBC/"),s=r("m0Pp8OTl"),l=function(e,t,r){var c,u,f,g,p=e&l.F,h=e&l.G,d=e&l.S,y=e&l.P,_=e&l.B,m=h?o:d?o[t]||(o[t]={}):(o[t]||{}).prototype,v=h?n:n[t]||(n[t]={}),b=v.prototype||(v.prototype={});for(c in h&&(r=t),r)f=((u=!p&&m&&void 0!==m[c])?m:r)[c],g=_&&u?s(f,o):y&&"function"==typeof f?s(Function.call,f):f,m&&a(m,c,f,e&l.U),v[c]!=f&&i(v,c,g),y&&b[c]!=f&&(b[c]=f)};o.core=n,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},XMVhRdiB:function(e,t,r){var o=r("K0xUtE8J")("iterator"),n=!1;try{var i=[7][o]();i.return=function(){n=!0},Array.from(i,function(){throw 2})}catch(a){}e.exports=function(e,t){if(!t&&!n)return!1;var r=!1;try{var i=[7],s=i[o]();s.next=function(){return{done:r=!0}},i[o]=function(){return s},e(i)}catch(a){}return r}},XUb7KB3o:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenConsumed=function(){return"QueryToken was already consumed."},t.TokenConcatFailed=function(e){return"Token cannot be concated"+(e?" due to: "+e:"")+"."}},XVkz5NZY:function(e,t,r){"use strict";var o=r("0PrS9efm");t.filter=function(e,t){return o.filter(e,t)(this)}},Xbziiu0X:function(e,t,r){var o=r("0/R4TaPX"),n=r("i5dc/k9t").set;e.exports=function(e,t,r){var i,a=t.constructor;return a!==r&&"function"==typeof a&&(i=a.prototype)!==r.prototype&&o(i)&&n&&n(e,i),e}},XfO3KJfl:function(e,t,r){"use strict";var o=r("AvREovsz")(!0);r("AfnzePDl")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=o(t,r),this._i+=e.length,{value:e,done:!1})})},XlJgMqu5:function(e,t,r){"use strict";var o=r("ciX6mssW"),n=r("22vdDqAp");t.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),o.mergeMap(n.identity,null,e)}},YNO1Ll7x:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9"),i=r("5PNMwb2Z"),a=r("SUh3uWYz");t.take=function(e){return function(t){return 0===e?new a.EmptyObservable:t.lift(new s(e))}};var s=function(){function e(e){if(this.total=e,this.total<0)throw new i.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.total))},e}(),l=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return o(t,e),t.prototype._next=function(e){var t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))},t}(n.Subscriber)},YTvAncny:function(e,t,r){var o=r("VTer505i")("keys"),n=r("ylqsz2Z8");e.exports=function(e){return o[e]||(o[e]=n(e))}},Ycl6VIOU:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("17JF7D0B"),n=function(e,t,r,n){return t.every(function(e){var t=e.getType(),i=r.getField(e),a=n.getField(e);return t==o.Type.OBJECT||t==o.Type.ARRAY_BUFFER?i===a:this.evalRegistry_.getEvaluator(t,o.eval.Type.EQ)(i,a)},e)};t.aggresiveOptimizer=function(){o.ObserverRegistry.Entry_.prototype.updateResults=function(e){var t=this.lastResults_&&this.lastResults_.entries||[],r=e.entries||[],o=function(e,t,r){if(t.length!==r.length)return!0;for(var o=0;o<t.length;o++)if(!n(e,e.columns_,t[o],r[o]))return!0;return!1}(this.diffCalculator_,t,r);this.lastResults_=e,o&&this.observers_.forEach(function(e){e()})}}},YgBD638s:function(e,t,r){"use strict";var o=r("B5Uge+x3"),n=r("V9SPQ2of"),i=r("Ilo59Jo3"),a=r("4EEHGQK0");t.reduce=function(e,t){return arguments.length>=2?function(r){return a.pipe(o.scan(e,t),n.takeLast(1),i.defaultIfEmpty(t))(r)}:function(t){return a.pipe(o.scan(function(t,r,o){return e(t,r,o+1)}),n.takeLast(1))(t)}}},Ymqvwy7L:function(e,t,r){var o=r("LZWtDVA7");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},YuTiLZs6:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},Z6vFbDPU:function(e,t,r){var o=r("ylqsz2Z8")("meta"),n=r("0/R4TaPX"),i=r("aagx5GNa"),a=r("hswaSTrv").f,s=0,l=Object.isExtensible||function(){return!0},c=!r("eeVqVyzO")(function(){return l(Object.preventExtensions({}))}),u=function(e){a(e,o,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:o,NEED:!1,fastKey:function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,o)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[o].i},getWeak:function(e,t){if(!i(e,o)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[o].w},onFreeze:function(e){return c&&f.NEED&&l(e)&&!i(e,o)&&u(e),e}}},ZJR9rEQs:function(e,t,r){"use strict";t.not=function(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=e,r.thisArg=t,r}},ZiWuABAJ:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("LHr5qcqN");o.Observable.empty=n.empty},ZkF8DeCz:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9"),i=r("i2FkeMGK");t.materialize=function(){return function(e){return e.lift(new a)}};var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t)}return o(t,e),t.prototype._next=function(e){this.destination.next(i.Notification.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(i.Notification.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(i.Notification.createComplete()),e.complete()},t}(n.Subscriber)},"Zu2Al+IQ":function(e,t,r){"use strict";var o=r("fF1eIODs");t.takeUntil=function(e){return o.takeUntil(e)(this)}},aCFjIdzX:function(e,t,r){var o=r("Ymqvwy7L"),n=r("vhPUF841");e.exports=function(e){return o(n(e))}},aagx5GNa:function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},apmTvpNA:function(e,t,r){var o=r("0/R4TaPX");e.exports=function(e,t){if(!o(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!o(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!o(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!o(n=r.call(e)))return n;throw TypeError("Can\'t convert object to primitive value")}},"bfR185/L":function(e,t){var r=9007199254740991,o="[object Arguments]",n="[object Function]",i="[object GeneratorFunction]",a=/^(?:0|[1-9]\\d*)$/;function s(e,t){return function(e,t){for(var r=-1,o=e?e.length:0,n=Array(o);++r<o;)n[r]=t(e[r],r,e);return n}(t,function(t){return e[t]})}var l,c,u=Object.prototype,f=u.hasOwnProperty,g=u.toString,p=u.propertyIsEnumerable,h=(l=Object.keys,c=Object,function(e){return l(c(e))});function d(e,t){var r=m(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&v(e)}(e)&&f.call(e,"callee")&&(!p.call(e,"callee")||g.call(e)==o)}(e)?function(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o}(e.length,String):[],n=r.length,i=!!n;for(var a in e)!t&&!f.call(e,a)||i&&("length"==a||_(a,n))||r.push(a);return r}function y(e){if(r=(t=e)&&t.constructor,o="function"==typeof r&&r.prototype||u,t!==o)return h(e);var t,r,o,n=[];for(var i in Object(e))f.call(e,i)&&"constructor"!=i&&n.push(i);return n}function _(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||a.test(e))&&e>-1&&e%1==0&&e<t}var m=Array.isArray;function v(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?g.call(e):"";return t==n||t==i}(e)}e.exports=function(e){return e?s(e,function(e){return v(e)?d(e):y(e)}(e)):[]}},c2UzbEbu:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("4c1CS0b3"),n=r("cSYBf0ak");t.valid=function(e,t){return e?o.Observable.empty().pipe(n.skip(1)):o.Observable.throw(t)}},cSYBf0ak:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9");t.skip=function(e){return function(t){return t.lift(new i(e))}};var i=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.total))},e}(),a=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return o(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(n.Subscriber)},ciX6mssW:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("hgAgzZ2a"),i=r("35WnazEF");t.mergeMap=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),function(o){return"number"==typeof t&&(r=t,t=null),o.lift(new a(e,t,r))}};var a=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.resultSelector,this.concurrent))},e}();t.MergeMapOperator=a;var s=function(e){function t(t,r,o,n){void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this,t),this.project=r,this.resultSelector=o,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return o(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){this.add(n.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,o,n){this.resultSelector?this._notifyResultSelector(e,t,r,o):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,r,o){var n;try{n=this.resultSelector(e,t,r,o)}catch(i){return void this.destination.error(i)}this.destination.next(n)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);t.MergeMapSubscriber=s},"cjS/beZz":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9"),i=r("9cByp9Rv");t.debounceTime=function(e,t){return void 0===t&&(t=i.async),function(r){return r.lift(new a(e,t))}};var a=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.dueTime,this.scheduler))},e}(),s=function(e){function t(t,r,o){e.call(this,t),this.dueTime=r,this.scheduler=o,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return o(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(l,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(n.Subscriber);function l(e){e.debouncedNext()}},cxTK3sM8:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("35WnazEF"),i=r("hgAgzZ2a");t.switchMap=function(e,t){return function(r){return r.lift(new a(e,t))}};var a=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.resultSelector))},e}(),s=function(e){function t(t,r,o){e.call(this,t),this.project=r,this.resultSelector=o,this.index=0}return o(t,e),t.prototype._next=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var o=this.innerSubscription;o&&o.unsubscribe(),this.add(this.innerSubscription=i.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,o,n){this.resultSelector?this._tryNotifyNext(e,t,r,o):this.destination.next(t)},t.prototype._tryNotifyNext=function(e,t,r,o){var n;try{n=this.resultSelector(e,t,r,o)}catch(i){return void this.destination.error(i)}this.destination.next(n)},t}(n.OuterSubscriber)},"d/GcO6Qp":function(e,t,r){var o=r("RYi7EyyQ"),n=Math.max,i=Math.min;e.exports=function(e,t){return(e=o(e))<0?n(e+t,0):i(e,t)}},"d/VigPzV":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("tSehy8ip"),i=r("4c1CS0b3"),a=r("p8xlhmQO"),s=function(e){function t(t,r){if(e.call(this),this.scheduler=r,null==t)throw new Error("iterator cannot be null.");this.iterator=function(e){var t=e[a.iterator];if(!t&&"string"==typeof e)return new l(e);if(!t&&void 0!==e.length)return new c(e);if(!t)throw new TypeError("object is not iterable");return e[a.iterator]()}(t)}return o(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.hasError,o=e.iterator,n=e.subscriber;if(r)n.error(e.error);else{var i=o.next();i.done?n.complete():(n.next(i.value),e.index=t+1,n.closed?"function"==typeof o.return&&o.return():this.schedule(e))}},t.prototype._subscribe=function(e){var r=this.iterator,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{index:0,iterator:r,subscriber:e});for(;;){var n=r.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed){"function"==typeof r.return&&r.return();break}}},t}(i.Observable);t.IteratorObservable=s;var l=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.str=e,this.idx=t,this.len=r}return e.prototype[a.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),c=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=function(e){var t=+e.length;if(isNaN(t))return 0;if(0===t||(r=t,"number"!=typeof r||!n.root.isFinite(r)))return t;var r;if((t=function(e){var t=+e;return 0===t?t:isNaN(t)?t:t<0?-1:1}(t)*Math.floor(Math.abs(t)))<=0)return 0;if(t>u)return u;return t}(e)),this.arr=e,this.idx=t,this.len=r}return e.prototype[a.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}();var u=Math.pow(2,53)-1},dAiZTu0g:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("0+0oBmNy");o.Observable.prototype.partition=n.partition},dyZXAqyT:function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},e7yV98Ji:function(e,t,r){var o=r("aCFjIdzX"),n=r("kJMx5DTq").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return n(e)}catch(t){return a.slice()}}(e):n(o(e))}},eeVqVyzO:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},elZqmuzu:function(e,t,r){"use strict";var o=r("dyZXAqyT"),n=r("hswaSTrv"),i=r("nh4gaiGV"),a=r("K0xUtE8J")("species");e.exports=function(e){var t=o[e];i&&t&&!t[a]&&n.f(t,a,{configurable:!0,get:function(){return this}})}},fF1eIODs:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("35WnazEF"),i=r("hgAgzZ2a");t.takeUntil=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.notifier))},e}(),s=function(e){function t(t,r){e.call(this,t),this.notifier=r,this.add(i.subscribeToResult(this,r))}return o(t,e),t.prototype.notifyNext=function(e,t,r,o,n){this.complete()},t.prototype.notifyComplete=function(){},t}(n.OuterSubscriber)},fLIWuSNo:function(e,t,r){"use strict";var o=r("DVytGcct");t.publishReplay=function(e,t,r,n){return o.publishReplay(e,t,r,n)(this)}},fjAU4jyp:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("XVkz5NZY");o.Observable.prototype.filter=n.filter},"fyDq9XZ+":function(e,t,r){var o=r("hswaSTrv").f,n=r("aagx5GNa"),i=r("K0xUtE8J")("toStringTag");e.exports=function(e,t,r){e&&!n(e=r?e:e.prototype,i)&&o(e,i,{configurable:!0,value:t})}},g16fbpKY:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.link="@",t.fieldIdentifier=function(e,r){return""+e+t.link+r}},g3g5MAGG:function(e,t){var r=e.exports={version:"2.5.6"};"number"==typeof __e&&(__e=r)},"gGPOCt/k":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("H6PxbLYg");t.clone=function(e,r){if(void 0===r&&(r=null),null==e)return e;if(e.constructor===Date)return new Date(e.valueOf());if(e.constructor===RegExp){var n=e.valueOf(),i="";return i+=n.global?"g":"",i+=n.ignoreCase?"i":"",i+=n.multiline?"m":"",new RegExp(n.source,i)}return e.constructor===Function||e.constructor===String||e.constructor===Number||e.constructor===Boolean?e:(r=r||new e.constructor,o.forEach(e,function(e,o){r[o]=t.clone(e,null)}),r)}},gxrElbei:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("lKtV2OhW");o.Observable.prototype.first=n.first},hDVK8her:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rRE7ETfd"),i=r("luwtdXCP"),a=r("35WnazEF"),s=r("hgAgzZ2a"),l={};t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&i.isArray(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(new n.ArrayObservable([t].concat(e)),new c(r))}};var c=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project))},e}();t.CombineLatestOperator=c;var u=function(e){function t(t,r){e.call(this,t),this.project=r,this.active=0,this.values=[],this.observables=[]}return o(t,e),t.prototype._next=function(e){this.values.push(l),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var o=e[r];this.add(s.subscribeToResult(this,o,o,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,o,n){var i=this.values,a=i[r],s=this.toRespond?a===l?--this.toRespond:this.toRespond:0;i[r]=t,0===s&&(this.project?this._tryProject(i):this.destination.next(i.slice()))},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)},t}(a.OuterSubscriber);t.CombineLatestSubscriber=u},hPIQAJUg:function(e,t){e.exports={}},hQiMwM1X:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9");t.pairwise=function(){return function(e){return e.lift(new i)}};var i=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){e.call(this,t),this.hasPrev=!1}return o(t,e),t.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},t}(n.Subscriber)},hgAgzZ2a:function(e,t,r){"use strict";var o=r("tSehy8ip"),n=r("vf56ef1j"),i=r("/Trfdaa9"),a=r("rkVwUF8t"),s=r("4c1CS0b3"),l=r("p8xlhmQO"),c=r("nFJ+yAX1"),u=r("78uXI4TS");t.subscribeToResult=function(e,t,r,f){var g=new c.InnerSubscriber(e,r,f);if(g.closed)return null;if(t instanceof s.Observable)return t._isScalar?(g.next(t.value),g.complete(),null):(g.syncErrorThrowable=!0,t.subscribe(g));if(n.isArrayLike(t)){for(var p=0,h=t.length;p<h&&!g.closed;p++)g.next(t[p]);g.closed||g.complete()}else{if(i.isPromise(t))return t.then(function(e){g.closed||(g.next(e),g.complete())},function(e){return g.error(e)}).then(null,function(e){o.root.setTimeout(function(){throw e})}),g;if(t&&"function"==typeof t[l.iterator])for(var d=t[l.iterator]();;){var y=d.next();if(y.done){g.complete();break}if(g.next(y.value),g.closed)break}else if(t&&"function"==typeof t[u.observable]){var _=t[u.observable]();if("function"==typeof _.subscribe)return _.subscribe(new c.InnerSubscriber(e,r,f));g.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var m="You provided "+(a.isObject(t)?"an invalid object":"\'"+t+"\'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";g.error(new TypeError(m))}}return null}},hswaSTrv:function(e,t,r){var o=r("y3w9bphm"),n=r("xpqlGfKw"),i=r("apmTvpNA"),a=Object.defineProperty;t.f=r("nh4gaiGV")?Object.defineProperty:function(e,t,r){if(o(e),t=i(t,!0),o(r),n)try{return a(e,t,r)}catch(s){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},"i/sjCb6v":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("4c1CS0b3"),n=r("+6/L5mVI"),i=r("cjS/beZz"),a=r("NVK113Rt"),s=r("ciX6mssW"),l=r("DVytGcct"),c=r("YgBD638s"),u=r("wHNhmth5"),f=r("cxTK3sM8"),g=r("9cByp9Rv"),p=r("17JF7D0B"),h=r("W5LEaZ1S"),d=r("xM413arm"),y=r("WdnSUq9g"),_=r("U9Ham2Lb"),m=r("9F+QFB74"),v=function(){function e(e,t,r,o,n,i,a){this.db=e,this.lselect=t,this.shape=r,this.predicateProvider=o,this.limit=n,this.skip=i,this.orderDescriptions=a,this.mapFn=m.mapFn,this._change$=null,this.consumed=!1,this.predicateBuildErr=!1,this.predicateProvider=this.normPredicateProvider(o),this.select=t.toSql()}return e.concatFactory=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=t[0],n=t.map(function(e){return{skip:e.skip,limit:e.limit}}).sort(function(e,t){return e.skip-t.skip}),i=o.db,a=o.lselect,s=o.shape,l=o.predicateProvider,c=n[0],u=n.reduce(function(e,t){var r=e.skip+e.limit;return y.assert(t.skip===r,h.tokenErrMsg.TokenConcatFailed("\\n        skip should be serial,\\n        expect: "+JSON.stringify(e,null,2)+"\\n        actual: "+r+"\\n      ")),t});return new e(i,a,s,l,u.limit+u.skip,c.skip,o.orderDescriptions).map(o.mapFn)},e.combineFactory=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var f=t[0],p={toSql:y.identity},d=new e(f.db,p,{});return d.change$=o.Observable.from(t).pipe(a.map(function(e){return e.mapFn(e.change$)}),n.combineAll(),a.map(function(e){return e.reduce(function(e,t){return e.concat(t)})}),i.debounceTime(0,g.async),l.publishReplay(1),u.refCount()),d.values=function(){return y.assert(!d.consumed,h.tokenErrMsg.TokenConsumed()),d.consumed=!0,o.Observable.from(t).pipe(s.mergeMap(function(e){return e.values()}),c.reduce(function(e,t){return e.concat(t)}))},d.toString=function(){var e=t.map(function(e){return e.toString()});return JSON.stringify(e,null,2)},d.select=f.select,d},e.stringifyOrder=function(e){if(!e)return 0;var t="";return y.forEach(e,function(e){var r=e.column.getName(),o=e.orderBy;t+=r+":"+o}),t},Object.defineProperty(e.prototype,"change$",{get:function(){var e=this;if(this._change$)return this._change$;var t=this.db,r=this.limit,n=this.skip;n=r&&!n?0:n;var i=function(r){return o.Observable.create(function(o){var n=function(){e.getValue(r).then(function(e){return o.next(e)}).catch(function(e){return o.error(e)})};return t.observe(r,n),n(),function(){return e.db.unobserve(r,n)}})},a=r||n?this.buildPrefetchingObserve().pipe(f.switchMap(function(t){return i(e.getQuery(e.inPKs(t)))})):i(this.getQuery());return b(a).publishReplay(1).refCount()},set:function(e){this._change$=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeQuery",{get:function(){var e=null,t=this.predicateProvider;t&&!this.predicateBuildErr&&(e=t.getPredicate());var r=this.shape,o=r.pk,n=r.mainTable,i=n[o.name],a=d.predicatableQuery(this.db,n,e,_.StatementType.Select,i);return this.orderDescriptions&&this.orderDescriptions.length&&y.forEach(this.orderDescriptions,function(e){return a.orderBy(e.column,e.orderBy)}),a.limit(this.limit).skip(this.skip),a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){var e=this.lselect.clone();return this.orderDescriptions&&this.orderDescriptions.length&&y.forEach(this.orderDescriptions,function(t){return e.orderBy(t.column,t.orderBy)}),e},enumerable:!0,configurable:!0}),e.prototype.normPredicateProvider=function(e){try{return e&&e.getPredicate()?e:void 0}catch(t){return this.predicateBuildErr=!0,void y.warn("Failed to build predicate, since "+t.message+", on table: "+this.shape.mainTable.getName())}},e.prototype.toString=function(){return this.getQuery().toSql()},e.prototype.values=function(){var e=this;if(void 0!==this.limit||void 0!==this.skip){var t=this.rangeQuery.exec().then(function(t){return t.map(function(t){return t[e.shape.pk.name]})}).then(function(t){return e.getValue(e.getQuery(e.inPKs(t)))});return this.mapFn(o.Observable.fromPromise(t))}return this.mapFn(o.Observable.fromPromise(this.getValue(this.getQuery())))},e.prototype.combine=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.combineFactory.apply(e,[this].concat(t))},e.prototype.concat=function(){for(var t=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var n=e.stringifyOrder(this.orderDescriptions),i=r.every(function(r){return r.select===t.select&&e.stringifyOrder(r.orderDescriptions)===n&&r.mapFn.toString()===t.mapFn.toString()&&(r.predicateProvider===t.predicateProvider||!(!r.predicateProvider||!t.predicateProvider)&&r.predicateProvider.toString()===t.predicateProvider.toString())});return y.assert(i,h.tokenErrMsg.TokenConcatFailed()),e.concatFactory.apply(e,[this].concat(r))},e.prototype.changes=function(){return this.mapFn(this.change$)},e.prototype.map=function(e){return this.mapFn=e,this},e.prototype.inPKs=function(e){var t=this.shape,r=t.pk;return t.mainTable[r.name].in(e)},e.prototype.getValue=function(e){var t=this;return e.exec().then(function(e){var r=d.graph(e,t.shape.definition),o=t.shape.pk.name;return t.shape.pk.queried?r:t.removeKey(r,o)})},e.prototype.getQuery=function(e){if(this.predicateBuildErr)return e?this.query.where(e):this.query;var t,r=[];switch(this.predicateProvider&&r.push(this.predicateProvider.getPredicate()),e&&r.push(e),r.length){case 0:return this.query;case 1:return this.query.where(r[0]);default:return this.query.where((t=p.op).and.apply(t,r))}},e.prototype.removeKey=function(e,t){return e.forEach(function(e){return delete e[t]}),e},e.prototype.buildPrefetchingObserve=function(){var e=this;return o.Observable.create(function(t){var r=e.rangeQuery,o=function(){return r.exec().then(function(r){t.next(r.map(function(t){return t[e.shape.pk.name]}))}).catch(function(e){return t.error(e)})};return o().then(function(){e.db.observe(r,o)}),function(){return e.db.unobserve(r,o)}})},e}();t.Selector=v;var b=function(e){return e.scan(function(e,t,r){return 1===r&&e&&e.length&&t&&t.length?null:t},null).filter(Boolean)}},i2FkeMGK:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return o.Observable.of(this.value);case"E":return o.Observable.throw(this.error);case"C":return o.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();t.Notification=n},"i5dc/k9t":function(e,t,r){var o=r("0/R4TaPX"),n=r("y3w9bphm"),i=function(e,t){if(n(e),!o(t)&&null!==t)throw TypeError(t+": can\'t set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,o){try{(o=r("m0Pp8OTl")(Function.call,r("EemHgGbk").f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:o(e,r),e}}({},!1):void 0),check:i}},iDRGSAQ8:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r("GaSbzOnp").__exportStar(r("B6eTE7Si"),t);var o=r("r41H6Sz0");t.QueryToken=o.QueryToken,t.Selector=o.Selector},iF0LBWLW:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("NVK113Rt"),n=r("9F+QFB74"),i=function(){function e(e,t,r){this.query=t,this.tableName=r,this.mapFn=n.mapFn,this.request$=e.pipe(o.map(function(e){return Array.isArray(e)?e:[e]}))}return e.prototype.values=function(){return this.mapFn(this.request$)},e.prototype.changes=function(){return this.mapFn(this.request$)},e.prototype.map=function(e){return this.mapFn=e,this},e}();t.ProxySelector=i},iLVi722i:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("4c1CS0b3"),i=r("PIcZKVs2"),a=r("SUh3uWYz"),s=function(e){function t(t,r){e.call(this),this.arrayLike=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return o(t,e),t.create=function(e,r){var o=e.length;return 0===o?new a.EmptyObservable:1===o?new i.ScalarObservable(e[0],r):new t(e,r)},t.dispatch=function(e){var t=e.arrayLike,r=e.index,o=e.length,n=e.subscriber;n.closed||(r>=o?n.complete():(n.next(t[r]),e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.arrayLike,o=this.scheduler,n=r.length;if(o)return o.schedule(t.dispatch,0,{arrayLike:r,index:0,length:n,subscriber:e});for(var i=0;i<n&&!e.closed;i++)e.next(r[i]);e.complete()},t}(n.Observable);t.ArrayLikeObservable=s},iPvGACis:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("VnRQYvuk");t.assert=function(e,t){if(!e)throw new o.ReactiveDBException(t)}},ioFf6pbw:function(e,t,r){"use strict";var o=r("dyZXAqyT"),n=r("aagx5GNa"),i=r("nh4gaiGV"),a=r("XKFUp60F"),s=r("KroJtBC/"),l=r("Z6vFbDPU").KEY,c=r("eeVqVyzO"),u=r("VTer505i"),f=r("fyDq9XZ+"),g=r("ylqsz2Z8"),p=r("K0xUtE8J"),h=r("N8g3kmGx"),d=r("OnI7boEN"),y=r("1MBn2IOH"),_=r("EWmCJ/uA"),m=r("y3w9bphm"),v=r("0/R4TaPX"),b=r("aCFjIdzX"),S=r("apmTvpNA"),T=r("RjD/ZGJI"),E=r("Kuthha03"),N=r("e7yV98Ji"),x=r("EemHgGbk"),w=r("hswaSTrv"),A=r("DVgAQ7gs"),R=x.f,P=w.f,C=N.f,I=o.Symbol,k=o.JSON,O=k&&k.stringify,B=p("_hidden"),D=p("toPrimitive"),L={}.propertyIsEnumerable,M=u("symbol-registry"),F=u("symbols"),U=u("op-symbols"),j=Object.prototype,q="function"==typeof I,K=o.QObject,W=!K||!K.prototype||!K.prototype.findChild,V=i&&c(function(){return 7!=E(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,r){var o=R(j,t);o&&delete j[t],P(e,t,r),o&&e!==j&&P(j,t,o)}:P,G=function(e){var t=F[e]=E(I.prototype);return t._k=e,t},z=q&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},Q=function(e,t,r){return e===j&&Q(U,t,r),m(e),t=S(t,!0),m(r),n(F,t)?(r.enumerable?(n(e,B)&&e[B][t]&&(e[B][t]=!1),r=E(r,{enumerable:T(0,!1)})):(n(e,B)||P(e,B,T(1,{})),e[B][t]=!0),V(e,t,r)):P(e,t,r)},J=function(e,t){m(e);for(var r,o=y(t=b(t)),n=0,i=o.length;i>n;)Q(e,r=o[n++],t[r]);return e},H=function(e){var t=L.call(this,e=S(e,!0));return!(this===j&&n(F,e)&&!n(U,e))&&(!(t||!n(this,e)||!n(F,e)||n(this,B)&&this[B][e])||t)},Y=function(e,t){if(e=b(e),t=S(t,!0),e!==j||!n(F,t)||n(U,t)){var r=R(e,t);return!r||!n(F,t)||n(e,B)&&e[B][t]||(r.enumerable=!0),r}},X=function(e){for(var t,r=C(b(e)),o=[],i=0;r.length>i;)n(F,t=r[i++])||t==B||t==l||o.push(t);return o},$=function(e){for(var t,r=e===j,o=C(r?U:b(e)),i=[],a=0;o.length>a;)!n(F,t=o[a++])||r&&!n(j,t)||i.push(F[t]);return i};q||(s((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=g(arguments.length>0?arguments[0]:void 0),t=function(r){this===j&&t.call(U,r),n(this,B)&&n(this[B],e)&&(this[B][e]=!1),V(this,e,T(1,r))};return i&&W&&V(j,e,{configurable:!0,set:t}),G(e)}).prototype,"toString",function(){return this._k}),x.f=Y,w.f=Q,r("kJMx5DTq").f=N.f=X,r("UqcFofGq").f=H,r("JiEaEVNT").f=$,i&&!r("LQAcWje+")&&s(j,"propertyIsEnumerable",H,!0),h.f=function(e){return G(p(e))}),a(a.G+a.W+a.F*!q,{Symbol:I});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)p(Z[ee++]);for(var te=A(p.store),re=0;te.length>re;)d(te[re++]);a(a.S+a.F*!q,"Symbol",{for:function(e){return n(M,e+="")?M[e]:M[e]=I(e)},keyFor:function(e){if(!z(e))throw TypeError(e+" is not a symbol!");for(var t in M)if(M[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!q,"Object",{create:function(e,t){return void 0===t?E(e):J(E(e),t)},defineProperty:Q,defineProperties:J,getOwnPropertyDescriptor:Y,getOwnPropertyNames:X,getOwnPropertySymbols:$}),k&&a(a.S+a.F*(!q||c(function(){var e=I();return"[null]"!=O([e])||"{}"!=O({a:e})||"{}"!=O(Object(e))})),"JSON",{stringify:function(e){for(var t,r,o=[e],n=1;arguments.length>n;)o.push(arguments[n++]);if(r=t=o[1],(v(t)||void 0!==e)&&!z(e))return _(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!z(t))return t}),o[1]=t,O.apply(k,o)}}),I.prototype[D]||r("MukbbRF2")(I.prototype,D,I.prototype.valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(o.JSON,"JSON",!0)},kJMx5DTq:function(e,t,r){var o=r("zhAbEczo"),n=r("4R4ubiJj").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,n)}},kzw1iLML:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasOwn=function(e,t){return e.hasOwnProperty(t)}},lKtV2OhW:function(e,t,r){"use strict";var o=r("9A11jf2F");t.first=function(e,t,r){return o.first(e,t,r)(this)}},lfTSU3R9:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonExistentTable=function(e){return"Table: `"+e+"` cannot be found."},t.UnmodifiableTable=function(){return"Method: defineSchema cannot be invoked since schema is existed or database is connected"},t.InvalidQuery=function(){return"Only navigation properties were included in query."},t.AliasConflict=function(e,t){return"Definition conflict, Column: `"+e+"` on table: "+t+"."},t.GraphFailed=function(e){return"Graphify query result failed, due to: "+e.message+"."},t.NotImplemented=function(){return"Not implemented yet."},t.UnexpectedRelationship=function(){return"Unexpected relationship was specified."},t.InvalidType=function(e){var t="Unexpected data type";return e&&(t+=", expect "+e[0]+" but got "+e[1]),t+"."},t.UnexpectedTransactionUse=function(){return"Please use Database#transaction to get a transaction scope first."},t.PrimaryKeyNotProvided=function(){return"Primary key was not provided."},t.PrimaryKeyConflict=function(){return"Primary key was already provided."},t.DatabaseIsNotEmpty=function(){return"Method: load cannnot be invoked since database is not empty."},t.NotConnected=function(){return"Method: dispose cannnot be invoked before database is connected."}},luwtdXCP:function(e,t,r){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},m0Pp8OTl:function(e,t,r){var o=r("2OiFDQHv");e.exports=function(e,t,r){if(o(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,o){return e.call(t,r,o)};case 3:return function(r,o,n){return e.call(t,r,o,n)}}return function(){return e.apply(t,arguments)}}},"m4/aJQy/":function(e,t,r){"use strict";var o=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=o},mPU7ngXj:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("fLIWuSNo");o.Observable.prototype.publishReplay=n.publishReplay},mpFFMXLf:function(e,t,r){"use strict";var o=r("ZkF8DeCz");t.materialize=function(){return o.materialize()(this)}},"nA+3cBpY":function(e,t,r){"use strict";var o=r("rfFCs9L9"),n=r("qWnhSdfT"),i=r("Qros3QnH");t.toSubscriber=function(e,t,r){if(e){if(e instanceof o.Subscriber)return e;if(e[n.rxSubscriber])return e[n.rxSubscriber]()}return e||t||r?new o.Subscriber(e,t,r):new o.Subscriber(i.empty)}},nDsjpj50:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("8yf6doCl"),i=r("VpWK6D1a"),a=function(e){function t(t){e.call(this),this._value=t}return o(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(n.Subject);t.BehaviorSubject=a},"nFJ+yAX1":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(t,r,o){e.call(this),this.parent=t,this.outerValue=r,this.outerIndex=o,this.index=0}return o(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(r("rfFCs9L9").Subscriber);t.InnerSubscriber=n},nGyuwg6b:function(e,t,r){var o=r("K0xUtE8J")("unscopables"),n=Array.prototype;null==n[o]&&r("MukbbRF2")(n,o,{}),e.exports=function(e){n[o][e]=!0}},ne8iVkqJ:function(e,t,r){var o=r("RYi7EyyQ"),n=Math.min;e.exports=function(e){return e>0?n(o(e),9007199254740991):0}},neMAwlMA:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("G4OQvx5B");o.Observable.of=n.of},nh4gaiGV:function(e,t,r){e.exports=!r("eeVqVyzO")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},p7PDwGED:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("GaSbzOnp"),n=r("WdnSUq9g"),i=function(){function e(e){this.entities=e,this.ctxgen=function(){return!0}}return e.prototype.context=function(e){return this.ctxgen=e,this},e.prototype.keys=function(e){switch(typeof e){case"string":case"boolean":case"number":case"undefined":return[];default:return e instanceof Date?[]:e&&"function"==typeof e.keys?Array.from(e.keys()):"object"==typeof e&&null!==e||Array.isArray(e)?Object.keys(e):[]}},e.prototype.forEach=function(e){var t=this,r=-1;!function i(a,s,l){void 0===s&&(s=[]),void 0===l&&(l=[]);var c=!0,u=t.keys(a),f=l[l.length-1];r++;var g={isRoot:0===s.length,node:a,path:s,parent:f,children:u,key:s[s.length-1],isLeaf:0===u.length,type:function(){return n.getType(a)},skip:function(){return c=!1},index:r},p=t.ctxgen(s[s.length-1],a,g);if(!1!==p){var h="object"==typeof p?o.__assign({},g,p):g;e.call(null,h,a)}c&&(g.isLeaf||n.forEach(a,function(e,t){i(e,s.concat(t),Array.isArray(a)?l.concat([a]):l.concat(a))}))}(this.entities)},e}();t.Traversable=i},p8xlhmQO:function(e,t,r){"use strict";var o=r("tSehy8ip");function n(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var r=e.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var o=e.Map;if(o)for(var n=Object.getOwnPropertyNames(o.prototype),i=0;i<n.length;++i){var a=n[i];if("entries"!==a&&"size"!==a&&o.prototype[a]===o.prototype.entries)return a}return"@@iterator"}t.symbolIteratorPonyfill=n,t.iterator=n(o.root),t.$$iterator=t.iterator},pHYFxBQl:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("luwtdXCP"),i=r("vf56ef1j"),a=r("/Trfdaa9"),s=r("Rkh20UyL"),l=r("d/VigPzV"),c=r("rRE7ETfd"),u=r("iLVi722i"),f=r("p8xlhmQO"),g=r("4c1CS0b3"),p=r("Ndu5g8yF"),h=r("78uXI4TS"),d=function(e){function t(t,r){e.call(this,null),this.ish=t,this.scheduler=r}return o(t,e),t.create=function(e,r){if(null!=e){if("function"==typeof e[h.observable])return e instanceof g.Observable&&!r?e:new t(e,r);if(n.isArray(e))return new c.ArrayObservable(e,r);if(a.isPromise(e))return new s.PromiseObservable(e,r);if("function"==typeof e[f.iterator]||"string"==typeof e)return new l.IteratorObservable(e,r);if(i.isArrayLike(e))return new u.ArrayLikeObservable(e,r)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,r=this.scheduler;return null==r?t[h.observable]().subscribe(e):t[h.observable]().subscribe(new p.ObserveOnSubscriber(e,r,0))},t}(g.Observable);t.FromObservable=d},qKs0Z8KE:function(e,t,r){r("BtvtXq+c"),r("XfO3KJfl"),r("rGqokKvT"),r("9AAni4xE"),e.exports=r("g3g5MAGG").Map},qWnhSdfT:function(e,t,r){"use strict";var o=r("tSehy8ip").root.Symbol;t.rxSubscriber="function"==typeof o&&"function"==typeof o.for?o.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},r1kuiv4d:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("WdnSUq9g"),n=r("W5LEaZ1S"),i=r("wGpV5LeC")();t.LiteralArray="LiteralArray",i.registerType(t.LiteralArray,o.identity),t.graph=function(e,t){try{return i.nest(e,[t])}catch(r){throw new n.Exception(n.dbErrMsg.GraphFailed(r))}}},r41H6Sz0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("GaSbzOnp");o.__exportStar(r("LOExMsvW"),t),o.__exportStar(r("i/sjCb6v"),t),o.__exportStar(r("iF0LBWLW"),t),o.__exportStar(r("El9sSlIO"),t),o.__exportStar(r("Lh+U5N1+"),t)},rA5Lr6AX:function(e,t,r){"use strict";var o,n;function i(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r=Array.isArray(e),o=Array.isArray(t);if(r&&o){var n=e.length;if(n!=t.length)return!1;for(var a=n;0!=a--;)if(!i(e[a],t[a]))return!1;return!0}if(r!==o)return!1;var s=e instanceof Date,l=t instanceof Date;if(s!=l)return!1;if(s&&l)return e.getTime()==t.getTime();var c=Object.keys(e),u=c.length;if(u!==Object.keys(t).length)return!1;for(var f=u;0!=f--;)if(!t.hasOwnProperty(c[f]))return!1;for(var g=u;0!=g--;){var p=c[g];if(!i(e[p],t[p]))return!1}return!0}return e!=e&&t!=t}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Reuse=0]="Reuse",e[e.New=1]="New"}(o=t.OpType||(t.OpType={})),function(e){e[e.Error=0]="Error",e[e.Success=1]="Success",e[e.ShouldSkip=2]="ShouldSkip"}(n=t.OpsType||(t.OpsType={})),t.patch=function(e,t,r){return t.length?r.map(function(r,n){var i=e[n];return i.type===o.Reuse?t[i.index]:r}):r},t.getPatchResult=function(e,r,o){switch(o.type){case n.Error:return r;case n.ShouldSkip:return e;case n.Success:default:return t.patch(o.ops,e,r)}},t.diff=function(e,t,r){void 0===r&&(r="_id");var a=e,s=t;if(!Array.isArray(a)||!Array.isArray(s))return{type:n.Error,ops:[],message:"cannot compare non-list object"};for(var l={},c=0;c<a.length;c++){var u=a[c][r];if(void 0===u)return{type:n.Error,ops:[],message:"cannot find pk: "+r+" at prev."+c};l[u]=c}for(var f=[],g=0,p=0;p<s.length;p++){var h=s[p][r];if(void 0===h)return{type:n.Error,ops:[],message:"cannot find pk: "+r+" at curr."+p};var d=l[h];if(void 0!==d){var y=i(s[p],a[d]),_=y?{type:o.Reuse,index:d}:{type:o.New,index:p};d===p&&y&&g++,f.push(_)}else f.push({type:o.New,index:p})}return{type:g===s.length&&a.length===s.length?n.ShouldSkip:n.Success,ops:f}}},rGqokKvT:function(e,t,r){for(var o=r("yt8OQ3pu"),n=r("DVgAQ7gs"),i=r("KroJtBC/"),a=r("dyZXAqyT"),s=r("MukbbRF2"),l=r("hPIQAJUg"),c=r("K0xUtE8J"),u=c("iterator"),f=c("toStringTag"),g=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=n(p),d=0;d<h.length;d++){var y,_=h[d],m=p[_],v=a[_],b=v&&v.prototype;if(b&&(b[u]||s(b,u,g),b[f]||s(b,f,_),l[_]=g,m))for(y in o)b[y]||i(b,y,o[y],!0)}},rRE7ETfd:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("4c1CS0b3"),i=r("PIcZKVs2"),a=r("SUh3uWYz"),s=r("z6YPpxqM"),l=function(e){function t(t,r){e.call(this),this.array=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return o(t,e),t.create=function(e,r){return new t(e,r)},t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var o=e[e.length-1];s.isScheduler(o)?e.pop():o=null;var n=e.length;return n>1?new t(e,o):1===n?new i.ScalarObservable(e[0],o):new a.EmptyObservable(o)},t.dispatch=function(e){var t=e.array,r=e.index,o=e.count,n=e.subscriber;r>=o?n.complete():(n.next(t[r]),n.closed||(e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.array,o=r.length,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{array:r,index:0,count:o,subscriber:e});for(var i=0;i<o&&!e.closed;i++)e.next(r[i]);e.complete()},t}(n.Observable);t.ArrayObservable=l},rfFCs9L9:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("xqEhgZH1"),i=r("NTzudah4"),a=r("Qros3QnH"),s=r("qWnhSdfT"),l=function(e){function t(t,r,o){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!t){this.destination=a.empty;break}if("object"==typeof t){if(u(t)){var n=t[s.rxSubscriber]();this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,n.add(this)}else this.syncErrorThrowable=!0,this.destination=new c(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new c(this,t,r,o)}}return o(t,e),t.prototype[s.rxSubscriber]=function(){return this},t.create=function(e,r,o){var n=new t(e,r,o);return n.syncErrorThrowable=!1,n},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(i.Subscription);t.Subscriber=l;var c=function(e){function t(t,r,o,i){var s;e.call(this),this._parentSubscriber=t;var l=this;n.isFunction(r)?s=r:r&&(s=r.next,o=r.error,i=r.complete,r!==a.empty&&(l=Object.create(r),n.isFunction(l.unsubscribe)&&this.add(l.unsubscribe.bind(l)),l.unsubscribe=this.unsubscribe.bind(this))),this._context=l,this._next=s,this._error=o,this._complete=i}return o(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(r){throw this.unsubscribe(),r}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(o){return e.syncErrorValue=o,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(l);function u(e){return e instanceof l||"syncErrorThrowable"in e&&e[s.rxSubscriber]}},rkVwUF8t:function(e,t,r){"use strict";t.isObject=function(e){return null!=e&&"object"==typeof e}},s4BYIvw4:function(e,t,r){"use strict";t.errorObject={e:{}}},s5qYcagS:function(e,t,r){var o=r("0/R4TaPX");e.exports=function(e,t){if(!o(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},sx9yqNer:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("EcuZaM4J");o.Observable.fromEvent=n.fromEvent},tSehy8ip:function(e,t,r){"use strict";(function(e){var r="undefined"!=typeof window&&window,o="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,n=r||void 0!==e&&e||o;t.root=n,function(){if(!n)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,r("yLpjYHve"))},"ty+vvJtE":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return o(t,e),t}(Error);t.EmptyError=n},uliLzgMX:function(e,t,r){"use strict";var o=r("Q5ARUZxk");t._throw=o.ErrorObservable.create},vJfdXfAs:function(e,t,r){"use strict";var o=r("4c1CS0b3"),n=r("mpFFMXLf");o.Observable.prototype.materialize=n.materialize},vKdEha3l:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r("GaSbzOnp").__exportStar(r("Ycl6VIOU"),t)},vXlQTJcE:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("17JF7D0B");t.mergeTransactionResult=function(e,t){var r={insert:0,update:0,delete:0};return e.forEach(function(e,n){e instanceof o.query.InsertBuilder?r.insert+=Array.isArray(t[n])?t[n].length:1:e instanceof o.query.UpdateBuilder?r.update++:e instanceof o.query.DeleteBuilder&&r.delete++}),r}},vf56ef1j:function(e,t,r){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},vhPUF841:function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can\'t call method on  "+e);return e}},vqGAP1xU:function(e,t,r){r("ioFf6pbw"),r("BtvtXq+c"),e.exports=r("g3g5MAGG").Symbol},w2a56oLn:function(e,t,r){var o=r("aCFjIdzX"),n=r("ne8iVkqJ"),i=r("d/GcO6Qp");e.exports=function(e){return function(t,r,a){var s,l=o(t),c=n(l.length),u=i(a,c);if(e&&r!=r){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===r)return e||u||0;return!e&&-1}}},wGpV5LeC:function(e,t,r){"use strict";e.exports=function(){var e,t=r("KA4qVah4"),o=r("I7wRp3Mc"),n=r("Nv52qpEa"),i=r("bfR185/L"),a=r("zZPE7LTs");return(e={}).typeHandlers={NUMBER:function(e){return parseFloat(e)},BOOLEAN:function(e){return 1==e}},e.nest=function(r,i){var s,l,c,u,f,g,p,h,d;if(s=!1,void 0===i&&(i=null),null===r)return null;if(!t(i)&&!a(i)&&null!==i&&!0!==i)throw new Error("nest expects param structPropToColumnMap to be an array, plain object, null, or true");if(a(r))l=[r];else{if(!t(r))throw Error("nest expects param data to be in the form of a plain object or an array of plain objects (forming a table)");l=r}if(!0===i&&(s=!0,i=null),null===i&&l.length>0&&(i=e.structPropToColumnMapFromColumnHints(n(l[0]))),null===i)return s?[]:null;if(0===l.length)return t(i)?[]:null;for(c=e.buildMeta(i),h=function(t,r){var n,i,a,s,l,f,g,p,d;if(n=t[r],i=c.idMap[r],null===n){if(null===i.default||void 0===i.default)return;n=i.default}if(void 0!==i.cache[n]){if(null===i.containingIdUsage)return;if(l=t[i.containingColumn],void 0!==i.containingIdUsage[n]&&void 0!==i.containingIdUsage[n][l])return;a=i.cache[n]}else{for(a={},i.cache[n]=a,s=0;s<i.valueList.length;s++)null!==(p=t[(g=i.valueList[s]).column])?(d=o(g.type)?g.type:e.typeHandlers[g.type])&&(p=d(p,g.column,t)):void 0!==g.default&&(p=g.default),a[g.prop]=p;for(s=0;s<i.toManyPropList.length;s++)a[i.toManyPropList[s]]=[];for(s=0;s<i.toOneList.length;s++)a[i.toOneList[s].prop]=null,h(t,i.toOneList[s].column)}null===i.containingColumn?i.isOneOfMany?(null===u&&(u=[]),u.push(a)):u=a:(l=t[i.containingColumn],(f=c.idMap[i.containingColumn].cache[l])&&(i.isOneOfMany?f[i.ownProp].push(a):f[i.ownProp]=a),void 0===i.containingIdUsage[n]&&(i.containingIdUsage[n]={}),i.containingIdUsage[n][l]=!0)},u=null,f=0;f<l.length;f++)for(g=l[f],p=0;p<c.primeIdColumnList.length;p++)d=c.primeIdColumnList[p],h(g,d);return u},e.buildMeta=function(e){var r,o,s;if(o=function(e,s,l,c){var u,f,g,p,h,d,y;if(0===(u=n(e)).length)throw new Error("invalid structPropToColumnMap format - property \'"+c+"\' can not be an empty array");for(p=0;p<u.length;p++)if(!0===e[h=u[p]].id){f=h;break}for(void 0===f&&(f=u[0]),g=e[f].column||e[f],s&&r.primeIdColumnList.push(g),d={valueList:[],toOneList:[],toManyPropList:[],containingColumn:l,ownProp:c,isOneOfMany:!0===s,cache:{},containingIdUsage:null===l?null:{},default:void 0===e[f].default?null:e[f].default},p=0;p<u.length;p++)if("string"==typeof e[h=u[p]])d.valueList.push({prop:h,column:e[h],type:void 0,default:void 0});else if(e[h].column)d.valueList.push({prop:h,column:e[h].column,type:e[h].type,default:e[h].default});else if(t(e[h]))d.toManyPropList.push(h),o(e[h][0],!0,g,h);else{if(!a(e[h]))throw new Error("invalid structPropToColumnMap format - property \'"+h+"\' must be either a string, a plain object or an array");if(void 0===(y=i(e[h])[0]))throw new Error("invalid structPropToColumnMap format - property \'"+h+"\' can not be an empty object");y.column&&(y=y.column),d.toOneList.push({prop:h,column:y}),o(e[h],!1,g,h)}r.idMap[g]=d},r={primeIdColumnList:[],idMap:{}},t(e)){if(1!==e.length)throw new Error("invalid structPropToColumnMap format - can not have multiple roots for structPropToColumnMap, if an array it must only have one item");o(e[0],!0,null,null)}else if(a(e)){if(void 0===(s=i(e)[0]))throw new Error("invalid structPropToColumnMap format - the base object can not be an empty object");"string"!=typeof s&&(s=s.column),r.primeIdColumnList.push(s),o(e,!1,null,null)}return r},e.structPropToColumnMapFromColumnHints=function(t,r){var o,i,a,s,l,c,u,f,g,p,h,d,y,_;for(void 0===r&&(r={}),o={base:null},a=0;a<t.length;a++){for(s=(u=t[a]).split("___"),l=null,c=!1,p=1;p<s.length;p++)"ID"===s[p]?c=!0:void 0!==e.typeHandlers[s[p]]&&(l=s[p]);for(f=o,i="base",g=s[0].split("_"),p=0;p<g.length;p++)if(""===(h=g[p]))null===f[i]&&(f[i]=[null]),f=f[i],i=0;else{if(null===f[i]&&(f[i]={}),void 0===f[i][h]){if(d=void 0===r[u]?u:r[u],(null!==l||c)&&(d={column:d}),null!==l&&(d.type=l),c)for(d.id=!0,y=n(f[i]),_=0;_<y.length;_++)if(!0===f[i][y[_]].id)return"invalid - multiple id - "+f[i][y[_]].column+" and "+d.column+" conflict";f[i][h]=p===g.length-1?d:null}f=f[i],i=h}}return o.base},e.registerType=function(t,r){if(e.typeHandlers[t])throw new Error("Handler with type, "+t+", already exists");e.typeHandlers[t]=r},e}},wHNhmth5:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("rfFCs9L9");t.refCount=function(){return function(e){return e.lift(new i(e))}};var i=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var o=new a(e,r),n=t.subscribe(o);return o.closed||(o.connection=r.connect()),n},e}(),a=function(e){function t(t,r){e.call(this,t),this.connectable=r}return o(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,o=e._connection;this.connection=null,!o||r&&o!==r||o.unsubscribe()}}else this.connection=null},t}(n.Subscriber)},wmvG3xga:function(e,t,r){"use strict";var o=r("hswaSTrv").f,n=r("Kuthha03"),i=r("3LyjJE0w"),a=r("m0Pp8OTl"),s=r("9gX7r8Mc"),l=r("SlkYKCVx"),c=r("AfnzePDl"),u=r("1TsAvqxI"),f=r("elZqmuzu"),g=r("nh4gaiGV"),p=r("Z6vFbDPU").fastKey,h=r("s5qYcagS"),d=g?"_s":"size",y=function(e,t){var r,o=p(t);if("F"!==o)return e._i[o];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var u=e(function(e,o){s(e,u,t,"_i"),e._t=t,e._i=n(null),e._f=void 0,e._l=void 0,e[d]=0,null!=o&&l(o,r,e[c],e)});return i(u.prototype,{clear:function(){for(var e=h(this,t),r=e._i,o=e._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete r[o.i];e._f=e._l=void 0,e[d]=0},delete:function(e){var r=h(this,t),o=y(r,e);if(o){var n=o.n,i=o.p;delete r._i[o.i],o.r=!0,i&&(i.n=n),n&&(n.p=i),r._f==o&&(r._f=n),r._l==o&&(r._l=i),r[d]--}return!!o},forEach:function(e){h(this,t);for(var r,o=a(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(o(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!y(h(this,t),e)}}),g&&o(u.prototype,"size",{get:function(){return h(this,t)[d]}}),u},def:function(e,t,r){var o,n,i=y(e,t);return i?i.v=r:(e._l=i={i:n=p(t,!0),k:t,v:r,p:o=e._l,n:void 0,r:!1},e._f||(e._f=i),o&&(o.n=i),e[d]++,"F"!==n&&(e._i[n]=i)),e},getEntry:y,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=h(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))},r?"entries":"values",!r,!0),f(t)}}},xA5P6dQl:function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return o(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(r("m4/aJQy/").Scheduler);t.AsyncScheduler=n},xE8IhrvF:function(e,t,r){"use strict";var o=r("3oOovukc");t.multicast=function(e,t){return function(r){var i;if(i="function"==typeof e?e:function(){return e},"function"==typeof t)return r.lift(new n(i,t));var a=Object.create(r,o.connectableObservableDescriptor);return a.source=r,a.subjectFactory=i,a}};var n=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var r=this.selector,o=this.subjectFactory(),n=r(o).subscribe(e);return n.add(t.subscribe(o)),n},e}();t.MulticastOperator=n},xM413arm:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("GaSbzOnp"),n=r("556/UaWp");t.definition=n,o.__exportStar(r("L2oc0usH"),t),o.__exportStar(r("KQFQzhmp"),t),o.__exportStar(r("X4Qd2fOp"),t),o.__exportStar(r("vXlQTJcE"),t),o.__exportStar(r("4/V0zjKT"),t),o.__exportStar(r("r1kuiv4d"),t)},xSYwAM7J:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=function(){}},xpqlGfKw:function(e,t,r){e.exports=!r("nh4gaiGV")&&!r("eeVqVyzO")(function(){return 7!=Object.defineProperty(r("Iw71Jug9")("div"),"a",{get:function(){return 7}}).a})},xqEhgZH1:function(e,t,r){"use strict";t.isFunction=function(e){return"function"==typeof e}},y3w9bphm:function(e,t,r){var o=r("0/R4TaPX");e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},yLpjYHve:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(o){"object"==typeof window&&(r=window)}e.exports=r},"yZ+eWRiI":function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r("4c1CS0b3"),i=r("PBwOJWhM"),a=r("xqEhgZH1"),s=r("s4BYIvw4"),l=r("NTzudah4"),c=Object.prototype.toString;var u=function(e){function t(t,r,o,n){e.call(this),this.sourceObj=t,this.eventName=r,this.selector=o,this.options=n}return o(t,e),t.create=function(e,r,o,n){return a.isFunction(o)&&(n=o,o=void 0),new t(e,r,n,o)},t.setupSubscription=function(e,r,o,n,i){var a;if(function(e){return!!e&&"[object NodeList]"===c.call(e)}(e)||function(e){return!!e&&"[object HTMLCollection]"===c.call(e)}(e))for(var s=0,u=e.length;s<u;s++)t.setupSubscription(e[s],r,o,n,i);else if(function(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var f=e;e.addEventListener(r,o,i),a=function(){return f.removeEventListener(r,o,i)}}else if(function(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var g=e;e.on(r,o),a=function(){return g.off(r,o)}}else{if(!function(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e))throw new TypeError("Invalid event target");var p=e;e.addListener(r,o),a=function(){return p.removeListener(r,o)}}n.add(new l.Subscription(a))},t.prototype._subscribe=function(e){var r=this.sourceObj,o=this.eventName,n=this.options,a=this.selector,l=a?function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var o=i.tryCatch(a).apply(void 0,t);o===s.errorObject?e.error(s.errorObject.e):e.next(o)}:function(t){return e.next(t)};t.setupSubscription(r,o,l,e,n)},t}(n.Observable);t.FromEventObservable=u},ydz6hq0f:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("GaSbzOnp");o.__exportStar(r("K3kmOnob"),t),o.__exportStar(r("R0YvpVk+"),t),o.__exportStar(r("7RDzPUY4"),t),o.__exportStar(r("g16fbpKY"),t)},ylqsz2Z8:function(e,t){var r=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+o).toString(36))}},yt8OQ3pu:function(e,t,r){"use strict";var o=r("nGyuwg6b"),n=r("1TsAvqxI"),i=r("hPIQAJUg"),a=r("aCFjIdzX");e.exports=r("AfnzePDl")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,n(1)):n(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},z6YPpxqM:function(e,t,r){"use strict";t.isScheduler=function(e){return e&&"function"==typeof e.schedule}},zZPE7LTs:function(e,t){var r="[object Object]";var o,n,i=Function.prototype,a=Object.prototype,s=i.toString,l=a.hasOwnProperty,c=s.call(Object),u=a.toString,f=(o=Object.getPrototypeOf,n=Object,function(e){return o(n(e))});e.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||u.call(e)!=r||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(r){}return t}(e))return!1;var t=f(e);if(null===t)return!0;var o=l.call(t,"constructor")&&t.constructor;return"function"==typeof o&&o instanceof o&&s.call(o)==c}},zhAbEczo:function(e,t,r){var o=r("aagx5GNa"),n=r("aCFjIdzX"),i=r("w2a56oLn")(!1),a=r("YTvAncny")("IE_PROTO");e.exports=function(e,t){var r,s=n(e),l=0,c=[];for(r in s)r!=a&&o(s,r)&&c.push(r);for(;t.length>l;)o(s,r=t[l++])&&(~i(c,r)||c.push(r));return c}},zohQovrk:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.option=function(e,t){return e||t}}});\n//# sourceMappingURL=a0af234451e38e71d7be.worker.js.map',r.p+"a0af234451e38e71d7be.worker.js")}},"zPyQ/BVG":function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r("GESwhXbR"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){var e=t.props,r=e.clickPayload,n=e.onClick;n&&n(r)},t}return n.d(t,e),t.prototype.render=function(){var e=this.props,t=(e.onClick,e.clickPayload,n.g(e,["onClick","clickPayload"]));return o.createElement(i.MenuItem,n.a({},t,{onClick:this.handleClick}),this.props.children)},t}(o.PureComponent)},zT6SYcu2:function(e,t,r){"use strict";var n,o,i,a,s,u,c;r.d(t,"d",function(){return n}),r.d(t,"g",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"f",function(){return a}),r.d(t,"a",function(){return s}),r.d(t,"b",function(){return u}),r.d(t,"e",function(){return c}),function(e){e.Desc="DESC",e.Asc="ASC",e.None=""}(n||(n={})),function(e){e.field="field",e.expression="expression",e.value="value",e.word="word",e.string="string",e.array="array",e.function="function"}(o||(o={})),function(e){e.le="<=",e.ge=">=",e.eq="=",e.beq="~",e.in="in"}(i||(i={})),function(e){e.Select="SELECT",e.MultiSelect="MULTI_SELECT",e.Number="NUMBER",e.Date="DATE",e.Text="TEXT",e.StrictText="STRICT_TEXT",e.RangeText="RANGE_TEXT"}(a||(a={})),function(e){e.Member="teambition.member"}(s||(s={})),function(e){e.exact="exact",e.fuzzy="fuzzy"}(u||(u={})),function(e){e.Common="COMMON",e.Fixed="FIXED",e.User="USER",e.Date="DATE",e.Progress="PROGRESS",e.Customfield="CUSTOMFIELD"}(c||(c={}))},zXmn5Z7T:function(e,t,r){"use strict";var n=r("mrSGxOB2"),o=r("q1tIBJhx"),i=r("TSYQbtd+"),a=r.n(i),s=r("GESwhXbR"),u=r("dWbDnvg6"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.renderDesc=function(){var e=this.props.teamAncestors;return e?o.createElement("div",{className:"member-item-desc"},e.map(function(e){return e.name}).join(" - ")):null},t.prototype.renderTick=function(){return this.props.checked?o.createElement("div",{className:"member-item-tick"},o.createElement(s.Icon,{name:"tick",size:14})):null},t.prototype.renderExternalMemberMark=function(){return-1===this.props.role?o.createElement(s.Icon,{className:"member-item-external-member-mark",name:"external-member"}):null},t.prototype.render=function(){var e=this.props,t=e.avatarUrl,r=e.name,n=e.size,i=e.role,s=a()("member-item",this.props.className),c=a()("member-item-name",{"member-item-with-ext-member-mark":-1===i});return o.createElement("div",{className:s},o.createElement("div",{className:"member-item-content"},o.createElement(u.a,{size:n,shape:"circle",src:t,className:"member-item-avatar"}),o.createElement("span",{className:c},r),this.renderExternalMemberMark(),this.renderTick()),this.renderDesc())},t.defaultProps={size:"medium",checked:!1},t}(o.PureComponent);r.d(t,"a",function(){return c}),r("Egn3IaiG")},zir0hWNI:function(e,t,r){"use strict";r.d(t,"b",function(){return _}),r.d(t,"d",function(){return S}),r.d(t,"c",function(){return T}),r.d(t,"f",function(){return C}),r.d(t,"e",function(){return I}),r.d(t,"g",function(){return k}),r.d(t,"j",function(){return R}),r.d(t,"i",function(){return N}),r.d(t,"a",function(){return x}),r.d(t,"h",function(){return D});var n,o=r("mrSGxOB2"),i=r("tLZJUYWX"),a=r.n(i),s=r("6SzIBtPz"),u=r("fio7jWQ0"),c=r("eO8HY5nz"),l=r("peh1clMB"),p=r("NOGqly5s"),f=r("4c1CS0b3"),d=r("oRqJmROU"),g=r("eKedrZ+V"),h=r("wXiA47ap"),m=r("sa1Ed382"),y=r("s0r7VfKc"),v={organization:null,testhub:null,testgroups:null,unplannedGroup:null,usercases:null,isLoadingUsercases:!1,testhubSettingsOpened:!1},b=function(e){return"TESTHUB_PAGE/"+e},_=Object(s.a)(b("EXIT_TESTHUB_PAGE")),S=Object(s.a)(b("FETCH_TEST_GROUPS")),T=Object(s.a)(b("FETCH_GROUPS")),E=Object(s.a)(b("FETCH_GROUPS_FAILED")),O=Object(s.a)(b("FETCH_TESTHUB_SUCCESS")),w=Object(s.a)(b("FETCH_TEST_GROUPS_SUCCESS")),C=Object(s.a)(b("FETCH_USER_CASES_BY_HUB")),I=Object(s.a)(b("FETCH_USER_CASES_BY_GROUP")),k=Object(s.a)(b("FETCH_USER_CASES_INCLUDE_NODES_BY_GROUP")),j=Object(s.a)(b("FETCH_USER_CASES_SUCCESS")),A=Object(s.a)(b("FETCH_USER_CASES_BY_GROUP_SUCCESS")),P=Object(s.a)(b("FETCH_USER_CASES_FAILED")),R=Object(s.a)(b("SET_TESTHUB_SETTINGS_OPENED_STATE")),N=Object(s.b)(((n={})[""+O]=function(e,t){var r=t.payload;return o.a({},e,{testhub:r})},n[""+E]=function(e){return o.a({},e,{testgroups:[]})},n[""+w]=function(e,t){var r=t.payload;if(!r)return e;var n=[],i=null,s=null;return r.forEach(function(e){-1!==e.pos?n.push(e):i=e}),i&&(n.push(o.a({},i,{name:a.a.get("testhub.testgroup.rootgroup.name")})),s=i),o.a({},e,{testgroups:n,unplannedGroup:s})},n[""+I]=function(e){return o.a({},e,{isLoadingUsercases:!0})},n[""+j]=function(e,t){var r=t.payload;return r?o.a({},e,{usercases:r}):e},n[""+A]=function(e){return o.a({},e,{isLoadingUsercases:!1})},n[""+P]=function(e){return o.a({},e,{usercases:null,isLoadingUsercases:!1})},n[""+R]=function(e,t){return o.a({},e,{testhubSettingsOpened:t.payload})},n[""+_]=function(){return v},n),v),x=Object(p.a)(function(e,t){return e.ofType(""+S).filter(d.a).switchMap(function(r){var n=r.payload,i=D(t.getState()).organizationId;return f.Observable.merge(function(e,t){return y.default.getTesthub(e).changes().do(function(e){o.f(e,1)[0]||m.router.navigate(h.a.base({params:{organizationId:t}}),{trigger:!0})}).map(function(e){var t=o.f(e,1)[0];return O(t)})}(n,i),f.Observable.of(T(n))).takeUntil(e.ofType(""+_)).catch(function(){return f.Observable.of(h.a.push(h.a.base({params:{organizationId:i}})))})})},function(e){return e.ofType(""+T).switchMap(function(t){var r=t.payload;return y.default.getTestgroups(r).changes().takeUntil(e.ofType(""+_)).map(function(e){return w(e)}).catch(function(){return f.Observable.of(E())})})},function(e,t){return e.ofType(""+C).filter(d.a).switchMap(function(r){var n=r.payload;return y.default.getUsercasesByHub(n).changes().takeUntil(e.ofType(""+_)).map(j).catch(function(){var e=D(t.getState()),r=e.organizationId,n=e.testhubId;return f.Observable.of(h.a.push("/organization/"+r+"/testhub/"+n))})})},function(e){return e.ofType(""+I).filter(d.a).switchMap(function(t){var r=t.payload;return y.default.getUsercasesByGroup(r).changes().takeUntil(e.ofType(""+_)).map(A).catch(function(){return f.Observable.of(P())})})},function(e,t){return e.ofType(""+k).filter(d.a).switchMap(function(r){var n=r.payload,o=t.getState().ui.testhubPage.testgroups.find(function(e){return e._id===n}),i=!!o&&o.resourceCount<=500;return y.default.getUsercasesByGroup(n,i).changes().takeUntil(e.ofType(""+_)).map(A).map(function(){return i?g.a.expandChildrenGroup(o):Object(u.noOpAction)()}).catch(function(){return f.Observable.of(P())})})}),D=Object(l.createSelector)(function(e){return e.router.location},function(e){var t=Object(c.matchPath)(e.pathname,{path:h.a.usercase()})||Object(c.matchPath)(e.pathname,{path:h.a.group()})||Object(c.matchPath)(e.pathname,{path:h.a.testhub()});if(t&&t.params){var r=t.params,n=r.organizationId,o=r.groupId,i=r.usercaseId;return{organizationId:n,testhubId:r.testhubId,currentUsercaseId:i,currentTestgroupId:o}}return{}})},zpLHwT1h:function(e,t,r){"use strict";r.r(t);var n=r("mrSGxOB2"),o=r("sa1Ed382"),i=function(){function e(){this.name="organization id plugin"}return e.prototype.onGTAEvent=function(t){var r=o.router.getUrl?o.router.getUrl():"",i=e.checkRE.exec(r);if(i){var a=n.f(i,2)[1];t.organizationid=t.organizationid||a}return t},e.checkRE=/organization\/([\da-f]{24})/i,e}(),a=r("77NnVLwu"),s=r.n(a),u=r("bvmrLhnu"),c=r("sa1Ed382"),l=function(){function e(){this.name="project id plugin"}return e.prototype.onGTAEvent=function(t){var r=c.router.getUrl?c.router.getUrl():"",o=e.checkReg.exec(r);if(o){var i=n.f(o,2)[1],a=t.projectid||i,l=c.APP.getCurrentProject()||{},p=l.id===a?l.get("_organizationId"):null;t.projectid=a,t.organizationid=t.organizationid||p,l instanceof s.a&&l.id===a&&(t.projecttype=Object(u.getProjectGtaType)(l.toJSON()))}return t},e.checkReg=/project\/([\da-f]{24})/i,e}(),p=function(){function e(){this.name="internal use filter"}return e.prototype.onGTAEvent=function(e){return e.private?(this.name="internal use filter (for "+e.private+")",null):e},e}(),f=function(){function e(){this.name="GTASessionPlugin"}return e.session=function(t,r,n){if(void 0===n&&(n=e.DefaultTimeout),e.Sessions.has(t)){var o=e.Sessions.get(t);this.cancelTimer(o.timeoutId)}var i=this.createTimer(t,n);e.Sessions.set(t,{duration:n,timeoutId:i,value:r})},e.close=function(t,r){void 0===r&&(r=!0);var n=e.Sessions.get(t);n&&(e.Sessions.delete(t),null===n.timeoutId||r||this.cancelTimer(n.timeoutId))},e.repeat=function(e,t,r){return null!==t?(this.cancelTimer(t),this.createTimer(e,r)):null},e.createTimer=function(e,t){var r=this;return"number"==typeof t&&t!==1/0?window.setTimeout(function(){return r.close(e,!1)},t):null},e.cancelTimer=function(e){"number"==typeof e&&window.clearTimeout(e)},e.prototype.onGTAEvent=function(t){var r=t.session,o=n.g(t,["session"]);if("string"==typeof r){var i=e.Sessions.get(r);if(i){var a=e.repeat(r,i.timeoutId,i.duration);return e.Sessions.set(r,n.a({},i,{timeoutId:a})),n.a({},o,{sessionId:i.value})}return n.a({},o,{sessionId:e.UnMatchedIdentifier})}return t},e.DefaultTimeout=1/0,e.Placeholder="NO-SESSIONID",e.UnMatchedIdentifier="UNMATCHED-SESSIONID",e.Topics={FullSearch:"full-search",QuickSearch:"search"},e.Sessions=new Map,e}();r.d(t,"plugins",function(){return d});var d=[i,l,p,f]},zxyTAlCn:function(e,t,r){"use strict";var n;r.d(t,"a",function(){return n}),function(e){e.All="all",e.OnlyTopLevel="onlyTopLevel",e.ExceptTopLevel="exceptTopLevel"}(n||(n={}))},zyyVdOGF:function(e,t,r){"use strict";var n=r("RSFv0j4e"),o=function(e,t){return Object(n.a)(e.unallocated,t.unallocated)},i=r("q1tIBJhx"),a=r.n(i),s=r("sa1Ed382"),u=r("TSYQbtd+"),c=r.n(u),l=r("s59ACGQN"),p=r("QEOS9Poo"),f=r("L4lJ71Hm"),d=function(e){var t=e.className,r=e.count,n=e.projectId,o=e.organizationId;return a.a.createElement("div",{className:c()(t,f.wrap),onClick:function(){s.gta.event({action:"open detail",method:"click",organizationid:o,projectid:n,page:"Organization Page",type:"unclaimed",segment:"project table view"}),l.a.onOpen({filter:{isSubtask:!1,sprintId:[p.b]},report:"overview_report",temp:"unassigned_detail",_projectId:n})}},a.a.createElement("span",null,r))};r.d(t,"b",function(){return o}),r.d(t,"a",function(){return d})},zzqnp9bg:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return i});var n=r("IssmDVnT"),o=n.HttpHeaders.Key.RequestId,i=function(e){var t=e.headers,r=e.body;return{requestId:t.get(o),result:r.result}}}}]);
//# sourceMappingURL=create-project-template~teambition.c8fb6a70.chunk.js.map