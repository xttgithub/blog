(this.webpackJsonp=this.webpackJsonp||[]).push([["teambition"],{"++xunwor":function(e,t,n){var r,o,i,s={}.hasOwnProperty;r=n("Wks7Fgjk"),o=n("VuB9cZyl"),i={entry:"entries"},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.name="activities",t.prototype.model=r,t.prototype.orderBy="earliest-created",t.prototype.url=function(){return(i[this.boundToObjectType]||this.boundToObjectType+"s")+"/"+this._boundToObjectId+"/activities"},t.prototype.sync=function(e,n,r){return null==r&&(r={}),r.url=r.fetchUrl||this.url(),t.__super__.sync.apply(this,arguments)},t.prototype.create=function(e,n){return null==n&&(n={}),n.url=this.url(),t.__super__.create.apply(this,arguments)},t}()},"+/BQlYPx":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("u//1fy1x"),o=n("IOVY6N/r"),i=n.n(o),s=Object(r.default)(i.a)},"+3Dxh9Ew":function(e,t,n){var r;r=n("sa1Ed382"),e.exports=function(){function e(e){this.src=e.src,this.onTimeUpdate=e.onTimeUpdate,this.onEnd=e.onEnd,this.onStateChange=e.onStateChange,this.duration=e.duration,this.duration||(this.duration=0),this._audioEl=document.createElement("audio"),this._audioLoaded=!1,this._events={},this._listenTo(this._audioEl,"canplaythrough",this._initListener,!0),this._audioEl.src=e.src}return e.prototype._initListener=function(){return this._audioLoaded=!0,this._setDuration(),this._listenTo(this._audioEl,"durationchange",this._setDuration),this._listenTo(this._audioEl,"timeupdate",this._updateProgress),this._listenTo(this._audioEl,"ended",this._endProgress)},e.prototype._listenTo=function(e,t,n,r){var o,i,s;return(i=this._events)[t]||(i[t]=[]),s=this,o=function(i){if(n.call(s,i),r)return e.removeEventListener(t,o)},this._events[t].push({ele:e,eventListener:o}),e.addEventListener(t,o,!1)},e.prototype._stopListening=function(e,t){var n,r,o,i,s,a,c,l,u;if(e){for(n=this._events[t]||[],this._events[t]=[],u=[],s=0,c=n.length;s<c;s++)(i=n[s]).ele===e?u.push(e.removeEventListener(t,i.eventListener,!1)):u.push(this._events[t].push(i));return u}for(t in l=this._events)for(o=0,a=(r=l[t]).length;o<a;o++)(i=r[o]).ele.removeEventListener(t,i.eventListener,!1);return this._events={}},e.prototype.remove=function(){return this._stopListening(),this._audioEl.src=""},e.prototype.isPaused=function(){return this._audioEl.paused},e.prototype.isEnded=function(){return this._audioEl.ended},e.prototype.playClick=function(){if(this._audioLoaded)return this._audioEl.paused?this._audioEl.play():this._audioEl.pause(),"function"==typeof this.onStateChange?this.onStateChange(this._genResource()):void 0},e.prototype.currentTime=function(){return this._audioEl.currentTime},e.prototype._playPercent=function(){return Math.round(this._audioEl.currentTime/this.duration*1e4)/100},e.prototype.formatDuration=function(e){var t,n,r;return e<=0?t="00:00":((n=Math.floor(e/60))<10&&(n="0"+n),(r=Math.floor(e%60))<10&&(r="0"+r),t=n+":"+r),t},e.prototype._updateProgress=function(){return"function"==typeof this.onTimeUpdate?this.onTimeUpdate(this._genResource()):void 0},e.prototype._genResource=function(){var e,t;return this._audioEl.ended?(e=this.duration,t=100):this._playPercent()>=100?(e=this.duration,t=100):(t=this._playPercent(),e=this.currentTime()),{ended:this.isEnded(),paused:this.isPaused(),currentTime:e,duration:this.duration,playPercent:t}},e.prototype._endProgress=function(){return this._audioEl.paused||this._audioEl.pause(),"function"==typeof this.onEnd?this.onEnd(this._genResource()):void 0},e.prototype._setDuration=function(){var e;return(e=this._audioEl.duration)===Number.POSITIVE_INFINITY?this._audioEl.duration=this.duration:this.duration||"Safari"!==r.ua.getBrowser().name?void 0:this.duration=e},e}()},"+8AC772L":function(e,t,n){e.exports=n.p+"images/d_feijie@2x.0b3254b3.png"},"+8QiCx8R":function(e,t,n){e.exports={"tag-popup-menu":"tag-popup-menu__3pN9"}},"+At+8P7t":function(e,t){e.exports=function(e){return"<h3>"+tb_i18n.get("post")+' ・ <span class="posts-count">0</span></h3>'}},"+GEI6Vp3":function(e,t,n){e.exports={"task-tag-list":"task-tag-list__1MBz","task-tag-list__tag":"task-tag-list__tag__1CoD","task-tag-list__tag-inner":"task-tag-list__tag-inner__iyns"}},"+IbFgNGC":function(e,t,n){},"+Q1vQv1r":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var r=function(e){return!!e&&/^(inbox|search|notification)$/.test(e)},o=function(e){return!!e&&/^(inbox|search|notification)$/.test(e)}},"+XinrvS/":function(e,t,n){},"+Z9OF4Fq":function(e,t){e.exports=function(e){return'<ul class="flex-static thin-scroll scrollable object-menu"></ul><div class="flex-fill flex object-content"></div>'}},"+aDUiIwB":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("TSYQbtd+"),o=n.n(r),i=n("tLZJUYWX"),s=n("q1tIBJhx"),a=n("GESwhXbR"),c=function(e){var t="project-grid-add-card";return s.createElement("div",{className:o()(t+"__component",e.className)},s.createElement("a",{className:t+"__handler",onClick:function(t){var n=e.onCreateProjectClick;n&&n(t)}},s.createElement(a.Icon,{name:"plus",size:19}),s.createElement("span",{className:t+"__handler__text"},i.get("create.new.project"))))}},"+aKKcIe6":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCreateProjectClick=function(e){var n=t.props,r=n.isCreateProjectEnable,o=n.onCreateProjectClick;r&&o&&o(e)},t.handleEnterProjectClick=function(e,n){var r=t.props.onEnterProjectClick;r&&r(e,n)},t.handleStarProjectClick=function(e,n){var r=t.props.onStarProjectClick;r&&r(e,n)},t.handleUnstarProjectClick=function(e,n){var r=t.props.onUnstarProjectClick;r&&r(e,n)},t.handleOpenProjectSettingClick=function(e,n){var r=t.props.onOpenProjectSettingClick;r&&r(e,n)},t.handleSuspendProjectClick=function(e,n){var r=t.props.onSuspendProjectClick;r&&r(e,n)},t.handleUnSuspendProjectClick=function(e,n){var r=t.props.onUnSuspendProjectClick;r&&r(e,n)},t.handleArchiveProjectClick=function(e,n){var r=t.props.onArchiveProjectClick;r&&r(e,n)},t.handleDestoryProjectClick=function(e,n){var r=t.props.onDestoryProjectClick;r&&r(e,n)},t.handleUnArchiveProjectClick=function(e,n){var r=t.props.onUnArchiveProjectClick;r&&r(e,n)},t}return r.d(t,e),t}(o.Component)},"+cJrObP8":function(e,t){e.exports=function(e){var t="",n=e.btns||["ok"],r=e.color||"primary";t+='<h5 class="event-confirm-title"> <b>'+e.title+'</b> <a class="icon icon-remove" data-dismiss="modal"></a></h5><p class="event-confirm-description"> '+e.description+'</p><div class="event-confirm-btns with-'+n.length+'"> ';var o=n;if(o)for(var i,s=-1,a=o.length-1;s<a;)t+=' <button type="button" class="btn btn-'+r+'" data-value="'+(i=o[s+=1])+'"> '+tb_i18n.get("event.confirm.btn."+i)+" </button> ";return t+="</div>"}},"+daK+zGx":function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;s=n("a+N5u/Cl"),c=n("sa1Ed382"),a=n("IM6TaE5+"),i=n("vmWJWrVe"),o=n("krSX/Zau"),r=a.all,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="EmojiView",t.prototype.className="emoji-view hide",t.prototype.index=0,t.prototype.isShowing=!1,t.prototype.swipeThreshold=15,t.prototype.maxIndex=Math.floor(r.length/32),t.prototype.events={"click a.icon-remove":"hide","click .emoji-cell":"selectEmoji","mouseover .emoji-switcher":"switchIndex",wheel:"swipeIndex",mousewheel:function(e){return e.preventDefault()}},t.prototype.initialize=function(e){return null==e&&(e={}),this.options=e,this.$toggler=this.options.$toggler,this.isMulti=this.options.isMulti,this.renderBasic(),this.switchIndex(),this.delegateEmojiEvents()},t.prototype.renderBasic=function(){var e,t,n,i,a,l;for(t=s.groupBy(r,function(e,t){return Math.floor(t/32)}),e=[],n=a=0,l=this.maxIndex;0<=l?a<=l:a>=l;n=0<=l?++a:--a)e.push(t[n]);return i={userId:c.user.id,emojiGroups:e,lang:c.PREFERENCE.getLanguage()},this.$el.html(o(i)),this.$groups=this.$(".emoji-group"),this.$switchers=this.$(".emoji-switcher"),this},t.prototype._switchTo=function(e){return this.index=function(){switch(!1){case!(e<0):return this.maxIndex;case!(e>this.maxIndex):return 0;default:return e}}.call(this),this.$switchers.removeClass("active").eq(this.index).addClass("active"),this.$groups.addClass("hide").eq(this.index).removeClass("hide")},t.prototype.switchIndex=function(e){var t;if((t=+$(null!=e?e.currentTarget:void 0).data("index"))!==this.index)return this._switchTo(0|t)},t.prototype.swipeIndex=function(e){var t;if(e.preventDefault(),!(Math.abs(e.originalEvent.deltaX)<this.swipeThreshold))return this.scrollIndexCache?this.scrollIndexCache(e):(this.scrollIndexCache=s.debounce((t=this,function(e){var n;return n=t.index+(e.originalEvent.deltaX>0?1:-1),t._switchTo(0|n),t.swipeThreshold=1e3,clearTimeout(t.swipeResetId1),clearTimeout(t.swipeResetId2),t.swipeResetId1=s.delay(function(){return t.swipeThreshold=50},160),t.swipeResetId2=s.delay(function(){return t.swipeThreshold=15},600)}),20,!0),this.scrollIndexCache(e))},t.prototype.delegateEmojiEvents=function(){var e;return this.$toggler.on("click.emoji",(e=this,function(){return e.toggle()})),this},t.prototype.selectEmoji=function(e){var t,n;if(n=$(null!=e?e.currentTarget:void 0).data("content"))return"function"==typeof(t=this.options).select&&t.select(n),this.isMulti?void 0:this.hide()},t.prototype.toggle=function(){return this[this.isShowing?"hide":"show"]()},t.prototype.show=function(){var e;return this.$el.handleClickOutside((e=this,function(t){var n;if(n=e.$toggler[0],t.target!==n&&!$.contains(n,t.target))return e.hide()}),"click.emoji"),this.$el.removeClass("hide"),this.isShowing=!0,this.setupHotKey()},t.prototype.hide=function(){return this.$el.addClass("hide"),this.isShowing=!1,this.removeHotKey()},t}()},"+h7VEZku":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("tLZJUYWX"),c=n.n(a),l=n("GESwhXbR"),u=n("d1kOqy5u"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(){var e=["members","all"].indexOf(t.props.visibility)>=0?"involves":"members";t.props.onChange(e)},t}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.visibility,n=e.className,r="unlock",i=c.a.get("visible.to.member"),a=c.a.get("visible.mode.visibility");"involves"===t&&(r="lock",i=c.a.get("visible.to.involve"),a=c.a.get("visible.mode.invisibility"));var p=s()(u["visibility-controller"],u["visibility-controller-hover"],n);return o.createElement("div",{className:p,onClick:this.onChange},o.createElement(l.Icon,{name:r,size:14,className:u["visibility-controller-icon"]}),o.createElement("div",{className:u["visibility-controller-body"]},o.createElement("span",{className:u["visibility-controller-mode"]},a),o.createElement("span",{className:u["visibility-controller-description"]},i)))},t}(o.PureComponent);n.d(t,"VisibilityController",function(){return p})},"+ii260T0":function(e,t){},"+j2D3LI+":function(e,t,n){var r,o,i,s,a,c,l,u,p,d={}.hasOwnProperty;r=n("+2RfZ2TT"),p=n("vmWJWrVe"),c=n("wd/RKGTj"),u=n("GESwhXbR").Toast,o=n("LmAbIdoM"),i=n("saEkUttf"),a=n("RTj5z5YX").InviteLink,l=n("0FRv5rrl"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.viewName="QRInviteView",t.prototype.className="qr-invite-view modal-dialog",t.prototype.events={"focus .base-link-input":"focusLink","click .copy-url-handler":"copyLink","click .reset-url-handler":"resetInvite"},t.prototype.initialize=function(e){var t,n,r;return this.options=e,this.model=this.options.model,this.gtaControl=this.options.gtaControl,this.hasCopySupport=!!("function"==typeof document.queryCommandSupported?document.queryCommandSupported("copy"):void 0),t=!this.options.model&&this.options.orgId?new Promise((r=this,function(e){return l.fetch(r.options.orgId,{silentError:!0,success:function(t){return r.model=t,e(t)}})})):Promise.resolve(this.options.model),n="organization"===this.options.type?new Promise(function(e){return function(t,n){return e.model.fetchInvitelink({success:t,error:n})}}(this)):Promise.resolve(null),t.then(function(){return n}).then(function(e){return function(){if(e.$el)return e.renderBasic(),e.renderBody(),e.listen()}}(this)),this},t.prototype.renderBasic=function(){return this.$el.html(o({title:"organization"===this.options.type?tb_i18n.get("settings.invite.title"):tb_i18n.get("settings.wechat.invite.title")})),this.$body=this.$(".modal-body")},t.prototype.renderBody=function(){return"organization"===this.options.type?(this.unmountReact(this.$body.get(0)),this.renderOrganizationInvite()):this.requestReactView(this.$body.get(0),a,{objectId:this.model.id,objectType:"project",wider:!0,gtaOptions:this.gtaControl&&{action:"copy inviting link",control:this.gtaControl}})},t.prototype.renderOrganizationInvite=function(){return this.$body.html(i({i18n:s(this.options.type,this.model,this.options.membersCount),hasCopySupport:this.hasCopySupport,inviteLink:this.model.get("inviteLink"),mobileInviteLink:this.model.get("mobileInviteLink"),projectPutInfo:this.model.hasPermission("put.info"),expiration:c(this.model.get("expiration")).format("LLL"),need_monkey_patch:"organization"===this.options.type})),this.renderQR(this.$(".tb-qrcode"),this.model.get("inviteLink")),this.renderQR(this.$(".wechat-qrcode"),this.model.get("mobileInviteLink"))},t.prototype.listen=function(){return"organization"===this.options.type&&this.listenTo(this.model,"change:mobileInviteLink",this.renderBody),this},t.prototype.renderQR=function(e,t){return e.qrcode({size:150,text:t,background:"white"}),this},t.prototype.focusLink=function(e){var t;return(t=r(e.currentTarget).closest(".invite-link").children("input.form-control")).selectRange(0,t.val().length),this},t.prototype.copyLink=function(e){var t;this.focusLink(e),t=!1;try{t=document.execCommand("copy")}catch(n){n}return r(e.currentTarget).closest(".copy-url-handler").text(t?tb_i18n.get("copy.link.success"):tb_i18n.get("copy.link.failed")),this},t.prototype.resetInvite=function(){var e;if(!(e=this.$(".reset-url-handler")).hasClass("disabled"))return this.model.resetInvite({beforeSend:function(){return e.addClass("disabled")},error:function(){return u.error(tb_i18n.get("settings.invite.reset.error"))},complete:function(){return e.removeClass("disabled")}}),this},t}(),s=function(e,t,n){var r;return{invite_tip:function(){switch(e){case"project":return tb_i18n.get("settings.invite.project.tip");case"organization":return r=t.payment.memberQuota,tb_i18n.get("settings.invite.organization.tip",n,r)}}(),tb_scan:tb_i18n.get("settings.invite.tb.scan"),wechat_scan:tb_i18n.get("settings.invite.wechat.scan")}}},"+khYcOo0":function(e,t,n){e.exports={sidebar:"sidebar__2IB2",sideline:"sideline__25yN","testhub-info":"testhub-info__1gJU","testhub-info-header":"testhub-info-header__1OZb","testhub-info-description":"testhub-info-description__14iy","testhub-info-breadcrumb":"testhub-info-breadcrumb__3k9J","testhub-info-breadcrumb-crumb":"testhub-info-breadcrumb-crumb__1pDk","testhub-info-breadcrumb-home":"testhub-info-breadcrumb-home__4dag","testhub-info-breadcrumb-delimeter":"testhub-info-breadcrumb-delimeter__MUaR","testhub-info-settings":"testhub-info-settings__zOBs",tree:"tree__LfXr",creator:"creator__3pqF"}},"+oXWdItZ":function(e,t,n){e.exports=n("gDBASSQ2")+"\n\nfragment projectSchema on Project {\n  _id\n  name\n  logo\n  proTemplateType\n  _organizationId\n  organization {\n    name\n    _id\n    plan {\n      ...plan\n    }\n  }\n  applications {\n    name\n  }\n  plan {\n    ...plan\n  }\n  roleRight {\n    role: permissionBinding {\n      permissions\n    }\n    _roleId\n    _orgRoleId\n  }\n}\n"},"+pMB8BsN":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E=function(e,t){return function(){return e.apply(t,arguments)}},T={}.hasOwnProperty;n("a+N5u/Cl"),S=n("sa1Ed382"),b=n("vmWJWrVe"),n("tLZJUYWX"),n("GESwhXbR").Toast,n("2qRnoGmE"),c=n("ypWNgh6R"),y=n("OmupbwLD"),u=n("85182E8g"),v=n("ioaOqjIU"),m=n("oEzVJ1gN"),g=n("rvh1g4f9"),p=n("yt+aIX9v").PowerUpModalComponent,a=n("g09zqn9P"),r=n("xd5oHs80"),s=n("55DrWcZL"),d=n("rd17oOkg").ProjectMenuNotice,i=n("zTT+LU7r").CustomFieldNotify,n("0FRv5rrl"),h=n("77NnVLwu"),w=n("4m0cgL3g"),_=w.canSaveAsTemplate,k=w.canForkProjectTo,C=n("g/otyo9p"),f=C.ProjectTemplateDetailModal,l=C.Mode,o=n("6aFYJidP"),e.exports=function(e){function t(){return this.showPowerUpConfig=E(this.showPowerUpConfig,this),this.showProjectOverviewAppDetail=E(this.showProjectOverviewAppDetail,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)T.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,b),t.prototype.viewName="ActivityPanelAllView",t.prototype.className="activity-panel-all",t.prototype.events={"click .app":"showAppSettings","click .project-tags-handler":"showTags","click .project-powerup-handler":"showPowerUpConfig","click .project-archives-handler":"showProjectArchives","click .project-calendar-handler":"showICalendar","click [data-type=template]":"createTemplate","click [data-type=git]":"settingGit"},t.prototype.initialize=function(e){return this.options=e,this._projectId=e._projectId,this.subscribe(h.fetch$(this._projectId).do((t=this,function(e){return t.projectModel=e,t.initView()})));var t},t.prototype.initView=function(){return this.organizationsCollection=u.get(0),this.tasklistsCollection=v.get(this._projectId),this.render(),this.listen()},t.prototype.loadMore=function(){var e;return null!=(e=this.activitiesView)?e.loadMore():void 0},t.prototype.render=function(){if(this.renderBasic(),!this.projectModel.get("isTemplate"))return this.renderCustomfieldNotify(),this.renderNotice()},t.prototype.listen=function(){return this.listenTo(this.projectModel,"change:applications",function(){if(this.projectModel.isAppChanged("tasks")&&this.renderBasic(),this.projectModel.isAppChanged("gitintegration"))return this.renderBasic()}),this.listenTo(this.tasklistsCollection,"add remove",this.renderBasic),this},t.prototype.renderBasic=function(){var e,t;return this.powerupConfigMountNode&&this.unmountReact(this.powerupConfigMountNode),e=this.projectModel.get("_organizationId"),t=this.organizationsCollection.get(e),this.$el.html(o({isGhost:S.user.get("isGhost"),isTemplatePanel:this.projectModel.get("isTemplate"),isGitEnabled:this.projectModel.isAppEnabled("gitintegration"),roleScope:this.projectModel.getRoleScope(),visibility:this.projectModel.get("visibility"),isInProject:_(this.projectModel,t),canForkProject:k(this.projectModel,e),permissions:{getSubscribe:this.projectModel.hasPermission("get.subscribe"),organizationGetInfo:null!=t?t.hasPermission("get.info"):void 0}})),this.powerupConfigMountNode=this.$(".power-up-config-mount-node").get(0),this.setupPlugins({_projectId:this._projectId})},t.prototype.renderCustomfieldNotify=function(){return this.$customfieldNotifyWrapper=this.$(".customfield-notify-wrapper"),this.requestReactView(this.$customfieldNotifyWrapper.get(0),i,{projectId:this._projectId})},t.prototype.renderNotice=function(){return this.$noticeWrapper=this.$(".project-menu-notice-wrapper"),this.requestReactView(this.$noticeWrapper.get(0),d,{project:this.projectModel.toJSON(),onProjectOverviewBannerClick:this.showProjectOverviewAppDetail,hasPermission:this.projectModel.getRoleScope()>=1})},t.prototype.showAppSettings=function(e){return this.showProjectSettings(),this},t.prototype.showProjectSettings=function(){return this.requestSubView(m,{projectModel:this.projectModel}),this},t.prototype.showProjectOverviewAppDetail=function(){return this.unmountReact(this.powerupConfigMountNode),this.requestReactView(this.powerupConfigMountNode,p,{fromWhere:"appDetail",featureAppName:"projectinfoapp",defaultOpened:!0,projectModel:this.projectModel}),this},t.prototype.showPowerUpConfig=function(){return this.unmountReact(this.powerupConfigMountNode),this.requestReactView(this.powerupConfigMountNode,p,{fromWhere:"appList",defaultOpened:!0,projectModel:this.projectModel}),this},t.prototype.showTags=function(){var e;return e={_projectId:this._projectId},this.requestSubView(c,"tag").open(g,e),this},t.prototype.showICalendar=function(){var e;return this.projectModel.fetchCallink({success:(e=this,function(t){return e.requestSubView(y).open(a,{title:e.projectModel.get("name"),webcal:t.taskCalLink})})}),this},t.prototype.showProjectArchives=function(){return this.requestSubView(c,"archive").open(r,{_projectId:this._projectId}),this},t.prototype.createTemplate=function(){return f.open({mode:l.copy,organizationId:this.projectModel.get("_organizationId"),projectId:this.projectModel.id}),this},t.prototype.settingGit=function(){return this.requestSubView(c,{title:tb_i18n.get("activity.panel.menu.git.integrate"),modalPadding:!1}).open(s,{projectModel:this.projectModel})},t}()},"+wb0Gkt/":function(e,t,n){"use strict";n.r(t),n.d(t,"dateInfoFromEvent",function(){return c}),n.d(t,"updateDateInfo",function(){return l}),n.d(t,"endDateOfAllDay",function(){return d}),n.d(t,"inclusiveAllDayEndDate",function(){return h}),n.d(t,"switchAllDayOn",function(){return m}),n.d(t,"switchAllDayOff",function(){return f}),n.d(t,"switchAllDay",function(){return g}),n.d(t,"switchRepeatOff",function(){return v});var r=n("mrSGxOB2"),o=n("wd/RKGTj"),i=n.n(o),s=n("IssmDVnT"),a=n("HHtVDBJc"),c=function(e){var t={startDate:e.get("startDate"),endDate:e.get("endDate"),isAllDay:e.get("isAllDay")};return e.isRecurrenceEventInstance()&&(t.recurrence=e.get("recurrence")),t},l=function(e,t,n){if("startDate"!==t&&"endDate"!==t)return null;var o=e.recurrence,s=r.g(e,["recurrence"]),a=function(e,t,n){var r=i()(e.startDate),o=i()(e.endDate);if("startDate"===t){var s=o.diff(r);return{startDate:n.toISOString(),endDate:n.clone().add(s,"ms").toISOString()}}return n.isBefore(r)&&(n=r.clone().add(1,"hour")),{startDate:e.startDate,endDate:n.toISOString()}}(s,t,n);if(!o)return r.a({},s,a);var c=u(o);if(!c)return null;var l=c,d=r.a({},e,a,{originStartDate:l});if("endDate"===t)return d;var h=i()(a.startDate).diff(e.startDate);if(0===h)return d;var m=r.a({},d,p({recurrence:o,originStartDate:l},h)),f=u(m.recurrence);return f&&f===m.originStartDate?m:null},u=function(e){var t=a.getRRuleSet(e),n=r.f(t.all(function(e,t){return t<1}),1)[0];return n?n.toISOString():void 0},p=function(e,t){var n=e.recurrence,r=e.originStartDate,o=a.getRRuleSet(n),s=i()(r).add(t,"ms");return a.updateRRuleSet(o,{dtstart:s.toDate()}),a.shiftExDatesByMilliseconds(o,t),{recurrence:o.valueOf(),originStartDate:s.toISOString()}},d=function(e,t){return void 0===t&&(t=1),i()(e).add(t,"days").startOf("day")},h=function(e){return i()(e).subtract(1,"day").endOf("day")},m=function(e){if(e.isAllDay)return e;var t=i()(e.startDate).startOf("day"),n=l(e,"startDate",t);return n&&(n.endDate=d(n.startDate).toISOString(),n.isAllDay=!0),n},f=function(e){if(!e.isAllDay)return e;var t=i()(e.startDate).add(1,"hour"),n=l(e,"endDate",t);return n&&(n.isAllDay=!1),n},g=function(e,t){return t?m(e):f(e)},v=function(e){return s.EventSDK.isRecurrent(e)?r.a({},e,{recurrence:null}):e}},"+xRnPW3Y":function(e,t,n){e.exports=n.p+"images/pro-medal.0cc662c7.png"},"/4WNKxan":function(e,t,n){},"/5MwcYUV":function(e,t,n){var r,o={}.hasOwnProperty;r=n("GsAQlUN+"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="EventConfirmUpdateView",t.prototype.initialize=function(){var e,n,r;return t.__super__.initialize.apply(this,arguments),r=tb_i18n.get("event.confirm.update.title"),n=tb_i18n.get("event.confirm.update.description"),e=["current","next","all"],this.render({title:r,description:n,btns:e})},t}()},"/GeFQFAU":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("s0r7VfKc");function s(e){var t=r.f(Object(o.useState)(null),2),n=t[0],s=t[1];return Object(o.useEffect)(function(){var t=i.default.getTaskPrivilege({_projectId:e}).changes().subscribe(function(e){var t=r.f(e,1)[0];return s(t)});return function(){return t.unsubscribe()}},[e]),n}var a=n("8yf6doCl"),c=n("4c1CS0b3"),l=function(e){var t=r.f(Object(o.useState)({point:0,isLoading:!0,onRefresh:function(){}}),2),n=t[0],s=t[1];return Object(o.useEffect)(function(){var t=new a.Subject,r=function(){return t.next(0)},o=function(){return s({point:n.point,isLoading:!0,onRefresh:r})},l=t.startWith(0).switchMap(function(){return i.default.fetch.getStoryPoint(e).do(o).map(function(e){return e.storyPoint||0}).catch(function(){return c.Observable.of(0)})}).subscribe(function(e){return s({point:e,isLoading:!1,onRefresh:r})});return function(){return l.unsubscribe()}},[e]),n},u=n("wd/RKGTj"),p=n.n(u),d=c.Observable.interval(6e4).share(),h=function(e){var t=p()(),n=p()(e);return n.year()!==t.year()?n.format("L"):t.diff(n,"hour",!0)<1?n.fromNow():n.calendar()+" "+n.format("LT")};function m(e){var t=r.f(Object(o.useState)(function(){return h(e)}),2),n=t[0],i=t[1];return Object(o.useEffect)(function(){var t=d.startWith(0).subscribe(function(){i(h(e))});return function(){t.unsubscribe()}},[e.getTime()]),n}n("a+N5u/Cl");n("gh8QIhMV");function f(e){var t=Object(o.useRef)(e);return Object(o.useEffect)(function(){t.current=e}),t.current}n.d(t,"d",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return m}),n.d(t,"b",function(){return f})},"/LaY8A3m":function(e,t,n){e.exports={"detail-head":"detail-head__2h16","detail-head__left":"detail-head__left__21HR","detail-head__right":"detail-head__right__2ROu","detail-head__object-type":"detail-head__object-type__BWS4","detail-head__object-caption":"detail-head__object-caption__3OtG","default-caption":"default-caption__2C1d","division-caption":"division-caption__K2Ss"}},"/NDgfj1y":function(e,t,n){e.exports=n.p+"images/empty-room@2x.ea254399.png"},"/W5he3Er":function(e,t,n){"use strict";n.r(t),n.d(t,"ScenarioInfoViewsMap",function(){return o});var r=n("7lRKyXCu"),o={note:r,priority:n("RqASgP7q"),tag:n("UWIAOOh5"),worktimes:n("AEkluhuA"),storyPoint:n("QcmE5UU1"),taskProgress:n("gajqdbew"),sprint:n("GlvjHbV/"),location:n("n8Repvf6"),content:r,rating:null}},"/Y5FF5ZO":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h;(o=function(){return new Promise(function(e){return n.e(2).then(function(t){var r;return r=n("qiHRENh3"),e(r)}.bind(null,n)).catch(n.oe)})}).lazy=!0,(c=function(){return new Promise(function(e){return n.e(16).then(function(t){var r;return r=n("k9OSWJqA"),e(r)}.bind(null,n)).catch(n.oe)})}).lazy=!0,(s=function(){return new Promise(function(e){return n.e(45).then(function(t){var r;return r=n("Tfok8nm7"),e(r)}.bind(null,n)).catch(n.oe)})}).lazy=!0,(a=function(){return new Promise(function(e){return n.e(49).then(function(t){var r;return r=n("eYI6VPBO"),e(r)}.bind(null,n)).catch(n.oe)})}).lazy=!0,(i=function(){return new Promise(function(e){return n.e(40).then(function(t){var r;return r=n("OWYV4PDj"),e(r)}.bind(null,n)).catch(n.oe)})}).lazy=!0,(r=function(){return new Promise(function(e){return n.e(22).then(function(t){var r;return r=n("NH1iUEg2"),e(r)}.bind(null,n)).catch(n.oe)})}).lazy=!0,(l=function(){return new Promise(function(e){return n.e(46).then(function(t){var r;return r=n("fSZ/ALS4"),e(r)}.bind(null,n)).catch(n.oe)})}).lazy=!0,(h=function(){return new Promise(function(e){return n.e(27).then(function(t){var r;return r=n("Sp5V25JM"),e(r)}.bind(null,n)).catch(n.oe)})}).lazy=!0,(u=function(){return new Promise(function(e){return n.e(34).then(function(t){var r;return r=n("6DKX0iXy"),e(r)}.bind(null,n)).catch(n.oe)})}).lazy=!0,(d=function(){return new Promise(function(e){return n.e(11).then(function(t){var r;return r=n("kp6JtyzS"),e(r)}.bind(null,n)).catch(n.oe)})}).lazy=!0,(p=function(){return new Promise(function(e){return n.e(3).then(function(t){var r;return r=n("LdeB/B40"),e(r)}.bind(null,n)).catch(n.oe)})}).lazy=!0,e.exports={BoardView:o,LibraryView:c,EventsView:s,GroupchatView:a,BookkeepingView:i,AnalyticsView:r,PluginView:l,WallView:h,ProjectInfoView:u,TestplanAppView:d,SmartGroupView:p}},"/ba4BRMM":function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;s=n("a+N5u/Cl"),i=n("VuB9cZyl"),o=n("kzkYb0WA"),r=["groups","projects","users"],e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.name="chatMessages",t.prototype.model=o,t.prototype.pageNum=30,t.prototype.orderBy="earliest-created",t.prototype.getParams=function(e,t){if("read"===e)return{boundToObjectType:this.boundToObjectType,_boundToObjectId:this._boundToObjectId}},t.prototype.getRoomInfo=function(e,t,n){if(null==n&&(n={}),s.include(r,e))return n.url="rooms/"+e+"/"+t,this.sync("read",this,n)},t}()},"/dfPTVwF":function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};i=n("a+N5u/Cl"),a=n("sa1Ed382"),o=n("qHH6+g6Q"),s=function(){return{category:{attr:"category",title:tb_i18n.get("bookkeeping.home.fields.category"),isDefault:!0,isSort:!0},content:{attr:"content",title:tb_i18n.get("bookkeeping.home.fields.content"),isDefault:!0,isSort:!0},creator:{attr:"creator",title:tb_i18n.get("bookkeeping.home.fields.creator"),isDefault:!0,isSort:!0},amount:{attr:"amount",title:tb_i18n.get("bookkeeping.home.fields.amount"),isDefault:!0,isSort:!0},date:{attr:"date",title:tb_i18n.get("bookkeeping.home.fields.date"),isDefault:!0,isSort:!0}}},r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.name="bookkeeping",t.prototype.urlRoot="bookkeepings",t.prototype.parse=function(e){var t,n;return(t=i.extend(this.toJSON(),e))._approverIds&&(t.approveRight=(n=a.user.id,l.call(t._approverIds,n)>=0)),t},t.prototype.getDisplayFields=function(e){var t,n,r,o,i,a,c,u;for(a=s(),c=[],t=0,o=(i=this.get("displayFields")||[]).length;t<o;t++)(r=a[i[t]])&&c.push(r);for(n in a)(r=a[n]).isDefault&&(u=r.attr,l.call(i,u)<0)&&c.push(r);return c},t.prototype.getHiddenFields=function(e){var t,n,r,o,i,a;for(t in o=s(),r=this.get("displayFields")||[],i=[],o)(n=o[t]).isDefault||(a=n.attr,l.call(r,a)>=0)||i.push(n);return i},t.prototype.getFields=function(e){var t,n,r,o,i;for(o=s(),i=[],t=0,r=e.length;t<r;t++)(n=o[e[t]])&&i.push(n);return i},t}(),e.exports=r},"/hgGZ9Te":function(e,t,n){e.exports=n.p+"images/d_tu@2x.c58f4342.png"},"/lMFBNj1":function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty;c=n("sa1Ed382"),a=n("gBe2F1Rz"),s=n("0FRv5rrl"),i=n("ypWNgh6R"),o=n("NT8FmA7+"),r=n("zWSZY3sR"),l=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="MemberTasksView",t.prototype.tagName="section",t.prototype.className="member-tasks-view all-tasks-list",t.prototype.events={"click .tasks-board-date-menu":"toggleDateSelector","click .task-handover-handler":"openTaskHandover","click .task .task-content-set":"gtaTaskClick","click .task .check-box-wrapper":"gtaToggleCompleteTask"},t.prototype.initialize=function(e){var n;return this.options=e,this.memberModel=this.options.cardModel,this.load({success:(n=this,function(){return n.renderBasic(),n.refreshUndoTasks(),n.listen()})}),t.__super__.initialize.apply(this,arguments)},t.prototype.load=function(e){var t;return this.showLoadingIndicator(this.$el),new Promise((t=this,function(e,n){return t.memberModel.fetchMemberTasks({expireCache:{namespace:"member_tasks",expire:120},success:e,error:function(e,t){return n(t)}})})).then(function(t){return function(n){if(t.$el)return t.tasksCollection=new a(n),t.hideLoadingIndicator(),e.success()}}(this)).catch(function(e){return l(e)}),this},t.prototype.loadDoneTasks=function(e){var t;return e.attrs||(e.attrs={}),this.hideLoadingIndicator(),this.showLoadingIndicator(),new Promise((t=this,function(n,r){return t.memberModel.fetchMemberDoneTasks({attrs:e.attrs,success:n,error:function(e,t){return r(t)}})})).then(function(t){return function(n){if(t.$el)return t.doneTasksCollection&&1!==t.donetasksPage?t.doneTasksCollection.add(n):t.doneTasksCollection=new a(n,{comparator:!1}),t.doneTasksCollection.hasMore=t.doneTasksCollection.checkHasMore(n),t.hideLoadingIndicator(),e.success()}}(this)).catch(function(e){return l(e)}),this},t.prototype.openTaskHandover=function(){if(this.options.objectModel instanceof s)return this.requestSubView(i,{size:"large",modalPadding:!1,title:tb_i18n.get("member.handover.tasks.title")}).open(o,{userId:this.memberModel.id,orgId:this.options.objectModel.id})},t.prototype.gtaTaskClick=function(e){var t;return t=$(e.currentTarget),c.gta.event({action:"open detail",control:"Org Member Task List",series:t.data("series")||0,type:t.data("type")||"task"})},t.prototype.gtaToggleCompleteTask=function(e){var t;return t=$(e.currentTarget),c.gta.event({action:"toggle complete task",control:"Org Member Task List",series:t.data("series")||0,type:t.data("type")||"task"})},t}()},"/nSGaWXY":function(e,t){e.exports=function(e){var t="";return e.showOfficeHandler&&(t+=' <div class="previewer-office-handler"> ',e.officePreviewerEnabled?t+=" "+tb_i18n.get("previewer.office.fallback")+' <a class="link-add-handler office-handler">'+tb_i18n.get("previewer.office.fallback.use.pdf")+"</a> ":t+=' <a class="link-add-handler office-handler"> '+tb_i18n.get("previewer.office.fallback.use.office")+" </a> ",t+=" </div>"),t}},"/oIQYRV/":function(e,t,n){e.exports={"inline-flex":"inline-flex__2MKA"}},"/qYi9WKN":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j={}.hasOwnProperty;w=n("a+N5u/Cl"),k=n("vmWJWrVe"),h=n("bZr3G77e"),b=n("GESwhXbR").Toast,y=n("RLD3BeS/").ToastWithObject,v=n("YdqH4v7N"),M=n("sa1Ed382"),u=n("X7+VPM8x"),m=n("dLlRnP2h"),E=n("cl35kkSI").preheadPrivateChannel,g=n("85182E8g"),f=n("bt0fKs+7"),_=n("OmupbwLD"),p=n("8rMdUFc+"),s=n("IeSewan2"),a=n("ocyOxKWv"),c=n("O1gcYhp8"),l=n("lcbRHKA0"),d=n("Zvfygpg0").GroupInfo,r=n("sfyFhkUk").ChatModalContainer,i=n("U7xrKiaO").ChatPanelBridge,I=n("cl35kkSI"),C=I.closeView,S=I.deleteActivedChannel,T=n("x89q56rT").quitFromGroup,e.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)j.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,k),t.prototype.viewName="ChatModalView",t.prototype.hotkeys={esc:"remove"},t.prototype.events={"click .close-handler":"remove","click .readable a":"linkHandler","click .message-panedl-placeholder-close":"removeChatModal"},t.prototype.inCreatingChat=!1,t.prototype.initialize=function(e){return this.options=e||{},this.privateMessageUIData=e.pseudoMessageData,this.onClose=this.options.onClose||function(){},this.delayRemove=w.debounce(this.remove,0),this.render()},t.prototype.remove=function(){return i.switchChatPanelState({inCreatingChat:!1}),C(),this.parentView.close(),this.onClose(),t.__super__.remove.apply(this,arguments)},t.prototype.isShowCreatGroup=function(){return g.get(0).length},t.prototype.onCreateNewGroupChat=function(){var e,t;return e=M.PREFERENCE.get("lastWorkspace"),this.requestSubView(_).open(p,{organizationId:"personal"===e?null:e,onCreateSuccess:(t=this,function(e){if(t.el)return t.onSwitchCreatChat(!1),E(w.extend(e.toJSON(),{avatarUrl:e.get("logo"),channelType:"groups"}))})})},t.prototype.onClickGotoProject=function(e){return this.delayRemove(),M.router.navigate("project/"+e,{trigger:!0})},t.prototype.onRemoveGroup=function(e){return h.ajax("groups/"+e.id,{type:"DELETE",error:function(e){return b.error(tb_i18n.get("organization.removeGroup.request.error"))},success:function(e){return b.success(tb_i18n.get("organization.removeGroup.request.success"))}})},t.prototype.onInviteMemberToGroup=function(e,t){return function(n){return e.addMembers(n).then((r=this,function(){return r.onEnterGroupInfo({groupModel:e,membersCollection:t})}));var r}},t.prototype.onRemoveMemberFromGroup=function(e,t){return function(n){return e.removeMembers([n]).then((r=this,function(){return r.onEnterGroupInfo({groupModel:e,membersCollection:t})}));var r}},t.prototype.onRenameGroup=function(e,t,n){var r,o;return null==n&&(n=!1),r=t.get("name"),new Promise(function(n,r){return t.save(null,{attrs:{name:e},success:n,error:r})}).then((o=this,function(){if(!n)return y.rename(function(){return o.onRenameGroup(r,t,!0)})}))},t.prototype.onEnterGroupInfo=function(e){var t,n,r,o;if(n=e.groupModel,r=e.membersCollection,n&&this.el)return this.listenTo(n,"change:name",function(){return this.onEnterGroupInfo({groupModel:n})}),t=this.$(".message-panel-mask").get(0),this.requestReactView(t,d,{group:n.toJSON(),onRemoveMember:this.onRemoveMemberFromGroup(n,r).bind(this),onInviteMember:this.onInviteMemberToGroup(n,r).bind(this),onRemoveGroup:(o=this,function(){return o.onRemoveGroup(n),S()}),onQuitGroup:function(){return n.quit(),S(),T()},onExitGroupInfo:function(e){return function(){return e.stopListening(n),e.unmountReact(t)}}(this),onSubmit:function(e){return function(t){return e.onRenameGroup(t,n)}}(this),onCloseChat:this.removeChatModal.bind(this)},{redux:!0})},t.prototype.onClearReadedMessages=function(e,t){if(e>0)return this.requestSubView(u,{title:tb_i18n.get("inbox.clear.messages"),description:tb_i18n.get("inbox.clear.messages.desc"),onConfirm:function(){return t(),M.gta.event({action:"deleted all read messages",page:"Chats Page",segment:"Side Chat List"})}})},t.prototype.onSwitchCreatChat=function(e){return this.inCreatingChat=e,i.switchChatPanelState({inCreatingChat:this.inCreatingChat}),w.delay((t=this,function(){return t.renderPanelLeft()}));var t},t.prototype.render=function(){return this.requestReactView(this.el,r,{renderPanel:w.debounce(this.renderPanel,300).bind(this),onClearReadedMessages:this.onClearReadedMessages.bind(this),privateMessageUIData:this.privateMessageUIData,onSwitchCreatChat:this.onSwitchCreatChat.bind(this),onClickGotoProject:this.onClickGotoProject.bind(this),isShowCreatGroup:this.isShowCreatGroup(),onCreateNewGroupChat:this.onCreateNewGroupChat.bind(this)},{redux:!0}),this.renderPanelLeft()},t.prototype.renderPanelLeft=function(){if(this.inCreatingChat)return this.$chatRoomAddView?this.$chatRoomAddView.onFocusSearchInput():this.renderCreatingChatView()},t.prototype.renderCreatingChatView=function(){var e;return this.$newChatWrapper=this.$(".new-chat-wrapper"),this.$chatRoomAddView=this.requestSubView(s,{onRoomClick:(e=this,function(t){return e.onSwitchCreatChat(!1)}),onCreateNewGroupChat:this.onCreateNewGroupChat.bind(this)}),this.$newChatWrapper.html(this.$chatRoomAddView.$el)},t.prototype.getTargetId=function(e){var t;return t=null,e.group?t=e.group._id:e.project?t=e.project._id:e.creator&&(t=e.creator._id),t},t.prototype.renderPanel=function(e){var t,n;if(this.$el&&(null!=(t=this.panelView)&&t.remove(),this.panelView=null,e))return n=e.group?c:e.project?l:a,this.panelView=this.requestSubView(n,{roomId:e._objectId,modelId:this.getTargetId(e),messageModel:new f(e,{bindByMatrix:!1}),removeChatModal:this.removeChatModal.bind(this),onEnterGroupInfo:this.onEnterGroupInfo.bind(this),onClickGotoProject:e.project?this.onClickGotoProject.bind(this):void 0}),this.$(".panel-right").html(this.panelView.$el)},t.prototype.removeChatModal=function(){var e;return e=i.isChatPanelInCreating()?"Create Chat List":"Side Chat List",M.gta.event({action:"close chats page",control:"Close Button",page:"Chats Page",segment:e}),this.delayRemove()},t.prototype.linkHandler=function(e){var t;return e.preventDefault(),m.linkHandler(e.currentTarget,void 0,(t=this,function(){return t.remove()})),!1},t}(),w.extend(o.prototype,v),e.exports=o},"/vFqEyd8":function(e,t,n){e.exports=n.p+"images/search@2x.b61053d7.png"},"/w7ETy+M":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("sa1Ed382"),a=n("TSYQbtd+"),c=n.n(a),l=n("tLZJUYWX"),u=n.n(l),p=n("2qRnoGmE"),d=n.n(p),h=d.a.FEATURES,m=h.enableHotKey,f=h.helpEntryHelpCenter,g=h.helpEntryUpdateLog,v=h.helpEntryCaseCenter,b=h.helpEntryHotKey,y=h.helpEntryOnlineSupport,k=h.helpEntryDownloadAppSupport,_=[{key:"helpEntryOnlineSupport",get name(){return l.get("submit.ticket.chat.with.us")},icon:"headset",isShow:!!y,gtaAction:"chat with us"},{key:"helpEntryUpdateLog",get name(){return l.get("submit.ticket.menu.update.log")},icon:"rich-text",link:"string"==typeof g?g:d.a.BLOG_URL+"/zh/updates",get isShow(){return"zh"===l.getLanguage()&&!!g},gtaAction:"view online class"},{key:"helpEntryHelpCenter",get name(){return l.get("submit.ticket.menu.support")},icon:"collection",link:"string"==typeof f?f:d.a.HELP_CENTER_URL,isShow:!!f,gtaAction:"enter help center"},{key:"helpEntryCaseCenter",get name(){return l.get("helper.case.center")},icon:"briefcase-stroke",link:"string"==typeof v?v:d.a.CASE_CENTER_URL+"?utm_source=case",get isShow(){return"zh"===l.getLanguage()&&!!v},gtaAction:"enter case center"},{key:"helpEntryHotKey",get name(){return l.get("helper.shortcuts")},icon:"shortcut",isShow:!!m&&!!b,gtaAction:"show hotkey list"},{key:"privateDownloadApp",get name(){return l.get("download.app")},icon:"circle-arrow-down-o",isShow:k,gtaAction:"open app download"}],w=[{get title(){return l.get("helper.shortcuts.for.global")},list:[{key:"w",get description(){return l.get("helper.shortcuts.for.global.dashboard")}},{key:"h",get description(){return l.get("helper.shortcuts.for.global.portal")}},{key:"i",get description(){return l.get("helper.shortcuts.for.global.inbox")}},{key:"m",get description(){return l.get("helper.shortcuts.for.global.myboard")}},{key:"s",get description(){return l.get("helper.shortcuts.for.global.search")}},{key:"e",get description(){return l.get("helper.shortcuts.for.global.event")}},{key:"shift + m",get description(){return l.get("helper.shortcuts.for.markdown")}}]},{get title(){return l.get("helper.shortcuts.for.inbox")},list:[{key:"j",get description(){return l.get("helper.shortcuts.for.inbox.next")}},{key:"k",get description(){return l.get("helper.shortcuts.for.inbox.previous")}}]},{get title(){return l.get("helper.shortcuts.for.wall")},list:[{key:"c",get description(){return l.get("helper.shortcuts.for.wall.new")}}]},{get title(){return l.get("helper.shortcuts.for.board")},list:[{key:"c",get description(){return l.get("helper.shortcuts.for.board.new")}},{key:"g",get description(){return l.get("helper.shortcuts.for.taskgroup")}}]},{get title(){return l.get("helper.shortcuts.for.event")},list:[{key:"c",get description(){return l.get("helper.shortcuts.for.event.new")}}]}],C=n("GESwhXbR"),S=n("bctXzzPQ"),E=n("+2RfZ2TT"),T=n.n(E),I=n("O8dRnXls"),M=n.n(I),j=function(e,t){T()(e).empty().qrcode({size:180,text:t,background:"white"})},P=function(){var e=Object(o.createRef)(),t=Object(o.createRef)();return Object(o.useEffect)(function(){j(e.current,d.a.PRIVATE_IOS_APP_URL),j(t.current,d.a.PRIVATE_ANDROID_APP_URL)},[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:M.a["qrcode-container"]},i.a.createElement("div",null,i.a.createElement("div",{ref:e,className:"private-ios"}),i.a.createElement("span",{className:"app-platform"},"Android")),i.a.createElement("div",null,i.a.createElement("div",{ref:t,className:"private-android"}),i.a.createElement("span",{className:"app-platform"},"iOS"))),i.a.createElement("p",{className:M.a["app-download-guide"]},u.a.get("private.download.app.guide")))},x=function(e){return i.a.createElement(C.Modal,r.a({},e,{title:u.a.get("download.app"),width:600,style:{marginBottom:"200px"},titlePosition:"center"}),i.a.createElement(P,null))},N=n("sfDrL6f9"),O=n("5qt3k8Zi"),R=O.hasVisitedHelpCenter,D=O.markVisitedHelpCenter,L=O.hasVisitedCaseCenter,z=O.markVisitedCaseCenter,A=function(e){function t(t){var n=e.call(this,t)||this;return n.onClickOnlineSupport=function(){n.onlineService.boot(),n.onlineService.show(),n.props.onClose()},n.onClickHotKey=function(){n.setState({hotKeyModalOpened:!0})},n.onClickDownload=function(){n.setState({downloadAppOpened:!0})},n.onhotKeyModalVisibleChange=function(e){n.setState({hotKeyModalOpened:e})},n.onDownloadCodeModalVisibleChange=function(e){n.setState({downloadAppOpened:e})},n.handleClick=function(e){switch("helpEntryHelpCenter"!==e.key||R()?"helpEntryCaseCenter"!==e.key||L()||z():D(),e.key){case"helpEntryOnlineSupport":n.onClickOnlineSupport();break;case"helpEntryHotKey":n.onClickHotKey();break;case"privateDownloadApp":n.onClickDownload();break;default:window.open(e.link)}s.gta.event({action:e.gtaAction})},n.onlineService=S.getInstance(),n.state={hotKeyModalOpened:!1,downloadAppOpened:!1},n}return r.d(t,e),t.prototype.renderMenuItems=function(){var e=this;return _.map(function(t){var n="helpEntryHelpCenter"===t.key&&!R()||"helpEntryCaseCenter"===t.key&&!L()?N["with-badge"]:void 0;return t.isShow&&o.createElement(C.MenuItem,{className:c()(N["help-center-item"]),key:t.key,onClick:e.handleClick.bind(e,t)},o.createElement(C.Icon,{name:t.icon}),o.createElement("span",{className:n},t.name))}).filter(function(e){return!!e})},t.prototype.renderHelpMenu=function(){return o.createElement(C.Menu,null,this.renderMenuItems())},t.prototype.renderHotKeyItems=function(e){var t=e.map(function(e){return o.createElement("li",{key:e.key},o.createElement("span",{className:"key"},e.key),o.createElement("span",{className:"function"},e.description))});return o.createElement("ul",{className:"cheat-sheet-list"},t)},t.prototype.renderHotKeyContent=function(){var e=this;return w.map(function(t,n){return o.createElement("div",{className:N["hotkey-helper"],key:n},o.createElement("h3",null,t.title),e.renderHotKeyItems(t.list))})},t.prototype.renderHotKeyModal=function(){return o.createElement(C.Modal,{title:u.a.get("helper.shortcuts"),width:600,style:{marginBottom:"200px"},titlePosition:"center",opened:this.state.hotKeyModalOpened,onVisibleChange:this.onhotKeyModalVisibleChange},this.renderHotKeyContent())},t.prototype.renderDownloadAppModal=function(){return o.createElement(x,{opened:this.state.downloadAppOpened,onVisibleChange:this.onDownloadCodeModalVisibleChange})},t.prototype.render=function(){return o.createElement(o.Fragment,null,this.renderHelpMenu(),this.renderHotKeyModal(),this.renderDownloadAppModal())},t}(o.PureComponent);n.d(t,"HelpCenterMenu",function(){return A}),n.d(t,"AppDownloadModal",function(){return x})},"/xGqNlTL":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<li class="column thin-scroll column-projects"> ',i=e.projects;if(i)for(var s,a=-1,c=i.length-1;a<c;){if(o+=" ",(s=i[a+=1]).projects.length>0){o+=' <ul class="column-wrap"> <li class="group-name"> <p>'+r(s.title)+"</p> </li> ";var l=s.projects;if(l)for(var u,p=-1,d=l.length-1;p<d;)o+=' <li class="picker-handler clearfix collection ',((u=l[p+=1]).disabled||u.disabledHint)&&(o+="disabled"),o+=" ",u._id==e._projectId&&(o+="selected"),o+='" data-id="'+u._id+'"> <span class="collection-title">'+r(u.name)+"</span> ",u.disabledHint&&(o+=' <span class="icon icon-warning hinted" data-title="'+r(u.disabledHint)+'"></span> '),o+=" </li> ";o+=" </ul> "}o+=" "}return o+="</li>"}},"/ywSGDqL":function(e,t,n){e.exports=n.p+"images/project@2x.060b3178.png"},0:function(e,t,n){n("W5zQERVw"),n("14GADmBx"),n("PtGmnN04"),n("62VxAo8H"),n("RUNuRapa"),e.exports=n("I9DDAQe+")},"04h4arvM":function(e,t,n){"use strict";var r=n("JHPidlw6"),o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n("TSYQbtd+"),a=n.n(s),c=function(){return null},l=function(e){for(var t=e.cellCache,n=e.cellRenderer,r=e.styleCache,o=e.isScrolling,i=e.rowManager,s=e.columnManager,a=e.rowIndices,c=e.columnIndices,l=e.visibleColIndices,u=e.visibleRowIndices,p=e.horzAdjustment,d=e.vertAdjustment,h=e.parent,m=[],f=s.areOffsetsAdjusted()||i.areOffsetsAdjusted(),g=!o&&!f,v=a.start,b=0;v<=a.stop;v++,b++)for(var y=i.getSizeAndPosition(v),k=c.start,_=0;k<=c.stop;k++,_++){var w=s.getSizeAndPosition(k),C=k>=l.start&&k<=l.stop&&v>=u.start&&v<=u.stop,S=v+"-"+k,E=void 0;g&&r.has(S)?E=r.get(S):(E={height:y.size,left:w.offset+p,position:"absolute",top:y.offset+d,width:w.size},r.set(S,E));var T={columnIndex:k,isScrolling:o,isVisible:C,key:S,parent:h,rowIndex:v,cellStyle:E},I=void 0;if(!o||p||d)I=n(T);else if(t.has(S))I=t.get(S);else{var M=n(T);t.set(S,M),I=M}null!=I&&!1!==I&&m.push(I)}return m},u=n("kwic24gT"),p=n("D4LvyNzA"),d=n("x0w+nCUa"),h=function(e){function t(n){var i=e.call(this,n)||this;return i.styleCache=new Map,i.cellCache=new Map,i.totalWidth=0,i.scrollFlag={left:!1,top:!1},i.cursor={row:{start:0,stop:-1},column:{start:0,stop:-1}},i.renderedCursor={row:{start:0,stop:-1},column:{start:0,stop:-1}},i.children=[],i.innerStyleCache=[null,null,!1,{}],i.getScrollContainerRef=function(){return i.scrollContainerRef},i.saveRef=function(e){i.scrollContainerRef=e},i.saveScrollYRef=function(e){i.scrollYRef=e},i.saveScrollXRef=function(e){i.scrollXRef=e},i.handleScrollEnded=function(){i.raf&&i.raf.id&&r.g.cancel(i.raf.id),i.raf=r.g.start(function(){i.raf=null,i.resetStyleCache()},i.props.scrollGap)},i.handleScrollEvent=function(e){var t=i.props,n=t.height,r=t.width,s=i.scrollbarSize,a=o.f([Math.abs(e.deltaX),Math.abs(e.deltaY)],2),c=a[0],l=a[1]>c,u=i.rowManager.getTotalSize(),p=i.columnManager.getTotalSize();if(i.handleScrollEnded(),l){if(0===i.state.scrollTop&&e.deltaY<0)return!1;var d=i.state.scrollTop+(e.deltaY>=0?Math.min(i.maxSpeed,e.deltaY):Math.max(-i.maxSpeed,e.deltaY)),h=Math.min(Math.max(0,u-n+s),d);if(i.state.scrollTop!==h)return i.syncScroll("y",h,function(){i.scrollYRef&&i.scrollYRef.onWheel(h/(u-i.containerHeight(i.props,p)),!0)}),!0}else{if(0===i.state.scrollLeft&&e.deltaX<0)return!1;var m=i.state.scrollLeft+(e.deltaX>=0?Math.min(i.maxSpeed,e.deltaX):Math.max(-i.maxSpeed,e.deltaX)),f=Math.min(Math.max(0,p-r+s),m);if(i.state.scrollLeft!==f)return i.syncScroll("x",f,function(){i.scrollXRef&&i.scrollXRef.onWheel(f/(p-i.containerWidth(i.props,u)),!0)}),!0}return!1},i.handleScroll=function(e,t,n,r){var o={left:e,top:t};i.onScroll({callback:function(e){var t=e.left,o=e.top,s=i.props,a=s.height,c=s.onScroll,l=s.width;"function"==typeof c&&c({clientHeight:a,clientWidth:l,scrollHeight:r,scrollLeft:t,scrollTop:o,scrollWidth:n,scrollRight:Math.abs(l-n+t)})},indices:o})},i.handleScrollY=function(e){i.syncScroll("y",e,function(){return i.handleScrollEnded()})},i.handleScrollX=function(e){i.syncScroll("x",e,function(){return i.handleScrollEnded()})},i.state={horzDirection:d.d.Forward,verzDirection:d.d.Forward,changeDetection:d.b.Observed,isScrolling:!1,scrollLeft:0,scrollTop:0},i.columnWidth=i.wrapCell(n.columnWidth),i.rowHeight=i.wrapCell(n.rowHeight),i.columnManager=new u.a(!1,n.columnSize,i.columnWidth,i.getEstColumnSize(n)),i.rowManager=new u.a(!1,n.rowSize,i.rowHeight,i.getEstRowSize(n)),i.onGridRendered=Object(r.f)(),i.onScroll=Object(r.f)(!1),i.wheelManager=new u.d(function(e,t){Object(r.a)(function(){i.handleScrollEvent({deltaX:e,deltaY:t})||"function"!=typeof i.props.onOuterScroll||i.props.onOuterScroll({deltaX:e,deltaY:t})})},!0,!0,!1,i.props.allowNativeScroll),i.maxSpeed=null!=n.maxScrollSpeed?n.maxScrollSpeed:1/0,i.wrapperStyle=o.a({},t.defaultWrapperStyle,i.props.wrapperStyle,{width:i.props.width}),i.measureCells(),i}return o.d(t,e),t.prototype.UNSAFE_componentWillMount=function(){this.scrollbarSize=0,void 0===this.scrollbarSize&&(this.scrollbarSize=0),this.renderChildren(this.props,this.state)},t.prototype.componentDidMount=function(){this.scrollContainerRef&&this.scrollContainerRef.addEventListener("wheel",this.wheelManager.onWheel,{passive:!1});var e=this.props,t=e.height,n=e.width,r=e.scrollToColumn,o=e.scrollToRow,i=this.normalizeScrollLeft(this.props),s=this.normalizeScrollTop(this.props);if("number"==typeof i&&i>=0||"number"==typeof s&&s>=0){this.scrollToPosition(i,s);var a=this.columnManager.getTotalSize(),c=this.rowManager.getTotalSize();this.scrollXRef&&this.scrollXRef.onWheel(i/(a-this.containerHeight(this.props,c))),this.scrollYRef&&this.scrollYRef.onWheel(s/(c-this.containerWidth(this.props,a)))}var l=t>0&&n>0;r>=0&&l&&this.updateScrollLeftForScrollToColumn(this.props,this.state),o>=0&&l&&this.updateScrollTopForScrollToRow(this.props,this.state),this.handleGridRendered(),this.handleScroll(i||0,s||0,this.columnManager.getTotalSize(),this.rowManager.getTotalSize()),this.handleScrollbarPresenceChange()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var n=this.state,r=n.scrollLeft,i=n.scrollTop,s=0;if(this.columnManager.configure(e.columnSize,this.getEstColumnSize(e),this.wrapCell(e.columnWidth)),this.rowManager.configure(e.rowSize,this.getEstRowSize(e),this.wrapCell(e.rowHeight)),0===e.columnSize&&0!==r||0===e.rowSize&&0!==i)this.scrollToPosition(0,0),this.scrollXRef&&this.scrollXRef.onWheel(0),this.scrollYRef&&this.scrollYRef.onWheel(0);else if(e.scrollLeft!==this.props.scrollLeft||e.scrollTop!==this.props.scrollTop){var a=[this.normalizeScrollLeft(this.props),this.normalizeScrollTop(this.props)];null!=e.scrollLeft&&(a[0]=this.normalizeScrollLeft(e)),null!=e.scrollTop&&(a[1]=this.normalizeScrollTop(e)),this.scrollToPosition.apply(this,a);var c=this.rowManager.getTotalSize(),l=this.columnManager.getTotalSize();this.scrollXRef&&this.scrollXRef.onWheel(r/(l-this.containerWidth(e,c))),this.scrollYRef&&this.scrollYRef.onWheel(i/(c-this.containerHeight(e,l)))}e.columnWidth===this.props.columnWidth&&e.rowHeight===this.props.rowHeight||(this.styleCache=new Map),e.height===this.props.height&&e.width===this.props.width||(s|=1,this.rowManager.reset(0),this.columnManager.reset(0)),e.rowSize===this.props.rowSize&&e.columnSize===this.props.columnSize||(s|=1),s&&this.measureCells(e),e.columnSize!==this.props.columnSize&&this.columnManager.reset(0),e.rowSize!==this.props.rowSize&&this.rowManager.reset(0),e.wrapperStyle===this.props.wrapperStyle&&e.width===this.props.width||(this.wrapperStyle=o.a({},t.defaultWrapperStyle,{width:e.width},e.wrapperStyle))},t.prototype.UNSAFE_componentWillUpdate=function(e,t){this.renderChildren(e,t)},t.prototype.componentDidUpdate=function(e,t){var n=this,r=this.props,o=r.rowSize,i=r.columnSize,s=r.height,a=r.width,c=r.scrollToColumn,l=r.scrollToRow,p=this.state,h=p.scrollLeft,m=p.changeDetection,f=p.scrollTop,g=p.mainpulateDirection,v=this.totalWidth;this.totalWidth=this.columnManager.getTotalSize();var b=v!==this.totalWidth;if(m===d.b.Requested||b){var y=0===e.columnSize&&i>0||0===e.rowSize&&o>0;h>=0&&g&&d.a.Horizontal&g&&(h!==t.scrollLeft||h!==this.scrollContainerRef.scrollLeft||b||y)&&(this.scrollContainerRef.scrollLeft=h),f>=0&&g&&d.a.Vertical&g&&(f!==t.scrollTop||f!==this.scrollContainerRef.scrollTop||y)&&(this.scrollContainerRef.scrollTop=f)}var k=(0===e.width||0===e.height)&&s>0&&a>0;this.scrollFlag.left?(this.scrollFlag.left=!1,this.updateScrollLeftForScrollToColumn(this.props,this.state)):u.c.tryUpdateScrollIndex(this.columnManager,e.columnSize,e.columnWidth,e.scrollToColumn,e.width,h,c,a,b,k,function(){n.updateScrollLeftForScrollToColumn(n.props,n.state)})||e.columnSize===this.props.columnSize||window.requestAnimationFrame(function(){n.scrollContainerRef&&(n.scrollContainerRef.scrollLeft=n.state.scrollLeft)});this.scrollFlag.top?(this.scrollFlag.top=!1,this.updateScrollTopForScrollToRow(this.props,this.state)):u.c.tryUpdateScrollIndex(this.rowManager,e.rowSize,e.rowHeight,e.scrollToRow,e.height,f,l,s,!1,k,function(){n.updateScrollTopForScrollToRow(n.props,n.state)})||e.rowSize===this.props.rowSize||window.requestAnimationFrame(function(){n.scrollContainerRef&&(n.scrollContainerRef.scrollTop=n.state.scrollTop)});if(this.handleGridRendered(),h!==t.scrollLeft||f!==t.scrollTop){var _=this.rowManager.getTotalSize(),w=this.columnManager.getTotalSize();this.handleScroll(h,f,w,_),this.scrollXRef&&this.scrollXRef.onWheel(h/(w-this.containerWidth(this.props,_))),this.scrollYRef&&this.scrollYRef.onWheel(f/(_-this.containerHeight(this.props,w)))}this.handleScrollbarPresenceChange()},t.prototype.componentWillUnmount=function(){this.scrollContainerRef&&this.scrollContainerRef.removeEventListener("wheel",this.wheelManager.onWheel),this.raf&&r.g.cancel(this.raf.id),this.innerStyleCache=[null,null,!1,{}]},t.prototype.scrollToCell=function(e,t){if(this.props.columnSize>1&&void 0!==e){var n=o.a({},this.props,{scrollToColumn:e});this.updateScrollLeftForScrollToColumn(n,this.state)}if(void 0!==t){n=o.a({},this.props,{scrollToRow:t});this.updateScrollTopForScrollToRow(n,this.state)}},t.prototype.reflow=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.props,r=n.scrollToColumn,o=n.scrollToRow;this.columnManager.reset(e),this.rowManager.reset(t),this.scrollFlag={left:r>=0&&e<=r,top:o>=0&&t<=o,reset:!1},this.resetCache(),this.forceUpdate()},t.prototype.resetCols=function(e){this.columnManager.reset(e),this.resetCache()},t.prototype.resetCache=function(){this.styleCache=new Map,this.cellCache=new Map},t.prototype.measureCells=function(e){void 0===e&&(e=this.props);var t=e.columnSize,n=e.rowSize;n>0&&this.rowManager.getSizeAndPosition(n-1),t>0&&this.columnManager.getSizeAndPosition(t-1)},t.prototype.getOffsetForCell=function(e,t){void 0===e&&(e=this.props.scrollToColumn),void 0===t&&(t=this.props.scrollToRow);var n=o.a({},this.props,{scrollToColumn:e,scrollToRow:t});return{scrollLeft:this.getScrollLeft(n,this.state),scrollTop:this.getScrollTop(n,this.state)}},t.prototype.getWidth=function(){return this.rowManager?this.rowManager.getTotalSize():0},t.prototype.getHeight=function(){return this.columnManager?this.columnManager.getTotalSize():0},t.prototype.scrollToPosition=function(e,t){if("number"==typeof e&&e>=0&&e!==this.state.scrollLeft||"number"==typeof t&&t>=0&&t!==this.state.scrollTop){var n=Object.assign({},{changeDetection:d.b.Requested}),o=d.a.Unset;"number"==typeof e&&e>=0&&e!==this.state.scrollLeft&&(n.horzDirection=Object(r.c)(e,this.state.scrollLeft),n.scrollLeft=e,o|=d.a.Horizontal),"number"==typeof t&&t>=0&&t!==this.state.scrollTop&&(n.verzDirection=Object(r.c)(t,this.state.scrollTop),n.scrollTop=t,o|=d.a.Vertical),n.mainpulateDirection=o,this.setState(n)}},t.prototype.render=function(){var e=this.props,t=e.height,n=e.width,s=e.rowSize,c=e.columnSize,l=e.style,u=e.className,d=e.scrollbar,h=e.useGPU,m=Object(r.b)({height:t,width:n},h),f=this.columnManager.getTotalSize(),g=this.rowManager.getTotalSize(),v=g>t?this.scrollbarSize:0,b=f>n?this.scrollbarSize:0;b===this.horzScrollBarSize&&v===this.vertScrollBarSize||(this.horzScrollBarSize=b,this.vertScrollBarSize=v,this.scrollbarPresenceChanged=!0);var y=o.a({ref:this.saveRef},this.props.containerProps,{className:a()("virtualized-grid",u),style:o.a({},m,l)}),k=this.renderInner(f,g),_=o.f(d,2),w=_[0],C=_[1];w=w&&f>n&&s>0;var S=(C=C&&g>t&&c>0)&&i.createElement(p.a,{size:this.containerHeight(this.props,f,w),scrollSize:g,ref:this.saveScrollYRef,onScroll:this.handleScrollY,mode:"y",offset:this.normalizeScrollTop(this.props),zIndex:15}),E=w&&i.createElement(p.a,{size:this.containerWidth(this.props,g,C),scrollSize:f,ref:this.saveScrollXRef,onScroll:this.handleScrollX,mode:"x",offset:this.normalizeScrollLeft(this.props),zIndex:15});return i.createElement("div",{style:this.wrapperStyle},S,E,i.createElement("div",o.a({},y),k))},t.prototype.renderInner=function(e,t){if(this.children.length<=0)return null;var n=this.props.containerStyle,r=this.isScrolling(),s=o.f(this.innerStyleCache,4),a=s[0],c=s[1],l=s[2],u=s[3];if(e!==a||t!==c||r!==l){var p=o.a({width:e,height:t,maxWidth:e,maxHeight:t,overflow:"hidden",position:"relative",pointerEvents:r?"none":void 0,zIndex:1},n);return this.innerStyleCache=[e,t,r,p],i.createElement("div",{className:"virtualized-grid-inner",style:p},this.children)}return i.createElement("div",{className:"virtualized-grid-inner",style:u},this.children)},t.prototype.renderChildren=function(e,t){var n=e.cellRenderer,r=e.cellRangeRenderer,o=e.columnSize,i=e.rowSize,s=e.height,a=e.width,c=e.overscan,l=e.overScanIndicesGetter,u=t.horzDirection,p=t.verzDirection,d=t.scrollLeft,h=t.scrollTop;if(0!==o&&0!==i){var m=this.isScrolling(e,t);if(s>0&&a>0){var f=this.columnManager.getVisibleCellRange(a,d),g=this.rowManager.getVisibleCellRange(s,h),v=this.columnManager.getOffsetAdjustment(a,d),b=this.rowManager.getOffsetAdjustment(s,h);this.renderedCursor.column={start:f.start,stop:f.stop},this.renderedCursor.row={start:g.start,stop:g.stop};var y=l(i,c.row,p,this.renderedCursor.row.start,this.renderedCursor.row.stop),k=l(o,c.column,u,this.renderedCursor.column.start,this.renderedCursor.column.stop);this.cursor.column={start:k.start,stop:k.stop},this.cursor.row={start:y.start,stop:y.stop},this.children=r({cellCache:this.cellCache,cellRenderer:n,columnManager:this.columnManager,rowManager:this.rowManager,columnIndices:this.cursor.column,rowIndices:this.cursor.row,horzAdjustment:v,vertAdjustment:b,isScrolling:m,parent:this,scrollLeft:d,scrollTop:h,styleCache:this.styleCache,visibleColIndices:f,visibleRowIndices:g})}}else this.children=[]},t.prototype.normalizeScrollLeft=function(e){var t=e.scrollLeft;if("number"==typeof t){if(t<=0)return 0;var n=this.columnManager.getTotalSize(),r=this.rowManager.getTotalSize(),o=n-this.containerWidth(e,r);return Math.min(t,o)}},t.prototype.normalizeScrollTop=function(e){var t=e.scrollTop;if("number"==typeof t){if(t<=0)return 0;var n=this.columnManager.getTotalSize(),r=this.rowManager.getTotalSize()-this.containerHeight(e,n);return Math.min(t,r)}},t.prototype.getEstRowSize=function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estRowSize},t.prototype.getEstColumnSize=function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estColumnSize},t.prototype.getScrollLeft=function(e,t){var n=e.columnSize,r=e.height,o=e.scrollToColumn,i=e.width,s=t.scrollLeft;if(!(n<=0)){var a=n-1,c=o<0?a:Math.min(a,o),l=this.rowManager.getTotalSize()>r?this.scrollbarSize:0;return this.columnManager.getUpdatedOffsetForIndex(i-l,s,c)}},t.prototype.getScrollTop=function(e,t){var n=e.height,r=e.rowSize,o=e.scrollToRow,i=e.width,s=t.scrollTop;if(!(r<=0)){var a=r-1,c=o<0?a:Math.min(a,o),l=this.columnManager.getTotalSize()>i?this.scrollbarSize:0;return this.rowManager.getUpdatedOffsetForIndex(n-l,s,c)}},t.prototype.updateScrollLeftForScrollToColumn=function(e,t){var n=t.scrollLeft,r=this.getScrollLeft(e,t);if("number"==typeof r&&r>=0&&n!==r){this.scrollToPosition(r,0);var o=r/(this.columnManager.getTotalSize()-this.containerWidth(e));this.scrollXRef&&this.scrollXRef.onWheel(o)}},t.prototype.updateScrollTopForScrollToRow=function(e,t){var n=t.scrollTop,r=this.getScrollTop(e,t);if("number"==typeof r&&r>=0&&n!==r){this.scrollToPosition(0,r);var o=this.rowManager.getTotalSize();this.scrollYRef&&this.scrollYRef.onWheel(r/(o-this.containerHeight(e)))}},t.prototype.containerWidth=function(e,t,n){void 0===t&&(t=-1);var r=e.scrollbar,i=e.height,s=e.width;return t=-1===t?this.rowManager.getTotalSize():t,"boolean"!=typeof n?s-1:s-((n=(n=o.f(r,2)[1])&&t>i)?p.a.totalSize:0)-1},t.prototype.containerHeight=function(e,t,n){void 0===t&&(t=-1);var r=e.scrollbar,i=e.height,s=e.width;return t=-1===t?this.columnManager.getTotalSize():t,"boolean"!=typeof n?i-1:i-((n=(n=o.f(r,1)[0])&&t>s)?p.a.totalSize:0)-1},t.prototype.resetStyleCache=function(){var e=this.styleCache;this.resetCache();for(var t=this.cursor,n=t.row,r=t.column,i=n.start;i<=n.stop;i++)for(var s=r.start;s<=r.stop;s++){var a=i+"-"+s;this.styleCache.set(a,e.get(a))}this.setState(o.a({},this.state,{isScrolling:!1}))},t.prototype.isScrolling=function(e,t){return void 0===e&&(e=this.props),void 0===t&&(t=this.state),e.hasOwnProperty("isScrolling")?e.isScrolling:t.isScrolling},t.prototype.handleScrollbarPresenceChange=function(){if(this.scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this.scrollbarPresenceChanged=!1,"function"==typeof e&&e(this.scrollbarSize,this.horzScrollBarSize>0,this.vertScrollBarSize>0)}},t.prototype.handleGridRendered=function(){this.onGridRendered({callback:this.props.onSectionRendered,indices:{columnOverscanStartIndex:this.cursor.column.start,columnOverscanStopIndex:this.cursor.column.stop,columnStartIndex:this.renderedCursor.column.start,columnStopIndex:this.renderedCursor.column.stop,rowOverscanStartIndex:this.cursor.row.start,rowOverscanStopIndex:this.cursor.row.stop,rowStartIndex:this.renderedCursor.row.start,rowStopIndex:this.renderedCursor.row.stop}})},t.prototype.wrapCell=function(e){return"function"==typeof e?e:function(){return e}},t.prototype.syncScroll=function(e,t,n){var i="x"===e?this.state.scrollLeft:this.state.scrollTop,s=t!==i?Object(r.c)(t,i):i,a=o.a({},this.state,{isScrolling:!0,changeDetection:d.b.Observed});return"x"===e?(a.horzDirection=s,a.scrollLeft=Math.max(0,t)):(a.verzDirection=s,a.scrollTop=Math.max(0,t)),this.setState(a),"x"===e?this.scrollContainerRef.scrollLeft=t:this.scrollContainerRef.scrollTop=t,"function"==typeof n&&n(),"x"===e?this.state.scrollLeft!==a.scrollLeft:this.state.scrollTop!==a.scrollTop},t.defaultProps={scrollToColumn:-1,scrollToRow:-1,cellRangeRenderer:l,emptyRenderer:c,onSectionRendered:function(){},estColumnSize:100,estRowSize:30,scrollGap:d.c.ResetInterval,overscan:{column:1,row:5},overScanIndicesGetter:r.d,useGPU:!0},t.minimalMovement=0,t.defaultWrapperStyle={position:"relative",height:"100%"},t}(i.PureComponent),m=function(e){function t(t){var n=e.call(this,t)||this;return n.saveTopLeftRef=function(e){n.topLeftRef=e},n.saveTopRightRef=function(e){n.topRightRef=e},n.saveBottomLeftRef=function(e){n.bottomLeftRef=e},n.saveBottomRightRef=function(e){n.bottomRightRef=e},n.getRightGridColumnWidth=function(e){var t=n.props,r=t.columnWidth,o=t.fixedColumnCount,i=t.columnSize,s=n.state,a=s.hasHorzScrollbar,c=s.scrollBarSize;return a&&e===i-o?c:"function"==typeof r?r(e+o):r},n.getBottomRowHeight=function(e){var t=n.props,r=t.fixedRowCount,o=t.rowSize,i=t.rowHeight,s=n.state,a=s.scrollBarSize;return s.hasVertScrollbar&&e==o-r?a:"function"==typeof i?i(e+r):i},n.handleScrollbarPresenceChange=function(e,t,r){var i=n.state,s=i.hasHorzScrollbar,a=i.hasVertScrollbar;t===s&&r===a||n.setState(o.a({},n.state,{scrollBarSize:e,hasHorzScrollbar:t,hasVertScrollbar:r}))},n.onScroll=function(e){var t=e.scrollLeft,r=e.scrollTop,i=e.scrollRight;n.setState(o.a({},n.state,{scrollLeft:t,scrollTop:r,scrollRight:i}));var s=n.props.onScroll;"function"==typeof s&&s(e)},n.onScrollLeft=function(e){n.onScroll(o.a({},e,{scrollTop:n.state.scrollTop}))},n.onScrollTop=function(e){n.onScroll(o.a({},e,{scrollLeft:n.state.scrollLeft}))},n.bottomLeftRenderer=function(e){var t=e.rowIndex,r=o.g(e,["rowIndex"]),i=n.props,s=i.cellRenderer,a=i.fixedRowCount;return s(o.a({},r,{parent:n,rowIndex:t+a}))},n.bottomRightRenderer=function(e){var t=e.columnIndex,r=e.rowIndex,i=o.g(e,["columnIndex","rowIndex"]),s=n.props,a=s.cellRenderer,c=s.fixedColumnCount,l=s.fixedRowCount;return a(o.a({},i,{columnIndex:t+c,parent:n,rowIndex:r+l}))},n.topRightRenderer=function(e){var t=e.columnIndex,r=o.g(e,["columnIndex"]),i=n.props,s=i.cellRenderer,a=i.fixedColumnCount;return s(o.a({},r,{columnIndex:t+a,parent:n}))},n.state={scrollLeft:0,scrollTop:0,scrollBarSize:0,scrollRight:0,hasHorzScrollbar:!1,hasVertScrollbar:!1},n}return o.d(t,e),t.prototype.UNSAFE_componentWillMount=function(){this.reCalcStyles(null,this.props)},t.prototype.componentDidMount=function(){var e=this.props,t=e.scrollLeft,n=e.scrollTop;(t>0||n>0)&&this.setState(o.a({},this.state,{scrollLeft:t>0?t:this.state.scrollLeft,scrollTop:n>0?n:this.state.scrollTop}))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this.props,n=t.columnWidth,r=t.rowHeight,i=t.fixedColumnCount,s=t.fixedRowCount;n===e.columnWidth&&i===e.fixedColumnCount||(this.leftGridWidth=null),r===e.rowHeight&&s===e.fixedRowCount||(this.topGridHeight=null),this.props.scrollLeft===e.scrollLeft&&this.props.scrollTop===e.scrollTop||this.setState(o.a({},this.state,{scrollLeft:null!=e.scrollLeft&&e.scrollLeft>=0?e.scrollLeft:this.state.scrollLeft,scrollTop:null!=e.scrollTop&&e.scrollTop>=0?e.scrollTop:this.state.scrollTop})),this.props.width===e.width&&this.props.height===e.height&&this.props.columnSize===e.columnSize||this.resetCols(),this.reCalcStyles(this.props,e)},t.prototype.render=function(){var e=this.props,t=e.onScroll,n=e.scrollToColumn,r=e.scrollToRow,s=e.onSectionRendered,a=o.g(e,["onScroll","scrollToColumn","scrollToRow","onSectionRendered"]);if(0===this.props.width||0===this.props.height)return null;var c=this.state,l=c.scrollLeft,u=c.scrollTop,p=this.renderTopLeft(a),d=this.renderTopRight(o.a({},a,{onScroll:t,scrollLeft:l})),h=this.renderBottomLeft(o.a({},a,{onScroll:t,scrollTop:u})),m=this.renderBottomRight(o.a({},a,{onScroll:t,onSectionRendered:s,scrollLeft:l,scrollTop:u,scrollToColumn:n,scrollToRow:r}));return i.createElement("div",{className:this.props.className,style:this.containerStyle},i.createElement("div",{className:this.props.classNameTop,style:this.containerTopStyle},p,d),i.createElement("div",{className:this.props.classNameBottom,style:this.containerBottomStyle},h,m))},t.prototype.reflow=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.props,r=n.fixedColumnCount,o=n.fixedRowCount,i=Math.max(0,e-r),s=Math.max(0,t-o);this.bottomLeftRef&&this.bottomLeftRef.reflow(e,s),this.bottomRightRef&&this.bottomRightRef.reflow(i,s),this.topLeftRef&&this.topLeftRef.reflow(e,t),this.topRightRef&&this.topRightRef.reflow(i,t),this.leftGridWidth=this.topGridHeight=null,this.reCalcStyles(null,this.props)},t.prototype.measureCells=function(){this.bottomLeftRef&&this.bottomLeftRef.measureCells(),this.bottomRightRef&&this.bottomRightRef.measureCells(),this.topLeftRef&&this.topLeftRef.measureCells(),this.topRightRef&&this.topRightRef.measureCells()},t.prototype.forceUpdateGrids=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(t){switch(t){case"bottomLeft":e.bottomLeftRef.forceUpdate();break;case"bottomRight":e.bottomRightRef.forceUpdate();break;case"topLeft":e.topLeftRef.forceUpdate();break;case"topRight":e.topRightRef.forceUpdate()}})},t.prototype.resetCols=function(){this.topLeftRef&&this.topLeftRef.resetCols(0),this.bottomLeftRef&&this.bottomLeftRef.resetCols(0),this.topRightRef&&this.topRightRef.resetCols(0),this.bottomRightRef&&this.bottomRightRef.resetCols(0)},t.prototype.resetCache=function(){this.topLeftRef&&this.topLeftRef.resetCache(),this.bottomLeftRef&&this.bottomLeftRef.resetCache(),this.topRightRef&&this.topRightRef.resetCache(),this.bottomRightRef&&this.bottomRightRef.resetCache()},t.prototype.renderTopLeft=function(e){var t=e.fixedColumnCount,n=e.fixedRowCount,r=this.state.scrollLeft;if(t&&n){var s=r>0?this.topLeftStyle.onSlide:this.topLeftStyle.component,a=o.a({},e,{className:e.classNameTopLeft,columnSize:t,height:this.getTopGridHeight(e),ref:this.saveTopLeftRef,rowSize:n,style:s,width:this.getLeftGridWidth(e),scrollbar:e.scrollbarTopLeft,wrapperStyle:this.topLeftStyle.wrapper,useGPU:!1});return i.createElement(h,o.a({},a))}},t.prototype.renderTopRight=function(e){var t=e.columnSize,n=e.fixedColumnCount,r=e.fixedRowCount,s=e.scrollLeft,a=this.state,c=a.hasHorzScrollbar,l=a.scrollRight;if(!r)return null;var u=c?1:0,p=l>0?this.topRightStyle.onSlide:this.topRightStyle.component,d=o.a({},e,{cellRenderer:this.topRightRenderer,className:e.classNameTopRight,rowSize:r,columnSize:Math.max(0,t-n)+u,columnWidth:this.getRightGridColumnWidth,height:this.getTopGridHeight(e),onScroll:this.onScrollLeft,ref:this.saveTopRightRef,scrollLeft:s,style:p,width:this.getRightGridWidth(e),scrollbar:e.scrollbarTopRight,wrapperStyle:this.topRightStyle.wrapper,useGPU:!1});return i.createElement(h,o.a({},d))},t.prototype.renderBottomLeft=function(e){var t=e.fixedColumnCount,n=e.fixedRowCount,r=e.rowSize,s=e.scrollTop,a=this.state,c=a.hasVertScrollbar,l=a.scrollLeft;if(!t)return null;var u=l>0?this.bottomLeftStyle.onSlide:this.bottomLeftStyle.component,p=c?1:0,d=o.a({},e,{cellRenderer:this.bottomLeftRenderer,className:e.classNameBottomLeft,columnSize:t,rowSize:Math.max(0,r-n)+p,rowHeight:this.getBottomRowHeight,height:this.getBottomGridHeight(e),width:this.getLeftGridWidth(e),onScroll:this.onScrollTop,ref:this.saveBottomLeftRef,scrollTop:s,style:u,scrollbar:e.scrollbarBottomLeft,wrapperStyle:this.bottomLeftStyle.wrapper});return i.createElement(h,o.a({},d))},t.prototype.renderBottomRight=function(e){var t=e.columnSize,n=e.rowSize,r=e.fixedColumnCount,s=e.fixedRowCount,a=e.scrollToColumn,c=e.scrollToRow,l=this.state.scrollRight>0?this.bottomRightStyle.onSlide:this.bottomRightStyle.component,u=o.a({},e,{cellRenderer:this.bottomRightRenderer,className:e.classNameBottomRight,columnSize:Math.max(0,t-r),columnWidth:this.getRightGridColumnWidth,rowHeight:this.getBottomRowHeight,height:this.getBottomGridHeight(e),onScroll:this.onScroll,onScrollbarPresenceChange:this.handleScrollbarPresenceChange,ref:this.saveBottomRightRef,rowSize:Math.max(0,n-s),scrollToColumn:a-r,scrollToRow:c-s,style:l,width:this.getRightGridWidth(e),scrollbar:e.scrollbarBottomRight,wrapperStyle:this.bottomRightStyle.wrapper});return i.createElement(h,o.a({},u))},t.prototype.reCalcStyles=function(e,t){var n=t.columnWidth,r=t.rowHeight,i=t.height,s=t.width,a=t.fixedColumnCount,c=t.fixedRowCount,l=t.style,u=t.styleBottomLeft,p=t.styleBottomRight,d=t.styleTopLeft,h=t.styleTopRight,m=t.onLeftSlideStyle,f=t.onRightSlideStyle,g=!e,v=g||i!==e.height||s!==e.width,b=g||n!==e.columnWidth||a!==e.fixedColumnCount||this.calcLeftGridWidth(t)!==this.getLeftGridWidth(e),y=g||c!==e.fixedRowCount||r!==e.rowHeight;if(b&&(this.leftGridWidth=null),(g||v||l!==e.style)&&(this.containerStyle=o.a({height:i,overflow:"hidden",width:s},l)),(g||v||y)&&(this.containerTopStyle={height:this.getTopGridHeight(t),position:"relative",width:s},this.containerBottomStyle={height:i-this.getTopGridHeight(t),overflow:"visible",position:"relative",width:s}),g||u!==e.styleBottomLeft){var k=o.a({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute"},u);this.bottomLeftStyle={onSlide:o.a({},k,m),component:k,wrapper:{height:"auto"}}}if(g||b||p!==e.styleBottomRight){k=o.a({left:0,position:"absolute"},p);this.bottomRightStyle={onSlide:o.a({},k,f),component:k,wrapper:{marginLeft:this.getLeftGridWidth(t)}}}if(g||d!==e.styleTopLeft){k=o.a({left:0,top:0,overflowX:"hidden",overflowY:"hidden",position:"absolute"},d);this.topLeftStyle={onSlide:o.a({},k,m),component:k,wrapper:{height:"auto"}}}if(g||b||h!==e.styleTopRight){k=o.a({left:0,top:0,overflowX:"hidden",overflowY:"hidden",position:"absolute"},h);this.topRightStyle={onSlide:o.a({},k,f),component:k,wrapper:{marginLeft:this.getLeftGridWidth(t)}}}},t.prototype.getTopGridHeight=function(e){var t=e.fixedRowCount,n=e.rowHeight;if(null==this.topGridHeight)if("function"==typeof n){for(var r=0,o=0;o<t;o++)r+=n(o);this.topGridHeight=r}else this.topGridHeight=n*t;return this.topGridHeight},t.prototype.getBottomGridHeight=function(e){return e.height-this.getTopGridHeight(e)},t.prototype.calcLeftGridWidth=function(e){var t=e.fixedColumnCount,n=e.columnWidth;if("function"==typeof n){for(var r=0,o=0;o<t;o++)r+=n(o);return r}return n*t},t.prototype.getLeftGridWidth=function(e){return null==this.leftGridWidth&&(this.leftGridWidth=this.calcLeftGridWidth(e)),this.leftGridWidth},t.prototype.getRightGridWidth=function(e){return e.width-this.getLeftGridWidth(e)},t.defaultProps=o.a({},h.defaultProps,{maxScrollSpeed:30,fixedColumnCount:0,fixedRowCount:0,classNameBottom:"",classNameBottomLeft:"",classNameBottomRight:"",classNameTop:"",classNameTopLeft:"",classNameTopRight:"",styleBottomLeft:{},styleBottomRight:{},styleTopLeft:{},styleTopRight:{},onSlideStyle:{},scrollbarBottomLeft:[!1,!1],scrollbarBottomRight:[!0,!0],scrollbarTopLeft:[!1,!1],scrollbarTopRight:[!1,!1]}),t}(i.PureComponent);n.d(t,"a",function(){return h}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return r.e})},"04ph3eNE":function(e,t,n){e.exports={"task-stage":"task-stage__2XSh","task-stage__inner":"task-stage__inner__3XdP"}},"0BazJikX":function(e,t,n){"use strict";n.r(t),n.d(t,"ProProjectCreateTaskConfig",function(){return i});var r=n("mrSGxOB2"),o=n("a+N5u/Cl"),i=function(){function e(e,t){this.scenarios=t,this._createParams={canCreate:!1,projectId:e._id}}return e.prototype.setScenarioId=function(e){var t=o.findWhere(this.scenarios,{_id:e});t&&t.proTemplateConfigType&&(this.config={canCreate:!0,proTemplateConfigType:t.proTemplateConfigType})},Object.defineProperty(e.prototype,"config",{get:function(){return this._createParams},set:function(e){this._createParams=r.a({},this._createParams,e)},enumerable:!0,configurable:!0}),e}()},"0HK9poFJ":function(e,t,n){"use strict";n.r(t);var r=n("i3VL+mBE");for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);var i=n("Pi2j2IpB");n.d(t,"InternalAPI",function(){return i.a});var s=n("h15kZ/2D");n.d(t,"DashboardAPI",function(){return s.a});var a=n("5HA2kCP2");n.d(t,"OrgStructureEventEmitter$",function(){return a.b}),n.d(t,"OrgStructureAPI",function(){return a.a});var c=n("pFzwY3HK");n.d(t,"PluginAPI",function(){return c.a})},"0LaTTYYW":function(e,t,n){e.exports=n.p+"images/d_beishang@2x.50134c12.png"},"0OAOR4eH":function(e,t){e.exports=function(e){return'<form class="delete-form"> <p>'+e.confirmDelete+'</p> <button class="btn btn-danger" type="submit">'+tb_i18n.get("delete")+"</button></form>"}},"0VIrt9RE":function(e,t,n){e.exports=n.p+"images/add-chat-no-project@2x.80506b7f.png"},"0X1fXJzV":function(e,t,n){"use strict";n.r(t),n.d(t,"isOfficeOnlineEnabled",function(){return a}),n.d(t,"getOfficeOnlineIframeSrc",function(){return c}),n.d(t,"isOfficeOnlineFile",function(){return l});var r=n("QyjeWo4p"),o=n("2qRnoGmE"),i=o.FEATURES,s=o.OFFICE_ONLINE_HOST,a=function(){return i.officeOnline},c=function(e){var t=r.stringify({downloadUrl:e});return s+"/view?"+t},l=function(e){return/^(doc|ppt|xls)x?$/.test(e)}},"0Z5a6unZ":function(e,t,n){},"0aN4tAaE":function(e,t,n){e.exports=n.p+"images/d_shengbing@2x.3741e806.png"},"0aWc+x3/":function(e,t,n){"use strict";n.r(t),n.d(t,"DEFAULT_TEAM_ICON_COLOR",function(){return i}),n.d(t,"DEFAULT_TEAM_ICON_NAME",function(){return s}),n.d(t,"DEFAULT_TEAM_STYLE",function(){return a}),n.d(t,"DEFAULT_DISPLAY_TYPES",function(){return c}),n.d(t,"DEFAULT_TAB_TYPE",function(){return l}),n.d(t,"DEFAULT_TAB",function(){return u}),n.d(t,"DEFAULT_SEARCH_TYPES",function(){return p}),n.d(t,"SEARCH_TYPES_MAP",function(){return d});var r,o=n("wj/icwnL"),i="#8193BA",s="icon-team-tie",a=s+","+i,c=[o.DisplayTypes.Search,o.DisplayTypes.InviteFromTeams,o.DisplayTypes.InviteFromGroups,o.DisplayTypes.RecentContacts],l=o.TabTypes.Default,u={displayTypes:c,index:0,tabType:l},p=[o.SearchTypes.Email,o.SearchTypes.Phone,o.SearchTypes.Teams,o.SearchTypes.Groups,o.SearchTypes.OrganizationMembers],d=((r={})[o.TabTypes.Default]=[o.SearchTypes.Email,o.SearchTypes.Phone,o.SearchTypes.Teams,o.SearchTypes.Groups,o.SearchTypes.OrganizationMembers],r[o.TabTypes.Team]=[o.SearchTypes.Teams,o.SearchTypes.TeamMembers],r[o.TabTypes.Teams]=[o.SearchTypes.Teams,o.SearchTypes.OrganizationMembers],r)},"0c87E3oj":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("a+N5u/Cl"),i=n.n(o),s=n("q1tIBJhx"),a=n.n(s),c=n("mdaSFG4P"),l=n.n(c),u=n("TSYQbtd+"),p=n.n(u),d=n("GESwhXbR"),h=n("cXOPvvXb"),m=n("E5wMRikh"),f=n("F2VoxVmS"),g=n.n(f),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={containerSize:{}},t.saveBodyScrollEl=function(e){t.bodyScrollEl&&t.bodyScrollEl.removeEventListener("scroll",t.handleBodyScroll),t.bodyScrollEl=e,t.bodyScrollEl&&t.bodyScrollEl.addEventListener("scroll",t.handleBodyScroll),t.props.saveBodyScrollEl&&t.props.saveBodyScrollEl(t.bodyScrollEl)},t.handleResize=function(e,n){t.raf=window.requestAnimationFrame(function(){var r={width:e,height:n};if(t.setState({containerSize:r}),t.props.saveBodyDisplayDirection&&t.isValidContainerSize(r)){var o=t.bodyUseVerticalDirection(r)?h.a.vertical:h.a.horizontal;t.props.saveBodyDisplayDirection(o)}})},t.handleBodyScroll=function(e){var n=e.currentTarget;t.setBodyScrollTop(n.scrollTop)},t.setBodyScrollTop=i.a.throttle(function(e){t.props.onBodyScroll&&t.props.onBodyScroll(e)},218,{leading:!0,trailing:!0}),t.bodyLeftMinWidth=Object(d.getQuadUnit)(140),t.bodyRightMinWidth=Object(d.getQuadUnit)(80),t.bodyRightMaxWidth=Object(d.getQuadUnit)(110),t.bodyRightStyle={minWidth:t.bodyRightMinWidth,maxWidth:t.bodyRightMaxWidth},t}return r.d(t,e),t.prototype.render=function(){return a.a.createElement("div",{className:g.a["responsive-detail-container"]},a.a.createElement("div",{className:p()(this.props.className,g.a.content)},this.renderHead(),this.renderBody(),a.a.createElement(l.a,{handleWidth:!0,onResize:this.handleResize})))},t.prototype.componentDidUpdate=function(e){this.props.bodyScrollTop!==e.bodyScrollTop&&i.a.isNumber(this.props.bodyScrollTop)&&this.bodyScrollEl&&(this.bodyScrollEl.scrollTop=this.props.bodyScrollTop)},t.prototype.componentWillUnmount=function(){this.raf&&window.cancelAnimationFrame(this.raf)},t.prototype.renderHead=function(){return this.props.head&&a.a.createElement("div",{className:g.a.head},this.props.head)},t.prototype.renderBody=function(){var e=this.state.containerSize;if(!this.isValidContainerSize(e))return this.props.placeholder||a.a.createElement(a.a.Fragment,null);var t=this.bodyUseVerticalDirection(e),n=!t,r=p()(g.a.body,{horizontal:n,vertical:t});return n?a.a.createElement("div",{className:r},a.a.createElement("div",{className:g.a["body-inner"]},this.renderBodyLeft(e),this.renderBodyRight(e))):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:r},a.a.createElement("div",{className:g.a["body-inner"],ref:this.saveBodyScrollEl},this.renderBodyTop(),this.renderBodyBottom())),this.renderFoot())},t.prototype.renderBodyTop=function(){return this.props.body?a.a.createElement("div",{className:g.a["body-top"]},this.props.body,a.a.createElement(m.SpaceCompletion,null)):null},t.prototype.renderBodyBottom=function(){return this.props.discussion?a.a.createElement("div",{className:g.a["body-bottom"]},this.props.discussion):null},t.prototype.renderBodyLeft=function(e){return this.props.body?a.a.createElement("div",{className:g.a["body-left"],style:this.getBodyLeftStyle(e)},a.a.createElement("div",{className:g.a["body-left-inner"],ref:this.saveBodyScrollEl},this.props.body,a.a.createElement(m.SpaceCompletion,null))):null},t.prototype.renderBodyRight=function(e){return this.props.discussion||this.props.foot?a.a.createElement("div",{className:g.a["body-right"],style:this.bodyRightStyle},a.a.createElement("div",{className:g.a["body-right-inner"]},this.props.discussion),this.renderFoot()):null},t.prototype.renderFoot=function(){return this.props.foot&&a.a.createElement("div",{className:g.a.foot},this.props.foot)},t.prototype.getBodyLeftStyle=function(e){var t={minWidth:this.bodyLeftMinWidth};return this.keepBodyLeftMinWidth(e.width)&&(t.width=this.bodyLeftMinWidth),t},t.prototype.bodyUseVerticalDirection=function(e){return e.width<this.bodyLeftMinWidth+this.bodyRightMinWidth},t.prototype.keepBodyLeftMinWidth=function(e){return e<=this.bodyLeftMinWidth+this.bodyRightMaxWidth},t.prototype.isValidContainerSize=function(e){return i.a.isNumber(e.width)&&e.width>0},t}(s.PureComponent),b=n("6kNLk80W"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.contextState={saveActivityTimelineViewInstance:function(e){t.contextState.activityTimelineView=e},saveActivityCreatorViewInstance:function(e){t.contextState.activityCreatorView=e}},t}return r.d(t,e),t.prototype.render=function(){return a.a.createElement(b.ActivityPanelContext.Provider,{value:this.contextState},a.a.createElement(v,r.a({},this.props)))},t}(s.PureComponent),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=r.a({},h.g,{containerClassName:Object(h.i)()}),t.saveBodyScrollEl=function(e){t.setState({containerEl:e})},t.saveBodyDisplayDirection=function(e){t.setState({displayDirection:e})},t.setBodyScrollTop=function(e){if(e!==t.state.containerScrollTopRecord.scrollTop){var n=r.a({},t.state.containerScrollTopRecord,{scrollTop:e});t.setState({containerScrollTopRecord:n})}},t.handleDivisionVisibilityChange=function(e,n){var o,i=r.a({},t.state.divisionVisibilityMap,((o={})[e]=n,o));t.setState({divisionVisibilityMap:i})},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.setState({setContainerScrollTop:this.setBodyScrollTop,onDivisionVisibilityChange:this.handleDivisionVisibilityChange})},t.prototype.render=function(){var e=p()(this.props.className,this.state.containerClassName);return a.a.createElement(h.e.Provider,{value:this.state},a.a.createElement(y,r.a({},this.props,{className:e,bodyScrollTop:this.state.containerScrollTopRecord.scrollTop,saveBodyScrollEl:this.saveBodyScrollEl,saveBodyDisplayDirection:this.saveBodyDisplayDirection,onBodyScroll:this.setBodyScrollTop})))},t}(a.a.PureComponent);n.d(t,"a",function(){return k})},"0cpN1+LA":function(e,t,n){e.exports={"table-wrapper":"table-wrapper__1QI0",placeholder:"placeholder__3YcA","table-head":"table-head__1F24","table-body":"table-body__3CG-"}},"0g2l+SZL":function(e,t,n){"use strict";var r=n("q1tIBJhx"),o=n.n(r),i=n("GESwhXbR"),s=n("XHxZqXzL"),a=function(e){return o.a.createElement(s.a,{className:e.className,onClick:e.onClick},o.a.createElement(i.Icon,{name:"more"}))};n.d(t,"a",function(){return a})},"0iSAgZrr":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("LvDlAkAJ"),a=n.n(s),c=n("qtg9ccEz"),l=n("wRzn87sO"),u=n("TSYQbtd+"),p=n.n(u),d=n("GESwhXbR"),h=n("zX7JofkV"),m=n.n(h),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.image,n=e.title,r=e.content,o=e.originUrl,s=e.classNames,a=e.thumbnailUrl,c=t&&i.a.createElement("div",{style:{backgroundImage:"url("+t.url+")"},className:m.a.image}),l=r&&i.a.createElement("p",{className:m.a.summary},r),u=a?i.a.createElement("img",{src:a,className:p()(m.a["fav-icon"]),width:16}):i.a.createElement(d.Icon,{name:"earth",className:m.a["fav-icon"]}),h=n&&i.a.createElement("p",{className:m.a.title},n);return i.a.createElement("div",{className:p()(m.a.root,s)},c,i.a.createElement("div",{className:p()(m.a.content)},h,l,i.a.createElement("p",{className:m.a.url},u,o)))},t}(i.a.PureComponent);n.d(t,"a",function(){return v});var g=n("rLFWxDDv"),v=function(e){var t=e.type,n=e.children,o=r.g(e,["type","children"]);if("link"===t||"web"===t)return i.a.createElement(f,r.a({},o));var s=l.c[t];if(s)return i.a.createElement(s,r.a({},o));var u=o,p=u.title,d=u.content,h=u.summary,m=u.body,v=u.branchName,b=u.description,y=u.name,k=u.authorName,_=u.image,w=a.a.startsWith(t,"github")||a.a.startsWith(t,"thoughts")?t:a.a.split(t,"-")[0],C=p||v||y||k||"",S=d||h||b||m,E=_&&_.url&&i.a.createElement("div",{className:g["item-image"],style:{backgroundImage:"url("+_.url+")"}});return i.a.createElement(c.a,{title:C,type:w,content:S,classNames:o.classNames,label:E},n)}},"0jaQ0E53":function(e,t,n){e.exports={"task-parent":"task-parent__coRc","task-parent__inner":"task-parent__inner__obou"}},"0kmyfGCI":function(e,t,n){},"0lCab8jM":function(e,t,n){e.exports={"dock-trigger":"dock-trigger__31vz","dock-trigger-opened":"dock-trigger-opened__1EPI","dock-dropdown":"dock-dropdown__3uWr","dock-container":"dock-container__3Fpr","dock-list":"dock-list__3j17","app-item":"app-item__VYyE","app-item-name":"app-item-name__2aBe","app-item-logo":"app-item-logo__2pDG"}},"0mzWLe3g":function(e,t,n){e.exports={"object-caption-divider":"object-caption-divider__ibQE"}},"0sqv5CMQ":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("GESwhXbR"),s=(n("AaR11ELR"),n("GHDEvYBf"));n.d(t,"a",function(){return a});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=e.displayName;return o.createElement("section",{key:t,className:"result-section"},o.createElement(i.Separator,{full:!1}),o.createElement("p",{className:"result-group-title"},n||Object(s.c)()[t]),o.createElement("ul",null,this.props.children))},t.defaultProps={groupped:!0},t}(o.PureComponent)},"0sr1bXai":function(e,t,n){e.exports={"task-custom-text-field":"task-custom-text-field__3_N4","task-custom-text-field__inner":"task-custom-text-field__inner__2Q5Z"}},"0tZ0ePmD":function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("a+N5u/Cl"),o=n("vmWJWrVe"),r=n("IwRQ7g7z"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="OrganizationAnalysisView",t.prototype.className="organization-analysis-view",t.prototype.initialize=function(e){var t,n;return this.showLoadingIndicator(),t=this.requestSubView(r,i.extend({},e,{callback:(n=this,function(){return n.hideLoadingIndicator()})})),this.$el.append(t.$el)},t}()},"12XtBL+h":function(e,t,n){"use strict";var r,o,i=n("mrSGxOB2"),s=n("q1tIBJhx"),a=n.n(s),c=n("tLZJUYWX"),l=n("ctsD9mWH"),u=n("GESwhXbR"),p=n("/MKjzBat"),d=n("fvjXLGkK"),h=n("bvmrLhnu"),m=n("NSliPjIn"),f=n("HgMABPdd"),g=n("oRPyOBnq"),v=n("TSYQbtd+"),b=n.n(v),y=n("DOZCBSCZ"),k=n("ScL7a4sY"),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refSelect=function(e){t.select=e},t.onSelect=function(e,n){t.props.onSelect(e.data),n.stopPropagation(),n.nativeEvent.stopImmediatePropagation()},t.onOpen=function(){t.openId=window.setTimeout(function(){t.props.onVisibleChange(!0),t.openId=null},180)},t.onClose=function(){t.hideId=window.setTimeout(function(){t.props.onVisibleChange(!1),t.hideId=null},180)},t.matchFn=function(e,t){return e.data===t.data},t}return i.d(t,e),t.prototype.componentDidMount=function(){this.props.opened&&this.select&&this.select.open()},t.prototype.componentDidUpdate=function(e){e.opened!==this.props.opened&&(this.clearTimeout(),this.props.opened?this.select.open():this.select.close())},t.prototype.componentWillUnmount=function(){this.clearTimeout()},t.prototype.clearTimeout=function(){"number"==typeof this.openId&&window.clearTimeout(this.openId),"number"==typeof this.hideId&&window.clearTimeout(this.hideId)},t.prototype.getContent=function(){var e,t=this.props,n=t.data,r=t.placeholder;return n&&(e=n.content||n.label),e||r},t.prototype.renderOptions=function(){var e=this.props.list||[];return e.map(function(t){var n={label:t.label,data:t.data};n.extra=e.find(function(e){return e.data===n.data}).content;var r=t.content||t.label;return s.createElement(u.Option,{key:t.data,value:n},r)})},t.prototype.renderTrigger=function(){var e=this.props.data,t=this.getContent(),n=b()(k["dumb-select-trigger"],{unset:!e});return s.createElement(u.TextButton,{disabled:this.props.disabled,className:n},s.createElement("span",{className:"trigger-hint"},t),s.createElement(u.Icon,{name:"chevron-down"}))},t.prototype.renderLabel=function(){var e=this.getContent();return s.createElement("span",{className:"trigger-hint"},e)},t.prototype.render=function(){var e=this.props.selectable;return void 0===e||e?s.createElement(u.Select,{ref:this.refSelect,popupCls:k["dumb-select"],onOpen:this.onOpen,onClose:this.onClose,onSelect:this.onSelect,nested:!0,trigger:this.renderTrigger(),value:this.props.data||void 0,renderer:t.renderer,notFound:s.createElement(y.a,null),matchFn:this.matchFn},this.renderOptions()):this.renderLabel()},t.renderer={renderSelectedOption:function(e){var t=e.data,n=e.label,r=e.extra||n;return s.createElement(u.Option,{key:t,value:e,className:k["dumb-select-selected"]},s.createElement("span",{className:k["dumb-select-selected-name"]},r),s.createElement(u.Icon,{name:"tick",size:14}))}},t}(s.PureComponent),w=n("H72dUcNY"),C=n("PVLVtUMG");n.d(t,"a",function(){return j}),n.d(t,"b",function(){return P}),n.d(t,"c",function(){return x});var S,E,T=n("ScL7a4sY"),I=n("77NnVLwu");!function(e){e[e.normal=1]="normal",e[e.sprint=2]="sprint",e[e.config=3]="config",e[e.indie=4]="indie",e[e.tasklist=5]="tasklist",e[e.bulkStatus=6]="bulkStatus"}(S||(S={})),function(e){e[e.project=1]="project",e[e.tasklist=2]="tasklist",e[e.stage=3]="stage",e[e.sprint=4]="sprint",e[e.config=5]="config",e[e.status=6]="status"}(E||(E={}));var M=((r={})[S.normal]=[E.project,E.tasklist,E.stage],r[S.sprint]=[E.project,E.sprint],r[S.config]=[E.project,E.tasklist,E.sprint,E.config,E.status],r[S.indie]=[E.project],r[S.tasklist]=[E.project,E.tasklist],r[S.bulkStatus]=[E.config,E.status],r),j=Object(p.connect)(function(e){return i.a({},e.ui.taskLocator)},function(e){return{actions:Object(d.bindActionCreators)(m.actions,e)}})(((o=function(e){function t(t){var n=e.call(this,t)||this;return n.isDefaultProject=function(){return n.props.selectedProject&&n.props.selectedProject._id===Object(m.getUnsetProject)()._id},n.isTasklistEnabled=function(){return new I(n.props.selectedProject,{bindByMatrix:!1}).isAppEnabled("tasklist")},n.getTip=function(){var e=n.props.tips;return void 0===e?c.get("stage.selector.tips"):n.isDefaultProject()?c.get("stage.selector.indie.task.tips"):"scrumTaskCreator"===n.props.optionalType&&n.isTaskflowEnabled()?c.get("home.task.creator.scrum.tips"):e},n.getSubmitData=function(){var e=n.props,t=e.selectedProject,r=e.selectedTasklist,o=e.selectedStage,i=e.selectedSprint,s=e.selectedScenarioField,a=e.selectedTaskflowStatus,c=n.state,l=c.doLink,u=c.doLinked;return{selectedProject:t&&t._id===Object(m.getUnsetProject)()._id?null:t,selectedSprint:i&&i._id===Object(m.getUnsetSprint)()._id?null:i,selectedTasklist:r,selectedStage:o,selectedScenarioField:s,selectedTaskflowStatus:a,doLink:l,doLinked:u}},n.setDefaultProject=function(){!n.props.organizationId||n.props.hideIndieEntry||n.props.selectedProject||n.props.actions.selectProject(Object(m.getUnsetProject)())},n.setDefaultSprint=function(){n.props.selectedProject&&Object(h.isSprintEnabled)(n.props.selectedProject)&&!n.props.selectedSprint&&n.props.actions.selectSprint(Object(m.getUnsetSprint)())},n.setDefaultTasklist=function(){n.isDefaultProject()||n.isTasklistEnabled()||!n.props.selectedProject||Object(h.isTasklistIgnored)(n.props.selectedProject)||n.props.actions.setCertainTasklist()},n.setDefaultTaskflowStatus=function(){if(n.isTaskflowEnabled()&&n.props.selectedScenarioField&&!n.props.selectedTaskflowStatus){var e=n.props.selectedScenarioField.taskflowstatuses.filter(n.filterStatus)[0];e&&n.props.actions.selectTaskflowStatus(e)}},n.onSubmit=function(){n.props.onSubmit(n.getSubmitData())},n.onToggleLink=function(e){var t;n.setState(((t={})[e]=!n.state[e],t))},n.checkValid=function(){var e,t=n.props,r=t.selectedProject,o=t.selectedTasklist,i=t.selectedStage,s=t.selectedSprint,a=t.selectedScenarioField,c=t.selectedTaskflowStatus,l=((e={})[E.project]=r,e[E.tasklist]=o,e[E.stage]=i,e[E.sprint]=s,e[E.config]=a,e[E.status]=c,e),u=n.getSelectorConfig();return!u||u.map(function(e){return l[e]}).reduce(function(e,t){return e&&!!t},!0)},n.onSelectTaskflowStatus=function(e){var t=n.props.selectedScenarioField.taskflowstatuses.find(function(t){return t._id===e});n.props.actions.selectTaskflowStatus(t)},n.onSelectScenario=function(e){var t=n.props.scenarioFields.find(function(t){return t._id===e});n.props.actions.selectScenarioField(t)},n.onSelectSprint=function(e){var t=n.props.sprints.filter(function(t){return t._id===e})[0];n.props.actions.selectSprint(t)},n.onSelectStage=function(e){var t=n.props.stages.filter(function(t){return t._id===e})[0];n.props.actions.selectStage(t)},n.onSelectTasklist=function(e){var t=n.props.tasklists.filter(function(t){return t._id===e})[0];n.props.actions.selectTasklist(t)},n.onSelectProject=function(e){n.props.actions.selectProject({projectId:e?e.id:null}),n.projectSelectorRef.close()},n.filterStatus=function(e){var t=n.props,r=t.extendStatusFilter,o=t.acceptedStatusKinds,i=t.selectedProject,s=t.selectedScenarioField;return[!o||o.indexOf(e.kind)>-1,!r||r(i,s,e)].every(function(e){return e})},n.formatSelectedItem=function(){var e=n.props,t=e.selectedProject,r=e.organizationId;if(!t)return[];var o=new I(t,{bindByMatrix:!1}).hasPermission("task.put"),i=Object.assign({},t,{roleRight:{role:{permissions:[o]}}}),s=Object(w.projectAsSelectorItem)(i,r,"tasks","task.post");return[Object.assign({},s,{checked:!0,canToggle:!0})]},n.renderScenarioItem=function(e){return a.a.createElement("div",{key:e._id,className:T["scenario-selector"]},a.a.createElement(g.FieldIcon,{icon:e.icon,type:"task"}),a.a.createElement("span",null,e.name))},n.saveProjectSelectorRef=function(e){n.projectSelectorRef=e},n.state={doLink:!!n.props.doLink,doLinked:!!n.props.doLinked},n}return i.d(t,e),t.prototype.componentDidMount=function(){this.props.withDefaultProject&&this.setDefaultProject(),this.setDefaultSprint(),this.setDefaultTasklist(),this.setDefaultTaskflowStatus()},t.prototype.componentDidUpdate=function(e){e.selectedProject!==this.props.selectedProject&&this.setDefaultTasklist(),this.props.selectedScenarioField&&(e.selectedScenarioField&&e.selectedScenarioField._id)!==this.props.selectedScenarioField._id&&this.setDefaultTaskflowStatus()},t.prototype.componentWillUnmount=function(){this.props.onClose&&this.props.onClose(this.getSubmitData()),this.props.actions.exitTaskLocator()},t.prototype.isTaskflowEnabled=function(){return this.props.selectedProject&&Object(h.isTaskflowEnabled)(this.props.selectedProject)},t.prototype.getSelectorConfig=function(){var e=void 0;if(this.isDefaultProject())e=S.indie;else if(this.props.selectedProject&&!Object(h.isNormal)(this.props.selectedProject))switch(this.props.optionalType){case"sprints":e=S.sprint;break;case"scenarioConfigs":e=S.config;break;case"scrumTaskCreator":e=S.tasklist;break;case"bulkStatus":e=S.bulkStatus}void 0===e&&(e=S.normal);var t=M[e];return this.props.selectedProject&&Object(h.isTasklistIgnored)(this.props.selectedProject)&&(t=t.filter(function(e){return e!==E.tasklist})),this.props.selectedProject&&Object(h.isSprintEnabled)(this.props.selectedProject)||(t=t.filter(function(e){return e!==E.sprint})),t},t.prototype.renderTip=function(){return a.a.createElement("p",{className:T.tips},this.getTip())},t.prototype.renderSubmit=function(){return a.a.createElement(u.Button,{onClick:this.onSubmit,disabled:!this.checkValid()},c.get("task.locator.submit"))},t.prototype.renderLinkChecker=function(){return this.props.showLinkOptions&&a.a.createElement(f.a,{doLink:this.state.doLink,doLinked:this.state.doLinked,doLinkText:c.get("subtask.menu.tranform.do.link"),doLinkedText:c.get("subtask.menu.tranform.do.linked"),onToggleLink:this.onToggleLink})},t.prototype.renderStatus=function(e,t){return a.a.createElement(C.StatusLabel,{className:"task-locator-taskflow-status",size:"middle",fixedWidth:t,title:e.name,kind:e.kind})},t.prototype.renderTaskflowStatuses=function(){var e=this,t=this.props,n=t.selectedScenarioField,r=t.selectedTaskflowStatus,o=!1;n&&n.taskflowstatuses&&(o=n.taskflowstatuses.filter(this.filterStatus).map(function(t){return{data:t._id,label:t.name,content:e.renderStatus(t,!1)}}));var i=null;return r&&(i={data:r._id,label:r.name,content:this.renderStatus(r,!0)}),a.a.createElement("div",{key:"taskflowStatus",className:T["selector-wrapper"]},a.a.createElement("span",{className:T["selector-wrapper-label"]},c.get("task.locator.status.selector.label")),a.a.createElement(_,{opened:this.props.taskflowStatusOpened,onVisibleChange:this.props.actions.toggleStatusSelector,onSelect:this.onSelectTaskflowStatus,data:i,disabled:!this.props.selectedScenarioField,placeholder:c.get("task.locator.status.selector.trigger.placeholder"),list:o}))},t.prototype.renderScenarioFieldSelector=function(){var e=this,t=this.props,n=t.scenarioFields,r=t.selectedScenarioField,o=t.acceptedScenarioTypes,i=t.frozenTypes,s=-1===(void 0===i?[]:i).indexOf("scenarioConfig"),l=!!n&&n.filter(function(e){return!o||o.indexOf(e.proTemplateConfigType)>-1}).map(function(t){return{data:t._id,label:t.name,content:e.renderScenarioItem(t)}}),u=null;return r&&(u={data:r._id,label:r.name,content:this.renderScenarioItem(r)}),a.a.createElement("div",{key:"scenarioField",className:T["selector-wrapper"]},a.a.createElement("span",{className:T["selector-wrapper-label"]},c.get("task.locator.scenario.selector.label")),a.a.createElement(_,{selectable:s,opened:this.props.scenarioSelectorOpened,onVisibleChange:this.props.actions.toggleScenarioSelector,onSelect:this.onSelectScenario,data:u,disabled:!this.props.selectedProject,placeholder:c.get("task.locator.scenario.selector.trigger.placeholder"),list:l}))},t.prototype.renderSprintSelector=function(){var e=this.props,t=e.sprints,n=e.selectedSprint,r=!!t&&t.map(function(e){return{data:e._id,label:e.name}}),o=null;return n&&(o={data:n._id,label:n.name}),a.a.createElement("div",{key:"sprint",className:T["selector-wrapper"]},a.a.createElement("span",{className:T["selector-wrapper-label"]},c.get("task.locator.sprint.selector.label")),a.a.createElement(_,{opened:this.props.sprintSelectorOpened,onVisibleChange:this.props.actions.toggleSprintSelector,onSelect:this.onSelectSprint,data:o,disabled:!this.props.selectedProject,placeholder:c.get("task.locator.sprint.selector.trigger.placeholder"),list:r}))},t.prototype.renderStageSelector=function(){var e=this.props,t=e.stages,n=e.selectedStage,r=!!t&&t.map(function(e){return{data:e._id,label:e.name}}),o=null;return n&&(o={data:n._id,label:n.name}),a.a.createElement("div",{key:"stage",className:T["selector-wrapper"]},a.a.createElement("span",{className:T["selector-wrapper-label"]},c.get("task.locator.stage.selector.label")),a.a.createElement(_,{opened:this.props.stageSelectorOpened,onVisibleChange:this.props.actions.toggleStageSelector,onSelect:this.onSelectStage,data:o,disabled:!(this.props.selectedProject&&this.props.selectedTasklist),placeholder:c.get("task.locator.stage.selector.trigger.placeholder"),list:r}))},t.prototype.renderTasklistSelector=function(){var e=this.props,t=e.tasklists,n=e.selectedTasklist;if(e.selectedProject&&!this.isTasklistEnabled())return null;var r=!!t&&t.map(function(e){return{data:e._id,label:e.title}}),o=null;return n&&(o={data:n._id,label:n.title}),a.a.createElement("div",{key:"tasklist",className:T["selector-wrapper"]},a.a.createElement("span",{className:T["selector-wrapper-label"]},c.get("task.locator.tasklist.selector.label")),a.a.createElement(_,{opened:this.props.tasklistSelectorOpened,onVisibleChange:this.props.actions.toggleTasklistSelector,onSelect:this.onSelectTasklist,data:o,disabled:!this.props.selectedProject,placeholder:c.get("task.locator.tasklist.selector.trigger.placeholder"),list:r}))},t.prototype.renderProjectSelector=function(){var e=this.props,t=e.organizationId,n=e.selectedProject,r=e.hideIndieEntry,o=e.noFilter,i=e.frozenTypes,s=!i||-1===i.indexOf("project"),l=n?n.name:c.get("project.selector.project.unset");if(!s)return a.a.createElement("div",{key:"project",className:T["selector-wrapper"]},a.a.createElement("span",{className:T["selector-wrapper-label"]},c.get("task.locator.project.selector.label")),a.a.createElement(u.TextButton,{className:T["project-selector-trigger"],disabled:!0},a.a.createElement("span",{className:"trigger-hint"},l),a.a.createElement(u.Icon,{name:"chevron-down"})));var p=a.a.createElement("div",{className:T["project-selector-dropdown"]},a.a.createElement(w.ProjectSelector,{selected:this.formatSelectedItem(),_organizationId:t,objectType:"tasks",permission:"task.post",onConfirm:this.onSelectProject,noFilter:o,hideIndieEntry:!t||r}));return a.a.createElement("div",{key:"project",className:T["selector-wrapper"]},a.a.createElement("span",{className:T["selector-wrapper-label"]},c.get("task.locator.project.selector.label")),a.a.createElement(u.Dropdown,{ref:this.saveProjectSelectorRef,content:p,placement:"bottomRight",nested:!0,persistence:!0},a.a.createElement(u.TextButton,{className:T["project-selector-trigger"]},a.a.createElement("span",{className:"trigger-hint"},l),a.a.createElement(u.Icon,{name:"chevron-down"}))))},t.prototype.renderSelector=function(e){switch(e){case E.project:return this.renderProjectSelector();case E.tasklist:return this.renderTasklistSelector();case E.stage:return this.renderStageSelector();case E.sprint:return this.renderSprintSelector();case E.config:return this.renderScenarioFieldSelector();case E.status:return this.renderTaskflowStatuses();default:return a.a.createElement("noscript",null)}},t.prototype.renderLocationSelectors=function(){var e=this;return this.getSelectorConfig().map(function(t){return e.renderSelector(t)})},t.prototype.render=function(){return a.a.createElement("div",{className:T.root},this.renderLocationSelectors(),this.renderLinkChecker(),this.renderTip(),this.renderSubmit())},t}(a.a.PureComponent)).defaultProps={withDefaultProject:!0},o)),P=function(e){l.store.dispatch(m.actions.bootstrapTaskLocator(e))},x=function(e){l.store.dispatch(m.actions.selectScenarioField(e))}},"17bKXt//":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("GESwhXbR"),a=n("tLZJUYWX"),c=n.n(a),l=n("sa1Ed382"),u=n("s0r7VfKc"),p=n("uHRdHWpl"),d=n("9K6UCx6U"),h=n("PjwvqKDK"),m=n("HDJEOtNh"),f=n("S3Uj9fSO"),g=n.n(f),v=n("TSYQbtd+"),b=n.n(v),y=n("I1I7C8JU"),k=n.n(y),_={basic:{default:n("2Ogs9lXX"),active:n("qs4hSbFB")},pro:{default:n("+xRnPW3Y"),active:n("Tfs9ungZ")},cs:{default:n("QbOngE/j"),active:n("pgEES3Do")}},w={transition:"height 500ms ease-in",height:0,overflow:"hidden"},C={entering:{height:0},entered:{height:380}},S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.features=[],t.renderDetail=function(e){var n=r.a({},w,C[e]),o=t.features.map(function(e,t){return i.a.createElement("li",{key:t},i.a.createElement("span",null),i.a.createElement("span",null,e))});return i.a.createElement("div",{style:n},i.a.createElement("ul",{className:k.a["medal-features"]},o))},t.handleClick=function(){t.props.onClick&&t.props.onClick(t.name)},t}return r.d(t,e),t.prototype.getCover=function(){var e=this.props.active?"active":"default";return _[this.name][e]},t.prototype.getBtnText=function(){switch(this.props.role){case m.RoleScope.Admin:case m.RoleScope.Owner:return c.a.get("organization.payment.feature.enable");default:return"cs"===this.name?c.a.get("organization.payment.feature.enable.now"):c.a.get("organization.payment.feature.request")}},t.prototype.renderStatusBtn=function(){var e,t=b()(((e={})[k.a["medal-btn"]]=!0,e[k.a["medal-btn-active"]]=this.props.active,e)),n=this.props.active?i.a.createElement("span",null):i.a.createElement("span",{onClick:this.handleClick},this.getBtnText());return i.a.createElement("div",{className:t},n,i.a.createElement(s.Icon,{name:this.props.active?"tick":"chevron-right"}))},t.prototype.render=function(){return i.a.createElement("div",{className:k.a.medal},i.a.createElement("div",{className:k.a["medal-main"]},i.a.createElement("img",{src:this.getCover()}),this.renderStatusBtn()),i.a.createElement("div",{className:k.a["medal-description"]},i.a.createElement("p",null,this.title),i.a.createElement("p",null,this.subtitle)),i.a.createElement(g.a,{in:this.props.expanded,timeout:300},this.renderDetail))},t.defaultProps={onClick:function(){}},t}(o.PureComponent),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="basic",t.title=c.a.get("organization.payment.basic.title"),t.subtitle=c.a.get("organization.trail.normal.desc"),t.features=[c.a.get("organization.payment.basic.feature.1"),c.a.get("organization.payment.basic.feature.2"),c.a.get("organization.payment.basic.feature.3"),c.a.get("organization.payment.basic.feature.4"),c.a.get("organization.payment.basic.feature.5"),c.a.get("organization.payment.basic.feature.6"),c.a.get("organization.payment.basic.feature.7"),c.a.get("organization.payment.basic.feature.8"),c.a.get("organization.payment.basic.feature.9")],t}return r.d(t,e),t}(S),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="pro",t.title=c.a.get("organization.payment.pro.title"),t.subtitle=c.a.get("organization.trail.pro.desc"),t.features=[c.a.get("organization.payment.pro.feature.1"),c.a.get("organization.payment.pro.feature.2"),c.a.get("organization.payment.pro.feature.3"),c.a.get("organization.payment.pro.feature.4"),c.a.get("organization.payment.pro.feature.5"),c.a.get("organization.payment.pro.feature.6"),c.a.get("organization.payment.pro.feature.7"),c.a.get("organization.payment.pro.feature.8")],t}return r.d(t,e),t}(S),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="cs",t.title=c.a.get("organization.payment.cs.title"),t.subtitle=c.a.get("organization.payment.cs.subtitle"),t.features=[c.a.get("organization.payment.cs.feature.1","5 * 12"),c.a.get("organization.payment.cs.feature.2"),c.a.get("organization.payment.cs.feature.3"),c.a.get("organization.payment.cs.feature.4")],t}return r.d(t,e),t}(S),M=n("HEmvOgQr"),j=n.n(M),P=n("RQ44psah"),x=n("CxY0Mkc1").format,N=n("HYobN8SQ"),O=n("ZKvdKH5+"),R=function(e){function t(t){var n=e.call(this,t)||this;return n.switchView=function(){n.setState({view:1})},n.toggleExpanded=function(){n.setState({expanded:!n.state.expanded}),n.sendGTA(null,"toggle perks",{category:n.state.expanded?"off":"on"})},n.handleBuyMore=function(){window.open(P.pay.orgAddMember(n.props.organizationId)),l.gta.event({action:"purchase license",control:"License Summary",segment:"Upgrade Menu",organizationid:n.props.organizationId})},n.handleConsult=function(){l.gta.event({action:"consult",control:"License Summary",method:"click",page:"Organization Page",segment:"Upgrade Menu",organizationid:n.props.organizationId}),window.open(P.form.consult)},n.handleMemberLink=function(){l.router.navigateToMemberProfile(l.PREFERENCE.get("lastWorkspace")),n.props.onClose()},n.handleUpgrade=function(){window.open(P.pay.orgUpgrade(n.props.organizationId))},n.handleNotify=function(){var e=n.props,t=e.organizationId,r=e.onClose;n.owner$=u.default.fetch.getOrganization(t).subscribe(function(e){l.gta.event({control:"indie-task-creator",executorId:e._ownerId,organizationId:t,private:!0}),r()})},n.handleMedalClick=function(e){var t=n.props,r=t.organizationId,o=t.payment;if(!m.OrganizationAccess.hasAdminAuthority(r))return n.handleNotify(),void n.sendGTA(e);if("cs"===e)return window.open(P.pay.orgAddMember(n.props.organizationId)),void n.sendGTA(e);n.request$&&n.request$.unsubscribe();var i={next:function(){var e=c.a.get("organization.payment.pro.upgrade.success",3);s.Toast.success(e),setTimeout(function(){var e=x({pathname:location.origin+"/organization/"+r,query:{isNew:!0,templateScene:"orgPro"}});window.location.assign(e)},3e3)},error:function(){return s.Toast.error(c.a.get("organization.payment.pro.upgrade.fail"))}};o.isPaid&&o.canGetProfessionalTrial?n.request$=u.default.fetch.getTrialPro(r).do(function(){return n.sendGTA(e,null,{category:"trial"})}).subscribe(i):!o.isPaid&&"org"===o.type&&o.memberQuota<=10?n.request$=u.default.fetch.getTrialPro(r).do(function(){return n.sendGTA(e,null,{category:"free"})}).subscribe(i):(n.handleUpgrade(),n.sendGTA(e,null,{category:"purchase"}))},n.handleHideUpgradeBtn=function(){N.namespace("navigator-upgrade-btn").set(n.props.organizationId,!0),n.props.onClose(),h.navigatorRefresh$.next(!0)},n.state={currentMemberCount:0,maxMemberCount:n.props.payment.memberQuota,expanded:!1,view:0},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.members$=u.default.fetch.getMembersCount(this.props.organizationId).subscribe(function(t){e.setState({currentMemberCount:t})}),l.gta.event({action:"open upgrade menu",control:this.props.from,organizationid:this.props.organizationId})},t.prototype.componentWillUnmount=function(){this.members$&&this.members$.unsubscribe(),this.request$&&this.request$.unsubscribe(),this.owner$&&this.owner$.unsubscribe,this.members$=this.request$=this.owner$=null},t.prototype.renderPrivilege=function(){var e=this.state.expanded,t=this.props,n=t.role,o=t.payment,a=e?i.a.createElement(s.Icon,{name:"chevron-up"}):i.a.createElement(s.Icon,{name:"chevron-down"}),l=o.isProfessional,u=o.isPaid,p={role:n,expanded:e,onClick:this.handleMedalClick};return i.a.createElement(i.a.Fragment,null,i.a.createElement("h4",null,c.a.get("organization.payment.privilege")),i.a.createElement("div",{className:j.a["medal-container"]},i.a.createElement(E,r.a({active:!0},p)),i.a.createElement(T,r.a({active:l},p)),i.a.createElement(I,r.a({active:u},p))),i.a.createElement("p",{className:j.a["privilege-detail-toggler"]},i.a.createElement(s.TextButton,{color:"blue",onClick:this.toggleExpanded},c.a.get("organization.payment.privilege.expand"),a)))},t.prototype.renderMemberQuota=function(){var e=this.state,t=e.maxMemberCount,n=e.currentMemberCount,r=this.props,o=r.organizationId,a=r.payment,l=Math.min(n/t,1),u=m.OrganizationAccess.hasAdminAuthority(o)?this.renderMemberQuotaBtn():i.a.createElement(s.TextButton,{onClick:this.handleNotify},c.a.get("organization.payment.license.request")),h=Object(p.default)(a.expiration).format("YYYY-MM-DD"),f=Math.ceil(Math.min(80,80)/2-2),g=2*Math.PI*f,v=g*l+" "+g*(1-l);return i.a.createElement(i.a.Fragment,null,i.a.createElement("h4",null,c.a.get("organization.payment.license.status")),i.a.createElement("div",{className:j.a["member-quota-content"]},i.a.createElement("div",{className:j.a["member-quota-left"]},i.a.createElement("div",{className:j.a["member-quota-left-wrap"]},i.a.createElement("div",{className:j.a["member-quota-number"]},i.a.createElement(d.a,{number:Math.min(Math.round(100*l),999)+"%"})),i.a.createElement("svg",{width:80,height:80},i.a.createElement("circle",{r:f,cx:""+(f+2),cy:""+(f+2),strokeWidth:4,stroke:s.colors.$B50,opacity:"0.08",fill:"none"}),i.a.createElement("circle",{r:f,cx:""+(f+2),cy:""+(f+2),strokeWidth:4,stroke:1===l?s.colors.$R50:s.colors.$B50,fill:"none",strokeDasharray:v,strokeDashoffset:"75%"})))),i.a.createElement("div",{className:j.a["member-quota-right"]},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("p",null,c.a.get("organization.payment.license.max")),i.a.createElement("p",null,i.a.createElement(d.a,{number:t}))),i.a.createElement("li",null,i.a.createElement("p",null,c.a.get("organization.payment.license.available")),i.a.createElement("p",null,i.a.createElement(d.a,{number:Math.max(t-n,0)})))),i.a.createElement("span",null,c.a.get("organization.payment.license.expiration",h))),u))},t.prototype.renderMemberQuotaBtn=function(){var e=this,t=this.props.payment;return i.a.createElement("div",{className:j.a["member-quota-right-btn"]},t.isPaid?i.a.createElement(s.Button,{type:"secondary",onClick:e.handleMemberLink},c.a.get("organization.payment.license.member")):i.a.createElement(s.Button,{type:"secondary",onClick:e.handleConsult},c.a.get("organization.payment.license.consult")),i.a.createElement(s.Button,{onClick:this.handleBuyMore},c.a.get("organization.payment.license.add")))},t.prototype.hideBtn=function(){var e=this.props.payment;return![!e.isPaid,!e.isProfessional,e.isSoftExceed,e.isStrictExceed].some(function(e){return e})},t.prototype.renderView=function(){var e=t.HideUpgradeBtn(this.props.organizationId);if(0===this.state.view){var n=this.hideBtn()||e?null:i.a.createElement("p",{className:j.a["payment-status-hint"]},i.a.createElement(s.TextButton,{onClick:this.switchView},c.a.get("organization.payment.hide.upgrade")));return i.a.createElement(i.a.Fragment,null,i.a.createElement("section",{className:j.a["payment-status-member-quota"]},this.renderMemberQuota()),i.a.createElement("section",{className:j.a["payment-status-privilege"]},this.renderPrivilege()),n)}return i.a.createElement("div",{className:j.a["payment-turnoff-upgrade-tip"]},i.a.createElement("img",{width:"240",height:"271",src:O}),i.a.createElement("p",null,c.a.get("organization.payment.upgrade.btn.where")),i.a.createElement(s.Button,{onClick:this.handleHideUpgradeBtn},c.a.get("organization.payment.get.it")))},t.prototype.sendGTA=function(e,t,n){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n={}),"basic"!==e&&(null!==e?l.gta.event(r.a({action:t||this.getGTAction(e,this.props.role),control:"cs"===e?"Service Badge":"Version Badge",segment:"Upgrade Menu",organizationid:this.props.organizationId},n)):l.gta.event(r.a({action:t,segment:"Upgrade Menu",organizationid:this.props.organizationId},n)))},t.prototype.getGTAction=function(e,t){if("cs"===e)return t===m.RoleScope.Admin||t===m.RoleScope.Owner?"purchase license":"request purchase license";if("pro"===e)return t===m.RoleScope.Admin||t===m.RoleScope.Owner?"upgrade license":"request upgrade license";throw Error("unreachable code path")},t.prototype.render=function(){var e=0===this.state.view?c.a.get("organization.payment.current.status"):c.a.get("organization.payment.close.upgrade.btn");return i.a.createElement(s.Modal,{defaultOpened:!0,title:e,width:800,titleCls:j.a["payment-stauts-title"],bodyStyle:t.bodyStyle,onHide:this.props.onClose},this.renderView())},t.HideUpgradeBtn=function(e){return null!=e&&(!!N.namespace("navigator-upgrade-btn").get(e)||!1)},t.bodyStyle={padding:"0px 28px"},t}(o.PureComponent);n.d(t,"PaymentStatus",function(){return R})},"18nYzn40":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("GESwhXbR"),s=function(){function e(e,t){var n=this;void 0===e&&(e=0),this.interval=e,this.el=t,this.progress=null,this.timeoutId=null,this.endPos=null,this.pastPos=null,this.initPos=null,this.renderFrame=function(){if(n.progress=n.pastPos/n.endPos,n.progress>=1)n.scroll(n.initPos+n.endPos),n.reset();else{var e=n.endPos/(-1===n.interval?30:n.interval);n.pastPos+=e,n.scroll(n.initPos+n.pastPos,function(){n.el&&(n.timeoutId=n.nextTick(n.renderFrame))})}}}return e.prototype.scroll=function(e,t){this.el&&(this.el.scrollTop=e,"function"==typeof t&&t())},e.prototype.nextTick=function(e){return-1!==this.interval?window.setTimeout(e,this.interval):window.requestAnimationFrame(e)},e.prototype.cancel=function(){null!=this.timeoutId&&(this.interval?window.clearTimeout(this.timeoutId):cancelAnimationFrame(this.timeoutId))},e.prototype.reset=function(){this.pastPos=this.progress=this.timeoutId=this.endPos=null},e.prototype.start=function(e,t){this.endPos=e,this.initPos=t,this.progress=this.pastPos=0,this.timeoutId=this.nextTick(this.renderFrame)},e.prototype.update=function(e){this.endPos+=e},e.prototype.destroy=function(){this.el=null,this.cancel()},e}(),a=n("04h4arvM"),c=n("5V57DkyA"),l=function(e){function t(t){var n=e.call(this,t)||this;return n.scrollbar={left:[!1,!1],right:[!1,!0]},n.overscan={column:0,row:0},n.saveLeftGridRef=function(e){n.leftGridRef=e},n.saveRightGridRef=function(e){n.rightGridRef=e},n.handleLeftOuterScroll=function(e){n.props.onOuterScroll&&n.props.onOuterScroll({deltaX:0,deltaY:e.deltaY})},n.leftCellRenderer=function(e){var t=e.rowIndex,o=e.columnIndex,i=r.g(e,["rowIndex","columnIndex"]);return n.props.cellRenderer(n.props.index,r.a({rowIndex:t,columnIndex:o},i),t===n.props.rowSize-1,o===n.props.columnSize-1)},n.rightCellRenderer=function(e){var t=e.rowIndex,o=e.columnIndex,i=r.g(e,["rowIndex","columnIndex"]);return n.props.cellRenderer(n.props.index,r.a({},i,{rowIndex:t,columnIndex:o+n.props.fixedColumns}),t===n.props.rowSize-1,o+n.props.fixedColumns===n.props.columnSize-1)},n.getRightColumnWidth=function(e){var t=n.props.columnWidth;return"function"==typeof t?t(e+n.props.fixedColumns):t},n.onRightGirdScroll=function(e){var t=e.scrollTop;n.setState({scrollTop:t}),"function"==typeof n.props.onScroll&&n.props.onScroll(e)},n.onLeftGridScroll=function(e){var t=e.scrollTop;n.setState({scrollTop:t})},n.handleGridSize(t),n.state={scrollTop:t.scrollTop},n.reCalcStyles(null,t),n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.reCalcStyles(this.props,e)},t.prototype.resetCols=function(e){this.leftGridRef&&this.leftGridRef.resetCols(e),this.rightGridRef&&this.rightGridRef.resetCols(e)},t.prototype.resetCache=function(){this.leftGridRef&&this.leftGridRef.resetCache(),this.rightGridRef&&this.rightGridRef.resetCache()},t.prototype.forceUpdateGrids=function(){this.leftGridRef&&this.leftGridRef.forceUpdate(),this.rightGridRef&&this.rightGridRef.forceUpdate()},t.prototype.render=function(){var e=this.props.className;return o.createElement("div",{className:e,style:this.containerStyle},this.renderHeader(),this.renderMainContent())},t.prototype.handleGridSize=function(e){this.reCalcStyles(null,e)},t.prototype.calcLeftGridWidth=function(e){var t=e.columnWidth,n=e.fixedColumns;if("function"==typeof t){for(var r=0,o=0;o<n;o++)r+=t(o);return r}return t*n},t.prototype.getLeftGridWidth=function(e){return null==this.leftWidth&&(this.leftWidth=this.calcLeftGridWidth(e)),this.leftWidth},t.prototype.getRightGridWidth=function(e){return e.width-this.getLeftGridWidth(e)},t.prototype.renderMainContent=function(){if("function"==typeof this.props.collapsed?this.props.collapsed(this.props.index):this.props.collapsed)return null;if(this.props.placeholder)return o.createElement("div",{className:this.props.classNameContent},this.props.placeholder);var e=this.props.scrollLeft>0?this.leftGridStyle.onSlide:this.leftGridStyle.component;return o.createElement("div",{className:this.props.classNameContent},o.createElement(a.a,{height:this.props.height,columnSize:this.props.fixedColumns,columnWidth:this.props.columnWidth,width:this.getLeftGridWidth(this.props),rowSize:this.props.rowSize,rowHeight:this.props.rowHeight,cellRenderer:this.leftCellRenderer,scrollbar:this.scrollbar.left,wrapperStyle:this.leftGridStyle.wrapper,style:e,scrollTop:this.state.scrollTop,onScroll:this.onLeftGridScroll,className:this.props.classNameLeft,ref:this.saveLeftGridRef,onOuterScroll:this.handleLeftOuterScroll,overscan:this.overscan,useGPU:!1}),o.createElement(a.a,{onScroll:this.onRightGirdScroll,height:this.props.height,width:this.getRightGridWidth(this.props),columnSize:this.props.columnSize-this.props.fixedColumns,columnWidth:this.getRightColumnWidth,rowSize:this.props.rowSize,rowHeight:this.props.rowHeight,cellRenderer:this.rightCellRenderer,scrollbar:this.scrollbar.right,wrapperStyle:this.rightGridStyle.wrapper,style:this.rightGridStyle.component,scrollLeft:this.props.scrollLeft,scrollTop:this.state.scrollTop,scrollToColumn:(this.props.scrollToColumn||0)-this.props.fixedColumns,className:this.props.classNameRight,ref:this.saveRightGridRef,onOuterScroll:this.props.onOuterScroll,overscan:this.overscan,useGPU:!0}),o.createElement("div",null,this.props.footer),c.OrgPortalToProjectAppAPm.component,c.BoardTableApm.component)},t.prototype.renderHeader=function(){return"string"==typeof this.props.header||null==this.props.header?o.createElement("div",null,o.createElement("span",{style:{width:this.getLeftGridWidth(this.props)}},this.props.header)):o.createElement("div",null,this.props.header)},t.prototype.reCalcStyles=function(e,t){var n=t.style,o=t.styleLeft,i=t.styleRight,s=t.onSlideStyle,a=t.height,c=!e,l=this.leftWidth;this.leftWidth=this.calcLeftGridWidth(t);var u=l!==this.leftWidth;if((c||n!==e.style)&&(this.containerStyle=n||{}),c||o!==e.styleLeft){var p=o;this.leftGridStyle={component:p,wrapper:this.leftGridStyle?this.leftGridStyle.wrapper:{position:"absolute",height:a},onSlide:r.a({},p,s)}}if(c||u||i!==e.styleRight){p=i;this.rightGridStyle={component:p,wrapper:{marginLeft:this.getLeftGridWidth(t),position:"relative",height:"100%"},onSlide:{}}}},t.defaultProps={fixedColumns:1,scrollLeft:0,scrollTop:0},t}(o.Component),u=n("D4LvyNzA"),p=n("6R2rvM4g"),d=n("Nz3F68i+");n.d(t,"a",function(){return f});var h=n("uD1kTzXE"),m=n("sa1Ed382"),f=function(e){function t(t){var n=e.call(this,t)||this;return n.swimChildren=[],n.topLeftStyle={position:"absolute",top:0,left:0},n.os=null,n.hasScrollX=!1,n.swimGridInnerStyle={paddingBottom:Object(i.getQuadUnit)(2)},n.swimGridInnerStyleForXScrollbar={paddingBottom:Number(Object(i.getQuadUnit)(2))+u.a.totalSize},n.saveScrollRef=function(e){n.scrollRef=e},n.saveTopLeftRef=function(e){n.topLeftRef=e},n.saveTopRightRef=function(e){n.topRightRef=e},n.saveSwimGridChild=function(e){n.swimChildren&&e&&e.props&&"number"==typeof e.props.index&&(n.swimChildren[e.props.index]=e)},n.handleGridsScroll=function(e){e.scrollLeft!==n.state.scrollLeft&&n.setState({scrollLeft:e.scrollLeft})},n.handleScrollX=function(e){e!==n.state.scrollLeft&&n.setState({scrollLeft:e})},n.handleOuterScroll=function(e){var t=e.deltaX,r=e.deltaY;if(n.scrollRef&&(Math.abs(r)>Math.abs(t)&&0!==r))if("Windows"===n.os)if(null===n.smoothScrollManager.progress){var o=n.scrollRef.scrollTop;n.smoothScrollManager.start(r,o)}else n.smoothScrollManager.update(r);else n.scrollRef.scrollTop+=r},n.getRightColumnWidth=function(e){var t=n.props.columnWidth;return"function"==typeof t?t(e+n.props.fixedColumns):t},n.topLeftRenderer=function(e){return n.props.controllerRenderer(e,e.columnIndex===n.props.columnSize-1)},n.topRightRenderer=function(e){var t=e.columnIndex,o=r.g(e,["columnIndex"]);return n.props.controllerRenderer(r.a({columnIndex:t+n.props.fixedColumns},o),t+n.props.fixedColumns===n.props.columnSize-1)},n.state={scrollLeft:0,scrollTop:0,maxRows:n.getMaxRows(),width:n.props.width},n.handleProps(null,t),n.os=m.ua.getOS().name,n}return r.d(t,e),t.prototype.componentDidMount=function(){this.scrollRef&&"Windows"===this.os&&(this.smoothScrollManager=new s(-1,this.scrollRef)),this.scrollRef&&"Windows"===this.os&&this.scrollRef.offsetWidth>this.scrollRef.clientWidth&&(this.setState(r.a({},this.state,{width:this.state.width-Object(a.c)()})),this.hasScrollX=!0)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.handleProps(this.props,e),this.props.width===e.width&&this.props.columnSize===e.columnSize||this.resetCols()},t.prototype.UNSAFE_componentWillUpdate=function(e,t){!this.state.scrollLeft!=!t.scrollLeft&&(this.topLeftStyle=t.scrollLeft>0?r.a({position:"absolute",top:0,left:0},e.onSlideStyle):{position:"absolute",top:0,left:0})},t.prototype.componentWillUnmount=function(){this.swimChildren=[],this.smoothScrollManager&&this.smoothScrollManager.destroy()},t.prototype.componentDidUpdate=function(e){if("Windows"===this.os){var t=!!(this.scrollRef&&this.scrollRef.offsetWidth>this.scrollRef.clientWidth);e.width===this.props.width&&this.hasScrollX===t||(this.setState(r.a({},this.state,{width:this.props.width-(t?Object(a.c)():0)})),this.hasScrollX=t)}else e.width!==this.props.width&&this.setState(r.a({},this.state,{width:this.props.width}))},t.prototype.render=function(){var e=this.props,t=e.width,n=e.height,r=e.extraHandlerRenderer,i=this.renderXScrollbar(),s=i?this.swimGridInnerStyleForXScrollbar:this.swimGridInnerStyle;return o.createElement("div",{className:h["swim-grid"],style:{width:t,height:n}},this.renderTopGrid(),o.createElement("div",{className:h["swim-grid-inner"],style:s,ref:this.saveScrollRef},this.renderMultiGrids(),r&&r()),i)},t.prototype.reflow=function(e){void 0===e&&(e=-1),-1===e?this.swimChildren.forEach(function(e){return e.forceUpdate()}):this.swimChildren[e]&&this.swimChildren[e].forceUpdate()},t.prototype.forceUpdateGrids=function(e){if(void 0===e&&(e=-1),this.forceUpdateTopGrids(),Array.isArray(this.swimChildren))if(-1===e)this.swimChildren.forEach(function(e){e.forceUpdateGrids()});else{var t=this.swimChildren[e];t&&t.forceUpdateGrids()}},t.prototype.forceUpdateTopGrids=function(){this.topLeftRef&&this.topLeftRef.forceUpdate(),this.topRightRef&&this.topRightRef.forceUpdate()},t.prototype.resetCache=function(){this.topLeftRef&&this.topLeftRef.resetCache(),this.topRightRef&&this.topRightRef.resetCache(),this.swimChildren&&this.swimChildren.length>0&&this.swimChildren.forEach(function(e){return e.resetCache()})},t.prototype.resetCols=function(){this.topLeftRef&&this.topLeftRef.resetCols(0),this.topRightRef&&this.topRightRef.resetCols(0),this.swimChildren&&this.swimChildren.length>0&&this.swimChildren.forEach(function(e){return e.resetCols(0)})},t.prototype.getMaxRows=function(e){if(void 0===e&&(e=this.props),"number"==typeof e.maxRows)return e.maxRows;var n=e.height-t.distanceToTop-t.instanceGap,r=n>t.distanceToBottom?n-t.distanceToBottom:n;return Math.floor(r/e.cellHeight)},t.prototype.getCellHeight=function(e,t){return void 0===t&&(t=1),e.cellHeight*t},t.prototype.getHeaderWidth=function(e,t){void 0===t&&(t=1);var n=e.columnWidth;if("function"==typeof n){for(var r=0,o=0;o<t;o++)r+=n(o);return r}return n*t},t.prototype.handleProps=function(e,t){var n=this,o=this.headerWidth;if(this.headerWidth=this.getHeaderWidth(t,t.fixedColumns),null==e)return this.topLeftProps={scrollbar:[!1,!1],rowSize:1,rowHeight:t.headerHeight,height:t.headerHeight,width:this.headerWidth,wrapperStyle:{height:"auto"},ref:this.saveTopLeftRef,overscan:{row:0,column:0},useGPU:!1},this.topRightProps={scrollbar:[!1,!1],rowSize:1,rowHeight:t.headerHeight,height:t.headerHeight,width:t.width-this.headerWidth,style:{position:"absolute",top:0},wrapperStyle:{marginLeft:this.headerWidth},onScroll:this.handleGridsScroll,cellRenderer:this.topRightRenderer,ref:this.saveTopRightRef,overscan:{row:0,column:0},useGPU:!1},void(this.containerStyle={height:this.props.headerHeight,width:this.props.width});o===this.headerWidth&&e.fixedColumns===t.fixedColumns&&e.columnWidth===t.columnWidth||(this.topRightProps.wrapperStyle={marginLeft:this.headerWidth},this.topLeftProps.width=this.headerWidth,this.topRightProps.width=t.width-this.headerWidth),e.width!==t.width&&(this.topRightProps.width=t.width-this.headerWidth),e.headerHeight===t.headerHeight&&e.width===t.width||(this.containerStyle={height:t.headerHeight,width:t.width}),e.headerHeight!==t.headerHeight&&(this.topRightProps.rowHeight=this.topRightProps.height=this.topLeftProps.rowHeight=this.topLeftProps.height=t.headerHeight),e.onSlideStyle!==t.onSlideStyle&&(this.topLeftStyle=this.state.scrollLeft>0?r.a({position:"absolute",top:0,left:0},t.onSlideStyle):{position:"absolute",top:0,left:0}),e.height!==t.height&&this.setState(function(e){return r.a({},e,{maxRows:n.getMaxRows(t)})})},t.prototype.renderTopGrid=function(){return o.createElement("div",{style:this.containerStyle,className:h["swim-grid-controller"]},o.createElement(a.a,r.a({},this.topLeftProps,{style:this.topLeftStyle,columnSize:Math.max(0,this.props.fixedColumns),columnWidth:this.props.columnWidth,cellRenderer:this.topLeftRenderer})),o.createElement(a.a,r.a({},this.topRightProps,{scrollLeft:this.state.scrollLeft,scrollToColumn:(this.props.scrollToColumn||0)-this.props.fixedColumns,columnSize:Math.max(0,this.props.columnSize-this.props.fixedColumns),columnWidth:this.getRightColumnWidth,cellRenderer:this.topRightRenderer})))},t.prototype.renderMultiGrids=function(){var e=this;return-1===this.state.maxRows?null:Array.from({length:this.props.instances},function(e,t){return t}).map(function(t){var n="function"==typeof e.props.rowSize?e.props.rowSize(t):e.props.rowSize,r=e.getCellHeight(e.props,Math.min(n,e.state.maxRows)),i=e.props.headerRenderer(t,e.headerWidth,e.state.scrollLeft),s=e.props.placeholderRenderer(t),a=e.props.footerRenderer(t,e.headerWidth,e.state.scrollLeft);return o.createElement(l,{className:h["swim-grid-container"],classNameContent:h["swim-grid-content"],onOuterScroll:e.handleOuterScroll,cellRenderer:e.props.cellRenderer,fixedColumns:e.props.fixedColumns,onSlideStyle:e.props.onSlideStyle,columnWidth:e.props.columnWidth,columnSize:e.props.columnSize,scrollLeft:e.state.scrollLeft,scrollToColumn:e.props.scrollToColumn,rowHeight:e.props.cellHeight,onScroll:e.handleGridsScroll,collapsed:e.props.collapsed,styleRight:e.props.gridStyle,styleLeft:e.props.gridStyle,ref:e.saveSwimGridChild,width:e.state.width,rowSize:n,height:r,header:i,placeholder:s,footer:a,index:t,key:t})})},t.prototype.renderXScrollbar=function(){var e={width:this.props.width,columnSize:this.props.columnSize,columnWidth:this.props.columnWidth,fixedColumnCount:this.props.fixedColumns||1};return Object(d.c)(e)?null:o.createElement(p.a,r.a({},e,{scrollLeft:this.state.scrollLeft,onScrollX:this.handleScrollX}))},t.defaultProps={headerRenderer:function(){},footerRenderer:function(){},fixedColumns:1,collapsed:function(){return!0}},t.instanceGap=8,t.distanceToTop=40,t.distanceToBottom=92,t}(o.PureComponent)},"1CaPZLa4":function(e,t,n){var r,o,i,s={}.hasOwnProperty;o=n("vmWJWrVe"),r=n("uW4wTxs2").OrganizationNotFound,i=n("wq9yixcx"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.className=i["organization-not-found-view"],t.prototype.viewName="OrganizationNotFoundView",t.prototype.initialize=function(){return this.requestReactView(this.el,r)},t}()},"1KFih46x":function(e,t,n){e.exports={"control-bar":"control-bar__3Bth",item:"item__3Uri","item-active":"item-active__1VIG","item-my":"item-my__3oKQ","item-dashboard":"item-dashboard__1RVl","item-calendar":"item-calendar__PlEU","item-inbox":"item-inbox__23FN"}},"1KRxJB1w":function(e,t,n){e.exports={"organization-subteam-item":"organization-subteam-item__WNht","item-name":"item-name__1u2g"}},"1Ms/DjSE":function(e,t,n){e.exports=n.p+"images/permission-dropdown-placeholder@2x.b1e3673e.png"},"1NVLEqJ4":function(e,t,n){e.exports={"project-tag-invite-modal__title":"project-tag-invite-modal__title__3JEW"}},"1O99B21r":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("s0r7VfKc"),l=n("DOZCBSCZ"),u=n("YqUJfXDr"),p=n("dWbDnvg6"),d=n("KAS2OY82"),h=n("ACrfQSoU"),m=n.n(h),f=function(e){function t(t){var n=e.call(this,t)||this;return n.loadMembers=function(){n.subscription&&n.subscription.unsubscribe(),n.subscription=c.default.fetch.expandPage(n.pageState,{mutate:!0}).subscribe(function(e){n.setState({hasMore:e.hasMore,members:e.result,isLoading:!1})})},n.state={isLoading:!0,hasMore:!1,members:[]},n.pageState=c.default.getProjectExternalMembersPagination(t.projectId),n}return r.d(t,e),t.prototype.componentDidMount=function(){this.loadMembers()},t.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.unsubscribe()},t.prototype.renderLoadMore=function(){return i.a.createElement(u.LoadMore,{onEnter:this.loadMembers,hasMore:this.state.hasMore,endWith:null})},t.prototype.renderLoading=function(){return this.state.isLoading&&i.a.createElement(l.a,null)},t.prototype.renderMembers=function(){var e=this;return this.state.members.map(function(t){return e.renderMember(t)}).filter(function(e){return!!e})},t.prototype.renderMember=function(e){var t=Object(d.a)(e);if(!t)return null;var n=null;switch(e.subjectType){case"organizationRole":break;case"teamLeader":e.user&&(n=i.a.createElement("div",{className:m.a["member-desc"]},e.user.name));break;case"organizationMember":e.user&&(n=i.a.createElement("div",{className:m.a["member-desc"]},e.user.email))}var r=e.projecttag&&i.a.createElement("div",{className:m.a["permission-desc"]},a.a.get("project.tag.permission.inherit",""),i.a.createElement("span",null,e.projecttag.name)),o=e.projectRole&&i.a.createElement("div",{className:m.a["member-role"]},e.projectRole.name);return i.a.createElement("div",{key:e._id,className:m.a["member-item"]},i.a.createElement(p.d,{className:m.a["member-avatar"],avatar:t.avatar}),i.a.createElement("div",{className:m.a["member-info"]},i.a.createElement("div",{className:m.a["info-wrapper"]},i.a.createElement("div",{className:m.a["member-name"]},t.name),n,r),o))},t.prototype.render=function(){return i.a.createElement("div",{className:m.a.container},this.renderMembers(),this.renderLoading(),this.renderLoadMore())},t}(i.a.PureComponent);n.d(t,"MemberPanel",function(){return f})},"1Qh+d3Sx":function(e,t,n){e.exports=n.p+"images/d_xiongmao@2x.926d2826.png"},"1Rycahsz":function(e,t){e.exports=function(e){var t='<div class="row-flex"> <section class="nav-body"> <ul class="nav-wrapper nav nav-underscore pull-left"> <li class="nav-underscore nav-more ';return e.isMoreApp&&(t+="active"),t+='" > <a data-toggle="dropdown" data-gta="{action: \'nav more\', control: \'Project Tabbar\'}" > <span class="dropdown-trigger-text">'+tb_i18n.get("more")+'</span> <span class="icon icon-chevron-down"></span> </a> <ul class="dropdown-menu card"></ul> </li> </ul> <a class="nav-link hinted pull-left" data-title="'+tb_i18n.get("app.appcenter.open")+'" data-gta="{action: \'show power-ups\', page: \'Tasks Page\', control: \'Project Tabbar\', method: \'click\'}" > <span class="icon icon-plus"></span> </a> </section> <div class="nav-footer"></div></div><div class="power-up-config-mount-node"></div>'}},"1X9nTsXu":function(e,t,n){e.exports=function(e){var t="";return t+='<div class="project-app-placeholder body-wrap"> <div class="placeholder-wrap card"> <div class="placeholder-content"> <div class="placeholder-image" style="background-image: url(\''+n("JylbWux3")+"')\"></div> <p>"+tb_i18n.get("project.app.placeholder.title")+" </p> </div> </div></div>"}},"1YA5lnf9":function(e,t,n){e.exports=n.p+"images/d_xiaoku@2x.8be50968.png"},"1ZlixaTN":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("GESwhXbR"),i=n("q1tIBJhx"),s=n.n(i),a=n("TSYQbtd+"),c=n.n(a),l=n("tLZJUYWX"),u=n("uHRdHWpl"),p=n("AjapuWMY"),d=function(e){return i.createElement("label",{className:c()(p.root,e.className),htmlFor:e.htmlFor},e.text)},h=n("26M0iDG9"),m=function(e){var t=function(){return!e.input.value&&e.placeholder},n=function(t){var n=t.dateString,r=new Date(n).toISOString();e.input.onChange(r)},r=function(){return t()?e.placeholder:(n=e.format,function(e){var t=n||"YYYY-MM-DD";return Object(u.default)(e).format(t)})(e.input.value);var n};return i.createElement("div",{className:c()(h.root,e.className)},e.label?i.createElement(d,{className:h.label,htmlFor:e.name,text:e.label}):null,i.createElement(o.DatePicker,{date:e.input.value?new Date(e.input.value).toISOString():null,onChange:n,clearable:!1,timepicker:!1},i.createElement("div",{className:h.inputContent},i.createElement("a",{className:c()(h.input,t()?h.placeholder:null)},i.createElement("span",{className:h.inputText},r()),i.createElement("span",{className:"icon icon-chevron-down"})))))},f=n("aeteqxLH"),g=function(e){return i.createElement("div",{className:c()(f.root,e.className),style:{width:(e.width||100)+"%"}},e.children)},v=n("a+N5u/Cl"),b=n("l1usYcM2"),y=[{getLocale:function(){return l.get("china")},key:"zh",number:"+86"},{getLocale:function(){return l.get("hongkong")},key:"hk",number:"+852"},{getLocale:function(){return l.get("macao")},key:"mo",number:"+853"},{getLocale:function(){return l.get("taiwan")},key:"tw",number:"+886"},{getLocale:function(){return l.get("japan")},key:"jp",number:"+81"},{getLocale:function(){return l.get("usa")},key:"us",number:"+1"},{getLocale:function(){return l.get("other")},key:"other",number:""}],k=function(e){return i.createElement("span",{className:c()(b.countryFlagRoot,e.className)},i.createElement("span",null,e.countryLocale))},_=function(e){function t(t){var n=e.call(this,t)||this;return n.getRefRoot=function(){return n.refRoot},n.setRefRoot=function(e){n.refRoot=e},n.getDropdownRef=function(){return n.dropdownRef},n.setDropdownRef=function(e){n.dropdownRef=e},n.getRefAreaCode=function(){return n.refAreaCode},n.setRefAreaCode=function(e){n.refAreaCode=e},n.getRefPhone=function(){return n.refPhone},n.setRefPhone=function(e){n.refPhone=e},n.getPayloadValue=function(){var e=n.refAreaCode.value||"",t=n.refPhone.value||"";return(e.trim()+" "+t.trim()).trim()},n.stopPropagation=function(e){e.stopPropagation&&e.stopPropagation()},n.handleBlur=function(){n.props.input.onBlur(n.getPayloadValue())},n.handleChange=function(){window.setTimeout(function(){n.props.input.onChange(n.getPayloadValue())},0)},n.handleFocus=function(){n.props.input.onFocus(n.getPayloadValue())},n.handleOptionSelect=function(e){var t=Object(v.find)(y,function(t){return t.key===e});n.refAreaCode.value=t.number,n.handleDefaultCountryChange(t),n.dropdownRef.close()},n.handleAreaCodeChange=function(e){var t=e.target.value,r=Object(v.find)(y,function(e){return e.number===t});r||(r=Object(v.find)(y,function(e){return"other"===e.key})),n.handleDefaultCountryChange(r)},n.handlePhoneChange=function(){n.handleChange()},n.handleDefaultCountryChange=function(e){if(e){var t=r.a({},n.state,{defaultValue:e});n.setState(t,function(){n.handleChange()})}},n.handleResetValue=function(){var e=r.a({},n.state,{hasDefaultValue:!1});n.setState(e)},n.renderOptionItemTick=function(e){return e.key!==n.props.input.value?null:i.createElement("span",{className:"icon icon-tick"})},n.renderOptionList=function(){return i.createElement("ul",{className:b.optionList},n.renderOptionItems())},n.state={defaultValue:y[0],hasDefaultValue:!Object(v.isEmpty)(t.input.value)},n}return r.d(t,e),t.prototype.getClassNameRoot=function(){return c()(b.root,this.props.meta.touched&&this.props.meta.error?b.isError:null,this.props.className)},t.prototype.renderLabel=function(){return this.props.label?i.createElement(d,{className:b.label,htmlFor:this.props.name,text:this.props.label}):null},t.prototype.renderOptionItems=function(){var e=this;return y.map(function(t,n){return i.createElement("li",{className:b.optionItem,key:n},i.createElement("a",{className:b.optionTrigger,onClick:function(){return e.handleOptionSelect(t.key)}},i.createElement(k,{countryKey:t.key,countryLocale:t.getLocale()}),e.renderOptionItemTick(t)))})},t.prototype.renderPopupContent=function(){return i.createElement("div",{className:b.popupContent,onClick:this.stopPropagation},this.renderOptionList())},t.prototype.renderDistricts=function(){return i.createElement(o.Dropdown,{content:this.renderPopupContent(),mountIn:this.getRefRoot,placement:"bottomLeft",ref:this.setDropdownRef},i.createElement("a",{className:b.triggerContent},i.createElement(k,{className:b.triggerText,countryKey:this.state.defaultValue.key,countryLocale:this.state.defaultValue.getLocale()}),i.createElement("span",{className:"icon icon-chevron-down"})))},t.prototype.renderPhoneInput=function(){return i.createElement("div",{className:b.inputContent},i.createElement("input",{className:b.inputAreaCode,defaultValue:this.state.defaultValue.number,onChange:this.handleAreaCodeChange,placeholder:l.get("country.area.code"),ref:this.setRefAreaCode,type:"text"}),i.createElement("input",{className:b.inputPhone,defaultValue:"",name:this.props.name,onBlur:this.handleBlur,onChange:this.handlePhoneChange,onFocus:this.handleFocus,placeholder:this.props.placeholder,ref:this.setRefPhone,type:"text"}))},t.prototype.renderEdit=function(){return i.createElement("div",{className:b.outerContent},this.renderDistricts(),this.renderPhoneInput())},t.prototype.renderInput=function(){return this.state.hasDefaultValue?i.createElement("div",{className:b.outerContent},this.props.input.value,i.createElement("button",{className:b.resetValueButton,onClick:this.handleResetValue},l.get("organization.member.profile.edit"))):this.renderEdit()},t.prototype.render=function(){return i.createElement("div",{className:this.getClassNameRoot(),ref:this.setRefRoot},this.renderLabel(),this.renderInput())},t}(i.Component),w=n("eHLmQbcC"),C=function(e){return i.createElement("div",{className:c()(w.root,e.className)},e.children)},S=n("bwmLBNku"),E=function(e){var t,n,r,s=function(e){e.stopPropagation&&e.stopPropagation()},a=function(){return c()(S.trigger,!e.input.value&&e.placeholder?S.placeholder:null)},u=function(e){n=e},p=function(){return t},h=function(e){r=e},m=function(){var t=r.value.trim();t.length>0&&(e.onCreate(t),r.value="")},f=function(e){13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),m())},g=function(){return e.options.map(function(t,r){return i.createElement("li",{className:S.optionItem,key:r},i.createElement("a",{className:S.optionTrigger,onClick:function(){return r=t,e.input.onChange(r),void n.close();var r}},i.createElement("span",{className:S.optionTriggerText},t),function(t){return t!==e.input.value?null:i.createElement("span",{className:"icon icon-tick"})}(t)))})},v=function(){return i.createElement("div",{className:S.popupContent,onClick:s},i.createElement("div",{className:S.createInputContent},i.createElement("input",{className:S.createInput,onKeyDown:f,placeholder:e.createInputPlaceholder,ref:h,type:"text"}),i.createElement("button",{className:S.createInputButton,onClick:m,type:"button"},e.createInputLabel||l.get("add"))),!e.options||e.options.length>0?null:i.createElement("div",{className:S.optionEmpty},l.get("profile.form.empty.options")),e.options&&0!==e.options.length?i.createElement("ul",{className:S.optionList},g()):null)};return i.createElement("div",{className:c()(S.root,e.className),ref:function(e){t=e}},e.label?i.createElement(d,{className:S.label,htmlFor:e.name,text:e.label}):null,i.createElement("div",{className:S.content},i.createElement(o.Dropdown,{content:v(),mountIn:p,placement:"bottomLeft",ref:u},i.createElement("a",{className:a()},i.createElement("span",{className:S.triggerText},!e.input.value&&e.placeholder?e.placeholder:e.input.value),i.createElement("span",{className:"icon icon-chevron-down"})))))},T=n("fvjXLGkK"),I=n("/MKjzBat"),M=n("VZAukzxm"),j=n("sEfCy7Dp"),P=n.n(j),x=n("J2m7XsKK"),N=n.n(x),O=n("YqUJfXDr"),R=n("bZn+K9Wv"),D=n("/vFqEyd8");n("vX7qefsd");var L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cxPrefix="teams-list-select-placeholder",t.cxImage=t.cxPrefix+"__image",t.cxTitle=t.cxPrefix+"__title",t.getImageUrl=function(){switch(t.props.type){case"search":return D;case"teams":return R;default:return null}},t.getTitle=function(){switch(t.props.type){case"search":return l.get("has.no.search.result");case"teams":return l.get("has.no.teams");default:return null}},t}return r.d(t,e),t.prototype.renderImage=function(){var e=this.getImageUrl();return null===e?null:i.createElement("img",{className:this.cxImage,src:e})},t.prototype.renderTitle=function(){var e=this.getTitle();return null===e?null:i.createElement("div",{className:this.cxTitle},e)},t.prototype.render=function(){return i.createElement("div",{className:c()(this.cxPrefix,this.props.className)},this.renderImage(),this.renderTitle())},t}(i.Component);n("tfIJglG0");var z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cxPrefix="teams-list-select-dropdown-content",t.cxHead=t.cxPrefix+"__head",t.cxHeadInput=t.cxHead+"__input",t.cxBody=t.cxPrefix+"__body",t.cxList=t.cxBody+"__list",t.cxItem=t.cxList+"__item",t.cxItemIcon=t.cxItem+"__icon",t.cxItemText=t.cxItem+"__text",t.handleClick=function(e){return function(){var n=[];if(~t.props.selectedTeams.map(function(e){return e._id}).indexOf(e))n=t.props.selectedTeams.filter(function(t){return t._id!==e});else{var o=N()(t.props.teams,function(t){return t._id===e});n=r.h(t.props.selectedTeams,[{_id:o._id,name:o.name}])}t.props.onChange(n)}},t.handleChange=function(e){var n=e.currentTarget;t.props.onFilter(n.value)},t.handlePrevent=function(e){e.stopPropagation()},t}return r.d(t,e),t.prototype.renderHead=function(){return i.createElement("div",{className:this.cxHead},i.createElement("input",{className:this.cxHeadInput,placeholder:l.get("lookup.teams"),type:"text",value:this.props.value,onChange:this.handleChange}))},t.prototype.renderPlaceholder=function(){var e=this.props,t=e.isSearching,n=e.teams;return n?n&&n.length>0?null:i.createElement(L,{type:t?"search":"teams"}):null},t.prototype.renderLoadMore=function(){return i.createElement(O.LoadMore,{onEnter:this.props.onEnterLoadMore,hasMore:this.props.isLoadingMore,endWith:null})},t.prototype.renderTick=function(e){return-1===this.props.selectedTeams.map(function(e){return e._id}).indexOf(e)?null:i.createElement(o.Icon,{className:this.cxItemIcon,name:"tick"})},t.prototype.renderItems=function(){var e=this;return this.props.teams.map(function(t){return i.createElement("li",{className:e.cxItem,key:t._id,onClick:e.handleClick(t._id)},i.createElement("span",{className:e.cxItemText},t.name),e.renderTick(t._id))})},t.prototype.renderList=function(){var e=this.props.teams;return e?0===e.length?null:i.createElement("ul",{className:this.cxList},this.renderItems()):i.createElement(o.Loading,null)},t.prototype.renderBody=function(){return i.createElement("div",{className:this.cxBody},this.renderPlaceholder(),this.renderList(),this.renderLoadMore())},t.prototype.render=function(){var e=this;return i.createElement("div",{className:c()(e.cxPrefix,e.props.className)},this.renderHead(),this.renderBody())},t}(i.Component);n("XADCubXo");var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cxPrefix="teams-list-select-trigger",t.cxIcon=t.cxPrefix+"__icon",t.cxPlaceholder=t.cxPrefix+"__placeholder",t.cxText=t.cxPrefix+"__text",t.getNames=function(){return t.props.teams.map(function(e){return e.name}).join(", ")},t}return r.d(t,e),t.prototype.renderPlaceholder=function(){return this.props.teams.length>0?null:i.createElement("span",{className:this.cxText+" "+this.cxPlaceholder},l.get("select.teams"))},t.prototype.renderTeamNames=function(){return 0===this.props.teams.length?null:i.createElement("span",{className:this.cxText},this.getNames())},t.prototype.render=function(){return i.createElement("div",{className:c()(this.cxPrefix,this.props.className)},this.renderPlaceholder(),this.renderTeamNames(),i.createElement(o.Icon,{className:this.cxIcon,name:"chevron-down",size:14}))},t}(i.Component);n("ASYHLDWg");var V,F=function(e){function t(t){var n=e.call(this,t)||this;return n.cxPrefix="teams-list-select",n.cxDropdownContent=n.cxPrefix+"__dropdown-content",n.cxLoading=n.cxPrefix+"__loading",n.handleLoadMore=function(){n.getIsSearching()?n.props.actions.searchMoreTeams():n.props.actions.readMoreTeams()},n.handleFetchTeams=P()(function(){n.getIsSearching()?n.props.actions.searchTeams({organizationId:n.props.organizationId,q:n.state.searchString.trim()}):n.props.actions.readTeams({organizationId:n.props.organizationId,onlyFirstLevel:!1})},300),n.handleFilter=function(e){n.setState(r.a({},n.state,{searchString:e})),n.handleFetchTeams()},n.handleDropdownOpen=function(){n.handleFetchTeams()},n.handleDropdownHide=function(){n.setState(r.a({},n.state,{searchString:null}),function(){n.props.actions.unmountTeamsList()})},n.handleSelectedTeamsChange=function(e){n.props.onChange(e)},n.state={searchString:null},n}return r.d(t,e),t.prototype.componentWillUnmount=function(){this.handleFetchTeams.cancel&&this.handleFetchTeams.cancel()},t.prototype.getIsSearching=function(){return!!(this.state.searchString&&this.state.searchString.length>0)},t.prototype.renderDropdownContent=function(){var e=this.getIsSearching(),t=e?this.props.searchedTeams:this.props.teams,n=e?this.props.isLoadingMoreSearch:this.props.isLoadingMore;return s.a.createElement(z,{className:this.cxDropdownContent,isSearching:e,value:this.state.searchString||"",onChange:this.handleSelectedTeamsChange,onFilter:this.handleFilter,selectedTeams:this.props.selectedTeams,teams:t,isLoadingMore:n,onEnterLoadMore:this.handleLoadMore})},t.prototype.render=function(){return s.a.createElement("div",{className:c()(this.cxPrefix,this.props.className)},s.a.createElement(o.Dropdown,{content:this.renderDropdownContent(),onHide:this.handleDropdownHide,onOpen:this.handleDropdownOpen,persistence:!0,nested:!0,placement:"bottomLeft"},s.a.createElement("span",null,s.a.createElement(A,{teams:this.props.selectedTeams}))))},t}(s.a.Component),B=Object(I.connect)(function(e){return{teams:Object(M.getSortedTeamsSelector)(e),searchedTeams:e.ui.teamsListSelect.searchedTeams,isLoadingMore:e.ui.teamsListSelect.isLoadingMore,isLoadingMoreSearch:e.ui.teamsListSelect.isLoadingMoreSearch}},function(e){return{actions:Object(T.bindActionCreators)({readTeams:M.readTeamsAction,readMoreTeams:M.readMoreTeamsAction,searchTeams:M.searchTeamsAction,searchMoreTeams:M.searchMoreTeamsAction,unmountTeamsList:M.unmountTeamsListAction},e)}})(F),U=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initialize=function(){t.render()},t.render=function(){t.requestReactView(B,{},{redux:!0})},t}r.d(t,e)}(n("vmWJWrVe")),n("bVSsPzm3")),$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={selectedTeams:t.props.selectedTeams.map(function(e){return{_id:e._id,name:e.name}})},t.handleTeamIdsChange=function(e){var n=e.map(function(e){return e._id});t.props.input.onChange(n),t.setState({selectedTeams:e})},t}return r.d(t,e),t.prototype.getClassNameRoot=function(){return c()(U.root,this.props.className)},t.prototype.renderLabel=function(){return this.props.label?s.a.createElement(d,{className:U.label,htmlFor:this.props.name,text:this.props.label}):null},t.prototype.renderInput=function(){return s.a.createElement(B,{className:U.inputContent,onChange:this.handleTeamIdsChange,organizationId:this.props.organizationId,selectedTeams:this.state.selectedTeams})},t.prototype.render=function(){return s.a.createElement("div",{className:this.getClassNameRoot()},this.renderLabel(),this.renderInput())},t}(s.a.PureComponent),H=n("VPWUgVmx"),G=function(e){var t=function(t){e.input.onBlur(t)},n=function(t){e.input.onChange(t)},r=function(t){e.input.onFocus(t)};return i.createElement("div",{className:c()(H.root,e.meta.touched&&e.meta.error?H.isError:null,e.className)},e.label?i.createElement(d,{className:H.label,htmlFor:e.name,text:e.label}):null,i.createElement("div",{className:H.inputContent},i.createElement("input",{className:H.input,defaultValue:e.input.value,name:e.name,onBlur:t,onChange:n,onFocus:r,placeholder:e.placeholder,type:e.type||"text"})))},q=n("ZSQrvOOr"),W=n("MCI9yZEr").Field,J=function(e){return!e||0===e.trim().length||(e.trim().length>40||null)},X=function(e){return{email:(t=e.email,!t||0===t.trim().length||null),name:J(e.name)};var t},Y=n("MCI9yZEr").reduxForm,K=(V=function(e){var t=r.f(Object(i.useState)(e.currentOrganization),2),n=t[0],a=t[1],u=function(t){if(n&&t){var i=n.positions,s=t.trim();s.trim().length>40?o.Toast.warning(l.get("profile.form.position.tooLong")):i.some(function(e){return e===s})?o.Toast.info(l.get("profile.form.position.isExisted")):e.onCreatePositionSubmit&&(e.onCreatePositionSubmit(r.h(i,[s])),a(function(e){return r.a({},e,{positions:r.h(i,[s])})}))}},p=function(t){if(n&&t){var i=n.staffTypes,s=t.trim();s.trim().length>40?o.Toast.warning(l.get("profile.form.staffType.tooLong")):i.some(function(e){return e===s})?o.Toast.info(l.get("profile.form.staffType.isExisted")):e.onCreateStaffTypeSubmit&&(e.onCreateStaffTypeSubmit(r.h(i,[s])),a(function(e){return r.a({},e,{staffTypes:r.h(i,[s])})}))}},d=function(t){e.handleSubmit&&e.handleSubmit(t)};return s.a.createElement(o.Modal,{width:600,defaultOpened:!0,titlePosition:"center",bodyStyle:{paddingTop:"16px"},title:l.get("organization.member.profile")},s.a.createElement("div",{className:c()(q.root,e.className)},s.a.createElement("form",{onSubmit:d},s.a.createElement("fieldset",null,s.a.createElement(C,null,s.a.createElement(g,{width:50},s.a.createElement(W,{component:G,label:l.get("profile.form.name.label"),name:"name",placeholder:l.get("profile.form.name.placeholder")})),s.a.createElement(g,{width:50},s.a.createElement(W,{component:G,label:l.get("profile.form.email.label"),name:"email",placeholder:l.get("profile.form.email.placeholder"),type:"email"}))),s.a.createElement(C,null,s.a.createElement(g,{width:50},s.a.createElement(W,{component:m,label:l.get("profile.form.birthday.label"),name:"birthday",placeholder:l.get("profile.form.birthday.placeholder")})),s.a.createElement(g,{width:50},s.a.createElement(W,{component:m,label:l.get("profile.form.entryTime.label"),name:"entryTime",placeholder:l.get("profile.form.entryTime.placeholder")}))),s.a.createElement(C,null,s.a.createElement(g,{width:50},s.a.createElement(W,{createInputPlaceholder:l.get("profile.form.staffType.create.placeholder"),component:E,label:l.get("profile.form.staffType.label"),name:"staffType",onCreate:p,options:n&&n.staffTypes,placeholder:l.get("profile.form.staffType.placeholder")})),s.a.createElement(g,{width:50},s.a.createElement(W,{createInputPlaceholder:l.get("profile.form.position.create.placeholder"),component:E,label:l.get("profile.form.position.label"),name:"position",onCreate:u,options:n&&n.positions,placeholder:l.get("profile.form.position.placeholder")}))),s.a.createElement(C,null,s.a.createElement(g,{width:100},s.a.createElement(W,{component:$,currentMember:e.currentMember,label:l.get("profile.form.teams.label"),name:"teamIds",organizationId:n._id,selectedTeams:e.currentMember.teamsInfo}))),s.a.createElement(C,null,s.a.createElement(g,{width:100},s.a.createElement(W,{component:_,label:l.get("profile.form.phone.label"),name:"phone",placeholder:l.get("profile.form.phone.placeholder")}))),s.a.createElement("p",{className:q.label},l.get("profile.form.workLocation.label")),s.a.createElement(C,null,s.a.createElement(g,{width:33},s.a.createElement(W,{component:G,name:"country",placeholder:l.get("profile.form.country")})),s.a.createElement(g,{width:33},s.a.createElement(W,{component:G,name:"province",placeholder:l.get("profile.form.province")})),s.a.createElement(g,{width:33},s.a.createElement(W,{component:G,name:"city",placeholder:l.get("profile.form.city")})))),s.a.createElement("div",{className:q.submitContent},s.a.createElement("button",{className:q.submit,type:"submit"},l.get("organization.member.profile.form.submit.text"))))))},Y({form:"memberProfile",validate:X})(V));n.d(t,"MemberProfileForm",function(){return K})},"1fU+e3+7":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f=function(e,t){return function(){return e.apply(t,arguments)}},g={}.hasOwnProperty,v=[].slice;u=n("a+N5u/Cl"),m=n("sa1Ed382"),a=n("qHH6+g6Q"),c=n("wd/RKGTj"),s=n("bZr3G77e"),l=n("HHtVDBJc"),h=n("s0r7VfKc").default,i=n("IssmDVnT").EventSDK,d=n("gLdDAp90").pickDefaultOccurrence,r=["_organizationId","_projectId","_creatorId","_scenariofieldconfigId","title","location","content","tagIds","startDate","endDate","isAllDay","allDayStart","allDayEnd","involveMembers","involvers","visible","recurrence","reminders","customfields"],o=function(e){function t(){return this.save=f(this.save,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)g.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.name="event",t.prototype.urlRoot="events",t.prototype.defaults={objectType:"event",involveMembers:[],content:null,recurrence:null},t.prototype.initialize=function(e,n){return this.options=null!=n?n:{},this.dontListen=!1===this.options.bindByMatrix||!1,t.__super__.initialize.call(this,e,this.options)},t.prototype.listen=function(){if(!this.listenedLock&&this.id&&!this.dontListen)return this.listenedLock=!0,this.on("change:visible",function(e){var t;if(!e.checkIsVisible())return null!=(t=e.collection)?t.remove(e):void 0}),t.__super__.listen.apply(this,arguments)},t.prototype.parse=function(e){var t;return null==e&&(e={}),t=u.extend(this.toJSON(),e),(t=i.marshaler.parse(t)).originStartDate||(t.originStartDate=t.startDate),t.originEndDate||(t.originEndDate=t.endDate),t},t.prototype.getScope=function(){var e,t,n,r;return t=c(this.get("startDate")).valueOf(),e=c(this.get("endDate")||null).valueOf(),n=c().endOf("day").valueOf(),r=c().startOf("day").valueOf(),t>n?"future":r<=t&&t<=n||t<r&&e>r?"today":"past"},t.prototype.isIndie=function(){return!this.get("_projectId")},t.prototype.getRRuleSet=function(){return l.getRRuleSet(this.get("recurrence"))},t.prototype.refreshDate=function(e){var t,n,r,o;return null==e&&(e=c().startOf("day").toISOString()),this.isRecurrenceEventInstance()?(t=this.toJSON(),(r=d(t,e))?(o=r.startDate,n=r.endDate,t._startDate||(this.attributes._startDate=t.startDate),t._endDate||(this.attributes._endDate=t.endDate),this.attributes.startDate=o,this.attributes.endDate=n,this):this):this},t.prototype.isRecurrenceEventInstance=function(){return i.isRecurrent(this.pick("recurrence"))},t.prototype.upgradeData=function(e,t){return this.set(e),this.reset(t,this.options),this},t.prototype.commentRecurrence=function(e){var t;if(this.isRecurrenceEventInstance())return e.timestamp=+new Date(this.get("startDate")),h.commentsRepeatEvent(this.id,e).do((t=this,function(e){var n;return(n=t.eventDetailView)?(n.resetView(),t.upgradeData(e.repeat,e.new),n.resetModel(t).refreshView()):t.upgradeData(e.repeat,e.new)})).toPromise()},t.prototype.doLike=function(e){return this.isRecurrenceEventInstance()?s.post(this.url()+"/like_repeat_event",{timestamp:+new Date(this.get("startDate"))},{headers:{"x-timezone":s.timezone()}}).then((n=this,function(e){var t;return(t=n.eventDetailView)?(t.resetView(),n.upgradeData(e.repeat,e.new),t.resetModel(n).refreshView()):n.upgradeData(e.repeat,e.new)})):t.__super__.doLike.apply(this,arguments);var n},t.prototype.getSourceInfo=function(){return{_sourceId:this.get("_sourceId")||i.originEventId(this.id),sourceDate:new Date(this.get("startDate")).valueOf()}},t.prototype.updateCurrentRecurrence=function(e){var t,n;return delete(t=u.extend(this.pick(r),e)).recurrence,Object.assign(t,this.getSourceInfo()),this.saveEvent(t,{create:!0}).then((n=this,function(e){return n.spliceRecurrence(),e}))},t.prototype.updateNextRecurrence=function(e){var t,n,o;return!this.getRRuleSet().before(new Date(this.get("startDate")),!1)?this.updateAllRecurrence(e):(t=u.extend(this.pick(r),e),Object.assign(t,this.getSourceInfo()),i.isRecurrent(t)&&(n=l.getRRuleSet(t.recurrence),l.updateRRuleSet(n,{dtstart:new Date(t.startDate)}),t.recurrence=n.valueOf()),this.sliceRecurrence(!0).then((o=this,function(){return o.saveEvent(t,{create:!0})})))},t.prototype.updateAllRecurrence=function(e){var t;return e&&e.recurrence&&e.originStartDate&&(t=new Date(e.endDate)-new Date(e.startDate),e.startDate=e.originStartDate,e.endDate=new Date(new Date(e.originStartDate).valueOf()+t).toISOString(),delete e.originStartDate),this.saveEvent(e)},t.prototype.spliceRecurrence=function(){var e,n,r,o,i;return i=this.getRRuleSet(),n=this.get("startDate"),i.exdate(new Date(n)),r=i.valueOf(),this.set("recurrence",r),(e=this.get("_originEventId"))&&null!=(o=t.find(e))&&o.set("recurrence",r),r},t.prototype.sliceRecurrence=function(e){var t,n;return null==e&&(e=!1),(n=(t=this.getRRuleSet()).before(new Date(this.get("startDate")),e))?(l.updateRRuleSet(t,{until:n}),this.saveEvent({recurrence:t.valueOf()})):this.deleteEvent()},t.prototype.save=function(){var e,n;return null!=(null!=(n=(e=1<=arguments.length?v.call(arguments,0):[])[1])?n.attrs:void 0)&&(n.attrs=i.marshaler.deparsePatch(n.attrs,this.toJSON())),t.__super__.save.apply(this,e)},t.prototype.sync=function(e,n,r){var o;return null==r&&(r={}),o={"x-timezone":s.timezone()},r.headers=Object.assign(o,r.headers),t.__super__.sync.call(this,e,n,r)},t.prototype.saveEvent=function(e,n){var r;return null==n&&(n={}),e?(r=n.create?new t(null,this.options):this,!n.create&&e.customfields?this.updateCustomField(e.customfields):!n.create&&e._scenariofieldconfigId?this.updateScenarioFieldConfig(e._scenariofieldconfigId):!n.create&&e.content?this.updateContent(e.content):!n.create&&e.location?this.updateLocation(e.location):(n=u.omit(n,"create"),new Promise(function(t,o){return r.save(null,Object.assign({attrs:e,wait:!0,success:t,error:o},n))}))):Promise.resolve(this)},t.prototype.updateEvent=function(e,t){switch(e){case"current":return this.updateCurrentRecurrence(t);case"next":return this.updateNextRecurrence(t);default:return this.updateAllRecurrence(t)}},t.prototype.deleteEvent=function(e){switch(e){case"current":return new Promise((t=this,function(e,n){var r,o;return o=t.get("recurrence"),r=t.spliceRecurrence(),t.saveEvent({recurrence:r}).catch(function(e){return t.set({recurrence:o}),n(e)})}));case"next":return this.sliceRecurrence();default:return new Promise(function(e){return function(t,n){return e.destroy({wait:!0,success:t,error:n})}}(this))}var t},t.prototype.archiveEvent=function(e){return"current"===e||"next"===e?this.updateEvent(e).then(function(e){return new Promise(function(t,n){return e.archive({success:t,error:n})})}):new Promise((t=this,function(e,n){return t.archive({success:e,error:n})}));var t},t.prototype.updateEventMember=function(e,t){var n,r;return n=function(){var e,n,r,o;return e=!(null!=(r=t.delInvolvers)?r.length:void 0),n=1===(null!=(o=t.addInvolvers)?o.length:void 0)&&t.addInvolvers[0]===m.user.id,e&&n},"current"===e||"next"===e?this.updateEvent(e).then(function(e){return new Promise(function(r,o){return n()?r(e):e.saveAttr("involveMembers",null,{attrs:t,success:r,error:o})})}):new Promise((r=this,function(e,n){return r.saveAttr("involveMembers",null,{attrs:t,success:e,error:n})}))},t.prototype.checkAllDay=function(){return this.get("isAllDay")},t.prototype.forkOrMove=function(e,t){return t||(t={}),t.url=this.url()+"/"+e,t.attrs=u.extend({_projectId:t._projectId,_organizationId:t._organizationId},t.attrs),this.sync("update",this,t),this},t.prototype.updateCustomField=function(e){return new Promise((t=this,function(n,r){return t.saveAttr("customfields",null,{attrs:e[0],wait:!0,success:n,error:r})}));var t},t.prototype.updateScenarioFieldConfig=function(e){return new Promise((t=this,function(n,r){return t.saveAttr("scenariofieldconfigId",null,{attrs:{_scenariofieldconfigId:e},wait:!0,success:n,error:r})}));var t},t.prototype.updateContent=function(e){return new Promise((t=this,function(n,r){return t.saveAttr("content",e,{wait:!0,success:n,error:r})}));var t},t.prototype.updateLocation=function(e){return new Promise((t=this,function(n,r){return t.saveAttr("location",e,{wait:!0,success:n,error:r})}));var t},t.prototype.hasPermission=function(){return this.isIndie()?(t.__super__.hasPermission.apply(this,arguments),!0):t.__super__.hasPermission.apply(this,arguments)},t.prototype.hasPermissions=function(){var e;return this.isIndie()?(e=t.__super__.hasPermissions.apply(this,arguments),u.mapObject(e,function(){return!0})):t.__super__.hasPermissions.apply(this,arguments)},t}(),p=function(e){var t,n,r,i,s,a;return e instanceof o&&e.isRecurrenceEventInstance()?(a=(s=e.pick("startDate","endDate")).startDate,n=s.endDate,a&&n?(t=new Date(n).valueOf()-new Date(a).valueOf(),i=l.getOriginDate(e.getRRuleSet()),r=new Date(i.valueOf()+t),{startDate:i.toISOString(),endDate:r.toISOString()}):null):null},o.fetch=function(e,t){var n,r;return null==t&&(t={}),n=t.success||function(){},r=function(e){var r,i,s;return(s=p(e))?(r=Object.assign(e.toJSON(),s),i=new o(r,t)):i=e,n(i),i},a.fetch.call(o,e,Object.assign(t,{success:r}))},e.exports=o},"1gEXmjU5":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR"),l=n("dWbDnvg6"),u=n("OZhv4qSB"),p=n("kuYoSsIJ"),d=n("BsTK5jZO"),h=n("PAu3LtoN"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderExecutor=function(){var e=this.props,t=e.disabled,n=e.executor;if(!n)return null;var r=n.avatarUrl,s=n.name,u=n._id,p=a()("executor-handler",{"not-assigned":!u}),d=o.createElement("div",{className:p},o.createElement(l.a,{className:"avatar",size:"small",src:r}),o.createElement("div",{className:"name"},s));return r||t?d:o.createElement(c.Tooltip,{title:this.props.unsetTooltip||i.get("click.set.executor")},d)},t.prototype.renderTrigger=function(){if(this.props.children)return this.props.children;var e=this.props,t=e.executor,n=e.onClickRemove,r=e.disabled,i=!t||!t.avatarUrl;return o.createElement(u.a,{className:h["executor-shortcut"],onClickRemove:n,silent:i,disabled:r},o.createElement("div",{className:a()(h.executor,{disabled:r})},this.renderExecutor(),this.renderNewUserTips()))},t.prototype.renderNewUserTips=function(){return!this.props.isExperiencedUser&&o.createElement(c.Tooltip,{title:i.get("executor.involve.tip"),placement:"left"},o.createElement(c.Icon,{name:"help",size:12,className:"icon icon-help"}))},t.prototype.render=function(){var e=this.props,t=e.objectType,n=e.nested,i=e.onSelect,s=e.onOpen,a=e.executor,c=e.contextId,l=e.disabled,u=e.selectedTitle,h=e.inviteShowed,m=e.inviteMoreMember,f=e.notFoundTips,g=r.a({objectType:t,nested:n,executor:a,contextId:c,selectedTitle:u,onOpen:s,disabled:l,inviteShowed:h,inviteMoreMember:m,notFoundTips:f,reactToHover:!0},i?{onSelect:function(e){var t=d.ExecutorInput.noExecutor.check(e)?null:e.id;i(t,e)}}:{});return o.createElement(p.a,r.a({},g),this.renderTrigger())},t.defaultProps={objectType:"task"},t}(o.PureComponent);n.d(t,"TaskExecutor",function(){return m}),n.d(t,"TaskExecutorProps",function(){}),n.d(t,"Executor",function(){})},"1h0v0S0G":function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("a+N5u/Cl"),o=n("Atd/KrMo"),r=n("Sp2hKok+"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="LabsNotifier",t.prototype.className="obd-labs-notifier modal-dialog",t.prototype.events={"click .go-labs":"onClickOpenLabs","click .title-cross":"onTitleCrossCilck","click .ignore-onboarding":"onIgnoreClick"},t.prototype.initialize=function(e){return this.options=e,t.__super__.initialize.apply(this,arguments),this.renderBasic(),this},t.prototype.normalizeOptions=function(){var e;return(e=this.options).titleCrossActions||(e.titleCrossActions=[]),this.options.illuStyle="background-image: url("+i.sample(this.options.onboardingIllustration)+");"},t.prototype.renderBasic=function(){return this.$el.html(r(this.options)),this},t.prototype.onTitleCrossCilck=function(){return i.each(this.options.titleCrossActions,(e=this,function(t){return e.sendAction(t)}));var e},t.prototype.onClickOpenLabs=function(){return this.sendAction("view-action://close-view"),this.sendAction({name:"action://open-personal-settings",payload:{tabName:"labs"}})},t.prototype.onIgnoreClick=function(){return this.sendAction("view-action://close-view")},t}()},"1mC14iT0":function(e,t,n){e.exports={"custom-number":"custom-number__230B"}},"1pe9u56C":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("q1tIBJhx"),o=n.n(r),i=n("sa1Ed382"),s=n("HagJDa9N");function a(e,t){return o.a.createElement("div",{className:s.b},o.a.createElement("p",null,e.message),o.a.createElement("ul",null,e.content.map(function(e){var n,r=e.kind,s=e.content,a=e.taskId,c=e.executor;if("visible"===r&&a&&t){var l=i.config.HOST+"/task/"+a;n=o.a.createElement("a",{href:l,onClick:function(e){e.preventDefault(),t(a)}},s)}else if("partial"===r&&c)n=o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"executor-name"},c),o.a.createElement("span",null,s));else if("more"===r){var u=o.a.createElement("div",{className:"dot"});n=o.a.createElement(o.a.Fragment,null,u,u,u)}else n=o.a.createElement(o.a.Fragment,null,s);return o.a.createElement("li",{className:r,key:a},n)})))}},"1y2tBwVR":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("HVbnodQK"),c=n("kgLdAlVe"),l=n("ibviuac0"),u=n("p3c90j9n"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.saveTagPopupMenuRef=function(e){return t.tagPopupMenuRef=e},t.switchTagPopupMenu=function(e,n){t.tagPopupMenuRef.goToPopupMode(e,n)},t}return r.d(t,e),t.prototype.renderTextTrigger=function(){return o.createElement(l.b,{disabled:this.props.disabled,className:u["text-button"]},i.get("tag.picker.add"))},t.prototype.renderIconTrigger=function(){var e=o.createElement(l.a,{disabled:this.props.disabled}),t=this.props.disabled?e:o.createElement(s.Tooltip,{title:i.get("tag.picker.add")},e);return o.createElement("span",null,t)},t.prototype.renderTrigger=function(){return 0===this.props.selectedTags.length?this.renderTextTrigger():this.renderIconTrigger()},t.prototype.render=function(){return this.props.disabled?this.renderTrigger():o.createElement(a.a,r.a({className:u["tag-popover"]+" tag-popover",nested:!1,placement:"bottomLeft",trigger:this.renderTrigger(),ref:this.saveTagPopupMenuRef},this.props),o.createElement(c.a,r.a({switchTagPopupMenu:this.switchTagPopupMenu},this.props)))},t}(o.PureComponent);n.d(t,"TagPopover",function(){return p})},"1zTUTjkq":function(e,t,n){"use strict";n.r(t),n.d(t,"ObjectPickerProjectsView",function(){return r});var r=n("KlgsDvvI")},"23VHpif8":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("a+N5u/Cl"),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR"),l=n("5V57DkyA"),u=n("04h4arvM"),p=n("D4LvyNzA"),d=n("8yOTHjXc"),h=n("s6VidTkT"),m=n("EiUFTky8"),f=n("oRqJmROU"),g=n("+jTfkVXR"),v=n("6R2rvM4g"),b=n("Nz3F68i+"),y=n("ObMypsvd"),k=n("sa1Ed382"),_=function(e){function t(t){var n=e.call(this,t)||this;return n.rootClassName="table",n.gridRef=null,n.saveGridRef=function(e){n.gridRef=e},n.rootRef=null,n.saveRootRef=function(e){n.rootRef=e},n.rootRefRect=null,n.hidden={display:"none"},n.leftScrollingShadow={boxShadow:"1px 0 3px rgba(0, 0, 0, 0.1)",zIndex:1},n.scrollbarBottomRight=[!1,!0],n.paddingBottom=Number(Object(c.getQuadUnit)(2)),n.configureActionWidth=44,n.hoveredRowId=null,n.scrollToColumn=-1,n.resizingCellDescriptor=null,n.resizingColumnKey=null,n.resizingLastColumnStep=10,n.resizingLastColumnTimer=null,n.getColumnWidth=function(e){if(!n.cellDescriptors)return 0;var t=n.cellDescriptors[e];if(t)return t.width+1;var r=n.cellDescriptors.reduce(function(e,t){return e+(t?t.width+1:0)},0);return Math.max(n.getContainerWidth()-r,0)},n.getRowHeight=function(e){if(!n.cellDescriptors)return 0;var t=n.cellDescriptors[0];return 0===e?t.headHeight+1:t.height+1},n.handleScroll=function(e){n.handleScrollX(e.scrollLeft)},n.handleScrollX=function(e){e!==n.state.scrollLeft&&n.setState({scrollLeft:e})},n.handleTableHover=function(e){n.rootRefRect&&(n.isOutsideOfTable=e.screenX>=n.rootRefRect.right)},n.handleTableClick=function(e){n.shouldNotClickAfterResize&&(n.shouldNotClickAfterResize=!1,e.stopPropagation()),!n.isOutsideOfTable&&n.resizingLastColumnTimer&&(window.cancelAnimationFrame(n.resizingLastColumnTimer),n.resizingLastColumnTimer=null)},n.handleColumnResizerHoverStart=function(e,t,r){n.resizingCellDescriptor||(n.resizingColumnKey=Object(m.getColumnKey)(r),r.fixed?n.gridRef.forceUpdateGrids("topLeft","bottomLeft"):n.gridRef.forceUpdateGrids("topRight","bottomRight"))},n.handleColumnResizerHoverEnd=function(e,t,r){n.resizingCellDescriptor||(n.resizingColumnKey=null,r.fixed?n.gridRef.forceUpdateGrids("topLeft","bottomLeft"):n.gridRef.forceUpdateGrids("topRight","bottomRight"))},n.handleColumnResizeStart=function(e,t,o){n.resizingCellDescriptor||(n.resizingCellDescriptor=r.a({},o),n.resizingColumnKey=Object(m.getColumnKey)(o),n.resizingEventScreenX=e.screenX,n.resizingLastColumn=t+1===n.cellDescriptors.length-1)},n.handleColumnResize=function(e){n.resizingCellDescriptor&&(e.preventDefault(),n.resizeColumn(e),n.resizingLastColumnTimer&&(window.cancelAnimationFrame(n.resizingLastColumnTimer),n.resizingLastColumnTimer=null),n.resizingLastColumn&&n.isOutsideOfTable&&(n.resizingLastColumnTimer=n.handleLastColumnResize()))},n.handleLastColumnResize=function(){return window.requestAnimationFrame(function(){n.resizeColumn({screenX:n.resizingEventScreenX+n.resizingLastColumnStep}),n.gridRef.forceUpdateGrids("topRight","bottomRight"),n.resizingLastColumnTimer=n.handleLastColumnResize()})},n.handleColumnResizeEnd=function(){if(n.resizingCellDescriptor){var e=n.resizingCellDescriptor.fixed;n.resizingCellDescriptor=null,n.resizingColumnKey=null,n.shouldNotClickAfterResize=!0,n.resizingLastColumnTimer&&(window.cancelAnimationFrame(n.resizingLastColumnTimer),n.resizingLastColumnTimer=null),e?n.gridRef.forceUpdateGrids("topLeft","bottomLeft"):n.gridRef.forceUpdateGrids("topRight","bottomRight")}},n.handleRowHoverStart=function(e,t){n.hoveredRowId!==t.entity._id&&(n.hoveredRowId=t.entity._id,n.gridRef.forceUpdateGrids("bottomLeft","bottomRight"))},n.handleRowHoverEnd=function(e,t){n.hoveredRowId&&(n.hoveredRowId=null,n.gridRef.forceUpdateGrids("bottomLeft","bottomRight"))},n.handleRowClick=function(e,t){n.props.onRowClick(t.entity)},n.handleRowSelect=function(e){n.props.onRowSelect(e.filter(f.c))},n.handleRowDeselect=function(e){n.props.onRowDeselect(e.filter(f.c))},n.handleRowExpand=function(e){n.props.onRowExpand(e)},n.handleRowCollapse=function(e){n.props.onRowCollapse(e)},n.handleColumnSort=function(e){var t=n.props.onSort,r=n.props.sortBy,o=Object(m.getColumnKey)(e);r&&r.key===o?r.order===h.c.DESC?t({key:o,order:h.c.ASC}):t(null):t({key:o,order:h.c.DESC})},n.renderCell=function(e){var t,r=e.cellStyle,i=e.rowIndex,s=e.columnIndex,c=n.props.printer,l=0===i,u=i===n.rowCount-1,p=0===s,h=s===n.columnCount-1,f=n.rows&&n.rows[i]&&Object(m.isCommonGroup)(n.rows[i].entity)&&s>0,g=l,v=u&&n.hasFootRow,b=!g&&!v,k=p?y[n.rootClassName+"__cell-content--first-column"]:null,_=n.cellDescriptors[s],w=_?Object(m.getColumnKey)(_):null,C=!!w&&w===n.resizingColumnKey,S=null,E=null,T=null,I=!1,M=!1,j=[];if(g){if(_){if((M=!!_.sortable)&&(S=n.handleColumnSort),p&&j.push(n.renderHeadRowHook(n.rows),n.renderRowToggler()),N=c.toTitle(_)){var P=n.props.sortBy,x=!(!P||P.key!==w)&&P.order;j.push(n.renderColumnTitle({title:N,className:k,sortOrder:x}))}p&&j.push(n.renderRowAddAction())}}else if(b)I=(T=(E=n.rows[i]).entity._id)===n.hoveredRowId,S=E.isPseudo?null:n.handleRowClick,_&&(p&&j.push(n.renderBodyRowHook(E,I),n.renderRowToggler(E)),j.push(c.renderBodyCell(_,E.entity,{className:k,key:"content"})),p&&j.push(n.renderRowAddAction(E,I)));else if(p)if(n.props.isLoadingMore)j.push(n.renderFootRowHook(!0),n.renderRowToggler(),n.renderLoadingMore());else{S=n.props.onLoadMore;var N=c.toStatusBarTitle([]);j.push(n.renderFootRowHook(),n.renderRowToggler(),n.renderColumnTitle({title:N,tooltip:N,className:k}))}var O=a()(y[n.rootClassName+"__cell"],((t={})[y[n.rootClassName+"__head-cell"]]=g,t[y[n.rootClassName+"__foot-cell"]]=v,t[y[n.rootClassName+"__cell--first-column"]]=p,t[y[n.rootClassName+"__cell--last-column"]]=h,t[y[n.rootClassName+"__cell--void-column"]]=f,t[y[n.rootClassName+"__cell--first-row"]]=l,t[y[n.rootClassName+"__cell--last-row"]]=u,t[y[n.rootClassName+"__cell--hovered"]]=I,t[y[n.rootClassName+"__cell--sortable"]]=M,t));return o.createElement(d.a,{children:j,className:O,columnIndex:s,descriptor:_,isResizing:C,key:(T||i)+":"+(w||s),onClick:S,onMouseEnter:b?n.handleRowHoverStart:null,onMouseLeave:b?n.handleRowHoverEnd:null,onResize:n.handleColumnResizeStart,onResizerHoverEnd:n.handleColumnResizerHoverEnd,onResizerHoverStart:n.handleColumnResizerHoverStart,row:E,rowIndex:i,style:r})},n.state={scrollLeft:0},n.handleProps(t,null),n.overscan={row:"IE"===k.ua.getBrowser().name?6:0,column:0},n}return r.d(t,e),t.prototype.filterCellDescriptors=function(e,t,n){if(t&&t.cellDescriptors===e.cellDescriptors)return n;var r=e.cellDescriptors.filter(function(e){return!e.hidden});return r.length>0?r:null},t.prototype.flattenRows=function(e,t,n){var r=e.rows,o=e.toRowIsExpanded;return t&&t.rows===r&&t.toRowIsExpanded===o?n:r?Object(m.flatten)(r,o):null},t.prototype.selectRowIds=function(e){return(e.selectedRows||[]).map(function(e){return e.entity._id})},t.prototype.checkWhetherHasFootRow=function(e,t){return!!t&&(e.isLoadingMore||e.hasMore)},t.prototype.getContainerWidth=function(){return this.props.width},t.prototype.getContainerHeight=function(){var e=this.props.height-this.paddingBottom;return this.willShowXScrollbar()?e-p.a.totalSize:e},t.prototype.computeActualHeight=function(){for(var e=this.getContainerHeight(),t=0,n=0;t<this.rowCount&&!((n+=this.getRowHeight(t++))>=e););return Math.min(n,e)},t.prototype.getXScrollbarOptions=function(){return{width:this.getContainerWidth(),columnSize:this.columnCount,columnWidth:this.getColumnWidth,fixedColumnCount:this.fixedColumnCount}},t.prototype.willShowXScrollbar=function(){return Boolean(this.props.useOuterXScrollbar&&!Object(b.c)(this.getXScrollbarOptions()))},t.prototype.handleProps=function(e,t){var n=this.filterCellDescriptors(e,t,this.cellDescriptors),r=this.flattenRows(e,t,this.rows);this.selectedRowIds=this.selectRowIds(e),this.hasFootRow=this.checkWhetherHasFootRow(e,r),this.cellDescriptors!==n&&(this.cellDescriptors=n,this.fixedColumnCount=(this.cellDescriptors||[]).filter(function(e){return e.fixed}).length,this.columnCount=(this.cellDescriptors||[]).length,this.cellDescriptors&&(this.columnCount+=1,this.cellDescriptors.push(null))),this.rows!==r&&(this.rows=r,this.rowCount=(this.rows||[]).length,this.rows&&(this.cellDescriptors&&(this.rowCount+=1,this.rows.unshift(null)),this.hasFootRow&&(this.rowCount+=1,this.rows.push(null)))),this.cellDescriptors&&(this.rowCount=Math.max(this.rowCount,1)),!this.rootRef||this.rootRefRect&&t&&t.width===e.width||(this.rootRefRect=this.rootRef.getBoundingClientRect())},t.prototype.componentDidMount=function(){window.addEventListener("mouseover",this.handleTableHover),window.addEventListener("mousemove",this.handleColumnResize),window.addEventListener("mouseup",this.handleColumnResizeEnd),this.rootRef&&this.rootRef.addEventListener("click",this.handleTableClick,!0)},t.prototype.componentWillUnmount=function(){window.removeEventListener("mouseover",this.handleTableHover),window.removeEventListener("mousemove",this.handleColumnResize),window.removeEventListener("mouseup",this.handleColumnResizeEnd),this.rootRef&&this.rootRef.removeEventListener("click",this.handleTableClick,!0)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){if(this.handleProps(e,this.props),this.gridRef){var t=e.cellDescriptors!==this.props.cellDescriptors;t&&(this.gridRef.resetCols(),this.gridRef.forceUpdate()),(t||e.rows!==this.props.rows||e.selectedRows!==this.props.selectedRows)&&this.gridRef.forceUpdateGrids("topLeft","topRight","bottomLeft","bottomRight")}},t.prototype.shouldComponentUpdate=function(e,t){return!!e.printer.shouldUpdate||(!Object(m.shallowEqual)(e,this.props)||!Object(m.shallowEqual)(t,this.state))},t.prototype.rowIsSelected=function(e){return i.includes(this.selectedRowIds,e.entity._id)},t.prototype.rowsAreSelected=function(e){var t=this;return!(!e||e.every(function(e){return Boolean(!e||e.isPseudo)}))&&e.every(function(e){return!e||e.isPseudo||t.rowIsSelected(e)})},t.prototype.resizeColumn=function(e){var t=this.resizingCellDescriptor;if(t){var n=t.width+(e.screenX-this.resizingEventScreenX);this.resizingEventScreenX=e.screenX,t.minWidth&&t.minWidth>n&&(n=t.minWidth),t.width!==n&&(t.width=n,this.gridRef.resetCols(),this.scrollToColumn=this.resizingLastColumn?this.cellDescriptors.length-1:-1,this.props.onConfigure([t]))}},t.prototype.renderHeadRowHook=function(e){var t=this.props.disabled||(e||[]).every(function(e){return Boolean(!e||e.isPseudo)}),n=e?e.filter(function(e){return e&&!e.isPseudo&&!Object(m.isCommonGroup)(e.entity)}):e;return o.createElement(d.b,{disabled:t,key:"head-row-hook",mode:d.c.CHECKBOX,onDeselect:this.handleRowDeselect,onSelect:this.handleRowSelect,rows:n,selected:this.rowsAreSelected(n),numWidthStep:this.props.rowIndentation})},t.prototype.renderFootRowHook=function(e){var t=e?null:o.createElement(c.Icon,{className:y[this.rootClassName+"__foot-row-hook"],name:"more"});return o.createElement(d.b,{key:"foot-row-hook",mode:d.c.CUSTOM,numWidthStep:this.props.rowIndentation},t)},t.prototype.renderBodyRowHook=function(e,t){if(Object(m.isCommonGroup)(e.entity)){var n=Object(m.getAllChildrenRows)(e),r=this.rowsAreSelected(n),i=this.props.disabled||!e.children||!e.children.length;return o.createElement(d.b,{disabled:i,key:"body-row-hook",level:e.indexes.length,mode:d.c.CHECKBOX,onDeselect:this.handleRowDeselect,onSelect:this.handleRowSelect,rows:n,selected:r,numWidthStep:this.props.rowIndentation})}var s=this.rowIsSelected(e),a=e.indexes.length,c=Object(g.d)(e.entity)&&a?""+(e.indexes[a-1]+1):e.indexes.map(function(e){return e+1}).join("."),l=e.isPseudo?d.c.CUSTOM:t||s?d.c.CHECKBOX:d.c.INDEX,u=l===d.c.CUSTOM&&this.props.printer.renderBodyRowHook?this.props.printer.renderBodyRowHook(e.entity):null;return o.createElement(d.b,{disabled:this.props.disabled,index:c,isShortIndex:Object(g.d)(e.entity),key:"body-row-hook",level:e.indexes.length,mode:l,onDeselect:this.handleRowDeselect,onSelect:this.handleRowSelect,rows:[e],selected:s,numWidthStep:this.props.rowIndentation},u)},t.prototype.renderRowToggler=function(e){if(!e||!e.hasChildren)return o.createElement(d.e,{empty:!0,key:"row-toggler"});var t=e.entity._id,n=this.props.toRowIsLoadingChildren[t],r=Boolean(this.props.toRowIsExpanded[t]&&(n||(e.children||[]).length>0||e.pseudoBefore||e.pseudoAfter));return o.createElement(d.e,{data:e,expanded:r,key:"row-toggler",loading:n,onCollapse:this.handleRowCollapse,onExpand:this.handleRowExpand})},t.prototype.renderColumnTitle=function(e){return o.createElement(d.d,r.a({},e,{key:"column-title"}))},t.prototype.renderRowAddAction=function(e,t){return e&&e.isPseudo?null:e?this.props.printer.renderAddChildAction(e,this.props.new,t?{key:"row-add-action"}:{key:"row-add-action",style:this.hidden}):this.props.new?this.props.printer.renderAddAction(this.props.new,{key:"add-action"}):null},t.prototype.renderLoadingMore=function(){return o.createElement(c.Loading,{className:y[this.rootClassName+"__loading-more"],key:"loading-more"})},t.prototype.renderTable=function(){if(this.getContainerWidth()<=0||this.getContainerHeight()<=0||!this.cellDescriptors)return null;var e=this.props.useOuterXScrollbar?{onScroll:this.handleScroll,scrollbarBottomRight:this.scrollbarBottomRight,scrollLeft:this.state.scrollLeft}:void 0,t=o.createElement(u.b,r.a({},e,{cellRenderer:this.renderCell,className:y[this.rootClassName+"__container"],columnSize:this.columnCount,columnWidth:this.getColumnWidth,fixedColumnCount:this.fixedColumnCount,fixedRowCount:1,height:this.computeActualHeight(),maxScrollSpeed:1e3,onLeftSlideStyle:this.leftScrollingShadow,overscan:this.overscan,ref:this.saveGridRef,rowHeight:this.getRowHeight,rowSize:this.rowCount,scrollToColumn:this.scrollToColumn,width:this.getContainerWidth()}));return o.createElement(o.Fragment,null,t,l.OrgPortalToProjectAppAPm.component,l.BoardTableApm.component)},t.prototype.renderToolbar=function(){var e=this.props.selectedRows,t=this.props.printer;if(!this.cellDescriptors||0===(e||[]).length)return null;var n={height:this.cellDescriptors[0].headHeight,marginRight:this.configureActionWidth},r=t.toToolbarTitle(e),i=y[this.rootClassName+"__toolbar-title"];return o.createElement("div",{className:y[this.rootClassName+"__toolbar"],key:"toolbar",style:n},this.renderHeadRowHook(this.rows),this.renderRowToggler(),this.renderColumnTitle({title:r,className:i}),t.renderToolbarAction(e))},t.prototype.renderConfigureAction=function(e){return void 0===e&&(e=!0),this.cellDescriptors?this.props.printer.renderConfigureAction({className:y[this.rootClassName+"__configure-action"],key:"configure-action",style:{height:this.cellDescriptors[0].headHeight,width:this.configureActionWidth}},e):null},t.prototype.renderXScrollbar=function(){return this.willShowXScrollbar()?o.createElement(v.a,r.a({},this.getXScrollbarOptions(),{scrollLeft:this.state.scrollLeft,onScrollX:this.handleScrollX})):null},t.prototype.renderLoading=function(){return this.cellDescriptors&&this.rows?null:o.createElement(c.Loading,{className:y[this.rootClassName+"__loading"]})},t.prototype.renderPlaceholder=function(){return this.rows&&this.rows.every(function(e){return!e})?this.props.printer.renderPlaceholder(this.props.placeholderNotice):null},t.prototype.render=function(){return o.createElement("div",{className:y[this.rootClassName],ref:this.saveRootRef},this.renderTable(),this.renderLoading(),this.renderPlaceholder(),this.renderToolbar(),this.renderConfigureAction(this.props.useDraggableConfigure),this.renderXScrollbar())},t}(o.Component);n.d(t,"a",function(){return _})},"23vw5Bju":function(e,t){e.exports=function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="10" class="symbol-arrow position-'+e.position+" align-"+e.align+'"> <path fill="#3DA8F5" fill-rule="evenodd" d="M14 10l-3.8-5.7C9 2.5 7 2.5 5.8 4.3l-4 5.7H-12c-2.2 0-4 1.8-4 4v46c0 2.2 1.8 4 4 4h206c2.2 0 4-1.8 4-4V14c0-2.2-1.8-4-4-4H14z"/></svg><div class="feature-guide workspace-guide"> <p>'+e.content+"</p></div>"}},"26M0iDG9":function(e,t,n){e.exports={root:"root__3SOd",inputContent:"inputContent__yyix",input:"input__-oGC",placeholder:"placeholder__eKic",inputText:"inputText__2sWq"}},"26N8qinq":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("49UbZ8Y7"),a=n("HtjDT96f"),c=n("fvjXLGkK"),l=n("/MKjzBat"),u=n("ALrmuhC4"),p=n("ESuIIMP0"),d=n("Q/bs5bE9"),h=n("a+N5u/Cl"),m=n.n(h),f=n("ctsD9mWH"),g=n("oRqJmROU"),v=n("GESwhXbR"),b=n("yt+aIX9v"),y=n("sa1Ed382"),k=n("TSYQbtd+"),_=n.n(k),w=n("tLZJUYWX"),C=n.n(w),S=n("uGN8aFcU"),E=n.n(S),T=n("i8i4LrFt"),I=n.n(T),M=n("0FRv5rrl"),j=n.n(M),P=n("77NnVLwu"),x=n.n(P),N=n("gNFMJi3i"),O=n("XIKSkjsA"),R=n("wd/RKGTj"),D=n.n(R),L=n("oEuShWjr"),z=n("sD09NJbS"),A=n("wbimh+Ox"),V=n("5Cm92wlC"),F=n("zXmn5Z7T"),B=n("Nxrdcgel"),U=n("Ja8CZdRo"),$=n.n(U),H=function(e){function t(t){var n=e.call(this,t)||this;return n.dropDownRef=i.a.createRef(),n.mouseLeaveHandler=function(){n.setState({showAddBtn:!1})},n.mouseEnterHandler=function(){n.setState({showAddBtn:!0})},n.stopPropagation=function(e){e.stopPropagation()},n.state={showAddBtn:!1},n}return r.d(t,e),t.prototype.renderAddCfBtn=function(){var e=this.props,t=e.official,n=e.permissionSync;return!t&&n&&i.a.createElement("div",{onClick:this.stopPropagation,className:"customfield-menu"},i.a.createElement(v.Dropdown,{content:this.renderMenu(),nested:!0,ref:this.dropDownRef},i.a.createElement(v.IconButton,{name:"more"})))},t.prototype.renderDefaultTag=function(){return i.a.createElement("span",{className:"tag"},C.a.get("project.cluster.default"))},t.prototype.renderMenu=function(){return i.a.createElement(v.Menu,null,i.a.createElement(v.MenuItem,{onClick:this.props.onAddCustomfieldToCluster},C.a.get("project.cluster.add.customfield.to.project")))},t.prototype.render=function(){var e=this.props,t=e.className,n=e.key,r=e.canNotHidden,o=e.onClick,s=e.sortableIcon,a=e.title,c=e.checked,l=e.official;return i.a.createElement("div",{className:$.a["item-wrap"],onMouseLeave:this.mouseLeaveHandler,onMouseEnter:this.mouseEnterHandler},i.a.createElement(v.MenuItem,{className:_()(t,$.a.item),key:n,onClick:r?void 0:o},i.a.createElement("div",{className:"item-left"},s,i.a.createElement(v.Checkbox,{disabled:r,label:a,checked:c,className:"item-checkbox-outer"}),l&&this.renderDefaultTag()),this.state.showAddBtn&&this.renderAddCfBtn()))},t}(i.a.PureComponent),G=n("YGplC0C3"),q=Object(B.SortableContainer)(v.Menu),W=Object(B.SortableElement)(H),J=Object(B.SortableHandle)(function(){return i.a.createElement(v.Icon,{className:G["sortable-icon"],name:"draggable-circle",size:12})}),X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="project-cluster-configure",t.clickTriggerHandler=function(){y.gta.event({action:"set project table",method:"click",type:"project",segment:"project table view",control:t.props.full?"full":"table"})},t.renderContent=function(){return i.a.createElement(i.a.Fragment,null,t.renderAddColumn(),t.renderItems())},t.renderAddColumn=function(){var e=t.props,n=e.showAddColumn,r=e.max;if(!n)return!1;var o=!!r&&t.getSelectedFieldLength()>=r,s=i.a.createElement(v.Tooltip,{title:C.a.get("project.cluster.add.customfield.limit",""+r)},i.a.createElement(v.IconButton,{className:"icon-add-tips",name:"info",color:"gray"})),a=i.a.createElement(v.TextButton,{disabled:o,onClick:t.requestLinkPanelViewHandler},C.a.get("custom.field.link.panel.add.customfield"));return i.a.createElement("div",{className:G["project-cluster-configure-dropdown-add"]},a,o&&s)},t.requestLinkPanelViewHandler=function(){y.gta.event({action:"add project field",method:"click",segment:"project table view",control:"project table setting"}),t.props.onRequestLinkPanelView()},t.sortEndHandler=function(e){t.props.onColumnResort(e)},t.renderItem=function(e,n){var r=Object(N.e)(e);return i.a.createElement(W,{key:r,title:t.props.toTitle(e),checked:!e.hidden,onClick:t.clickHandler(e),canNotHidden:!!e.cannotHide,official:!!e.official,sortableIcon:i.a.createElement(J,null),index:n,onAddCustomfieldToCluster:t.onAddCustomfieldToCluster(e),permissionSync:t.props.permissionSync})},t.onAddCustomfieldToCluster=function(e){return function(){v.Alert.warning({title:C.a.get("project.cluster.add.customfield.confirm.title"),content:C.a.get("project.cluster.add.customfield.confirm.text"),confirmText:C.a.get("confirm"),onConfirm:function(){t.props.onAddCustomfieldToCluster(e.customFieldEntity._id)},unstable:!0})}},t.clickHandler=function(e){return function(){var n=!e.hidden;t.props.max&&!n&&t.getSelectedFieldLength()>=t.props.max?v.Toast.error(C.a.get("project.cluster.add.customfield.limit",t.props.max)):t.props.onToggle([r.a({},e,{hidden:n})])}},t}return r.d(t,e),t.prototype.renderTrigger=function(){var e=_()(this.props.className,G[""+this.rootClassName]);return i.a.createElement("div",{style:this.props.style,className:e,onClick:this.clickTriggerHandler},i.a.createElement(v.Tooltip,{title:C.a.get("table.config")},i.a.createElement(v.Icon,{name:"cog"})))},t.prototype.getSelectedFieldLength=function(){var e=this.props.cellDescriptors.filter(function(e){return!e.hidden}),t=O.h.filter(function(e){return e.unDraggable});return m.a.uniq(r.h(e,t),function(e){return Object(N.e)(e)}).length},t.prototype.renderItems=function(){var e=this.props.cellDescriptors.map(this.renderItem);return i.a.createElement(q,{onSortEnd:this.sortEndHandler,useDragHandle:!0,className:G["project-cluster-configure-dropdown-menu"]},e)},t.prototype.render=function(){return i.a.createElement(v.TitledDropdown,{content:this.renderContent(),title:C.a.get("table.config"),className:G[this.rootClassName+"__dropdown"],nested:!0},this.renderTrigger())},t}(i.a.PureComponent),Y=n("kNfZ2KN4"),K=n("nn33r5fQ"),Q=n("zyyVdOGF"),Z=n("DnZnhmk5"),ee=n("piyYzrBy"),te=function(){function e(){var e=this;this.rootClassName="task-table-printer",this.toTitle=function(e){return Object(L.a)(e)},this.renderBodyCell=function(e,t,n){var r=t[e.key];switch(e.key){case"status":return o.createElement(Y.a,{key:n.key,className:n.className,statusUpdated:t.statusUpdated,statusName:t.statusName,statusDegree:r,content:t.statusDescription,projectId:t._id,gotoProject:n.onOpenMiniOverview,full:!!n.full});case"name":return o.createElement(V.a,{key:n.key,name:r,cover:t.logo,className:n.className,projectId:t._id,alienUrl:!!t.alien&&t.alien.url,openProject:n.onOpenProject,full:!!n.full,suspendedAt:t.suspendedAt,suspendedBy:t.suspendedBy});case"doneRate":case"dueRate":var i=r,s=i.current,a=i.all,c="doneRate"===e.key?w.get("project.cluster.done.count"):w.get("project.cluster.end.count"),l=o.createElement("div",null,c,s," ",o.createElement("br",null),w.get("project.cluster.task.count"),a);return o.createElement(A.a,{projectId:t._id,key:n.key,current:s,all:a,className:n.className,title:l,type:"dueRate"===e.key?"overdue":"finished",organizationId:n.organizationId});case"unallocated":return o.createElement(Q.a,{key:n.key,projectId:t._id,organizationId:n.organizationId,count:r,className:_()(n.className,Z["cell-content"])});case"owner":return r&&o.createElement(K.a,{key:n.key,className:n.className,users:r,projectId:t._id,openMemberCardHandler:n.openMemberCardHandler});case"creator":return o.createElement(v.Tooltip,{key:n.key,title:r.name},o.createElement("div",{className:n.className},o.createElement(F.a,{key:n.key,name:r.name,avatarUrl:r.avatarUrl,className:Z["cell-content"],size:"small"})));case"durationDay":return o.createElement("div",{key:n.key,className:_()(n.className,Z["cell-content"])},o.createElement("span",null,w.get("project.cluster.duration",r)));case"customfield":var u=(r||[]).find(function(t){return t._customfieldId===e.customFieldEntity._id});return o.createElement(z.a,{key:n.key,className:n.className,descriptor:e,customfieldValue:u});case"projecttags":var p=(r||[]).map(function(e){return e.name}).join(w.get("comma"));return o.createElement("div",{key:n.key,className:_()(n.className,Z["cell-content"])},o.createElement("span",null,p));case"suspendedBy":return o.createElement("div",{key:n.key,className:n.className},o.createElement(F.a,{name:r.name,avatarUrl:r.avatarUrl,className:Z["cell-content"],size:"small"}));case"suspendedAt":case"startDate":case"endDate":case"created":return o.createElement("div",{key:n.key,className:_()(n.className,Z["cell-content"])},o.createElement("span",null,r?D()(r).format("LL"):"-"));default:return o.createElement("div",{key:n.key,className:_()(n.className,Z["cell-content"])},o.createElement("span",null,r))}},this.renderConfigureAction=function(t){var n=t.isProjectTag?t.cellDescriptors:Object(N.n)("projectCategory",t.cellDescriptors);return o.createElement(X,r.a({},t,{cellDescriptors:n,full:!!t.full,toTitle:e.toTitle}))}}return e.prototype.renderPlaceholder=function(e){return void 0===e&&(e=w.get("project.hierarchy.no.projects")),o.createElement("div",{className:Z.placeholder},o.createElement("div",{className:"content-placeholder"},o.createElement("img",{src:ee,alt:"content-placeholder",className:"placeholder-img"}),o.createElement("div",{className:"placeholder-text"},e)))},e}(),ne=n("Z+A7b00p"),re=n("GFC5+LHL"),oe=n("EiUFTky8"),ie=n("04h4arvM"),se=n("OcUPLOSr"),ae=n("b0zn66md"),ce=n("sa1Ed382"),le=function(e){function t(t){var n=e.call(this,t)||this;return n.rootClassName="table",n.gridRef=null,n.saveGridRef=function(e){n.gridRef=e},n.rootRef=null,n.saveRootRef=function(e){n.rootRef=e},n.rootRefRect=null,n.leftScrollingShadow={boxShadow:"4px 0px 5px -2px rgba(0, 0, 0, 0.1)",zIndex:1},n.rightScrollingShadow={boxShadow:"inset -15px 0 18px -13px rgba(0, 0, 0, 0.1)",zIndex:1},n.scrollToColumn=-1,n.resizingCellDescriptor=null,n.resizingColumnKey=null,n.resizingLastColumnStep=10,n.resizingLastColumnTimer=null,n.getColumnWidth=function(e){if(!n.cellDescriptors)return 0;var t=n.cellDescriptors[e];if(t)return t.width+1;var r=n.cellDescriptors.reduce(function(e,t){return e+(t?t.width+1:0)},0);return Math.max(n.props.width-r,0)},n.getRowHeight=function(e){if(!n.cellDescriptors)return 0;var t=n.cellDescriptors[0];return 0===e?t.headHeight:t.height},n.handleTableHover=function(e){n.rootRefRect&&(n.isOutsideOfTable=e.screenX>=n.rootRefRect.right)},n.handleTableClick=function(e){n.shouldNotClickAfterResize&&(n.shouldNotClickAfterResize=!1,e.stopPropagation()),!n.isOutsideOfTable&&n.resizingLastColumnTimer&&(window.cancelAnimationFrame(n.resizingLastColumnTimer),n.resizingLastColumnTimer=null)},n.handleColumnResizerHoverStart=function(e,t,r){n.resizingCellDescriptor||(n.resizingColumnKey=Object(N.e)(r),r.fixed?n.gridRef.forceUpdateGrids("topLeft","bottomLeft"):n.gridRef.forceUpdateGrids("topRight","bottomRight"))},n.handleColumnResizerHoverEnd=function(e,t,r){n.resizingCellDescriptor||(n.resizingColumnKey=null,r.fixed?n.gridRef.forceUpdateGrids("topLeft","bottomLeft"):n.gridRef.forceUpdateGrids("topRight","bottomRight"))},n.handleColumnResizeStart=function(e,t,o){n.resizingCellDescriptor||(n.resizingCellDescriptor=r.a({},o),n.resizingColumnKey=Object(N.e)(o),n.resizingEventScreenX=e.screenX,n.resizingLastColumn=t+1===n.cellDescriptors.length-1)},n.handleColumnResize=function(e){n.resizingCellDescriptor&&(e.preventDefault(),n.resizeColumn(e),n.resizingLastColumnTimer&&(window.cancelAnimationFrame(n.resizingLastColumnTimer),n.resizingLastColumnTimer=null),n.resizingLastColumn&&n.isOutsideOfTable&&(n.resizingLastColumnTimer=n.handleLastColumnResize()))},n.handleLastColumnResize=function(){return window.requestAnimationFrame(function(){n.resizeColumn({screenX:n.resizingEventScreenX+n.resizingLastColumnStep}),n.gridRef.forceUpdateGrids("topRight","bottomRight"),n.resizingLastColumnTimer=n.handleLastColumnResize()})},n.handleColumnResizeEnd=function(){if(n.resizingCellDescriptor){var e=n.resizingCellDescriptor.fixed;n.resizingCellDescriptor=null,n.resizingColumnKey=null,n.shouldNotClickAfterResize=!0,n.resizingLastColumnTimer&&(window.cancelAnimationFrame(n.resizingLastColumnTimer),n.resizingLastColumnTimer=null),e?n.gridRef.forceUpdateGrids("topLeft","bottomLeft"):n.gridRef.forceUpdateGrids("topRight","bottomRight")}},n.handleRowClick=function(e,t){n.props.onRowClick(t.entity)},n.handleColumnSort=function(e){var t=n.props.onSort,r=n.props.sortBy,o=Object(N.e)(e);r&&r.key===o?r.order===se.SortOrder.DESC?t({key:o,order:se.SortOrder.ASC}):t(null):t({key:o,order:se.SortOrder.DESC})},n.renderCell=function(e){var t,r=e.cellStyle,i=e.rowIndex,s=e.columnIndex,a=n.props.printer,c=0===i,l=i===n.rowCount-1,u=0===s,p=s===n.columnCount-1,d=c,h=!d,m=u?ae[n.rootClassName+"__cell-content--first-column"]:ae[n.rootClassName+"__cell-content"],f=n.cellDescriptors[s],g=f?Object(N.e)(f):null,v=!!g&&g===n.resizingColumnKey,b=null,y=null,k=null,w=!1,C=!1,S=[];if(d)if(f){(w=!!f.sortable)&&(b=n.handleColumnSort);var E=a.toTitle(f);if(E){var T=n.props.sortBy,I=!(!T||T.key!==g)&&T.order;S.push(n.renderColumnTitle(E,m,I,f.customFieldEntity&&f.customFieldEntity.description))}}else C=!0;else h&&(b=n.handleRowClick,k=(y=n.rows[i]).entity._id,f&&S.push(a.renderBodyCell(f,y.entity,{className:m,key:"content",onOpenMiniOverview:n.props.onOpenMiniOverview,openMemberCardHandler:n.props.openMemberCardHandler,full:n.props.full,organizationId:n.props.organizationId})));var M=_()(ae[n.rootClassName+"__cell"],n.props.tableCellCls,((t={})[ae[n.rootClassName+"__head-cell"]]=d,t[ae[n.rootClassName+"__empty-head-cell"]]=C,t[ae[n.rootClassName+"__cell--first-column"]]=u,t[ae[n.rootClassName+"__cell--last-column"]]=p,t[ae[n.rootClassName+"__cell--void-column"]]=!0,t[ae[n.rootClassName+"__cell--first-row"]]=c,t[ae[n.rootClassName+"__cell--last-row"]]=l,t[ae[n.rootClassName+"__cell--sortable"]]=w,t[ae[n.rootClassName+"__cell--resizing"]]=v,t)),j=!!f&&f.unResizable;return o.createElement(re.a,{children:S,className:M,columnIndex:s,descriptor:f,isResizing:v,key:(k||i)+":"+(g||s),unResizable:j,onClick:b,onMouseEnter:null,onMouseLeave:null,onResize:n.handleColumnResizeStart,onResizerHoverEnd:n.handleColumnResizerHoverEnd,onResizerHoverStart:n.handleColumnResizerHoverStart,row:y,rowIndex:i,style:r})},n.handleProps(t,null),n.overscan={row:"IE"===ce.ua.getBrowser().name?6:0,column:0},n}return r.d(t,e),t.prototype.filterCellDescriptors=function(e,t,n){if(t&&t.cellDescriptors===e.cellDescriptors)return n;var r=e.cellDescriptors.filter(function(e){return!e.hidden});return r.length>0?r:null},t.prototype.flattenRows=function(e,t,n){var r=e.rows;return t&&t.rows===r?n:r?Object(oe.flatten)(r):null},t.prototype.computeActualHeight=function(){for(var e=0,t=0;e<this.rowCount&&!((t+=this.getRowHeight(e++))>=this.props.height););return Math.min(t,this.props.height)},t.prototype.handleProps=function(e,t){var n=this.filterCellDescriptors(e,t,this.cellDescriptors),r=this.flattenRows(e,t,this.rows);this.cellDescriptors!==n&&(this.cellDescriptors=n,this.fixedColumnCount=(this.cellDescriptors||[]).filter(function(e){return e.fixed}).length,this.columnCount=(this.cellDescriptors||[]).length,this.cellDescriptors&&(this.columnCount+=1,this.cellDescriptors.push(null))),this.rows!==r&&(this.rows=r,this.rowCount=(this.rows||[]).length,this.rows&&this.cellDescriptors&&(this.rowCount+=1,this.rows.unshift(null))),this.cellDescriptors&&(this.rowCount=Math.max(this.rowCount,1)),!this.rootRef||this.rootRefRect&&t&&t.width===e.width||(this.rootRefRect=this.rootRef.getBoundingClientRect())},t.prototype.componentDidMount=function(){window.addEventListener("mouseover",this.handleTableHover),window.addEventListener("mousemove",this.handleColumnResize),window.addEventListener("mouseup",this.handleColumnResizeEnd),this.rootRef&&this.rootRef.addEventListener("click",this.handleTableClick,!0)},t.prototype.componentWillUnmount=function(){window.removeEventListener("mouseover",this.handleTableHover),window.removeEventListener("mousemove",this.handleColumnResize),window.removeEventListener("mouseup",this.handleColumnResizeEnd),this.rootRef&&this.rootRef.removeEventListener("click",this.handleTableClick,!0)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){if(this.handleProps(e,this.props),this.gridRef){var t=e.cellDescriptors!==this.props.cellDescriptors;t&&(this.gridRef.resetCols(),this.gridRef.forceUpdate()),(t||e.rows!==this.props.rows)&&this.gridRef.forceUpdateGrids("topLeft","topRight","bottomLeft","bottomRight")}},t.prototype.resizeColumn=function(e){var t=this.resizingCellDescriptor;if(t){var n=t.width+(e.screenX-this.resizingEventScreenX);this.resizingEventScreenX=e.screenX,t.minWidth&&t.minWidth>n&&(n=t.minWidth),t.maxWidth&&t.maxWidth<n&&(n=t.maxWidth),t.width!==n&&(t.width=n,this.gridRef.resetCols(),this.scrollToColumn=this.resizingLastColumn?this.cellDescriptors.length-1:-1,this.props.onConfigure([t]))}},t.prototype.renderColumnTitle=function(e,t,n,r){return o.createElement(ne.a,{className:t,key:"column-title",sortOrder:n,title:e,tooltip:r})},t.prototype.notShowTable=function(){return this.props.width<=0||this.props.height<=0||!this.cellDescriptors||!this.props.rows||!this.props.rows.length||this.props.loading},t.prototype.renderTable=function(){return this.notShowTable()?null:o.createElement(ie.b,{cellRenderer:this.renderCell,className:_()(ae[this.rootClassName+"__container"],this.props.tableContainerCls),columnSize:this.columnCount,columnWidth:this.getColumnWidth,fixedColumnCount:this.fixedColumnCount,fixedRowCount:1,height:this.computeActualHeight(),maxScrollSpeed:1e3,onLeftSlideStyle:this.leftScrollingShadow,onRightSlideStyle:this.rightScrollingShadow,overscan:this.overscan,ref:this.saveGridRef,rowHeight:this.getRowHeight,rowSize:this.rowCount,scrollToColumn:this.scrollToColumn,width:this.props.width,allowNativeScroll:{Y:this.props.allowNativeScrollY}})},t.prototype.renderConfigureAction=function(){if(this.notShowTable())return null;var e=this.props.cellDescriptors.filter(function(e){return!e.unDraggable});return this.props.printer.renderConfigureAction({className:_()(ae[this.rootClassName+"__configure-action"],this.props.tableConfigureCls),key:"configure-action",cellDescriptors:e,organizationId:this.props.organizationId,onToggle:this.props.onToggle,onColumnResort:this.props.onColumnResort,onRequestLinkPanelView:this.props.onRequestLinkPanelView,permissionSync:this.props.permissions.syncCustomfield,showAddColumn:this.props.showAddColumnEntry,max:O.j,full:this.props.full,onAddCustomfieldToCluster:this.props.onAddCustomfieldToCluster,isProjectTag:!Object(N.l)(this.props.viewId)})},t.prototype.renderLoading=function(){return this.props.loading&&o.createElement(v.Loading,null)},t.prototype.renderPlaceholder=function(){return!this.props.loading&&this.rows&&this.rows.every(function(e){return!e})?this.props.printer.renderPlaceholder(this.props.placeholderNotice):null},t.prototype.render=function(){var e=_()(this.props.className,ae[this.rootClassName]);return o.createElement("div",{className:e,ref:this.saveRootRef},this.renderTable(),this.renderLoading(),this.renderPlaceholder(),this.renderConfigureAction())},t}(o.Component),ue=n("qfubVY4S"),pe=function(e){function t(t){var o=e.call(this,t)||this;return o.printer=new te,o.mountEl=document.createElement("div"),o.handleConfigure=function(e){o.props.actions.configureCellDescriptor({viewId:o.props.viewId,cellDescriptors:e})},o.doNothing=function(){},o.handlerOnSort=function(e){o.props.actions.sortTable({sortBy:e,viewId:o.props.viewId})},o.handleToggle=function(e){o.props.actions.columnToggle({organizationId:o.props.organizationId,viewId:o.props.viewId,cellDescriptors:e})},o.handleAddCustomfieldToCluster=function(e){o.props.actions.batchAddCustomFields({projectTagId:o.props.viewId,customFieldIds:[e]})},o.handleColumnResort=function(e){o.props.actions.columnResort({viewId:o.props.viewId,oldIndex:e.oldIndex,newIndex:e.newIndex})},o.onConfirmHandler=function(e){o.props.actions.columnToggle({organizationId:o.props.organizationId,viewId:o.props.viewId,cellDescriptors:e.map(function(e){return Object(N.b)(e,{hidden:!1})})})},o.clearModal=function(){I.a.unmountComponentAtNode(o.customFieldModalWrap)},o.openCustomFieldModalHandler=function(){o.customFieldModalWrap&&o.props.projectClusterView&&n.e(20).then(function(e){var t=n("A8slj1oX"),s=t.linkPanelReducers,a=t.linkPanelEpics,c=n("1EEhbYlf").LinkPanelContainer,u=o.props,p=u.projectClusterView,d=u.organizationId,h=new Map(p.cellDescriptors.filter(function(e){return!e.hidden&&e.customFieldEntity}).map(function(e){return[e.customFieldEntity._id,void 0]}));Object(f.addUIReducer)({customfieldLinkPanel:s}),Object(f.addEpic)(a);var m=p.cellDescriptors.filter(function(e){return"customfield"!==e.key&&!e.hidden}).length,g=j.a.find(d),v={organizationId:d,boundToObjectType:"project",projectType:"",orgCustomFieldPermission:!!g&&g.hasPermission("organization.customfield.edit"),usedFieldIds:h,onConfirm:o.onConfirmHandler,onClose:o.clearModal,max:O.j-m,overflowTips:C.a.get("project.cluster.add.customfield.limit",O.j)};I.a.render(i.a.createElement(l.Provider,{store:f.store},i.a.createElement(c,r.a({},v))),o.customFieldModalWrap)}.bind(null,n)).catch(n.oe)},o.openMiniOverviewModalHandler=function(e){o.miniOverviewView&&o.miniOverviewView.remove(),o.miniOverviewView=y.APP.requestSubView(E.a,{projectId:e.id,title:e.get("name"),orgId:o.props.organizationId,openMemberCardHandler:o.props.openMemberCardHandler})},o.saveCustomFieldModalRef=function(e){o.customFieldModalWrap=e},o.setPageHandler=function(e){o.props.actions.setPage({viewId:o.props.viewId,page:e})},o.powerUpModalHideHandler=function(){o.setState({projectId:void 0,showPowerUpModal:!1})},o.openMiniOverviewHandler=function(e){o.clearProjectModelSub(),o.projectModelSub=x.a.fetch$(e).subscribe(function(t){if(!t.isAlienProject()){o.projectModel=t;var n=t.isAppEnabled("projectinfoapp");o.setState({projectId:e,showPowerUpModal:!n},function(){n&&o.openMiniOverviewModalHandler(t)})}})},o.resetPageSize=function(){var e=o.props,t=e.projectClusterView,n=e.viewId;if(t){var r=o.getFullScreenTableSize().height,i=t.cellDescriptors[0],s=i.height,a=i.headHeight,c=Math.ceil((r-a)/s);o.props.actions.resetPageSize({pageSize:c,viewId:n})}},o.resizeHandler=m.a.debounce(function(){var e=o.props.projectClusterView;e&&e.fullScreen&&o.resetPageSize()},500),o.exitFullscreenHandler=function(){o.onFullScreenHandler(!1)},o.onFullScreenHandler=function(e){o.props.actions.fullScreenToggle({viewId:o.props.viewId,full:e}),e?(o.listenResize(),o.listenKeyboard()):(o.stopListenResize(),o.stopListenKeyboard())},o.listenKeyboard=function(){o.stopListenKeyboard(),document.addEventListener("keyup",o.onKeyUpHandler)},o.stopListenKeyboard=function(){document.addEventListener("keyup",o.onKeyUpHandler)},o.onKeyUpHandler=function(e){var t=o.props.projectClusterView;27===e.keyCode&&t&&t.fullScreen&&o.exitFullscreenHandler()},o.enterFullScreenHandler=function(){y.gta.event({action:"switch full screen",method:"click",page:"Organization Page",type:"project",segment:"project table view"}),o.onFullScreenHandler(!0)},o.exportTableHandler=function(){y.gta.event({action:"export project data",page:"Organization Page",method:"click",control:"full screen"}),o.props.exportTable(o.props.viewId)},o.state={showPowerUpModal:!1},o}return r.d(t,e),t.prototype.clearProjectModelSub=function(){this.projectModelSub&&this.projectModelSub.unsubscribe()},t.prototype.renderPagination=function(){var e=this.props.projectClusterView,t=e.currentPage,n=e.totalRows,r=e.pageSize;if(n&&!(n<r))return i.a.createElement("div",{className:"pagniation-wrap"},i.a.createElement(v.Pagination,{total:n,currentPage:t,onPageChange:this.setPageHandler,className:"pagination",pageSize:r}))},t.prototype.renderPowerUp=function(){var e=this.state,t=e.projectId,n=e.showPowerUpModal;if(t&&n&&this.projectModel)return i.a.createElement(b.PowerUpModalComponent,{fromWhere:b.PageType.AppDetail,featureAppName:"projectinfoapp",projectModel:this.projectModel,onHide:this.powerUpModalHideHandler,defaultOpened:!0})},t.prototype.getTablePermissions=function(){var e=this.props.projectClusterView,t=!1;return e&&(t=!!e.syncPermission),{syncCustomfield:t}},t.prototype.listenResize=function(){this.stopListenResize(),this.resetPageSize(),window.addEventListener("resize",this.resizeHandler)},t.prototype.stopListenResize=function(){window.removeEventListener("resize",this.resizeHandler)},t.prototype.componentDidMount=function(){y.gta.event({action:"show project table",method:"trace"}),document.body.appendChild(this.mountEl);var e=this.props,t=e.viewId,n=e.organizationId;this.props.actions.mount({viewId:t,organizationId:n})},t.prototype.componentWillUnmount=function(){document.body.removeChild(this.mountEl),this.stopListenResize(),this.stopListenKeyboard(),this.props.actions.unmount({viewId:this.props.viewId}),this.clearProjectModelSub()},t.prototype.renderClusterHeader=function(){if(!this.props.projectClusterView||!this.props.projectClusterView.fullScreen)return!1;var e=Object(g.c)(this.props.count)?" · "+this.props.count:"";return i.a.createElement("div",{className:"cluster-header"},i.a.createElement("h2",null,""+this.props.title+e),i.a.createElement("div",null,i.a.createElement(v.TextButton,{onClick:this.exportTableHandler},i.a.createElement(v.Icon,{name:"move-task"}),C.a.get("search.export")),i.a.createElement(v.IconButton,{className:"btn-exit",color:"gray",name:"remove-s",onClick:this.exitFullscreenHandler})))},t.prototype.renderFullScreenBtn=function(){return i.a.createElement(v.Button,{className:"full-screen-btn",onClick:this.enterFullScreenHandler,size:"smaller",type:"secondary"},i.a.createElement(v.Icon,{name:"full-screen"}))},t.prototype.renderTable=function(){if(!this.props.projectClusterView)return!1;var e=this.props.projectClusterView,t=e.projects,n=e.cellDescriptors,r=e.sortBy,o=void 0===r?null:r,s=e.fullScreen,a=e.loading,c=t.map(function(e){return{entity:e}}),l=this.getTablePermissions(),u=s?this.getFullScreenTableSize():this.props,p=u.width,d=u.height,h=_()({"full-screen-table":s}),m=s?{height:d,paddingLeft:O.d}:{};return i.a.createElement("div",{className:"table-wrap",style:m},i.a.createElement(le,{allowNativeScrollY:!s,cellDescriptors:n,className:h,full:!!s,height:d,key:""+this.props.viewId+s,loading:!!a,onColumnResort:this.handleColumnResort,onConfigure:this.handleConfigure,onOpenMiniOverview:this.openMiniOverviewHandler,onRequestLinkPanelView:this.openCustomFieldModalHandler,onRowClick:this.doNothing,onSort:this.handlerOnSort,onToggle:this.handleToggle,onAddCustomfieldToCluster:this.handleAddCustomfieldToCluster,openMemberCardHandler:this.props.openMemberCardHandler,organizationId:this.props.organizationId,permissions:l,printer:this.printer,rows:c,showAddColumnEntry:!!this.props.projectTag,sortBy:o,tableCellCls:"cluster-table-cell",tableConfigureCls:"cluster-table-configure",tableContainerCls:"cluster-table-container",width:p,viewId:this.props.viewId}),!!c.length&&this.renderFullScreenBtn())},t.prototype.getFullScreenTableSize=function(){var e=window.innerWidth,t=window.innerHeight;return{width:e-O.d,height:t-144}},t.prototype.renderMain=function(){var e=_()(ue.wrap,this.props.className,{"full-screen":this.props.projectClusterView.fullScreen});return i.a.createElement("div",{className:e},this.renderClusterHeader(),this.renderTable(),this.renderPagination(),this.renderPowerUp(),i.a.createElement("div",{ref:this.saveCustomFieldModalRef}))},t.prototype.render=function(){return!!this.props.projectClusterView&&(this.props.projectClusterView.fullScreen?I.a.createPortal(this.renderMain(),this.mountEl):this.renderMain())},t}(i.a.PureComponent),de=Object(l.connect)(function(e,t){return{projectClusterView:Object(d.a)(e,t.viewId)}},function(e){return{actions:Object(c.bindActionCreators)(r.a({},p.a,{sortTable:Object(u.b)(p.a.sortTable,{action:"sort project detail",method:"click",segment:"project table view"})}),e)}})(pe);n.d(t,"b",function(){return he}),n.d(t,"a",function(){return me});var he=function(e,t,n,o,i){switch(e){case"grid":return r.a({},t,n);case"list":return r.a({},t,o);case"table":return r.a({},i);default:return null}},me=function(e){switch(e){case"grid":return function(e){return o.createElement(s.ProjectGridGroup,r.a({},e))};case"list":return function(e){return o.createElement(a.ProjectListGroup,r.a({},e))};case"table":return function(e){return o.createElement(de,r.a({},e,{height:O.m}))};default:return function(){return null}}}},"28Cg9yY2":function(e,t,n){e.exports=n.p+"images/d_tanshou@2x.061dc0a9.png"},"2BlQZA9A":function(e,t,n){e.exports={root:"root__2e1K"}},"2NlL4uak":function(e,t,n){var r,o,i={}.hasOwnProperty,s=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};r=n("VuB9cZyl"),o=n("Rb7YhHxV"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="posts",t.prototype.model=o,t.prototype.pageNum=20,t.prototype.boundToObjectType="project",t.prototype.order=-1,t.prototype.orderBy="updated",t.prototype.listen=function(){if(!this.listened)return t.__super__.listen.apply(this,arguments),this.on("change:_projectId",function(e,n){var r;return null!=(r=t.find(n))&&r.add(e),this.remove(e)})},t.prototype.getType=function(e){var t;return t=["all","my"],s.call(t,e)>=0?e:t[0]},t.prototype.getParams=function(e,t){return{type:"read"===e&&null!=t?t.section:void 0}},t.prototype.comparator=function(e,t){var n;return(n=(t.get("pin")||0)-(e.get("pin")||0))?n:(n=new Date(e.get(this.orderBy))-new Date(t.get(this.orderBy)),n=this.order*n)},t}()},"2Ogs9lXX":function(e,t,n){e.exports=n.p+"images/basic-medal.a128fa33.png"},"2X3OEYhr":function(e,t,n){},"2YVBljVg":function(e,t,n){var r,o;o=n("CxY0Mkc1"),r=/\$([\s\S]*?)\$/g,t.addUrlQuery=function(e,t,n){var r;return(r=o.parse(e,!0)).search=null,r.query||(r.query={}),r.query[t]=n,o.format(r)},t.replaceMark=function(e,t){return t?e.replace(r,function(e,n){return encodeURIComponent(t[n]||"")}):e}},"2fNf6n4X":function(e,t,n){e.exports={toolbar:"toolbar__16xH","toolbar-button-wrapper":"toolbar-button-wrapper__2w9k",dropdown:"dropdown__2uu_","dropdown-title":"dropdown-title__BjCW"}},"2jCR0LhH":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e.dataList;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+='<li class="menu-item member-item ',(s=i[a+=1]).selected&&(o+="selected"),o+='" data-id="'+s._id+'"> <a> ',s.all?o+=' <div class="icon icon-users pull-left"></div> ':o+=' <div class="avatar user-avatar pull-left" style="background-image:url('+s.avatarUrl+')"></div> ',o+=" "+r(s.title)+" </a></li>";return o}},"2jKBpKa5":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v={}.hasOwnProperty,b=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};d=n("a+N5u/Cl"),g=n("sa1Ed382"),r=n("WnsHHLFq"),s=n("YWDYW7xG"),p=n("OmupbwLD"),c=n("hGNqppva"),l=n("YdqH4v7N"),u=n("ymFCWmUp"),a=n("ZkhtbhGT"),n("GESwhXbR").Alert,o=n("7UQIdnmo"),m=n("8KNpsyVU"),f=m.showVerifyBindModal,h=m.getAccountBind,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)v.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,c),t.prototype.viewName="MemberMenuView",t.prototype.className="member-menu-view",t.prototype.popoverTitle="Menu",t.prototype.width=245,t.prototype.hotkeys={esc:function(e){var t;return e.preventDefault(),null!=(t=this.$popover)&&t.parent().trigger("click"),this.hide()}},t.prototype.events={"click .one":"toggleMember","click .all":"toggleAllMembers","click .team":"toggleTeamMembers","click .group":"toggleGroupMembers","click .invite-more":"inviteMoreMember","mouseenter .member-item":"activate","keydown .filter-input":"onkeydown","input .filter-input":"oninput"},t.prototype.initialize=function(e){if(null!=e?e.membersCollection:void 0)return this.titleForAll=e.titleForAll,this.resident=e.resident||[],this.excludes=e.excludes||[],this.selected=e.selected||[],this.membersCollection=e.membersCollection,this.teamsCollection=e.teamsCollection,this.groupsCollection=e.groupsCollection,this.inviteToProject=e.inviteTo,this.members=this.pickMembers(),this.userId=g.user.id,this.listen(),t.__super__.initialize.apply(this,arguments),this},t.prototype.listen=function(){return this.listenTo(this.membersCollection,"add remove",function(){return this.members=this.pickMembers(),this.render()}),this},t.prototype.render=function(){return this.$el.html(r({searchPlaceholder:tb_i18n.get("member.menu.search")})),this.$list=this.$("ul"),this.renderMembers(this.assembleAll()),this.$("input").focusAtEnd(),this.setupScroll(this.$list),this},t.prototype.renderMembers=function(e){return this.$list.html(s({list:e,enableInvite:!!this.inviteToProject})),this.refreshSelected(),this.$list.children(".member-item").first().addClass("active").siblings().removeClass("active"),this},t.prototype.pickMembers=function(){return d.filter(this.membersCollection.toJSONActive(),(e=this,function(t){var n;return t.isMember=!0,n=t._id,b.call(e.excludes,n)<0}));var e},t.prototype.refreshSelected=function(){var e;return this.$(".member-item").removeClass("selected"),this.$(".member-item").each((e=this,function(t,n){var r,o,i,s,a,c;if(s=(r=$(n)).data("id"),r.hasClass("all")&&e.selected.length===e.members.length)return r.addClass("selected");if(r.hasClass("team")){if(!(a=e.teamsCollection.get(s)))return;if(c=a.get("hasMembers").map(function(e){return e._id}),d.every(c,function(t){return d.contains(e.selected,t)}))return r.addClass("selected")}else if(r.hasClass("group")){if(!(o=e.groupsCollection.get(s)))return;if(i=o.get("hasMembers").map(function(e){return e._id}),d.every(i,function(t){return d.contains(e.selected,t)}))return r.addClass("selected")}else if(b.call(e.selected,s)>=0)return r.addClass("selected")})),this},t.prototype.assembleAll=function(){return d.flatten([this._getNoAssignOption(),this._getAllMembersOption(),this._assembleTeams(),this._assembleGroups(),this._assembleMembers()])},t.prototype._getNoAssignOption=function(){return this.options.noAssign?[{isNoAssign:this.options.noAssign}]:[]},t.prototype._getAllMembersOption=function(){var e;return this.options.multi?(e=this.teamsCollection&&this.teamsCollection.filter(this.isAllMembersTeam))&&1===e.length?[this.assignTeamAttributes(e[0])]:[{isAll:!0,title:this.titleForAll}]:[]},t.prototype._assembleTeams=function(){var e;return this.teamsCollection?(e=this.teamsCollection.filter(d.negate(this.isAllMembersTeam)).filter(function(e){return e.get("membersCount")>0}).map(this.assignTeamAttributes),d.sortBy(e,"pos")):[]},t.prototype._assembleGroups=function(){return this.groupsCollection?this.groupsCollection.filter(function(e){return e.get("membersCount")>0}).map(function(e){return d.assign(e.toJSON(),{isGroup:!0})}):[]},t.prototype._assembleMembers=function(){return d.chain(this.members).sortBy("pinyin").reverse().sortBy((e=this,function(t){return t._id===e.userId})).sortBy(function(e){return function(t){return d.contains(e.selected,t._id)||d.contains(e.resident,t._id)}}(this)).reverse().value();var e},t.prototype.isAllMembersTeam=function(e){return"default"===e.get("type")},t.prototype.assignTeamAttributes=function(e){var t;return t=e.toJSON(),d.assign(t,{styleName:t.style.split(",")[0],styleColor:t.style.split(",")[1],belongsTo:a.getTeamBelongsTo(t),isTeam:!0})},t.prototype.setSelected=function(e){return this.selected=e,this.refreshSelected(),this.options.select(this.selected),this},t.prototype.toggleMember=function(e){var t,n;return n=(t=$(e.currentTarget)).data("id"),this.options.multi?t.hasClass("selected")?this.unselectMember(n):this.selectMember(n):this.selectSingleMember(n)},t.prototype.selectSingleMember=function(e){return this.selected=[e],this.refreshSelected(),this.options.select([e]),this.hide(),this},t.prototype.selectMember=function(e){var t,n;if(this.ensurePermission(e))return"function"==typeof(n=this.options).select&&n.select([e]),this.selected=d.union(this.selected,[e]),this.query?(this.query="",this.$(".filter-input").val(""),this.renderMembers(this.assembleAll()),(t=this.$(".member-item[data-id="+e+"]")).addClass("active").siblings().removeClass("active"),this.scrollTo(t)):this.refreshSelected(),this},t.prototype.ensurePermission=function(e){return!d.isFunction(this.options.ensurePermission)||!1!==this.options.ensurePermission(e)},t.prototype.unselectMember=function(e){var t,n;if(!(b.call(this.resident,e)>=0)&&this.ensurePermission(e))return"function"==typeof(n=this.options).unselect&&n.unselect([e]),this.selected=d.without(this.selected,e),this.query?(this.query="",this.$(".filter-input").val(""),this.renderMembers(this.assembleAll()),(t=this.$(".member-item[data-id="+e+"]")).addClass("active").siblings().removeClass("active"),this.scrollTo(t)):this.refreshSelected(),this},t.prototype.toggleAllMembers=function(e){var t,n,r;return $(e.currentTarget).hasClass("selected")?(t=this.selected.filter((r=this,function(e){return r.ensurePermission(e)})),n=this.selected.filter(function(e){return function(t){return!e.ensurePermission(t)}}(this)),this.options.unselect(t),this.selected=d.union(n,this.resident)):(this.selected=d.pluck(this.members,"_id"),this.options.select(this.selected)),g.gta.event({action:"toggle followers",category:"all"}),this.refreshSelected(),this},t.prototype.toggleTeamMembers=function(e){var t,n,r,o,i;if(t=$(e.currentTarget),r=this.teamsCollection.get(t.data("id")))return o=r.get("hasMembers").map(function(e){return e._id}),t.hasClass("selected")?(n=o.filter((i=this,function(e){return i.ensurePermission(e)})),this.selected=this.selected.filter(function(e){return!d.contains(n,e)}),this.options.unselect(n)):(this.selected=d.union(this.selected,o),this.options.select(o)),this.refreshSelected(),g.gta.event({action:"toggle followers",category:"team"}),this},t.prototype.toggleGroupMembers=function(e){var t,n,r,o,i;if(t=$(e.currentTarget),r=this.groupsCollection.get(t.data("id")))return o=r.get("hasMembers").map(function(e){return e._id}),t.hasClass("selected")?(n=o.filter((i=this,function(e){return i.ensurePermission(e)})),this.selected=this.selected.filter(function(e){return!d.contains(n,e)}),this.options.unselect(n)):(this.selected=d.union(this.selected,o),this.options.select(o)),this.refreshSelected(),g.gta.event({action:"toggle followers",category:"group"}),this},t.prototype.onkeydown=function(e){switch(e.keyCode){case 38:return e.preventDefault(),this.switchActive("up");case 40:return e.preventDefault(),this.switchActive("down");case 13:return this.$(".member-item.active").trigger("click")}},t.prototype.oninput=function(e){var t,n,r,o;return(o=this.$(e.target).val().trim().toLowerCase())?(this.query=o,r=[],n=this._assembleTeams(),t=this._assembleMembers(),r=r.concat(u.objectsFilter(n,this.query,{fields:["name","pinyin"]}),u.objectsFilter(t,this.query)),this.renderMembers(r)):this.renderMembers(this.assembleAll()),this.GTAInputReported||""===o||(this.GTAInputReported=!0,g.gta.event({action:"begin search",control:"Member Menu"})),""===o&&(this.GTAInputReported=!1),this},t.prototype.activate=function(e){var t;if((t=$(e.currentTarget)).length&&!t.hasClass("active"))return t.addClass("active").siblings().removeClass("active"),this},t.prototype.switchActive=function(e){var t,n,r;if(!((r=(new Date).getTime())-this.lastSwitchTime<100))return this.lastSwitchTime=r,t=this.$list.find(".active:eq(0)"),"down"===e?(n=t.next()).length||(n=this.$list.children().first()):(n=t.prev()).length||(n=this.$list.children().last()),n.addClass("active").siblings().removeClass("active"),n.length&&this.slideTo(n),this},t.prototype.inviteMoreMember=function(){var e;if(this.inviteToProject)return h(this.inviteToProject.get("_organizationId")).then((e=this,function(t){return t?(e.requestSubView(p).open(o,{projectModel:e.inviteToProject,qrCodeType:"project"}),e.hide(),g.gta.event({action:"begin add member",control:"Member Menu"})):(f(),g.gta.event({action:"invitation blocked",page:"Member Menu Page",type:"project"}))})),this},t}(),d.extend(i.prototype,l),e.exports=i},"2kctFniS":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e.dataList;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=" ",(s=i[a+=1]).isGroup?o+=' <li class="menu-group"> <span>'+r(s.title)+"</span> </li> ":(o+=' <li class="menu-item ',s.selected&&(o+="selected"),o+='" data-id="'+s._id+'"> <a>'+r(s.title)+"</a> </li> ");return o}},"2o3Aa8VP":function(e,t,n){var r,o={}.hasOwnProperty;r=n("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="tagcategory",t}()},"2qluv9Ze":function(e,t){e.exports=function(e){return'<div class="remove-member-sub-menu"> <p class="title"> '+tb_i18n.get("project.settings.remove.member.title")+' </p> <button class="btn btn-danger remove-member-confirm">'+tb_i18n.get("confirm")+"</button></div>"}},"2uRu9aah":function(e,t,n){"use strict";var r,o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n.n(i),a=n("GESwhXbR"),c=s.a.lazy(function(){return n.e(37).then(n.bind(null,"HAw1U7kL")).then(function(e){return{default:e.Upgrade}})}),l=s.a.lazy(function(){return n.e(44).then(n.bind(null,"vpqLel+m")).then(function(e){return{default:e.Overdue}})}),u=s.a.lazy(function(){return n.e(36).then(n.bind(null,"yyg1/aIm")).then(function(e){return{default:e.Purchase}})}),p=s.a.lazy(function(){return n.e(38).then(n.bind(null,"eERmXbPe")).then(function(e){return{default:e.Trial}})}),d=s.a.lazy(function(){return n.e(42).then(n.bind(null,"PoeOLmvp")).then(function(e){return{default:e.ContactCS}})}),h=s.a.lazy(function(){return n.e(28).then(n.bind(null,"3cqmLkfL")).then(function(e){return{default:e.OrganizationCreator}})}),m=s.a.lazy(function(){return Promise.resolve().then(n.bind(null,"17bKXt//")).then(function(e){return{default:e.PaymentStatus}})}),f=s.a.lazy(function(){return n.e(43).then(n.bind(null,"TSRcnNPk")).then(function(e){return{default:e.SoftExcessMembership}})});!function(e){e[e.Trial=0]="Trial",e[e.Purchase=1]="Purchase",e[e.PurchasePro=2]="PurchasePro",e[e.ContactCS=3]="ContactCS",e[e.Renew=4]="Renew",e[e.Upgrade=5]="Upgrade",e[e.Create=6]="Create",e[e.PaymentStatus=7]="PaymentStatus",e[e.SoftExcess=8]="SoftExcess",e[e.StrictExcess=9]="StrictExcess",e[e.Unset=10]="Unset"}(r||(r={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gta=function(){},t}return o.d(t,e),t.prototype.renderView=function(){var e=this.props,t=e.extra,n=o.g(e,["extra"]);switch(this.props.viewType){case r.Purchase:return s.a.createElement(u,o.a({},t,n,{type:"org"}));case r.Trial:return s.a.createElement(p,o.a({},t,n));case r.Renew:return s.a.createElement(l,o.a({},t,n));case r.ContactCS:return s.a.createElement(d,o.a({},t,n));case r.PurchasePro:return s.a.createElement(u,o.a({},t,n,{type:"org:2"}));case r.Upgrade:return s.a.createElement(c,o.a({},t,n));case r.Create:return s.a.createElement(h,o.a({onClose:this.props.onClose},t,n));case r.PaymentStatus:return s.a.createElement(m,o.a({onClose:this.props.onClose},t));case r.SoftExcess:return s.a.createElement(f,o.a({onClose:this.props.onClose},t));default:return null}},t.prototype.render=function(){return s.a.createElement("div",{className:"pay-wall-modal"},s.a.createElement(i.Suspense,{fallback:s.a.createElement(a.Loading,null)},this.renderView()))},t.defaultProps={extra:{}},t}(s.a.PureComponent);n.d(t,"b",function(){return r}),n.d(t,"a",function(){return g})},"2vaxzVCj":function(e,t){e.exports=function(e){return'<a class="flex-static object-picker-creator link-add-handler"> <span class="icon icon-circle-cross"></span> <span>'+tb_i18n.get("object.picker.post.creator.tips")+'</span></a><ul class="flex-fill posts-list thin-scroll link-search-wrap"></ul>'}},"2yD8PYrn":function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("vmWJWrVe"),r=n("gMwrA6S/"),o=n("bXbOecvn"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="TagListItemView",t.prototype.tagName="li",t.prototype.className="tag-item",t.prototype.events={"click .tag-menu-toggler":"toggleMenu"},t.prototype.initialize=function(e){if(this.tagModel=e.tagModel,this.tagModel)return this.render(),this.listen()},t.prototype.render=function(){var e;return(e=this.tagModel.toJSON()).permissions=this.tagModel.hasPermissions("put","put.archive","del"),this.$el.html(o(e)),this.$el.attr("data-id",this.tagModel.id)},t.prototype.listen=function(){return this.listenTo(this.tagModel,"change",this.render),this.listenTo(this.tagModel,"remove destroy",this.remove)},t.prototype.toggleMenu=function(){var e;if(!(e=this.$(".tag-menu-toggler")).data("bs.popover"))return this.requestSubView(r,{$toggler:e,_projectId:this.tagModel.get("_projectId"),tagModel:this.tagModel,onShown:function(){return e.addClass("active")},onHidden:function(){return e.removeClass("active")}}).show()},t}()},"2yb3tZzU":function(e,t,n){var r,o,i,s,a,c,l,u,p={}.hasOwnProperty;u=n("a+N5u/Cl"),l=n("vmWJWrVe"),i=n("wd/RKGTj"),a=n("YdqH4v7N"),c=n("3eMzznN/"),r=n("mvlQz3Ik"),o=n("y76pUX2n"),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,l),t.prototype.viewName="ProcessonLinkView",t.prototype.className="processon-link-view",t.prototype.events={"input input":"searchItems"},t.prototype.initialize=function(e){return this.title=e.title||"",this.items=e.data||[],this.hasHeader=e.hasHeader,this.hasSearch=null==e.hasSearch||e.hasSearch,this.isSearched=null==e.isSearched||e.isSearched,this.processon=e.processon,this.renderBasic()},t.prototype.renderBasic=function(){return this.$el.html(r({title:this.title,hasSearch:this.hasSearch,hasHeader:this.hasHeader})),this.$content=this.$("ul"),this.renderItems(),this.setupScroll(this.$content)},t.prototype.renderItems=function(e,t){var n;return null==t&&(t=!1),e=e||this.items,n=u.map(e,function(e){return u.extend({lastModifyTime:c.formatDate(i(e.data.lastModify))},e)}),this.$content[t?"append":"html"](o({items:n,isSearched:this.isSearched}))},t.prototype.searchItems=function(e){var t;return t=(t=$(e.currentTarget).val()).toLowerCase(),this.renderItems(u.filter(this.items,function(e){var n;return~(null!=(n=e.data.title)?n.toLowerCase().indexOf(t):void 0)}))},t.prototype.loadMore=function(e){if("function"==typeof e&&e(),this.processon)return this.processon.loadMore&&null!=this.processon[this.processon.currentQuery]?(this.showLoadingIndicator(this.$content),this.processon[this.processon.currentQuery](null,{success:(t=this,function(e){if(t.hideLoadingIndicator(t.$content),t.items=t.items.concat(e.data),t.renderItems(e.data,!0),!t.processon.loadMore)return t.showEndPoint(t.$content)})})):this.showEndPoint(this.$content);var t},t}(),u.extend(s.prototype,a),e.exports=s},"2ypjTRgY":function(e,t,n){e.exports={moveToLeft:"moveToLeft__3OUd",hiddenText:"hiddenText__1LRF",moveToRight:"moveToRight__19FM"}},"3+qSntWu":function(e,t,n){e.exports={"status-label":"status-label__4KtI"}},"30IMcDuq":function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;c=n("sa1Ed382"),s=n("GESwhXbR").Toast,r=n("6ESC5pY6"),i=n("nL4olqOP"),o=n("85182E8g"),a=n("vmWJWrVe"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="ProjectSettingsArchiveView",t.prototype.className="project-settings-archive-view modal-dialog modal-padding",t.prototype.events={"click .confirm-handler":"submit"},t.prototype.initialize=function(e){return this.options=e,this.projectModel=e.projectModel,this.renderBasic(),this},t.prototype.renderBasic=function(){return this.$el.html(r({projectName:this.projectModel.get("name")})),this},t.prototype.submit=function(){var e,t,n,r,a;return e=this.projectModel.get("_organizationId"),n=!!o.get(0).get(e),t=this.options.gotoPortal,r=void 0===this.options.trigger||this.options.trigger,this.projectModel.save(null,{wait:!0,attrs:{isArchived:!0},success:(a=this,function(o){var l,u,p,d,h,m,f;return l=e?tb_i18n.get("project.settings.archive.success.inorganizaiton"):tb_i18n.get("project.settings.archive.success"),s.success(l),null!=(u=i.find(0))&&u.remove(o),null!=(p=i.find("suspended_0"))&&p.remove(o),null!=(d=i.find("archived_0"))&&d.add(o),e&&(null!=(h=i.find(e))&&h.remove(o),null!=(m=i.find("suspended_"+e))&&m.remove(o),null!=(f=i.find("archived_"+e))&&f.add(o)),a.close(),e&&n&&!t?c.router.navigate("organization/"+e,{trigger:r}):c.router.navigate("projects",{trigger:!0}),c.gta.event({action:"archive",control:"Side Menu",type:"project"})}),error:function(e){return s.error({message:tb_i18n.get("project.settings.archive.error")})}}),this},t.prototype.close=function(){var e;return null!=(e=this.parentView)&&e.remove(),this},t}()},"3778TAaH":function(e,t){e.exports=function(e){return'<header class="creator-header"> <h4 class="creator-title"> <span class="creator-location-tips">'+tb_i18n.get("work.creator.tips")+"</span> <a class=\"creator-location-handler\" data-gta=\"{action: 'move content', type: 'file', control: '"+e.gta_from+'\'}"> <span class="creator-location"></span> <span class="icon icon-chevron-down"></span> </a> </h4> <a class="creator-close pull-right icon icon-remove" data-dismiss="modal"></a></header><div class="work-creator-wrap"> <section class="creator-body"> <ul class="creator-block no-padding work-creator-works-wrap"></ul> <div class="creator-involve"></div> </section> <footer class="creator-footer clearfix"> <div class="btn-wrap submiting"> <button class="btn btn-primary submit-handler" data-gta="{action: \'added content\', type: \'file\', control: \''+e.gta_from+"'}\"> "+tb_i18n.get("upload")+' </button> <div class="btn-layer"></div> </div> </footer></div><div class="work-creator-picker-wrap"></div>'}},"38LFgJ33":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";e.canCreate&&(o+='<a class="link-add-handler testgroup-creator-handler"> <span class="icon icon-plus"></span> '+tb_i18n.get("object.picker.testgroup.creator")+"</a>");var i=e.testgroups;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+='<li class="testgroup" data-id="'+(s=i[a+=1])._id+'" data-title="'+r(s.isRoot?tb_i18n.get("testplan.testgroup.unplanned.name"):s.name)+'"> <div class="testgroup-content-wrapper"> <span class="icon icon-testcase-group"></span> <span class="testgroup-title link-search-content">'+r(s.isRoot?tb_i18n.get("testplan.testgroup.unplanned.name"):s.name)+"</span> </div></li>";return o}},"3HWq49Gv":function(e,t,n){e.exports=function(e){var t,r,o="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),i="",s=n("ytDAhr3u").ColorNames;i+='<div class="edit-wrap"> <input class="add-input form-control" placeholder="'+tb_i18n.get("tag.creator.placeholder")+'" value="'+o(e.name)+'"> <ul class="clearfix"> ';var a=s;if(a)for(var c,l=-1,u=a.length-1;l<u;)i+=' <li class="tag-label tag-label-'+(c=a[l+=1])+'" data-color="'+c+'"> <span class="icon icon-tick icon-white"></span> </li> ';return i+=" </ul> <button class=\"btn btn-primary edit-submit\" data-gta=\"{action: 'added content', type: 'tag', control: 'New Tag'}\"> "+tb_i18n.get("save")+" </button></div>"}},"3LGsbOqB":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=(n("sXU8FVuc"),n("q1tIBJhx")),i=n("TSYQbtd+"),s=n.n(i),a=n("GESwhXbR"),c=n("3eMzznN/"),l=n("tLZJUYWX"),u=function(e){var t=e.dateString;return e.dateIsToday&&"00:00"!=e.timeFormatString?t+" "+e.timeFormatString:t},p=function(e,t){var n,r,o="",i="";return e&&(n=c.formatDate(e,{isUsePref:!0,inShort:!0}),o=u(n)),t&&(r=c.formatDate(t,{isUsePref:!0,inShort:!0}),i=u(r)),n&&r?n.dateString===r.dateString?n.dateTimeString+" - "+r.timeFormatString:o+" - "+i:n?l.get("task.startDate.label",o):r?l.get("task.dueDate.label",i):""},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getDueDateClass=function(){return this.props.dueDate?c.formatDate(this.props.dueDate,{inShort:!0}).dateClass:""},t.prototype.renderIcon=function(){var e=this.props.icon;return e?"string"==typeof e?o.createElement(a.Icon,{name:e,size:12}):e:null},t.prototype.render=function(){var e,t=p(this.props.startDate,this.props.dueDate),n=this.getDueDateClass(),r=this.props,i=r.className,a=r.solid,c=r.withHint,l=s()("time-label label",((e={solid:a,hinted:c,"time-label-important":"overdue"===n,"time-label-warning":"today"===n,"time-label-info":"upcoming"===n,"time-label-normal":"normal"===n||""===n})[""+i]=!!i,e));return o.createElement("span",{className:l,"data-role":"time-label"},this.renderIcon(),t)},t.defaultProps={solid:!0},t}(o.PureComponent);n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p})},"3PHTOBfu":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h;r=n("+2RfZ2TT"),s=n("a+N5u/Cl"),a=n("2qRnoGmE"),o=n("bZr3G77e"),h=n("gh8QIhMV").throwError,i={bilateral:a.WEIBO_HOST+"/2/statuses/bilateral_timeline.json",home:a.WEIBO_HOST+"/2/statuses/home_timeline.json",mentions:a.WEIBO_HOST+"/2/statuses/mentions.json",singleWeibo:a.WEIBO_HOST+"/2/statuses/go",user:a.WEIBO_HOST+"/2/statuses/user_timeline.json",userInfo:a.WEIBO_HOST+"/2/users/show.json"},l=function(e){return e.access_token||h("no access_token"),e.success||e.error||h("no callback function"),e.url?r.ajax({data:{access_token:e.access_token},method:"GET",url:e.url,success:o.wrapSuccess(function(t){var n;return t.error?21300<=(n=t.error_code)&&n<=21399||21501===t.error_code?e.tokenInvalidHandler(t.data.error):e.error(t.error):e.success(t.statuses)}),error:o.wrapError(function(t){return e.error(t)})}):h("no url")},u=function(e){return l(s.extend({url:i.home},e))},d=function(e){return l(s.extend({url:i.user},e))},p=function(e){return l(s.extend({url:i.mentions},e))},c=function(e){return l(s.extend({url:i.bilateral},e))},e.exports={getHome:u,getUser:d,getMentions:p,getBilateral:c}},"3Q/xbIvW":function(e,t,n){e.exports={"policy-modal":"policy-modal__3YPw","disagree-policy-modal":"disagree-policy-modal__3pVz"}},"3Xu1NP0g":function(e,t,n){e.exports={"task-status":"task-status__3bvy"}},"3eOOw3Kj":function(e,t,n){e.exports={"object-archive-status":"object-archive-status__1wQY"}},"3hU7IruY":function(e,t,n){e.exports=function(e){var t,r,o="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),i="",s=n("2qRnoGmE"),a=e.inTeams;if(a)for(var c,l=-1,u=a.length-1;l<u;)i+='<li class="team" data-id="'+(c=a[l+=1])._id+'" data-title="'+o(c.name)+'"> <span class="img-26 pull-left icon ',"default"!=c.type&&c.styleName?i+=""+c.styleName:i+="icon-team-tie",i+='" ',"default"!=c.type&&c.styleColor&&(i+='style="color: '+c.styleColor+'"'),i+=' ></span> <div class="team-info flex-vert flex-center"> <div class="team-name"> '+o(c.name)+" ",s.FEATURES.showMemberCount&&(i+=" ・"+c.hasMembers.length+" "),i+=" ",e.permissions&&e.permissions.teamManage&&(i+=" ",e.isMe?i+=' <button class="quit-from-team btn btn-hover-danger" type ="button" data-id="'+c._id+'"> '+tb_i18n.get("team.mananger.quit")+" </button> ":i+=' <button class="remove-from-team btn btn-hover-danger" type ="button" data-id="'+c._id+'"> '+tb_i18n.get("team.mananger.remove")+" </button> ",i+=" "),i+=" </div> ",c.belongsTo&&(i+=' <p class="team-child muted"> '+(tb_i18n.get("team.belongsTo"),c.belongsTo)+" </p> "),i+=" </div></li>";return!e.isDisabled&&e.permissions&&e.permissions.teamManage&&(i+="<li class=\"add-team\"> <a class=\"add-team-menu-handler\" data-gta=\"{action: 'add member', type: 'org member', control: 'Org Member Info', category: 'team'}\"> <span class=\"icon icon-circle-cross\"></span> "+tb_i18n.get("team.mananger.add")+" </a></li>"),i}},"3kCMucPD":function(e,t,n){e.exports={title:"title__3E_b",priority:"priority__1OUR",executor:"executor__3NEx","flow-status":"flow-status__ky4d","case-type":"case-type__2Dx2",group:"group__1weZ","flow-status__inner":"flow-status__inner__2D7F",dot:"dot__1rHo"}},"3mMqB/0m":function(e,t,n){e.exports=function(e){var t="",r=n("2qRnoGmE");return t+='<ul class="list previewer-menu-list"> ',e.permissions.putFork&&(t+=" <li> <a class=\"copy-handler\" data-gta=\"{action: 'add content', type: 'work', control: 'More Menu'}\"> <span class=\"icon icon-copy\"></span>"+tb_i18n.get("work.menu.copy.file")+" </a> </li> "),t+=" ",e.showShare&&r.FEATURES.thirdShare&&("involves"!==e.parentVisible||e.parentPermissions.putVisible)&&(t+=' <li> <a class="share-work-handler"> <div class="main-mode main-mode-title"> <span class="icon icon-wechat"></span> <span class="mode">'+tb_i18n.get("share.via.wechat")+"</span> ",e.isShared?t+=' <span class="ifClose">'+tb_i18n.get("share.link.open")+"</span> ":t+=' <span class="ifCloseDisabled">'+tb_i18n.get("share.link.closed")+"</span> ",t+=' </div> <div class="main-mode-description"> '+tb_i18n.get("share.via.wechat.description")+" </div> </a> </li> "),t+=" ",e.showInviteLink&&r.FEATURES.qrLinkInvite&&(t+=' <li> <a class="invite-handler"> <div class="main-mode main-mode-title"> <span class="icon icon-share-chain"></span> <span class="mode">'+tb_i18n.get("invite.from.link")+'</span> </div> <div class="main-mode-description"> '+tb_i18n.get("invite.from.link.description")+" </div> </a> </li> "),t+=" ",e.permissions.putMove&&(t+=" <li> <a class=\"move-handler\" data-gta=\"{action: 'move content', type: 'work', control: 'More Menu'}\"> <span class=\"icon icon-file-move2\"></span>"+tb_i18n.get("work.menu.move.file")+" </a> </li> "),t+=" <li> <a class=\"favorite-work-handler\" data-gta=\"{action: 'favourite content', type: 'work', control: 'More Menu'}\"> <span class=\"icon icon-favorite ",e.isFavorite&&(t+="favorited"),t+='"></span>',e.isFavorite?t+=""+tb_i18n.get("unfavorite"):t+=""+tb_i18n.get("favorite")+tb_i18n.get("navigation.work"),t+=" </a> </li> ","activity"!=e.where&&e.permissions.putArchive&&(t+=" <li> ",e.isArchived?t+=" <a class=\"unarchive-handler\" data-gta=\"{action: 'unarchive content', type: 'work', control: 'More Menu'}\"> <span class=\"icon icon-archive\"></span>"+tb_i18n.get("unarchive")+" </a> ":t+=" <a class=\"archive-handler\" data-gta=\"{action: 'archive content', type: 'work', control: 'More Menu'}\"> <span class=\"icon icon-trash\"></span>"+tb_i18n.get("archive")+" </a> ",t+=" </li> "),t+=" ","activity"==e.where&&e.permissions.del&&(t+=" <li> <a class=\"delete-handler\" data-gta=\"{action: 'delete content', type: 'work', control: 'More Menu'}\"> <span class=\"icon icon-trash\"></span>"+tb_i18n.get("previewer.menu.delete.title")+" </a> </li> "),t+=" ",e.canModifyVisibility&&(t+=' <li class="divider"></li> <li> <a class="switch-visible-handler"></a> </li> '),t+="</ul>"}},"3nOnSD6h":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("TSYQbtd+"),a=n.n(s),c=n("a+N5u/Cl"),l=n("Si88ejXw"),u=n.n(l),p=n("UnXYfJ+a"),d=n.n(p),h=n("GESwhXbR"),m=n("dWbDnvg6"),f=n("BsTK5jZO"),g=function(){function e(e,t){this.beforeAdd=function(){return!0},this.afterAdd=function(){},this.beforeRemove=function(){return!0},this.afterRemove=function(){},this.newSet=new Set(e),this.oldSet=new Set(e),t.beforeAdd&&(this.beforeAdd=t.beforeAdd),t.afterAdd&&(this.afterAdd=t.afterAdd),t.beforeRemove&&(this.beforeRemove=t.beforeRemove),t.afterRemove&&(this.afterRemove=t.afterRemove)}return e.prototype.size=function(){return this.newSet.size},e.prototype.add=function(e){return!this.newSet.has(e)&&(!0===this.beforeAdd(e)&&(this.newSet.add(e),this.afterAdd(e),!0))},e.prototype.remove=function(e){return!!this.newSet.has(e)&&(!0===this.beforeRemove(e)&&(this.newSet.delete(e),this.afterRemove(e),!0))},e.prototype.isUncommitted=function(e){return!this.oldSet.has(e)},e.prototype.has=function(e){return this.newSet.has(e)},e.prototype.summarize=function(e){var t=this,n=[],r=[];return this.oldSet.forEach(function(e){t.newSet.has(e)||r.push(e)}),this.newSet.forEach(function(e){t.oldSet.has(e)||n.push(e)}),0===n.length&&0===r.length?null:e?{all:Array.from(this.newSet)}:{additions:n,removals:r}},e.prototype.clear=function(){this.newSet.clear(),this.oldSet.clear()},e.prototype.reset=function(){var e=this.summarize();if(e){for(var t=e.additions,n=e.removals,r=0;r<t.length;r++)this.afterRemove(t[r]);for(r=0;r<n.length;r++)this.afterAdd(n[r])}this.newSet=new Set(Array.from(this.oldSet))},e.prototype.commit=function(){this.oldSet=new Set(this.newSet)},e}();function v(e,t){return t?e+":"+t:e}function b(e){var t=r.f(e.split(":"),2);return{id:t[0],type:t[1]}}var y=function(){function e(e,t,n,r){var o=this;void 0===r&&(r={}),this.perms=t,this.me=n,this.ensurePermission=function(e,t,n){var r=v(e,t);return"unselect"!==n||(o.stagedEdits.isUncommitted(r)||k(e,o.me,{permsDel:o.perms.del,involverCount:o.stagedEdits.size(),isInCreationMode:o.isInCreationMode,executorId:o.executorId,allowRemoveLast:o.allowRemoveLast}))};var i=e.map(function(e){return"string"==typeof e?v(e,"user"):v(e.id,e.type)}),s=r.onAddInvolver,a=r.onRemoveInvolver;this.stagedEdits=new g(i,{beforeAdd:function(e){var t=b(e),n=t.id,r=t.type;return o.ensurePermission(n,r,"select")},afterAdd:s&&function(e){var t=b(e),n=t.id,r=t.type;s(n,r)},beforeRemove:function(e){var t=b(e),n=t.id,r=t.type;return o.ensurePermission(n,r,"unselect")},afterRemove:a&&function(e){var t=b(e),n=t.id,r=t.type;a(n,r)}}),this.executorId=r.executorId,this.isInCreationMode=r.isInCreationMode,this.allowRemoveLast=r.allowRemoveLast,this.involversCache=new Map}return e.prototype.clear=function(){this.stagedEdits.clear(),this.involversCache.clear()},e.prototype.reset=function(){this.stagedEdits.reset(),this.involversCache.clear()},e.prototype.addInvolver=function(e,t,n){var r=v(e,t),o=this.stagedEdits.add(r);return n&&this.involversCache.set(r,n),o},e.prototype.removeInvolver=function(e,t,n){var r=v(e,t),o=this.stagedEdits.remove(r);return n&&this.involversCache.set(r,n),o},e.prototype.isAddedInvolver=function(e,t){var n=v(e,t);return this.stagedEdits.has(n)},e.prototype.getInvolver=function(e,t){var n=t?v(e,t):e;return this.involversCache.get(n)},e.prototype.preparePayload=function(e){var t=this,n=this.stagedEdits.summarize(e);if(!n)return null;if(e)return n.all.map(b);for(var r=n,o=r.additions,i=r.removals,s=[],a=[],c=[],l=[],u=0;u<o.length;u++){var p=b(o[u]);switch(p.type){case"team":s.push(p.id);break;case"group":a.push(p.id);break;case"user":c.push(p.id);break;default:l.push(o[u])}}var d=i.map(function(e){return b(e).id}),h={};if(s.length>0&&Object.assign(h,{involveTeams:s}),a.length>0&&Object.assign(h,{involveGroups:a}),c.length>0&&Object.assign(h,{addInvolvers:c}),d.length>0&&Object.assign(h,{delInvolvers:d}),l.length>0){var m=Boolean(l.find(function(e){return f.InvolverInput.allProjectMembers.check(t.getInvolver(e))}));m&&Object.assign(h,{addAllProjectMembers:m})}return h},e}();function k(e,t,n){var r=e===t;return(!n.isInCreationMode||!r)&&(e!==n.executorId&&(!(!n.permsDel&&!r)&&!(1===n.involverCount&&!n.allowRemoveLast)))}var _=n("sa1Ed382"),w=n("XG2lpVOM"),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refRoot=function(e){t.root=e},t.onClick=function(e){t.props.onClick&&(e.stopPropagation(),t.props.onClick(t.root,t.props.id,t.props.type,t.props.isEllipsis))},t.handleRemoveMember=function(e){t.props.onRemoveMember&&(e.stopPropagation(),t.props.onRemoveMember(t.props.id,t.props.type))},t.getTooltipTitle=function(){var e=t.props.name;return t.props.isEllipsis?e=i.get("member.involve.folder.tooltip"):(t.props.isCreator&&(e=t.props.name+""+i.get("comma")+i.get("creator")),t.props.isExecutor&&(e=t.props.name+""+i.get("comma")+i.get("executor"))),e},t}return r.d(t,e),t.prototype.renderRemoveHandler=function(){return!this.props.isEllipsis&&this.props.isRemovable&&o.createElement("div",{className:w["remove-member-handler"],onClick:this.handleRemoveMember},o.createElement(h.Icon,{name:"remove",className:w["remove-icon"],size:12}))},t.prototype.renderMask=function(){return this.props.isEllipsis&&o.createElement("div",{className:w["member-ellipsis-mask"]},o.createElement(h.Icon,{name:"more",size:14}))},t.prototype.renderAvatar=function(){var e;switch(this.props.type){case"user":e=o.createElement(m.a,{src:this.props.avatar.src,size:"small"});break;case"team":case"group":case"custom":e=o.createElement(m.c,r.a({},this.props.avatar,{circleSize:24}));break;default:e=null}return o.createElement("div",{className:w["member-avatar"],ref:this.refRoot,onClick:this.onClick},e,this.renderMask(),this.renderRemoveHandler())},t.prototype.render=function(){return o.createElement(h.Tooltip,{title:this.getTooltipTitle()},this.renderAvatar())},t}(o.PureComponent),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=!!Object(c.isUndefined)(this.props.withTransition)||this.props.withTransition;return o.createElement(u.a,r.a({},this.props,{classNames:"member-involve-icon",enter:e,exit:e,timeout:{enter:180,exit:240}}))},t}(o.PureComponent),E=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOpenMenu=function(e){var t=n.props.onOpenMenu;"function"==typeof t&&t(e)},n.handleRemoveMember=function(e,t){n.getMemberIsRemovable(e)&&n.props.onRemoveMember&&n.props.onRemoveMember(e,t)},n.getMemberIsRemovable=function(e){return k(e,_.user.get("_id"),{permsDel:n.props.canDeleteInvolver,involverCount:n.props.members.length,isInCreationMode:n.props.inCreate,executorId:n.props.executorId})},n.onUserHelperShown=function(){_.gta.event({action:"show tips",type:"followers",method:"hover",control:"question mark"})},n.onMemberClick=function(e,t,r,o){o?n.setState({folded:!1}):n.props.onMemberClick&&n.props.onMemberClick(e,t,r)},n.inheritMember=function(){Object(c.isFunction)(n.props.inheritMembers)&&n.props.inheritMembers(),n.setState({confirmInheritMembers:!0})},n.state={folded:!0,inCreate:!1},n}return r.d(t,e),t.prototype.getCanAddMember=function(){return this.props.canPutInvolver||this.props.inCreate},t.prototype.renderAddHandler=function(){var e=this.props,t=e.MemberMenuWrapper,n=e.members,r=e.inviteShowed,s=e.inviteMoreMember;if(!this.getCanAddMember())return null;var a="add-involvement-handler "+w["add-handler"],c=o.createElement(h.Tooltip,{key:"static",title:i.get("member.involve.add")},o.createElement(h.IconButton,{name:"circle-cross",className:a,size:"large",onClick:this.handleOpenMenu}));return t?o.createElement(t,{key:"static",involvers:n,inviteShowed:r,inviteMoreMember:s},c):c},t.prototype.renderItems=function(){var e=this,t=this.props,n=t.foldLimit,i=t.members,s=this.state.folded;return(s?i.slice(0,n):i).map(function(t,i){var a=s&&i===n-1,c=t.id,l=o.createElement(C,r.a({},t,{isCreator:c===e.props.creatorId,isExecutor:c===e.props.executorId,isRemovable:e.getMemberIsRemovable(c),onClick:e.onMemberClick,isEllipsis:a,onRemoveMember:e.handleRemoveMember}));return o.createElement(S,{key:c,withTransition:e.props.withTransition},l)}).concat(this.renderAddHandler()||[])},t.prototype.renderUserHelper=function(){return!_.user.isExperiencedUser()&&o.createElement(h.Tooltip,{placement:"right",title:i.get("member.involve.tip")},o.createElement(h.Icon,{style:t.userHelperStyle,name:"help",className:"icon",size:14,onMouseOver:this.onUserHelperShown}))},t.prototype.renderHeader=function(){if(!this.props.showTitle)return null;var e=this.props.members.length>0?i.get("member.involve.count",this.props.members.length):i.get("member.involve");return o.createElement("div",{className:w["member-involve-header"]},o.createElement("span",null,e),this.renderUserHelper(),this.renderExpectingInheritedObject())},t.prototype.renderExpectingInheritedObject=function(){var e=this.props.expectingInheritedObjectName;return!(!e||this.state.confirmInheritMembers)&&o.createElement("span",{className:"inherit-object"},o.createElement("span",{className:"divider"}),i.get("member.inherit.do.inherit"),o.createElement("span",{className:"object-name"},e),i.get("member.inherit.all.involvers"),o.createElement(h.TextButton,{color:"blue",onClick:this.inheritMember},i.get("member.invite.confirm")))},t.prototype.renderList=function(){return o.createElement(d.a,{className:"member-involve-list",component:"ul"},this.renderItems())},t.prototype.renderPlaceholder=function(){return!this.getCanAddMember()&&0===this.props.members.length&&o.createElement("p",{className:w.placeholder},i.get("member.involve.none"))},t.prototype.render=function(){var e=a()(w["member-involve"],this.props.className);return o.createElement("div",{className:e},this.renderHeader(),this.renderList(),this.renderPlaceholder())},t.defaultProps={residents:[],withTransition:!0,canDeleteInvolver:!1,canPutInvolver:!1,foldLimit:16,showTitle:!0},t.userHelperStyle={height:"14px",marginLeft:"4px"},t}(o.PureComponent),T=n("4c1CS0b3");function I(e,t){void 0===t&&(t={});var n=e.canToggleInvolver||function(t){var n=t.id,r=t.type,o=t.checked?"unselect":"select";return e.involverMgmt.ensurePermission(n,r,o)};return function(s){var a=e.loadSelected?T.Observable.defer(e.loadSelected):T.Observable.of(s.involvers||[]),c=(s.involvers,s.children),l=s.onOpen,u=s.onHide,p=r.g(s,["involvers","children","onOpen","onHide"]),d=f.InvolverInput.createInvolverMenu({selected$:a,recommended$:T.Observable.defer(e.loadRecommend),search:e.search,loadChildren:e.loadChildren,canToggle:n,genId:e.genId,onOpen:l,onHide:u}),h=r.a({disabled:!1,inviteShowed:!1,selectedTitle:i.get("member.involve"),onCommit:e.commit,involverMgmt:e.involverMgmt},t,p);return o.createElement(d,r.a({},h),c)}}n.d(t,"MemberInvolve",function(){return E}),n.d(t,"InvolverType",function(){}),n.d(t,"Involver",function(){}),n.d(t,"UserInvolver",function(){}),n.d(t,"TeamInvolver",function(){}),n.d(t,"GroupInvolver",function(){}),n.d(t,"CustomInvolver",function(){}),n.d(t,"MemberAvatar",function(){return C}),n.d(t,"createMemberMenuWrapper",function(){return I}),n.d(t,"MemberMenuWrapperClass",function(){}),n.d(t,"Payload",function(){}),n.d(t,"PayloadDiff",function(){}),n.d(t,"PayloadAll",function(){}),n.d(t,"Perms",function(){}),n.d(t,"InvolverManagement",function(){return y}),n.d(t,"InvolverManagementOptions",function(){}),n.d(t,"InvolverId",function(){}),n.d(t,"InvolverIdInfo",function(){}),n.d(t,"encodeId",function(){return v}),n.d(t,"decodeId",function(){return b}),n("XG2lpVOM")},"3pHTkdzH":function(e,t,n){e.exports={item:"item__2TTv","drag-handle":"drag-handle__2A2D",dragged:"dragged__31tJ"}},"3pNcGhrp":function(e,t,n){e.exports=n.p+"images/f_shenma@2x.99fc2e91.png"},"3r1shquw":function(e,t,n){e.exports={"task-note":"task-note__HDJR","task-note__inner":"task-note__inner__2pxg"}},"43qOt/EN":function(e,t,n){"use strict";n.r(t),n.d(t,"LocationComponent",function(){return l});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("tLZJUYWX"),c=n("GESwhXbR"),l=(n("JDFLms7U"),function(e){function t(t){var n=e.call(this,t)||this;return n.onClickEdit=function(){n.setState(r.a({},n.state,{isEditing:!0}))},n.onClickCancel=function(){n.setState(r.a({},n.state,{isEditing:!1,location:n.props.location}))},n.onChange=function(e){var t=e.target.value;if(n.props.isRequired&&""===t)return n.setState(r.a({},n.state,{location:t,errorMsg:a.get("required.field.empty.error")}));n.setState(r.a({},n.state,{location:t,errorMsg:""}))},n.onClickSave=function(){var e=n.state.location;n.props.onClickSave(e),n.setState(r.a({},n.state,{isEditing:!1,location:e}))},n.state={location:n.props.location,isEditing:!1},n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState(r.a({},this.state,{isEditing:!1,location:e.location}))},t.prototype.renderError=function(){var e=this.state.errorMsg;return e&&o.createElement(o.Fragment,null,o.createElement(c.Icon,{name:"circle-remove"}),o.createElement("span",{className:"error-msg"},e))},t.prototype.renderHandler=function(){return o.createElement("div",{className:"btn-handlers text-right"},o.createElement(c.TextButton,{className:"btn-cancel",onClick:this.onClickCancel},a.get("cancel")),o.createElement(c.Button,{className:"btn btn-primary btn-save",onClick:this.onClickSave,size:"small",disabled:!!this.state.errorMsg},a.get("save")))},t.prototype.renderEditContent=function(){var e=s()("form-control",{"has-error":!!this.state.errorMsg});return o.createElement("div",{className:"location-isEditing-container"},o.createElement("input",{className:e,value:this.state.location,onChange:this.onChange,placeholder:a.get("to.be.added"),autoFocus:!0}),o.createElement("div",{className:"handler-wrapper"},o.createElement("div",{className:"error-hint flex flex-vcenter"},this.renderError()),this.renderHandler()))},t.prototype.renderContent=function(){var e=this.props,t=e.location,n=e.hasPermission,r=t||a.get("to.be.added"),i=s()("event-location-content",{"has-content":!!t,"cursor-not-allowed":!n});return n?o.createElement("div",{className:i,onClick:this.onClickEdit},o.createElement(c.Tooltip,{title:a.get("clickToEdit")},r)):o.createElement("div",{className:i},r)},t.prototype.renderTitle=function(){return o.createElement("div",{className:"detail-infos-aside"},o.createElement(c.Icon,{name:"location"}),o.createElement("span",null,a.get("event.creator.location.placeholder")))},t.prototype.render=function(){var e=this.state.isEditing;return o.createElement("div",{className:"event-location-container flex"},this.renderTitle(),o.createElement("div",{className:"detail-infos-content flex-space"},e?this.renderEditContent():this.renderContent()))},t}(o.PureComponent))},"44qv6nXV":function(e,t,n){var r,o,i,s;i=n("a+N5u/Cl"),r=n("q1z7EYOi"),s=n("sa1Ed382"),o=n("5FgezBxu"),e.exports=function(){function e(e){var t;this.context=e,window.clientEvents=i.extend({},r.Events),window.tbClientHandlers=new o(this.context),(t=function(){var e,t,n;return e=(n=s.user).get("normal")+n.get("private"),null!=(t=window.WebExtensionWin10)&&"function"==typeof t.messageCount?t.messageCount(e):void 0})(),this.context.listenTo(s.user,"change:normal change:private",t)}return e.prototype.destroy=function(){return delete window.clientEvents,window.tbClientHandlers.destroy(),delete window.tbClientHandlers},e}()},"45JlVgVP":function(e,t,n){e.exports={"task-like-count":"task-like-count__3zsK","task-like-count__inner":"task-like-count__inner__2f5a"}},"49UbZ8Y7":function(e,t,n){"use strict";var r=n("qmk1p/3o");n.d(t,"ProjectGridGroup",function(){return r.a});var o=n("ZwFhTFL5");n.o(o,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return o.AbstractPortal}),n.o(o,"getProjectGroupComponent")&&n.d(t,"getProjectGroupComponent",function(){return o.getProjectGroupComponent}),n.o(o,"getProjectGroupProps")&&n.d(t,"getProjectGroupProps",function(){return o.getProjectGroupProps}),n.o(o,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return o.getSuspendedMsg}),n.o(o,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return o.verifyProjectPayment})},"4C11Q7Si":function(e,t,n){e.exports={"cell-title":"cell-title__3kDO","cell-title__inner":"cell-title__inner__3bJM","cell-title__sorting-badge":"cell-title__sorting-badge__1Hvk"}},"4GkEO0HF":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R,D,L,z,A,V,F,B=function(e,t){return function(){return e.apply(t,arguments)}},U={}.hasOwnProperty,$=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};M=n("a+N5u/Cl"),F=n("sa1Ed382"),S=n("GESwhXbR").Toast,s=n("2qRnoGmE"),b=n("HYobN8SQ"),L=n("RLD3BeS/"),E=L.ToastMessageWithUrl,T=L.ToastWithObject,V=n("s0r7VfKc").default,m=n("wu4EEviu"),u=n("HDJEOtNh").OrganizationAccess,d=n("77NnVLwu"),g=n("EjIl6N9o"),w=n("FoX6irlC"),f=n("q6u3XLOb"),h=n("nL4olqOP"),_=n("ioaOqjIU"),C=n("gBe2F1Rz"),p=n("6XSa3ffj"),v=n("WieTJvx5"),I=n("+h7VEZku").VisibilityController,k=n("PSYzXKAW").TaskCopy,y=n("Acy4HZ1V").TaskConvert,D=n("H72dUcNY").projectFilter,P=n("zQgHgypC").getScrumTaskUrl,j=n("UHEHxqn1").getScenarioTaskRedirectUrl,c=n("fGXGG6UZ"),z=n("RTj5z5YX"),i=z.CommonShare,l=z.InviteLink,A=n("bvmrLhnu"),x=A.hasScrumAppEnabled,N=A.isSprintEnabled,O=A.isTaskflowEnabled,R=A.isTasklistIgnored,o=n("z/JLNq4z"),a=n("DnU0YLHy"),r=n("k3kB6Jq4"),e.exports=function(e){function t(){return this.extendStatusFilter=B(this.extendStatusFilter,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)U.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.viewName="TaskMenuView",t.prototype.className="task-menu-view",t.prototype.popoverTitle="",t.prototype.events={"click .copy-task-handler":"enterCopySubMenu","click .add-pre-dependency-task":"addPreTaskDependency","click .add-post-dependency-task":"addPostTaskDependency","click .convert-subtask-handler":"enterConvertSubMenu","click .change-belong-handler":"enterChangeBelongSubMenu","click .favorite-task-handler":"favoriteTask","click .move-task-handler":"enterMoveSubMenu","click .share-task-handler":"shareTask","click .archive-task-handler":"enterArchiveSubMenu","submit .archive-form":"submitArchive","click .open-task-tab":"openTaskTab","click .invite-handler":"enterInviteSubMenu"},t.prototype.initialize=function(e){var n,r;return this.popoverTitle=tb_i18n.get("task.menu.title"),this.localCache=b.namespace("temp").namespace("task_menu"),this.localCacheId=F.user.id,this.taskModel=e.taskModel,this._projectId=e.taskModel.get("_projectId"),this.projectsCollection=h.get(0),this.addPreTaskDependencyHandler=e.addPreTaskDependency,this.addPostTaskDependencyHandler=e.addPostTaskDependency,this.isShared=e.isShared,this.shareRefreshHandler=(r=this,function(e){return r.isShared=e.isShared}),this.projectModel=this.projectsCollection.get(this._projectId),this._organizationId=this.taskModel.get("_organizationId")||(null!=(n=this.projectModel)?n.get("_organizationId"):void 0),this.listen(),t.__super__.initialize.apply(this,arguments)},t.prototype.listen=function(){return m.on(":refresh:shareStatus/"+this.taskModel.id,this.shareRefreshHandler),this.listenTo(this.taskModel,"change:visible",this.renderVisible)},t.prototype.render=function(){var e,t,n,r;return this.unmountReactViews(),r=this.options.taskModel,n=this.options.sprintModel,(t=r.hasPermissions("put","put.move","put.archive","put.transform","dependency.manage")).putMove=t.putMove&&!("complete"===(null!=n?n.get("status"):void 0)),t.putTransform=t.putTransform&&!("complete"===(null!=n?n.get("status"):void 0)),e=M.extend(r.toJSON(),{permissions:t,isShared:this.isShared,canModifyVisibility:r.canModifyVisibility(),isSubtask:this.options.taskModel.isSubtask(),showShare:!!this._projectId,showInviteLink:!!this._projectId&&this.projectModel.hasPermission("post.member")&&Boolean(this._organizationId&&u.canAddOuterMember(this._organizationId))}),this.$el.html(o(e)),this.$visibleSwitchers=this.$(".switch-visible-handler"),this.$taskCopyWrapper=this.$(".copy-task-node"),this.$taskConvertSubTaskWrapper=this.$(".convert-subtask-node"),this.$ChangeBelongTask=this.$(".change-belong-node"),this._projectId&&this.setupPlugins({_projectId:this._projectId}),this.renderVisible(),this.assembleData(),this.assembleMoveTaskData(),this.assembleForkTaskData(),this},t.prototype.renderVisible=function(){if(this.taskModel.canModifyVisibility())return this.requestReactView(this.$visibleSwitchers.get(0),I,{visibility:this.taskModel.get("visible"),onChange:this.switchVisible.bind(this)})},t.prototype.fetchInviteLink=function(){return V.fetch.get("api/tasks/"+this.taskModel.id+"/invitelink").subscribe()},t.prototype.assembleData=function(){return this.localCache(this.localCacheId)||{}},t.prototype.assembleForkTaskData=function(){var e,t,n,r,o;if(e=(r=this.options.taskModel.toJSON())._projectId,n=r._tasklistId,t=r._stageId,this.forkProjectModel=this.projectsCollection.get(e),this.forkProjectModel&&!this.forkProjectModel.isTasklistIgnored())return this.forkTasklistModel=w.find(n),this.forkTasklistModel||_.fetch(e,{success:(o=this,function(e){return o.forkTasklistModel=e.models[0]})}),this.forkStageModel=g.find(t)},t.prototype.assembleMoveTaskData=function(){var e,t,n,r,o,i,s,a;if(r=this.localCache(this.localCacheId)||{},(null!=(i=this.projectsCollection.get(r._projectId))?i.getRoleScope():void 0)>=0&&i.canUseTaskFeature()&&D(this._organizationId)(null!=i?i.toJSON():void 0)||(r=this.options.taskModel.toJSON()),e=r._projectId,n=r._tasklistId,t=r._stageId,e)return a=this,o=function(){return a.tasklistModel=w.find(n),a.tasklistModel||_.fetch(e,{success:function(e){return a.tasklistModel=e.models[0]}}),a.stageModel=g.find(t)},null!=(s=this.projectModelSub)&&s.unsubscribe(),this.projectModelSub=this.subscribe(d.fetch$(e).do(function(e){return function(t){if(e.projectModel=t,!e.projectModel.isTasklistIgnored())return o()}}(this)))},t.prototype.enterArchiveSubMenu=function(){var e;return this.enterSubMenu(tb_i18n.get("archive"),(e=this,function(){return e.$el.html(r())})),this.gtaHandler({action:"archive content"}),this},t.prototype.enterCopySubMenu=function(){var e,t,n;return this.forkOrMove="fork",this.requestReactView(this.$taskCopyWrapper.get(0),k,{modalOpened:!0,project:null!=(e=this.forkProjectModel)?e.toJSON():void 0,task:this.options.taskModel.toJSON(),tasklist:null!=(t=this.forkTasklistModel)?t.toJSON():void 0,stage:null!=(n=this.forkStageModel)?n.toJSON():void 0,showLinkOptions:this.options.taskModel.hasPermissions("objectlink.post"),organizationId:this._organizationId,tips:"",onSubmit:this.submitCopy.bind(this)},{redux:!0}),this.gtaHandler({action:"add content"})},t.prototype.addPreTaskDependency=function(){return"function"==typeof this.addPreTaskDependencyHandler&&this.addPreTaskDependencyHandler(),this.hide()},t.prototype.addPostTaskDependency=function(){return"function"==typeof this.addPostTaskDependencyHandler&&this.addPostTaskDependencyHandler(),this.hide()},t.prototype.onComplete=function(){var e;return null!=(e=c.views().pop())?e.remove():void 0},t.prototype.enterConvertSubMenu=function(){return this.gtaHandler({action:"convert subtask",page:"Tasks Page"}),this.requestReactView(this.$taskConvertSubTaskWrapper.get(0),y,{title:tb_i18n.get("task.menu.convert.subtask"),type:"main-to-sub",modalOpened:!0,organizationId:this._organizationId,taskId:this.taskModel.get("_id"),onComplete:this.onComplete})},t.prototype.enterChangeBelongSubMenu=function(){return this.gtaHandler({action:"change task",page:"Tasks Page"}),this.requestReactView(this.$ChangeBelongTask.get(0),y,{title:tb_i18n.get("task.menu.change.belong"),type:"sub-to-sub",modalOpened:!0,organizationId:this._organizationId,projectId:this._projectId,taskId:this.taskModel.get("_id"),onComplete:this.onComplete})},t.prototype.extendStatusFilter=function(e,t,n){var r;if(e&&O(e))return r=this.options.taskModel,(null!=t?t._id:void 0)===r.get("_scenariofieldconfigId")?-1===n.rejectStatusIds.indexOf(r.get("_taskflowstatusId")):r.getAcceptedStatusKinds().indexOf(n.kind)>-1},t.prototype.enterMoveSubMenu=function(){var e,t,n,r,o,i,s,c,l,u;return this.forkOrMove="move",l=(t=this.options.taskModel.isSubtask())?tb_i18n.get("subtask.move.and.convert"):tb_i18n.get("moveTo"),this.$el.html(a({title:l})),n={projectModel:this.projectModel,tasklistModel:this.tasklistModel,stageModel:this.stageModel,optionalType:"scenarioConfigs",withDefaultProject:!0,organizationId:this._organizationId,tips:tb_i18n.get("task.menu.move.tips"),showLinkOptions:t&&this.options.taskModel.hasPermissions("objectlink.post"),onUpdate:this.updateCache.bind(this),success:this.submitMove.bind(this),extendStatusFilter:this.extendStatusFilter},(null!=(r=this.projectModel)?r.isTaskflowEnabled():void 0)&&(s=(o=this.getConfigAndStatus()).scenarioFieldConfig,c=o.taskflowStatus,M.extend(n,{scenarioFieldConfig:s,taskflowStatus:c})),(null!=(i=this.projectModel)?i.isSprintEnabled():void 0)&&M.extend(n,{sprintModel:this.getSprintModel()}),e=this.$(".task-menu-stage-selector"),this.enterSubMenu(l,(u=this,function(){var t;return null!=(t=u.stageSelectorView)&&t.remove(),u.stageSelectorView=u.requestSubView(v,n),e.html(u.stageSelectorView.$el)})),this.gtaHandler({action:t?"convert subtask":"move content"})},t.prototype.getConfigAndStatus=function(e){var t,n,r,o,i,s,a;return(null!=(n=(t=this.localCache(this.localCacheId)||{}).scenarioFieldConfig)?n._projectId:void 0)===this.projectModel.id?(i=n,r=t._taskflowstatusId):(i=null!=(o=this.options.scenarioFieldConfigModel)?o.toJSON():void 0,r=this.options.taskModel.get("_taskflowstatusId")),s=(a=(null!=i?i.taskflowstatuses:void 0)||[]).find(function(e){return e._id===r}),e&&-1===e.indexOf(null!=s?s.kind:void 0)&&(s=a.find(function(t){var n;return n=t.kind,$.call(e,n)>=0})),{scenarioFieldConfig:i,taskflowStatus:s}},t.prototype.getSprintModel=function(){var e;return(e=this.localCache(this.localCacheId)||{}).sprintModel&&new f(e.sprintModel)},t.prototype.returnMainMenu=function(){var e;return null!=(e=this.stageSelectorView)&&e.remove(),this.unmountReact(this.el),t.__super__.returnMainMenu.apply(this,arguments)},t.prototype.favoriteTask=function(){var e,t;return e=this.options.taskModel.get("isFavorite"),this.options.taskModel[e?"unFavorite":"doFavorite"]({success:(t=this,function(n){var r;return t.options.taskModel.set("isFavorite",n.isFavorite),t.render(),!n.isFavorite&&t.options.onUnfavorite&&("function"==typeof(r=t.options).onUnfavorite&&r.onUnfavorite(t.options.taskModel.get("_id")),t.parentView.close()),t.gtaHandler({action:"favourite content",category:e?"off":"on"})})}),this},t.prototype.shareTask=function(){var e;return this.gtaHandler({action:"share content"}),this.enterSubMenu(tb_i18n.get("share.via.wechat"),(e=this,function(){return e.requestReactView(e.el,i,{objectType:"task",model:e.options.taskModel})})),this.gtaHandler({action:"share content"}),this},t.prototype.enterInviteSubMenu=function(){var e;return this.gtaHandler({action:"invite project member"}),this.enterSubMenu(tb_i18n.get("invite.from.link"),(e=this,function(){return e.requestReactView(e.el,l,{objectType:"task",objectId:e.taskModel.id})})),this},t.prototype.switchVisible=function(e){var t;return t="involves"===e?"on":"off",this.options.taskModel.saveAttr("visible",e),this.gtaHandler({action:"toggle visible",category:t})},t.prototype.submitCopy=function(e){var t,n,r,o,i,s,a;return n=(a=e.taskLocatorData).selectedProject,t={doLink:e.doLink,doLinked:e.doLinked,content:e.content,customfieldIds:e.customfieldIds,copyFields:e.copyFields},n&&O(n)?this.submitByStatus({_tasklistId:null!=(r=a.selectedTasklist)?r._id:void 0,_taskflowstatusId:null!=(o=a.selectedTaskflowStatus)?o._id:void 0,_scenariofieldconfigId:null!=(i=a.selectedScenarioField)?i._id:void 0,_sprintId:null!=(s=a.selectedSprint)?s._id:void 0,hasScrumAppEnabled:x(n),isTasklistIgnored:R(n),isSprintEnabled:N(n),attrs:t}):this.submitByStage({project:n,stage:a.selectedStage,attrs:t})},t.prototype.submitMove=function(e){var t,n,r,o,i,s,a;return o=e.projectModel,a=e.stageModel,t=e.doLink,r=e.doLinked,n=this.options.taskModel.isSubtask()?{doLink:t,doLinked:r,doTransform:!0}:{},(null!=o?o.isTaskflowEnabled():void 0)?this.submitByStatus({_projectId:o.get("_id"),_sprintId:null!=(i=e.sprintModel)?i.id:void 0,_tasklistId:null!=(s=e.tasklistModel)?s.id:void 0,_taskflowstatusId:null!=e?e._taskflowstatusId:void 0,_scenariofieldconfigId:null!=e?e._scenariofieldconfigId:void 0,hasScrumAppEnabled:o.hasScrumAppEnabled(),isTasklistIgnored:o.isTasklistIgnored(),isSprintEnabled:o.isSprintEnabled(),attrs:n}):this.submitByStage({project:null!=o?o.toJSON():void 0,stage:null!=a?a.toJSON():void 0,attrs:n})},t.prototype.submitByStage=function(e){var t,n,r,o,i,s,a,c;return o=e.project,i=e.stage,t=e.attrs,s=this.options.taskModel,"move"!==this.forkOrMove||s.isSubtask()||(null!=i?i._id:void 0)!==s.get("_stageId")?(null!=i?i.isLocked:void 0)&&!s.isSubtaskDone()?(n="fork"===this.forkOrMove?tb_i18n.get("task.menu.fork.uncomplete"):tb_i18n.get("task.menu.move.uncomplete"),void S.error(n)):(t=M.extend({},t,{_organizationId:(null!=o?o._organizationId:void 0)||this._organizationId}),r=this.forkOrMove,a=this.options.taskModel.get("content"),s.forkOrMove(this.forkOrMove,null!=i?i._id:void 0,{attrs:t,success:(c=this,function(e){var t;if(c.forkOrMoveSuccessCallback(e,r,a),c.el)return"fork"===c.forkOrMove?i&&null!=(t=C.find(i._id))&&t.add(e):c.options.taskModel.set(e),c.hide()}),error:this.forkOrMoveErrorCallback.bind(this,r)})):this.hide()},t.prototype.submitByStatus=function(e){var t,n,r,o,i,s,a,c,l,u,p,d,h,m,f;return t=e._projectId,o=e._taskflowstatusId,n=e._scenariofieldconfigId,r=e._sprintId,i=e._tasklistId,l=e.hasScrumAppEnabled,p=e.isTasklistIgnored,u=e.isSprintEnabled,s=e.attrs,c=this.forkOrMove,m=this.options.taskModel.get("content"),a={_scenariofieldconfigId:n},p||M.extend(a,{_projectId:t,_tasklistId:i}),u&&(r=r||null,M.extend(a,{_sprintId:r})),s=M.extend(a,s),h={hasScrumAppEnabled:l},d={success:(f=this,function(e){return f.forkOrMoveSuccessCallback(e,c,m,h)}),error:this.forkOrMoveErrorCallback.bind(this,c),attrs:s},"fork"===this.forkOrMove?this.options.taskModel.forkByStatus(o,d):this.options.taskModel.moveByStatus(o,d)},t.prototype.forkOrMoveSuccessCallback=function(e,t,n,r){var o,i,s,a,c,l;if(null==r&&(r={}),c=function(){switch(t){case"fork":return tb_i18n.get("task.menu.copy.success");default:return tb_i18n.get("task.menu.move.success")}}(),o=(e=("function"==typeof e.toJSON?e.toJSON():void 0)||e)._id,i=r.hasScrumAppEnabled,e._projectId?i?(s=j(e._scenariofieldconfigId,o),l="/project/"+e._projectId+"/"+s):(a=P(e._tasklistId,o),l="/project/"+e._projectId+"/"+a):l="/task/"+o,E.success({messageTitle:c,url:l,urlTitle:n}),this.el)return"fork"===t?this.gtaHandler({action:"added content"}):this.gtaHandler({action:"moved content"}),this.hide()},t.prototype.forkOrMoveErrorCallback=function(e){var t;return t="fork"===e?tb_i18n.get("task.menu.copy.fail"):tb_i18n.get("task.menu.move.fail"),S.error(t)},t.prototype.submitArchive=function(e){var t;return e.preventDefault(),this.options.taskModel.archive({success:(t=this,function(){return T.archive(),t.gtaHandler({action:"archive content"}),t.hide()})}),this},t.prototype.openTaskTab=function(){return window.open(s.HOST+"/task/"+this.taskModel.id+"?full-screen")},t.prototype.updateCache=function(e){var t;return null==e&&(e={}),this.projectModel=e.projectModel,this.sprintModel=e.sprintModel,this.tasklistModel=e.tasklistModel,this.stageModel=e.stageModel,this.scenarioFieldConfig=e.scenarioFieldConfig,this._taskflowstatusId=e._taskflowstatusId,this.cacheData(),t="fork"===this.forkOrMove?"add content":"move content",this.gtaHandler({action:t})},t.prototype.cacheData=function(){var e,t,n,r;return e={_projectId:null!=(t=this.projectModel)?t.get("_id"):void 0,_stageId:null!=(n=this.stageModel)?n.get("_id"):void 0,_tasklistId:null!=(r=this.tasklistModel)?r.get("_id"):void 0,_taskflowstatusId:this._taskflowstatusId,scenarioFieldConfig:this.scenarioFieldConfig,sprintModel:this.sprintModel},this.localCache(this.localCacheId,e),this},t.prototype.gtaHandler=function(e){return e=M.extend({control:"More Menu",type:this.options.taskModel.isSubtask()?"subtask":"task",series:this.options.taskModel.get("ancestorIds").length},e),F.gta.event(e)},t.prototype.unmountReactViews=function(){return this.$visibleSwitchers&&this.unmountReact(this.$visibleSwitchers.get(0)),this.$taskCopyWrapper&&this.unmountReact(this.$taskCopyWrapper.get(0)),this.$taskConvertSubTaskWrapper&&this.unmountReact(this.$taskConvertSubTaskWrapper.get(0)),this.$ChangeBelongTask&&this.unmountReact(this.$ChangeBelongTask.get(0)),this.unmountReact(this.el)},t.prototype.onHidden=function(){return this.unmountReactViews(),t.__super__.onHidden.apply(this,arguments)},t.prototype.remove=function(){return m.off(":refresh:shareStatus/"+this.taskModel.id,this.shareRefreshHandler),t.__super__.remove.apply(this,arguments)},t}()},"4JRuWEI1":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="<header> "+r(e.title)+"</header>",i=e.objects;if(i)for(var s,a=-1,c=i.length-1;a<c;){o+='<li class="link" data-id="'+r((s=i[a+=1])._id)+'" data-linkedid="'+r(s.data.guid)+'" data-token="'+r(s.data.token)+'"> <div class="link-head"> <div class="link-icon-wrap"> <span class="icon icon-evernote"></span> </div> <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main"> <span class="title-name" title="'+r(s.data.title)+'"> '+r(s.data.title)+" </span> </div> ";var l=s.createTime,u=l.dateString+" "+l.timeFormatString;o+=' <div class="link-title-header-rest" title="'+r(u)+'"> '+r(u)+" </div> </div> </div> </div> ",s.objectlinkDel&&(o+=' <a class="link-menu-handler icon icon-chevron-down" data-id="'+s._id+'" ></a> '),o+="</li>"}return o}},"4Mget0aH":function(e,t,n){e.exports=n.p+"images/d_yunbei@2x.49176b45.png"},"4R8uTwsA":function(e,t,n){var r,o,i,s,a,c;n("a+N5u/Cl"),i=n("3eMzznN/"),o=n("wd/RKGTj"),n("77NnVLwu"),a="todo",c="project",s={done:"all",created:"all"},r=function(){function e(){}return e.prototype.getFilterType=function(){return a},e.prototype.setFilterType=function(e){return a=e},e.prototype.getFilterList=function(){var e,t,n,r,o;for(o=[],e=0,n=(r=["todo","joined","done","created"]).length;e<n;e++)t=r[e],o.push({_id:t,title:this.getFilterTitle(t)});return o},e.prototype.getFilterTitle=function(e){switch(e||(e=this.getFilterType()),e){case"todo":return tb_i18n.get("my.task.undone");case"joined":return tb_i18n.get("my.task.joined");case"done":return tb_i18n.get("my.task.done");case"created":return tb_i18n.get("my.task.created")}},e.prototype.getFilterGta=function(e){switch(e){case"todo":return{action:"open unfinished task"};case"joined":return{action:"open participating task"};case"done":return{action:"open finished task"};case"created":return{action:"open created task"}}},e.prototype.getDateType=function(){return s[a]||"all"},e.prototype.setDateType=function(e){return s[a]=e},e.prototype.getDateList=function(){var e,t,n,r,o;for(o=[],e=0,n=(r=["all","today","yesterday","lastWeek","lastTwoWeek","lastMonth"]).length;e<n;e++)t=r[e],o.push({_id:t,title:this.getDateTitle(t)});return o},e.prototype.getDateString=function(e){var t;switch(e||(e=this.getDateType()),t=o().startOf("day"),e){case"today":return t.toISOString();case"yesterday":return t.subtract(1,"day").toISOString();case"lastWeek":return t.subtract(1,"week").toISOString();case"lastTwoWeek":return t.subtract(2,"week").toISOString();case"lastMonth":return t.subtract(1,"month").toISOString();default:return null}},e.prototype.getRangeDateString=function(e){var t;switch(e||(e=this.getDateType()),t=o().startOf("day"),e){case"all":case"today":return t.add(1,"day").toISOString();case"yesterday":return t.toISOString();case"lastWeek":case"lastTwoWeek":case"lastMonth":return t.add(1,"day").toISOString();default:return null}},e.prototype.getDateTitle=function(e){switch(e||(e=this.getDateType()),e){case"all":return tb_i18n.get("my.task.dateByAll");case"today":return tb_i18n.get("my.task.dateByToday");case"yesterday":return tb_i18n.get("my.task.dateByYesterday");case"lastWeek":return tb_i18n.get("my.task.dateByLastWeek");case"lastTwoWeek":return tb_i18n.get("my.task.dateByLastTwoWeek");case"lastMonth":return tb_i18n.get("my.task.dateByLastMonth")}},e.prototype.getSortType=function(){return c},e.prototype.getSortTypeGta=function(){switch(c){case"project":return{action:"switch order",category:"project name"};case"priority":return{action:"switch order",category:"priority"};case"dueDate":return{action:"switch order",category:"time"}}},e.prototype.setSortType=function(e){return c=e},e.prototype.getSortList=function(){var e,t,n,r,o;for(o=[],e=0,n=(r=["project","priority"]).length;e<n;e++)t=r[e],o.push({_id:t,title:this.getSortTitle(t)});return o},e.prototype.getSortTitle=function(e){switch(e||(e=this.getSortType()),e){case"project":return tb_i18n.get("my.task.sortByProject");case"priority":return tb_i18n.get("my.task.sortByPriority");case"dueDate":return tb_i18n.get("my.task.sortByDueDate")}},e.prototype.sortTask=function(e,t){switch(t||(t=this.getSortType()),t){case"priority":case"project":return this.sortByPriority(e);case"dueDate":return this.sortByDueDate(e);default:return e}},e.prototype.sortByPriority=function(e){return e.sort(i.compareTask)},e.prototype.sortByDueDate=function(e){return e.sort(this.dueDateSorter)},e.prototype.dueDateSorter=function(e,t){return(new Date(e.dueDate||0).valueOf()||Number.MAX_VALUE)-(new Date(t.dueDate||0).valueOf()||Number.MAX_VALUE)},e}(),e.exports=new r},"4SYsFa44":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<ul class="list-unstyled"> ',i=e.dataList;if(i)for(var s,a=-1,c=i.length-1;a<c;)s=i[a+=1],o+=' <li class="single-picker-item ',e.selected===s._id&&(o+="selected"),o+='" data-id="'+s._id+'"> <a>'+r(s.title)+"</a> </li> ";return o+="</ul>"}},"4WM0CzIx":function(e,t,n){e.exports=n("ekGk+avW")},"4XG9A953":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("i8i4LrFt"),s=n("TSYQbtd+"),a=n.n(s),c=n("a+N5u/Cl"),l=n.n(c),u=n("GESwhXbR"),p=n("oRqJmROU"),d=n("qD/Uhw1r"),h=function(e){function t(t){var n=e.call(this,t)||this;return n.stopPropagation=function(e){e.stopPropagation()},n.close=function(){n.setState({visible:!1});var e=n.props.onClose;l.a.isFunction(e)&&e()},n.onTriggerClick=function(){var e=n.props.onTriggerClick;l.a.isFunction(e)&&e(),n.close()},n.setChildTriggerPosition=function(){var e=n.props,t=e.offset,r=e.onTriggerClick,o=t&&t.right||0,s=t&&t.top||0;if(n.triggerRef&&r){var a=i.findDOMNode(n.triggerRef);if(!Object(p.b)(a))return;var c=a.getBoundingClientRect(),l={top:c.top-20-s,left:c.left-20+o,width:c.width+40,height:c.height+40};n.setState({triggerStyle:l})}},n.setTriggerPosition=function(){var e=n.props.triggerPosition;if(e){var t={top:e.top-12,left:e.left-18,width:e.width+36,height:e.height+36};n.setState({triggerStyle:t})}},n.saveRef=function(e){n.triggerRef=e},n.state={visible:!t.hasOwnProperty("visible")||!!t.visible,triggerStyle:{}},n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.visible!==this.state.visible&&this.setState({visible:!!e.visible})},t.prototype.componentDidMount=function(){var e=this;this.setTriggerPosition(),this.props.children&&(this.triggerTimeoutKey=window.setTimeout(function(){e.setChildTriggerPosition(),e.triggerTimeoutKey=null},0))},t.prototype.componentWillUnmount=function(){null!==this.triggerTimeoutKey&&window.clearTimeout(this.triggerTimeoutKey)},t.prototype.render=function(){return o.createElement(o.Fragment,null,this.state.visible&&this.renderMask(),!!this.props.children&&this.renderChild())},t.prototype.renderMask=function(){var e=this.getContainer();return i.createPortal(this.renderGuide(),e)},t.prototype.renderChild=function(){var e=this.props.children;(!e||Array.isArray(e)&&e.length>1)&&console.warn("warning: only one element can be wrapped in <Guide />");var t=o.Children.only(e);return o.cloneElement(t,r.a({},t.props,{ref:this.saveRef}))},t.prototype.renderGuide=function(){var e,t=this.props,n=t.style,r=t.className,i=a()(d["guide-modal"],((e={})[r]=!!r,e));return o.createElement("div",{className:i,style:n,onClick:this.close},o.createElement("div",{className:d.guide,onClick:this.stopPropagation},this.renderClose(),this.renderContent()),this.getTrigger())},t.prototype.renderContent=function(){var e=this.props,t=e.message,n=e.title,r=t;return t||n?("string"==typeof t&&(r=o.createElement("p",{className:d["guide-content-mes"]},t)),o.createElement("div",{className:d["guide-content"]},!!n&&o.createElement("p",{className:d["guide-content-title"]},n),r)):null},t.prototype.renderClose=function(){var e=this.props.closeHandler;return o.createElement("div",{className:d["close-handler"],onClick:this.close},e||o.createElement(u.Icon,{name:"remove"}))},t.prototype.getContainer=function(){var e=document.createElement("div");return document.body.appendChild(e),e},t.prototype.getTrigger=function(){return o.createElement("div",{className:d["guide-trigger-box"],onClick:this.onTriggerClick,style:this.state.triggerStyle},o.createElement("div",{className:d["guide-trigger"]}))},t}(o.PureComponent),m=function(){function e(){var e=this;this.visible=!0,this.createMountNode=function(){var e=document.createElement("div");return document.body.appendChild(e),e},this.handleClose=function(){e.visible=!1}}return e.prototype.open=function(e){this.mountNode||(this.mountNode=this.createMountNode());var t=e.visible,n=r.g(e,["visible"]);return e.hasOwnProperty("visible")&&(this.visible=!!t),i.render(o.createElement(h,r.a({visible:this.visible},n)),this.mountNode),!0},e.prototype.close=function(){this.visible=!1},e.prototype.destroy=function(){this.mountNode&&(i.unmountComponentAtNode(this.mountNode),document.body.removeChild(this.mountNode),this.mountNode=null)},e}(),f=function(){function e(){}return e.open=function(t){return e.getManager().open(t)},e.close=function(){e.getManager().close()},e.destroy=function(){e.getManager().destroy()},e.getManager=function(){return e.manager||(e.manager=new m),e.manager},e.manager=null,e}();n.d(t,"GuideComponent",function(){return h}),n.d(t,"Guide",function(){return f})},"4ah31yVQ":function(e,t,n){"use strict";var r=n("q1tIBJhx"),o=n.n(r),i=n("TSYQbtd+"),s=n.n(i),a=n("tLZJUYWX"),c=n.n(a),l=n("t4XGQn5x"),u=n.n(l),p=function(e){return o.a.createElement("div",{className:s()(u.a["placeholder-no-permission"],e.className)},o.a.createElement("div",{className:"image"}),o.a.createElement("p",{className:"title"},c.a.get("project.add.member.no.permission")),o.a.createElement("p",{className:"description"},c.a.get("project.add.member.no.permission.hint")))};n.d(t,"a",function(){return p})},"4bWDEe5E":function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;s=n("a+N5u/Cl"),r=n("VuB9cZyl"),o=n("mQWTeDcC"),(i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="scenariofieldconfigs",t.prototype.model=o,t.prototype.orderBy="pos",t.prototype.initialize=function(e,n){return t.__super__.initialize.apply(this,arguments),this._boundToObjectId=this._boundToObjectId.replace("_"+this.name+"_"+this.boundToObjectType,"")},t.prototype.url=function(){return"projects/"+this._boundToObjectId+"/scenariofieldconfigs"},t.prototype.listen=function(){if(!this.listened)return t.__super__.listen.apply(this,arguments),this.on("add",function(e){if(e.get("objectType")!==this.boundToObjectType)return this.remove(e,{silent:!0})})},t.prototype.sync=function(e,n,r){return r||(r={}),r.url=this.url(),"read"===e&&(r.attrs=s.extend({objectType:this.boundToObjectType},r.attrs),r.skipBoundToObjectType=!0),t.__super__.sync.apply(this,arguments)},t.prototype.getDefaultModel=function(){return this.findWhere({isDefault:!0})},t}()).genCacheId=function(e,t){return e+"_"+i.prototype.name+"_"+t},e.exports=i},"4eyW8sAo":function(e,t,n){"use strict";var r=n("u//1fy1x"),o=n("IXGYRbNF"),i=n.n(o),s=Object(r.default)(i.a);n.d(t,"a",function(){return s})},"4h4mpi5f":function(e,t,n){var r,o={}.hasOwnProperty;r=n("GsAQlUN+"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="EventConfirmUpdateMemberView",t.prototype.initialize=function(){var e,n,r;return t.__super__.initialize.apply(this,arguments),r=tb_i18n.get("event.confirm.updateMember.title"),n=tb_i18n.get("event.confirm.updateMember.description"),e=["current","next","all"],this.render({title:r,description:n,btns:e})},t}()},"4iBjYp7P":function(e,t,n){e.exports=n.p+"images/d_shenshou@2x.38be56a9.png"},"4nTvW6pf":function(e,t,n){e.exports=n("+oXWdItZ")+"\n\nquery RecommendProjects(\n  $spaceType: SpaceType!,\n  $organizationId: ObjectId,\n  $pageSize: PageSizeType = 20,\n) {\n  recommend: Recommend(\n    type: project,\n    spaceType: $spaceType,\n    _organizationId: $organizationId,\n    pageSize: $pageSize\n  ) {\n    result {\n    \t...projectSchema\n    }\n  }\n}\n"},"4ql4e9Df":function(e,t,n){"use strict";n.r(t),n.d(t,"PrivacyPolicy",function(){return l});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n("GESwhXbR"),c=n("sa1Ed382"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.props.onToggleCollectable(e)},t}return r.d(t,e),t.prototype.render=function(){return i.a.createElement("section",null,i.a.createElement("div",{className:"settings-privacy-policy-content"},i.a.createElement("h4",null," ",s.get("personal.settings.privacy.policy.sharing")),i.a.createElement("div",{className:"settings-privacy-policy-secondary"},s.get("personal.settings.privacy.policy.content")),i.a.createElement("a",{className:"setting-know-privacy-policy",href:c.config.HOST+"/privacy",target:"_blank"},s.get("personal.settings.privacy.policy.know.about"))),i.a.createElement("div",{className:"settings-switch-toggler"},i.a.createElement(a.Switch,{checked:this.props.checked,onChange:this.onChange})))},t}(i.a.PureComponent)},"4uKPJ5lc":function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;r=n("lu4Xb2Hy"),i=n("gBe2F1Rz"),o=n("mHz0QvBA"),s=n("vmWJWrVe"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="TagTasksView",t.prototype.className="tag-tasks-view fade",t.prototype.initialize=function(e){var t;return this.tagModel=e.tagModel,this.tasksCollection=i.get("tag_"+this.tagModel.id),this.renderBasic(),this.tagModel.fetchRelation("tasks",{attrs:{all:!0,page:1,count:500,_projectId:e._projectId},success:(t=this,function(n){if(t.$el)return t.tasksCollection.reset(n),t.requestSubView(o,{tasksCollection:t.tasksCollection}).$el.appendTo(t.$el),t.refreshCount(),t.tasksCollection.length&&t.$el.show().addClass("in"),t.listen(),"function"==typeof e.onFinish?e.onFinish():void 0}),error:function(){return"function"==typeof e.onFinish?e.onFinish():void 0}}),this},t.prototype.renderBasic=function(){return this.$el.html(r()).hide(),this},t.prototype.listen=function(){var e;return this.listenTo(this.tasksCollection,"add remove",this.refreshCount),this.listenTo(this.tasksCollection,"change:tagIds",(e=this,function(t,n){if(!((null!=n?n.indexOf(e.tagModel.id):void 0)>=0))return e.tasksCollection.remove(t),e.tagModel.refreshCache()})),this},t.prototype.refreshCount=function(){var e;return this.tagModel.set("tasksCount",this.tasksCollection.length),this.$(".tasks-count").text(this.tasksCollection.length),e=this.tasksCollection.length?"show":"hide",this.$el[e](),this},t}()},"4xbk2Yaz":function(e,t,n){e.exports=n.p+"images/d_doge@2x.606dfef8.png"},"4z2SmMW4":function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n("mrSGxOB2"),o=n("GESwhXbR"),i=n("TSYQbtd+"),s=n.n(i),a=n("q1tIBJhx"),c=n.n(a),l=n("sa1Ed382"),u=n("a+N5u/Cl"),p=n("s0r7VfKc"),d=n("HYobN8SQ"),h=n.n(d),m=n("asYwtd89"),f=n.n(m),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={touched:!0},t.close=function(){t.setDateTouched().then(function(){t.props.gta&&t.props.gta.closed&&l.gta.event(t.props.gta.closed)}).then(function(){return t.setState({touched:!0})}).catch(u.noop)},t}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.isTouched().then(function(t){t&&e.props.gta&&e.props.gta.shown&&l.gta.event(e.props.gta.shown),e.setState({touched:t})}).catch(u.noop)},Object.defineProperty(t.prototype,"type",{get:function(){return this.props.type||"info"},enumerable:!0,configurable:!0}),t.prototype.render=function(){if(this.state.touched)return null;var e=s()(this.props.className,f.a.banner,this.type);return c.a.createElement("div",{className:e},this.renderLeft(),c.a.createElement("div",{className:"banner__body"},this.props.content),this.renderRight())},t.prototype.getIcon=function(){if(this.props.icon)return this.props.icon;switch(this.type){case"info":case"warning":return"circle-info"}},t.prototype.renderLeft=function(){var e=this.getIcon();return c.a.createElement("span",{className:"banner__left"},c.a.createElement("div",{className:f.a["icon-wrapper"]},c.a.createElement(o.Icon,{name:e})))},t.prototype.renderRight=function(){return c.a.createElement("a",{onClick:this.close,className:"banner__right"},c.a.createElement("div",{className:f.a["icon-wrapper"]},this.props.close||c.a.createElement(o.Icon,{name:"remove"})))},t.prototype.isTouched=function(){return r.b(this,void 0,void 0,function(){var e,t,n;return r.e(this,function(r){switch(r.label){case 0:return[4,this.getDateTouched()];case 1:return e=r.sent(),t=e&&new Date(e).valueOf(),n=this.props.duration||1/0,[2,!!t&&Date.now()<=t+n]}})})},t.prototype.getDateTouched=function(){return r.b(this,void 0,void 0,function(){var e,n,o,i;return r.e(this,function(s){switch(s.label){case 0:switch(e=this.getKey(),this.props.storage){case t.Storage.local:return[3,1];case t.Storage.session:return[3,2];case t.Storage.remote:return[3,3]}return[3,5];case 1:return[2,h.a.local.get(e)];case 2:return[2,h.a.session.get(e)];case 3:return[4,p.default.getPreference().values().toPromise()];case 4:return n=r.f.apply(void 0,[s.sent(),1]),o=n[0],"string"==typeof(i=o.tips[e])?[2,i]:[2,i?new Date:null];case 5:return[2]}})})},t.prototype.setDateTouched=function(){return r.b(this,void 0,void 0,function(){var e,n,o,i,s,a;return r.e(this,function(c){switch(c.label){case 0:switch(e=this.getKey(),n=(new Date).toISOString(),this.props.storage){case t.Storage.local:return[3,1];case t.Storage.session:return[3,2];case t.Storage.remote:return[3,3]}return[3,5];case 1:return[2,h.a.local.set(e,n)];case 2:return[2,h.a.session.set(e,n)];case 3:return[4,p.default.getPreference().values().toPromise()];case 4:return o=r.f.apply(void 0,[c.sent(),1]),i=o[0],s=r.a({},i.tips,((a={})[e]=n,a)),[2,p.default.updatePreferenceTips(i._id,s).toPromise()];case 5:return[2]}})})},t.prototype.getKey=function(){return this.props.storage===t.Storage.remote?this.props.index:[l.user.id,this.props.index].join(":")},t}(c.a.PureComponent);!function(e){!function(e){e[e.local=0]="local",e[e.session=1]="session",e[e.remote=2]="remote"}(e.Storage||(e.Storage={}))}(g||(g={}))},"4zmhFCNs":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<header class="modal-header"> <h4 class="modal-title"> ';return"import"===e.action?o+=" "+tb_i18n.get("projects.transferIn")+" ":"export"===e.action&&(o+=" "+tb_i18n.get("projects.transferOut")+" "),o+=' </h4></header><div class="modal-body row-flex"> <div class="transfer-from"> <div class="transfer-title"> ',"import"===e.action?(o+=" <span>"+tb_i18n.get("chose.organization")+"</span> ",e.organizations.length>0&&(o+=' <div class="organization-transfer-import-selector"></div> '),o+=" "):o+=" <span>"+r(tb_i18n.get("organization.projects"))+"</span> ",o+=' </div> <ul class="transfer-list thin-scroll"></ul> </div> <div class="transfer-to"> <div class="transfer-title"> ',e.targetTitle?o+=" <span>"+r(e.targetTitle)+"</span> ":(o+=" <span> ","import"===e.action?o+=" "+tb_i18n.get("projects.transferIn.to")+" ":"export"===e.action&&(o+=" "+tb_i18n.get("projects.transferOut.to")+" "),o+=" </span> ",e.organizations.length>1?o+=' <div class="organization-transfer-export-selector"></div> ':e.organizations.length>0&&(o+=" "+r(e.organizations[0].name)+" "),o+=" "),o+=' </div> <ul class="transfer-list thin-scroll"></ul> </div></div><div class="modal-footer"> <button class="confirm-handler btn btn-primary pull-right disabled">'+tb_i18n.get("confirm")+'</button> <button class="cancel-handler btn btn-link pull-right">'+tb_i18n.get("cancel")+"</button></div>"}},"55DrWcZL":function(e,t,n){var r,o,i={}.hasOwnProperty;o=n("vmWJWrVe"),r=n("aL8N2c85").GitIntegrate,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="GitIntegrateView",t.prototype.className="git-integrate-view",t.prototype.initialize=function(e){return this.projectModel=e.projectModel,this.render(),this.listen()},t.prototype.listen=function(){return this.listenTo(this.projectModel,"change:applications",function(){if(this.projectModel.isAppChanged("taskUniqueId"))return this.render()})},t.prototype.render=function(){var e;return e=this.projectModel.isAppEnabled("taskUniqueId"),this.requestReactView(this.el,r,{isTaskIdOpened:e,projectModel:this.projectModel})},t}()},"577sg96d":function(e,t,n){},"59lI6xTj":function(e,t,n){e.exports={"task-content-readonly":"task-content-readonly__3TV7"}},"5CiSxGri":function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;a=n("sa1Ed382"),r=n("E86Oiqt3"),o=n("77NnVLwu"),s=n("vmWJWrVe"),c=n("gh8QIhMV").throwError,i=n("CzDzqUFN").UploaderItem,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="WorkView",t.prototype.tagName="li",t.prototype.className="uploader-item work creating card",t.prototype.initialize=function(e){var t,n;if(null!=e?e.workModel:void 0)return this.options=e,this.workModel=e.workModel,this.insertImage=e.onInsertImage,t=this.workModel.collection._boundToObjectId,this.subscribe(r.fetch$(t||void 0).concatMap((n=this,function(e){var t;return n.collection=e,o.fetch$(null!=(t=n.collection)?t.get("_projectId"):void 0)})).do(function(e){return function(t){return e.projectName=null!=t?t.get("name"):void 0,e.renderBasic(),e.listen()}}(this),c))},t.prototype.listen=function(){return this.listenTo(this.workModel,"change",this.renderBasic)},t.prototype.renderBasic=function(){var e,t;if(this.$el)return this.requestReactView(this.el,i,{file:this.workModel.getFormatData(),fileId:this.workModel.id||this.workModel.cid,isBackground:this.options.isBackground,onClickCancel:this.onCancelUploader.bind(this),onClickPause:(t=this,function(){var e;return"function"==typeof(e=t.workModel).pause?e.pause():void 0}),onClickRetry:function(e){return function(){var t;return"function"==typeof(t=e.workModel).retry?t.retry():void 0}}(this),onClickResume:function(e){return function(){var t;return"function"==typeof(t=e.workModel).resume?t.resume():void 0}}(this),insertImage:this.insertImage,collection:this.getCollectionName(),onEnterCollection:(null!=(e=this.collection)?e.isDefault():void 0)?null:this.onEnterCollection.bind(this)}),this.$el.attr("data-cid",this.workModel.cid).data("id",this.workModel.id)},t.prototype.getCollectionName=function(){if(this.collection)return this.collection.isRoot()?this.projectName:this.collection.isDefault()?tb_i18n.get("previewer.header.temp.tips"):this.collection.get("title")},t.prototype.onCancelUploader=function(e){var t,n;return"function"==typeof(t=this.workModel).abort&&t.abort(),null!=(n=this.workModel.collection)&&n.remove(this.workModel),this.remove()},t.prototype.onEnterCollection=function(){var e;if(this.collection)return e="project/"+this.collection.get("_projectId")+"/works/"+this.collection.get("_id"),a.router.navigate(e,{trigger:!0})},t}()},"5F8+bCnl":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var r=n("HDJEOtNh"),o=function(e){return r.OrganizationAccess.hasAdminAuthority(e._id)},i=function(e){var t=e._organizationId;return!!t&&r.OrganizationAccess.hasAdminAuthority(t)}},"5Fa96gQq":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";return e.isBind?o+='<ul class="object-menu thin-scroll scrollable flex-static"></ul><div class="object-content flex-fill flex-vert"> <div class="item-list thin-scroll flex-fill flex-vert"></div></div>':(o+='<div class="bind-hint text-center flex-fill"> <div> ',"processon"===e.integration.type?o+=' <span class="icon img-icon-processon-lg size-lg"></span><br> ':o+=' <span class="icon img-icon-'+e.integration.type+' size-lg"></span><br> ',o+=' <p class="muted">'+e.integration.des+'</p> <p><a href="'+r(e.integration.bindUrl)+'">'+tb_i18n.get("bound")+" "+r(e.integration.name)+"</a></p> <div></div>"),o}},"5FgezBxu":function(e,t,n){var r,o,i,s,a,c,l,u;u=n("sa1Ed382"),a=n("OmupbwLD"),s=n("GESwhXbR").Toast,o=n("Wd/8sFUG"),i=n("nL4olqOP"),c=n("YPgjEQB8"),r=n("6vg9MnbG"),l=n("iEgAZGI+").creator,e.exports=function(){function e(e){this.context=e}return e.prototype.gotoMessage=function(e){var t;return t=JSON.parse(e),o.axon.browser.handleClick(t)},e.prototype.enterProject=function(e){return i.fetchOne(0,e,{silentError:!0,success:function(e){return u.router.navigate("project/"+e.id,{trigger:!0})},error:function(){return s.error(tb_i18n.get("tbclient.error.project.not.existing"))}})},e.prototype.enterProjects=function(){return u.router.navigate("projects",{trigger:!0})},e.prototype.openAppCreator=function(e){var t;if(i.get(0).length)return l().then((t=this,function(n){var r,o;if(r=function(){switch(e){case"task":return[n.task];case"event":return[n.event];case"post":return[n.post,{backdrop:"static",gta_from:"Global New Post"}]}}())return(o=t.context.requestSubView(a)).open.apply(o,r)}))},e.prototype.fileUpload=function(){var e;if(i.get(0).length)return this.$fakeUploaderPick||(this.$fakeUploaderPick=$("<div>")),this._initedUploader?this.$fakeUploaderPick.find("input").trigger("click"):(this.context.requestSubView(c,{isBackground:!0,pick:{id:this.$fakeUploaderPick,multiple:!0}}),this._initedUploader=!0,this.uploaderInitialLoop=window.setInterval((e=this,function(){if(e.$fakeUploaderPick.find("input").length)return e.$fakeUploaderPick.find("input").trigger("click"),window.clearInterval(e.uploaderInitialLoop)}),200))},e.prototype.openNav=function(e){switch(e){case"me":return u.APP.Float.toggleMy();case"calendar":return u.APP.Float.toggleCalendar();case"inbox":return u.APP.Float.toggleInbox()}},e.prototype.openChatModal=function(){return r.open()},e.prototype.destroy=function(){return window.clearInterval(this.uploaderInitialLoop)},e}()},"5HA2kCP2":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c});var r=n("mrSGxOB2"),o=n("sa1Ed382"),i=n("8yf6doCl"),s=n("tOYy32ox"),a=new i.Subject,c=function(){function e(){}return e.prototype.handle=function(e){var t=this[e.method];if("function"==typeof t)return t.apply(this,e.params);throw Error("Target method cannot be found.")},e.prototype.cleanup=function(){},e.prototype.isolatedAPI=function(){return[]},e.prototype.start=function(){a.next({type:"start",payload:{}})},e.prototype.finish=function(){a.next({type:"finish",payload:{}})},e.prototype.openPluginLayer=function(e){Promise.resolve().then(function(t){n("5eNik3+6").PluginLayerManager.liftBottom(e)}.bind(null,n)).catch(n.oe)},e.prototype.closePluginLayer=function(e){Promise.resolve().then(function(t){n("5eNik3+6").PluginLayerManager.close(e)}.bind(null,n)).catch(n.oe)},e.prototype.dispatchAction=function(e){a.next({type:"dispatchAction",payload:{action:e}})},e.prototype.essage=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.next({type:"essage",payload:{method:e,params:t}})},e.prototype.navigate=function(e,t){void 0===t&&(t={}),a.next({type:"navigate",payload:{route:e,options:t}})},e.prototype.openDetail=function(e,t){var n=t.id,r=t.projectId;switch(e){case"collection":window.open("/project/"+r+"/works/"+n);break;case"event":s(n);break;default:o.APP.openObjectPreviewer(n,e,{_projectId:r})}},e.prototype.openHandoverTasks=function(e){a.next({type:"openHandoverTasks",payload:{memberUserId:e}})},e.prototype.openTeamStructure=function(e){a.next({type:"openTeamStructure",payload:{organizationId:e}})},e.prototype.openTeamDetail=function(e){a.next({type:"openTeamDetail",payload:{_teamId:e}})},e.prototype.openAddGroup=function(){a.next({type:"openAddGroup",payload:{}})},e.prototype.openAddMember=function(e,t){a.next({type:"openAddMember",payload:r.a({},t,{targetType:e})})},e.prototype.openMemberProfileForm=function(e,t,n){a.next({type:"openMemberProfileForm",payload:{currentMember:e,currentOrganization:t,initialValues:n}})},e.prototype.downloadBatchAddMembersExcelTemplate=function(){a.next({type:"downloadBatchAddMembersExcelTemplate",payload:{}})},e.prototype.uploadBatchAddMembersExcelTemplate=function(){a.next({type:"uploadBatchAddMembersExcelTemplate",payload:{}})},e.prototype.downloadBatchUpdateMembersExcelTemplate=function(e,t){a.next({type:"downloadBatchUpdateMembersExcelTemplate",payload:{parentType:e,teamId:t}})},e.prototype.uploadBatchUpdateMembersExcelTemplate=function(){a.next({type:"uploadBatchUpdateMembersExcelTemplate",payload:{}})},e.prototype.openChatWindow=function(e){Promise.resolve().then(function(t){n("6vg9MnbG").open({pseudoMessageData:e})}.bind(null,n)).catch(n.oe)},e}()},"5Jy5DHf5":function(e,t,n){},"5OYvTPP1":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";e.hasHeader&&(o+="<header> "+r(e.title)+"</header>");var i=e.items;if(i)for(var s,a=-1,c=i.length-1;a<c;){o+='<li class="link" data-id="'+r((s=i[a+=1])._id)+'" data-linkedid="'+r(s._linkedId)+'"> <a class="link-head" href="'+s.data.shareLink+'" target="_blank"> <div class="link-icon-wrap"> <span class="icon icon-evernote"></span> </div> <div class="link-title" > <div class="link-title-header"> <div class="link-title-header-main"> <span class="title-name" title="'+r(s.data.title)+'"> '+r(s.data.title)+" </span> </div> ";var l=s.createTime,u=l.dateString+" "+l.timeFormatString;o+=' <div class="link-title-header-rest" title="'+r(u)+'"> '+r(u)+" </div> </div> </div> </a> ",s.objectlinkDel&&(o+=' <a class="link-menu-handler icon icon-chevron-down" data-id="'+s._id+'" ></a> '),o+="</li>"}return o}},"5SEFI7yW":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("GESwhXbR"),l=n("H+JZ1Vad"),u=n("a+N5u/Cl"),p=n.n(u),d=n("wd/RKGTj"),h=n.n(d),m=n("TSYQbtd+"),f=n.n(m),g=n("Kp6G1I/y"),v={minute:{min:5,max:60,step:5},hour:{min:1,max:24,step:1},day:{min:1,max:30,step:1}},b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSelectRule=function(e){var n,r=t.props,o=r.rule,i=r.onRuleChange,s=e.data;switch(s){case"beforeStartDate":case"beforeDueDate":case"afterStartDate":case"afterDueDate":var a=o.relative,c={unit:"minute",value:v.minute.min};n={type:s,date:null,relative:a&&""!==a.unit?a:c};break;case"customize":var l=o.date;n={type:s,date:(l?h()(l):h()().add(1,"m")).toISOString()};break;default:n={type:s,date:null}}i(n)},t.onSelectTime=function(e){var n=t.props,o=n.rule,i=n.onRuleChange,s=o.relative,a=e.data;i(r.a({},o,{relative:r.a({},s,{value:a})}))},t.onSelectUnit=function(e){var n=t.props,o=n.rule,i=n.onRuleChange,s=o.relative,a=e.data,c=t.getTimeSequence(v[a]),l=t.getSelectedValue(s.value,c);i(r.a({},o,{relative:{unit:a,value:l}}))},t.onDateChange=function(e){var n=t.props,o=n.rule,i=n.onRuleChange,s=e.date;i(r.a({},o,{date:h()(s).toISOString()}))},t.onRuleRemove=function(){var e=t.props,n=e.rule;(0,e.onRuleRemove)(n)},t.stopPropagation=function(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},t}return r.d(t,e),t.prototype.renderRule=function(){var e=this.props,t=e.rule,n=e.disabled,o=[{data:"startDate",label:a.a.get("task.reminder.modal.startDate")},{data:"beforeStartDate",label:a.a.get("task.reminder.modal.beforeStartDate")},{data:"afterStartDate",label:a.a.get("task.reminder.modal.afterStartDate")},{data:"dueDate",label:a.a.get("task.reminder.modal.dueDate")},{data:"beforeDueDate",label:a.a.get("task.reminder.modal.beforeDueDate")},{data:"afterDueDate",label:a.a.get("task.reminder.modal.afterDueDate")},{data:"customize",label:a.a.get("task.reminder.modal.customize")}],s=p.a.find(o,function(e){return e.data===t.type}),l=o.map(function(e){return i.a.createElement(c.Option,{value:e,key:e.data},e.label)}),u={nested:!0,value:s,onSelect:this.onSelectRule,disabled:n};return i.a.createElement(c.Select,r.a({className:"reminder-select"},u),l)},t.prototype.getTimeSequence=function(e){var t=e.min,n=e.max,r=e.step;return p.a.range(t,n+1,r)},t.prototype.getSelectedValue=function(e,t){var n,r;for(n=0,r=t.length;n<r;n++){var o=t[n];if(e<=o)return o}return t[r-1]},t.prototype.renderTime=function(){var e=this.props,t=e.rule,n=e.disabled,o=t.relative,s=this.getTimeSequence(v[o.unit]).map(function(e){var t={label:""+e,data:e};return i.a.createElement(c.Option,{value:t,key:e},e)}),a={nested:!0,value:{label:""+o.value,data:o.value},onSelect:this.onSelectTime,disabled:n};return i.a.createElement(c.Select,r.a({className:"reminder-select"},a),s)},t.prototype.renderUnit=function(){var e=this.props,t=e.rule,n=e.disabled,o=t.relative,s=[{data:"minute",label:a.a.get("minute")},{data:"hour",label:a.a.get("hour")},{data:"day",label:a.a.get("day")}],l=p.a.find(s,function(e){return e.data===o.unit}),u=s.map(function(e){return i.a.createElement(c.Option,{value:e,key:e.data},e.label)}),d={nested:!0,value:l,onSelect:this.onSelectUnit,disabled:n};return i.a.createElement(c.Select,r.a({className:"reminder-select"},d),u)},t.prototype.renderCustomizeDate=function(){var e=this.props,t=e.rule,n=e.disabled,o=t.date,s=h()(o),a={date:s,onChange:this.onDateChange,popupCls:"reminder-date-popup",disabled:n};return i.a.createElement(c.DatePicker,r.a({},a),i.a.createElement("input",{className:"form-control reminder-date-input ",type:"text",value:s.format("LL HH:mm"),onClick:this.stopPropagation,onChange:this.stopPropagation,disabled:n}))},t.prototype.renderContent=function(){switch(this.props.rule.type){case"beforeStartDate":case"beforeDueDate":case"afterStartDate":case"afterDueDate":return i.a.createElement("div",{className:"task-reminder-content"},this.renderRule(),this.renderTime(),this.renderUnit());case"customize":return i.a.createElement("div",{className:"task-reminder-content"},this.renderRule(),this.renderCustomizeDate());default:return i.a.createElement("div",{className:"task-reminder-content"},this.renderRule())}},t.prototype.renderRemoveBtn=function(){return i.a.createElement("div",{className:"remove-reminder-btn-wrap"},i.a.createElement(c.IconButton,{name:"trash",color:"gray",className:"remove-reminder-btn",onClick:this.onRuleRemove}))},t.prototype.render=function(){var e=this.props.disabled,t=f()(g["task-reminder-item"],{disabled:e});return i.a.createElement("div",{className:t},this.renderContent(),this.renderRemoveBtn())},t}(i.a.Component),y=n("CrgVhEYo");n("Kp6G1I/y");var k=function(e){function t(t){var n=e.call(this,t)||this;return n.onAddMember=function(e){(0,n.props.onToggleMemberPicker)(n.state.members,e).then(function(e){n.setState({members:e})})},n.onRemoveMember=function(e){return function(){var t=n.state.members;n.setState({members:t.filter(function(t){return t!==e._userId})})}},n.onAddReminder=function(){var e=n.state.rules;n.setState({rules:r.h(e,[{type:"dueDate",date:null}])})},n.onRuleChange=function(e){return function(t){return n.changeRule(t,e)}},n.onRuleRemove=function(e){return function(t){return n.removeRule(t,e)}},n.onSubmit=function(){(0,n.props.onSubmit)(r.a({},n.state)).then(function(){return c.Toast.success(a.a.get("task.reminder.modal.set.success"))})},n.onOpen=function(){var e=n.props,t=e.task,o=e.reminder,i=n.state.members;n.setState(r.a({},o)),0===i.length&&n.setState({members:t._executorId?[t._executorId]:[]})},n.state=r.a({},t.reminder),n}return r.d(t,e),t.prototype.changeRule=function(e,t){var n=this.state.rules;this.setState({rules:n.map(function(n,o){return o===t?r.a({},e):n})})},t.prototype.removeRule=function(e,t){var n=this.state.rules;this.setState({rules:n.filter(function(e,n){return n!==t})})},t.prototype.renderRemindersGroup=function(){var e=this,t=this.props.canChangeMember,n=this.state.rules,o=void 0===n?[]:n,s=0===o.length?i.a.createElement("div",{className:"no-reminders"},a.a.get("task.reminder.modal.unset")):o.map(function(n,o){var s={rule:n,onRuleChange:e.onRuleChange(o),onRuleRemove:e.onRuleRemove(o),disabled:!t};return i.a.createElement(b,r.a({key:o},s))});return i.a.createElement("div",{className:"reminders-group"},i.a.createElement("div",{className:"reminder-group-head"},i.a.createElement("div",{className:"reminder-group-title"},a.a.get("task.reminder.modal.list.title")),i.a.createElement(c.TextButton,{color:"blue",className:"add-reminder-btn",disabled:o.length>=9||!t,onClick:this.onAddReminder},i.a.createElement(c.Icon,{className:"icon",name:"circle-plus"}),a.a.get("task.reminder.modal.add"))),i.a.createElement("div",{className:"reminder-list"},s))},t.prototype.renderMembersGroup=function(){var e=this,t=this.props,n=t.canChangeMember,o=t.task,s=t.projectMembers,u=this.state.members,p=Object(y.pickMembers)(u,s,o._executorId).map(function(t){return i.a.createElement(l.a,r.a({key:t._userId,canDelete:n,onDelete:e.onRemoveMember(t)},t))}),d=0===u.length?i.a.createElement("div",{className:"no-members-tips"},a.a.get("task.reminder.modal.add.members.tips")):null,h=n&&i.a.createElement("li",{className:"add-member-btn-wrap"},i.a.createElement(c.Icon,{name:"circle-cross",size:24,className:"add-member-btn",onClick:this.onAddMember}));return i.a.createElement("div",{className:"reminded-members-group"},i.a.createElement("div",{className:"reminder-members-title"},a.a.get("task.reminder.modal.add.members")),i.a.createElement("div",{className:"reminded-members-wrap"},i.a.createElement("ul",{className:"popover-members-selector"},p,h),d))},t.prototype.renderConfirmWrap=function(){var e=this.props.canChangeMember,t=this.state.members;return i.a.createElement("div",{className:"reminder-modal-confirm-wrap"},i.a.createElement(c.Button,{disabled:!e||0===t.length,onClick:this.onSubmit},a.a.get("save")))},t.prototype.render=function(){var e=this.props,t={opened:e.opened,onVisibleChange:e.onModalVisibleChange,onOpen:this.onOpen,title:a.a.get("task.reminder.modal.title"),titleCls:"task-reminder-modal-title",width:600,style:{},bodyStyle:{padding:0}};return i.a.createElement(c.Modal,r.a({className:"task-reminder-modal"},t),this.renderRemindersGroup(),this.renderMembersGroup(),this.renderConfirmWrap())},t}(i.a.Component);n.d(t,"TaskReminderModal",function(){return k})},"5TA/Y+4C":function(e,t,n){e.exports=function(e){var t="",r=n("L0ULbOmZ");return t+='<div class="'+r["task-date-wrapper"]+'"> <div class="'+r["date-range"]+'"> ',e.isStartTimeEnable&&(t+=' <div class="component-mount task-start-date"></div> <i class="separator"></i> '),t+=' <div class="component-mount task-due-date"></div> </div> <div class="recurrence-and-reminder"> ',e.isRepeatEnable&&(t+=' <div class=" repeat-handler '+r["task-recurrence"]+" ",e.repeatTitle||(t+=" empty "),t+=" ",e.canEditRecurrence?t+=" hinted ":t+=" disabled ",t+=' " data-title="'+(e.repeatTitle||tb_i18n.get("click.set.repeat"))+'" > <span class="icon icon-repeat"></span> </div> '),t+=' <div class="task-reminder"></div> </div></div>'}},"5TITb3g7":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S={}.hasOwnProperty;_=n("a+N5u/Cl"),f=n("YdqH4v7N"),v=n("3eMzznN/"),b=n("vmWJWrVe"),g=n("GESwhXbR").Toast,k=n("3PHTOBfu"),l=n("b9Ok9wpi"),s=n("yXKnvBS7"),m=n("dMJJV7Vx"),w=n("whvLIq4+").getIntegrationMenus,y=n("lzhnO+R2"),a=n("lDvyWifu"),h=n("2yb3tZzU"),i=n("lDq4bgXP"),u=n("LTyGfmzp"),o=n("5Fa96gQq"),r=n("d511H0LF"),c=n("WivmqnGB"),d=n("I49a/cQe"),C=n("gh8QIhMV").throwError,p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)S.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,b),t.prototype.viewName="ObjectPickerOuterView",t.prototype.className="object-picker-outer-view flex-horiz",t.prototype.events={"click .object-menu-item":"switchObjectMenu","click .link":"selectItem","click .github-repo":"switchGithubRepo","click .user-info":"handleWeiboUser"},t.prototype.initialize=function(e){var t;if(this.MENUS=w(),e.onSelect||e.objectType)return this.tokens=e.tokens,this.projectModel=e.projectModel,this.integrationTypes=this.projectModel.getIntegrationTypes(),this.objectType=e.objectType,this.onSelect=e.onSelect,this.cache={},this.integrationTypes.forEach((t=this,function(e){return t.cache[e]={}})),this.selected=[],this.renderBasic(),this},t.prototype.renderBasic=function(){var e,t,n;return t=!!this.tokens[this.objectType],e=_.find(this.projectModel.getIntegrations(),(n=this,function(e){return e.type===n.objectType})),this.bindUrl=e.bindUrl,this.$el.html(o({isBind:t,integration:e})),this.$menu=this.$(".object-menu"),this.$list=this.$(".item-list"),this.setupScroll(this.$menu),t&&this.renderObjectMenu(),this},t.prototype.renderObjectMenu=function(){switch(this.objectType){case"weibo":this.renderWeiboMenu();break;case"github":this.renderGithubMenu();break;case"evernote":case"yinxiang":this.renderEvernoteMenu();break;case"processon":this.renderProcessonMenu();break;case"jinshuju":this.renderJinshujuPicker()}return this},t.prototype.renderWeiboMenu=function(){var e;return this.showLoadingIndicator(this.$menu),k.getHome({access_token:this.tokens[this.objectType],success:(e=this,function(t){var n,o;if(e.$el)return e.hideLoadingIndicator({animated:!1}),n={objects:e.MENUS[e.objectType]},null!=(o=e.$menu)?o.html(r(n)):void 0}),error:function(e){return function(t){return e.hideLoadingIndicator({animated:!1}),g.error({message:String(t)})}}(this),tokenInvalidHandler:function(e){return function(t){return e.hideLoadingIndicator({animated:!1}),g.error({message:String(t)}),e.tokenInvalidHandler()}}(this)}),this},t.prototype.renderEvernoteMenu=function(){var e;return this.showLoadingIndicator(this.$menu),this.evernoteSDK||(this.evernoteSDK=new s({token:this.tokens[this.objectType],type:this.objectType})),this.evernoteSDK.getNotebooks({success:(e=this,function(t){var n,o;if(e.$el)return e.hideLoadingIndicator({animated:!1}),n={objects:t.map(function(e){return{id:e.guid,name:e.name}})},null!=(o=e.$menu)?o.html(r(n)):void 0}),error:function(e){return function(t){return e.hideLoadingIndicator({animated:!1})}}(this),tokenInvalidHandler:function(e){return function(t){return e.hideLoadingIndicator({animated:!1}),e.tokenInvalidHandler()}}(this)}),this},t.prototype.renderGithubMenu=function(){var e,t;return e={objects:this.MENUS[this.objectType]},this.cache.githubRepos?(e.repos=this.cache.githubRepos,e.selectedRepo=this.cache.githubRepos[0],this.$menu.html(c(e))):(this.showLoadingIndicator(this.$menu),l.getRepos({access_token:this.tokens[this.objectType],success:(t=this,function(n){var r;if(t.hideLoadingIndicator({animated:!1}),t.$el)return!n||n.length<=0?C("empty github repos list"):(t.currentGithubRepo=n[0],e.repos=n,e.selectedRepo=n[0],null!=(r=t.$menu)&&r.html(c(e)),t.cache.githubRepos=n)}),error:function(e){return function(t){return e.hideLoadingIndicator({animated:!1}),g.error({message:String(t)})}}(this),tokenInvalidHandler:function(e){return function(t){return e.hideLoadingIndicator({animated:!1}),g.error({message:String(t)}),e.tokenInvalidHandler()}}(this)})),this},t.prototype.renderProcessonMenu=function(){return this.$menu.html(r({objects:this.MENUS[this.objectType]}))},t.prototype.renderJinshujuPicker=function(){return this.jinshujuPickerView=this.requestSubView(u,{token:this.tokens[this.objectType],bindUrl:this.bindUrl,el:this.el,menuEl:this.$menu,detailEl:this.$list,onSelect:this.onSelect})},t.prototype.tokenInvalidHandler=function(){return delete this.tokens[this.objectType],this.renderBasic(),this},t.prototype.switchGithubRepo=function(e){var t,n;return e.preventDefault(),this.$(".github-repo").removeClass("selected"),t=$(e.currentTarget),n=t.data("repo"),t.addClass("selected"),this.$(".selected-repo").html(n),this.currentGithubRepo=_.find(this.cache.githubRepos,function(e){return e.name===n}),this.cache[this.objectType]={},this},t.prototype.findCache=function(e,t){var n,r;if(e||t)return t=String(t),n=_.values(this.cache[e]),r=_.union.apply({},n),_.find(r,function(e){return e._id===t})},t.prototype.changeActive=function(e){return e.addClass("active").siblings().removeClass("active")},t.prototype.switchObjectMenu=function(e){var t,n;return(null!=e?e.currentTarget:void 0)?n=(t=$(e.currentTarget)).data("id"):(n=e,t=this.$(".object-menu-item[data-id="+n+"]:first")),this.changeActive(t.parent()),this.menuId=n,this.selected=[],this.renderItems(this.menuId),this},t.prototype.renderItems=function(e){var t,n,r;return n=function(){switch(this.objectType){case"weibo":return this.renderWeibo.bind(this);case"github":return this.renderGithub.bind(this);case"evernote":case"yinxiang":return this.renderEvernote.bind(this);case"processon":return this.renderProcesson.bind(this);case"jinshuju":return this.renderJinshuju.bind(this)}}.call(this),(t=this.cache[this.objectType][e])?n({menuId:e,items:t}):(this.$list.empty(),this.showLoadingIndicator(this.$list),n({menuId:e,success:(r=this,function(t){return r.cache[r.objectType][e]=t,r.hideLoadingIndicator({animated:!1})}),error:function(e){return function(t){return g.error({message:String(t)}),e.hideLoadingIndicator({animated:!1})}}(this)})),this},t.prototype.renderJinshuju=function(e){return this.jinshujuPickerView.renderDetail(e.menuId)},t.prototype.renderProcesson=function(e){var t,n;return e.items?(this.processon.cacheSet(e.menuId),this.dealProcessonRender(e.items)):(t=e.menuId,this.processon||(this.processon=new m({accessToken:this.tokens[this.objectType]})),this.processon.reset(),this.processon[t](null,{success:(n=this,function(r){if(n.$(".object-menu-item[data-id="+t+"]").parent().hasClass("active"))return"success"===r.status?(e.success(r.data),n.dealProcessonRender(r.data)):(e.error(),n.tokenInvalidHandler())})}))},t.prototype.dealProcessonRender=function(e){return _.isEmpty(e)?this.emptyHint():this.$list.html(this.requestSubView(h,{data:e,processon:this.processon}).$el)},t.prototype.parseDataWeibo=function(e){return e.map((t=this,function(e){return{_id:""+e.mid,data:_.extend({src:"http://api.weibo.com/2/statuses/go?access_token="+t.tokens[t.objectType]+"&uid="+e.user.id+"&id="+e.id},e)}}));var t},t.prototype.renderWeibo=function(e){var t;return e.items?this.$list.html(this.requestSubView(y,{data:e.items}).$el):function(){switch(e.menuId){case this.MENUS[this.objectType][0].id:return k.getHome;case this.MENUS[this.objectType][1].id:return k.getUser;case this.MENUS[this.objectType][2].id:return k.getMentions;case this.MENUS[this.objectType][3].id:return k.getBilateral}}.call(this)({access_token:this.tokens[this.objectType],success:(t=this,function(n){if(t.$(".object-menu-item[data-id="+e.menuId+"]").parent().hasClass("active"))return(n=t.parseDataWeibo(n)).length?(e.success(n),t.$list.html(t.requestSubView(y,{data:n}).$el)):t.emptyHint()}),error:e.error,tokenInvalidHandler:function(t){return function(n){return e.error(n),t.tokenInvalidHandler()}}(this)}),this},t.prototype.renderEvernote=function(e){return this.evernotePickerView=this.requestSubView(i,{bookId:e.menuId,type:this.objectType,token:this.tokens[this.objectType],cache:this.cache}),this.stopListening(this.evernotePickerView),this.listenTo(this.evernotePickerView,"empty",function(e){if(e===this.menuId)return this.emptyHint()}),this.listenTo(this.evernotePickerView,"error",function(e){if(e===this.menuId)return this.tokenInvalidHandler()}),this.$list.html(this.evernotePickerView.$el)},t.prototype.parseDataGithub=function(e){return e.map((t=this,function(e){return e.repo=t.currentGithubRepo,e.type=t.menuId,"branch"===e.type&&(e.sha=e.type+"_"+e.commit.sha,e.html_url=e.repo.html_url+"/branches"),{_id:""+(e.id||e.sha),data:e}}));var t},t.prototype.renderGithub=function(e){var t;return e.items?this.$list.html(this.requestSubView(a,{data:e.items}).$el):function(){switch(e.menuId){case this.MENUS[this.objectType][0].id:return l.getPullRequests;case this.MENUS[this.objectType][1].id:return l.getIssues;case this.MENUS[this.objectType][2].id:return l.getCommits;case this.MENUS[this.objectType][3].id:return l.getBranchs}}.call(this)({owner:this.currentGithubRepo.owner.login,repo:this.currentGithubRepo.name,access_token:this.tokens[this.objectType],success:(t=this,function(n){if(t.$(".object-menu-item[data-id="+t.menuId+"]").parent().hasClass("active"))return(n=t.parseDataGithub(n)).length?(e.success(n),t.$list.html(t.requestSubView(a,{data:n}).$el)):t.emptyHint()}),error:e.error,tokenInvalidHandler:function(t){return function(n){return e.error(n),t.tokenInvalidHandler()}}(this)}),this},t.prototype.selectItem=function(e){var t,n,r;if(!(t=$(e.currentTarget)).hasClass("disabled"))return!t.hasClass("selected")&&this.selected.length>=10?g.error({message:tb_i18n.get("object.picker.exceed.number")}):(t.toggleClass("selected"),n=t.data("id"),t.hasClass("selected")?this.selected.push(n):v.removeItem(this.selected,n),this.onSelect(this.selected.map((r=this,function(e){return{type:r.objectType,data:r.findCache(r.objectType,e)}}))),this)},t.prototype.handleWeiboUser=function(e){return e.preventDefault(),this},t.prototype.emptyHint=function(){var e;return e=this.$(".object-menu-item[data-id="+this.menuId+"]").data("name"),this.$list.html(d({description:tb_i18n.get("integration.placeholder",e)}))},t}(),_.extend(p.prototype,f),e.exports=p},"5VAUxBWw":function(e,t,n){},"5eNik3+6":function(e,t,n){"use strict";var r;n.r(t),function(e){e.Backbone="Backbone",e.React="React"}(r||(r={}));var o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n.n(i),a=n("i8i4LrFt"),c=n.n(a),l=n("OmupbwLD"),u=n.n(l),p=n("vmWJWrVe"),d=n.n(p),h=n("pOv4eJ7f"),m=n("CxY0Mkc1");n("kZqo3QZT");var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),Object.defineProperty(t.prototype,"viewName",{get:function(){return"PluginModalIframeView"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"plugin-modal-iframe-view"},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){this.options=e,this.el.style.width=e.width,this.el.style.height=e.height,this.appendToDOM(),this.render()},t.prototype.appendToDOM=function(){this.hostNode=document.createElement("div"),this.el.appendChild(this.hostNode)},t.prototype.onRemove=function(){this.options.onRemove&&this.options.onRemove()},t.prototype.render=function(){var e=this.options,t=e.withContainer,n=e.url,r=e.platformAPI,o=e.containerOptions;return t?(this.container=new h.Container(n,r,o),this.container.setup(this.hostNode),this):(this.iframe=document.createElement("iframe"),this.iframe.frameBorder="0",this.iframe.src=m.format(n),this.hostNode.innerHTML="",this.hostNode.appendChild(this.iframe),this)},t.prototype.remove=function(){return this.container&&this.container.remove(),this.onRemove(),e.prototype.remove.call(this),this},t}(d.a),g=n("GESwhXbR"),v=n("rK+Qbpe7"),b=n.n(v),y=n("CxY0Mkc1"),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iframeDivRef=null,t.iframeRef=null,t.state={containerHasSetup:!1},t.setModalRef=function(e){t.modalRef=e},t.setIframeDivRef=function(e){t.iframeDivRef=e,t.forceUpdate()},t.setIframeRef=function(e){t.iframeRef=e,t.forceUpdate()},t}return o.d(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.withContainer,n=e.url,r=e.platformAPI,o=e.containerOptions;t&&(this.container=new h.Container(n,r,o)),this.initIframe()},t.prototype.componentDidUpdate=function(){this.state.containerHasSetup||this.initIframe()},t.prototype.componentWillUnmount=function(){this.removeContainer(),this.unsubscribe()},t.prototype.getIframeStyle=function(){return o.a({width:"100%",height:"inherit"},this.props.iframeStyle||{})},t.prototype.initIframe=function(){var e=this,t=this.props,n=t.withContainer,r=t.url,o=t.message$;n?this.iframeDivRef&&(this.container.setup(this.iframeDivRef),this.container.style(this.getIframeStyle()),o&&(this.messageSub$=o.subscribe(function(t){e.container.push(t)})),this.setState({containerHasSetup:!0})):this.iframeRef&&o&&(this.iframeRef.onload=function(){var t=y.parse(r),n=t.protocol+"//"+t.host;e.messageSub$=o.subscribe(function(t){e.iframeRef.contentWindow&&e.iframeRef.contentWindow.postMessage(t,n)})},this.setState({containerHasSetup:!0}))},t.prototype.removeContainer=function(){this.container&&this.container.remove()},t.prototype.unsubscribe=function(){this.messageSub$&&this.messageSub$.unsubscribe()},t.prototype.renderIframe=function(){return this.props.withContainer?s.a.createElement("div",{ref:this.setIframeDivRef}):s.a.createElement("iframe",{ref:this.setIframeRef,src:y.format(this.props.url),frameBorder:0,style:this.getIframeStyle()})},t.prototype.render=function(){return s.a.createElement(g.Modal,o.a({},this.props.modalProps,{className:b.a.modal,ref:this.setModalRef}),this.renderIframe())},t}(s.a.PureComponent),_=function(){function e(e,t,n,o){this.type=n,this.hostNodeId=t,this.viewOptions=e,this.initMountEl(),this.type===r.Backbone?this.initBackboneWindow(o):this.initReactModal(o)}return e.prototype.open=function(){this.type===r.Backbone?this.openBackboneWindow():this.openReactModal()},e.prototype.close=function(){this.type===r.Backbone?this.removeBackboneWindow():this.closeReactModal()},e.prototype.remove=function(){this.close(),this.mountEl.remove()},e.prototype.initMountEl=function(){this.mountEl=document.createElement("div"),this.mountEl.id=this.hostNodeId||"plugin-layer-host-node",document.body.appendChild(this.mountEl)},e.prototype.initBackboneWindow=function(e){return this.windowView=new u.a(e),this.mountEl.appendChild(this.windowView.el),this},e.prototype.initReactModal=function(e){var t=this,n=s.a.createElement(k,o.a({},this.viewOptions,{modalProps:o.a({},e,{onHide:this.closeReactModal.bind(this),mountIn:function(){return t.mountEl}})}));return this.modalView=c.a.render(n,this.mountEl),this},e.prototype.openBackboneWindow=function(){this.windowView&&this.windowView.open(f,o.a({},this.viewOptions,{onRemove:this.remove.bind(this)}))},e.prototype.openReactModal=function(){this.modalView&&this.modalView.modalRef&&this.modalView.modalRef.open()},e.prototype.removeBackboneWindow=function(){this.windowView&&this.windowView.remove(),this.windowView=null},e.prototype.closeReactModal=function(){this.modalView&&this.modalView.modalRef&&this.modalView.modalRef.close(),this.mountEl&&(c.a.unmountComponentAtNode(this.mountEl),this.modalView=null)},e}(),w=n("Znm+KY82"),C=n.n(w),S=n("UfWWTuu5"),E=n.n(S),T=n("U3rZ7LW4"),I=n.n(T),M=n("mNz5hSha"),j=n.n(M),P=n("8yf6doCl"),x=n("nDsjpj50"),N=new(function(){function e(){this.pluginLayerObjects=[],this.messageBus$=new P.Subject,this.bottomLiftEmitter$=new x.BehaviorSubject(!1),this.bottomLifted=!1}return Object.defineProperty(e.prototype,"bottomLiftEmitter",{get:function(){return this.bottomLiftEmitter$},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pluginLayers",{get:function(){return this.pluginLayerObjects},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sum",{get:function(){return this.pluginLayerObjects.length},enumerable:!0,configurable:!0}),e.prototype.open=function(e,t,n,r,i){void 0===t&&(t="");var s=t||j()("plugin-layer__"),a=this.findIdIndex(s),c=this.initialMessageSub(i),l=new _(o.a({},e,{message$:c}),s,n,r);a>=0&&(this.pluginLayerObjects[a].layer&&this.pluginLayerObjects[a].layer.remove(),this.cleanPluginLayers(a)),this.pluginLayerObjects.push({layerId:s,layer:l}),l.open()},e.prototype.liftBottom=function(e){void 0===e&&(e="");var t=e||j()("plugin-layer__self-contained-layer");this.toggleBottomLift(!0),this.pluginLayerObjects.push({layerId:t})},e.prototype.restoreBottom=function(){this.toggleBottomLift(!1)},e.prototype.pushMessage=function(e,t){var n=t||"";if(!t){if(!this.pluginLayerObjects.length)return;n=this.pluginLayerObjects[this.pluginLayerObjects.length-1].layerId}this.messageBus$.next({layerId:n,message:e})},e.prototype.close=function(e,t){if(this.bottomLifted&&1===this.pluginLayerObjects.length&&this.toggleBottomLift(!1),!e){var n=this.pluginLayerObjects[this.pluginLayerObjects.length-1];return n.layer&&n.layer.remove(),void this.cleanPluginLayers(this.pluginLayerObjects.length-1)}var r=this.findIdIndex(e);if(r>=0)return I()(this.pluginLayerObjects,function(e,t){t>=r&&e.layer&&e.layer.remove()}),void this.cleanPluginLayers(r)},e.prototype.remove=function(){I()(this.pluginLayerObjects,function(e){e.layer&&e.layer.remove()}),this.cleanPluginLayers(0)},e.prototype.destroy=function(){this.remove(),this.messageBus$.complete(),this.bottomLiftEmitter$.complete()},e.prototype.findIdIndex=function(e){return E()(this.pluginLayerObjects,function(t){return t.layerId===e})},e.prototype.initialMessageSub=function(e){if(!e||e.length)return this.messageBus$.filter(function(t){return!e||!!~e.indexOf(t.layerId)})},e.prototype.cleanPluginLayers=function(e){this.pluginLayerObjects=this.pluginLayerObjects.slice(0,e)},e.prototype.toggleBottomLift=function(e){this.bottomLifted=C()(e)?e:!this.bottomLifted,this.bottomLiftEmitter$.next(this.bottomLifted)},e}());n.d(t,"PluginLayerViewType",function(){return r}),n.d(t,"PLUGIN_LAYER_PREFIX",function(){return"plugin-layer__"}),n.d(t,"PLUGIN_LAYER_SELF_CONTAINED_LAYER",function(){return"plugin-layer__self-contained-layer"}),n.d(t,"PluginLayer",function(){return _}),n.d(t,"PluginLayerManager",function(){return N})},"5gmgag9c":function(e,t,n){var r,o,i,s=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=n("a+N5u/Cl"),i=n("2qRnoGmE"),r=n("bZr3G77e"),e.exports=function(){function e(e){this.accessToken=e.accessToken,this.HTTP_PRE=i.INTEGRATION_HOST+"/jinshuju/v4/",this.jinshujuURLRoot="https://jinshuju.net",this.cache={forms:[]}}return e.prototype._get=function(e,t,n){var i,s;return null==t&&(t={}),null==n&&(n={}),o.extend(t,{access_token:this.accessToken}),s=function(e){return"function"==typeof n.success?n.success(e):void 0},i=function(e){return"function"==typeof n.error?n.error(e):void 0},r.ajax({method:"GET",url:e,data:t,silentError:!0,success:s,error:i})},e.prototype.getForms=function(e){var t,n,r,i;return null==e&&(e={}),r=this.HTTP_PRE+"forms",n=e.success,e.success=(i=this,function(e){return i.cache.forms=o.union(i.cache.forms,e),"function"==typeof n?n(e):void 0}),t={per_page:50},this._get(r,t,e)},e.prototype.getFormDetail=function(e,t){var n;return null==t&&(t={}),n=this.HTTP_PRE+"forms/"+e,this._get(n,null,t)},e.prototype.getItemsBySerialNumbers=function(e,t,n){var r,o,i;for(null==n&&(n={}),i=this.HTTP_PRE+"forms/"+e+"/entries?",r=0,o=t.length;r<o;r++)i=i+"serial_number[]="+t[r]+"&";return this._get(i,null,n)},e.prototype.formStatusSemantization=function(e){var t,n;return n={public:tb_i18n.get("jinshuju.permission.public.des"),login:tb_i18n.get("jinshuju.permission.login.des"),password:tb_i18n.get("jinshuju.permission.password.des"),private:tb_i18n.get("jinshuju.permission.private.des")}[e.setting.permission],t={open:tb_i18n.get("jinshuju.open.rule.open.des"),closed:tb_i18n.get("jinshuju.open.rule.closed.des")}[e.setting.open_rule],tb_i18n.get("jinshuju.form.status.semantization",n,t,e.entries_count)},e.prototype.formTypesData=function(e){return[{tb_type:"normal",title:tb_i18n.get("jinshuju.form.normal.title"),url:this.jinshujuURLRoot+"/f/"+e.token,isClosed:"closed"===e.setting.open_rule,closedHint:tb_i18n.get("jinshuju.form.normal.closed.hint"),hint:tb_i18n.get("jinshuju.form.normal.hint")},{tb_type:"result",title:tb_i18n.get("jinshuju.form.result.title"),url:e.setting.result_url,isClosed:"closed"===e.setting.result_state,closedHint:tb_i18n.get("jinshuju.form.result.closed.hint"),hint:tb_i18n.get("jinshuju.form.result.hint")},{tb_type:"search",title:tb_i18n.get("jinshuju.form.search.title"),url:e.setting.search_url,isClosed:"closed"===e.setting.search_state,closedHint:tb_i18n.get("jinshuju.form.search.closed.hint"),hint:tb_i18n.get("jinshuju.form.search.hint")},{tb_type:"detail",title:tb_i18n.get("jinshuju.form.detail.title"),url:this.jinshujuURLRoot+"/forms/"+e.token+"/entries",isClosed:!e.entries_count,closedHint:tb_i18n.get("jinshuju.form.detail.closed.hint"),hint:tb_i18n.get("jinshuju.form.detail.hint")}]},e.prototype.getReadableItemsData=function(e,t){return o.chain(t).map((n=this,function(t){return n.getReadableItemData(e,t)})).sortBy(function(e){return e.entry.serial_number}).value();var n},e.prototype.getReadableItemData=function(e,t){var n,r,i,s,a;return i=this._getSupportTypesWithFns(),s=[],o.mapObject(t,(a=this,function(t,n){var r,o,c;if(/^field_/.test(n)&&(o=(r=a._getValueByField(e,n)).type,c="function"==typeof i[o]?i[o](r,t):void 0))return s.push(c)})),t.total_price&&s.unshift(t.total_price),n=e.token,r=t.serial_number,{url:this.jinshujuURLRoot+"/forms/"+n+"/entries?serial_number="+r,entry:{serial_number:r,content:s.join(", ")}}},e.prototype._getValueByField=function(e,t){return o.find(e.fields,function(e){return e.api_code===t})},e.prototype._formDetailFieldsFilter=function(e){var t;return null==e&&(e=[]),t=o.keys(this._getSupportTypesWithFns()),o.filter(e,function(e){var n;return n=e.type,s.call(t,n)>=0})},e.prototype._getSupportTypesWithFns=function(){return{phone:this._getDataValue,email:this._getDataSimple,address:this._getDataAddress,geo_location:this._getDataGeoLocation,telephone:this._getDataSimple,single_line_text:this._getDataSimple,paragraph_text:this._getDataSimple,single_choice:this._getDataChoices,multiple_choice:this._getDataChoices,likert:this._getDataLikert,matrix:this._getDataMatrix,number:this._getDataSimple,time:this._getDataTime,date:this._getDataSimple,drop_down:this._getDataChoices,link:this._getDataSimple,rating:this._getDataRating,cascade_drop_down:this._getDataCascadeDropDown,attachment:this._getDataAttachment}},e.prototype._getDataValue=function(e,t){return t.value},e.prototype._getDataAddress=function(e,t){return o.values(t).join(" ")},e.prototype._getDataGeoLocation=function(e,t){return t.address},e.prototype._getDataSimple=function(e,t){return t},e.prototype._getDataChoices=function(e,t){var n;return o.isArray(t)||(t=new Array(t)),n=[],o.each(t,function(t){var r;if(r=o.find(e.choices,function(e){return e.value===t}))return n.push(r.name)}),n.join(",")},e.prototype._getDataLikert=function(e,t){var n,r,i,s,a,c,l,u;for(l=e.statements,r=e.choices,u=[],i=0,a=t.length;i<a;i++)s=t[i],c=o.find(l,function(e){return e.value===s.statement}),n=o.find(r,function(e){return e.value===s.choice}),(null!=c?c.name:void 0)&&(null!=n?n.name:void 0)&&u.push(c.name+":"+n.name);return u.join(",")},e.prototype._getDataMatrix=function(e,t){var n,r,i;return i=e.statements,n=e.dimensions,r=[],o.each(t,function(e){var t,s,a;if(t=o.find(i,function(t){return t.value===e.statement}).name)return s=[],o.mapObject(e.dimensions,function(e,t){var r;if(r=o.find(n,function(e){return e.value===t}).name)return s.push(r+": "+e)}),a=s.join(","),r.push(t+": ("+a+")")}),r.join(",")},e.prototype._getDataTime=function(e,t){return t.hour+":"+t.minute},e.prototype._getDataRating=function(e,t){return tb_i18n.get("jinshuju.rating",t)},e.prototype._getDataCascadeDropDown=function(e,t){var n;return n="",o.each(e.choices,function(e){var r;if(e.value===t.level_1&&(r=o.find(e.sub_choices,function(e){return e.value===t.level_2})))return n=e.name+"-"+r.name}),n},e.prototype._getDataAttachment=function(e,t){return o.pluck(t,"name").join(",")},e}()},"5i+7voIP":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R,D,L,z,A=function(e,t){return function(){return e.apply(t,arguments)}},V={}.hasOwnProperty;T=n("a+N5u/Cl"),h=n("q1tIBJhx"),z=n("sa1Ed382"),C=n("3eMzznN/"),P=n("90U+kJWN").getExecutor,S=n("vmWJWrVe"),u=n("wd/RKGTj"),(N=n("GESwhXbR")).Alert,i=N.DatePicker,d=n("77NnVLwu"),_=n("oq1bWpp9"),m=n("4bWDEe5E"),E=n("OmupbwLD"),b=n("zXL2TPnq"),p=n("n2Lzi2oi"),l=n("BsTK5jZO"),c=n("7UQIdnmo"),O=n("PVLVtUMG"),f=O.StatusCheckboxTaskflow,g=O.StatusTodoboxGeneric,w=n("iCr2nGAb").TaskflowStatusesDropdown,j=n("iCr2nGAb").getDefaultScenarioAndConfig,R=n("zH+Yaocm"),x=R.mockTaskflowStatuses,I=R.filterTaskflowNotEndStatuses,D=n("8KNpsyVU"),L=D.showVerifyBindModal,M=D.getAccountBind,r=n("miDVAhhc"),s=n("Jh8CjTGF"),a=n("K49tK4Jd"),o=n("uhCh73nO"),k=n("v/MBtkV8"),y=n("H5U46Bxa"),v=n("AxfCNEe5").SubTaskExecutor,e.exports=function(e){function t(){return this.inviteMoreMember=A(this.inviteMoreMember,this),this.setTaskflowStatus=A(this.setTaskflowStatus,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)V.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,S),t.prototype.viewName="SubtaskCardView",t.prototype.className="detail-infos-subtask-view detail-infos-wrapper",t.prototype.events={"click .subtask-add-handler:not(.ban)":"edit","keydown .subtask-creator .subtask-input":"quickSubmit","click .subtask-creator .cancel-subtask-handler":"cancel","click .subtask-creator .save-subtask-handler":"submit"},t.prototype.initialize=function(e){return!!((null!=e?e.subtasksCollection:void 0)&&(null!=e?e.taskModel:void 0))&&(this.options=e,this.taskModel=e.taskModel,this.subtasksCollection=e.subtasksCollection,this.membersCollection=e.membersCollection,this.subtaskDefaultScenarioFieldConfig=e.subtaskDefaultScenarioFieldConfig,this.creating=!1,this.taskflowStatus=null,this.subscribe(d.fetch$(this.taskModel.get("_projectId")).do((t=this,function(e){t.projectModel=e})).concatMap(function(e){return function(){return e.loadScenarioFieldConfigs()}}(this)).do(function(e){return function(t){var n;return e.configCollection=t,e.taskFieldConfig=null!=(n=e.configCollection)?n.get(e.taskModel.get("_scenariofieldconfigId")):void 0,e.render(),e.listen(),e._initGtaAction()}}(this))));var t},t.prototype.render=function(){var e;return this.renderBasic(),this.renderHeader(),this.renderSubtasks(),this.taskModel.hasPermission("put")&&!this.taskModel.get("isArchived")&&this.setupSubtaskSortable(),this.renderInvisible(),this.renderCreatorToggler(),this.setTaskFieldConfig(),this.renderSubtaskTaskFieldConfig(),this._executorId=this.taskModel.get("_executorId"),e=P(this._executorId,this.getMembers(),this.taskModel),this.renderExecutor(e)},t.prototype.listen=function(){return this.listenTo(this.taskModel,"change:isArchived",this.render),this.listenTo(this.subtasksCollection,"add",this.renderSubtask),"add change:isDone change:isVisible remove destroy",this.listenTo(this.subtasksCollection,"add change:isDone change:isVisible remove destroy",this.renderInvisible),this.listenTo(this.subtasksCollection,"sort change:isVisible",function(){return this.$list.empty(),this.renderSubtasks()}),this.listenTo(this.subtasksCollection,"add remove change:isDone",this.renderHeader),this.listenTo(this.taskModel,"change:isDone",this.renderCreatorToggler),this.listenTo(this.taskModel,"change:_scenariofieldconfigId",this.renderSubtaskTaskFieldConfig),this},t.prototype.renderBasic=function(){var e;return this.$el.html(r({hasPermission:this.hasPermission(),totalCount:this.subtasksCollection.length})),this.$subtaskCard=this.$(".subtask-card"),this.$header=this.$(".subtask-header"),this.$list=this.$(".subtasks-list"),this.$invisible=this.$(".invisible-wrapper"),this.$creatorToggler=this.$(".creator-toggler"),this.$creator=this.$(".subtask-creator"),this.$subtaskIconWrap=this.$(".subtask-icon-wrap"),this.subtaskIconWrapEl=null!=(e=this.$subtaskIconWrap)?e.get(0):void 0,this.$input=this.$(".subtask-input").flexText(),this.$submit=this.$(".save-subtask-handler"),this.$taskFieldConfigWrapper=this.$(".subtask-field-config-wrapper"),this.isTaskflowStatusEnabled()&&this.$subtaskIconWrap.addClass("fixed-width"),this.renderDatePicker(),this},t.prototype.renderHeader=function(){return this.$header.html(s({totalCount:this.subtasksCollection.length,doneCount:this.subtasksCollection.filter(function(e){return e.get("isDone")}).length}))},t.prototype.renderInvisible=function(){var e,t;return e=t=0,this.subtasksCollection.each(function(n){if(!n.checkIsVisible()&&(e++,!n.get("isDone")))return t++}),this.$invisible.html(a({total:e,undo:t}))},t.prototype.renderCreatorToggler=function(){return this.$creatorToggler.html(o({hasPermission:this.hasPermission(),isArchived:this.taskModel.get("isArchived"),isDone:this.taskModel.get("isDone")}))},t.prototype.loadScenarioFieldConfigs=function(){var e;return this.projectModel?(e=m.genCacheId(this.projectModel.id,"task"),C.warehouse.resolveFetch(m,e,{attrs:{withTaskflowstatus:!0},boundToObjectType:"task"})):Promise.resolve(void 0)},t.prototype.isTaskflowStatusEnabled=function(){var e;return null!=(e=this.projectModel)?e.isTaskflowEnabled():void 0},t.prototype.renderSubtaskTaskCheckBox=function(){var e,t,n;if(this.subtaskIconWrapEl)return e=(t=this.isTaskflowStatusEnabled())?f:g,n=h.createElement(e,{kind:this.taskflowStatus.kind,title:this.taskflowStatus.name,muted:!t}),t?this.requestReactView(this.subtaskIconWrapEl,w,{taskflowStatuses:this.taskflowStatuses,selectedStatus:this.taskflowStatus,onSelect:this.setTaskflowStatus,trigger:n}):this.requestReactView(this.subtaskIconWrapEl,h.Fragment,{children:n})},t.prototype.setTaskflowStatus=function(e){if(this.taskflowStatus._id!==e)return this.taskflowStatus=T.find(this.taskflowStatuses,function(t){return t._id===e}),this.renderSubtaskTaskCheckBox()},t.prototype.renderSubtaskTaskFieldConfig=function(){var e;if(this.projectModel&&this.taskFieldConfig)return null!=(e=this.taskFieldConfigView)&&e.remove(),this.taskFieldConfigView=this.requestSubView(k,{projectModel:this.projectModel,_tasklistId:this.taskModel.get("_tasklistId"),_parentModelConfigId:this.taskFieldConfig._id,isSubtask:!0}),this.taskFieldConfigView.$el.prependTo(this.$taskFieldConfigWrapper),this.stopListening(this.taskFieldConfigView,"setConfig"),this.listenTo(this.taskFieldConfigView,"setConfig",this.setTaskFieldConfig)},t.prototype.setTaskFieldConfig=function(e){var t,n,r,o,i,s;if(!e||!this.taskFieldConfig||e._id!==this.taskFieldConfig._id)return(t=null!=(i=this.configCollection)?i.toJSON():void 0)&&(r=e||this.subtaskDefaultScenarioFieldConfig,n=(s=j(t,r)).defaultConfig,o=s.defaultStatus,this.taskFieldConfig=n),this.isTaskflowStatusEnabled()?(this.taskflowStatuses=n.taskflowstatuses,this.taskflowStatus=o):(this.taskflowStatuses=x(),this.taskflowStatuses=I(this.taskflowStatuses),this.taskflowStatus=this.taskflowStatuses[0]),this.renderSubtaskTaskCheckBox()},t.prototype.renderExecutor=function(e){var t,n;if(t=this.$creator.find(".avatar").get(0))return this.requestReactView(t,v,{executor:e,disabled:!1,inviteShowed:!this.isIndieTask()&&this.projectModel.hasPermission("post.member"),inviteMoreMember:this.inviteMoreMember,contextId:l.getContextId({_projectId:this.taskModel.get("_projectId"),_organizationId:this.taskModel.get("_organizationId")}),onSelect:(n=this,function(e){var t;if(t=e.id,n._executorId!==t)return n._executorId=l.ExecutorInput.noExecutor.check(e)?void 0:t,n.renderExecutor({_id:t,name:e.name,avatarUrl:e.avatar.src}),n._setCurrentGtaAction({action:"change assignee"}),z.gta.event(n._getCurrentGtaAction())})}),this},t.prototype.renderSubtasks=function(){return this.subtasksCollection.models.forEach((e=this,function(t){if(t.checkIsVisible())return e.renderSubtask(t)}));var e},t.prototype.renderSubtask=function(e){var t,n;return this.subtaskViewsMap||(this.subtaskViewsMap=new Map),t=e.id,n=this.subtaskViewsMap.get(t)||this.requestSubView(b,{where:this.options.where,subtaskModel:e,taskModel:this.taskModel,getMembers:this.getMembers.bind(this)}),this.subtaskViewsMap.has(t)&&n.delegateEvents(),this.subtaskViewsMap.set(t,n),n.$el.appendTo(this.$list)},t.prototype.isIndieTask=function(){return this.taskModel.isIndie()},t.prototype.getMembers=function(){var e;return(null!=(e=this.membersCollection)?e.toJSON():void 0)||this.taskModel.get("involvers")||null},t.prototype.inviteMoreMember=function(){var e;if(!this.isIndieTask())return M(this.projectModel.get("_organizationId")).then((e=this,function(t){return t?e.requestSubView(E).open(c,{projectModel:e.projectModel,qrCodeType:"project"}):(L(),z.gta.event({action:"invitation blocked",page:"SubTasks Page",type:"project"}))})),this},t.prototype.setupSubtaskSortable=function(){return this.$list.sortable({items:".subtask-view:not(.done)",helper:"clone",placeholder:"subtask-drag-placeholder",tolerance:"pointer",zIndex:2001,axis:"y",start:function(e,t){return t.placeholder.height(t.helper.outerHeight())},update:function(e,t){var n,r,o,i,s,a,c;return r=null!=(i=t.item.prev())?i.data("id"):void 0,n=(null!=(s=null!=(o=_.find(r))?o.get("pos"):void 0)?s:0)+1,c=t.item.data("id"),null!=(a=_.find(c))?a.saveAttr("pos",n):void 0}}),this},t.prototype.renderDatePicker=function(){var e,t,n,r;if(this.hasPermission())return e=(t=this.dueDate)?(n=C.formatDate(t,{isUsePref:!0})).dateString+" "+n.timeFormatString:"<span class='icon icon-calendar2'></span>",this.requestReactView(this.$(".task-creator-datepicker")[0],i,{date:t,defaultOpenDate:new u("18:00","HH:mm"),displayText:e,nested:!1,mountIn:(r=this,function(){return r.$creator[0]}),onOpen:function(e){return function(){return e._setCurrentGtaAction({action:"edit due date"}),z.gta.event(e._getCurrentGtaAction())}}(this),onChange:function(e){return function(t){var n;return n=t.date,e.saveDueDate(n)}}(this),onClear:function(e){return function(){return e.saveDueDate()}}(this)})},t.prototype.saveDueDate=function(e){return u(this.dueDate).isSame(e)||(this.dueDate=e,this.renderDatePicker(),this.$input.focusAtEnd()),this},t.prototype.edit=function(){var e,t;return e=[".subtask-add-handler",".subtask-field-config-wrapper",".member-menu-component",".scenario-locator-dropdown"].join(","),this.taskModel.get("isArchived")||(this._setCurrentGtaAction({action:"add content"}),z.gta.event(this._getCurrentGtaAction()),this.$subtaskCard.addClass("creating"),this.$input.focusAtEnd(),this.$creator.handleClickOutside((t=this,function(){if(!t.$input.val().trim())return t.cancel()}),"click",e)),this},t.prototype.cancel=function(){return this.$subtaskCard.removeClass("creating"),this},t.prototype.quickSubmit=function(e){return 13===e.keyCode&&(e.preventDefault(),this.submit()),this},t.prototype.submit=function(e){var t,n,r,o;if(!this.creating&&(e?this._setCurrentGtaAction({action:"added content",method:"click"}):this._setCurrentGtaAction({action:"added content",method:"keyboard"}),t=this.$input.val().trim(),n=T.compact(t.split(/\r\n|\r|\n/)),!T.isEmpty(n)))return!this.isIndieTask()&&T.some(this.taskFieldConfig.scenariofields,function(e){return e.required})?(this.$subtaskCard.removeClass("creating"),r=this.taskModel.toJSON(),this.requestSubView(E).open(y,{_organizationId:r._organizationId,_projectId:r._projectId,_sprintId:r._sprintId,_stageId:r._stageId,_tasklistId:r._tasklistId,_creatorId:z.user.id,_executorId:this._executorId,scenarioFieldConfigId:this.taskFieldConfig._id,_taskflowstatusId:null!=(o=this.taskflowStatus)?o._id:void 0,dueDate:this.dueDate,content:t,ancestorId:r._id,success:this.createSubtasksSuccessHandler.bind(this),proTemplateConfigType:"subtask",visible:r.visible})):(this.creating=!0,n.length>1?(this._setCurrentGtaAction({category:"multiple"}),this.createMultipleSubtasks(n,t)):(this._setCurrentGtaAction({category:"single"}),this.createSubtask(t)))},t.prototype.createSubtasksSuccessHandler=function(){return this.$input.val(""),this.$input.trigger("change"),this.resetSubmitStatus(),z.gta.event(this._getCurrentGtaAction())},t.prototype.resetSubmitStatus=function(){return this.creating=!1,this.$input.focusAtEnd()},t.prototype.createSubtask=function(e){var t,n,r;return t={_creatorId:z.user.id,_executorId:this._executorId,_projectId:this.taskModel.get("_projectId"),_organizationId:this.taskModel.get("_organizationId"),_tasklistId:this.taskModel.get("_tasklistId"),_stageId:this.taskModel.get("_stageId"),_scenariofieldconfigId:null!=(n=this.taskFieldConfig)?n._id:void 0,dueDate:this.dueDate,content:e.replace(/\s+/g," "),visible:this.taskModel.get("visible")},this.isTaskflowStatusEnabled()&&(t=T.extend(t,{_taskflowstatusId:this.taskflowStatus._id})),this.subtasksCollection.create(t,{wait:!0,success:(r=this,function(e){return e.set("task",r.taskModel.toJSON()),r.createSubtasksSuccessHandler()}),error:this.resetSubmitStatus.bind(this)})},t.prototype.createMultipleSubtasks=function(e,t){var n;return 50,e.length>50?this.requestSubView(p,{$toggler:this.$submit,title:tb_i18n.get("subtask.creator.multiple.too.many"),description:tb_i18n.get("subtask.creator.multiple.too.many.desc",50,e.length),cancelStr:tb_i18n.get("subtask.creator.multiple.too.many.confirm"),onCancel:this.resetSubmitStatus.bind(this),onHidden:this.resetSubmitStatus.bind(this)}).show():this.requestSubView(p,{$toggler:this.$submit,title:tb_i18n.get("subtask.creator.multiple"),description:tb_i18n.get("subtask.creator.multiple.desc",e.length),cancelStr:tb_i18n.get("subtask.creator.multiple.one"),confirmStr:tb_i18n.get("subtask.creator.multiple.all",e.length),onCancel:(n=this,function(){return n._setCurrentGtaAction({category:"single"}),n.createSubtask(t)}),onConfirm:this.batchCreateSubtasks.bind(this,e),onHidden:this.resetSubmitStatus.bind(this)}).show()},t.prototype.batchCreateSubtasks=function(e){var t,n;return n={_id:this.taskModel.id,_executorId:this._executorId||void 0,dueDate:this.dueDate,subtasks:e,_scenariofieldconfigId:null!=(t=this.taskFieldConfig)?t._id:void 0,visible:this.taskModel.get("visible")},this.taskModel.batchCreateSubtasks(n,{success:this.createSubtasksSuccessHandler.bind(this),error:this.resetSubmitStatus.bind(this)})},t.prototype._initGtaAction=function(){return this._gtaAction={action:"added content",control:"Subtask Display",type:this.taskModel.isSubtask()?"subtask":"task",series:this.taskModel.get("ancestorIds").length+1}},t.prototype._setCurrentGtaAction=function(e){return T.extend(this._gtaAction,e)},t.prototype._getCurrentGtaAction=function(){return this._gtaAction},t.prototype.isCase=function(){return this.taskModel.get("isArchived")?this.subtasksCollection.length:!!this.taskModel.get("subtaskCount").total},t.prototype.hasPermission=function(){return this.taskModel.hasPermission("post")},t}()},"5kP0hkv0":function(e,t,n){},"5m7PfWoQ":function(e,t,n){"use strict";n.r(t),n.d(t,"parseObjectLinkUrl",function(){return c}),n.d(t,"isObjectLinkUrl",function(){return l}),n.d(t,"isExternalUrl",function(){return u});var r=n("mrSGxOB2"),o=n("2qRnoGmE"),i=new RegExp("^(https?:\\/\\/)((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+&:]*)*(\\?[;&a-z\\d%_.,~+&:=-]*)?(\\#[-a-z\\d_]*)?$","i"),s=o.HOST+"/[^\\s<]{3,}?/(task|post|event|works)/([0-9a-z]{24})(?:(?:/work/([0-9a-z]{24}))?)?",a=new RegExp(s);function c(e){if(!l(e))return{};var t=e.match(a),n=r.f(t,4)[3],o=r.f(t,3),i=o[1],s=o[2];return n&&(s=n,i="work"),"string"!=typeof s||"string"!=typeof i?{}:{objectLinkId:s,objectLinkType:i}}function l(e){var t=e.match(a);return!(!t||0===t.length)}function u(e){return i.test(e)}},"5mZ77jGR":function(e,t,n){e.exports=n.p+"images/d_kulou@2x.af6b1d6a.png"},"5mwzFNVw":function(e,t,n){"use strict";n.r(t),n.d(t,"PreviewerToolbar",function(){return y});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("k7+OBFO9"),c=n.n(a),l=n("tLZJUYWX"),u=n("/MKjzBat"),p=n("GESwhXbR"),d=n("fio7jWQ0"),h=n("QdDHtIVR"),m=n("yLnoFmrj"),f=n("zQo2g8Yu"),g=f.wrapActionCreators,v=f.getUUIDState;n("QdFjEc7w");var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onToggleOrigin=function(){100===t.props.ratio?t.props.onSetNatural():t.props.onZoomTo(100)},t.onZoomIn=function(){t.props.onZoomIn()},t.onZoomOut=function(){t.props.onZoomOut()},t.onRotate=function(){t.props.onRotate()},t.onToggleSkitch=function(){t.props.onToggleSkitch(t.props.skitchMode)},t.onCopyImageLinkSuccess=function(){return p.Toast.success(l.get("copy.link.success"))},t.onCopyImageLinkFail=function(){return p.Toast.error(l.get("copy.link.failed"))},t.getCopyImageSrc=function(){return t.props.imageSrc},t.renderCopyImg=function(e){return o.createElement("li",{className:"img-copy-link",ref:e.ref},o.createElement("a",{className:"hinted","data-title":l.get("copy.link")},o.createElement(p.Icon,{name:"link"})))},t}return r.d(t,e),t.prototype.renderRatio=function(){var e,t=this.props,n=t.naturalRatio,r=t.ratio,i=Math.floor(r)+"%";return 100===n&&r===n||(e=100===r?l.get("previewer.toolbar.ratio.display.natural"):l.get("previewer.toolbar.ratio.display.original")),e?o.createElement("span",{className:"ratio-display hinted","data-title":e,onClick:this.onToggleOrigin},i):o.createElement("span",{className:"ratio-display"},i)},t.prototype.renderZoom=function(){return o.createElement("li",null,o.createElement("a",{className:"zoom-out-handler hinted","data-title":l.get("zoom.out"),onClick:this.onZoomOut},o.createElement(p.Icon,{name:"zoom-out"})),this.renderRatio(),o.createElement("a",{className:"zoom-in-handler hinted","data-title":l.get("zoom.in"),onClick:this.onZoomIn},o.createElement(p.Icon,{name:"zoom-in"})))},t.prototype.renderRotate=function(){return o.createElement("li",{className:"img-rotate-tool",onClick:this.onRotate},o.createElement("a",{className:"rotate-handler hinted","data-title":l.get("previewer.img.turn.right")},o.createElement(p.Icon,{name:"putback-right"})))},t.prototype.renderFullScreen=function(){var e=this.props.fullscreen,t=e?"full-screen-quit":"full-screen",n=s()("fullscreen-handler",{hinted:e});return c.a&&c.a.enabled&&o.createElement("li",null,o.createElement("a",{className:n,"data-title":l.get("fullscreen.esc"),onClick:this.props.onToggleFullscreen},o.createElement(p.Icon,{name:t})))},t.prototype.renderCopyImgLink=function(){return o.createElement(h.a,{getClipText:this.getCopyImageSrc,onPasteSuccess:this.onCopyImageLinkSuccess,onPasteFail:this.onCopyImageLinkFail},this.renderCopyImg)},t.prototype.renderSkitchControl=function(){var e=this.props,t=e.skitchMode,n=e.showSkitchHandler,r=t?l.get("previewer.toolbar.hide.skitch"):l.get("previewer.toolbar.show.skitch"),i=t?"eye":"eye-slash";return n&&o.createElement("li",null,o.createElement("a",{className:"skitch-handler hinted","data-title":r,onClick:this.onToggleSkitch},o.createElement(p.Icon,{name:i})))},t.prototype.renderSkitchTip=function(){return o.createElement("div",{className:"previewer-skitch-creating-tip"},o.createElement("p",null,l.get("previewer.skitch.creating.tip")),o.createElement("button",{className:"creating-finish-handler btn btn-primary",onMouseDown:this.props.onExitSkitchCreatingMode},l.get("previewer.skitch.creating.finish")))},t.prototype.renderToolbar=function(){return o.createElement("div",{className:"previewer-toolbar"},o.createElement("ul",{className:"preview-handler-container"},this.renderZoom(),this.renderRotate(),this.renderFullScreen(),this.renderCopyImgLink(),this.renderSkitchControl()))},t.prototype.render=function(){return this.props.skitchCreating?this.renderSkitchTip():this.renderToolbar()},t}(o.PureComponent),y=function(e){return Object(u.connect)(function(e){return function(t){return v(t,m.b,e)}}(e),function(e){return g({onZoomIn:Object(d.withGta)(m.m,{action:"zoom in",type:"picture",control:"toolbar"}),onZoomOut:Object(d.withGta)(m.n,{action:"zoom out",type:"picture",control:"toolbar"}),onZoomTo:Object(d.withGta)(m.o,{category:"origin",action:"adjust file size",platform:"web",type:"picture",control:"toolbar"}),onSetNatural:Object(d.withGta)(m.j,{category:"fit",action:"adjust file size",platform:"web",type:"picture",control:"toolbar"}),onRotate:Object(d.withGta)(m.h,{action:"rotate",type:"picture",control:"toolbar"}),onToggleSkitch:Object(d.withGta)(m.l,function(e){return{action:e?"hide skitch":"show skitch",control:"toolbar"}}),onExitSkitchCreatingMode:Object(d.withGta)(m.f,{action:"finish skitch"})},m.b,e)}(e))(b)}},"5tMx3C2f":function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("UAqZPu+N"),o=n("VuB9cZyl"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.name="apps",t.prototype.model=r,t.prototype.sync=function(e,t,n){switch(e){case"read":return n.success([{name:"tasks",i18n:"tasks"},{name:"works",i18n:"works"},{name:"posts",i18n:"posts"},{name:"events",i18n:"events"},{name:"groupchat",i18n:"groupchat"},{name:"bookkeeping",i18n:"bookkeeping"},{name:"analytics",i18n:"analytics"},{name:"projectinfoapp",i18n:"projectinfoapp"},{name:"testplan",i18n:"testplan"},{name:"story",i18n:"agile.requirements"},{name:"bug",i18n:"agile.bugs"},{name:"sprint",i18n:"agile.sprints"}]),this.synced=!0}},t}()},"5wg/PQvs":function(e,t,n){},"5xVa82RZ":function(e,t,n){e.exports={"task-add":"task-add__1u38","task-add__inner":"task-add__inner__e4Nr"}},"6+kgR2XT":function(e,t,n){var r,o,i={}.hasOwnProperty;o=n("vmWJWrVe"),r=n("6y/W7eib").DingTalkModal,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="TransferDingTalkView",t.prototype.initialize=function(e){return this.requestReactView(this.el,r)},t}()},"6/ZRgPiJ":function(e,t,n){e.exports={"task-tag-list":"task-tag-list__3Fha"}},"61rjr1Fd":function(e,t,n){"use strict";n.d(t,"h",function(){return u}),n.d(t,"b",function(){return p}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return h}),n.d(t,"i",function(){return m}),n.d(t,"e",function(){return g}),n.d(t,"f",function(){return v}),n.d(t,"d",function(){return b}),n.d(t,"g",function(){return y});var r=n("tLZJUYWX"),o=n.n(r),i=n("sa1Ed382"),s=n("oq1bWpp9"),a=n.n(s),c=n("HDJEOtNh"),l=n("T6KpLPMz"),u=function(e){var t=e.subtaskCount;return Boolean(t&&t.total===t.done)},p=function(e){var t=e.parent;return!t||!t.isDone},d=function(e){if(e.isArchived)return!1;var t=new a.a(e,{bindByMatrix:!1}).hasPermission("task.put.status");return Boolean(t&&h(e))},h=function(e){return Boolean(e.involveMembers.indexOf(i.user.id)>-1||"involves"!==e.visible||e._projectId&&c.ProjectAccess.hasProjectPrivacyPermission(e._projectId))},m=function(){return[f({isDone:!1}),f({isDone:!0})]},f=function(e){return{_id:String(e.isDone),_taskflowId:"",kind:g(e),name:v(e),pos:0,rejectStatusIds:[]}},g=function(e){return e.isDone?"end":"start"},v=function(e){return e.isDone?o.a.get("task.detail.status.done"):o.a.get("task.detail.status.undone")},b=function(e){return e.filter(function(e){return Object(l.isValidUndoneTaskStatusKind)(e.kind)})},y=function(e){var t=Boolean(e._taskflowstatusId);return i.user.get("isGhost")?o.a.get("task.detail.changeState.denied"):d(e)?t||!e.isDone||p(e)?t||u(e)?void 0:o.a.get("task.detail.subtask.uncomplete.tip"):o.a.get("task.detail.subtask.redo.tip"):o.a.get("task.view.authority.msg")}},"69eSgGwt":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S=function(e,t){return function(){return e.apply(t,arguments)}},E={}.hasOwnProperty;m=n("a+N5u/Cl"),C=n("sa1Ed382"),d=n("vmWJWrVe"),(y=n("GESwhXbR")).Alert,p=y.Toast,h=n("OmupbwLD"),v=n("90U+kJWN").getExecutor,l=n("eVKQYjBk"),a=n("QaVTsF4c"),i=n("7UQIdnmo"),k=n("8KNpsyVU"),w=k.showVerifyBindModal,g=k.getAccountBind,s=n("BsTK5jZO"),_=n("cHwzqZWf"),b=_.isInCreationMode,f=_.canPutRecurrence,u=n("nDCZ0jUn").TaskStatus,c=n("Pe+z3yGm").TaskExecutor,o=n("zNd+vZ/0").DatePickerWithRemoveShortcut,r=n("hDsDWWfV"),e.exports=function(e){function t(){return this.onDateSelect=S(this.onDateSelect,this),this.inviteMoreMember=S(this.inviteMoreMember,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)E.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,d),t.prototype.viewName="TaskBasicAttrsView",t.prototype.className="task-basic-attrs-view",t.prototype.events={"click .repeat-handler:not(.disabled)":"toggleRepeatSelector"},t.prototype.initialize=function(e){var t,n,r;return this.taskModel=e.taskModel,this.projectModel=e.projectModel,this._organizationId=e._organizationId,this.membersCollection=e.membersCollection,this.ancestorId=null!=(t=e.ancestorId)?t:null,this.isSet=null!=(n=e.isSet)&&n,this.onDateSelectExternal=e.onDateSelectExternal,this.onToggleDone=null!=(r=e.onToggleDone)?r:m.noop,this.onChangeStatusError=e.onChangeStatusError,this.executorCache=new Map,this.render(),this.listen()},t.prototype.listen=function(){var e;if(e=["change:_executorId","change:startDate","change:dueDate","change:recurrence","change:_taskId","change:isArchived"],this.listenTo(this.taskModel,e.join(" "),function(){return this.render()}),this.listenTo(this.taskModel,["change:_executorId","change:_taskflowstatusId","change:isDone","change:parent","change:subtaskCount"].join(" "),this.renderTaskflowStatusCheckbox),this.listenTo(this.taskModel,"change:_executorId change:involvers",this.renderExecutor),this.projectModel)return this.listenTo(this.projectModel,"change:applications",function(){var e;if(this.projectModel.isAppChanged("startDate"))return e=this.$startDate.get(0),this.unmountReact(e),this.render()})},t.prototype.isIndieTask=function(){return!this.projectModel},t.prototype.getMembers=function(){var e;return(null!=(e=this.membersCollection)?e.toJSON():void 0)||this.taskModel.get("involvers")||null},t.prototype.renderExecutor=function(){var e,t,n,r;return e=this.taskModel.get("_executorId"),t=v(e,this.getMembers(),this.taskModel,this.executorCache),n={contextId:s.getContextId(this.taskModel.toJSON()),executor:t,disabled:!this.taskModel.hasPermission("put.executor")||this.taskModel.get("isArchived"),isExperiencedUser:C.user.isExperiencedUser(),inviteShowed:!this.isIndieTask()&&this.projectModel.hasPermission("post.member"),onSelect:this.selectExecutor.bind(this),onClickRemove:(r=this,function(){return r.selectExecutor(null)}),inviteMoreMember:this.inviteMoreMember},b(this.taskModel)&&Object.assign(n,{hideFieldIconName:!0}),this.requestReactView(this.$executorHandler.get(0),c,n)},t.prototype.inviteMoreMember=function(){var e;if(this.projectModel)return g(this.projectModel.get("_organizationId")).then((e=this,function(t){return t?(e.requestSubView(h).open(i,{projectModel:e.projectModel,qrCodeType:"project"}),C.gta.event({action:"begin add member",control:"Member Menu"})):(w(),C.gta.event({action:"invitation blocked",page:"Tasks Page",type:"project"}))}))},t.prototype.removeTaskSubviews=function(){var e,t,n,r,o,i;return null!=(e=this.repeatSelectorView)&&e.remove(),null!=(t=this.reminderView)&&t.remove(),this.unmountReact(null!=(n=this.$taskflowStatusCheckboxHandler)?n.get(0):void 0),this.unmountReact(null!=(r=this.$executorHandler)?r.get(0):void 0),this.unmountReact(null!=(o=this.$startDate)?o.get(0):void 0),this.unmountReact(null!=(i=this.$dueDate)?i.get(0):void 0)},t.prototype.render=function(){var e,t,n,o,i;return this.removeTaskSubviews(),t=b(this.taskModel),n=this.isIndieTask()||this.taskModel.get("startDate")||(null!=(o=this.projectModel)?o.isAppEnabled("startDate"):void 0),i=this.taskModel.toJSON(),e=m.extend(i,{inCreationMode:t,hideFieldIconName:t,permissions:this.taskModel.hasPermissions("put","put.reminder"),isRepeatEnable:!(this.taskModel.isSubtask()||this.ancestorId),canEditRecurrence:f(this.taskModel),repeatTitle:this.taskModel.getRepeatTitle(),isStartTimeEnable:n}),this.$el.html(r(e)),this.$taskflowStatusCheckboxHandler=this.$(".component-mount.task-status"),this.$executorHandler=this.$(".component-mount.task-executor"),this.$startDate=this.$(".component-mount.task-start-date"),this.$dueDate=this.$(".component-mount.task-due-date"),this.$taskReminderWrap=this.$(".task-reminder"),this.renderTaskflowStatusCheckbox(),this.renderExecutor(),this.renderReminder(),n&&this.renderDatePicker(this.$startDate.get(0),"startDate"),this.renderDatePicker(this.$dueDate.get(0),"dueDate")},t.prototype.renderTaskflowStatusCheckbox=function(){if(!b(this.taskModel))return this.requestReactView(this.$taskflowStatusCheckboxHandler.get(0),u,{task:this.taskModel.toJSON(),onChange:this.onToggleDone,onChangeError:this.onChangeStatusError})},t.prototype.onDateSelect=function(e,t){return this.onDateSelectExternal&&m.delay(this.onDateSelectExternal.bind(this),500,e,t),this.isSet?this.taskModel.set(e,t):this.taskModel.editDate(e,t)},t.prototype.renderReminder=function(){return this.reminderView=this.requestSubView(l,{taskModel:this.taskModel,ancestorId:this.ancestorId,isSet:this.isSet}),this.reminderView.$el.prependTo(this.$taskReminderWrap)},t.prototype.renderDatePicker=function(e,t){var n,r;return n=function(){switch(t){case"startDate":return{endDate:this.taskModel.get("dueDate"),onOpen:(e=this,function(){return e.gtaOpenDatepicker("start")})};case"dueDate":return{startDate:this.taskModel.get("startDate"),onOpen:function(e){return function(){return e.gtaOpenDatepicker("due")}}(this)}}var e}.call(this),this.requestReactView(e,o,m.extend(n,{disabled:!this.taskModel.hasPermission("put."+t)||this.taskModel.get("isArchived"),date:this.taskModel.get(t),type:t,placement:"bottomLeft",onChange:(r=this,function(e){var n;return n=e.dateString,r.onDateSelect(t,new Date(n))}),onClear:function(e){return function(){return e.onDateSelect(t,null)}}(this),onClickRemove:function(e){return function(){return e.onDateSelect(t,null)}}(this),onInvalid:function(){return p.error(tb_i18n.get("time.setting.error"))}}))},t.prototype.selectExecutor=function(e,t){var n,r;return e&&null!=(n=this.executorCache)&&n.set(e,s.ExecutorInput.userInvolverAsUser(t)),this.isSet?(this.taskModel.set({_executorId:e||null,executor:null!=(r=this.executorCache)?r.get(e):void 0}),this.gtaHandler({action:"change assignee"})):(this.taskModel.save(null,{attrs:{_executorId:e||null}}),this.gtaHandler({action:"change assignee",control:"Executor"}))},t.prototype.toggleRepeatSelector=function(e){var t,n,r;if(this.gtaHandler({action:"set repeat"}),n="toggleRepeatSelector",!(t=$(e.currentTarget)).data(n))return t.data(n,!0),this.repeatSelectorView=this.requestSubView(a,{$toggler:t,recurrence:this.taskModel.get("recurrence"),select:(r=this,function(e,t){return r.isSet?r.taskModel.set("recurrence",e):(r.taskModel.save(null,{attrs:{recurrence:e}}),r.gtaHandler({action:"select repetition period",category:t.gtaType}))})}).show()},t.prototype.gtaOpenDatepicker=function(e){var t;return t={action:"edit "+e+" date",control:"due"===e?"Duedate":"Startdate"},this.projectModel&&(t.projectid=this.projectModel.id),this._organizationid&&(t.organizationid=this._organizationid),this.gtaHandler(t)},t.prototype.gtaHandler=function(e){return e=m.extend({type:this.taskModel.isSubtask()?"subtask":"task",series:this.taskModel.get("ancestorIds").length},e),C.gta.event(e)},t}()},"6ARYQl7C":function(e,t,n){e.exports=n.p+"images/archive-list@2x.323199a9.png"},"6B8y3fJN":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e.projects;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=' <li data-id="'+(s=i[a+=1])._id+'" class="cleafix"> <div class="logo" style="background-image:url('+s.logo+');"></div> <div class="project-name hinted" data-title="'+r(s.name)+'">'+r(s.name)+'</div> <span class=" btn btn-primary btn-small transfer-handle '+(s.transferDisabled?"disabled":"")+" "+(s.transferDisabledReason?"hinted":"")+' " data-title="'+s.transferDisabledReason+'" > ',"import"===e.action?o+=" "+tb_i18n.get("projects.transferIn.btn")+" ":"export"===e.action&&(o+=" "+tb_i18n.get("projects.transferOut.btn")+" "),o+=" </span> </li>";return o}},"6ESC5pY6":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""});return'<div class="modal-content"> <header class="modal-header"> <h4 class="modal-title">'+tb_i18n.get("archive")+'</h4> <a class="modal-close pull-right icon icon-remove" data-dismiss="modal"></a> </header> <div class="modal-body"> <p>'+r(tb_i18n.get("project.settings.archive.msg",e.projectName))+'</p> </div> <div class="modal-footer"> <button class="confirm-handler btn btn-danger btn-block">'+tb_i18n.get("archive")+"</button> </div></div>"}},"6EY9/lIj":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("3eMzznN/");n("mmmX94Uw");var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.title,n=e.className,i=void 0===n?"":n,c=e.sliceIndex,l=void 0===c?0:c,u=e.position,p=void 0===u?"middle":u,d=r.g(e,["title","className","sliceIndex","position"]),h=t.length-l,m=a.sliceText(t,h),f=m.first,g=m.last,v="ends"===p?"rtl":"ltr",b=s()(i,"elastic-title","ellipsis-on-"+p);return o.createElement("p",r.a({className:b},d),o.createElement("bdo",{dir:v,className:"elastic-title-head"},o.createElement("bdo",{dir:"ltr"},f)),o.createElement("span",{className:"elastic-title-tail"},g))},t}(o.PureComponent);n.d(t,"a",function(){return c})},"6FppZq3b":function(e,t,n){e.exports={"slide-container":"slide-container__3T6O",head:"head__SuCR",controller:"controller__2JZ7","slide-screen":"slide-screen__2zKw",left0:"left0__1p0T","is-last0":"is-last0__uN0_",left1:"left1__2U7c","is-last1":"is-last1__3lhU",left2:"left2__3mQG","is-last2":"is-last2__2Y4L",left3:"left3__21SS","is-last3":"is-last3__1Np-",left4:"left4__1nR-","is-last4":"is-last4__3stT",image:"image__2iRJ"}},"6R2rvM4g":function(e,t,n){"use strict";var r=n("q1tIBJhx"),o=n.n(r),i=n("mrSGxOB2"),s=n("9nhX6OoH"),a=n.n(s),c=n("TSYQbtd+"),l=n.n(c),u=n("kwic24gT"),p=n("JHPidlw6"),d=n("D4LvyNzA"),h=n("NQ01EqTi"),m=n.n(h),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.containerRef=o.a.createRef(),t.scrollbarRef=o.a.createRef(),t.wheelManager=new u.d(function(e,n){Object(p.a)(function(){t.handleWheel({deltaX:e,deltaY:n})})},!0,!0,!1,t.props.allowNativeScroll),t.maxScrollSpeed=null!=t.props.maxScrollSpeed?t.props.maxScrollSpeed:1/0,t.handleWheel=function(e){var n=t.getScrollbarContainerSize(t.props),r=t.getScrollbarContentSize(t.props),o=t.getScrollbarContentOffset(t.props),i=Math.abs(e.deltaX)>=Math.abs(e.deltaY)?e.deltaX:e.deltaY,s=o+a()(i,-t.maxScrollSpeed,t.maxScrollSpeed);s=a()(s,0,Math.max(0,r-n)),t.handleScroll(s)},t.handleScroll=function(e){var n=e/t.getScrollbarContentOffsetRatio(t.props);n!==t.props.contentOffset&&t.props.onScroll(n)},t}return i.d(t,e),t.prototype.componentDidMount=function(){var e=this.containerRef.current;e&&e.addEventListener("wheel",this.wheelManager.onWheel,{passive:!1})},t.prototype.componentWillUnmount=function(){var e=this.containerRef.current;e&&e.removeEventListener("wheel",this.wheelManager.onWheel)},t.prototype.componentDidUpdate=function(e){var t=this.getWheelPosition(this.props),n=this.getWheelPosition(e);this.scrollbarRef.current&&t!==n&&this.scrollbarRef.current.onWheel(t)},t.prototype.render=function(){var e=l()(this.props.className,m.a["scrollbar-filling-space"]);return o.a.createElement("div",{ref:this.containerRef,className:e},o.a.createElement(d.a,{ref:this.scrollbarRef,mode:this.props.mode,size:this.getScrollbarContainerSize(this.props),scrollSize:this.getScrollbarContentSize(this.props),offset:this.getScrollbarContentOffset(this.props),onScroll:this.handleScroll,zIndex:15,alwaysShowBar:!0,broadenBarOnHover:!0}))},t.prototype.getWheelPosition=function(e){var t=e.containerSize,n=e.contentSize;return e.contentOffset/(n-t)},t.prototype.getScrollbarContainerSize=function(e){return e.scrollbarContainerSize},t.prototype.getScrollbarContainerSizeRatio=function(e){var t=e.containerSize;return e.scrollbarContainerSize/t},t.prototype.getScrollbarContentSize=function(e){return e.contentSize*this.getScrollbarContainerSizeRatio(e)},t.prototype.getScrollbarContentOffsetRatio=function(e){var t=e.containerSize,n=e.contentSize,r=this.getScrollbarContainerSize(e);return(this.getScrollbarContentSize(e)-r)/(n-t)},t.prototype.getScrollbarContentOffset=function(e){return e.contentOffset*this.getScrollbarContentOffsetRatio(e)},t}(r.PureComponent),g=n("Nz3F68i+"),v=function(e){var t=Object(g.b)(e),n=Object(g.a)(e),r=e.scrollLeft,i=e.width;return o.a.createElement(f,{className:e.className,mode:"x",containerSize:t,contentSize:n,contentOffset:r,scrollbarContainerSize:i,onScroll:e.onScrollX})};n.d(t,"a",function(){return v})},"6XSa3ffj":function(e,t,n){var r,o={}.hasOwnProperty;r=n("hGNqppva"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.fixPosition=function(){var e,t,n,r;switch(r=window.innerHeight,t=this.$popover[0].getBoundingClientRect(),n=this.$toggler[0].getBoundingClientRect(),e=this.$content[0].getBoundingClientRect(),10,n.top>r/2?"top":"bottom"){case"top":this.$popover.removeClass("bottom").addClass("top"),this.$popover.css({top:"auto",bottom:~~(r-n.top)}),this.flexStaticMaxHeight=~~(n.top-(e.top-t.top)-10),this.$content.css({"max-height":this.flexStaticMaxHeight});break;case"bottom":this.$popover.removeClass("top").addClass("bottom"),this.$popover.css({top:n.bottom,bottom:"auto"}),this.flexStaticMaxHeight=~~(r-n.bottom-(e.top-t.top)-10),this.$content.css({"max-height":this.flexStaticMaxHeight})}if(this.options.fixed)return this.$popover.css({position:"fixed"})},t}()},"6aFYJidP":function(e,t,n){e.exports=function(e){var t="",r=n("2qRnoGmE");return t+='<div class="project-menus"> <div class="project-menu-notice-wrapper"></div> <div class="customfield-notify-wrapper"></div> <ul class="list activities-panel-menu-list"> <li> <a class="app" data-app="project-settings" data-gta="{action: \'open project settings\', control: \'Side Menu\'}"> <span class="icon icon-cog"></span>'+tb_i18n.get("project.settings")+' </a> </li> <li> <a class="project-tags-handler" data-gta="{action: \'open project tags\', control: \'Side Menu\'}"> <span class="icon icon-tag"></span>'+tb_i18n.get("project.tags")+" </a> </li> ",e.isGhost||(t+=' <li> <a class="project-powerup-handler solid-height" data-gta="{action: \'show power-ups\', control: \'Side Menu\'}"> <span class="icon icon-config"></span>'+tb_i18n.get("activity.panel.menu.config")+' <span class="project-powerup-handler-des"> '+tb_i18n.get("activity.panel.menu.config.des")+" </span> </a> </li> "),t+=" ",e.isTemplatePanel||(t+=" ",e.roleScope>=0&&(t+=" <li> <a class=\"project-archives-handler\" data-gta=\"{action: 'show archived content', type: 'content menu', control: 'Side Menu'}\"> <span class=\"icon icon-trash\"></span>"+tb_i18n.get("activity.panel.menu.checkArchive")+" </a> </li> "),t+=" ",e.canForkProject&&(t+=' <li class="plugin"> <a class="copy-project-handler switch-handler" data-type="copy" data-gta="event" data-label="copy project"> <span class="icon icon-copy"></span>'+tb_i18n.get("activity.panel.menu.copy")+' </a> <span class="copy-project-handler-react"></span> </li> ',r.FEATURES.project_template&&r.FEATURES.showTemplateCategory&&e.isInProject&&(t+=' <li class="plugin"> <a class="create-template-handler" data-type="template" data-gta="{action: \'to add content\', category: \'saved as project template\', control: \'Side Menu\', type: \'project tempate\'}"> <span class="icon icon-project"></span>'+tb_i18n.get("activity.panel.menu.toTemplate")+" </a> </li> "),t+=" "),t+=" ","all"==e.visibility&&(t+=' <li class="plugin"> <a class="share-project-handler switch-handler" data-type="share" data-gta="event" data-label="share project"> <span class="icon icon-share"></span>'+tb_i18n.get("activity.panel.menu.share")+" </a> </li> "),t+=" ",e._organizationId&&e.permissions.organizationGetInfo&&(t+=' <li class="plugin"> <a class="enter-organization-handler" data-gta="event" data-label="enter organization from project"> <span class="icon icon-users"></span>'+tb_i18n.get("activity.panel.menu.enterOrg")+" </a> </li> "),t+=" ",e.permissions.getSubscribe&&r.FEATURES.subProjectTask&&(t+=' <li class="plugin"> <a class="project-calendar-handler" data-gta="{action: \'subscribe to calendar\', type: \'task\', control: \'Side Menu\'}"> <span class="icon icon-calendar"></span>'+tb_i18n.get("activity.panel.menu.calendar")+" </a> </li> "),t+=" ",e.isGitEnabled&&(t+=' <li class="plugin" data-type="git"> <a> <span class="icon icon-git-o"></span>'+tb_i18n.get("activity.panel.menu.git.integrate")+" </a> </li> "),t+=" "),t+=' </ul></div><div class="custom-export-modal-mount-node"></div><div class="power-up-config-mount-node"></div>'}},"6fMv8n31":function(e,t,n){},"6kNLk80W":function(e,t,n){"use strict";n.r(t);var r=n("+ii260T0");for(var o in r)["ActivityTimeline","ActivityTimelineProps","ActivityCreator","ActivityCreatorProps","default"].indexOf(o)<0&&function(e){n.d(t,e,function(){return r[e]})}(o);var i=n("+Q1vQv1r");n.d(t,"autoFocusActivityCreator",function(){return i.b}),n.d(t,"activityTimelineAutoScrollToBottom",function(){return i.a});var s=n("arJxzJPZ");n.d(t,"defaultActivityPanelContextState",function(){return s.b}),n.d(t,"ActivityPanelContext",function(){return s.a});var a=n("DE41TEAJ");n.d(t,"ActivityPanelAndContextProvider",function(){return a.a});var c=n("htZYNBgN");n.d(t,"ActivityTimeline",function(){return c.a}),n.d(t,"ActivityTimelineProps",function(){return c.ActivityTimelineContainerProps});var l=n("zoPFgZHy");n.d(t,"ActivityCreator",function(){return l.a}),n.d(t,"ActivityCreatorProps",function(){return l.ActivityCreatorContainerProps})},"6uvpIrW6":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=function(e){return[e.project&&e.project.name,e.testplan&&e.testplan.name].filter(function(e){return!!e}).join(tb_i18n.get("comma"))};o+="<header> "+r(e.title)+"</header><ul>";var s=e.visibles;if(s)for(var a,c=-1,l=s.length-1;c<l;)o+=" ","testplangroup"==(a=s[c+=1]).linkedType&&(o+=' <li class="link" data-id="'+a._id+'" data-linkedid="'+a._linkedId+'"> <div class="link-head"> <div class="link-icon-wrap"> <span class="icon icon-testcase-group"></span> </div> <div class="link-title testplan-group-title"> <div class="link-title-header"> <div class="link-title-header-main"> <span class="title-name" title="'+r(a.data.isRoot?tb_i18n.get("testplan.testgroup.unplanned.name"):a.data.name)+'"> '+r(a.data.isRoot?tb_i18n.get("testplan.testgroup.unplanned.name"):a.data.name)+' </span> </div> <div class="link-title-header-rest hinted" data-title="'+r(i(a.data))+'" > '+r(i(a.data))+' </div> </div> </div> </div> <a class="link-menu-handler icon icon-chevron-down" data-id="'+a._id+'"></a> </li> '),o+=" ","testcase"==a.linkedType&&(o+=' <li class="link" data-id="'+a._id+'" data-linkedid="'+a._linkedId+'"> <div class="link-head"> <div class="link-icon-wrap"> <span class="icon icon-testcase"></span> </div> <div class="link-icon-wrap"> ',a.data.executor?o+=' <span class="avatar img-circle img-24" style="background-image:url('+r(a.data.executor.avatarUrl)+')" ></span> ':o+=' <span class="avatar img-circle img-24 no-avatar"></span> ',o+='</div> <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main"> <span class="title-name" title="'+r(a.data.title)+'"> '+r(a.data.title)+' </span> </div> <div class="link-title-header-rest hinted" data-title="'+r(i(a.data))+'" > '+r(i(a.data))+' </div> </div> </div> </div> <a class="link-menu-handler icon icon-chevron-down" data-id="'+a._id+'"></a> </li> ');return o+="</ul>"}},"6vg9MnbG":function(e,t,n){var r,o,i,s,a,c,l,u,p;a=n("a+N5u/Cl"),s=n("OmupbwLD"),r=n("/qYi9WKN"),i=n("K1mAXBMn"),p=n("cl35kkSI"),u=p.preheadChannelForPM,l=p.preheadChannelForNotification,c=p.preheadChannelForCreator,o=function(){function e(){}return e.prototype.windowView=null,e.prototype.open=function(e){var t,n;return null==e&&(e={}),this.windowView?"ChatModalView"!==(null!=(t=this.windowView.currentView)?t.viewName:void 0)&&this.windowView.open(r,e):(e=a.extend({},e,{onClose:(n=this,function(){return n.reset()})}),this.windowView=new s,this.windowView.open(r,e),this.windowView.listenTo(i,"messageItemViewClosePanel",this.close.bind(this))),e.pseudoMessageData&&u(e.pseudoMessageData),setTimeout(function(){if(e.activeObjectId)return l(e.activeObjectId)},0),setTimeout(function(){if(e.activeCreatorId)return c(e.activeCreatorId)},0)},e.prototype.close=function(){if(this.windowView)return this.windowView.close(),this.reset()},e.prototype.reset=function(){return this.windowView=null},e}(),e.exports=new o},"6y/W7eib":function(e,t,n){"use strict";n.r(t),n.d(t,"DingTalkModal",function(){return l});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("2qRnoGmE"),c=n("CxY0Mkc1"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.saveRef=function(e){t.modalRef=e},t.toLogin=function(){var e=encodeURIComponent(location.href),n=a.DINGTALK_HOST+"/changeBind?next_url="+e,r={pathname:a.ACCOUNT_HOST+"/aliens/bind/auth",query:{refer:"dingTalk",next_url:n}};location.href=c.format(r),t.modalRef.close()},t}return r.d(t,e),t.prototype.render=function(){return o.createElement(s.Modal,{defaultOpened:!0,className:"dingtalk-modal-view",titlePosition:"center",width:460,ref:this.saveRef,title:i.get("dingtalk.transfer.title"),titleCls:"dingtalk-modal-title"},o.createElement("div",{className:"tb-and-dingtalk-image"},o.createElement("span",{className:"tb-logo"}),o.createElement("span",{className:"ding-logo"})),o.createElement("ul",null,o.createElement("li",null,i.get("dingtalk.transfer.tips1")),o.createElement("li",null,i.get("dingtalk.transfer.tips2"))),o.createElement("div",{className:"dingtalk-footer"},o.createElement("p",null,o.createElement(s.Icon,{name:"info"}),i.get("dingtalk.transfer.tips3")),o.createElement(s.Button,{className:"dingtalk-button-login",onClick:this.toLogin},i.get("dingtalk.transfer.login"))))},t}(o.PureComponent)},"71FB16QS":function(e,t,n){e.exports=n.p+"images/d_nu@2x.445325cc.png"},"71fEzK1u":function(e,t,n){},"72Xjo1GT":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e.dataList;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+='<li class="menu-item project-item ',(s=i[a+=1]).selected&&(o+="selected"),o+='" data-id="'+s._id+'"> <a> ',s.all?o+=' <div class="icon icon-project pull-left"></div> ':o+=' <div class="avatar project-logo pull-left" style="background-image:url('+s.logo+')"></div> ',o+=" "+r(s.title)+" </a></li>";return o}},"76aAtbBx":function(e,t,n){},"78+aw0mX":function(e,t,n){},"7CIb8gEw":function(e,t,n){e.exports=n.p+"images/magnifier-content@2x.117ca1cf.png"},"7ELxbiP5":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("Zgk2zrTd"),l=n("NnIOl5ce"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleAttachmentClick=function(e){t.props.onAttachmentClick&&t.props.onAttachmentClick(e)},t}return r.d(t,e),t.prototype.renderLists=function(){var e=this;return this.props.attachments.map(function(t){return i.a.createElement("li",{className:"work",key:t._id,onClick:function(){return e.handleAttachmentClick(t._id)}},i.a.createElement(c.a,{work:t,subtitle:"fileSizeFix"}))})},t.prototype.render=function(){var e=a()(l["attachment-list-container"],this.props.className);return i.a.createElement("div",{className:e},i.a.createElement("ul",{className:"attachments-list"},this.renderLists()))},t}(i.a.PureComponent);n.d(t,"AttachmentList",function(){return u})},"7J4CuXkc":function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("wd/RKGTj"),s=n.n(i),a=n("sa1Ed382"),c=n("tLZJUYWX"),l=n("GESwhXbR"),u=n("s0r7VfKc"),p=n("LxI6N5g+"),d=(n("B50Fljg4"),n("6fMv8n31"),n("cVY30NxL")),h=function(e){function t(t){var n=e.call(this,t)||this;n.getDefaultWeeks=function(e){var t=e.sprint,n=t.startDate,r=t.dueDate;return Object(d.getSprintWeeks)(n,r)},n.setModalRef=function(e){n.modalRef=e},n.onVisibleChange=function(e){n.setState({modalOpened:e})},n.removeStoryHint=function(){n.setState({displayStoryHint:!1})},n.onFetchSprintData=function(){var e="sprints/"+n.props.sprint._id;u.default.fetch.get(e).subscribe(function(e){n.setState({noStoryPointTaskCount:e.noStoryPointTaskCount})})},n.onModalClose=function(){n.setState({name:n.props.sprint.name,weeks:n.getDefaultWeeks(n.props),startDate:n.props.sprint.startDate,dueDate:n.props.sprint.dueDate})},n.onStartSprint=function(){var e=n.state,t=e.name,r=e.startDate,o=e.dueDate,i=t.trim();if(i){var s="sprints/"+n.props.sprint._id+"/start",a={name:i,startDate:r,dueDate:o};u.default.fetch.put(s,a).subscribe(),n.onStartSprintGta(),n.modalRef.close()}},n.openModal=function(e){e.stopPropagation(),n.setState({modalOpened:!0}),n.onOpenModalGta()},n.onOpenModalGta=function(){var e=n.props.gtaControl||"Table Button";a.gta.event({action:"start sprint",segment:"Sprint Sidebar",control:e,projectid:n.props.sprint._projectId})},n.updateSprint=function(e){n.setState(r.a({},n.state,e),function(){var e=n.state,t=e.name,r=e.startDate,o=e.dueDate,i=Object(d.checkDateValidation)(r,o,!0);n.setState({buttonEnabled:!!t&&i})})};var i=t.sprint,s=n.getButtonEnabled(i);return n.state={name:i.name,weeks:n.getDefaultWeeks(t),startDate:i.startDate,dueDate:i.dueDate,modalOpened:!1,noStoryPointTaskCount:null,displayStoryHint:!0,buttonEnabled:s},n.triggerHtmlEl=o.createRef(),n}return r.d(t,e),t.prototype.componentWillReceiveProps=function(e){e.sprint!==this.props.sprint&&this.setState({name:e.sprint.name,weeks:this.getDefaultWeeks(e),startDate:e.sprint.startDate,dueDate:e.sprint.dueDate,buttonEnabled:this.getButtonEnabled(e.sprint)})},t.prototype.getButtonEnabled=function(e){return!!(e.name&&e.startDate&&e.dueDate)},t.prototype.onStartSprintGta=function(){var e=this.state,t=e.startDate,n=e.dueDate;if(t&&n){var r;switch(s()(n).diff(s()(t),"week")){case 2:r="two weeks";break;case 3:r="three weeks";break;case 4:r="four weeks";break;case 1:default:r="one week"}a.gta.event({action:"started sprint",control:"Pop-up Button",projectid:this.props.sprint._projectId,category:r})}},t.prototype.renderSprintUpdate=function(){var e=this.state,t={name:e.name,weeks:e.weeks,startDate:e.startDate,dueDate:e.dueDate,showDueDate:!0,startDateRequired:!0,updateSprint:this.updateSprint};return o.createElement(p.a,r.a({},t))},t.prototype.renderStoryPointHint=function(e){var t=c.get("sprint.to.start.hint.story",e);return this.state.displayStoryHint&&o.createElement("div",{className:"sprint-story-hint"},o.createElement(l.Icon,{name:"circle-info"}),o.createElement("div",{className:"text"},t),o.createElement(l.Icon,{name:"remove",onClick:this.removeStoryHint}))},t.prototype.renderButton=function(){var e=this.state.buttonEnabled;return o.createElement("div",{className:"button-handlers"},o.createElement("div",{className:"divider"}),o.createElement(l.Button,{onClick:this.onStartSprint,disabled:!e},c.get("start")))},t.prototype.renderStartHint=function(){var e=c.get("sprint.to.start.hint",this.props.sprint.name);return o.createElement("div",{className:"sprint-hint"},o.createElement(l.Icon,{name:"info"}),o.createElement("div",{className:"sprint-hint-text"},e))},t.prototype.renderHint=function(){var e=this.state.noStoryPointTaskCount;return null===e?o.createElement("div",null):e?this.renderStoryPointHint(e):this.renderStartHint()},t.prototype.renderTriggerContent=function(){if(this.props.trigger)return this.props.trigger;var e=this.props.withTitle,t=void 0===e||e;return o.createElement("div",{className:"sprint-start-trigger"},o.createElement(l.Icon,{name:"play"}),t&&c.get("sprint.to.start"))},t.prototype.renderStartTrigger=function(){var e=this.props.withTitle;return void 0===e||e?this.renderTriggerContent():o.createElement(l.Tooltip,{title:c.get("sprint.to.start")},this.renderTriggerContent())},t.prototype.renderCannotStart=function(){var e=c.get("sprint.can.not.start.no.tasks");return o.createElement(l.Tooltip,{placement:"left",title:e},this.renderTriggerContent())},t.prototype.renderContents=function(){var e=this,t=this.props.nestedModal?function(){return e.triggerHtmlEl.current}:void 0;return o.createElement("div",{className:"sprint-start-wrapper"},o.createElement("div",{ref:this.triggerHtmlEl,onClick:this.openModal,className:"can-trigger"},this.renderStartTrigger()),o.createElement(l.Modal,{className:"sprint-update-modal sprint-start-modal",ref:this.setModalRef,title:c.get("sprint.ready.to.start"),titleCls:"modal-title",width:600,opened:this.state.modalOpened,onVisibleChange:this.onVisibleChange,onOpen:this.onFetchSprintData,onHide:this.onModalClose,mountIn:t},this.renderHint(),this.renderSprintUpdate(),this.renderButton()))},t.prototype.render=function(){return this.props.isEmptySprint?this.renderCannotStart():this.renderContents()},t}(o.PureComponent)},"7LARz+8E":function(e,t,n){e.exports={trigger:"trigger__3ncW","trigger-icon":"trigger-icon__25LW","trigger-name":"trigger-name__1I2-"}},"7R5B0m0k":function(e,t,n){e.exports=n.p+"images/d_taikaixin@2x.2df3912a.png"},"7RH+tFqr":function(e,t,n){},"7RZqXtpT":function(e,t,n){var r,o={}.hasOwnProperty;r=n("GsAQlUN+"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="EventConfirmAddMemberView",t.prototype.initialize=function(){var e,n,r;return t.__super__.initialize.apply(this,arguments),r=tb_i18n.get("event.confirm.addMember.title"),n=tb_i18n.get("event.confirm.addMember.description"),e=["current","next","all"],this.render({title:r,description:n,btns:e})},t}()},"7UQIdnmo":function(e,t,n){e.exports=n("GCZE3FPp")},"7YmXHCxW":function(e,t,n){e.exports=n.p+"images/w_fuyun@2x.4f376755.png"},"7a39ZgY2":function(e,t,n){e.exports=n.p+"images/w_xiayu@2x.2ad0f264.png"},"7aiNnUPR":function(e,t,n){e.exports=n.p+"images/h_zuoyi@2x.65707ca6.png"},"7bLrUvyy":function(e,t){e.exports=function(e){return'<div class="modal-content"> <header class="modal-header"> <h4 class="modal-title">'+tb_i18n.get("iCalendar.title",e.subTitle||e.title)+'</h4> <a class="modal-close icon icon-remove" data-dismiss="modal"></a> </header> <div class="modal-body"> <div class="icalendar-qrcode"></div> <div class="icalendar-container"> <div class="icalendar-msg"> <p class="msg1">'+tb_i18n.get("iCalendar.msg1",e.title)+'</p> <p class="msg2">'+tb_i18n.get("iCalendar.msg2",e.title)+' <a class="icalendar-url" href="'+e.webcal+'" target="_blank">'+e.webcal+'</a> </p> </div> <div class="icalendar-footer"> \x3c!-- <a class="icalendar-reset"><i class="icon icon-refresh"></i> '+tb_i18n.get("iCalendar.reset")+'</a> --\x3e <a class="icalendar-howto" href="https://bbs.teambition.com/issues/54deced8f12cd5890bd1070b" target="_blank"><i class="icon icon-question"></i> '+tb_i18n.get("iCalendar.howto")+"</a> </div> </div> </div></div>"}},"7h4K6rhl":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR"),l=n("MCn2bSqo"),u=function(e){var t=e.className,n=e.kind,s=e.size,u=e.fixedWidth,p=e.muted,d=e.disabled,h=e.locked,m=r.g(e,["className","kind","size","fixedWidth","muted","disabled","locked"]),f=l["status-checkbox-taskflow"],g=a()(f,t,n,s,{"fixed-width":u,muted:p,disabled:d,locked:h}),v="end"===n?"checkbox-checked":"checkbox",b=Object(o.useCallback)(function(t){e.muted||(e.disabled||e.locked?t.stopPropagation():e.onClick&&e.onClick(t))},[e.muted,e.disabled,e.locked,e.onClick]);return i.a.createElement("span",r.a({},m,{className:g,onClick:b,"data-role":"status-checkbox-taskflow"}),i.a.createElement("span",{className:"icon-box"},i.a.createElement(c.Icon,{name:v,className:"icon"}),i.a.createElement(c.Icon,{name:"triangle-down-s",className:"icon"})),i.a.createElement("span",{className:"text"},e.title))};u.defaultProps={size:"middle"}},"7l29IdI8":function(e,t,n){e.exports={"icon-button":"icon-button__2wQx","like-count":"like-count__Ae9l"}},"7lRKyXCu":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g={}.hasOwnProperty;d=n("a+N5u/Cl"),m=n("sa1Ed382"),l=n("GESwhXbR").Toast,i=n("JEApsPXu"),c=n("77NnVLwu"),p=n("8N+zwa3A"),s=n("G/lHqWmi"),r=n("aD6I3VT4"),u=n("OmupbwLD"),a=n("tGfyIDI3"),h=n("CfyenDut").formatNote,o=n("HCp9489+"),f=function(e,t,n){var r;return(r=new window.XMLHttpRequest).open("GET",e,!0),r.responseType="blob",r.onload=function(){var e;return 200!==r.status?n():(e=r.response)?t(e):void 0},r.onerror=n,r.send()},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)g.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.tagName="section",t.prototype.viewName="NoteView",t.prototype.className="detail-infos-note-view flex-horiz no-border-wrapper",t.prototype.events={"click .note-input":"enterNoteEdit","click .note-text.editable":"enterNoteEdit","click .add-note-handler:not(.ban)":"enterNoteEdit","click .toggle-note-handler":"toggleNoteStatus"},t.prototype.initialize=function(e){var n;if(null==e&&(e={}),null!=e?e.objectModel:void 0)return t.__super__.initialize.apply(this,arguments),this.options=e,this.objectModel=e.objectModel,this.placeholder=e.placeholder,this.noteAttribute=e.noteAttribute||"note",this.onSavePrecondtion=e.onSavePrecondtion,this.canEdit=e.canEdit,this.subscribe(c.fetch$(this.objectModel.get("_projectId")).do((n=this,function(e){return n.projectModel=e,n.renderBasic().refreshView().listen()})))},t.prototype.renderBasic=function(){var e;return e=this.objectModel.toJSON(),"note"!==this.noteAttribute&&(e.note=e[this.noteAttribute]),this.note=e.note,e.hasPutPermission=this.hasPermission(),e.editable=!this.options.disabled&&e.hasPutPermission,this.$el.html(o(e)),this.$noteContentWrap=this.$(".note-input-set"),this.$toggleNoteHandler=this.$(".toggle-note-handler"),this.$noteWrap=this.$(".note-wrap"),this.$noteContainer=this.$(".note-container"),this.$noteTextSet=this.$(".note-text-set"),this.$noteText=this.$(".note-text"),this},t.prototype.renderNoteEditor=function(){var e;return null!=(e=this.noteEditor)&&e.remove(),this.noteEditor=this.requestSubView(s,{objectModel:this.objectModel,dragAndDropWrap:this.$(".note-input-set"),content:this.note,mdSupport:this.mdSupport,placeholder:this.placeholder,noteAttribute:this.noteAttribute,onSavePrecondtion:this.onSavePrecondtion,isRequired:this.options.isRequired}),this.$noteContentWrap.html(this.noteEditor.$el)},t.prototype.listen=function(){return this.listenTo(this.objectModel,"change:"+this.noteAttribute,this.refreshView),this.listenTo(this.objectModel,"change:isArchived",function(){if(this.el)return this.renderBasic().refreshView()}),this.listenTo(this.projectModel,"change:applications",function(){if(this.projectModel.isAppChanged("markdown"))return this.refreshView()}),this},t.prototype.refreshView=function(){var e,t;return this.$el.removeClass("editing"),t=this.objectModel.toJSON(),"note"!==this.noteAttribute&&(t.note=t[this.noteAttribute]),t.note?(this.$(".note-adder-set").addClass("hide"),this.$noteWrap.removeClass("hide")):(this.$(".note-adder-set").removeClass("hide"),this.$noteWrap.addClass("hide")),this.note=t.note,this.mdSupport=("function"==typeof(e=this.objectModel).isIndie?e.isIndie():void 0)||this.projectModel.isAppEnabled("markdown")?"md":null,this.htmlString=h(this.note,this.objectModel.get("updated")),this.$noteText.html(this.htmlString),this.onLoad(),this},t.prototype.setNoteButton=function(){return d.delay((e=this,function(){var t;if(e.$el)return t=e.$noteTextSet.height(),e.$noteContainer[t>500?"addClass":"removeClass"]("note-height-control note-padding"),e.$(".note-button")[t>500?"removeClass":"addClass"]("hide"),e.$(".show-all-handler").removeClass("hide"),e.$(".collapse-all-handler").addClass("hide")}));var e},t.prototype.onLoad=function(){var e,t;return this.loadCount=0,this.$noteTextImages=this.$noteText.find("img"),(e=this.$noteTextImages.length)>0?this.$noteTextImages.on("load",(t=this,function(n){var r;if(t.loadCount++,r=n.currentTarget,t.attachDoubleClickHandler(r),t.attachImageHandler(r),t.loadCount===e)return t.setNoteButton()})):this.setNoteButton()},t.prototype.getAllAttachments=function(){return this.$noteTextImages.map(function(e){var t,n,r;return r=(t=$(this)).attr("src").replace(/\/w\/[0-9]+\/h\/[0-9]+$/,"/w/1024/h/1024"),n=t.attr("alt")||r,new p({_id:e,fileName:n,previewUrl:r,thumbnailUrl:r,downloadUrl:r,fileType:n.split(".").pop(),fileCategory:"image"})})},t.prototype.openPreivewer=function(e){var t;return t=this.getAllAttachments(),this.requestSubView(u).open(a,{isRawStriker:!0,workModels:t,workModel:t[e],handleDownload:function(e){var t,n;return t=e.downloadUrl,n=e.fileName,f(t,function(e){return i.saveAs(e,n)},function(){return l.error(tb_i18n.get("previewer.download.fail"))})}})},t.prototype.attachDoubleClickHandler=function(e){var t,n;return this.clickCount=0,(t=$(e)).click((n=this,function(e){var r;return e.stopPropagation(),n.clickCount++,r=setTimeout(function(){var o;if(n.clickCount>0){switch(n.clickCount){case 1:n.enterNoteEdit(e);break;case 2:o=n.$noteTextImages.index(t),n.openPreivewer(o)}return n.clickCount=0}return clearTimeout(r)},300)})).wrap('<div class="note-image-wrapper"></div>')},t.prototype.attachImageHandler=function(e){var t,n,r,o,i,s,a,c;if(a=(s=(n=(t=$(e)).parent()).get(0).getBoundingClientRect()).width,r=s.height,a>=40&&r>=40)return o=this.$noteTextImages.index(t),i=d.throttle((c=this,function(){return c.openPreivewer(o)}),300,{trailing:!1}),$("<span class='icon icon-expand image-previewer-handler hinted' data-title="+tb_i18n.get("note.detial.image.handler.hint")+"></span>").click(function(e){return e.stopPropagation(),i()}).appendTo(n)},t.prototype.enterNoteEdit=function(e){var t,n,r;if("A"!==("function"==typeof(n=$(e.target).prop("tagName")).toUpperCase?n.toUpperCase():void 0)||$(e.target).hasClass("add-note-handler")){try{window.getSelection().toString()}catch(o){e=o}return this.objectModel.get("isArchived")?this:(!this.$el.hasClass("editing")&&this.hasPermission()&&(this.$el.addClass("editing"),this.$el[this.objectModel.getMemCache()?"addClass":"removeClass"]("has-draft"),this.renderNoteEditor(),(null!=(r=this.parentView)?r.parentView:void 0)&&null!=(t=this.parentView.parentView.$el)&&t.find(".detail-content").trigger("scroll"),this.gtaHandler({action:"edit note"})),this)}},t.prototype.toggleNoteStatus=function(e){var t;if(this.$toggleNoteHandler.toggleClass("hide"),this.$noteContainer.toggleClass("note-height-control"),t={action:(this.$noteContainer.hasClass("note-height-control")?"collapse":"expand")+" full note"},this.gtaHandler(t),!this.$(".note-button").hasClass("hide"))return this.$noteContainer[this.$(".show-all-handler").hasClass("hide")?"addClass":"removeClass"]("note-padding")},t.prototype.isCase=function(){return!!this.objectModel.toJSON()[this.noteAttribute]},t.prototype.hasPermission=function(){switch(this.objectModel.name){case"testcase":return!this.objectModel.id||this.objectModel.hasPermission("testcase.put");case"task":case"event":return this.canEdit;case"entry":return this.objectModel.hasPermission("entry.put")}},t.prototype.gtaHandler=function(e){return"task"===this.objectModel.get("objectType")&&(e=d.extend({type:this.objectModel.isSubtask()?"subtask":"task",series:this.objectModel.get("ancestorIds").length},e)),m.gta.event(e)},t}()},"7lUNyXlz":function(e,t,n){e.exports={"task-dependency-item":"task-dependency-item__3nmE","dependency-kind-menu-trigger":"dependency-kind-menu-trigger__36Qd","options-separator":"options-separator__23ie","menu-item":"menu-item___M6D","dependency-kind-item":"dependency-kind-item__2bRg","dependency-kind-menu-delete":"dependency-kind-menu-delete__tmku","dependency-task-info-wrap":"dependency-task-info-wrap__gUcE","dependency-task-info":"dependency-task-info__2DQN","task-info-left":"task-info-left__3UzF","date-info":"date-info__3eRr"}},"7lrF6wkq":function(e,t,n){"use strict";n.r(t),n.d(t,"OrganizationSelector",function(){return l});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("GESwhXbR"),a=n("YgQKVIvW"),c=n.n(a),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMatch=function(e,t){return e.data._id===t.data._id},t}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.orgs,n=e.currentValue,r=e.onSelect,o=t.map(function(e){var t={data:e,label:e.name};return i.a.createElement(s.Option,{key:e._id,value:t})}),a=n?{data:n,label:n.name}:void 0;return i.a.createElement(s.Select,{defaultValue:a,onSelect:r,matchFn:this.onMatch,className:c.a["organization-selector"]},o)},t}(o.PureComponent)},"7lticdRj":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR"),l=n("Ve9G5Tva"),u=n("90U+kJWN"),p=n("dLlRnP2h"),d=(n("tbvzLGsm"),function(e){function t(t){var n=e.call(this,t)||this;n.onClickFoldLink=function(e){return function(){n.setState(r.a({},n.state,{isShowAll:e}))}},n.quickSave=function(e){(e.ctrlKey||e.shiftKey||e.metaKey)&&13===e.keyCode&&(e.preventDefault(),n.onClickSave())},n.onChangeInput=function(e){var t=e.target.value||"";if(n.props.isRequired&&""===t)return n.setState(r.a({},n.state,{value:t,hasError:!0,errorMsg:i.get("required.field.empty.error")}));var o=n.validateValueLength(t),s=o?t:t.slice(0,n.maxTextLength);n.setState(r.a({},n.state,{value:s,hasError:!o,errorMsg:i.get("custom.field.word.overflow",n.maxTextLength)}))},n.onClickSave=function(){n.setState(r.a({},n.state,{isEditing:!1,hasError:!1})),n.onSave()},n.onClickCancel=function(){n.setState(r.a({},n.state,{isEditing:!1,value:n.props.value,hasError:!1}))},n.onClickEdit=function(e){e.preventDefault(),Object(p.linkHandler)(e.target,void 0,function(){}),n.props.isEditable&&"A"!==e.target.tagName&&(n.setState(r.a({},n.state,{isEditing:!0})),n.props.gtaHandler&&n.props.gtaHandler("text"))};var o=n.props,s=o.textCountLimit,a=void 0===s?1/0:s,c=o.maxTextLength,l=void 0===c?1/0:c;return n.textCountLimit=a,n.maxTextLength=l,n.state={value:t.value,isEditing:!1,hasError:!1,isShowAll:!1},n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.value!==e.value&&this.setState(r.a({},this.state,{value:e.value,isEditing:!1,hasError:!1}))},t.prototype.checkValueExceed=function(){var e=this.state.value;return e&&e.length>this.textCountLimit},t.prototype.onSave=function(){var e=this.state.value,t=e&&e.trim()||"";t!==this.props.value&&this.props.onSave(t)},t.prototype.validateValueLength=function(e){return!e||e.length<=this.maxTextLength},t.prototype.renderTextArea=function(){var e=a()("field-textarea form-control",{"has-error":this.state.hasError}),t=this.props.emptyPlaceholder||i.get("to.be.added");return o.createElement(l.a,{className:e,onChange:this.onChangeInput,onKeyDown:this.quickSave,value:this.state.value,placeholder:t,autoFocus:!0})},t.prototype.renderErr=function(){var e=this.state,t=e.hasError,n=e.errorMsg;return t&&o.createElement(o.Fragment,null,o.createElement(c.Icon,{name:"circle-remove"}),o.createElement("span",{className:"error-msg"},n))},t.prototype.renderHandler=function(){return o.createElement("div",{className:"buttons-wrapper"},o.createElement(c.TextButton,{onClick:this.onClickCancel},i.get("cancel")),o.createElement(c.Button,{className:"btn btn-primary",onClick:this.onClickSave,size:"small",disabled:this.state.hasError},i.get("save")))},t.prototype.renderTextareaContent=function(){return o.createElement("div",{className:"field-edit"},o.createElement("div",{className:"field-edit-wrapper"},this.renderTextArea(),o.createElement("div",{className:"handler-wrapper"},o.createElement("div",{className:"error-hint flex flex-vcenter"},this.renderErr()),this.renderHandler())))},t.prototype.renderField=function(){var e=this.props,t=e.isEditable,n=e.emptyPlaceholder,r=e.value,s=n||i.get("to.be.added"),c=this.state.value||s,l=this.checkValueExceed()&&!this.state.isShowAll?c.slice(0,this.textCountLimit)+"...":c,p=a()("text-value",{hinted:t,"has-value":!!r,"cursor-not-allowed":!t}),d=Object(u.formatHyperLink)(l);return o.createElement("p",{className:p,"data-title":i.get("clickToEdit"),onClick:this.onClickEdit,dangerouslySetInnerHTML:{__html:d}})},t.prototype.renderFoldLink=function(){var e=this.state.isShowAll;return this.checkValueExceed()&&o.createElement("a",{className:"fold-handler",onClick:this.onClickFoldLink(!e)},e?i.get("collapse"):i.get("view.more"))},t.prototype.render=function(){var e=this.state.isEditing;return o.createElement("div",{className:"detail-infos-content flex-space field-info-textarea"},e&&this.renderTextareaContent(),!e&&this.renderField(),!e&&this.renderFoldLink())},t}(o.PureComponent))},"7qsdOjBG":function(e,t,n){"use strict";var r,o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n.n(i),a=n("TSYQbtd+"),c=n.n(a),l=n("tLZJUYWX"),u=n.n(l),p=n("EiUFTky8"),d=n("wa5e7gwX"),h=n.n(d),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.accomplished.at.date")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,h.a["task-accomplished"]),t=Object(p.accomplishedAtDateFormatter)(this.props.task);return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:h.a["task-accomplished__inner"]},t))},t}(i.PureComponent),f=n("GESwhXbR"),g=n("H5U46Bxa"),v=n.n(g),b=n("OmupbwLD"),y=n.n(b),k=n("5xVa82RZ"),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-add",t.taskCreatorView=null,t.handleSuccess=function(e){var n;t.props.onSuccess&&(n=t.props).onSuccess.apply(n,o.h(e))},t.handleClick=function(e){e.stopPropagation(),t.taskCreatorView=(new y.a).open(v.a,{_projectId:t.props.meta._projectId,_sprintId:t.props.meta._sprintId,_stageId:t.props.meta._stageId,_tasklistId:t.props.meta._tasklistId,proTemplateConfigType:t.props.meta.proTemplateConfigType,customfields:t.props.meta.customfields,scenarioFieldConfigId:t.props.meta._scenarioFieldConfigId,success:t.handleSuccess}),t.props.onTrigger&&t.props.onTrigger()},t}return o.d(t,e),t.prototype.componentWillUnmount=function(){this.taskCreatorView&&this.taskCreatorView.remove()},t.prototype.render=function(){var e=c()(this.props.className,k[""+this.rootClassName]);return i.createElement("div",{className:e,onClick:this.handleClick,title:l.get("table.task.add")},i.createElement(f.Icon,{className:k[this.rootClassName+"__inner"],name:"circle-plus"}))},t}(i.PureComponent),w=n("J8c1v50A"),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-add-subtask",t.taskCreatorView=null,t.handleSuccess=function(e){var n;(n=t.props).onSuccess.apply(n,o.h([t.props.parentTask],e))},t.handleClick=function(e){e.stopPropagation();var n=t.props.parentTask.entity;t.taskCreatorView=(new y.a).open(v.a,{_projectId:n._projectId,_sprintId:n._sprintId,_stageId:n._stageId,_tasklistId:n._tasklistId,ancestorId:n._id,success:t.handleSuccess,proTemplateConfigType:"subtask"}),t.props.onTrigger&&t.props.onTrigger()},t}return o.d(t,e),t.prototype.componentWillUnmount=function(){this.taskCreatorView&&this.taskCreatorView.remove()},t.prototype.render=function(){var e=c()(this.props.className,w[""+this.rootClassName]);return i.createElement("div",{className:e,onClick:this.handleClick,style:this.props.style,title:l.get("table.task.add.subtask")},i.createElement(f.Icon,{className:w[this.rootClassName+"__inner"],name:"circle-plus-o"}))},t}(i.PureComponent),S=n("sa1Ed382"),E=n("oq1bWpp9"),T=n.n(E),I=n("a+N5u/Cl"),M=n.n(I),j=n("Iqb/Tbd3"),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-bulk-archive",t.handleClick=function(){var e=t.props.rows.map(function(e){return e.entity});t.props.onClick(e)},t.onTriggerGta=function(){S.gta.event({action:"archive content",method:"batch operation",control:"Table Header",projectid:t.props.projectId})},t}return o.d(t,e),t.prototype.renderTrigger=function(e){var t=c()(j[this.rootClassName+"__trigger"],e?j[this.rootClassName+"__trigger--disabled"]:null);return i.createElement("div",{className:t,onClick:this.onTriggerGta},i.createElement(f.Icon,{className:j[this.rootClassName+"__trigger-icon"],name:"trash"}),i.createElement("span",{className:j[this.rootClassName+"__trigger-text"]},l.get("archive")))},t.prototype.canArchive=function(){var e=this.props.rows.map(function(e){return e.entity._id});if(0===e.length)return!1;for(var t=o.h(this.props.rows);t.length>0;){var n=t.shift();if(n){if(!new T.a(n.entity,{bindByMatrix:!1}).hasPermission("task.put"))return!1;if(Object(p.isSubtask)(n.entity)&&!M.a.includes(e,n.entity._id))return!1;t.push.apply(t,o.h(n.children||[]))}}return!0},t.prototype.render=function(){var e=!this.canArchive(),t=this.renderTrigger(e);return e?t:i.createElement(f.PopupMenu,{className:j[this.rootClassName+"__popup"],main:0,trigger:t},i.createElement(f.PopupMenuView,{index:0,title:l.get("archive")},i.createElement("div",null,l.get("task.bulk.archive.confirm.desc",this.props.rows.length)),i.createElement(f.Button,{className:j[this.rootClassName+"__popup_button"],danger:!0,onClick:this.handleClick},l.get("archive"))))},t}(i.PureComponent),x=n("s0r7VfKc"),N=n("wVXDg9Ql"),O=n("gh8QIhMV"),R=n("HLaCnIR0"),D=n("4lhOPbG6"),L=n("90U+kJWN"),z=function(e){return o.h(A(e),V(e)).filter(function(e){return!!$(e)})},A=function(e){var t=e.map(p.getColumnKey);return ut.map(function(e){return at[e]}).filter(function(e){return!!e&&(pt[e.name]||[e.name]).some(function(e){return-1!==t.indexOf(e)})})},V=function(e){return e.map(function(e){return e.customField?{name:"customfield",text:e.customField.name,customField:e.customField}:null}).filter(D.isNonNullable)},F=function(e){return e.customField?e.customField._customfieldId:e.name},B=function(e){return e.text},U=function(e){switch(e.type){case"commongroup":return e.subtype;default:return e.type}},$=function(e){return e.customField?dt[U(e.customField)]:ct[e.name]},H=function(e){var t=$(e),n=t?t.emptyValue:void 0;return void 0===n?null:n},G=function(e){return{name:e.name,customFieldId:(t=e,t.customField&&t.customField._customfieldId),scenariofieldconfigId:e.scenariofieldconfigId};var t},q=n("hpce7W0k"),W=n("L9cD+1dr"),J=n.n(W),X=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={},n.handleChange=function(e){var t=e?{_id:e.id,value:e.name}:void 0;t&&n.state.value&&t._id===n.state.value._id?n.setState({value:void 0}):n.setState({value:t})},n.handleSubmit=function(e){e.preventDefault();var r=n.state.value;n.props.onSubmit(r?[r]:t.emptyValue)},n}return o.d(t,e),t.prototype.render=function(){var e=Y(this.props.customField,this.state.value);return s.a.createElement(f.Form,{className:J.a["common-group"],onSubmit:this.handleSubmit},s.a.createElement("fieldset",null,s.a.createElement(q.a,{fieldInfo:e,isEditable:!0,boundToObjectType:"task",project:K(this.props.projectId),onClickSelected:this.handleChange,onClickRecommend:this.handleChange,onClickSearched:this.handleChange,onClose:M.a.noop,onSave:M.a.noop})),s.a.createElement("fieldset",null,s.a.createElement(f.Button,{htmlType:"submit",disabled:!this.state.value},u.a.get("confirm"))))},t.emptyValue=[],t}(i.PureComponent),Y=function(e,t){return{_id:e._customfieldId,name:e.name,type:"commongroup",subtype:e.subtype,choices:e.choices,_roleIds:e._roleIds,isSingleSelection:!!e.isSingleSelection,value:"",hasValue:!!t,commonGroupValue:t}},K=function(e){return{_id:e}},Q=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleChange=function(e){var r=e&&e.dateString;n.props.onSubmit(r?[r]:t.emptyValue)},n}return o.d(t,e),t.prototype.render=function(){return s.a.createElement(f.DatePicker,{inline:!0,onClear:this.handleChange,onChange:this.handleChange})},t.emptyValue=[],t}(i.PureComponent),Z=n("1mC14iT0"),ee=n.n(Z),te=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={value:""},n.handleChange=function(e,t){var r=t.currentTarget.value;n.setState({value:r})},n.handleSubmit=function(e){e.preventDefault();var r=n.state.value.trim();n.props.onSubmit(r?[r]:t.emptyValue)},n}return o.d(t,e),t.prototype.render=function(){return s.a.createElement(f.Form,{className:ee.a["custom-number"],onSubmit:this.handleSubmit},s.a.createElement("fieldset",null,s.a.createElement(f.InputNumber,{placeholder:u.a.get("table.batch.edit.placeholder"),onChange:this.handleChange,size:"large"})),s.a.createElement("fieldset",null,s.a.createElement(f.Button,{htmlType:"submit"},u.a.get("confirm"))))},t.emptyValue=[],t}(i.PureComponent),ne=n("VoC9J8VQ"),re=n.n(ne),oe=function(e){function t(n){var r=e.call(this,n)||this;return r.inputRef=s.a.createRef(),r.choices=[],r.empty={data:"",label:u.a.get("custom.field.dropDown.null")},r.fetchChoices=function(){r.choicesSubscription&&r.choicesSubscription.unsubscribe(),r.setState({isLoading:!0}),r.choicesSubscription=x.default.fetch.getCustomFieldChoices(r.props.organizationId,r.props.customField._id).subscribe(function(e){r.choices=e,r.setState({isLoading:!1})})},r.onInputChange=function(e){r.setState({input:e.target.value})},r.isSelected=function(e){return r.state.value===e.data},r.handleSelect=function(e){r.setState({value:e.data})},r.handleSubmit=function(e){e.preventDefault();var n=r.state.value;r.props.onSubmit(n?[n]:t.emptyValue)},r.state={isLoading:!0,value:"",input:""},r}return o.d(t,e),t.prototype.componentDidMount=function(){this.fetchChoices(),this.inputRef.current&&this.inputRef.current.focus()},t.prototype.componentWillUnmount=function(){this.choicesSubscription&&this.choicesSubscription.unsubscribe()},t.prototype.getOptionList=function(){var e=this;return[this.empty].concat(this.choices.map(function(e){return{data:e.value,label:e.value}})).filter(function(t){return t.label.indexOf(e.state.input.trim())>=0})},t.prototype.renderPlaceHolder=function(){return 0===this.getOptionList().length&&s.a.createElement("div",{className:re.a.placeholder},s.a.createElement("div",{className:re.a["placeholder-img"]}),s.a.createElement("p",{className:re.a["placeholder-tip"]},u.a.get("search.filter.selector.not.found")))},t.prototype.render=function(){if(this.state.isLoading)return s.a.createElement(f.Loading,null);var e=this.getOptionList();return s.a.createElement(f.Form,{className:re.a["custom-select"],onSubmit:this.handleSubmit},s.a.createElement("div",{className:re.a["field-search"]},s.a.createElement(f.Input,{ref:this.inputRef,placeholder:u.a.get("search"),size:"large",value:this.state.input,onChange:this.onInputChange})),s.a.createElement("fieldset",null,s.a.createElement(ie,{optionList:e,isSelected:this.isSelected,onSelect:this.handleSelect})),this.renderPlaceHolder(),s.a.createElement("fieldset",null,s.a.createElement(f.Button,{htmlType:"submit"},u.a.get("confirm"))))},t.emptyValue=[],t}(i.PureComponent),ie=function(e){var t=e.optionList,n=e.isSelected,r=e.onSelect,o=function(e){return function(){return r(e)}},i=t.map(function(e,t){return s.a.createElement(f.MenuItem,{key:t,onClick:o(e),className:"option"},s.a.createElement("span",{className:"text"},e.label),n(e)?s.a.createElement(f.Icon,{name:"tick",className:"icon"}):null)});return s.a.createElement(f.Menu,{className:re.a["option-list"]},i)},se=n("iyGwx6rD"),ae=n.n(se),ce=function(e){function t(t){var n=e.call(this,t)||this;return n.choices=[],n.inputRef=s.a.createRef(),n.fetchChoices=function(){n.choicesSubscription&&n.choicesSubscription.unsubscribe(),n.setState({isLoading:!0}),n.choicesSubscription=x.default.fetch.getCustomFieldChoices(n.props.organizationId,n.props.customField._id).subscribe(function(e){n.choices=e,n.setState({isLoading:!1})})},n.onInputChange=function(e){n.setState({input:e.target.value})},n.isSelected=function(e){return M.a.includes(n.state.value,e.data)},n.handleSelect=function(e){var t=Object(L.toggle)(n.state.value,e.data);n.setState({value:t})},n.handleSubmit=function(e){e.preventDefault();var t=n.state.value;n.props.onSubmit(t)},n.state={isLoading:!0,value:[],input:""},n}return o.d(t,e),t.prototype.componentDidMount=function(){this.fetchChoices(),this.inputRef.current&&this.inputRef.current.focus()},t.prototype.componentWillUnmount=function(){this.choicesSubscription&&this.choicesSubscription.unsubscribe()},t.prototype.getOptionList=function(){var e=this;return this.choices.map(function(e){return{data:e.value,label:e.value}}).filter(function(t){return t.label.indexOf(e.state.input.trim())>=0})},t.prototype.renderPlaceHolder=function(){return 0===this.getOptionList().length&&s.a.createElement("div",{className:ae.a.placeholder},s.a.createElement("div",{className:ae.a["placeholder-img"]}),s.a.createElement("p",{className:ae.a["placeholder-tip"]},u.a.get("search.filter.selector.not.found")))},t.prototype.render=function(){return this.state.isLoading?s.a.createElement(f.Loading,null):s.a.createElement(f.Form,{className:ae.a["custom-select-multiple"],onSubmit:this.handleSubmit},s.a.createElement("div",{className:ae.a["field-search"]},s.a.createElement(f.Input,{ref:this.inputRef,placeholder:u.a.get("search"),size:"large",value:this.state.input,onChange:this.onInputChange})),s.a.createElement("fieldset",null,s.a.createElement(ie,{optionList:this.getOptionList(),isSelected:this.isSelected,onSelect:this.handleSelect})),this.renderPlaceHolder(),s.a.createElement("fieldset",null,s.a.createElement(f.Button,{htmlType:"submit",disabled:0===this.state.value.length},u.a.get("confirm"))))},t.emptyValue=[],t}(i.PureComponent),le=n("tuwDRQZf"),ue=n.n(le),pe=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={value:""},n.handleChange=function(e){n.setState({value:e.currentTarget.value})},n.handleSubmit=function(e){e.preventDefault();var r=n.state.value.trim();n.props.onSubmit(r?[r]:t.emptyValue)},n}return o.d(t,e),t.prototype.render=function(){return s.a.createElement(f.Form,{className:ue.a["custom-text"],onSubmit:this.handleSubmit},s.a.createElement("fieldset",null,s.a.createElement(f.TextArea,{placeholder:u.a.get("table.batch.edit.placeholder"),onChange:this.handleChange})),s.a.createElement("fieldset",null,s.a.createElement(f.Button,{htmlType:"submit"},u.a.get("confirm"))))},t.emptyValue=[],t}(i.PureComponent),de=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleChange=function(e){var r=e?e.dateString:t.emptyValue;n.props.onSubmit(r)},n}return o.d(t,e),t.prototype.render=function(){return s.a.createElement(f.DatePicker,{inline:!0,startDate:this.props.startDate,endDate:this.props.endDate,onClear:this.handleChange,onChange:this.handleChange})},t.emptyValue=null,t}(i.PureComponent),he=n("wd/RKGTj"),me=n.n(he);!function(e){e.Start="START_DATE",e.End="END_DATE"}(r||(r={}));var fe,ge=function(e,t){switch(e){case r.Start:var n=be(t);return n?{endDate:me()(n),date:me()(n)}:{};case r.End:var o=ve(t);return o?{startDate:me()(o),date:me()(o)}:{}}},ve=function(e){var t=M.a.max(e,function(e){return e.startDate?new Date(e.startDate).valueOf():-1/0});return t.startDate?t.startDate:null},be=function(e){var t=M.a.min(e,function(e){return e.dueDate?new Date(e.dueDate).valueOf():1/0});return t.dueDate?t.dueDate:null},ye=n("Qa3q4aD4"),ke=n("kuYoSsIJ"),_e=n("8uCqaoSf"),we=n.n(_e),Ce=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={},n.connectDispatcher=function(e){return{search:function(t){e.next({type:"SEARCH_TERM_CHANGE",payload:t})},onClickSelected:function(t){e.next({type:"TOGGLE_ENTRY",payload:t}),n.handleClick(t)},onClickRecommend:function(t){e.next({type:"TOGGLE_ENTRY",payload:t}),n.handleClick(t)},onClickSearched:function(t){e.next({type:"TOGGLE_ENTRY",payload:t}),n.handleClick(t)}}},n.handleClick=function(e){var t=!(!n.state.value||n.state.value.id!==e.id)?void 0:e;n.setState({value:t})},n.handleSubmit=function(e){e.preventDefault();var r=n.state.value?Object(ye.userInvolverAsUser)(n.state.value):null,o=r?r._id:t.emptyValue;n.props.onSubmit(o)},n}return o.d(t,e),t.prototype.render=function(){var e={_projectId:this.props.projectId};return s.a.createElement(f.Form,{className:we.a["task-executor"],onSubmit:this.handleSubmit},s.a.createElement("fieldset",null,s.a.createElement(ke.a,{contextId:e,disabled:!1,inviteShowed:!1,inline:!0,connectDispatcher:this.connectDispatcher})),s.a.createElement("fieldset",null,s.a.createElement(f.Button,{htmlType:"submit",disabled:!this.state.value},u.a.get("confirm"))))},t.emptyValue=null,t}(i.PureComponent),Se=n("4c1CS0b3"),Ee=n("BsTK5jZO"),Te=n("3nOnSD6h"),Ie=n("EfuvDahv"),Me=n("rrNAR71G"),je=n("u/LJYZ+h"),Pe=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleSubmit=function(e){var r=e.users||t.emptyValue;n.props.onSubmit(r)},n}return o.d(t,e),t.prototype.render=function(){var e,t,n,r,o,i,a,c=(e=this.props.projectId,t="task",n=[],r=this.handleSubmit,o={_projectId:e},i=u.a.get("member.addmenu.search.not.found.in.organization"),a=u.a.get("member.addmenu.content.empty"),Object(Te.createMemberMenuWrapper)({search:function(e){return Ee.InvolverInput.loadSearch(t,o,e,{withTeamsAndGroups:!1}).catch(function(){return Se.Observable.empty()})},loadSelected:function(){return Se.Observable.of(n)},loadRecommend:function(){return Ee.InvolverInput.loadInitialRecommend(t,o,{hideAllProjectMembersHandler:!0,withTeamsAndGroups:!1}).catch(function(){return Se.Observable.empty()})},commit:function(e){var t=Object(Ie.preparePayload)(e);return t?Se.Observable.of(t).do(r):Se.Observable.empty()},canToggleInvolver:Me.b},{hideSelected:!1,searchNotFoundPlaceholder:{text:i},contentPlaceholder:{text:a,imgSrc:je}}));return s.a.createElement(c,{inviteShowed:!1,inline:!0})},t.emptyValue=[],t}(i.PureComponent),xe=n("fpIMfP/U"),Ne=n("MKFOP9IO"),Oe=n("Vi/WkPyP"),Re=n.n(Oe),De=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={value:t.emptyValue},n.handleChange=function(e){n.setState({value:e.number})},n.handleSubmit=function(e){e.preventDefault(),n.props.onSubmit(n.state.value)},n}return o.d(t,e),t.prototype.render=function(){return s.a.createElement(f.Form,{className:Re.a["task-priority"],onSubmit:this.handleSubmit},s.a.createElement("fieldset",null,s.a.createElement(Ne.a,{priority:xe.a[this.state.value],onClickPriority:this.handleChange})),s.a.createElement("fieldset",null,s.a.createElement(f.Button,{htmlType:"submit"},u.a.get("confirm"))))},t.emptyValue=0,t}(i.PureComponent),Le=n("ltsvG1+o"),ze=n.n(Le),Ae=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={value:""},n.handleChange=function(e,t){var r=t.currentTarget.value;n.setState({value:r})},n.handleSubmit=function(e){e.preventDefault();var r=n.state.value.trim();n.props.onSubmit(r?Number(r):t.emptyValue)},n}return o.d(t,e),t.prototype.render=function(){return s.a.createElement(f.Form,{className:ze.a["task-progress"],onSubmit:this.handleSubmit},s.a.createElement("fieldset",null,s.a.createElement(f.InputNumber,{placeholder:u.a.get("table.batch.edit.placeholder.progress"),onChange:this.handleChange,size:"large"})),s.a.createElement("fieldset",null,s.a.createElement(f.Button,{htmlType:"submit"},u.a.get("confirm"))))},t.emptyValue=0,t}(i.PureComponent),Ve=n("C5FwwdFb"),Fe=n("VDY/mBIx"),Be=n.n(Fe),Ue=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={value:t.emptyValue},n.handleChange=function(e){n.setState({value:e})},n.handleSubmit=function(e){e.preventDefault(),n.props.onSubmit(n.state.value)},n}return o.d(t,e),t.prototype.render=function(){return s.a.createElement(f.Form,{className:Be.a["task-story-point"],onSubmit:this.handleSubmit},s.a.createElement("fieldset",null,s.a.createElement(Ve.a,{storyPoint:this.state.value,onClickStoryPoint:this.handleChange})),s.a.createElement("fieldset",null,s.a.createElement(f.Button,{htmlType:"submit"},u.a.get("confirm"))))},t.emptyValue=null,t}(i.PureComponent),$e=n("kgLdAlVe"),He=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.handleToggle=function(e){var n=Object(L.toggle)(t.props.tagIds,e);t.props.onChange(n)},t.createTag=function(e){var n=t.props.projectId;if(!n)return Promise.resolve();var r=o.a({_projectId:n,color:"blue"},e);return x.default.createTag(r).toPromise()},t}return o.d(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.projectId,r=t.organizationId,i=Se.Observable.combineLatest(M.a.compact([n&&x.default.getTags(n,"project").changes(),r&&x.default.getTags(r,"organization").changes()])).do(function(t){var n=M.a.flatten(t);e.setState({tags:n})}),s=(r&&n?x.default.fetch.getTagCategories(r,n):Se.Observable.of([])).catch(function(){return Se.Observable.of([])}).do(function(t){t=o.h(t,[Ge]),e.setState({tagCategories:t})});this.subscription=Se.Observable.merge(i,s).subscribe()},t.prototype.componentWillUnmount=function(){this.subscription.unsubscribe()},t.prototype.render=function(){return this.state.tags&&this.state.tagCategories?s.a.createElement($e.a,{tags:this.state.tags,tagCategories:this.state.tagCategories,selectedTags:this.props.tagIds,canAddTag:!1,canPutTag:!0,onSelectTag:this.handleToggle,onUnselectTag:this.handleToggle,onCreateTag:this.createTag,onRemoveTag:M.a.noop,onModifyTag:M.a.noop,onOpen:M.a.noop,onHide:M.a.noop,switchTagPopupMenu:M.a.noop}):s.a.createElement(f.Loading,null)},t}(i.PureComponent),Ge={_id:M.a.uniqueId("uncategorized"),get name(){return u.a.get("organization.tag.category.uncategorized")},isDefault:!0},qe=n("6/ZRgPiJ"),We=n.n(qe),Je=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={value:t.emptyValue},n.handleChange=function(e){n.setState({value:e})},n.handleSubmit=function(e){e.preventDefault(),n.props.onSubmit(n.state.value)},n}return o.d(t,e),t.prototype.render=function(){return s.a.createElement(f.Form,{className:We.a["task-tag-list"],onSubmit:this.handleSubmit},s.a.createElement("fieldset",null,s.a.createElement(He,{organizationId:this.props.organizationId,projectId:this.props.projectId,tagIds:this.state.value,onChange:this.handleChange})),s.a.createElement("fieldset",null,s.a.createElement(f.Button,{htmlType:"submit",disabled:0===this.state.value.length},u.a.get("confirm"))))},t.emptyValue=[],t}(i.PureComponent),Xe=n("kN0Ms7YR"),Ye=n.n(Xe),Ke=n("12XtBL+h"),Qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTaskLocatorMount=function(){var e=t.props.project;if(e){var n=e._organizationId?e._organizationId:void 0;Object(Ke.b)({organizationId:n,selectedProject:e,hideIndieEntry:!0})}},t.handleSubmit=function(e){var n={_scenariofieldconfigId:e.selectedScenarioField._id,_taskflowstatusId:e.selectedTaskflowStatus._id};t.props.onSubmit&&t.props.onSubmit(n)},t}return o.d(t,e),t.prototype.componentDidMount=function(){this.onTaskLocatorMount()},t.prototype.render=function(){return s.a.createElement(f.Form,{className:Ye.a["task-progress"]},s.a.createElement("fieldset",null,s.a.createElement(Ke.a,{optionalType:"bulkStatus",tips:"",showLinkOptions:!1,doLink:!1,doLinked:!1,onSubmit:this.handleSubmit})))},t.emptyValue={_scenariofieldconfigId:"",_taskflowstatusId:""},t}(s.a.PureComponent),Ze=n("pVPhvouy"),et=n.n(Ze),tt=n("61rjr1Fd"),nt=n("oBMTqYJ0"),rt=function(e){function t(t){var n=e.call(this,t)||this;return n.NormalStatusOptions=Object(tt.i)(),n.handleSelect=function(e){n.setState({selectedId:e})},n.handleSubmit=function(){n.props.onSubmit&&n.props.onSubmit({isDone:"true"===n.state.selectedId})},n.state={selectedId:"false"},n}return o.d(t,e),t.prototype.render=function(){return s.a.createElement(f.Form,{className:et.a["task-progress"]},s.a.createElement("fieldset",null,s.a.createElement(nt.a,{data:this.NormalStatusOptions,selectedId:this.state.selectedId,type:"task",onSelect:this.handleSelect})),s.a.createElement("fieldset",null,s.a.createElement(f.Button,{htmlType:"submit",onClick:this.handleSubmit},u.a.get("confirm"))))},t.emptyValue={isDone:!1},t}(s.a.PureComponent),ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){return s.a.createElement("div",{className:this.props.className},this.renderBasicField(),this.renderCustomField())},t.prototype.renderBasicField=function(){if(this.props.field.customField)return null;switch(this.props.field.name){case"_executorId":return this.props.projectId?s.a.createElement(Ce,{projectId:this.props.projectId,onSubmit:this.props.onSubmit}):(Object(O.throwError)(new Error("ProjectId required")),null);case"involveMembers":return this.props.projectId?s.a.createElement(Pe,{projectId:this.props.projectId,onSubmit:this.props.onSubmit}):(Object(O.throwError)(new Error("ProjectId required")),null);case"startDate":var e=ge(r.Start,this.props.tasks);return s.a.createElement(de,o.a({},e,{onSubmit:this.props.onSubmit}));case"dueDate":e=ge(r.End,this.props.tasks);return s.a.createElement(de,o.a({},e,{onSubmit:this.props.onSubmit}));case"storyPoint":return s.a.createElement(Ue,{onSubmit:this.props.onSubmit});case"priority":return s.a.createElement(De,{onSubmit:this.props.onSubmit});case"tag":return s.a.createElement(Je,{organizationId:this.props.organizationId,projectId:this.props.projectId,onSubmit:this.props.onSubmit});case"taskProgress":return s.a.createElement(Ae,{onSubmit:this.props.onSubmit});case"_taskflowstatusId":return s.a.createElement(Qe,{project:this.props.project,onSubmit:this.props.onSubmit});case"isDone":return s.a.createElement(rt,{onSubmit:this.props.onSubmit});default:return null}},t.prototype.renderCustomField=function(){if(!this.props.field.customField)return null;switch(U(this.props.field.customField)){case"dropDown":return s.a.createElement(oe,{organizationId:this.props.organizationId,customField:this.props.field.customField,onSubmit:this.props.onSubmit});case"multipleChoice":return s.a.createElement(ce,{organizationId:this.props.organizationId,customField:this.props.field.customField,onSubmit:this.props.onSubmit});case"number":return s.a.createElement(te,{onSubmit:this.props.onSubmit});case"date":return s.a.createElement(Q,{onSubmit:this.props.onSubmit});case"text":return s.a.createElement(pe,{onSubmit:this.props.onSubmit});case"story":case"bug":return this.props.projectId?s.a.createElement(X,{projectId:this.props.projectId,customField:this.props.field.customField,onSubmit:this.props.onSubmit}):(Object(O.throwError)(new Error("ProjectId required")),null);default:return null}},t}(i.PureComponent),it={get add(){return u.a.get("table.batch.edit.method.add")},get update(){return u.a.get("table.batch.edit.method.update")},get delete(){return u.a.get("table.batch.edit.method.delete")},get clear(){return u.a.get("table.batch.edit.method.clear")}},st={add:"addUnique",update:"replace",delete:"remove",clear:"replace"},at={_executorId:{name:"_executorId",get text(){return u.a.get("table.task.executor")}},involveMembers:{name:"involveMembers",get text(){return u.a.get("table.task.involveMembers")}},startDate:{name:"startDate",get text(){return u.a.get("table.task.startDate")}},dueDate:{name:"dueDate",get text(){return u.a.get("table.task.dueDate")}},storyPoint:{name:"storyPoint",get text(){return u.a.get("table.task.storyPoint")}},priority:{name:"priority",get text(){return u.a.get("table.task.priority")}},tag:{name:"tag",get text(){return u.a.get("table.task.tagIds")}},taskProgress:{name:"taskProgress",get text(){return u.a.get("table.task.progress")}},isDone:{name:"isDone",get text(){return u.a.get("table.task.taskflowstatus")}},_taskflowstatusId:{name:"_taskflowstatusId",get text(){return u.a.get("table.task.taskflowstatus")}}},ct={_executorId:Ce,involveMembers:Pe,startDate:de,dueDate:de,storyPoint:Ue,priority:De,tag:Je,taskProgress:Ae,isDone:Qe,_taskflowstatusId:Qe},lt={_executorId:["update","clear"],involveMembers:["add","update","delete","clear"],startDate:["update","clear"],dueDate:["update","clear"],storyPoint:["update","clear"],priority:["update"],tag:["add","update","delete","clear"],taskProgress:["update","clear"],isDone:["update"],_taskflowstatusId:["update"]},ut=["_executorId","involveMembers","startDate","dueDate","isDone","_taskflowstatusId","storyPoint","priority","tag","taskProgress"],pt={_executorId:["_executorId","executor"],involveMembers:["involveMembers","involvers"],startDate:["startDate"],dueDate:["dueDate"],storyPoint:["storyPoint"],priority:["priority"],tag:["tagIds","tags"],taskProgress:["progress"],_taskflowstatusId:["_taskflowstatusId"],isDone:["isDone"]},dt={bug:X,date:Q,dropDown:oe,multipleChoice:ce,number:te,story:X,text:pe},ht={bug:["update","clear"],date:["update","clear"],dropDown:["update","clear"],multipleChoice:["add","update","delete","clear"],number:["update","clear"],story:["update","clear"],text:["update","clear"]},mt=n("+8qpssbX"),ft=function(e){S.gta.event({action:e?"open batch editing":"close batch editing",control:"Table Header"})},gt=function(){S.gta.event({action:"begin search",control:"Batch Editing Menu",type:"field"})},vt=function(e){S.gta.event({action:"choose edit field",control:"Batch Editing Menu",type:kt(e),category:_t(e)})},bt=function(e,t){S.gta.event({action:St[t],control:"Edit Mode Menu",type:kt(e),category:_t(e)})},yt=function(e,t){S.gta.event({action:Et[t],control:"Edit Mode Menu",type:kt(e),category:_t(e)})},kt=function(e){var t;if(function(e){e.system="system default field",e.custom="custom field"}(t||(t={})),e.customField)switch(e.customField.subtype){case"story":case"bug":return t.system;default:return t.custom}return t.system},_t=function(e){var t=e.customField?Ct[U(e.customField)]:wt[e.name];return t||e.name},wt={_executorId:"assignee",involveMembers:"participant",startDate:"start date",dueDate:"due date",storyPoint:"story points",priority:"priority",tag:"tag",taskProgress:"progress"},Ct={story:"demand classification",bug:"bug classification",dropDown:"single selection",multipleChoice:"multiple selection",number:"digital",date:"date",text:"text"},St={add:"add content",update:"replace content",delete:"delete section",clear:"delete all"},Et={add:"added content",update:"replaced content",delete:"deleted section",clear:"deleted all"},Tt=n("ul6V2LJL"),It=n.n(Tt),Mt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={keyword:""},t.handleSearch=function(e){var n=e.currentTarget.value.trim();n!==t.state.keyword&&t.setState({keyword:n}),t.isTouched||(t.isTouched=!0,gt())},t.isTouched=!1,t.handleClick=function(e){return function(){t.props.onFieldClick(e),vt(e)}},t}return o.d(t,e),t.prototype.render=function(){return s.a.createElement("div",{className:c()(this.props.className,It.a.wrapper)},s.a.createElement("div",{className:It.a["main-view"]},this.renderFieldSearch(),this.renderFieldList()),this.renderLoading())},t.prototype.renderFieldSearch=function(){return s.a.createElement("div",{className:"field-search"},s.a.createElement(f.Input,{placeholder:u.a.get("table.batch.edit.search"),size:"large",onChange:this.handleSearch,autoFocus:!0}))},t.prototype.renderFieldList=function(){var e=this,t=function(e,t){return 0===t.length?e:Object(L.search)(e,t,"name","text")}(this.props.fieldList,this.state.keyword);if(0===t.length)return this.renderPlaceholder();var n=t.map(function(t){return s.a.createElement(f.MenuItem,{key:F(t),onClick:e.handleClick(t)},B(t))});return s.a.createElement("ul",{className:"field-list"},n)},t.prototype.renderPlaceholder=function(){var e=this.state.keyword,t=u.a.get("table.batch.edit.search.empty",e);return s.a.createElement("div",{className:"placeholder"},s.a.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:t}}))},t.prototype.renderLoading=function(){return this.props.isLoading&&s.a.createElement("div",{className:"loading"},s.a.createElement(f.Loading,null))},t}(i.PureComponent),jt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleMethodClick=function(e){return function(){t.props.onMethodClick(e)}},t}return o.d(t,e),t.prototype.render=function(){return s.a.createElement(f.Menu,{className:this.props.className},this.renderMenu())},t.prototype.renderMenu=function(){var e=this;return this.props.methodList.map(function(t){return s.a.createElement(f.MenuItem,{key:t,onClick:e.handleMethodClick(t)},it[t])})},t}(i.PureComponent),Pt=n("RDPHhKgn"),xt=n.n(Pt),Nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){var e=c()(this.props.className,xt.a["confirm-edit-view"]);return s.a.createElement("div",{className:e},s.a.createElement("p",{className:"text"},this.props.children),s.a.createElement(f.Button,{onClick:this.props.onConfirm,loading:this.props.isLoading},u.a.get("confirm")))},t}(i.PureComponent),Ot=n("pstmOn2P"),Rt=n.n(Ot),Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){var e=c()(this.props.className,Rt.a["confirm-clear-view"]);return s.a.createElement("div",{className:e},s.a.createElement("p",{className:"text"},u.a.get("table.batch.edit.method.clear.desc")),s.a.createElement(f.Button,{onClick:this.props.onConfirm,danger:!0,loading:this.props.isLoading},u.a.get("confirm")))},t}(i.PureComponent),Lt=["content","executor"],zt={get content(){return u.a.get("table.batch.edit.task.content")},get executor(){return u.a.get("table.batch.edit.task.executor")}},At=n("9LRoG9cV"),Vt=n.n(At),Ft=function(e){return s.a.createElement("div",{className:Vt.a.table},Bt(),$t(e.tasks))},Bt=function(){return s.a.createElement("div",{className:"row head"},Ut())},Ut=function(){return Lt.map(function(e){return s.a.createElement("div",{key:e,className:c()("cell head",e)},zt[e])})},$t=function(e){return e.map(function(e){return s.a.createElement("div",{key:e._id,className:"row body"},Ht(e))})},Ht=function(e){return Lt.map(function(t){return s.a.createElement("div",{key:t,className:c()("cell body",t)},Gt(e,t))})},Gt=function(e,t){switch(t){case"content":return s.a.createElement("span",{className:Vt.a.text},e[t]);case"executor":return e.executor?s.a.createElement(s.a.Fragment,null,s.a.createElement(f.Avatar,{src:e.executor.avatarUrl,size:"small"}),s.a.createElement("span",{className:Vt.a.text},e.executor.name)):qt();default:return null}},qt=function(){return s.a.createElement("span",{className:Vt.a.empty},"-")},Wt=n("mIV10VeD"),Jt=n.n(Wt),Xt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.style={position:"absolute"},t.saveMountEl=function(e){t.mountEl=e},t.getMountEl=function(){return t.mountEl},t.getDescription=function(){switch(!!t.props.field&&t.props.field.name){case"_taskflowstatusId":case"isDone":return u.a.get("table.batch.edit.status.error.title");default:return u.a.get("table.batch.edit.error.title")}},t.handleClose=function(){t.isDumbComponent()?t.props.onVisibleChange&&t.props.onVisibleChange(!1):t.props.onHide&&t.props.onHide()},t}return o.d(t,e),t.prototype.render=function(){return s.a.createElement("div",{style:this.style},this.renderMountEl(),this.renderModal())},t.prototype.renderMountEl=function(){return s.a.createElement("div",{ref:this.saveMountEl})},t.prototype.renderModal=function(){return s.a.createElement(f.Modal,o.a({},this.props,{width:Object(f.getQuadUnit)(150),titlePosition:"center",title:u.a.get("table.batch.edit.error.tip"),titleCls:Jt.a["modal-head"],containerCls:Jt.a["modal-body"],mountIn:this.getMountEl}),this.renderContent())},t.prototype.renderContent=function(){return s.a.createElement("div",{className:Jt.a.container},this.renderBody(),this.renderFoot())},t.prototype.renderBody=function(){if(!this.props.payload)return s.a.createElement(f.Loading,null);var e=this.props.payload,t=e.successCount,n=e.failCount,r=e.failDetail,o=u.a.get("table.batch.edit.error.desc",t,n),i=this.getDescription();return s.a.createElement("div",{className:"body"},s.a.createElement("p",{className:"title"},o),s.a.createElement("p",{className:"desc"},i),s.a.createElement(Ft,{tasks:r}))},t.prototype.renderFoot=function(){return s.a.createElement("div",{className:"foot"},s.a.createElement(f.Button,{onClick:this.handleClose},u.a.get("confirm")))},t.prototype.isDumbComponent=function(){return"boolean"==typeof this.props.opened},t}(i.PureComponent),Yt=n("t5iMsrXP"),Kt=n.n(Yt);!function(e){e[e.Main=0]="Main",e[e.MethodList=1]="MethodList",e[e.Form=2]="Form",e[e.ConfirmEdit=3]="ConfirmEdit",e[e.ConfirmClear=4]="ConfirmClear"}(fe||(fe={}));var Qt,Zt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isLoading:!1},t.subscriptionList=[],t.savePopupMenuRef=function(e){t.popupMenuRef=e},t.handlePopupMenuOpen=function(){ft(!0)},t.handlePopupMenuHide=function(){ft(!1)},t.processRequest=function(e){return function(){try{t.onStart();var n=e().subscribe(function(e){if(0===e.failCount){var n=u.a.get("table.batch.edit.success",e.successCount);f.Toast.success({message:n})}else t.openErrorListModal(e);t.popupMenuRef&&t.popupMenuRef.reset(),t.props.onBulkEditSuccess&&t.props.onBulkEditSuccess()},function(e){t.onError(e),N.SDKInterceptor.ignore(e)},function(){return t.onComplete()});t.subscriptionList.push(n)}catch(r){t.onError(r)}}},t.handleFieldClick=function(e){if(t.onStart(),!t.props.projectId)return t.onError(new Error("ProjectId required"));var n=x.default.fetch.checkTaskFieldPermission(t.props.projectId,t.props.tasks.map(function(e){return e._id}),G(e)).subscribe(function(n){n.permission&&t.popupMenuRef?(t.setState({field:e}),t.popupMenuRef.goTo(fe.MethodList)):t.onError(new Error(u.a.get("table.batch.edit.forbidden")))},function(e){t.onError(e),N.SDKInterceptor.ignore(e)},function(){return t.onComplete()});t.subscriptionList.push(n)},t.handleMethodClick=function(e){if(t.setState({method:e}),t.popupMenuRef)switch(e){case"add":case"update":case"delete":t.popupMenuRef.goTo(fe.Form);break;case"clear":t.popupMenuRef.goTo(fe.ConfirmClear)}t.state.field&&bt(t.state.field,e)},t.handleFormSubmit=function(e){t.setState({value:e}),t.popupMenuRef&&t.popupMenuRef.goTo(fe.ConfirmEdit)},t.handleConfirmEdit=t.processRequest(function(){var e=t.props,n=e.projectId,r=e.tasks,o=t.state,i=o.field,s=o.method,a=o.value;if(!n)throw new Error("ProjectId required");if(!i||!s||M.a.isUndefined(a))throw new Error("Field/Method/FieldValue required");return yt(i,s),x.default.fetch.bulkEditTaskField(n,r.map(function(e){return e._id}),G(i),st[s],a)}),t.handleConfirmClear=t.processRequest(function(){var e=t.props,n=e.projectId,r=e.tasks,o=t.state.field;if(!n)throw new Error("ProjectId required");if(!o)throw new Error("Field required");return yt(o,"clear"),x.default.fetch.bulkEditTaskField(n,r.map(function(e){return e._id}),G(o),st.clear,H(o))}),t.handleErrorListModalHide=function(){R.a()},t}return o.d(t,e),t.prototype.componentWillUnmount=function(){this.subscriptionList.forEach(function(e){return e.unsubscribe()})},t.prototype.render=function(){return s.a.createElement(f.PopupMenu,{main:fe.Main,trigger:this.renderTrigger(),titleCls:Kt.a["popup-head"],ref:this.savePopupMenuRef,onOpen:this.handlePopupMenuOpen,onClose:this.handlePopupMenuHide},this.renderMainView(),this.renderMethodListView(),this.renderFormView(),this.renderConfirmEditView(),this.renderConfirmClearView())},t.prototype.renderTrigger=function(){return s.a.createElement("div",{className:Kt.a.trigger},s.a.createElement(f.Icon,{className:Kt.a["trigger-icon"],name:"pencil"}),s.a.createElement("span",{className:Kt.a["trigger-text"]},u.a.get("table.batch.edit")))},t.prototype.onStart=function(){this.setState({isLoading:!0})},t.prototype.onError=function(e){this.setState({isLoading:!1}),Object(O.throwError)(e),Object(mt.b)(e).then(function(e){e&&f.Toast.error({message:e})})},t.prototype.onComplete=function(){this.setState({isLoading:!1})},t.prototype.renderMainView=function(){return s.a.createElement(f.PopupMenuView,{index:fe.Main,title:u.a.get("table.batch.edit")},s.a.createElement(Mt,{className:Kt.a["popup-body"],fieldList:this.props.fieldList,isLoading:this.state.isLoading,onFieldClick:this.handleFieldClick}))},t.prototype.renderMethodListView=function(){return s.a.createElement(f.PopupMenuView,{index:fe.MethodList,title:u.a.get("table.batch.edit.method.list")},this.renderMethodListViewInner())},t.prototype.renderMethodListViewInner=function(){var e,t=this.state.field&&((e=this.state.field).customField?ht[U(e.customField)]:lt[e.name]);return t?s.a.createElement(jt,{className:Kt.a["popup-body"],methodList:t,onMethodClick:this.handleMethodClick}):s.a.createElement(f.Loading,null)},t.prototype.renderFormView=function(){var e=this.state,t=e.field,n=e.method,r=t&&B(t),o=n&&it[n],i=r&&o&&u.a.get("table.batch.edit.title",o,r);return s.a.createElement(f.PopupMenuView,{index:fe.Form,title:i||u.a.get("table.batch.edit")},this.renderFormViewInner())},t.prototype.renderFormViewInner=function(){var e=this.state,t=e.field,n=e.method;return t&&n?this.props.organizationId&&s.a.createElement(ot,{className:Kt.a["popup-body"],organizationId:this.props.organizationId,projectId:this.props.projectId,project:this.props.project,tasks:this.props.tasks,field:t,method:n,onSubmit:this.handleFormSubmit}):s.a.createElement(f.Loading,null)},t.prototype.renderConfirmEditView=function(){return s.a.createElement(f.PopupMenuView,{index:fe.ConfirmEdit,title:u.a.get("table.batch.edit")},this.renderConfirmEditViewInner())},t.prototype.renderConfirmEditViewInner=function(){var e=this.props.tasks,t=this.state,n=t.field,r=t.method;if(!n||!r)return s.a.createElement(f.Loading,null);var i=[it[r],e.length,n.text],a=u.a.get.apply(u.a,o.h(["table.batch.edit.method.edit.desc"],i));return s.a.createElement(Nt,{className:Kt.a["popup-body"],isLoading:this.state.isLoading,onConfirm:this.handleConfirmEdit},a)},t.prototype.renderConfirmClearView=function(){return s.a.createElement(f.PopupMenuView,{index:fe.ConfirmClear,title:u.a.get("table.batch.edit")},s.a.createElement(Dt,{className:Kt.a["popup-body"],isLoading:this.state.isLoading,onConfirm:this.handleConfirmClear}))},t.prototype.openErrorListModal=function(e){R.b(s.a.createElement(Xt,{field:this.state.field,payload:e,defaultOpened:!0,onHide:this.handleErrorListModalHide}))},t}(i.PureComponent);!function(e){e.MOVE="move",e.FORK="fork"}(Qt||(Qt={}));var en="task-bulk-move-or-fork",tn=n("PSYzXKAW"),nn=n("bvmrLhnu"),rn=n("ulhxSeMn"),on=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){var e,n=((e={})[Qt.MOVE]="move content",e[Qt.FORK]="add content",e);t.props.handleClick(),S.gta.event({method:"batch operation",action:n[t.props.mode],control:"Table Header",projectid:t.props.projectId})},t}return o.d(t,e),t.prototype.render=function(){var e=this.props,t=e.canTrigger,n=e.iconName,r=e.text,o=c()(rn[en+"__trigger"],t?null:rn[en+"__trigger--disabled"]);return s.a.createElement("div",{className:o,onClick:this.handleClick},s.a.createElement(f.Icon,{className:rn[en+"__trigger-icon"],name:n}),s.a.createElement("span",{className:rn[en+"__trigger-text"]},r))},t}(s.a.PureComponent),sn=function(e){function t(t){var n,r=e.call(this,t)||this;return r.i18n=((n={})[Qt.FORK]={icon:"copy",text:l.get("table.batch.fork"),title:l.get("table.batch.fork.title"),tip:l.get("table.batch.fork.tip")},n),r.handleClick=function(){"function"==typeof r.props.onClick&&r.props.onClick(),r.setState({modalOpened:!r.state.modalOpened})},r.onModalVisibleChange=function(e){r.setState({modalOpened:e})},r.onSubmit=function(e){var t=e.taskLocatorData,n=t.selectedProject,i=t.selectedTasklist,s=t.selectedStage,a=t.selectedScenarioField,c=t.selectedSprint,l=t.selectedTaskflowStatus,u={};u=Object(nn.isTaskflowEnabled)(n)?{_projectId:n._id,_taskflowstatusId:l._id,_scenariofieldconfigId:a._id,_tasklistId:i&&i._id}:{_projectId:n._id,_tasklistId:i._id,_stageId:s._id},Object(nn.isSprintEnabled)(n)&&(u=o.a({},u,{_sprintId:c&&c._id})),u=o.a({},u,{doLink:e.doLink,doLinked:e.doLinked,copyFields:e.copyFields,withAllSfcFields:e.withAllSfcFields});var p=r.props.rows.map(function(e){return e.entity});r.props.onSubmit(u,p)},r.state={modalOpened:!1},r}return o.d(t,e),t.prototype.renderTrigger=function(e){return i.createElement(on,{canTrigger:e,iconName:this.i18n[this.props.mode].icon,text:this.i18n[this.props.mode].text,mode:this.props.mode,projectId:this.props.projectId,handleClick:this.handleClick})},t.prototype.childrenTasksSelected=function(e,t){var n=0,r=0;return e.children&&e.children.length&&e.children.forEach(function e(o){n++,t.has(o.entity._id)&&r++;var i=r>0&&r<n;o.children&&o.children.length&&!i&&o.children.forEach(e)}),0===e.entity.ancestorIds.length&&0===r||n===r},t.prototype.canFork=function(){var e=this,t=new Map;return this.props.rows.forEach(function(e){return t.set(e.entity._id,e)}),this.props.rows.every(function(n){return n.entity.ancestorIds.every(function(e){return t.has(e)})&&e.childrenTasksSelected(n,t)})},t.prototype.render=function(){var e=this.canFork();if(!e)return this.renderTrigger(e);var t,n=this.props.project||void 0;return t=(!n||-1!==n.orgLevel&&-2!==n.orgLevel)&&n&&n._organizationId||void 0,i.createElement(i.Fragment,null,this.renderTrigger(e),i.createElement(tn.TaskCopy,{tips:"",hideIndieEntry:!0,showLinkOptions:!0,modalOpened:this.state.modalOpened,project:n,organizationId:t,canCopySubtask:!1,onSubmit:this.onSubmit,onModalVisibleChange:this.onModalVisibleChange}))},t}(i.PureComponent),an=n("T6KpLPMz"),cn=n("ulhxSeMn"),ln=function(e){function t(t){var n,r=e.call(this,t)||this;return r.i18n=((n={})[Qt.MOVE]={icon:"move-task",text:l.get("table.batch.move"),title:l.get("table.batch.move.title"),tip:l.get("table.batch.move.tip")},n),r.popupRef=null,r.savePopupRef=function(e){r.popupRef=e},r.onSubmit=function(e){var t=e.selectedProject,n=e.selectedTasklist,i=e.selectedStage,s=e.selectedScenarioField,a=e.selectedSprint,c=e.selectedTaskflowStatus,l={};l=Object(nn.isTaskflowEnabled)(t)?{_projectId:t._id,_taskflowstatusId:c._id,_scenariofieldconfigId:s._id,_tasklistId:n&&n._id}:{_projectId:t._id,_tasklistId:n._id,_stageId:i._id},Object(nn.isSprintEnabled)(t)&&(l=o.a({},l,{_sprintId:a&&a._id}));var u=r.props.rows.filter(function(e){return!Object(p.isSubtask)(e.entity)}).map(function(e){return e.entity});r.props.onSubmit(l,u),r.popupRef.close()},r.onVisibleChange=function(e){r.setState({dropdownOpened:e})},r.handleClick=function(){"function"==typeof r.props.onClick&&r.props.onClick(),r.setState({dropdownOpened:!r.state.dropdownOpened})},r.onTaskLocatorMount=function(){var e=r.props.project;if(e){var t=e._organizationId?e._organizationId:void 0;Object(Ke.b)({organizationId:t,selectedProject:e,hideIndieEntry:!0})}},r.state={dropdownOpened:!1},r}return o.d(t,e),t.prototype.renderContent=function(){return this.props.project?i.createElement(Ke.a,{acceptedStatusKinds:an.TASK_VALID_STATUS_KINDS.UNDONE,tips:this.i18n[this.props.mode].tip,optionalType:"scenarioConfigs",showLinkOptions:!1,doLink:!1,doLinked:!1,onSubmit:this.onSubmit}):null},t.prototype.renderTrigger=function(e){return i.createElement(on,{canTrigger:e,iconName:this.i18n[this.props.mode].icon,text:this.i18n[this.props.mode].text,mode:this.props.mode,projectId:this.props.projectId,handleClick:this.handleClick})},t.prototype.canMove=function(){for(var e=this.props.rows.map(function(e){return e.entity._id}),t=o.h(this.props.rows);t.length>0;){var n=t.shift();if(n){if(!new T.a(n.entity,{bindByMatrix:!1}).hasPermission("task.put"))return!1;var r=n.entity.sprint;if(r&&"complete"===r.status)return!1;var i=n.entity._id,s=n.entity.ancestorIds;if(M.a.some(o.h([i],s),function(t){return!M.a.includes(e,t)}))return!1;t.push.apply(t,o.h(n.children||[]))}}return!0},t.prototype.render=function(){var e=this.canMove(),t=this.renderTrigger(e);return e?i.createElement(f.TitledDropdown,{content:this.renderContent(),ref:this.savePopupRef,className:cn[en+"__wrapper"],title:this.i18n[this.props.mode].title,titleCls:cn[en+"__head"],opened:this.state.dropdownOpened,onVisibleChange:this.onVisibleChange,onOpen:this.onTaskLocatorMount},t):t},t}(i.PureComponent),un=n("BJBYEN/8"),pn=n("LCmaF8oo"),dn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-bulk-set-sprint",t.handleUpdate=function(e){t.props.onUpdate(t.props.tasks,{_sprintId:e})},t.handleOpen=function(){S.gta.event({method:"batch operation",action:"change sprint",control:"Table Header",projectid:t.props.projectId})},t}return o.d(t,e),t.prototype.renderTrigger=function(e){var t=c()(pn[this.rootClassName+"__trigger"],e?null:pn[this.rootClassName+"__trigger--disabled"]);return i.createElement("div",{className:t},i.createElement(f.Icon,{className:pn[this.rootClassName+"__trigger-icon"],name:"reorder"}),i.createElement("span",{className:pn[this.rootClassName+"__trigger-text"]},l.get("table.batch.sprint")))},t.prototype.render=function(){var e=this.props,t=e.projectId,n=e.smartGroup,r=e.sprints,o=e.tasks;if(!t||!n||!r)return null;var s=r.reduce(function(e,t){return e.set(t._id,t)},new Map),a=o.every(function(e){if(!new T.a(e,{bindByMatrix:!1}).hasPermission("task.put"))return!1;var t=e._sprintId;if(!t)return!0;var n=s.get(t);return!n||"complete"!==n.status}),c=this.renderTrigger(a);if(!a)return c;var l=o.every(function(e){return e._sprintId===o[0]._sprintId})?o[0]._sprintId:null;return i.createElement(un.a,{hasPermission:!0,nested:!1,onDropdownOpen:this.handleOpen,onUpdateSprint:this.handleUpdate,projectId:t,sprintId:l||null,trigger:c,withSubtask:!1})},t}(i.PureComponent),hn=n("Nxrdcgel"),mn=n("ExCRW3nt"),fn=Object(hn.SortableElement)(f.MenuItem),gn=Object(hn.SortableContainer)(f.Menu),vn=Object(hn.SortableHandle)(function(){return i.createElement(f.Icon,{className:mn["sortable-icon"],name:"menu",size:12})}),bn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-configure",t.popupRef=null,t.setPopupRef=function(e){t.popupRef=e},t.handleEdit=function(){t.popupRef.close(),t.props.onEdit()},t.handleToggle=function(e){return function(){e.cannotHide||t.props.onToggle([o.a({},e,{hidden:!e.hidden})])}},t.handleColResort=function(e){t.draggable()&&t.props.onDragEnd(e)},t.renderSelected=function(e){return e.hidden?null:i.createElement(f.Icon,{className:mn[t.rootClassName+"__item-icon"],name:"tick"})},t.renderContent=function(){var e=t.props.cellDescriptors.map(function(e,n){var r=c()(mn[t.rootClassName+"__item"],e.cannotHide?mn[t.rootClassName+"__item--disabled"]:null);return t.draggable()?i.createElement(fn,{className:r,key:Object(p.getColumnKey)(e),onClick:t.handleToggle(e),index:n},i.createElement(vn,null),i.createElement("span",{className:mn[t.rootClassName+"__item-text"]},t.props.printer.toTitle(e)),t.renderSelected(e)):i.createElement(f.MenuItem,{className:r,key:Object(p.getColumnKey)(e),onClick:t.handleToggle(e)},i.createElement("span",{className:mn[t.rootClassName+"__item-text"]},t.props.printer.toTitle(e)),t.renderSelected(e))}),n=c()(mn[t.rootClassName],mn[t.rootClassName+"__body"],"thin-scroll"),r=mn[t.rootClassName+"__sorting-item"];return t.draggable()?i.createElement(gn,{className:n,helperClass:r,useDragHandle:!0,onSortEnd:t.handleColResort},i.createElement(f.MenuItem,{className:mn[t.rootClassName+"__new-item"],onClick:t.handleEdit},l.get("table.config.new")),e):i.createElement(f.Menu,{className:n},i.createElement(f.MenuItem,{className:mn[t.rootClassName+"__new-item"],onClick:t.handleEdit},l.get("table.config.new")),e)},t}return o.d(t,e),t.prototype.renderTrigger=function(){var e=c()(this.props.className,mn[this.rootClassName+"__trigger"]);return i.createElement("div",{className:e,style:this.props.style},i.createElement(f.Tooltip,{title:l.get("table.config")},i.createElement(f.Icon,{className:mn[this.rootClassName+"__trigger-inner"],name:"cog"})))},t.prototype.render=function(){return i.createElement(f.TitledDropdown,{content:this.renderContent(),ref:this.setPopupRef,title:l.get("table.config.title"),titleCls:mn[this.rootClassName+"__head"]},this.renderTrigger())},t.prototype.draggable=function(){return"function"==typeof this.props.onDragEnd},t}(i.PureComponent),yn=n("KOoU9UnP"),kn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-content",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.content")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e,t=c()(this.props.className,yn[this.rootClassName],((e={})[yn.done]=this.props.task.isDone,e)),n=this.props.task.content.trim();return i.createElement("div",{className:t,style:this.props.style},i.createElement("div",{className:c()(yn[this.rootClassName+"__inner"],"hinted"),"data-title":n},n))},t}(i.PureComponent),_n=n("9EtHdSth"),wn=n.n(_n),Cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.created.at.date")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,wn.a["task-created"]),t=Object(p.createdAtDateFormatter)(this.props.task);return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:wn.a["task-created__inner"]},t))},t}(i.PureComponent),Sn=n("zCN/KIvd"),En=n.n(Sn),Tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.creator")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,En.a["task-creator"]);return i.createElement("div",{className:e,style:this.props.style},this.renderAvatar(),this.renderName())},t.prototype.renderAvatar=function(){var e=this.props.task.creator;return e?i.createElement(f.Avatar,{className:En.a["task-creator__avatar"],size:"small",src:e.avatarUrl}):null},t.prototype.renderName=function(){var e=this.props.task.creator;return e?i.createElement("span",{className:En.a["task-creator__name"],title:e.name},e.name):null},t}(i.PureComponent),In=n("AYJ0s7/j"),Mn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-custom-number-field",t}return o.d(t,e),t.prototype.render=function(){var e=c()(this.props.className,In[this.rootClassName]),t=o.f(this.props.customField.values,1)[0];return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:In[this.rootClassName+"__inner"]},t))},t}(i.PureComponent),jn=n("0sr1bXai"),Pn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-custom-text-field",t}return o.d(t,e),t.prototype.render=function(){var e=c()(this.props.className,jn[this.rootClassName]),t=o.f(this.props.customField.values,1)[0];return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:jn[this.rootClassName+"__inner"]},t))},t}(i.PureComponent),xn=n("dLlRnP2h"),Nn=n("hpTGtx7E"),On=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isEditing:!1},t.rootClassName="task-custom-field",t.renderOriginal=function(e){if(!e)return null;var n,r=Object(p.taskCustomFieldFormatter)(e),o=c()(t.props.className,Nn[t.rootClassName]);if("text"===e.type){var s=Object(L.formatHyperLink)(r||"");n=i.createElement("div",{className:Nn[t.rootClassName+"__inner"],title:r||void 0,onClick:t.onCellContentClick,dangerouslySetInnerHTML:{__html:s}})}else n=i.createElement("div",{className:Nn[t.rootClassName+"__inner"],title:r||void 0},r);return i.createElement("div",{className:o,style:t.props.style},n)},t.renderEditable=function(e){if(!e)return null;var n;switch(e.type){case"text":n=Pn;break;case"number":n=Mn;break;default:return null}return i.createElement(n,{task:t.props.task,customField:e})},t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.customField")},enumerable:!0,configurable:!0}),t.prototype.getCustomField=function(e){var t=Object(p.getColumnKey)(e.cellDescriptor);return e.task.customfields.find(function(e){return e._customfieldId===t})},t.prototype.onCellContentClick=function(e){"A"===e.target.tagName&&(Object(xn.linkHandler)(e.target,void 0,function(){}),e.preventDefault(),e.stopPropagation())},t.prototype.render=function(){var e=this.getCustomField(this.props);return this.state.isEditing?this.renderEditable(e):this.renderOriginal(e)},t}(i.PureComponent),Rn=n("RZPZv1M/"),Dn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-due-date",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.dueDate")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e,t=c()(this.props.className,Rn[this.rootClassName]),n=this.props.task.isDone,r=Object(p.taskDueDateFormatter)(this.props.task),o=r?r.dateClass:void 0,s=c()(Rn[this.rootClassName+"__inner"],((e={})[""+o]=!!o,e["is-done"]=n,e));return i.createElement("div",{className:t,style:this.props.style},i.createElement("div",{className:s},r?r.dateString:""))},t}(i.PureComponent),Ln=n("PMRoZa2N"),zn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-executor",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.executor")},enumerable:!0,configurable:!0}),t.prototype.renderAvatar=function(e){return i.createElement(f.Avatar,{className:Ln[this.rootClassName+"__avatar"],size:"small",src:e.avatarUrl})},t.prototype.renderName=function(e){return i.createElement("span",{className:Ln[this.rootClassName+"__name"],title:e.name},e.name)},t.prototype.render=function(){var e=c()(this.props.className,Ln[this.rootClassName]),t=this.props.task.executor;return i.createElement("div",{className:e,style:this.props.style},t?this.renderAvatar(t):null,t?this.renderName(t):null)},t}(i.PureComponent),An=n("qZRiOr4V"),Vn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-follower-list",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.involveMembers")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,An[this.rootClassName]),t=Object(p.taskFollowerListFormatter)(this.props.task);return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:An[this.rootClassName+"__inner"]},t))},t}(i.PureComponent),Fn=n("45JlVgVP"),Bn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-like-count",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.likesCount")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,Fn[this.rootClassName]),t=this.props.task.likesCount,n=t>0?t:null;return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:Fn[this.rootClassName+"__inner"]},n))},t}(i.PureComponent),Un=n("3r1shquw"),$n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-note",t.limit=200,t.handleClick=function(e){var t=e.target;t instanceof HTMLAnchorElement&&(window.open(t.href,"_blank"),e.preventDefault(),e.stopPropagation())},t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.note")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,Un[this.rootClassName]),t=Object(p.taskNoteFormatter)(this.props.task),n=Object(p.toEllipsis)(t&&Object(p.toPlain)(t),this.limit);return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:c()(Un[this.rootClassName+"__inner"],"hinted"),dangerouslySetInnerHTML:{__html:t},onClick:this.handleClick,"data-title":n}))},t}(i.PureComponent),Hn=n("0jaQ0E53"),Gn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-parent",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.parent")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,Hn[this.rootClassName]),t=this.props.task.parent,n=t?t.content:"";return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:c()(Hn[this.rootClassName+"__inner"],"hinted"),"data-title":n},n))},t}(i.PureComponent),qn=n("DZqMELyD"),Wn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-priority",t.colors=["none","high","urgent"],t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.priority")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,qn[this.rootClassName],qn[this.rootClassName+"--"+this.colors[this.props.task.priority]]),t=Object(p.taskPriorityFormatter)(this.props.task);return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:qn[this.rootClassName+"__inner"]},t))},t}(i.PureComponent),Jn=n("Jp0nKcyE"),Xn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-progress",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.progress")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,Jn[this.rootClassName]),t=this.props.task.progress,n=t>0?t+"%":null;return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:Jn[this.rootClassName+"__inner"]},n))},t}(i.PureComponent),Yn=n("cXcX6yOS"),Kn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-recurrence",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.recurrence")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,Yn[this.rootClassName]),t=Object(p.taskRecurrenceFormatter)(this.props.task);return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:Yn[this.rootClassName+"__inner"],title:t||void 0},t))},t}(i.PureComponent),Qn=n("pXQoaRAy"),Zn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-reminder",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.reminder")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,Qn[this.rootClassName]),t=this.props.task.reminderParsed;return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:Qn[this.rootClassName+"__inner"],title:t||void 0},t))},t}(i.PureComponent),er=n("XBCwffYw"),tr=n("u6XknbFU"),nr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-scenario",t.stopPropagation=function(e){},t.handleSave=function(e){t.props.onUpdate({taskId:t.props.task._id,changes:{_scenariofieldconfigId:e._id}})},t.handleConfigViewOpen=function(){},t.handleGTA=function(e){},t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.scenario")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.task.scenarioFieldConfig,n=e.scenarioFieldConfigurations;if(!t||!n)return null;var r=c()(this.props.className,tr[this.rootClassName]);return i.createElement("div",{className:r,onClick:this.stopPropagation,style:this.props.style},i.createElement(er.ConfigComponent,{boundToObjectType:"task",gtaHandler:this.handleGTA,hasEditConfigPermission:!1,hasPermission:!1,onRequestConfigView:this.handleConfigViewOpen,onSave:this.handleSave,popupNested:!1,scenarioFieldConfig:t,scenarioFieldConfigs:n}))},t}(i.PureComponent),rr=n("jExk1OWA"),or=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-sprint",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.sprint")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props.task.sprint;if(!e)return null;var t=c()(this.props.className,rr[this.rootClassName]);return i.createElement("div",{className:t,style:this.props.style},i.createElement("div",{className:rr[this.rootClassName+"__inner"],title:e.name},e.name))},t}(i.PureComponent),ir=n("04ph3eNE"),sr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-stage",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.stage")},enumerable:!0,configurable:!0}),t.prototype.render=function(){if(Object(p.isSubtask)(this.props.task))return null;var e=c()(this.props.className,ir[this.rootClassName]),t=this.props.task.stage,n=t&&t.name;return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:ir[this.rootClassName+"__inner"],title:n},n))},t}(i.PureComponent),ar=n("AJMKF+Qd"),cr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-start-date",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.startDate")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,ar[this.rootClassName]),t=Object(p.taskStartDateFormatter)(this.props.task);return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:ar[this.rootClassName+"__inner"]},t))},t}(i.PureComponent),lr=n("TWx4fFLE"),ur=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-story-point",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.storyPoint")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props.task.scenarioFieldConfig;if(!e||e.scenariofields.every(function(e){return"storyPoint"!==e.fieldType}))return null;var t=c()(this.props.className,lr[this.rootClassName]),n=this.props.task.storyPoint;return i.createElement("div",{className:t,style:this.props.style},i.createElement("div",{className:lr[this.rootClassName+"__inner"]},n))},t}(i.PureComponent),pr=n("+GEI6Vp3"),dr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-tag-list",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.tagIds")},enumerable:!0,configurable:!0}),t.prototype.renderContent=function(e){var t=this;return e.map(function(e){var n=c()(pr[t.rootClassName+"__tag"],"tag-"+e.color),r=e._id;return i.createElement("div",{className:n,key:r,title:e.name},i.createElement("span",{className:pr[t.rootClassName+"__tag-inner"]},e.name))})},t.prototype.render=function(){var e=c()(this.props.className,pr[this.rootClassName]),t=this.props.task.tags;return i.createElement("div",{className:e,style:this.props.style},t?this.renderContent(t):null)},t}(i.PureComponent),hr=n("fcolQD49"),mr=n("aR9Pp0Vi"),fr=(n("5kP0hkv0"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.renderTrigger=function(){return i.createElement("a",{className:"table-create-trigger"},i.createElement(f.Icon,{name:"circle-plus-o"}),i.createElement("span",null,l.get("sprint.create")))},t.prototype.render=function(){var e=o.a({},this.props,{trigger:this.renderTrigger()});return i.createElement(mr.a,o.a({},e,{routeToCreatedSprint:!0}))},t}(i.PureComponent)),gr=(n("cD1SPGFo"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.props.clickHandler(t.props.clickValue)},t}return o.d(t,e),t.prototype.render=function(){return i.createElement("div",{className:"sprint-is-active",onClick:this.handleClick},i.createElement(f.Icon,{name:"wave"}),i.createElement(f.TextButton,{color:"blue"},l.get("sprint.is.active")))},t}(i.PureComponent)),vr=n("7J4CuXkc"),br=n("DHFEKVJX"),yr=n("/GeFQFAU"),kr=(n("ASLtJLCZ"),function(e){var t=Object(yr.c)(e.sprintId);return t.isLoading?s.a.createElement("div",{className:"sprint-story-amount"},s.a.createElement(f.Spinner,{size:"small"})):s.a.createElement(f.Tooltip,{title:u.a.get("click.to.refresh")},s.a.createElement("div",{className:"sprint-story-amount",onClick:t.onRefresh},s.a.createElement(f.Icon,{name:"story-points"}),s.a.createElement("span",null,t.point)))}),_r=n("I4lhVGdV"),wr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="sprint-placeholder",t}return o.d(t,e),t.prototype.render=function(){return i.createElement("div",{className:_r[this.rootClassName]},i.createElement("div",{className:_r[this.rootClassName+"__image"]}),this.props.placeholder)},t}(i.PureComponent),Cr=n("ot2OFKYt"),Sr=function(){function e(e){var t=this;this.props={},this.rootClassName="task-table-printer",this.printers={_executorId:zn,_stageId:sr,_taskflowstatusId:Mr,accomplished:m,content:kn,created:Cn,creator:Tn,customfields:On,dueDate:Dn,executor:zn,involveMembers:Vn,isDone:Mr,likesCount:Bn,note:$n,parent:Gn,priority:Wn,progress:Xn,recurrence:Kn,reminder:Zn,scenarioFieldConfig:nr,sprint:or,stage:sr,startDate:cr,storyPoint:ur,tagIds:dr,uniqueId:Or,updated:Lr,workTime:Pr},this.shouldUpdate=!1,this.handleAddSuccess=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.props.onAdd(e)},this.handleAddSubtaskSuccess=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.props.onAddSubtasks(e,n)},this.toTitle=function(e){if("customfields"===e.key)return e.customField?e.customField.name:null;var n=t.props.smartGroup;if("content"===e.key&&n)switch(n.type){case"story":return l.get("table.task.content.story");case"bug":return l.get("table.task.content.bug")}var r=t.printers[e.key];return r?r.title:null},this.toToolbarTitle=function(e){return l.get("table.row.selected",e.length)},this.toStatusBarTitle=function(){var e=t.props,n=e.topLevelTaskRemainingCount,r=e.topLevelTaskInvisibleCount;return"number"==typeof n&&n>0?"number"==typeof r&&r>0?l.get("table.loadMore.total.private",n,r):l.get("table.loadMore.total",n):l.get("table.loadMore")},this.renderBodyCell=function(e,n,r){if(void 0===r&&(r={}),Object(p.isTaskPseudoAfter)(n))return t.renderBodyCellPseudoAfter(e,n,r);var s=o.a({},r,{cellDescriptor:e,task:n});switch(e.key){case"scenarioFieldConfig":return i.createElement(nr,o.a({},s,{onUpdate:t.props.onUpdateTaskScenarioFieldConfig,scenarioFieldConfigurations:t.props.scenarioFieldConfigurations}))}var a=t.printers[e.key];return a?i.createElement(a,o.a({},s)):null},this.renderBodyRowHook=function(e){return Object(p.isTaskPseudoAfter)(e)?i.createElement("div",{className:Cr["private-subtask-count-row-hook"]},i.createElement(f.Icon,{name:"lock"})):null},this.renderAddAction=function(e,n){return void 0===n&&(n={}),t.props.tableFeatureMap.enableTaskCreate?(t.props.getNewTaskSnippet&&(e=t.props.getNewTaskSnippet(e)),i.createElement(_,o.a({},n,{meta:e,onTrigger:t.props.onAddTrigger,onSuccess:t.handleAddSuccess}))):null},this.renderAddChildAction=function(e,n,r){return void 0===r&&(r={}),t.props.tableFeatureMap.enableSubtaskCreate?e.entity.isDone?null:i.createElement(C,o.a({},r,{meta:n,onTrigger:t.props.onAddTrigger,onSuccess:t.handleAddSubtaskSuccess,parentTask:e})):null},this.renderToolbarAction=function(e){var n=e.map(function(e){return e.entity});return i.createElement("div",{className:Cr[t.rootClassName+"__toolbar-action-container"]},i.createElement(dn,{onUpdate:t.props.onUpdate,projectId:t.props.projectId,smartGroup:t.props.smartGroup,sprints:t.props.sprints,tasks:n}),i.createElement(ln,{mode:Qt.MOVE,onSubmit:t.props.onMove,project:t.props.project,projectId:t.props.projectId,rows:e}),i.createElement(sn,{mode:Qt.FORK,onSubmit:t.props.onFork,project:t.props.project,projectId:t.props.projectId,rows:e}),i.createElement(Zt,{organizationId:t.props.organizationId,project:t.props.project,projectId:t.props.projectId,tasks:n,fieldList:z(t.props.cellDescriptors),onBulkEditSuccess:t.props.onBulkEditSuccess}),i.createElement(P,{onClick:t.props.onArchive,projectId:t.props.projectId,rows:e}))},this.shouldRenderGroup=function(e){return!0},this.renderGroupAddAction=function(e,n){if(void 0===n&&(n={}),!t.props.tableFeatureMap.enableGroupTaskCreate)return null;if(!e.new)return null;var r=t.props.smartGroup;if(r){if(!I.contains(["story","bug","sprint"],r.type))return null;if(hr.b.isDoneAxis(e.key))return null}var s=t.props.getNewTaskSnippet?t.props.getNewTaskSnippet(e.new):e.new;return i.createElement(_,o.a({},n,{meta:s,onTrigger:t.props.onAddTrigger,onSuccess:t.handleAddSuccess}))},this.renderGroupTitleAction=function(e){var n=t.props,r=n.projectId,o=n.scenarioFieldConfigurations,s=(n.sprints||[]).find(function(t){return t._id===e.key});if(!o||!s)return null;var a=t.props,c=a.disableSprintEdit,l=a.disableSprintDelete,u=a.disableSprintPlanning,p=a.disableSprintChangeStatus;return c&&l&&u&&p?null:i.createElement("div",{className:Cr[t.rootClassName+"__group-title-action-container"]},i.createElement(br.a,{projectId:r,scenarioFieldConfigs:o,sprint:s,openSprintPlanningModal:t.props.openSprintPlanningModal,disableChangeStatus:p,disableEdit:c,disableDelete:l,disablePlanning:u,isEmptySprint:0===e.data.length}))},this.routeToSprint=function(e){t.props.updateUrl({agileType:"sprint",viewSection:e||"all"},{trigger:!0})},this.renderGroupToolbarAction=function(e){var n=e.key,r=e.data,o=[];t.props.enableSprintFeature&&t.props.smartGroup&&(o=t.renderSprintToolbarAction(n,r,t.props.smartGroup));var s=Cr[t.rootClassName+"__group-toolbar-action-container"];return i.createElement("div",{className:s},o)},this.renderGroupPlaceholder=function(e){var n=null;switch(t.props.smartGroup.type){case"story":n=i.createElement(wr,{placeholder:l.get("sprint.placeholder.story.new")});break;case"bug":n=i.createElement(wr,{placeholder:l.get("sprint.placeholder.bug")});break;case"sprint":n=hr.b.isEmptyAxis(e.key)?i.createElement(wr,{placeholder:l.get("sprint.placeholder.unplanned")}):i.createElement(wr,{placeholder:l.get("sprint.placeholder.sprint")})}return i.createElement("div",{className:Cr[t.rootClassName+"__placeholder-wrapper"]},n)},this.renderConfigureAction=function(e,n){void 0===e&&(e={}),void 0===n&&(n=!1);var r=n?o.a({},e,{cellDescriptors:t.props.cellDescriptors,onEdit:t.props.onConfigureMore,onToggle:t.props.onConfigure,printer:t,onDragEnd:t.props.onColumnResort}):o.a({},e,{cellDescriptors:t.props.cellDescriptors,onEdit:t.props.onConfigureMore,onToggle:t.props.onConfigure,printer:t});return i.createElement(bn,o.a({},r))},e&&this.receiveProps(e)}return e.prototype.receiveProps=function(e){this.shouldUpdate=!Object(p.shallowEqual)(e,this.props),this.props=e},e.prototype.renderBodyCellPseudoAfter=function(e,t,n){if("content"!==e.key)return null;var r=c()(n.className,Cr["private-subtask-count"]);return i.createElement("div",o.a({},n,{className:r}),i.createElement("span",null,l.get("table.task.private.subtask.count",t.privateSubtaskCount)))},e.prototype.renderSprintToolbarAction=function(e,t,n){var r=this.props,o=r.projectId,s=r.sprints;if(hr.b.isDoneAxis(e))return[];switch(n.type){case"story":return i.createElement(Er,{title:l.get("sprint.jump.from.story.to.sprint"),rootClassName:this.rootClassName,clickHandler:this.routeToSprint});case"bug":return i.createElement(Er,{title:l.get("sprint.jump.from.bug.to.sprint"),rootClassName:this.rootClassName,clickHandler:this.routeToSprint})}if(hr.b.isEmptyAxis(e)&&!this.props.disableSprintCreate&&s){var a=s.filter(function(e){return"complete"!==e.status}).length;return[i.createElement(fr,{onSuccess:this.props.onAddSprint,projectId:o,unfinishedSprintsAmount:a,key:0})]}if(s){var c=s.find(function(t){return t._id===e});if(c)switch(c.status){case"future":var u=this.props.disableSprintChangeStatus?null:i.createElement(vr.a,{sprint:c,isEmptySprint:0===t.length});return i.createElement(i.Fragment,null,i.createElement(kr,{sprintId:c._id}),u);case"active":return i.createElement(i.Fragment,null,i.createElement(kr,{sprintId:c._id}),i.createElement(gr,{clickHandler:this.routeToSprint,clickValue:c._id}))}}return[]},e.prototype.renderPlaceholder=function(e){return void 0===e&&(e=l.get("table.task.placeholder")),i.createElement("div",{className:Cr[this.rootClassName+"__placeholder-wrapper"]},i.createElement(wr,{placeholder:e}))},e}(),Er=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.props.clickHandler()},t}return o.d(t,e),t.prototype.render=function(){return i.createElement("div",{className:Cr[this.props.rootClassName+"__group-toolbar-action-jump-iteration"]},i.createElement(f.TextButton,{color:"blue",onClick:this.handleClick},this.props.title,i.createElement(f.Icon,{name:"chevron-right"})))},t}(i.PureComponent),Tr=n("zH+Yaocm"),Ir=n("ERBlrNSI"),Mr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-taskflow-status",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.taskflowstatus")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,Ir[this.rootClassName]),t=i.createElement(Tr.TaskStatusLabel,{className:Ir[this.rootClassName+"__inner"],task:this.props.task,readOnly:!0});return i.createElement("div",{className:e,style:this.props.style},t)},t}(i.PureComponent),jr=n("8VqHMqVq"),Pr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-time-cost",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.workTime")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,jr[this.rootClassName]),t=Object(p.taskTimeCostFormatter)(this.props.task);return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:jr[this.rootClassName+"__inner"],title:t||void 0},t))},t}(i.PureComponent),xr=n("Uh8C4V5+"),Nr=n("t+pwECrv"),Or=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="task-unique-id",t}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.uniqueId")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props.task,t=e.uniqueIdPrefix,n=e.uniqueId;if(!t)return null;var r=c()(this.props.className,Nr[this.rootClassName]);return i.createElement("div",{className:r,style:this.props.style},i.createElement(xr.a,{prefix:t,id:n}))},t}(i.PureComponent),Rr=n("JdTkGwJL"),Dr=n.n(Rr),Lr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),Object.defineProperty(t,"title",{get:function(){return l.get("table.task.updated.at.date")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=c()(this.props.className,Dr.a["task-updated"]),t=Object(p.updatedAtDateFormatter)(this.props.task);return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{className:Dr.a["task-updated__inner"]},t))},t}(i.PureComponent);n.d(t,"a",function(){return m}),n.d(t,"b",function(){return _}),n.d(t,"c",function(){return C}),n.d(t,"d",function(){return P}),n.d(t,"e",function(){return Zt}),n.d(t,"h",function(){return Qt}),n.d(t,"f",function(){return sn}),n.d(t,"g",function(){return ln}),n.d(t,"i",function(){return dn}),n.d(t,"j",function(){return bn}),n.d(t,"k",function(){return kn}),n.d(t,"l",function(){return Cn}),n.d(t,"m",function(){return Tn}),n.d(t,"n",function(){return On}),n.d(t,"o",function(){return Dn}),n.d(t,"p",function(){return zn}),n.d(t,"q",function(){return Vn}),n.d(t,"r",function(){return Bn}),n.d(t,"s",function(){return $n}),n.d(t,"t",function(){return Gn}),n.d(t,"u",function(){return Wn}),n.d(t,"v",function(){return Xn}),n.d(t,"w",function(){return Kn}),n.d(t,"x",function(){return Zn}),n.d(t,"y",function(){return nr}),n.d(t,"z",function(){return or}),n.d(t,"A",function(){return sr}),n.d(t,"B",function(){return cr}),n.d(t,"C",function(){return ur}),n.d(t,"E",function(){return dr}),n.d(t,"D",function(){return Sr}),n.d(t,"F",function(){return Mr}),n.d(t,"G",function(){return Pr}),n.d(t,"H",function(){return Or}),n.d(t,"I",function(){return Lr})},"8/x4MbOA":function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;s=n("a+N5u/Cl"),o=n("3eMzznN/"),i=n("vmWJWrVe"),r=n("5OYvTPP1"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="EvernoteLinkView",t.prototype.tagName="ul",t.prototype.initialize=function(e){return this.$el.html(r({title:e.title,hasHeader:e.hasHeader,items:e.data.map(function(e){return s.extend({},e,{createTime:e.data.created?o.formatDate(e.data.created):void 0})})}))},t}()},"80iZGukZ":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("TSYQbtd+"),l=n.n(c),u=n("GESwhXbR"),p=n("sa1Ed382"),d=n("a+N5u/Cl"),h=n.n(d),m=n("YqUJfXDr"),f=n("s0r7VfKc"),g=n("HPuQ6HjQ"),v=n.n(g),b=n("am3yOv0o"),y=n.n(b),k=function(e,t){var n={_organizationId:e,teamId:t,pageSize:500};return f.default.graph(v.a,n).map(function(e){return e.projects})},_=function(e,t,n){var r={_organizationId:e,q:t,pageToken:n};return f.default.graph(y.a,r).map(function(e){return e.projects})},w=function(e,t){return f.default.fetch.put("teams/"+e+"/projects/"+t)},C=function(e,t){return f.default.fetch.delete("teams/"+e+"/projects/"+t)},S=n("XRLNALej"),E=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e){var t=e.target.value;n.setState({query:t,nextPageToken:""},function(){n.debounceSearchProjects()})},n.onEnter=function(){n.searchProjects()},n.searchProjects=function(){var e=n.props.organizationId,t=n.state,r=t.query,o=t.nextPageToken,i=t.projects,s=void 0===i?[]:i;n.searchProjects$=_(e,r,o).subscribe(function(e){var t=e.result,r=e.nextPageToken,i=e.totalSize,a=o?s.concat(t):t,c=a.length<i;n.setState({projects:a,nextPageToken:r,hasMore:c})})},n.debounceSearchProjects=h.a.debounce(function(){n.searchProjects()},400),n.saveScrollRef=function(e){n.scrollNode=e},n.state={projects:null,query:"",nextPageToken:"",hasMore:!0},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.searchProjects()},t.prototype.componentWillUnmount=function(){this.searchProjects$&&(this.searchProjects$.unsubscribe(),this.searchProjects$=null)},t.prototype.renderLoadMore=function(){var e=this.state.hasMore;return i.a.createElement(m.LoadMore,{hasMore:e,scrollNode:this.scrollNode,onEnter:this.onEnter})},t.prototype.renderHandlers=function(e,t){var n=this;if(t)return i.a.createElement("span",null,a.a.get("added"));return i.a.createElement(u.Button,{type:"secondary",size:"smaller",onClick:function(){return n.props.onAddProject(e)}},a.a.get("add"))},t.prototype.renderProjects=function(){var e=this,t=this.state.projects,n=this.props.addedProjectIds;return t&&t.length?t.map(function(t){var r=n.indexOf(t._id)>=0;return i.a.createElement("li",{key:t._id,className:S.item},i.a.createElement(u.Avatar,{className:S["item-avatar"],size:"medium",shape:"square",src:t.logo}),i.a.createElement("span",{className:S["item-title"]},t.name),e.renderHandlers(t,r))}):null},t.prototype.renderContent=function(){var e=this.state.projects;return e&&!e.length?i.a.createElement("div",{className:S["placeholder-no-search-content"]},i.a.createElement(u.Icon,{name:"search-warning",size:48}),i.a.createElement("p",null,a.a.get("search.no.content"))):i.a.createElement("ul",{ref:this.saveScrollRef,className:S["team-projects-list"]},this.renderProjects(),this.renderLoadMore())},t.prototype.render=function(){var e=l()("form-control",S["search-input"]);return i.a.createElement("div",{className:S["team-project-add-wrapper"]},i.a.createElement("div",{className:S["team-project-input"]},i.a.createElement("input",{type:"text",className:e,placeholder:a.a.get("team.projects.add.search"),onChange:this.onChange})),this.renderContent())},t}(i.a.PureComponent);n.d(t,"TeamProjects",function(){return I});var T=n("XRLNALej"),I=function(e){function t(t){var n=e.call(this,t)||this;return n.loadProject$=null,n.addProjects$=null,n.removeProject$=null,n.loadTeamProjects=function(){var e=n.props.team,t=e._organizationId,r=e._id;n.loadProject$=k(t,r).subscribe(function(e){n.setState({projects:e.result,isLoading:!1})})},n.gotoProject=function(e){p.gta.event({action:"teams - enter project"}),p.router.navigate("project/"+e._id,{trigger:!0})},n.onAddProject=function(e){var t=n.props.team;n.addProjects$=w(t._id,e._id).subscribe(function(t){var r=(n.state.projects||[]).concat(t||e);n.setState({projects:r},function(){u.Toast.success({message:a.a.get("add.success")}),p.gta.event({action:"added member",type:"org member",control:"Org Team Project List",category:"team"})})})},n.onRemoveProject=function(e){var t=n.props.team;n.removeProject$=C(t._id,e).subscribe(function(){var t=(n.state.projects||[]).filter(function(t){return t._id!==e});n.setState({projects:t},function(){u.Toast.success({message:a.a.get("remove.success")}),p.gta.event({action:"remove member",type:"team member",control:"Org Team Project List",category:"team"})})})},n.openModal=function(){n.setState({opened:!0},function(){p.gta.event({action:"add member",type:"org member",control:"Org Team Project List",category:"team"})})},n.onVisibleChange=function(e){n.setState({opened:e})},n.state={isLoading:!0,projects:null,opened:!1},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.loadTeamProjects()},t.prototype.componentWillUnmount=function(){this.loadProject$&&(this.loadProject$.unsubscribe(),this.loadProject$=null),this.addProjects$&&(this.addProjects$.unsubscribe(),this.addProjects$=null),this.removeProject$&&(this.removeProject$.unsubscribe(),this.removeProject$=null)},t.prototype.renderAddModal=function(){var e=this.props.team,t=(this.state.projects||[]).map(function(e){return e._id});return i.a.createElement(u.Modal,{title:a.a.get("team.projects.add.title"),opened:this.state.opened,onVisibleChange:this.onVisibleChange,titleCls:T["team-project-add-modal-title"]},i.a.createElement(E,{organizationId:e._organizationId,addedProjectIds:t,onAddProject:this.onAddProject}))},t.prototype.renderHeader=function(){var e=this.props,t=e.team,n=e.canManageTeam,r=i.a.createElement(u.TextButton,{color:"blue",onClick:this.openModal},a.a.get("team.projects.add"));return i.a.createElement("header",null,i.a.createElement("span",{className:T.header},a.a.get("team.projects.header.content",t.name)),n&&r,n&&this.renderAddModal())},t.prototype.renderList=function(e){var t=this;return e.map(function(e){var n=l()(T.item,"with-link");return i.a.createElement("li",{key:e._id,className:n,onClick:function(){return t.gotoProject(e)}},i.a.createElement(u.Avatar,{className:T["item-avatar"],size:"medium",shape:"square",src:e.logo}),i.a.createElement("span",{className:T["item-title"]},e.name),t.renderHandlers(e))})},t.prototype.renderHandlers=function(e){var t=this,n=this.props.canManageTeam,r=i.a.createElement("div",{className:T["team-project-remove"]},i.a.createElement("p",null,a.a.get("team.manger.project.confirm.remove")),i.a.createElement(u.Button,{danger:!0,onClick:function(n){n.stopPropagation(),t.onRemoveProject(e._id)}},a.a.get("remove")));return n&&i.a.createElement(u.TitledDropdown,{title:a.a.get("team.manger.project.confirm.title"),content:r},i.a.createElement(u.Button,{type:"secondary",size:"small",danger:!0,onClick:function(e){e.stopPropagation()}},a.a.get("team.mananger.remove")))},t.prototype.renderPlaceholder=function(){return i.a.createElement("div",{className:T.placeholder},i.a.createElement("div",{className:"placeholder-image"}),i.a.createElement("p",null,a.a.get("team.manger.no.project")))},t.prototype.renderContent=function(){var e=this.state.projects;return e&&e.length?i.a.createElement(i.a.Fragment,null,this.renderHeader(),i.a.createElement("ul",null,this.renderList(e))):this.renderPlaceholder()},t.prototype.render=function(){var e=this.state.isLoading;return i.a.createElement("div",{className:T["team-projects"]},e?i.a.createElement(u.Loading,null):this.renderContent())},t}(i.a.PureComponent)},"82clTwJw":function(e,t,n){e.exports={placeholder:"placeholder__isrp"}},"8B9HnOA2":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""});return'<li class="post" data-id="'+e._id+'"> <span class="post-title" >'+r(e.description)+'</span> <div class="post-info muted"> '+r(tb_i18n.get("wall.view.post.creator.info",e.creator.name))+' <span class="react-time-stamp"></span> </div></li>'}},"8Ia8MWec":function(e,t,n){},"8Jjrp/1c":function(e,t,n){"use strict";n.r(t),n.d(t,"LIB_PANEL_SELECTOR",function(){return h}),n.d(t,"CheckBoxWrapper",function(){return m});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("a+N5u/Cl"),s=n.n(i),a=n("GESwhXbR"),c=n("s0r7VfKc"),l=n("90U+kJWN"),u=n("wVXDg9Ql"),p=n("DWJahcmN"),d=n("B9r4eSLP"),h="checkbox_wrapper_"+s.a.uniqueId(),m=function(e){function t(t){var n=e.call(this,t)||this;return n.onDropdownOpen=function(){var e=n.props,t=e.taskflowStatusId,r=e.onOpen,o=n.state.taskflowStatuses;r&&r(),t&&!o&&(n.setState({isLoading:!0}),n.handleProps(t))},n.updateTaskTaskflowStatus=function(e){return c.default.updateTaskTaskflowStatus(n.props.taskId,e).subscribe({next:function(t){if(n.props.onChangeSuccess){var r=n.state.taskflowStatuses.find(function(t){return t._id===e});n.props.onChangeSuccess(t,r)}},error:function(e){Object(l.promiseChain)(function(){return!n.props.onChangeError})(function(){return Object(u.getHttpErrorBody)(e,"json")},function(e){return n.props.onChangeError(e)})}})},n.updateTestflowStatus=function(e){c.default.updateTestcase(n.props.taskId,"_flowstatusId",e).subscribe({next:function(t){if(n.props.onChangeSuccess){var r=n.state.taskflowStatuses.find(function(t){return t._id===e});n.props.onChangeSuccess(t,r)}},error:function(){}})},n.onStatusItemClick=function(e){if(n.props.onChange)n.props.onChange(e);else switch(n.props.type){case"task":n.updateTaskTaskflowStatus(e);break;case"testcase":n.updateTestflowStatus(e)}},n.state={isLoading:!1},n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=e.taskflowStatusId;this.props.taskflowStatusId!==t&&t&&this.handleProps(t)},t.prototype.componentWillUnmount=function(){this.taskflowStatusesSub$&&this.taskflowStatusesSub$.unsubscribe()},t.prototype.render=function(){return o.createElement(a.Dropdown,{className:h,content:this.getDropdownContent(),placement:"bottomLeft",offset:[-16,0],onOpen:this.onDropdownOpen},o.createElement("div",{className:d["checkbox-wrapper"],onClick:this.stopPropagation},this.props.children))},t.prototype.stopPropagation=function(e){e.stopPropagation()},t.prototype.handleProps=function(e){var t=this;this.taskflowStatusesSub$&&this.taskflowStatusesSub$.unsubscribe(),this.taskflowStatusesSub$=c.default.getTaskflowStatus(e).values().switchMap(function(e){var t=r.f(e,1)[0]._taskflowId;return c.default.getTaskflowStatuses(t).changes()}).subscribe(function(e){t.setState({isLoading:!1,taskflowStatuses:e})})},t.prototype.getDropdownContent=function(){var e=this.props.taskflowStatusId,t=this.state,n=t.taskflowStatuses,r=t.isLoading;if(!e)return null;if(r||!n)return o.createElement(a.Loading,{className:d.loading});var i=n.filter(function(t){return-1===t.rejectStatusIds.indexOf(e)});return o.createElement(p.TaskflowStatusLabelList,{data:i.length>1?i:[],selectedId:e,showJumpToNext:this.props.showJumpToNext,jumpToNext:this.props.jumpToNext,onToggleJumpToNext:this.props.onToggleJumpToNext,type:this.props.type,onSelect:this.onStatusItemClick})},t.defaultProps={type:"task"},t}(o.PureComponent)},"8KNpsyVU":function(e,t,n){"use strict";n.r(t);var r=n("q1tIBJhx"),o=n("GESwhXbR"),i=n("tLZJUYWX"),s=n.n(i),a=n("2qRnoGmE"),c=n.n(a);n("WXjep2Z1");var l=function(){var e=r.createElement("p",null,s.a.get("account.verifier.ding.description"));return o.Alert.warning({title:s.a.get("account.verifier.title"),content:e,confirmText:s.a.get("account.band.phone"),cancelText:s.a.get("account.load.more"),onConfirm:function(){window.open(c.a.ACCOUNT_HOST+"/my/account")},onCancel:function(){window.open("https://guide.teambition.net/hc/kb/article/1274160/")}})},u=n("mrSGxOB2"),p=n("s0r7VfKc"),d=function(e){return u.b(void 0,void 0,void 0,function(){return u.e(this,function(t){switch(t.label){case 0:return c.a.FEATURES.invite_need_account_verification?[4,p.default.fetch.isRealName().toPromise()]:[2,!0];case 1:return t.sent().isIdentified?[2,!0]:[4,p.default.fetch.getOrganizationVouched(e).toPromise()];case 2:return[2,t.sent().isVouched]}})})};n.d(t,"showVerifyBindModal",function(){return l}),n.d(t,"getAccountBind",function(){return d})},"8L77uFaB":function(e,t,n){e.exports={"flying-content":"flying-content__3C6e","flying-content-name":"flying-content-name__2KIY","flying-drag":"flying-drag__1qnv",tree:"tree__178m","toggle-all-handler":"toggle-all-handler__3i96","all-toggler":"all-toggler__2Wh6","handler-list":"handler-list__2s7M",handler:"handler__13mY"}},"8Msz9vzD":function(e,t,n){"use strict";n.r(t),n.d(t,"ScenarioFieldConfigComponent",function(){return c});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("XBCwffYw"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderTitle=function(){return this.props.hideTitle?null:o.createElement("div",{className:"detail-infos-aside"},o.createElement(s.Icon,{name:"task-type"}),o.createElement("span",null,i.get("type")))},t.prototype.render=function(){return o.createElement("div",{className:"scenario-field-config flex"},this.renderTitle(),o.createElement("div",{className:"detail-infos-content flex-fill"},o.createElement(a.ConfigComponent,r.a({},this.props))))},t}(o.PureComponent)},"8NDKpd3y":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";if(e.ancestorTitle)o+=' <div class="creator-location-display"> <div class=\'creator-location-logo ancestor-logo\'> <span class=\'icon icon-board\'></span> </div> <div class="creator-location-text"> <span class="creator-location-descendent-of">'+tb_i18n.get("subtask.creator.belongs.to")+'</span> <span class="creator-location-ancestor-title">'+r(e.ancestorTitle)+"</span> </div> </div>";else{if(o+=" <a class=\"creator-location-handler\" data-gta=\"{action: 'move content', type: 'task', control: 'Global New Task'}\"> ",e.logo?o+=" <div class='creator-location-logo' style=\"background-image:url("+e.logo+');"></div> ':o+=" <div class='creator-location-logo'> <span class='icon icon-inbox2'></span> </div> ",o+=' <div class="creator-location-text"> ',e.locations){o+=" ";var i=e.locations;if(i)for(var s=-1,a=i.length-1;s<a;)o+=" "+r(i[s+=1])+" ",s!==e.locations.length-1&&(o+=" <span>&middot;</span> "),o+=" ";o+=" "}else o+=" "+tb_i18n.get("task.creator.title.project.unset")+" ";o+=' </div> <span class="icon icon-chevron-down creator-location-toggler"></span> </a>'}return o}},"8R2HMFlV":function(e,t,n){var r,o,i,s={}.hasOwnProperty;r=n("iSsLT+9z"),o=n("/e+Ob7oW"),i=n("zRdNv5hc").turndownService,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r.Button),t.prototype.name="markdown",t.prototype.icon="markdown",t.prototype.needFocus=!1,t.prototype._init=function(){var e;if(t.__super__._init.call(this),this.markdownEl=$('<div class="markdown-editor" />').insertBefore(this.editor.body),this.textarea=$("<textarea/>").attr("placeholder",this.editor.opts.placeholder).appendTo(this.markdownEl),this.textarea.on("focus",(e=this,function(t){return e.editor.el.addClass("focus")})).on("blur",function(e){return function(t){return e.editor.el.removeClass("focus")}}(this)),this.editor.on("valuechanged",function(e){return function(t){if(e.editor.markdownMode)return e._initMarkdownValue()}}(this)),this.markdownChange=this.editor.util.throttle(function(e){return function(){return e._autosizeTextarea(),e._convert()}}(this),200),this.editor.util.support.oninput?this.textarea.on("input",function(e){return function(t){return e.markdownChange()}}(this)):this.textarea.on("keyup",function(e){return function(t){return e.markdownChange()}}(this)),this.editor.opts.markdown)return this.editor.on("initialized",function(e){return function(){return e.el.mousedown()}}(this))},t.prototype.status=function(){},t.prototype.command=function(){var e,t,n,r;for(this.editor.blur(),this.editor.el.toggleClass("simditor-markdown"),this.editor.markdownMode=this.editor.el.hasClass("simditor-markdown"),this.editor.markdownMode?(this.editor.inputManager.lastCaretPosition=null,this.editor.hidePopover(),this.editor.body.removeAttr("contenteditable"),this._initMarkdownValue()):(this.textarea.val(""),this.editor.body.attr("contenteditable","true")),t=0,n=(r=this.editor.toolbar.buttons).length;t<n;t++)"markdown"===(e=r[t]).name?e.setActive(this.editor.markdownMode):e.setDisabled(this.editor.markdownMode);return null},t.prototype._initMarkdownValue=function(){return this._filterUnsupportedTags(),this.textarea.val(i.turndown(this.editor.getValue())),this._autosizeTextarea()},t.prototype._autosizeTextarea=function(){return this._textareaPadding||(this._textareaPadding=this.textarea.innerHeight()-this.textarea.height()),this.textarea.height(this.textarea[0].scrollHeight-this._textareaPadding)},t.prototype._convert=function(){var e,t;return t=this.textarea.val(),e=o(t,{strikethrough:!1}).replace(/<em>/g,"<i>").replace(/<\/em>/g,"</i>"),this.editor.textarea.val(e),this.editor.body.html(e),this.editor.formatter.format(),this.editor.formatter.decorate()},t.prototype._filterUnsupportedTags=function(){return this.editor.body.find("colgroup").remove()},t}()},"8VqHMqVq":function(e,t,n){e.exports={"task-time-cost":"task-time-cost__36oG","task-time-cost__inner":"task-time-cost__inner__2ThM"}},"8aAzMfPX":function(e,t,n){},"8aUxFyB8":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("a+N5u/Cl"),c=n("4c1CS0b3"),l=n("tLZJUYWX"),u=n("GESwhXbR"),p=n("LA31BA3Q"),d=n("3eMzznN/").formatWorktime,h=1e3,m=function(e){function t(t){var n=e.call(this,t)||this;return n.lazyUpdateTotalTime=a.debounce(function(e,t){n.updateTotalTimeRequest(e),n.props.gtaHandler&&n.props.gtaHandler({action:"edited scheduled taskHours",method:t})},1e3),n.onClickInfo=function(){n.setState(r.a({},n.state,{editing:!0}))},n.trimTotalTime=function(e){var t=n.state.totalTimeStr,o=Number(t);switch(e){case"increase":o++;break;case"decrease":o--}o=Object(p.d)(0,h,o),o=Object(p.a)(o);var i=n.parseTotalTimeStr(d(o));n.setState(r.a({},n.state,{totalTimeStr:i})),n.lazyUpdateTotalTime(o,e)},n.onChangeTotalTime=function(e){var t=e.currentTarget.value;if(Object(p.c)(t)){var o=Number(t);return o>h?n.setState(r.a({},n.state,{errorMsg:l.get("task.worktime.plan.time.exceed",h)})):n.props.isRequired&&0===o?n.setState(r.a({},n.state,{totalTimeStr:t,isValid:!1,errorMsg:l.get("required.field.empty.error")})):void n.setState(r.a({},n.state,{totalTimeStr:t,isValid:!isNaN(o),errorMsg:""}))}},n.updateTotalTime=function(){var e=n.state,t=e.totalTimeStr;if(e.isValid){var o=Number(t);n.setState(r.a({},n.state,{editing:!1,errorMsg:""})),n.updateTotalTimeRequest(Object(p.a)(o)),n.props.gtaHandler&&n.props.gtaHandler({action:"edited scheduled taskHours"})}},n.quickSubmit=function(e){13===e.keyCode&&n.updateTotalTime()},n.state={editing:!1,isValid:!0,totalTimeStr:n.parseTotalTimeStr(t.totalTime)},n}return r.d(t,e),t.prototype.componentWillUnmount=function(){this.clearUpdateTotalTimeSub()},t.prototype.clearUpdateTotalTimeSub=function(){this.updateTotalTimeSub$&&this.updateTotalTimeSub$.unsubscribe()},t.prototype.updateTotalTimeRequest=function(e){var t=this;this.clearUpdateTotalTimeSub(),this.updateTotalTimeSub$=c.Observable.fromPromise(this.props.updateTotalTime(e)).subscribe({error:function(){t.setState({totalTimeStr:t.parseTotalTimeStr(t.props.totalTime)})}})},t.prototype.parseTotalTimeStr=function(e){return e?e.toString():""},t.prototype.renderInfoBody=function(){var e,t=this.props.hasPutPermission,n=this.state.totalTimeStr,r=t?this.onClickInfo:void 0;e=Number(n)?l.get("task.worktime.format.time",n):l.get("task.worktime.plan.time.placeholder");var i=o.createElement("p",{className:"text-right flex-space",onClick:r},e);return t?o.createElement(u.Tooltip,{title:l.get("clickToEdit")},i):i},t.prototype.renderTrim=function(){var e=this.props.hasPutPermission,t=e?this.trimTotalTime.bind(this,"increase"):null,n=e?this.trimTotalTime.bind(this,"decrease"):null,r=this.props.isRequired&&"1"===this.state.totalTimeStr;return o.createElement("div",{className:"arrows flex-vert flex"},o.createElement(u.IconButton,{className:"icon",name:"chevron-up",onClick:t}),o.createElement(u.IconButton,{className:"icon",name:"chevron-down",onClick:n,disabled:r}))},t.prototype.renderInfo=function(){var e=this.props.hasPutPermission,t=s()("info-wrapper flex flex-space flex-vcenter",{"has-permission":e});return o.createElement("div",{className:t},this.renderInfoBody(),this.renderTrim())},t.prototype.renderInput=function(){var e=s()("edit-wrapper flex flex-space flex-vcenter",{error:!!this.state.errorMsg});return o.createElement("div",{className:e},o.createElement("input",{className:"form-control",autoFocus:!0,value:this.state.totalTimeStr,onChange:this.onChangeTotalTime,onKeyDown:this.quickSubmit}),o.createElement(u.TextButton,{color:"blue",disabled:!this.state.isValid,onClick:this.updateTotalTime},l.get("confirm")))},t.prototype.renderErrorHint=function(){return this.state.errorMsg&&o.createElement("div",{className:"error-message flex flex-vcenter"},o.createElement(u.Icon,{name:"circle-remove"}),o.createElement("span",{className:"error-msg"},this.state.errorMsg))},t.prototype.render=function(){var e=this.state.editing?this.renderInput():this.renderInfo();return o.createElement("div",{className:"task-worktime-plan"},o.createElement("div",{className:"flex flex-vcenter"},o.createElement("strong",{className:"hint-title flex-static"},l.get("task.worktime.plan.time.title")),e),this.renderErrorHint())},t}(o.PureComponent)},"8eqYv3w5":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("GESwhXbR"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChangeDateFormat=function(e){var n=e.target.value;t.props.onClickDateFormat(n.id);var r=s.get("personal.settings.dateFormat.switch.success",n.display);c.Toast.success(r)},t}return r.d(t,e),t.prototype.render=function(){var e=s.get("personal.settings.dateFormat.tips.relative"),t=s.get("personal.settings.dateFormat.tips.specific");return o.createElement("div",null,o.createElement("h4",null,s.get("personal.settings.dateFormat.title")),o.createElement("div",{className:"personal-settings-date-format-tips"},o.createElement(c.Icon,{name:"calendar"}),"relative"===this.props.initialDateFormat?e:t),o.createElement("div",{className:"personal-settings-date-format-options"},this.renderDateFormats()))},t.prototype.renderDateFormats=function(){var e=this,t=[{id:"relative",display:s.get("personal.settings.dateFormat.relative")},{id:"specific",display:s.get("personal.settings.dateFormat.specific")}],n=t.map(function(e){return o.createElement(c.Radio,{key:e.id,label:e.display,value:e,className:"settings-radio"})}),i=r.f(t.filter(function(t){return t.id===e.props.initialDateFormat}),1)[0];return o.createElement("div",{className:"settings-radio-container"},o.createElement(c.RadioGroup,{value:i,onChange:this.onChangeDateFormat},n))},t}(o.PureComponent),u=n("17x9q+7Q"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChangeLang=function(e){var n=e.target.value;t.props.initialLanguage!==n&&c.Alert.info({title:s.get("info"),content:s.get("user.lang.set.info.content"),cancelText:s.get("cancel"),confirmText:s.get("continue"),onConfirm:function(){t.props.onClickLanguage(n).then(function(){return window.location.reload()})}})},t}return r.d(t,e),t.prototype.renderLanguages=function(){var e=this.props.languages.map(function(e){return o.createElement(c.Radio,{className:"settings-radio",key:e.id,value:e.id,label:e.display})});return o.createElement("div",{className:"settings-radio-container"},o.createElement(c.RadioGroup,{className:"settings-language",onChange:this.onChangeLang,value:this.props.initialLanguage},e))},t.prototype.render=function(){return o.createElement("div",null,o.createElement("h4",null,s.get("personal.settings.language.title")),this.renderLanguages())},t.propTypes={initialLanguage:u.string.isRequired,languages:u.array.isRequired,onClickLanguage:u.func.isRequired},t}(o.PureComponent),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSwitch=function(e){t.props.onChange(e)},t}return r.d(t,e),t.prototype.render=function(){return i.a.createElement("div",{className:"two-column-setting markdown-setting"},i.a.createElement("div",{className:"setting-content"},i.a.createElement("h4",null,"Markdown"),i.a.createElement("p",{className:"personal-settings-markdown-tips"},a.a.get("personal.settings.markdown.tips"))),i.a.createElement(c.Switch,{defaultChecked:this.props.initUseMarkdown,onChange:this.onSwitch,className:"setting-handler"}))},t}(i.a.PureComponent);n.d(t,"PersonalizationSettings",function(){return h});var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){return o.createElement("div",null,o.createElement(p,{initialLanguage:this.props.initialLanguage,languages:this.props.languages,onClickLanguage:this.props.onClickLanguage}),o.createElement("hr",null),o.createElement(l,{initialDateFormat:this.props.initialDateFormat,onClickDateFormat:this.props.onClickDateFormat}),o.createElement("hr",null),o.createElement(d,{initUseMarkdown:this.props.initialMarkdown,onChange:this.props.onChangeMarkdown}))},t}(o.PureComponent)},"8iEkTkoU":function(e,t,n){var r,o,i,s={}.hasOwnProperty;n("tupV5ip+"),i=n("vmWJWrVe"),o=n("MsJsDeYa"),r=n("vDN73p8P").DoubleChecker,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="SettingsDeleteView",t.prototype.className="settings-delete-view modal-dialog modal-padding",t.prototype.events={"click .confirm-handler":"onSubmit"},t.prototype.initialize=function(e){return this.model=e.model,this.success=e.success,this.confirmPlaceholder=e.confirmPlaceholder,this.password=e.password,this.title=e.title,this.message=e.message,this.renderBasic()},t.prototype.delete=function(){var e,t;return e=this.success,this.model.destroy({wait:!0,success:(t=this,function(){return"function"==typeof e&&e(),t.close()})})},t.prototype.close=function(){var e;return null!=(e=this.parentView)?e.remove():void 0},t.prototype.renderBasic=function(){return this.$el.html(o({title:this.title,message:this.message})),this.requestReactView(this.$(".modal-footer")[0],r,{password:this.password,confirmPlaceholder:this.confirmPlaceholder,buttonMsg:tb_i18n.get("settings.delete"),onConfirm:(e=this,function(){return e.delete()})});var e},t}()},"8lwrpTqz":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){var t=e.currentTarget,n=e.deltaY,r=function(e){for(var t=e;t.parentNode;)if((t=t.parentNode)!==document&&t!==document.documentElement){var n=window.getComputedStyle(t),r=n.getPropertyValue("overflow-y")||n.getPropertyValue("overflow");if("auto"===r||"scroll"===r)return t}return window}(e.target);if(e.currentTarget===r){var o=t.scrollTop,i=t.clientHeight,s=t.scrollHeight;return n<0&&o+n<=0?(e.stopPropagation(),e.preventDefault(),void(t.scrollTop=0)):n>0&&s-i-o-n<=0?(e.stopPropagation(),e.preventDefault(),void(t.scrollTop=s-i)):void 0}}},"8mQ/xLZE":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("SCi816Ey"),o=function(){function e(e){this.el=e,this.scrollTop=0,this.scrollHeight=0}return e.prototype.auto=function(){var e=this.el;if(e){var t=e.scrollTop,n=e.scrollHeight,r=t+n-(this.scrollHeight||0),o=this.scrollHeight?this.scrollHeight-n:0;o>0&&(r+=o),r!==t&&(e.scrollTop=r),this.scrollTop=e.scrollTop,this.scrollHeight=e.scrollHeight}},e.prototype.scrollToBottom=function(e){if(void 0===e&&(e=!1),this.el){var t=this.el.clientHeight,n=this.el.scrollHeight,o=n-t,i=1-(this.el.scrollTop+t)/n,s=this.duration(i);!e&&this.el.lastChild||0===s?(this.scrollTop=this.el.scrollTop=o,this.scrollHeight=n):r(this.el.lastChild,"scroll",{container:this.el,duration:s,easing:"ease-in-out"})}},e.prototype.duration=function(e){return e>=.3?400:0},e.prototype.isCloseToBottom=function(e){void 0===e&&(e=50);var t=this.el.scrollHeight,n=this.el.clientHeight,r=t-n;return t!==n&&this.el.scrollTop+e>=r},e}()},"8rMdUFc+":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h={}.hasOwnProperty;n("Tkf7Bw7+"),u=n("a+N5u/Cl"),c=n("FMzLVbOv"),d=n("sa1Ed382"),l=n("GESwhXbR").Toast,p=n("s0r7VfKc").default,s=n("4c1CS0b3").Observable,r=n("11Yo7oZf"),a=n("85182E8g"),o=n("wIa0soTd").GroupSettings,i=n("eUOXB7It").MemberInvite,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)h.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,c),t.prototype.viewName="GroupCreatorModalView",t.prototype.className="group-creator-modal-view modal-view modal-dialog header-fixed",t.prototype.initialize=function(e){var n,r,o,i,s;return this.organizationId=e.organizationId,this.onCreateSuccess=e.onCreateSuccess,this.showOrganization=null==(r=e.showOrganization)||r,this.isOrganizationSelectable=null==(o=e.isOrganizationSelectable)||o,this.organizationsCollection=null!=(i=e.organizationsCollection)?i:a.get(0).filter(function(e){return e.getRoleScope()>=0}),this.onConfirmOutside=null!=(s=e.onConfirmOutside)?s:null,n=this.getOrganization(),this.organizationId=null!=n?n._id:void 0,this.getMembers=p.getMembersInPages("organization",this.organizationId),t.__super__.initialize.apply(this,arguments)},t.prototype.onOpen=function(){if(!this.organizationId)return this.close()},t.prototype.getBodyEl=function(){return this.$(".modal-body")[0]},t.prototype.getActiveOrgs=function(){return this.organizationsCollection.filter(function(e){return e.payment.isActive})},t.prototype.getOrganization=function(){var e,t,n;return t=this.organizationId,n=(e=this.getActiveOrgs()).filter(function(e){return e.id===t})[0],this.showOrganization&&(n||(n=e[0])),null!=n?n.toJSON():void 0},t.prototype.mountGroupSettings=function(){var e,t;return 0===this.organizationsCollection.length?this.close():(e=this.getOrganization(),this.requestReactView(this.getBodyEl(),o,{isOrganizationSelectable:this.isOrganizationSelectable,showOrganization:this.showOrganization,showSubmitButton:!0,name:this.orgName||"",organization:e?u.pick(e,"_id","name"):null,organizationList:this.organizationsCollection.map(function(e){return Object.assign(e.toJSON(),{disableCreating:e.payment.isExpired})}),onChange:(t=this,function(e){var n,r;return r=e.name,n=e._organizationId,null!=r&&(t.orgName=r),null!=n&&(t.organizationId=n),t.getMembers=p.getMembersInPages("organization",t.organizationId),t.mountGroupSettings()}),onSubmit:function(e){return function(){return e.groupData={name:e.orgName.trim(),_organizationId:e.organizationId},d.gta.event({action:"turn to next step"}),e.goNext()}}(this)}))},t.prototype.mountGroupMembers=function(){var e,t;return e=this.getOrganization(),this.requestReactView(this.getBodyEl(),i,{getMembers:(t=this,function(){return p.fetch.expandPage(t.getMembers,{mutate:!0})}),getOriginMembers:function(){return s.of([d.user.toJSON()])},searchMembers:function(e){return function(t){return p.searchMembers(e.organizationId,{q:t})}}(this),memberLabel:tb_i18n.get("group.add.member.organization.member",e.name),onSubmit:function(e){return function(t){var n;return n=u.pluck(t,"_userId"),e.groupData=Object.assign({},e.groupData,{userIds:n}),e.onConfirmOutside?(e.onConfirmOutside(e.groupData),e.close()):e.onConfirm()}}(this)})},t.prototype.assembleContent=function(){return this.contentList=[{title:tb_i18n.get("group.creator.group.settings.title")},{title:tb_i18n.get("group.creator.member.invite.title")}]},t.prototype.onConfirm=function(){var e;return d.gta.event({action:"added content",type:"group",category:""+this.groupData.userIds.length}),new r(this.groupData).save(null,{success:(e=this,function(t){return"function"==typeof e.onCreateSuccess&&e.onCreateSuccess(t),l.success(tb_i18n.get("organization.group.create.success")),e.close()}),error:function(e){return function(){return l.error(tb_i18n.get("organization.group.create.error")),e.close()}}(this)})},t.prototype.componentWillUpdate=function(){return this.unmountReact(this.getBodyEl())},t.prototype.componentUpdated=function(e){switch(e){case 0:return this.mountGroupSettings();case 1:return this.mountGroupMembers()}},t.prototype.close=function(){var e;return null!=(e=this.parentView)?e.close():void 0},t}()},"8s4B/NC6":function(e,t,n){e.exports={"aone-guide-container":"aone-guide-container__13ee","aone-guide-header":"aone-guide-header__29Wv","aone-guide-text":"aone-guide-text__2jtk","aone-guide-button":"aone-guide-button__FvOW"}},"8uCqaoSf":function(e,t,n){e.exports={"task-executor":"task-executor__1KVD"}},"8yOTHjXc":function(e,t,n){"use strict";var r,o=n("GFC5+LHL"),i=n("mrSGxOB2"),s=n("q1tIBJhx"),a=n("TSYQbtd+"),c=n.n(a),l=n("GESwhXbR"),u=n("vW4SdMQi"),p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="cell-menu",t}i.d(t,e),t.prototype.render=function(){var e=c()(this.props.className,u[this.rootClassName]);return s.createElement(l.Icon,{className:e,name:"chevron-down",onClick:this.props.onClick})}}(s.PureComponent),n("EiUFTky8")),d=n("uQmYGniC");!function(e){e[e.CHECKBOX=0]="CHECKBOX",e[e.CUSTOM=1]="CUSTOM",e[e.INDEX=2]="INDEX"}(r||(r={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="cell-hook",t.minNumWidth=28,t.handleCheckboxClick=function(e){if(e.stopPropagation(),!t.props.disabled&&t.props.rows){var n=t.props.selected?t.props.onDeselect:t.props.onSelect;n&&n(t.props.rows)}},t}return i.d(t,e),t.prototype.shouldComponentUpdate=function(e){return!(Object(p.shallowEqual)(e,this.props,["rows"])&&Object(p.shallowEqualArray)(e.rows,this.props.rows))},t.prototype.renderCheckbox=function(){if(this.props.mode!==r.CHECKBOX)return null;var e=c()(d[this.rootClassName+"__checkbox"],this.props.disabled?d[this.rootClassName+"__checkbox--disabled"]:null),t={width:this.minNumWidth+"px"};return s.createElement(l.Icon,{className:e,name:this.props.selected?"checkbox-checked":"checkbox",onClick:this.handleCheckboxClick,style:t})},t.prototype.renderIndex=function(){var e;if(this.props.mode!==r.INDEX)return null;var t=c()(d[this.rootClassName+"__index"],((e={})[d.short]=this.props.isShortIndex,e));return s.createElement("span",{className:t},this.props.index)},t.prototype.render=function(){var e=this.props.level||1,t=c()(this.props.className,d[this.rootClassName]),n=i.a({},this.props.style||{},{width:this.minNumWidth+(e-1)*this.props.numWidthStep+"px"});return s.createElement("div",{className:t,style:n,title:this.props.index},this.props.mode===r.CUSTOM?this.props.children:null,this.renderCheckbox(),this.renderIndex())},t.defaultProps={numWidthStep:8},t}(s.Component),m=n("Z+A7b00p"),f=n("x+zaTn41"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="cell-toggler",t.handleClick=function(e){var n=t.props,r=n.empty,o=n.expanded,i=n.onExpand,s=n.onCollapse,a=n.data;!r&&a&&(e.stopPropagation(),o?s&&s([a]):i&&i([a]))},t}return i.d(t,e),t.prototype.render=function(){var e=this.props,t=e.empty,n=e.expanded,r=e.loading,o=r?"loading":"triangle-right",i=t?e.children:s.createElement(l.Icon,{className:f[this.rootClassName+"__inner"],name:o}),a=c()(e.className,f[this.rootClassName],t?f[this.rootClassName+"--empty"]:null,n?f[this.rootClassName+"--expanded"]:null,r?f[this.rootClassName+"--loading"]:null);return s.createElement("div",{className:a,onClick:this.handleClick},i)},t}(s.PureComponent);n.d(t,"a",function(){return o.a}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return h}),n.d(t,"d",function(){return m.a}),n.d(t,"e",function(){return g})},"93QCSvzN":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("GESwhXbR"),i=n("tLZJUYWX"),s=n.n(i),a=n("q1tIBJhx"),c=n.n(a),l=n("dWbDnvg6"),u=n("DOZCBSCZ"),p=n("VC8z115W"),d=n("cY+V28dO"),h=n("u/LJYZ+h"),m=n.n(h),f=n("Stv7G60N"),g=function(e){function t(t){var n=e.call(this,t)||this;return n.rootCls="invitee-list",n.renderInviteeItem=function(e){var t,r=n.parseMemberAvatar(e);e.subjectType===d.b.organizationMember?t=e.user.name:t=e.organizationTeam.name;return c.a.createElement("div",{key:e._subjectId,className:f[n.rootCls+"__item"]},c.a.createElement("div",{className:f[n.rootCls+"__main"]},c.a.createElement(l.d,{avatar:r,className:f[n.rootCls+"__avatar"]}),c.a.createElement("span",{className:f[n.rootCls+"__name"]},t)),c.a.createElement("div",{className:f[n.rootCls+"__trigger"]},n.renderInviteeHandles(e)))},n.enterSearch=function(){n.setState({openSearchInput:!0},function(){n.searchInputRef.current&&n.searchInputRef.current.focus()})},n.onSearchInputChange=function(e){var t=e.target.value;n.setState({keyword:t}),n.props.onSearchMember(t)},n.handleBlur=function(){n.state.keyword&&n.state.keyword.length||n.setState({openSearchInput:!1})},n.state={openSearchInput:!1,keyword:""},n.searchInputRef=c.a.createRef(),n}return r.d(t,e),t.prototype.componentWillUnmount=function(){this.props.onSearchMember("")},t.prototype.parseMemberAvatar=function(e){if(e.subjectType===d.b.organizationMember)return{type:l.b.Img,src:e.user.avatarUrl||""};var t=e.organizationTeam,n=r.f(t.style?t.style.split(","):["",""],2),o=n[0],i=n[1];return{type:l.b.Icon,name:o||"team-tie",color:i||"#8193ba"}},t.prototype.renderInviteeHandles=function(e){return!!this.props.renderInviteeHandles&&this.props.renderInviteeHandles(e)},t.prototype.renderLoadMore=function(){var e=this.props,t=e.invitees,n=e.pageSize,r=e.hasMore,o=e.onLoadMore;if(t&&t.length>=n)return c.a.createElement(p.a,{onEnter:o,hasMore:r,endWith:null})},t.prototype.renderBody=function(){return c.a.createElement("div",{className:f[this.rootCls+"__body"]},this.renderLoading(),this.renderSearchEmptyPlaceholder(),this.props.invitees&&this.props.invitees.map(this.renderInviteeItem),this.renderLoadMore())},t.prototype.renderNormalHeader=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,this.props.title),c.a.createElement("div",{className:f[this.rootCls+"__handles"]},c.a.createElement(o.IconButton,{color:"gray",name:"search",onClick:this.enterSearch}),c.a.createElement(o.IconButton,{color:"gray",name:"plus-s",onClick:this.props.onClickAddMember})))},t.prototype.renderSearchingHeader=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:f[this.rootCls+"__search-wrap"]},c.a.createElement("div",{className:f[this.rootCls+"__search"]},c.a.createElement(o.Icon,{name:"search"}),c.a.createElement("input",{ref:this.searchInputRef,value:this.state.keyword,onBlur:this.handleBlur,onChange:this.onSearchInputChange}))),c.a.createElement(o.IconButton,{color:"gray",name:"plus-s",onClick:this.props.onClickAddMember}))},t.prototype.renderLoading=function(){if(!this.props.invitees)return c.a.createElement("div",{className:f[this.rootCls+"__loading-wrap"]},c.a.createElement(u.a,null))},t.prototype.renderSearchEmptyPlaceholder=function(){var e=this.props,t=e.invitees,n=e.isSearching;if(t&&!t.length&&n)return c.a.createElement("div",{className:f[this.rootCls+"__no-result-placeholder"]},c.a.createElement("img",{src:m.a,width:"72"}),c.a.createElement("span",{className:"placeholder-text"},s.a.get("portal.tag.member.search.no.result")))},t.prototype.renderInviteePage=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:f[this.rootCls+"__header"]},this.state.openSearchInput?this.renderSearchingHeader():this.renderNormalHeader()),this.renderBody())},t.prototype.render=function(){return c.a.createElement("div",{className:f[this.rootCls]},this.renderInviteePage())},t.defaultProps={pageSize:20},t}(c.a.PureComponent);n.d(t,"a",function(){return g})},"96mTauR+":function(e,t,n){e.exports={"member-permission-dropdown":"member-permission-dropdown__38if","member-permission-menu":"member-permission-menu__1ExU","member-permission-item":"member-permission-item__2y6_"}},"98JeEM7J":function(e,t){},"9EtHdSth":function(e,t,n){e.exports={"task-created":"task-created__1t-F","task-created__inner":"task-created__inner__3pdL"}},"9LRoG9cV":function(e,t,n){e.exports={table:"table__64ZO",text:"text__Drmc",empty:"empty__1NnH"}},"9MOL8v5J":function(e,t,n){var r,o,i,s={}.hasOwnProperty;r=n("VuB9cZyl"),i=n("HDJEOtNh").RoleScope,o=n("gLTu//Kz"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="roles",t.prototype.model=o,t.prototype.boundToObjectType="organization",t.prototype.sync=function(e,n,r){return null==r&&(r={}),null==r.roleType&&(r.roleType="project"),r.url="organizations/"+this._boundToObjectId+"/roles?type="+r.roleType,t.__super__.sync.call(this,e,n,r)},t.prototype.isMemberRole=function(e){return!!this.findWhere({_id:e,isDefault:!0,level:i.Member})},t}()},"9MfEVcnq":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+='<li class="link object-picker" data-id="'+r((s=i[a+=1])._id)+'"> <div class="link-head"> <a class="link-title"> <span class="title-name"> '+r(s.data.title)+" </span> </a> </div></li>";return o}},"9ZkRTOjE":function(e,t,n){e.exports={"plugin-item":"plugin-item__P-lp","plugin-logo":"plugin-logo__1kps","plugin-name":"plugin-name__339U","modal-body":"modal-body__1Vjn"}},"9aJAKDJa":function(e,t,n){var r;r=n("a+N5u/Cl"),t.createLinks=function(e,t,n){var o,i,s;return o=n._parentId,s=n.parentType,i=!1,r.reduce(t,function(t,n){return t.then(function(){return new Promise(function(t,r){var a;return a=function(e){return t({result:e,hasError:i})},e.create({_parentId:o,parentType:s,_linkedId:n._id,linkedType:n.objectType||n.type},{wait:!0,success:a,error:function(e){return i=!0,a(e)}})})})},Promise.resolve())}},"9aPZbVuc":function(e,t,n){var r,o,i,s;r=n("DdwvUwFp"),i=n("GESwhXbR").Toast,s=n("sa1Ed382"),o=function(){function e(){}return e.prototype.initCopyLinkHandler=function(e,t){if(null==t&&(t={}),e&&e[0])return this.$copyObjectLink=new r(e[0]),this.$copyObjectLink.on("success",function(e){return i.success({message:tb_i18n.get("object.link.copy.success.title"),description:tb_i18n.get("object.link.copy.success.content")}),s.gta.event(Object.assign({},t,{action:"copied link",category:"succeed",userkey:s.user.id})),e.clearSelection()}),this.$copyObjectLink.on("error",function(e){return i.error({message:tb_i18n.get("object.link.copy.faild.title"),description:tb_i18n.get("object.link.copy.faild.content")}),s.gta.event(Object.assign({},t,{action:"copied link",category:"failed",userkey:s.user.id}))})},e}(),e.exports=new o},"9cguhGnN":function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("a+N5u/Cl"),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR"),l=n("tLZJUYWX"),u=n.n(l),p=n("18nYzn40"),d=n("8yOTHjXc"),h=n("OcUPLOSr"),m=n("EiUFTky8"),f=n("oRqJmROU"),g=n("+jTfkVXR"),v=n("AQCf3/iq"),b=n("sa1Ed382"),y=function(e){function t(t){var n=e.call(this,t)||this;return n.rootClassName="swim-table",n.saveSwimGridRef=function(e){n.swimGridRef=e},n.rootRef=null,n.saveRootRef=function(e){n.rootRef=e},n.rootRefRect=null,n.hidden={display:"none"},n.maxRowCount="auto",n.configurationBtnWidth=44,n.onSlideStyle={boxShadow:"rgba(0, 0, 0, 0.1) 1px 0px 3px",zIndex:1},n.scrollToColumn=-1,n.resizingCellDescriptor=null,n.resizingColumnKey=null,n.resizingLastColumnStep=10,n.resizingLastColumnTimer=null,n.footerRenderer=function(e){var t=n.props,r=t.hasLoader,i=t.onLoadMore,s=t.isLoading;if(!("function"==typeof r?r(e):r))return null;var a={width:n.getColumnWidth(0),height:n.getCellHeight()},l=o.createElement(o.Fragment,null,o.createElement("div",{className:v["swim-grid-loader-toggle"],style:{width:"28px"}},o.createElement(c.Icon,{name:"more"})),o.createElement("div",{className:v["swim-grid-loader-content"]},o.createElement("span",null,u.a.get("table.loadMore"))));return o.createElement("div",{className:v["swim-grid-loader-container"],onClick:i,style:a},s?o.createElement(c.Loading,null):l)},n.controllerRenderer=function(e){var t,i=e.rowIndex,s=e.columnIndex,c=e.cellStyle,l=n.props.printer,u=n.cellDescriptors[s],p=0===s,h=p?v["swim-grid-first-column-cell-content"]:null,f=u?Object(m.getColumnKey)(u):null,g=!!f&&f===n.resizingColumnKey,b=!!u&&u.sortable,y=[];if(u){p&&y.push.apply(y,r.h([n.renderHeadRowHook(n.rows),n.renderRowToggler()]));var k=l.toTitle(u);if(k){var _=n.props.sortBy,w=!(!_||_.key!==Object(m.getColumnKey)(u))&&_.order;y.push(n.renderColumnTitle(k,h,w))}p&&n.props.new&&y.push(l.renderAddAction(n.props.new,{key:"add-action"}))}var C=a()(v["swim-grid-controller-column"],((t={})[v["swim-grid-controller-sortable-column"]]=b,t[v["swim-grid-first-column-cell"]]=p,t[v["swim-grid-last-column-cell"]]=s+1===n.cellDescriptors.length-1&&0===n.getColumnWidth(s+1),t));return o.createElement(d.a,{children:y,className:C,columnIndex:s,descriptor:u,isResizing:g,key:s,onClick:b?n.handleColumnSort:null,onResize:n.handleColumnResizeStart,onResizerHoverEnd:n.handleColumnResizerHoverEnd,onResizerHoverStart:n.handleColumnResizerHoverStart,rowIndex:i,style:c})},n.headerRenderer=function(e,t,i){var s=n.props.printer,a=s.renderGroupAddAction,c=s.renderGroupTitleAction,l=s.renderGroupToolbarAction,u=n.groups[e],p=n.cellDescriptors[0].headHeight,d=i>0?r.a({width:t,height:p},n.onSlideStyle):{width:t,height:p},h=v["swim-grid-first-column-cell-content"];return o.createElement("div",{className:v["swim-grid-header"],"data-id":u.key,"data-index":e,key:u.key||e,onClick:n.handleGroupClick},o.createElement("div",{className:v["swim-grid-header-title"],style:d},n.renderHeadRowHook(u.data),n.renderGroupToggler(u,e),u.title?n.renderColumnTitle(u.title,h):null,c?c(u):null,a?a(u):null),o.createElement("div",{className:v["swim-grid-header-toolbar"],onClick:n.stopPropagation},l?l(u):null))},n.cellRenderer=function(e,t,i,s){var c,l=t.rowIndex,u=t.columnIndex,p=t.cellStyle,h=n.props.printer,f=n.cellDescriptors[u],g=n.groups[e].data[l],b=f?Object(m.getColumnKey)(f):null,y=!!b&&b===n.resizingColumnKey,k=0===u,_=g.entity._id===n.hoveredRowId,w=a()(v["swim-grid-cell"],((c={})[v["swim-grid-first-column-cell"]]=k,c[v["swim-grid-last-column-cell"]]=s,c[v["swim-grid-void-column-cell"]]=Object(m.isCommonGroup)(g.entity)&&u>0,c[v["swim-grid-hovered-cell"]]=_,c)),C=k?v["swim-grid-first-column-cell-content"]:null,S=[];if(f&&Object(m.isCommonGroup)(g.entity)&&0===u){var E=Object(m.getAllChildrenRows)(g,!0);S.push.apply(S,r.h([n.renderBodyGroupRowHook(g,E),n.renderRowToggler(g)])),S.push(h.renderBodyCell(f,g.entity,{className:C,key:"content"})),k&&S.push(n.renderRowAddAction(g,_))}return f&&!Object(m.isCommonGroup)(g.entity)&&(k&&S.push.apply(S,r.h([n.renderBodyRowHook(g,_),n.renderRowToggler(g)])),S.push(h.renderBodyCell(f,g.entity,{className:C,key:"content"})),k&&S.push(n.renderRowAddAction(g,_))),o.createElement(d.a,{children:S,className:w,columnIndex:u,descriptor:f,groupIndex:e,isResizing:y,key:g.entity._id+":"+(f?Object(m.getColumnKey)(f):u),onClick:g.isPseudo?null:n.handleRowClick,onMouseEnter:n.handleRowHoverStart,onMouseLeave:n.handleRowHoverEnd,onResize:n.handleColumnResizeStart,onResizerHoverEnd:n.handleColumnResizerHoverEnd,onResizerHoverStart:n.handleColumnResizerHoverStart,row:g,rowIndex:l,style:p})},n.placeholderRenderer=function(e){var t=n.groups[e];return t.data.length>0?null:n.props.printer.renderGroupPlaceholder?n.props.printer.renderGroupPlaceholder(t):n.props.printer.renderPlaceholder()},n.getRowCount=function(e){return n.groupIsCollapsed(e)?0:n.groups[e].data.length},n.getColumnWidth=function(e){if(!n.cellDescriptors)return 0;var t=n.cellDescriptors[e];if(t)return t.width+1;var r=n.cellDescriptors.reduce(function(e,t){return e+(t?t.width+1:0)},0);return Math.max(n.props.width-r,0)},n.groupIsCollapsed=function(e){var t=n.groups[e],r=t.isCollapsed;return"boolean"==typeof r?r:0===t.data.length},n.handleColumnSort=function(e){var t=n.props.onSort,r=n.props.sortBy,o=Object(m.getColumnKey)(e);r&&r.key===o?r.order===h.SortOrder.DESC?t({key:o,order:h.SortOrder.ASC}):t(null):t({key:o,order:h.SortOrder.DESC})},n.handleRowClick=function(e,t){n.props.onRowClick(t.entity)},n.handleRowHoverStart=function(e,t,r){n.hoveredRowId!==t.entity._id&&(n.hoveredRowId=t.entity._id,n.swimGridRef.forceUpdateGrids(r))},n.handleRowHoverEnd=function(e,t,r){n.hoveredRowId&&(n.hoveredRowId=null,n.swimGridRef.forceUpdateGrids(r))},n.handleRowSelect=function(e){n.props.onRowSelect(e.filter(f.c))},n.handleRowDeselect=function(e){n.props.onRowDeselect(e.filter(f.c))},n.handleRowExpand=function(e){n.props.onRowExpand(e)},n.handleRowCollapse=function(e){n.props.onRowCollapse(e)},n.handleGroupExpand=function(e){var t=r.f(e,1)[0];n.props.onGroupExpand(t)},n.handleGroupCollapse=function(e){var t=r.f(e,1)[0];n.props.onGroupCollapse(t)},n.handleGroupClick=function(e){var t=e.currentTarget,r=parseInt(t.dataset.index),o=n.groups[r];n.groupIsCollapsed(r)?n.handleGroupExpand([o]):n.handleGroupCollapse([o])},n.handleTableHover=function(e){n.rootRefRect&&(n.isOutsideOfTable=e.screenX>=n.rootRefRect.right)},n.handleTableClick=function(e){n.shouldNotClickAfterResize&&(n.shouldNotClickAfterResize=!1,e.stopPropagation()),!n.isOutsideOfTable&&n.resizingLastColumnTimer&&(window.cancelAnimationFrame(n.resizingLastColumnTimer),n.resizingLastColumnTimer=null)},n.handleColumnResizerHoverStart=function(e,t,r){n.resizingCellDescriptor||(n.resizingColumnKey=Object(m.getColumnKey)(r),r.fixed,n.swimGridRef.forceUpdateGrids())},n.handleColumnResizerHoverEnd=function(e,t,r){n.resizingCellDescriptor||(n.resizingColumnKey=null,r.fixed,n.swimGridRef.forceUpdateGrids())},n.handleColumnResizeStart=function(e,t,o){n.resizingCellDescriptor||(n.resizingCellDescriptor=r.a({},o),n.resizingColumnKey=Object(m.getColumnKey)(o),n.resizingEventScreenX=e.screenX,n.resizingLastColumn=t+1===n.cellDescriptors.length-1)},n.handleColumnResize=function(e){n.resizingCellDescriptor&&(e.preventDefault(),n.resizeColumn(e),n.resizingLastColumnTimer&&(window.cancelAnimationFrame(n.resizingLastColumnTimer),n.resizingLastColumnTimer=null),n.resizingLastColumn&&n.isOutsideOfTable&&(n.resizingLastColumnTimer=n.handleLastColumnResize()))},n.handleLastColumnResize=function(){return window.requestAnimationFrame(function(){n.resizeColumn({screenX:n.resizingEventScreenX+n.resizingLastColumnStep}),n.swimGridRef.forceUpdateGrids(),n.resizingLastColumnTimer=n.handleLastColumnResize()})},n.handleColumnResizeEnd=function(){if(n.resizingCellDescriptor){n.resizingCellDescriptor.fixed;n.resizingCellDescriptor=null,n.resizingColumnKey=null,n.shouldNotClickAfterResize=!0,n.resizingLastColumnTimer&&(window.cancelAnimationFrame(n.resizingLastColumnTimer),n.resizingLastColumnTimer=null),n.swimGridRef.forceUpdateGrids()}},n.stopPropagation=function(e){e.stopPropagation()},n.handleProps(t,null),n.overscan={row:"IE"===b.ua.getBrowser().name?6:0,column:1},n}return r.d(t,e),t.prototype.filterCellDescriptors=function(e,t,n){var r=e.cellDescriptors;if(t&&t.cellDescriptors===r)return n;var o=r.filter(function(e){return!e.hidden});return o.length>0?o:null},t.prototype.flattenRows=function(e,t,n){return t&&t.groups===e.groups&&t.toRowIsExpanded===e.toRowIsExpanded?n:e.groups?e.groups.map(function(t){return r.a({},t,{data:t.isCollapsed?t.data:Object(m.flatten)(t.data,e.toRowIsExpanded)})}):null},t.prototype.mergeRows=function(e){var t;return e?(t=[]).concat.apply(t,r.h(e.map(function(e){return e.data}))):null},t.prototype.selectRowIds=function(e){return(e.selectedRows||[]).map(function(e){return e.entity._id})},t.prototype.handleProps=function(e,t){var n=this.filterCellDescriptors(e,t,this.cellDescriptors),r=this.flattenRows(e,t,this.groups);this.selectedRowIds=this.selectRowIds(e),this.cellDescriptors!==n&&(this.cellDescriptors=n,this.fixedColumnCount=(this.cellDescriptors||[]).filter(function(e){return e.fixed}).length,this.columnCount=(this.cellDescriptors||[]).length,this.cellDescriptors&&(this.columnCount+=1,this.cellDescriptors.push(null))),this.groups!==r&&(this.groups=r&&e.printer.shouldRenderGroup?r.filter(e.printer.shouldRenderGroup):r,this.rows=this.mergeRows(this.groups)),!this.rootRef||this.rootRefRect&&t&&t.width===e.width||(this.rootRefRect=this.rootRef.getBoundingClientRect())},t.prototype.getHeadHeight=function(){var e=r.f(this.cellDescriptors||[null],1)[0];return e?e.headHeight:0},t.prototype.getCellHeight=function(){var e=r.f(this.cellDescriptors||[null],1)[0];return e?e.height+1:0},t.prototype.computeActualHeight=function(){return this.rows?this.props.height:this.getHeadHeight()},t.prototype.componentDidMount=function(){window.addEventListener("mouseover",this.handleTableHover),window.addEventListener("mousemove",this.handleColumnResize),window.addEventListener("mouseup",this.handleColumnResizeEnd),this.rootRef&&this.rootRef.addEventListener("click",this.handleTableClick,!0)},t.prototype.componentWillUnmount=function(){window.removeEventListener("mouseover",this.handleTableHover),window.removeEventListener("mousemove",this.handleColumnResize),window.removeEventListener("mouseup",this.handleColumnResizeEnd),this.rootRef&&this.rootRef.removeEventListener("click",this.handleTableClick,!0)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.handleProps(e,this.props),e.cellDescriptors!==this.props.cellDescriptors&&this.swimGridRef&&this.swimGridRef.resetCols(),!this.swimGridRef||e.cellDescriptors===this.props.cellDescriptors&&e.groups===this.props.groups&&e.selectedRows===this.props.selectedRows&&e.toRowIsExpanded===this.props.toRowIsExpanded&&e.isLoading===this.props.isLoading||(this.swimGridRef.forceUpdate(),this.swimGridRef.forceUpdateGrids())},t.prototype.shouldComponentUpdate=function(e){return!!e.printer.shouldUpdate||!Object(m.shallowEqual)(e,this.props)},t.prototype.render=function(){return o.createElement("div",{className:v[this.rootClassName],ref:this.saveRootRef},this.renderTable(),this.renderLoading(),this.renderToolbar(),this.renderConfigurationBtn())},t.prototype.renderTable=function(){return this.cellDescriptors?o.createElement(p.a,{cellHeight:this.getCellHeight(),cellRenderer:this.cellRenderer,collapsed:this.groupIsCollapsed,columnSize:this.columnCount,columnWidth:this.getColumnWidth,controllerRenderer:this.controllerRenderer,fixedColumns:this.fixedColumnCount,headerHeight:this.getHeadHeight(),headerRenderer:this.headerRenderer,height:this.computeActualHeight(),instances:(this.groups||[]).length,maxRows:this.maxRowCount,onSlideStyle:this.onSlideStyle,placeholderRenderer:this.placeholderRenderer,ref:this.saveSwimGridRef,rowSize:this.getRowCount,scrollToColumn:this.scrollToColumn,width:this.props.width,overscan:this.overscan,extraHandlerRenderer:this.props.extraHandlerRenderer,footerRenderer:this.footerRenderer}):null},t.prototype.renderLoading=function(){return this.cellDescriptors&&this.groups?null:o.createElement(c.Loading,{className:v[this.rootClassName+"__loading"]})},t.prototype.renderToolbar=function(){var e=this.props.selectedRows;if(!this.cellDescriptors||0===(e||[]).length)return null;var t={height:this.cellDescriptors[0].headHeight,marginRight:this.configurationBtnWidth},n=this.props.printer.toToolbarTitle(e),r=v["swim-grid-first-column-cell-content"];return o.createElement("div",{className:v["swim-grid-toolbar"],key:"toolbar",style:t},this.renderHeadRowHook(this.rows),this.renderRowToggler(),this.renderColumnTitle(n,r),this.props.printer.renderToolbarAction(e))},t.prototype.renderConfigurationBtn=function(){return this.cellDescriptors?this.props.printer.renderConfigureAction({className:v["swim-grid-configuration"],key:"configuration-btn",style:{height:this.cellDescriptors[0].headHeight,width:this.configurationBtnWidth}},this.props.useDraggableConfigure):null},t.prototype.renderHeadRowHook=function(e){var t=e?e.reduce(function(e,t){return t&&t.isPseudo?e:t&&Object(m.isCommonGroup)(t.entity)?e.concat(Object(m.getAllChildrenRows)(t)):t?e.concat(t):e},[]):e,n=this.props.disabled||(e||[]).every(function(e){return Boolean(!e||e.isPseudo)});return o.createElement(d.b,{disabled:n,key:"head-row-hook",mode:d.c.CHECKBOX,onDeselect:this.handleRowDeselect,onSelect:this.handleRowSelect,rows:t,selected:this.rowsAreSelected(t),numWidthStep:this.props.rowIndentation})},t.prototype.renderBodyGroupRowHook=function(e,t){var n=this.props.disabled||(t||[]).every(function(e){return!e});return o.createElement(d.b,{disabled:n,index:e.indexes.map(function(e){return e+1}).join("."),key:"body-group-row-hook",level:e.indexes.length+1,mode:d.c.CHECKBOX,onDeselect:this.handleRowDeselect,onSelect:this.handleRowSelect,rows:t,selected:this.rowsAreSelected(t),numWidthStep:this.props.rowIndentation})},t.prototype.renderBodyRowHook=function(e,t){var n=this.rowIsSelected(e),r=e.indexes.length,i=Object(g.d)(e.entity)&&r?""+(e.indexes[r-1]+1):e.indexes.map(function(e){return e+1}).join("."),s=e.isPseudo?d.c.CUSTOM:t||n?d.c.CHECKBOX:d.c.INDEX,a=s===d.c.CUSTOM&&this.props.printer.renderBodyRowHook?this.props.printer.renderBodyRowHook(e.entity):null;return o.createElement(d.b,{disabled:this.props.disabled,index:i,isShortIndex:Object(g.d)(e.entity),key:"body-row-hook",level:e.indexes.length+1,mode:s,onDeselect:this.handleRowDeselect,onSelect:this.handleRowSelect,rows:[e],selected:n,numWidthStep:this.props.rowIndentation},a)},t.prototype.renderGroupToggler=function(e,t){return o.createElement(d.e,{data:e,expanded:!this.groupIsCollapsed(t),key:"group-toggler",onCollapse:this.handleGroupCollapse,onExpand:this.handleGroupExpand})},t.prototype.renderRowToggler=function(e){if(!e||!e.hasChildren)return o.createElement(d.e,{empty:!0,key:"row-toggler"});var t=e.entity._id,n=this.props.toRowIsLoadingChildren[t],r=Boolean(this.props.toRowIsExpanded[t]&&(n||(e.children||[]).length>0||e.pseudoBefore||e.pseudoAfter));return o.createElement(d.e,{data:e,expanded:r,key:"row-toggler",loading:n,onCollapse:this.handleRowCollapse,onExpand:this.handleRowExpand})},t.prototype.renderColumnTitle=function(e,t,n){return o.createElement(d.d,{className:t,key:"column-title",sortOrder:n,title:e})},t.prototype.renderRowAddAction=function(e,t){return e.isPseudo?null:this.props.printer.renderAddChildAction(e,this.props.new,t?{key:"row-add-action"}:{key:"row-add-action",style:this.hidden})},t.prototype.rowIsSelected=function(e){return i.includes(this.selectedRowIds,e.entity._id)},t.prototype.rowsAreSelected=function(e){var t=this;return!(!e||e.every(function(e){return Boolean(!e||e.isPseudo)}))&&e.every(function(e){return!e||e.isPseudo||t.rowIsSelected(e)})},t.prototype.resizeColumn=function(e){var t=this.resizingCellDescriptor;if(t){var n=t.width+(e.screenX-this.resizingEventScreenX);this.resizingEventScreenX=e.screenX,t.minWidth&&t.minWidth>n&&(n=t.minWidth),t.width!==n&&(t.width=n,this.scrollToColumn=this.resizingLastColumn?this.cellDescriptors.length-1:-1,this.props.onConfigure([t]))}},t}(o.Component)},"9mq3Zayu":function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;c=n("sa1Ed382"),s=n("GESwhXbR").Toast,r=n("X6Jh2VN1"),i=n("nL4olqOP"),o=n("85182E8g"),a=n("vmWJWrVe"),n("77NnVLwu"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="ProjectSettingsSuspendView",t.prototype.className="project-settings-suspend-view modal-dialog modal-padding",t.prototype.events={"click .confirm-handler":"submit"},t.prototype.initialize=function(e){return this.options=e,this.projectModel=e.projectModel,this.renderBasic(),this},t.prototype.renderBasic=function(){return this.$el.html(r({projectName:this.projectModel.get("name")})),this},t.prototype.submit=function(){var e,t,n,r,a,l;return e=this.projectModel.get("_organizationId"),n=!!o.get(0).get(e),t=this.options.gotoPortal,a=void 0===this.options.trigger||this.options.trigger,r=this.options.onSuccess,this.projectModel.updateSuspend({success:(l=this,function(o){var u,p,d,h,m,f,g;return u=e?tb_i18n.get("project.settings.suspend.success.inorganizaiton"):tb_i18n.get("project.settings.suspend.success"),s.success(u),null!=(p=i.find(0))&&p.remove(o),null!=(d=i.find("archived_0"))&&d.remove(o),null!=(h=i.find("suspended_0"))&&h.add(o),e&&(null!=(m=i.find(e))&&m.remove(o),null!=(f=i.find("archived_"+e))&&f.remove(o),null!=(g=i.find("suspended_"+e))&&g.add(o)),l.close(),e&&n&&!t?c.router.navigate("organization/"+e,{trigger:a}):c.router.navigate("projects",{trigger:!0}),c.gta.event({action:"suspend",control:"Side Menu",type:"project"}),o.fetch({success:function(e){var t;return null!=(t=i.find(0))?t.add(e):void 0}}),"function"==typeof r?r():void 0}),error:function(e){return s.error(tb_i18n.get("portal.suspend.project.error"))}}),this},t.prototype.close=function(){var e;return null!=(e=this.parentView)&&e.remove(),this},t}()},"9qRVX3JM":function(e,t){e.exports=function(e){var t='<div class="undone-tasks-list category-tasks"> <div class="title">'+tb_i18n.get("my.task.undone")+'</div> <ul class="list-unstyled"> <li class="menu-item ';return e.selected&&(t+="selected"),t+='" data-id="todo"> <a>'+tb_i18n.get("my.task.dateByAll")+'</a> </li> </ul></div><div class="finished-tasks-list category-tasks"> <div class="title">'+tb_i18n.get("tasklist.bar.done.tasks")+'</div> <ul class="list-unstyled"></ul></div>'}},"9qlUcSCG":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";return e.invisibleCount&&(o+=' <span class="icon icon-lock flex flex-center flex-vcenter"></span> <p>'+r(tb_i18n.get("tasklist.invisible.hint",e.invisibleCount))+"</p>"),o}},"9sOPw9dz":function(e,t,n){var r,o,i,s={}.hasOwnProperty;n("Qq9aldlU"),i=n("a+N5u/Cl"),o=n("vmWJWrVe"),r=n("pRtpPrbP"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="ConfirmDialogView",t.prototype.className="confirm-dialog-view modal-dialog modal-padding",t.prototype.events={"click .confirm-handler":"onConfirm"},t.prototype.initialize=function(e){return this.options=i.extend({title:"",content:"",confirmText:tb_i18n.get("confirm"),confirmStyle:"primary"},e),this.render()},t.prototype.render=function(){return this.$el.html(r(this.options))},t.prototype.onClose=function(){var e,t;return"function"==typeof(e=this.options).onClose&&e.onClose(),"function"==typeof(t=this.parentView).close?t.close():void 0},t.prototype.onConfirm=function(){var e;return"function"==typeof(e=this.options).onConfirm&&e.onConfirm(),this.onClose()},t}()},"9u4auf0a":function(e,t,n){var r,o,i,s,a;r=n("+2RfZ2TT"),s=n("QIhnK5EA"),i=function(e,t){var n,r,o,i;if(i=e.postId,n=e.method,o=e.params,r=e.origin)return new Promise(function(e,r){return s[n]?e(s[n](o,t)):r('"'+n+'" is not a function')}).then(function(){return a(t,r,{postId:i})}).catch(function(e){return a(t,r,{postId:i,error:e})})},a=function(e,t,n){var r;return null==n&&(n={}),null!=e&&null!=(r=e.contentWindow)?r.postMessage(n,t):void 0},o=function(e){var t,n,r,o;for(r=0,o=(n=document.querySelectorAll("iframe")).length;r<o;r++)if((t=n[r]).contentWindow===e.source)return t},r(window).on("message",function(e){var t,n;if(!e.data||!e.data.targetId)return n=e.origin||e.originalEvent,t=o(n),i(n.data,t)})},"9y1YiGkh":function(e,t,n){e.exports=n.p+"images/o_lvsidai@2x.8b490321.png"},A1PQasTq:function(e,t,n){var r,o,i,s,a,c,l,u,p=[].slice;r=n("a+N5u/Cl"),a=n("tLZJUYWX"),i=n("2qRnoGmE"),o=r.extend({},a),l={organization:{zh_tw:"企業",en:"organization",zh:"企业"},project:{zh_tw:"項目",en:"project",zh:"项目"}},s=i.FEATURES.customFieldsValue,u=function(e,t){var n,r,o;if(!i.FEATURES.customSystemFields)return t;for(n in s)(r=s[n])[e]&&(o=new RegExp(l[n][e],"gi"),t=t.replace(o,function(t){return"Project"===t||"Organization"===t?r[e][0].toLocaleUpperCase()+r[e].slice(1):r[e]}));return t},c=function(){return a.get=function(){var e,t,n,r;return t=arguments[0],e=2<=arguments.length?p.call(arguments,1):[],n=o.getLanguage(),r=o.get.apply(o,[t].concat(p.call(e))),r=u(n,r)}},e.exports={init:c,replaceStr:u}},A1vIblOP:function(e,t,n){},A8p3utT7:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n("TSYQbtd+"),c=n.n(a),l=n("LvDlAkAJ"),u=n("a+N5u/Cl"),p=n.n(u),d=n("GESwhXbR"),h=n("Nxrdcgel"),m=n("YqUJfXDr"),f=n("qJEY3WrE"),g=Object(h.SortableHandle)(function(){return i.a.createElement(d.Icon,{className:"drag-icon",name:"draggable-circle",size:12})}),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onRemove=function(){var e=t.props,n=e.field,r=e.onRemove;"function"==typeof r&&r(n)},t.onSelect=function(){var e=t.props,n=e.field,r=e.onSelect;"function"==typeof r&&r(n)},t}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.field,n=e.iconName,r=e.draggble,o=e.checked,s=e.removable,a=t.description,c=a?i.a.createElement("div",{className:"item-desc"},a):null,l=r?i.a.createElement(g,null):null,u=o?i.a.createElement(d.Icon,{name:"tick",className:"icon"}):null,p=s?i.a.createElement(d.IconButton,{name:"circle-remove",color:"gray",className:"remove-btn icon",onClick:this.onRemove}):null;return i.a.createElement("div",{className:f["field-list-item"],onClick:this.onSelect},l,i.a.createElement(d.Icon,{className:"item-icon",name:n}),i.a.createElement("div",{className:"item-content"},i.a.createElement("div",{className:"item-name"},t.name),c),i.a.createElement("div",{className:"item-tools"},u,p))},t}(i.a.PureComponent),b=n("DOZCBSCZ"),y=n("V6edIaEd");n.d(t,"a",function(){return M});var k=Object(h.SortableContainer)(function(e){var t=e.children;return o.createElement("div",null,t)}),_=Object(h.SortableElement)(v),w=n("ymFCWmUp").objectsFilter,C=n("u/LJYZ+h"),S=n("zANXUrIs"),E=function(e){return e[e.length-1]},T={query:"",tempSelectedFields:[],historyStack:[0],opened:!1,sorting:!1},I={content:"custom-text",project:"project",list:"collection",stage:"stage",isSubtask:"unordered-list",parentTask:"board",executor:"circle-user-o",involveMembers:"org-user",creator:"org-user",startDate:"start-date",dueDate:"end-date",created:"start-date",updated:"calendar",accomplished:"end-date",storyPoint:"story-points",planTime:"tachometer",workTime:"tachometer",workTimeDetail:"unordered-list",progress:"clock",isDone:"checkbox-ios-checked",isDelay:"clock",delayDays:"clock",note:"book",priority:"circle",tag:"tag",isShare:"share-stroke",isInArchivedProject:"trash",isArchived:"trash",isInSuspendedProject:"archive",isSuspended:"archive",isRecurrence:"repeat",likeCount:"dig",linkObj:"link2",taskType:"task-type",sprint:"sprint",id:"task-id"},M=function(e){function t(t){var n=e.call(this,t)||this;return n.raf=null,n.rootClassName="export-modal",n.tabs=[{title:s.get("search.export.set.field"),contentRender:"renderSelectedFields",confirmBtnRender:"renderExportConfirm"},{title:s.get("search.export.add.field.title"),contentRender:"renderAddFieldsPage",confirmBtnRender:"renderFieldsAddedConfirm"}],n.modalRef=function(e){return n.modal=e},n.onOpen=function(){var e=n.props,t=e.initExport,r=e.fetchPresetFields,o=e.searchCustomFields,i=e.customFieldsShowed,s=e.onOpen;t(),r(),i&&o(n.state.query),n.setState({opened:!0}),"function"==typeof s&&s()},n.onClose=function(){var e=n.props.onClose;n.initComponent(),"function"==typeof e&&e()},n.onBackToPrevTab=function(){n.jumpToTab("back")},n.onRemoveFields=function(e){n.setSelectedFields("remove",[e])},n.onAddFields=function(){var e=n.state.tempSelectedFields;n.setSelectedFields("add",e),n.setState({tempSelectedFields:[]}),n.jumpToTab("back")},n.onSelect=function(e){var t=n.props,o=t.limit,i=t.selectedFields,a=n.state.tempSelectedFields,c=a;if(p.a.find(a,function(t){return t.id===e.id}))c=a.filter(function(t){return t.id!==e.id});else{if(!(a.length+i.length<o))return void d.Toast.error(s.get("search.export.fields.limit.30"));c=r.h(a,[e])}n.setState({tempSelectedFields:c})},n.onGoAddFieldsPage=function(){n.changeQuery(""),n.jumpToTab("go",1)},n.onClickExportConfirm=function(){(0,n.props.exports)(n.props.selectedFields),n.modal.close()},n.searchCustomFields=p.a.debounce(n._searchCustomFields,200),n.onCustomSearch=function(e){var t=e.target.value;n.changeQuery(t)},n.onSortStart=function(){n.setState({sorting:!0})},n.onSortEnd=function(e){var t=n.props,r=t.selectedFields,o=t.onChangeSelectedFields,i=e.oldIndex,s=e.newIndex;o(Object(h.arrayMove)(r,i,s)),n.raf=requestAnimationFrame(function(){n.setState({sorting:!1})})},n.renderSelectedFields=function(){var e=n.props.selectedFields.map(function(e,t){var i=e.id,s={field:e,iconName:n.getIconName(e),removable:!0,onRemove:n.onRemoveFields,draggble:!0};return o.createElement(_,r.a({index:t,key:i},s))}),t=S[n.rootClassName+"__sorting-item"];return o.createElement("div",{className:"tab-content"},o.createElement("div",{className:"field-list-wrap thin-scroll"},o.createElement(k,{lockAxis:"y",useDragHandle:!0,helperClass:t,onSortStart:n.onSortStart,onSortEnd:n.onSortEnd,lockToContainerEdges:!0},e),n.renderAddFieldBtn()))},n.renderExportConfirm=function(){var e=n.props.selectedFields;return o.createElement(d.Button,{disabled:0==e.length,onClick:n.onClickExportConfirm,className:"tab-confirm-btn"},s.get("confirm"))},n.renderAddFieldsPage=function(){var e=n.state.query,t=n.isSearching()?n.renderSearchingContent():n.renderNormalContent();return o.createElement("div",{className:"tab-content"},o.createElement("div",{className:"custom-field-query-wrap"},o.createElement("input",{className:"form-control custom-field-query",placeholder:s.get("search.field"),onChange:n.onCustomSearch,value:e})),t)},n.renderFieldsAddedConfirm=function(){return o.createElement(d.Button,{onClick:n.onAddFields,className:"tab-confirm-btn"},s.get("search.export.confirm.and.back"))},n.state=T,n}return r.d(t,e),t.prototype.componentWillUnmount=function(){null!==this.raf&&cancelAnimationFrame(this.raf)},t.prototype.initComponent=function(){this.setState(T)},t.prototype.getCurrentIndex=function(){var e=this.state.historyStack;return E(e)},t.prototype.jumpToTab=function(e,t){var n=this.state.historyStack;switch(e){case"back":this.setState({historyStack:n.slice(0,n.length-1)});break;case"go":if(!t||E(n)===t)return;var o=0===t?[0]:r.h(n,[t]);this.setState({historyStack:o})}},t.prototype.setSelectedFields=function(e,t){var n=this.props.selectedFields,r=[];switch(e){case"add":r=n.concat(t);break;case"remove":r=Object(l.differenceBy)(n,t,"id");break;default:return}this.props.onChangeSelectedFields(r)},t.prototype._searchCustomFields=function(){var e=this.props,t=e.searchCustomFields,n=e.customFieldsShowed,r=this.state.query;n&&t(r.trim())},t.prototype.changeQuery=function(e){this.setState({query:e}),this.searchCustomFields()},t.prototype.isCanBack=function(){return this.state.historyStack.length>1},t.prototype.renderTitle=function(){var e=this.getCurrentIndex(),t=this.tabs[e];if(!t)return"";var n=this.isCanBack()?o.createElement(d.IconButton,{name:"chevron-left",className:"tab-back-btn",onClick:this.onBackToPrevTab}):null;return o.createElement("div",{className:"export-modal-title-content"},o.createElement("div",{className:"tab-back-btn-wrap"},n),o.createElement("div",{className:"tab-title"},t.title))},t.prototype.getCustomFieldIcon=function(e){var t=e.type,n=e.subtype;return"lookup"===t?"custom-text":"commongroup"===t?Object(y.getCustomFieldIcon)(n):Object(y.getCustomFieldIcon)(t)||"custom-text"},t.prototype.id2IconName=function(e){return p.a.isFunction(this.props.id2IconName)?this.props.id2IconName(e):I[e]||"custom-text"},t.prototype.getIconName=function(e){return e.type?this.getCustomFieldIcon(e):this.id2IconName(e.id)},t.prototype.renderAddFieldBtn=function(){var e=this.props.limit,t=this.props.selectedFields;return o.createElement(d.TextButton,{color:"blue",className:"add-field-btn",disabled:t.length>=e,onClick:this.onGoAddFieldsPage},o.createElement(d.Icon,{className:"icon",name:"circle-plus"}),o.createElement("span",null,s.get("search.export.add.field",t.length,e)))},t.prototype.renderPlaceholder=function(){return o.createElement("div",{className:"no-result-placeholder"},o.createElement("img",{className:"placeholder-img",src:C}),o.createElement("span",{className:"placeholder-text"},s.get("search.export.not.have.fields.searched")))},t.prototype.isSearching=function(){var e=this.state.query;return"string"==typeof e&&""!==e},t.prototype.mapField2SelectableField=function(e,t){var n=e.id,i={field:e,iconName:this.getIconName(e),checked:!!p.a.find(t,function(e){return e.id===n}),onSelect:this.onSelect};return o.createElement(v,r.a({key:n},i))},t.prototype.renderSearchingContent=function(){var e=this,t=this.props,n=t.presetFields,i=t.customFields,s=t.isPresetFieldsLoading,a=t.isCustomFieldsLoading,c=this.state,l=c.tempSelectedFields,u=c.query,p=r.h(w(this.getShowedFields(n),u),this.getShowedFields(i)),d=s||a||0!==p.length?p.map(function(t){return e.mapField2SelectableField(t,l)}):this.renderPlaceholder();return o.createElement("div",{className:"field-list-wrap thin-scroll"},o.createElement("div",{className:"searched-field-list"},d))},t.prototype.renderNormalContent=function(){var e=this,t=this.props,n=t.presetFields,r=t.customFields,i=t.isPresetFieldsLoading,a=t.isCustomFieldsLoading,c=t.hasMore,l=t.onLoadMoreCustomFields,u=t.customFieldsShowed,p=this.state.tempSelectedFields,d=this.getShowedFields(n),h=this.getShowedFields(r),f=i?o.createElement(b.a,null):d.map(function(t){return e.mapField2SelectableField(t,p)}),g=a?o.createElement(b.a,null):h.map(function(t){return e.mapField2SelectableField(t,p)}),v=u?o.createElement("div",{className:"gap-line"}):null,y=u?o.createElement("div",{className:"custom-field-list"},o.createElement("div",{className:"custom-field-list-title"},s.get("table.task.customField")),g,o.createElement(m.LoadMore,{clause:c,hasMore:c,endWith:null,onEnter:l})):null;return o.createElement("div",{className:"field-list-wrap thin-scroll"},o.createElement("div",{className:"preset-field-list"},f),v,y)},t.prototype.getShowedFields=function(e){var t=this.props.selectedFields;return Object(l.differenceBy)(e,t,"id")},t.prototype.renderTabBody=function(){var e=this.state.opened,t=this.tabs[this.getCurrentIndex()];return e?o.createElement("div",{className:"tab-body"},t?this[t.contentRender]():null,o.createElement("div",{className:"tab-confirm-wrap"},t?this[t.confirmBtnRender]():null)):null},t.prototype.render=function(){var e=this.props,t=e.className,n=r.g(e,["className"]),i={closeable:!this.state.sorting};return o.createElement(d.Modal,r.a({ref:this.modalRef,title:this.renderTitle(),mask:i,width:360,className:c()(S["export-modal"],t),bodyStyle:{padding:0},onOpen:this.onOpen,onHide:this.onClose},n),this.renderTabBody())},t}(o.PureComponent)},ACCEx9jd:function(e,t,n){e.exports={"insert-line":"insert-line__37o6","project-tag-item":"project-tag-item__2GN2","first-popup-view":"first-popup-view__3wlq"}},ACrfQSoU:function(e,t,n){e.exports={container:"container__2lv4","member-item":"member-item__1kEe","member-avatar":"member-avatar__29XM","member-desc":"member-desc__1SX9","permission-desc":"permission-desc__Cfqp","member-info":"member-info__3eEX","info-wrapper":"info-wrapper__373P","member-role":"member-role__1BLh"}},AEZNCUhx:function(e,t){},AEkluhuA:function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;n("a+N5u/Cl"),a=n("sa1Ed382"),s=n("3eMzznN/").formatWorktime,c=n("gh8QIhMV").throwError,i=n("pZtHSz+O"),r=n("aD6I3VT4"),o=n("xhWM84Ar").Summary,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.tagName="section",t.prototype.viewName="DetailInfosWorktimeView",t.prototype.className="detail-infos-worktime-view no-border-wrapper",t.prototype.initialize=function(e){return null==e&&(e={}),t.__super__.initialize.apply(this,arguments),this.objectModel=e.objectModel,this.isRequired=e.isRequired,this.canEdit=e.canEdit,this.isInitial=!0,this.isLoading=!1,this.isLoadingMore=!1,this.taskWorktimesCollection=i.get(this.objectModel.id),this.render(),this.listen()},t.prototype.render=function(){return this.requestReactView(this.el,o,this.getProps())},t.prototype.listen=function(){return this.listenTo(this.objectModel,"change",this.render),this.listenTo(this.taskWorktimesCollection,"update destroy",this.render)},t.prototype.getProps=function(){var e,t,n;return t=(e=this.objectModel.get("workTime")).totalTime,n=e.usedTime,{totalTime:s(t),usedTime:s(n),worktimes:this.formatWorktimes(),isArchived:this.objectModel.get("isArchived"),hasPutPermission:this.hasPermission(),hasPostPermission:this.objectModel.get("_executorId")===a.user.id,isRequired:this.isRequired,onRequestWorktimes:this.loadWorktimes.bind(this),onRequestMoreWorktimes:this.loadMoreWorktimes.bind(this),updateTotalTime:this.updateTotalTime.bind(this),addWorktime:this.addWorktime.bind(this),deleteWorktime:this.deleteWorktime.bind(this),gtaHandler:this.gtaHandler.bind(this)}},t.prototype.setWortimesStatus=function(e){var t,n,r;return t=e.isInitial,n=e.isLoading,r=e.isLoadingMore,null!=t&&(this.isInitial=t),null!=n&&(this.isLoading=n),null!=r&&(this.isLoadingMore=r),this.render()},t.prototype.loadWorktimes=function(){var e;if(!this.isLoading)return this.setWortimesStatus({isInitial:!1,isLoading:!0}),new Promise((e=this,function(t,n){return i.fetch(e.objectModel.id,{success:t,error:n})})).then(function(e){return function(){return e.taskWorktimesCollection.sort(),e.setWortimesStatus({isLoading:!1})}}(this)).catch(function(e){return function(t){return e.setWortimesStatus({isLoading:!1}),c(t)}}(this))},t.prototype.loadMoreWorktimes=function(){var e;if(!this.isLoadingMore&&this.taskWorktimesCollection.hasMore)return this.setWortimesStatus({isLoadingMore:!0}),new Promise((e=this,function(t,n){return e.taskWorktimesCollection.loadMore({success:t,error:n})})).then(function(e){return function(){return e.setWortimesStatus({isLoadingMore:!1})}}(this)).catch(function(e){return function(t){return e.setWortimesStatus({isLoadingMore:!1}),c(t)}}(this))},t.prototype.formatWorktimes=function(){var e;return(e=this.taskWorktimesCollection.toJSON()).forEach(function(e){var t;return t=a.user.id,e.hasDelPermission=e._creatorId===t}),{isInitial:this.isInitial,isLoading:this.isLoading,isLoadingMore:this.isLoadingMore,worktimes:e,hasMore:this.taskWorktimesCollection.hasMore}},t.prototype.updateTotalTime=function(e){return null==e&&(e=0),new Promise((t=this,function(n,r){return t.objectModel.get("workTime").totalTime===e?n():t.objectModel.saveAttr("worktimes",null,{attrs:{totalTime:e},success:n,error:r})}));var t},t.prototype.addWorktime=function(e,t){return new Promise((n=this,function(r,o){return n.taskWorktimesCollection.addWorktime({attrs:{_taskId:n.objectModel.id,value:e,recordDate:t},success:r,error:o})}));var n},t.prototype.deleteWorktime=function(e){return new Promise((t=this,function(n,r){var o;return null!=(o=t.taskWorktimesCollection.get(e))?o.destroy({wait:!0,success:n,error:r}):void 0})).then(function(e){return function(){return e.gtaHandler({action:"deleted taskHours"})}}(this));var t},t.prototype.isCase=function(){var e,t,n;return n=(e=this.objectModel.get("workTime")).usedTime,t=e.totalTime,n||t},t.prototype.hasPermission=function(){return this.canEdit},t.prototype.gtaHandler=function(e){if(null==e&&(e={}),"task"===this.objectModel.get("objectType"))return e=Object.assign({type:this.objectModel.isSubtask()?"subtask":"task",control:"taskHours",series:this.objectModel.get("ancestorIds").length},e),a.gta.event(e)},t}()},AEl592Db:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;a=n("2qRnoGmE"),s=n("6XSa3ffj"),r=n("lzAmRYta"),i=a.DN_SITE_URL+"/web-app-files/object-picker-guide-zh.gif",o=a.DN_SITE_URL+"/web-app-files/object-picker-guide-en.gif",e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="ObjectPickerGuideView",t.prototype.className="object-picker-guide-view",t.prototype.popoverTitle="",t.prototype.width=462,t.prototype.render=function(){var e;return e="zh"===tb_i18n.getLanguage()?i:o,this.$el.html(r({guideImageUrl:e}))},t}()},"AGtPin/S":function(e,t,n){"use strict";n.r(t),n.d(t,"WebLinkComponent",function(){return h});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("LvDlAkAJ"),a=n.n(s),c=n("tLZJUYWX"),l=n.n(c),u=n("0iSAgZrr"),p=n("tjH8pC/R"),d=n.n(p),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.items,n=e.linkTitle,o=a.a.map(t,function(e){return i.a.createElement("li",{className:"link","data-id":e._id,"data-linkedid":e._linkedId,key:e._id},i.a.createElement("a",{className:"link-head",href:e.data.originUrl,target:"_blank"},i.a.createElement(u.a,r.a({},r.a({},e.data,{type:e.linkedType}),{classNames:d.a["link-item"]}))),i.a.createElement("a",{className:"link-menu-handler icon icon-chevron-down","data-id":e._id}))});return i.a.createElement(i.a.Fragment,null,i.a.createElement("header",{className:"link-container-header"},n||l.a.get("link.link.title")),i.a.createElement("ul",null,o))},t}(i.a.PureComponent)},"AIF/HEzv":function(e,t,n){"use strict";n.r(t);var r=n("4BeYQFX4"),o=n.n(r),i=n("IaFtV71y"),s=n.n(i),a=new o.a({id:"angle",use:"angle-usage",viewBox:"0 0 8 16",content:'<symbol viewBox="0 0 8 16" id="angle"><path d="M8 16H6.305c-.555 0-1.278-.36-1.613-.8L.514 9.704c-.67-.882-.682-2.317-.029-3.199L4.703.807C5.033.36 5.746 0 6.305 0H8v16z" /></symbol>'});s.a.add(a);t.default=a},AIaOfRno:function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty;c=n("a+N5u/Cl"),l=n("sa1Ed382"),o=n("6XSa3ffj"),a=n("3eMzznN/"),s=n("GESwhXbR").Toast,r=n("plv2hwzz"),i=n("2qluv9Ze"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.className="project-settings-member-menu-view",t.prototype.viewName="ProjectSettingsMemberMenuView",t.prototype.popoverTitle="",t.prototype.width=250,t.prototype.events={"click .resend-handler":"resendMember","click .role-handler":"setRole","click .project-role-handler":"setProjectRole","click .remove-member-handler":"enterDeleteMemberSubMenu","click .remove-member-confirm":"deleteMember","click .upgrade-handler":"upgradeHandler","click .set-role-handler":"setRoleHandler","click li":"hide"},t.prototype.initialize=function(e){if(null==e&&(e={}),e.projectModel||e.memberModel)return this.popoverTitle=tb_i18n.get("project.settings.member.menu"),this.projectModel=e.projectModel,this.memberModel=e.objModel,this.roles=e.roles||[],this.cannotRemove=e.cannotRemove,this.canSetSelfOwner=e.canSetSelfOwner,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){var e,t,n;return t=a.getMemberPermissions(this.projectModel,this.memberModel),n=this.projectModel.payment,e=c.extend(this.memberModel.toJSON(),{isProfessionalUser:n.isUser&&n.isProfessional,_organizationId:this.projectModel.get("_organizationId"),roles:this.roles,setRelated:this.cannotRemove,myRoleId:this.projectModel.getRoleScope(),canSetSelfOwner:this.canSetSelfOwner,isOwner:2===this.memberModel.getRoleScope()},t),this.$el.html(r(e)),this},t.prototype.resendMember=function(e){return $(e.currentTarget),this.memberModel.saveAttr("resend",null,{wait:!0,success:function(){return s.success(tb_i18n.get("project.settings.email.sent30"))}}),this},t.prototype.enterDeleteMemberSubMenu=function(){return this.enterSubMenu(tb_i18n.get("project.settings.remove.member.header"),(e=this,function(){return e.$el.html(i())}));var e},t.prototype.deleteMember=function(e){return $(e.currentTarget),this.memberModel.destroy({wait:!0,success:function(){return s.success(tb_i18n.get("remove.success"))}}),this.hide(),l.gta.event({action:"remove member",control:"Side Member Menu",type:"org member"}),this},t.prototype.setRole=function(e){var t,n;if(1===(t=$(e.currentTarget).data("role")).length&&(t=parseInt(t,10)),t!==this.memberModel.get("_roleId"))return this.memberModel.saveAttr("_roleId",t,{wait:!0,success:(n=this,function(){return n.memberModel.fetch({url:"members/"+n.memberModel.get("_memberId")})})}),l.gta.event({action:"change member permission",control:"Side Member Menu"}),this},t.prototype.setProjectRole=function(){var e;return e=this.roles.find(function(e){return e.isDefault&&2===e.level})||{},this.projectModel.upgradeToOwner({roleId:e._id}),this.memberModel.set("role",2)},t.prototype.upgradeHandler=function(e){return this.hide(),this},t.prototype.setRoleHandler=function(e){return this.hide(),l.gta.event({action:"edit project permission",control:"Side Member Menu"}),this},t}()},"AJMKF+Qd":function(e,t,n){e.exports={"task-start-date":"task-start-date__3slD","task-start-date__inner":"task-start-date__inner__1tX5"}},ANUNAeSO:function(e,t,n){e.exports={"add-button-icon":"add-button-icon__2vDf"}},"AQCf3/iq":function(e,t,n){e.exports={"swim-table":"swim-table__3t_l","swim-grid-first-column-cell":"swim-grid-first-column-cell__1uf3","swim-grid-controller-column":"swim-grid-controller-column__B7pP","swim-grid-last-column-cell":"swim-grid-last-column-cell__3JK5","swim-grid-controller-sortable-column":"swim-grid-controller-sortable-column__3fQA","swim-grid-hovered-cell":"swim-grid-hovered-cell__3YGb","swim-grid-header":"swim-grid-header__2Bnm","swim-grid-header-title":"swim-grid-header-title__z1m3","swim-grid-header-toolbar":"swim-grid-header-toolbar__1M95","swim-grid-toolbar":"swim-grid-toolbar__8fhi","swim-grid-configuration":"swim-grid-configuration__2GIf","swim-grid-void-column-cell":"swim-grid-void-column-cell__1YD1","swim-grid-first-column-cell-content":"swim-grid-first-column-cell-content__127v","swim-grid-loader-container":"swim-grid-loader-container__36Tj","swim-grid-loader-toggle":"swim-grid-loader-toggle__KsI_","swim-grid-loader-content":"swim-grid-loader-content__kLJw"}},ASLtJLCZ:function(e,t,n){},ASYHLDWg:function(e,t,n){},"AYJ0s7/j":function(e,t,n){e.exports={"task-custom-number-field":"task-custom-number-field__3L5c","task-custom-number-field__inner":"task-custom-number-field__inner__1aBT"}},AaR11ELR:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return h});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("suI5NDUm"),c=n("9Ip6qvet"),l=n("GHDEvYBf"),u=n("a3xD06cl"),p=n.n(u),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){var e=t.props,n=e.input,r=e.onClose;Object(a.toAoneSearch)(n),r()},t}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=(e.input,e.onClose,r.g(e,["input","onClose"]));return Object(a.isAone)()&&o.createElement("div",r.a({},t),o.createElement("div",{className:"guide-menu",onClick:this.onClick},i.get("aone.search.guide.advanced"),o.createElement(s.Icon,{className:p.a["guide-icon-chevron"],name:"chevron-right",size:14})))},t}(o.PureComponent),h=function(e){if(!Object(a.isAone)())return null;var t=c.a.concat(l.a).map(function(t,n){return o.createElement(s.TextButton,{color:"blue",key:n,onClick:function(){return e.onSubmit(t)}},Object(l.c)()[t])});return o.createElement("div",{className:p.a["search-bar-result-content-footer"]},o.createElement("p",null,i.get("aone.search.guide.fast.search")),o.createElement("div",{className:"fast-list"},t),o.createElement("div",{className:"footer-link",onClick:function(){Object(a.toAoneSearch)(e.input),e.onClose()}},i.get("aone.search.guide.to.old.version"),o.createElement(s.Icon,{name:"arrow-forward"})))}},AaggvXFt:function(e,t,n){},Ab6MsWQN:function(e,t,n){e.exports=n.p+"images/d_lei@2x.0554653d.png"},"AcoKqCS/":function(e,t,n){e.exports={"main-content":"main-content__2UBn",content:"content__1Qz-",submit:"submit__1nEz",item:"item__3VYB",icon:"icon__1Ac2"}},Acy4HZ1V:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("TSYQbtd+"),l=n.n(c),u=n("s0r7VfKc"),p=n("sa1Ed382"),d=n("wVXDg9Ql"),h=n("GESwhXbR"),m=n("W6XdWgVo"),f=n("dWbDnvg6"),g=n("ljKqFuR1"),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderAvatar=function(){var e=this.props.executor,t=e?e.avatarUrl:"";return o.createElement(f.a,{size:"small",src:t})},t.prototype.renderProject=function(){var e=this.props,t=e.project,n=e.projectName;return t||n?o.createElement("div",{className:g["project-info"]},o.createElement(h.Icon,{name:"project"}),o.createElement("span",null,n||t.name)):null},t.prototype.renderTaskId=function(){var e=this.props.taskId;return e&&o.createElement("div",{className:g["taskid-badge"]},o.createElement(h.Icon,{name:"id"}),o.createElement("span",null,e))},t.prototype.renderTask=function(){return o.createElement("div",{className:g["task-info"]},o.createElement(h.Icon,{name:"board"}),o.createElement("span",null,this.props.content))},t.prototype.renderParent=function(){return this.props.parent&&o.createElement("div",{className:g["parent-task"]},o.createElement("span",null,s.get("subtask.belong.to",this.props.parent.content)))},t.prototype.render=function(){return o.createElement("div",{className:g["task-item"]},o.createElement("div",{className:g["task-item-main"]},this.renderTask(),o.createElement("div",{className:g["task-item-desc"]},this.renderTaskId(),this.renderProject(),this.renderAvatar())),this.renderParent())},t}(o.PureComponent),b=n("qhovRTlL"),y=function(e,t,n,r){var o="main-to-sub"===t?"convert subtask":"change task";p.gta.event({action:e,control:o,method:n,segment:r})},k=function(e){function t(t){var n=e.call(this,t)||this;return n.acceptTypes=["task"],n.modalStyle={padding:0,marginTop:-4},n.onVisibleChange=function(e){n.setState({modalOpened:e})},n.selectTask=function(e,t){var r=n.props.type,o="rencent"===e.searchType?"click add recently task":"click search result";y(o,r,"click"),n.setState({selectedTaskId:e._id,index:t})},n.onSubmitConvert=function(){var e=n.props,t=e.taskId,r=e.type,o=n.state.selectedTaskId,s="main-to-sub"===r?a.a.get("task.menu.convert.subtask"):a.a.get("task.menu.change.belong");y("select result handler",r,"click","Search Input"),u.default.fetch.put("tasks/"+t+"/parent",{targetId:o}).toPromise().then(function(){h.Toast.success({message:a.a.get("task.convert.success",s),handlers:i.a.createElement("a",{className:"link-add-handler",href:"/task/"+t},a.a.get("task.convert.to.subtask.goto"))})}).catch(function(e){400===e.error.status&&(d.SDKInterceptor.ignore(e),e.error.json().then(function(e){h.Toast.error({message:a.a.get("task.convert.fail",s),description:e.message})}))}).then(function(){n.props.onComplete()})},n.itemComponentFactory=function(){return v},n.onValueChanged=function(e){var t=n.props.type;""===n.currentValue&&""!==e&&y("search task",t,"input","Search Input"),n.currentValue=e,n.setState({selectedTaskId:null,index:-1})},n.renderSearchComponent=function(e,t){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:b["task-convert-search"]},i.a.createElement(h.Icon,{name:"search",className:b["search-icon"]}),e),i.a.createElement("div",{className:b["task-convert-search-result"]},t))},n.state={modalOpened:t.modalOpened,selectedTaskId:null,index:void 0},n.currentValue="",n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=e.modalOpened;t!==this.state.modalOpened&&this.setState({modalOpened:t})},t.prototype.renderContent=function(){return i.a.createElement(i.a.Fragment,null,this.renderTaskSelector(),this.renderFooter())},t.prototype.renderTaskSelector=function(){var e=l()(b.body,"thin-scroll");return i.a.createElement("div",{className:e},i.a.createElement(m.BasicSearchComponent,{parentId:this.props.taskId,organizationId:this.props.organizationId,sourceProjectId:this.props.sourceProjectId,render:this.renderSearchComponent,placeHolder:a.a.get("task.menu.convert.search.placeholder"),onSelect:this.selectTask,acceptTypes:this.acceptTypes,loadRecentOnMount:!0,clearInputOnSelect:!1,loadMoreCls:b["load-more"],onSelectCls:b["selected-item"],itemComponentFactory:this.itemComponentFactory,onValueChanged:this.onValueChanged,disableKeyboardEvent:!0,disableFocusState:!0,disableHighlightenSearch:!0,index:this.state.index}))},t.prototype.renderFooter=function(){return i.a.createElement("div",{className:b.footer},i.a.createElement("div",{className:b["footer-tips"]},i.a.createElement(h.Icon,{name:"info",className:b["footer-tips-icon"]}),a.a.get("task.menu.convert.tips")),i.a.createElement(h.Button,{disabled:null===this.state.selectedTaskId,onClick:this.onSubmitConvert},a.a.get("task.menu.convert.submit")))},t.prototype.render=function(){return i.a.createElement(h.Modal,{className:"dls-modal-outer-selector",title:this.props.title,titleCls:b["task-convert-title"],titlePosition:"center",bodyStyle:this.modalStyle,width:600,opened:this.state.modalOpened,onVisibleChange:this.onVisibleChange},i.a.createElement("div",{className:b["task-convert"]},this.renderContent()))},t}(i.a.PureComponent);n.d(t,"TaskConvert",function(){return k})},AjX2Fov0:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("GESwhXbR"),s=n("PVLVtUMG");n("crizMn49");var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootCls="taskflow-status-label-menu-item",t.onItemClick=function(){var e=t.props,n=e.status,r=e.selected,o=e.onSelect;r||"function"!=typeof o||o(n._id)},t}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.status,n=e.selected?o.createElement(i.Icon,{name:"tick",className:this.rootCls+"-icon"}):null;return o.createElement(i.MenuItem,{key:t._id,className:this.rootCls,onClick:this.onItemClick},o.createElement("button",{className:"not-react-to-draggable-button"},o.createElement("div",{className:"flex-space"},o.createElement(s.StatusLabel,{kind:t.kind,title:t.name})),n))},t}(o.PureComponent)},AjapuWMY:function(e,t,n){e.exports={root:"root__Q_uJ"}},AqObtacK:function(e,t,n){},Ar3iunZ4:function(e,t,n){var r,o,i={}.hasOwnProperty;o=n("vmWJWrVe"),r=n("oE8S651X").OrganizationReportApp,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.className="organization-report-app",t.prototype.viewName="OrganizationReportAppView",t.prototype.initialize=function(e){var t;return t=e.organizationId,this.requestReactView(this.$el.get(0),r,{organizationId:t},{redux:!0,router:!0,errorBoundary:!0})},t}()},"Atd/KrMo":function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;s=n("sa1Ed382"),o=n("vmWJWrVe"),i=/^((?:tb\-)?i18n):\/\/(.*)$/,e.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.initialize=function(e){return this.options=e,this.lang=s.PREFERENCE.getLanguage(),"function"==typeof this.normalizeOptions&&this.normalizeOptions(),this},t.prototype.i18n=function(e){var t,n,r;return(r=i.exec(e))?"tb-i18n"===r[1]?tb_i18n.get(r[2]):"i18n"===r[1]?(!this.options.i18n||this.lang in this.options.i18n||(this.lang="zh"),null!=(t=this.options.i18n)&&null!=(n=t[this.lang])?n[r[2]]:void 0):void 0:e},t.prototype.sendAction=function(e,n){var r,o;if(r=e.name||e,o=t.kViewActionRegex.exec(r))switch(o[1]){case"close-view":switch(this.options.type){case"modal":return this.parentView.close(),this;case"external:popover":return this.parentView.hide(),this}}return this.options.runtime.sendAction(e,n),this},t}(),r.kViewActionRegex=/^view-action:\/\/(.*)$/},AucP5D8q:function(e,t,n){},AxfCNEe5:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("dWbDnvg6"),c=n("kuYoSsIJ"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderTrigger=function(){var e=this.props.executor,t=e.avatarUrl,n=e.name,r=t?n:i.get("task.detail.no.executor");return o.createElement(s.Tooltip,{title:r},o.createElement(a.a,{size:"small",src:t}))},t.prototype.render=function(){var e=this.props,t=e.onSelect,n=e.executor,i={executor:n,contextId:e.contextId,disabled:e.disabled,inviteShowed:e.inviteShowed,inviteMoreMember:e.inviteMoreMember,onSelect:t,reactToHover:!0};return o.createElement(c.a,r.a({key:n._id},i),this.renderTrigger())},t}(o.PureComponent);n.d(t,"SubTaskExecutor",function(){return l})},B1kKgoX2:function(e,t,n){e.exports=n.p+"images/member@2x.d156a908.png"},B50Fljg4:function(e,t,n){},B53qLZ71:function(e,t,n){},B6lA9c72:function(e,t,n){e.exports={"member-sub-list":"member-sub-list__3cWD"}},B6lynyzv:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("yiO17FlF"),r=n("VuB9cZyl"),o=n("oq1bWpp9"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="tasks",t.prototype.model=o,t.prototype.boundToObjectType="project",t.prototype.pageNum=20,t.prototype.queryType="",t.prototype.initialize=function(e,n){return null==n&&(n={}),this.queryType=n.queryType,this._executorId=n._executorId,this._projectId=n._projectId||n.boundToObjectId,t.__super__.initialize.apply(this,arguments)},t.prototype.listen=function(){var e;if(!this.listened)return t.__super__.listen.apply(this,arguments),this.queryType?(this.listenTo(i,":new:task",(e=this,function(t){if(t.collection!==e)return e.checkModel(t)})),this.listenTo(i,":change:task",function(e){return function(t){return e.checkModel(t)}}(this)),this.listenTo(i,":destroy:task",function(e){return function(t){if(t.collection!==e)return e.remove(t)}}(this))):void 0},t.prototype.sync=function(e,n,r){return r.url="projects/"+this._projectId+"/tasks",t.__super__.sync.apply(this,arguments)},t.prototype.checkModel=function(e){var t,n;if(n=!1,e.get("_projectId")!==this._projectId)return this;if(e.get("_id")&&!e.get("isArchived"))switch(this.queryType){case"today":n=this.checkTodayTask(e);break;case"done":n=this.checkDoneTask(e);break;case"todo":n=!this.checkDoneTask(e);break;case"excutor":n=this.checkExcutorTask(e);break;case"unassigned":n=this.checkUnassignedTask(e)}return!(t=this.get(e.get("_id")))&&n?this.add(e):t&&!n&&(this.remove(e,{silent:!0}),this.trigger("reset")),this},t.prototype.checkUnassignedTask=function(e){return!e.get("isDone")&&!e.get("_executorId")},t.prototype.checkExcutorTask=function(e){return!e.get("isDone")&&this._executorId===e.get("_executorId")},t.prototype.checkTodayTask=function(e){return!e.get("isDone")&&"today"===e.getScope()},t.prototype.checkDoneTask=function(e){return e.get("isDone")},t.prototype.comparator=function(e,t){var n,r,o,i,s,a;return(r=e.get("isDone")?1:0)-(s=t.get("isDone")?1:0)?r-s:(1===r?(a=e.get("accomplished"),o=t.get("accomplished")):(o=e.get("dueDate"),a=t.get("dueDate")),o&&a?(n=new Date(o),i=new Date(a)):(n=o?0:1,i=a?0:1),n-i?n-i:(n=new Date(e.get("created")))-(i=new Date(t.get("created"))))},t}()},B9r4eSLP:function(e,t,n){e.exports={"checkbox-wrapper":"checkbox-wrapper__1Reb",loading:"loading__1L1H"}},BBUbNOFr:function(e,t,n){e.exports={"not-found":"not-found__1Dfs",img:"img__34TT"}},BIh1HhrR:function(e,t){e.exports=function(e){var t='<div class="editor-content-wrap"> <textarea class="note-input" data-gta="{action: edit note}" placeholder="'+e.placeholder+'"></textarea> <span class="draft pull-left">'+tb_i18n.get("draft")+' <a class="restore-draft">'+tb_i18n.get("draft.restore")+'</a> <a class="discard-draft">'+tb_i18n.get("draft.discard")+'</a> </span></div><div class="required-note-empty"> <span class="icon icon-circle-remove"></span> <span class="error-msg">'+tb_i18n.get("required.field.empty.error")+'</span></div><div class="note-handler-set flex flex-vcenter ';return e.mdSupport||(t+="no-md-support"),t+='"> <div class="editor-switcher-container ',e.mdSupport&&(t+="visibility"),t+='"> <a class="editor-mode" data-toggle="dropdown"> <span class="editor-name pull-left">'+e.modeTitle+'</span> <span class="icon icon-chevron-down"></span> </a> <ul class="dropdown-menu" role="menu"> <li> <a class="editor-switcher-handler" data-mode="html"> <span class="switcher-name">'+tb_i18n.get("editor.mode.html")+'</span> <span class="icon icon-tick"></span> </a> </li> <li> <a class="editor-switcher-handler" data-mode="md"> <span class="switcher-name">'+tb_i18n.get("markdown.helper.title")+'</span> <span class="icon icon-tick"></span> </a> </li> </ul> </div> <a class="cancel-note-handler">'+tb_i18n.get("cancel")+'</a> <a class="save-note-handler btn btn-primary">'+tb_i18n.get("save")+'</a></div><div class="fake-upload-container hidden"></div>'}},BImTYCVK:function(e,t,n){"use strict";n.r(t);var r=n("4BeYQFX4"),o=n.n(r),i=n("IaFtV71y"),s=n.n(i),a=new o.a({id:"angle-invisible-blue",use:"angle-invisible-blue-usage",viewBox:"0 0 8 16",content:'<symbol viewBox="0 0 8 16" id="angle-invisible-blue"><path fill="#3DA8F5" d="M7.997 16H6.302c-.555 0-1.279-.36-1.614-.8L.511 9.704c-.67-.882-.682-2.317-.029-3.199L4.699.807C5.03.36 5.742 0 6.302 0h1.695v16z" /><path fill="#77C2F8" d="M1.957 11.606L.51 9.704c-.67-.882-.682-2.317-.029-3.199L4.699.807c.216-.292.597-.548.99-.69l-3.732 11.49zm3.4 4.13l2.64-8.122V16H6.302c-.295 0-.638-.102-.945-.263z" /></symbol>'});s.a.add(a);t.default=a},"BJBYEN/8":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("s0r7VfKc"),c=n("DOZCBSCZ"),l=(n("0Z5a6unZ"),function(e){function t(t){var n=e.call(this,t)||this;return n.stylePrefix="agile-sprint-list",n.setDropdownRef=function(e){n.dropdownRef=e},n.onConfirmSprintAction=function(){n.onUpdateSprint(n.state.sprintId),n.setState({modalOpened:!1,modalTitle:"",modalContents:""})},n.onCancelSprintAction=function(){n.setState({sprintId:n.props.sprintId,modalOpened:!1,modalTitle:"",modalContents:""})},n.onModalVisibleChange=function(e){n.setState({modalOpened:e})},n.onDropdownOpen=function(){"function"==typeof n.props.onDropdownOpen&&n.props.onDropdownOpen()},n.onSelectSprint=function(e){return function(){if(e!==n.props.sprintId){var t=n.getModalStatus(e),r=t.modalOpened,o=t.modalTitle,i=t.modalContents;n.setState({modalOpened:r,modalTitle:o,modalContents:i,sprintId:e}),r||(n.onUpdateSprint(e),n.dropdownRef.close())}else n.dropdownRef.close()}},n.onSelectWithSubtask=function(e){n.setState({isWithSubtask:e})},n.state={isLoading:!0,sprints:null,sprintId:n.props.sprintId,modalOpened:!1,modalTitle:"",modalContents:"",isWithSubtask:!!t.withSubtask},n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({sprintId:e.sprintId,modalTitle:"",modalContents:""})},t.prototype.componentDidMount=function(){var e=this;this.sprintSubscription$=a.default.getProjectSprints(this.props.projectId).changes().subscribe(function(t){e.setState({sprints:t,isLoading:!1})})},t.prototype.componentWillUnmount=function(){this.sprintSubscription$.unsubscribe()},t.prototype.getModalStatus=function(e){var t=this.getSprint(this.props.sprintId),n=this.getSprint(e),r=n&&"active"===n.status,o=t&&"active"===t.status,s=!1,a="",c="";return r?(s=!0,a=i.get("sprint.lists.modal.contents.move.in.sprints"),c=i.get("sprint.lists.modal.title.move.in.sprints")):o&&(s=!0,a=i.get("sprint.lists.modal.contents.move.out.sprints"),c=i.get("sprint.lists.modal.title.move.out.sprints")),{modalOpened:s,modalTitle:c,modalContents:a}},t.prototype.onUpdateSprint=function(e){var t=this.state.isWithSubtask;this.props.withSubtask?this.props.onUpdateSprint(e,t):this.props.onUpdateSprint(e)},t.prototype.renderWithSubtaskOption=function(){if(!this.props.withSubtask)return null;var e=this.stylePrefix+"-with-subtask";return o.createElement(o.Fragment,null,o.createElement(s.Separator,{full:!0}),o.createElement("div",{className:e},o.createElement(s.Checkbox,{checked:this.state.isWithSubtask,onChange:this.onSelectWithSubtask}),o.createElement("div",{className:"checkbox-with-subtask"},i.get("sprint.list.with.subtask.hint"))))},t.prototype.renderSprintList=function(){var e=this,t=this.state.sprints,n=this.props.sprintId,r=this.stylePrefix+"-menu-item",a=this.stylePrefix+"-menu-item-name",c=function(e){return e===n?o.createElement(s.Icon,{name:"tick"}):null},l=(t&&t.filter(function(e){return"complete"!==e.status})||[]).map(function(t){return o.createElement(s.MenuItem,{key:t._id,className:r,onClick:e.onSelectSprint(t._id)},o.createElement("div",{className:a},t.name),c(t._id))});return o.createElement(s.Menu,null,o.createElement(s.MenuItem,{className:r,onClick:this.onSelectSprint(null)},i.get("none"),c(null)),l,this.renderWithSubtaskOption())},t.prototype.renderDropdownContents=function(){return this.state.isLoading?o.createElement(c.a,null):this.renderSprintList()},t.prototype.getSprint=function(e){var t=this.state.sprints;return t&&t.find(function(t){return t._id===e})},t.prototype.renderModalContents=function(){return o.createElement("div",null,o.createElement("div",{className:"modal-contents"},this.state.modalContents),o.createElement("div",{className:"button-handlers"},o.createElement(s.TextButton,{onClick:this.onCancelSprintAction},i.get("cancel")),o.createElement(s.Button,{onClick:this.onConfirmSprintAction},i.get("confirm"))))},t.prototype.getTrigger=function(e){if(this.props.trigger)return this.props.trigger;if(e)return o.createElement("div",{className:"sprint-name"},e.name);var t=this.props.emptyPlaceholder||i.get("to.be.added");return o.createElement("div",{className:"sprint-name no-value"},t)},t.prototype.renderContents=function(){var e=this.getSprint(this.props.sprintId),t=this.getTrigger(e);if(!this.props.hasPermission)return o.createElement("div",{className:"sprint-no-permission"},t);if(!this.props.trigger&&e&&"complete"===e.status)return o.createElement(s.Tooltip,{title:i.get("sprint.list.is.completed.no.alter")},o.createElement("div",{className:"sprint-completed"},e.name));var n=this.stylePrefix+"-dropdown",r=this.stylePrefix+"-modal",a=this.props.nested,c=void 0===a||a;return o.createElement("div",{className:"sprint-list-container"},o.createElement(s.Dropdown,{className:n,ref:this.setDropdownRef,content:this.renderDropdownContents(),persistence:!0,placement:"bottomLeft",nested:c,onOpen:this.onDropdownOpen},o.createElement("div",{className:"sprint-has-permission"},t)),o.createElement(s.Modal,{className:r,titleCls:"modal-title",title:this.state.modalTitle,opened:this.state.modalOpened,onVisibleChange:this.onModalVisibleChange,width:500},this.renderModalContents()))},t.prototype.render=function(){var e=""+this.stylePrefix,t=this.state.isLoading?o.createElement("div",{className:"empty-placeholder"}):this.renderContents();return o.createElement("div",{className:e},t)},t.defaultProps={withSubtask:!0},t}(o.PureComponent))},BJWKoQqY:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w;n("9u4auf0a"),s=n("vmWJWrVe"),a=n("a+N5u/Cl"),o=n("77NnVLwu"),r=n("0FRv5rrl"),i=n("TAuajgAY"),u=n("2qRnoGmE"),k=n("WMI0/nUp"),f=k.fetchMyPlugins,v=k.fetchProjectPlugins,b=k.fetchProjectPowerUps,g=k.fetchOrganizationPlugins,l=k.clearFetchProjectPluginsCache,w=n("gh8QIhMV").throwError,t.setup=_=function(e,t){return n.e(5).then(function(r){var o,i,s;if(s=n("H3uka4wv"),i=a.find(s,function(t){var n;return n=t.ViewConstructor.Constructor||t.ViewConstructor,e instanceof n}))switch(o=i.PluginConstructor,i.type){case"my":return p(e,o);case"project":return h(e,t._projectId,o,t);case"project-powerups":return m(e,t._projectId,o);case"organization":return d(e,t._organizationId,o)}}.bind(null,n)).catch(n.oe)},c=function(e,t){var n;return n=Math.random(),e[t]=n,{field:t,token:n}},y=function(e,t){return e.token!==t[e.field]},h=function(e,t,n,r){var s;return s=c(e,"_createProjectPlugin"),o.fetch(t,{silentError:!0,success:function(o){return l(t),v(t)(function(c,l){var u,p,d,h;if(c)w(c);else if(null!=l&&l.resetSoft(),d="taskflow"===(null!=o?o.get("normalType"):void 0)?"taskflow":"common",p=null!=l?l.filter(function(e){return!e.get("suitTypes")||!e.get("suitTypes").length||a.contains(e.get("suitTypes"),d)}):void 0,u=new i(p,{_projectId:t,bindByMatrix:!0}),!y(s,e)&&e.$el)return null!=(h=e._pluginView)&&h.remove(),e._pluginView=e.requestSubView(n,{view:e,collection:u,options:r})})}})},m=function(e,t,n){return o.fetch(t,{silentError:!0,success:function(r){return b(t)(function(t,r){var o;if(e.$el&&!t)return null!=(o=e._pluginView)&&o.remove(),e._pluginView=e.requestSubView(n,{view:e,collection:r})})}})},d=function(e,t,n){return r.fetch(t,{silentError:!0,success:function(r){if(!(r.getRoleScope()<0))return g(t)(function(t,r){var o;if(e.$el&&!t)return null!=(o=e._pluginView)&&o.remove(),e._pluginView=e.requestSubView(n,{view:e,collection:r})})}})},p=function(e,t){return f()(function(n,r){var o;if(e.$el&&!n)return null!=(o=e._pluginView)&&o.remove(),e._pluginView=e.requestSubView(t,{view:e,collection:r})})},u.FEATURES.plugins&&(s.prototype.setupPlugins=function(e){return _(this,e)})},BLZfz376:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;a=n("a+N5u/Cl"),r=n("VuB9cZyl"),s=n("3eMzznN/"),o=n("wKLGLwqK"),e.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.model=o,t.prototype.name="projecttags",t.prototype.getSortedOrganizationProjectTagModelsByPos=function(e){return a.chain(this.getOrganizationProjectTagModels(e)).sortBy(function(e){return e.get("pos")}).value()},t.prototype.getOrganizationProjectTagModels=function(e){return e?a.chain(this.models).filter(function(t){return t.get("_organizationId")===e}).value():[]},t.prototype.hasProjectId=function(e){return a.chain(this.models).some(function(t){return t.hasProjectId(e)}).value()},t}(),i.fetchByOrganizationId=function(e){return new Promise(function(t,n){return i.fetch(e,{url:"organizations/"+e+"/projecttags",error:n,success:t})})},i.fetchByProjectId=function(e,t){return s.warehouse.resolveFetch(i,t,{url:"organizations/"+e+"/projects/"+t+"/projecttags"}).then(function(e){return e.resetSoft(),e})}},BTjUFA4g:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;a=n("sa1Ed382"),s=n("vmWJWrVe"),i=n("4bWDEe5E"),r=n("fROYW9B/").ConfigComponent,o=n("oEzVJ1gN"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="ScenarioFieldConfigView",t.prototype.initialize=function(e){return this.projectModel=e.projectModel,this.showTextHint=e.showTextHint,this.popupNested=e.popupNested,this._parentModelConfigId=e._parentModelConfigId,this.hasPermission=e.hasPermission,this.isSubtask=e.isSubtask,this.scenarioFieldConfigsCollection=null,this.shouldDisplayConfig=null,this.load().then((t=this,function(){if(t.el)return t.listen(),t.render()}));var t},t.prototype.listen=function(){return this.listenTo(this.scenarioFieldConfigsCollection,"add change remove destroy",this.render)},t.prototype.load=function(){return new Promise((e=this,function(t,n){var r;return r=i.genCacheId(e.projectModel.id,e.boundToObjectType),i.fetch(r,{attrs:{withTaskflowstatus:e.projectModel.isTaskflowEnabled()},boundToObjectType:e.boundToObjectType,success:function(n){return e.scenarioFieldConfigsCollection=n,t()},error:n})}));var e},t.prototype.render=function(){return this.setDefaultConfig(),null==this.hasPermission&&(this.hasPermission=this.projectModel.hasPermission("scenariofieldconfig.edit")&&this.projectModel.get("_organizationId")),this.renderReact()},t.prototype.renderReact=function(){if(this.shouldDisplayConfig=this.displayConfig(),this.shouldDisplayConfig)return this.$el.hasClass("display-config")||this.$el.addClass("display-config"),this.requestReactView(this.el,r,{defaultConfig:this.defaultConfig,scenarioFieldConfigs:this.scenarioFieldConfigsCollection.toJSON(),boundToObjectType:this.boundToObjectType,showTextHint:this.showTextHint,onSelectConfig:this.setConfig.bind(this),onRequestConfigView:this.requestApplicationFieldsConfig.bind(this),popupNested:this.popupNested,hasPermission:!!this.hasPermission,gtaHandler:this.gtaHandler.bind(this)})},t.prototype.requestApplicationFieldsConfig=function(){var e;return e="task"===this.boundToObjectType?"taskFieldConfig":"eventFieldConfig",a.APP.requestSubView(o,{projectModel:this.projectModel,tabName:e})},t.prototype.displayConfig=function(){var e,t,n,r;return t=this.projectModel.get("_organizationId"),e=(null!=(n=this.scenarioFieldConfigsCollection)?n.length:void 0)>1||(null!=(r=this.scenarioFieldConfigsCollection.at(0))?r.get("displayed"):void 0),t&&e},t.prototype.setConfig=function(e){return this.trigger("setConfig",e)},t}()},BTreC5uG:function(e,t){e.exports=function(e){var t='<div class="modal-content col-flex"> <header class="modal-header flex-horiz flex-vcenter"> <div class="title"> <span>'+tb_i18n.get("link.add")+'</span> </div> <div class="search-wrap"> <span class="icon icon-search"></span> <input class="form-control search-input" placeholder="'+e.workspaceName+'" /> </div> <a class="icon icon-remove cancel-handler"></a> </header> <section class="flex-horiz modal-body flex-stretch"> <ul class="flex-static object-picker-menu thin-scroll"> ',n=e.objectTypeNavs;if(n)for(var r,o=-1,i=n.length-1;o<i;)t+=' <li> <a class="object-nav" data-type="'+(r=n[o+=1]).type+"\" data-gta=\"{ action: 'add link', type: '"+r.type+'\' }"> <span class="icon '+r.icon+'"></span> <span>'+r.title+"</span> </a> </li> ";return t+=' <li class="integration-item-line"> <div class="line"></div> </li> </ul> <div class="flex-fill object-picker-body"></div> </section> <footer class="modal-footer flex-horiz"> ',e.isEnableLinkInput?t+=' <div class="object-picker__link flex-fill"> <span class="icon icon-link"></span> <a class="object-picker__link__trigger">'+tb_i18n.get("add.related.things.through.link")+'</a> <input class="object-picker__link__input is-hidden" placeholder="'+tb_i18n.get("object.picker.link.input.placeholder")+"\" type='text' /> </div> ":t+=' <p class="object-picker-guide flex-fill"> '+tb_i18n.get("object.picker.link.guide.content")+' <a class="guide-trigger link-add-handler">'+tb_i18n.get("object.picker.link.guide.more")+"</a> </p> ",t+=' <button class="confirm-handler btn btn-primary flex-static">'+tb_i18n.get("confirm")+"</button> </footer></div>"}},BUABmAqa:function(e,t){e.exports=function(e){return'<div class="search-placeholder-wrap muted"> <div> <p> <span class="icon icon-search-warning"></span> </p> <p class="search-placeholder-content">'+tb_i18n.get("search.placeholder")+"</p> </div></div>"}},"BVXu+viu":function(e,t,n){var r,o,i,s={}.hasOwnProperty;o=n("a+N5u/Cl"),i=n("sa1Ed382"),r=n("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="entry",t.prototype.urlRoot="entries",t.prototype.defaults={objectType:"entry"},t.prototype.listen=function(){if(!this.listenedLock&&this.id)return this.listenedLock=!0,this.on("change:visible",function(e){var t;if(!e.checkIsVisible())return null!=(t=e.collection)?t.remove(e):void 0}),t.__super__.listen.apply(this,arguments)},t.prototype.parse=function(e){return o.extend({_creatorId:i.user.id,content:""},this.toJSON(),e)},t.prototype.approve=function(e){var t,n;return e||(e={}),t=e.success,e.success=(n=this,function(){return n.set("status","approved"),"function"==typeof t?t():void 0}),e.url=this.url()+"/approval",e.attrs={},this.sync("create",this,e),this},t.prototype.revoke=function(e){var t,n;return e||(e={}),t=e.success,e.success=(n=this,function(){return n.set("status","confirmed"),"function"==typeof t?t():void 0}),e.url=this.url()+"/approval",e.attrs={},this.sync("delete",this,e),this},t}()},BWH8qnKJ:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=99},Bav6P9y8:function(e,t,n){var r,o,i={}.hasOwnProperty;o=n("vmWJWrVe"),r=n("jjkLIigZ"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="ProjectVisibilityView",t.prototype.className="activity-panel-visibility",t.prototype.events={"click .visibility-menu li":"selectVisibility"},t.prototype.initialize=function(e){return this.projectModel=e.projectModel,this.selected=e.selected,this.select=e.select,this.isOrganization=e.isOrganization,this.renderBasic(),this},t.prototype.renderBasic=function(){switch(this.$el.html(r({isOrganization:this.isOrganization})),this.selectedVisibility=this.selected||this.projectModel.get("visibility")||"project","all"===this.selectVisibility&&(this.selectVisibility="project"),this.selectedVisibility){case"project":this.$(".visibility-project").addClass("selected");break;case"organization":this.$(".visibility-organization").addClass("selected")}return this},t.prototype.selectVisibility=function(e){var t;return t=$(e.currentTarget),this.$(".visibility-menu li").removeClass("selected"),t.addClass("selected"),this.selectedVisibility=t.data("id"),this.select(this.selectedVisibility),this},t}()},BbTZcZs0:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="<header> "+r(e.title)+"</header><ul> ",i=e.items;if(i)for(var s,a=-1,c=i.length-1;a<c;){o+=' <li class="link" data-id="'+(s=i[a+=1])._id+'" data-linkedid="'+s._linkedId+'"> <a class="link-head" href="'+r(s.data.url)+'" target="_blank"> <div class="link-icon-wrap git-integration-icon"> <span class="icon icon-git-fill"></span> </div> <div class="link-icon-wrap"> ',"opened"===s.data.action||"reopen"===s.data.action?o+=' <span class="icon icon-git-pull-request avatar"></span> ':"closed"===s.data.action?o+=' <span class="icon icon-git-pull-request git-closed avatar"></span> ':"merged"===s.data.action&&(o+=' <span class="icon icon-git-merge avatar"></span> '),o+=' </div> <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main"> ';var l=s.data.title;o+=' <span class="title-name" title="'+r(l)+'">'+r(l)+"</span> </div> ";var u=s.createTime,p=u.dateString+" "+u.timeFormatString;o+=' <div class="link-title-header-rest" title="'+r(p)+'"> '+r(p)+' </div> </div> <div class="link-title-footer">'+s.data.content+'</div> </div> </a> <a class="link-menu-handler icon icon-chevron-down" data-id="'+s._id+'"></a> </li> '}return o+="</ul>"}},"Bg/z6jLm":function(e,t,n){e.exports=n.p+"images/w_xianhua@2x.3fc4de87.png"},"BhpaI0l/":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("DlFnP/8K"),l=n.n(c),u=n("GESwhXbR"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.props.onDelete()},t}return r.d(t,e),t.prototype.render=function(){return i.a.createElement("div",{className:l.a.archive},i.a.createElement("p",null,a.a.get("testcase.menu.delete.description")),i.a.createElement(u.Button,{danger:!0,onClick:this.handleClick},a.a.get("testcase.menu.submit")))},t}(i.a.PureComponent),d=n("vEhZLygU"),h=n("v1FzVxvL"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getTestgroupName=function(e){return e?e.isRoot?a.a.get("testgroup.selector.testgroup.name"):e.name:a.a.get("testgroup.selector.testgroup.unset.name")},t}return r.d(t,e),t.prototype.renderTestplan=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:l.a["selector-section"]},i.a.createElement("span",{className:l.a["selector-section-label"]},a.a.get("testcase.menu.copy.testplan")),i.a.createElement(d.a,{testplans:this.props.testplans,_testplanId:this.props.testplanId,onSelect:this.props.onTestplanChange,onDestroy:this.props.onDestroyTestplanSelector})),i.a.createElement(u.Separator,null))},t.prototype.renderTestgroup=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:l.a["selector-section"]},i.a.createElement("span",{className:l.a["selector-section-label"]},a.a.get("testgroup.selector.testgroup.label")),i.a.createElement(h.a,{nested:!0,testplanId:this.props.testplanId,testgroup:this.props.testgroup||null,onSetTestgroup:this.props.onTestgroupChange},i.a.createElement(u.TextButton,null,i.a.createElement("span",{className:l.a["selector-name"]},this.getTestgroupName(this.props.testgroup)),i.a.createElement(u.Icon,{size:12,name:"chevron-down"})))),i.a.createElement(u.Separator,null))},t.prototype.render=function(){return i.a.createElement(i.a.Fragment,null,this.renderTestplan(),this.renderTestgroup())},t}(i.a.PureComponent),f=n("TCxkpEjv"),g=n("PVLVtUMG"),v=function(e){function t(t){var n=e.call(this,t)||this;return n.onTestplanChange=function(e){e!==n.state.testplanId&&n.setState({testplanId:e,testgroup:void 0})},n.onFlowstatusChange=function(e){n.setState({flowstatusId:e})},n.onTestgroupChange=function(e){n.setState({testgroup:e})},n.onForkClick=function(){n.props.onFork(n.state.testplanId,n.state.testgroup._id,n.state.flowstatusId)},n.onDestroyTestplanSelector=function(){n.setState({testplanId:n.props.testplanId})},n.state={testplanId:n.props.testplanId},n}return r.d(t,e),t.prototype.renderLabel=function(e){return i.a.createElement(g.StatusLabel,{kind:e.kind,title:e.name,fixedWidth:!0})},t.prototype.renderFlowstatusSection=function(){var e=this,t=this.props.flowstatuses.find(function(t){return t._id===e.state.flowstatusId}),n=i.a.createElement(u.TextButton,null,i.a.createElement("span",null,t?this.renderLabel(t):a.a.get("task.locator.status.selector.trigger.placeholder")),i.a.createElement(u.Icon,{name:"chevron-down",size:12}));return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:l.a["selector-section"]},i.a.createElement("span",{className:l.a["selector-section-label"]},a.a.get("testgroup.selector.flowstatus.label")),i.a.createElement(f.a,{taskflowStatuses:this.props.flowstatuses,selectedStatus:t,onSelect:this.onFlowstatusChange,trigger:n})),i.a.createElement(u.Separator,null))},t.prototype.renderButton=function(){var e=!(this.state.testplanId&&this.state.testgroup&&this.state.flowstatusId);return i.a.createElement(u.Button,{onClick:this.onForkClick,disabled:e},a.a.get("testcase.menu.submit"))},t.prototype.render=function(){return i.a.createElement("div",{className:l.a.copy},i.a.createElement(m,{testplans:this.props.testplans,testplanId:this.state.testplanId,testgroup:this.state.testgroup,onTestgroupChange:this.onTestgroupChange,onTestplanChange:this.onTestplanChange,onDestroyTestplanSelector:this.onDestroyTestplanSelector}),this.renderFlowstatusSection(),this.renderButton())},t}(i.a.PureComponent),b=n("sa1Ed382"),y=n("90U+kJWN"),k=n("1gEXmjU5"),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.contextId={_projectId:t.props.projectId,_organizationId:t.props.organizationId},t.onClearExecutor=function(){t.onSelect(null)},t.onSelect=function(e){t.props.onChange({executorId:e})},t}return r.d(t,e),t.prototype.render=function(){var e=this.props.membersCollection?this.props.membersCollection.toJSON():null,t=this.props.executorId?Object(y.getExecutor)(this.props.executorId,e,null):void 0;return i.a.createElement(k.TaskExecutor,{nested:!0,executor:t,contextId:this.contextId,isExperiencedUser:b.user.isExperiencedUser(),inviteShowed:!1,onSelect:this.onSelect,disabled:!1,selectedTitle:a.a.get("testcase.executor.title"),onClickRemove:this.onClearExecutor,onOpen:this.props.onOpen},this.props.children)},t}(i.a.PureComponent),w=n("a+N5u/Cl"),C=n("oBMTqYJ0"),S=function(e,t){return w.chain(e).filter(function(e){return-1===e.rejectStatusIds.indexOf(t)}).pluck("_id").value()},E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderContent=function(){var e=this.props.flowstatuses,t=w.chain(this.props.testcases).pluck("_flowstatusId").uniq().value(),n=[];n=1===t.length?S(e,t[0]):w.intersection.apply(w,r.h(t.map(function(t){return S(e,t)})));var o=e.filter(function(e){return n.indexOf(e._id)>=0});return i.a.createElement(C.a,{data:o,type:"testcase",onSelect:this.props.onChange})},t.prototype.renderTrigger=function(){return this.props.children},t.prototype.render=function(){return this.props.hasPermission?i.a.createElement(u.Dropdown,{content:this.renderContent(),onOpen:this.props.onOpen},this.renderTrigger()):this.renderTrigger()},t}(i.a.PureComponent),T=function(e){function t(t){var n=e.call(this,t)||this;return n.onTestplanChange=function(e){e!==n.state.testplanId&&n.setState({testplanId:e,testgroup:void 0})},n.onMoveClick=function(){n.props.onMove(n.state.testplanId,n.state.testgroup._id)},n.onDestroyTestplanSelector=function(){n.setState({testplanId:n.props.testplanId})},n.onTestgroupChange=function(e){n.setState({testgroup:e})},n.state={testplanId:n.props.testplanId},n}return r.d(t,e),t.prototype.render=function(){return i.a.createElement("div",{className:l.a.testplan},i.a.createElement(m,{testplans:this.props.testplans,testplanId:this.state.testplanId,testgroup:this.state.testgroup,onTestgroupChange:this.onTestgroupChange,onTestplanChange:this.onTestplanChange,onDestroyTestplanSelector:this.onDestroyTestplanSelector}),i.a.createElement(u.Button,{onClick:this.onMoveClick,disabled:!this.state.testgroup},a.a.get("testcase.menu.submit")))},t}(i.a.PureComponent),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderPriorityItems=function(){var e=this,t=[s.get("testcase.scenariofield.priority.unset"),s.get("testcase.scenariofield.priority.p0"),s.get("testcase.scenariofield.priority.p1"),s.get("testcase.scenariofield.priority.p2"),s.get("testcase.scenariofield.priority.p3"),s.get("testcase.scenariofield.priority.p4"),s.get("testcase.scenariofield.priority.p5")].map(function(t,n){return i.a.createElement(u.MenuItem,{key:n,onClick:function(){e.props.onChange(n-1)}},t)});return i.a.createElement(u.Menu,null,t)},t.prototype.render=function(){return i.a.createElement(u.Dropdown,{onOpen:this.props.onOpen,content:this.renderPriorityItems()},this.props.children)},t}(i.a.PureComponent);n.d(t,"a",function(){return p}),n.d(t,"b",function(){return v}),n.d(t,"c",function(){return _}),n.d(t,"d",function(){return E}),n.d(t,"f",function(){return T}),n.d(t,"e",function(){return I})},"Bq/6r0kd":function(e,t,n){},BsTK5jZO:function(e,t,n){"use strict";n.r(t);var r=n("Qa3q4aD4");n.d(t,"ExecutorInput",function(){return r});var o=n("rBqbN9/w");n.d(t,"InvolverInput",function(){return o});var i=n("pdCqEcaI");n.d(t,"Executor",function(){return i.Executor}),n.d(t,"Involver",function(){return i.Involver}),n.d(t,"ContextId",function(){return i.ContextId}),n.d(t,"getContextId",function(){return i.g}),n.d(t,"UserSnippet",function(){return i.UserSnippet})},ByToORLB:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR"),l=n("Z71XTHUQ"),u=function(e){var t=e.className,n=e.kind,s=e.size,u=e.muted,p=e.disabled,d=e.locked,h=r.g(e,["className","kind","size","muted","disabled","locked"]),m=l["status-todobox-taskflow"],f=a()(m,t,n,s,{muted:u,disabled:p,locked:d}),g="end"===n?"checkbox-checked":"checkbox",v=Object(o.useCallback)(function(t){e.muted||(e.disabled||e.locked?t.stopPropagation():e.onClick&&e.onClick(t))},[e.muted,e.disabled,e.locked,e.onClick]);return i.a.createElement("span",r.a({},h,{className:f,onClick:v,"data-role":"status-todobox-taskflow"}),i.a.createElement("span",{className:"icon-box"},i.a.createElement(c.Icon,{name:g,className:"icon"}),i.a.createElement(c.Icon,{name:"triangle-down-s",className:"icon"})))};u.defaultProps={size:"middle"}},BzGHEctR:function(e,t,n){"use strict";n.r(t);var r=n("a+N5u/Cl"),o=n("uHRdHWpl"),i=n("nDsjpj50"),s=n("tLZJUYWX"),a=n("2qRnoGmE"),c=n.n(a),l=[{get name(){return s.get("labs.name.dashboard")},abtestName:"dashboard",forceRefresh:!1,get description(){return s.get("labs.description.dashboard")},screenshots:[c.a.DN_SITE_URL+"/videos/onboarding/lab-screenshots-dashboard@2x.png"],useOnboarding:!0,get onboardingTitle(){return s.get("labs.onboarding.title.dashboard")},get onboardingDescription(){return s.get("labs.onboarding.description.dashboard")},onboardingIllustration:[c.a.DN_SITE_URL+"/videos/onboarding/lab-onboarding-dashboard@2x.png"]}],u=n("sa1Ed382"),p=n("bZr3G77e"),d=function(){function e(){return this.onlineTests=[],this.modalOpened=!1,this.notify$=new i.BehaviorSubject(1),this}return e.prototype.initialize=function(){this.onlineTests=this.getOnlineTests(),this.listenABTest(),this.listenLanguage()},e.prototype.flipTest=function(e,t){var n=r.findWhere(this.onlineTests,{abtestName:e});return n?(void 0===t&&(t=n.enabled?"A":"B"),p.put("labs/features",{name:e,status:t}).then(function(){return u.ab.changeTest("labs",e,t),!n.enabled})):Promise.reject("Test not online")},e.prototype.setModalStatus=function(e){this.modalOpened=e,this.notify$.next(1)},e.prototype.checkTest=function(e){var t=r.findWhere(this.onlineTests,{abtestName:e});return!(!t||!t.enabled)},e.prototype.checkPersonalSettingsOpened=function(){return this.modalOpened},e.prototype.listenABTest=function(){var e=this;u.ab.notify$.subscribe(function(){var t=e.getOnlineTests();r.isEqual(e.onlineTests,t)||(e.onlineTests=t,e.notify$.next(1))})},e.prototype.listenLanguage=function(){var e=this;u.PREFERENCE.getLanguage$().subscribe(function(){var t=e.getOnlineTests();r.isEqual(e.onlineTests,t)||(e.onlineTests=t,e.notify$.next(1))})},e.prototype.getOnlineTests=function(){return u.ab.inCohort("labs")?l.filter(function(e){return u.ab.testExist("labs",e.abtestName)}).filter(function(e){return!e.lang||-1!==e.lang.indexOf(u.PREFERENCE.getLanguage())}).filter(function(e){return!e.lock||"offline"!==e.lock()}).filter(function(e){return!e.downTime||Object(o.default)().isBefore(e.downTime)}).map(function(e){var t=e.abtestName,n=e.forceRefresh,r=e.screenshots,o=e.downTime,i=e.useOnboarding,s=e.onboardingIllustration,a=!1,c=u.ab.hasTest("labs",t,"B");if(e.lock){var l=e.lock();"free"!==l&&(a=!0,c="enabled"===l)}return{get name(){return e.name},get description(){return e.description},get onboardingTitle(){return e.onboardingTitle},get onboardingDescription(){return e.onboardingDescription},locked:a,enabled:c,abtestName:t,forceRefresh:n,screenshots:r,useOnboarding:i,onboardingIllustration:s,downTime:o}}):[]},e}(),h=new d;n.d(t,"LabsTest",function(){}),n.d(t,"Labs",function(){return d}),n.d(t,"labs",function(){return h})},C04qO9Zz:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";e.hasHeader&&(o+=" <header> "+r(e.title)+" </header>");var i=e.items;if(i)for(var s,a=-1,c=i.length-1;a<c;){if(s=i[a+=1],o+=' <li class="link',e.hasHeader||(o+=" object-picker"),o+='" data-id="'+r(s._id)+'" data-linkedid="'+r(s._linkedId)+'" >  ',e.hasHeader){if(o+=' <a class="link-head" href="'+r(s.data.src)+'" target="_blank">  ',e.hasHeader&&(o+=' <div class="link-icon-wrap"> <span class="icon icon-weibo"></span> </div> '),o+=' <div class="link-icon-wrap"> <span class="avatar img-circle img-24" style="background-image:url('+r(s.data.user.avatar_hd)+')" onclick="window.open(\'http://weibo.com/'+r(s.data.user.id)+'\')" ></span></div> <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main">  <span class="title-name clickable" onclick="window.open(\'http://weibo.com/'+r(s.data.user.id)+"')\" > "+r(s.data.user.name)+" </span> </div> ",e.hasHeader)o+="  ",o+=' <div class="link-title-header-rest" title="'+r(u=(l=s.createTime).dateString+" "+l.timeFormatString)+'"> '+r(u)+" </div> ";o+=' </div> <div class="link-title-footer">  <p>'+r(s.data.text)+"</p> ",s.data.pic_urls&&s.data.pic_urls.length>0&&(o+=" <p>pic.weibo.com/"+r(s.data.id)+"</p> "),o+=" </div> </div> ",s.data.retweeted_status&&s.data.retweeted_status.user&&(o+=' <div class="weibo-retweet"> <p class="weibo-retweet-name"> @'+r(s.data.retweeted_status.user.name)+" </p> <p>"+r(s.data.retweeted_status.text)+"</p> ",s.data.retweeted_status.pic_urls&&s.data.retweeted_status.pic_urls.length>0&&(o+=" <p>pic.weibo.com/"+r(s.data.id)+"</p> "),o+=" </div> "),o+=" </a> "}else{var l,u;if(o+=' <div class="link-head"> ',e.hasHeader&&(o+=' <div class="link-icon-wrap"> <span class="icon icon-weibo"></span> </div> '),o+=' <div class="link-icon-wrap"> <span class="avatar img-circle img-24" style="background-image:url('+r(s.data.user.avatar_hd)+')" onclick="window.open(\'http://weibo.com/'+r(s.data.user.id)+'\')" ></span></div> <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main">  <span class="title-name clickable" onclick="window.open(\'http://weibo.com/'+r(s.data.user.id)+"')\" > "+r(s.data.user.name)+" </span> </div> ",e.hasHeader)o+="  ",o+=' <div class="link-title-header-rest" title="'+r(u=(l=s.createTime).dateString+" "+l.timeFormatString)+'"> '+r(u)+" </div> ";o+=' </div> <div class="link-title-footer">  <p>'+r(s.data.text)+"</p> ",s.data.pic_urls&&s.data.pic_urls.length>0&&(o+=" <p>pic.weibo.com/"+r(s.data.id)+"</p> "),o+=" </div> </div> ",s.data.retweeted_status&&s.data.retweeted_status.user&&(o+=' <div class="weibo-retweet"> <p class="weibo-retweet-name"> @'+r(s.data.retweeted_status.user.name)+" </p> <p>"+r(s.data.retweeted_status.text)+"</p> ",s.data.retweeted_status.pic_urls&&s.data.retweeted_status.pic_urls.length>0&&(o+=" <p>pic.weibo.com/"+r(s.data.id)+"</p> "),o+=" </div> "),o+="</div> "}o+=" ",s.objectlinkDel&&(o+=' <a class="link-menu-handler icon icon-chevron-down" data-id="'+r(s._id)+'" ></a> '),o+=" </li>"}return o}},C5FwwdFb:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("q1tIBJhx"),o=n.n(r),i=n("tLZJUYWX"),s=n.n(i),a=n("GESwhXbR"),c=(n("sIfICzuw"),function(e){var t=function(t){return function(){return e.onClickStoryPoint(t)}},n=function(n,r){var i=null===n?s.a.get("task.story.point.none"):n;return o.a.createElement(a.MenuItem,{key:r,onClick:t(n)},i,function(t){return t===e.storyPoint}(n)&&o.a.createElement(a.Icon,{name:"tick"}))};return o.a.createElement(a.Menu,{className:"task-story-menu"},l.map(function(e,t){return n(e,t)}))}),l=[null,"0","0.5","1","2","3","5","8","13","20","40","100"]},"C70r+RA2":function(e,t){e.exports=function(e){return'<li class="no-task-placeholder"> <span class="muted">'+tb_i18n.get("tasks.no.task")+"</span></li>"}},C9IiAhE3:function(e,t,n){var r,o,i,s,a,c,l,u,p,d={}.hasOwnProperty;u=n("a+N5u/Cl"),p=n("sa1Ed382"),l=n("vmWJWrVe"),s=n("YdqH4v7N"),i=n("B6lynyzv"),r=n("Cjw9ISmG"),o=n("9qlUcSCG"),a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,l),t.prototype.viewName="ScrumSmartView",t.prototype.className="scrum-smart-view modal-dialog flex-vert",t.prototype.events={"click .task":"gtaEvent"},t.prototype.initialize=function(e){return!(null==e||!e._projectId)&&(this.options=e,this._projectId=e._projectId,this.tasksCollection=null,this.queryType="smart",this.renderBasic(),this.showLoadingIndicator(this.$content),this.load((t=this,function(){if(t.$el)return t.hideLoadingIndicator(),t.renderTasks(),t.renderInvisible(),t.initView(),t.listen()})),this);var t},t.prototype.initView=function(){return this.setupScroll(this.$content),this.setupLoadMore(10)},t.prototype.listen=function(){return this.listenTo(this.tasksCollection,"change:dueDate",this.renderTasks),this.listenTo(this.tasksCollection,"add remove destroy",this.renderInvisible),this.listenTo(this.tasksCollection,"reset change:isVisible",function(){return this.renderTasks(),this.renderInvisible()})},t.prototype.renderBasic=function(){return this.$el.html(r({name:this.getViewName()})),this.$content=this.$(".modal-body"),this.$tasklist=this.$(".task-list-wrapper"),this.$invisible=this.$(".invisible-wrapper")},t.prototype.renderTasks=function(){var e,t;if(this.tasksCollection.sort(),e=this.requestSubView(c,{isInBoard:!0,isPrepend:!1,tasksCollection:this.tasksCollection,onTaskTagClick:(t=this,function(){var e;return"function"==typeof(null!=(e=t.parentView)?e.close:void 0)?t.parentView.close():t.$el.hide()})}),this.$tasklist.html(e.$el),this.tasksCollection.length&&!this.tasksCollection.hasMore)return this.showEndPoint(this.$content)},t.prototype.renderInvisible=function(){var e,t,n,r;return(null!=(t=(e=this.tasksCollection.groupBy(function(e){return e.checkIsVisible()})).true)?t.length:void 0)?this.$invisible.html(o({invisibleCount:(null!=(n=e.false)?n.length:void 0)||0})):(this.$invisible.empty(),null!=(r=this.$endPoint)?r.remove():void 0)},t.prototype.getViewName=function(){return""},t.prototype.getViewId=function(){return""},t.prototype.getRenderTitle=function(){return""},t.prototype.getQueryType=function(){return"smart"},t.prototype.getQueryAttrs=function(){return{}},t.prototype.getQueryId=function(e){return this._projectId+"_"+e},t.prototype.gtaEvent=function(){return p.gta.event({action:"open detail",type:"task",control:this.smartType+" task"})},t.prototype.load=function(e){var t,n,r;return this.queryAttrs=u.extend(this.getQueryAttrs(),{_projectId:this._projectId,withTasklist:!0,withTags:!0,withInvolves:!0}),n=this.getQueryType(),t=this.getQueryId(n),i.fetch(t,{_projectId:this._projectId,queryType:n,_executorId:"excutor"===n?this.getQueryAttrs()._executorId:void 0,attrs:this.queryAttrs,success:(r=this,function(t){return r.tasksCollection=t,"function"==typeof e?e():void 0})}),this},t.prototype.loadMore=function(e){var t;if(this.$el)return this.tasksCollection.loadMore({attrs:this.queryAttrs,beforeSend:(t=this,function(){return t.showLoadingIndicator(t.$content)}),success:function(t){return function(n,r){if(t.$el)return t.hideLoadingIndicator({animated:!0}),t.tasksCollection.hasMore?"function"==typeof e?e():void 0:t.showEndPoint(t.$content)}}(this)})},t}(),u.extend(a.prototype,s),e.exports=a,c=n("mHz0QvBA")},"CA+X8ptj":function(e,t,n){"use strict";n.r(t),n.d(t,"ZhihuLinkComponent",function(){return u});var r=n("q1tIBJhx"),o=n.n(r),i=n("LvDlAkAJ"),s=n.n(i),a=n("tLZJUYWX"),c=n.n(a),l=n("AGtPin/S"),u=function(e){var t=e.items,n=s.a.filter(t,function(e){return"zhihu-question"===e.data.subType}),r=s.a.filter(t,function(e){return"zhihu-article"===e.data.subType}),i=n.length>0&&o.a.createElement(l.WebLinkComponent,{items:n,linkTitle:c.a.get("link.zhihu.question.title")}),a=r.length>0&&o.a.createElement(l.WebLinkComponent,{items:r,linkTitle:c.a.get("link.zhihu.article.title")});return o.a.createElement(o.a.Fragment,null,i,a)}},"CG/Nb0sI":function(e,t,n){},CKTFwJxk:function(e,t,n){e.exports=function(e){var t="",r=n("2qRnoGmE"),o=r.FEATURES,i=tb_i18n.getLanguage();(t+='<div class="help-container"> <div class="dynamic-item-container"></div> <div class="fixed-item-container"> \x3c!-- 视频中心 --\x3e ',t+=" \x3c!-- 在线支持 --\x3e \x3c!-- 在“公有云”环境才显示，在“私有部署”环境不显示 --\x3e ",o.helpEntryOnlineSupport&&(t+=' <a class="help-item online-service-handler" data-gta="{action: \'chat with us\'}" > <span class="icon icon-headset"></span> <span class="item-name">'+tb_i18n.get("submit.ticket.chat.with.us")+"</span> </a> "),t+=" \x3c!-- 下载应用 --\x3e \x3c!-- helpEntryDownloadAppSupport = false 为 下载App 关闭，显示下载应用连接按钮 --\x3e ",o.userMenu_app&&!o.helpEntryDownloadAppSupport&&(t+=' <a href="/apps" target="_blank" class="help-item download-app" data-gta="{action: \'enter app download\'}" > <span class="icon icon-circle-arrow-down-o"></span> <span class="item-name">'+tb_i18n.get("app.download")+"</span> </a> "),t+=" \x3c!-- 私有部署下载App --\x3e \x3c!-- helpEntryDownloadAppSupport = true 为 下载App 开启，显示下载App弹窗按钮 --\x3e ",o.userMenu_app&&o.helpEntryDownloadAppSupport&&(t+=' <a class="help-item private-download" data-gta="{action: \'open app download\'}" > <span class="icon icon-circle-arrow-down-o"></span> <span class="item-name">'+tb_i18n.get("download.app")+"</span> </a> "),t+=" \x3c!-- 更新日志 --\x3e ",~i.indexOf("zh")&&o.helpEntryUpdateLog)&&(t+=" ",t+=' <a href="'+("string"==typeof o.helpEntryUpdateLog?o.helpEntryUpdateLog:r.BLOG_URL+"/updates")+'" target="_blank" class="help-item" data-gta="{action: \'view online class\'}" > <span class="icon icon-rich-text"></span> <span class="item-name">'+tb_i18n.get("submit.ticket.menu.update.log")+"</span> </a> ");(t+=" \x3c!-- 协作场景 --\x3e ",e.renderScenarioGuide&&~i.indexOf("zh")&&(t+=' <a class="help-item scenario-selector',e.showScenarioBadge&&(t+=" with-badge"),t+='" data-gta="{action: \'view work scenario\'}" > <span class="icon icon-circular-flow"></span> <span class="item-name">'+tb_i18n.get("submit.ticket.menu.scenario")+"</span> </a> "),t+=" \x3c!-- 帮助中心 --\x3e ",~i.indexOf("zh")&&o.helpEntryHelpCenter)&&(t+=" ",t+=' <a href="'+("string"==typeof o.helpEntryHelpCenter?o.helpEntryHelpCenter:r.HELP_CENTER_URL)+'" target="_blank" class="help-item help-center-link',e.showHelpCenterBadge&&(t+=" with-badge"),t+='" data-gta="{action: \'enter help center\'}" > <span class="icon icon-collection"></span> <span class="item-name">'+tb_i18n.get("submit.ticket.menu.support")+"</span> </a> ");if(t+=" \x3c!-- 案例中心 --\x3e ",~i.indexOf("zh")&&o.helpEntryCaseCenter){t+=" ";var s="string"==typeof o.helpEntryCaseCenter;t+=" ";var a=r.CASE_CENTER_URL+"?utm_source=case";t+=' <a href="'+(s?o.helpEntryCaseCenter:a)+'" target="_blank" class="help-item case-center-link',e.showCaseCenterBadge&&(t+=" with-badge"),t+='" data-gta="{action: \'enter case center\'}" > <span class="icon icon-briefcase-stroke"></span> <span class="item-name">'+tb_i18n.get("helper.case.center")+"</span> </a> "}return t+=" \x3c!-- 快捷键 --\x3e ",o.helpEntryHotKey&&o.enableHotKey&&(t+=' <a class="help-item hotkey-handler" data-gta="{action: \'show hotkey list\', control: \'Avatar Menu\'}" data-label="hotkey helper" > <span class="icon icon-shortcut"></span> <span class="item-name">'+tb_i18n.get("helper.shortcuts")+"</span> </a> "),t+=" </div></div>"}},CMQjtSNt:function(e,t,n){var r,o,i,s,a,c,l,u,p={}.hasOwnProperty;c=n("a+N5u/Cl"),l=n("sa1Ed382"),a=n("vmWJWrVe"),u=n("gh8QIhMV").throwError,o=n("odY26VIi"),r=n("2jKBpKa5"),s=n("5SEFI7yW").TaskReminderModal,i=n("CrgVhEYo").REMINDER_GTA,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="ReminderView",t.prototype.initialize=function(e){var t,n,r;return this.taskModel=e.taskModel,this.ancestorId=null!=(t=e.ancestorId)?t:null,this.isSet=null!=(n=e.isSet)&&n,this.opened=null!=(r=e.opened)&&r,this.parseReminderMembersCollection(),this.render(),this.listen(),this.modalMounted=$("<div class='hidden'></div>").get(0)},t.prototype.listen=function(){var e;return e=["change:_executorId","change:reminder","change:isArchived"],this.listenTo(this.taskModel,e.join(" "),this.render),this.listenTo(this.taskModel,"change:involveMembers",function(){return this.parseReminderMembersCollection(),this.render()})},t.prototype.render=function(){return this.$el.append(this.modalMounted)},t.prototype.parseReminderMembersCollection=function(){var e,t,n,r;return(e=this.taskModel.get("_projectId"))?(t=o.get(e).toJSON(),n=this.taskModel.get("involveMembers"),r=t.filter(function(e){return n.indexOf(e._userId)>=0})):r=this.taskModel.get("involvers"),this.reminderMembersCollection=new o(r)},t.prototype.toggleReminderPopover=function(e){if(this.gtaHandler({action:"add remind time"}),!$(e.currentTarget).data("bs.popover"))return this.onModalVisibleChange(!this.opened)},t.prototype.renderReminderModal=function(){var e,t;if(e=this.taskModel.hasPermission("put")&&this.taskModel.hasPermission("put.reminder"),t=this.taskModel.get("reminder"))return this.requestReactView(this.modalMounted,s,{reminder:t,task:this.taskModel.toJSON(),projectMembers:this.reminderMembersCollection.toJSON(),canChangeMember:e,opened:this.opened,onModalVisibleChange:this.onModalVisibleChange.bind(this),onSubmit:this.reminderSubmit.bind(this),onToggleMemberPicker:this.toggleReminderMemberPicker.bind(this)});u("No reminder data")},t.prototype.reminderSubmit=function(e){return this.reminderMemberMenuView&&this.reminderMemberMenuView.onHidden(),this.gtaHandler({action:"added remind time",category:i[e.type]}),this.onModalVisibleChange(!1),this.isSet?new Promise((t=this,function(n,r){return t.taskModel.setReminder(e),n()})):this.taskModel.updateReminder(e);var t},t.prototype.onModalVisibleChange=function(e){return this.opened=e,this.renderReminderModal()},t.prototype.toggleReminderMemberPicker=function(e,t){return new Promise((n=this,function(o,i){var s,a,l;if(a=$(t.currentTarget),!n.reminderMemberMenuView)return l=0|(null!=(s=$(".task-reminder-modal"))?s.parent().css("z-index"):void 0),n.reminderMemberMenuView=n.requestSubView(r,{$toggler:a,multi:!0,zIndex:l+1e3,titleForAll:tb_i18n.get("task.reminder.allInvolveMembers"),membersCollection:n.reminderMembersCollection,selected:c.clone(e),select:function(t){return e=c.union(e,t)},unselect:function(t){return e=c.difference(e,t)},onHidden:function(){return o(e)}}),n.reminderMemberMenuView.show(),a.on("hidden.bs.popover",function(){return a.off("hidden.bs.popover"),c.delay(function(){return n.reminderMemberMenuView.remove(),n.reminderMemberMenuView=null},10)});n.reminderMemberMenuView.remove()}));var n},t.prototype.gtaHandler=function(e){return e=c.extend({type:this.taskModel.isSubtask()?"subtask":"task",series:this.taskModel.get("ancestorIds").length},e),l.gta.event(e)},t.prototype.remove=function(){return this.unmountReact(this.modalMounted),t.__super__.remove.apply(this,arguments)},t}()},CPuJppTW:function(e,t,n){e.exports=n.p+"images/placeholder.ea203147.png"},CTmKd891:function(e,t,n){},CYJibKqy:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return y});var r,o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n.n(i),a=n("tLZJUYWX"),c=n("TSYQbtd+"),l=n.n(c),u=n("GESwhXbR"),p=n("sa1Ed382"),d=n("90U+kJWN"),h=n("HDJEOtNh"),m=n("zH+Yaocm"),f=n("7lUNyXlz");!function(e){e.FF="finish_finish",e.FS="finish_start",e.SF="start_finish",e.SS="start_start"}(r||(r={}));var g=function(e,t){return{label:e,data:e,extra:t}},v=function(e){var t=e.dateString;return e.dateIsToday&&"00:00"!==e.timeFormatString?t+" "+e.timeFormatString:t},b=function(e){switch(e){case r.FF:return a.get("task.detail.task.dependency.kind.FF");case r.FS:return a.get("task.detail.task.dependency.kind.FS");case r.SF:return a.get("task.detail.task.dependency.kind.SF");case r.SS:return a.get("task.detail.task.dependency.kind.SS");default:return""}},y=function(e){function t(t){var n=e.call(this,t)||this;return n.onClickTaskItem=function(){n.props.onClickItem(n.props.task._id)},n.onDeleteDependency=function(){n.props.onDelete(n.props.task.dependencyId)},n.onSelectKind=function(e){var t=e.data,r=n.props,o=r.task,i=o.dependencyKind,s=o.dependencyId,a=r.group;"delete"!==t?i!==t&&(n.currentSelectedKind=g(t,a),n.props.onUpdate(s,t)):n.onDeleteDependency()},n.currentSelectedKind=g(t.task.dependencyKind,t.group),n}return o.d(t,e),t.prototype.getDescPre=function(e){switch(e){case r.FF:return a.get("task.detail.task.pre.dependency.kind.FF.desc");case r.FS:return a.get("task.detail.task.pre.dependency.kind.FS.desc");case r.SF:return a.get("task.detail.task.pre.dependency.kind.SF.desc");case r.SS:return a.get("task.detail.task.pre.dependency.kind.SS.desc");default:return""}},t.prototype.getDescPost=function(e){switch(e){case r.FF:return a.get("task.detail.task.post.dependency.kind.FF.desc");case r.FS:return a.get("task.detail.task.post.dependency.kind.FS.desc");case r.SF:return a.get("task.detail.task.post.dependency.kind.SF.desc");case r.SS:return a.get("task.detail.task.post.dependency.kind.SS.desc");default:return""}},t.prototype.renderSelectorOption=function(e){var t=g(e,this.props.group),n="pre"===this.props.group?this.getDescPre(e):this.getDescPost(e);return s.a.createElement(u.Option,{value:t,className:f["menu-item"]},s.a.createElement(u.Tooltip,{title:n,delay:0,placement:"left"},s.a.createElement("div",{className:f["dependency-kind-item"]},b(e))))},t.prototype.renderDependencyKindSelector=function(){var e=s.a.createElement(u.Option,{className:f["dependency-kind-menu-delete"],value:{label:a.get("task.detail.task.dependency.delete.dependency"),data:"delete"}});return s.a.createElement("div",null,s.a.createElement(u.Select,{className:f["dependency-kind-menu-trigger"],value:this.currentSelectedKind,keepWidth:!0,nested:!0,onSelect:this.onSelectKind,renderer:t.renderer},this.renderSelectorOption(r.FS),this.renderSelectorOption(r.FF),this.renderSelectorOption(r.SS),this.renderSelectorOption(r.SF),t.optionSeparator,e))},t.prototype.renderTaskAllInfo=function(){var e=this.props.task,t=function(e){return"members"===e.visible||"involves"===e.visible&&e.involveMembers.indexOf(p.user.id)>=0||!!e.project&&h.ProjectAccess.hasProjectPrivacyPermission(e.project._id)}(e),n=t?e.content:a.get("task.dependency.task.invisible.hint")+a.get("due.to.visible.involves"),r=t?f["dependency-task-info"]:l()(f["dependency-task-info"],"invisible-task"),i=t?{onClick:this.onClickTaskItem}:{};return s.a.createElement("div",{className:f["dependency-task-info-wrap"]},s.a.createElement("div",o.a({className:r},i),this.renderTaskInfo({isVisible:t,content:n}),this.renderDateInfo()))},t.prototype.renderTaskInfo=function(e){return s.a.createElement("div",{className:f["task-info-left"]},s.a.createElement(m.TaskStatusLabel,{className:"task-status-label",task:this.props.task,fixedWidth:!0,readOnly:!0}),s.a.createElement("span",{className:"task-content"},e.content))},t.prototype.renderDateInfo=function(){var e=this.props.task,t=e.startDate,n=e.dueDate,r=e.isDone,o={};t&&(o.startDate=d.formatDate(t),o.startDate.datetimeFormatString=v(o.startDate)),n&&(o.dueDate=d.formatDate(n),o.dueDate.datetimeFormatString=v(o.dueDate));var i=function(e){var t=e.startDate,n=e.dueDate;return t&&n?t.dateString===n.dateString?t.dateTimeString+" - "+n.timeFormatString:t.datetimeFormatString+" - "+n.datetimeFormatString:t?a.get("task.startDate.label",t.datetimeFormatString||""):n?a.get("task.dueDate.label",n.datetimeFormatString||""):""}(o),c=o.dueDate&&!r?{overdue:"important",today:"warning",upcoming:"info"}[o.dueDate.dateClass]:"";return s.a.createElement("time",{className:l()(f["date-info"],c)},i)},t.prototype.render=function(){var e=this.renderDependencyKindSelector(),t=this.renderTaskAllInfo(),n=o.f("pre"===this.props.group?[t,e]:[e,t],2),r=n[0],i=n[1],a=s.a.createElement("div",{className:"dash"}),c=f["task-dependency-item"];return s.a.createElement("div",{className:c},r,a,i)},t.renderer={renderSelectedLabel:function(e){var t=e.data,n=e.extra;if("delete"===t)return s.a.createElement(s.a.Fragment,null);var r=b(t),i=a.get("task.detail.task.dependency.this.task"),c=o.f("pre"===n?[r,i]:[i,r],2),l=c[0],u=c[1],p=o.f("pre"===n?["left title","right"]:["left","right title"],2),d=p[0],h=p[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:d},l),s.a.createElement("span",{className:h},u))}},t.optionSeparator=s.a.createElement(u.Option,{value:{label:"",data:null},disabled:!0,className:f["options-separator"]},s.a.createElement(u.Separator,{full:!0,component:"div"})),t}(i.PureComponent)},CYucM6vM:function(e,t,n){e.exports=n.p+"images/d_jiyan@2x.fb3ea6f3.png"},CZnMppOW:function(e,t,n){"use strict";var r=n("g1ExiWxz");n.o(r,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return r.AbstractPortal}),n.o(r,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return r.getSuspendedMsg}),n.o(r,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return r.verifyProjectPayment});var o=n("bv63Y0YZ");n.o(o,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return o.AbstractPortal}),n.o(o,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return o.getSuspendedMsg}),n.o(o,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return o.verifyProjectPayment});var i=n("Hb+rakDI");n.o(i,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return i.AbstractPortal}),n.o(i,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return i.getSuspendedMsg}),n.o(i,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return i.verifyProjectPayment});n("r1FBglIs");var s=n("rhK5Yt5v");n.d(t,"getSuspendedMsg",function(){return s.e}),n.d(t,"verifyProjectPayment",function(){return s.r});n("vUGUgKq+")},CfyenDut:function(e,t,n){"use strict";n.r(t),n.d(t,"formatNote",function(){return m}),n.d(t,"toMarkdown",function(){return f});var r=n("+2RfZ2TT"),o=n.n(r),i=n("zRdNv5hc"),s=n("wMS7wN+j"),a=n.n(s),c=n("/e+Ob7oW"),l=/\\(\_|\*|\\)/g,u=new RegExp("&lt;br&gt;","g"),p=new RegExp("<br>","g"),d=1559273450361,h=/^<[\s\S]*>$/;function m(e,t){var n=function(e,t){if((t?new Date(t).getTime():(new Date).getTime())<d)return null;var n,r=e.trim();if(!h.test(r))return null;try{n=o()(r)}catch(i){return null}return n.length>0?a.a.sanitize(c(e.replace(l,"$1"),{sanitize:!1,breaks:!0})):null}(e,t);if(n)return n;var r=a.a.sanitize(c(e,{strikethrough:!1,breaks:!0,sanitize:!0}).replace(/\n$/,"")).replace(u,"<br>"),i=o()("<div>"+r+"</div>");return i.find("code").each(function(e,t){o()(t).html(o()(t).html().replace(p,"&lt;br&gt;"))}),i.html().replace(/^\n/,"").replace(/<em>/g,"<i>").replace(/<\/em>/g,"</i>")}function f(e){return i.turndownService.turndown(e)}},Cjw9ISmG:function(e,t){e.exports=function(e){return'<div class="modal-header text-center flex-static"> <div class="modal-title text-center">'+e.name+'</div> <a class="modal-close pull-right icon icon-remove" data-dismiss="modal"></a></div><div class="modal-body flex-fill thin-scroll"> <div class="task-list-wrapper"></div> <div class="invisible-wrapper flex"></div></div>'}},CwvuQCQC:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;s=n("a+N5u/Cl"),i=n("wu4EEviu"),r=n("VuB9cZyl"),o=n("bt0fKs+7"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="messages",t.prototype.model=o,t.prototype.type="normal",t.prototype.sortMethod="updated",t.prototype.pageNum=20,t.prototype.comparator=null,t.prototype.listen=function(){var e;if(t.__super__.listen.apply(this,arguments),!this._messageCollectionlistened)return this._messageCollectionlistened=!0,i.on("all",(e=this,function(t,n){var r;if((r=/\:change\:message\/(\w{24})/.exec(t))&&r[1]&&"pm"!==n.msgType&&!e.get(r[1]))return e.fetchOne(r[1])})),i.on(":change:"+this.name,function(e){return function(t){if("readAll:"+e.type===t)return e.markAllRead()}}(this)),i.on(":remove:"+this.name,function(e){return function(t){if("removeAll:"+e.type===t)return e.removeAllRead()}}(this))},t.prototype.parse=function(e){return s.isArray(e)||(e=[e]),e.filter(function(e){return"room"!==e.objectType})},t.prototype.fetch=function(e){var n;return null==e&&(e={}),n=function(){switch(this.type){case"mentionedEver":return["normal","mentionedEver"];default:return this.type}}.call(this),e.url="v2/"+this.name,e.attrs=Object.assign({},e.attrs||{},{sort:this.sortMethod,type:n}),t.__super__.fetch.call(this,e)},t.prototype.fetchOne=function(e,n){return null==n&&(n={}),n.url="v2/"+this.name,t.__super__.fetchOne.call(this,e,n)},t.prototype.sync=function(e,n,r){switch(r||(r={}),e){case"delete":r.success=(o=this,function(){return o.remove(o.getReaded())})}var o;return t.__super__.sync.apply(this,arguments)},t.prototype.readAll=function(){var e,t;if(this.getUnread().length)return e={type:this.type},this.sync("update",this,{url:"messages/markallread",attrs:e,success:(t=this,function(){return t.markAllRead()})})},t.prototype.markAllRead=function(){var e;return e={isRead:!0,unreadActivitiesCount:0},this.each(function(t){return t.set(e)})},t.prototype.removeAllRead=function(){var e;return e=this.filter(function(e){return!e.get("isRead")}),this.set(e,{reset:!0})},t.prototype.getUnreadCount=function(){return this.reduce(function(e,t){return e+t.get("unreadActivitiesCount")},0)},t.prototype.getUnarchivedCount=function(){return this.where({isArchived:!1}).length},t.prototype.getUnarchived=function(){return this.where({isArchived:!1})},t.prototype.getUnread=function(){return this.where({isRead:!1})},t.prototype.getReaded=function(){return this.where({isRead:!0})},t.prototype.archiveRead=function(e){return null==e&&(e={}),e.url="messages?type="+this.type,this.sync("delete",this,e),this},t.prototype.remove=function(e){return"all"===e?this.remove(this.getReaded()):t.__super__.remove.apply(this,arguments)},t}()},CxvbiW8r:function(e,t,n){e.exports={"member-menu-item":"member-menu-item__2zYa"}},CzDzqUFN:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("tLZJUYWX"),c=n("XhpHwZVN"),l=n("6EY9/lIj"),u=n("GESwhXbR"),p=n("3eMzznN/"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onEnterCollection=function(){t.props.collection&&t.props.onEnterCollection&&t.props.onEnterCollection()},t.getFileSizeContent=function(){var e,n=t.props.file,r=t.props.collection,o=n.fileSize,i=n.progress,s=p.formatFileSize(n.fileSize);if(n.retryable)return a.get("work.uploader.progress.retry.desc");if(i>=0&&i<=1){var c=o*i;e=n.completed?""+s:p.formatFileSize(c)+"/"+s,e=r?"("+e+")":e}else e=""+s;return e},t}return r.d(t,e),t.prototype.renderCollection=function(){var e=this.props,t=e.file,n=e.collection;return t.retryable?null:n&&o.createElement("span",{className:"collection",onClick:this.onEnterCollection},n)},t.prototype.renderFileInfo=function(){return o.createElement("div",{className:"file-info flex-static"},this.renderCollection(),o.createElement("span",{className:"file-size"},this.getFileSizeContent()))},t.prototype.renderFileTitle=function(){var e=this.props.file,t=e.fileName,n=e.fileType?e.fileType.length+3:0;return o.createElement(u.Tooltip,{title:t},o.createElement(l.a,{title:t,sliceIndex:t.length-n}))},t.prototype.render=function(){var e=this.props.file,t=this.props.collection,n=s()("file-item-content flex-fill flex-vcenter",{"with-collection-name":!!t});return o.createElement("div",{className:"file-item"},o.createElement("header",{className:"file-item-icon flex-static"},Object(c.WorkIcon)(e)),o.createElement("section",{className:n},this.renderFileTitle(),this.renderFileInfo()))},t}(o.Component);n("QO3Jh35S"),n.d(t,"UploaderItem",function(){return h}),n("kPU5o9li");var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onInsertImage=function(){t.props.insertImage&&t.props.insertImage(t.props.fileId)},t.onClickCancel=function(e){e.stopPropagation(),t.props.onClickCancel()},t.onClickPause=function(e){e.stopPropagation(),t.props.onClickPause()},t.onClickResume=function(e){e.stopPropagation(),t.props.onClickResume()},t.onClickRetry=function(e){e.stopPropagation(),t.props.onClickRetry()},t}return r.d(t,e),t.prototype.renderProgress=function(){var e=this.props.file.completed,t=this.props.file.progress;return e||!(t>=0&&t<=1)?null:o.createElement("div",{className:"progress-container"},o.createElement("div",{className:"progress"},o.createElement("div",{className:"progress-bar",style:{width:Math.ceil(100*t)+"%"}})))},t.prototype.renderControl=function(){var e,t="";return this.props.file.completed?null:(!0===this.props.file.retryable?(t="icon-refresh",e=this.onClickRetry):!0===this.props.file.pausable?(t="icon-pause",e=this.onClickPause):!1===this.props.file.pausable&&(t="icon-play",e=this.onClickResume),this.renderHandlerButton(t,e))},t.prototype.renderHandler=function(){var e,t="";return this.props.file.completed&&this.props.isBackground?t="icon-tick":this.props.file.completed&&this.props.isBackground||(t="icon-remove",e=this.onClickCancel),this.renderHandlerButton(t,e)},t.prototype.renderHandlerButton=function(e,t){return o.createElement("a",{className:s()("icon",e),onClick:t})},t.prototype.render=function(){return o.createElement("div",{className:"uploader-wrapper flex-horiz",onClick:this.onInsertImage},o.createElement("div",{className:"uploader-content flex-fill"},o.createElement(d,{file:this.props.file,collection:this.props.isBackground?this.props.collection:"",onEnterCollection:this.props.isBackground?this.props.onEnterCollection:void 0}),this.renderProgress()),o.createElement("div",{className:"uploader-handlers flex-static flex-vcenter"},this.renderControl(),this.renderHandler()))},t}(o.PureComponent)},D4KHCQrV:function(e,t,n){},D4LvyNzA:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("kwic24gT"),s=n("Xdk/lFVN"),a=function(e){function t(t){var n=e.call(this,t)||this;return n.scrollOffset=0,n.scrollableSpace=0,n.mouseEnterToken=null,n.mouseLeaveToken=null,n.hide=!0,n.narrow=!0,n.hideTimeout=1e3,n.leaveTimeoutId=null,n.scrollbarDetail={status:!1,timestamp:(new Date).getTime(),buffer:500,hoverInterval:200},n.onWheel=function(e,t){void 0===t&&(t=!1),e<0?e=0:e>1&&(e=1),n.mouseManager&&n.mouseManager.isDragging||n.updatePosition(e*n.scrollableSpace,t)},n.saveHandlerRef=function(e){n.handlerRef=e},n.handleInnerStyle=function(e){var t;void 0===e&&(e=n.props);var r=e.size,o=e.scrollSize,i=e.mode;return(t={})["y"===i?"height":"width"]=r/o*100+"%",t["y"===i?"minHeight":"minWidth"]=20,t.opacity=n.hide?0:1,t},n.handleScroll=function(e,t){var r=n.props,o=r.size,i=r.scrollSize,s=r.onScroll,a=i-o,c=(n.scrollOffset/n.scrollableSpace*a+e*(i/o))/a,l=Math.min(Math.max(0,c),1),u=l*n.scrollableSpace;n.updatePosition(u),"function"==typeof s&&s(l*a,t)},n.handleMouseEnter=function(){null!==n.leaveTimeoutId&&window.clearTimeout(n.leaveTimeoutId),null===n.mouseEnterToken&&(setTimeout(function(){n.handlerRef&&null!==n.mouseEnterToken&&n.showHandler(n.handlerRef)},n.scrollbarDetail.hoverInterval),n.mouseEnterToken=(new Date).getTime()),null!==n.mouseLeaveToken&&(n.mouseLeaveToken=null)},n.handleMouseLeave=function(){null!==n.mouseEnterToken&&(n.handlerRef&&n.hideHandler(n.handlerRef),n.mouseLeaveToken=(new Date).getTime())},n.handleDragEnd=function(){n.release(),n.setState(r.a({},n.state,{down:!1}))},n.handleDragMove=function(e,t,r){n.mouseManager&&n.mouseManager.isDragging&&("y"===n.props.mode?n.handleScroll(t,r):n.handleScroll(e,r))},n.handleMouseDown=function(e){var t=n.props.onMouseDown;n.findManager().captureMouseMove(e),n.setState(r.a({},n.state,{down:!0})),"function"==typeof t&&t(e)},n.handleContainerClick=function(e){var t=n.props.size/n.props.scrollSize*n.props.size,r=("x"===n.props.mode?e.nativeEvent.offsetX:e.nativeEvent.offsetY)-n.scrollOffset-t/2;n.handleScroll(r,e.nativeEvent)},n.handleHandlerClick=function(e){e.stopPropagation()},n.state={offset:null,down:!1},n.wrapperStyle={zIndex:n.props.zIndex},n.innerStyle=n.handleInnerStyle(t),n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;setTimeout(function(){if(e.handlerRef){var t=e.handlerRef.getBoundingClientRect();e.setState(r.a({},e.state,{offset:t})),e.scrollableSpace=e.props.size-("y"===e.props.mode?t.height:t.width);var n=e.props.offset/(e.props.scrollSize-e.props.size);e.updatePosition(n*e.scrollableSpace),e.props.alwaysShowBar&&e.showHandler(e.handlerRef)}},1)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.zIndex!==this.props.zIndex&&(this.wrapperStyle={zIndex:e.zIndex}),e.size===this.props.size&&e.scrollSize===this.props.scrollSize&&e.mode===this.props.mode||(this.innerStyle=this.handleInnerStyle(e))},t.prototype.componentDidUpdate=function(e,t){var n=this;if((this.props.size!==e.size||this.props.scrollSize!==e.scrollSize)&&this.handlerRef){var o=this.handlerRef.getBoundingClientRect();if(this.setState(r.a({},this.state,{offset:o})),this.scrollableSpace=this.props.size-("x"===this.props.mode?o.width:o.height),e.size!==this.props.size){var i=t.offset||{width:0,height:0},s=this.scrollOffset/(e.size-("x"===this.props.mode?i.width:i.height)),a=(s=s>1?1:s)*(this.props.scrollSize-this.props.size);this.updatePosition(a),requestAnimationFrame(function(){"function"==typeof n.props.onScroll&&n.props.onScroll(n.scrollOffset,null)})}}},t.prototype.shouldComponentUpdate=function(e,t){return t.down!==this.state.down||t.offset!==this.state.offset||(e.scrollSize!==this.props.scrollSize||e.size!==this.props.size)},t.prototype.componentWillUnmount=function(){this.release(),null!==this.leaveTimeoutId&&window.clearTimeout(this.leaveTimeoutId)},t.prototype.resetPosition=function(){this.updatePosition(0)},t.prototype.render=function(){var e=this.props.mode,t="y"===e?s["scrollbar-vert-handler"]:s["scrollbar-horz-handler"],n="y"===e?s["scrollbar-vert-container"]:s["scrollbar-horz-container"];return o.createElement("div",{className:n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleContainerClick,style:this.wrapperStyle},o.createElement("div",{ref:this.saveHandlerRef,className:t,style:this.innerStyle,tabIndex:-1,onMouseDown:this.handleMouseDown,onClick:this.handleHandlerClick}))},t.prototype.release=function(){this.mouseManager&&(this.mouseManager.releaseMouseMoves(),this.mouseManager=null)},t.prototype.shouldShowScrollbar=function(){if(!this.scrollbarDetail.status){var e=(new Date).getTime()-this.scrollbarDetail.timestamp>this.scrollbarDetail.buffer;return!0===e&&(this.scrollbarDetail.status=!0),e}return!0},t.prototype.shouldBroadenScrollbar=function(){var e="number"==typeof this.mouseEnterToken&&null===this.mouseLeaveToken;return Boolean(this.props.broadenBarOnHover&&e)},t.prototype.updatePosition=function(e,t){void 0===t&&(t=!1);var n=this.props.mode;this.scrollOffset!==e&&(this.scrollOffset=Math.max(0,e),this.moveHandler(this.handlerRef,n,this.scrollOffset.toString(),!!this.shouldShowScrollbar()&&t))},t.prototype.findManager=function(){return this.mouseManager||(this.mouseManager=new i.b(this.handleDragMove,this.handleDragEnd,document.body)),this.mouseManager},t.prototype.moveHandler=function(e,t,n,r){e&&(e.style.transform="x"===t?"translate("+n+"px, 0px)":"translate(0px, "+n+"px)"),r&&this.showHandler(e),this.hideHandler(e)},t.prototype.showHandler=function(e,t){void 0===t&&(t=!1),t=t||this.shouldBroadenScrollbar(),this.hide&&(this.hide=!1,e.style.opacity="1"),this.narrow&&t&&e&&e.parentElement&&(this.narrow=!1,e.parentElement.classList.add(s["scrollbar-broadened"]))},t.prototype.hideHandler=function(e){var t=this;null!==this.leaveTimeoutId&&window.clearTimeout(this.leaveTimeoutId),this.leaveTimeoutId=window.setTimeout(function(){t.leaveTimeoutId=null,t.props.alwaysShowBar||(e.style.opacity="0",t.hide=!0),e&&e.parentElement&&!t.narrow&&!t.shouldBroadenScrollbar()&&(t.narrow=!0,e.parentElement.classList.remove(s["scrollbar-broadened"])),null!==t.mouseEnterToken&&null!==t.mouseLeaveToken&&(t.mouseEnterToken=null,t.mouseLeaveToken=null)},this.hideTimeout)},t.defaultProps={mode:"y",style:{},offset:0,zIndex:1},t.totalSize=18,t.translateRE=/(-?[.\d]+)px, (-?[.\d]+)px/,t}(o.Component)},DE41TEAJ:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("H5ERZgIq"),a=n("arJxzJPZ"),c=function(e){var t=e.activityPanelContext;return t.saveActivityTimelineViewInstance=function(e){t.activityTimelineView=e},i.a.createElement(a.a.Provider,{value:t},i.a.createElement(s.a,r.a({},e)))}},DENmPrXB:function(e,t,n){e.exports=n.p+"images/h_lai@2x.fa225edd.png"},"DEXK/wwe":function(e,t,n){e.exports={"member-card-header":"member-card-header__33NS","member-card-avatar":"member-card-avatar__2JHC","member-card-info":"member-card-info__2K6E","member-card-content":"member-card-content__32NJ","member-card-chat":"member-card-chat__358J","member-card-role-wrapper":"member-card-role-wrapper__2Bud","member-card-disabled":"member-card-disabled__15gW"}},DHFEKVJX:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("sa1Ed382"),a=n("GESwhXbR"),c=n("s0r7VfKc"),l=n("DOZCBSCZ"),u=n("7J4CuXkc"),p=n("W/kl2gze"),d=n("LxI6N5g+"),h=n("cVY30NxL"),m=function(e){function t(t){var n=e.call(this,t)||this;return n.getDefaultWeeks=function(){var e=n.props.sprint,t=e.startDate,r=e.dueDate;return Object(h.getSprintWeeks)(t,r)},n.onSave=function(){var e=n.state,t=e.name,r=e.dueDate,o=e.startDate;n.props.onSave(n.props.sprint._id,t,o,r)},n.updateSprint=function(e){n.setState(r.a({},n.state,e),function(){var e="future"!==n.props.sprint.status,t=Object(h.checkDateValidation)(n.state.startDate,n.state.dueDate,e);n.setState({buttonEnabled:!!n.state.name&&t})})},n.state={name:t.sprint.name,weeks:n.getDefaultWeeks(),startDate:t.sprint.startDate,dueDate:t.sprint.dueDate,buttonEnabled:!!t.sprint.name},n}return r.d(t,e),t.prototype.renderConfirm=function(){return o.createElement("button",{onClick:this.onSave,className:"btn btn-primary confirm-button",disabled:!this.state.buttonEnabled},i.get("confirm"))},t.prototype.renderSprintUpdate=function(){var e=this.state,t={name:e.name,weeks:e.weeks,startDate:e.startDate,dueDate:e.dueDate,showDueDate:!0,updateSprint:this.updateSprint};return o.createElement(d.a,r.a({},t))},t.prototype.render=function(){return o.createElement("div",null,this.renderSprintUpdate(),this.renderConfirm())},t}(o.PureComponent),f=n("LvDlAkAJ"),g=n("4c1CS0b3"),v=function(e){function t(t){var n=e.call(this,t)||this;return n.onSuccess=function(){n.props.onSuccess&&n.props.onSuccess()},n.removeCompletedSprint=function(){n.deleteAllTasksAndSprint().subscribe(function(){return n.onSuccess()}),n.gtaHandler("direct")},n.removeUnCompletedSprint=function(){n.deleteSprint().subscribe(function(){return n.onSuccess()}),n.gtaHandler("direct")},n.removeHasTasksSprint=function(){var e=n.state.radioValue;"remove"===e?(n.deleteAllTasksAndSprint().subscribe(function(){return n.onSuccess()}),n.gtaHandler("delete all")):"restore"===e&&(n.removeAllTasksFromSprint().subscribe(function(){return n.onSuccess()}),n.gtaHandler("recover"))},n.onSelectRadio=function(e){var t=e.target.value;n.setState({radioValue:t})},n.deleteSprint=function(){var e="sprints/"+n.props.sprint._id;return c.default.fetch.delete(e)},n.deleteAllTasksAndSprint=function(){var e="sprints/"+n.props.sprint._id+"/tasks",t=c.default.fetch.delete(e);return g.Observable.concat(t,n.deleteSprint())},n.removeAllTasksFromSprint=function(){var e=c.default.fetch.moveOutSprintTasks(n.props.sprint._id,{taskStatus:"all"});return g.Observable.concat(e,n.deleteSprint())},n.state={radioValue:"restore"},n}return r.d(t,e),t.prototype.getTaskAmount=function(){var e=this.props.taskStatus,t=e.unDone,n=e.done,r=Object(h.mergeTaskCount)(t,n),o=this.props.scenarioFieldConfigs;return Object(f.sum)(o.map(function(e){return r[e._id]}))},t.prototype.gtaHandler=function(e){s.gta.event({action:"deleted sprint",type:"sprint",page:"Sprint Page",projectid:this.props.sprint._projectId,category:e})},t.prototype.renderConfirm=function(){return o.createElement("button",{className:"btn btn-danger confirm-button"},i.get("confirm"))},t.prototype.getTasksText=function(){var e=this.props.taskStatus,t=e.unDone,n=e.done,r=Object(h.sumTaskCount)(t)+Object(h.sumTaskCount)(n);return i.get("sprint.delete.tasks.left",r)},t.prototype.renderTasksInSprintText=function(){return o.createElement("div",null,o.createElement("div",{className:"sprint-left-details"},this.getTasksText()),o.createElement(a.RadioGroup,{className:"sprint-radio-groups",name:"singer-0",defaultValue:"restore",onChange:this.onSelectRadio},o.createElement(a.Radio,{label:i.get("sprint.delete.tasks.remove.sprint"),value:"restore",className:"sprint-radio"}),o.createElement(a.Radio,{label:i.get("sprint.delete.all.tasks"),value:"remove",className:"sprint-radio"})))},t.prototype.renderDeleteView=function(){return o.createElement("div",null,o.createElement("div",{className:"delete-confirm-text"},i.get("sprint.delete.to.confirm",this.props.sprint.name)),o.createElement("div",{onClick:this.removeUnCompletedSprint},this.renderConfirm()))},t.prototype.renderToDeleteView=function(){return o.createElement("div",null,this.renderTasksInSprintText(),o.createElement("div",{onClick:this.removeHasTasksSprint},this.renderConfirm()))},t.prototype.renderCompletedSprintDeleteView=function(){return o.createElement("div",null,o.createElement("div",{className:"delete-confirm-text"},i.get("sprint.completed.delete.to.confirm")),o.createElement("div",{onClick:this.removeCompletedSprint},this.renderConfirm()))},t.prototype.render=function(){var e=this.getTaskAmount();return"complete"===this.props.sprint.status?this.renderCompletedSprintDeleteView():e?this.renderToDeleteView():this.renderDeleteView()},t}(o.PureComponent);n("acteLzhK");n.d(t,"a",function(){return b});var b=function(e){function t(t){var n=e.call(this,t)||this;return n.setPopupRef=function(e){n.popupRef=e},n.closePopup=function(){n.popupRef.close()},n.onTrigger=function(e){e.stopPropagation(),n.onTriggerMenuGta()},n.onTriggerMenuGta=function(){var e=n.props.gtaControl;s.gta.event({action:"toggle more menu",type:"sprint",projectid:n.props.projectId,control:e})},n.onSave=function(e,t,r,o){var i=t.trim();if(i){var s={name:i,startDate:r,dueDate:o};c.default.updateSprint(e,s).subscribe(),n.popupRef.close()}},n.onClickRequestDeletable=function(){n.setState({isRequesting:!0},function(){n.popupRef.goTo(2),n.onRequestSprintLeftTasks(),n.onClickDeleteGta()})},n.onClickMenuGta=function(e){var t={active:"current sprint",future:"future sprint",complete:"completed sprint"}[n.props.sprint.status];s.gta.event({action:e,type:"sprint",control:"More Menu",projectid:n.props.projectId,category:t})},n.onClickEditLink=function(){n.onClickMenuGta("edit sprint")},n.onClickDeleteGta=function(){n.onClickMenuGta("delete sprint")},n.onClickPlanning=function(){n.props.openSprintPlanningModal({planningSprintId:n.props.sprint._id,gtaControl:"Sprint Menu "+n.props.gtaControl}),n.closePopup()},n.state={isRequesting:!1,taskStatus:null},n}return r.d(t,e),t.prototype.onRequestSprintLeftTasks=function(){var e=this,t=this.props,n=t.sprint,r=t.projectId;c.default.fetch.getSprintTasksStatus(r,n._id).subscribe(function(t){e.setState({isRequesting:!1,taskStatus:t})})},t.prototype.renderPlanningMenuItem=function(){return o.createElement("div",{className:"popup-menu-item",onClick:this.onClickPlanning},o.createElement(a.Icon,{name:"arrow-switch"}),o.createElement("span",null,i.get("sprint.planning")))},t.prototype.renderStartMenuItem=function(){var e=o.createElement("div",{className:"popup-menu-item"},o.createElement(a.Icon,{name:"play"}),o.createElement("span",null,i.get("sprint.to.start")));return o.createElement(u.a,{sprint:this.props.sprint,trigger:e,nestedModal:!0,withTitle:!0,isEmptySprint:this.props.isEmptySprint||!1,gtaControl:"Sprint List"})},t.prototype.renderCompleteMenuItem=function(){var e=o.createElement("div",{className:"popup-menu-item"},o.createElement(a.Icon,{name:"circle-check-o"}),o.createElement("span",null,i.get("sprint.to.complete")));return o.createElement(p.a,{projectId:this.props.projectId,sprintId:this.props.sprint._id,trigger:e,nestedModal:!0,onCompleteSprint:this.props.onCompleteSprint})},t.prototype.renderDeleteLink=function(){return o.createElement("div",{className:"popup-menu-item remove-sprint-link",onClick:this.onClickRequestDeletable},o.createElement(a.Icon,{name:"trash"}),o.createElement("span",null,i.get("sprint.delete")))},t.prototype.renderEditLink=function(){return o.createElement(a.PopupMenuLink,{goto:1,className:"popup-menu-link"},o.createElement("div",{className:"popup-menu-item",onClick:this.onClickEditLink},o.createElement(a.Icon,{name:"pencil"}),o.createElement("span",null,i.get("sprint.edit"))))},t.prototype.renderDeleteMenu=function(){var e=this.state.isRequesting?o.createElement(l.a,null):o.createElement(v,{scenarioFieldConfigs:this.props.scenarioFieldConfigs,sprint:this.props.sprint,taskStatus:this.state.taskStatus,onClose:this.closePopup,onSuccess:this.props.onDeleteSprint});return o.createElement(a.PopupMenuView,{className:"popup-menu-view popup-sub-menu-view",index:2,title:i.get("sprint.delete")},e)},t.prototype.renderEditMenu=function(){return o.createElement(a.PopupMenuView,{className:"popup-menu-view popup-sub-menu-view",index:1,title:i.get("sprint.edit")},o.createElement(m,{sprint:this.props.sprint,onSave:this.onSave}))},t.prototype.renderMainMenu=function(e){var t=null;this.props.disablePlanning||"complete"===this.props.sprint.status||(t=this.renderPlanningMenuItem());var n=null;this.props.disableChangeStatus||"future"!==this.props.sprint.status||this.props.isEmptySprint||(n=this.renderStartMenuItem());var r=null;return this.props.disableChangeStatus||"active"!==this.props.sprint.status||(r=this.renderCompleteMenuItem()),o.createElement(a.PopupMenuView,{className:"popup-menu-view",index:0,title:i.get("sprint.popup.edit.menu.title")},t,n,r,e.editLink,e.deleteLink)},t.prototype.render=function(){var e=o.createElement(a.Icon,{name:"more",className:"sprint-edit-menu-trigger",onClick:this.onTrigger}),t=r.f(this.props.disableEdit||"complete"===this.props.sprint.status?[null,null]:[this.renderEditLink(),this.renderEditMenu()],2),n=t[0],i=t[1],s=r.f(this.props.disableDelete?[null,null]:[this.renderDeleteLink(),this.renderDeleteMenu()],2),c=s[0],l=s[1];return o.createElement(a.PopupMenu,{ref:this.setPopupRef,className:"sprint-edit-popup-menu",main:0,trigger:e,placement:"bottomRight",titleCls:"popup-title"},this.renderMainMenu({editLink:n,deleteLink:c}),i,l)},t.defaultProps={gtaControl:"Table Button"},t}(o.PureComponent)},DKtpwQIy:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";return e.invisibleCount&&(o+=' <div class="invisible-wrapper flex"> <span class="icon icon-lock flex flex-center flex-vcenter"></span> <p>'+r(e.hint)+"</p> </div>"),o}},DQtvbgKp:function(e,t,n){},DWJahcmN:function(e,t,n){"use strict";n.r(t);var r=n("oBMTqYJ0"),o=n("AjX2Fov0"),i=n("8Jjrp/1c"),s=n("mrSGxOB2"),a=n("q1tIBJhx"),c=n("sa1Ed382"),l=n("s0r7VfKc"),u=n("PVLVtUMG"),p=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeSuccess=function(e,t){n.props.onChangeSuccess&&n.props.onChangeSuccess(t),c.gta.event({action:"switch status",control:"label"})},n.state={taskflowStatus:null},n}return s.d(t,e),t.prototype.componentDidMount=function(){this.isWithTaskflowStatus(this.props)||this.handleProps(this.props.taskflowStatusId)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this.isWithTaskflowStatus,n=this.props;if(!t(e)&&!t(n)){var r=e.taskflowStatusId;n.taskflowStatusId!==r&&r&&this.handleProps(r)}},t.prototype.componentWillUnmount=function(){this.taskflowStatusSub$&&this.taskflowStatusSub$.unsubscribe()},t.prototype.render=function(){if(this.props.muted||this.props.disabled||this.props.locked)return this.renderLabel();var e=this.getTaskFlowStatus();return e&&a.createElement(i.CheckBoxWrapper,{type:this.props.type,taskId:this.props.taskId,taskflowStatusId:e._id,jumpToNext:this.props.jumpToNext,showJumpToNext:this.props.showJumpToNext,onToggleJumpToNext:this.props.onToggleJumpToNext,onChange:this.props.onChange,onOpen:this.props.onOpen,onChangeSuccess:this.onChangeSuccess,onChangeError:this.props.onChangeError},this.renderLabel())},t.prototype.isWithTaskflowStatus=function(e){return!!e.taskflowStatus},t.prototype.getTaskFlowStatus=function(){return this.isWithTaskflowStatus(this.props)?this.props.taskflowStatus:this.state.taskflowStatus},t.prototype.handleProps=function(e){var t=this;this.taskflowStatusSub$&&this.taskflowStatusSub$.unsubscribe(),this.taskflowStatusSub$=l.default.getTaskflowStatus(e).changes().subscribe(function(e){var n=s.f(e,1)[0];t.setState({taskflowStatus:n})})},t.prototype.renderLabel=function(){if(this.props.children)return this.props.children;var e=this.getTaskFlowStatus();return e?a.createElement(u.StatusCheckboxTaskflow,{className:this.props.className,kind:e.kind,title:e.name,size:this.props.size,fixedWidth:this.props.fixedWidth,muted:this.props.muted,disabled:this.props.disabled,locked:this.props.locked}):null},t}(a.PureComponent),d=n("tLZJUYWX"),h=n("GESwhXbR"),m=n("TSYQbtd+"),f=n.n(m),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChangeSuccess=function(e){t.props.onChangeSuccess&&t.props.onChangeSuccess(e),c.gta.event({action:"switch status",control:"checkbox"})},t.onClickCheckBox=function(e){e.stopPropagation(),t.updateTaskSub$&&t.updateTaskSub$.unsubscribe(),t.updateTaskSub$=l.default.fetch.updateTaskIsDone(t.props.taskId,!t.props.isDone).debounceTime(300).subscribe({next:function(e){if(t.props.onChangeSuccess)return e&&t.props.onChangeSuccess(e)}})},t}return s.d(t,e),t.prototype.componentWillUnmount=function(){this.updateTaskSub$&&this.updateTaskSub$.unsubscribe()},t.prototype.render=function(){return!this.props.taskflowStatusId||!this.props.hasPermission?this.renderCheckBox():a.createElement(i.CheckBoxWrapper,{taskId:this.props.taskId,taskflowStatusId:this.props.taskflowStatusId,onChangeSuccess:this.onChangeSuccess},this.renderCheckBox())},t.prototype.getTooltipDes=function(){var e=this.props,t=e.subtaskCount,n=e.parent,r=!!this.props.taskflowStatusId||(!t||t.total===t.done),o=!(n&&n.isDone);return c.user.get("isGhost")?d.get("task.detail.changeState.denied"):this.props.hasPermission?this.props.isDone&&!o?d.get("task.detail.subtask.redo.tip"):r?"":d.get("task.detail.subtask.uncomplete.tip"):d.get("task.view.authority.msg")},t.prototype.renderCheckBox=function(){if(this.props.children)return this.props.children;var e=this.getTooltipDes(),t=!this.props.taskflowStatusId&&!e,n=f()(this.props.className,{hinted:!!e});return a.createElement(h.Todobox,{"data-title":e,className:n,checked:this.props.isDone,disabled:!!e,size:this.props.size,onClick:t?this.onClickCheckBox:void 0})},t.defaultProps={size:"small"},t}(a.PureComponent);n.d(t,"TaskflowStatusLabelList",function(){return r.a}),n.d(t,"TaskflowStatusLabelMenuItem",function(){return o.a}),n.d(t,"LIB_PANEL_SELECTOR",function(){return i.LIB_PANEL_SELECTOR}),n.d(t,"CheckBoxWrapper",function(){return i.CheckBoxWrapper}),n.d(t,"TaskCheckBoxLabel",function(){return p}),n.d(t,"TaskCheckBox",function(){return g})},DZqMELyD:function(e,t,n){e.exports={"task-priority":"task-priority__2xYu","task-priority__inner":"task-priority__inner__3LUy","task-priority--high":"task-priority--high__2CGB","task-priority--urgent":"task-priority--urgent__2CLk"}},DcVAUTaR:function(e,t,n){},"DlFnP/8K":function(e,t,n){e.exports={archive:"archive__mMNO",copy:"copy__3nBT",testplan:"testplan__3fne","selector-section":"selector-section__2ePK","selector-section-label":"selector-section-label__3ELY"}},DlSfLmL2:function(e,t){e.exports=function(e){return'<div class="modal-header text-center flex-static"> <div class="modal-title text-center">'+tb_i18n.get("organization.member.assign.team")+'</div> <a class="modal-close pull-right icon icon-remove" data-dismiss="modal"></a></div><div class="modal-body thin-scroll flex-fill"></div><div class="modal-footer"> <button type="button" class="btn btn-primary submit disabled"> '+tb_i18n.get("save")+" </button></div>"}},DlvflEoh:function(e,t,n){},DnU0YLHy:function(e,t){e.exports=function(e){return'<div class="copy-or-move-task"> <p class="menu-title muted">'+e.title+'</p> <div class="task-menu-stage-selector"></div></div>'}},DnZnhmk5:function(e,t,n){e.exports={placeholder:"placeholder__1KeP","cell-content":"cell-content__2u2a"}},DncXs78o:function(e,t,n){e.exports={"projecttag-selector-trigger":"projecttag-selector-trigger__eeU9"}},"E3j+w83k":function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;c=n("sa1Ed382"),n("4bWDEe5E"),o=n("gLdDAp90"),i=n("oEzVJ1gN"),r=n("aD6I3VT4"),s=n("8Msz9vzD").ScenarioFieldConfigComponent,a=n("NkCDGCxT").fetchScenarioFieldConfigCollection,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.tagName="section",t.prototype.viewName="DetailInfosScenarioConfigView",t.prototype.className="detail-infos-scenario-config-view no-border-wrapper",t.prototype.initialize=function(e){return t.__super__.initialize.apply(this,arguments),this.options=e,this.objectModel=e.objectModel,this.projectModel=e.projectModel,this.boundToObjectType=e.boundToObjectType,this.configsCollection=e.configsCollection,this.fetch().then((n=this,function(){return n.listen(),n.render()}));var n},t.prototype.fetch=function(){return Promise.all([this.fetchScenarioFieldConfigCollection()])},t.prototype.fetchScenarioFieldConfigCollection=function(){return this.configsCollection?Promise.resolve(this.configsCollection):a(this.projectModel.id,this.boundToObjectType,this.projectModel.isTaskflowEnabled()).then((e=this,function(t){e.configsCollection=t}));var e},t.prototype.isCase=function(){return!0},t.prototype.hasPermission=function(){return!0},t.prototype.listen=function(){var e;return e=["change:_scenariofieldconfigId","change:isArchived"],"task"===this.boundToObjectType&&e.push("change:_executorId"),this.listenTo(this.objectModel,e.join(" "),this.render),this.listenTo(this.configsCollection,["add","remove","change"].join(" "),this.render)},t.prototype.render=function(){var e,t,n,r,o,i;return t=this.objectModel.get("_scenariofieldconfigId"),n=this.configsCollection.get(t)||this.configsCollection.getDefaultModel(),o=[this.objectModel.hasPermission("put"),!this.objectModel.get("isArchived")].every(function(e){return e}),r=this.projectModel.hasPermission("scenariofieldconfig.edit"),this.config=n.toJSON(),e=void 0,(i=this.projectModel.isTaskflowEnabled()&&"task"===this.boundToObjectType)&&(e=this.objectModel.getAcceptedStatusKinds()),this.requestReactView(this.el,s,{boundToObjectType:this.boundToObjectType,hideTitle:this.options.hideTitle,showStatuses:i,acceptedStatusKinds:e,hasPermission:o,hasEditConfigPermission:r,scenarioFieldConfigs:this.configsCollection.toJSON(),scenarioFieldConfig:this.config,onSave:this.onSave.bind(this),onUpdateStatus:this.onUpdateStatus.bind(this),onRequestConfigView:this.requestApplicationFieldsConfig.bind(this),gtaHandler:this.gtaHandler.bind(this)})},t.prototype.onSave=function(e){if(this.config._id!==e._id)return"task"===this.boundToObjectType?this.objectModel.saveAttr("scenariofieldconfigId",null,{attrs:{_scenariofieldconfigId:e._id},wait:!0}):"event"===this.boundToObjectType?o.saveAttrs(this.objectModel,{_scenariofieldconfigId:e._id}):void 0},t.prototype.onUpdateStatus=function(e,t){var n;return n={attrs:{_scenariofieldconfigId:e},wait:!0},this.objectModel.moveByStatus(t,n)},t.prototype.requestApplicationFieldsConfig=function(){var e,t;return e="start to configurate "+this.boundToObjectType+" type",this.gtaHandler(e),t="task"===this.boundToObjectType?"taskFieldConfig":"eventFieldConfig",c.APP.requestSubView(i,{projectModel:this.projectModel,tabName:t})},t.prototype.gtaHandler=function(e){var t;return t={action:e,control:"Type List",type:"task"===this.boundToObjectType?this.objectModel.isSubtask()?"subtask":"task":this.boundToObjectType},c.gta.event(t)},t}()},E4Gg0AdJ:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("s0r7VfKc"),a=n("0c87E3oj"),c=n("ZxHluEX4"),l=n("fpeYzDX0"),u=n("fhg7Ktga"),p=n("TSYQbtd+"),d=n.n(p),h=n("GESwhXbR"),m=n("tLZJUYWX"),f=n.n(m),g=n("UaRQ/2K/"),v=n.n(g),b=i.a.createElement(h.Icon,{name:"chevron-right",className:v.a.separator}),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MANY=3,t}return r.d(t,e),t.prototype.render=function(){return i.a.createElement("div",{className:v.a["task-path"]},this.renderProject(),this.renderTasklist(),this.renderStage())},t.prototype.renderProject=function(){var e=this.props.projectName;if(e){var t=d()(v.a.portion,{many:e.length>=this.MANY});return!!e&&i.a.createElement("div",{className:t,title:e},e)}},t.prototype.renderTasklist=function(){if(!this.props.isTasklistEnabled)return null;var e=this.props.tasklistName,t=this.canMove(),n=t?this.props.onTasklistClick:void 0,r=d()(v.a.portion,{clickable:t,many:!!e&&e.length>=this.MANY});return!!e&&i.a.createElement(i.a.Fragment,null,b,i.a.createElement("div",{key:t.toString(),onClick:n,className:r,title:e},e))},t.prototype.renderStage=function(){if(!this.props.showStage)return null;var e=this.props.stageName||f.a.get("task.detail.stage.unset"),t=this.canMove(),n=t?this.props.onStageClick:void 0,r=d()(v.a.portion,{clickable:t,many:e.length>=this.MANY});return!!e&&i.a.createElement(i.a.Fragment,null,b,i.a.createElement("div",{key:t.toString(),onClick:n,className:r,title:e},e))},t.prototype.canMove=function(){return this.props.putMovePermission},t}(i.a.PureComponent),k=n("ZLvQ/AW4"),_=n("kzOoOGf8"),w=n.n(_),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e,n){var r=e._id;t.props.onAncestorClick(n,r)},t}return r.d(t,e),t.prototype.render=function(){var e=this.props.ancestors||[];return i.a.createElement(k.a,{prefix:this.renderPrefix(),list:e,itemToString:this.itemToString,onClick:this.handleClick})},t.prototype.renderPrefix=function(){return i.a.createElement("div",{className:w.a.prefix},f.a.get("subtask.creator.belongs.to"))},t.prototype.itemToString=function(e){return e.content},t}(i.a.PureComponent),S=n("qKyDwEZb"),E=n.n(S),T=function(e){var t=!e.isArchived,n=d()(E.a["free-task-path"],{disabled:!t});return i.a.createElement("div",{className:n,onClick:t?e.onProjectSelect:void 0,key:t.toString()},f.a.get("task.detail.nav.stage.selector"))},I=n("u//1fy1x"),M=n("GPNoQLd7"),j=n.n(M),P=n("fKO3iLmS"),x=n.n(P),N=Object(I.default)(j.a,function(e){return d()(x.a["task-unique-id"],{archived:e.isArchived})}),O=n("59lI6xTj"),R=n.n(O),D=function(e){var t=d()(e.className,R.a["task-content-readonly"]);return i.a.createElement("div",{className:t},e.content)},L=n("0mzWLe3g"),z=n.n(L),A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.divisionCaptionGetter=function(e){switch(e){case"title":return t.renderTaskContentReadonly();default:return null}},t}return r.d(t,e),t.prototype.render=function(){return i.a.createElement(c.a,{disabled:this.props.isArchived,objectType:this.renderObjectType(),objectCaption:this.renderObjectCaption(),divisionCaptionGetter:this.divisionCaptionGetter,actionList:this.props.actionList})},t.prototype.renderObjectType=function(){return i.a.createElement(l.ObjectType,{object:this.props.task,objectModel:this.props.taskModel,projectModel:this.props.project})},t.prototype.renderObjectCaption=function(){var e=this.props.isArchived?this.props.isSubtask?this.renderTaskPath():this.renderObjectArchiveStatus():this.renderTaskPath();return i.a.createElement(i.a.Fragment,null,e,this.renderTaskUniqueIdSeparator(),this.renderTaskUniqueId())},t.prototype.renderObjectArchiveStatus=function(){return i.a.createElement(u.a,{isArchived:this.props.isArchived,objectType:"task"})},t.prototype.renderTaskUniqueIdSeparator=function(){return!this.props.taskIdEnabled||this.props.isIndie?null:i.a.createElement("div",{className:z.a["object-caption-divider"]})},t.prototype.renderTaskUniqueId=function(){return this.props.project?i.a.createElement(N,{isArchived:this.props.isArchived,uniqueId:this.props.uniqueId,projectModel:this.props.project,copyable:!0}):null},t.prototype.renderTaskPath=function(){return this.props.isSubtask?i.a.createElement(C,{ancestors:this.props.ancestors,onAncestorClick:this.props.onAncestorClick}):this.props.isIndie?i.a.createElement(T,{isArchived:this.props.isArchived,onProjectSelect:this.props.onProjectSelect}):i.a.createElement(y,{putMovePermission:this.props.putMovePermission,isTasklistEnabled:this.props.isTasklistEnabled,projectName:this.props.projectName,showStage:this.props.showStage,stageName:this.props.stageName,tasklistName:this.props.tasklistName,onTasklistClick:this.props.onTasklistClick,onStageClick:this.props.onStageClick})},t.prototype.renderTaskContentReadonly=function(){return i.a.createElement(D,{content:this.props.content})},t}(i.a.PureComponent),V=n("sa1Ed382"),F=n("kqHT5GUC"),B=n("ekrwq9FP"),U=n("4eyW8sAo"),$=n("0g2l+SZL"),H=n("Kwu9X67e"),G=n("m20r5o9x"),q=n("jgtiIYUZ"),W=n("HLWm+6U5"),J=n("Ino9OVGK"),X=n("n7DEg2nM"),Y=n.n(X),K=function(e){function t(t){var n=e.call(this,t)||this;return n.onCreateAndLinkTestgroup=function(e,t){n.linkSub$&&n.linkSub$.unsubscribe(),n.linkSub$=s.default.fetch.createTestplanGroup(t,{name:e}).do(J.testgroupCreationToast).concatMap(function(e){return s.default.fetch.post("objectlinks",{linkedType:"testplangroup",parentType:"task",_linkedId:e._id,_parentId:n.props.task._id}).do(function(){V.gta.event({action:"added content",control:"Detail Page",type:"testcase group"})})}).subscribe()},n.onTestgroupCreatorModalVisibleChange=function(e){e&&V.gta.event({action:"add content",control:"Detail Page",type:"testcase group"}),n.setState({testgroupCreatorModalOpened:e})},n.onTestgroupCreatorModalVisibleOpen=function(){n.setState({testgroupCreatorModalOpened:!0})},n.state={testgroupCreatorModalOpened:!1},n}return r.d(t,e),t.prototype.componentWillUnmount=function(){this.linkSub$&&this.linkSub$.unsubscribe()},t.prototype.render=function(){var e=d()(this.props.className,Y.a["task-detail-action-list"]);return i.a.createElement("div",{className:e},this.renderContent())},t.prototype.renderContent=function(){return this.props.isGhost?this.renderCloseAction():this.props.isArchived?i.a.createElement(i.a.Fragment,null,this.renderObjectRestoreAction(),this.renderObjectDeleteAction(),this.renderCloseAction()):i.a.createElement(i.a.Fragment,null,this.renderTestgroupCreatorAction(),this.renderObjectShareAction(),this.renderObjectLinkAction(),this.renderObjectLikeCountAction(),this.renderMoreAction(),this.renderCloseAction())},t.prototype.renderTestgroupCreatorModal=function(){return i.a.createElement(W.TestgroupCreatorModal,{name:this.props.task.content,project:this.props.project.toJSON(),opened:this.state.testgroupCreatorModalOpened,onVisibleChange:this.onTestgroupCreatorModalVisibleChange,onSubmit:this.onCreateAndLinkTestgroup})},t.prototype.renderTestgroupCreatorAction=function(){return this.props.project&&this.props.project.isAppEnabled("testplan")&&this.props.isStory&&this.props.project.hasPermission("testgroup.post")&&i.a.createElement(i.a.Fragment,null,i.a.createElement(h.Button,{color:"blue",type:"subtle",size:"smaller",onClick:this.onTestgroupCreatorModalVisibleOpen},f.a.get("task.detail.action.list.testgroup.creator.handler"),i.a.createElement(h.Tooltip,{title:f.a.get("task.detail.action.list.testgroup.creator.help")},i.a.createElement(h.Icon,{name:"help",size:14,className:Y.a["testgroup-creator-help"]}))),this.renderTestgroupCreatorModal())},t.prototype.renderObjectShareAction=function(){return this.props.isShared&&i.a.createElement(F.ObjectShareStatus,{objectModel:this.props.taskModel,objectType:"task"})},t.prototype.renderObjectLinkAction=function(){return i.a.createElement(B.ObjectLink,{object:this.props.task,type:"task",isSubtask:this.props.taskModel.isSubtask(),title:f.a.get("object.link.copy.handler.task"),className:"task-detail-action-list__action"})},t.prototype.renderObjectLikeCountAction=function(){return i.a.createElement(U.a,{objectModel:this.props.taskModel,boundToObjectType:"task",className:"task-detail-action-list__action"})},t.prototype.renderMoreAction=function(){return i.a.createElement($.a,{onClick:this.props.onMenuToggle,className:"task-detail-action-list__action"})},t.prototype.renderCloseAction=function(){return i.a.createElement(H.a,{onClose:this.props.onClose,className:"task-detail-action-list__action"})},t.prototype.renderObjectRestoreAction=function(){return i.a.createElement(G.a,{putArchivePermission:this.props.putArchivePermission,onRestore:this.props.onRestore,className:"task-detail-action-list__action"})},t.prototype.renderObjectDeleteAction=function(){return i.a.createElement(q.a,{delPermission:this.props.delPermission,onClick:this.props.onDelete,className:"task-detail-action-list__action"})},t}(i.a.PureComponent),Q=n("cXOPvvXb"),Z=n("IlPYFVUU"),ee=n("PoVVDkvK"),te=n.n(ee),ne=function(e){return i.a.createElement(Z.a,{key:e.content,defaultValue:e.content,disabled:!e.putPermission,onChange:e.onContentChange,className:d()(te.a["task-content"],{done:e.isDone})})},re=n("69eSgGwt"),oe=n.n(re),ie=Object(I.default)(oe.a),se=n("5i+7voIP"),ae=n.n(se),ce=Object(I.default)(ae.a),le=n("IOVY6N/r"),ue=n.n(le),pe=n("LK1lvkr8"),de=n("RqASgP7q"),he=n.n(de),me=Object(I.default)(he.a),fe=n("SGcmjT4+"),ge=n("+/BQlYPx"),ve=n("AEkluhuA"),be=n.n(ve),ye=Object(I.default)(be.a),ke=n("wScl0p2y"),_e=i.a.lazy(function(){return r.b(void 0,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,n.e(23).then(n.bind(null,"FTs12xZG"))];case 1:return[2,{default:e.sent().DetailPlugin}]}})})}),we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){return i.a.createElement(i.a.Suspense,{fallback:null},i.a.createElement(ke.ErrorBoundary,{fallback:void 0},i.a.createElement(_e,r.a({},this.props))))},t}(i.a.PureComponent),Ce=n("yt+aIX9v"),Se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getInheritedInfo=function(){var e=t.props.isIndie?t.props.involveMembers:t.props.involveMembers.filter(function(e){return t.props.members&&t.props.members.findMember(e)});return Promise.resolve({name:t.props.content,involvers:t.props.involvers,involveMembers:e})},t}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.involveMembers,n=e.project,r=this.props._creatorId===V.user.id||t.includes(V.user.id)||n&&n.getRoleScope()>0;return i.a.createElement(i.a.Fragment,null,this.props.banner,i.a.createElement(Q.d,{objectType:"task",divisions:this.props.divisions,hasPermission:r,onDivisionListChange:this.props.onDivisionListChange}),this.renderTitleDivision(),this.renderDivisionList(),this.renderPluginList())},t.prototype.renderTitleDivision=function(){return i.a.createElement(Q.c,{type:"title"},i.a.createElement(ne,{content:this.props.content,isDone:this.props.isDone,putPermission:this.props.putPermission,onContentChange:this.props.onContentChange}))},t.prototype.renderDivisionList=function(){var e=this.props.divisions,t=void 0===e?Q.h:e,n=this.getDivisionMap();return t.map(function(e){return i.a.createElement(Q.b,{key:e,type:e},n[e])})},Object.defineProperty(t.prototype,"indieFakeScenarioFieldList",{get:function(){var e=!this.props.isArchived;return this.props.isIndie&&i.a.createElement("div",{className:ue.a.prototype.className,key:"fake-scenario-field-list"+e},i.a.createElement(pe.a,{objectModel:this.props.taskModel,canEdit:e}),i.a.createElement(me,{taskModel:this.props.taskModel,canEdit:e}),i.a.createElement(ye,{objectModel:this.props.taskModel,canEdit:e}))},enumerable:!0,configurable:!0}),t.prototype.getDivisionMap=function(){return{scenariofields:[i.a.createElement(ie,{taskModel:this.props.taskModel,projectModel:this.props.project,membersCollection:this.props.members,_organizationId:this.props._organizationId,onDateSelectExternal:this.props.onDateSelectExternal,onToggleDone:this.props.onToggleDone,onChangeStatusError:this.props.onChangeStatusError,key:"TaskBasicFieldList"}),this.indieFakeScenarioFieldList,this.taskScenarioFieldList],subtasks:[i.a.createElement(ce,{taskModel:this.props.taskModel,subtasksCollection:this.props.subtasks,membersCollection:this.props.members,subtaskDefaultScenarioFieldConfig:this.props.subtaskDefaultScenarioFieldConfig,key:"SubtaskList"})],links:[this.detailInfos]}},Object.defineProperty(t.prototype,"taskScenarioFieldList",{get:function(){if(!this.props.isIndie&&this.props.project)return i.a.createElement(ge.a,{objectModel:this.props.taskModel,projectModel:this.props.project,boundToObjectType:"task",key:"TaskScenarioFieldList"})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"detailInfos",{get:function(){return i.a.createElement(fe.a,{objectModel:this.props.taskModel,boundToObjectType:"task",where:this.props.where,infos:["link","belinked"],getInheritedInfo:this.getInheritedInfo,key:"DetailInfos"+this.props.isArchived})},enumerable:!0,configurable:!0}),t.prototype.renderPluginList=function(){var e=this,t={type:Ce.FeatureType.PluginForTaskDetail,status:Ce.FeatureStatus.Enabled};return this.props.plugins?this.props.plugins.where(t).map(function(t){return e.renderPlugin(t)}):null},t.prototype.renderPlugin=function(e){return i.a.createElement(we,{key:e.id,object:this.props.taskModel.toJSON(),plugin:e.toJSON()})},t}(i.a.PureComponent),Ee=n("H5ERZgIq"),Te=n("6kNLk80W"),Ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDivisionListChange=function(e){return r.b(t,void 0,void 0,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return t=this.props.taskModel.id,n=e.map(function(e){return e.type}),[4,s.default.updateTaskDivisions(t,n).toPromise()];case 1:return r.sent(),[2]}})})},t}return r.d(t,e),t.prototype.render=function(){return i.a.createElement(a.a,{head:this.renderHead(),body:this.renderBody(),discussion:this.renderDiscussion(),foot:this.renderFoot()})},t.prototype.renderHead=function(){return i.a.createElement(A,{ancestors:this.props.ancestors,content:this.props.content,isArchived:this.props.isArchived,isIndie:this.props.isIndie,isSubtask:this.props.isSubtask,isTasklistEnabled:this.props.isTasklistEnabled,projectName:this.props.projectName,putMovePermission:this.props.permissions.putMove,showStage:this.props.showStage,stageName:this.props.stageName,taskIdEnabled:this.props.taskIdEnabled,tasklistName:this.props.tasklistName,uniqueId:this.props.uniqueId,project:this.props.project,task:this.props.task,taskModel:this.props.taskModel,onTasklistClick:this.props.onTasklistClick,onStageClick:this.props.onStageClick,onAncestorClick:this.props.onAncestorClick,onProjectSelect:this.props.onProjectSelect,actionList:this.renderActionList()})},t.prototype.renderActionList=function(){return i.a.createElement(K,{project:this.props.project,delPermission:this.props.permissions.del,isArchived:this.props.isArchived,isGhost:this.props.isGhost,isStory:this.props.isStory,putArchivePermission:this.props.permissions.putArchive,postPermission:!0,isShared:this.props.isShared,task:this.props.task,taskModel:this.props.taskModel,onClose:this.props.onClose,onRestore:this.props.onRestore,onDelete:this.props.onDelete,onMenuToggle:this.props.onMenuToggle})},t.prototype.renderBody=function(){return i.a.createElement(Se,{_creatorId:this.props.task._creatorId,_organizationId:this.props._organizationId,content:this.props.content,divisions:this.props.divisions,involveMembers:this.props.involveMembers,involvers:this.props.involvers,isArchived:this.props.isArchived,isDone:this.props.isDone,isIndie:this.props.isIndie,putPermission:this.props.permissions.put,subtaskDefaultScenarioFieldConfig:this.props.subtaskDefaultScenarioFieldConfig,where:this.props.where,members:this.props.members,project:this.props.project,subtasks:this.props.subtasks,plugins:this.props.plugins,taskModel:this.props.taskModel,onDivisionListChange:this.handleDivisionListChange,onContentChange:this.props.onContentChange,onDateSelectExternal:this.props.onDateSelectExternal,onToggleDone:this.props.onToggleDone,onChangeStatusError:this.props.onChangeStatusError,banner:this.props.banner})},t.prototype.renderDiscussion=function(){return i.a.createElement(Ee.b,{objectModel:this.props.taskModel,object:this.props.taskModel.toJSON(),where:this.props.where,projectId:this.props.project?this.props.project.id:void 0,organizationId:this.props._organizationId,projectModel:this.props.project,scenario:this.props.project?void 0:"organization-members"})},t.prototype.renderFoot=function(){return i.a.createElement(Te.ActivityCreator,{_projectId:this.props.project?this.props.project.id:void 0,_organizationId:this.props._organizationId,objectModel:this.props.taskModel,boundToObjectType:"task",isShared:this.props.isShared,autoFocus:Object(Te.autoFocusActivityCreator)(this.props.where)})},t}(i.a.PureComponent);n.d(t,"TaskDetail",function(){return Ie})},E5wMRikh:function(e,t,n){"use strict";n.r(t),n.d(t,"SpaceCompletion",function(){return a});var r=n("q1tIBJhx"),o=n.n(r),i=n("Qus09TdU"),s=n.n(i),a=function(){return o.a.createElement("div",{className:s.a.root})}},EBlcl0eU:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g=[].slice;n("+2RfZ2TT"),a=n("a+N5u/Cl"),c=n("2qRnoGmE"),m=n("sa1Ed382"),o=n("bZr3G77e"),s=n("RQ44psah"),i=n("HYobN8SQ"),r=n("qAdrY/s+"),d=n("VLEJ/3fv"),p=d.getUserProfile,u=d.getPaidOrgs,f=n("gh8QIhMV").throwError,h=i.namespace("intercom"),l=function(e){return o.ajax(s.pay.orgInformant(e),{silentError:!0,xhrFields:{withCredentials:!0}})},e.exports=function(){function e(e){var t,n;this.app_id=e,window.Intercom=function(){return window.Intercom.action(arguments)},window.Intercom.q=[],window.Intercom.action=function(e){return window.Intercom.q.push(e)},(t=document.createElement("script")).type="text/javascript",t.async=!0,t.src="https://widget.intercom.io/widget/"+this.app_id,(n=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,n),this.type="intercom"}return e.prototype.boot=function(){var e,t,n,o;return t=p(),window.Intercom("boot",Object.assign(t,{app_id:this.app_id})),u().length>0&&!c.FREE&&(n=m.PREFERENCE.get("lastWorkspace"),l(n).then((o=this,function(e){var n,r;return r=e.saler,n=e.csm,r&&a.extend(t,a.reduce(r,function(e,t,n){return t&&(e["saler."+n]=t),e},{})),n&&a.extend(t,a.reduce(n,function(e,t,n){return t&&(e["csm."+n]=t),e},{})),o.update(t)})).catch(function(e){return f("Failed to get org ("+n+") informant "+e)})),e=$("body"),this.$closeTip=$(r()).appendTo(e),e.on("mouseenter.intercom",".intercom-app, #close-intercom",function(e){return function(t){if(0===$(".intercom-launcher-frame").contents().find(".intercom-launcher-active").length)return e.$closeTip.fadeIn(),clearTimeout(e.delayId)}}(this)),e.on("mouseleave.intercom",".intercom-app, #close-intercom",function(e){return function(t){return e.delayId=a.delay(function(){return e.$closeTip.fadeOut()},200)}}(this)),e.on("click.intercom","#close-intercom",function(e){return function(t){return e.shutdown()}}(this)),this.onShow(function(e){return function(){return e.$closeTip.fadeOut()}}(this)),this},e.prototype.update=function(){var e;return e=1<=arguments.length?g.call(arguments,0):[],window.Intercom.apply(window,["update"].concat(g.call(e))),this},e.prototype.shutdown=function(){return h("dontAutoBoot",!0),window.Intercom("shutdown"),$("body").off(".intercom"),this.$closeTip.remove(),this},e.prototype.hide=function(){return window.Intercom("hide"),this},e.prototype.show=function(){return window.Intercom("show"),this},e.prototype.showMessages=function(){return window.Intercom("showMessages"),this},e.prototype.showNewMessage=function(){var e;return e=1<=arguments.length?g.call(arguments,0):[],window.Intercom.apply(window,["showNewMessage"].concat(g.call(e))),this},e.prototype.onHide=function(e){return window.Intercom("onHide",e),this},e.prototype.onShow=function(e){return window.Intercom("onShow",e),this},e.prototype.trackEvent=function(){var e;return e=1<=arguments.length?g.call(arguments,0):[],window.Intercom.apply(window,["trackEvent"].concat(g.call(e))),this},e.prototype.allowAutoBoot=function(){return!h.has("dontAutoBoot")},e}()},ECjfTaVg:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return a});var r=n("a+N5u/Cl"),o=function(e){return function(t){return r.contains(t,e)}},i=function(e){return"string"==typeof e},s=function(e){return r.isArray(e)&&e.length>0||r.isObject(e)&&r.has(e,"_id")},a=function(e,t){return r.contains(e,t)}},EDUzVJsM:function(e,t,n){e.exports={"task-copy":"task-copy__2K-N","button-wrapper":"button-wrapper__3Dfb","link-checker":"link-checker__14HH","task-copy-hint":"task-copy-hint__GEGx","task-copy-title":"task-copy-title__vcbK","task-copy-content-wrapper":"task-copy-content-wrapper__3zKE","task-copy-subtitle":"task-copy-subtitle__3gDa","task-copy-content":"task-copy-content__2zOI","task-copy-content-loading":"task-copy-content-loading__WWU2"}},"EE/OV44P":function(e,t,n){var r,o,i,s,a,c,l,u,p,d={}.hasOwnProperty;u=n("sa1Ed382"),p=n("2YVBljVg"),c=n("vmWJWrVe"),r=n("SoPiyaPE"),s=n("dXJoXsL7"),i=n("V8m3grrn").PluginIframe,o=n("KAUx9OcZ"),a=n("PE0KiLUa").URLSync,l=n("suI5NDUm").isAone,n("2qRnoGmE"),n("CxY0Mkc1"),n("QyjeWo4p"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,c),t.prototype.viewName="OrganizationAppPluginView",t.prototype.className="organization-app-plugin-view",t.prototype.initialize=function(e){var t,n;return this.organizationModel=e.organizationModel,t=e._pluginId,this.memberUserId=null!=(n=e.memberUserId)?n:null,this.url=e.url,this.status=new s({id:t}),this.listenTo(this.status,"change:status",this.onStatusChange),this.status.fetchOrganization(this.organizationModel.id)},t.prototype.onStatusChange=function(e,t){switch(t){case"loading":return this.renderLoading();case"end":return this.renderApp();case"error":case"empty":return this.backOrganization()}},t.prototype.renderLoading=function(){return this.$el.empty(),this.showLoadingIndicator()},t.prototype.initURLSync=function(){var e;if(l()&&(e=this.$("iframe")[0]))return this.urlSync=new a({iframe:e}),this.urlSync.init()},t.prototype.remove=function(){var e;return null!=(e=this.urlSync)&&e.destroy(),t.__super__.remove.apply(this,arguments)},t.prototype.renderApp=function(){var e,t,n,s;return"iframe"!==(s=this.status.get("plugin")).mode||"app_for_organization"!==s.type?this.backOrganization():(s._appName&&"member"===s._appName?(t=this.memberUserId?"/member/"+this.memberUserId:"",e=p.replaceMark(s.url,Object.assign({memberPath:t},this.organizationModel.toJSON())),this.$el.html(r()),this.$orgStructureContianer=this.$(".organization-container-iframe"),n=this.requestSubView(o,{organizationModel:this.organizationModel,memberUserId:this.memberUserId,url:e.replace(/\%2F/g,"/")}),this.$orgStructureContianer.html(null!=n?n.$el:void 0)):(e=this.url||p.replaceMark(s.url,this.organizationModel.toJSON()),this.requestReactView(this.el,i,{url:e,className:"organization-iframe",needLayerManager:!0,injectedStyle:{paddingTop:"48px"},mountNode:this.el})),this.initURLSync())},t.prototype.backOrganization=function(){return u.router.navigate("organization/"+this.organizationModel.id,{trigger:!0})},t}()},EGpl4vXb:function(e,t,n){e.exports=n.p+"images/lock@2x.f9dcd80b.png"},ELMSE2ES:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b={}.hasOwnProperty;g=n("a+N5u/Cl"),v=n("sa1Ed382"),m=n("3eMzznN/"),f=n("vmWJWrVe"),i=n("odY26VIi"),l=n("PjENi0m4"),d=n("FoX6irlC"),s=n("77NnVLwu"),r=n("kpf8nsNF"),a=n("4bWDEe5E"),p=n("GPNoQLd7"),h=n("X/61m4FI"),o=n("oOjzkqQz"),c=n("hVgOUOmn").SmartCard,u=n("DWJahcmN").TaskCheckBox,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)b.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,f),t.prototype.viewName="TaskView",t.prototype.tagName="li",t.prototype.className="task-view",t.prototype.events={"click .task-content-set":"showTaskDetail","click a.check-box:not(.non-checkable)":"toggleTaskStatus","click .task-tag":"onClickTaskTag"},t.prototype.initialize=function(e){var t,n;if(null!=e?e.model:void 0)return this.options=e,this.taskModel=e.model,t=this.taskModel.get("_projectId"),this.isGhost=v.user.get("isGhost"),m.promiseChain((n=this,function(){return!n.el}))(function(e){return function(){return e.isIndieTask()?Promise.resolve():s.resolveFetch(t)}}(this),function(e){return function(n){var r;return e.projectModel=n,e.projectModel?(r=e.projectModel.get("_organizationId"),e.tagsCollection=l.get(t),r?e.organizationTagsCollection=l.get(r):void 0):Promise.resolve()}}(this),function(e){return function(){return e.load()}}(this),function(e){return function(){return e.render(),e.listen()}}(this)),this.taskModel.getRoleScope()>=0||this.$el.addClass("no-right"),this},t.prototype.isIndieTask=function(){var e;return!(null!=(e=this.taskModel)?e.get("_projectId"):void 0)},t.prototype.fetchCustomFieldLinks=function(){return new Promise((e=this,function(t,n){var o;return o=r.genCacheId(e.projectModel.id,"application"),r.fetchT(o,{boundToObjectType:"application"})(function(r,o){return r&&n(),e.customFieldLinksCollection=o,t()})}));var e},t.prototype.fetchScenarioFieldConfigs=function(){return new Promise((e=this,function(t,n){var r,o;return o=!!e.taskModel.get("_taskflowstatusId"),r=a.genCacheId(e.projectModel.id,"task"),a.fetchT(r,{boundToObjectType:"task",attrs:{withTaskflowstatus:o}})(function(r,o){return r&&n(),e.scenarioFieldConfigsCollection=o,t()})}));var e},t.prototype.load=function(){return this.isIndieTask()?Promise.resolve():Promise.all([this.fetchCustomFieldLinks(),this.fetchScenarioFieldConfigs()])},t.prototype.listen=function(){var e;if(this.listenTo(this.taskModel,"remove destroy",this.remove),this.listenTo(this.taskModel,"change",(e=this,function(t){var n;return t.hasChanged("_executorId")&&(n=e.getExecutorFromCache(t.pick("_executorId","_projectId")))&&t.set({executor:n},{silent:!0}),e.render()})),!this.isIndieTask()&&(this.listenTo(this.customFieldLinksCollection,"change remove destroy",this.render),this.listenTo(this.scenarioFieldConfigsCollection,"change remove destroy",this.render),this.listenTo(this.tagsCollection,"change remove",this.render),this.listenTo(this.organizationTagsCollection,"change remove",this.render),"card"===this.options.viewType))return this.listenTo(this.projectModel,"change:applications",function(){if(this.projectModel.isAppChanged("taskUniqueId"))return this.render()})},t.prototype.render=function(){var e,t;if(null!=(e=this.priorityView)&&e.remove(),this.unmountReact(null!=(t=this.$checkBoxWrapper)?t.get(0):void 0),this.$el)return"card"===this.options.viewType?this.renderCardMode():(this.renderListMode(),this.$priorityNode=this.$(".task-priority-wrapper"),this.$checkBoxWrapper=this.$(".check-box-wrapper"),this.renderTaskIdLabel(),this.renderPriority(),this.renderCheckBox())},t.prototype.renderListMode=function(){var e,t,n,r,i;return this.$el.toggleClass("done",this.taskModel.get("isDone")),this.isIndieTask()||this.initScenarioFieldConfig(),(n=this.taskModel.toJSON()).content=g.escape(n.content),n.permissions=this.taskModel.hasPermissions("put"),n.noExecutor=this.options.noExecutor,n.noExecutor||(e=this.getExecutorFromCache(n),n.executorData=n.executor||e||this.options.executor),n.startDate&&(n.startDate=m.formatDate(n.startDate,{isUsePref:!0}),n.startDate.datetimeFormatString=this.datetimeFormat(n.startDate)),n.dueDate&&(n.dueDate=m.formatDate(n.dueDate,{isUsePref:!0}),n.dueDate.datetimeFormatString=this.datetimeFormat(n.dueDate)),n.datetimeString=this.getDatetimeString(n),t=n.accomplished&&m.formatDate(n.accomplished,{isUsePref:!0}).dateString||"",n.accomplished=tb_i18n.get("task.list.accomplished.datestring",t),n.priority=n.isDone?0:n.priority,n.displayPriority=this.displayOnCard("priority",n.priority),this.isIndieTask()||(n.taskListTitle=this.options.isUseProjectName&&(null!=(r=this.projectModel)?r.get("name"):void 0)||(null!=(i=d.find(n._tasklistId))?i.get("title"):void 0)),n.tags=this.isIndieTask()?[]:this.getTags(),n.series=this.taskModel.get("ancestorIds").length,n.type=this.taskModel.isSubtask()?"subtask":"task",this.$el.addClass("task list-mode").html(o(n))},t.prototype.renderCheckBox=function(){return this.requestReactView(this.$checkBoxWrapper.get(0),u,{taskId:this.taskModel.id,taskflowStatusId:this.taskModel.get("_taskflowstatusId"),hasPermission:this.taskModel.hasPermission("put.status"),isDone:this.taskModel.get("isDone"),subtaskCount:this.taskModel.get("subtaskCount"),parent:this.taskModel.get("parent"),onChangeSuccess:(e=this,function(t){var n;return null!=(n=e.taskModel)&&n.set(t),v.gta.event({action:"toggle complete status",type:e.taskModel.isSubtask()?"subtask":"task",series:e.taskModel.get("ancestorIds").length,category:t.isDone?"on":"off"})})});var e},t.prototype.renderCardMode=function(){var e,t,n,r;return this.$el.addClass("task-card-mode").attr("data-id",this.taskModel.id),(e=this.taskModel.toJSON()).executor||(e.executor=this.getExecutorFromCache(this.taskModel.pick("_executorId","_projectId"))),this.requestReactView(this.el,c,{tags:this.getTags(),scenarios:null!=(t=this.scenarioFieldConfigsCollection)?t.toJSON():void 0,customFields:null!=(n=this.customFieldLinksCollection)?n.toJSON():void 0,actions:{updateTask:(r=this,function(e){var t;return t=e.changes,r.taskModel.save(null,{attrs:t})})},card:e,uniqueIdPrefix:!this.isIndieTask()&&this.projectModel.isAppEnabled("taskUniqueId")&&this.projectModel.get("uniqueIdPrefix")||null,onOpenTaskDetail:this.showCardTaskDetail.bind(this)})},t.prototype.getExecutorFromCache=function(e){var t,n,r;if(t=e._executorId,n=e._projectId,t)return null!=(r=i.findOne(n,t))?r.toJSON():void 0},t.prototype.getTags=function(){var e,t;return e=g.chain(this.taskModel.get("tagIds")).map((t=this,function(e){var n,r,o;return(null!=(n=t.tagsCollection.get(e))?n.toJSON():void 0)||(null!=(r=t.organizationTagsCollection)&&null!=(o=r.get(e))?o.toJSON():void 0)})).compact().value(),this.displayOnCard("tag",e)?e:[]},t.prototype.initScenarioFieldConfig=function(){var e,t,n,r,o;return e=this.taskModel.get("_scenariofieldconfigId"),t=(null!=(n=this.scenarioFieldConfigsCollection)?n.get(e):void 0)||(null!=(r=this.scenarioFieldConfigsCollection)?r.find(function(e){return e.get("isDefault")}):void 0),this.scenarioTypes={},this.hasTaskFieldConfig=!!t,null!=t?t.get("scenariofields").forEach((o=this,function(e){return"customfield"===e.fieldType?o.scenarioTypes[e._customfieldId]=e.displayed:o.scenarioTypes[e.fieldType]=e.displayed})):void 0},t.prototype.displayOnCard=function(e,t){return!this.hasTaskFieldConfig||this.scenarioTypes[e]&&void 0!==t},t.prototype.renderTaskIdLabel=function(){var e;if(null!=(e=this.taskIdLabelView)&&e.remove(),!this.isIndieTask())return this.taskIdLabelView=this.requestSubView(p,{projectModel:this.projectModel,uniqueId:this.taskModel.get("uniqueId")}),this.taskIdLabelView.bind(this.$(".task-id-placeholder"))},t.prototype.getDatetimeString=function(e){var t,n;return n=e.startDate,t=e.dueDate,n&&t?n.dateString===t.dateString?n.dateTimeString+" - "+t.timeFormatString:n.datetimeFormatString+" - "+t.datetimeFormatString:n?tb_i18n.get("task.startDate.label",n.datetimeFormatString):t?tb_i18n.get("task.dueDate.label",t.datetimeFormatString):""},t.prototype.datetimeFormat=function(e){var t;return t=e.dateString,e.dateIsToday&&"00:00"!==e.timeFormatString?t+" "+e.timeFormatString:t},t.prototype.renderPriority=function(){var e;if(this.$priorityNode.get(0))return null!=(e=this.priorityView)&&e.remove(),this.priorityView=this.requestSubView(h,{priority:this.taskModel.get("priority"),onClickPriority:this.setPriority.bind(this)}),this.$priorityNode.html(this.priorityView.el)},t.prototype.setPriority=function(e){var t;return!this.isGhost&&(e!==this.taskModel.get("priority")?(t="card"===this.options.viewType,v.gta.event(g.extend({action:"select priority",note1:"current task",type:"task",category:this.parsePriorityGta(e)},t?{control:"Stage List"}:null)),this.taskModel.saveAttr("priority",e)):void 0)},t.prototype.onClickTaskTag=function(e){var t,n,r,o;return e.stopPropagation(),"function"==typeof(r=this.options).onTaskTagClick&&r.onTaskTagClick(),t=(o=this.taskModel.toJSON())._projectId,n=o._tasklistId,v.gta.event(null,"click","go to tasks"),v.router.navigate("project/"+t+"/tasks/scrum/"+n,{trigger:!0}),v.gta.event({action:"open detail",type:"project",control:"original project"})},t.prototype.showTaskDetail=function(){var e;if(v.gta.event({action:"open detail",type:"task",control:"Stage List"}),"card"!==this.options.viewType)return this.options.showTaskDetail?this.options.showTaskDetail():(e=this.taskModel.get("_id"),v.APP.openTaskPreviewer(e))},t.prototype.showCardTaskDetail=function(){return v.APP.openTaskPreviewer(this.taskModel,{isUsePanel:!0,hasLink:!1}),v.APP.currentView.updateUrl(this.taskModel.get("_tasklistId"),this.taskModel.id)},t.prototype.parsePriorityGta=function(e){return function(){switch(e){case 0:return"ordinary";case 1:return"urgent";case 2:return"very urgent";default:return"ordinary"}}()},t}()},EPRFTt9e:function(e,t,n){e.exports={"top-navigation":"top-navigation__1jPb","top-navigation-only-icon":"top-navigation-only-icon__du00","top-navigation-none":"top-navigation-none__2Aqq","navigation-item":"navigation-item__17SW","navigation-item-icon-more":"navigation-item-icon-more__2fNp","navigation-item-more":"navigation-item-more__NLzM","ellipsis-text":"ellipsis-text__1vFM","app-container":"app-container__1drU","app-top-bar":"app-top-bar__1oLd","iframe-container":"iframe-container__2m6m"}},ERBlrNSI:function(e,t,n){e.exports={"task-taskflow-status":"task-taskflow-status__Tm5q","task-taskflow-status__inner":"task-taskflow-status__inner__25JN"}},ERMGEf4U:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""});return'<div class="bind-hint text-center flex-fill"> <div> <span class="icon img-icon-jinshuju size-lg"></span><br> <p class="muted">'+tb_i18n.get("jinshuju.refresh.token.hint")+'</p> <p><a href="'+r(e.bindUrl)+'">'+tb_i18n.get("token.reauth")+"</a></p> <div></div>"}},EWBwGbZz:function(e,t,n){},Ee2Pn0VN:function(e,t,n){"use strict";n.r(t);var r=n("4BeYQFX4"),o=n.n(r),i=n("IaFtV71y"),s=n.n(i),a=new o.a({id:"object-event",use:"object-event-usage",viewBox:"0 0 20 20",content:'<symbol viewBox="0 0 20 20" id="object-event"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#77C2F8" rx="2" /><path fill="#FFF" d="M13.106 5.059V4.45c0-.248-.202-.45-.652-.45s-.653.202-.653.45v.609H8.2V4.45c0-.248-.202-.45-.653-.45-.45 0-.652.202-.652.45v.609h-.886c-.83 0-1.508.675-1.508 1.5V14.5c0 .825.679 1.5 1.508 1.5h7.984c.83 0 1.508-.675 1.508-1.5V6.559c0-.825-.679-1.5-1.508-1.5h-.886zm.537 9.641H6.357a.55.55 0 0 1-.55-.534V9.01h8.386v5.155a.55.55 0 0 1-.55.534z" /></g></symbol>'});s.a.add(a);t.default=a},EfuvDahv:function(e,t,n){"use strict";n.r(t),n.d(t,"preparePayload",function(){return o});var r=n("3nOnSD6h"),o=function(e){var t=e.added;return 0===t.length?null:t.map(r.decodeId).reduce(function(e,t){switch(t.type){case"team":e.addFromTeams=e.addFromTeams||[],e.addFromTeams.push(t.id);break;case"group":e.addFromGroups=e.addFromGroups||[],e.addFromGroups.push(t.id);break;default:e.users=e.users||[],e.users.push(t.id)}return e},{})}},Eq0YbNMI:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;n("2qRnoGmE"),i=n("vmWJWrVe"),o=n("PE0KiLUa").URLSync,s=n("suI5NDUm").isAone,r=n("U3H3Tw5e"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="OrganizationPortalView",t.prototype.tagName="div",t.prototype.className="organization-portal",t.prototype.initialize=function(e){return this.options=null!=e?e:{},this.renderBasic(),this.initURLSync()},t.prototype.initURLSync=function(){var e;if(s()&&(e=this.$("iframe")[0]))return this.urlSync=new o({iframe:e}),this.urlSync.init()},t.prototype.remove=function(){var e;return null!=(e=this.urlSync)&&e.destroy(),t.__super__.remove.apply(this,arguments)},t.prototype.renderBasic=function(e){return null==e&&(e=this.options.url),this.$el.html(r(e))},t}()},EqFtzsyK:function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty;c=n("a+N5u/Cl"),s=n("3eMzznN/"),i=n("HHtVDBJc"),a=n("vmWJWrVe"),o=n("wd/RKGTj"),r=n("p5ZwduzY"),l=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="CustomRepeatView",t.prototype.className="custom-repeat-view",t.prototype.events={"click .repeat-freq":"selectFreq","click .repeat-interval":"selectInterval","click .toggle-weekday-handle":"toggleWeekday","click .toggle-monthday-handle":"toggleMonthday","click .submit-handler":"submit","mousewheel .dropdown-menu":s.mousewheel},t.prototype.initialize=function(e){var t,n;if(c.has(e,"select"))return this.options=e,this.state=c.extend({freq:2,interval:1,byweekday:[],bymonthday:[]},c.pick(this.options.customRepeatOptions,"freq","interval","byweekday","bymonthday")),this.props={freqs:[{_id:3,label:"DAILY",title:i.label2Title("DAILY")},{_id:2,label:"WEEKLY",title:i.label2Title("WEEKLY")},{_id:1,label:"MONTHLY",title:i.label2Title("MONTHLY")}],intervals:[1,2,3,4,5,6,7],weekdays:[0,1,2,3,4,5,6].map(function(e){return{_id:e,title:o().day(e+1).format("dd")}}),monthdays:function(){for(n=[],t=1;t<=31;t++)n.push(t);return n}.apply(this)},this.render(),this;l("callback function select is required!")},t.prototype.setState=function(e){return this.state=c.extend({},this.state,e),this.render()},t.prototype.render=function(){var e,t,n;return t=c.find(this.props.freqs,(n=this,function(e){return e._id===n.state.freq})).label,e=c.extend({freqTitle:i.label2Title(t),description:i.repeatOptions2Description(this.state)},this.state,this.props),this.$el.html(r(e)),this},t.prototype.selectFreq=function(e){var t;return t=$(e.currentTarget).data("id"),this.setState({freq:t,interval:1,byweekday:[],bymonthday:[]})},t.prototype.selectInterval=function(e){var t;return t=$(e.currentTarget).data("id"),this.setState({interval:t})},t.prototype.toggleArrayItem=function(e,t){return c.contains(e,t)?c.without(e,t):c.union(e,[t]).sort(function(e,t){return e-t})},t.prototype.toggleWeekday=function(e){var t;return t=$(e.currentTarget).data("id"),this.setState({byweekday:this.toggleArrayItem(this.state.byweekday,t)})},t.prototype.toggleMonthday=function(e){var t;return t=$(e.currentTarget).data("id"),this.setState({bymonthday:this.toggleArrayItem(this.state.bymonthday,t)})},t.prototype.submit=function(e){var t;return e.preventDefault(),t=c.omit(this.state,function(e,t,n){return void 0===e}),this.options.select(t)},t}()},"Ewk+b4WK":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e.tags;if(i)for(var s,a=-1,c=i.length-1;a<c;)s=i[a+=1],o+='<li class="tag-wrap flex ',e.canDelete&&(o+="removeable"),o+=' hinted" data-title="'+r(s.name)+'" data-id="'+s._id+'"> <span class="tag tag-'+s.color+'"> <span class="tag-name">'+r(s.name)+"</span> </span> ",e.canDelete&&(o+=' <i class="icon icon-circle-remove remove-tag-handler remove-tag-handler-'+s.color+'"></i> '),o+="</li>";return o}},ExCRW3nt:function(e,t,n){e.exports={popup__head:"popup__head__1K-d","task-configure__head":"task-configure__head__2yoE",popup__body:"popup__body__2Nnd","task-configure__body":"task-configure__body__2Jjj","task-configure":"task-configure__2TaJ","task-configure__trigger":"task-configure__trigger__NVH1","task-configure__trigger-inner":"task-configure__trigger-inner__1qHS","task-configure__item":"task-configure__item__3hlL","task-configure__item--disabled":"task-configure__item--disabled__2z1m","task-configure__item-text":"task-configure__item-text__15yA","task-configure__item-icon":"task-configure__item-icon__2M_Y","task-configure__new-item":"task-configure__new-item__yKI2","task-configure__sorting-item":"task-configure__sorting-item__1TJV","sortable-icon":"sortable-icon__22xQ"}},"F/9QHL9I":function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;a=n("a+N5u/Cl"),s=n("vmWJWrVe"),r=n("nL4olqOP"),i=n("QSzw2VcL"),o=n("RJeDJfm2"),c=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="TeamManagerView",t.prototype.className="team-manager-view",t.prototype.initialize=function(e){return this.options=null!=e?e:{},this.organizationModel=this.options.organizationModel,this.load({success:(t=this,function(){return t.renderBasic(),t.listen()})});var t},t.prototype.load=function(e){var t;return Promise.all([new Promise((t=this,function(e,n){return r.fetch(t.options._teamId,{boundToObjectType:"team",success:e,error:function(e,t){return n(t)}})})),new Promise(function(e){return function(t,n){return r.fetch(e.organizationModel.id,{boundToObjectType:"organization",success:t,error:function(e,t){return n(t)}})}}(this)),new Promise(function(e){return function(t,n){return i.fetchOne(e.organizationModel.id,e.options._teamId,{boundToObjectType:"organization",success:t,error:function(e,t){return n(t)}})}}(this))]).then(function(t){return function(n){return t.teamProjectsCollection=n[0],t.organizationProjectsCollection=n[1],t.teamModel=n[2],e.success()}}(this)).catch(function(e){return c(e)}),this},t.prototype.listen=function(){return this.listenTo(this.teamProjectsCollection,"add remove",function(){})},t.prototype.renderBasic=function(){var e,t;return(e=this.teamModel.toJSON()).permissions=this.organizationModel.hasPermissions("team.manage"),e.isTeamDefault="default"===this.teamModel.get("type"),e=a.extend({objType:"team",cardModel:this.teamModel,organizationModel:this.organizationModel,teamProjectsCollection:this.teamProjectsCollection,organizationProjectsCollection:this.organizationProjectsCollection},e),t=this.requestSubView(o,e),this.$el.html(t.$el),this},t}()},"F/TATKmB":function(e,t,n){e.exports=n.p+"images/d_nanhaier@2x.c302f4b7.png"},"F1kY/sui":function(e,t,n){e.exports=n.p+"images/w_shachenbao@2x.adb63f6e.png"},F1nFexqL:function(e,t,n){e.exports=n("eMSp2D5P")},F2VoxVmS:function(e,t,n){e.exports={"responsive-detail-container":"responsive-detail-container__QBth",content:"content__1ycx",body:"body__1G-z","body-inner":"body-inner__2v2k","body-left":"body-left__3HKz","body-left-inner":"body-left-inner__3E27","body-right":"body-right__3i-3","body-right-inner":"body-right-inner__3n0t","body-top":"body-top__RBZs","body-bottom":"body-bottom__3tM2",foot:"foot__24ge"}},FDBtWruv:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R,D,L,z,A,V,F,B,U,H,G,q,W,J,X=[].slice;n("zw//FsHZ"),n("BJWKoQqY"),E=n("a+N5u/Cl"),c=n("pVe2NLek"),q=n("K4CHbgVz"),S=n("3eMzznN/"),p=n("bZr3G77e"),d=n("/e+Ob7oW"),y=n("HYobN8SQ"),x=n("WlCGY8BB"),J=n("yiO17FlF"),n("tLZJUYWX"),D=n("eO8HY5nz").matchPath,H=n("sa1Ed382"),V=n("s0r7VfKc").default,I=n("2qRnoGmE"),j=n("wMS7wN+j"),R=n("BzGHEctR").labs,n("uHRdHWpl").default,u=n("lAykE7PB"),b=n("wu4EEviu"),h=n("Wd/8sFUG"),l=n("mSCPNUQI"),r=n("w25JH8uC"),a=n("A1PQasTq"),k=n("eupXItUO"),g=null,i=null,C=n("3GP4dVia"),f=n("iiTVEhTg"),n("nL4olqOP"),n("85182E8g"),o=n("5tMx3C2f"),s=n("lKlBpm6f"),_=n("JEopcXwS"),v=n("wVXDg9Ql").SDKInterceptor,L=n("NtzEC3Pa").paywall,M=n("VdTqBswU").configMoreAfterLogin,m=n("HDJEOtNh").PermissionController,T=n("priCjIQI").bootstrapService,w=n("RLD3BeS/").ToastMessageWithUrl,u.initialize(),p.initialize(),v.listen(),I.FEATURES.customSystemFields&&a.init(),(z=new d.Renderer).html=function(e){return e.indexOf("<br>")>=0?"<p>"+e+"</p>":e},z.tablecell=function(e,t){var n;return 0===e.length&&(e="<br>"),n=t.header?"th":"td",""+(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},d.setOptions({renderer:z,breaks:!0,sanitize:!0,strikethrough:!1,smartLists:!0}),window.teambition=H,window.warehouse=J,window.Socket=b,b.addClient(V.socketClient),G=new q,H.ua=G,$("body").addClass(G.getOS().name.toLowerCase()+" "+G.getBrowser().name.toLowerCase()),$(window).on("dragover dragenter drop",function(){return!1}),window._encodeHTML=function(e,t,n,r){var o;return t=null!=t?t.toLowerCase():void 0,o=e,E.contains(["md","sanitize"],t)?("md"===t&&(o=d(E.unescape(o),n).replace(/<em>/g,"<i>").replace(/<\/em>/g,"</i>")),o=j.sanitize(o,r)):o=S.escape(o),o};try{H.favico=new c({animation:"popFade"})}catch(Y){P=Y}L.setup(),A=function(){var e,t,n,r,o;try{return x.reportInitPerformance(),H.user.get("isGhost")?H.gta.event({action:"guest enter teambition",category:"teambition"}):(t={action:"enter teambition",category:"teambition"},(null!=(n=H.user.get("lastEntered"))?n.web:void 0)||(t.type="first session",e=H.user.get("created"),o=document.cookie.match(/utm=(.*?)(?:;|$)/),r=document.cookie.match(/referral=(.*?)(?:;|$)/),o&&Date.now()-new Date(e)<6048e5&&(t.utm=decodeURIComponent(o[1])),r&&Date.now()-new Date(e)<6048e5&&(t.referral=decodeURIComponent(r[1]))),H.gta.event(t))}catch(Y){if(P=Y,"development"===H.env)return console.error(P)}},O=function(e){var t;if(x.error(e),"development"!==H.env)return t=encodeURIComponent(window.location.href),window.location=I.ACCOUNT_HOST+"/login?next_url="+t},N=function(){var e,t,n,r,a,c,l;H.PREFERENCE.initLanguage(),R.initialize(),h.init(),H.systemActions=new k,o.fetch(),H.APP=new i,H.applications=s.get(),H.router=new g,H.router.start();try{l="undefined"!=typeof window&&null!==window&&null!=(r=window.parent)&&null!=(a=r.teambition)?a.useTemplateEditor:void 0}catch(Y){console.error(O)}return l&&(c=(e=D(window.location.pathname,{path:"/project/:projectId"}))&&e.params.projectId,H.templateEditorFramed=c),$("#bodyloadinglayer").addClass("fading"),setTimeout(function(){return $("#bodyloadinglayer").remove(),$("#loading-script").remove()},318),A(),_.noticesPollingStart(),t=I.FEATURES.useSnapperPushService?I.PUSH_HOST:I.TCM_PUSH_HOST,n=I.FEATURES.useSnapperPushService?I.PUSH_PATH:I.TCM_PUSH_PATH,b.connect(t,{path:n})},B=function(){var e,t,o,s,a;return a=H.user,H.ab=new r,H.PREFERENCE=new f({_userId:a.id}),s=T(),e=Promise.resolve().then(n.t.bind(null,"N3amIZou",7)).then(function(e){return i=e.default}),o=Promise.resolve().then(n.t.bind(null,"srlD+xxn",7)).then(function(e){return g=e.default}),t=Promise.resolve().then(n.bind(null,"xq4dGhJY")).then(function(e){return H.onboarding=new e.ConfigurableOnboarding,H.onboarding.fetch()}),Promise.all([s.rules,s.perms]).then(function(e){return m.setup(e[0]),a.get("isGhost")?s.applications:Promise.all([s.projects,s.organizations,s.applications,s.preference,s.abtest])}).then(function(){return Promise.all([e,o,t])}).then(function(){if(!a.get("isGhost"))return H.PREFERENCE.initLanguage(),l.init(),M()}).then(function(){return N()}).catch(function(e){return x.error(e)})},W=function(e){return H.user.fetch(E.extend({url:"users/me",silentError:!0,error:function(e,t){return x.error(t),401===t.status&&"AccessTokenMissing"===t.name?window.location.href=I.ACCOUNT_HOST+"/login?next_url="+encodeURIComponent(window.location.href):w.error({messageTitle:tb_i18n.get("token.expired"),urlTitle:tb_i18n.get("login"),onClickUrl:function(){return window.location.href=I.ACCOUNT_HOST+"/logout?next_url="+encodeURIComponent(window.location.href)},duration:null})}},e,{success:function(){var t,n;return n=arguments[0],t=2<=arguments.length?X.call(arguments,1):[],null!=e&&"function"==typeof e.success&&e.success.apply(e,[n].concat(X.call(t))),n.payment}}))},H.socket=b,I.userInfo?(H.user=new C(I.userInfo),B()):(H.user=new C,W({success:B})),(F=function(e){return E.delay(function(){return W(),F(e)},e)})(864e5),(!(U=y("teambition"))||Date.now()-new Date(U)>1296e6)&&(y.namespace("temp").clearAll(),y("teambition",new Date)),x.init("web")},FEIJU5XE:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<div class="link-head"> <div class="link-icon-wrap"> ';return e.link.thumbnailUrl?o+=' <span class="avatar" style="background-image: url('+r(e.link.thumbnailUrl)+')" ></span> ':o+=' <span class="icon icon-link avatar"></span> ',o+='</div> <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main"> <span class="title-name" title="'+r(e.link.title)+'"> '+r(e.link.title)+" </span> </div> </div> ",e.link.content&&(o+=' <div class="link-title-footer">'+r(e.link.content)+"</div> "),o+=" </div></div>",e.showMenu&&(o+=' <a class="link-menu-handler icon icon-chevron-down"></a>'),o}},FLilGYJ1:function(e,t,n){var r,o,i,s,a,c,l,u,p={}.hasOwnProperty;u=n("sa1Ed382"),a=n("vmWJWrVe"),l=n("OmupbwLD"),i=n("llwZnbxj"),c=n("JDU1H68K"),s=n("L3Znt4sw"),o=n("KCOaqNuq"),r=n("M+PlWHew"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="MemberEventsView",t.prototype.className="member-events-view",t.prototype.events={"click .event-create-handler":"openEventCreator"},t.prototype.initialize=function(e){return this.options=e,this.startDate=e.startDate,this.memberModel=e.cardModel,this.objectModel=e.objectModel,this.eventsCollection=i.get(this.memberModel.get("_memberId")),this.renderBasic().renderWeekPicker().loadEvents(),this},t.prototype.renderBasic=function(){return this.$el.html(r()),this.$weekSelectorWrap=this.$(".week-selector-wrap"),this.$eventsListWrap=this.$(".events-list-wrap"),this},t.prototype.renderWeekPicker=function(){var e;return this.weekPicker=this.requestSubView(c,{createdDate:this.objectModel.get("created"),onChange:(e=this,function(){return u.gta.event({action:"filter event date"}),e.loadEvents()})}),this.$weekSelectorWrap.html(this.weekPicker.$el),this},t.prototype.loadEvents=function(){var e;return this.showLoadingIndicator(this.$el),this.memberModel.fetchMemberEvents({data:{startDate:this.weekPicker.startOfWeekInclusive(),endDate:this.weekPicker.endOfWeekExclusive()},success:(e=this,function(t){var n;if(e.$el)return e.eventsCollection.reset(t),e.hideLoadingIndicator(),n=e.requestSubView(s,{modalDetail:e.options.modalDetail,groupBy:!0,rightOffset:0,weekly:e.weekPicker.startOfWeekInclusive(),eventsCollection:e.eventsCollection}),e.$eventsListWrap.html(n.$el)})}),this},t.prototype.openEventCreator=function(){return this.requestSubView(l).open(o)},t}()},FMzLVbOv:function(e,t,n){var r,o,i,s={}.hasOwnProperty;r=n("NMYpcb63"),i=n("vmWJWrVe"),o=n("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="StepModalView",t.prototype.className="step-modal-view modal-dialog flex-vert",t.prototype.events={"click .prev-handler":"goPrev"},t.prototype.initialize=function(e){return this.contentList=[],this.modal=new o({cursor:0}),this.$el.addClass("step-modal-view"),this.listenTo(this.modal,"change",this.renderBasic),this.assembleContent(),this.renderBasic()},t.prototype.renderBasic=function(){var e,t,n,o;return this.componentWillUpdate(),t=this.modal.get("cursor"),o=(n=this.contentList[t]).title,e=n.body,this.$el.html(r({title:o,body:e,isFirst:0===t})),this.componentUpdated(t)},t.prototype.goNext=function(){return this.setCursor(this.modal.get("cursor")+1)},t.prototype.goPrev=function(){return this.setCursor(this.modal.get("cursor")-1)},t.prototype.goto=function(e){return this.setCursor(e)},t.prototype.setCursor=function(e){return this.modal.set("cursor",e)},t.prototype.assembleContent=function(){},t.prototype.componentUpdated=function(){},t.prototype.componentWillUpdate=function(){},t}()},FTOhhj1A:function(e,t,n){var r,o,i,s={}.hasOwnProperty;o=n("vmWJWrVe"),i=n("NryYMUnD"),r=n("RjhZVbd/"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="WorkVersionsView",t.prototype.tagName="div",t.prototype.className="work-version-view",t.prototype.initialize=function(e){var t;return null==e&&(e={}),t=e.versionId,this.workModel=e.workModel,this.workVersionCollection=e.workVersionCollection,this.onSelect=e.onSelect,this.renderBasic(),this.renderVersions(t)},t.prototype.renderBasic=function(){return this.$el.html(r()),this.$versionsList=this.$(".work-versions-list")},t.prototype.renderVersions=function(e){return this.$versionsList.empty(),this.workVersionCollection.each((t=this,function(n,r){var o,s,a;return s=e?n.id===e:n.get("fileKey")===t.workModel.get("fileKey"),n.set("_selected_",s),a=1===t.workVersionCollection.length,o=t.requestSubView(i,{workModel:t.workModel,versionModel:n,showMainLabel:!a,onSelect:function(){return t.selectVersion(r)},setMainVersion:function(){return t.workModel.markMainVersion(n.id)},updateVersionDescription:function(e){return n.updateDescription(e)}}).$el,t.$versionsList.append(o)}));var t},t.prototype.selectVersion=function(e){return this.workVersionCollection.each((t=this,function(n,r){var o;if(o=e===r,n.set("_selected_",o),o)return"function"==typeof t.onSelect?t.onSelect(n):void 0}));var t},t}()},FWhPQYNj:function(e,t,n){e.exports=n.p+"images/d_tuzi@2x.46c623da.png"},FXyeC79C:function(e,t,n){e.exports=n("+oXWdItZ")+"\n\nquery SearchWorkspaceProjects(\n  $q: String,\n  $organizationId: ObjectId,\n  $hasOrganizationId: Boolean!,\n  $tql: String,\n  $pageSize: PageSizeType = 20,\n) {\n  organization: Search(\n    type: project,\n    spaceType: organization,\n    _organizationId: $organizationId,\n    q: $q,\n    tql: $tql,\n    pageSize: $pageSize,\n  ) @include (if: $hasOrganizationId) {\n    result {\n    \t...projectSchema\n    }\n  }\n}\n"},Fb6Npyie:function(e,t,n){var r,o,i,s={}.hasOwnProperty;o=n("a+N5u/Cl"),i=n("2qRnoGmE"),r=n("KPjvlCmh"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.name=this.name+"/"+this.options._projectId+"/powerups"},t.prototype.parse=function(e){return Array.isArray(e)&&(e=o.chain(e).groupBy(function(e){return e._consumerId}).values().map(function(e){var t;return t=e.find(function(e){return 0===e.status})||e[0],Object.assign({},t,{name:t.consumerName})}).value()),e},t.prototype.url=function(){return i.HOST+"/appstore/api/projects/"+this.options._projectId+"/addedFeatures"},t.prototype.pluginUrl=function(){return i.HOST+"/appstore/api/projects/"+this.options._projectId+"/addedAppFeatures"},t.prototype.updatePluginStatus=function(e,t){return new Promise((n=this,function(r,o){return n.sync("update",n,{url:n.pluginUrl()+"/"+e,attrs:t,success:function(t){return n.where({_consumerId:e}).forEach(function(e){return e.set({status:t.status})}),r()},error:o})}));var n},t.prototype.enablePlugin=function(e){return this.updatePluginStatus(e,{status:1})},t.prototype.disablePlugin=function(e){return this.updatePluginStatus(e,{status:0})},t}()},FeMXPqu9:function(e,t,n){e.exports={title:"title__3pXe",creator:"creator__1EYk",header:"header__1q6C","header-image":"header-image__3iMj","header-message":"header-message__3zcC","testhub-name":"testhub-name__3wJy","testhub-description":"testhub-description__3k_F",submit:"submit__1Mvs"}},FeX6jRQf:function(e,t,n){e.exports=n.p+"images/o_ganbei@2x.cd8cb434.png"},Fg40oMcU:function(e,t,n){e.exports=n.p+"images/h_haha@2x.af8cbd7d.png"},"FjS+RJ4A":function(e,t,n){var r,o,i={}.hasOwnProperty;o=n("vmWJWrVe"),r=n("cI3PKZPl").TesthubApp,n("r1msZhOF"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.className="testhub-app-view",t.prototype.viewName="TesthubAppView",t.prototype.initialize=function(e){var t;return t=e.organizationModel,this.requestReactView(this.el,r,{organizationModel:t},{redux:!0,router:!0})},t}()},FoJs5Vq1:function(e,t,n){e.exports=n.p+"images/o_dangao@2x.f768c3d8.png"},FtadyD4n:function(e,t,n){e.exports={"template-creator-modal":"template-creator-modal__3zHW","template-creator-modal__iframe":"template-creator-modal__iframe__29cp"}},Fy6QNGNX:function(e,t,n){var r,o,i,s={}.hasOwnProperty;r=n("asccv5YG"),i=n("vmWJWrVe"),o=n("GESwhXbR").Toast,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="ActivityEditorView",t.prototype.tagName="div",t.prototype.className="activity-editor-view",t.prototype.events={"submit form":"submit","keydown .activity-editor-input":"quickSubmit"},t.prototype.initialize=function(e){if(!e.activityModel)throw new Error(this.viewName+":options should have activityModel");return this.activityModel=e.activityModel,this.options=e,this.render(),t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){var e;return e=this.activityModel.toJSON(),this.$el.html(r(e)),this.$(".activity-editor-input").flexText(),this.$submit=this.$(".submit-handler")},t.prototype.quickSubmit=function(e){return 13===e.keyCode&&(e.ctrlKey||e.shiftKey||e.metaKey)&&this.submit(e),this},t.prototype.submit=function(e){var t,n;return e.preventDefault(),(t=this.$(".activity-editor-input").val().trim())?(this.disableSubmit(),this.options.fake?(this.activityModel.set({comment:t,updated:new Date}),o.success(tb_i18n.get("activity.editor.success")),this.close()):this.activityModel.save(null,{parse:!0,wait:!0,attrs:{comment:t},success:(n=this,function(){var e;return"function"==typeof(e=n.options).onSuccess&&e.onSuccess(),o.success(tb_i18n.get("activity.editor.success")),n.close()}),error:function(e){return function(){return e.enableSubmit(),o.error(tb_i18n.get("activity.editor.error"))}}(this)})):this.$(".activity-editor-input").val("")},t.prototype.disableSubmit=function(){return this.$submit.attr("disabled","disabled"),this},t.prototype.enableSubmit=function(){return this.$submit.removeAttr("disabled"),this},t.prototype.close=function(){var e,t,n;return(null!=(t=this.parentView)?t.close:void 0)?"function"==typeof(e=this.parentView).close&&e.close():null!=(n=this.parentView)&&n.remove(),this},t}()},FyfRbPm8:function(e,t,n){},"G/lHqWmi":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w={}.hasOwnProperty;m=n("a+N5u/Cl"),h=n("vmWJWrVe"),k=n("sa1Ed382"),d=n("3eMzznN/"),a=n("iSsLT+9z"),c=n("8R2HMFlV"),l=n("HYobN8SQ"),p=n("70UrrKBP").Uploader,u=n("eubUSX4T"),i=n("gLdDAp90"),o=n("BIh1HhrR"),s=n("XvMdZhz5"),r=$(window),v=l.namespace("temp").namespace("user_edit_habit"),y=n("G8QA1dk+"),b=n("CfyenDut"),g=b.formatNote,_=b.toMarkdown,a.Toolbar.addButton(c),f={tabIndent:!1,toolbarFloat:!1,markdown:!1,toolbar:["title","bold","italic","upload","link","ol","ul","blockquote","hr","table","markdown"],allowedAttributes:{a:["href","target","data-gta"]}},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)w.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,h),t.prototype.viewName="NoteEditorView",t.prototype.className="note-editor",t.prototype.tagName="section",t.prototype.events={"keydown .simditor-body":"quickUpdateNote","keydown .markdown-editor textarea":"quickUpdateNote","mousedown .save-note-handler":"onSave","mousedown .cancel-note-handler":"onCancel","mousedown .restore-draft":"restoreDraftNote","mousedown .discard-draft":"discardDraftNote","mousedown .editor-switcher-container":"toggleEditorMode","mousedown .editor-switcher-handler:not(.selected)":"changeMode","click .editor-mode":"switchMode"},t.prototype.initialize=function(e){return this.options=e,this.onSavePrecondtion=e.onSavePrecondtion,this.objectModel=e.objectModel,this.localCacheId=k.user.id,this.mdSupport=this.options.mdSupport,this.objectType=this.options.noteAttribute,this.placeholder=this.options.placeholder||tb_i18n.get("task.detail.add.note"),this.type=this.mdSupport&&v(this.localCacheId)||"html",this.renderBasic(),this.initSimditor(),this.initUploader(),this.listen()},t.prototype.listen=function(){var e;return this.editor.off(".note-editor"),this.editor.on("blur",(e=this,function(){return e.blurNote()})),this.editor.on("valuechanged",function(e){return function(){return e.checkEditorValue()}}(this)),this.$markdownEditorContainer.on("input",function(e){return function(){return e.checkEditorValue()}}(this)),this.$markdownEditorContainer.on("blur",function(e){return function(){return e.blurNote()}}(this)),s.on("noteEditorToolBarScroll",function(e){return function(t){return e.pinBarHandler(t)}}(this))},t.prototype.renderBasic=function(){var e;return e=this.getModeTitle(this.type),this.$el.html(o({placeholder:this.placeholder,modeTitle:e,mdSupport:this.options.mdSupport})),this.options.mdSupport||this.$el.addClass("no-md-support"),this.$textarea=this.$(".note-input"),this.editorTitle=this.$(".editor-name"),this.$editorSwitchContainer=this.$(".editor-switcher-container"),this.$(".editor-switcher-handler[data-mode="+this.type+"]").addClass("selected")},t.prototype.pinBarHandler=function(e){var t,n;if(this.$el&&"html"===this.type)return n=this.$el.parents(".note-input-set").position().top+10,t=this.$(".editor-content-wrap").height(),e[n<=0?"addClass":"removeClass"]("pin-toolbar"),t+n<=0?e.removeClass("pin-toolbar"):void 0},t.prototype.getModeTitle=function(e){var t;switch(e){case"md":t=tb_i18n.get("markdown.helper.title");break;default:t=tb_i18n.get("editor.mode.html")}return t},t.prototype.initSimditor=function(){var e,t;if(y.setup(),e=m.extend(f,this.options,{textarea:this.$textarea[0]}),this.editor=new a(e),this.markdownButton=m.find(this.editor.toolbar.buttons,function(e){return e instanceof c}),this.$markdownEditorContainer=this.editor.el.find(".markdown-editor textarea"),this.editor.setValue(g(this.options.content)),this.editor.body.addClass("readable"),m.delay((t=this,function(){return t.editor.focus()})),"md"===this.type)return this.markdownButton.command(),this.$(".simditor-toolbar-wrap").addClass("hide"),m.delay(function(e){return function(){return e.markdownButton._autosizeTextarea()}}(this))},t.prototype.initUploader=function(){var e,t;return this.allImages=0,this.imgData=[],e=new u([],{_boundToObjectId:0}),this.uploader=new p({pick:{id:this.$(".toolbar-item.toolbar-item-upload"),multiple:!0},dnd:this.$(".simditor-body"),paste:this.$(".simditor-body"),accept:"image/png,image/jpeg,image/bmp,image/gif",collection:e,notCheckProjectSizeLimit:!0,onQueued:(t=this,function(e,n){return t.allImages++,t.insertImage(null,tb_i18n.get("uploading.tip"))}),onComplete:function(e){return function(t){var n;if(e.imgData.push(t),e.imgData.length===e.allImages)return n=tb_i18n.get("uploading.tip"),e.insertAllImages(e.imgData),e.imgData=[],e.allImages=0,e.$(".simditor-body").find("img[alt='"+n+"']").remove()}}(this)})},t.prototype.toggleEditorMode=function(){return this.toggleModeFlag=!0},t.prototype.changeMode=function(e){var t,n,r,o,i,s;return t=$(e.currentTarget),this.$(".editor-switcher-handler").removeClass("selected"),t.addClass("selected"),s=t.data("mode"),this.$(".simditor-toolbar-wrap").toggleClass("hide"),v(this.localCacheId,s),this.type=s,r=this.getModeTitle(s),this.editorTitle.html(r),this.markdownButton.command(),this.editor.trigger("valuechanged"),this.$(".dropdown-menu").toggleClass("open"),(null!=(o=this.parentView)&&null!=(i=o.parentView)?i.parentView:void 0)&&this.parentView.parentView.parentView.$el.find(".detail-content").trigger("scroll"),this.toggleModeFlag=!1,n="html"===s?"rich text":"markdown",this.gtaHandler({action:"switch editor mode",type:n}),this},t.prototype.parseNote=function(e){return"html"===this.type?_(e):e},t.prototype.quickUpdateNote=function(e){return 13===e.keyCode&&(e.ctrlKey||e.shiftKey||e.metaKey)&&(e.preventDefault(),this.updateNote()),this},t.prototype.updateNote=function(){var e,t,n,r;return this.objectModel.getRoleScope()>=0?((r=this.getCurrentMarkdown())!==this.objectModel.get(this.objectType)?((e={})[this.objectType]=r,this.disableSubmit(),"testcase"===this.objectModel.name?this.onSavePrecondtion(r):this.objectModel.id?("function"==typeof(t=this.objectModel).isRecurrenceEventInstance?t.isRecurrenceEventInstance():void 0)?i.saveAttrs(this.objectModel,e).catch(this.enableSubmit):(n={attrs:e,error:this.enableSubmit},"task"===this.objectModel.name||"event"===this.objectModel.name?this.objectModel.saveAttr(this.objectType,r,n):this.objectModel.save(null,n),this.gtaHandler({action:"edited note"})):this.objectModel.set(e)):this.exitNoteEdit(),this):this},t.prototype.disableSubmit=function(){return this.$(".save-note-handler").addClass("disabled")},t.prototype.enableSubmit=function(){return this.$(".save-note-handler").removeClass("disabled")},t.prototype.exitNoteEdit=function(){var e;return this.objectModel.get(this.objectType),null!=(e=this.parentView)&&e.$el.removeClass("editing"),this},t.prototype.blurNote=function(){var e,t;if(!this.toggleModeFlag)return t=this.objectModel.get(this.objectType),e=this.getCurrentMarkdown(),d.unifyNewline(e)!==d.unifyNewline(t)&&this.objectModel.setMemCache({note:e}),this},t.prototype.checkEditorValue=function(){return this.options.isRequired&&""===this.editor.getValue()?(this.$(".required-note-empty").show(),this.$(".simditor-wrapper").addClass("empty-error"),this.disableSubmit()):this.$(".simditor-wrapper").has("empty-error")?(this.$(".required-note-empty").hide(),this.$(".simditor-wrapper").removeClass("empty-error"),this.enableSubmit()):void 0},t.prototype.restoreDraftNote=function(e){var t,n;return e.preventDefault(),t=this.objectModel.getMemCache("note"),this.editor.setValue(g(t)),this.objectModel.clearMemCache(),null!=(n=this.parentView)&&n.$el.removeClass("has-draft"),!1},t.prototype.discardDraftNote=function(e){var t;return e.preventDefault(),this.objectModel.clearMemCache(),null!=(t=this.parentView)&&t.$el.removeClass("has-draft"),!1},t.prototype.onSave=function(e){return e.preventDefault(),this.updateNote(),this.objectModel.clearMemCache(),!1},t.prototype.onCancel=function(e){return e.preventDefault(),this.exitNoteEdit(),this.objectModel.clearMemCache(),!1},t.prototype.insertAllImages=function(e){return m.each(e,(t=this,function(e){return t.insertImage(e)}));var t},t.prototype.insertImage=function(e,t){var n,r,o;return o=this.getPreviewUrl(e)||null,n=this.editor.toolbar.findButton("upload"),r=t||e.fileName,n.insertImage(o,r),this},t.prototype.getPreviewUrl=function(e){var t,n,r,o,i;if(e)return o=e.thumbnailUrl||"",i=e.imageWidth,t=e.imageHeight,r=i<400?200:i<600?400:i<800?600:800,n=Math.ceil(r*t/i),o=o.replace("w/200/h/200","w/"+r+"/h/"+n)},t.prototype.getCurrentMarkdown=function(){return _(this.editor.getValue())},t.prototype.remove=function(){return this.blurNote(),r.off("resize.note-editor"),this.$el.off(),this.editor.destroy(),this.uploader.destroy(),t.__super__.remove.apply(this,arguments)},t.prototype.switchMode=function(){return this.gtaHandler({action:"switch editor mode"})},t.prototype.gtaHandler=function(e){return"task"===this.objectModel.get("objectType")&&(e=m.extend({type:this.objectModel.isSubtask()?"subtask":"task",series:this.objectModel.get("ancestorIds").length},e)),k.gta.event(e)},t}()},G3WDRlaO:function(e,t,n){e.exports=n.p+"images/app-logo.8f08b876.png"},G4lwMbjU:function(e,t,n){e.exports=function(e){var t,r,o="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),i="",s=n("3eMzznN/");return i+='<div class="modal-detail flex-space flex-vert"> <div class="modal-header"> <h2 class="note-title">'+o(e.data.title)+'</h2> <div class="vtop"> <div class="note-updated"> <span>'+tb_i18n.get("updated")+" "+s.formatDate(e.data.updated).dateTimeString+'</span> </div> </div> <a class="modal-close icon icon-remove pull-right" data-dismiss="modal"></a> </div> <div class="yinxiang-content flex-space"> <iframe src="data:text/html;charset=utf-8, '+e.iframeData+'" class="thin-scroll"></iframe> </div></div>'}},G88aO0cT:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("sa1Ed382"),o=n("vmWJWrVe"),r=n("4ql4e9Df").PrivacyPolicy,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="PersonalSettingsPrivacyPolicyView",t.prototype.className="personal-settings-privacy-policy-view personal-settings-container",t.prototype.initialize=function(){return this.onToggleCollectable=this.onToggleCollectable.bind(this),this.render()},t.prototype.render=function(){return this.requestReactView(this.el,r,{checked:!!i.PREFERENCE.get("collectBehaviorLogs"),onToggleCollectable:this.onToggleCollectable})},t.prototype.onToggleCollectable=function(e){return i.PREFERENCE.toggleCollectBehavior(e),this.render()},t}()},"G8QA1dk+":function(e,t,n){var r;r=n("iSsLT+9z"),e.exports={setup:function(){return r.locale="simditor",r.i18n={simditor:{blockquote:tb_i18n.get("simditor.blockquote"),bold:tb_i18n.get("simditor.bold"),code:tb_i18n.get("simditor.code"),color:tb_i18n.get("simditor.color"),coloredText:tb_i18n.get("simditor.coloredText"),hr:tb_i18n.get("simditor.hr"),image:tb_i18n.get("simditor.image"),externalImage:tb_i18n.get("simditor.externalImage"),uploadImage:tb_i18n.get("simditor.uploadImage"),uploadFailed:tb_i18n.get("simditor.uploadFailed"),uploadError:tb_i18n.get("simditor.uploadError"),imageUrl:tb_i18n.get("simditor.imageUrl"),imageSize:tb_i18n.get("simditor.imageSize"),imageAlt:tb_i18n.get("simditor.imageAlt"),restoreImageSize:tb_i18n.get("simditor.restoreImageSize"),uploading:tb_i18n.get("simditor.uploading"),indent:tb_i18n.get("simditor.indent"),outdent:tb_i18n.get("simditor.outdent"),italic:tb_i18n.get("simditor.italic"),link:tb_i18n.get("simditor.link"),text:tb_i18n.get("simditor.text"),linkTextTitle:tb_i18n.get("simditor.add.link.title"),linkText:tb_i18n.get("simditor.linkText"),linkUrl:tb_i18n.get("simditor.linkUrl"),linkUrlSubmit:tb_i18n.get("confirm"),removeLink:tb_i18n.get("simditor.removeLink"),ol:tb_i18n.get("simditor.ol"),ul:tb_i18n.get("simditor.ul"),strikethrough:tb_i18n.get("simditor.strikethrough"),table:tb_i18n.get("simditor.table"),deleteRow:tb_i18n.get("simditor.deleteRow"),insertRowAbove:tb_i18n.get("simditor.insertRowAbove"),insertRowBelow:tb_i18n.get("simditor.insertRowBelow"),deleteColumn:tb_i18n.get("simditor.deleteColumn"),insertColumnLeft:tb_i18n.get("simditor.insertColumnLeft"),insertColumnRight:tb_i18n.get("simditor.insertColumnRight"),deleteTable:tb_i18n.get("simditor.deleteTable"),title:tb_i18n.get("simditor.title"),normalText:tb_i18n.get("simditor.normalText"),underline:tb_i18n.get("simditor.underline"),alignment:tb_i18n.get("simditor.alignment"),alignCenter:tb_i18n.get("simditor.alignCenter"),alignLeft:tb_i18n.get("simditor.alignLeft"),alignRight:tb_i18n.get("simditor.alignRight"),selectLanguage:tb_i18n.get("simditor.selectLanguage"),upload:tb_i18n.get("simditor.upload")}}}}},GCZE3FPp:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N={}.hasOwnProperty;_=n("a+N5u/Cl"),p=n("q1tIBJhx"),S=n("tLZJUYWX"),C=n("2qRnoGmE"),P=n("sa1Ed382"),T=n("GESwhXbR"),v=T.Toast,g=T.TextButton,m=n("+j2D3LI+"),y=n("vmWJWrVe"),k=n("OmupbwLD"),b=n("RQ44psah"),E=n("90U+kJWN").openInNewTab,j=n("ctsD9mWH").store,I=n("HDJEOtNh"),d=I.RoleScope,l=I.OrganizationAccess,u=n("85182E8g"),w=n("wj/icwnL").assignStateToInviteMembersModal,x=n("wj/icwnL").unmountInviteMembersModal,M=n("wj/icwnL"),s=M.DisplayTypes,h=M.SearchTypes,f=n("wj/icwnL").TabTypes,r=n("0aWc+x3/").DEFAULT_DISPLAY_TYPES,o=n("0aWc+x3/").DEFAULT_TAB,i=n("0aWc+x3/").DEFAULT_TAB_TYPE,c=null,a=null,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)N.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,y),t.prototype.className="invite-members-modal__view",t.prototype.viewName="InviteMembersModalView",t.prototype.initialize=function(e){var t,u,p,d,m;return this.projectModel=e.projectModel,this.gtaControl=null!=(p=e.gtaControl)?p:"Member Menu",this.qrCodeType=null!=(d=e.qrCodeType)?d:null,u=this.getOrganizationId(),t=new Promise(function(e){return n.e(18).then(function(t){return c=n("mhB7oH+x"),a=n("e28Nje89").InviteMembersModalContainer,e()}.bind(null,n)).catch(n.oe)}),Promise.resolve().then(function(){return t}).then((m=this,function(){var e,t,n;return t=_.extend({},o,{displayTypes:r.concat(s.InviteFromLink).filter(function(e){var t,n;switch(e){case s.InviteFromLink:return t=m.projectModel.hasPermission("project.post.member"),n=Boolean(u&&l.canAddOuterMember(u)),(t||n)&&C.FEATURES.qrLinkInvite;case s.InviteFromTeams:return Boolean(u&&l.hasPermission(u,"organization.get.team"));default:return!0}}),tabType:i,title:S.get("invite.new.member")}),e=C.FEATURES.enable_alias_in_member_search?[h.Username]:[],m.model=new c({defaultSearchTypes:e,defaultTab:t,isOrganization:m.getIsOrganizationProject(),organizationId:m.getOrganizationId(),organizationName:m.getOrganizationName(),projectId:null!=(n=m.projectModel)?n.get("_id"):void 0})})).then(function(e){return function(){return e.assign({isOrganization:e.model.get("isOrganization"),isValidSearchValue:e.model.get("isValidSearchValue"),isLoadingTeams:e.model.get("isLoadingTeams"),isLoadingGroups:e.model.get("isLoadingGroups"),isLoadingMembers:e.model.get("isLoadingMembers"),membersTotal:e.projectModel.payment.memberQuota,organizationId:e.getOrganizationId(),selectedIds:e.model.get("selectedIds"),syncedIds:e.model.get("syncedIds"),tab:e.model.getLastTab()})}}(this)).then(function(e){return function(){return e.listen()}}(this)).then(function(e){return function(){return e.mount()}}(this)).then(function(e){return function(){return Promise.all([e.model.fetch(),e.getOrganizationPrimaryTeam()])}}(this)).then(function(e){return function(){return e.listenCollections()}}(this)).then(function(e){return function(){return e.model.read()}}(this))},t.prototype.remove=function(){return this.model.destroy(),this.unmount(),t.__super__.remove.apply(this,arguments),P.gta.event({action:"invite member modal close",private:"onboarding"})},t.prototype.listen=function(){var e;return this.listenTo(this.projectModel,"change",(e=this,function(){return e.assign({membersTotal:e.projectModel.payment.memberQuota})})),this.listenTo(this.model,"change:lists",function(e){return function(t,n){return e.assign({lists:n})}}(this)),this.listenTo(this.model,"change:isLoadingTeams",function(e){return function(t,n){return e.assign({isLoadingTeams:n})}}(this)),this.listenTo(this.model,"change:isLoadingGroups",function(e){return function(t,n){return e.assign({isLoadingGroups:n})}}(this)),this.listenTo(this.model,"change:isLoadingMembers",function(e){return function(t,n){return e.assign({isLoadingMembers:n})}}(this)),this.listenTo(this.model,"change:selectedIds",function(e){return function(t,n){return e.assign({membersCount:(null!=n?n.length:void 0)||0,selectedIds:n})}}(this)),this.listenTo(this.model,"change:syncedIds",function(e){return function(t,n){return e.assign({syncedIds:n})}}(this)),this.listenTo(this.model,"change:searchValue",function(e){return function(t,n){var r;return r={searchValue:n},!e.getState().searchValue&&n&&(r.lists=null),e.assign(r),e.handleRead()}}(this)),this.listenTo(this.model,"change:isValidSearchValue",function(e){return function(t,n){return e.assign({isValidSearchValue:n})}}(this)),this.listenTo(this.model,"change:tabs",function(e){return function(){return e.assign({tab:e.model.getLastTab()}),e.model.read()}}(this)),this.listenTo(this.model,"change:groupsCollection",function(e){return function(){return e.model.setSyncedIds()}}(this)),this.listenTo(this.model,"change:membersCollection",function(e){return function(){return e.model.setSelectedIds()}}(this)),this.listenTo(this.model,"change:teamsCollection",function(e){return function(){return e.model.setSyncedIds()}}(this)),this.listenTo(this.model,"change:tabs",function(e){return function(){var t,n,r,o;return(o=null!=(t=e.model.getLastTab())&&null!=(n=t.data)?n.teamId:void 0)?(r=e.model.getOrganizationTeam(o))?e.model.setTeamBreadcrumb(r):void 0:e.model.setTeamBreadcrumb(null)}}(this)),this.listenTo(this.model,"change:teamsBreadcrumb",function(e){return function(){return e.assign({teamsBreadcrumb:e.model.get("teamsBreadcrumb")})}}(this))},t.prototype.listenCollections=function(){var e,t,n,r;if((e=this.model.get("groupsCollection"))&&this.listenTo(e,"update",(r=this,function(){return r.model.setSyncedIds()})),(n=this.model.get("teamsCollection"))&&this.listenTo(n,"update",function(e){return function(){return e.model.setSyncedIds()}}(this)),t=this.model.get("membersCollection"))return this.listenTo(t,"update",function(e){return function(){return e.model.setSelectedIds()}}(this))},t.prototype.mount=function(){return this.requestReactView(this.getMountNode(),a,{onBackwardClick:_.bind(this.handleBackwardClick,this),onCloseModalClick:_.bind(this.handleCloseModalClick,this),onEnterGroupClick:_.bind(this.handleEnterGroupClick,this),onEnterGroupsClick:_.bind(this.handleEnterGroupsClick,this),onEnterTeamClick:_.bind(this.handleEnterTeamClick,this),onEnterTeamsClick:_.bind(this.handleEnterTeamsClick,this),onEnterTeamRootClick:_.bind(this.handleEnterTeamRootClick,this),onLoadMore:_.bind(this.handleLoadMore,this),onOpenInviteLinkClick:_.bind(this.handleOpenInviteLinkClick,this),onSearch:_.bind(this.handleSearch,this),onSelectUserClick:_.bind(this.handleSelectUserClick,this),onSendingInviteEmailClick:_.bind(this.handleSendingInviteEmailClick,this),onSyncGroupClick:_.bind(this.handleSyncGroupClick,this),onSyncTeamClick:_.bind(this.handleSyncTeamClick,this)},{redux:!0})},t.prototype.unmount=function(){return j.dispatch(x())},t.prototype.assign=function(e){return j.dispatch(w(e))},t.prototype.getState=function(){return j.getState().ui.inviteMembersModal},t.prototype.hasMountNode=function(){var e;return(null!=(e=this.$el)?e.length:void 0)>0},t.prototype.getMountNode=function(){var e;return null!=(e=this.$el)?e.get(0):void 0},t.prototype.getOrganizationId=function(){var e;return this.getIsOrganizationProject()?null!=(e=this.projectModel)?e.get("_organizationId"):void 0:null},t.prototype.getOrganizationName=function(){var e,t;if(e=this.getOrganizationId())return null!=(t=u.get(0).get(e))?t.get("name"):void 0},t.prototype.getIsOrganizationProject=function(){var e,t;return(null!=(e=this.projectModel)?e.get("_organizationId"):void 0)&&(null!=(t=this.projectModel)?t.get("orgLevel"):void 0)>=d.Guest},t.prototype.getOrganizationPrimaryTeam=function(){return new Promise((e=this,function(t,n){var r;return(r=e.getOrganizationId())?e.model.getOrganizationPrimaryTeamFetch(r).then(function(n){if(e.el)return t()}).catch(n):t()}));var e},t.prototype.handleRead=_.debounce(function(){return this.model.setInitialPage(),this.model.read()},500),t.prototype.handleBackwardClick=function(){return this.model.setPreviousTab()},t.prototype.handleCloseModalClick=function(){var e;return null!=(e=this.parentView)&&"function"==typeof e.close?e.close():void 0},t.prototype.handleEnterGroupClick=function(e){return this.model.setNextTab({data:{groupId:e},displayTypes:_.compact([s.GroupSync,s.GroupMembers]),tabType:f.Group,title:S.get("invite.new.member")})},t.prototype.handleEnterGroupsClick=function(){return this.model.setNextTab({displayTypes:[s.Groups],tabType:f.Groups,title:S.get("invite.new.member")})},t.prototype.handleEnterTeamClick=function(e){var t;return t=this.model.getIsSearching(),this.model.getOrganizationTeam(e),t?this.model.setNextTab({data:{teamId:e},displayTypes:_.compact([s.TeamSync,s.Subteams,s.TeamMembers]),tabType:f.Team,title:S.get("invite.new.member")}):this.model.setNextTab({data:{teamId:e},displayTypes:_.compact([s.Search,s.TeamSync,s.Subteams,s.TeamMembers]),tabType:f.Team,title:S.get("invite.new.member")})},t.prototype.handleEnterTeamRootClick=function(){return this.model.setNextTab({displayTypes:[s.Search,s.Teams],tabType:f.Teams,title:S.get("invite.new.member")})},t.prototype.handleEnterTeamsClick=function(){var e;return(e=this.model.get("primaryTeam"))?this.model.setNextTab({data:{teamId:e._id},displayTypes:_.compact([s.Search,s.TeamSync,s.Subteams,s.TeamMembers]),tabType:f.Team,title:S.get("invite.new.member")}):this.handleEnterTeamRootClick()},t.prototype.handleLoadMore=function(){return this.model.read(!0)},t.prototype.handleOpenInviteLinkClick=function(){return P.gta.event({action:"add member from wechat",control:this.gtaControl}),this.requestSubView(k).open(m,{model:this.projectModel,type:this.qrCodeType,gtaControl:this.gtaControl})},t.prototype.handleSearch=function(e){if("string"==typeof e)return e=e.trim(),this.model.setSearchValue(e)},t.prototype.handleSelectUserClick=function(e){return this.model.addUser(e,{silentError:!0}).catch((t=this,function(e){return t.handleAddUserError(e)}));var t},t.prototype.handleSyncGroupClick=function(e){return this.model.syncGroup(e)},t.prototype.handleSyncTeamClick=function(e){return this.model.syncTeam(e)},t.prototype.handleSendingInviteEmailClick=function(e){return this.model.addUser(e,{silentError:!0}).then((t=this,function(){return t.model.read()})).then(function(e){return function(){return e.handleSendingInviteEmailSuccess()}}(this)).catch(function(e){return function(t){return e.handleAddUserError(t)}}(this));var t},t.prototype.handleSendingInviteEmailSuccess=function(){return v.success({message:S.get("sending.inviting.email.to.join.success"),description:S.get("sending.inviting.email.to.join.success.desc"),handlers:p.createElement(g,{color:"blue",onClick:function(){return E(b.help.outerMember)}},S.get("learn.more"))})},t.prototype.handleAddUserError=function(e){return this.projectModel.handleInviteError(e)},t}()},"GFC5+LHL":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("r0Djj00O"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="cell",t.stopPropagation=function(e){e.stopPropagation()},t.handleClick=function(){t.props.onClick(t.props.descriptor,t.props.row)},t.handleResize=function(e){t.props.onResize(e,t.props.columnIndex,t.props.descriptor)},t.handleResizerHoverStart=function(e){t.props.onResizerHoverStart(e,t.props.columnIndex,t.props.descriptor)},t.handleResizerHoverEnd=function(e){t.props.onResizerHoverEnd(e,t.props.columnIndex,t.props.descriptor)},t.handleMouseEnter=function(){t.props.onMouseEnter(t.props.descriptor,t.props.row,t.props.groupIndex)},t.handleMouseLeave=function(){t.props.onMouseLeave(t.props.descriptor,t.props.row,t.props.groupIndex)},t}return r.d(t,e),t.prototype.renderResizer=function(){var e;if(this.props.unResizable||!this.props.onResize||!this.props.descriptor)return null;var t=s()(a[this.rootClassName+"__resizer"],((e={})[a[this.rootClassName+"__resizer--resizing"]]=this.props.isResizing,e));return o.createElement("div",{className:t,onClick:this.stopPropagation,onMouseEnter:this.props.onResizerHoverStart?this.handleResizerHoverStart:void 0,onMouseLeave:this.props.onResizerHoverEnd?this.handleResizerHoverEnd:void 0,onMouseDown:this.handleResize})},t.prototype.render=function(){var e=this.props,t=s()(e.className,a[this.rootClassName]);return o.createElement("div",{className:t,"data-id":e.row&&e.row.entity._id,"data-row-index":e.rowIndex,"data-column-index":e.columnIndex,onClick:e.onClick?this.handleClick:void 0,onMouseEnter:e.onMouseEnter?this.handleMouseEnter:void 0,onMouseLeave:e.onMouseLeave?this.handleMouseLeave:void 0,style:e.style},e.children,this.renderResizer())},t}(o.PureComponent)},GJs41Fxt:function(e,t,n){e.exports={"dashboard-modal-title":"dashboard-modal-title__Vj4z","dashboard-modal-body":"dashboard-modal-body__1XlU"}},"GLe2TS/Q":function(e,t,n){var r,o={}.hasOwnProperty;r=n("GsAQlUN+"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="EventConfirmUpdateMemberView",t.prototype.initialize=function(){var e,n;return t.__super__.initialize.apply(this,arguments),n=tb_i18n.get("event.confirm.updateRepeat.title"),e=tb_i18n.get("event.confirm.updateRepeat.description"),this.render({title:n,description:e})},t}()},GOfL9MB5:function(e,t,n){e.exports={"guide-component":"guide-component__MIAc"}},GPNoQLd7:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;r=n("DdwvUwFp"),s=n("tLZJUYWX"),o=n("GESwhXbR").Toast,i=n("vmWJWrVe"),a=n("wOYhnX/R"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="TaskIdLabelView",t.prototype.tagName="span",t.prototype.className="label task-id-label",t.prototype.events={click:"handleClick"},t.prototype.initialize=function(e){if(this.uniqueId=e.uniqueId,this.projectModel=e.projectModel,this.uniqueIdPrefix=e.uniqueIdPrefix,this.copyable=e.copyable,this.uniqueId&&(this.projectModel||this.uniqueIdPrefix))return this.render().listen(),this.copyable&&(this.$el.addClass(a.copyable),this.clipboard=new r(this.el).on("success",function(){return o.success(s.get("task.id.click.to.copy.success"))})),this},t.prototype.remove=function(){var e;return null!=(e=this.clipboard)&&e.destroy(),t.__super__.remove.apply(this,arguments)},t.prototype.listen=function(){if(this.projectModel)return this.listenTo(this.projectModel,"change:applications",function(e){if(e.isAppChanged("taskUniqueId"))return this.render()}),this.listenTo(this.projectModel,"change:uniqueIdPrefix",this.render)},t.prototype.bind=function(e){if(e&&e.length)return this.$el.replaceAll(e)},t.prototype.render=function(){var e,t,n,r,o;return(this.uniqueIdPrefix||(null!=(e=this.projectModel)?e.isAppEnabled("taskUniqueId"):void 0))&&this.uniqueId?(o=this.uniqueIdPrefix||(null!=(t=this.projectModel)?t.get("uniqueIdPrefix"):void 0),r=this.uniqueId,this.copyable&&this.$el.attr("data-clipboard-text",o+"-"+r),r>999999&&(this.$el.addClass("hinted").attr("data-title",o+"-"+r),r="999999..."),n=o+"-"+r):(this.$el.removeClass("hinted").removeAttr("data-title").removeAttr("data-clipboard-text"),n=""),this.$el.text(n),this},t.prototype.handleClick=function(e){if(this.copyable)return e.stopPropagation()},t}()},"GQ5fdR+l":function(e,t,n){e.exports=function(e){var t="",r=n("L0ULbOmZ"),o=n("5TA/Y+4C");return e.hideFieldIconName?t+=' <div class="'+r["task-date-range-icon"]+'"> <span class="icon icon-calendar"></span> </div> '+o(e):t+=' <div class="'+r["object-field"]+'"> <div class="object-field__left"> <span class="object-field__icon icon icon-calendar2"></span> <span class="object-field__name">'+tb_i18n.get("task.detail.date")+'</span> </div> <div class="object-field__right"> '+o(e)+" </div> </div>",t}},GQl3SEVk:function(e,t,n){"use strict";n.r(t),n.d(t,"loadTaskflowTasks",function(){return a}),n.d(t,"loadTaskflowStatusTasks",function(){return c});var r=n("4c1CS0b3"),o=n("s0r7VfKc"),i=n("sa1Ed382"),s=n("HDJEOtNh");function a(e,t,n,r){return o.default.getTaskflowStatuses(e).values().concatMap(function(e){return c(n,t,e,r)})}function c(e,t,n,a){return r.Observable.from(n).concatMap(function(n){return(r=e,c=t,l=n._id,u=a,p={_projectId:r,_tasklistId:u,_scenariofieldconfigId:c,_taskflowstatusId:l,isDone:!1},d=Object.keys(p).reduce(function(e,t){var n=p[t];return e.push(t+"="+n),e},[]).join(" AND "),h=i.user.id,m=s.ProjectAccess.hasProjectPrivacyPermission(r),o.default.fetch.get("v2/projects/"+r+"/tasks",{filter:d,pageSize:500}).map(function(e){var t=e.result;return m?t:t.filter(function(e){return function(e,t){return"members"===e.visible||"involves"===e.visible&&e.involveMembers&&e.involveMembers.indexOf(t)>=0}(e,h)})})).map(function(e){return[{stageName:n.name,tasks:e.filter(function(e){return 0===e.ancestorIds.length})}]});var r,c,l,u,p,d,h,m}).startWith([]).reduce(function(e,t){return e.concat(t)})}},GR5KG0nr:function(e,t){e.exports=function(e){return'<div class="modal-dialog"> <div class="modal-content"> <header class="modal-header"> <h4 class="modal-title">'+e.title+'</h4> </header> <div class="modal-body"> <p>'+e.description+'</p> </div> <div class="modal-footer"> <button class="confirm-handler btn btn-primary pull-right">'+e.confirm+'</button> <button class="cancel-handler btn btn-link pull-right">'+e.cancel+"</button> </div> </div></div>"}},GSNuuXNY:function(e,t){e.exports=function(e){return"<h3>"+tb_i18n.get("entry")+' ・ <span class="entries-count">0</span></h3><ul class="tag-entries-list"></ul>'}},GXaoBc4K:function(e,t){e.exports=function(e){return"<h3>"+tb_i18n.get("helper.shortcuts.for.global")+'</h3><div class="cheat-sheet-part"> <ul class="cheat-sheet-list"> <li> <span class="key">w</span> <span class="function">'+tb_i18n.get("helper.shortcuts.for.global.dashboard")+'</span> </li> <li> <span class="key">h</span> <span class="function">'+tb_i18n.get("helper.shortcuts.for.global.portal")+'</span> </li> <li> <span class="key">i</span> <span class="function">'+tb_i18n.get("helper.shortcuts.for.global.inbox")+'</span> </li> <li> <span class="key">m</span> <span class="function">'+tb_i18n.get("helper.shortcuts.for.global.myboard")+'</span> </li> <li> <span class="key">s</span> <span class="function">'+tb_i18n.get("helper.shortcuts.for.global.search")+'</span> </li> <li> <span class="key">e</span> <span class="function">'+tb_i18n.get("helper.shortcuts.for.global.event")+'</span> </li> <li> <span class="key">shift + m</span> <span class="function">'+tb_i18n.get("helper.shortcuts.for.markdown")+"</span> </li> </ul></div><h3>"+tb_i18n.get("helper.shortcuts.for.inbox")+'</h3><div class="cheat-sheet-part"> <ul class="cheat-sheet-list"> <li> <span class="key">j</span> <span class="function">'+tb_i18n.get("helper.shortcuts.for.inbox.next")+'</span> </li> <li> <span class="key">k</span> <span class="function">'+tb_i18n.get("helper.shortcuts.for.inbox.previous")+"</span> </li> </ul></div><h3>"+tb_i18n.get("helper.shortcuts.for.wall")+'</h3><div class="cheat-sheet-part"> <ul class="cheat-sheet-list"> <li> <span class="key">c</span> <span class="function">'+tb_i18n.get("helper.shortcuts.for.wall.new")+"</span> </li> </ul></div><h3>"+tb_i18n.get("helper.shortcuts.for.board")+'</h3><div class="cheat-sheet-part"> <ul class="cheat-sheet-list"> <li> <span class="key">c</span> <span class="function">'+tb_i18n.get("helper.shortcuts.for.board.new")+'</span> </li> <li> <span class="key">g</span> <span class="function">'+tb_i18n.get("helper.shortcuts.for.taskgroup")+"</span> </li> </ul></div><h3>"+tb_i18n.get("helper.shortcuts.for.event")+'</h3><div class="cheat-sheet-part"> <ul class="cheat-sheet-list"> <li> <span class="key">c</span> <span class="function">'+tb_i18n.get("helper.shortcuts.for.event.new")+"</span> </li> </ul></div>"}},"GlvjHbV/":function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("aD6I3VT4"),o=n("wDU6cT95").SprintInfoComponent,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="DetailInfoSprintView",t.prototype.tagName="section",t.prototype.className="detail-infos-sprint-view no-border-wrapper",t.prototype.initialize=function(e){return this.taskModel=e.objectModel,this.canEdit=e.canEdit,t.__super__.initialize.apply(this,arguments),this.isCreationMode=!this.taskModel.id,this.listen(),this.render()},t.prototype.render=function(){return this.requestReactView(this.el,o,{projectId:this.taskModel.get("_projectId"),sprintId:this.taskModel.get("_sprintId"),withSubtask:!this.isCreationMode,hasPermission:this.hasPermission(),onUpdateSprint:this.updateSprint.bind(this)})},t.prototype.listen=function(){var e;return e=["_sprintId"].map(function(e){return"change:"+e}).join(" "),this.listenTo(this.taskModel,e,this.render)},t.prototype.isCase=function(){return!0},t.prototype.hasPermission=function(){return this.canEdit},t.prototype.updateSprint=function(e,t){var n;if(!this.isCreationMode)return new Promise((n=this,function(r,o){return n.taskModel.saveAttr("sprints",null,{wait:!0,attrs:{_sprintId:e||null,withSubtasks:t},success:r,error:o})}));this.taskModel.set({_sprintId:e})},t}()},Gm9pL8c2:function(e,t,n){"use strict";n.r(t);var r=n("ctsD9mWH"),o=n("F3WdH5q6"),i=n("/MKjzBat"),s=n("mrSGxOB2"),a=(n("SVEFF54Z"),n("q1tIBJhx")),c=n("TSYQbtd+"),l=n.n(c),u=n("tLZJUYWX"),p=n("Nxrdcgel"),d=(n("CTmKd891"),n("qM5bi5Tl")),h=function(e){return a.createElement("div",{className:"portal-placeholder"},a.createElement("img",{alt:e.text,src:d}),a.createElement("div",{className:"portal-placeholder-text"},a.createElement("span",null,e.text)))},m=function(e){return e instanceof Array&&e.length>0},f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.d(t,e),t.prototype.render=function(){return a.createElement("a",{className:"project-category-manager-modal-list-item-link sort-project-category-handler"},a.createElement("span",{className:"icon icon-draggable"}))},t}(a.PureComponent),g=Object(p.SortableHandle)(f),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){t.props.onClick&&t.props.onClick(e,t.props.projectTagId)},t}return s.d(t,e),t.prototype.render=function(){return a.createElement("li",{className:"project-category-manager-modal-list-item"},a.createElement(g,null),a.createElement("span",{className:"project-category-manager-modal-list-item-text"},this.props.projectTagName),a.createElement("a",{className:"project-category-manager-modal-list-item-link open-project-category-more-action-menu-handler",onClick:this.handleClick},a.createElement("span",{className:"icon icon-chevron-down"})))},t}(a.PureComponent),b=Object(p.SortableElement)(v),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleItemClick=function(e,n){t.props.onItemClick&&t.props.onItemClick(e,n)},t}return s.d(t,e),t.prototype.renderItems=function(){var e=this;return this.props.projectTags.map(function(t,n){return a.createElement(b,{index:n,key:t._id,onClick:e.handleItemClick,projectTagId:t._id,projectTagName:t.name})})},t.prototype.render=function(){return a.createElement("ul",{className:"project-category-manager-modal-list"},this.renderItems())},t}(a.PureComponent),k=Object(p.SortableContainer)(y),_=function(e){function t(t){var n=e.call(this,t)||this;return n.setCreateInputRef=function(e){n.createInputRef=e},n.handleCreateInputChange=function(){var e="";n.createInputRef&&(e=n.createInputRef.value),n.setState(s.a({},n.state,{createInputValue:e}))},n.handleCreateInputKeyDown=function(e){13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),n.handleCreateInputChange(),n.handleCreateProjectTagClick())},n.handleSortProjectCategoryEnd=function(e){var t=e.newIndex,r=e.oldIndex;n.props.onProjectTagSort(t,r)},n.handleOpenProjectCategoryActionMenuClick=function(e,t){n.props.onOpenProjectCategoryActionMenuClick&&n.props.onOpenProjectCategoryActionMenuClick(e,t)},n.handleCreateProjectTagClick=function(){if(n.createInputRef){var e=n.getCreateInputValue();n.hasCreateInputValueLength()&&n.props.onCreateProjectTagClick&&(n.props.onCreateProjectTagClick(e),n.resetCreateInputValue())}},n.state={createInputValue:""},n}return s.d(t,e),t.prototype.getAddProjectTagHandlerClassName=function(){return l()("project-category-manager-modal-create-input-link","add-project-category-handler",this.hasCreateInputValueLength()?null:"is-disabled")},t.prototype.getCreateInputValue=function(){return this.state.createInputValue.trim()},t.prototype.hasCreateInputValueLength=function(){return this.getCreateInputValue().length>0},t.prototype.resetCreateInputValue=function(){this.createInputRef&&(this.createInputRef.value=""),this.setState(s.a({},this.state,{createInputValue:""}))},t.prototype.renderCreateInput=function(){return a.createElement("div",{className:"project-category-manager-modal-create-input"},a.createElement("input",{className:"project-category-manager-modal-create-input-text-input",onChange:this.handleCreateInputChange,onKeyDown:this.handleCreateInputKeyDown,placeholder:u.get("input.project.category.name"),ref:this.setCreateInputRef,type:"text"}),a.createElement("a",{className:this.getAddProjectTagHandlerClassName(),onClick:this.handleCreateProjectTagClick},u.get("add")))},t.prototype.renderEmptyProjectTag=function(){var e=this.props.projectTags;return m(e)?null:a.createElement(h,{text:u.get("has.none.project.tags")})},t.prototype.renderList=function(){return function(e){return!1===m(e)}(this.props.projectTags)?null:a.createElement("div",{className:"project-category-manager-modal-list-content"},a.createElement("div",{className:"project-category-manager-modal-list-title"},a.createElement("span",null,u.get("organization.project.categories"))),a.createElement(k,{axis:"y",helperClass:"is-dragging",lockAxis:"y",lockToContainerEdges:!0,onItemClick:this.handleOpenProjectCategoryActionMenuClick,onSortEnd:this.handleSortProjectCategoryEnd,projectTags:this.props.projectTags,useDragHandle:!0}))},t.prototype.render=function(){return a.createElement("div",{className:"project-category-manager-modal-root"},this.renderCreateInput(),this.renderEmptyProjectTag(),this.renderList())},t}(a.Component),w=Object(i.connect)(function(e){return{projectTags:e.ui.projectCategoryManagerModal.projectTags}})(_);n.d(t,"ProjectCategoryManagerModalBridge",function(){return C}),n.d(t,"ProjectCategoryManagerModalContainer",function(){return w});var C=function(){function e(){}return e.assign=function(e){r.store.dispatch(Object(o.assignDataToProjectCategoryManagerModalAction)(e))},e.unmount=function(){r.store.dispatch(Object(o.unmountProjectCategoryManagerModalAction)())},e}()},GoaLoPsL:function(e,t,n){e.exports=n.p+"images/d_kelian@2x.1b9baad0.png"},"GsAQlUN+":function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("+cJrObP8"),o=n("vmWJWrVe"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="EventConfirmView",t.prototype.className="event-confirm clearfix",t.prototype.events={"click button":"selectHandler"},t.prototype.initialize=function(e){return null==e&&(e={}),this.value=null,this.options=e},t.prototype.render=function(e){return this.$el.html(r(e))},t.prototype.selectHandler=function(e){var t,n;return this.value=$(e.currentTarget).data("value"),"function"==typeof(t=this.options).onConfirm&&t.onConfirm(this.value),null!=(n=this.parentView)?n.close():void 0},t.prototype.remove=function(){var e;return this.value||"function"==typeof(e=this.options).onCancel&&e.onCancel(),t.__super__.remove.apply(this,arguments)},t}()},"H+JZ1Vad":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("mrSGxOB2"),o=n("17x9q+7Q"),i=n("q1tIBJhx"),s=n("GESwhXbR"),a=n("dWbDnvg6"),c=n("XG2lpVOM"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderDelete=function(){return this.props.canDelete&&i.createElement("div",{className:c["remove-member-handler"],onClick:this.props.onDelete},i.createElement(s.Icon,{name:"remove",className:c["remove-icon"],size:12}))},t.prototype.render=function(){var e=this.props.avatarUrl,t="react-avatar hinted "+c["member-avatar"];return i.createElement("li",{className:t,"data-title":this.props.name},i.createElement(a.a,{src:e,size:"small"}),this.renderDelete())},t.propTypes={name:o.string.isRequired,avatarUrl:o.string,canDelete:o.bool.isRequired,onDelete:o.func},t}(i.Component)},H5ERZgIq:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n("gh8QIhMV"),c=n("GESwhXbR"),l=n("a+N5u/Cl"),u=n("LvDlAkAJ"),p=n("TSYQbtd+"),d=n.n(p),h=n("sa1Ed382"),m=n("4c1CS0b3"),f=n("OmupbwLD"),g=n.n(f),v=n("7UQIdnmo"),b=n.n(v),y=n("8KNpsyVU"),k=n("odY26VIi"),_=n.n(k),w=n("PbcjBR5w"),C=n("3nOnSD6h"),S=n("BsTK5jZO"),E=n("UIA+SUpX"),T=n("oXtD/CwF"),I=n.n(T),M=n("MDkL9Nvc"),j=n.n(M),P=10,x=4,N=24+2*x,O=function(e){var t=e.projectId,n=r.g(e,["projectId"]),s=function(e){var t=r.f(Object(o.useState)(void 0),2),n=t[0],i=t[1];return Object(o.useEffect)(function(){if(e){var t=_.a.fetch$(e).subscribe(i);return function(){return t.unsubscribe()}}},[e]),n}(t),a=r.a({},n,{membersCollection:s});return i.a.createElement(L,r.a({},a))};var R,D,L=function(e){function t(t){var n=e.call(this,t)||this;return n.setContentRef=function(e){n.contentRef=e},n.calculateFoldLimit=Object(u.debounce)(function(){if(n.contentRef){var e=n.contentRef.getBoundingClientRect().width+2*x,t=Math.floor(e/N),r=n.props.canPutInvolver?1:0;n.setState({foldLimit:t-r})}},300,{leading:!0}),n.handleRemoveMember=function(e){var t=n.createInvolverMgmt();return t.removeInvolver(e,"user"),t.confirmAndCommit().toPromise()},n.onUserHelperShown=function(){h.gta.event({action:"show tips",type:"followers",method:"hover",control:"question mark"})},n.onMemberClick=function(e,t){!n.isIndieObject()&&n.props.membersCollection&&(t===n.memberCardViewId&&n.memberCardView&&n.memberCardView.el?n.memberCardView.hide():(n.clearMemberCardView(),n.memberCardView=new I.a.Constructor({$toggler:e,affixToggler:!1,userId:t,projectModel:n.props.projectModel}),n.memberCardViewId=t,n.memberCardView.show()))},n.createInvolverMgmt=function(){var e={isInCreationMode:!1,executorId:n.props.object._executorId||void 0};return"event"===n.props.objectType&&(e.eventDetailView=n.props.objectModel.eventDetailView),Object(w.createDetailObjectInvolverManagement)(n.involvers.getIds(),{put:!0,del:!0},n.props.object,e)},n.inviteMoreMember=function(){var e=n.props.projectModel;e&&Object(y.getAccountBind)(e.get("_organizationId")).then(function(e){e?(h.APP.requestSubView(g.a).open(b.a,{projectModel:n.props.projectModel,qrCodeType:"project"}),h.gta.event({action:"begin add member",control:"Member Menu"})):(Object(y.showVerifyBindModal)(),h.gta.event({action:"invitation blocked",page:"Details Page",type:"project"}))})},n.state={foldLimit:P},n.contextId={_id:n.props.object._id},n.involvers=new w.Involvers(n.getInvolvers(t)),n}return r.d(t,e),t.prototype.componentDidMount=function(){this.calculateFoldLimit(),window.addEventListener("resize",this.calculateFoldLimit)},t.prototype.UNSAFE_componentWillUpdate=function(e){this.involvers.reset(this.getInvolvers(e),"user")},t.prototype.componentWillUnmount=function(){this.calculateFoldLimit.cancel(),this.clearMemberCardView(),window.removeEventListener("resize",this.calculateFoldLimit)},t.prototype.clearMemberCardView=function(){this.memberCardView&&this.memberCardView.remove()},t.prototype.getInvolvers=function(e){var t;return t=e.object._projectId&&e.membersCollection?e.object.involveMembers.map(function(t){var n=e.membersCollection.get(t);return n&&n.toJSON()}).filter(function(e){return!!e}):e.object.involvers,l.sortBy(t,function(e){return e._id!==h.user.id})},t.prototype.isIndieObject=function(){return!this.props.object._projectId},t.prototype.renderTrigger=function(){return i.a.createElement(E.Tooltip,{title:s.get("subscriber.control.invite.tooltip")},i.a.createElement(E.Icon,{name:"circle-plus",size:26,className:j.a["subscriber-invite"]}))},t.prototype.renderUserHelper=function(){return!h.user.isExperiencedUser()&&i.a.createElement(E.Tooltip,{placement:"right",title:s.get("member.involve.tip")},i.a.createElement(E.Icon,{style:C.MemberInvolve.userHelperStyle,name:"help",className:j.a["freshman-hint"],size:14,onMouseOver:this.onUserHelperShown}))},t.prototype.renderSubscribers=function(){var e=this.involvers.getObjs(),t=s.get("member.involve.count",e.length);return i.a.createElement("div",{className:j.a["subscriber-list"]},i.a.createElement("div",{className:j.a["subscriber-list-title"]},i.a.createElement("span",null,t)),i.a.createElement(C.MemberInvolve,{className:d()(j.a["subscriber-list-content"],"thin-scroll"),foldLimit:1/0,creatorId:this.props.object._creatorId,executorId:this.props.object._executorId,canDeleteInvolver:this.props.canDelInvolver,canPutInvolver:!1,inCreate:!1,members:e,inviteShowed:!1,showTitle:!1,onRemoveMember:this.handleRemoveMember,onMemberClick:this.onMemberClick}))},t.prototype.renderDropdown=function(){var e=this.involvers.getObjs();if(e.length<=this.state.foldLimit)return null;var t=e[this.state.foldLimit-1];return i.a.createElement(E.Dropdown,{offset:[0,4],persistence:!0,nested:!0,content:this.renderSubscribers()},i.a.createElement("div",{className:j.a["avatar-ellipsis"]},i.a.createElement(C.MemberAvatar,r.a({},t,{isCreator:!1,isExecutor:!1,isRemovable:!1,isEllipsis:!0}))))},t.prototype.renderAvatarList=function(){var e=this.involvers.getObjs();if(e.length<=0&&this.props.canPutInvolver)return null;var t=e.length<=this.state.foldLimit?e.slice():e.slice(0,this.state.foldLimit-1);return i.a.createElement(C.MemberInvolve,{className:j.a["avatar-list"],withTransition:!1,foldLimit:1/0,creatorId:this.props.object._creatorId,executorId:this.props.object._executorId,canDeleteInvolver:this.props.canDelInvolver,canPutInvolver:!1,inCreate:!1,members:t,inviteShowed:!1,showTitle:!1,onRemoveMember:this.handleRemoveMember,onMemberClick:this.onMemberClick})},t.prototype.renderInvite=function(){var e=this;if(!this.props.canPutInvolver)return null;var t=this.involvers.getObjs(),n=this.createInvolverMgmt(),r=Object(C.createMemberMenuWrapper)({involverMgmt:n,search:function(t){return S.InvolverInput.loadSearch(e.props.objectType,e.contextId,t,{withTeamsAndGroups:!0}).catch(function(){return m.Observable.empty()})},loadChildren:function(t,n){return S.InvolverInput.loadChildren(t,n,e.props.object._projectId||null).catch(function(){return m.Observable.empty()})},loadRecommend:function(){return S.InvolverInput.loadInitialRecommend(e.props.objectType,e.contextId,{hideAllProjectMembersHandler:e.props.hideAllProjectMembers||e.isIndieObject(),withTeamsAndGroups:!0}).catch(function(){return m.Observable.empty()})},commit:function(){return n.confirmAndCommit()}},{scenario:this.props.scenario});return i.a.createElement(r,{involvers:t,inviteShowed:!!this.props.enableInvite&&!this.isIndieObject(),inviteMoreMember:this.inviteMoreMember},this.renderTrigger())},t.prototype.renderPlugins=function(){return this.props.plugins&&i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:j.a.seperator}),this.props.plugins)},t.prototype.renderHeader=function(){var e=this.involvers.getObjs(),t=s.get("member.involve.count",e.length);return i.a.createElement("div",{className:j.a["subscribers-header"]},i.a.createElement("span",{className:j.a["subscribers-count"]},t),this.renderUserHelper(),this.renderPlugins())},t.prototype.renderContent=function(){return i.a.createElement("div",{className:j.a["subscribers-content"],ref:this.setContentRef},this.renderAvatarList(),this.renderDropdown(),this.renderInvite())},t.prototype.render=function(){var e=d()(j.a.subscribers,this.props.className);return i.a.createElement("div",{className:e},this.renderHeader(),this.renderContent())},t.defaultProps={enableInvite:!0,hideAllProjectMembers:!1},t}(i.a.PureComponent),z=n("6kNLk80W"),A=n("uMV6vy0g"),V=n.n(A),F=n("sa1Ed382");!function(e){e[e.all=0]="all",e[e.comments=1]="comments",e[e.attachments=2]="attachments"}(D||(D={}));var B=function(){return[{data:D.all,label:s.get("object.activity.panel.filter.all")},{data:D.comments,label:s.get("object.activity.panel.filter.only.comments")},{data:D.attachments,label:s.get("object.activity.panel.filter.only.attachments")}]},U=((R={})[D.comments]="select comment only",R[D.attachments]="select attachment only",R),$=function(e){function t(t){var n=e.call(this,t)||this;return n.filters=B(),n.saveActivityTimelineRef=function(e){n.activityTimelineRef=e},n.onActivitiesLoaded=function(){n.setState({showFilter:!0})},n.onFilterChange=function(e){var t=e.data;n.setState({filterType:t})},n.onEventPluginClick=function(){var e=n.props.eventPluginType;F.gta.event({action:"video conference",type:e}),"zoom"===e&&window.open("https://zoom.us/start/videomeeting")},n.state={showFilter:!1,filterType:D.all},n}return r.d(t,e),t.prototype.componentDidUpdate=function(e,t){var n=this.state.filterType,r=t.filterType;if(n!==t.filterType&&this.activityTimelineRef&&this.activityTimelineRef.viewInstance){this.setFilterGta(n,r);try{this.activityTimelineRef.viewInstance.trigger("filter",{isOnlyComments:n===D.comments,isOnlyAttachments:n===D.attachments})}catch(o){Object(a.throwError)(o,"activity panel filterActivities failed")}}},t.prototype.setFilterGta=function(e,t){var n=e===D.all;F.gta.event({action:n?U[t]:U[e],control:"Comment Box",category:n?"off":"on"})},t.prototype.renderActivityTypeSelectorTrigger=function(){var e=this,t=this.filters.find(function(t){return t.data===e.state.filterType});return i.a.createElement("div",{className:V.a["filter-trigger"]},t.label,i.a.createElement(c.Icon,{name:"chevron-down"}))},t.prototype.renderActivityTypeSelector=function(){var e=this,t=this.filters.find(function(t){return t.data===e.state.filterType}),n=this.filters.map(function(e){return i.a.createElement(c.Option,{className:V.a["filter-option"],value:e,key:e.data},e.label)});return i.a.createElement(c.Select,{disabled:!this.state.showFilter,value:t,onSelect:this.onFilterChange,placement:"bottomLeft",nested:!0,trigger:this.renderActivityTypeSelectorTrigger()},n)},t.prototype.renderPlugins=function(){if(!this.props.showEventPlugins)return null;var e=this.props.eventPluginType;if(["zoom"].indexOf(e)<0)return null;var t="zoom"===e?s.get("event.detail.zoom.tips"):"";return i.a.createElement("div",{className:V.a["event-plugin-handler"]},i.a.createElement(c.Tooltip,{title:t},i.a.createElement(c.IconButton,{type:"subtle",color:"gray",name:"video",onClick:this.onEventPluginClick})),i.a.createElement("span",{className:V.a.separator}))},t.prototype.renderHeader=function(){return this.props.showInvolvers&&i.a.createElement("div",{className:V.a.header},i.a.createElement(O,{className:V.a.subscribers,objectType:this.props.object.objectType,object:this.props.object,objectModel:this.props.objectModel,projectId:this.props.projectId,projectModel:this.props.projectModel,canPutInvolver:this.props.objectModel.hasPermission("put.involvers"),canDelInvolver:this.props.objectModel.hasPermission("del.involvers"),enableInvite:!!this.props.canInviteMember&&this.props.objectModel.hasPermission("project.post.member"),hideAllProjectMembers:this.props.hideAllProjectMembers,scenario:this.props.scenario,plugins:this.renderPlugins()}))},t.prototype.renderTitle=function(){return i.a.createElement("div",{className:V.a.title},this.renderActivityTypeSelector())},t.prototype.renderActivityTimeline=function(){return i.a.createElement(z.ActivityTimeline,{key:"timeline-"+this.props.objectModel.id,ref:this.saveActivityTimelineRef,boundToObjectType:this.props.object.objectType,objectModel:this.props.objectModel,_projectId:this.props.projectId,_organizationId:this.props.organizationId,fetchUrl:this.props.fetchUrl,jumpToSkitch:this.props.jumpToSkitch,success:this.onActivitiesLoaded,scrollToBottom:Object(z.activityTimelineAutoScrollToBottom)(this.props.where),scrollFrameEl:this.props.scrollFrameEl})},t.prototype.render=function(){return i.a.createElement("div",{className:V.a["activity-panel"]},this.renderHeader(),this.renderTitle(),this.renderActivityTimeline())},t.defaultProps={canInviteMember:!0,showInvolvers:!0,showEventPlugins:!1},t}(i.a.PureComponent),H=n("cXOPvvXb"),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this.context.displayDirection===H.a.vertical?this.context.containerEl:null;return i.a.createElement($,r.a({},this.props,{scrollFrameEl:e,key:String(!!e)}))},t.contextType=H.e,t}(i.a.PureComponent);n.d(t,"a",function(){return $}),n.d(t,"b",function(){return G})},H5U46Bxa:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R,D,L,z,A,V=function(e,t){return function(){return e.apply(t,arguments)}},F={}.hasOwnProperty;T=n("a+N5u/Cl"),z=n("sa1Ed382"),w=n("GESwhXbR").Toast,S=n("vmWJWrVe"),o=n("bZr3G77e"),I=n("90U+kJWN").absortExecutorToInvolveMembers,f=n("HYobN8SQ"),C=n("RLD3BeS/").ToastMessageWithUrl,y=n("oq1bWpp9"),n("gBe2F1Rz"),a=n("odY26VIi"),u=n("nL4olqOP"),_=n("ioaOqjIU"),m=n("+BDmEJp8"),p=n("4bWDEe5E"),s=n("vNWLjLJF"),c=n("n2Lzi2oi"),h=n("VilZs/mC"),g=n("69eSgGwt"),b=n("v/MBtkV8"),k=n("tGAhh72B"),D=n("KePvfzJj").isCompatibleWithConfigType,l=n("oEzVJ1gN"),d=n("iCr2nGAb").ScenarioLocator,R=n("zQgHgypC").getScrumTaskUrl,O=n("UHEHxqn1").getScenarioTaskRedirectUrl,M=n("+69hA2nB").actors,N=n("D15MKVbL").findDefaultScenarioFieldConfig,r=n("N+VAS56f"),i=n("8NDKpd3y"),L=n("gm4QKkGU").taskScenarioFieldMap,E=n("+h7VEZku").VisibilityController,P=n("2qRnoGmE"),A=n("gh8QIhMV").throwError,x=n("T6KpLPMz").correctRecurrence,j=function(e){return function(t,n,r){if(!e)return t(n,r)}},v=function(e){function t(){return this.setInvolvers=V(this.setInvolvers,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)F.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,S),t.prototype.viewName="TaskCreatorView",t.prototype.className="home-task-creator-view creator-view modal-dialog",t.prototype.saveAttrs=["_ancestorId","_projectId","_organizationId","_tasklistId","_stageId","content","_executorId","startDate","dueDate","priority","progress","recurrence","reminder","involveMembers","involveTeams","involveGroups","involveAllProjectMembers","involvers","visible","_scenariofieldconfigId","_taskflowstatusId","tagIds","note","customfields","storyPoint","workTime","_sprintId"],t.prototype.events={"click .stage-selector-wrapper":"showTaskStageSelector","input .task-content-input":"cacheTask","keydown .task-content-input":"quickSubmit","click .more-handler":"toggleMore","click .submit-handler":"submit","click .submit-continuity-handler":"submitContinuity","click .involve-view .add-involvement-handler":"gtaSetFollowers"},t.prototype.initialize=function(e){var t,n,r,o,i,s,a,c;if(this.series=e.series,this.content=e.content,this.getInheritedInfo=e.getInheritedInfo,this.ancestorId=e.ancestorId,this._executorId=e._executorId,this._tasklistId=e._tasklistId,this._stageId=e._stageId,this._sprintId=e._sprintId,this.startDate=e.startDate,this.dueDate=e.dueDate,this.priority=e.priority,this.note=e.note,n=e._projectId,t=e._organizationId,this.proTemplateConfigType=e.proTemplateConfigType,this.scenarioFieldConfigId=e.scenarioFieldConfigId,this._taskflowstatusId=e._taskflowstatusId,this.extraCustomfields=e.customfields,this.tasksCollection=e.tasksCollection,this.showAllField=null!=(i=e.showAllField)&&i,this.success=e.success,this.isEssage=e.isEssage,this.onAllSuccess=e.onAllSuccess,this.forceResetProject=null!=(s=e.forceResetProject)&&s,r=u.get(0),this._orgId=t,n||(this._organizationId=t),this._organizationId||n||this.forceResetProject)if(n){if((o=r.get(n)).canUseTaskFeature()&&(this.projectModel=o),!this.projectModel)return A("Cannot locate available project by given _projectId: "+n),void this.asyncClose()}else this.projectModel=void 0;else if(this.projectModel=this.getDefaultProjectUnderCurrentWorkspace(),z.PREFERENCE.isPersonalWorkspace()&&!this.projectModel)return w.error(tb_i18n.get("object.creator.no.available.project.under.workspace")),void this.asyncClose();return this.cacheProxy=j(!!this.getInheritedInfo),this.localCache=f.namespace("temp").namespace("tasks_creator"),this.localCacheId="task_creator_"+(null!=(a=this.projectModel)?a.id:void 0)+"_"+z.user.id,this.localNoteCache=f.namespace("temp").namespace("task_creator_note"),this.localNoteDatas={},this.requiredFieldsValidated=!0,this.orgMember=null,this.scenarioFieldConfigsCollection=null,this.scenarioFieldConfigs=null,this.selectedScenarioField=null,this.selectedTaskflowStatus=null,this.load().then((c=this,function(){if(c.$el)return c.reset("isInit"),c.renderBasic(),c.renderContent(),c.renderTitle(),c.renderTaskFieldConfig("isInit"),c.renderBasicAttrs(),c.renderInvolve(),c.renderVisible(),c.showAllField?c.initScenarioConfigsView():void 0})).catch(function(e){return function(t){return(T.isString(t)||T.isString(null!=t?t.message:void 0))&&w.error(t),A(t),e.close()}}(this))},t.prototype.asyncClose=function(){return setTimeout((e=this,function(){return e.close()}),0);var e},t.prototype.getDefaultProjectUnderCurrentWorkspace=function(){var e,t,n;return(null!=(e=z.APP.projectModel||z.APP.lastProjectModel)?e.canUseTaskFeature():void 0)&&(n=e),z.PREFERENCE.isPersonalWorkspace()?(t=u.get(0).getPersonalWorkspaceProjects(),n&&T.find(t,function(e){return e.id===n.id})||(n=t.filter(function(e){return e.canUseTaskFeature()})[0])):(null!=n?n.get("_organizationId"):void 0)!==z.PREFERENCE.get("lastWorkspace")&&(n=void 0),n},t.prototype.load=function(){return this.isIndieTask()?Promise.all([this.loadAncestorTask(),this.loadOrgMember()]):this.projectModel.isTaskflowEnabled()?Promise.all([this.loadScenarioField(),this.loadTasklist()]):this.loadTasklist()},t.prototype.loadScenarioField=function(){return new Promise((e=this,function(t,n){var r;return r=p.genCacheId(e.projectModel.id,"task"),p.fetch(r,{attrs:{withTaskflowstatus:!0},boundToObjectType:"task",success:function(n){return e.scenarioFieldConfigsCollection=n,t()},error:n})}));var e},t.prototype.loadTasklist=function(){var e,t;return e=this.cacheProxy(this.localCache,this.localCacheId)||{},new Promise((t=this,function(n,r){return _.fetch(t.projectModel.get("_id"),{success:function(r){var o,i;return!i&&(o=t._tasklistId)&&(i=r.get(o)),!i&&(o=e._tasklistId)&&(i=r.get(o)),i||(i=r.at(0)),t.tasklistModel=i,n()},error:r})})).then(function(e){return function(){return Promise.all([e.fetchMembersColleciton(),e.loadStages(),e.loadAncestorTask()])}}(this))},t.prototype.loadStages=function(){var e,t;return e=this.cacheProxy(this.localCache,this.localCacheId)||{},new Promise((t=this,function(n,r){return m.fetch(t.tasklistModel.get("_id"),{success:function(r){var o,i;return!i&&(o=t._stageId)&&(i=r.get(o)),!i&&(o=e._stageId)&&(i=r.get(o)),i||(i=r.at(0)),t.stageModel=i,n()},error:r})}))},t.prototype.loadAncestorTask=function(){return this.ancestorId?new Promise((e=this,function(t,n){return y.fetch(e.ancestorId,{success:function(n){return e.ancestorTaskModel=n,t()},error:n})})):Promise.resolve();var e},t.prototype.loadOrgMember=function(){return this._organizationId&&this._executorId?this._executorId===z.user.id?(this.orgMember=z.user.toJSON(),Promise.resolve()):new Promise((e=this,function(t,n){return o.get("organizations/"+e._organizationId+"/members/detail",{data:{_userId:e._executorId},success:function(n){return e.orgMember=n,t()},error:n})})):Promise.resolve();var e},t.prototype.fetchMembersColleciton=function(){return this.isIndieTask()?Promise.resolve():new Promise((e=this,function(t,n){return a.fetch(e.projectModel.get("_id"),{success:function(n){if(e.$el)return e.membersCollection=n,t()},error:n})}));var e},t.prototype.isIndieTask=function(){return!this.projectModel},t.prototype.canInviteMember=function(){return!this.isIndieTask()&&this.projectModel.hasPermission("post.member")},t.prototype.getTaskDefaultVisibility=function(){var e,t,n;switch(null!=(e=this.projectModel.get("taskDefaultInvolvesVisibility"))?e.involvesVisibility:void 0){case"all":return"involves";case"partial":return n=null!=(t=this.projectModel.get("taskDefaultInvolvesVisibility"))?t.tasklistIds:void 0,T.contains(n,this._tasklistId)?"involves":"members";default:return"members"}},t.prototype.reset=function(e){var t,n,r,o,i,s,c,l,u,p;return n=P.FEATURES.indieTaskVisibility?"members":"involves",l=T.extend({_creatorId:z.user.id,_executorId:null,dueDate:null,recurrence:null,involveMembers:[z.user.id],involvers:[z.user.toJSON()],content:""},this.cacheProxy(this.localCache,this.localCacheId),{_projectId:null!=(r=this.projectModel)?r.get("_id"):void 0,_tasklistId:null!=(o=this.tasklistModel)?o.get("_id"):void 0,_stageId:null!=(i=this.stageModel)?i.get("_id"):void 0,_ancestorId:this.ancestorId,visible:(null!=(s=this.ancestorTaskModel)?s.get("visible"):void 0)||(this.isIndieTask()?n:this.getTaskDefaultVisibility()),priority:void 0!==this.priority?this.priority:0}),this.startDate&&(l.startDate=this.startDate),this.dueDate&&(l.dueDate=this.dueDate),this.content&&(l.content=this.content),this.cacheProxy(this.localCache,this.localCacheId)||(l._executorId=null!=(c=z.PREFERENCE.preferenceTempCache("task_creator"))?c._executorId:void 0),this.isIndieTask()&&(u=z.PREFERENCE.get("lastWorkspace"),l._organizationId=this._organizationId,z.PREFERENCE.isPersonalWorkspace()||l._organizationId||(l._organizationId=u)),e&&this._executorId&&(l._executorId=this._executorId,l.involveMembers.push(this._executorId)),this.isIndieTask()?(e&&this.orgMember&&(l.involvers=T.uniq(l.involvers.concat(this.orgMember),function(e){return e._id})),this.membersCollection=new a(l.involvers)):(l.involvers||(l.involvers=[]),this.membersCollection=a.find(this.projectModel.id),l.involveMembers=T.filter(l.involveMembers,(p=this,function(e){return!!p.membersCollection.get(e)}))),this.extraCustomfields&&(l.customfields?(t=l.customfields.concat(this.extraCustomfields).reduce(function(e,t){return e.set(t._customfieldId,t)},new Map),l.customfields=Array.from(t.values())):l.customfields=this.extraCustomfields),this.membersCollection.get(l._executorId)||(l._executorId=void 0,l.executor=void 0),e&&(l._sprintId=this._sprintId),e&&this.isIndieTask()&&(l.note=this.getTaskNoteData()),e&&this.note&&(l.note=this.getTaskNoteData()),this.taskModel=new y(l),this.listen(),this},t.prototype.listen=function(){return this.stopListening(),this.listenTo(this.taskModel,"change",this.cacheTask),this.listenTo(this.taskModel,{"change:note":this.cacheNote}),this.listenTo(this.taskModel,"change:content",this.renderContent),this.listenTo(this.taskModel,"change:visible",this.renderVisible),this.listenTo(this.taskModel,"change:_tasklistId change:_stageId",this.renderTitle),this.listenToExecutor()},t.prototype.listenToExecutor=function(){var e;return this.isIndieTask()?this.listenTo(this.taskModel,"change:executor",(e=this,function(t,n){var r,o,i;if(n)return r=n._id,o=e.taskModel.get("involvers")||[],T.findWhere(o,{_id:r})?void 0:(i={involveMembers:t.get("involveMembers").concat(r),involvers:o.concat(n)},t.set(i),e.cacheTask())})):this.listenTo(this.taskModel,"change:_executorId",function(e){return function(t,n){return t.set("involveMembers",I(t.get("involveMembers"),n)),e.cacheTask()}}(this)),this},t.prototype.renderBasic=function(){return this.$el.html(r()),this.$title=this.$(".stage-selector-wrapper"),this.$basicAttrs=this.$(".basic-attrs-wrap"),this.$involveWrap=this.$(".creator-involve"),this.$requiredScenarioWrap=this.$(".task-required-scenario-wrap"),this.$submitHandler=this.$(".submit-handler"),this.$submitContinuityHandler=this.$(".submit-continuity-handler"),this.$input=this.$(".task-content-input"),this.$visibileEl=this.$(".creator-visible"),this.$input.flexText(),this.$taskFieldConfigWrapper=this.$(".task-field-config-wrapper"),this.$scenarioSelectorWrapper=this.$(".scenario-selector-wrapper"),this.validateSubmit(),this},t.prototype.renderTitle=function(){var e,t,n,r,o,s;return this.ancestorTaskModel?this.$title.html(i({ancestorTitle:this.ancestorTaskModel.get("content")})):this.isIndieTask()?this.$title.html(i({})):(t=this.projectModel.toJSON(),s=null!=(n=this.tasklistModel)?n.toJSON():void 0,o=null!=(r=this.stageModel)?r.toJSON():void 0,e=this.projectModel.isTaskflowEnabled()?T.compact([t.name,this.projectModel.isAppEnabled("tasklist")&&!this.projectModel.isTasklistIgnored()&&null!=s?s.title:void 0]):T.compact([t.name,this.projectModel.isAppEnabled("tasklist")?s.title:void 0,o.name]),this.$title.html(i({logo:t.logo,locations:e}))),this},t.prototype.renderTaskFieldConfig=function(e){var t;if(e||(this.clearScenarioRelatedCache(this.selectedScenarioField),this.setFieldConfig(),null!=(t=this.taskFieldConfigView)&&t.remove(),this.stopListening(this.taskFieldConfigView,"setConfig"),this.unmountReact(this.$scenarioSelectorWrapper.get(0))),!this.isIndieTask())return this.projectModel.isTaskflowEnabled()?this.renderScrumProjectConfig():this.renderNormalProjectConfig()},t.prototype.renderNormalProjectConfig=function(){var e;return this.taskFieldConfigView=this.requestSubView(b,{taskModel:this.taskModel,projectModel:this.projectModel,_tasklistId:this.tasklistModel.id,showTextHint:!1,isSubtask:!!this.ancestorTaskModel,_parentModelConfigId:null!=(e=this.ancestorTaskModel)?e.id:void 0,_configId:this.scenarioFieldConfigId}),this.taskFieldConfigView.$el.prependTo(this.$taskFieldConfigWrapper),this.listenTo(this.taskFieldConfigView,"setConfig",this.setFieldConfig)},t.prototype.renderScrumProjectConfig=function(){var e,t,n,r,o,i,s;return i=this.projectModel.hasPermission("scenariofieldconfig.edit")&&this.projectModel.get("_organizationId"),e=this.scenarioFieldConfigsCollection.toJSON(),r=this.proTemplateConfigType,(n=this.scenarioFieldConfigId)&&(t=e.find(function(e){return e._id===n})),!t&&r&&(t=e.find(function(e){return e.proTemplateConfigType===r})),t||(t=N(e)),o=void 0,this._taskflowstatusId&&(o=(t.taskflowstatuses||[]).find((s=this,function(e){return e._id===s._taskflowstatusId}))),this.requestReactView(this.$scenarioSelectorWrapper.get(0),d,{defaultScenarioFieldConfig:t,defaultTaskflowStatus:o,hasPermission:Boolean(i),isOrg:!!this.projectModel.get("_organizationId"),scenarioFieldConfigs:e,onSelect:this.setFieldConfig.bind(this),onRequestConfigView:this.requestApplicationFieldsConfig.bind(this)})},t.prototype.renderContent=function(){return this.$input.val(this.taskModel.get("content")).trigger("change"),this.validateSubmit(),this},t.prototype.renderBasicAttrs=function(){var e;return null!=(e=this.basicAttrsView)&&e.remove(),this.basicAttrsView=this.requestSubView(g,{ancestorId:this.ancestorId,isSet:!0,projectModel:this.projectModel,taskModel:this.taskModel,membersCollection:this.membersCollection}),this.$basicAttrs.html(this.basicAttrsView.el)},t.prototype.renderInvolve=function(){var e,t,n;return null!=(e=this.memberInvolveView)&&e.remove(),this.memberInvolveView=this.requestSubView(s,{_projectId:null!=(t=this.projectModel)?t.get("_id"):void 0,_organizationId:(null!=(n=this.projectModel)?n.get("_organizationId"):void 0)||this._organizationId,objectModel:this.taskModel,resident:[z.user.id],where:"creator",scenario:this.isIndieTask()&&"organization-members",enableInvite:this.canInviteMember(),getInheritedObjectInfo:this.getInheritedInfo,setInvolvers:this.setInvolvers}),this.$involveWrap.html(this.memberInvolveView.$el)},t.prototype.setInvolvers=function(e){return this.taskModel.set({involveMembers:e.map(function(e){return e._id}),involvers:e})},t.prototype.renderVisible=function(){return this.requestReactView(this.$visibileEl.get(0),E,{visibility:this.taskModel.get("visible"),onChange:this.switchVisible.bind(this)})},t.prototype.setFieldConfig=function(e,t){var n,r,o,i,s;return this.selectedScenarioField=e||null,this.selectedTaskflowStatus=t||null,this.selectedScenarioField&&(this.proTemplateConfigType=this.selectedScenarioField.proTemplateConfigType,this.scenarioFieldConfigId=this.selectedScenarioField._id),s={note:this.getTaskNoteData(),_scenariofieldconfigId:null!=e?e._id:void 0,_taskflowstatusId:null!=t?t._id:void 0},r=null!=(o=this.taskModel)?o.get("customfields"):void 0,this.selectedScenarioField&&r&&(n=this.selectedScenarioField.proTemplateConfigType,s.customfields=r.filter(D.bind(null,n))),null!=(i=this.taskModel)&&i.set(s),this.initScenarioConfigsView()},t.prototype.getPresetNote=function(){var e,t;return!!(null!=(e=null!=(t=this.selectedScenarioField)?t.scenariofields.find(function(e){return"note"===e.fieldType}):void 0)?e.default:void 0)?e.default:null},t.prototype.getTaskNoteData=function(){var e,t,n,r,o;return r=this.getPresetNote(),n=this.cacheProxy(this.localNoteCache,this.localCacheId)||{},e=r?null!=(o=this.selectedScenarioField)?o._id:void 0:"defaultId",n.scenarioFieldConfigId===e&&(t=n.note),t=t||this.localNoteDatas[e],(r?[r,this.note].join("\n"):this.note)||t||r||""},t.prototype.initScenarioConfigsView=function(){var e,t,n,r,o,i,s,a,c;return null!=(t=this.scenarioInfosView)&&t.remove(),this.isIndieTask()?a=this.showAllField?[{fieldType:"note",allowedRoleIds:null,allowedActors:M},{fieldType:"priority",allowedRoleIds:null,allowedActors:M},{fieldType:"worktimes",allowedRoleIds:null,allowedActors:M}]:[]:this.showAllField?(null!=(n=this.$(".more-handler"))&&n.hide(),a=(null!=(r=this.selectedScenarioField)?r.scenariofields:void 0)||[]):a=(null!=(o=this.selectedScenarioField)?o.scenariofields.filter(function(e){return e.required}):void 0)||[],e=[],null!=(i=this.taskModel.get("customfields"))&&i.forEach((c=this,function(t){var n;if(n=t._customfieldId,T.some(c.extraCustomfields,{_customfieldId:n}))return e.push({fieldType:"customfield",_customfieldId:n})})),(null!=(s=this.projectModel)?s.isSprintEnabled():void 0)&&e.push({fieldType:"sprint"}),void 0!==this.priority&&e.push({fieldType:"priority"}),this.scenarioInfosView=this.requestSubView(k,{objectModel:this.taskModel,projectModel:this.projectModel,boundToObjectType:"task",scenarioFields:a,extraFieldTypes:e}),this.scenarioInfosView.$el.prependTo(this.$requiredScenarioWrap),this.stopListening(this.scenarioInfosView),this.listenTo(this.scenarioInfosView,"requiredFieldsChanged",this.validateRequiredFields)},t.prototype.showTaskStageSelector=function(e){var t,n,r,o,i;if(!this.ancestorTaskModel)return t=$(e.currentTarget),o=z.PREFERENCE.get("lastWorkspace"),n=this._orgId||o,null!=(r=this.stageSelectorView)&&r.remove(),this.stageSelectorView=this.requestSubView(h,{$toggler:t,projectModel:this.projectModel,tasklistModel:this.tasklistModel,stageModel:this.stageModel,noFilter:!0,organizationId:n,optionalType:"scrumTaskCreator",success:(i=this,function(e){return i.projectModel=e.projectModel,i.tasklistModel=e.tasklistModel,i.stageModel=e.stageModel,n=e.organizationId,i._organizationId=n,i.fetchMembersColleciton().then(function(){var e;if(null!=(e=i.projectModel)?e.isTaskflowEnabled():void 0)return i.loadScenarioField()}).then(function(){if(i.el)return i.reset(),i.cacheTask(),i.renderTitle(),i.renderTaskFieldConfig(),i.renderBasicAttrs(),i.renderInvolve(),i.renderVisible()})})}).show(),this},t.prototype.getDefaultAttrs=function(){var e,t,n,r,o;for(r in t={},L)e=(n=L[r]).alias,o=n.defaultValue,t[e]=o;return t},t.prototype.getCreateTaskData=function(){var e,t,n,r,o;return o=this.taskModel.toJSON(),x(o),this.selectedScenarioField?(t=this.selectedScenarioField.scenariofields.map(function(e){return e.fieldType}),void 0!==this.priority&&t.push("priority"),n=t.map(function(e){return L[e].alias}),r=this.taskModel.pick(n),e=this.selectedScenarioField._taskflowId,T.extend({},o,this.getDefaultAttrs(),r,e)):o},t.prototype.clearScenarioRelatedCache=function(e){var t,n;if(e&&(null!=e?e._projectId:void 0)!==(null!=(n=this.projectModel)?n.id:void 0))return t=this.getDefaultAttrs(),this.taskModel.set(t)},t.prototype.switchVisible=function(e){return this.taskModel.set({visible:e}),this.gtaHandler({action:"Toggle visibility"}),this},t.prototype.submit=function(e){return null!=e&&e.preventDefault(),this.submitTask()},t.prototype.submitContinuity=function(e){return null!=e&&e.preventDefault(),this.submitTask(!0)},t.prototype.submitTask=function(e){var t,n,r;if(null==e&&(e=!1),t=e?this.$submitContinuityHandler:this.$submitHandler,!this.$el.hasClass("submiting")&&!0!==t.prop("disabled"))return n=this.$input.val().trim(),(r=T.compact(n.split(/\r\n|\r|\n/))).length>1?this.createMultipleTasks(r,n,e):1===r.length?this.createTask(n,e):this.focus(),!1},t.prototype.createTask=function(e,t){var n,r,o,i,s;return null==t&&(t=!1),this.isSubmitting(!0),r=this.getCreateTaskData(),n=T.pick(r,this.saveAttrs),(null!=(o=this.projectModel)?o.isTaskflowEnabled():void 0)||(n=T.omit(n,"_taskflowstatusId")),n.content=e,i=null,this.taskModel.clone().save(null,{url:i,attrs:n,wait:!0,error:(s=this,function(e,t){return s.isSubmitting(!1)}),success:function(e){return function(n){var r,o,s,a,c,l,u;return"function"==typeof e.success&&e.success([n.toJSON()]),!1!==e.isEssage&&(r=(c=n.toJSON())._id,o=c._projectId,s=c._scenariofieldconfigId,c._taskflowstatusId,a=c._tasklistId,n.isIndie()?i="/task/"+r:e.projectModel.hasScrumAppEnabled()?(l=O(s,r),i="/project/"+o+"/"+l):(u=R(a,r),i="/project/"+o+"/"+u),C.success({messageTitle:tb_i18n.get("create.task.success"),url:i,urlTitle:n.get("content"),description:n.get("_projectId")?"":tb_i18n.get("task.creator.indie.task.success.hint")})),z.PREFERENCE.cacheExecutorPreference(n.get("_executorId")),e.clearCache(),e.isSubmitting(!1),"function"==typeof e.onAllSuccess&&e.onAllSuccess({isContinuity:t}),t?(e.continuitySubmitted(),e.focus()):e.close(),e.gtaHandler({action:"added content"})}}(this)})},t.prototype.batchCreateTasks=function(e,t){return null==t&&(t=!1),this.ancestorTaskModel?this.batchCreateSubtasks(e,t):this.batchCreateNormalTasks(e,t)},t.prototype.batchCreateSubtasks=function(e,t){var n,r,o;return null==t&&(t=!1),r=T.omit(this.getCreateTaskData(),"_id","content"),n=T.extend({_id:this.ancestorTaskModel.id,subtasks:e},r),new Promise((o=this,function(e,t){return o.ancestorTaskModel.batchCreateSubtasks(n,{success:e,error:t})})).then(function(e){return function(n){var r;return r=n.map(function(e){return new y(e,{bindByMatrix:!1}).toJSON()}),"function"==typeof e.success&&e.success(r),z.PREFERENCE.cacheExecutorPreference(e.ancestorTaskModel.get("_executorId")),e.clearCache(),e.isSubmitting(!1),"function"==typeof e.onAllSuccess&&e.onAllSuccess(),t?(e.taskModel.set({content:""}),e.focus()):e.close(),e.gtaHandler({action:"added content"})}}(this)).catch(function(e){return function(){return e.isSubmitting(!1)}}(this))},t.prototype.continuitySubmitted=function(){var e,t,n;return t=["_organizationId","_projectId","_tasklistId","_stageId","_ancestorId","_scenariofieldconfigId","_taskflowstatusId","_sprintId","_executorId","executor","_creatorId","involveMembers","involvers","visible"],n=T.pick(this.taskModel.toJSON(),t),this.taskModel=new y(n),this.listen(),e=this.getPresetNote()||"",this.taskModel.set({note:e}),this.renderContent(),this.renderBasicAttrs(),this.renderTaskFieldConfig(),this.renderInvolve(),this},t.prototype.batchCreateNormalTasks=function(e,t){var n,r,i,s,a;return null==t&&(t=!1),n=T.extend(T.omit(this.getCreateTaskData(),"content"),{tasks:e}),s="",s=(null!=(r=this.projectModel)?r.isTasklistIgnored():void 0)&&(null!=(i=this.projectModel)?i.isTaskflowEnabled():void 0)?"taskflowstatus/"+this.taskModel.get("_taskflowstatusId")+"/import_tasks":"tasklists/"+this.taskModel.get("_tasklistId")+"/import_tasks",o.post(s,n).then((a=this,function(e){return"function"==typeof a.success&&a.success(e),z.PREFERENCE.cacheExecutorPreference(a.taskModel.get("_executorId")),a.clearCache(),a.isSubmitting(!1),"function"==typeof a.onAllSuccess&&a.onAllSuccess(),t?(a.continuitySubmitted(),a.focus()):a.close(),a.gtaHandler({action:"added content"})})).catch(function(e){return function(t){if(e.isSubmitting(!1),t)return w.error(String(t))}}(this))},t.prototype.createMultipleTasks=function(e,t,n){var r;return null==n&&(n=!1),50,e.length>50?this.requestSubView(c,{$toggler:n?this.$submitContinuityHandler:this.$submitHandler,title:tb_i18n.get("task.creator.multiple.too.many"),description:tb_i18n.get("task.creator.multiple.too.many.desc",50,e.length),cancelStr:tb_i18n.get("task.creator.multiple.too.many.confirm"),onCancel:(r=this,function(){return r.focus()})}).show():this.requestSubView(c,{$toggler:n?this.$submitContinuityHandler:this.$submitHandler,title:tb_i18n.get("task.creator.multiple"),description:tb_i18n.get("task.creator.multiple.desc",e.length),cancelStr:tb_i18n.get("task.creator.multiple.one"),confirmStr:tb_i18n.get("task.creator.multiple.all",e.length),onCancel:function(e){return function(){return e.createTask(t,n)}}(this),onConfirm:function(t){return function(){return t.batchCreateTasks(e,n)}}(this)}).show()},t.prototype.validateRequiredFields=function(e){return this.requiredFieldsValidated=e,this.validateSubmit()},t.prototype.validateSubmit=function(){var e;return e=[!!this.taskModel.get("content"),this.requiredFieldsValidated].every(function(e){return e}),this.$submitHandler.prop("disabled",!e),this.$submitContinuityHandler.prop("disabled",!e)},t.prototype.isSubmitting=function(e){return this.$el[e?"addClass":"removeClass"]("submiting"),this},t.prototype.requestApplicationFieldsConfig=function(){return this.requestSubView(l,{projectModel:this.projectModel,tabName:"taskFieldConfig"})},t.prototype.toggleMore=function(){return this.$(".more-handler").hide(),this.showAllField=!0,this.initScenarioConfigsView(),this},t.prototype.focus=function(){var e;return null!=(e=this.$input)&&e.focusAtEnd(),this},t.prototype.quickSubmit=function(e){return 13===e.keyCode&&(e.preventDefault(),this.submit(e)),this},t.prototype.cacheTask=function(){var e,t,n;return e=this.$input.val(),this.taskModel.set("content",e),(n=(null!=(t=this.taskModel)?t.toJSON():void 0)||{}).content=e,this.cacheProxy(this.localCache,this.localCacheId,T.omit(n,"note")),this},t.prototype.cacheNote=function(e){var t,n,r;return r=e.get("note"),n=this.getPresetNote()?this.selectedScenarioField._id:"defaultId",this.localNoteDatas[n]=r,t={scenarioFieldConfigId:n,note:r},this.cacheProxy(this.localNoteCache,this.localCacheId,t)},t.prototype.clearCache=function(){return this.localCache.remove(this.localCacheId),this.localNoteCache.remove(this.localCacheId),this.localNoteDatas={},this},t.prototype.onOpen=function(){return this.focus(),this},t.prototype.close=function(){var e,t;return(null!=(e=this.parentView)?e.close:void 0)?this.parentView.close():null!=(t=this.parentView)&&t.remove(),this},t.prototype.gtaSetFollowers=function(){return this.gtaHandler({action:"set followers"})},t.prototype.gtaSetEditTitle=function(){return this.gtaHandler({action:"edit title"})},t.prototype.gtaHandler=function(e){return e=T.extend({control:"Global New Task",series:this.series,type:this.ancestorTaskModel?"subtask":"task"},e),z.gta.event(e)},t}(),t.Constructor=v},H5WCQzW3:function(e,t,n){e.exports={"guide-hint":"guide-hint__3kSu"}},H72dUcNY:function(e,t,n){"use strict";n.r(t);var r=n("RLGFXQAd");n.d(t,"ProjectSelector",function(){return r.a});var o=n("kAl3+ULZ");n.d(t,"ProjectMultipleSelector",function(){return o.a});var i=n("ewKRJkVa");n.d(t,"ProjectSelectorWithHint",function(){return i.a});var s=n("mqeb6GpD");n.d(t,"projectAsSelectorItem",function(){return s.c}),n.d(t,"projectsFilter",function(){return s.e}),n.d(t,"projectFilter",function(){return s.d});var a=n("zWIKzRr6");for(var c in a)["projectAsSelectorItem","projectsFilter","projectFilter","ProjectSelector","ProjectMultipleSelector","ProjectSelectorWithHint","default"].indexOf(c)<0&&function(e){n.d(t,e,function(){return a[e]})}(c)},"H7iXf0X/":function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("VuB9cZyl"),o=n("Yhl9Tv18"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="skitches",t.prototype.model=o,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listen()},t}()},H8Maba57:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";return"rename"===e.currentTab?o+=' <div class="project-category-action-menu-top-content"> <input class="project-category-action-menu-input-text" placeholder="'+r(tb_i18n.get("input.project.category.name"))+'" type=\'text\' /> </div> <div class="project-category-action-menu-bottom-content"> <button class="project-category-action-menu-button change-project-category-name-handler" type="button" > '+r(tb_i18n.get("save"))+" </button> </div>":"delete"===e.currentTab?o+=' <div class="project-category-action-menu-top-content"> <span>'+r(tb_i18n.get("before.deleting.project.category.confirm.text"))+'</span> </div> <div class="project-category-action-menu-bottom-content"> <button class="project-category-action-menu-button delete-project-category-handler" type="button" > '+r(tb_i18n.get("confirm"))+" </button> </div>":o+=' <ul class="project-category-action-menu-list"> <li class="project-category-action-menu-list-item"> <a class="project-category-action-menu-link route-to-rename-project-category-handler"> <span class="icon icon-pencil"></span> <span>'+r(tb_i18n.get("rename.project.category"))+'</span> </a> </li> <li class="project-category-action-menu-list-item"> <a class="project-category-action-menu-link route-to-delete-project-category-handler"> <span class="icon icon-trash"></span> <span>'+r(tb_i18n.get("delete.project.category"))+"</span> </a> </li> </ul>",o}},"HBFx+Fuo":function(e,t,n){e.exports={"avatar-list":"avatar-list__-mfb"}},"HCp9489+":function(e,t){e.exports=function(e){var t='<div class="note-aside detail-infos-aside"> <span class="icon icon-book detail-infos-icon"></span> <span class="note-title">'+tb_i18n.get("note")+'</span></div><div class="note-section detail-infos-content flex-space ';return e.editable||(t+="ban"),t+='"> <div class="note-adder-set ',e.editable||(t+="ban"),t+='"> <a class="add-note-handler ',e.editable||(t+="ban"),t+='"> '+tb_i18n.get("to.be.added")+' </a> </div> <div class="note-wrap"> <div class="note-container"> <div class="note-text-set"> <div class="note-text readable ',e.editable&&(t+="hinted editable"),t+='" data-title="'+tb_i18n.get("clickToEdit")+'"></div> </div> </div> <div class="note-button hide"> <a class="toggle-note-handler show-all-handler">'+tb_i18n.get("note.expand")+'</a> <a class="toggle-note-handler collapse-all-handler hide">'+tb_i18n.get("note.collapse")+"</a> </div> </div> ",e.hasPutPermission&&(t+=' <div class="note-input-set"></div> '),t+="</div>"}},HEmvOgQr:function(e,t,n){e.exports={"payment-stauts-title":"payment-stauts-title__1Uqr","payment-status-member-quota":"payment-status-member-quota__2HEe","member-quota-content":"member-quota-content__13n6","member-quota-left":"member-quota-left__2fJ1","member-quota-left-wrap":"member-quota-left-wrap__1ojl","member-quota-right":"member-quota-right__3Blz","member-quota-right-btn":"member-quota-right-btn__2bFY","payment-status-privilege":"payment-status-privilege__1oPc","medal-container":"medal-container__rmei","privilege-detail-toggler":"privilege-detail-toggler__12mw","payment-status-hint":"payment-status-hint__-r4f","payment-turnoff-upgrade-tip":"payment-turnoff-upgrade-tip__oatU","member-quota-number":"member-quota-number__1fJc"}},HKgz4Zv3:function(e,t,n){e.exports=n.p+"images/d_dalian@2x.adcc3d97.png"},"HLWm+6U5":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("s0r7VfKc"),a=n("sa1Ed382"),c=n("tLZJUYWX"),l=n.n(c),u=n("GESwhXbR"),p=n("geguUBpm"),d=n("H72dUcNY"),h=n("ay2Xcmrs"),m=n("MDObF51X"),f=n.n(m),g=function(e){function t(t){var n=e.call(this,t)||this;return n.gotoTestplan=function(){a.router.navigate("/project/"+n.props.project._id+"/testplan",{trigger:!0})},n.onSelectTestplan=function(e){var t=e.testplan,r=e.project;n.setState({testplan:t,project:r})},n.onSubmit=function(){n.props.onSubmit(n.state.name.trim(),n.state.testplan._id),n.props.onVisibleChange(!1)},n.onNameChange=function(e){n.setState({name:e.target.value})},n.state={testplans:null,testplan:null,name:n.props.name.slice(0,h.b),project:n.getSelectedProject()},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.opened&&(this.testplanSubscription$=s.default.fetch.getTestplans(this.props.project._id).subscribe(function(t){e.setState({testplans:t,testplan:t.find(function(t){return t._id===e.props.testplanId})||t[0]})}))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.name!==e.name&&this.setState({name:(e.name||"").slice(0,h.b)})},t.prototype.componentDidUpdate=function(e){var t=this;e.opened!==this.props.opened&&(this.props.opened?(this.testplanSubscription$&&this.testplanSubscription$.unsubscribe(),this.testplanSubscription$=s.default.fetch.getTestplans(this.props.project._id).subscribe(function(e){t.setState({testplans:e,testplan:e[0]})})):this.setState({testplans:null,testplan:null,name:this.props.name,project:this.getSelectedProject()}))},t.prototype.componentWillUnmount=function(){this.testplanSubscription$&&this.testplanSubscription$.unsubscribe()},t.prototype.getSelectedProject=function(){return r.a({},Object(d.projectAsSelectorItem)(this.props.project),{checked:!0,canToggle:!0})},t.prototype.renderTestplanSeletor=function(){return i.a.createElement(p.a,{nested:!0,organizationId:this.props.project._organizationId,selectedProject:this.state.project,selectedTestplan:this.state.testplan||void 0,projectId:this.state.project.id,testplans:this.state.testplans,onSelect:this.onSelectTestplan},i.a.createElement("div",{className:f.a["testplan-selector"]},i.a.createElement("div",{className:f.a["testplan-selector-icon"]},i.a.createElement(u.Icon,{name:"testplan",size:16})),i.a.createElement("span",{className:f.a["testplan-selector-project-name"]},this.state.project.name),i.a.createElement("span",{className:f.a["testplan-selector-testplan-name"]},"· "+this.state.testplan.name),i.a.createElement(u.Icon,{name:"chevron-down",size:12})))},t.prototype.renderCreator=function(){var e=this.state.name.trim().length,t=0===e||e>h.b||!this.state.testplan;return this.state.testplans&&this.state.testplans.length>0&&i.a.createElement(i.a.Fragment,null,this.renderTestplanSeletor(),i.a.createElement(u.Input,{value:this.state.name,onChange:this.onNameChange,className:f.a.input}),i.a.createElement("p",{className:f.a["creator-description"]},l.a.get("testgroup.creator.model.description")),i.a.createElement(u.Button,{disabled:t,onClick:this.onSubmit,className:f.a["creator-button"]},l.a.get("testgroup.creator.modal.submit")))},t.prototype.renderNoTestplan=function(){return this.state.testplans&&0===this.state.testplans.length&&i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:f.a["no-testplan-description"]},l.a.get("testgroup.creator.modal.dropdown.description")),i.a.createElement(u.Button,{className:f.a["creator-button"],onClick:this.gotoTestplan},l.a.get("testgroup.creator.modal.dropdown.goto.testplan")))},t.prototype.renderLoading=function(){return!this.state.testplans&&i.a.createElement(u.Loading,null)},t.prototype.renderContent=function(){return i.a.createElement("div",{className:f.a.content},this.renderNoTestplan(),this.renderCreator(),this.renderLoading())},t.prototype.render=function(){var e=!this.state.testplans||this.state.testplans.length>0?l.a.get("testgroup.creator.modal.title"):l.a.get("testgroup.creator.modal.title.no.testplan");return i.a.createElement(u.Modal,{title:e,titlePosition:"center",mountIn:this.props.mountIn,opened:this.props.opened,onVisibleChange:this.props.onVisibleChange},this.renderContent())},t.defaultProps={name:""},t}(i.a.PureComponent);n.d(t,"TestgroupCreatorModal",function(){return g})},HLaCnIR0:function(e,t,n){"use strict";var r,o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n.n(i),a=n("i8i4LrFt"),c=n("sa1Ed382"),l=n("wd/RKGTj"),u=n.n(l),p=n("HYobN8SQ"),d=n.n(p),h=((r={})[n("2uRu9aah").b.SoftExcess]=function(){var e=c.PREFERENCE.get("lastWorkspace")+"-soft-excess",t=d.a.get(e),n=t&&u()(t),r=u()();return!(n&&n.isValid()&&n.isSame(r,"day"))&&(d.a.set(e,r.toISOString()),!0)},r.get=function(e){return this[e]?this[e]:function(){return!0}},r);n.d(t,"a",function(){return f}),n.d(t,"b",function(){return g});var m=new(function(){function e(){this.instance=null}return e.createMountNode=function(){var e=document.createElement("span");return document.body.appendChild(e),e},e.prototype.open=function(t){this.mountNode||(this.mountNode=e.createMountNode()),t&&(this.instance=t,this.render())},e.prototype.close=function(){this.mountNode&&(this.instance=null,this.render())},e.prototype.render=function(){a.render(s.a.createElement("div",null,this.instance),this.mountNode)},e}()),f=function(){return m.close()},g=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.props;h.get(r.viewType)()&&m.open.apply(m,o.h([e],t))}},HMGcR10L:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("a+N5u/Cl"),s=n("sa1Ed382"),a=n("tLZJUYWX"),c=n.n(a),l=n("TSYQbtd+"),u=n.n(l),p=n("YNuMcZdd"),d=n.n(p),h=n("GESwhXbR"),m=n("70UrrKBP"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonRef=o.createRef(),t}return r.d(t,e),t.prototype.componentDidMount=function(){this.buttonRef.current&&(this.uploader=new m.Uploader({auto:!0,accept:".xlsx,.xls,.csv",pick:{id:this.buttonRef.current,multiple:!1},directory:!1,onQueued:this.props.onQueued,onStart:this.props.onStart,onComplete:this.props.onComplete}))},t.prototype.componentWillUnmount=function(){this.uploader&&this.uploader.destroy()},t.prototype.render=function(){var e=this.props.isTextButton?o.createElement(h.TextButton,{className:this.props.cls},this.props.children):o.createElement(h.Button,{className:this.props.cls},this.props.children);return o.createElement("span",{className:d.a["button-wrapper"],ref:this.buttonRef},e)},t}(o.PureComponent);n.d(t,"a",function(){return g}),n.d(t,"b",function(){return k});var g,v=n("+2RfZ2TT"),b=n("QyjeWo4p"),y=n("2qRnoGmE");!function(e){e.PreUpload="preUpload",e.Uploading="uploading",e.Uploaded="uploaded",e.ParsedSuccess="parsedSuccess",e.ParsedError="parsedError"}(g||(g={}));var k=function(e){function t(t){var n=e.call(this,t)||this;return n.onOpen=function(){s.gta.event({action:"import content",type:n.caseType}),n.props.onOpen()},n.handleDownload=function(){s.gta.event({action:"download import template",type:n.caseType});var e=n.props,t=e.isUsercase,r=e.targetId,o=t?b.stringify({basic:!0,_testhubId:r}):b.stringify({_projectId:r});v.fileDownload(y.API_HOST+"/tis/export/template/testcase?"+o)},n.submitImport=function(){s.gta.event({action:"imported execute case",type:n.caseType}),n.props.submitImport()},n.renderUploadButton=function(e){return function(t,r,i){void 0===r&&(r=!1),void 0===i&&(i="");return o.createElement(f,{onQueued:n.props.onQueued,onStart:function(){n.props.onStart(),s.gta.event({action:e?"update import file":"upload import file",type:n.caseType})},onComplete:n.props.onComplete,isTextButton:r,cls:i},t)}},n.caseType=n.props.isUsercase?"base testcase":"execute testcase",n}return r.d(t,e),t.prototype.renderMainFlow=function(){var e=u()("thin-scroll",d.a.content);return o.createElement("div",{className:e},this.renderDownloadSection(),this.renderUploadSection(),this.renderFileContainer(),this.renderUploadInfo())},t.prototype.renderDownloadSection=function(){var e=this.props,t=e.isUsercase,n=e.targetName,r=t?c.a.get("testcase.import.type.usercase"):c.a.get("testcase.import.type.testcase");return o.createElement("section",{className:d.a["steps-section"]},o.createElement("div",{className:d.a["steps-section-icon"]},"1"),o.createElement("div",null,o.createElement("div",{className:d.a["content-title"]},c.a.get("testcase.import.steps.title.downloadtemplate",r)),o.createElement("div",{className:d.a["content-subtitle"]},c.a.get("testcase.import.steps.subtitle.downloadTemplate",n,r)),o.createElement(h.Button,{onClick:this.handleDownload},c.a.get("testcase.import.downloadTemplate"))))},t.prototype.renderUploadSection=function(){return o.createElement("section",{className:d.a["steps-section"]},o.createElement("div",{className:d.a["steps-section-icon"]},"2"),o.createElement("div",null,o.createElement("div",{className:d.a["content-title"]},c.a.get("testcase.import.steps.title.import.file")),o.createElement("div",{className:d.a["conetent-subtitle"]},o.createElement("ul",null,o.createElement("li",null,c.a.get("testcase.import.steps.subtitle.fileType")),o.createElement("li",null,c.a.get("testcase.import.steps.subtitle.caseLimit")),o.createElement("li",null,c.a.get("testcase.import.steps.subtitle.rule")))),null===this.props.file&&this.renderUploadButton(!1)(c.a.get("testcase.import.upload"))))},t.prototype.renderFileContainer=function(){var e=this.props,t=e.status,n=e.file,r=t===g.ParsedError||t===g.ParsedSuccess,i=o.createElement("div",{className:d.a["file-status"]},c.a.get("testcase.import.file.status.uploading"),o.createElement(h.Spinner,{size:"small",className:d.a["file-status-icon"]})),s=o.createElement("div",{className:d.a["file-status"]},c.a.get("testcase.import.file.status.parsing"),o.createElement(h.Spinner,{size:"small",className:d.a["file-status-icon"]})),a=this.renderUploadButton(!0)(o.createElement(o.Fragment,null,o.createElement(h.Icon,{name:"circle-arrow-up-o",className:d.a["file-update-icon"]}),c.a.get("testcase.import.file.status.update")),!0,d.a["update-file"]);return n&&o.createElement("div",{className:d.a["file-container"]},o.createElement("div",{className:d.a["file-name"]},o.createElement(h.Icon,{name:"file",className:d.a["file-name-icon"]}),n.fileName?n.fileName:n.name),t===g.Uploading&&i,t===g.Uploaded&&s,r&&o.createElement("div",{className:d.a["file-status"]},a))},t.prototype.renderUploadInfo=function(){var e=o.createElement("div",{className:d.a["parse-success"]},o.createElement(h.Icon,{name:"circle-check",className:d.a["parse-success-icon"]}),c.a.get("testcase.import.info.success")),t=o.createElement("div",{className:d.a["parse-error"]},o.createElement(h.Icon,{name:"warning",className:d.a["parse-error-icon"]}),c.a.get("testcase.import.info.error"));return o.createElement(o.Fragment,null,this.props.status===g.ParsedSuccess&&e,this.props.status===g.ParsedError&&t)},t.prototype.renderErrorTab=function(){var e=u()("thin-scroll",d.a.content);return o.createElement("div",{className:e},this.renderErrorInfo(),this.renderTable())},t.prototype.renderErrorInfo=function(){var e=this.props,t=e.totalRows,n=e.errData,r=i.chain(n).pluck("row").uniq().value().length,s=t-r;return o.createElement("div",null,o.createElement("div",{className:d.a["content-title"]},c.a.get("testcase.import.error.content.title",t,s)),o.createElement("div",{className:d.a["content-subtitle"]},c.a.get("testcase.import.error.content.subtitle",r)))},t.prototype.renderTable=function(){var e=function(e){return e?o.createElement(h.Tooltip,{title:e},e):e},t=this.props.errData.map(function(t,n){return o.createElement("tr",{key:n},o.createElement("td",null,t.row),o.createElement("td",null,e(t.celName)),o.createElement("td",null,e(t.content)),o.createElement("td",null,e(t.reason)))});return o.createElement("table",{className:d.a["error-table"]},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,c.a.get("testcase.import.error.table.row")),o.createElement("th",null,c.a.get("testcase.import.error.table.celName")),o.createElement("th",null,c.a.get("testcase.import.error.table.content")),o.createElement("th",null,c.a.get("testcase.import.error.table.reason")))),o.createElement("tbody",null,t))},t.prototype.renderFooter=function(){return this.props.errData.length>0?this.renderReuploadOrSubmit():this.renderSubmit()},t.prototype.renderReuploadOrSubmit=function(){var e=this.props,t=e.errData,n=e.totalRows,r=i.chain(t).pluck("row").uniq().value().length;return o.createElement("div",{className:d.a.footer},o.createElement("div",{className:d.a["reUpload-wrap"]},this.renderUploadButton(!0)(c.a.get("testcase.import.error.reUpload"),!0,d.a.reUpload)),o.createElement(h.Button,{disabled:n<=r,onClick:this.submitImport},c.a.get("testcase.import.confirm.import")))},t.prototype.renderSubmit=function(){return o.createElement("div",{className:d.a.footer},o.createElement(h.Button,{disabled:this.props.status!==g.ParsedSuccess,onClick:this.submitImport},c.a.get("testcase.import.confirm.import")))},t.prototype.render=function(){return o.createElement(h.Modal,{width:600,zIndex:100,titleCls:d.a.title,bodyStyle:{padding:0},opened:this.props.opened,onOpen:this.onOpen,onVisibleChange:this.props.onVisibleChange,title:c.a.get("testcase.import.title")},o.createElement("div",{className:d.a.body},this.props.errData.length>0?this.renderErrorTab():this.renderMainFlow(),this.renderFooter()))},t}(o.PureComponent)},HPuQ6HjQ:function(e,t,n){e.exports=n("MKz6J3aY")+"\n\nquery TeamProjectsPicker(\n  $_organizationId: ObjectId!,\n  $teamId: ObjectId!,\n  $pageToken: String,\n  $pageSize: PageSizeType = 20,\n) {\n  projects: Projects(\n    pageToken: $pageToken,\n    _organizationId: $_organizationId,\n    pageSize: $pageSize,\n    filters: {\n      selectBy: team,\n      _teamId:  $teamId\n    }\n  ){\n    nextPageToken\n    totalSize\n    result {\n    \t...projectSchema\n    }\n  }\n}\n"},HQbqjkpU:function(e,t,n){e.exports=n.p+"images/d_zuiyou@2x.9ed9123f.png"},HVbnodQK:function(e,t,n){"use strict";var r,o,i=n("mrSGxOB2"),s=n("q1tIBJhx"),a=n("TSYQbtd+"),c=n.n(a),l=n("tLZJUYWX"),u=n("GESwhXbR"),p=n("smMC6FqF"),d=n("+8QiCx8R");!function(e){e[e.Init=0]="Init",e[e.Create=1]="Create",e[e.Edit=2]="Edit",e[e.Delete=3]="Delete"}(o||(o={}));var h=function(e){function t(t){var n=e.call(this,t)||this;return n.saveRef=function(e){return n.popupMenuRef=e},n.onChange=function(e){n.setState({input:e.target.value})},n.onSelectColor=function(e){n.setState({tagColor:e})},n.onCreateTag=function(){var e=n.state.input.trim();""!==e&&(n.props.onCreateTag({name:e,color:n.state.tagColor}),n.goToPopupMode(o.Init))},n.onDeleteTag=function(){var e=n.state.tag;e&&(n.props.onRemoveTag(e._id),n.goToPopupMode(o.Init))},n.onEditTag=function(){var e=n.state.tag,t=n.state.input.trim();e&&""!==t&&(n.props.onModifyTag(e._id,{name:t,color:n.state.tagColor}),n.goToPopupMode(o.Init))},n.state={input:"",tagColor:"",mode:o.Init},n}return i.d(t,e),t.prototype.goToPopupMode=function(e,n){var r={};switch(e){case o.Create:var i="";n&&(i=n.name||""),r={input:i,tagColor:"",mode:e};break;case o.Edit:if(!n||!n._id)return;r={input:n.name,tagColor:n.color,tag:n,mode:e}}this.setState(r),this.popupMenuRef.goTo(t.mode2PageMap[e])},t.prototype.renderViewForCreateOrEditTag=function(){var e=this,t=this.state.input.trim(),n="",r=null;switch(this.state.mode){case o.Create:n=l.get("tag.creator.title"),r=s.createElement("div",null,s.createElement(u.Button,{className:"tag-create-btn",disabled:""===t,onClick:this.onCreateTag},l.get("create")));break;case o.Edit:n=l.get("tag.menu.edit.title");var i=s.createElement(u.Button,{className:"tag-delete-btn",danger:!0,type:"secondary",onClick:function(){return e.popupMenuRef.goTo(2)}},l.get("delete")),a=s.createElement(u.Button,{className:"tag-edit-btn",disabled:""===t,onClick:this.onEditTag},l.get("finish"));r=this.state.tag.canDelete?s.createElement("div",{className:"delete-and-edit-btns"},i,a):s.createElement("div",{className:"delete-and-edit-btns"},a)}return s.createElement(u.PopupMenuView,{index:1,title:n,className:"tag-create"},s.createElement("input",{type:"text",className:"form-control",placeholder:l.get("tag.creator.placeholder"),value:this.state.input,onChange:this.onChange}),s.createElement(p.a,{className:"color-picker",selectedColor:this.state.tagColor,onSelectColor:this.onSelectColor}),r)},t.prototype.renderViewForDeleteTag=function(){return s.createElement(u.PopupMenuView,{index:2,title:l.get("tag.menu.delete.title"),className:"tag-delete"},s.createElement("p",{className:"tag-delete-confirm"},l.get("tag.menu.confirm.delete")),s.createElement(u.Button,{className:"tag-confirm-delete-btn",danger:!0,onClick:this.onDeleteTag},l.get("delete")))},t.prototype.render=function(){var e,t=this.props,n=t.onHide,r=t.className,o=i.g(t,["onHide","className"]),a=i.a({},o,{main:0,titleCls:"popup-title",ref:this.saveRef,onClose:n}),l=c()(((e={})[d["tag-popup-menu"]]=!0,e[r]=!!r,e));return s.createElement(u.PopupMenu,i.a({className:l},a),s.createElement(u.PopupMenuView,{className:"init-page-view",index:0,title:s.createElement("div",null)},this.props.children),this.renderViewForCreateOrEditTag(),this.renderViewForDeleteTag())},t.mode2PageMap=((r={})[o.Init]=0,r[o.Create]=1,r[o.Edit]=1,r[o.Delete]=2,r),t}(s.PureComponent);n.d(t,"a",function(){return h}),n.d(t,"b",function(){return o})},"HXA+oDyn":function(e,t,n){e.exports=n.p+"images/d_landelini@2x.97288a6b.png"},HagJDa9N:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"c",function(){return m}),n.d(t,"b",function(){return f});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n("GESwhXbR"),c=n("sa1Ed382"),l=n("RLD3BeS/"),u=n("LjpfMXQ9"),p=n("1pe9u56C");function d(e,t,n){var o;void 0===n&&(n={});var d="\n    "+s.get("gantt.view.detect.conflict.1",e)+"\n    <a>"+s.get("gantt.view.auto.adjust")+"</a>\n    "+s.get("gantt.view.detect.conflict.2")+"\n  ";o=a.Toast.info(r.a({description:i.a.createElement(l.RawHTMLWithAnchorFormatter,{html:d,onClick:function(){Object(u.autoAdjustConflicts)(t).toPromise().then(function(e){o&&a.Toast.close(o);var t,i,s=r.f((t=m(e),i=n.openTaskDetailView,"success"===t.status?["success",t]:["info",{message:Object(p.a)(t,i),duration:null}]),2),c=s[0],l=s[1];a.Toast[c](l)})}})},n.shouldEssagePersist&&{duration:null})),c.gta.event({action:"detected conflicting dependency",type:"task"})}var h=3;function m(e){if(!e.noPermissions||0===e.noPermissions.length)return{status:"success",message:s.get("org.gantt.auto.adjust.success")};var t=e.noPermissions,n=t.slice(0,h+1).map(function(e,t){if(t===h)return{kind:"more",content:""};var n=e.executor?e.executor.name:"";return e.isPrivate?{kind:"partial",content:n?s.get("org.gantt.auto.adjust.private.item"):s.get("org.gantt.auto.adjust.private.no.executor"),taskId:e._id,executor:n}:{kind:"visible",content:e.content,taskId:e._id,executor:n}});return{status:"warning",message:s.get("org.gantt.auto.adjust.partial.failed",t.length),content:n}}var f="task-dependency-auto-adjust-failed-at-some"},"Hb+rakDI":function(e,t,n){"use strict";var r=n("bI6GdBuM");n.o(r,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return r.AbstractPortal}),n.o(r,"getProjectGroupComponent")&&n.d(t,"getProjectGroupComponent",function(){return r.getProjectGroupComponent}),n.o(r,"getProjectGroupProps")&&n.d(t,"getProjectGroupProps",function(){return r.getProjectGroupProps}),n.o(r,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return r.getSuspendedMsg}),n.o(r,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return r.verifyProjectPayment});var o=n("49UbZ8Y7");n.o(o,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return o.AbstractPortal}),n.o(o,"getProjectGroupComponent")&&n.d(t,"getProjectGroupComponent",function(){return o.getProjectGroupComponent}),n.o(o,"getProjectGroupProps")&&n.d(t,"getProjectGroupProps",function(){return o.getProjectGroupProps}),n.o(o,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return o.getSuspendedMsg}),n.o(o,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return o.verifyProjectPayment});var i=n("i0T2B3DC");n.o(i,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return i.AbstractPortal}),n.o(i,"getProjectGroupComponent")&&n.d(t,"getProjectGroupComponent",function(){return i.getProjectGroupComponent}),n.o(i,"getProjectGroupProps")&&n.d(t,"getProjectGroupProps",function(){return i.getProjectGroupProps}),n.o(i,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return i.getSuspendedMsg}),n.o(i,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return i.verifyProjectPayment});var s=n("26N8qinq");n.d(t,"getProjectGroupComponent",function(){return s.a}),n.d(t,"getProjectGroupProps",function(){return s.b});var a=n("HtjDT96f");n.o(a,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return a.AbstractPortal}),n.o(a,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return a.getSuspendedMsg}),n.o(a,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return a.verifyProjectPayment})},HgMABPdd:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR");n("D4KHCQrV");var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){return function(){t.props.onToggleLink(e)}},t}return r.d(t,e),t.prototype.render=function(){var e=a()("list-checker",this.props.className);return o.createElement("ul",{className:e},o.createElement("li",{className:"flex flex-vcenter link-checker-item"},o.createElement(c.Checkbox,{checked:this.props.doLink,onChange:this.onChange("doLink")}),o.createElement("span",{className:"link-checker-text",onClick:this.onChange("doLink")},this.props.doLinkText||i.get("task.menu.copy.check.link"))),o.createElement("li",{className:"flex flex-vcenter link-checker-item"},o.createElement(c.Checkbox,{checked:this.props.doLinked,onChange:this.onChange("doLinked")}),o.createElement("span",{className:"link-checker-text",onClick:this.onChange("doLinked")},this.props.doLinkedText||i.get("task.menu.copy.check.linked"))))},t}(o.PureComponent);n.d(t,"a",function(){return l})},HgmqnJFi:function(e,t,n){var r,o,i,s={}.hasOwnProperty;r=n("vmWJWrVe"),n("a+N5u/Cl"),n("3eMzznN/"),i=n("tLZJUYWX"),o=n("AGtPin/S").WebLinkComponent,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="WechatLinkView",t.prototype.className="wechat-link-view flex-vert flex-space",t.prototype.initialize=function(e){var t;if((t=e.data).length>0)return this.requestReactView(this.el,o,{items:t,linkTitle:i.get("link.wechat.title")})},t}()},HjX9MwPa:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;i=n("a+N5u/Cl"),o=n("vmWJWrVe"),s=n("wMS7wN+j"),r=n("G4lwMbjU"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="YinxiangDetailView",t.prototype.className="yinxiang-detail-view modal-dialog flex-space flex",t.prototype.initialize=function(e){return this.linkModel=e.linkModel,this.renderBasic().listen()},t.prototype.listen=function(){return this.listenTo(this.linkModel,"remove",this.close)},t.prototype.parseString=function(e){return s.sanitize(e,{FORBID_TAGS:["img"]})},t.prototype.renderBasic=function(){var e,t,n;return n=this.linkModel.toJSON(),e=this.parseString(n.data.content),t=i.extend({},n,{iframeData:encodeURIComponent(e)}),this.$el.html(r(t)),this},t.prototype.close=function(){var e;return null!=(e=this.parentView)?e.remove():void 0},t}()},HtjDT96f:function(e,t,n){"use strict";var r=n("SarpuGbc");n.d(t,"ProjectListGroup",function(){return r.a});var o=n("d6c6pAxJ");n.o(o,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return o.AbstractPortal}),n.o(o,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return o.getSuspendedMsg}),n.o(o,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return o.verifyProjectPayment})},HzGwuSGm:function(e,t,n){e.exports=n.p+"images/d_haixiu@2x.189449c8.png"},"I+69Sort":function(e,t,n){},"I+S24KlG":function(e,t,n){var r,o,i,s={}.hasOwnProperty;r=n("qHH6+g6Q"),i=n("8N+zwa3A"),o=n("H7iXf0X/"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="version",t.prototype.urlRoot="versions",t.prototype.initialize=function(){return this.skitchesCollection=new o(this.get("skitches")||[],{_boundToObjectId:this.id}),t.__super__.initialize.apply(this,arguments)},t.prototype.url=function(){return"works/"+this.get("_workId")+"/versions/"+this.get("_id")},t.prototype.skitchUrl=function(){return"versions/"+this.id+"/skitches"},t.prototype.getFormatData=function(){var e;return e=this.toJSON(),e=i.formatWork(e)},t.prototype.createSkitch=function(e){return e=Object.assign({url:this.skitchUrl(),wait:!0},e),this.sync("create",this,e)},t.prototype.replySkitch=function(e,t){return t=Object.assign({url:this.skitchUrl()+"/"+e+"/reply",wait:!0},t),this.sync("create",this,t)},t.prototype.removeSkitch=function(e,t){return t=Object.assign({url:this.skitchUrl()+"/"+e,wait:!0},t),this.sync("delete",this,t)},t.prototype.updateDescription=function(e){return new Promise((t=this,function(n,r){return t.save(null,{attrs:{description:e},wait:!0,success:n,error:r})}));var t},t}()},I1I7C8JU:function(e,t,n){e.exports={"medal-btn":"medal-btn__2Lh1","medal-btn-active":"medal-btn-active__yXCy",medal:"medal__2ov9","medal-main":"medal-main__1yib","medal-description":"medal-description__3HtV","medal-features":"medal-features__2wMR"}},"I49a/cQe":function(e,t){e.exports=function(e){return'<div class="integrations-placeholder muted flex flex-center flex-vcenter"> <div class="placeholder-content text-center"> <span class="icon icon-warning"></span> <p>'+e.description+"</p> </div></div>"}},I4dWDknY:function(e,t,n){e.exports={"object-division-elevator__trigger":"object-division-elevator__trigger__dEd-","object-division-elevator__content":"object-division-elevator__content__3JQB",hint:"hint__wbWc"}},I4lhVGdV:function(e,t,n){e.exports={"sprint-placeholder":"sprint-placeholder__1xQ3","sprint-placeholder__image":"sprint-placeholder__image__nRlo"}},"I7Y89+UI":function(e,t,n){e.exports={"system-bar":"system-bar__hj5B","system-bar-right":"system-bar-right__3uJN","system-bar-left":"system-bar-left__3VQ7","system-bar-middle":"system-bar-middle__YJ9D","log-control":"log-control__2NIM","log-control-login":"log-control-login__2Fbv","log-control-register":"log-control-register__3Kj6","system-bar-right-content":"system-bar-right-content__23wC","release-ribbon":"release-ribbon__ZHxf","upgrade-button":"upgrade-button__3uBU","system-bar-project":"system-bar-project__3RJQ"}},I8geGh50:function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty;c=n("a+N5u/Cl"),l=n("wd/RKGTj"),o=n("IssmDVnT").EventSDK,a=n("3eMzznN/"),i=n("HHtVDBJc"),r=n("VuB9cZyl"),s=n("PMZxl+Cy"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="search",t.prototype.model=s,t.prototype.pageNum=20,t.prototype.comparator=!1,t.prototype.parse=function(e){var t,n;return t=[],c.each(e,(n=this,function(e,r){var s,c,l,u,p,d,h,m,f,g,v,b,y;switch(e.projectName=null!=(s=e.project)?s.name:void 0,e.highlight||(e.highlight={}),e._searchOrder=r,e.type){case"work":null!=e.fileSize&&(e._fileSize=a.formatFileSize(e.fileSize)),e.title=(null!=(c=e.highlight.fileName)?c[0]:void 0)||e.fileName;break;case"task":e.avatarUrl=null!=(d=e.executor)?d.avatarUrl:void 0,e.dueDate&&(e.deadLine=a.formatDate(e.dueDate)),e.accomplished&&(e.doneDate=a.formatDate(e.accomplished)),e.title=(null!=(h=e.highlight.content)?h[0]:void 0)||e.content,e.text=(null!=(m=e.highlight.note)?m[0]:void 0)||e.note;break;case"post":e.text=(null!=(f=e.highlight.content)?f[0]:void 0)||e.content,e.avatarUrl=e.creator.avatarUrl,e.title=(null!=(g=e.highlight.title)?g[0]:void 0)||e.title;break;case"event":o.isRecurrent(e)&&(e.freqString=i.freq2Title(i.getRRuleSet(e.recurrence))),e.dateStr=n.formatDate(e.startDate),e.eventDateString=n.getEventDateString(e),e.title=(null!=(v=e.highlight.title)?v[0]:void 0)||e.title,e.text=(null!=(b=e.highlight.content)?b[0]:void 0)||e.content,e.location=(null!=(y=e.highlight.location)?y[0]:void 0)||e.location;break;case"entry":-1===e._type&&(e.amount="-"+e.amount),e.title=(null!=(l=e.highlight.content)?l[0]:void 0)||e.content,e.text=(null!=(u=e.highlight.note)?u[0]:void 0)||e.note;break;default:e.avatarUrl=null!=(p=e.executor)?p.avatarUrl:void 0,e.dueDate&&(e.deadLine=a.formatDate(e.dueDate)),e.accomplished&&(e.doneDate=a.formatDate(e.accomplished)),e.title=e.content,e.text=e.note}n.setHighlight(e),t.push(e)})),t},t.prototype.setHighlight=function(e){return c.each(["title","text","location"],function(t){var n;c.isString(e[t])&&(n=e[t].replace(/<em\>([^\s]+?)<\/em\>/g,"__H$1L__"),"post"===e.type&&"text"===t&&(n=(n=c.unescape(n)).replace(/<(?:.|\n)*?>/gm,"")),n=c.escape(n),e[t]=n.replace(/__H([^\s]+?)L__/g,"<em>$1</em>"))}),this},t.prototype.formatDate=function(e){var t,n;return n=l(),t=l(e).isSame(n,"year")?"en"===tb_i18n.getLanguage()?"MMM D":"MMMDo":"ll",l(e).format(t)},t.prototype.getEventDateString=function(e){var t,n,r;return e.startDate?(r=(n=a.formatDate(new Date(e.startDate)).dateString)+" "+l(e.startDate).format("LT"),e.endDate&&(r+=" -",(t=a.formatDate(new Date(e.endDate)).dateString)!==n&&(r+=" "+t),r+=" "+l(e.endDate).format("LT")),r):""},t.prototype.searchForUniqueTask=function(e){return this.fetch(Object.assign({},e,{url:"v2/tasks/search"}))},t}()},"I9DDAQe+":function(e,t,n){"use strict";n.r(t);var r=n("tLZJUYWX"),o=n.n(r),i=n("2qRnoGmE"),s=n.n(i),a=n("ikNQxojh"),c=window.document.documentElement.lang||"zh";o.a.setLanguage(c),Object(a.a)(c).then(function(){var e=s.a.LOCALES&&s.a.LOCALES[c];e&&o.a.setLocales(c,e),n("FDBtWruv")})},"I9V4iVg+":function(e,t,n){var r,o,i,s=function(e,t){return function(){return e.apply(t,arguments)}},a={}.hasOwnProperty;i=n("a+N5u/Cl"),o=n("Atd/KrMo"),r=n("23vw5Bju"),e.exports=function(e){function t(){return this._handleClose=s(this._handleClose,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="OnboardingTooltip",t.prototype.className="obd-tooltip",t.prototype.initialize=function(e){return this.options=e,t.__super__.initialize.apply(this,arguments),this.renderBasic(),this.animateIn(),this.handleClose=this._handleClose.bind(this),this.prepareClose(),this},t.prototype.normalizeOptions=function(){var e;return this.options.content=this.i18n(this.options.content),this.offset||(this.offset={}),e=this.options.placement.split("-"),this.position=e[0],this.align=e[1],this},t.prototype.renderBasic=function(){return this.$el.html(r(i.extend({align:this.align,position:this.position},this.options))),this},t.prototype.animateIn=function(){var e;return i.delay((e=this,function(){return e.$el.addClass("fade in")}),300),this},t.prototype.animateOut=function(){return new Promise((e=this,function(t){return e.$el.removeClass("in"),i.delay(function(){return t()},300)}));var e},t.prototype.prepareClose=function(){return"GLOBAL_CLICK"===this.options.hide_policy?document.addEventListener("click",this.handleClose,!0):"SELF_CLICK"===this.options.hide_policy&&this.el.addEventListener("click",this.handleClose,!0),this},t.prototype._handleClose=function(){return this.animateOut().then((e=this,function(){return"GLOBAL_CLICK"===e.options.hide_policy?document.removeEventListener("click",e.handleClose,!0):"SELF_CLICK"===e.options.hide_policy&&e.el.removeEventListener("click",e.handleClose,!0),e.remove()}));var e},t}()},IIX4yb2G:function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;a=n("vmWJWrVe"),i=n("77NnVLwu"),s=n("eubUSX4T"),r=n("udYBhtYc"),c=n("o4N9kv/m"),o=n("Twz036/r"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="ObjectPickerFilesView",t.prototype.className="object-picker-files-view",t.prototype.initialize=function(e){var t;if(this._projectId=e._projectId,this.onCreate=e.onCreate,this.onSelect=e.onSelect,this.searchModel=e.searchModel,this._projectId)return this.subscribe(i.fetch$(this._projectId).do((t=this,function(e){return t.projectModel=e,t.renderFilePicker()})))},t.prototype.isWithWorkUpload=function(){return this.projectModel.hasPermission("work.post")&&this.projectModel.isAppEnabled("works")},t.prototype.isWithCollectionCreator=function(){return this.projectModel.hasPermission("collection.post")&&this.projectModel.isAppEnabled("works")},t.prototype.upload=function(e){var t,n;return(t=new s([],{_boundToObjectId:e})).onUploadWorksSuccess=(n=this,function(e){return n.onCreate(e.map(function(e){return{_id:e._id,type:"work"}}))}),this.requestSubView(c,{isBackground:!0,collection:t,targetModel:this.projectModel}).uploader.triggerUpload({multiple:!0})},t.prototype.renderFilePicker=function(){var e,t;return e=this.requestSubView(o,{searchModel:this.searchModel,projectId:this._projectId,withWorkUpload:this.isWithWorkUpload(),withCollectionCreator:this.isWithCollectionCreator(),onCollectionCreate:this.createCollection.bind(this),onUpload:this.upload.bind(this),onChange:(t=this,function(e){var n,r;return r=e.works,n=e.collections,r=r.map(function(e){return{_id:e.id,type:"work"}}),n=n.map(function(e){return{_id:e.id,type:"collection"}}),t.onSelect(r.concat(n))})}).$el,this.$el.html(e)},t.prototype.createCollection=function(e,t){var n,o;return n=r.get(t),new Promise((o=this,function(r,i){return n.create({title:e,_projectId:o._projectId,_parentId:t},{wait:!0,success:r,error:i})}))},t}()},"IM6TaE5+":function(e,t,n){var r,o,i;o=n("a+N5u/Cl"),r=[{src:n("xfy0ukZ1"),content:{zh:"[微笑]",en:"[smile]"}},{src:n("Kw3lyNwT"),content:{zh:"[嘻嘻]",en:"[smiley]"}},{src:n("MQhb9afL"),content:{zh:"[哈哈]",en:"[laughing]"}},{src:n("Tvx2LTBq"),content:{zh:"[爱你]",en:"[love]"}},{src:n("VNKqy21+"),content:{zh:"[挖鼻]",en:"[unamused]"}},{src:n("sqeXP+dr"),content:{zh:"[吃惊]",en:"[surprised]"}},{src:n("XaxnYknK"),content:{zh:"[晕]",en:"[confounded]"}},{src:n("Ab6MsWQN"),content:{zh:"[泪]",en:"[sob]"}},{src:n("jW/QFCCH"),content:{zh:"[馋嘴]",en:"[yum]"}},{src:n("ZoNjS4Nr"),content:{zh:"[抓狂]",en:"[grimacing]"}},{src:n("YfEMcI56"),content:{zh:"[哼]",en:"[angry]"}},{src:n("iToWI0vK"),content:{zh:"[可爱]",en:"[blush]"}},{src:n("71FB16QS"),content:{zh:"[怒]",en:"[rage]"}},{src:n("NmmWKXGG"),content:{zh:"[汗]",en:"[sweat]"}},{src:n("HzGwuSGm"),content:{zh:"[害羞]",en:"[shy]"}},{src:n("fm2ngtub"),content:{zh:"[睡]",en:"[sleep]"}},{src:n("MMAj8SYw"),content:{zh:"[钱]",en:"[money]"}},{src:n("KKrZ+aFg"),content:{zh:"[偷笑]",en:"[giggle]"}},{src:n("1YA5lnf9"),content:{zh:"[笑cry]",en:"[joy]"}},{src:n("4xbk2Yaz"),content:{zh:"[doge]",en:"[doge]"}},{src:n("JmQLlYsl"),content:{zh:"[喵喵]",en:"[meow]"}},{src:n("fa8wX/46"),content:{zh:"[二哈]",en:"[erha]"}},{src:n("4Mget0aH"),content:{zh:"[允悲]",en:"[hold_face]"}},{src:n("r+6fnJQ4"),content:{zh:"[并不简单]",en:"[not_simple]"}},{src:n("bEQZLW52"),content:{zh:"[吃瓜]",en:"[eating_melon]"}},{src:n("+8AC772L"),content:{zh:"[费解]",en:"[inexplicability]"}},{src:n("c3AfLWNW"),content:{zh:"[酷]",en:"[sunglasses]"}},{src:n("osTTB3X/"),content:{zh:"[衰]",en:"[unfortunate]"}},{src:n("Rkf+47A7"),content:{zh:"[闭嘴]",en:"[shutup]"}},{src:n("XTNJ8f1i"),content:{zh:"[鄙视]",en:"[despise]"}},{src:n("Iolhv95T"),content:{zh:"[色]",en:"[heart_eyes]"}},{src:n("mthB5Tgu"),content:{zh:"[鼓掌]",en:"[applaud]"}},{src:n("0LaTTYYW"),content:{zh:"[悲伤]",en:"[cry]"}},{src:n("bB/7G3An"),content:{zh:"[思考]",en:"[pensive]"}},{src:n("0aN4tAaE"),content:{zh:"[生病]",en:"[sick]"}},{src:n("fxEyMcXL"),content:{zh:"[亲亲]",en:"[kiss]"}},{src:n("NCxllX0B"),content:{zh:"[怒骂]",en:"[curse]"}},{src:n("7R5B0m0k"),content:{zh:"[太开心]",en:"[grinning]"}},{src:n("HXA+oDyn"),content:{zh:"[白眼]",en:"[supercilious]"}},{src:n("jo7bxacm"),content:{zh:"[右哼哼]",en:"[hum_right]"}},{src:n("IcwAtmA5"),content:{zh:"[左哼哼]",en:"[hum_left]"}},{src:n("Mm6ZVPcs"),content:{zh:"[嘘]",en:"[hiss]"}},{src:n("MinxDlMG"),content:{zh:"[委屈]",en:"[apologize]"}},{src:n("/hgGZ9Te"),content:{zh:"[吐]",en:"[vomit]"}},{src:n("GoaLoPsL"),content:{zh:"[可怜]",en:"[empathy]"}},{src:n("TB3ThowI"),content:{zh:"[哈欠]",en:"[yawn]"}},{src:n("CYucM6vM"),content:{zh:"[挤眼]",en:"[wink]"}},{src:n("aU5SzB8w"),content:{zh:"[失望]",en:"[disappointed]"}},{src:n("OB4zWk6r"),content:{zh:"[顶]",en:"[overwhelmed]"}},{src:n("fPt7YS//"),content:{zh:"[疑问]",en:"[confused]"}},{src:n("JtaVAksQ"),content:{zh:"[困]",en:"[sleepy]"}},{src:n("IelDYAhh"),content:{zh:"[感冒]",en:"[cold]"}},{src:n("KLW9azZr"),content:{zh:"[拜拜]",en:"[bye]"}},{src:n("bTtssQ3S"),content:{zh:"[黑线]",en:"[speechless]"}},{src:n("OCYETuio"),content:{zh:"[阴险]",en:"[insidious]"}},{src:n("HKgz4Zv3"),content:{zh:"[打脸]",en:"[pia]"}},{src:n("Ip880dDe"),content:{zh:"[傻眼]",en:"[astonished]"}},{src:n("JpNmON5i"),content:{zh:"[互粉]",en:"[follow]"}},{src:n("vj+U3KkR"),content:{zh:"[心]",en:"[heart]"}},{src:n("uGzReZHx"),content:{zh:"[伤心]",en:"[broken_heart]"}},{src:n("Y7i3EItP"),content:{zh:"[猪头]",en:"[pig]"}},{src:n("1Qh+d3Sx"),content:{zh:"[熊猫]",en:"[panda_face]"}},{src:n("FWhPQYNj"),content:{zh:"[兔子]",en:"[rabbit]"}},{src:n("5mZ77jGR"),content:{zh:"[骷髅]",en:"[skull]"}},{src:n("n++cSDpC"),content:{zh:"[握手]",en:"[handshake]"}},{src:n("7aiNnUPR"),content:{zh:"[作揖]",en:"[bow]"}},{src:n("zXNoRxwW"),content:{zh:"[赞]",en:"[+1]"}},{src:n("Xl5LV30a"),content:{zh:"[耶]",en:"[v]"}},{src:n("s4X3VMgc"),content:{zh:"[good]",en:"[thumbsup]"}},{src:n("XBjHwBNh"),content:{zh:"[弱]",en:"[thumbsdown]"}},{src:n("NYqh6zCI"),content:{zh:"[NO]",en:"[NO]"}},{src:n("Nop7+RYU"),content:{zh:"[ok]",en:"[ok]"}},{src:n("Fg40oMcU"),content:{zh:"[haha]",en:"[haha]"}},{src:n("DENmPrXB"),content:{zh:"[来]",en:"[come]"}},{src:n("czyw6ATt"),content:{zh:"[拳头]",en:"[fist]"}},{src:n("NgWrYedk"),content:{zh:"[威武]",en:"[power]"}},{src:n("Bg/z6jLm"),content:{zh:"[鲜花]",en:"[sunflower]"}},{src:n("NOkC79p1"),content:{zh:"[钟]",en:"[bell]"}},{src:n("7YmXHCxW"),content:{zh:"[浮云]",en:"[cloud]"}},{src:n("X+PHI6PH"),content:{zh:"[飞机]",en:"[airplane]"}},{src:n("ullmsLUN"),content:{zh:"[月亮]",en:"[crescent_moon]"}},{src:n("ntrC7oz9"),content:{zh:"[太阳]",en:"[sunny]"}},{src:n("VlFRLepP"),content:{zh:"[微风]",en:"[leaf]"}},{src:n("7a39ZgY2"),content:{zh:"[下雨]",en:"[rain]"}},{src:n("TiOL9HNr"),content:{zh:"[给力]",en:"[geili]"}},{src:n("3pNcGhrp"),content:{zh:"[神马]",en:"[what?]"}},{src:n("x8BEWZKj"),content:{zh:"[围观]",en:"[onlookers]"}},{src:n("NjoNVlJG"),content:{zh:"[话筒]",en:"[microphone]"}},{src:n("iIpjbFsv"),content:{zh:"[奥特曼]",en:"[Altman]"}},{src:n("4iBjYp7P"),content:{zh:"[草泥马]",en:"[llama]"}},{src:n("kUW0ceqd"),content:{zh:"[萌]",en:"[cute]"}},{src:n("MydPFfE/"),content:{zh:"[囧]",en:"[jiong]"}},{src:n("LH2ib2zT"),content:{zh:"[织]",en:"[weave]"}},{src:n("emKJ+GRy"),content:{zh:"[礼物]",en:"[gift]"}},{src:n("m5JTG8yK"),content:{zh:"[喜]",en:"[happy]"}},{src:n("h2ReQ0We"),content:{zh:"[围脖]",en:"[weibo]"}},{src:n("lFG5vd3/"),content:{zh:"[音乐]",en:"[musical_note]"}},{src:n("9y1YiGkh"),content:{zh:"[绿丝带]",en:"[ribbon]"}},{src:n("FoJs5Vq1"),content:{zh:"[蛋糕]",en:"[cake]"}},{src:n("To35NsR9"),content:{zh:"[蜡烛]",en:"[candle]"}},{src:n("FeX6jRQf"),content:{zh:"[干杯]",en:"[beer]"}},{src:n("F/TATKmB"),content:{zh:"[男孩儿]",en:"[boy]"}},{src:n("pJ3mASY/"),content:{zh:"[女孩儿]",en:"[girl]"}},{src:n("eppvX3IL"),content:{zh:"[肥皂]",en:"[soap]"}},{src:n("pX0uXGHm"),content:{zh:"[照相机]",en:"[camera]"}},{src:n("F1kY/sui"),content:{zh:"[沙尘暴]",en:"[sandstorm]"}},{src:n("HQbqjkpU"),content:{zh:"[最右]",en:"[right_right]"}},{src:n("28Cg9yY2"),content:{zh:"[摊手]",en:"[so]"}},{src:n("MCTZs11P"),content:{zh:"[抱抱]",en:"[hug]"}},{src:n("OnHNcURG"),content:{zh:"[跪了]",en:"[stunned]"}},{src:n("UMSZlliB"),content:{zh:"[哆啦A梦吃惊]",en:"[dora_surprised]"}},{src:n("hkY5KnkX"),content:{zh:"[哆啦A梦汗]",en:"[dora_speechless]"}}],i={},o.each(r,function(e){return o.each(e.content,function(t){return i[t]=e.src})}),e.exports={all:r,replaceMD:function(e){return null==e&&(e=""),this.translate(e,!0).map(function(e){return e.value}).join("")},replace:function(e){return null==e&&(e=""),this.translate(e).map(function(e){return e.value}).join("")},translate:function(e,t){var n,r,o,i,s,a;for(i=[],n="",s="normal",r=0,o=e.length;r<o;r++)"["===(a=e[r])?(this.addToken(i,n),n=a,s="emoji"):"]"===a&&"emoji"===s?(this.addEmoji(i,n+a,t),n="",s="normal"):"emoji"===s?n+=a:this.addToken(i,a);return this.addToken(i,n),i},addToken:function(e,t){var n;if(t)return(null!=(n=e.pop())?n.isEmoji:void 0)&&e.push(n),n&&!n.isEmoji||(n={isEmoji:!1,value:""}),n.value+=t,e.push(n)},addEmoji:function(e,t,n){var r;return(r=this.getEmoji(t,n))?e.push({isEmoji:!0,value:r}):this.addToken(e,t)},getEmoji:function(e,t){var n;return(n=i[e])&&t?" ![emoji]("+n+") ":n?" <img class='emoji' src='"+n+"' alt='"+e+"' /> ":null}}},"IOVY6N/r":function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty,u=[].slice;a=n("a+N5u/Cl"),c=n("gh8QIhMV").throwError,s=n("4bWDEe5E"),o=n("kpf8nsNF"),r=n("xL/A1S1t"),i=n("vqsj8TKC"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="ScenarioInfosView",t.prototype.className="scenario-infos-view detail-infos-wrapper",t.prototype.initialize=function(e){var n;if(null!=e?e.objectModel:void 0)return t.__super__.initialize.apply(this,arguments),this.objectModel=e.objectModel,this.projectModel=e.projectModel,this.boundToObjectType=e.boundToObjectType,this._projectId=this.projectModel.id,this.load().then((n=this,function(e){var t,r;if(t=e[0],r=e[1],n.el)return n.setCustomFieldLinksCollection(t),n.customFieldLinksCollection=t,n.scenarioFieldConfigsCollection=r,n.prepareViews(n.getScenarioFields(n.objectModel)),n.listen()})).catch(c),this},t.prototype.load=function(){var e,t,n;return e=this.projectModel.isTaskflowEnabled(),t=e&&"task"===this.boundToObjectType,Promise.all([new Promise((n=this,function(e,t){return o.fetch(n._projectId,{boundToObjectType:"application",success:e,error:t})})),new Promise(function(e){return function(n,r){var o;return o=s.genCacheId(e._projectId,e.boundToObjectType),s.fetch(o,{boundToObjectType:e.boundToObjectType,attrs:{withTaskflowstatus:t},success:n,error:r})}}(this))])},t.prototype.listen=function(){return this.listenTo(this.objectModel,"change:_scenariofieldconfigId",this.updateScenarioConfig),this.listenTo(this.objectModel,"change:_executorId",this.refreshScenarioFieldConfigs),this.listenTo(this.objectModel,"change:isArchived",this.refreshScenarioFieldConfigs),this.listenTo(this.scenarioFieldConfigsCollection,"add change remove destroy",this.refreshScenarioFieldConfigs),this.listenTo(this.customFieldLinksCollection,"add change remove destroy",this.refreshCustomFieldLinks)},t.prototype.updateScenarioConfig=function(e){return this.prepareViews(this.getScenarioFields(e))},t.prototype.refreshScenarioFieldConfigs=function(e){return this.prepareViews(this.getScenarioFields(this.objectModel))},t.prototype.refreshCustomFieldLinks=function(){return this.prepareViews(this.getScenarioFields(this.objectModel))},t.prototype.getScenarioFields=function(e){var t,n;return t=e.get("_scenariofieldconfigId"),null!=(n=this.scenarioFieldConfigsCollection.get(t)||this.scenarioFieldConfigsCollection.getDefaultModel())?n.get("scenariofields"):void 0},t.prototype.prepareViews=function(e){var t,n;if(e?(n=(t=e).filter(function(e){return e.required}).map(function(e){return"customfield"===e.fieldType?e._customfieldId:e.fieldType}),this.setRequiredFieldTypes(n)):t=this.getDefaultScenarioConfigs(),this.initViews(t),"task"===this.boundToObjectType)return this.appendView({name:"custom-fields-no-in-scenario",view:this.initCustomFieldNotInScenarioView()})},t.prototype.getDefaultScenarioConfigs=function(){var e,t,n,r,o,i,s;switch(t=function(e,t,n){return{fieldType:e,_customfieldId:t,_roleIds:n,allowedRoleIds:null,allowedActors:["executor","creator"]}},e=null!=(n=this.objectModel.get("customfields"))?n.map(function(e){var n,r;return n=e._customfieldId,(r=this.getCustomFieldModel(n))&&t("customfield",n,r.get("_roleIds"))}):void 0,s=[],this.boundToObjectType){case"event":s=[t("location"),t("note")].concat(u.call(e),[t("tag")]);break;case"task":i=(r=this.objectModel.get("workTime")).usedTime,o=r.totalTime,s=[t("note"),t("priority"),i||o?t("worktimes"):void 0,this.objectModel.get("storyPoint")?t("storyPoint"):void 0,this.objectModel.get("progress")?t("taskProgress"):void 0].concat(u.call(e),[t("tag")])}return a.compact(s)},t.prototype.initCustomFieldNotInScenarioView=function(){return this.requestSubView(i,{taskModel:this.objectModel,projectModel:this.projectModel})},t}()},IWNkNrkY:function(e,t,n){e.exports={"iframe-container":"iframe-container__Ws0C","spin-container":"spin-container__Y9cL"}},IXGYRbNF:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;i=n("a+N5u/Cl"),a=n("sa1Ed382"),o=n("vmWJWrVe"),r=n("sDKf+sGL").TooltipLike,s=n("s0r7VfKc").default,n("7l29IdI8"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="LikeView",t.prototype.tagName="div",t.prototype.className="like-view",t.prototype.initialize=function(e){return this.options=e,this.objectModel=e.objectModel,this.renderLike()},t.prototype.renderLike=function(){return this.likeAPISubscription=s.getLike(this.options.boundToObjectType,this.objectModel.get("_id")).changes().subscribe((e=this,function(t){var n,o;return o=t[0],e.isLike=!!i.find(o.likesGroup,function(e){return e._id===a.user.id}),n={isGhost:a.user.get("isGhost"),likesGroup:o.likesGroup,isLike:e.isLike,onToggleLike:e.toggleLike.bind(e)},e.requestReactView(e.el,r,n)}));var e},t.prototype.toggleLike=function(){var e,t;return this.gtaHandler(),("function"==typeof(e=this.objectModel).isRecurrenceEventInstance?e.isRecurrenceEventInstance():void 0)?this.objectModel.doLike():s.toggleLike(this.options.boundToObjectType,this.objectModel.get("_id"),this.isLike).subscribe((t=this,function(e){return t.objectModel.set(i.pick(e,"isLike","likesCount","likesGroup"))}))},t.prototype.gtaHandler=function(){var e,t,n;return e={action:"like",control:"Detail Page Like Button"},"task"===this.objectModel.get("objectType")&&(n=this.objectModel.isSubtask()?"subtask":"task",t=this.objectModel.get("ancestorIds").length,e=i.extend(e,{type:n,series:t})),a.gta.event(e)},t.prototype.remove=function(){var e;return null!=(e=this.likeAPISubscription)&&e.unsubscribe(),t.__super__.remove.apply(this,arguments)},t}()},"Ia+quZnZ":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("17x9q+7Q"),s=n("tLZJUYWX"),a=n("oRPyOBnq"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickItem=function(){t.props.selected||t.props.onSelect(t.props.scenario)},t}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.selected,n=e.scenario,r=t?"active":"";return o.createElement("li",{key:n._id,className:r},o.createElement("a",{className:"task-scenario-item",onClick:this.onClickItem},o.createElement(a.FieldIcon,{type:"task",icon:n.icon}),n.name))},t}(o.PureComponent),l=function(e){function t(t){var n=e.call(this,t)||this;return n.onSelect=function(e){n.setState({scenario:e},function(){e&&n.props.onSelect(e)})},n.state={scenario:null},n}return r.d(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,this.renderHeader(),this.renderItems())},t.prototype.renderHeader=function(){return o.createElement("li",{className:"group-name"},o.createElement("p",null,s.get("task.scenarios")))},t.prototype.renderItems=function(){var e=this,t=this.state.scenario;return this.props.scenarios.map(function(n){var r=!!t&&t._id===n._id;return o.createElement(c,{key:n._id,selected:r,scenario:n,onSelect:e.onSelect})})},t.propTypes={scenarios:i.arrayOf(i.object).isRequired,onSelect:i.func.isRequired},t}(o.PureComponent);n.d(t,"TaskScenariosList",function(){return l})},IaMT81lr:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R=function(e,t){return function(){return e.apply(t,arguments)}},D={}.hasOwnProperty,L=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};E=n("a+N5u/Cl"),x=n("sa1Ed382"),T=n("2qRnoGmE"),I=n("IM6TaE5+"),a=n("Lj/ldHVx"),k=n("3eMzznN/"),M=n("90U+kJWN").formatHyperLink,_=n("vmWJWrVe"),h=n("wd/RKGTj"),y=n("GESwhXbR").Toast,O=n("yiO17FlF"),C=n("8N+zwa3A"),n("77NnVLwu"),p=n("odY26VIi"),f=n("ONQFQipy"),i=n("X7+VPM8x"),s=n("Fy6QNGNX"),m=n("PCjZn8k4"),v=n("tGfyIDI3"),w=n("OmupbwLD"),d=n("ypWNgh6R"),l=n("+3Dxh9Ew"),u=n("oXtD/CwF"),g=n("YiTbVZtG"),S=n("HjX9MwPa"),j=n("CfyenDut").formatNote,r=n("aTNGTwiG"),b=n("rx72K1eX").Timestamp,o=n("7ELxbiP5").AttachmentList,N=n("gh8QIhMV").throwError,P={archive:"icon-archive",unarchive:"icon-unarchive",create:"icon-plus",dependency:"icon-dependency",timerange:"icon-calendar2",gitintegration:"icon-git-o","update.note":"icon-book","update.precondition":"icon-book","update.title":"icon-pencil",linked:"icon-link2","linked.created":"icon-link2","linked.deleted":"icon-link2","linked.canceled":"icon-link2","linked.update.done":"icon-link2","linked.update.redo":"icon-link2","linked.remove.executor":"icon-link2","linked.claim":"icon-link2","linked.update.version":"icon-link2","linked.update.approval":"icon-link2","linked.update.unapproval":"icon-link2","linked.updated":"icon-link2","reply.skitch":"icon-annotations","create.skitch":"icon-plus","delete.skitch":"icon-punctuate","share.create":"icon-share-chain","share.remove":"icon-share-chain","integration.linked.created":"icon-link2","integration.linked.canceled":"icon-link2","evernote.linked.created":"icon-link2","evernote.linked.canceled":"icon-link2","weibo.linked.created":"icon-link2","weibo.linked.canceled":"icon-link2","github.linked.created":"icon-link2","github.linked.canceled":"icon-link2","processon.linked.created":"icon-link2","processon.linked.canceled":"icon-link2","start.zoomus":"icon-video","end.zoomus":"icon-video","collection.linked.created":"icon-link2","collection.linked.canceled":"icon-link2",involve:"icon-user","involve.add":"icon-add-user","involve.del":"icon-user","involve.addAndDel":"icon-user","task.archived.by.ancestor":"icon-archive","task.unarchived.by.ancestor":"icon-archive","task.create.from.ancestor":"icon-plus","task.claim":"icon-user","task.update.done":"icon-tick","task.update.redo":"icon-checkbox","task.update.tasklist":"icon-th-list","task.update.stage":"icon-stage","task.update.tasklistAndStage":"icon-stage","task.update.executor":"icon-user","task.remove.executor":"icon-user","task.update.priority.normal":"icon-circle color-priority-normal","task.update.priority.high":"icon-circle color-priority-high","task.update.priority.urgent":"icon-circle color-priority-urgent","task.create.workTime.usedTime":"icon-tachometer","task.remove.workTime.usedTime":"icon-tachometer","task.update.worktime.totaltime":"icon-tachometer","task.clear.worktime.totaltime":"icon-tachometer","task.update.storyPoint":"icon-story-points","task.clear.storyPoint":"icon-story-points","task.update.progress":"icon-normal","task.clear.progress":"icon-normal","task.remove.startdate":"icon-calendar2","task.update.startdate":"icon-calendar2","task.remove.duedate":"icon-calendar2","task.update.duedate":"icon-calendar2","task.linked.remove.startdate":"icon-calendar2","task.linked.update.startdate":"icon-calendar2","task.linked.remove.duedate":"icon-calendar2","task.linked.update.duedate":"icon-calendar2","task.subtask.create":"icon-ul","task.subtask.remove":"icon-ul","task.subtask.claim":"icon-ul","task.subtask.remove.executor":"icon-ul","task.subtask.update.executor":"icon-ul","task.transform.task.subtask":"icon-convert","task.subtask.remove.duedate":"icon-ul","task.subtask.update.duedate":"icon-ul","task.subtask.update.done":"icon-ul","task.subtask.update.redo":"icon-ul","task.subtask.create.one":"icon-ul","task.subtask.added":"icon-ul","task.subtask.archived":"icon-archive","task.subtask.done":"icon-ul","task.subtask.redo":"icon-ul","task.subtask.removed":"icon-ul","task.subtask.transform.as.task":"icon-convert","task.subtask.unarchived":"icon-archive","task.pretask.done":"icon-dependency","work.linked.created":"icon-link2","work.linked.canceled":"icon-link2","work.update.filename":"icon-pencil","work.update.version":"icon-file","work.update.collection":"icon-file","post.update.pin":"icon-pin","post.update.unpin":"icon-pin","entry.update":"icon-bookkeeping","entry.update.content":"icon-bookkeeping","entry.update.note":"icon-bookkeeping","entry.update.amount":"icon-bookkeeping","entry.update.approval":"icon-bookkeeping","entry.update.unapproval":"icon-bookkeeping","entry.update.entryCategory":"icon-bookkeeping","entry.update.date":"icon-bookkeeping","testcase.update.content":"icon-pencil",default:"icon-pencil"},c=["weibo","github","evernote","yinxiang","processon"],e.exports=function(e){function t(){return this.voiceEnd=R(this.voiceEnd,this),this.voiceTimeUpdate=R(this.voiceTimeUpdate,this),this.voiceState=R(this.voiceState,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)D.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,_),t.prototype.viewName="ActivityView",t.prototype.tagName="li",t.prototype.className="activity",t.prototype.events={"click .linked-handler":"openLinkPreviewer","click .linked-collection-handler":"enterCollection","click .linked-file-handler":"openFile","click .delete-activity-handler":"showDeleteConfirmModal","click .edit-activity-handler":"showActivityEditor","click .download-attachments-handler":"downloadAttachments","click .previewer-handler":"enterPreviewer","click .activity-content":"toggleOverflow","click .activity-voice-wrapper":"voiceCtrl","click .avatar":"showMemberDetail","mousedown .skitch-link-handler":"jumpToSkitch"},t.prototype.initialize=function(e){var t,n;if(null!=e?e.activityModel:void 0)return this.options=e,this.objectModel=e.objectModel,this.projectModel=e.projectModel,this.activityModel=e.activityModel,this.render().listen(),this.setOperateLimit(),t=this.activityModel.get("attachments"),~this.activityModel.get("action").indexOf("activity.comment")&&this.$el.addClass("comment"),(null!=(n=this.activityModel.get("creator"))?n._id:void 0)===x.user.id&&this.$el.addClass("creator"),t.length&&this.$el.addClass("attachments"),this.objectModel.getRoleScope()>=0||this.$el.addClass("guest"),this.$el.attr("data-id",this.activityModel.id),this},t.prototype.listen=function(){return this.listenTo(this.activityModel,"remove destroy",this.remove),this.listenTo(this.activityModel,"change",this.render),this.listenTo(this.projectModel,"change:applications",function(){if(this.projectModel.isAppChanged("markdown"))return this.render()}),this},t.prototype.render=function(){var e,t,n,o,i,s;return this.$reactActivityAttachements&&this.unmountReact(this.$reactActivityAttachements),o=(t=this.activityModel.toJSON()).content,~t.action.indexOf("activity.comment")&&t.comment&&(t.commentMD=I.replaceMD(t.comment),t.commentList=I.translate(t.comment).map(function(e){return e.isEmoji||(e.value=M(e.value)),e})),this.assembleSpecialActivity(t),this.activityContentProcess(t),this.activityEnableSkitch(t),t.createdTime=h(t.created).format("LLL"),t.canDownload=this.checkDownloadPermission(),t.isOwn=this.activityModel.isOwner(),t.hasAttachments=this.activityModel.getAttachmentDatas().length>0,t.description=this.getDescription("standard"===t.rawAction?o.subtitle:(null!=(i=o.task)?i.content:void 0)||(null!=(s=o.testcase)?s.title:void 0)||o.content||o.note||o.precondition||o.title||o.customfieldValueStr||t.comment),t.mdStatus=("function"==typeof(n=this.objectModel).isIndie?n.isIndie():void 0)||this.projectModel.isAppEnabled("markdown"),t.canReplyActivity=this.canReplyActivity(),t.hasContentPreview=t.description||this.isSkitchJumpableActivity(),t.html={},t.content.note&&(t.html.note=j(t.content.note)),t.content.precondition&&(t.html.precondition=j(t.content.precondition)),-1!==t.action.indexOf("customfield.text")&&(t.customfieldValueHyper=M(t.content.customfieldValueStr)),t.iconName=t.icon?"icon-"+t.icon:this.getIconName(t.boundToObjectType,t.action),"icon-archive"===t.iconName&&(t.iconName="icon-trash"),"icon-unarchive"===t.iconName&&(t.iconName="icon-putback"),!this.$el.is(":empty")?(e=this.$(".react-time-stamp").detach(),this.$el.html(r(t)).find(".react-time-stamp").replaceWith(e)):(this.$el.html(r(t)),e=this.$(".react-time-stamp")),t.content.voice&&!this.audio&&this.voiceInit(),this.requestReactView(e.get(0),b,{initialTime:h(t.created).toDate()}),this.$("pre code").each(function(){return a.highlightBlock(this)}),this.$editHandler=this.$(".edit-activity-handler"),this.$deleteHandler=this.$(".delete-activity-handler"),this.renderAttachementFileItem(),this},t.prototype.renderAttachementFileItem=function(){var e;if(this.$reactActivityAttachements=this.$(".react-activity-attachments").get(0),(e=this.activityModel.getAttachmentDatas()).length)return this.requestReactView(this.$reactActivityAttachements,o,{className:"activity-attachments",attachments:e,onAttachmentClick:this.enterPreviewer.bind(this)}),this},t.prototype.operateDuration=function(){var e,t;return t=h(),e=h(this.activityModel.get("created")),240-t.diff(e,"seconds")},t.prototype.setOperateLimit=function(){var e,t;return(e=this.operateDuration())>0?this.timeoutId=setTimeout((t=this,function(){return t.$editHandler.remove(),t.$deleteHandler.remove()}),1e3*e):(this.$editHandler.remove(),this.$deleteHandler.remove()),this},t.prototype.isSkitchJumpableActivity=function(e){var t;return t=this.activityModel.get("action"),["activity.work.create.skitch","activity.work.reply.skitch"].indexOf(t)>=0},t.prototype.activityEnableSkitch=function(e){if(this.isSkitchJumpableActivity())switch(e.isSkitchActivity=!0,e.action){case"activity.work.create.skitch":return e.titleLeft=tb_i18n.get("activity.skitch.create",e.creator.name),e.skitchName=tb_i18n.get("activity.skitch",e.content.skitchNum);case"activity.work.reply.skitch":return e.titleLeft=tb_i18n.get("activity.skitch.reply",e.creator.name),e.skitchName=tb_i18n.get("activity.skitch",e.content.skitchNum)}},t.prototype.checkDownloadPermission=function(){var e,t,n,r;return t=this.activityModel.hasPermission("work.get.download"),n=this.activityModel.hasPermission("projecttag.get.project.privacy"),r=E.every(this.activityModel.get("attachments"),function(e){var t,n,r,o,i,s;return s=e.visible,t=null!=(o=e.involveMembers)?o:[],r=e.parentVisible,n=null!=(i=e.parentInvolveMembers)?i:[],("involves"!==s||t.indexOf(x.user.id)>=0)&&("involves"!==r||n.indexOf(x.user.id)>=0)}),("function"==typeof(e=this.objectModel).isIndie?e.isIndie():void 0)?r:t&&(r||n)},t.prototype.canReplyActivity=function(){var e,t;return e=null!=(t=this.activityModel.get("creator"))?t._id:void 0,p.get(this.options._projectId).find(function(t){return t.get("_id")===e})&&e!==x.user.id},t.prototype.assembleSpecialActivity=function(e){var t,n;if(t=e.content,/start.zoomus/.test(e.action))return n=t.meetId,t.linked={objectType:"zoomus",title:n,url:T.ZOOMUS_HOST+"/j/"+n}},t.prototype.activityContentProcess=function(e){var t,n,r,o,i,s;if(o=(t=e.content).linked,t.linkedCollection?this.formatLinkedCollectionData(e):(null!=o?o.title:void 0)&&!/deleted/.test(e.action)&&(r=e.title.lastIndexOf(o.title),e.titleToStressLeft=e.title.substr(0,r),e.titleToStress=o.title,e.titleToStressRight=e.title.substr(r+o.title.length)),t.works&&(s=t.works.map(function(e){var t;return t=e.fileName,"<a class='linked-handler' data-id='"+e._id+"' data-activity-type='work'>\n  "+E.escape(t)+"\n</a>"}).join(tb_i18n.get("comma")),e.titleWithFiles=e.title+" "+s),i=null!=o?o.objectType:void 0,L.call(c,i)>=0&&(e.url=o.url),t.voice)return n=t.voice.duration,t.voice.durationFormat=this.voiceDurationFormat(n),t.voice.barWidth=this.getVoiceBarWidth(n)},t.prototype.formatLinkedCollectionData=function(e){return"zh"===x.PREFERENCE.getLanguage()&&e.content.uploadWorks?this.formatLinkedCollectionUploadWorksData(e):this.formatLinkedCollectionCommonData(e)},t.prototype.formatLinkedCollectionCommonData=function(e){var t,n,r,o,i,s,a,c,l,u;return n=e.content,u=e.title,i=n.linkedCollection,a=n.collection||n.work,s=i.title,c=(null!=a?a.title:void 0)||(null!=a?a.fileName:void 0)||"",o=u.length-1,~c.indexOf(s)&&(o-=c.length),r=u.lastIndexOf(s,o),e.titleLeft=u.slice(0,r),e.titleSubFirst=s,l=(t=u.slice(r+s.length)).lastIndexOf(c),e.titleMiddle=t.slice(0,l),e.titleSubSecond=c,e.titleRight=t.slice(l+c.length)},t.prototype.formatLinkedCollectionUploadWorksData=function(e){var t,n,r,o,i,s,a;return s=e.title,a=e.content.uploadWorks,o=e.content.linkedCollection.title,i=s.lastIndexOf(a.length),t=s.slice(0,i),n=s.slice(i),r=t.lastIndexOf(o),e.titleLeft=t.slice(0,r),e.titleSubFirst=o,e.titleMiddle=t.slice(r+o.length),1===a.length?e.titleSubSecond=a[0].fileName||"":e.titleSubSecond=n,e.titleRight=""},t.prototype.getVoiceBarWidth=function(e){return(e>=60?200:e>1?100+Math.floor(100*(e-1)/59):100)+"px"},t.prototype.getDescription=function(e){var t;return"string"==typeof e&&((t=$("<textarea>"+e+"</textarea>")).find("img").each(function(){return $(this).replaceWith(" "+$(this).attr("alt")+" ")}),e=t.text()),k.cutString(e,100,"...")},t.prototype.getIconName=function(e,t){var n;return n="default",Object.keys(P).some(function(r){return"activity."+r===t?(n=r,!0):"activity."+e+"."+r===t?(n=r,!0):~t.indexOf("gitintegration")?(n="gitintegration",!0):~t.indexOf("linked")?(n="linked",!0):~t.indexOf("dependency")?(n="dependency",!0):~t.indexOf("timerange")?(n="timerange",!0):void 0}),P[n]},t.prototype.voiceInit=function(){return this.$progress=this.$(".voice-progress"),this.$playTime=this.$(".play-time"),this.audio=new l({src:this.activityModel.get("content").voice.previewUrl,duration:this.activityModel.get("content").voice.duration,onStateChange:this.voiceState,onTimeUpdate:this.voiceTimeUpdate,onEnd:this.voiceEnd})},t.prototype.voiceCtrl=function(e){var t;return e.preventDefault(),null!=(t=this.audio)&&t.playClick(),this},t.prototype.voiceState=function(e){var t,n;return n=this,t=function(){var t;return t=Math.abs(1e3*(e.duration-e.currentTime-0)),n.$progress.animate({width:"100%"},t,"linear")},this.voiceTimer&&(this.$progress.stop(!0,!0).css({width:0}).fadeIn(0),clearTimeout(this.voiceTimer),this.voiceTimer=null),e.paused?(this.$progress.stop(!0),this.$(".play-ctrl").show(),this.$(".pause-ctrl").hide()):(t(),this.$(".play-ctrl").hide(),this.$(".pause-ctrl").show()),this},t.prototype.voiceTimeUpdate=function(e){return this.$playTime.html(this.voiceDurationFormat(e.currentTime)),this},t.prototype.voiceEnd=function(){var e,t;return this.$playTime.html(this.voiceDurationFormat(null!=(e=this.activityModel.get("content").voice)?e.duration:void 0)),this.voiceTimer=E.delay((t=this,function(){return t.$(".play-ctrl").show(),t.$(".pause-ctrl").hide(),t.$progress.stop(!0,!0).fadeOut(218)}),400),this},t.prototype.openLinkPreviewer=function(e){var t,n,r,o,i,s,a;switch(r=(t=$(e.target)).data("id"),t.data("activity-type")){case"work":return void(r&&x.APP.openObjectPreviewer(r,"work",{_projectId:this.options._projectId}))}if(o=this.activityModel.get("content").linked)switch(s=o.objectType,i=o.linkedType,a=o.url,n=o._objectId,"testplangroup"===i&&(s="testplangroup"),s){case"work":return this.openWork(n);case"collection":return g.enterCollection(n);case"integration":if(a)return window.open(a);if("yinxiang"===i)return this.openYinxiangDetail(n);break;case"zoomus":return window.open(a);case"testplangroup":return x.router.navigate("project/"+o._projectId+"/testplan/"+o._testplanId+"/group/"+n,{trigger:!0});default:return this.requestSubView(w).open(m,{objectType:s,objectId:n})}},t.prototype.jumpToSkitch=function(){var e;return e=this.activityModel.toJSON(),this.options.jumpToSkitch({versionId:e.content.relatedVersionId,skitchId:e.content.skitchId,activityId:e._id})},t.prototype.openYinxiangDetail=function(e){var t,n,r;return t=this.activityModel.get("_boundToObjectId"),n=this.activityModel.get("boundToObjectType"),f.fetch(t,{objectType:n,success:(r=this,function(t){var n;if(n=t.findWhere({_linkedId:e}))return r.requestSubView(w).open(S,{linkModel:n})}),error:function(e){return N(e)}})},t.prototype.openWork=function(e){return C.fetch(e,{silentError:!0,success:(t=this,function(e){var n,r;return n=e.get("_projectId"),e&&n?(r={workModel:e},t.requestSubView(w).open(v,r)):y.error({message:tb_i18n.get("previewer.file.deleted")})}),error:function(e,t){return delete O.getData().models[e.id],delete O.getData().matrix[e.id],401===t.status&&"AccessTokenMissing"!==t.name?y.error({message:tb_i18n.get("authority.get.error"),description:tb_i18n.get("authority.get.error.content")}):y.error({message:t.message||tb_i18n.get("error")})}});var t},t.prototype.enterCollection=function(){var e;if(e=this.activityModel.get("content").linkedCollection)return g.enterCollection(e._id)},t.prototype.openFile=function(){var e,t,n,r,o;if((r=(e=this.activityModel.get("content")).uploadWorks)&&1===r.length)t=r[0];else if(r)return o=E.pluck(r,"_id"),n={_projectId:this.options._projectId,where:"activity"},x.APP.openWorksPreviewer(o[0],o,n);if(t||(t=e.collection||e.work),t)switch(t.objectType){case"collection":return g.enterCollection(t._id);case"work":return this.openWork(t._id)}},t.prototype.voiceDurationFormat=function(e){var t,n;return e=Math.floor(e),(t=parseInt(e/60))<10&&(t="0"+t),(n=parseInt(e%60))<10&&(n="0"+n),t+":"+n},t.prototype.showDeleteConfirmModal=function(e){var t;return e.stopPropagation(),this.requestSubView(i,{title:tb_i18n.get("activity.destroyer.delete"),description:tb_i18n.get("activity.destroyer.confirm.delete"),onConfirm:(t=this,function(){return t.activityModel.destroy({success:function(){return y.success({message:tb_i18n.get("activity.destroyer.delete.success")})},error:function(e){return y.error({message:tb_i18n.get("activity.destroyer.delete.fail")})}})})}),this},t.prototype.showActivityEditor=function(e){return e.stopPropagation(),this.requestSubView(d,{width:520,title:tb_i18n.get("activity.editor.title"),modalClass:"activity-editor-modal-view"}).open(s,{activityModel:this.activityModel}),this},t.prototype.downloadAttachments=function(e){var t,n,r,o,i,s,a;return(t=this.activityModel.get("attachments"))&&t.length?(t.length>1?(n=k.getStrikerDownloadConfig(),i=(o=t[0].fileName).indexOf("."),a=(a=o.slice(0,i))+"_"+tb_i18n.get("activity.moreAttachments")+"_"+t.length+"_"+tb_i18n.get("activity.moreFiles")+"_teambition",(r={httpMethod:"POST"}).data={zipName:a,downloadUrls:t.map(function(e){return e.downloadUrl})}):t.length&&(n=t[0].downloadUrl,r=""),t.length>1&&null!=(null!=(s=window.WebExtensionWin10)?s.downloadAttachments:void 0)?window.WebExtensionWin10.downloadAttachments(n,JSON.stringify(r.data)):1===t.length?k.downloadFile(t[0]):$.fileDownload(n,r),x.gta.event({action:"open detail",type:"work",control:"Comment Attachment",method:"download"})):this},t.prototype.enterPreviewer=function(e){var t;return t=this.activityModel.get("attachments").filter(function(e){return e._id}).map(function(e){return e._id}),x.APP.openWorksPreviewer(e,t,{where:"activity",_projectId:this.options._projectId}),x.gta.event({action:"open detail",type:"work",control:"Comment Attachment",method:"preview"}),this},t.prototype.showMemberDetail=function(e){var t,n,r,o,i;if(!((null!=(r=this.projectModel)?r.getRoleScope():void 0)<0)&&("function"!=typeof(n=this.objectModel).isIndie||!n.isIndie())&&(i=(t=$(e.currentTarget)).data("id")))return null!=(o=this.memberCardView)&&o.remove(),this.memberCardView=this.requestSubView(u,{$toggler:t,placement:"right",withChat:!0,projectModel:this.projectModel,userId:i}),this.memberCardView.show(),this},t.prototype.toggleOverflow=function(e){return"Range"!==window.getSelection().type&&$(e.currentTarget).toggleClass("overflow"),this},t.prototype.remove=function(){var e,n;return clearTimeout(this.timeoutId),null!=(e=this.$clone)&&e.remove(),null!=(n=this.audio)&&n.remove(),t.__super__.remove.apply(this,arguments)},t}()},IcwAtmA5:function(e,t,n){e.exports=n.p+"images/d_zuohengheng@2x.e6013694.png"},IeSewan2:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v={}.hasOwnProperty;m=n("a+N5u/Cl"),c=n("YdqH4v7N"),d=n("3eMzznN/"),h=n("vmWJWrVe"),g=n("sa1Ed382"),i=n("85182E8g"),s=n("nL4olqOP"),u=n("IzLnXsUL"),r=n("xEz6nMx9"),l=n("VsSIL2KK"),p=n("LusHAy5J"),a=n("mC3nfpWm").RoomListContainer,f=n("cl35kkSI").enterSelectedRoom,o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)v.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,h),t.prototype.className="chat-room-add-view flex-vert",t.prototype.viewName="ChatRoomAddView",t.prototype.events={"click .room-item":"handleRoomClick","click .switcher-handler:not(.is-active)":"handleTabClick","input .search-input":"handleSearchInput","click .create-new-chat":"onCreateNewGroup","keydown .search-input":"handleSearchKeydown","mousewheel .rooms-section":d.mousewheel},t.prototype.initialize=function(e){var t;return this.onCreateNewGroupChat=e.onCreateNewGroupChat,this.onRoomClick=null!=(t=e.onRoomClick)?t:function(){},this.organizationsCollection=i.get(0),this.statusModel=new u({organizationsCollection:this.organizationsCollection,projectsCollection:s.get(0)}),this.templateOptions=this.getTemplateOptions(),this.tabOptions=this.getTabOptions(),this.startSearch=!1,this.renderBasic(),this.debouncedRemove=m.debounce(this.remove,0),this.debouncedHighlightRoom=m.debounce(this.highlightRoom,0),this.debouncedRenderLoading=m.debounce(this.renderLoading,0),this.debouncedRenderRooms=m.debounce(this.renderRooms,0),this.listen(),this.statusModel.readRooms()},t.prototype.getTabOptions=function(){return{group:{icon:"icon-member-group",title:tb_i18n.get("chat.room.new.group.msg")},private:{icon:"icon-chat-private-stroke",title:tb_i18n.get("chat.room.new.private.msg")},project:{icon:"icon-chat-group-stroke",title:tb_i18n.get("chat.room.new.project.msg")}}},t.prototype.getTemplateOptions=function(){return{group:{default:{title:tb_i18n.get("chat.room.add.no.group"),desc:tb_i18n.get("chat.room.add.no.group.tips"),imageUrl:n("jDpg3yt+")},search:{title:tb_i18n.get("chat.room.add.no.result"),desc:tb_i18n.get("chat.room.add.search.no.group"),imageUrl:n("Lurw9ib7")}},private:{default:{title:tb_i18n.get("chat.room.add.no.member"),desc:tb_i18n.get("chat.room.add.no.member.tips"),imageUrl:n("utxrlEy1")},search:{title:tb_i18n.get("chat.room.add.no.result"),desc:tb_i18n.get("chat.room.add.search.no.member"),imageUrl:n("Lurw9ib7")}},project:{default:{title:tb_i18n.get("chat.room.add.no.project"),desc:tb_i18n.get("chat.room.add.no.project.tips"),imageUrl:n("0VIrt9RE")},search:{title:tb_i18n.get("chat.room.add.no.result"),desc:tb_i18n.get("chat.room.add.search.no.project"),imageUrl:n("Lurw9ib7")}}}},t.prototype.listen=function(){var e;return this.listenTo(this.organizationsCollection,"update",function(){return this.renderTabList()}),this.listenTo(this.statusModel,"change:activeTab",(e=this,function(){return e.renderSearchContent(),e.renderTabList(),e.statusModel.readRooms()})),this.listenTo(this.statusModel,"change:loading",function(e){return function(){return e.debouncedRenderLoading()}}(this)),this.listenTo(this.statusModel,"change:selectedIndex",function(e){return function(){return e.debouncedHighlightRoom()}}(this)),this.listenTo(this.statusModel,"change:searchQuery",function(e){return function(){return e.statusModel.resetSelectedIndex(),e.debouncedRenderRooms()}}(this)),this.listenTo(this.statusModel,"change:visibleRooms",function(e){return function(){return e.statusModel.resetSelectedIndex(),e.debouncedRenderRooms()}}(this))},t.prototype.handleTabClick=function(e){var t,n;return m.delay((n=this,function(){return n.startSearch=!1})),t=$(e.currentTarget).data("tab"),this.statusModel.setActiveTab(t),g.gta.event({action:"select "+t,page:"Chats Page",segment:"Create Chat List"}),this.unmountReact(this.$section.get(0))},t.prototype.handleRoomClick=function(e){var t,n,r;return m.delay((r=this,function(){return r.startSearch=!1})),t=$(e.currentTarget).data("id"),this.enterRoom(t),n=this.statusModel.getActiveTab(),g.gta.event({action:"begin to chat",type:n,page:"Chats Page",segment:"Create Chat List"})},t.prototype.handleSearchInput=function(e){var t,n;if(t=(t=$(e.currentTarget).val()).trim(),this.statusModel.getSearchQuery()!==t&&this.statusModel.setSearchQuery(t),!this.startSearch)return this.startSearch=!0,n=this.statusModel.getActiveTab(),g.gta.event({action:"begin search content",type:"private"===n?"member":n,page:"Chats Page",segment:"Create Chat List"})},t.prototype.handleSearchKeydown=function(e){var t,n,r;switch(m.include([13,38,40],e.keyCode)&&(e.preventDefault(),e.stopPropagation()),e.keyCode){case 13:if((r=this.statusModel.getSelectedIndex())>-1&&(null!=(t=this.$(".rooms-section .room-item").eq(r))?t.length:void 0)>0)return n=t.data("id"),this.enterRoom(n);break;case 38:return this.statusModel.setPreviousSelectedIndex();case 40:return this.statusModel.setNextSelectedIndex()}},t.prototype.renderBasic=function(){return this.$el.html(r({})),this.$section=this.$(".rooms-section"),this.$tabs=this.$(".tab-list"),this.renderSearchContent(),this.renderTabList()},t.prototype.getTabListData=function(){return{activeTab:this.statusModel.getActiveTab(),enabledTabs:this.statusModel.getEnabledTabs(),tabOptions:this.tabOptions}},t.prototype.renderTabList=function(){var e,t;return e=this.getTabListData(),this.$tabs.html(p(e)),"group"===this.statusModel.get("activeTab")&&this.organizationsCollection.length>0?(this.$addGroupChat=$("<a class='create-new-chat link-add-handler'><span class='icon icon-circle-plus'></span>"+tb_i18n.get("chat.room.add.group.chat")+"</a>"),this.$addGroupChat.insertAfter(this.$tabs)):null!=(t=this.$addGroupChat)?t.remove():void 0},t.prototype.getSearchContentData=function(){var e;return e=this.statusModel.get("activeTab"),{placeholder:{group:tb_i18n.get("organization.statistics.searchGroup"),private:tb_i18n.get("organization.statistics.searchMember"),project:tb_i18n.get("organization.statistics.searchProject")}[e]||""}},t.prototype.renderSearchContent=function(){var e,t;return e=this.$(".chat-room-add-search"),t=this.getSearchContentData(),e.html(l(t)),e.find(".search-input").focus()},t.prototype.onFocusSearchInput=function(){return this.$(".search-input").focus()},t.prototype.renderRooms=function(){var e,t,n,r,o;if(e=this.statusModel.getActiveTab(),r=this.statusModel.getSearchQuery(),n=this.statusModel.getRooms(),!this.statusModel.getLoading())return 0===n.length?(null!=(o=this.templateOptions[e])&&(t=(null!=r?r.length:void 0)>0?o.search:o.default),this.requestReactView(this.$section.get(0),a,{options:t},{redux:!0})):(this.setupScroll(this.$section),this.requestReactView(this.$section.get(0),a,{activeTab:e,rooms:n,getTargetRoom:this.statusModel.getTargetRoom.bind(this.statusModel)},{redux:!0}));this.debouncedRenderLoading()},t.prototype.renderLoading=function(){var e;if(e=this.statusModel.getLoading(),this.hideLoadingIndicator(this.$section),e)return this.unmountReact(this.$section.get(0)),this.showLoadingIndicator(this.$section)},t.prototype.highlightRoom=function(){var e,t,n;return(e=this.$section.find(".room-item")).removeClass("is-active"),n=this.statusModel.getSelectedIndex(),(t=e.eq(n)).addClass("is-active"),this.slideTo(t)},t.prototype.enterRoom=function(e){var t;if(null!=(t=this.statusModel.getTargetRoom(e)))return this.statusModel.getActiveTab(),this.statusModel.getSearchQuery(),"function"==typeof this.onRoomClick&&this.onRoomClick(t),f(t)},t.prototype.onCreateNewGroup=function(){return this.onCreateNewGroupChat(),g.gta.event({action:"create new group",page:"Chats Page",segment:"Create Chat List"})},t.prototype.getRoomType=function(e){switch(e){case"private":return"users";case"project":return"projects";case"group":return"groups"}},t}(),m.extend(o.prototype,c),e.exports=o},IelDYAhh:function(e,t,n){e.exports=n.p+"images/d_ganmao@2x.db381081.png"},"IhWQze/r":function(e,t,n){"use strict";n.r(t),n.d(t,"StoryComponent",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("tLZJUYWX"),c=n("GESwhXbR"),l=n("C5FwwdFb"),u=(n("sIfICzuw"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onOpenStoryDropdown=function(){var e=t.props.gtaHandler;e&&e("add story points")},t}return r.d(t,e),t.prototype.renderTitle=function(){var e=this.props.withTitle,t=void 0===e||e,n=t?"detail-infos-aside":"detail-infos-aside short-version";return o.createElement("div",{className:n},o.createElement(c.Icon,{name:"story-points"}),t&&o.createElement("span",null,"Story Points"))},t.prototype.renderStoryContent=function(){var e=this.props,t=e.hasPermission,n=e.storyPoint,r=null!=n,i=e.emptyPlaceholder||a.get("to.be.added"),c=r?n:i,l=s()("story-content flex-space",{"has-story-point":r,"cursor-not-allowed":!t});return o.createElement("div",{className:"detail-infos-content flex-fill"},o.createElement("a",{className:l},c))},t.prototype.renderStoryMenus=function(){return o.createElement(l.a,{storyPoint:this.props.storyPoint,onClickStoryPoint:this.props.onClickStoryPoint})},t.prototype.renderDropdown=function(){return o.createElement(c.Dropdown,{content:this.renderStoryMenus(),placement:"bottomLeft",nested:!0,onOpen:this.onOpenStoryDropdown},this.renderStoryContent())},t.prototype.render=function(){var e=this.props.hasPermission;return o.createElement("div",{className:"task-story-container flex flex-vcenter"},this.renderTitle(),e&&this.renderDropdown(),!e&&this.renderStoryContent())},t}(o.PureComponent))},"Ii/4iTCP":function(e,t,n){},IkgF6Ob4:function(e,t,n){e.exports={header:"header__3yqx",warn:"warn__1xgN",title:"title__M4MO",close:"close__3ryt",body:"body__uxTV",footer:"footer__YdzM",btn:"btn__1NpS","invite-root":"invite-root__3yj7","invite-title":"invite-title__2PoY","invite-step-hint":"invite-step-hint__2wFL","invite-btn":"invite-btn__4D1_"}},IlPYFVUU:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("TSYQbtd+"),l=n.n(c),u=n("NxDWsJua"),p=n("TeBKNp7v"),d=n.n(p),h=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(e){n.setState({value:e})},n.handleSubmit=function(e){var t=n.state.value.replace(/\s+/g," ").trim();t?n.props.onChange&&n.props.onChange(t,e):n.handleChange(n.props.defaultValue)},n.state={value:n.props.defaultValue},n}return r.d(t,e),t.prototype.render=function(){var e=l()(this.props.className,d.a["object-content-wrapper"]);return i.a.createElement("div",{className:e},this.renderPrefix(),this.renderContent())},t.prototype.renderPrefix=function(){return this.props.prefix&&i.a.createElement("div",{className:d.a["object-content-prefix"]},this.props.prefix)},t.prototype.renderContent=function(){var e=this.props,t=e.readonly,n=e.disabled,r=l()(d.a["object-content-tooltip"],{hinted:!t&&!n}),o=l()(d.a["object-content"],{readonly:t,disabled:n});return i.a.createElement("div",{className:r,"data-title":a.a.get("clickToEdit")},i.a.createElement(u.a,{className:o,value:this.state.value,readonly:t,disabled:n,onChange:this.handleChange,onBlur:this.handleSubmit}))},t}(i.a.PureComponent);n.d(t,"a",function(){return h})},Ino9OVGK:function(e,t,n){"use strict";n.r(t),n.d(t,"testgroupCreationToast",function(){return d});var r=n("q1tIBJhx"),o=n.n(r),i=n("a+N5u/Cl"),s=n.n(i),a=n("tLZJUYWX"),c=n.n(a),l=n("GESwhXbR"),u=n("RLD3BeS/"),p=n("90U+kJWN");function d(e){var t=s.a.escape(e.name),n=c.a.get("testgroup.creator.success.toast.description",t),r=o.a.createElement(u.RawHTMLWithAnchorFormatter,{html:n,onClick:function(){window.location.href=Object(p.getObjectLink)(e,"testplangroup")}});l.Toast.success({message:c.a.get("testgroup.creator.success.toast.message"),description:r})}},Io315hVL:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("/MKjzBat"),a=n("ctsD9mWH"),c=n("HDJEOtNh"),l=n("tLZJUYWX"),u=n.n(l),p=n("eO8HY5nz"),d=n("c8AfT5ki"),h=n("GESwhXbR"),m=n("qtg9ccEz"),f=n("Oi0zBIp9");n("76aAtbBx");var g=n("zXmn5Z7T"),v=n("+rL9Of4X"),b=n("DOZCBSCZ"),y=n("0sqv5CMQ"),k=n("TSYQbtd+"),_=n.n(k),w=n("a+N5u/Cl"),C=n("sa1Ed382"),S=n("s0r7VfKc"),E=n("2qRnoGmE"),T=n.n(E),I=n("IkgF6Ob4"),M=n.n(I),j=n("w3pmCC9X"),P=n("b8GjvuDT"),x={margin:0,padding:0},N=function(e){function t(t){var n=e.call(this,t)||this;n.onOpen=function(){n.orgDataSub||(n.orgId?n.orgDataSub=S.default.fetch.getOrganization(n.orgId).map(function(e){if(!e.owner)throw null;return e.owner.name}).subscribe(function(e){return n.setState({ownerName:e})},function(){return n.setState({ownerName:""})}):n.setState({ownerName:""}))},n.onClose=function(){n.props.onModalStatusChange(!1)},n.onModalStatusChange=function(e){n.setState({invitationGuideOpened:e})},n.onShowInvite=function(){n.setState({invitationGuideOpened:!0})},n.state={invitationGuideOpened:!1};var r=C.PREFERENCE.get("lastWorkspace");return"personal"!==r&&(n.orgId=r),n}return r.d(t,e),t.prototype.render=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(h.Modal,{bodyStyle:x,closeable:!1,opened:this.props.opened,titleCls:"hidden",width:Object(h.getQuadUnit)(115),onVisibleChange:this.props.onModalStatusChange,onOpen:this.onOpen},this.renderHeader(),this.renderBody(),this.renderFooter()),this.renderInvitationGuide())},t.prototype.componentWillUnmount=function(){this.orgDataSub&&this.orgDataSub.unsubscribe()},t.prototype.renderHeader=function(){return i.a.createElement("header",{className:_()(M.a.header,"flex flex-vcenter")},i.a.createElement("div",{className:"flex-space flex flex-vcenter"},i.a.createElement(h.Icon,{name:"warning",size:20,className:M.a.warn}),i.a.createElement("span",{className:M.a.title},u.a.get("org.special.role.search.hint.title"))),i.a.createElement(h.IconButton,{name:"remove",color:"gray",className:M.a.close,onClick:this.onClose}))},t.prototype.renderBody=function(){var e,t=this.state.ownerName;if(void 0===t)e=i.a.createElement(h.Loading,null);else{var n=t&&u.a.get("parentheses",t);e=u.a.get("org.special.role.search.hint.content",n)}return i.a.createElement("div",{className:M.a.body},e)},t.prototype.renderFooter=function(){return i.a.createElement("footer",{className:_()(M.a.footer,"text-right")},i.a.createElement(h.Button,{type:"secondary",className:M.a.btn,onClick:this.onClose},u.a.get("cancel")),i.a.createElement(h.Button,{className:M.a.btn,onClick:this.onShowInvite},u.a.get("org.special.role.search.hint.invite.method")))},t.prototype.renderInvitationGuide=function(){return!!this.orgId&&i.a.createElement(O,{orgId:this.orgId,opened:this.state.invitationGuideOpened,onModalStatusChange:this.onModalStatusChange})},t}(i.a.PureComponent),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClose=function(){t.props.onModalStatusChange(!1)},t}return r.d(t,e),t.prototype.render=function(){var e=this.props.orgId,t=T.a.HOST+"/organization/"+e+"/members",n=u.a.get("org.special.role.search.hint.invite.step.0",t);return i.a.createElement(h.Modal,{bodyStyle:x,opened:this.props.opened,title:u.a.get("org.special.role.search.hint.invite.title"),titleCls:M.a["invite-title"],titlePosition:"center",width:Object(h.getQuadUnit)(150),onVisibleChange:this.props.onModalStatusChange},i.a.createElement("div",{className:M.a["invite-root"]},i.a.createElement("img",{src:j}),i.a.createElement("p",{className:M.a["invite-step-hint"]},n),i.a.createElement("img",{src:P}),i.a.createElement("p",{className:M.a["invite-step-hint"]},u.a.get("org.special.role.search.hint.invite.step.1")),this.renderFooter()))},t.prototype.navToGuide=function(){window.open("https://teambition.kf5.com/hc/kb/article/1146311/")},t.prototype.renderFooter=function(){return i.a.createElement("footer",{className:"text-center"},i.a.createElement("div",{className:M.a["invite-btn"]},i.a.createElement(h.TextButton,{color:"blue",onClick:this.navToGuide},u.a.get("org.special.role.search.hint.invite.guide"))),i.a.createElement(h.Button,{onClick:this.onClose},u.a.get("confirm")))},t}(i.a.PureComponent),R=n("9Ip6qvet"),D=n("QyjeWo4p"),L={onChangeSearch:R.m,onChangeSearchSilent:R.n,onFocus:R.k},z=function(e){function t(t){var n=e.call(this,t)||this;return n.refSearchInput=function(e){n.searchInput=e},n.refContainer=function(e){n.containerEl=e},n.getQuery=function(e){return void 0===e&&(e=n.props.location),D.parse(e.search.slice(1)).q||""},n.onChange=function(e){var t=e.target.value;n.props.input!==t&&(n.props.inSearchPage?n.props.onChangeSearchSilent({input:t}):n.props.onChangeSearch({input:t}))},n.onMouseDown=function(e){!n.props.opened&&n.props.onClick(e)},n.onToggleGuide=function(){n.setState(function(e){return{guideModalOpend:!e.guideModalOpend}})},n.onModalStatusChange=function(e){n.setState({guideModalOpend:e})},n.onFocus=function(){n.props.onFocus(!0)},n.onBlur=function(){n.props.onFocus(!1),Object(R.g)(a.store)&&C.gta.event({action:"open detail",method:"keyboard",control:"Global Search"})},n.state={guideModalOpend:!1,focusChange:!1},n}return r.d(t,e),t.prototype.componentDidUpdate=function(e){var t=this;this.props.focus===e.focus||this.state.focusChange||this.setState({focusChange:!0}),this.props.focus?document.activeElement!==this.searchInput&&window.setTimeout(function(){t.searchInput.focus()},0):this.searchInput.blur()},t.prototype.renderGuide=function(){return this.state.guideModalOpend&&o.createElement(N,{opened:this.state.guideModalOpend,onModalStatusChange:this.onModalStatusChange})},t.prototype.render=function(){var e=_()("search-bar",{"has-query":this.props.input.trim().length>0,active:this.props.opened,disabled:this.props.disabled,focus:this.props.focus,"no-focus-change":!this.state.focusChange}),t=this.props.disabled?{onClick:this.onToggleGuide}:{onMouseDown:this.onMouseDown},n=!this.props.disabled&&{onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onKeyDown:this.props.onKeyDown};return o.createElement("div",r.a({ref:this.refContainer,className:e},t),o.createElement("div",{className:"search-bar-mask",onClick:this.onFocus},o.createElement(h.Icon,{name:"search",className:"search-bar-icon"}),o.createElement("span",{className:"search-bar-mask-text"},this.props.placeholder)),o.createElement("div",{className:"search-bar-icon-place"}),o.createElement("input",r.a({ref:this.refSearchInput,className:"form-control search-bar-input",value:this.props.input,maxLength:50,placeholder:this.props.focus?this.props.placeholder:"",disabled:this.props.disabled},n)),this.renderGuide())},t.defaultProps={onClick:w.noop,inSearchPage:!1},t}(o.PureComponent),A=Object(p.withRouter)(Object(s.connect)(function(e){var t=e.ui.search;return{input:t.input,opened:t.opened,focus:t.focus}},L)(z)),V=n("iMQdzzrd"),F=n("8lwrpTqz"),B=n("90U+kJWN"),U=n("2Dvc1YJz"),$=n("rGq9vsrD"),H=n("suI5NDUm"),G=n("GHDEvYBf"),q=n("AaR11ELR");n.d(t,"typeClass",function(){return K}),n.d(t,"SelectableResults",function(){return ee}),n.d(t,"SearchBar",function(){return ne}),n.d(t,"focusOnSearch",function(){return re}),n.d(t,"clearSearch",function(){return oe}),n.d(t,"changeSearch",function(){return ie}),n.d(t,"assignWorkspaceData",function(){return se});var W=n("QyjeWo4p"),J=n("CxY0Mkc1"),X=n("sa1Ed382"),Y=$.a.searchGuideChangeFilter;n("2ypjTRgY");var K={project:v.a,user:g.a,task:function(e){var t=e.content,n=e.taskId,r=e.note,i=e.previousUniqueId,s=n?o.createElement("div",{className:"abstract-item-title-inner"},o.createElement("p",{className:"abstract-item-title-wrapper"},t),o.createElement("span",{className:"abstract-item-taskid"},n)):t,a=i?o.createElement("span",{className:"abstract-item-label__prev-task-id no-highlight"},o.createElement(h.Icon,{name:"task-id"}),o.createElement("span",null,u.a.get("task.id.previous"),i)):void 0;return o.createElement(m.a,{title:s,content:r,label:a,type:"task"})},work:function(e){var t=e.fileName;return o.createElement(m.a,{title:t,type:"work"})},post:function(e){var t=e.title,n=e.content;return o.createElement(m.a,{title:t,content:n,type:"post"})},event:function(e){var t=e.title,n=e.startDate,r=e.endDate;return o.createElement(m.a,{title:t,content:Object(f.a)(n,r),type:"event"})}},Q={onOpen:R.l,onFocus:R.k,onClose:R.j,onExit:R.d},Z=function(e){function t(t){var n=e.call(this,t)||this;return n.handleResize=function(){n.setState({maxHeight:n.getValue()})},n.state={maxHeight:n.getValue()},n}return r.d(t,e),t.prototype.getValue=function(){var e=48+(Object(H.isAone)()?160:0);return Math.min(window.innerHeight-e,468)},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.handleResize),window.addEventListener("wheel",F.a,{passive:!1})},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("wheel",F.a)},t.prototype.render=function(){return o.createElement("div",{className:"scroll-content thin-scroll",style:this.state},this.props.children)},t}(o.PureComponent),ee=Object(h.Selectable)(Z),te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getSelectableResults=function(e){t.selectableResults=e},t.getPlaceholder=function(){return t.props.organization?l.get("navigation.search.organization",t.props.organization.name):l.get("navigation.search.personal")},t.getCurrentWorkspaceRoute=function(){var e=t.props.workspaceId;return d.a.organization({params:{_organizationId:e}})},t.hasOwn=function(e,t){return e.hasOwnProperty(t)},t.getGuideListKeys=function(){var e=X.PREFERENCE.get("lastWorkspace"),n=Object.assign({},Object(U.c)());return"personal"===e&&t.hasOwn(n,"noPlaced")&&delete n.noPlaced,Object.keys(n)},t.hasNoResult=function(){return!t.props.list.length&&!t.props.isLoading},t.isSearchGuide=function(){return!t.props.input.trim().length},t.filterFn=function(e){return e.type!==b.a},t.onSubmit=function(e){var n=t.props,r=n.input,o=n.location,i=r.trim(),s=e||W.parse(o.search.slice(1)).type;t.navigateToSearch({type:s,q:i}),X.gta.event({action:"begin full search",method:"click",type:s||"all",control:"Quick Result"})},t.navigateToSearch=function(e){var n=t.props.history,r={pathname:t.getCurrentWorkspaceRoute(),search:W.stringify(e)};Object(R.g)(a.store)?n.push(r):X.router.navigate(J.format(r),{trigger:!0}),X.APP.Float.close(),t.props.onClose()},t.onSelect=function(e){if(t.isSearchGuide()){var n=t.getGuideListKeys();-1===e||e===n.length?(t.onSubmit("task"),t.guideGta("advanced")):Object(H.isAone)()&&e>n.length?(Object(H.toAoneSearch)(t.props.input),t.props.onClose()):t.onGuideSubmit(n[e])}else if(t.hasNoResult())t.onSubmit();else if(-1===e)t.onSubmit();else{var r=t.props.list[e],o=r.searchType;if(r.searchAll)t.onSubmit(o);else{if(Object(G.d)(o))return void Object(B.openInNewTab)(r.url);t.props.onSelect(o,r,e),["project","user"].indexOf(o)>=0&&t.onClosePopup()}}},t.onClosePopup=function(){document.body.classList.contains("modal-open")?t.props.onOpen():t.props.onClose()},t.onSearch=function(e){13===e.which&&t.onSubmit()},t.onGuideSubmit=function(e){var n=Object(U.c)()[e].type;t.navigateToSearch({type:n}),t.guideGta(e),a.store.dispatch(Y(e))},t.onKeyDown=function(e){t.selectableResults&&t.selectableResults.keyboardHandler(e)},t.onMouseDown=function(e){e.preventDefault()},t.onVisibleChange=function(e){e?t.props.onFocus(!0):t.onClosePopup()},t.onDropdownOpen=function(){t.isSearchGuide()&&X.gta.event({action:"view suggested questions"})},t.renderResultItems=function(){var e=Object(H.isAone)()&&o.createElement(q.a,{key:"aone-search-bar-guide",onClose:t.props.onClose,input:t.props.input.trim()}),n=r.h(Object(B.flattenPlainGroup)(Object(B.iterator)(t.renderGroups())),[t.renderLoading(),t.renderPlaceholder()]),i=r.h(t.renderGuideGroups(),[t.renderAdvancedSearch(),e]);return t.isSearchGuide()?i:n},t.renderAoneSearchBarFooter=function(){return!t.isSearchGuide()&&o.createElement(q.b,{onClose:t.props.onClose,onSubmit:t.onSubmit,input:t.props.input.trim()})},t.renderSearchInput=function(){var e=!!Object(p.matchPath)(t.props.location.pathname,{path:t.getCurrentWorkspaceRoute()}),n=e?t.onSearch:t.onKeyDown,r=!!t.props.organization&&!c.OrganizationAccess.hasGuestAuthority(t.props.organization._id);return o.createElement(A,{disabled:r,placeholder:t.getPlaceholder(),onKeyDown:n,inSearchPage:e})},t.renderDropdown=function(){return o.createElement(h.Dropdown,{className:"global-search-popover",content:t.renderContent(),persistence:!0,nested:!0,onOpen:t.onDropdownOpen,offset:[0,12],style:{width:360},opened:t.props.opened,onHide:t.onClosePopup,onVisibleChange:t.onVisibleChange},t.renderSearchInput())},t}return r.d(t,e),t.prototype.componentDidMount=function(){var e=W.parse(location.search.slice(1)).q;e&&ie(e)},t.prototype.componentWillUnmount=function(){this.props.onExit()},t.prototype.renderSearchItems=function(){return Object(B.flattenPlainGroup)(Object(B.iterator)(this.props.children))},t.prototype.renderGroups=function(){var e=this;return(Object(H.isAone)()?R.a.concat(G.a):R.a).map(function(t){return{type:t,groupArray:e.props.list.map(function(e,t){return{index:t,item:e}}).filter(function(e){return e.item.searchType===t})}}).filter(function(e){return e.groupArray.length>0}).map(function(t){var n=t.type,r=t.groupArray;return o.createElement(y.a,{key:n,type:n},e.renderGroup(n,r))})},t.prototype.renderSearchAll=function(){return o.createElement(h.TextButton,{color:"gray",className:"search-all-handler"},o.createElement(h.Icon,{name:"more",size:16}),l.get("search.popover.all"))},t.prototype.renderAdvancedSearch=function(){var e=this;return o.createElement("div",{className:"advanced-guide-menu",key:"advancedSearch"},o.createElement("div",{className:"guide-separetor"}),o.createElement("div",{className:"guide-menu",onClick:function(){e.onSubmit("task"),e.guideGta("advanced")}},l.get("navigation.search.guide.advancedSearch"),o.createElement(h.Icon,{className:"icon-chevron",name:"chevron-right",size:14})))},t.prototype.renderGuideGroups=function(){var e=this;return this.getGuideListKeys().map(function(t,n){return o.createElement("div",{className:"guide-menu",key:"guide-search-"+n,onClick:function(){return e.onGuideSubmit(t)}},Object(U.d)(t))})},t.prototype.guideGta=function(e){var t,n=((t={})[U.a.recentCompleted]="recent accomplished",t[U.a.recentUpdate]="recent updated",t[U.a.iCreated]="recent created",t[U.a.noPlaced]="tasks without projects",t.advanced="advanced search",t);X.gta.event({action:"search suggested questions",control:n[e]})},t.prototype.renderItem=function(e,t){var n=this.props.input.trim(),i=Object(G.d)(e)?G.b[e]:K[e],s=Object(V.a)(Object(V.b)(i,n),n);return o.createElement(s,r.a({},t,{size:"small"}))},t.prototype.renderGroup=function(e,t){var n=this;return t.map(function(t){var r=t.index,i=t.item,s=i.searchAll?n.renderSearchAll():n.renderItem(e,i);return o.createElement("li",{key:i._id||"all"+r,className:"result-item","data-id":i._id,onMouseDown:n.onMouseDown,onClick:function(){return n.onSelect(r)}},s)})},t.prototype.renderLoading=function(){return this.props.isLoading&&o.createElement(b.a,{key:"loading"})},t.prototype.renderPlaceholder=function(){var e=this;return this.hasNoResult()&&o.createElement("div",{key:"placeholder",className:"search-bar-placeholder",onClick:function(){return e.onSubmit()}},o.createElement(h.Icon,{name:"search"}),o.createElement("span",null,l.get("search.bar.placeholder")))},t.prototype.renderContent=function(){return o.createElement("div",{className:"search-bar-result-content"},o.createElement(ee,{ref:this.getSelectableResults,focusable:!1,index:-1,filterFn:this.filterFn,onEnter:this.onSelect},this.renderResultItems()),this.renderAoneSearchBarFooter())},t.prototype.render=function(){return o.createElement(p.Switch,null,o.createElement(p.Route,{path:d.a.organization({params:{_organizationId:this.props.workspaceId}}),children:this.renderSearchInput}),o.createElement(p.Route,{children:this.renderDropdown}))},t}(o.PureComponent),ne=Object(p.withRouter)(Object(s.connect)(function(e){var t=e.ui.search,n=t.input,r=t.opened,o=t.results,i=t.projectsAndMembers,s=t.workspaceId;return{input:n,opened:r,list:Object(R.f)(t),workspaceId:s,isLoading:!(!n.trim()||o&&i),location:e.router.location}},Q)(te)),re=function(){a.store.dispatch(Object(R.k)(!0))},oe=function(){""!==a.store.getState().ui.search.input&&a.store.dispatch(Object(R.m)({input:""}))},ie=function(e){a.store.dispatch(Object(R.m)({input:e}))},se=function(e){a.store.dispatch(Object(R.i)(e))}},IoSlT9mR:function(e,t,n){e.exports={dropdown:"dropdown__pK2J","global-testplan-selector":"global-testplan-selector__2mPE",section:"section__2P7g","section-label":"section-label__3Qli","project-selector-trigger":"project-selector-trigger__2kHg",selector:"selector__2D3F"}},Iolhv95T:function(e,t,n){e.exports=n.p+"images/d_huaxin@2x.55021c62.png"},Ip880dDe:function(e,t,n){e.exports=n.p+"images/d_shayan@2x.829236e3.png"},"Iqb/Tbd3":function(e,t,n){e.exports={"bulk-action__trigger":"bulk-action__trigger__seOO","task-bulk-archive__trigger":"task-bulk-archive__trigger__1srF","bulk-action__trigger--disabled":"bulk-action__trigger--disabled__2Y_1","task-bulk-archive__trigger--disabled":"task-bulk-archive__trigger--disabled__1Cx8","bulk-action__trigger-text":"bulk-action__trigger-text__2Fu2","task-bulk-archive__trigger-text":"task-bulk-archive__trigger-text__J35b","bulk-action__trigger-icon":"bulk-action__trigger-icon__LTCF","task-bulk-archive__trigger-icon":"task-bulk-archive__trigger-icon__1hd0","task-bulk-archive__popup":"task-bulk-archive__popup__3cA1","task-bulk-archive__popup_button":"task-bulk-archive__popup_button__f6xQ"}},IrIsz1ep:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f={}.hasOwnProperty;p=n("a+N5u/Cl"),d=n("tLZJUYWX"),l=n("GESwhXbR").Toast,r=n("bZr3G77e"),m=n("sa1Ed382"),u=n("vmWJWrVe"),a=n("BLZfz376"),o=n("aKMSYotH"),c=n("QxIYFO4k"),h=n("Gm9pL8c2"),s=h.ProjectCategoryManagerModalContainer,i=h.ProjectCategoryManagerModalBridge,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)f.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,u),t.prototype.className="project-category-manager-modal-view modal-dialog",t.prototype.viewName="ProjectCategoryManagerModalView",t.prototype.initialize=function(e){return this.organizationModel=e.organizationModel,this.readProjectTags().then((t=this,function(e){return t.projectTagsCollection=e})).then(function(e){return function(){return e.assignProjectTags()}}(this)).then(function(e){return function(){return e.render()}}(this)).then(function(e){return function(){return e.mount()}}(this)).then(function(e){return function(){return e.listen()}}(this));var t},t.prototype.remove=function(){return this.unmount(),t.__super__.remove.apply(this,arguments)},t.prototype.listen=function(){if(this.projectTagsCollection)return this.listenTo(this.projectTagsCollection,"add change remove",(e=this,function(){return e.assignProjectTags()}));var e},t.prototype.render=function(){return this.$el.html(c())},t.prototype.mount=function(){return this.requestReactView(this.getMountNode(),s,{onCreateProjectTagClick:p.bind(this.handleCreateProjectTagClick,this),onOpenProjectCategoryActionMenuClick:p.bind(this.handleOpenProjectCategoryActionMenuClick,this),onProjectTagSort:p.bind(this.handleProjectTagSort,this)},{redux:!0})},t.prototype.unmount=function(){return i.unmount()},t.prototype.assignDataToState=function(e){return i.assign(e)},t.prototype.assignProjectTags=function(){return this.assignDataToState({projectTags:this.getProjectTags()})},t.prototype.getMountNode=function(){return null==this.$el?null:this.$el.find(".modal-body").get(0)},t.prototype.getTargetProjectTagModel=function(e){return this.projectTagsCollection.get(e)},t.prototype.getIndexedProjectTagModel=function(e){return this.projectTagsCollection.at(e)},t.prototype.getProjectTagModels=function(){return this.projectTagsCollection.getSortedOrganizationProjectTagModelsByPos(this.organizationModel.id)},t.prototype.getProjectTags=function(){return p.chain(this.getProjectTagModels()).map(function(e){return e.toJSON()}).value()},t.prototype.readProjectTags=function(){return new Promise((e=this,function(t,n){var r;return(null!=(r=e.$el)?r.get(0):void 0)?a.fetchByOrganizationId(e.organizationModel.id).then(function(e){return t(e)}).catch(function(e,t){return n(t)}):n()}));var e},t.prototype.handleCreateProjectTagClick=function(e){var t,n;return t={name:e},r.post("organizations/"+this.organizationModel.id+"/projecttags",t,{success:(n=this,function(e){return m.gta.event({action:"added project tag"}),n.projectTagsCollection.add(e),n.scrollToListBottom()})})},t.prototype.handleChangeProjectTagNameClick=function(e,t){var n,o;return n={name:t},r.put("projecttags/"+e,n,{success:(o=this,function(t){return m.gta.event({action:"rename project tag"}),o.getTargetProjectTagModel(e).set(t)})})},t.prototype.handleDeleteProjectTagClick=function(e){return r.del("projecttags/"+e,{success:(t=this,function(){return m.gta.event({action:"remove project tag"}),t.projectTagsCollection.remove(e)})});var t},t.prototype.handleOpenProjectCategoryActionMenuClick=function(e,t){var n,r;if(!(n=this.$(e.currentTarget)).data("bs.popover"))return null!=(r=this.projectCategoryActionMenuView)&&r.remove(),this.projectCategoryActionMenuView=this.requestSubView(o,{$toggler:n,onChangeProjectTagNameClick:p.bind(this.handleChangeProjectTagNameClick,this),onDeleteProjectTagClick:p.bind(this.handleDeleteProjectTagClick,this),projectTagModel:this.getTargetProjectTagModel(t)}),this.projectCategoryActionMenuView.show()},t.prototype.handleProjectTagSort=function(e,t){var n,o,i,s,a,c,u,p,h,m,f;if(e!==t&&(u=this.getProjectTagModels(),a=u[t]))return o=u[i=e>t?e+1:e<t?e:e===t?t:void 0],c=a.get("pos"),h=(null!=(m=u[i-1])?m.get("pos"):void 0)||0,p=(null!=(f=u[i])?f.get("pos"):void 0)||0,s=(h+Math.max(h+2,p))/2,n={_nextId:o?o.id:null},a.set("pos",s),r.put("projecttags/"+a.id+"/move",n,{error:function(){return l.error(d.get("update.project.tag.position.failed")),a.set("pos",c)},success:function(e){return a.set(e)}})},t.prototype.scrollToListBottom=function(){var e,t,n,r,o,i;if((e=this.$(".project-category-manager-modal-list")).get(0))return t=(r=e.get(0)).clientHeight,o=r.scrollHeight,i=r.scrollTop,n=Math.round(Math.abs(o-i-t)/2),e.animate({scrollTop:e.get(0).scrollHeight},n)},t}()},IwRQ7g7z:function(e,t,n){var r,o,i,s={}.hasOwnProperty;o=n("wMS7wN+j"),i=n("sa1Ed382"),r=n("vmWJWrVe"),n("OmupbwLD"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.className="organization-analysis-app-view",t.prototype.viewName="OrganizationAnalysisAppView",t.prototype.tagName="organization-analysis-app-view",t.prototype.initialize=function(e){return n.e(47).then((t=this,function(r){return t.analysis=n("d3ByXLWA"),t.timeoutId=window.setTimeout(function(){return t.analysis.bootstrapOrganization({domPurify:function(e){return o.sanitize(e,{})},organization:e.organizationModel.toJSON(),teambition:i,afterBootstrap:function(){return t.timeoutId=null,e.callback()},openCreatorProjectDialog:function(){return i.APP.openCreator("project")}})})}).bind(null,n)).catch(n.oe);var t},t.prototype.remove=function(){return this.timeoutId&&window.clearTimeout(this.timeoutId),this.analysis&&this.analysis.disposeOrganization(),this.analysis=null,t.__super__.remove.apply(this,arguments)},t}()},IwxuFAT9:function(e,t,n){e.exports={app:"app__2rSw",header:"header__2AZY","header-title":"header-title__6v5-","header-handler":"header-handler__2tyg",creator:"creator__2PwJ","creator-icon":"creator-icon__2XoZ","creator-hint":"creator-hint__24tH",library:"library__2NDf","item-fade-enter":"item-fade-enter__1qP2","item-fade-enter-active":"item-fade-enter-active__2hLA","item-fade-exit":"item-fade-exit__QN6o","item-fade-exit-active":"item-fade-exit-active__34Xa"}},Ix1SnrL5:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("a+N5u/Cl"),a=n("TSYQbtd+"),c=n.n(a),l=n("s0r7VfKc"),u=n("4c1CS0b3"),p=n("8yf6doCl"),d=n("YqUJfXDr"),h=n("DOZCBSCZ"),m=n("GESwhXbR"),f=n("zXmn5Z7T"),g=n("sa1Ed382"),v=n("ViehWwv3"),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onInviteClick=function(){t.props.onInviteClick(t.props.member.email)},t}return r.d(t,e),t.prototype.renderInviteButton=function(){return o.createElement(m.Button,{className:v["invite-handler"],type:"secondary",onClick:this.onInviteClick},i.get("project.memberadd.add"))},t.prototype.renderInvitedHint=function(){return o.createElement("span",{className:v["invite-handler"]},i.get("project.memberadd.added"))},t.prototype.renderMemberInvite=function(){return this.props.emails.indexOf(this.props.member.email)>=0?this.renderInvitedHint():this.renderInviteButton()},t.prototype.render=function(){var e=this.props.member,t=e._id,n=e._userId,r=e.name,s=e.avatarUrl;return o.createElement("li",{key:t,className:v["member-wrapper"]},o.createElement(f.a,{avatarUrl:s,name:r,size:"small"}),g.user.id===n&&o.createElement("span",{className:v["member-label"]},i.get("parentheses",i.get("me"))),this.renderMemberInvite())},t}(o.PureComponent);n.d(t,"OrgMemberAdd",function(){return S});var y=n("sa1Ed382"),k=n("RQ44psah"),_=n("2qRnoGmE"),w=n("ymFCWmUp").objectsFilter,C=n("ViehWwv3"),S=function(e){function t(t){var n=e.call(this,t)||this;return n.destroy$=new p.Subject,n.refInput=function(e){n.input=e},n.isInSearch=function(){return n.state.query.trim().length>0},n.isInTeam=function(){return"team"===n.props.targetType},n.onMemberAddSuccess=function(e){void 0===e&&(e=!0),n.props.onMemberAddSuccess(n.state.query,e)},n.getMembers=function(e){return void 0===e&&(e=n.state.members),e.filter(function(e){return"teambition@teambition.com"!==e.email&&0===n.state.targetMembers.filter(function(t){return[e._userId,e._id].indexOf(t._userId)>=0}).length})},n.getInviteEmails=function(){return s.chain(n.state.emailInvites).pluck("email").union(n.state.emails).value()},n.onInvite=function(){var e=n.state,t=e.emails,r=e.emailInvites;t.length?n.postMembers(t).map(function(){return n.onMemberAddSuccess()}).catch(function(e){return n.props.onMemberAddError(e),u.Observable.empty()}).subscribe():r.length&&n.onMemberAddSuccess()},n.searchForMembers=s.debounce(function(e){n.isInTeam()?n.searchMembers(e):n.filterMembers(e)},300),n.onQueryChange=function(e){var t=e.target.value,r=t.trim();n.setState({query:t,isLoading:!!r.length}),r.length&&n.searchForMembers(r)},n.onListInviteClick=function(e){n.setState({emails:n.state.emails.concat(e)})},n.onFinderInviteClick=function(e){var t=[e.email];n.postMembers(t).map(function(e){return n.setState({emailInvites:n.state.emailInvites.concat(e),query:""}),n.onMemberAddSuccess(!1)}).subscribe({error:function(e){n.props.onMemberAddError(e)}})},n.onQRcodeClick=function(){n.props.openQRcode(n.state.orgMemberCount)},n.filterMembers=function(e){n.setState({searchResults:w(n.getMembers(),e),isLoading:!1})},n.searchMembers=function(e){l.default.searchMembers(n.props.organization._id,{q:e}).takeUntil(n.destroy$).subscribe(function(e){n.setState({searchResults:n.getMembers(e),isLoading:!1})})},n.loadSourceMembers=function(){(n.isInTeam()?n.getOrgMembers$:n.props.outerOnly?n.getRecentOuterMembers$:n.getRecentMembers$).subscribe(function(e){var t=e.result,r=e.hasMore;n.setState({hasMore:r,members:t,isLoading:!1})})},n.loadTargetMembers=function(){var e=n.isInTeam()?n.getTeamMembers$:n.getOrgMembers$;e.first().subscribe(function(e){var t=e.result;n.props.initMemberFinder(n.input,t,n.onFinderInviteClick)}),e.subscribe(function(e){var t=e.result;n.setState({targetMembers:t})})},n.formRequests=function(e,t){return l.default.fetch.expandPage(l.default.getMembersInPages(e,t)).takeUntil(n.destroy$)},n.initRequests=function(){n.getOrgMembers$=n.formRequests("organization",n.props.organization._id).do(function(e){var t=e.totalSize;n.setState({orgMemberCount:t})}),n.getTeamMembers$=n.formRequests("team",n.props.teamId),n.getRecentMembers$=l.default.fetch.get("organizations/"+n.props.organization._id+"/recommendMembers").switchMap(function(e){return u.Observable.of({result:e,hasMore:!1})}).takeUntil(n.destroy$),n.getRecentOuterMembers$=u.Observable.of({result:[],hasMore:!1})},n.state={orgMemberCount:0,query:"",emails:[],members:[],emailInvites:[],targetMembers:[],searchResults:[],isLoading:!0,hasMore:!1},n.initRequests(),n}return r.d(t,e),t.prototype.componentDidMount=function(){this.loadTargetMembers(),this.loadSourceMembers()},t.prototype.componentWillUnmount=function(){this.onInvite(),this.destroy$.next(),this.destroy$.complete()},t.prototype.postMembers=function(e){var t=this.props,n=t.organization,r=t.teamId,o=t.outerOnly,i=this.isInTeam()?r:n._id,s=this.isInTeam()?"v2/teams/"+i+"/members":o?"organizations/"+i+"/members/outer":"v2/organizations/"+i+"/members";return l.default.fetch.post(s,{email:e})},t.prototype.renderLoadMore=function(){return this.props.isReady&&!this.isInSearch()&&o.createElement(d.LoadMore,{onEnter:this.loadSourceMembers,hasMore:this.state.hasMore,endWith:null})},t.prototype.renderLoading=function(){return this.state.isLoading&&o.createElement(h.a,null)},t.prototype.renderMembers=function(e){var t=this;return s.sortBy(e,function(e){return e._userId!==y.user.id}).map(function(e){return o.createElement(b,{key:e._id,member:e,emails:t.getInviteEmails(),onInviteClick:t.onListInviteClick})})},t.prototype.renderPlaceholder=function(){var e=this.state,t=e.query,n=e.orgMemberCount,r=e.members,s=e.searchResults,a=e.isLoading,l=this.props.outerOnly,u=this.isInSearch(),p=u?i.get("organization.memberadd.searchCantfind",t):1===n?i.get("organization.memberadd.noMemberInviteSomeone"):l?"":i.get("organization.memberadd.allRecommendInvited"),d=c()(C.placeholder,{"in-search":u});return!a&&(u?!s.length:!r.length)&&o.createElement("div",{className:d},o.createElement("div",{className:C.illustration}),o.createElement("p",{className:C["placeholder-tip"],dangerouslySetInnerHTML:{__html:p}}))},t.prototype.renderUpgrade=function(){return this.props.hasUpgradePermission&&o.createElement("a",{href:k.pay.orgAddMember(this.props.organization._id),target:"_blank",className:C["upgrade-handler"]},i.get("organization.settings.add.member.toplimit"))},t.prototype.renderQRCodeHandler=function(){return _.FEATURES.qrLinkInvite&&"organization"===this.props.targetType&&!this.props.outerOnly&&o.createElement(m.TextButton,{className:C["qrcode-handler"],color:"blue",onClick:this.onQRcodeClick},o.createElement(m.Icon,{name:"qrcode",size:14}),o.createElement("span",null,i.get("project.memberadd.addMembersByLink")))},t.prototype.renderHeader=function(){var e=c()(C["search-input"],"form-control");return o.createElement("div",{className:C.header},o.createElement("div",{className:C["header-label"]},o.createElement("label",null,i.get("organization.memberadd.inviteText")),this.renderQRCodeHandler()),o.createElement("input",{ref:this.refInput,className:e,onChange:this.onQueryChange,value:this.state.query,placeholder:i.get("organization.memberadd.searchTip")}))},t.prototype.renderSearchResults=function(){return this.isInSearch()&&o.createElement("ul",{className:C["member-list"]},o.createElement("label",null,this.props.sourceTitle),this.renderMembers(this.state.searchResults),this.renderLoading())},t.prototype.renderInvitedMemberList=function(){return!this.isInSearch()&&o.createElement("ul",{className:C["email-invites-list"]},this.renderMembers(this.state.emailInvites))},t.prototype.renderMemberList=function(){return!this.isInSearch()&&o.createElement("ul",{className:C["member-list"]},o.createElement("label",null,this.props.sourceTitle),this.renderMembers(this.getMembers()),this.renderLoading(),this.renderLoadMore())},t.prototype.renderProgress=function(){var e=this.state.orgMemberCount,t=this.props.memberLimit,n=Math.min(Math.floor(e/t*100),100);return this.props.showMemberProgress&&o.createElement("footer",{className:C.footer},o.createElement(m.LinearBar,{percent:n,className:C.progress}),o.createElement("div",{className:C["progress-hint"]},o.createElement("span",null,i.get("member.progress.title.organization",e,t)),this.renderUpgrade()))},t.prototype.render=function(){var e=c()(C.body,"thin-scroll");return o.createElement("div",{className:C.root},o.createElement("div",{className:e},this.renderHeader(),this.renderInvitedMemberList(),this.renderMemberList(),this.renderSearchResults(),this.renderPlaceholder()),this.renderProgress())},t.defaultProps={canAddMember:!0,canRemoveMember:!0},t}(o.PureComponent)},IxHRUQ47:function(e,t,n){var r,o={}.hasOwnProperty;r=n("vmWJWrVe"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.className="search-view",t.prototype.viewName="SearchView",t.prototype.initialize=function(){return n.e(26).then((e=this,function(t){var r;return r=n("T5iD0AP7").Search,e.mount(r)}).bind(null,n)).catch(n.oe);var e},t.prototype.getMountNode=function(){return this.$el.get(0)},t.prototype.mount=function(e){return this.mountReact(this.getMountNode(),e,null,{redux:!0,router:!0})},t.prototype.remove=function(){return this.unmountReact(this.getMountNode()),t.__super__.remove.apply(this,arguments)},t}()},IzLnXsUL:function(e,t,n){var r,o,i,s,a,c,l,u,p,d={}.hasOwnProperty;c=n("a+N5u/Cl"),p=n("hxiM8Hy+"),r=n("q1z7EYOi"),o=n("bZr3G77e"),a=n("ymFCWmUp"),u=n("sa1Ed382"),l=n("HDJEOtNh").getRoleScopeByOrgId,i=n("odY26VIi"),s=n("0FRv5rrl"),n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r.Model),t.prototype.defaults={activeTab:"private",selectedIndex:-1},t.prototype.initialize=function(e){return this.organizationsCollection=e.organizationsCollection,this.projectsCollection=e.projectsCollection,this.cacheGroupRooms=null,this.setEnabledTabs(["private","project","group"])},t.prototype.isTabEnable=function(e){var t,n;return!("function"!=typeof(t={private:function(){return!0},project:function(){return u.applications.checkIsAppOnline("groupchat")},group:(n=this,function(){return!!n.organizationsCollection.length})})[e]||!t[e]())&&e},t.prototype.getFlattenResultRooms=function(){var e;return e=this.get("resultRooms"),c.chain(e).map(function(e){return e[0],e[1]}).flatten().value()},t.prototype.getActiveTab=function(){return this.get("activeTab")},t.prototype.getEnabledTabs=function(){return this.get("enabledTabs")},t.prototype.getSearchQuery=function(){return this.get("searchQuery")},t.prototype.getSelectedIndex=function(){return this.get("selectedIndex")},t.prototype.getTargetRoom=function(e){var t,n,r,o;switch(t=this.getActiveTab(),r=c.union(this.get("visibleRooms"),this.get("hiddenRooms")),o=c.findWhere(r,{_id:e}),t){case"group":n={avatarUrl:o.logo,channelType:"groups",logo:o.logo};break;case"private":n={avatarUrl:o.avatarUrl,channelType:"users",logo:o.avatarUrl};break;case"project":n={avatarUrl:o.logo,channelType:"projects",logo:o.logo}}return o.isPlanOverdue||"project"===t&&!o.isGroupChatEnabled?null:c.extend({},o,n)},t.prototype.getRooms=function(){var e,t,n,r,o;return(null!=(r=this.getSearchQuery())?r.length:void 0)>0?t=this.searchRooms():(e=this.getActiveTab(),t=("function"==typeof(n={group:(o=this,function(){return o.getGroupedGroupRooms()}),private:function(e){return function(){return e.getGroupedPrivateRooms()}}(this),project:function(e){return function(){return e.getGroupedProjectRooms()}}(this)})[e]?n[e]():void 0)||[]),this.set("resultRooms",t,{silent:!0}),t},t.prototype.getValidGroupRooms=function(e,t){return c.chain(t).map(function(t){var n,r;return r=t[0],n=t[1],[r,e.filter(n)]}).filter(function(e){var t;return e[0],0!==(null!=(t=e[1])?t.length:void 0)}).value()},t.prototype.getGroupedGroupRooms=function(){var e,t;return t=this.get("visibleRooms"),e=this.organizationsCollection.chain().map(function(e){return[e.get("name"),function(t){return t._organizationId===e.get("_id")}]}).value(),this.getValidGroupRooms(t,e)},t.prototype.getGroupedPrivateRooms=function(){var e,t,n,r;return r=this.get("visibleRooms"),t=[[tb_i18n.get("chat.room.new.private.recent"),function(e){return e.isRecent}]],n=[[tb_i18n.get("chat.room.new.private.recommend"),function(e){return e.isRecommend}]],e=c.union(t,n),this.getValidGroupRooms(r,e)},t.prototype.getGroupedProjectRooms=function(){var e,t,n,r,o;return o=this.get("visibleRooms"),t=[[tb_i18n.get("flagged.projects"),function(e){return e.isStar}]],n=[[tb_i18n.get("my.projects"),function(e){return l(e._organizationId)<-1&&e.roleScope>=0}]],r=this.organizationsCollection.chain().map(function(e){return[e.get("name"),function(t){return t._organizationId===e.get("_id")&&t.roleScope>=0}]}).value(),e=c.union(t,n,r),this.getValidGroupRooms(o,e)},t.prototype.getLoading=function(){return this.get("loading")},t.prototype.readRooms=function(){var e,t,n;return this.setLoading(!0),this.unset("hiddenRooms",{silent:!0}),this.unset("visibleRooms",{silent:!0}),e=this.getActiveTab(),null!=(t={group:(n=this,function(){return n.readGroupRooms()}),private:function(e){return function(){return e.readPrivateRooms()}}(this),project:function(e){return function(){return e.readProjectRooms()}}(this)})[e]?t[e]().then(function(e){return function(){return e.setLoading(!1)}}(this)).catch(function(e){return function(t){return e.setLoading(!1)}}(this)):this.setLoading(!1)},t.prototype.readGroupRooms=function(){return this.cacheGroupRooms?(this.setVisibleRooms(this.cacheGroupRooms),Promise.resolve()):o.get("groups",{cache:!1}).then((e=this,function(t){var n;if("group"===e.getActiveTab())return n=t.map(function(e){var t;return t=new s(e.organization,{bindByMatrix:!1}),Object.assign({},e,{isPlanOverdue:!t.payment.isActive})}),e.cacheGroupRooms=n,e.setVisibleRooms(n)}));var e},t.prototype.readPrivateRooms=function(){var e,t,n;return e=function(e,t){var n;return n=e.filter(function(e){return e._id!==u.user.id}),t?n.map(function(e){return c.extend({},e,t)}):n},this.loadHiddenRooms=i.resolveFetch(0,{url:"projects/members"}).then((n=this,function(t){return t=e(t.toJSON()),n.setHiddenRooms(t)})),t=o.get("rooms/recent-users",{expireCache:{namespace:"chat_room_recent_users",expire:240}}).then(function(t){return e(t,{isRecent:!0})}).then(function(e){return function(t){if("private"===e.getActiveTab())return e.setUnionVisibleRooms(t)}}(this)),o.get("rooms/recommend-users",{expireCache:{namespace:"chat_room_recommend_users",expire:3600}}).then(function(t){return e(t,{isRecommend:!0})}).then(function(e){return function(n){if("private"===e.getActiveTab())return t.then(function(){return e.setUnionVisibleRooms(c.take(n,70))})}}(this))},t.prototype.readProjectRooms=function(){return new Promise((e=this,function(t,n){var r;return r=e.projectsCollection.chain().filter(function(e){return e.isJoined()&&!e.get("isArchived")}).forEach(function(e){return e.set({isGroupChatEnabled:e.isAppEnabled("groupchat"),isPlanOverdue:!e.payment.isActive},{silent:!0})}).map(function(e){return c.extend(e.toJSON(),{roleScope:e.getRoleScope()})}).value(),e.setVisibleRooms(r),t()}));var e},t.prototype.searchRooms=function(){var e,t,n,r;return e=this.getActiveTab(),n=this.getSearchQuery(),("function"==typeof(t={group:(r=this,function(){return r.searchGroupRooms(n)}),private:function(e){return function(){return e.searchPrivateRooms(n)}}(this),project:function(e){return function(){return e.searchProjectRooms(n)}}(this)})[e]?t[e]():void 0)||[]},t.prototype.getValidSearchResult=function(e,t){var n;return(n=a.objectsFilter(e,t)).length>0&&[[null,n]]},t.prototype.searchGroupRooms=function(e){var t;return t=this.get("visibleRooms"),this.getValidSearchResult(t,e)},t.prototype.searchPrivateRooms=function(e){var t,n,r,o,i;return t=this.get("hiddenRooms"),o=this.get("visibleRooms"),r=p(t,o,"_id"),(n=this.getValidSearchResult(r,e))||this.get("hiddenRooms")||!this.loadHiddenRooms||(this.setLoading(!0,{silent:!0}),this.loadHiddenRooms.then((i=this,function(){if(i.setLoading(!1),i.getSearchQuery()===e)return i.trigger("change:searchQuery")}))),n},t.prototype.searchProjectRooms=function(e){var t;return t=this.get("visibleRooms"),this.getValidSearchResult(t,e)},t.prototype.setActiveTab=function(e){var t,n;return n=this.get("enabledTabs"),t=c.include(n,e)?e:n[0],this.unset("searchQuery",{silent:!0}),this.set("activeTab",t)},t.prototype.setEnabledTabs=function(e){var t,n;return t=e.map((n=this,function(e){return n.isTabEnable(e)})).filter(function(e){return e}),this.set("enabledTabs",t)},t.prototype.setHiddenRooms=function(e){return this.set("hiddenRooms",e)},t.prototype.setUnionVisibleRooms=function(e){var t;return t=this.get("visibleRooms"),this.setVisibleRooms(p(t,e,"_id"))},t.prototype.setVisibleRooms=function(e){return this.set("visibleRooms",e)},t.prototype.setLoading=function(e,t){return this.set("loading",e,t)},t.prototype.setSearchQuery=function(e){return this.set("searchQuery",e)},t.prototype.setPreviousSelectedIndex=function(){var e,t,n;return 0===(e=this.getFlattenResultRooms().length)?this.resetSelectedIndex():(t=(n=this.getSelectedIndex())<=0?e-1:n-1,this.set("selectedIndex",t))},t.prototype.setNextSelectedIndex=function(){var e,t,n;return 0===(e=this.getFlattenResultRooms().length)?this.resetSelectedIndex():(t=(n=this.getSelectedIndex())>=e-1?0:n+1,this.set("selectedIndex",t))},t.prototype.resetSelectedIndex=function(){return this.set("selectedIndex",-1,{silent:!0})},t}()},Izk6vNZO:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("3+qSntWu"),l=function(e){var t=e.className,n=e.kind,o=e.size,s=e.fixedWidth,l=e.muted,u=e.disabled,p=e.locked,d=r.g(e,["className","kind","size","fixedWidth","muted","disabled","locked"]),h=c["status-label"],m=a()(t,h,n,o,{"fixed-width":s,muted:l,disabled:u,locked:p});return i.a.createElement("span",r.a({},d,{className:m,"data-role":"status-label"}),i.a.createElement("span",{className:"text"},e.title))};l.defaultProps={size:"middle"}},"J+xPrmJ1":function(e,t,n){var r,o,i={}.hasOwnProperty;o=n("vmWJWrVe"),r=n("dNxFYq8c").DashboardModal,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="DashboardModalContainer",t.prototype.tagName="div",t.prototype.className="dashboard-modal-container",t.prototype.initialize=function(e){return this.requestReactView(this.el,r,{},{redux:!0})},t}()},"J/O+sWSp":function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty,p=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};l=n("a+N5u/Cl"),r=n("N4+akAv+"),i=n("bSSE+uWj"),s=n("YdqH4v7N"),c=n("vmWJWrVe"),a=n("ymFCWmUp"),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,c),t.prototype.viewName="MemberSelectorView",t.prototype.className="member-selector-view",t.prototype.popoverTitle="Menu",t.prototype.width=200,t.prototype.events={"click .one":"toggleMember","input .filter-input":"onchange","click .submit-handler":"submit"},t.prototype.initialize=function(e){var n;if(null==e&&(e={}),e.members||e.selectCallback)return this.resident=e.resident||[],this.excludes=e.excludes||[],this.noAssign=e.noAssign,this.selected=e.selected||[],this.selectCallback=e.selectCallback,this.searchPlaceholder=e.searchPlaceholder,this.members=l.filter(e.members,(n=this,function(e){var t;return e.isMember=!0,t=e._id,p.call(n.excludes,t)<0})),this.render(),t.__super__.initialize.apply(this,arguments),this},t.prototype.render=function(){var e;return this.$el.html(r({searchPlaceholder:this.searchPlaceholder||tb_i18n.get("member.menu.search")})),this.$list=this.$("ul"),e=this.$("input"),this.renderMembers(this.assembleAll()),setTimeout(function(){return e.focus()},100),this},t.prototype.renderMembers=function(e){return this.$list.html(i(e)),this.refreshSelected(),this},t.prototype.refreshSelected=function(){var e;return this.$(".member-item").removeClass("selected"),this.$(".member-item").each((e=this,function(t,n){var r,o;if(o=(r=$(n)).data("id"),p.call(e.selected,o)>=0||p.call(e.resident,o)>=0)return r.addClass("selected")})),this},t.prototype.assembleAll=function(){var e,t;return e=[],this.noAssign&&e.push({isNoAssign:!0}),this.members.slice(0).sort((t=this,function(e,n){var r,o,i,s,a,c;return o=e._id,r=p.call(t.selected,o)>=0||(i=e._id,p.call(t.resident,i)>=0)?0:1,s=n._id,r-(c=p.call(t.selected,s)>=0||(a=n._id,p.call(t.resident,a)>=0)?0:1)?r-c:e.pinyi>n.pinyi?1:e.pinyi<n.pinyi?-1:0})).map(function(t){return e.push(t)}),e},t.prototype.toggleMember=function(e){var t;return t=$(e.currentTarget).data("id"),this.selectSingleMember(t),this},t.prototype.selectSingleMember=function(e){return this.selected=[e],this.$("button").removeAttr("disabled"),this.refreshSelected(),this},t.prototype.submit=function(e){if(e.preventDefault(),this.selected)return"function"==typeof this.selectCallback&&this.selectCallback(this.selected),this},t.prototype.onchange=function(e){var t;return e.preventDefault(),(t=$(e.currentTarget).val().trim().toLowerCase())?(this.query=t,this.renderMembers(a.objectsFilter(this.members,this.query))):this.renderMembers(this.assembleAll()),this},t}(),l.extend(o.prototype,s),e.exports=o},J13T0k73:function(e,t,n){"use strict";n.r(t),n.d(t,"monitorPrintStatus",function(){return a});var r=n("ctsD9mWH"),o=n("SMR95uLj"),i=n("sa1Ed382"),s=function(e){return r.store.dispatch(Object(o.b)(e))},a=function(){var e=i.ua.getBrowser();"webkit"===i.ua.getEngine().name.toLowerCase()&&("chrome"!==e.name.toLowerCase()||(0|e.major)<=63)?window.matchMedia("print").addListener(function(e){s(e.matches)}):(window.addEventListener("beforeprint",function(){return s(!0)}),window.addEventListener("afterprint",function(){return s(!1)}))}},J4aergI2:function(e,t){e.exports=function(e){return'<h4 class="title">'+tb_i18n.get("markdown.helper.syntax")+'</h4><div class="syntax-content clearfix"> <div class="span4"> <p><span class="syntax"># </span>'+tb_i18n.get("markdown.helper.H1")+'</p> <p><span class="syntax">## </span>'+tb_i18n.get("markdown.helper.H2")+'</p> <p><span class="syntax">### </span>'+tb_i18n.get("markdown.helper.H3")+'</p> <p><span class="syntax">#### </span>'+tb_i18n.get("markdown.helper.H4")+'</p> <p><span class="syntax">*</span>'+tb_i18n.get("markdown.helper.em")+'<span class="syntax">*</span></p> <p><span class="syntax">**</span>'+tb_i18n.get("markdown.helper.strong")+'<span class="syntax">**</span></p> </div> <div class="span4"> <p><span class="syntax">___</span>'+tb_i18n.get("markdown.helper.hr")+'</p> <p><span class="syntax">+ </span>'+tb_i18n.get("markdown.helper.ul1")+'</p> <p><span class="syntax">+ </span>'+tb_i18n.get("markdown.helper.ul2")+'</p> <p><span class="syntax">1. </span>'+tb_i18n.get("markdown.helper.ol1")+'</p> <p><span class="syntax">2. </span>'+tb_i18n.get("markdown.helper.ol2")+'</p> <p><span class="syntax">3. </span>'+tb_i18n.get("markdown.helper.ol3")+'</p> </div> <div class="span4"> <p><span class="syntax">&gt; </span>'+tb_i18n.get("markdown.helper.blockquote")+'</p> <p><span class="syntax">[</span>'+tb_i18n.get("markdown.helper.A")+'<span class="syntax">](</span>url.cn<span class="syntax">)</span></p> <p><span class="syntax">![</span>'+tb_i18n.get("markdown.helper.img")+'<span class="syntax">](</span>url.cn/img.png<span class="syntax">)</span></p> <p><span class="syntax">`</span>'+tb_i18n.get("markdown.helper.code")+'<span class="syntax">`</span></p> <p><span class="syntax">``` </span>'+tb_i18n.get("markdown.helper.pre")+'<span class="syntax"> ```</span></p> <p>'+tb_i18n.get("markdown.helper.indentation")+'<span class="syntax">'+tb_i18n.get("markdown.helper.blank.spaces")+"</span>"+tb_i18n.get("markdown.helper.pre")+'</p> </div></div><h4 class="title">'+tb_i18n.get("markdown.helper.preview")+" <small>"+tb_i18n.get("markdown.helper.try")+'</small></h4><div class="preview-content clearfix"> <div class="span6"> <div class="markdown-try"> <textarea class="markdown-textarea" data-gta="event" data-label="try markdown" placeholder="'+tb_i18n.get("markdown.helper.placeholder")+'..."></textarea> </div> </div> <div class="span6"> <div class="markdown-preview"></div> </div></div>'}},J8c1v50A:function(e,t,n){e.exports={"task-add-subtask":"task-add-subtask__udqZ","task-add-subtask__inner":"task-add-subtask__inner__3BkO"}},JDFLms7U:function(e,t,n){},JDU1H68K:function(e,t,n){var r,o,i,s,a,c=function(e,t){return function(){return e.apply(t,arguments)}},l={}.hasOwnProperty;a=n("a+N5u/Cl"),s=n("vmWJWrVe"),o=n("wd/RKGTj"),i=n("qKYkuTVR"),r=n("UAKlytna"),e.exports=function(e){function t(){return this.endOfWeekExclusive=c(this.endOfWeekExclusive,this),this.startOfWeekInclusive=c(this.startOfWeekInclusive,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="WeekSelectorView",t.prototype.className="week-selector-view",t.prototype.events={"click .switch-handler":"switchWeek"},t.prototype.initialize=function(e){return this.options=e,this.reset(),this},t.prototype.reset=function(){return this.startOfWeek=o().startOf("week"),this.endOfWeek=o().endOf("week"),this.weeksList=[],this.index=0,this.generateWeeks().renderBasic(),this},t.prototype.renderBasic=function(){var e,t;return e=a.find(this.weeksList,(t=this,function(e){return e._id===t.index})),this.$el.html(r({weekString:e.title})),this},t.prototype.generateWeeks=function(){var e,t,n;for(n=0;n<26;)(t=o()).subtract(n,"weeks"),e=this.dateDataConstructor(t,n),n++,e.startDate.valueOf()<o(this.options.createdDate).valueOf()&&(n=26),this.weeksList.push(e);for(;n<52;)(t=o()).add(n-25,"weeks"),e=this.dateDataConstructor(t,n),n++,this.weeksList.unshift(e);return this},t.prototype.dateDataConstructor=function(e,t){var n,r,o;return r=e.clone().startOf("week"),n=e.clone().endOf("week"),o=e.format("wo"),{_id:t,title:r.format("MM.DD")+" - "+n.format("MM.DD")+" ("+o+")",startDate:r,endDate:n}},t.prototype.switchWeek=function(e){var t,n,r,o;if(n="weekSelectorPopover",!(t=$(e.currentTarget)).data(n))return t.data(n,!0),null!=(r=this.WeekSelectorPopover)&&r.remove(),this.WeekSelectorPopover=this.requestSubView(i,{$toggler:t,width:240,searchPlaceholder:tb_i18n.get("week.selector.search"),dataList:this.weeksList,selected:this.index,select:(o=this,function(e){var t,n;return o.index=e,n=a.find(o.weeksList,function(t){return t._id===e}),o.startOfWeek=n.startDate,o.endOfWeek=n.endDate,o.renderBasic(),"function"==typeof(t=o.options).onChange?t.onChange():void 0})}).show(),this},t.prototype.startOfWeekInclusive=function(){return this.startOfWeek.toISOString()},t.prototype.endOfWeekExclusive=function(){return this.endOfWeek.clone().add(1,"day").startOf("day").toISOString()},t}()},JEopcXwS:function(e,t,n){var r,o,i,s;i=n("a+N5u/Cl"),s=n("sa1Ed382"),r=n("bZr3G77e"),o=function(){function e(){this._noticesTimer=null}return e.prototype._noticesPollingLooper=function(){return r.get("notices/me",{silentError:!0}).then(function(e){return e.notices.forEach(function(e){return s.gta.event(Object.assign({action:"receive tbrobot message",userkey:s.user.id},null!=e._id?{documentid:e._id}:{},null!=e.category?{category:e.category}:{}))})}).catch((e=this,function(){return e.noticesPollingStop()}));var e},e.prototype.noticesPollingStart=function(){var e;if(!this._noticesTimer)return i.delay((e=this,function(){return e._noticesPollingLooper()}),6e4),this._noticesTimer=window.setInterval(function(e){return function(){return e._noticesPollingLooper()}}(this),18e5)},e.prototype.noticesPollingStop=function(){if(this._noticesTimer)return window.clearInterval(this._noticesTimer),this._noticesTimer=null},e}(),e.exports=new o},JHPidlw6:function(e,t,n){"use strict";var r,o="function"==typeof window.setImmediate&&/native code/.test(window.setImmediate.toString()),i="undefined"!=typeof MessageChannel&&/native code/.test(MessageChannel.toString()),s=navigator.userAgent.indexOf("Edge")>-1,a=function(){if(o)return i?function(e){var t=new MessageChannel,n=t.port2;t.port1.onmessage=function(){try{e()}catch(t){console.error(t)}},n.postMessage(1)}:function(e){return window.setImmediate(function(){try{e()}catch(t){console.error(t)}})}}(),c=function(e){!s&&a?a(e):e()},l=n("x0w+nCUa");n.d(t,"b",function(){return h}),n.d(t,"d",function(){return m}),n.d(t,"c",function(){return f}),n.d(t,"f",function(){return g}),n.d(t,"e",function(){return p}),n.d(t,"g",function(){return d}),n.d(t,"a",function(){return c});var u="undefined"!=typeof window&&window.document&&window.document.createElement,p=function(e){if(void 0===e&&(e=!1),(!r&&0!==r||e)&&u){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),r=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return r};r=p(!0);var d={start:function(e,t){var n=Date.now(),r=function(){Date.now()-n>=t?e():o.id=window.requestAnimationFrame(r)},o={id:window.requestAnimationFrame(r)};return o},cancel:function(e){null!==e&&window.cancelAnimationFrame(e)}},h=function(e,t){void 0===t&&(t=!0);var n={boxSizing:"border-box",direction:"ltr",height:e.height,width:e.width,position:"relative",zIndex:0,WebkitOverflowScrolling:"touch",overflow:"hidden",transition:"box-shadow 200ms ease"};return t&&(n.willChange="transform"),n},m=function(e,t,n,r,o){return n===l.d.Forward?{start:Math.max(0,r-1-Math.floor(t/2)),stop:Math.min(e-1,o+Math.floor(t/2))}:{start:Math.max(0,r-t-Math.floor(t/2)),stop:Math.min(e-1,o+1+Math.floor(t/2))}},f=function(e,t){return e>t?l.d.Forward:l.d.Backward},g=function(e){void 0===e&&(e=!0);var t={};return function(n){var r=n.callback,o=n.indices,i=Object.keys(o),s=!e||i.every(function(e){var t=o[e];return Array.isArray(t)?t.length>0:t>=0}),a=i.length!==Object.keys(t).length||i.some(function(e){var n=t[e],r=o[e];return Array.isArray(r)?n.join(",")!==r.join(","):n!==r});t=o,s&&a&&r(o)}}},JLEQYBrM:function(e,t,n){var r;r=n("GESwhXbR").Toast,e.exports={"import-members":function(e,t){var n,o,i;switch(null==e&&(e={}),n=e.body._organizationId,i=e.status,o="import-members-"+n,t.trigger(o,{status:i}),i){case"success":return r.success(tb_i18n.get("import.excel.members.success"));case"failure":return r.error(tb_i18n.get("import.excel.members.failed"))}},"import-tasks":function(e,t){var n,o,i;switch(null==e&&(e={}),n=e.body._tasklistId,i=e.status,o="import-tasks-"+n,t.trigger(o,{status:i}),i){case"success":return r.success(tb_i18n.get("import.excel.tasks.success"));case"failure":return r.error(tb_i18n.get("import.excel.tasks.failed"))}}}},JLnmqBbR:function(e,t,n){"use strict";n.r(t),n.d(t,"DISDialog",function(){return a});var r=n("mrSGxOB2"),o=n("tLZJUYWX"),i=n("q1tIBJhx"),s=n("GESwhXbR");n("OAW0VITN");var a=function(e){function t(t){var n=e.call(this,t)||this;return n.handleVisibleChange=function(e){n.setState({isOpen:e})},n.handleCheckboxChange=function(e){n.setState({isPermanentHide:e})},n.handleCloseClick=function(){n.setState({isOpen:!1})},n.handleModalHide=function(){n.props.onHide&&n.props.onHide(n.props.organizationId,n.props.userId,n.state.isPermanentHide)},n.state={isOpen:!0,isPermanentHide:!1},n}return r.d(t,e),t.prototype.render=function(){return i.createElement(s.Modal,{className:"dis-dialog__modal",closeable:!1,onHide:this.handleModalHide,onVisibleChange:this.handleVisibleChange,opened:this.state.isOpen,title:null,titleCls:"dis-dialog__modal__head",width:600},i.createElement("span",null,i.createElement("iframe",{className:"dis-dialog__iframe",src:this.props.iframeSrc}),i.createElement("div",{className:"dis-dialog__footer"},i.createElement(s.Checkbox,{checked:this.state.isPermanentHide,className:"dis-dialog__footer__checkbox",label:o.get("do.not.show.this.again"),onChange:this.handleCheckboxChange,size:"small"}),i.createElement(s.Button,{onClick:this.handleCloseClick},o.get("confirm")))))},t}(i.PureComponent)},JMfjhaeN:function(e,t){e.exports=function(e){var t,n,r="<span class='icon icon-menu'></span><span class=\"name\">"+("undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}))(e.name)+"</span>";return e.hasChild&&(r+=" <span class='icon icon-chevron-right'></span>"),r}},JQTltdjs:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<li class="archive ';return(e.permissions.putArchive||e.permissions.del)&&(o+="editable"),o+='" data-id="'+e._id+'" data-type="'+e.boundToObjectType+'"> <div class="archive-wrapper flex-horiz"> <div class="archive-body flex-fill flex-horiz"> <span class="title hinted auto-hint" data-title="'+r(e.subTitle)+'">'+r(e.subTitle)+'</span> <span class="task-id-placeholder flex-static"></span> </div> <div class="archive-handlers flex-static"> <div class="react-time-stamp muted"></div> ',(e.permissions.putArchive||e.permissions.del)&&(o+=' <div class="archive-handler-set"> ',e.permissions.putArchive&&(o+=' <a class="unarchive-handler"> <span class="icon icon-putback"></span> <span class="archived-button archived-cancel">'+tb_i18n.get("archive.list.menu.restore")+"</span> </a> "),o+=" ",e.permissions.del&&(o+=' <a class="remove-handler"> <span class="icon icon-trash"></span> <span class="archived-button archived-delete">'+tb_i18n.get("archive.list.menu.remove.completely")+"</span> </a> "),o+=" </div> "),o+=" </div> </div></li>"}},JRfZZQfI:function(e,t,n){var r,o,i,s,a=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty;i=n("a+N5u/Cl"),n("sa1Ed382"),o=n("CxY0Mkc1"),s=n("QyjeWo4p"),r=n("Atd/KrMo"),e.exports=function(e){function t(){return this.handleSubmit=a(this.handleSubmit,this),this.handleClose=a(this.handleClose,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="GridSelector",t.prototype.className="obd-grid-selector",t.prototype.initialize=function(e){return this.options=e,t.__super__.initialize.apply(this,arguments),this.render()},t.prototype.render=function(){return n.e(19).then((e=this,function(t){var r;return r=n("UKiQiwGY").GridSelector,e.requestReactView(e.el,r,{templateScene:e.options.templateScene,primaryScene:e.options.primaryScene,onClose:e.handleClose,onSubmit:e.handleSubmit})}).bind(null,n)).catch(n.oe);var e},t.prototype.handleClose=function(){var e;return i.each(this.options.titleCrossActions,(e=this,function(t){return e.sendAction(t)})),this.remove()},t.prototype.handleSubmit=function(e){var t,n;return t=this.options.buttons[0].actions,i.each(t,(n=this,function(t){return n.sendAction(t,{copyList:e,"selected-count":e.length})})),this.remove()},t.prototype.normalizeOptions=function(){var e,t,n;return null==(e=this.options).titleCrossActions&&(e.titleCrossActions=[]),n=o.parse(window.location.href),t=s.parse(n.query),this.options.primaryScene=t.primaryScene,this.options.templateScene=t.templateScene||"org",this},t}()},JUwcT2H1:function(e,t,n){var r,o={}.hasOwnProperty;r=n("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="pastEventsGroup",t.prototype.urlRoot="",t.prototype.idAttribute="month",t.prototype.defaults={month:"",count:0},t}()},Ja8CZdRo:function(e,t,n){e.exports={"item-wrap":"item-wrap__1rSc",item:"item__3c6a"}},JdTkGwJL:function(e,t,n){e.exports={"task-updated":"task-updated__2WFH","task-updated__inner":"task-updated__inner__3tDH"}},JfRUaBiN:function(e,t,n){e.exports=n.p+"images/notification-mail.832c3d53.svg"},Jh8CjTGF:function(e,t){e.exports=function(e){var t='<span class="icon icon-unordered-list-s"></span><span class="flex"> '+tb_i18n.get("subtask")+" ";return e.totalCount>0&&(t+=" <span>&nbsp;&middot;&nbsp;"+(e.doneCount||0)+"/"+e.totalCount+"</span> "),t+="</span>"}},JjQg5B8J:function(e,t,n){"use strict";var r=n("+aDUiIwB");n.d(t,"ProjectGridAddCard",function(){return r.a});var o=n("K86ZmSX7");n.o(o,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return o.AbstractPortal}),n.o(o,"ProjectGridCard")&&n.d(t,"ProjectGridCard",function(){return o.ProjectGridCard}),n.o(o,"ProjectListAddCard")&&n.d(t,"ProjectListAddCard",function(){return o.ProjectListAddCard}),n.o(o,"ProjectListCard")&&n.d(t,"ProjectListCard",function(){return o.ProjectListCard}),n.o(o,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return o.getSuspendedMsg}),n.o(o,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return o.verifyProjectPayment})},JmQLlYsl:function(e,t,n){e.exports=n.p+"images/d_miao@2x.bdfbda8d.png"},Jodm6imw:function(e,t,n){e.exports={"top-bar":"top-bar__19BE","top-bar__left":"top-bar__left__TdMl","top-bar__right":"top-bar__right__3C8X",bold:"bold__L8XM","text-center":"text-center__kCRQ","save-as-dropdown":"save-as-dropdown__7lS8","share-dropdown":"share-dropdown__287j","more-dropdown":"more-dropdown__3Gr0","delete-member-dropdown":"delete-member-dropdown__o7rn",modal:"modal__Ehsk","modal-body":"modal-body__2Qd2",star:"star__2S0h","star-stroke":"star-stroke__185I"}},Jp0nKcyE:function(e,t,n){e.exports={"task-progress":"task-progress__2jT5","task-progress__inner":"task-progress__inner__EYai"}},JpNmON5i:function(e,t,n){e.exports=n.p+"images/f_hufen@2x.3a68c91f.png"},JqhHIqqo:function(e,t){e.exports=function(e){return'<div class="work-version-content"> <div class="work-version-info"> <span class="work-version-point icon"></span> <div class="work-version-description"> <p class="work-version-description-display"></p> <textarea class="work-version-description-input" placeholder="'+tb_i18n.get("work.versions.note")+'"></textarea> </div> <div class="work-version-handler"></div> </div></div><div class="work-version-handler-set clearfix"> <a class="work-version-handler-save btn btn-primary" data-gta="event" data-label="save work version">'+tb_i18n.get("save")+'</a> <a class="work-version-handler-cancel">'+tb_i18n.get("cancel")+"</a></div>"}},JtaVAksQ:function(e,t,n){e.exports=n.p+"images/d_kun@2x.c7add1ba.png"},JylbWux3:function(e,t,n){e.exports=n.p+"images/system-message-no-result.e52dd6b2.png"},"K1g1+kw9":function(e,t){e.exports=function(e){return"<h3>"+tb_i18n.get("event")+' ・ <span class="events-count">0</span></h3>'}},K1mAXBMn:function(e,t,n){var r;r=n("q1z7EYOi"),e.exports=Object.create(r.Events)},K49tK4Jd:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";return e.total&&(o+=' <span class="icon icon-lock flex flex-center flex-vcenter"></span> <p>'+r(tb_i18n.get("subtasks.invisible.hint",e.total,e.undo))+"</p>"),o}},K63xFwJJ:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";if(e.groupBy){o+=" ";var i=e.eventsList;if(i)for(var s,a=-1,c=i.length-1;a<c;){if(o+=' <ul class="event-date-wrap" data-date="'+(s=i[a+=1]).id+'"> <span class="event-date">'+s.title+" ",e.showGroupCount&&(o+=' <span class="group-count"> · '+s.count+"</span> "),o+=" </span> ",s.events.length){o+=" ";var l=s.events;if(l)for(var u=-1,p=l.length-1;u<p;){if(o+='  <li class="event ',(g=l[u+=1]).showInvolved&&(o+="show-members"),o+='" data-id="'+g._id+'" data-type="event" data-gta="{action: \'open detail\', type: \'event\'}"> <div class="event-time"> <time>'+g.startDateString+"</time> ",g.endDateString&&(o+=" <span> - </span> <time>"+g.endDateString+"</time> "),o+=' </div> <div class="event-content"> <span class="event-title">'+r(g.title)+"</span> ",g.project&&g.project.name&&g.project._id&&(o+=' <a class="event-tag" data-id="'+g.project._id+'"> '+r(g.project.name)+" </a> "),o+=" </div> ",g.showInvolved){o+=' <ul class="members-list clearfix"> ';var d=g.involved.slice(0,2);if(d)for(var h=-1,m=d.length-1;h<m;)o+=' <li> <div class="avatar img-circle img-24 hinted" style="background-image:url('+(k=d[h+=1]).avatarUrl+');" data-title="'+r(k.name)+'"></div> </li> ';o+=" ",3==g.involved.length?o+=' <li> <div class="avatar img-circle img-24 hinted" style="background-image:url('+g.involved[2].avatarUrl+');" data-title="'+r(g.involved[2].name)+'"></div> </li> ':g.involved.length>3&&(o+=' <li> <div class="img-circle img-24 hinted" data-title="'+g.involvedString+'">'+g.involved.length+"</div> </li> "),o+=" </ul> "}o+=" </li> "}o+=" "}else o+=' <li class="no-event-placeholder"> <span class="muted">'+tb_i18n.get("events.no.event")+"</span> </li> ";o+=" </ul> "}}else{if(o+=" <ul> ",e.eventsList.length){o+=" ";var f=e.eventsList;if(f)for(var g,v=-1,b=f.length-1;v<b;){if(o+='  <li class="event ',(g=f[v+=1]).showInvolved&&(o+="show-members"),o+='" data-id="'+g._id+'" data-type="event" data-gta="{action: \'open detail\', type: \'event\'}"> <div class="event-time"> <time>'+g.startDateString+"</time> ",g.endDateString&&(o+=" <span> - </span> <time>"+g.endDateString+"</time> "),o+=' </div> <div class="event-content"> <span class="event-title">'+r(g.title)+"</span> ",g.project&&g.project.name&&g.project._id&&(o+=' <a class="event-tag" data-id="'+g.project._id+'"> '+r(g.project.name)+" </a> "),o+=" </div> ",g.showInvolved){o+=' <ul class="members-list clearfix"> ';var y=g.involved.slice(0,2);if(y){h=-1;for(var k,_=y.length-1;h<_;)o+=' <li> <div class="avatar img-circle img-24 hinted" style="background-image:url('+(k=y[h+=1]).avatarUrl+');" data-title="'+r(k.name)+'"></div> </li> '}o+=" ",3==g.involved.length?o+=' <li> <div class="avatar img-circle img-24 hinted" style="background-image:url('+g.involved[2].avatarUrl+');" data-title="'+r(g.involved[2].name)+'"></div> </li> ':g.involved.length>3&&(o+=' <li> <div class="img-circle img-24 hinted" data-title="'+g.involvedString+'">'+g.involved.length+"</div> </li> "),o+=" </ul> "}o+=" </li> "}o+=" "}else o+=' <li class="no-event-placeholder"> <span class="muted">'+tb_i18n.get("events.no.event")+"</span> </li> ";o+=" </ul>"}return o}},K86ZmSX7:function(e,t){},"K9v/P97o":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";if(e.tasks.length){o+=" ";var i=e.tasks;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=' <li class="task-item ',(s=i[a+=1]).isSelected&&(o+="active"),o+='" data-id="'+s._id+'" data-gta="{action: \'toggle task choose\', segment: \'Handover Task\'}"> <div class="check-box non-checkable"></div> <div class="task-content"> <span>'+r(s.content)+"</span> ",s.task&&(o+=' <div class="subtask-info muted">'+r(tb_i18n.get("task.list.belong.to",s.task.content))+"</div> "),o+=" </div> ",!s.isDone&&s.dueDate&&(o+=' <div class="task-duedate '+s.duedateClass+'"> '+(s.dateTimeString||"")+" </div> "),o+=" </li> "}else o+=' <li class="task-placeholder placeholder muted"> <span class="icon icon-board"></span><br>'+tb_i18n.get("task.placeholder")+" </li>";return o}},KAS2OY82:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("tLZJUYWX"),o=(n("s0r7VfKc"),n("4c1CS0b3"),n("cY+V28dO")),i=n("BsTK5jZO");n("3nOnSD6h"),n("svve/QA+"),n("u/LJYZ+h");function s(e,t){var n=function(e,t){return e&&e._id!==t?r.get("project.tag.permission.inherit",e.name):""}(e.projecttag,t);switch(e.subjectType){case o.b.organizationRole:return e.role?i.InvolverInput.roleAsInvolver(e.role,n):null;case o.b.organizationMember:return e.user?i.InvolverInput.tagMemberAsInvolver(e.user,e._subjectId,n):null;case o.b.teamLeader:return e.team?i.InvolverInput.leaderAsInvolver(e.team,e.user,n):null;case o.b.organizationTeam:return e.organizationTeam?i.InvolverInput.teamAsInvolver(e.organizationTeam):null;case o.b.organizationGroup:return e.organizationGroup?i.InvolverInput.groupAsInvolver(e.organizationGroup):null}}},KAUx9OcZ:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R,D,L,z,A={}.hasOwnProperty;r=n("+2RfZ2TT"),j=n("a+N5u/Cl"),y=n("q1tIBJhx"),D=n("GESwhXbR"),C=D.Toast,w=D.TextButton,v=n("80gYlwjC").Payment,z=n("sa1Ed382"),O=n("tLZJUYWX"),S=n("RLD3BeS/").ToastMessageWithUrl,P=n("2qRnoGmE"),R=n("NtzEC3Pa"),N=n("HDJEOtNh").getRoleScopeByOrgId,E=n("RQ44psah"),l=n("bZr3G77e"),T=n("70UrrKBP").Uploader,L=n("0HK9poFJ"),m=L.OrgStructureAPI,f=L.OrgStructureEventEmitter$,s=n("pOv4eJ7f").Container,b=n("5eNik3+6").PluginLayerManager,I=n("vmWJWrVe"),M=n("OmupbwLD"),d=n("ypWNgh6R"),i=n("9sOPw9dz"),g=n("uGcFUGYs"),h=n("w3F+MP2A"),_=n("Ku9M8L3T"),k=n("F/9QHL9I"),c=n("8rMdUFc+"),u=n("NT8FmA7+"),p=n("1ZlixaTN").MemberProfileForm,o=n("RwGLdX00"),a={en:P.DN_SITE_URL+"/teambition%2Fexcel-templates%2Fimport-org-members-en-b6f11e.xlsx",zh:P.DN_SITE_URL+"/teambition%2Fexcel-templates%2Fimport-org-members-zh-fb92a6.xlsx"},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)A.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,I),t.prototype.viewName="OrganizationStructureView",t.prototype.className="organization-structure-view",t.prototype.initialize=function(e){var t;if(this.organizationModel=e.organizationModel,this.memberUserId=null!=(t=e.memberUserId)?t:null,this.url=e.url,this.organizationModel)return this.render().renderContainer()},t.prototype.render=function(){return this.$el.html(o()),this.$orgStructureLoading=this.$(".org-structure-loading"),this.$orgStructureContainer=this.$(".org-structure-container"),this.$uploadMemberNode=this.$(".upload-member-container"),this.memberProfileFormMountNode=this.$(".member-profile-form-modal").get(0),this},t.prototype.renderContainer=function(){var e,t;return this.container=new s(this.url,m,{retryLeftCount:80,retryTimeout:300}),this.container.setup(this.$orgStructureContainer.get(0)),this.container.style({width:"100%",height:"inherit"}),this.showLoadingIndicator(this.$orgStructureLoading),e=document.getElementById("teambition-web-content"),this.bottomLiftSub$=b.bottomLiftEmitter.subscribe((t=this,function(n){return n?(t.container.style({position:"fixed",zIndex:"1000",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"transparent"}),e.style.zIndex="100",t.dispatchAction({type:"CHANGE_STYLE",payload:[{attribute:"paddingTop",value:"48px"},{attribute:"backgroundColor",value:"transparent"}]})):(t.container.style({width:"100%",height:"inherit"}),e.style.zIndex="auto",t.dispatchAction({type:"CHANGE_STYLE",payload:[{attribute:"paddingTop",value:"0"},{attribute:"backgroundColor",value:"#F5F5F5"}]}))})),this.emitter$=f.subscribe(function(e){return function(t){switch(t.type){case"start":return e.hideLoadingIndicator();case"finish":return e.finish();case"essage":return e.essage(t.payload);case"navigate":return z.router.navigate(t.payload.route,t.payload.options);case"changeRouteHistory":return e.changeRouteHistory(t.payload);case"openTeamDetail":return e.openTeamDetail(t.payload);case"openTeamStructure":return e.openTeamStructure(t.payload);case"openAddGroup":return e.openAddGroup(t.payload);case"openAddMember":return e.openAddMember(t.payload);case"openMemberProfileForm":return e.openMemberProfileForm(t.payload);case"openHandoverTasks":return e.openHandoverTasksModal(t.payload);case"downloadBatchAddMembersExcelTemplate":return e.downloadBatchAddMembersExcelTemplate();case"uploadBatchAddMembersExcelTemplate":return e.uploadBatchAddMembersExcelTemplate();case"downloadBatchUpdateMembersExcelTemplate":return e.downloadBatchUpdateMembersExcelTemplate(t.payload);case"uploadBatchUpdateMembersExcelTemplate":return e.uploadBatchUpdateMembersExcelTemplate();case"dispatchAction":return e.dispatchAction(t.payload.action)}}}(this))},t.prototype.essage=function(e){var t,n,r,o;return n=e.method,r=e.params,j.isString(r[0])&&(o=x[r[0]])?o(this):(t=C[n],j.isFunction(t)?t.apply(C,r):void 0)},t.prototype.changeRouteHistory=function(e){return this.dispatchAction({type:"CHANGE_ROUTE_HISTORY",payload:e})},t.prototype.openAddGroup=function(e){return this.requestSubView(M).open(c,{organizationId:this.organizationModel.id,showOrganization:!1,onConfirmOutside:(t=this,function(e){return t.dispatchAction({type:"CREATE_ORGANIZATION_GROUP_REQUEST",payload:e})})});var t},t.prototype.openTeamDetail=function(e){return this.requestSubView(d,{size:"large",modalPadding:!1,title:O.get("team.detail"),modalClass:"team-member-detail-modal-view fixed"}).open(k,{_teamId:e._teamId,organizationModel:this.organizationModel})},t.prototype.openTeamStructure=function(e){return this.OrderTeamView=this.requestSubView(M).open(_,{organizationId:this.organizationModel.id,onMoveTeam:(t=this,function(e){return t.dispatchAction({type:"ORDER_ORGANIZATION_TEAM_REQUEST",payload:e})})});var t},t.prototype.openAddMember=function(e){var t,n,r,o,i,s;if(t=this.organizationModel.payment,r=this.organizationModel.getRoleScope(),"organization"!==e.targetType||this.tryRenderExcess(t,r))return i="team"===e.targetType?O.get("team.member.add"):e.outerOnly?O.get("organization.member.add.outer"):O.get("organization.member.add"),o="team"===e.targetType?O.get("organization.member"):"",null!=(n=this.orgMemberAddView)&&n.remove(),this.orgMemberAddView=this.requestSubView(M).open(h,{targetType:e.targetType,organizationModel:this.organizationModel,teamId:e.teamId,outerOnly:Boolean(e.outerOnly),title:i,sourceTitle:o,onMemberAddSuccess:(s=this,function(){return s.dispatchAction({type:"FETCH_CURRENT_CATEGORY_MEMBERS_REQUEST",payload:e})})})},t.prototype.openMemberProfileForm=function(e){return this.unmountReact(this.memberProfileFormMountNode),this.requestReactView(this.memberProfileFormMountNode,p,{currentMember:e.currentMember,currentOrganization:e.currentOrganization,initialValues:e.initialValues,onCreatePositionSubmit:(t=this,function(e){return t.dispatchAction({type:"ORG_MEMBER_PROFILE_UPDATE_ORGANIZATION_PROFILES",payload:{positions:e}})}),onCreateStaffTypeSubmit:function(e){return function(t){return e.dispatchAction({type:"ORG_MEMBER_PROFILE_UPDATE_ORGANIZATION_PROFILES",payload:{staffTypes:t}})}}(this),onSubmit:function(e){return function(t){return z.gta.event({action:"save member profile",page:"Member Profile Page"}),e.dispatchAction({type:"ORG_MEMBER_PROFILE_UPDATE_MEMBER_PROFILE",payload:t}),e.unmountReact(e.memberProfileFormMountNode)}}(this)},{redux:!0});var t},t.prototype.openHandoverTasksModal=function(e){return this.requestSubView(d,{size:"large",modalPadding:!1,title:tb_i18n.get("member.handover.tasks.title")}).open(u,{orgId:this.organizationModel.id,userId:e.memberUserId})},t.prototype.downloadBatchAddMembersExcelTemplate=function(){var e,t;return"zh"!==(t=z.user.getLanguage())&&(t="en"),e=a[t],r.fileDownload(e)},t.prototype.uploadBatchAddMembersExcelTemplate=function(){var e,t;return null!=(e=this.uploader)&&e.destroy(),this.uploader=new T({auto:!0,notCheckProjectSizeLimit:!0,accept:".xls,.xlsx,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",pick:{id:this.$uploadMemberNode,multiple:!1},onComplete:(t=this,function(e,n){var r;return r={_organizationId:t.organizationModel.id,downloadUrl:null!=e?e.downloadUrl:void 0},l.post("import/members",r)})}),this.$uploadMemberNode.trigger("click")},t.prototype.downloadBatchUpdateMembersExcelTemplate=function(e){var t,n;switch(e.parentType){case"organization":n="organizations/"+this.organizationModel.id+"/exportmembers";break;case"team":(t=e.teamId)&&(n="organizations/"+this.organizationModel.id+"/exportmembers?_teamId="+t)}if(n)return r.fileDownload(P.API_HOST+"/"+n)},t.prototype.uploadBatchUpdateMembersExcelTemplate=function(){var e,t,n;return t=null,null!=(e=this.uploader)&&e.destroy(),this.uploader=new T({auto:!0,accept:".csv",pick:{id:this.$uploadMemberNode,multiple:!1},onStart:function(e){return t=S.warning({messageTitle:O.get("organization.member.bactched.update.uploading"),urlTitle:O.get("organization.member.bactched.update.upload.cancel"),onClickUrl:function(){return t&&C.close(t),e.abort()}})},onComplete:(n=this,function(e){var r;return C.close(t),r={downloadUrl:e.downloadUrl},l.put("organizations/"+n.organizationModel.id+"/importmembers",r).then(function(e){return C.success(O.get("organization.member.bactched.update.upload.success"))}).catch(function(){return C.error(O.get("organization.member.bactched.update.upload.failure"))})}),onError:function(){return C.error(O.get("organization.member.bactched.update.upload.failure"))}}),this.$uploadMemberNode.trigger("click")},t.prototype.tryRenderExcess=function(e,t){var n,r,o,s;return e.isStrictExceed?(null!=(s=this.$excess)&&s.remove(),t>=1?this.$excess=this.requestSubView(M).open(g,{organizationId:this.organizationModel.id}):(r=O.get("organization.settings.add.member.toplimit"),n=E.pay.orgAddMember(this.organizationModel.id),o=O.get("organization.member.exceed.description",this.organizationModel.payment.memberQuota),this.$excess=this.requestSubView(M).open(i,{title:O.get("organization.member.exceed"),content:o,confirmText:r,confirmHref:n})),!1):(e.isSoftExceed&&R.alert.softExcessMember(this.organizationModel.id,t),!0)},t.prototype.dispatchAction=function(e){return this.container.push(e)},t.prototype.finish=function(){var e,t,n,r;return null!=(e=this.uploader)&&e.destroy(),null!=(t=this.emitter$)&&t.unsubscribe(),null!=(n=this.bottomLiftSub$)&&n.unsubscribe(),null!=(r=this.container)?r.remove():void 0},t.prototype.remove=function(){return this.finish(),t.__super__.remove.apply(this,arguments)},t}(),x={SHOW_MEMBER_COUNT_EXCEED_TOAST:function(e){var t;return t=e.organizationModel.toJSON(),C.success({message:O.get("organization.member.add.success.title"),handlers:y.createElement(w,{color:"blue",onClick:function(){return z.gta.event({action:"add content",type:"organization",control:"payment-status",payment:v.create(t.plan),role:N(t._id),organizationId:t._id,from:"Organization Member",private:!0})}},O.get("organization.member.exceed.upgrade")),description:O.get("organization.member.add.success.desc")})}}},KCOaqNuq:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O=function(e,t){return function(){return e.apply(t,arguments)}},R={}.hasOwnProperty;M=n("a+N5u/Cl"),x=n("sa1Ed382"),f=n("wd/RKGTj"),y=n("XQ5nL9cp"),C=n("HYobN8SQ"),l=n("IssmDVnT").EventSDK,E=n("3eMzznN/"),w=n("HHtVDBJc"),T=n("vmWJWrVe"),n("bZr3G77e"),(P=n("GESwhXbR")).Toast,o=P.DatePicker,S=n("RLD3BeS/").ToastMessageWithUrl,c=n("1fU+e3+7"),m=n("odY26VIi"),b=n("nL4olqOP"),a=n("gLdDAp90"),v=n("rZWLBB2n"),h=n("vNWLjLJF"),n("qKYkuTVR"),g=n("QaVTsF4c"),s=n("W/K/FHRR"),u=n("tGAhh72B"),i=n("ZISfHezt"),r=n("tBjKPM/k"),p=n("hXgEMHUQ"),k=n("UDY5v2hn"),_=n("e+AphIH/"),I=n("+h7VEZku").VisibilityController,d=n("hDy2W4+o").LocationSelector,N=n("gh8QIhMV").throwError,j=function(e){return function(t,n,r){if(!e)return t(n,r)}},e.exports=function(e){function t(){return this.setInvolvers=O(this.setInvolvers,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)R.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,T),t.prototype.viewName="EventCreatorView",t.prototype.className="event-creator-view creator-view modal-dialog",t.prototype.saveAttrs=["_organizationId","_projectId","_creatorId","_scenariofieldconfigId","title","location","startDate","endDate","isAllDay","allDayStart","allDayEnd","involveMembers","involveTeams","involveGroups","involveAllProjectMembers","involvers","visible","recurrence","reminders","tagIds","content","customfields"],t.prototype.events={"input .event-title-input":"cacheEvent","keydown .event-title-input":"quickSubmit","click .event-creator-allday-handler":"switchAllDay","click .event-creator-repeat":"showRepeatSelector","click .event-creator-remind":"showRemindSelector","click .submit-handler":"submit"},t.prototype.initialize=function(e){var t,n;return null==e&&(e={}),this.options=e,this.getInheritedInfo=e.getInheritedInfo,this.isStatic=e.isStatic,this.isWorkspace=e.isWorkspace,this.projectsCollection=b.get(0),e._projectId?this.projectModel=this.projectsCollection.get(e._projectId):this.projectModel=void 0,this._organizationId=this.options._organizationId,this.cacheProxy=j(!!this.getInheritedInfo),this.localCache=C.namespace("temp").namespace("event_creator"),this.localContentCache=C.namespace("temp").namespace("event_creator_content"),this.localCacheId="event_creator_"+((null!=(t=this.projectModel)?t.id:void 0)||this._organizationId)+"_"+x.user.id,this.localContentDatas={},this.eventScenarioFieldConfig=null,this.requiredScenarioFieldsValidated=!0,this.load().then((n=this,function(){return n.reset("isInit"),n.renderBasic(),n.renderEventFieldConfig(),n.renderLocation(),n.isIndieEvent()&&n.renderScenarioInfos(),n.renderContent(),n.renderHandler(),n.renderRepeat(),n.renderRemind(),n.conflictDetect=n.initConflictDetect(),n.conflictDetect.asyncRender(),n.renderInvolve(),n.renderVisible()})).catch(function(e){return N(e),this.close()})},t.prototype.load=function(){var e;return this.isIndieEvent()?Promise.resolve():m.find(this.projectModel.id)?Promise.resolve():new Promise((e=this,function(t,n){return m.fetch(e.projectModel.id,{boundToObjectType:"project",success:t,error:n})}))},t.prototype.reset=function(e){var t,n,r,o,i,s;return this.stopListening(),t=this.cacheProxy(this.localCache,this.localCacheId)||{},this.lastSetTime=t.lastSetTime,n=M.extend({_creatorId:x.user.id,involveMembers:[x.user.id],involvers:[x.user.toJSON()],content:"",title:"",location:"",visible:this.getEventVisibility(),allData:!1,recurrence:null,reminders:[],startDate:null,endDate:null},M.omit(t,"lastSetTime")),o={_projectId:null!=(i=this.projectModel)?i.get("_id"):void 0},(this.options.startDate||this.options.endDate)&&(this.lastSetTime=(new Date).toISOString(),this.options.startDate&&(o.startDate=this.options.startDate),this.options.endDate&&(o.endDate=this.options.endDate)),this.options.hasOwnProperty("isAllDay")&&(o.isAllDay=this.options.isAllDay),e||(o.visible=this.getEventVisibility()),r=Object.assign(n,o),e&&this._creatorId&&(r._creatorId=this._creatorId,r.involveMembers.push(this._creatorId)),this.isIndieEvent()&&(r._organizationId=this._organizationId),this.isIndieEvent()?this.membersCollection=new m(r.involvers):(r.involvers||(r.involvers=[]),this.membersCollection=m.find(this.projectModel.id),r.involveMembers=M.intersection(r.involveMembers,this.membersCollection.pluck("_userId"))),r.startDate||(r.startDate=f().startOf("hour").toISOString()),r.endDate||(s=f(r.startDate),r.endDate=s.add(1,"hour").toISOString()),this.eventModel=new c(r),this.eventModel.isRecurrenceEventInstance()&&(this.rruleSet=this.eventModel.getRRuleSet()),this.rruleSet||(this.rruleSet=new y.RRuleSet,this.rruleSet.rrule(new y({freq:y.WEEKLY,dtstart:new Date(this.eventModel.get("startDate"))}))),this.setTime(),this.listen(),this},t.prototype.listen=function(){var e;return this.listenTo(this.eventModel,"change",this.cacheEvent),this.listenTo(this.eventModel,{"change:content":this.cacheEventContent}),this.listenTo(this.eventModel,"change:title",this.validateSubmit),this.listenTo(this.eventModel,"change:visible",this.renderVisible),this.listenTo(this.eventModel,"change:startDate change:endDate change:isAllDay",this.renderHandler),this.listenTo(this.eventModel,"change:recurrence",this.renderRepeat),this.listenTo(this.eventModel,"change:reminders",this.renderRemind),"change:startDate change:endDate change:isAllDay change:recurrence change:involveMembers change:involveGroups change:involveTeams change:involveAllProjectMembers",this.listenTo(this.eventModel,"change:startDate change:endDate change:isAllDay change:recurrence change:involveMembers change:involveGroups change:involveTeams change:involveAllProjectMembers",(e=this,function(){var t;return null!=(t=e.conflictDetect)?t.asyncRender():void 0})),this},t.prototype.renderBasic=function(){var e;return this.$el.html(r({hasOldRecurrence:null!=(e=this.options.eventModel)?e.isRecurrenceEventInstance():void 0,isStatic:this.isStatic})),this.$eventFieldConfigWrapper=this.$(".event-field-config-wrapper"),this.$location=this.$(".location-selector-wrapper"),this.$handlerWrap=this.$(".date-time-wrap"),this.$repeatWrap=this.$(".repeat-wrap"),this.$remindWrap=this.$(".remind-wrap"),this.$conflictDetectEl=this.$(".event-conflict-detect"),this.$involveWrap=this.$(".creator-involve"),this.$titleInput=this.$(".event-title-input"),this.$visibleSwitchers=this.$(".creator-visible"),this.$scenarioConfigWrap=this.$(".event-field-config-contents"),this.$submitButton=this.$(".submit-handler"),this.$titleInput.flexText(),this.validateSubmit(),this},t.prototype.renderEventFieldConfig=function(){var e,t;if(null!=(e=this.eventFieldConfigView)&&e.remove(),!this.isIndieEvent())return this.eventFieldConfigView=this.requestSubView(s,{projectModel:this.projectModel,_scenariofieldconfigId:null!=(t=this.eventModel)?t.get("_scenariofieldconfigId"):void 0}),this.eventFieldConfigView.$el.prependTo(this.$eventFieldConfigWrapper),this.stopListening(this.eventFieldConfigView,"setConfig"),this.listenTo(this.eventFieldConfigView,"setConfig",this.setFieldConfig)},t.prototype.renderScenarioInfos=function(e){var t,n;return null==e&&(e={}),null!=(t=this.eventScenarioView)&&t.remove(),n=this.isIndieEvent()?[{fieldType:"content",allowedRoleIds:null,allowedActors:["creator"]},{fieldType:"location",allowedRoleIds:null,allowedActors:["creator"]}]:e.scenariofields?e.scenariofields.filter(function(e){return e.required}):[],this.eventScenarioView=this.requestSubView(u,{objectModel:this.eventModel,projectModel:this.projectModel,boundToObjectType:"event",scenarioFields:n}),this.eventScenarioView.$el.prependTo(this.$scenarioConfigWrap),this.listenTo(this.eventScenarioView,"requiredFieldsChanged",this.validateRequiredFields)},t.prototype.renderLocation=function(){var e;if(this.$location.get(0))return this.requestReactView(this.$location.get(0),d,{project:null!=(e=this.projectModel)?e.toJSON():void 0,organizationId:this._organizationId||x.PREFERENCE.get("lastWorkspace"),handleSelectProject:this.onSelectProject.bind(this)})},t.prototype.renderContent=function(){var e;return e=this.eventModel.toJSON(),this.$titleInput.val(M.unescape(e.title)||"").trigger("change"),this},t.prototype.renderHandler=function(){var e;return e=this.eventModel.toJSON(),f(e.startDate),f(e.endDate),e=M.extend(e,{scope:this.eventModel.getScope()}),this.$handlerWrap.html(p(e)),this.renderStartDatePicker(),this.renderEndDatePicker(),this},t.prototype.renderRepeat=function(){var e,t;return e={repeatTitle:"CUSTOM"===(t=this.eventModel.isRecurrenceEventInstance()?w.freq2Label(this.rruleSet):"NO")?w.freq2Description(this.rruleSet):w.label2Title(t)},this.$repeatWrap.html(_(e)),this},t.prototype.renderRemind=function(){var e,t,n,r;switch((t=this.eventModel.get("reminders").length?this.eventModel.get("reminders")[0]:{minutes:-1}).minutes){case-1:n=tb_i18n.get("remind.close");break;case 0:n=tb_i18n.get("remind.happened");break;default:r=f.duration(t.minutes,"minutes").humanize(),n=tb_i18n.get("remind.ago",r)}return e={remindTitle:n},this.$remindWrap.html(k(e)),this},t.prototype.initConflictDetect=function(){return new i.Module({render:(e=this,function(t){var n,r,o;if(n=null!=(o=e.$conflictDetectEl)?o[0]:void 0)return r=M.extend({},t,{onChoose:function(t){return e.setTime("startDate",t.startDate)}}),e.requestReactView(n,i.Component,r)}),extract:function(e){return function(){var t;return{_organizationId:e._organizationId,_projectId:null!=(t=e.projectModel)?t.get("_id"):void 0,startDate:e.eventModel.get("startDate"),endDate:e.eventModel.get("endDate"),isDefaultDate:e.isLastSetTimeExpired(),isAllDay:e.eventModel.get("isAllDay"),recurrence:e.eventModel.get("recurrence"),involveMembers:e.getDetectInvolveMembers(),involveGroups:e.eventModel.get("involveGroups"),involveTeams:e.eventModel.get("involveTeams")}}}(this)});var e},t.prototype.isLastSetTimeExpired=function(){var e;return!this.lastSetTime||(e=new Date,!f(this.lastSetTime).isSame(e,"day"))},t.prototype.isIndieEvent=function(){return!this.projectModel},t.prototype.getEventVisibility=function(){return this.isIndieEvent()?"involves":"members"},t.prototype.onSelectProject=function(e){return"default"===e?(this.projectModel=void 0,this._organizationId=this._organizationId||x.PREFERENCE.get("lastWorkspace")):this.projectModel=this.projectsCollection.get(e),this.fetchMembersCollection().then((t=this,function(){if(t.el)return t.reset(),t.cacheEvent(),t.renderHandler(),t.renderLocation(),t.renderInvolve(),t.renderEventFieldConfig(),t.renderScenarioInfos(),t.renderVisible()}));var t},t.prototype.getDetectInvolveMembers=function(){return this.eventModel.get("involveAllProjectMembers")?this.membersCollection.pluck("_id"):this.eventModel.get("involveMembers")},t.prototype.renderInvolve=function(){var e,t,n;return e=this.$involveWrap.empty(),this.requestSubView(h,{_projectId:null!=(t=this.projectModel)?t.get("_id"):void 0,_organizationId:(null!=(n=this.projectModel)?n.get("_organizationId"):void 0)||this._organizationId,objectModel:this.eventModel,resident:[x.user.id],where:"creator",scenario:this.isIndieEvent()&&"organization-members",enableInvite:this.canInviteMember(),inheritedObjectModel:this.linkedObjectModel,getInheritedObjectInfo:this.getInheritedInfo,setInvolvers:this.setInvolvers}).$el.appendTo(e),this},t.prototype.canInviteMember=function(){return!this.isIndieEvent()&&this.projectModel.hasPermission("post.member")},t.prototype.setInvolvers=function(e){return this.eventModel.set({involveMembers:e.map(function(e){return e._id}),involvers:e})},t.prototype.renderVisible=function(){if(this.$visibleSwitchers.get(0))return this.requestReactView(this.$visibleSwitchers.get(0),I,{visibility:this.eventModel.get("visible"),onChange:this.switchVisible.bind(this)})},t.prototype.setFieldConfig=function(e){var t,n;return this.eventScenarioFieldConfig=e,t=this.getEventContentData(e),null!=(n=this.eventModel)&&n.set({content:t,_scenariofieldconfigId:e._id}),this.renderScenarioInfos(e)},t.prototype.getPresetContent=function(){var e,t;return!!(null!=(e=null!=(t=this.eventScenarioFieldConfig)?t.scenariofields.find(function(e){return"content"===e.fieldType}):void 0)?e.default:void 0)?e.default:null},t.prototype.getEventContentData=function(e){var t,n,r,o;return o=this.getPresetContent(),r=this.cacheProxy(this.localContentCache,this.localCacheId)||{},t=o?null!=e?e._id:void 0:"defaultId",r.scenarioFieldConfigId===t&&(n=r.content),(n=n||this.localContentDatas[t])||o||""},t.prototype.getProjectList=function(){return this.projectsCollection.getGroupListByStared({isWorkspace:this.isWorkspace,checkAppEnabled:"events"})},t.prototype.fetchMembersCollection=function(){return this.isIndieEvent()?Promise.resolve():new Promise((e=this,function(t,n){return m.fetch(e.projectModel.get("_id"),{success:function(n){if(e.$el)return e.membersCollection=n,t()},error:n})}));var e},t.prototype.renderStartDatePicker=function(){var e,t,n,r,i,s;return i=this.eventModel.get("startDate"),t=(r=E.formatDate(i,{isUsePref:!0})).dateTimeString,e=r.dateString,n=this.eventModel.get("isAllDay")?e:t,this.requestReactView(this.$(".event-start-date")[0],o,{timepicker:!this.eventModel.get("isAllDay"),date:i,displayText:n,placement:"bottomLeft",clearable:!1,nested:!1,onOpen:(s=this,function(){return s.gtaOpenDatepicker("start")}),onChange:function(e){return function(t){var n;if(n=t.date,e.$el)return e.setTime("startDate",n)}}(this)})},t.prototype.renderEndDatePicker=function(){var e,t,n,r,i;return t=new f(this.eventModel.get("endDate")),r=new f(this.eventModel.get("startDate")),(n=this.eventModel.checkAllDay())?(t=a.inclusiveAllDayEndDate(t),e=E.formatDate(t,{isUsePref:!0}).dateString):e=E.formatDate(t,{isUsePref:!0}).dateTimeString,this.requestReactView(this.$(".event-end-date")[0],o,{timepicker:!n,date:t,startDate:r,displayText:e,clearable:!1,nested:!1,onOpen:(i=this,function(){return i.gtaOpenDatepicker("end")}),onChange:function(e){return function(t){var r;if(r=t.date,e.$el)return n&&(r=a.endDateOfAllDay(r)),e.setTime("endDate",r)}}(this)})},t.prototype.showRepeatSelector=function(e){var t,n,r,o;return n="showRepeatSelector",(t=$(e.currentTarget)).data(n)?this:(t.data(n,!0),null!=(r=this.repeatSelectorView)&&r.remove(),this.repeatSelectorView=this.requestSubView(g,{$toggler:t,recurrence:this.eventModel.get("recurrence"),startDate:this.eventModel.get("startDate"),select:(o=this,function(e){return o.rruleSet=w.getRRuleSet(e),o.eventModel.set("recurrence",e)})}).show(),this)},t.prototype.showRemindSelector=function(e){var t,n,r,o,i,s,a,c,l,u,p,d;if(i="showRemindSelector",(t=$(e.currentTarget)).data(i))return this;for(t.data(i,!0),r=this.eventModel.get("reminders").length?this.eventModel.get("reminders")[0]:{method:"popup",minutes:-1},n=[],o=0,s=(c=[-1,0,5,15,30,60,120,1440]).length;o<s;o++){switch(a=c[o]){case-1:p=tb_i18n.get("remind.close");break;case 0:p=tb_i18n.get("remind.happened");break;default:u=f.duration(a,"minutes").humanize(),p=tb_i18n.get("remind.ago",u)}n.push({_id:a,title:p})}return null!=(l=this.remindSelectorView)&&l.remove(),this.remindSelectorView=this.requestSubView(v,{$toggler:t,width:170,dataList:n,selected:r.minutes,select:(d=this,function(e){var t;return-1===e?t=[]:((t=M.clone(r)).minutes=e,t=[t]),d.eventModel.set("reminders",t)})}).show(),this},t.prototype.switchVisible=function(e){return this.eventModel.set({visible:e}),x.gta.event({action:"toggle visibility",type:"event",control:"New Event"})},t.prototype.switchAllDay=function(e){var t,n,r;return r=this.eventModel.checkAllDay(),n=a.dateInfoFromEvent(this.eventModel),(t=a.switchAllDay(n,!r))&&this.eventModel.set(t),this},t.prototype.quickSubmit=function(e){return 13===e.keyCode&&(e.preventDefault(),this.submit(e)),this},t.prototype.submit=function(e){var t;return this.$el.hasClass("submiting")?this:this.$titleInput.val().trim()?(t=$(null!=e?e.currentTarget:void 0).data("type"),this.disableSubmit(e),"single"===t?this.updateRecurrenceInSingleMode():"after"===t?this.updateRecurrenceInAfterMode():this.createEvent(),this):this.$titleInput.focusAtEnd()},t.prototype.createEvent=function(e){var t,n,r;return e||(e=this.getSaveAttrs()),e._projectId&&(e=M.omit(e,"_organizationId")),t=this.options.eventsCollection||(null!=(n=this.options.eventModel)?n.collection:void 0),(new c).save(null,{attrs:e,wait:!0,success:(r=this,function(e){var n,o,i;return(o=new c(e.toJSON())).refreshDate(),null!=t&&t.add(o),r.enableSubmit(),r.clearCache(),"function"==typeof(n=r.options).success&&n.success(o),i=e.isIndie()?"/event/"+o.id:"/project/"+o.get("_projectId")+"/events/event/"+o.id,!1!==r.options.isEssage&&S.success({messageTitle:tb_i18n.get("create.event.success"),url:i,urlTitle:o.get("title"),description:e.get("_projectId")?"":tb_i18n.get("event.creator.indie.event.success.hint")}),r.close()}),error:function(e){return function(){return e.enableSubmit()}}(this)}),this},t.prototype.updateEvent=function(){var e,t;return e=this.getSaveAttrs(),l.isRecurrent(e)||delete e.recurrence,this.options.eventModel.save(null,{wait:!0,attrs:e,success:(t=this,function(e){return t.enableSubmit(),t.close()}),error:function(e){return function(t,n){return e.enableSubmit()}}(this)}),this},t.prototype.updateRecurrenceInSingleMode=function(){var e,t,n,r,o,i;return n=this.getSaveAttrs(),(e=this.options.eventModel).collection,t=new Date(e.get("startDate")),o=e.getRRuleSet(),delete n.recurrence,null!=(r=e.eventDetailView)&&r.resetView(),o.exdate(t),e.save(null,{wait:!0,attrs:{recurrence:o.valueOf()},success:(i=this,function(){return i.close(),(new c).save(null,{attrs:n,wait:!0,success:function(t,n){var r;return e.reset(n,{silent:!0}),null!=(r=e.eventDetailView)?r.refreshView():void 0}})}),error:function(e){return function(t,n){return e.enableSubmit()}}(this)})},t.prototype.updateRecurrenceInAfterMode=function(){var e,t,n,r,o,i,s;return n=this.getSaveAttrs(),t=this.options.eventModel,e=t.collection,(o=t.getRRuleSet())&&(i=o.before(new Date(t.get("startDate")),!1)),i?(null!=(r=t.eventDetailView)&&r.resetView(),w.updateRRuleSet(o,{until:i}),t.save(null,{attrs:{recurrence:o.valueOf()},success:(s=this,function(){var r;return s.close(),l.isRecurrent(n)&&(o=n.recurrence.join("\n").replace(/EXDATE[^\s]*\s?/g,"").trim(),(r=y.parseString(o.slice(6))).dtstart=new Date(n.startDate),n.recurrence=["RRULE:"+y.optionsToString(r)]),(new c).save(null,{attrs:n,success:function(n,r){var o;return null!=e&&e.add(n),t.reset(r,{silent:!0}),null!=(o=t.eventDetailView)?o.refreshView():void 0}})}),error:function(e){return function(t,n){return e.enableSubmit()}}(this)})):t.save(null,{attrs:n,success:function(e){return function(t){return e.close()}}(this),error:function(e){return function(t,n){return e.enableSubmit()}}(this)})},t.prototype.disableSubmit=function(e){var t;if(this.$el)return t=$(null!=e?e.currentTarget:void 0),this.$el.addClass("submiting"),t.closest(".btn-wrap").addClass("submiting"),this},t.prototype.enableSubmit=function(e){if(this.$el)return this.$el.removeClass("submiting"),this.$el.find(".btn-wrap.submiting").removeClass("submiting")},t.prototype.onOpen=function(){var e;return null!=(e=this.$titleInput)&&e.focusAtEnd(),this},t.prototype.setTime=function(e,t){var n,r,o;return t&&(this.lastSetTime=(new Date).toISOString()),o=f(this.eventModel.get("startDate")),n=(r=f(this.eventModel.get("endDate")))-o,"startDate"===e?(o=f(t),r=f(n+o)):"endDate"===e&&(r=f(t)),r.isAfter(o)||(r=f(o).add(1,"hour")),this.eventModel.set({startDate:o.toISOString(),endDate:r.toISOString()}),this},t.prototype.getSaveAttrs=function(){var e,t,n;return t=M.extend(this.eventModel.toJSON(),{title:this.$titleInput.val().trim()}),this.eventModel.get("isAllDay")&&(n=f(t.startDate).startOf("day"),e=f(t.endDate).startOf("day"),t.startDate=n.toISOString(),t.endDate=e.toISOString(),t.isAllDay=!0),this.eventModel.isRecurrenceEventInstance()?(w.updateRRuleSet(this.rruleSet,{dtstart:new Date(t.startDate)}),t.recurrence=this.rruleSet.valueOf()):t.recurrence=null,t=l.marshaler.deparse(t),M.pick(t,this.saveAttrs)},t.prototype.cacheEvent=function(){var e,t;return t=this.$titleInput.val().trim(),this.eventModel.set("title",t),this.localCacheId&&(e=M.extend(this.eventModel.toJSON(),{title:t,lastSetTime:this.lastSetTime}),this.cacheProxy(this.localCache,this.localCacheId,M.omit(e,"content"))),this},t.prototype.cacheEventContent=function(e){var t,n,r;if(this.localCacheId)return r=e.get("content"),n=this.getPresetContent()?this.eventScenarioFieldConfig._id:"defaultId",this.localContentDatas[n]=r,t={scenarioFieldConfigId:n,content:r},this.cacheProxy(this.localContentCache,this.localCacheId,t)},t.prototype.clearCache=function(){return this.localCacheId&&(this.localCache(this.localCacheId,null),this.localContentCache(this.localCacheId,null)),this},t.prototype.gtaOpenDatepicker=function(e){return x.gta.event({action:"set "+e+" time",type:"event",control:"New Event"})},t.prototype.close=function(){var e,t;return(null!=(e=this.parentView)?e.close:void 0)?this.parentView.close():null!=(t=this.parentView)&&t.remove(),this},t.prototype.remove=function(){var e;return null!=(e=this.conflictDetect)&&e.clear(),t.__super__.remove.apply(this,arguments)},t.prototype.validateRequiredFields=function(e){return this.requiredScenarioFieldsValidated=e,this.validateSubmit()},t.prototype.validateSubmit=function(){var e;return e=[!!this.eventModel.get("title"),this.requiredScenarioFieldsValidated].every(function(e){return e}),this.$submitButton.prop("disabled",!e)},t}()},KJFqng8l:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f={}.hasOwnProperty;h=n("a+N5u/Cl"),p=n("vmWJWrVe"),u=n("GESwhXbR").Toast,s=n("85182E8g"),a=n("nL4olqOP"),o=n("9sOPw9dz"),d=n("OmupbwLD"),r=n("4zmhFCNs"),c=n("6B8y3fJN"),l=n("VtcDpLJ5"),i=n("7lrF6wkq").OrganizationSelector,m=n("suI5NDUm").isAone,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)f.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.viewName="ProjectsTransferView",t.prototype.className="projects-transfer-view modal-dialog modal-padding",t.prototype.events={"click .confirm-handler":"submit","click .cancel-handler":"close","click .transfer-handle:not(.disabled)":"addToSelected","click .remove-handle":"removeSelected"},t.prototype.initialize=function(e){var t,n;return e?(this.isAone=m(),this.options=h.extend({action:"import"},e),this.organizationsCollection=s.find(0),this.organizations=null!=(t=this.organizationsCollection)?t.getOrganizationsByIds(this.getSelectableOrgIds()):void 0,h.isEmpty(this.organizations)?h.defer((n=this,function(){return n.close(),u.error({message:tb_i18n.get("project.transfer.no.orgs")})})):(this.isTransferring=!1,this.ownerId=this.options.targetId||this.organizations[0]._id,this.loadProjects(function(e){return function(){var t;return t=function(){switch(this.options.action){case"import":return this.organizations[0]._id;case"export":return this.options.sourceId;default:return this.organizations[0]._id}}.call(e),e.switchToOrgId(t),e.renderBasic(),e.renderSourceProjects(),e.renderSelect(),e.renderTargetProjects()}}(this)),this)):this},t.prototype.loadProjects=function(e){return a.fetch(0,{success:(t=this,function(n){return t.allProjectsCollection=n,e()})});var t},t.prototype.switchToOrgId=function(e){var t;return t=[],this.allProjectsCollection.each(function(n){var r;if(r=n.get("_organizationId"),e===r&&n.hasPermission("put.transfer")&&(this.isAone||!n.isTaskflow()))return t.push(n.toJSON())}),this.projectsCollection=new a(t)},t.prototype.renderBasic=function(){return this.$el.html(r({targetTitle:this.getTargetTitle(),organizations:this.organizations,action:this.options.action})),this.$transferFrom=this.$(".transfer-from .transfer-list"),this.$transferTo=this.$(".transfer-to .transfer-list"),this.$submitter=this.$(".confirm-handler"),this.$cancel=this.$(".cancel-handler")},t.prototype.renderSourceProjects=function(){var e;return e=this.projectsCollection.reject(function(e){return e._selected}),e=h.map(e,function(e){var t,n;return!this.isAone&&e.isProTemplate()&&(t=!0,n=tb_i18n.get("project.transfer.disabled.agile")),h.assign(e.toJSON(),{transferDisabled:t,transferDisabledReason:n})}),this.$transferFrom.html(c({projects:e,action:this.options.action}))},t.prototype.renderTargetProjects=function(){var e;return e=this.getSelected(this.ownerId),e=h.map(e,function(e){var t,n;return!this.isAone&&e.isProTemplate()&&(t=!0,n=tb_i18n.get("project.transfer.disabled.agile")),h.assign(e.toJSON(),{transferDisabled:t,transferDisabledReason:n})}),this.$transferTo.html(l({projects:e})),this.$submitter[e.length>0?"removeClass":"addClass"]("disabled")},t.prototype.renderSelect=function(){var e,t,n;return t=function(){switch(this.options.action){case"import":return".organization-transfer-import-selector";default:return".organization-transfer-export-selector"}}.call(this),(e=this.$(t).get(0))?this.requestReactView(e,i,{currentValue:this.organizations[0],orgs:this.organizations,onSelect:(n=this,function(e){var t;switch(t=e.data,n.options.action){case"import":n.switchToOrgId(t._id);break;case"export":n.ownerId=t._id}return h.map(n.projectsCollection.models,function(e){return e._selected=!1}),n.refreshView()})}):this},t.prototype.refreshView=function(){return this.renderSourceProjects(),this.renderTargetProjects()},t.prototype.getSelectableOrgIds=function(){switch(this.options.action){case"import":return h.without(this.options.sourceIds,this.options.targetId);case"export":return h.without(this.options.targetIds,this.options.sourceId);default:return[]}},t.prototype.getTargetTitle=function(){var e;if(e=this.organizationsCollection.get(this.options.targetId))return tb_i18n.get("projects.transferIn.to.direct",e.get("name"))},t.prototype.checkMembersExceed=function(e,t){var n,r;return n=(null!=(r=this.organizationsCollection.get(this.ownerId))?r.get("name"):void 0)||"",this.requestSubView(d).open(o,{title:tb_i18n.get("confirm")+tb_i18n.get("project.settings.transfer"),content:tb_i18n.get("project.settings.transfer.roles.change",n),confirmText:tb_i18n.get("project.settings.transfer.confirm"),confirmStyle:"danger",onConfirm:function(){return t.success()}})},t.prototype.addToSelected=function(e){var t,n,r;if((t=$(e.currentTarget).closest("li").data("id"))&&!this.isTransferring)return n=this.projectsCollection.find(function(e){return e.id===t}),this.checkMembersExceed(n,{success:(r=this,function(){return n._selected=!0,n.ownerId=r.ownerId,r.refreshView()})}),this},t.prototype.removeSelected=function(e){var t,n;if((t=$(e.currentTarget).closest("li").data("id"))&&!this.isTransferring)return(n=this.projectsCollection.find(function(e){return e.id===t})).ownerId=null,n._selected=!1,this.refreshView(),this},t.prototype.getSelected=function(e){var t;return t=[],this.projectsCollection.each(function(n){if(n._selected&&(!e||n.ownerId===e))return t.push(n)}),t},t.prototype.submit=function(){var e;if(!this.$submitter.hasClass("disabled")&&this.getSelected().length)return this.isTransferring=!0,h.reduce(this.getSelected(),(e=this,function(t,n){return t.then(function(){return new Promise(function(t,r){return n.transfer(e.ownerId,{wait:!0,ownerType:"organization",beforeSend:function(){return e.$submitter.addClass("disabled").html(tb_i18n.get("project.transferring")),e.$cancel.addClass("disabled")},success:t,error:r})})})}),Promise.resolve()).then(function(e){return function(){var t;return u.success(tb_i18n.get("project.transfer.success")),"function"==typeof(t=e.options).success&&t.success(),e.close()}}(this)).catch(function(e){return function(t){var n;switch(n=t.message,t.name){case"NotProjectMember":n=tb_i18n.get("project.settings.over.plan.warn");break;case"NoPermission":n=tb_i18n.get("project.settings.no.right.warn");break;default:n=tb_i18n.get("project.settings.no.exist.warn")}return u.error(n),e.$submitter.removeClass("disabled").html(tb_i18n.get("confirm")),e.$cancel.removeClass("disabled"),e.isTransferring=!1}}(this))},t.prototype.close=function(){var e;return null!=(e=this.parentView)&&"function"==typeof e.close&&e.close(),this},t.prototype.remove=function(){var e;return"function"==typeof(e=this.options).onclose&&e.onclose(),t.__super__.remove.apply(this,arguments)},t}()},"KKrZ+aFg":function(e,t,n){e.exports=n.p+"images/d_touxiao@2x.428dc764.png"},KLW9azZr:function(e,t,n){e.exports=n.p+"images/d_baibai@2x.fc97e68d.png"},KOoU9UnP:function(e,t,n){e.exports={"task-content":"task-content__3cHM",done:"done__1itd","task-content__inner":"task-content__inner__oIt-"}},KPjvlCmh:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;r=n("VuB9cZyl"),o=n("tk919NOw"),i=n("a2Z1fDJ7").sanitize,s=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="consumers",t.prototype.model=o,t.prototype.orderBy=null,t.prototype.initialize=function(e,t){this.options=t},t.prototype.parse=function(e,t){var n,r,o,s;if(!e)return e;for(r=0,o=(n=Array.isArray(e)?e:[e]).length;r<o;r++)"string"==typeof(s=n[r]).avatarUrl&&(s.avatarUrl=i(s.avatarUrl));return e},t.prototype.url=function(){return s("this mothod must be override")},t.prototype.sync=function(e,n,r){return null==r&&(r={}),r.url||(r.url=this.url()),t.__super__.sync.apply(this,arguments)},t.prototype.deletePlugin=function(e){return new Promise((t=this,function(n,r){return t.sync("delete",t,{url:t.url()+"/"+e,success:function(r){return t.remove(e),n(t)},error:function(e){return r(e)}})}));var t},t}()},KTFPvVRg:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("a+N5u/Cl"),o=n("Atd/KrMo"),r=n("Z0LNo3tR"),n("AqObtacK"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="VideoContainer",t.prototype.className="obd-video-container",t.prototype.events={click:"onContainerClick","click .cross-button":"onCrossClick"},t.prototype.initialize=function(e){return this.options=e,t.__super__.initialize.apply(this,arguments),this.renderBasic(),this},t.prototype.normalizeOptions=function(){var e;return null!=(e=this.options).crossActions?e.crossActions:e.crossActions=[]},t.prototype.onCrossClick=function(){return i.each(this.options.crossActions,(e=this,function(t){return e.sendAction(t)}));var e},t.prototype.onContainerClick=function(e){if(e.target===this.el&&"static"!==this.options.backdrop)return this.sendAction("view-action://close-view")},t.prototype.renderBasic=function(){return this.$el.html(r(this.options)),this},t}()},KTVfYGRH:function(e,t,n){e.exports={"side-bar":"side-bar__1GgU",focus:"focus__2-pU"}},KePvfzJj:function(e,t,n){"use strict";n.r(t),n.d(t,"parseCustomfield",function(){return a}),n.d(t,"arrayAreSameValue",function(){return l}),n.d(t,"getIsVersionAppField",function(){return u}),n.d(t,"isCompatibleWithConfigType",function(){return p});var r=n("mrSGxOB2"),o=n("a+N5u/Cl"),i=n.n(o),s=n("V6edIaEd"),a=function(e,t){var n=t?Object(s.getCustomFieldValue)(e,t):void 0,o=!i.a.isEmpty(n),a=function(e,t){switch(e){case"dropDown":case"date":case"number":case"text":return{value:t||""};case"multipleChoice":return{value:t||[]};case"commongroup":return{commonGroupValue:t};case"lookup":return{advancedValue:t};case"work":return{workValues:t}}}(e.type,n);return r.a({_id:e._customfieldId,_roleIds:e._roleIds,name:e.name,type:e.type,subtype:c(e),choices:e.choices,isSingleSelection:!!e.isSingleSelection,advancedCustomfield:e.advancedCustomfield||void 0,_customfieldentityId:e._customfieldentityId,value:"",hasValue:o},a)};function c(e){switch(e.type){case"dropDown":case"multipleChoice":case"date":case"number":case"text":case"lookup":case"work":return;case"commongroup":return e.subtype}}var l=function(e,t){var n=function(e){return e.reduce(function(e,t){return e[t]?e[t]+=1:e[t]=1,e},{})};if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;var r=n(e),o=n(t);for(var i in r)if(!o[i]||o[i]!==r[i])return!1;return!0};function u(e){return!!e.advancedCustomfield&&"teambition.version"===e.advancedCustomfield.objectType}function p(e,t){return"commongroup"!==t.type||t.subtype===e}},KfDuJ4Zw:function(e,t,n){e.exports=n.p+"images/triangle.703b0928.svg"},KlgsDvvI:function(e,t,n){var r,o,i,s,a,c,l,u,p={}.hasOwnProperty;n("msiDz7wE"),u=n("a+N5u/Cl"),c=n("YdqH4v7N"),l=n("vmWJWrVe"),s=n("nL4olqOP"),i=n("BLZfz376"),r=n("YeX3DkAL"),a=n("pRhN8ZQR"),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,l),t.prototype.className="object-picker-posts-view flex-vert",t.prototype.viewName="ObjectPickerProjectsView",t.prototype.events={"click .select-handler":"handleSelect"},t.prototype.initialize=function(e){var t,n,r;return this.exclude=null!=(t=e.exclude)?t:[],this.onSelect=null!=(n=e.onSelect)?n:function(){},this.organizationId=e.organizationId,this.projectTagId=e.projectTagId,this.render(),this.renderLoading(),this.fetchInitial().then((r=this,function(e){return r.projectsCollection=e[0],r.projectTagsCollection=e[1],e})).then(function(e){return function(){return e.renderEmptyLoading(),e.renderProjects()}}(this))},t.prototype.fetchInitial=function(){switch(this.projectTagId){case"star":case"personal":return Promise.all([new Promise(function(e,t){return s.fetch(0,{error:t,success:e})}),Promise.resolve()]);default:return Promise.all([new Promise((e=this,function(t,n){return s.fetch(e.organizationId,{error:n,success:t})})),new Promise(function(e){return function(t,n){return i.fetch(e.organizationId,{error:n,success:t})}}(this))])}var e},t.prototype.getProjects=function(){var e,t;switch(t=this,e=function(e){return u.extend({},e.toJSON(),{isDisabled:u.contains(t.exclude,e.get("_id"))})},this.projectTagId){case"star":return this.projectsCollection.getStarredProjects().map(e);case"personal":return this.projectsCollection.getPersonalOwnedProjects().map(e);default:return this.projectTagsCollection.get(this.projectTagId).getCurrentTagProjectModelsByProjectModels(this.projectsCollection.models).map(e)}},t.prototype.handleSelect=function(e){var t,n;if(!(t=$(e.currentTarget)).hasClass("object-picker-projects__project-item__is-disabled"))return t.siblings().removeClass("object-picker-projects__project-item__is-active"),t.addClass("object-picker-projects__project-item__is-active"),n=t.data("id"),this.onSelect([{_id:n,type:"project"}])},t.prototype.render=function(){return this.$el.html(r())},t.prototype.renderLoading=function(){var e;return e=this.$(".object-picker-projects__loading"),this.showLoadingIndicator(e)},t.prototype.renderEmptyLoading=function(){var e;return e=this.$(".object-picker-projects__loading"),this.hideLoadingIndicator(e)},t.prototype.renderProjects=function(){var e;return e=this.getProjects(),this.$(".object-picker-projects__project-list").html(a({cells:e}))},t}(),u.extend(o.prototype,c),e.exports=o},KnUC4fdI:function(e,t,n){e.exports=n.p+"images/starred-tag@2x.40472ea1.png"},Kofb29LJ:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;i=n("vmWJWrVe"),s=n("a+N5u/Cl"),o=n("3eMzznN/"),r=n("BbTZcZs0"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="GitintegrationView",t.prototype.initialize=function(e){var t;return t=s.map(e.data,function(e){return e.data.integration.created&&(e.createTime=o.formatDate(e.data.integration.created)),e}),this.$el.html(r({title:e.title,items:t,hasHeader:e.hasHeader}))},t}()},"Kp6G1I/y":function(e,t,n){e.exports={"task-reminder-item":"task-reminder-item__1GGV"}},KqDDC1nH:function(e,t,n){"use strict";n.r(t),n.d(t,"toBackboneModel",function(){return a}),n.d(t,"canPutOrDelInvolver",function(){return c}),n.d(t,"eventUseOriginId",function(){return l}),n.d(t,"dataUpdateToView",function(){return u});var r=n("mrSGxOB2"),o=n("IssmDVnT"),i=n("s0r7VfKc"),s=n("1fU+e3+7");function a(e,t){return t?(t.set(e),t):new s(e,{bindByMatrix:!1})}function c(e){var t=a(e);return{put:t.hasPermission("put.involvers"),del:t.hasPermission("del.involvers")}}var l=function(e){return o.EventSDK.isRecurrent(e)?r.a({},e,{_id:o.EventSDK.originEventId(e._id)}):e},u=function(e,t){var n=e.observeModelReset().share(),s=n.pluck("modelId").startWith(t).distinctUntilChanged(function(e,t){return o.EventSDK.originEventId(e)===t||e===t}).switchMap(function(e){return i.default.getEventInstance(e)}).map(l),c=n.pluck("modelRef").startWith(void 0).distinctUntilChanged();return s.withLatestFrom(c).filter(function(e){return!!r.f(e,1)[0]}).do(function(e){var t=r.f(e,2);return a(t[0],t[1])})}},Ku9M8L3T:function(e,t,n){var r,o,i,s,a,c,l,u,p,d=function(e,t){return function(){return e.apply(t,arguments)}},h={}.hasOwnProperty;n("jvgq3JKC"),p=n("xweIrhwh"),n("sa1Ed382"),o=n("GESwhXbR").Loading,l=n("QSzw2VcL"),a=n("v4t1pgGK"),u=n("s0r7VfKc").default,s=n("FMzLVbOv"),c=n("JMfjhaeN"),r=n("Q0SIXEaW"),i=n("ZkhtbhGT"),e.exports=function(e){function t(){return this.getTeams=d(this.getTeams,this),this.renderBasic=d(this.renderBasic,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)h.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="TeamStructureModalView",t.prototype.className="team-structure-modal-view modal-dialog",t.prototype.events={"click .team-item.has-child":"enterTeam","click .prev-handler":"leaveTeam"},t.prototype.initialize=function(e){var n,r;return n=e.organizationId,this.teamsCollection=new l,this.teamsCollection.add({_id:null}),this.parseTree(),this.defaultTeamId=this.teamTree._id,this._parentId=this.teamTree._id,this.teamIds=[this._parentId],this.onMoveTeam=e.onMoveTeam,n&&(this.subs=u.fetch.get("v2/organizations/"+n+"/teams",{onlyFirstLevel:!1}).map(function(e){var t;return t=e.result,p(t,"pos")}).subscribe((r=this,function(e){return null!=e&&e.forEach(function(e){var t;return t=new a(e,{bindByMatrix:!1}),r.teamsCollection.add(t)}),r.loaded=!0,r.parseTree(),r.assembleContent(),r.renderBasic()}))),t.__super__.initialize.apply(this,arguments)},t.prototype.listen=function(){return this.stopListening(this.teamsCollection),this.listenTo(this.teamsCollection,"add change:pos remove",this.parseTree),this.listenTo(this.teamsCollection,"add change:pos",function(){return this.assembleContent(),this.renderBasic()}),this.listenTo(this.teamsCollection,"remove",function(e){var t;return~(t=this.teamIds.indexOf(e.id))&&e.get("_parentId")===this._parentId?(this.teamIds.pop(),this.assembleContent(),this.goto(t)):(this.assembleContent(),this.renderBasic())})},t.prototype.renderBasic=function(){if(this.$teamListEl&&this.unmountReact(this.$teamListEl),t.__super__.renderBasic.apply(this,arguments),!this.loaded)return this.renderLoading()},t.prototype.renderLoading=function(){return this.$teamListEl=this.$(".team-list-wrapper")[0],this.requestReactView(this.$teamListEl,o)},t.prototype.remove=function(){var e;return null!=(e=this.subs)&&e.unsubscribe(),t.__super__.remove.apply(this,arguments)},t.prototype.onOpen=function(){return this.isReady=!0,this.componentUpdated()},t.prototype.componentUpdated=function(e){var t,n;if(this.isReady)return e||(e=0),t=this.getTeams(this.teamTree,this.teamIds[e]),n=this.getTeamDatas(t),this.initJqTree(n),this.listen()},t.prototype.parseTree=function(){return this.teamTree=i.parseTree(this.teamsCollection.toJSON())},t.prototype.getTeamDatas=function(e){return e.map(function(e,t){var n,r;return{hasChild:n=!!(null!=(r=e.children)?r.length:void 0),name:c({name:e.name,hasChild:n}),teamId:e._id}})},t.prototype.getTeams=function(e,t){var n,r,o,i,s,a;if(t===e._id)return e.children;if((null!=(i=e.children)?i.length:void 0)>0){for(r=0,o=(s=e.children).length;r<o;r++)if(n=s[r],null!==(a=this.getTeams(n,t)))return a;return null}return null},t.prototype.initJqTree=function(e){return this.$teamList=this.$(".team-list"),this.$teamList.tree({data:e,saveState:!0,autoEscape:!1,onCanMoveTo:function(e,t,n){return"inside"!==n},onCreateLi:function(e,t){var n;return n=e.hasChild?"team-item has-child":"team-item",t.addClass(n).attr("data-id",e.teamId)},dragAndDrop:!0}),this.listenEvent()},t.prototype.listenEvent=function(){return this.$teamList.bind("tree.move",(e=this,function(t){var n,r,o,i,s;return t.preventDefault(),o=(s=t.move_info).moved_node.teamId,r=$(s.target_node.element),i="before"===s.position?r.data("id"):(n=r.nextAll(".team-item").eq(0)).length?n.data("id"):null,s.do_move(),e.updateTeamStatus(o,i)}));var e},t.prototype.updateTeamStatus=function(e,t){if(e)return this.onMoveTeam({teamId:e,_nextId:t})},t.prototype.enterTeam=function(e){return this._parentId=$(e.target).closest(".team-item").data("id"),this.teamIds.push(this._parentId),this.assembleContent(),this.goNext()},t.prototype.leaveTeam=function(e){return e.stopPropagation(),this._parentId=this.teamIds.pop(),this.assembleContent(),this.goPrev()},t.prototype.assembleContent=function(){return this.contentList=this.teamIds.map((e=this,function(t){return{title:t===e.defaultTeamId?tb_i18n.get("organization.team.order.title"):tb_i18n.get("oragnization.team.order.title.child"),body:r({teams:e.getTeams(e.teamTree,t)})}}));var e},t}()},KvEb59eD:function(e,t,n){"use strict";var r=n("j0w21su5");n.d(t,"AbstractPortal",function(){return r.a});var o=n("AEZNCUhx");n.o(o,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return o.getSuspendedMsg}),n.o(o,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return o.verifyProjectPayment})},Kw3lyNwT:function(e,t,n){e.exports=n.p+"images/d_xixi@2x.bd53db81.png"},Kwu9X67e:function(e,t,n){"use strict";var r=n("q1tIBJhx"),o=n.n(r),i=n("GESwhXbR"),s=n("XHxZqXzL"),a=function(e){return e.onClose?o.a.createElement(s.a,{className:e.className,onClick:e.onClose},o.a.createElement(i.Icon,{name:"remove-s"})):null};n.d(t,"a",function(){return a})},"L+AUxvqI":function(e,t,n){e.exports={"guide-modal":"guide-modal__lVxZ","guide-modal-body":"guide-modal-body__F04i","guide-modal-image":"guide-modal-image__3BJl","guide-modal-header":"guide-modal-header__1VPH","guide-modal-button":"guide-modal-button__ITHJ","guide-modal-remove":"guide-modal-remove__1oqF","guide-popover-dock":"guide-popover-dock__3KIt","guide-popover-dashboard":"guide-popover-dashboard__2rE8","guide-popover-image":"guide-popover-image__101I","guide-popover-header":"guide-popover-header__1TXt","guide-popover-description":"guide-popover-description__3gtW","guide-popover-button":"guide-popover-button__XH2m","guide-backdrop":"guide-backdrop__XJGB"}},"L+U0RKxI":function(e,t,n){var r;r=n("2qRnoGmE"),t.isInternational=function(){var e,t,n,o;return e=0===(null!=(n=r.INTERNATIONAL_HOST)?n.indexOf("http://"+location.host):void 0),t=0===(null!=(o=r.INTERNATIONAL_HOST)?o.indexOf("https://"+location.host):void 0),e||t}},L0ULbOmZ:function(e,t,n){e.exports={"object-field":"object-field__1I0_","task-date-range-icon":"task-date-range-icon__3sng","task-recurrence":"task-recurrence__2hhk","task-reminder":"task-reminder__3Bda","object-field-list":"object-field-list__uJ45","task-date-wrapper":"task-date-wrapper__1K7T","date-range":"date-range__2D13","one-row":"one-row__17yo"}},L3Znt4sw:function(e,t,n){var r,o,i,s,a,c,l,u,p,d={}.hasOwnProperty;l=n("a+N5u/Cl"),i=n("wd/RKGTj"),p=n("sa1Ed382"),c=n("vmWJWrVe"),a=n("3eMzznN/"),u=n("tOYy32ox"),o=n("K63xFwJJ"),s=n("g0mohWXm"),r=n("h6BO7+cQ"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,c),t.prototype.viewName="EventsListView",t.prototype.tagName="div",t.prototype.className="events-list",t.prototype.events={"click .event":"openDetail","click .event-tag":"onClickEventTag"},t.prototype.initialize=function(e){return!(null==e||!e.eventsCollection)&&(this.options=e,this.eventsCollection=e.eventsCollection,this.$placeholder=$(s()),this.renderEvents(),this.checkPlaceholder(),this.listen(),e.groupBy&&this.$el.addClass("events-group"),this)},t.prototype.listen=function(){var e;return this.listenTo(this.eventsCollection,"add change destroy remove",(e=this,function(t){return e.renderEvents(),e.checkPlaceholder()})),this},t.prototype.renderEvents=function(){var e,t,n;return e=this.eventsCollection.map((n=this,function(e){return n.assembleEvent(e)})),t=this.options.isPastEvents,e=l.sortBy(e,function(e){return(t?-1:1)*new Date(e.startDate)}),this.options.weekly&&(e=this.getEventsByDays(e,this.options.weekly,7)),(this.options.groupBy||this.options.weekly)&&(e=this.getEventsByGroups(e)),this.$el.html(o({eventsList:e,groupBy:this.options.groupBy||this.options.weekly,showGroupCount:this.options.showGroupCount})),this},t.prototype.getEventsByDays=function(e,t,n){var r,o,s,a;for(o=new Set,r=i(t).startOf("day"),o.add(r.toISOString()),s=1,a=n-1;1<=a?s<=a:s>=a;1<=a?s++:s--)o.add(r.add(1,"day").toISOString());return l.filter(e,function(e){var t;return t=e.startDate,r=i(t).startOf("day"),o.has(r.toISOString())})},t.prototype.getEventsByGroups=function(e){var t;return l.chain(e).groupBy(function(e){return i(e.startDate).startOf("day").toISOString()}).mapObject((t=this,function(e,n){return{id:n,title:t.options.weekly?""+i(n).format("ddd")+tb_i18n.get("comma")+i(n).format("MM.DD"):a.formatDate(n,{isUsePref:!0}).dateString,events:e,count:e.length}})).values().value()},t.prototype.assembleEvent=function(e){var t,n;return t=e.toJSON(),Object.assign(t,r.assemble({startDate:t.startDate,endDate:t.endDate,now:i()},{groupByDay:null!=(n=this.options)?n.groupBy:void 0,isUsePref:!0})),t.showInvolved=this.options.showInvolved,t.involved&&t.involved.length>3&&(t.involvedString=t.involved.map(function(e){return e.name}).join(", ")),t},t.prototype.checkPlaceholder=function(){return this.$placeholder.remove(),this.eventsCollection.length||this.$el.html(this.$placeholder),this},t.prototype.openDetail=function(e){var t,n;return(t=null!=(n=this.eventsCollection.get($(e.currentTarget).data("id")))?n.toJSON():void 0)&&u(t),this},t.prototype.onClickEventTag=function(e){var t;return e.stopPropagation(),p.gta.event({action:"open detail",type:"project",control:"original project"}),t=$(e.currentTarget).data("id"),p.router.navigate("project/"+t+"/events",{trigger:!0}),this},t}()},L4faqtAu:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=(n("MHYkUNaR"),n("4c1CS0b3")),i=n("8yf6doCl"),s=window.FangCloudKit;s.setClientId("52f0fc84-e18a-4068-b375-42a6150945a7"),s.setFrameType("tab");var a=function(){function e(e){var t=this;return this.destroy$=new i.Subject,this.message$=new i.Subject,s.createUikit(),this.listenerId=s.addMessageEventListener(function(n){"fileSelect"===n.type&&(t.message$.next([e.id,n]),t.message$.complete(),t.listenerId&&s.removeMessageEventListener(t.listenerId),s.close())}),this.message$.takeUntil(this.destroy$).filter(function(t){return r.f(t,1)[0]===e.id}).map(function(e){return r.f(e,2)[1].data}).catch(function(t){return e.error&&e.error(t),o.Observable.empty()}).subscribe(function(t){e.success&&e.success(t)}),this}return e.prototype.destroy=function(){this.listenerId&&s.removeMessageEventListener(this.listenerId),this.destroy$.next(),this.destroy$.complete()},e.create=function(t){return new e(t)},e}();n.d(t,"FangCloudSDK",function(){return a})},L7QuDhxB:function(e,t,n){e.exports={"project-selector":"project-selector__1iyC","hint-wrapper":"hint-wrapper__c7kX"}},"L9cD+1dr":function(e,t,n){e.exports={"common-group":"common-group__1mwB"}},LA31BA3Q:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return s});var r=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=1/0),n>t?n=t:n<e&&(n=e),n},o=function(e){return Math.floor(60*e)},i=function(e){return/^\d{0,4}(\.?\d?)$/.test(e)},s=function(e){return/^\d*(\.?\d?)$/.test(e)}},LAbDljvG:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<span class="work-version-description-text';return e.isCustomizedDes&&(o+=" customized"),o+='"> '+r(e.description)+"</span>",e.isMainVersion&&(o+=' <span class="main-version-label">'+tb_i18n.get("work.versions.main.label")+"</span>"),o}},LCmaF8oo:function(e,t,n){e.exports={"bulk-action__trigger":"bulk-action__trigger__AO_O","task-bulk-set-sprint__trigger":"task-bulk-set-sprint__trigger__1L_D","bulk-action__trigger--disabled":"bulk-action__trigger--disabled__Koq4","task-bulk-set-sprint__trigger--disabled":"task-bulk-set-sprint__trigger--disabled__2DXk","bulk-action__trigger-text":"bulk-action__trigger-text__PTeD","task-bulk-set-sprint__trigger-text":"task-bulk-set-sprint__trigger-text__291C","bulk-action__trigger-icon":"bulk-action__trigger-icon__1wwX","task-bulk-set-sprint__trigger-icon":"task-bulk-set-sprint__trigger-icon__2Kac"}},LDaA6QVr:function(e,t,n){e.exports={selector:"selector__2VgG","selector-body":"selector-body__mFRG","selector-footer":"selector-footer__1Raw",item:"item__3dk7","item-wrapper":"item-wrapper__2lHg","item-content":"item-content__n9-A","item-name":"item-name__2NNN","item-count":"item-count__1IPT","item-toggler":"item-toggler__1i0_","item-toggler-dot":"item-toggler-dot__3azo","select-handler":"select-handler__1LVo",tree:"tree__3aao",radio:"radio__3CR9","radio-inner":"radio-inner__3ZDO",disabled:"disabled__1uXF"}},"LG/I01pk":function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;r=n("+At+8P7t"),i=n("2NlL4uak"),o=n("VWt7MFBv"),s=n("vmWJWrVe"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="TagPostsView",t.prototype.className="tag-posts-view fade",t.prototype.initialize=function(e){var t;return this.tagModel=e.tagModel,this.postsCollection=i.get("tag_"+this.tagModel.id),this.renderBasic(),this.tagModel.fetchRelation("posts",{attrs:{page:1,count:500,_projectId:e._projectId},success:(t=this,function(n){if(t.$el)return t.postsCollection.reset(n),t.requestSubView(o,{postsCollection:t.postsCollection}).$el.appendTo(t.$el),t.refreshCount(),t.postsCollection.length&&t.$el.show().addClass("in"),t.listen(),"function"==typeof e.onFinish?e.onFinish():void 0}),error:function(){return"function"==typeof e.onFinish?e.onFinish():void 0}}),this},t.prototype.renderBasic=function(){return this.$el.html(r()).hide(),this},t.prototype.listen=function(){var e;return this.listenTo(this.postsCollection,"add remove",this.refreshCount),this.listenTo(this.postsCollection,"change:tagIds",(e=this,function(t,n){if(!((null!=n?n.indexOf(e.tagModel.id):void 0)>=0))return e.postsCollection.remove(t),e.tagModel.refreshCache()})),this},t.prototype.refreshCount=function(){var e;return this.tagModel.set("postsCount",this.postsCollection.length),this.$(".posts-count").text(this.postsCollection.length),e=this.postsCollection.length?"show":"hide",this.$el[e](),this},t}()},LH2ib2zT:function(e,t,n){e.exports=n.p+"images/f_zhi@2x.13038b9e.png"},LK1lvkr8:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("u//1fy1x"),o=n("7lRKyXCu"),i=n.n(o),s=Object(r.default)(i.a)},LOm4bZHF:function(e,t,n){},LRNCoLB3:function(e,t){e.exports=function(e){var t='<div class="today-tasks undone-tasks member-tasks';return e.showCreate||(t+=" moveUp"),t+='" data-gta="event" data-label="member today tasks" data-value="member today tasks"> <h3>'+tb_i18n.get("member.tasks.today.tasks")+'</h3> <ul class="task-list"></ul></div><div class="recent-tasks undone-tasks member-tasks" data-gta="event" data-label="member recent tasks" data-value="member recent tasks"> <h3>'+tb_i18n.get("member.tasks.recent.tasks")+'</h3> <ul class="task-list"></ul></div><div class="future-tasks undone-tasks member-tasks" data-gta="event" data-label="member future tasks" data-value="member future tasks"> <h3>'+tb_i18n.get("member.tasks.future.tasks")+'</h3> <ul class="task-list"></ul></div>'}},LTyGfmzp:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m={}.hasOwnProperty;h=n("a+N5u/Cl"),d=n("vmWJWrVe"),p=n("3eMzznN/"),c=n("YdqH4v7N"),u=n("GESwhXbR").Toast,i=n("5gmgag9c"),s=n("ocgd+n+k"),r=n("Y9CdjF8l"),l=n("f3h/zoSc"),a=n("ERMGEf4U"),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)m.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,d),t.prototype.viewName="JinshujuPickerView",t.prototype.className="jinshuju-picker-view",t.prototype.events={"click .jinshuju.check-box:not(.closed)":"selectItem","keyup .detail-search":"searchDataBySerialNumbers","click .search-btn":"searchDataBySerialNumbers"},t.prototype.initialize=function(e){var t;return t=e.token,this.bindUrl=e.bindUrl,this.el=e.el,this.$menuEl=e.menuEl,this.$detailEl=e.detailEl,this.onSelect=e.onSelect,this.jinshuju=new i({accessToken:t}),this.checkedItems=[],this.load(),this.listen()},t.prototype.load=function(){return this.showLoadingIndicator(this.$menuEl),this.jinshuju.getForms({success:(e=this,function(t){return e.hideLoadingIndicator(e.$menuEl),e.renderItems(t)}),error:this.handleError.bind(this)});var e},t.prototype.listen=function(){return this.listenTo(this,"refreshToken",function(){return this.$el.html(a({bindUrl:this.bindUrl}))}),this.listenTo(this,"onSelect",this.updateSelected)},t.prototype.renderItems=function(e){return this.$menuEl.append(s(e))},t.prototype.renderDetail=function(e){var t,n,o,i,s;if(this.checkedItems=[],this.trigger("onSelect"),this.currentFormToken=e,i=this.getForm(this.currentFormToken))return t=p.formatDate(i.created_at).dateTimeString,n=tb_i18n.get("jinshuju.form.detail.createDate.des",t),o=this.jinshuju.formStatusSemantization(i),s=this.jinshuju.formTypesData(i),this.$detailEl.html(r({createDateDes:n,formStatusDes:o,typesData:s})),this.setupScroll(this.$detailEl),this.$searchInputWrapper=this.$(".search-input-wrapper"),this.$detailSearch=this.$(".detail-search"),this.$detailSearchWrapper=this.$(".detail-search-wrapper")},t.prototype.updateSelected=function(){return this.onSelect(h.map(this.checkedItems,function(e){return{type:"jinshuju",data:e}}))},t.prototype.getForm=function(e){return h.find(this.jinshuju.cache.forms,function(t){return t.token===e})},t.prototype.selectItem=function(e){var t,n,r;return(t=$(e.currentTarget)).toggleClass("checked"),r=t.data("type"),n=t.data("number"),"detail"!==r||n?this.dealCheckedItems(r,n):(this.$searchInputWrapper.toggleClass("hide"),this.$searchInputWrapper.hasClass("hide")?(this.$detailSearch.val(""),this.$detailSearchWrapper.empty(),this.removeCheckedItem("detail")):this.$detailSearch.focusAtEnd(),this.slideTo(this.$searchInputWrapper)),this.trigger("onSelect")},t.prototype.getFormDetail=function(){return new Promise((e=this,function(t,n){return e.jinshuju.getFormDetail(e.currentFormToken,{success:t,error:function(e){return n(e)}})}));var e},t.prototype.getItemsBySerialNumbers=function(e){return new Promise((t=this,function(n,r){return t.jinshuju.getItemsBySerialNumbers(t.currentFormToken,e,{success:n,error:function(e){return r(e)}})}));var t},t.prototype.getSerialNumbers=function(e){return h.chain(e.trim().split(",")).map(function(e){return e.trim()}).filter(function(e){return/^[1-9]\d*$/.test(e)}).uniq().value()},t.prototype.formatRawEntries=function(e,t,n){var r,o;return o=this.jinshuju.getReadableItemsData(e,n),r=this.getForm(t),h.map(o,function(e){return h.extend({},r,{tb_type:"detail"},e)})},t.prototype.updateCheckedItemsWithEntries=function(e){var t;return this.removeCheckedItem("detail"),this.formEntries=[],h.each(e,(t=this,function(e){var n;return n={_id:e.id,data:e},t.checkedItems.push(n),t.formEntries.push(n)})),this.trigger("onSelect")},t.prototype.searchDataBySerialNumbers=function(e){var t,n,r;if((null==e.keyCode||13===e.keyCode)&&(t=this.$detailSearch.val(),(n=this.getSerialNumbers(t)).length))return this.showLoadingIndicator(this.$detailSearchWrapper),this.slideTo(this.$detailSearchWrapper),Promise.all([this.getFormDetail(),this.getItemsBySerialNumbers(n)]).then((r=this,function(e){var t;return r.hideLoadingIndicator(r.$detailSearchWrapper),t=r.formatRawEntries(e[0],r.currentFormToken,e[1]),h.isEmpty(t)?u.info(tb_i18n.get("jinshuju.entries.search.empty.hint")):(r.$detailSearchWrapper.empty().html(l(t)),r.slideTo(r.$detailSearchWrapper.find("li:last-of-type")),r.updateCheckedItemsWithEntries(t))})).catch(this.handleError.bind(this))},t.prototype.dealCheckedItems=function(e,t){return this.queryCheckedItem(e,t)?this.removeCheckedItem(e,t):this.addCheckedItem(e,t)},t.prototype.queryCheckedItem=function(e,t){var n;return n=this.currentFormToken,h.find(this.checkedItems,function(r){var o;return r.data.token===n&&r.data.tb_type===e&&(null!=(o=r.data.entry)?o.serial_number:void 0)===t})},t.prototype.addCheckedItem=function(e,t){var n,r,o,i;return t?n=h.find(this.formEntries,function(e){return e.data.entry.serial_number===t}):(o=this.getForm(this.currentFormToken),i=h.find(this.jinshuju.formTypesData(o),function(t){return t.tb_type===e}),r=h.pick(i,["tb_type","url"]),n={_id:o.id,data:h.extend(r,o)}),this.checkedItems.push(n)},t.prototype.removeCheckedItem=function(e,t){var n;return n=this.currentFormToken,this.checkedItems=h.reject(this.checkedItems,function(r){var o,i;return o=r.data.token===n&&r.data.tb_type===e,t&&(o=o&&(null!=(i=r.data.entry)?i.serial_number:void 0)===t),o})},t.prototype.handleError=function(e){if(e)return 401===e.code?this.trigger("refreshToken"):u.error(tb_i18n.get("integration.service.error"))},t}(),h.extend(o.prototype,c),e.exports=o},"LU3fW/qa":function(e,t,n){var r,o,i={}.hasOwnProperty;o=n("vmWJWrVe"),r=n("2yD8PYrn"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="TagListView",t.prototype.className="tag-list-view",t.prototype.initialize=function(e){return this.tagsCollection=e.tagsCollection,this.render(),this.listen()},t.prototype.listen=function(){return this.listenTo(this.tagsCollection,"add",function(e){return this.renderTag(e,!0)})},t.prototype.render=function(){return this.tagsCollection.each((e=this,function(t){return e.renderTag(t)}));var e},t.prototype.renderTag=function(e,t){var n;return null==t&&(t=!1),n=t?"prependTo":"appendTo",this.requestSubView(r,{tagModel:e}).$el[n](this.$el)},t}()},Li2ycGYD:function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;c=n("sa1Ed382"),s=n("GESwhXbR").Toast,o=n("odY26VIi"),a=n("vmWJWrVe"),i=n("Ydeu5xb8"),r=n("DlSfLmL2"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="AssignTeamView",t.prototype.className="assign-team-view modal-dialog flex-vert",t.prototype.events={"click .submit":"submit"},t.prototype.initialize=function(e){return null==e&&(e={}),this.options=e,this.renderBasic()},t.prototype.renderBasic=function(){var e,t;return e=this.requestSubView(i,{teamTree:this.options.teamTree,teamTreeState:this.options.teamTreeState,onSelect:(t=this,function(e){return t.currentTeamId=e[0],t.$(".submit").removeClass("disabled")})}),this.$el.html(r()),this.$(".modal-body").html(e.$el)},t.prototype.submit=function(){var e,t,n,r,i;return this.close(),t=this.options,r=t.success,n=t.gta,i=n.type,e=n.control,new o([],{boundToObjectType:"team",_boundToObjectId:this.currentTeamId}).addMember({email:this.options.memberModel.toJSON().email},{success:function(){return r(),s.success(tb_i18n.get("add.success")),c.gta.event({type:i,control:e,action:"added member",category:"team"})}})},t.prototype.close=function(){var e,t,n;return(null!=(t=this.parentView)?t.close:void 0)?"function"==typeof(e=this.parentView).close?e.close():void 0:null!=(n=this.parentView)?n.remove():void 0},t}()},LjKgLNPt:function(e,t){e.exports=function(e){var t='<h3 class="clearfix header-handler"> ';return e.showCreate&&(t+=' <a class="action-handler flex-static task-create-handler link-add-handler" data-gta="{action: \'add content\', type: \'task\'}"> <span class="icon icon-circle-plus-o"></span> <span>'+tb_i18n.get("task.creator.add")+"</span> </a> "),t+=" ",e.showHandover&&(t+=" <a class=\"action-handler flex-static task-handover-handler link-add-handler\" data-gta=\"{action: 'filter content', type: 'handover task', segment: 'Org Member Info'}\"> <span class=\"icon icon-user-switch\"></span> <span>"+tb_i18n.get("member.handover.tasks")+"</span> </a> "),t+=' <div class="pull-right"> <a class="tasks-board-date-menu"> <span class="date-menu-title">'+tb_i18n.get("tasklist.bar.total.tasks")+'</span> <i class="icon icon-chevron-down"></i> </a> </div></h3><div class="tasks-container"></div>'}},LjpfMXQ9:function(e,t,n){"use strict";n.r(t),n.d(t,"getSubscribers",function(){return g}),n.d(t,"putSubscribers",function(){return v}),n.d(t,"getTasks",function(){return b}),n.d(t,"getDependencies",function(){return y}),n.d(t,"updateTaskMoveDefault",function(){return k}),n.d(t,"updateTask",function(){return _}),n.d(t,"autoAdjustConflicts",function(){return w}),n.d(t,"getUnArrangedTasks",function(){return C});var r=n("mrSGxOB2"),o=n("4c1CS0b3"),i=n("LvDlAkAJ"),s=n.n(i),a=n("sa1Ed382"),c=n("s0r7VfKc"),l=n("77NnVLwu"),u=n.n(l),p=n("oq1bWpp9"),d=n.n(p),h=n("bvmrLhnu"),m=n("T6KpLPMz");function f(e){return r.a({},e,{body:r.a({},e.body,{users:e.body.users.filter(function(e){return e.member}).map(function(e){var t=e.member,n=r.g(e,["member"]);return r.a({},n,{name:t.name})})})})}function g(e){return c.default.fetch.get("organizations/"+e+"/subscribers/gantt").map(f)}function v(e,t,n){var o,i,a=n.$add,l=n.$del,u={};if(a){var p=void 0;if("users"===t){var d=a,h=d.users,m=d.addFromTeams,g=d.addFromGroups;p=r.a({},h?{"body.users":h}:{},m?{addFromTeams:m}:{},g?{addFromGroups:g}:{})}else(o={})["body."+t]=a,p=o;u=s.a.merge(u,{$add:p})}return l&&(u=s.a.merge(u,{$del:(i={},i["body."+t]=l,i)})),c.default.fetch.put("organizations/"+e+"/subscribers/gantt",u).map(f)}function b(e){if(s.a.isEmpty(e._executorIds)&&s.a.isEmpty(e._projectIds))return o.Observable.of([]);var t=e._organizationId,n=e._projectIds,r=e.startDate,i=e.endDate;return c.default.fetch.get("tasks/gantt/"+(n?"projects":"users"),{_organizationId:t,startDate:r,endDate:i})}function y(e,t){if(s.a.isEmpty(t._executorIds)&&s.a.isEmpty(t._projectIds))return o.Observable.of([]);var n=t._organizationId,r=t.startDate,i=t.endDate;return c.default.fetch.get("dependencies/gantt/"+e,{_organizationId:n,startDate:r,endDate:i})}function k(e,t){return c.default.getProject(t).values().concatMap(function(n){var o=r.f(n,1)[0];return Object(h.isTaskflowEnabled)(o)?function(e,t){return c.default.getScenarioFieldConfigs(t,"task",{withTaskflowstatus:!0}).take(1).concatMap(function(t){var n=r.f(t,1)[0];if(!n)throw null;var o=n.taskflowstatuses;if(!o||!o.length)throw null;var i=o.find(function(e){return Object(m.isValidUndoneTaskStatusKind)(e.kind)});if(!i)throw null;return c.default.updateTaskTaskflowStatus(e,i._id,n._id)})}(e,t):function(e,t){return c.default.getTasklists(t).values().concatMap(function(e){var t=r.f(e,1)[0];return c.default.getTasklistStages(t._id).values().map(function(e){return{_stageId:r.f(e,1)[0]._id,isKeepDependency:!0}})}).concatMap(function(t){return c.default.updateTaskStage(e,t)})}(e,t)})}function _(e,t,n){var o=n._executorId,i=c.default.updateTask(e._id,n);return t&&o?c.default.getProject(t).values().concatMap(function(n){var i=r.f(n,1)[0];if(new u.a(i,{bindByMatrix:!1}),!new d.a(e,{bindByMatrix:!1}).hasPermission("put.executor"))throw null;return c.default.getMembers(t,{_userId:o}).values()}).concatMap(function(e){if(!e.length)throw null;return i}):i}function w(e){return a.gta.event({action:"resolve conflicting dependency",type:"task"}),c.default.fetch.put("dependencies/tasks/auto-adjust",{taskIds:e}).do(function(e){var t=e.adjustedTasks,n="complete";e.noPermissions.length>0&&(n="partial"),0===t.length&&(n="none"),a.gta.event({action:"resolved conflicting dependency",type:"task",category:n})})}function C(e,t,n){return c.default.fetch.get("tasks/gantt/"+(t?"projects":"users"),r.a({},t&&{_projectIds:t},n&&{_executorIds:n},{_organizationId:e,isScheduled:!1}))}},LjrGGsE7:function(e,t){e.exports=function(e){var t='<div class="preview flex-fill '+e.type+"-previewer";return"text"===e.type&&(t+=" thin-scroll"),t+='"></div><div class="previewer-updater-wrapper"></div><div class="previewer-toolbar-wrapper"></div>'}},LjypM3NI:function(e,t,n){},LkuSL3mR:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("17x9q+7Q"),i=n("q1tIBJhx"),s=n("tLZJUYWX"),a=n("a+N5u/Cl"),c=n("GESwhXbR"),l=n("ctsD9mWH"),u=n("uaT+k2Om"),p=n("TSYQbtd+"),d=n.n(p),h=n("SaPkAFtJ"),m=["top","right","bottom","left"],f=function(e){function t(t){var n=e.call(this,t)||this;return n.refRoot=function(e){n.rootEl=e},n.setRootStyle=function(e){var t=e.startPoint,r=e.endPoint;t&&r&&n.rootEl.setAttribute("style","\n        width: "+Math.abs(t.x-r.x)+"px;\n        height: "+Math.abs(t.y-r.y)+"px;\n        left: "+Math.min(t.x,r.x)+"px;\n        top: "+Math.min(t.y,r.y)+"px;\n      ")},n.onMouseDown=function(e){!n.props.creatorMode&&n.props.onClick(e)},n.onDragStart=function(e){var t,r,o=e.mouseDownEvent.target;if(o===n.rootEl)t="grab";else{var i=o.classList,s=o.dataset;if(i.contains("skitch-rect-border"))r=[s.direction],t=["left","right"].indexOf(s.direction)>=0?"ew-resize":"ns-resize";else if(i.contains("skitch-rect-corner")){r=[s.verticalDirection,s.horizontalDirection];var a=s.verticalDirection,c=s.horizontalDirection;t="top"===a?{left:"nwse-resize",right:"nesw-resize"}[c]:{right:"nwse-resize",left:"nesw-resize"}[c]}}n.dragTypes=r,n.bodyCursorCls="cursor-"+t,document.body.classList.add(n.bodyCursorCls),n.props.onDragStart&&n.props.onDragStart()},n.onDragging=function(e){e.mouseDownEvent.target===n.rootEl?n.props.onMove&&n.props.onMove(e):n.dragTypes&&n.props.onResize&&n.props.onResize(e,n.dragTypes)},n.onDrop=function(){n.bodyCursorCls&&(document.body.classList.remove(n.bodyCursorCls),n.bodyCursorCls=void 0),n.props.onDrop&&n.props.onDrop(),n.dragTypes=void 0},n.state={mounted:!1},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.startPoint,n=e.endPoint;this.setRootStyle({startPoint:t,endPoint:n}),this.setState({mounted:!0})},t.prototype.componentDidUpdate=function(){var e=this.props,t=e.startPoint,n=e.endPoint;this.setRootStyle({startPoint:t,endPoint:n})},t.prototype.componentWillUnmount=function(){this.bodyCursorCls&&document.body.classList.remove(this.bodyCursorCls)},t.prototype.renderDot=function(){var e=this.props,t=e.num;return!e.creatorMode&&i.createElement("span",{className:"skitch-dot"},t)},t.prototype.renderCorners=function(){return this.props.showActions&&["top","bottom"].map(function(e){return["left","right"].map(function(t){return i.createElement("div",{key:e+"-"+t,"data-vertical-direction":e,"data-horizontal-direction":t,className:"skitch-rect-corner skitch-rect__"+e+"-"+t+"-corner"})})})},t.prototype.renderBorders=function(){return this.props.showActions&&m.map(function(e){return i.createElement("div",{key:e,"data-direction":e,className:"skitch-rect-border skitch-rect__"+e+"-border"})})},t.prototype.renderDraggable=function(){return this.props.showActions&&this.state.mounted&&i.createElement(h.a,{targetEl:this.rootEl,onDrop:this.onDrop,onDragStart:this.onDragStart,onDragging:this.onDragging})},t.prototype.render=function(){var e=d()("skitch-rect",{"is-creating":this.props.showActions});return i.createElement("div",{ref:this.refRoot,onMouseDown:this.onMouseDown,className:e},this.renderBorders(),this.renderCorners(),this.renderDot(),this.renderDraggable())},t.defaultProps={creatorMode:!1,showActions:!1,onClick:a.noop},t}(i.PureComponent),g=n("Y5VZwSuJ"),v={plus:187,equal_ff:61,minus:189,underscore_ff:173,zero:48,one:49},b=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.onKeydown=function(e){if(e.ctrlKey||e.metaKey)switch(a.values(v).indexOf(e.which)>=0&&(e.preventDefault(),e.stopPropagation()),e.which){case v.plus:case v.equal_ff:r.onZoomIn();break;case v.minus:case v.underscore_ff:r.onZoomOut();break;case v.zero:r.onZoomToOrigin();break;case v.one:r.onZoomToNatural()}};var o=G(n.uuid),i=o.onZoomIn,s=o.onZoomOut,c=o.onZoomToOrigin,l=o.onZoomToNatural;return r.onZoomIn=i,r.onZoomOut=s,r.onZoomToOrigin=c,r.onZoomToNatural=l,r}return r.d(t,e),t.prototype.componentDidMount=function(){window.addEventListener("keydown",this.onKeydown)},t.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.onKeydown)},t.prototype.render=function(){var e=this.props,t=e.src,n=e.style,r=e.onClick,o=e.imageLoader;return i.createElement("div",{className:"image-mask__image-wrapper",onClick:r},i.createElement(g.b,{src:t,style:n,loader:o}))},t.contextTypes={uuid:o.string},t}(i.PureComponent),y=n("XezW+rbT"),k=n("sa1Ed382"),_=n("SCi816Ey");n("2X3OEYhr");var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=i.createRef(),t.onHighlightShown=function(){t.props.onHighlightShown&&t.props.onHighlightShown()},t.scrollIntoView=function(){t.ref.current&&_(t.ref.current,"scroll",{container:t.ref.current.parentNode,duration:500,offset:-60})},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.ref.current&&this.ref.current.addEventListener("animationend",this.onHighlightShown),this.props.active&&this.scrollIntoView()},t.prototype.componentDidUpdate=function(){this.props.highlight&&this.scrollIntoView()},t.prototype.componentWillUnmount=function(){this.ref.current&&this.ref.current.removeEventListener("animationend",this.onHighlightShown)},t.prototype.render=function(){var e=this.props,t=e.highlight,n=e.activity,r=e.onReply,o=e.onEdit,s=e.onDelete,a=e.canCommentSkitch,c=k.user.id===n.creator._id,l=d()("comment-content-item",{highlight:t});return i.createElement("div",{ref:this.ref,className:l},i.createElement(y.CommentItem,{key:n._id,id:n._id,creator:n.creator,createdDate:n.created,content:n.comment,showReply:!c&&a,showEdit:c,showDelete:c,onReply:r,onEdit:o,onDelete:s}))},t}(i.PureComponent),C=function(e){function t(t){var n=e.call(this,t)||this;return n.mentions=[],n.refCreator=function(e){n.creator=e},n.isCommentActive=function(e,t){return n.props.activityId?e===n.props.activityId:t===n.props.activities.length-1},n.onReplyComment=function(e){var t={};n.mentions.forEach(function(e){t[e.id]=e.name}),t[e.id]?n.setState(r.a({},n.state,{mention:e})):(n.mentions=n.mentions.concat(e),n.setState(r.a({},n.state,{mention:e})))},n.onSubmitComment=function(e,t){var o=n.mentions.filter(function(t){return e.indexOf("@"+t.name)>=0});return n.props.onSubmit(e,o,t).then(function(){n.state.mounted&&n.setState(r.a({},n.state,{mention:void 0}))})},n.onDeleteSkitchFromComment=function(){n.props.onDeleteSkitch(!0)},n.onDeleteSkitch=function(){n.props.onDeleteSkitch()},n.state={mention:void 0,mounted:!1},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.setState({mounted:!0})},t.prototype.componentDidUpdate=function(e){var t=this;this.props.autoFocus&&this.props.opened&&this.props.opened!==e.opened&&a.delay(function(){return t.creator&&t.creator.focus()})},t.prototype.componentWillUnmount=function(){this.setState({mounted:!1})},t.prototype.renderCommentCreator=function(){return this.props.canCommentSkitch&&i.createElement("footer",{className:"comment-creator-wrapper"},i.createElement(y.CommentCreator,{ref:this.refCreator,autoFocus:this.props.autoFocus,onSubmit:this.onSubmitComment,mention:this.state.mention}))},t.prototype.renderComments=function(){var e=this;return this.props.activities.map(function(t,n){var r="activity.work.create.skitch"===t.action?e.onDeleteSkitchFromComment:e.props.onDeleteComment;return i.createElement(w,{key:t._id,activity:t,active:e.isCommentActive(t._id,n),highlight:t._id===e.props.activityId,onReply:e.onReplyComment,onEdit:e.props.onEditComment,onDelete:r,onHighlightShown:e.props.onHighlightShown,canCommentSkitch:e.props.canCommentSkitch})})},t.prototype.renderHeader=function(){return this.props.showActions&&this.props.activities.length>0&&i.createElement("header",{className:"skitch-header"},i.createElement(c.TextButton,{onClick:this.onDeleteSkitch},i.createElement(c.Icon,{name:"trash",size:14}),s.get("skitch.handler.delete")))},t.prototype.renderContent=function(){var e={maxHeight:this.props.maxHeight};return i.createElement("div",{className:"skitch-comments-wrapper"},i.createElement("div",{className:"skitch-comments",style:e},this.renderHeader(),i.createElement("ul",{className:"comment-list thin-scroll"},this.renderComments()),this.renderCommentCreator()))},t.prototype.render=function(){return i.createElement(c.Dropdown,{action:"click",content:this.renderContent(),nested:!0,persistence:!0,autoDestroy:this.props.autoDestroy,arrow:!0,offset:[0,4],opened:this.state.mounted&&this.props.opened,onVisibleChange:this.props.onVisibleChange,placement:"bottomLeft"},this.props.children)},t.defaultProps={opened:!1,autoFocus:!1,canCommentSkitch:!0,showActions:!0},t}(i.PureComponent),S=n("sa1Ed382");n("7RH+tFqr");var E=480,T=280,I=function(e){function t(t){var n=e.call(this,t)||this;return n.initialMount=!0,n.refRoot=function(e){n.rootEl=e},n.refSkitchCreator=function(e){n.skitchCreator=e},n.refSkitchCreatorRect=function(e){n.skitchCreatorRect=e},n.isSkitchActive=function(e){return Boolean(n.state.openedSkitchId&&n.state.openedSkitchId===e)},n.getXCoordinate=function(e,t){void 0===t&&(t=0);var r=n.getCurrentRect().width;return Math.max(Math.min(r-t,e),0)},n.getYCoordinate=function(e,t){void 0===t&&(t=0);var r=n.getCurrentRect().height;return Math.max(Math.min(r-t,e),0)},n.getRectData=function(){return{width:Math.abs(n.startPoint.x-n.endPoint.x),height:Math.abs(n.startPoint.y-n.endPoint.y),x:Math.min(n.startPoint.x,n.endPoint.x),y:Math.min(n.startPoint.y,n.endPoint.y)}},n.getActivities=function(e){return n.props.activities.filter(function(t){return t.content.skitchId===e})},n.getCurrentRect=function(){return n.rootEl?n.rootEl.getBoundingClientRect():n.props.imageRect},n.getMaxHeight=function(e,t){if(void 0===t&&(t=0),n.rootEl){var r=n.getCurrentRect(),o=r.top+e,i=r.bottom-e-t;return Math.max(T,Math.min(Math.max(o,i)-160,E))}},n.onZoom=function(e){var t=n.props.onClickToZoom,r=e.clientX,o=e.clientY,i=e.nativeEvent,s=i.offsetX,a=i.offsetY,c=n.getCurrentRect();t({clientX:r,clientY:o,coordX:s/c.width,coordY:a/c.height})},n.isTargetDraggable=function(e){for(;e.parentElement;){if(e.classList.contains("skitch-comments-wrapper")||e.classList.contains("skitch-rect")&&n.props.isCreating)return!1;e=e.parentElement}return!0},n.onAddSkitch=function(e){var t=e.clientX,r=e.clientY;S.gta.event({action:"begin skitch"});var o=n.getCurrentRect(),i=o.top,s=o.left,a=n.getXCoordinate(t-s-24,48),c=n.getYCoordinate(r-i-24,48);n.startPoint={x:a,y:c},n.endPoint={x:a+48,y:c+48},n.setValidCoordsWithStaticWidth(),n.refreshCreatorRect(),n.openCreator()},n.onSkitchCreatorSubmit=function(){var e,t=Promise.resolve(),r=n.props.creatorActivities;if(0===r.length)return t;n.props.clearCreatorActivities();for(var o=n.props.getCorrectCoords(n.validStartPoint),i=n.props.getCorrectCoords(n.validEndPoint),s=function(s){t=t.then(function(){var t=r[s];return 0===s?n.onCreate(t.comment,{startPoint:o,endPoint:i},!1).then(function(t){e=t.content.skitchId}):n.props.onReplySkitch({content:t.comment,skitchId:e,mentions:[]},!1)})},a=0;a<r.length;a++)s(a);return t},n.onCreate=function(e,t,r){var o=t.startPoint,i=t.endPoint,s={content:e,coordinate:{width:Math.abs(o.x-i.x),height:Math.abs(o.y-i.y),x:Math.min(o.x,i.x),y:Math.min(o.y,i.y)}};return n.props.onCreateSkitch(s,r)},n.onClickSkitch=function(e){e.stopPropagation(),S.gta.event({action:"open detail",type:"skitch",control:"Picture"})},n.onMoveRect=function(e){var t=e.mouseMoveEvent,r=e.previous,o=n.getRectData(),i=o.x,s=o.y,a=o.width,c=o.height,l=i+(t.clientX-r.mouseMoveEvent.clientX),u=s+(t.clientY-r.mouseMoveEvent.clientY);n.startPoint={x:l,y:u},n.endPoint={x:l+a,y:u+c},n.setValidCoordsWithStaticWidth(),n.refreshCreatorRect()},n.onResizeRect=function(e,t){var r=e.mouseMoveEvent,o=e.previous,i=r.clientX-o.mouseMoveEvent.clientX,s=r.clientY-o.mouseMoveEvent.clientY,a=t.indexOf("left")>=0,c=t.indexOf("top")>=0,l=t.filter(function(e){return["left","right"].indexOf(e)>=0}).length>0,u=t.filter(function(e){return["top","bottom"].indexOf(e)>=0}).length>0,p=n.endPoint.x,d=n.endPoint.y,h=n.startPoint.x,m=n.startPoint.y;n.startPoint={x:h+(a?1:0)*i,y:m+(c?1:0)*s},n.endPoint={x:p+(l&&!a?1:0)*i,y:d+(u&&!c?1:0)*s};var f={left:a,top:c,right:l&&!a,bottom:u&&!c};n.setValidCoordsWhileResizing(f),n.refreshCreatorRect()},n.onDragging=function(e){var t=e.mouseDownEvent,r=e.mouseMoveEvent,o=n.getCurrentRect(),i=o.left,s=o.top,a={x:t.clientX-i,y:t.clientY-s},c={x:r.clientX-i,y:r.clientY-s},l=Math.abs(a.x-c.x),u=Math.abs(a.y-c.y),p=Math.min(a.x,c.x),d=Math.min(a.y,c.y);n.startPoint={x:p,y:d},n.endPoint={x:p+l,y:d+u},n.setValidCoordsWithStaticStartPoint(),n.refreshCreatorRect()},n.onDragStart=function(){n.silentCloseCreator()},n.onDrop=function(){n.openCreator(),n.startPoint=n.validStartPoint,n.endPoint=n.validEndPoint},n.onCreatorClose=function(){n.onSkitchCreatorSubmit(),n.clearSkitchCreatorRect()},n.onCreatorVisibleChange=function(e){!e&&n.closeCreator()},n.onVisibleChange=function(e,t){var r=n.activeSkitchId;n.activeSkitchId=void 0,t&&(r=e,n.closeCreator()),r&&n.state.openedSkitchId===r||(t?n.setState({openedSkitchId:e}):n.clearActiveIds())},n.openCreator=function(){n.setState({creatorOpened:!0})},n.closeCreator=function(){n.state.creatorOpened&&n.onCreatorClose(),n.setState({creatorOpened:!1})},n.silentCloseCreator=function(){n.setState({creatorOpened:!1})},n.clearActiveIds=function(){n.setState({openedSkitchId:void 0,activeActivityId:void 0,creatorOpened:!1})},n.clearSkitchCreatorRect=function(){n.startPoint=void 0,n.endPoint=void 0,n.clearValidCoords(),n.refreshCreatorRect()},n.clearValidCoords=function(){n.validStartPoint=void 0,n.validEndPoint=void 0},n.setValidCoordsWhileResizing=function(e){var t=n.startPoint.x,r=n.startPoint.y,o=n.endPoint.x,i=n.endPoint.y;e.left?t=Math.min(t,o):e.right&&(o=Math.max(t,o)),e.top?r=Math.min(r,i):e.bottom&&(i=Math.max(r,i)),n.validStartPoint={x:n.getXCoordinate(t),y:n.getYCoordinate(r)},n.validEndPoint={x:n.getXCoordinate(o),y:n.getYCoordinate(i)}},n.setValidCoordsWithStaticStartPoint=function(){var e=n.getCurrentRect(),t=e.width,r=e.height,o=n.getRectData(),i=o.x,s=o.y,a=o.width,c=o.height,l=n.getXCoordinate(i,Math.min(t,i+a)-i),u=n.getYCoordinate(s,Math.min(r,s+c)-s);n.validStartPoint={x:l,y:u},n.validEndPoint={x:n.getXCoordinate(Math.min(t,i+a)),y:n.getYCoordinate(Math.min(r,s+c))}},n.setValidCoordsWithStaticWidth=function(){var e=n.getRectData(),t=e.x,r=e.y,o=e.width,i=e.height,s=n.getXCoordinate(t,o),a=n.getYCoordinate(r,i);n.validStartPoint={x:s,y:a},n.validEndPoint={x:s+o,y:a+i}},n.refreshCreatorRect=function(){if(n.startPoint){var e=n.validStartPoint,t=n.validEndPoint;n.setState({showSkitchCreatorRect:!0},function(){n.skitchCreatorRect&&n.skitchCreatorRect.setRootStyle({startPoint:e,endPoint:t||e})})}else n.setState({showSkitchCreatorRect:!1})},n.clearActivityId=function(){n.setState({activeActivityId:void 0})},n.onCreatorFakeSubmit=function(e,t,r){return n.props.onCreatorFakeSubmit({content:e},r)},n.state={openedSkitchId:t.activeSkitchId,activeActivityId:t.activeActivityId,creatorOpened:!1,showSkitchCreatorRect:!1},n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t={},n=e.isCreating,r=e.activeSkitchId,o=e.activeActivityId;r&&(t.openedSkitchId=r,this.activeSkitchId=r),o&&(t.activeActivityId=o),this.props.isCreating!==n&&this.closeCreator(),this.setState(t)},t.prototype.shouldComponentUpdate=function(e,t){var n=a.chain(e).omit(function(e){return a.isUndefined(e)}).keys().value(),r=a.pick(this.props,n),o=a.pick(e,n);return!a.isEqual(r,o)||!a.isEqual(this.state,t)},t.prototype.renderSkitchTip=function(e){if("point"===e.type){var t=this.props.getCorrectStyle(e.coordinate),n={left:o=t.x,top:s=t.y};return i.createElement("span",{className:"skitch-dot",style:n,onClick:this.onClickSkitch},e.num)}if("rectangle"===e.type){var r=e.coordinate,o=r.x,s=r.y,a=r.width,c=r.height,l=this.props.getCorrectStyle({x:o,y:s}),u=this.props.getCorrectStyle({x:o+a,y:s+c});return i.createElement(f,{startPoint:l,endPoint:u,num:e.num})}return null},t.prototype.renderSkitchLayer=function(){var e=this,t=this.props.skitches;return this.props.skitchMode&&t&&a.sortBy(t,"num").map(function(t){var n=t._id,r=e.getActivities(n),o=e.props.getCorrectStyle(t.coordinate).y;return r.length>0&&i.createElement(C,{key:n,activities:r,onSubmit:function(t,r,o){return e.props.onReplySkitch({content:t,skitchId:n,mentions:r},o)},opened:e.isSkitchActive(n),maxHeight:e.getMaxHeight(o,t.coordinate.height),onEditComment:e.props.onEditComment,onDeleteComment:e.props.onDeleteComment,onDeleteSkitch:function(t){e.props.onDeleteSkitch(n,t)},canCommentSkitch:e.props.canCommentSkitch,showActions:e.props.canDeleteSkitch(n),activityId:e.state.activeActivityId,onVisibleChange:function(t){return e.onVisibleChange(n,t)},onHighlightShown:e.clearActivityId},e.renderSkitchTip(t))})},t.prototype.renderSkitchCreatorRect=function(){var e=this.validStartPoint,t=this.validEndPoint;return this.state.showSkitchCreatorRect&&i.createElement(f,{ref:this.refSkitchCreatorRect,startPoint:e,endPoint:t,creatorMode:!0,showActions:0===this.props.creatorActivities.length,onDrop:this.onDrop,onMove:this.onMoveRect,onDragStart:this.onDragStart,onResize:this.onResizeRect})},t.prototype.renderSkitchCreator=function(){var e=this,t=this.props,n=t.skitchMode,r=t.isCreating,o=this.validStartPoint;return r&&n&&i.createElement(C,{ref:this.refSkitchCreator,autoFocus:!0,autoDestroy:!1,opened:this.state.creatorOpened,activities:this.props.creatorActivities,onSubmit:this.onCreatorFakeSubmit,maxHeight:this.getMaxHeight(o?o.y:0,48),onEditComment:this.props.onEditComment,onDeleteSkitch:function(t){e.props.onDeleteSkitch("fake",t)},onDeleteComment:this.props.onDeleteComment,onVisibleChange:this.onCreatorVisibleChange,canCommentSkitch:this.props.canCommentSkitch},this.renderSkitchCreatorRect())},t.prototype.renderImageLayer=function(){var e=this.props.getHelperImageSize();return!this.props.isCreating&&i.createElement(b,{src:this.props.src,imageLoader:this.props.imageLoader,style:e,onClick:this.onZoom})},t.prototype.renderDraggable=function(){return this.props.isCreating&&this.rootEl&&i.createElement(h.a,{targetEl:this.rootEl,onClick:this.onAddSkitch,onDragStart:this.onDragStart,onDragging:this.onDragging,onDrop:this.onDrop,isTargetDraggable:this.isTargetDraggable})},t.prototype.render=function(){var e=this.props.isCreating,t=d()("image-mask","position-helper",e?"cursor-add-one":"cursor-zoom-in");return i.createElement("div",{ref:this.refRoot,className:t},this.renderImageLayer(),this.renderSkitchLayer(),this.renderSkitchCreator(),this.renderDraggable())},t.defaultProps={skitches:[],creatorActivities:[]},t}(i.Component),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refCanvas=function(e){t.canvas=e},t.canvasImage=function(){var e=t.props,n=e.width,r=e.height,o=e.canvas,i=e.degree,s=t.canvas.getContext("2d");s.clearRect(0,0,n,r),Object(u.rotateDraw)(s,o,i,{width:o.width,height:o.height})},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.canvasImage()},t.prototype.componentDidUpdate=function(){this.canvasImage()},t.prototype.render=function(){var e=this.props,t=e.width,n=e.height,r=e.style;return i.createElement("canvas",{ref:this.refCanvas,width:t,height:n,style:r})},t}(i.PureComponent),j=n("yLnoFmrj"),P=n("sa1Ed382"),x=n("zQo2g8Yu"),N=x.connectUUID,O=x.registerUUID,R=x.unregisterUUID,D=x.wrapActionCreators,L=x.getUUIDState,z={onZoomIn:j.m,onZoomTo:j.o,onSetNatural:j.j,onSetNaturalRatio:j.k,onClearActiveIds:j.c},A=function(e){function t(t){var n=e.call(this,t)||this;return n.clickToZoom=!1,n.refRootEl=function(e){n.rootEl=e},n.notOverflow=function(){var e=n.props.getContainerSize(),t=e.width,r=e.height;if(t){var o=n.getCanvasSize(),i=o.width,s=o.height;return i<=t&&s<=r}return!0},n.onWindowResize=function(){n.notOverflow()?n.calcRatio():n.props.saveContainerSize()},n.onClickToZoom=function(e){n.props.saveClickPoint(e),n.clickToZoom=!0,n.props.onZoomIn(),P.gta.event({action:"zoom in",method:"click",platform:"web",type:"picture",control:"graphicstool"})},n.getCorrectStyle=function(e){var t=e.x,r=e.y,o=n.props,i=o.degree,s=o.ratio,a=n.getRealImageSize(),c=a.width,l=a.height,u=t*s/100,p=r*s/100;switch(i%360){case 90:return{x:c-p,y:u};case 180:return{x:c-u,y:l-p};case 270:return{x:p,y:l-u};default:return{x:u,y:p}}},n.getCorrectCoords=function(e){var t,r,o=e.x,i=e.y,s=n.props,a=s.degree,c=s.ratio,l=n.getRealImageSize(),u=l.width,p=l.height;switch(a%360){case 90:t=i,r=u-o;break;case 180:t=u-o,r=p-i;break;case 270:t=p-i,r=o;break;default:t=o,r=i}return{x:t/c*100,y:r/c*100}},n.getCanvasSize=function(){var e,t,o;if(n.rootEl){var i=n.rootEl.getBoundingClientRect();t=i.width,o=i.height}else t=(e=r.f(n.props.canvasSplitter.getTotalDimension(),2))[0],o=e[1];return{width:t,height:o}},n.getHelperImageSize=function(){var e=n.props.ratio/100,t=r.f(n.props.canvasSplitter.getImageDimension(),2),o=t[0],i=t[1],s=r.f(n.rotatedImageDimension(),2),a=s[0],c=s[1],l=1;return o<a?l=a/o:i<c&&(l=c/i),{width:o*e*l,height:i*e*l}},n.getRealImageSize=function(){var e=n.props.ratio/100,t=r.f(n.rotatedImageDimension(),2);return{width:t[0]*e,height:t[1]*e}},n.rotatedImageDimension=function(){var e=n.props.degree,t=r.f(n.props.canvasSplitter.getTotalDimension(),2),o=t[0],i=t[1];return Object(u.switchWidthHeightByDegree)(e,o,i)},n.oCalcRatio=function(){n.props.saveContainerSize();var e=n.props.getContainerSize(),t=e.width,o=e.height,i=r.f(n.rotatedImageDimension(),2),s=i[0],a=i[1],c=Math.min(s,t),l=Math.min(a,o),u=Math.min(l/a,c/s);n.props.onZoomTo(100*u),n.props.onSetNaturalRatio(100*u)},n.calcRatio=a.debounce(n.oCalcRatio,200),n.setNatural=function(){100===n.props.ratio&&n.notOverflow()&&n.props.onSetNatural()},n.isSkitchExists=function(e){return n.props.skitches.filter(function(t){return t._id===e}).length>0},n.state={mounted:!1},n}return r.d(t,e),t.prototype.UNSAFE_componentWillMount=function(){this.oCalcRatio()},t.prototype.componentDidMount=function(){this.props.activeSkitchId&&!this.isSkitchExists(this.props.activeSkitchId)&&c.Toast.info(s.get("previewer.jump.to.skitch.not.found")),window.addEventListener("resize",this.onWindowResize),this.setState({mounted:!0})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=e.activeSkitchId;t&&!this.isSkitchExists(t)&&c.Toast.info(s.get("previewer.jump.to.skitch.not.found")),this.clickToZoom?this.clickToZoom=!1:this.props.saveCenter(this.getCanvasSize())},t.prototype.componentDidUpdate=function(e){this.props.onClearActiveIds(),this.props.setCenter(this.getRealImageSize(),e.degree!==this.props.degree)},t.prototype.componentWillUnmount=function(){this.setState({mounted:!1}),window.removeEventListener("resize",this.onWindowResize)},t.prototype.getChildContext=function(){return{uuid:this.props.uuid}},t.prototype.renderImageMask=function(){if(this.state.mounted){var e=r.a({},this.rootEl.getBoundingClientRect(),this.getRealImageSize());return i.createElement(I,{src:this.props.src,imageRect:e,imageLoader:this.props.imageLoader,isCreating:this.props.skitchCreating,skitchMode:this.props.skitchMode,skitches:this.props.skitches,activities:this.props.activities,creatorActivities:this.props.creatorActivities,onClickToZoom:this.onClickToZoom,canCommentSkitch:this.props.canCommentSkitch,canDeleteSkitch:this.props.canDeleteSkitch,activeSkitchId:this.props.activeSkitchId,activeActivityId:this.props.activeActivityId,getCorrectStyle:this.getCorrectStyle,getCorrectCoords:this.getCorrectCoords,getHelperImageSize:this.getHelperImageSize,onCreateSkitch:this.props.onCreateSkitch,onReplySkitch:this.props.onReplySkitch,onCreatorFakeSubmit:this.props.onSkitchCreatorFakeSubmit,clearCreatorActivities:this.props.onSkitchCreatorFakeClear,onEditComment:this.props.onEditComment,onDeleteComment:this.props.onDeleteComment,onDeleteSkitch:this.props.onDeleteSkitch})}},t.prototype.renderCanvasList=function(){var e=this.props,t=e.ratio,n=e.degree,r=t/100;return this.props.canvasSplitter.getRotatedCanvasList(n).map(function(e,t){var o=e.left,s=e.top,a=e.targetWidth,c=e.targetHeight,l={width:a*r,height:c*r,left:o*r,top:s*r};return i.createElement(M,{key:t,width:a,height:c,style:l,degree:n,canvas:e.canvas})})},t.prototype.render=function(){return i.createElement("div",{ref:this.refRootEl,style:this.getRealImageSize(),className:"canvas-wrapper"},this.renderCanvasList(),this.renderImageMask())},t.childContextTypes={uuid:o.string},t}(i.PureComponent),V=N(j.b,function(e){return e},z)(A),F=function(e){l.store.dispatch(D(j.e,j.b,e)())},B=function(e){var t=l.store.getState();!L(t,j.b,e).skitchMode&&l.store.dispatch(D(j.l,j.b,e)())},U=function(e){return function(t){l.store.dispatch(D(j.i,j.b,e)(t))}},$=function(e){var t;l.store.dispatch(O(j.b,((t={})[""+e]=j.d,t)))},H=function(e){l.store.dispatch(R(j.b,e))},G=function(e){var t=D({zoomIn:j.m,zoomOut:j.n,zoomTo:j.o,setNatural:j.j},j.b,e),n=t.zoomIn,r=t.zoomOut,o=t.zoomTo,i=t.setNatural;return{onZoomIn:function(){l.store.dispatch(n())},onZoomOut:function(){l.store.dispatch(r())},onZoomToOrigin:function(){l.store.dispatch(o(100))},onZoomToNatural:function(){l.store.dispatch(i())}}};n.d(t,"ImagePreviewer",function(){return V}),n.d(t,"activeSkitchCreating",function(){return F}),n.d(t,"activeSkitchMode",function(){return B}),n.d(t,"registerState",function(){return $}),n.d(t,"unregisterState",function(){return H}),n.d(t,"onSetActiveIds",function(){return U}),n.d(t,"getActions",function(){return G}),n.d(t,"NAMESPACE_PREVIEWER",function(){return j.b}),n.d(t,"reducer",function(){return j.g}),n.d(t,"ImagePreviewerState",function(){return j.ImagePreviewerState})},LlYmcYj4:function(e,t,n){"use strict";n.r(t),n.d(t,"ProjectSuspendedTips",function(){return c});var r=n("q1tIBJhx"),o=n.n(r),i=n("GESwhXbR"),s=n("CZnMppOW"),a=n("YQWS+4rz"),c=function(e){var t=e.suspendedAt,n=e.suspendedBy,r=Object(s.getSuspendedMsg)(t,n);return o.a.createElement("div",{className:a["gray-banner"]},o.a.createElement(i.Icon,{name:"info"})," ",r)}},LmAbIdoM:function(e,t){e.exports=function(e){return'<div class="modal-header"> <a class="modal-close pull-right icon icon-remove" data-dismiss="modal"></a> <h4 class="modal-title center">'+e.title+'</h4></div><div class="modal-body flex-vert"></div>'}},"Ln2xgh+2":function(e,t,n){e.exports={card:"card__20Jy",title:"title__3SSz",description:"description__pIg8"}},LqEctW6J:function(e,t){e.exports=function(e){var t='<form class="cancel-form"> ';return e.isFile?t+=" <p>"+tb_i18n.get("confirm.unarchive.tip.file")+"</p> ":e.isSubtask?t+=" <p>"+tb_i18n.get("confirm.unarchive.tip.subtask")+"</p> ":t+=" <p>"+tb_i18n.get("confirm.unarchive.tip")+"</p> ",t+=' <button class="btn btn-primary" type="submit">'+tb_i18n.get("unarchive.confirm")+"</button></form>"}},Lurw9ib7:function(e,t,n){e.exports=n.p+"images/add-chat-no-search-result@2x.6fbf43f5.png"},LusHAy5J:function(e,t){e.exports=function(e){var t="",n=e.enabledTabs;if(n)for(var r,o=-1,i=n.length-1;o<i;)r=n[o+=1],t+=" ",e.tabOptions[r]&&(t+=' <a class="tab-item switcher-handler',e.activeTab===r&&(t+=" is-active"),t+='" data-tab="'+r+'" > <span class="text">'+e.tabOptions[r].title+"</span> </a> ");return t}},"LxI6N5g+":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("wd/RKGTj"),s=n.n(i),a=n("TSYQbtd+"),c=n.n(a),l=n("tLZJUYWX"),u=n("GESwhXbR"),p=(n("uivNXqU4"),20),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={sprintName:t.props.sprintName||"",hasError:!1},t.inputOnChange=function(e){var n=e.target.value,r=n.length>p,o=n.slice(0,p);t.setState({sprintName:o,hasError:r}),t.props.setSprintName(o)},t}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({sprintName:e.sprintName||"",hasError:!1})},t.prototype.renderInput=function(){return o.createElement("input",{className:"form-control input-create-sprint",placeholder:l.get("sprint.name"),onChange:this.inputOnChange,value:this.state.sprintName})},t.prototype.renderError=function(){return this.state.hasError&&o.createElement("div",{className:"err-msg"},l.get("text.overflow",p))},t.prototype.render=function(){return o.createElement("div",{className:"sprint-input-name-wrapper"},this.renderInput(),this.renderError())},t}(o.PureComponent);n("+XinrvS/");n.d(t,"a",function(){return h});var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cycles=[{num:1,name:l.get("sprint.cycle.one.week")},{num:2,name:l.get("sprint.cycle.two.weeks")},{num:3,name:l.get("sprint.cycle.three.weeks")},{num:4,name:l.get("sprint.cycle.four.weeks")},{num:0,name:l.get("sprint.cycle.custom")}],t.saveSelectParentRef=function(e){t.selectParentRef=e},t.getSelectParentRef=function(){return t.selectParentRef},t.setSprintName=function(e){t.props.updateSprint({name:e})},t.setStartDate=function(e){var n=s()(e.dateString).startOf("day").toISOString(),r=t.getDueDate(t.props.weeks,n);t.props.updateSprint({startDate:n,dueDate:r})},t.setDueDate=function(e){var n=s()(e.dateString).endOf("day").toISOString();t.props.updateSprint({dueDate:n})},t.onSelectCycle=function(e){var n=e.data;if(t.props.startDate){var r=t.getDueDate(n,t.props.startDate);t.props.updateSprint({weeks:n,dueDate:r})}else t.props.updateSprint({weeks:n})},t}return r.d(t,e),t.prototype.getDueDate=function(e,t){var n,r=this.props.dueDate;switch(e){case null:n=void 0;break;case 0:n=r?s()(r).endOf("day").toISOString():void 0;break;default:n=s()(t).add(e,"weeks").subtract(1,"day").toISOString()}return n},t.prototype.getOptionData=function(e){return{label:e.name,data:e.num}},t.prototype.renderSprintNameInput=function(){return o.createElement("div",{className:"sprint-edit-item"},o.createElement("div",{className:"sprint-sub-title"},l.get("sprint.name")),o.createElement(d,{sprintName:this.props.name,setSprintName:this.setSprintName}))},t.prototype.renderSelectOptions=function(){var e=this;return this.cycles.map(function(t){var n=e.getOptionData(t);return o.createElement(u.Option,{key:t.num,value:n},t.name)})},t.prototype.renderCycle=function(){var e=this.props.weeks,t=this.cycles.find(function(t){return t.num===e})||null,n=t?this.getOptionData(t):null,r=this.props.startDateRequired?l.get("sprint.placeholder.select.cycles.required"):l.get("sprint.placeholder.select.cycles.optional");return o.createElement("div",{className:"sprint-edit-item",ref:this.saveSelectParentRef},o.createElement("div",{className:"sprint-sub-title"},l.get("sprint.cycle")),o.createElement(u.Select,{className:"sprint-select-date",nested:!0,value:n,onSelect:this.onSelectCycle,mountIn:this.getSelectParentRef,placeholder:r},this.renderSelectOptions()))},t.prototype.renderDueDateTrigger=function(){var e=this.props.dueDate,t=l.get("sprint.placeholder.dueDate.choose"),n=e?s()(e).format("ll"):t,r=c()("due-date",{"has-value":!!e});return o.createElement("div",null,o.createElement("span",{className:r},n),o.createElement(u.Icon,{name:"calendar2"}))},t.prototype.renderStartDateTrigger=function(){var e=this.props,t=e.startDate,n=e.startDateRequired?l.get("sprint.placeholder.startDate.required"):l.get("sprint.placeholder.startDate.optional"),r=t?s()(t).format("ll"):n,i=c()("start-date",{"has-value":!!t});return o.createElement("div",null,o.createElement("span",{className:i},r),o.createElement(u.Icon,{name:"calendar3"}))},t.prototype.renderStartDate=function(){var e=this.props.startDate,t=e?s()(e):void 0;return o.createElement("div",{className:"sprint-edit-item"},o.createElement("div",{className:"sprint-sub-title"},l.get("startDate")),o.createElement(u.DatePicker,{className:"sprint-datepicker",clearable:!1,timepicker:!1,onChange:this.setStartDate,date:t},this.renderStartDateTrigger()))},t.prototype.renderDueDate=function(){var e=this.props,t=e.weeks,n=e.dueDate,r=e.showDueDate,i=e.startDate;if(!r)return null;var a=n?s()(n):void 0,c=n?s()(n).format("ll"):"",p=l.get("sprint.placeholder.dueDate"),d=i?s()(i).subtract(1,"day"):void 0,h=0===t?o.createElement(u.DatePicker,{className:"sprint-datepicker",clearable:!1,timepicker:!1,onChange:this.setDueDate,date:a,startDate:d},this.renderDueDateTrigger()):o.createElement("input",{type:"text",className:"form-control",value:c,placeholder:p,disabled:!0});return o.createElement("div",{className:"sprint-edit-item"},o.createElement("div",{className:"sprint-sub-title"},l.get("dueDate")),h)},t.prototype.render=function(){return o.createElement("div",{className:"sprint-update-details-wrapper"},this.renderSprintNameInput(),this.renderCycle(),this.renderStartDate(),this.renderDueDate())},t}(o.PureComponent)},LxQDdmNp:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e.projects;if(i)for(var s,a=-1,c=i.length-1;a<c;)if(o+=" ",(s=i[a+=1]).projects.length>0){o+=' <li class="group-name"><p>'+r(s.title)+"</p></li> ";var l=s.projects;if(l)for(var u,p=-1,d=l.length-1;p<d;)o+=' <li> <a class="switch-handler" data-id="'+(u=l[p+=1])._id+'" data-organization-id="'+u._organizationId+'">'+r(u.name)+"</a> </li> ";o+=" "}return o}},"Lz5j/KJN":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("a+N5u/Cl"),s=n("tLZJUYWX"),a=n("sa1Ed382"),c=n("TSYQbtd+"),l=n.n(c),u=n("GESwhXbR"),p=n("QdDHtIVR"),d=n("zH+Yaocm"),h=n("3eMzznN/"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.genTitle=function(e){var t=e.parent;return(t.taskflowstatus?[t.project&&t.project.name,t.scenariofieldconfig&&t.scenariofieldconfig.name]:[t.project&&t.project.name,t.tasklist&&t.tasklist.title,t.stage&&t.stage.name]).filter(function(e){return!!e}).join(", ")},t}return r.d(t,e),t.prototype.renderFooter=function(){var e,t=this.props.objectLink,n="link-due-time";if(!t.parent.dueDate)return null;var r=h.formatDate(t.parent.dueDate,{isUsePref:!0}),i=r&&r.dateClass;if(!i)return null;var s=this.props.objectLink.parent.isDone?"":l()(((e={})[n+"-important"]="overdue"===i,e[n+"-warning"]="today"===i,e[n+"-info"]="upcoming"===i,e));return o.createElement("div",{className:"link-title-footer"},o.createElement("div",{className:n},o.createElement("span",{className:s},o.createElement("span",null,r.dateString),o.createElement("span",null,"00:00"===r.timeFormatString?"":r.timeFormatString))))},t.prototype.renderIcon=function(){var e=o.createElement(u.Icon,{name:"board"});return o.createElement("div",{className:"link-icon-wrap"},e)},t.prototype.renderStatusLabel=function(){return o.createElement("div",{className:"link-icon-wrap"},o.createElement("div",{className:"task-status-label"},o.createElement(d.TaskStatusLabel,{task:this.props.objectLink.parent,readOnly:!0})))},t.prototype.renderInfo=function(){var e=this.genTitle(this.props.objectLink);return o.createElement("div",{className:"link-title-header-rest"},o.createElement(u.Tooltip,{title:e},o.createElement("span",null,e)))},t.prototype.renderAvatar=function(){var e=this.props.objectLink.parent.executor,t=l()("avatar img-circle img-24",{"no-avatar":!e}),n=e?{style:{backgroundImage:"url("+e.avatarUrl+")"}}:null;return o.createElement("div",{className:"link-icon-wrap"},o.createElement("span",r.a({className:t},n)))},t.prototype.renderTitle=function(){return o.createElement("div",{className:"link-title"},o.createElement("div",{className:"link-title-header"},o.createElement("div",{className:"link-title-header-main"},o.createElement("span",{className:"title-name",title:this.props.objectLink.parent.content},this.props.objectLink.parent.content)),this.renderInfo()),this.renderFooter())},t.prototype.render=function(){return o.createElement("div",{className:"link-head"},this.renderIcon(),this.renderStatusLabel(),this.renderTitle(),this.renderAvatar())},t}(o.PureComponent),f=n("3eMzznN/"),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderInfo=function(){var e=this.props.objectLink.parent,t=e.project&&e.project.name;return o.createElement("div",{className:"link-title-header-rest",title:t},t)},t.prototype.render=function(){var e=this.props.objectLink.parent,t={backgroundImage:"url("+e.creator.avatarUrl+")"},n=e.content.replace(/<.*?>/gi,"").replace(/\&nbsp\;?/g," ");return n=f.cutString(n,90,"..."),o.createElement("div",{className:"link-head"},o.createElement("div",{className:"link-icon-wrap"},o.createElement(u.Icon,{name:"wall"})),o.createElement("div",{className:"link-icon-wrap"},o.createElement("span",{className:"avatar img-circle img-24",style:t})),o.createElement("div",{className:"link-title"},o.createElement("div",{className:"link-title-header"},o.createElement("div",{className:"link-title-header-main"},o.createElement("span",{className:"title-name",title:e.title},e.title)),this.renderInfo()),!!n&&o.createElement("div",{className:"link-title-footer"},n)))},t}(o.PureComponent),v=n("XhpHwZVN"),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderInfo=function(){var e=this.props.objectLink.parent,t=e.project&&e.project.name;return o.createElement("div",{className:"link-title-header-rest",title:t},t)},t.prototype.renderFolder=function(){var e=this.props.objectLink,t=e.parent,n=l()("folder-icon-wrapper","folder-icon-wrapper-"+t.color);return o.createElement("div",{className:n},Object(v.CollectionIcon)(e.parent))},t.prototype.renderIcon=function(){var e=this.props.objectLink,t="collection"===e.linkedType?this.renderFolder():Object(v.WorkIcon)(e.parent);return o.createElement("div",{className:"link-icon-wrap"},t)},t.prototype.render=function(){var e=this.props.objectLink.parent,t=e.title||e.fileName;return o.createElement("div",{className:"link-head"},this.renderIcon(),o.createElement("div",{className:"link-title"},o.createElement("div",{className:"link-title-header"},o.createElement("div",{className:"link-title-header-main"},o.createElement("span",{className:"title-name",title:t},t)),this.renderInfo())))},t}(o.PureComponent),y=n("3eMzznN/"),k=n("wd/RKGTj"),_={task:m,post:g,work:b,event:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderInfo=function(){var e=this.props.objectLink.parent,t=e.project&&e.project.name;return o.createElement("div",{className:"link-title-header-rest",title:t},t)},t.prototype.renderEventTime=function(){var e=this.props.objectLink.parent,t={startDateString:y.formatDate(e.startDate,{isUsePref:!0}).dateString,startTimeString:k(e.startDate).format("LT"),endDateString:y.formatDate(e.endDate,{isUsePref:!0}).dateString,endTimeString:k(e.endDate).format("LT")};return o.createElement("div",{className:"link-title-footer"},o.createElement("span",null,t.startDateString," ",t.startTimeString),o.createElement("span",{className:"timeTo"},"-"),o.createElement("span",null,t.endDateString," ",t.endTimeString))},t.prototype.render=function(){var e=this.props.objectLink.parent;return o.createElement("div",{className:"link-head"},o.createElement("div",{className:"link-icon-wrap"},o.createElement(u.Icon,{name:"calendar"})),o.createElement("div",{className:"link-title"},o.createElement("div",{className:"link-title-header"},o.createElement("div",{className:"link-title-header-main"},o.createElement("span",{className:"title-name",title:e.title},e.title)),this.renderInfo()),this.renderEventTime()))},t}(o.PureComponent),entry:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderInfo=function(){var e=this.props.objectLink.parent,t=e.project&&e.project.name;return o.createElement("div",{className:"link-title-header-rest",title:t},t)},t.prototype.renderEntry=function(){var e=this.props.objectLink.parent;return 1===e.type?o.createElement("span",{className:"entry-amount on-income"},"+ ",e.amount):o.createElement("span",{className:"entry-amount on-expense"},"- ",e.amount)},t.prototype.render=function(){var e=this.props.objectLink.parent;return o.createElement("div",{className:"link-head"},o.createElement("div",{className:"link-icon-wrap"},o.createElement(u.Icon,{name:"bookkeeping-logo"})),o.createElement("div",{className:"link-title"},o.createElement("div",{className:"link-title-header"},o.createElement("div",{className:"link-title-header-main"},o.createElement("span",{className:"title-name",title:e.content},e.content)),this.renderInfo()),o.createElement("div",{className:"link-title-footer"},this.renderEntry())))},t}(o.PureComponent),testcase:function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.genTitle=function(e){var t=e.parent;return[t.project&&t.project.name,t.testplan&&t.testplan.name].filter(function(e){return!!e}).join(s.get("comma"))},t}return r.d(t,e),t.prototype.renderInfo=function(){var e=this.genTitle(this.props.objectLink);return o.createElement("div",{className:"link-title-header-rest"},o.createElement(u.Tooltip,{title:e},o.createElement("span",null,e)))},t.prototype.renderAvatar=function(){var e=this.props.objectLink.parent.executor,t=l()("avatar img-circle img-24",{"no-avatar":!e}),n=e?{style:{backgroundImage:"url("+e.avatarUrl+")"}}:null;return o.createElement("div",{className:"link-icon-wrap"},o.createElement("span",r.a({className:t},n)))},t.prototype.renderTitle=function(){return o.createElement("div",{className:"link-title"},o.createElement("div",{className:"link-title-header"},o.createElement("div",{className:"link-title-header-main"},o.createElement("span",{className:"title-name",title:this.props.objectLink.parent.title},this.props.objectLink.parent.title)),this.renderInfo()))},t.prototype.render=function(){return o.createElement("div",{className:"link-head"},o.createElement("div",{className:"link-icon-wrap"},o.createElement(u.Icon,{name:"testcase"})),this.renderAvatar(),this.renderTitle())},t}(o.PureComponent)},w=Object(p.b)(u.MenuItem),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderCopyItem=function(){return o.createElement(w,{object:this.props.object,type:this.props.type,className:"object-link-item-menu-item",onClick:this.props.onCopyClick},o.createElement(u.Icon,{name:"link"}),s.get("copy.link"))},t.prototype.renderDownloadItem=function(){return["work","collection"].indexOf(this.props.type)>=0&&o.createElement(u.MenuItem,{onClick:this.props.onDownloadClick,className:"object-link-item-menu-item"},o.createElement(u.Icon,{name:"download"}),s.get("previewer.download"))},t.prototype.render=function(){return o.createElement(u.Menu,null,this.renderCopyItem(),this.renderDownloadItem())},t}(o.PureComponent),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onClick(t.props.link)},t.onDownloadClick=function(){t.props.onDownloadItem(t.props.link)},t.onCopyClick=function(){t.props.onCopyItem(t.props.link)},t}return r.d(t,e),t.prototype.stopPropagation=function(e){e.stopPropagation()},t.prototype.renderMenu=function(){return o.createElement(C,{object:this.props.link.parent,type:this.props.link.parentType,onCopyClick:this.onCopyClick,onDownloadClick:this.onDownloadClick})},t.prototype.renderDropdown=function(){return o.createElement(u.Dropdown,{className:"object-link-item-menu",content:this.renderMenu(),autoDestroy:!1},o.createElement(u.Icon,{size:12,name:"chevron-down",className:"link-menu-handler",onClick:this.stopPropagation}))},t.prototype.renderContent=function(){var e=_[this.props.type];return o.createElement(e,{objectLink:this.props.link})},t.prototype.render=function(){return o.createElement("li",{className:"link",onClick:this.onClick},this.renderContent(),this.renderDropdown())},t}(o.PureComponent),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkIsVisible=function(e,t){var n=e.parent,r=n.visible,o=n.involveMembers,i=a.user.id;if("work"===t||"file"===t){var s=e.parent,c=s.parentVisible,l=s.parentInvolveMembers;if("involves"===c&&-1===l.indexOf(i))return!1}return"involves"!=r||o.indexOf(i)>=0},t}return r.d(t,e),t.prototype.renderInvisibleInfo=function(e){var t=this.props.type;return o.createElement("div",{className:"invisible-wrapper flex"},o.createElement("span",{className:"icon icon-lock flex flex-center flex-vcenter"}),o.createElement("p",null,s.get("link."+t+".invisible.hint",e)))},t.prototype.renderVisibleLinks=function(e){var t=this;return e.map(function(e){return o.createElement(S,{key:e._id,link:e,type:t.props.type,onClick:t.props.enterObjectPreviewer,onCopyItem:t.props.onCopyItem,onDownloadItem:t.props.onDownloadItem})})},t.prototype.render=function(){var e=this,t=this.props,n=t.objectLinks,a=t.type;if(!n.length)return null;var c=l()("detail-subitem-common-category","link-"+a),u=r.f(Object(i.partition)(n,function(t){return e.checkIsVisible(t,a)}),2),p=u[0],d=u[1];return o.createElement("div",{className:c},o.createElement("header",null,s.get("object.detail.lined."+a+".title")),o.createElement("ul",null,this.renderVisibleLinks(p)),d.length>0&&this.renderInvisibleInfo(d.length))},t}(o.PureComponent),T=["task","event","work","testcase","post","entry"];n.d(t,"BelinkedDetails",function(){return I});var I=function(e){function t(t){var n=e.call(this,t)||this;return n.getValidLinkLength=function(){return n.props.links.filter(function(e){return T.indexOf(e.parentType)>=0}).length},n.onTriggleActive=function(){var e=n.state.isActive;n.props.gtaHandler(!e),n.setState({isActive:!e})},n.state={isActive:!1},n}return r.d(t,e),t.prototype.renderContent=function(){var e=this,t=this.props,n=t.links,r=t.enterObjectPreviewer;if(!this.state.isActive)return null;var s=i.chain(n).sortBy("updated").groupBy("parentType").value(),a=T.map(function(t){var n=s[t];return n&&n.length&&o.createElement(E,{key:t,type:t,objectLinks:n,enterObjectPreviewer:r,onDownloadItem:e.props.onDownloadItem,onCopyItem:e.props.gtaCopyLink})});return o.createElement("div",{className:"links-list"},a)},t.prototype.renderHeader=function(){var e=this.props.boundToObjectType,t=this.state.isActive;return o.createElement("div",{className:"detail-subitem-common-header"},o.createElement(u.Icon,{name:"link3"}),o.createElement("span",{className:"content"},s.get(e+".detail.linked.length",this.getValidLinkLength())),o.createElement(u.TextButton,{color:"blue",onClick:this.onTriggleActive},t?s.get("object.detail.linked.hide"):s.get("object.detail.linked.show")))},t.prototype.render=function(){return this.getValidLinkLength()<=0?null:o.createElement(o.Fragment,null,this.renderHeader(),this.renderContent())},t}(o.PureComponent)},"M+PlWHew":function(e,t){e.exports=function(e){return'<h3 class="clearfix header-handler"> <a class="flex-static event-create-handler link-add-handler" data-gta="{action: \'add content\', type: \'event\'}"> <span class="icon icon-circle-cross"></span> <span>'+tb_i18n.get("events.add")+'</span> </a> <div class="week-selector-wrap pull-right" data-gta="{action: \'filter event date\'}"></div></h3><div class="events-list-wrap"></div>'}},"M1/vCJUu":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return v});var r,o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n.n(i),a=n("tLZJUYWX"),c=n.n(a),l=n("80gYlwjC"),u=n("GESwhXbR"),p=n("RQ44psah"),d=n("2uRu9aah"),h=n("ln9RsXX9"),m=n("HLaCnIR0"),f=n("4m0cgL3g");!function(e){e[e.Personal=1]="Personal",e[e.ProTrial=2]="ProTrial",e[e.Purchase=3]="Purchase",e[e.Renew=4]="Renew",e[e.Old=5]="Old",e[e.Upgrade=6]="Upgrade"}(r||(r={}));var g=new l.Machine("@@ROOT");g.rule("@@ROOT",function(e){return e.canGetProfessionalTrial},r.ProTrial,"NEW_OR_PAID").rule("NEW_OR_PAID",function(e){return e.isPaid},"PAID",r.Purchase).rule("PAID",function(e){return e.isExpired},r.Renew,"PAID_AND_NOT_EXPIRED").rule("PAID_AND_NOT_EXPIRED",function(e){return e.isOld},r.Old,r.Upgrade);var v=function(e,t){void 0===t&&(t={});var n=t.onSuccess||function(){},i=t.onFailure||function(){},a=t.onboarding||{},l=e&&e.ofOrganization()?t.state||g.transition(e):r.Personal,v={onClose:m.a,onClick:function(){},viewType:d.b.Unset};switch(l){case r.Personal:v=o.a({},v,{viewType:d.b.Create,extra:{directive:1,onboarding:a}}),n(l);break;case r.ProTrial:v=o.a({},v,{viewType:d.b.Trial,onClick:function(){var t=e.objectId,r=Object(f.OrganizationModelById)(t);r.getProTrial().then(function(){if(!r.payment.isProfessional)throw new Error("Failed to get Pro trial");Object(h.getOrgProTrialSuccess)(r),Object(m.a)(),n(l)}).catch(function(){u.Toast.error(c.a.get("organization.trail.pro.getStarted.failure")),i(l)})}});break;case r.Purchase:return window.open(p.pay.orgNewPro(e.objectId)),void n(l);case r.Renew:return window.open(p.pay.orgRenew(e.objectId)),void n(l);case r.Old:v=o.a({},v,{viewType:d.b.ContactCS}),n(l);break;case r.Upgrade:return window.open(p.pay.orgUpgrade(e.objectId)),void n(l)}Object(m.b)(s.a.createElement(d.a,o.a({},v)))}},"M3Thqi/G":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=(n("DlvflEoh"),n("a+N5u/Cl")),s=n("TSYQbtd+"),a=n.n(s),c=n("mgrpwCDb"),l=n("Z7XVTGXp"),u=function(e){function t(t){var n=e.call(this,t)||this;return n.onClickDeleteLine=function(){n.props.hasDependencyPermission&&n.props.onDeleteDependencyLine(n.props._id)},n.linePadding=2,n.smallLineHeight=6,n.state={arrowStyle:{},v1Style:{},v2Style:{},hStyle:{},iconStyle:{}},n}return r.d(t,e),t.prototype.UNSAFE_componentWillMount=function(){this.initLineInfo(this.props)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.initLineInfo(e)},t.prototype.shouldComponentUpdate=function(e,t){var n=i.isEqual(e,this.props),r=i.isEqual(t,this.state);return!(n&&r)},t.prototype.initLineInfo=function(e){var t=e.taskPositions[e._fromId],n=e.taskPositions[e._toId];if(t&&n){var o=t.width,i=n.width;if(o&&i){var s=r.f(Object(c.fromAndToKind)(e.kind),2),a=s[0],l=s[1];if(t.isOffsetLeftFake&&"start"===a||n.isOffsetLeftFake&&"start"===l)this.resetLine();else{var u=e.kind;this.computeStartXPosition(t,u),this.computeEndXPosition(n,u),this.computeVerticalPositions(t,n),this.drawLine()}}else this.resetLine()}},t.prototype.computeStartXPosition=function(e,t){var n=e.offsetLeft,r=e.width,o=r>4?4:0,i="start_start"===t||"start_finish"===t?o:r-o;this.startX=n+i},t.prototype.computeEndXPosition=function(e,t){var n=e.offsetLeft,r=e.width,o=r>4?4:0,i="start_finish"===t||"finish_finish"===t?r-o:o;this.endX=n+i},t.prototype.computeVerticalPositions=function(e,t){var n=e.offsetTop,r=t.offsetTop;this.arrowDirection=r>n?"down":"up","down"===this.arrowDirection?(this.startY=n+7+16,this.endY=r+7):(this.startY=n+7,this.endY=r+7+16)},t.prototype.drawRemoveIcon=function(e,t,n){var o,i,s=parseFloat(t.width),a=parseFloat(n.height);return s>18?(o=t,i="translate(6px, -8px)"):a<=8?(o=e,i="translate(-3px, -4px)"):(o=n,i="down"===this.arrowDirection?"translate(-4px, 4px)":"translate(-4px, "+(a-24)+"px)"),r.a({left:o.left,top:o.top},Object(l.v)(i))},t.prototype.drawLine=function(){var e=this.drawV1(),t=this.drawH1(),n=this.drawV2(),o=this.drawArrow(),i=this.drawRemoveIcon(e,t,n);this.setState(r.a({},this.state,{v1Style:e,arrowStyle:o,v2Style:n,hStyle:t,iconStyle:i})),this.hasError=this.endX+12<this.startX},t.prototype.drawV1=function(){return{height:this.smallLineHeight+"px",left:this.startX-this.linePadding+"px",top:(this.endY>this.startY?this.startY:this.startY-this.smallLineHeight)+"px"}},t.prototype.drawH1=function(){var e=Math.abs(this.startX-this.endX);return 0===e?0:e+=1,{width:e+"px",left:Math.min(this.startX,this.endX)+"px",top:(this.endY>this.startY?this.startY+this.smallLineHeight:this.startY-this.smallLineHeight)-this.linePadding+"px"}},t.prototype.drawV2=function(){return{height:Math.abs(this.startY-this.endY)-this.smallLineHeight+"px",left:this.endX-this.linePadding+"px",top:(this.endY>this.startY?this.startY+this.smallLineHeight:this.endY)+"px"}},t.prototype.drawArrow=function(){var e,t;return this.endY>this.startY?(e=this.endY-5,t=this.endX-5):(e=this.endY,t=this.endX-5),{top:e+"px",left:t+"px"}},t.prototype.resetLine=function(){this.arrowDirection=null,this.setState(r.a({},this.state,{arrowStyle:{},v1Style:{},v2Style:{},hStyle:{}}))},t.prototype.render=function(){var e="arrow arrow-"+this.arrowDirection,t=this.state,n=t.v1Style,r=t.v2Style,i=t.hStyle,s=t.arrowStyle,c=t.iconStyle,l=a()("line-container",{"has-permission":this.props.hasDependencyPermission,"has-error":this.hasError});return o.createElement("div",{className:l,onClick:this.onClickDeleteLine},o.createElement("div",{className:"real-line"},o.createElement("div",{className:"v-line line",style:n}),o.createElement("div",{className:"h-line line",style:i}),o.createElement("div",{className:"v-line line",style:r}),o.createElement("div",{className:e,style:s})),o.createElement("div",{className:"fake-line"},o.createElement("div",{className:"v-line line",style:n}),o.createElement("div",{className:"h-line line",style:i}),o.createElement("div",{className:"v-line line",style:r}),o.createElement("div",{className:e,style:s}),o.createElement("div",{className:"icon icon-circle-remove",style:c})))},t}(o.Component),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderLines=function(){var e=this,t=this.props,n=t.lines,i=t.isLoading;return!n||i?null:n.map(function(t){return o.createElement(u,r.a({},t,{key:t._id.toString(),taskPositions:e.props.taskPositions,onDeleteDependencyLine:e.props.onDeleteDependencyLine,hasDependencyPermission:e.props.hasDependencyPermission}))})},t.prototype.render=function(){return o.createElement("div",{className:"gantt-dependency-lines-component"},this.renderLines())},t}(o.PureComponent);n.d(t,"a",function(){return p})},M70E0b3m:function(e,t,n){e.exports={trigger:"trigger__2vfD","trigger-icon":"trigger-icon__2DdK","trigger-toggler":"trigger-toggler__m_bX","trigger-name":"trigger-name__KWna",selector:"selector__dXX_","selector-label":"selector-label__PPPv","selector-name":"selector-name__36Pi","selector-trigger":"selector-trigger__11wJ",hint:"hint__WGaK",submit:"submit__qSzc",main:"main__2Z1l","testhub-selector-wrapper":"testhub-selector-wrapper__2e32","testgroup-selector-wrapper":"testgroup-selector-wrapper__3NFw","testgroup-creator-wrapper":"testgroup-creator-wrapper__1D3y","testgroup-creator-handler":"testgroup-creator-handler__2OND"}},M8NjRRva:function(e,t,n){},M9EbmBqr:function(e,t){e.exports=function(e){return'<ul class="list"> <li> <a class="remove-handler" data-action="remain"> '+tb_i18n.get("project.remove.group.remain.members")+" </a> </li></ul>"}},MCTZs11P:function(e,t,n){e.exports=n.p+"images/d_baobao@2x.e76ec4fc.png"},MCn2bSqo:function(e,t,n){e.exports={"status-checkbox-taskflow":"status-checkbox-taskflow__1xg0"}},MDObF51X:function(e,t,n){e.exports={content:"content__lxoq","testplan-selector":"testplan-selector__27Nb","testplan-selector-icon":"testplan-selector-icon__2J05","testplan-selector-project-name":"testplan-selector-project-name__JTUN","testplan-selector-testplan-name":"testplan-selector-testplan-name__1oBc",input:"input__2D39","creator-description":"creator-description__N1Yf","creator-button":"creator-button__3hfX","no-testplan-description":"no-testplan-description__11Pb"}},MDkL9Nvc:function(e,t,n){e.exports={subscribers:"subscribers___Div","subscribers-header":"subscribers-header__3b3f","subscribers-content":"subscribers-content__3vkE","subscribers-count":"subscribers-count__1DAI","freshman-hint":"freshman-hint__3q-j","avatar-list":"avatar-list__3Fy-","subscriber-list":"subscriber-list__YLEX","subscriber-list-title":"subscriber-list-title__2Szo","subscriber-list-content":"subscriber-list-content__3XLK","avatar-ellipsis":"avatar-ellipsis__2Olq","subscriber-invite":"subscriber-invite__1qMx",seperator:"seperator__6b_F"}},"MG+UrdGu":function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("sa1Ed382"),o=n("vmWJWrVe"),r=n("OyfLzFU+"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="TabContainerView",t.prototype.className="tab-container-view",t.prototype.events={"click .tab-item:not(.active)":"switch"},t.prototype.initialize=function(e){return this.options=null!=e?e:{},this.currentView=null,this.currentIndex=this.options.tabIndex||0,this.renderBasic()},t.prototype.renderBasic=function(){return this.$el.html(r(this.options)),this.$content=this.$(".tab-container-view-content"),this.$tabItems=this.$(".tab-item"),this.renderTab(this.currentIndex)},t.prototype.switch=function(e){var t,n;if($(e.currentTarget).closest(".tab-item").removeClass("with-badge"),t=$(e.currentTarget).data("index"),(n=this.options.list[t]).gta&&i.gta.event(n.gta),this.hasPermission(t))return this.renderTab(t)},t.prototype.renderTab=function(e){return this.currentView&&this.currentView.remove(),this.currentView=this.options.list[e].view(),this.setActiveTab(e),this.$content.html(this.currentView.$el)},t.prototype.hasPermission=function(e){var t;return"function"!=typeof(t=this.options.list[e].permission)||t()},t.prototype.setActiveTab=function(e){return $(this.$tabItems.get(this.currentIndex)).removeClass("active"),$(this.$tabItems.get(e)).addClass("active"),this.currentIndex=e},t.prototype.remove=function(){return this.currentView.remove(),t.__super__.remove.apply(this,arguments)},t}()},MHYkUNaR:function(e,t){!function(e){var t;e.FangCloudKit&&(t=e.FangCloudKit),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"use strict";if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r){r=Object(r);for(var o=Object.keys(Object(r)),i=0,s=o.length;i<s;i++){var a=o[i],c=Object.getOwnPropertyDescriptor(r,a);void 0!==c&&c.enumerable&&(t[a]=r[a])}}}return t}});var n={get_token:"https://oauth.fangcloud.com/oauth/authorize",kit:"https://open.fangcloud.com/file-widget",ie_frame:"https://open.fangcloud.com/file-widget/sdk/ie-message.html",redirect:"https://open.fangcloud.com/file-widget/sdk/callback.html"},r=[],o=v("FangCloudUIKitToken"),i=null,s=null,a=null,c=!0,l="tab",u="iframe",p="tab",d=function e(){if("object"==typeof e.instance)return e.instance;e.instance=this,this.uikitState=0,h=h.bind(this)};function h(e){var t=e.data,n={cancel:this.close.bind(this),token:m.bind(this),create:f.bind(this)};n[t.type]&&n[t.type](e.data),function(e){for(var t=0;t<r.length;t++)"function"==typeof r[t]&&r[t](e)}(t)}function m(e){switch(e.data){case"unauthorized":case"invalid_token":this.uikitState=0,g();break;case"take_token":e.token&&(o=e.token,c&&(t="FangCloudUIKitToken",n=e.token,r=8,(i=new Date).setTime(i.getTime()+60*r*60*1e3),document.cookie=t+"="+escape(n)+";expires="+i.toUTCString()),this.createUikit())}var t,n,r,i}function f(){this.uikitState=2}function g(t){if(i){s&&this.uikitType==u&&s.setAttribute("src","");var r={response_type:"token",state:"xyz",redirect_uri:n.redirect+"?type="+l,client_id:i};Object.assign(r,t);var o=[];for(var a in r)o.push(a+"="+r[a]);var c=n.get_token+"?"+o.join("&");l==u&&(e.tokenTab=window.open(),e.tokenTab.location.href=c),l==p&&(s.location.href=c)}}function v(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null}d.prototype={setFrameType:function(e){l=e==p?p:u},setClientId:function(e){i||(i=e)},setToken:function(e){o=e,c=!1},setRedirectUri:function(e){n.redirect=e},getToken:function(){return o},getInstant:function(){return t},addMessageEventListener:function(e){if(e)return r.push(e),r.length-1},removeMessageEventListener:function(e){e&&("all"!=e?r[e]=null:r=[])},init:function(){i||(i=document.querySelector("#FangCloud").getAttribute("client_id")),s||window.addEventListener("message",h)},createUikit:function(e){if(this.init(),i||o){switch(this.uikitState=1,l){case p:this.createTab();break;case u:this.createFrame(e)}var t;return((t=navigator.userAgent.toLowerCase()).indexOf("msie")>-1||t.indexOf("rv:11")>-1)&&(a=function(){if(a)return a;a=document.createElement("iframe");var e={style:"display: none",src:n.ie_frame,name:"fangcloudIE"};for(var t in e)a.setAttribute(t,e[t]);return document.body.appendChild(a),a}()),o||g(),s}},createFrame:function(e){var t;t=e||document.body;var r={frameborder:0,width:580,height:480,allowtransparency:!0,src:o?n.kit+"?type="+l+(o?"#"+o:""):"",name:"fangcloud"};if(s)s.setAttribute("src",r.src);else{for(var i in s=document.createElement("iframe"),r)s.setAttribute(i,r[i]);t.appendChild(s)}return s},createTab:function(){var e=n.kit+"?type="+l+"#"+o;return s&&!s.closed?(s.focus(),s.location.href=e):s=window.open(e),s},close:function(){s&&(l==u&&(s.removeNode?s.removeNode(!0):s.remove()),l==p&&s.close(),window.removeEventListener("message",h),s=null,this.uikitState=0)},destroy:function(){a&&(a.removeNode?a.removeNode(!0):a.remove()),this.close(),this.removeMessageEventListener("all"),FangCloud_&&(e.FangCloud=FangCloud_)},toTakeToken:function(){g()}},e.FangCloudKit=new d}(window)},MIBOT3i8:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;s=n("a+N5u/Cl"),i=n("qKYkuTVR"),r=n("9qRVX3JM"),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="PopoverCategoryMenuView",t.prototype.className="popover-category-menu-view popover-menu-view",t.prototype.events={"click .menu-item":"changeItem"},t.prototype.initialize=function(e){if(null!=e?e.dataList:void 0)return this.multi=e.multi,this.dataList=e.dataList||[],this.selected=e.selected,this.multi&&!s.isArray(this.selected)&&(this.selected=[]),t.__super__.initialize.apply(this,arguments),this},t.prototype.render=function(){return this.$el.html(r({selected:"todo"===this.selected})),this.$undoneUl=this.$(".undone-tasks-list ul"),this.$finishedUl=this.$(".finished-tasks-list ul"),this.$addInput=this.$(".add-input"),this.renderFinished(this.dataList,this.selected),this},t.prototype.renderFinished=function(e,t){return this.renderItems(e,t),this},t.prototype.renderItems=function(e,t){if(this.$finishedUl)return s.isArray(t)||(t=[t]),s.each(e,function(e){return e.selected=t.indexOf(e._id)>=0}),this.$finishedUl.html(this.ListTemplate({dataList:e})),e!==this.dataList&&this.$finishedUl.find(".menu-item:first").addClass("active"),this},t.prototype.changeItem=function(e){return this.$(e.currentTarget).data("id"),this.toggleItem(e)},t}(),e.exports=o},MKFOP9IO:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("fpIMfP/U"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priorities=a.a,t}return r.d(t,e),t.prototype.renderPriorityItems=function(){var e=this,t=this.props.priority;return this.priorities.map(function(n){return o.createElement(s.MenuItem,{key:n.number,className:"priority-item",onClick:e.props.onClickPriority.bind(e,n)},o.createElement("button",{className:"not-react-to-draggable-button"},o.createElement("span",{className:"flex-fill"},o.createElement("span",{className:n.className},i.get(n.title))),n.number===t.number&&o.createElement(s.Icon,{name:"tick"})))})},t.prototype.render=function(){return o.createElement(s.Menu,{className:"priority-wrap"},this.renderPriorityItems())},t}(o.PureComponent)},MKz6J3aY:function(e,t){e.exports="\nfragment projectSchema on Project {\n  _id\n  name\n  logo\n  _organizationId\n  isStar\n  isArchived\n  isSuspended\n  applications {\n    name\n  }\n  visibility\n  _sourceId\n  category\n  proTemplateType\n  normalType\n}\n"},MMAj8SYw:function(e,t,n){e.exports=n.p+"images/d_qian@2x.88da484d.png"},MQhb9afL:function(e,t,n){e.exports=n.p+"images/d_haha@2x.a602eaba.png"},MinxDlMG:function(e,t,n){e.exports=n.p+"images/d_weiqu@2x.f896f216.png"},Mm6ZVPcs:function(e,t,n){e.exports=n.p+"images/d_xu@2x.0f5c44a5.png"},MsJsDeYa:function(e,t){e.exports=function(e){return'<div class="modal-content"> <header class="modal-header"> <h4 class="modal-title">'+e.title+'</h4> <a class="modal-close pull-right icon icon-remove" data-dismiss="modal"></a> </header> <div class="modal-body"> <p class="modal-message">'+e.message+'</p> </div> <div class="modal-footer"></div></div>'}},MwJZurjP:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<ul class="testcase-list thin-scroll"> ',i=e.testcases;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=' <li class="testcase ',(s=i[a+=1]).disabled&&(o+="disabled"),o+='" data-id="'+s._id+'" data-title="'+r(s.title)+'"> <div class="testcase-content-wrapper"> <span class="icon icon-testcase"></span> <span class="testcase-title link-search-content">'+r(s.title)+"</span> </div> </li> ";return o+="</ul>"}},"Mwyl/DAu":function(e,t){e.exports=function(e){return'<div class="activities-list-wrap"> <div class="activity-early-wrap"> <a class="activity-early-handler link-handler-gray"> <span class="icon icon-more"></span> <span class="activity-early-hidden">'+tb_i18n.get("activity.early.hidden")+'</span> <span class="activity-early-shown">'+tb_i18n.get("activity.early.shown")+'</span> <span class="activity-early-loading">'+tb_i18n.get("activity.early.loading")+'</span> </a> </div> <ul class="activities-list"></ul> <div class="activities-placeholder hidden"> <div class="activities-placeholder-image"></div> <span class="activities-placeholder-text"> '+tb_i18n.get("activtiy.timeline.empty.placeholder")+' </span> </div> <div class="member-tip-wrap"></div> <div class="involve-tip-wrap"></div> <div class="activities-place-bottom"></div></div>'}},"MydPFfE/":function(e,t,n){e.exports=n.p+"images/f_jiong@2x.751f832f.png"},"N+VAS56f":function(e,t){e.exports=function(e){return'<header class="modal-header"> <h4 class="modal-title">'+tb_i18n.get("task.creator.modal.title")+'</h4> <a class="icon icon-remove modal-close" data-dismiss="modal"></a></header><section class="creator-body"> <div class=\'task-location-wrapper\'> <div class=\'stage-selector-wrapper\'></div> <div class="task-field-config-wrapper"></div> <div class="scenario-selector-wrapper"></div> </div> <div class="creator-block task-creator-input-wrap thin-scroll"> <textarea class="task-content-input form-control" placeholder="'+tb_i18n.get("task.creator.content")+'"></textarea> </div> <div class="basic-attrs-wrap"></div> <div class="task-required-scenario-wrap"></div> <div class="handler-wrap more-handler-wrap"> <a class="more-handler"> <span class="icon icon-more"></span> <span class="creator-handler-text">'+tb_i18n.get("more")+'</span> </a> </div> <div class="creator-involve"></div></section><footer class="creator-footer clearfix"> <div class="creator-visible"></div> <div class="btn-wrap submiting"> <button class="btn btn-primary submit-handler"> '+tb_i18n.get("done")+' </button> <div class="btn-layer"></div> </div> <div class="btn-wrap submiting"> <button class="btn btn-ghost submit-continuity-handler"> '+tb_i18n.get("create.and.continuity")+' </button> <div class="btn-layer"></div> </div></footer>'}},N2d6wNyq:function(e,t,n){var r,o,i,s={}.hasOwnProperty;o=n("wd/RKGTj"),r=n("qHH6+g6Q"),i=n("a+N5u/Cl"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="report",t.prototype.defaults={counts:{delay:0,done:0,new:0},delayTasks:[],doneTasks:[],newTasks:[],ranks:{delay:[],done:[]}},t.prototype.initialize=function(e,n){var r;return null==e&&(e={}),null==n&&(n={}),r=o(n.date),this.id=e._id=r.format("YYYY.MM.DD"),t.__super__.initialize.call(this,e,n)},t.prototype.initSubscribe=function(){var e,t,n,r;for(e=0,t=(r=["delayTasks","doneTasks"]).length;e<t;e++)n=r[e],this.subscribeList(n);return this},t.prototype.subscribeList=function(e){var t,n,r,o,i;for(o=[],t=0,n=(r=this.get(e)||[]).length;t<n;t++)i=r[t],this.subscribeTo(i._id,"change",function(t){return function(n){return t.updateTasksOfList(e,n.toJSON())}}(this)),o.push(this.subscribeTo(i._id,"destroy",function(t){return function(n){return t.removeTaskOfList(e,n)}}(this)));return o},t.prototype.updateTasksOfList=function(e,t){var n,r,s,a,c;for(a=this.get(e)||[],s=[],o(t.dueDate),n=0,r=a.length;n<r;n++)(c=a[n])._id===t._id?s.push(i.extend({},c,t)):s.push(c);return this.set(e,s),this},t.prototype.removeTaskOfList=function(e,t){var n,r,o,i,s;for(o=[],n=0,r=(s=this.get(e)||[]).length;n<r;n++)(i=s[n])._id!==t&&o.push(i);return this.set(e,o),this},t}()},N3amIZou:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R,D,L,z,A,V,F,B,U,H,G,q={}.hasOwnProperty,W=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};D=n("a+N5u/Cl"),U=n("sa1Ed382"),L=n("2qRnoGmE"),c=n("uQSzQ+fH"),l=n("dLlRnP2h"),x=n("vmWJWrVe"),R=n("8N+zwa3A"),o=n("E86Oiqt3"),g=n("bctXzzPQ"),C=n("J13T0k73"),G=n("yiO17FlF"),f=n("PCjZn8k4"),w=n("tGfyIDI3"),p=n("odY26VIi"),d=n("CwvuQCQC"),k=n("85182E8g"),T=n("nL4olqOP"),j=n("PjENi0m4"),P=n("ioaOqjIU"),E=n("TAuajgAY"),a=n("Wf8Rby30"),u=n("p5Ufk1Ob"),m=n("a8ZOy5i7"),S=n("fgCt0kht"),y=n("bmdSruO6"),N=n("OmupbwLD"),h=n("ypWNgh6R"),O=n("UlLXXUDL"),_=n("R81d6RG8").PLUGIN_URL,M=n("44qv6nXV"),b=n("1CaPZLa4"),v=n("n1F+jPwo"),I=n("+j2D3LI+"),s=n("J+xPrmJ1"),V=n("/A1HOqjB").openDashboardModal,i=n("jenUMZo6"),H=n("gh8QIhMV").throwError,A=n("suI5NDUm").isAone,B=n("iEgAZGI+"),F=B.panels,z=B.creator,r=$(window),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)q.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,x),t.prototype.viewName="AppView",t.prototype.el=$("body"),t.prototype.responsiveViews={},t.prototype.hotkeys={h:"backToPortal","shift+m":"openMdHelper",backspace:function(e,t){return e.preventDefault()}},t.prototype.events={"click .readable a, a.url-handler, .routeLinks a, .url":"linkHandler"},t.prototype.initialize=function(){var e,t;return this.$content=$("#teambition-web-content"),this.setup(),null!=window.WebExtensionWin10&&(this.tbClient=new M(this)),this.projectsCollection=T.get(0),this.messagesCollection=d.get(U.user.id),this.messagesCollection.listen(),this.listen(),e=D.throttle((t=this,function(){return t.layout()}),500),r.resize(e),e(),c.add(this),this.renderDIS(),this.monitorPrintStatus(),this},t.prototype.setup=function(){return this.navigation=this.requestSubView(m),this.renderWorksBgUploader(),this.bootHelpService()},t.prototype.reset=function(){return this.removeSubViews(),this.panelView=null,this.navigation=null,this.activityPanel=null,this.worksBgUploader=null,this.currentView=null,this.projectModel=null,this.organizationModel=null,this.currentAppName="",this.setup()},t.prototype.listen=function(){var e;return this.listenTo(this.projectsCollection,"remove",(e=this,function(t){if(e._projectId===t.id)return e.backToPortal()})),this},t.prototype.resetBeforeEnter=function(e){var t;if(this.removeSubViews(this.disDialog,this.navigation,this.worksBgUploader,this.currentView),this.Float=this.requestSubView(a),this.dashboardModalContainer=null,this.projectModel&&(this.lastProjectModel=this.projectModel),this.projectModel=null,this.organizationModel=null,this.setDataCategory(this.currentAppName),!e)return null!=(t=this.currentView)&&t.remove(),this.currentView=null},t.prototype.enterOrganizationNotFound=function(){return this.currentAppName="organizationNotFound",this.subscribeToPortal(),this.renderCurrentView(b,{})},t.prototype.enterOrganizationIsEmpty=function(){return this.currentAppName="organizationIsEmpty",this.subscribeToPortal(),this.renderCurrentView(v,{})},t.prototype.enterSearch=function(e){var t;if("search"!==this.currentAppName)return e?this.subscribeToOrganization(e):this.subscribeToPortal(),this.currentAppName="search",U.gta.setCurrentPage(this.currentAppName),Promise.resolve().then((t=this,function(e){var r;return r=n("cSYW21Cq").SearchView,t.renderCurrentView(r,{isSame:!1})}).bind(null,n)).catch(n.oe)},t.prototype.enterProject=function(e,t,n){var r,o,i,s,a,c,l,u,p;return s=(null!=(u=this.projectModel)?u.id:void 0)===e.id,this.currentAppName=t,this.resetBeforeEnter(s),this.projectModel=e,(r=this.projectModel.get("_organizationId"))&&null!=(p=k.getOne(0,r))&&p.joinRoom(),i=L.FEATURES.plugins&&e.getRoleScope()>=0,a=D.extend({isSame:s},n),i&&t===_?this.enterProjectAppPlugin(e.id,a):(this.showLoadingIndicator(this.$content),this.renderProjectApp(e.id,a)),o=e.getGtaCategory(),U.gta.event({action:"open detail",type:"project",projectid:e.id,fromTemplate:e.get("_sourceId"),category:o}),c=e.get("_organizationId"),l=e.get("orgLevel"),this.refreshWorkspace(c,l)},t.prototype.enterProjectAppPlugin=function(e,t){return this.showLoadingIndicator(this.$content),this.renderProjectApp(e,t)},t.prototype.renderProjectApp=function(e,t){return this.loadProjectDatas(e).then((n=this,function(){return E.resolveFetch(e,{_projectId:e}).then(function(e){var t;return null!=(t=e.findWhere({_appName:n.currentAppName}))?t.toJSON():void 0})})).then(function(e){return function(n){var r;return e.hideLoadingIndicator(),r=D.extend({},t,{appData:n}),e.currentView||e.renderCurrentView(S,r),e.currentView.renderApp(e.currentAppName,r),$("body").scrollTop(0)}}(this)).catch(function(e){return function(t){return e.backToPortal(),H(t)}}(this));var n},t.prototype.enterOrganization=function(e,t){var n,r,o,i;return o=e.id,"organization",r=(null!=(i=this.organizationModel)?i.id:void 0)===o&&"organization"===this.currentAppName,this.currentAppName="organization",this.subscribeToOrganization(e,r),n="Org Projects Page",t.routeString.indexOf("projects")>=0?n="Org Projects Page":t.routeString.indexOf("members")>=0?n="Org Members Page":t.routeString.indexOf("reports")>=0?n="Org Reports Page":t.routeString.indexOf("statistics")>=0?n="Org Dashboards Page":t.routeString.indexOf("analysis")>=0?n="Org Analysis Page":t.routeString.indexOf("testhub")>=0&&(n="Testcases Page"),D.delay(function(){return U.gta.setCurrentPage(n)}),t.isSame=r,this.renderCurrentView(y,t)},t.prototype.refreshWorkspace=function(e){return U.PREFERENCE.setOrganizationWorkspace(e)},t.prototype.subscribeToPortal=function(e){return null==e&&(e=!1),this.resetBeforeEnter(e),this.refreshWorkspace()},t.prototype.subscribeToOrganization=function(e,t){var n,r;return n=e.id,r=e.getRoleScope(),this.resetBeforeEnter(t),this.organizationModel=e,this.organizationModel.joinRoom(),this.refreshWorkspace(n,r)},t.prototype.layout=function(){var e,t,n,o,i;if(null!=(n=this.appSwitcherView)&&n.refreshNavs(),t=r.height(),!D.isEmpty(this.responsiveViews)){for(e in o=this.responsiveViews)"function"==typeof(i=o[e]).layout&&i.layout(t);return this}},t.prototype.linkHandler=function(e){return e.preventDefault(),l.linkHandler(e.currentTarget,void 0,(t=this,function(){return t.Float.close()}));var t},t.prototype.backToPortal=function(){if(!U.user.get("isGhost"))return U.router.home()},t.prototype.renderCurrentView=function(e,t){var n;return t.onError=function(){return U.router.home()},t.isSame||(null!=(n=this.currentView)&&n.remove(),this.currentView=this.requestSubView(e,t),this.currentView.$el.appendTo(this.$content)),U.router.checkRoute(t.routeString,this.currentView),this},t.prototype.renderWorksBgUploader=function(e){var t;return null!=(t=this.worksBgUploader)&&t.remove(),this.worksBgUploader=this.requestSubView(O,e),this.worksBgUploader.$el.appendTo(this.$el),this},t.prototype.bootHelpService=function(){var e,t,n;if(e=k.get(0).some(function(e){return e.payment.isPaid}),t=A()?"vone":e?"intercom":"kf5",g.setServiceType(t),U.ab.intercom()&&(n=g.getInstance()).allowAutoBoot())return n.boot()},t.prototype.showPanel=function(e,t){var n,r,o;return(null!=(n=this.panelView)?n.isIn:void 0)?this.panelView.isSame(t)?this.panelView.hide():this.panelView.hide((o=this,function(){return o.panelView.remove(),o.panelView=o.requestSubView(e,t),o.panelView.show()})):(null!=(r=this.panelView)&&r.remove(),this.panelView=this.requestSubView(e,t),this.panelView.show())},t.prototype.hidePanel=function(){var e,t;if(null!=(e=this.panelView)?e.isIn:void 0)return this.panelView.hide((t=this,function(){return t.panelView=null}))},t.prototype.loadProjectDatas=function(e){return Promise.all([new Promise(function(t,n){return p.fetch(e,{attrs:{users:1,all:!0},boundToObjectType:"project",success:t})}),new Promise(function(t,n){return j.fetch(e,{success:t})}),new Promise(function(t,n){return P.fetch(e,{success:t})}),this.loadOrganizationTags()])},t.prototype.loadOrganizationTags=function(){var e;return(e=this.projectModel.get("_organizationId"))?new Promise(function(t,n){return j.fetch(e,{boundToObjectType:"organization",success:t,error:n})}):Promise.resolve()},t.prototype.openMdHelper=function(){var e;return null!=(e=this.markdownHelperView)&&e.remove(),this.markdownHelperView=this.requestSubView(h,"markdown-helper").open(u),this},t.prototype.dynamicTitle=function(e){var t,n,r,o;return"project"===(t=U.router.getUrl().split("/"))[0]&&(o=null!=(n=this.projectsCollection.get(t[1]))?n.get("name"):void 0),o=L.TITLE?o?o+" · "+L.TITLE:""+L.TITLE:o?o+" · Teambition":tb_i18n.get("teambition.title"),void 0!==e&&(this.badgeCount=e),(null!=(r=U.favico)?r.browser.supported:void 0)?document.title=o:document.title=this.badgeCount?"("+this.badgeCount+")"+o:o,this},t.prototype.setDataCategory=function(e){var t,n,r;return e=e||this.currentAppName,n={portal:"Projects Page",organization:"Organization Page",my:"Me Page",calendar:"Calendar Page",inbox:"Inbox Page",tasks:"Tasks Page",posts:"Posts Page",events:"Events Page",works:"Works Page",tags:"Tags Page",bookkeeping:"Bookkeeping Page",analytics:"Dashboard Page",smartGroups:"Tasks Page",testplan:"Testplans Page"},t=W.call(D.keys(n),e)>=0?n[e]:e,D.delay((r=this,function(){var n,o;return U.gta.setCurrentPage(t),null!=(n=r.$el)&&n.data("category",e),null!=(o=r.$el)?o.attr("data-category",e):void 0}))},t.prototype.getClosestProject=function(){var e,t,n;return e=U.PREFERENCE.get("lastWorkspace"),n=this.projectModel||this.lastProjectModel,0===(t=T.get(0).getCurrentWorkspaceProjects(e)).length?null:null==n?t[0]:"personal"!==e&&e!==n.get("_organizationId")?t[0]:n},t.prototype.getCurrentProject=function(){return this.projectModel},t.prototype.getGlobalUploaderTargetInfo=function(){var e,t,n,r,i;return i="members",this.projectModel&&this.projectModel.isAppEnabled("works")&&this.projectModel.hasPermission("work.post")?(e=(null!=(r=U.router.getUrl().match(/works\/([a-z0-9]+)/))?r[1]:void 0)||this.projectModel.get("_rootCollectionId"),(t=o.find(e))&&(i=t.get("visible")),{projectModel:this.projectModel,collectionId:e,visible:i}):((n=this.getClosestProject())&&(n.isAppEnabled("works")&&n.hasPermission("work.post")||(n=this.projectsCollection.find(function(e){var t,n;return n=U.PREFERENCE.get("lastWorkspace"),t=e.isAppEnabled("works")&&e.hasPermission("work.post"),"personal"!==n?t&&e.get("_organizationId")===n:t})),e=n.get("_rootCollectionId")),{projectModel:n,collectionId:e,visible:i})},t.prototype.getCurrentAppName=function(){return this.currentAppName},t.prototype.openDashboardModal=function(e){if(V(e),!this.dashboardModalContainer)return this.dashboardModalContainer=this.requestSubView(s).$el.appendTo(this.$el)},t.prototype.openObjectPreviewer=function(e,t,n){var r,o,i;return null==n&&(n={}),o=F().then((i=this,function(r){var o,s;return o=r[t],s=U.PREFERENCE.getIsUsePanelToOpenTask(),"work"===t?D.isArray(e)?i.openWorksPreviewer(e[0],e,n):i.openWorksPreviewer(e,[e],n):n.isUsePanel&&s&&o?(n=D.extend({},n,{objectType:t}),D.isObject(e)?(n[t+"Model"]=e,n["_"+t+"Id"]=e.id):n["_"+t+"Id"]=e,i.showPanel(o,n)):(n=D.extend({},n,{isAnimation:!1,objectId:e,objectType:t}),D.isObject(e)&&(n.objectModel=e,n.objectId=e.id),i.requestSubView(N,{onRemove:n.onRemove}).open(f,n))})),r={state:0,view:null,request:o.then(function(e){return-1===r.state&&e.remove?e.remove():(r.view=e,r.state=1)}),cancel:function(){return 1===r.state&&r.view&&r.view.remove&&r.view.remove(),r.state=-1}}},t.prototype.openTaskPreviewer=function(e,t){return this.openObjectPreviewer(e,"task",t)},t.prototype.openTestcasePreviewer=function(e,t){return this.openObjectPreviewer(e,"testcase",t)},t.prototype.openUsercasePreviewer=function(e,t){return this.openObjectPreviewer(e,"usercase",t)},t.prototype.openEventPreviewer=function(e,t){return this.openObjectPreviewer(e,"event",t)},t.prototype.openPostPreviewer=function(e,t){return this.openObjectPreviewer(e,"post",t)},t.prototype.openEntryPreviewer=function(e,t){return this.openObjectPreviewer(e,"entry",t)},t.prototype.openWorksPreviewer=function(e,t,n){var r,o,i,s;return null==n&&(n={}),t||(t=[e]),r=null,o=n.workModels||[],i=t.map(function(t,n){return new Promise(function(n,i){return R.fetch(t,{success:function(t){return o.push(t),t.id===e&&(r=t),n()},error:function(e){return delete G.getData().models[t],delete G.getData().matrix[t],i(e)}})})}),Promise.all(i).then((s=this,function(){return n=D.extend({},n,{isAnimation:!1,workModel:r,workModels:o}),s.requestSubView(N).open(w,n)})).catch(function(){})},t.prototype.renderDIS=function(){var e;if(e="user"===L.FEATURES.enableDIS)return this.disDialog=this.requestSubView(i,{isEnable:e,myUserId:U.user.get("_id")})},t.prototype.monitorPrintStatus=function(){return C.monitorPrintStatus()},t.prototype.openQRInvitation=function(e,t,n){return U.APP.requestSubView(N).open(I,{membersCount:t,type:n,orgId:e})},t.prototype.openCreator=function(e,t){return null==t&&(t={}),z().then((n=this,function(r){switch(e){case"task":return n.requestSubView(N).open(r.task,t);case"event":return n.requestSubView(N).open(r.event,t);case"post":return n.requestSubView(N).open(r.post,t);case"project":return n.requestSubView(N).open(r.project,t)}}));var n},t}()},"N4+akAv+":function(e,t){e.exports=function(e){return'<input class="filter-input form-control" autofocus placeholder="'+e.searchPlaceholder+'"/><ul class="list-unstyled thin-scroll"></ul><button class="btn btn-primary submit-handler" disabled>'+tb_i18n.get("confirm")+"</button>"}},N406gSay:function(e,t,n){var r,o,i,s={}.hasOwnProperty;r=n("VuB9cZyl"),o=n("ntm4gBOK"),i={entry:"entries"},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="objectlinkeds",t.prototype.model=o,t.prototype.orderBy="latest-updated",t.prototype.sync=function(e,n,r){var o;return null==r&&(r={}),o=i[r.objectType]||r.objectType+"s",r.url||(r.url=o+"/"+this._boundToObjectId+"/objectlinkeds"),t.__super__.sync.call(this,e,n,r)},t}()},"N51q+p1C":function(e,t){e.exports=function(e){var t='<ul class="list"> ';return e.objectLinkUrl&&(t+=' <li> <a class="copy-object-link-handler" data-clipboard-text="'+e.objectLinkUrl+"\" data-gta=\"{aciton: 'copy link', control: 'link', type: "+e.gtaType+' }"> <span class="icon icon-link"></span>'+tb_i18n.get("copy.link")+" </a> </li> "),t+=" ",e.canDownload&&(t+=' <li> <a class="download-link-object" data-gta="{action: \'download '+e.gtaType+"', control: 'link'}\"> <span class=\"icon icon-download\"></span>"+tb_i18n.get("previewer.download")+" </a> </li> "),t+=" ",e.permissions.del&&(t+=' <li> <a class="delete-handler"> <span class="icon icon-remove-link"></span>'+tb_i18n.get("link.delete")+" </a> </li> "),t+="</ul>"}},N5TVuzEe:function(e,t,n){},N60gWBRi:function(e,t,n){},"N8F/jIXO":function(e,t,n){},NCxllX0B:function(e,t,n){e.exports=n.p+"images/d_numa@2x.4b947581.png"},NDOjGFQW:function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty;i=n("QyjeWo4p"),c=n("a+N5u/Cl"),s=n("CxY0Mkc1"),l=n("tLZJUYWX"),a=n("XbrdCDrd"),o=n("kYwCKdnI"),r=n("aoqbw/EN"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="StandardLinkView",t.prototype.className="standard-link-view detail-subitem-common-category",t.prototype.initialize=function(e){var t,n;return this.links=null!=(t=e.links)?t:[],this.linkModels=null!=(n=e.linkModels)?n:[],this.objectModel=e.objectModel,this.onMenuToggle=e.onMenuToggle,this.plugin=e.plugin,this.render()},t.prototype.parseData=function(e){return e.redirectUrl=e.url,e},t.prototype.onItemClick=function(e){var t,n,r;if(e&&e.redirectUrl)return t=(n=(r=s.parse(e.redirectUrl)).query&&i.parse(r.query))&&n.mode||"redirect",this.handle({name:e.title,url:e.redirectUrl,mode:t},this.objectModel.toJSON())},t.prototype.renderBasic=function(){var e;return e=function(){var e,t;switch(!1){case"Thoughts"!==(null!=(e=this.plugin)?e.name:void 0):return l.get("standard.link.thoughts");case!(null!=(t=this.plugin)?t.name:void 0):return l.get("standard.link.title",this.plugin.name);default:return l.get("standard.link.default.consumer")}}.call(this),this.$el.html(r({name:e})),this.$list=this.$(".plugin-list"),this},t.prototype.renderList=function(){var e,t;return e=$(document.createDocumentFragment()),this.links.forEach((t=this,function(n){var r,i,s;return r=t.parseData(n.data),i=t.requestSubView(o,{link:r,showMenuHandler:(s=c.find(t.linkModels,function(e){return e.get("_id")===n._id}))&&s.hasPermission("objectlink.del"),onClick:function(){return t.onItemClick(r)},onMenuHandlerClick:function(e){var r,o;return o=n._id,r=$(e.currentTarget),t.onMenuToggle(o,r)}}),e.append(i.$el)})),this.$list.html(e),this},t.prototype.render=function(){return this.renderBasic().renderList()},t}()},NEE0ieHs:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e.posts;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+='<li class="post ',(s=i[a+=1]).disabled&&(o+="disabled"),o+='" data-id="'+s._id+'"> <div class="post-content-wrapper"> <span class="icon icon-wall"></span> <span class="post-title link-search-content">'+r(s.description)+"</span> </div></li>";return o}},NMLEq1ET:function(e,t,n){"use strict";var r=n("tHFGQRix"),o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n.n(i),a=n("tLZJUYWX"),c=n.n(a),l=n("TSYQbtd+"),u=n.n(l),p=n("a+N5u/Cl"),d=n.n(p),h=n("GESwhXbR"),m=n("DOZCBSCZ"),f=n("dWbDnvg6"),g=n("2qRnoGmE"),v=n.n(g),b=n("CxvbiW8r"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseEnter=function(){t.props.onMouseEnter&&t.props.onMouseEnter(t.props.item)},t.onClick=function(){var e=t.props,n=e.item,r=e.onClick;e.disabled||r(n)},t.onClickNext=function(e){e.stopPropagation(),t.props.onClickNext&&t.props.onClickNext(t.props.item)},t}return o.d(t,e),t.prototype.renderAvatar=function(){var e=this.props.item.avatar;return s.a.createElement(f.d,{avatar:e,className:"item-img-avatar"})},t.prototype.renderTick=function(){var e=this.props.item.checked?"item-tick":"item-tick-hidden";return s.a.createElement("div",{className:e},s.a.createElement(h.Icon,{name:"tick",size:14}))},t.prototype.renderCheckBox=function(){var e=this.props,t=e.item,n=e.disabled,r=t.checked;return s.a.createElement(h.Checkbox,{className:"item-checkbox",checked:r||!1,disabled:n})},t.prototype.renderNext=function(){var e=this.props,t=e.item,n=e.disabled,r=t.checked,o=t.hasChildren;return r||n||!o?null:s.a.createElement("div",{className:"item-next",onClick:this.onClickNext},s.a.createElement(h.IconButton,{name:"arrow-right-s",color:"gray"}))},t.prototype.render=function(){var e=this.props,t=e.item,n=e.descShowed,r=e.className,o=e.disabled,i=e.showMembersCount,a=e.checkStyle,l=t.name,p=t.desc,d=u()(b["member-menu-item"],r,{disabled:o}),m=i&&("team"!==t.type||v.a.FEATURES.showMemberCount)&&null!=t.membersCount&&s.a.createElement("span",{className:"item-count"},t.membersCount),f=t.externalMember&&s.a.createElement(h.Tooltip,{title:c.a.get("organization.member.outer")},s.a.createElement(h.Icon,{className:"external-member-mark",name:"external-member"})),g=p&&n?s.a.createElement(h.Tooltip,{title:p},s.a.createElement("div",{className:"item-desc"},p)):null;return s.a.createElement("li",{className:d,onClick:this.onClick,onMouseEnter:this.onMouseEnter},"checkbox"===a&&this.renderCheckBox(),this.renderAvatar(),s.a.createElement("div",{className:"item-content-wrap"},s.a.createElement("div",{className:"item-content"},s.a.createElement("div",{className:"item-main"},s.a.createElement("div",{className:"item-name"},l),m,f),g)),this.renderNext(),"tick"===a&&this.renderTick())},t.defaultProps={className:""},t}(s.a.PureComponent),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){return s.a.createElement("ul",{className:"thin-scroll member-list"},this.props.children)},t}(s.a.PureComponent),_=Object(h.Selectable)(k),w=n("B6lA9c72"),C=n.n(w);function S(e){var t=s.a.createElement("div",{className:"back"},s.a.createElement(h.TextButton,{color:"gray",onClick:e.onClickBack},s.a.createElement(h.Icon,{name:"arrow-left-s"}),c.a.get("back"))),n=e.chilrenResults.map(function(t){return s.a.createElement(y,{key:t.id,disabled:Boolean(t.disableToggle),item:t,descShowed:"team"===t.type,onClick:e.onClickItem,showMembersCount:!1,checkStyle:"checkbox",onClickNext:e.onClickNext})}),r=e.isChildrenLoading?s.a.createElement("div",{className:"loading-wrap"},s.a.createElement(m.a,null)):s.a.createElement("div",{className:"list thin-scroll"},n),o=s.a.createElement("div",{className:"confirm-btn-wrap"},s.a.createElement(h.Button,{className:"confirm-btn",onClick:function(){if("function"==typeof e.onConfirm){var t=e.selected.map(function(e){return e.id});e.onConfirm(t)}}},c.a.get("confirm")));return s.a.createElement("div",{className:C.a["member-sub-list"]},t,r,o)}var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.children,r=e.className,s=u()("select-option-group",r),a=this.props.provideEl?{ref:this.props.provideEl}:{},c=!!t&&i.createElement("div",{className:"option-group-label"},t);return i.createElement("li",o.a({className:s},a),c,i.createElement("ul",null,n))},t.defaultProps={groupped:!0},t}(i.PureComponent),T=n("90U+kJWN"),I=n("eXmkf+pY"),M=n("u/LJYZ+h"),j=n("Lh5+POaI"),P=n("SCi816Ey"),x={id:"involversCountEntry",name:"involversCountEntry",avatar:{type:f.b.Icon,name:"involvers",color:"grey"},checked:!1,disableToggle:!0,type:"custom"};function N(e){return s.a.createElement("li",{className:"empty-tips-with-icon",key:"empty-tips-with-icon"},!!e.imgSrc&&s.a.createElement("img",{src:e.imgSrc}),s.a.createElement("span",null,e.text))}var O=function(e){function t(t){var n=e.call(this,t)||this;return n.getSelectable=function(e){n.selectable=e},n.getList=function(){if(n.isSearching())return n.props.searched;var e=n.props,t=e.hideSelected,o=e.selected,i=e.recommend;return t||o.length<1?i:(n.props.mode===r.a.Single?o:[x]).concat(i)},n.getIndex=function(e){return d.a.findIndex(n.getList(),function(t){return t.id===e.id})},n.onSearchInputChange=function(e){var t=e.target.value;n.props.search(t)},n.onSelect=function(e){var t=e>=0?e:0,r=n.getList(),o=r[t];o?n.onClickItem(o):t===r.length+1&&n.inviteMoreMember()},n.inviteMoreMember=function(){var e=n.props.inviteMoreMember;"function"==typeof e&&(e(),n.closeDropdown())},n.onClickItem=function(e){var t=n.props,o=t.mode,i=t.onClickSearched,s=t.onClickRecommend,a=n.isSearching()?i:s;n.isForbidden(e)||(a(e),o===r.a.Single&&n.closeDropdown())},n.onMouseEnter=function(e){if(n.props.reactToHover){var t=n.getIndex(e);n.resetIndexTo(t)}},n.onMouseEnterInvite=function(){n.props.reactToHover&&n.resetIndexTo(n.getList().length+1)},n.resetIndexTo=function(e){n.setState({index:e},function(){n.mounted&&n.setState({index:-1})})},n.onConfirm=function(){var e=n.props,t=e.onConfirm,r=e.selected;"function"==typeof t&&t(r.map(function(e){return e.id}))},n.onKeyDown=function(e){n.selectable&&n.selectable.keyboardHandler(e)},n.clearSearch=function(){n.props.query&&n.props.search("")},n.closeDropdown=function(){"function"==typeof n.props.closeDropdown&&n.props.closeDropdown()},n.filterFn=function(e){return e.type===y||e.props.className.split(" ").indexOf("invite-btn")>=0},n.captureRecommendSectionEl=function(e){n.recommendSectionEl=e},n.state={index:-1},n}return o.d(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.isSearching=function(){var e=this.props.query;return"string"==typeof e&&""!==e.trim()},t.prototype.isLoading=function(){var e=this.props,t=e.isRecommendLoading,n=e.isSearchLoading;return t||n},t.prototype.isForbidden=function(e){return Boolean(e.disableToggle)},t.prototype.renderSearchInput=function(){return s.a.createElement(I.a,{onKeyDown:this.onKeyDown,value:this.props.query,onChange:this.onSearchInputChange,clearInput:this.clearSearch})},t.prototype.renderInviteBtn=function(){return this.props.inviteShowed&&s.a.createElement("li",{key:"invite-btn",className:"invite-btn",onClick:this.inviteMoreMember,onMouseEnter:this.onMouseEnterInvite},s.a.createElement(h.Icon,{name:"circle-cross"}),s.a.createElement("span",{className:"invite-member-tips"},a.get("member.menu.invite")))},t.prototype.renderPlaceholder=function(){var e=this.props.contentPlaceholder;if(!this.isSearching()&&e&&0===this.getList().length)return N(e);if(!this.isSearching()||this.props.searched.length>0)return!1;var t=this.props.searchNotFoundPlaceholder;if(t)return N(o.a({imgSrc:M},t));var n=this.props,r=n.inviteShowed,i=n.scenario,c=r?a.get("member.menu.not.found2"):a.get("member.menu.not.found");return"visible-members"===i&&(c=r?a.get("member.menu.visible.members.not.found.with.invite"):a.get("member.menu.visible.members.not.found")),"organization-members"===i&&(c=a.get("member.menu.not.found.in.organization")),s.a.createElement("li",{className:"empty-tips",key:"empty-tips"},c)},t.prototype.renderResultTip=function(){var e=this.props.searched;return this.isSearching()&&e.length>=20&&s.a.createElement("li",{className:"search-results-tips",key:"search-results-tips"},a.get("member.menu.search.tips"))},t.prototype.renderMembers=function(e,t){var n=this;return e.map(function(e){return s.a.createElement(y,{key:e.id,disabled:n.isForbidden(e),item:e,descShowed:Boolean(t),onClick:n.onClickItem,onMouseEnter:n.onMouseEnter,showMembersCount:!n.props.hideMembersCountOnItem,checkStyle:n.props.mode===r.a.Multi?"checkbox":"tick",onClickNext:n.props.onClickNext})})},t.prototype.renderSelectedSection=function(){var e,t=this,n=this.props,o=n.selectedTitle,i=n.selected;if(!i.length)return null;if(this.props.mode===r.a.Single)e=s.a.createElement(E,{label:o},this.renderMembers(i));else{var c=this.props.involverTitle?this.props.involverTitle(i.length):a.get("member.menu.involvers.count",i.length);e=s.a.createElement("li",{className:"involvers-count-entry",onClick:function(){t.props.onClickNext(x)}},c,s.a.createElement(h.IconButton,{name:"arrow-right-s",color:"gray"}))}return e},t.prototype.componentDidUpdate=function(e){var t,n;this.props.recommendTop!==e.recommendTop&&this.recommendSectionEl&&(t=this.recommendSectionEl,n=this.recommendSectionEl.offsetParent,P(t,"scroll",{container:n,offset:0}))},t.prototype.renderRecommendSection=function(){var e=this.props.recommend;return e.length&&s.a.createElement(E,{label:a.get("recommend"),provideEl:this.captureRecommendSectionEl},this.renderMembers(e))},t.prototype.renderDefaultItems=function(){return[this.props.hideSelected?null:this.renderSelectedSection(),this.renderRecommendSection()]},t.prototype.renderSearchResultSection=function(){var e=this.props.searched;return e.length&&s.a.createElement(E,{label:a.get("search.results.count",e.length)},this.renderMembers(e,!0))},t.prototype.renderItems=function(){var e=this.isSearching()?this.renderSearchResultSection():this.renderDefaultItems();return Object(T.flattenPlainGroup)(Object(T.iterator)(e))},t.prototype.renderContent=function(){return this.renderItems().concat(this.renderPlaceholder(),this.renderInviteBtn(),this.renderResultTip())},t.prototype.renderSelectableContent=function(){return s.a.createElement(_,{ref:this.getSelectable,focusable:!1,index:this.state.index,filterFn:this.filterFn,onEnter:this.onSelect},this.renderContent())},t.prototype.renderConfirmBtn=function(){return this.props.mode!==r.a.Single&&s.a.createElement("div",{className:"confirm-btn-wrap"},s.a.createElement(h.Button,{className:"confirm-btn",onClick:this.onConfirm},a.get("confirm")))},t.prototype.renderLoading=function(){return s.a.createElement("div",{className:"loading-wrap"},s.a.createElement(m.a,null))},t.prototype.render=function(){var e=this.isLoading()?this.renderLoading():this.renderSelectableContent();return s.a.createElement("div",{className:u()(j["member-menu-body-component"],"member-menu-body")},this.renderSearchInput(),e,this.renderConfirmBtn())},t.defaultProps={nested:!1,reactToHover:!1},t}(s.a.PureComponent),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={opened:!!t.props.defaultOpened},t.onOpen=function(){var e=t.props.onOpen;"function"==typeof e&&e()},t.onHide=function(){var e=t.props.onHide;"function"==typeof e&&e()},t.onVisibleChange=function(e){t.setState({opened:e})},t.onTriggerClick=function(e){e.stopPropagation()},t.closeDropdown=function(){t.setState({opened:!1}),t.onHide()},t}return o.d(t,e),t.prototype.renderMenuBody=function(){var e=this.props.historyPath;if(e&&e.length>0&&this.props.childrenResults){var t=void 0;return t=e[0].id===x.id?this.props.selected:this.props.childrenResults,s.a.createElement(S,{parent:e[e.length-1],chilrenResults:t,isChildrenLoading:this.props.isChildrenLoading,selected:this.props.selected,onClickItem:this.props.onClickSearched,onClickNext:this.props.onClickNext,onClickBack:this.props.onClickBack,onConfirm:this.props.onConfirm})}return s.a.createElement(O,o.a({},this.props,{closeDropdown:this.closeDropdown}))},t.prototype.renderTrigger=function(){var e=this.props.children;return s.a.createElement("div",{className:j["member-menu-trigger"],onClick:this.onTriggerClick},e)},t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.nested,r=e.className,o=u()(j["member-menu"],"member-menu-component",r);return t?this.renderTrigger():s.a.createElement(h.Dropdown,{className:o,placement:"bottom",content:this.renderMenuBody(),persistence:!0,nested:n,opened:this.state.opened,onOpen:this.onOpen,onHide:this.onHide,onVisibleChange:this.onVisibleChange},this.renderTrigger())},t}(s.a.PureComponent);n.d(t,"c",function(){return r.a}),n.d(t,"b",function(){return O}),n.d(t,"a",function(){return R})},NMYpcb63:function(e,t){e.exports=function(e){var t='<header class="modal-header flex-static"> <a class="prev-handler icon icon-chevron-left ';return e.isFirst&&(t+="hide"),t+='"></a> <h4 class="modal-title">'+e.title+'</h4> <a class="modal-close icon icon-remove" data-dismiss="modal"></a></header><div class="modal-body flex-fill"> '+e.body+"</div>"}},NOkC79p1:function(e,t,n){e.exports=n.p+"images/o_zhong@2x.3cb4e102.png"},NQ01EqTi:function(e,t,n){e.exports={"scrollbar-filling-space":"scrollbar-filling-space__34vF"}},NQHOq8Cg:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<div class="placeholder muted flex-vert flex-center flex-vcenter"> ';return e.invisibleCount?o+=' <div class="invisible-icon"></div> <p>'+r(tb_i18n.get("tasklist.invisible.hint",e.invisibleCount))+"</p> ":o+=' <span class="icon icon-board"></span> <p>'+tb_i18n.get("task.placeholder")+"</p> ",o+="</div>"}},"NR/6Mr8q":function(e,t){e.exports=function(e){return'<div class="form-group"> <h5>'+tb_i18n.get("project.menu.share.link")+'</h5> <input class="project-name form-control margin-bottom" value='+e.shareLink+"/></div><div> <h5>"+tb_i18n.get("project.menu.share.to")+'</h5> <div class="share-project-btn"> <a href="http://service.weibo.com/share/share.php?ralateUid=2673498793&url='+e.weiboLink+"&title="+e.weiboBody+'" target="_blank" title="'+tb_i18n.get("project.menu.share.to.weibo")+'" class="share-handler"><span class="icon icon-weibo"></span></a> <a href="mailto:?subject='+e.mailTitle+"&body="+e.mailBody+'" title="'+tb_i18n.get("project.menu.share.to.mail")+'" class="share-handler"><span class="icon icon-td-envelope"></span></a> </div></div>'}},"NT8FmA7+":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k={}.hasOwnProperty;f=n("a+N5u/Cl"),p=n("q1tIBJhx"),i=n("bZr3G77e"),m=n("vmWJWrVe"),d=n("GESwhXbR").Toast,g=n("2qRnoGmE"),y=n("sa1Ed382"),c=n("odY26VIi"),l=n("ypWNgh6R"),s=n("J/O+sWSp"),u=n("RLD3BeS/").RawHTMLWithAnchorFormatter,a=n("aNCC9bZV"),r=n("abvD/6Uj"),o=n("pvstIaRp"),h=n("L2bYkKUI"),b=function(){return{_id:"indie",logo:h,name:tb_i18n.get("handover.task.project.unset")}},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)k.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,m),t.prototype.viewName="HandoverTasksView",t.prototype.className="handover-tasks-view",t.prototype.events={"click .tab-item":"switchProject","click .select-all-tasks":"selectAllTasks","click .unselect-all-tasks":"unselectAllTasks","click .set-executor":"openExecutorSelector"},t.prototype.initialize=function(e){return this.props={userId:e.userId,orgId:e.orgId},this.state={projects:[],currentProjectId:"",members:[],tasks:[],selectedTaskIds:[]},this.showLoadingIndicator(this.$el),Promise.all([this.loadProjects(),this.loadOrgMembers()]).then((t=this,function(e){var n,r,o;if(r=e[0],n=e[1],t.$el)return t.hideLoadingIndicator(),t.state.members=n,t.state.projects=[b()].concat(f.sortBy(r,"pinyin")),t.state.projects.length?t.switchProject(null!=(o=r[0])?o._id:void 0):void 0})).catch(function(e){return function(t){return e.hideLoadingIndicator()}}(this));var t},t.prototype.renderBasic=function(){return this.$el.html(r(this.state))},t.prototype.renderTasks=function(){var e,t;return null!=(e=this.taskListView)&&e.remove(),this.taskListView=this.requestSubView(a,{organizationId:this.props.orgId,projectId:"indie"===this.state.currentProjectId?void 0:this.state.currentProjectId,userId:this.props.userId,onSelect:(t=this,function(e){return t.state.tasks=e.tasks,t.state.selectedTaskIds=e.selectedTaskIds,t.renderFooter()})}),this.$(".tasks").html(this.taskListView.$el)},t.prototype.renderFooter=function(){return this.$(".footer").html(o(this.state))},t.prototype.loadProjects=function(){return i.get("organizations/"+this.props.orgId+"/projectsformember/"+this.props.userId)},t.prototype.loadOrgMembers=function(e){return new Promise((t=this,function(e,n){return c.fetch(t.props.orgId,{boundToObjectType:"organization",success:function(t){return e(t.toJSON())},error:n})}));var t},t.prototype.switchProject=function(e){var t,n,r;if(n="string"==typeof e)r=e;else{if((r=$(e.currentTarget).data("id"))===this.state.currentProjectId)return;this.state.currentProjectId&&(t=this.getSelectProjectItem(this.state.currentProjectId)),null!=t&&t.removeClass("active")}return this.state.currentProjectId=r,this.state.tasks=[],this.state.selectedTaskIds=[],n?this.renderBasic():$(e.currentTarget).addClass("active"),this.renderFooter(),this.renderTasks()},t.prototype.getSelectProjectItem=function(e){var t,n,r,o;if(o=$(".tab-item",this.el))for(t=0,r=o.length;t<r;t++)if(n=o[t],$(n).data("id")===e)return $(n)},t.prototype.selectAllTasks=function(){var e;return null!=(e=this.taskListView)?e.selectAllTasks():void 0},t.prototype.unselectAllTasks=function(){var e;return null!=(e=this.taskListView)?e.unselectAllTasks():void 0},t.prototype.openExecutorSelector=function(e){var t,n;return t=this.requestSubView(l,{size:"small",title:tb_i18n.get("member.handover.tasks.set.executor")}).open(s,{noAssign:!0,searchPlaceholder:tb_i18n.get("member.menu.search.org"),members:this.state.members.filter((n=this,function(e){return e._id!==n.props.userId&&!e.isDisabled})),selectCallback:function(e){return function(n){return y.gta.event({action:"handover task",segment:"Handover Task"}),t.close(),e.handoverTasks(n[0])}}(this)})},t.prototype.handoverTasks=function(e){var t,n,r,o,s,a;return t={_executorId:e||null,_taskIds:this.state.selectedTaskIds},n=f.findWhere(this.state.members,{_userId:e}),r=n&&f.escape(n.name)||tb_i18n.get("task.detail.no.executor"),"indie"!==this.state.currentProjectId?(s="projects/"+this.state.currentProjectId+"/tasks/executor",o="post"):(s="organizations/"+this.props.orgId+"/tasks/executor",o="put"),i[o](s,t,{silentError:!0}).then((a=this,function(t){var n;return e&&t.addProjectMember?d.success({message:tb_i18n.get("member.handover.tasks.success"),description:v(tb_i18n.get("member.handover.tasks.success.hint.nonMember",r),"/project/"+a.state.currentProjectId)}):e?d.success({message:tb_i18n.get("member.handover.tasks.success"),description:tb_i18n.get("member.handover.tasks.success.hint",r)}):d.success({message:tb_i18n.get("member.handover.tasks.success")}),null!=(n=a.taskListView)?n.removeTasks(a.state.selectedTaskIds):void 0})).catch(function(e){return function(t){return"ExceedLimit"===t.responseJSON.name?d.error({message:tb_i18n.get("member.handover.tasks.error"),description:v(tb_i18n.get("member.handover.tasks.error.hint.exceed",r),"/project/"+e.state.currentProjectId)}):"ExceedUserLimit"===t.responseJSON.name?window.location.href=g.ACCOUNT_HOST+"/license":d.error({message:t.responseJSON.message||tb_i18n.get("error")})}}(this))},t}(),v=function(e,t){return p.createElement(u,{html:e,onClick:function(){return window.open(t)}})}},"NUiYjMN+":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f={}.hasOwnProperty;o=n("4c1CS0b3").Observable,p=n("vmWJWrVe"),u=n("3eMzznN/"),n("tLZJUYWX"),d=n("s0r7VfKc").default,h=n("sa1Ed382"),i=n("77NnVLwu"),r=n("sSp8UPiE"),l=n("cYCUfKUd"),c=n("38LFgJ33"),s=n("MwJZurjP"),a=n("HLWm+6U5").TestgroupCreatorModal,m=n("Ino9OVGK").testgroupCreationToast,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)f.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.viewName="ObjectPickerTestcasesView",t.prototype.className="object-picker-testcases-view flex-horiz flex-stretch horizontal-scroll",t.prototype.events={"click .testplan":"enterTestplan","click .testgroup":"enterTestgroup","click .testcase":"toggleTestcase","click .testgroup-creator-handler":"openTestgroupCreator"},t.prototype.initialize=function(e){return this._projectId=e._projectId,this.onSelect=e.onSelect,this.onCreate=e.onCreate,this.testplanId=null,this.testgroupId=null,this.selected=[],this.selectedGroup=null,this.renderBasic(),this.showLoadingIndicator(this.$testplanColumn),this.subscribe(o.forkJoin([i.fetch$(this._projectId).do((t=this,function(e){t.projectModel=e})),this.fetchTestplans().do(function(e){return function(t){e.testplans=t}}(this))]).do(function(e){return function(){return e.renderTestplans(),e.hideLoadingIndicator()}}(this)));var t},t.prototype.fetchTestplans=function(){return d.fetch.getTestplans(this._projectId)},t.prototype.fetchTestgroups=function(){return d.fetch.getTestplanGroups(this.testplanId).toPromise()},t.prototype.fetchTestcases=function(){return d.fetch.getTestcases(this._projectId,"_testplanId = "+this.testplanId,void 0,this.testgroupId,!0).toPromise()},t.prototype.clearSelectedGroup=function(){return this.selectedGroup=null,this.$(".testgroup").removeClass("selected")},t.prototype.clearSelected=function(){return this.selected=[],this.$(".testcase").removeClass("selected"),this.clearSelectedGroup(),this.onSelect([])},t.prototype.submitSelect=function(){var e,t;return e=this.selected.map(function(e){return{_id:e,type:"testcase"}}),t=this.selectedGroup?[{_id:this.selectedGroup,type:"testplangroup",gtaType:"testcase group"}]:[],this.onSelect(e.concat(t))},t.prototype.enterTestplan=function(e){var t,n,r;if(t=$(e.currentTarget),n=$(e.currentTarget).data("id"),t.addClass("active"),t.siblings().removeClass("active"),n!==this.testplanId)return this.testplanId=n,this.testgroupId=null,this.$testgroupColumn.empty(),this.$testcaseColumn.empty(),this.clearSelected(),this.submitSelect(),this.testplanId&&(this.showLoadingIndicator(this.$testgroupColumn),this.fetchTestgroups().then((r=this,function(e){return r.testgroups=e,r.renderTestgroups(),r.hideLoadingIndicator()}))),this.submitSelect()},t.prototype.enterTestgroup=function(e){var t,n,r;if(n=(t=$(e.currentTarget)).data("id"),t.siblings().removeClass("active").removeClass("selected"),t.addClass("active"),this.selectedGroup!==n?(this.clearSelected(),this.selectedGroup=n,t.addClass("selected")):(this.clearSelectedGroup(),t.removeClass("selected")),this.submitSelect(),n!==this.testgroupId&&(this.testgroupId=n,this.$testcaseColumn.empty(),this.testgroupId))return this.showLoadingIndicator(this.$testcaseColumn),this.fetchTestcases().then((r=this,function(e){return r.testcases=e,r.renderTestcases(),r.hideLoadingIndicator()}))},t.prototype.toggleTestcase=function(e){var t,n;return n=(t=$(e.currentTarget)).data("id"),t.toggleClass("selected"),t.hasClass("selected")?this.selected.push(n):u.removeItem(this.selected,n),this.selected.length>0&&this.selectedGroup&&this.clearSelectedGroup(),this.submitSelect()},t.prototype.onCreateTestgroup=function(e,t){return d.fetch.createTestplanGroup(t,{name:e}).subscribe((n=this,function(e){return m(e),h.gta.event({action:"added content",control:"add_link_handler",type:"testcase group"}),n.onCreate([{_id:e._id,type:"testplangroup"}])}));var n},t.prototype.openTestgroupCreator=function(){var e,t;return e=$('<div class="testgroup-creator-wrapper"></div>'),this.$el.append(e),h.gta.event({action:"add content",control:"add_link_handler",type:"testcase group"}),this.requestReactView(e.get(0),a,{opened:!0,testplanId:this.testplanId,project:this.projectModel.toJSON(),mountIn:function(){return e.get(0)},onVisibleChange:(t=this,function(n){if(!n)return t.unmountReact(e.get(0))}),onSubmit:this.onCreateTestgroup.bind(this)})},t.prototype.renderBasic=function(){return this.$el.html(r()),this.$testgroupCreatorWrapper=this.$(".testgroup-creator-wrapper"),this.$testplanColumn=this.$(".testplan-list"),this.$testgroupColumn=this.$(".testgroup-list"),this.$testcaseColumn=this.$(".testcase-list-wrapper")},t.prototype.renderTestplans=function(){return this.$testplanColumn.html(l({testplans:this.testplans}))},t.prototype.renderTestgroups=function(){return this.$testgroupColumn.html(c({testgroups:this.testgroups,canCreate:this.projectModel.hasPermission("testgroup.post")}))},t.prototype.renderTestcases=function(){return this.$testcaseColumn.html(s({testcases:this.testcases})),this.$el.animate({scrollLeft:400})},t}()},NVQQjqdr:function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("aD6I3VT4"),o=n("nxD9fhrn").NoteLiteComponent,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.tagName="section",t.prototype.viewName="NoteLiteView",t.prototype.className="note-lite-view detail-infos-custom-field-view no-border-wrapper",t.prototype.initialize=function(e){return t.__super__.initialize.apply(this,arguments),this.objectModel=e.objectModel,this.isRequired=e.isRequired,this.canEdit=e.canEdit,this.render(),this.listen()},t.prototype.listen=function(){return this.listenTo(this.objectModel,"change:note",this.render)},t.prototype.render=function(){return this.requestReactView(this.el,o,{note:this.objectModel.get("note"),onSave:this.saveNote.bind(this),isRequired:this.isRequired,canEdit:this.hasPermission()})},t.prototype.saveNote=function(e){return this.objectModel.set({note:e})},t.prototype.isCase=function(){return!0},t.prototype.hasPermission=function(){return this.canEdit},t}()},NYqh6zCI:function(e,t,n){e.exports=n.p+"images/h_buyao@2x.23c937bd.png"},NZ1cSdKb:function(e,t,n){e.exports={"project-add-menu":"project-add-menu__36t8"}},Nc3BEDoo:function(e,t,n){e.exports={"date-wrap":"date-wrap__yy5i","date-picker-shortcut":"date-picker-shortcut__wsvW"}},NcJws2TO:function(e,t){e.exports=function(e){var t,n,r='<div class="file-name-wrapper hinted"> <div class="file-name"> '+("undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}))(e.fileName)+' </div></div><div class="previewer-header-handler"> ';return e.isFileLocalExist?r+=" <a class=\"previewer-handler open-work-handler\" data-gta=\"{action: 'open detail', type: 'file', control: 'Right Open Button', method: 'open'}\"> <span class=\"icon icon-file3\"></span> <span>"+tb_i18n.get("previewer.open")+"</span> </a> ":r+=" <div class=\"previewer-handler download-handler\" data-gta=\"{action: 'open detail', type: 'file', segment: 'file page', control: 'Right Menu', method: 'download'}\"> <span class=\"icon icon-download-file\"></span> <span>"+tb_i18n.get("previewer.download")+"</span> </div> ",r+=' <div class="previewer-handler cancel-handler" data-dismiss="modal" data-gta="event" data-label="close previewer"> <span class="icon icon-remove-s"></span> </div></div>'}},NdG5lKr9:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"generate",function(){return C}),n.d(r,"preprocess",function(){return S}),n.d(r,"stylify",function(){return E});var o={};n.r(o),n.d(o,"formatWork",function(){return M}),n.d(o,"formatVoiceDuration",function(){return j}),n.d(o,"formatShareData",function(){return P}),n.d(o,"formatVoiceData",function(){return x});var i=n("/MKjzBat"),s=n("x89q56rT"),a=n("mrSGxOB2"),c=n("q1tIBJhx"),l=n("a+N5u/Cl"),u=n.n(l),p=n("tLZJUYWX"),d=n("GESwhXbR"),h=n("sa1Ed382"),m=n("YqUJfXDr"),f=n("Rmym59ay"),g=n("8mQ/xLZE"),v=n("TSYQbtd+"),b=n.n(v),y=n("wd/RKGTj"),k=n.n(y),_=n("8y0JNx5d"),w=n("uaT+k2Om"),C=function(e){var t=e.imageWidth||200,n=e.imageHeight||200,r=t/n,o=0,i=0;return r>1?i=(o=Math.min(t,200))/r:o=r<1?(i=Math.min(n,200))*r:i=Math.min(t,200),o=Math.max(Math.floor(o),36),i=Math.max(Math.floor(i),36),{url:Object(_.getFileHost)()+"/thumbnail/"+e.fileKey+"/w/"+o+"/h/"+i,width:o,height:i}},S=function(e,t){return{placeholderHeight:Math.max(e.height,e.width),tobeThumbnail:t.fetchImage(e.url,{withOrientation:!0,enableCORS:!0}).toPromise().then(function(e){var t=e.image,n=e.orientation,r=Object(w.orientationCorrected)(n,t),o=r.width,i=r.height;return r.toBlob?new Promise(function(e){return r.toBlob(function(t){return e({blob:t,width:o,height:i})})}):{url:r.toDataURL(),width:o,height:i}})}},E=function(e){var t,n,r=e.width,o=e.height,i=e.url;return"number"==typeof(t=null==r?"100%":r)&&(t+="px"),"number"==typeof(n=null==o?0:o)&&(n+="px"),{width:t,height:n,url:null==i?"":i,blob:e.blob}},T=n("3eMzznN/"),I={LEGACY:/^()([a-f0-9]{24})$/,INVITE:/next=(http[\w\.%!]*?(?:task|post|work|event)%252F([a-f0-9]{24})[\w\.%!]*)/,READONLY:/next=(http[\w\.%!]*?(?:task|post|work|event)%2F([a-f0-9]{24})[\w\.%!]*)/},M=function(e){var t=/link/.test(e.fileCategory)?"link":e.fileType;return a.a({},e,{fileSizeFix:T.formatFileSize(e.fileSize||0),thumbnailText:t.length>4?"<h3>"+t.substr(0,1).toUpperCase()+"</h3>":t})},j=function(e){var t=Math.floor(e),n=t/60|0,r=t%60;return(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())},P=function(e){if(!e)return null;var t=u.a.clone(e);for(var n in t=a.a({},t,{fileName:t.title,fileType:t.type,thumbnail:t.imgUrl}),I){var r=I[n].exec(e.mobileShareLink||e.url);if(r){t.url=r[1],t._type=n,t.obj_id=r[2];break}}return"task"===t.type&&(t.description=t.description.split("\n")[0]),t},x=function(e){if(!e)return null;var t,n=e.duration;return t=n>=60?200:n>1?100+Math.floor(100*(n-1)/59):100,a.a({},e,{durationFormat:j(n),barWidth:t+"px"})},N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.d(t,e),t.prototype.render=function(){return c.createElement("div",{className:"message-voice-wrapper bubble clearfix",style:{width:this.props.width},onClick:this.props.onClick},c.createElement("div",{className:"voice-progress"}),c.createElement("span",{className:"icon icon-play play-ctrl pull-left"}),c.createElement("span",{className:"icon icon-pause pause-ctrl pull-left",style:{display:"none"}}),c.createElement("span",{className:"play-time pull-right"},this.props.duration))},t}(c.PureComponent),O=n("Zgk2zrTd"),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.d(t,e),t.prototype.render=function(){var e,t=this.props.share,n=b()("bubble","work","share-content",((e={})["is-share-object"]=t.isShareObject,e));return c.createElement("div",{className:n,"data-id":""+t.obj_id,"data-share-url":""+t.url,"data-type":""+t.type,"data-share-type":""+t._type,onClick:this.props.onClick},c.createElement(O.a,{work:t,subtitle:"description"}))},t}(c.PureComponent),D=n("Y5VZwSuJ"),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){var e=t.props,n=e.attachment,r=e.onClick;n&&r(n.fileKey)},t}return a.d(t,e),t.prototype.render=function(){var e,t=this.props,n=t.attachment,r=t.height,o=t.width,i=t.url,s=t.blob,a={width:o,height:r,backgroundImage:i||void 0},l=b()("work","previewer-handler","bubble",((e={})["category-"+n.fileCategory]=!0,e));return n.thumbnail?c.createElement(d.Tooltip,{title:n.fileName},c.createElement("li",{className:"previewer-handler category-thumb",style:a,onClick:this.onClick},s&&c.createElement(D.a,{style:a,blob:s}))):c.createElement("li",{className:l,onClick:this.onClick},c.createElement(O.a,{work:n,subtitle:"fileSizeFix"}))},t}(c.PureComponent),z=n("wMS7wN+j"),A=n.n(z),V=n("90U+kJWN"),F=n("/e+Ob7oW"),B=n("Lj/ldHVx"),U=n("IM6TaE5+"),$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=c.createRef(),t}return a.d(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.componentDidMount=function(){var e=this;this.rafId=requestAnimationFrame(function(){var t=e.ref.current;if(t){var n=t.querySelectorAll("pre code");l.forEach(n,function(e){return B.highlightBlock(e)})}e.rafId=null})},t.prototype.componentWillUnmount=function(){this.rafId&&cancelAnimationFrame(this.rafId)},t.prototype.render=function(){var e,t,n=this.props,r=n.useMarkdown,o=n.children;return r?(e=F(U.replaceMD(o)),t="message-content bubble readable"):(e=U.translate(o).map(function(e){return e.isEmoji?e.value:Object(V.formatHyperLink)(e.value)}).join(""),t="message-content bubble readable pre"),e=A.a.sanitize(e,{FORBID_TAGS:["style"],FORBID_ATTR:["style"]}),c.createElement("div",{ref:this.ref,className:t,dangerouslySetInnerHTML:{__html:e}})},t}(c.Component),H=n("rx72K1eX"),G=function(e){function t(t){var n=e.call(this,t)||this;return n.state={recallRemain:t.recallRemain},n}return a.d(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.state.recallRemain;t<=0||(this.recallId=window.setTimeout(function(){e.setState({recallRemain:-1})},1e3*t))},t.prototype.componentWillUnmount=function(){null!=this.recallId&&(window.clearTimeout(this.recallId),this.recallId=null)},t.prototype.render=function(){var e=this.props,t=e.clickable,n=e.removeable,r=e.created,o=b()("react-time-stamp","muted",{clickable:t,removeable:n});return c.createElement("div",{className:"message-info clearfix"},this.renderRecallHandler(),c.createElement("div",{className:"message-handler-set"},this.renderDownloadHandler()),c.createElement("span",{className:"message-creator-name"},this.renderCreatorName(),c.createElement("div",{className:o},c.createElement(H.Timestamp,{initialTime:k()(r).toDate()}))))},t.prototype.renderDownloadHandler=function(){if(!this.props.onDownload)return null;return c.createElement("a",{className:"btn btn-link btn-mini download-attachments-handler",onClick:this.props.onDownload},p.get("activity.download.all.attachments"))},t.prototype.renderCreatorName=function(){if(this.props.creator)return c.createElement("span",{className:"name-limit"},this.props.creator,p.get("comma"))},t.prototype.renderRecallHandler=function(){if(!(this.state.recallRemain<=0)&&this.props.onRecall)return c.createElement("div",{className:"recall-handler",onClick:this.props.onRecall},c.createElement("span",{className:"recall-title"},p.get("chat.message.recall")))},t}(c.PureComponent),q=n("sa1Ed382"),W=["user","project","group"],J=["message.recall","remove.member","remove.self","invite.member"],X=u.a.chain(["message","message.share","message.photo","message.voice","message.attachments"]).map(function(e){return W.map(function(t){return"activity.room.direct."+t+"."+e})}).flatten().value(),Y=function(e){function t(t){var n=e.call(this,t)||this;return n.voiceInfo={},n.memberCardInited=!1,n.getRef=function(e){n.mountedEl=e},n.isUnknownMessage=function(){return!n.isSystemMessage()&&!n.isNormalMessage()},n.isNormalMessage=function(){var e=n.props.message.action;return X.filter(function(t){return e.indexOf(t)>=0}).length>0},n.isSystemMessage=function(){var e=n.props.message.action;return J.filter(function(t){return e.indexOf(t)>=0}).length>0},n.enterPreviewer=function(e){n.props.enterPreviewer(e,n.state.data.attachments)},n.downloadAttachments=function(){n.props.downloadAttachments(n.state.data.attachments)},n.voiceCtrl=function(e){e.stopPropagation(),n.props.voiceCtrl(n.voiceInfo)},n.recallMessage=function(){n.props.recall(n.props.message._id)},n.state={data:n.props.message,thumbnailMap:new Map,canRecall:!0},n}return a.d(t,e),t.prototype.componentDidMount=function(){var e,t,n=this.props.message.content.voice;n&&(t=n.previewUrl,e=n.duration),this.props.message.content.voice&&this.props.voiceInit(this.voiceInfo,t,e,this.props.message._id)},t.prototype.UNSAFE_componentWillMount=function(){var e,t,n,i,s,c,l=this,d=this.props.message,h={},m=q.user.id;d.locales&&(h=d.locales[p.getLanguage()]),d=a.a({},d,{title:d.title||"",creator:d.creator||{id:"",_id:"",name:""},_userMeId:m,attachments:this.getAttachmentDatas(d),permissions:{put:null!==d.creator&&d.creator._id===m,del:null!==d.creator&&d.creator._id===m,workGetDownload:!0},share:o.formatShareData(d.content.share),voice:o.formatVoiceData(d.content.voice)},h);var f=a.f(u.a.partition(d.attachments,function(e){return!~["jpg","jpeg"].indexOf(e.fileType)}),2),g=f[0],v=f[1];try{for(var b=a.i(g),y=b.next();!y.done;y=b.next()){var k=y.value,_=r.generate(k);k.dynamicThumbnail=r.stylify(_)}}catch(O){e={error:O}}finally{try{y&&!y.done&&(t=b.return)&&t.call(b)}finally{if(e)throw e.error}}var w=[];try{for(var C=a.i(v),S=C.next();!S.done;S=C.next()){k=S.value,_=r.generate(k);var E=r.preprocess(_,this.props.imageLoader),T=E.placeholderHeight,I=E.tobeThumbnail;k.dynamicThumbnail=r.stylify({height:T}),w.push([k.fileKey,I])}}catch(R){n={error:R}}finally{try{S&&!S.done&&(i=C.return)&&i.call(C)}finally{if(n)throw n.error}}d.share&&["task","post","event","entry"].indexOf(d.share.type)>-1&&(d.share.isShareObject=!0);var M=[],j=function(e,t){var n=t.then(function(t){return a.a({fileKey:e},r.stylify(t))});M.push(n)};try{for(var P=a.i(w),x=P.next();!x.done;x=P.next()){var N=a.f(x.value,2);j(N[0],I=N[1])}}catch(D){s={error:D}}finally{try{x&&!x.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}Promise.all(M).then(function(e){var t=new Map;return e.forEach(function(e){var n=e.fileKey,r=e.width,o=e.height,i=e.url,s=e.blob;t.set(n,{width:r,height:o,blob:s,backgroundImage:"url("+i+")"})}),t}).then(function(e){l.mounted()&&l.setState(a.a({},l.state,{thumbnailMap:e}))}),this.setState(a.a({},this.state,{data:d}))},t.prototype.hasAttactments=function(){if(!this.state.data)return!1;var e=this.state.data.attachments;return e&&e.length>0},t.prototype.getAttachmentDatas=function(e){var t,n,r=[],i=e.content.attachments||[];try{for(var s=a.i(i),c=s.next();!c.done;c=s.next()){var l=c.value;r.push(o.formatWork(l))}}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return r},t.prototype.canRecall=function(){var e=this.props.message,t=e.creator,n=e.action;return t&&t._id===q.user.id&&n.indexOf("activity.room")>-1},t.prototype.recallDuration=function(){var e=k()(),t=k()(this.props.message.created);return 240-e.diff(t,"seconds")},t.prototype.renderSystemMessage=function(){if(!this.state.data||!this.isSystemMessage())return null;if(this.props.message.action.indexOf("recall")>-1){var e=this.state.data,t=e.creator,n=e._userMeId;return t._id!==n?c.createElement("div",{className:"system-message message-recall"},'"'+t.name+'" '+p.get("chat.message.recalled")):c.createElement("div",{className:"system-message message-recall"},p.get("chat.your.message.recalled"))}return c.createElement("div",{className:"system-message"},this.state.data.title)},t.prototype.renderAvatar=function(){if(this.state.data&&!this.isSystemMessage()){var e=this.state.data,t=e.creator,n=e._userMeId;if(t._id!==n){var r=b()("avatar","img-36","img-circle",{"no-avatar":!t.avatarUrl,"not-allowed":t.isRobot}),o=t.avatarUrl?{backgroundImage:"url("+t.avatarUrl+")"}:{};return c.createElement("div",{className:r,"data-id":t._id,style:o,onClick:this.props.showMemberDetail(this.props.channelType,this.memberCardInited,t.isRobot)})}}},t.prototype.renderMessageBody=function(){if(!this.state.data||this.isSystemMessage())return null;var e="",t=this.state.data,n=t.content,r=t.title;this.isUnknownMessage()?e=n.comment||r:n.comment&&(e=n.comment);var o="text"!==n.renderMode;return c.createElement("div",{className:"message-body"},c.createElement($,{useMarkdown:o},e),this.renderShareContent(),this.renderVoiceBar(),this.renderAttachments(),this.renderMessageInfo())},t.prototype.renderShareContent=function(){if(this.state.data.share)return c.createElement(R,{share:this.state.data.share,onClick:this.props.openSharingDetail})},t.prototype.renderVoiceBar=function(){var e=this.state.data.voice;if(e)return c.createElement(N,{duration:e.durationFormat,width:e.barWidth,onClick:this.voiceCtrl})},t.prototype.renderMessageInfo=function(){var e=this.hasAttactments(),t=this.state.data,n=t.permissions,r=t.creator,o=t._userMeId,i=t.created,s=n&&(n.put||n.del||e),l=this.recallDuration(),u={removeable:s,created:i,recallRemain:l,clickable:r._id===o||e,creator:r._id!==o?r.name:null,onRecall:this.canRecall()&&l>0?this.recallMessage:null,onDownload:e?this.downloadAttachments:null};return c.createElement(G,a.a({},u))},t.prototype.renderAttachments=function(){var e=this,t=this.state.thumbnailMap,n=this.hasAttactments(),r=this.state.data.attachments.map(function(n){var r=t.get(n.fileKey),o={height:r?r.height:n.dynamicThumbnail.height,width:r?r.width:n.dynamicThumbnail.width,url:r?r.backgroundImage:"url("+n.dynamicThumbnail.url+")",blob:r?r.blob:null,attachment:n,onClick:e.enterPreviewer};return c.createElement(L,a.a({},o,{key:n.fileKey}))});return n?c.createElement("ul",{className:"message-attachments"},r):null},t.prototype.render=function(){if(!this.state.data)return null;var e=this.props.message,t=e.creator,n=e.content,r=b()("message-item",{"is-system":this.isSystemMessage(),creator:t&&t._id===q.user.id,attachments:n.attachments&&n.attachments.length>0});return c.createElement("li",{className:r,"data-id":this.state.data._id,ref:this.getRef},this.renderSystemMessage(),this.renderAvatar(),this.renderMessageBody())},t.prototype.mounted=function(){return!!this.mountedEl},t}(c.PureComponent);n("qAFkeKnD");var K=n("/NDgfj1y"),Q=function(e){function t(t){var n=e.call(this,t)||this;return n.onEnter=function(){var e=n.props,t=e.onGetRoomActivitiesLoadMoreRequest,r=e.roomInfo;r&&t(r._id)},n.getMessageListContainerElRef=function(e){n.messageListContainerEl=e},n.getBottomElRef=function(e){n.bottomEl=e},n.placeholder={project:{image:K,title:p.get("chat.room.project.empty1"),desc:p.get("chat.room.project.empty2")},group:{image:K,title:p.get("chat.room.group.empty1"),desc:p.get("chat.room.group.empty2")},direct:{image:K,title:p.get("chat.room.chat.empty1"),desc:p.get("chat.room.chat.empty2")}},n.userId=h.user.id,n.imageLoader=new f.ImageLoader(5),n}return a.d(t,e),t.prototype.componentDidMount=function(){this.scrollController=new g.a(this.messageListContainerEl)},t.prototype.componentWillUnmount=function(){this.chatMessageCreatorView&&(this.chatMessageCreatorView.remove(),this.chatMessageCreatorView=null),this.imageLoader.destroy()},t.prototype.renderPlaceHolder=function(){var e="project-group-chat"===this.panelType?"project":this.panelType,t=this.placeholder[e],n={backgroundImage:"url("+t.image+")"};return c.createElement("div",{className:"empty-tip"},c.createElement("span",{className:"img-icon",style:n}),c.createElement("div",{className:"tips"},c.createElement("p",null,t.title),c.createElement("p",{className:"tip-small"},t.desc)))},t.prototype.renderMessages=function(){var e=this,t=this.props,n=t.activities,r=t.hasMore||0!==n.length?n.map(function(t){return e.renderMessageItem(t)}):this.renderPlaceHolder();return c.createElement("ul",{className:this.containerCls},r)},t.prototype.renderMessageItem=function(e){return c.createElement(Y,{channelType:this.props.type,message:e,imageLoader:this.imageLoader,key:e._id,openSharingDetail:this.props.openSharingDetail,enterPreviewer:this.props.enterPreviewer,downloadAttachments:this.props.downloadAttachments,showMemberDetail:this.props.showMemberDetail,recall:this.props.recall,voiceInit:this.props.voiceInit,voiceCtrl:this.props.voiceCtrl})},t.prototype.renderLoadMore=function(){var e=this.props,t=e.hasMore,n=e.isLoading;return c.createElement(d.Defer,null,c.createElement(m.LoadMore,{hasMore:t,onEnter:this.onEnter,clause:!n,distance:20,endWith:null}))},t.prototype.controlScrollBar=function(e){var t=u.a.last(e.activities),n=u.a.last(this.props.activities);(t||n)&&(t||!n?t&&n&&(t._id!==n._id?(this.scrollController.isCloseToBottom(300)||n.creator._id===this.userId)&&this.scrollController.scrollToBottom(!0):e.activities.length!==this.props.activities.length&&this.scrollController.auto()):this.scrollController.scrollToBottom())},t.prototype.componentDidUpdate=function(e){var t=this,n=this.props,r=n.roomInfo,o=n.activities,i=n.renderMessageCreator,s=n.groupModel,a=n.projectModel;if(o&&r&&!r.noReply){var c=r._id;if(this.chatMessageCreatorView&&this.cacheId!==c&&(this.chatMessageCreatorView.remove(),this.chatMessageCreatorView=null),!this.chatMessageCreatorView&&c!==(e.roomInfo&&e.roomInfo._id)){this.cacheId=c;var l=[];switch(this.panelType){case"direct":l.push(c);break;case"group":l.push(c,!0,s);break;case"project":case"project-group-chat":l.push(c,a)}this.chatMessageCreatorView=i.apply(null,l)}}r&&r.noReply&&this.chatMessageCreatorView&&(this.chatMessageCreatorView.remove(),this.chatMessageCreatorView=null),requestAnimationFrame(function(){t.controlScrollBar(e)})},t.prototype.renderContent=function(){return c.createElement("section",{className:"message-container scrollable flex-fill thin-scroll",ref:this.getMessageListContainerElRef},this.renderLoadMore(),this.renderMessages(),c.createElement("div",{className:"place-bottom",ref:this.getBottomElRef}))},t.prototype.renderHeader=function(){return c.createElement("header",{className:"message-panel-header flex-static"},this.renderHeaderContent())},t.prototype.renderFooter=function(){return c.createElement("footer",{className:"chat-room-creator-wrapper flex-static"})},t.prototype.render=function(){return c.createElement("div",{className:"message-panel"},this.renderHeader(),this.renderContent(),this.renderFooter(),c.createElement("div",{className:"message-panel-mask"}))},t}(c.PureComponent);n.d(t,"b",function(){return Z}),n.d(t,"a",function(){return Q});var Z=function(e){return Object(i.connect)(s.mapStateToProps,s.mapDispatchToProps)(e)}},NgWrYedk:function(e,t,n){e.exports=n.p+"images/f_v5@2x.d1d81fcc.png"},Nhsjx4qw:function(e,t){e.exports=function(e){var t='<div class="subtask-wrap row-flex ';return e.hasPosPersmission&&(t+="on-sortable"),e.isArchived&&(t+=" archived"),t+='"> <header class=\'flex flex-center flex-vcenter\'> <div class="check-box-wrapper flex flex-vcenter"></div> </header> <section> <div class="subtask-content-wrap"> <div class="subtask-content readable hinted" data-title="'+tb_i18n.get("enter.details")+'" > <div class="content"></div> <div class="subtask-unique-id flex-static flex"></div> </div> ',e.contentPermission&&(t+=' <div class="subtask-edit-wrap"> <textarea class="subtask-input form-control"/> </div> <div class="subtask-handler-set has-task-field-config"> <div class="subtask-field-config-wrapper flex"></div> <a class="cancel-subtask-handler">'+tb_i18n.get("cancel")+'</a> <a class="save-subtask-handler btn btn-primary">'+tb_i18n.get("save")+"</a> </div> "),t+=' </div> </section> <footer> <div class="subtask-infos"> <div class="subtask-info subtask-duedate ',e.datePermission||(t+="ban"),t+='" > <a class="task-datepicker"></a> </div> <div class="subtask-info subtask-info-executor flex"> <a class="avatar"></a> </div> ',e.contentPermission&&(t+=' <div class="subtask-info subtask-menu"> <a class="subtask-menu-trigger icon icon-chevron-down"></a> </div> '),t+=" </div> </footer></div>"}},NjoNVlJG:function(e,t,n){e.exports=n.p+"images/o_huatong@2x.bab9667d.png"},NkCDGCxT:function(e,t,n){"use strict";n.r(t),n.d(t,"fetchScenarioFieldConfigCollection",function(){return i});var r=n("4bWDEe5E"),o=n.n(r),i=function(e,t,n){return new Promise(function(r,i){var s=o.a.genCacheId(e,t);o.a.fetch(s,{boundToObjectType:t,attrs:{withTaskflowstatus:n},success:function(e){return r(e)},error:i})})}},NmmWKXGG:function(e,t,n){e.exports=n.p+"images/d_han@2x.9f9a683f.png"},Nn4Bflkl:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<li class="group-name"> <p>'+tb_i18n.get("task.group2")+"</p></li>",i=e.tasklists;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+='<li> <a class="tasklist-item tasklist-normal" data-id="'+(s=i[a+=1])._id+'">'+r(s.title)+"</a></li>";return o+='<li class="smart-group group-name"> <p class="tasklist-smart-title">'+tb_i18n.get("tasklist.bar.smart.group")+'</p></li><li class="smart-group"> <a class="tasklist-smart-today tasklist-item" data-gta="event" data-label="smart group today">'+tb_i18n.get("tasklist.bar.today.tasks")+'</a></li><li class="smart-group"> <a class="tasklist-smart-total tasklist-item" data-gta="event" data-label="smart group total">'+tb_i18n.get("tasklist.bar.total.tasks")+'</a></li><li class="smart-group"> <a class="tasklist-smart-done tasklist-item" data-gta="event" data-label="smart group done">'+tb_i18n.get("tasklist.bar.done.tasks")+"</a></li>"}},NnIOl5ce:function(e,t,n){e.exports={"attachment-list-container":"attachment-list-container__1o9E"}},"Nohvfk+i":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("a+N5u/Cl"),l=n("nDsjpj50"),u=n("8yf6doCl"),p=n("GESwhXbR"),d=n("fZoV3jYy"),h=n("4c1CS0b3"),m=n("s0r7VfKc"),f=n("wVXDg9Ql"),g=function(e){return{id:e._id,name:e.name,desc:b(e),hasChildren:e.hasChild}},v=function(e){return{_id:e.id,name:e.name}},b=function(e){if(e.matchedParentName)return s.get("belonging.to")+parent.name;if(e.ancestors){var t=e.ancestors.map(function(e){return e.name}).join(" - ");return s.get("projecttag.ancestors.path.tip")+t}return""};function y(e,t){return m.default.fetch.post("v2/organizations/"+e+"/projecttags",t).map(g).catch(function(e){return 400===e.error.status&&(f.SDKInterceptor.ignore(e),p.Toast.error(s.get("projecttag.create.error"))),h.Observable.empty()})}function k(e,t){return m.default.fetch.get("organizations/"+e+"/projecttags/search",{q:t}).map(function(e){return e.result}).map(function(e){return e.map(g)}).catch(function(){return h.Observable.empty()})}function _(e,t){return m.default.fetch.get("organizations/"+e+"/projecttags/recommend",{topProjecttagIds:t}).map(function(e){return e.result}).map(function(e){return e.map(g)}).catch(function(){return h.Observable.empty()})}function w(e,t){return m.default.fetch.get("v2/organizations/"+e+"/projecttags",{_parentId:t}).map(function(e){return e.result}).map(function(e){return e.map(g)}).catch(function(){return h.Observable.empty()})}function C(e,t,n){return n?m.default.fetch.put("organizations/"+e+"/projects/"+t+"/projecttagIds",{$add:n.additions||[],$del:n.removals||[]}).catch(function(){return h.Observable.empty()}):h.Observable.of(null)}var S=n("suI5NDUm"),E=n("ds2JuV/Y"),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onEnterName=function(e){t.props.onNameChange(e.target.value)},t}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.name,n=e.visible,r=e.onVisibleChange,o=e.visibleReadonly,a="btn btn-primary submit-handler";return t.trim()||(a+=" disabled"),i.a.createElement("div",{className:"projecttag-creator-view"},i.a.createElement("div",{className:"form"},i.a.createElement("fieldset",null,i.a.createElement("label",null,s.get("project.hierarchy.edit.placeholder")),i.a.createElement(p.Input,{value:t,onChange:this.onEnterName,placeholder:s.get("project.hierarchy.edit.placeholder"),autoFocus:!0})),i.a.createElement("fieldset",null,i.a.createElement("label",null,s.get("projecttag.visible")),i.a.createElement(E.a,{value:n,onSelect:r,disabled:o,className:"visible-select"}))),i.a.createElement(this.props.SubmitWrapper,{name:t,visible:n},i.a.createElement("button",{className:a},s.get("confirm"))))},t}(i.a.PureComponent),I=function(e){var t=Object(S.isAone)()?"involves":"organization",n=r.f(Object(o.useState)(e.name||""),2),s=n[0],a=n[1],c=r.f(Object(o.useState)(e.visible||t),2),l=c[0],u=c[1];return i.a.createElement(T,{name:s,visible:l,onNameChange:a,onVisibleChange:function(e){u(e.data)},SubmitWrapper:e.SubmitWrapper,visibleReadonly:e.visibleReadonly})},M=function(e){return{search:function(t){return e.next({type:"SEARCH_TERM_CHANGE",payload:t})},onClickSelected:function(t){return e.next({type:"TOGGLE_ENTRY",payload:t})},onClickRecommend:function(t){return e.next({type:"TOGGLE_ENTRY",payload:t})},onClickSearched:function(t){return e.next({type:"TOGGLE_FROM_SEARCH",payload:t})},onClickNext:function(t){return e.next({type:"MOVE_FORWARD",payload:t})},onClickBack:function(){return e.next({type:"MOVE_BACKWARD"})},onCreate:function(t){return e.next({type:"CREATE",payload:t})},onConfirm:function(t){return e.next({type:"COMMIT",payload:t})}}};function j(e,t){return e.filter(function(e){return e.type===t}).map(function(e){return e.payload})}var P,x=function(e,t){var n=j(e,"SEARCH_TERM_CHANGE"),r=j(e,"TOGGLE_ENTRY");return{searchTermChange$:n,searchResultSelected$:j(e,"TOGGLE_FROM_SEARCH"),toggleEntry$:r,moveForward$:j(e,"MOVE_FORWARD"),moveBackward$:j(e,"MOVE_BACKWARD"),createdEntry$:j(e,"CREATE").concatMap(function(e){return t?t(e):h.Observable.empty()}),commit$:j(e,"COMMIT")}},N=n("o2xN9HeW");function O(e){var t;return(t=function(t){function n(e){var n=t.call(this,e)||this;return n.onOpen=function(){n.menuAction$.next("open")},n.onClose=function(){n.menuAction$.next("close")},n.confirmAndClose=function(){n.dispatchProps.onConfirm([]);var e=n.popupRef.current;e&&e.close()},n.state=d.e(),n.action$=new u.Subject,n.menuAction$=new u.Subject,n.dispatchProps=M(n.action$),n.popupRef=o.createRef(),n}return r.d(n,t),n.prototype.componentDidMount=function(){var t=this,n=this.props.selected;this.selected$=new l.BehaviorSubject(n),this.stateSubscription=this.menuAction$.filter(function(e){return"open"===e}).concatMap(function(){return d.h(e.search,e.loadChildren,e.canToggleHandler)(r.a({},x(t.action$,e.create),{initListLoad$:t.selected$.map(function(e){return e.map(g)}),initPoolLoad$:e.loadRecommend()})).takeUntil(t.menuAction$.filter(function(e){return"close"===e}))}).subscribe(function(e){t.setState(d.i(e)),e.commitPayload&&t.commit(e.commitPayload)})},n.prototype.componentDidUpdate=function(e){this.props.selected!==e.selected&&this.selected$.next(this.props.selected)},n.prototype.componentWillUnmount=function(){this.action$.complete(),this.menuAction$.complete(),this.selected$.complete(),this.stateSubscription.unsubscribe()},n.prototype.commit=function(e){var t=e.result,n=e.added,r=e.removed,o=n.length>0||r.length>0?d.f(t):null,i=o?Object(c.mapObject)(t,v):null;this.props.commit({payload:o,cache:i}).toPromise()},n.prototype.render=function(){var e,t=this.props,n=t.nested,i=t.trigger,a=t.triggerRef,c=t.withCreator,l=this.dispatchProps,u=l.onCreate,h=(l.onConfirm,r.g(l,["onCreate","onConfirm"])),m=c?null:{imgSrc:N,text:s.get("project.tag.selector.content.placeholder")},f={text:s.get("project.tag.selector.not.found.placeholder")},g=c?o.createElement(p.PopupMenuLink,{goto:P.creator},o.createElement(p.TextButton,{color:"blue",className:"creator-handler"},o.createElement(p.Icon,{name:"circle-cross"}),o.createElement("span",{className:"invite-member-tips"},s.get("project.tag.selector.create")))):null,v=(e={goto:P.selector,submit:u},function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.onSubmit=function(){var t=n.props,r=t.name,o=t.visible;e.submit({name:r.trim(),visible:o})},n}return r.d(n,t),n.prototype.render=function(){return o.createElement(p.PopupMenuLink,{goto:e.goto},o.createElement("div",{onClick:this.onSubmit},this.props.children))},n}(o.PureComponent)),b=a.current&&a.current.getWidth(),y=b?{style:{width:b}}:{};return o.createElement(p.PopupMenu,r.a({ref:this.popupRef,main:P.selector,trigger:i,titleCls:"tag-selector-header",className:"tag-selector-view",onOpen:this.onOpen,onClose:this.onClose,nested:n},y),o.createElement(p.PopupMenuView,{index:P.selector,title:s.get("project.tags.group"),className:"popup-menu-view"},o.createElement(d.a,r.a({},this.state,h,{mode:d.c.Multi,checkStyle:"checkbox",searchBoxPlaceholder:s.get("project.tag.selector.search.placeholder"),recommendTitle:s.get("project.tag.selector.recommend.title"),contentPlaceholder:m,searchNotFoundPlaceholder:f,onConfirm:this.confirmAndClose,extra:g}))),o.createElement(p.PopupMenuView,{index:P.creator,title:s.get("project.tag.selector.create"),className:"popup-menu-view"},o.createElement(I,{SubmitWrapper:v})))},n}(o.Component)).defaultProps={nested:!1},t}!function(e){e[e.selector=0]="selector",e[e.creator=1]="creator"}(P||(P={}));var R=n("TSYQbtd+"),D=n.n(R),L=n("DncXs78o"),z=n.n(L);function A(e){var t,n=!1;return e.length>0?t=e.map(function(e){return e.name}).join(", "):(n=!0,t=a.a.get("choose.project.tags")),{content:t,isEmpty:n,ref:o.createRef()}}var V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=o.createRef(),t}return r.d(t,e),t.prototype.getWidth=function(){if(this.ref.current)return this.initializedWidth||(this.initializedWidth=this.ref.current.getBoundingClientRect().width),this.initializedWidth},t.prototype.render=function(){var e=this.props,t=e.isDisabled,n=e.isEmpty,i=e.content,s=r.g(e,["isDisabled","isEmpty","content"]),a=D()(z.a["projecttag-selector-trigger"],"open-selector-handler","form-control","is-placeholder",{"is-disabled":t},{"is-empty":n});return o.createElement("div",r.a({className:a,ref:this.ref},s),o.createElement("div",{className:"selector-title"},i),o.createElement("span",{className:"icon icon-chevron-down icon-on-bar"}))},t}(o.PureComponent);n.d(t,"createSelector",function(){return O}),n.d(t,"tagAsSelectorItem",function(){return g}),n.d(t,"selectorItemAsTag",function(){return v}),n.d(t,"generateDesc",function(){return b}),n.d(t,"create",function(){return y}),n.d(t,"loadSearch",function(){return k}),n.d(t,"loadRecommend",function(){return _}),n.d(t,"loadChildren",function(){return w}),n.d(t,"commitUpdates",function(){return C}),n.d(t,"genTagSelectorTitle",function(){return A}),n.d(t,"Trigger",function(){return V})},"Nop7+RYU":function(e,t,n){e.exports=n.p+"images/h_ok@2x.d359b632.png"},"NqvaD/lL":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S={}.hasOwnProperty;v=n("a+N5u/Cl"),b=n("2qRnoGmE"),y=n("tLZJUYWX"),C=n("sa1Ed382"),i=n("bZr3G77e"),f=n("YdqH4v7N"),g=n("vmWJWrVe"),a=n("qHH6+g6Q"),h=n("85182E8g"),m=n("nL4olqOP"),c=n("AEl592Db"),l=n("ZX+P9A1v"),u=n("5TITb3g7"),p=n("iRK0phUl"),r=n("BTreC5uG"),s=n("ipyXjlCx"),k=n("5m7PfWoQ").isExternalUrl,_=n("5m7PfWoQ").isObjectLinkUrl,w=n("5m7PfWoQ").parseObjectLinkUrl,o=["task","post","event","file","testcase"],d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)S.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,g),t.prototype.className="object-picker-view modal-dialog flex-fill",t.prototype.viewName="ObjectPickerView",t.prototype.events={"click .cancel-handler":"handleClose","click .confirm-handler":"handleSubmit","click .guide-trigger":"handleGuideOpen","click .modal-body":"handleHideLinkInput","click .object-nav":"handleSwitch","click .object-picker__link__trigger":"handleShowLinkInput","focus .search-input":"handleSearchInputFocus","input .object-picker__link__input":"handleLinkInputChange","input .search-input":"handleSearchInputChange","keydown .search-input":"handleSearchInputSubmit"},t.prototype.initialize=function(e){var t,n,r,i,s,c,l,u;if(this.enablePlugins=null!=(t=e.enablePlugins)&&t,this.exclude=null!=(n=e.exclude)?n:[],this.objectType=null!=(r=e.objectType)?r:"task",this.objectTypes=null!=(i=e.objectTypes)?i:o,this.onSelect=null!=(s=e.onSelect)?s:function(){},this.organizationId=e.organizationId,this.projectId=e.projectId,this.getInheritedInfo=e.getInheritedInfo,this.multi=null==(c=e.multi)||c,this.inSpecificProject=null!=(l=e.inSpecificProject)&&l,!(this.objectTypes instanceof Array))throw new Error("props `objectTypes` is required array type");if(-1===this.objectTypes.indexOf(this.objectType))throw new Error("props `objectType` is required "+this.objectTypes.join(", ")+" string range type");return this.searchModel=new a({query:""}),this.setProjectIdAsyncIfNecessary().then((u=this,function(){return u.setProjectModelAsyncIfNecessary()})).then(function(e){return function(){return e.setOrganizationModelAsyncIfNecessary()}}(this)).then(function(e){return function(){return e.setTokensAsyncIfNecessary()}}(this)).then(function(e){return function(){return e.render()}}(this)).then(function(e){return function(){if(e.enablePlugins)return e.renderPlugins()}}(this)).then(function(e){return function(){return e.renderObjectTypes()}}(this)).then(function(e){return function(){return e.handleSwitch(e.getObjectType())}}(this)).then(function(e){return function(){if(e.enablePlugins&&e.getProjectId())return e.setupPlugins({_projectId:e.getProjectId()})}}(this)).then(function(e){return function(){return e.handleCheckDisableStatus()}}(this)).then(function(e){return function(){return v.delay(function(){if(!C.PREFERENCE.get("tips").ObjectPickerGuide)return e.$(".guide-trigger").trigger("click")},500)}}(this))},t.prototype.getSelected=function(){var e,t;return e=this.getObjectLink(),t=this.selected||[],e?t.concat(e):t},t.prototype.setSelected=function(e){return this.selected=e},t.prototype.getObjectLink=function(){return this.objectLink},t.prototype.setObjectLink=function(e){return this.objectLink=e},t.prototype.getObjectType=function(){return this.objectType},t.prototype.setObjectType=function(e){return this.objectType=e},t.prototype.getObjectTypes=function(){return this.objectTypes},t.prototype.getObjectTypeNavs=function(){return this.getObjectTypes().map(function(e){switch(e){case"event":return{title:y.get("navigation.event"),icon:"icon-calendar",type:"event"};case"file":return{title:y.get("navigation.work"),icon:"icon-folder",type:"file"};case"post":return{title:y.get("navigation.sharing"),icon:"icon-wall",type:"post"};case"project":return{title:y.get("navigation.project"),icon:"icon-project",type:"project"};case"task":return{title:y.get("navigation.task"),icon:"icon-board",type:"task"};case"testcase":return{title:y.get("navigation.testcase"),icon:"icon-testcase",type:"testcase"};default:return null}}).filter(function(e){return null!==e})},t.prototype.getTokens=function(){return this.tokens},t.prototype.setTokens=function(e){return this.tokens=e},t.prototype.setTokensAsyncIfNecessary=function(){return new Promise((e=this,function(t,n){return e.enablePlugins?C.user.fetchToken(function(r,o){var i;return r?n(r):o instanceof Array?(i=o.reduce(function(e,t){var n;if(t.refer){switch(t.refer){case"evernote_international":n="evernote";break;case"evernote":n="yinxiang";break;default:n=t.refer}e[n]=t.token}return e},{}),e.setTokens(i),t()):n(new TypeError("`response` is not array type"))}):t()}));var e},t.prototype.getOrganizationId=function(){return this.organizationId},t.prototype.setOrganizationId=function(e){return this.organizationId=e},t.prototype.getOrganizationModel=function(){return this.organizationModel},t.prototype.setOrganizationModel=function(e){return this.organizationModel=e},t.prototype.setOrganizationModelAsyncIfNecessary=function(){return new Promise((e=this,function(t,n){return"string"!=typeof e.getOrganizationId()&&t(),h.fetch(0,{error:n,success:function(n){var r,o,i,s;return o=n,"string"==typeof e.getOrganizationId()?r=o.get(e.getOrganizationId()):((i=e.getProjectModel())&&(s=i.get("_organizationId"),r=o.get(s)),e.setOrganizationId(s)),e.setOrganizationModel(r),t()}})}));var e},t.prototype.getProjectModel=function(){return this.projectModel},t.prototype.setProjectModel=function(e){return this.projectModel=e},t.prototype.setProjectModelAsyncIfNecessary=function(){return new Promise((e=this,function(t,n){return e.enablePlugins?"string"!=typeof e.getProjectId()?t():m.fetch(0,{error:n,success:function(n){var r;return r=n.get(e.getProjectId()),e.setProjectModel(r),t()}}):t()}));var e},t.prototype.getProjectId=function(){return this.projectId},t.prototype.setProjectId=function(e,t){return this.projectId=e,this.organizationId=t},t.prototype.setProjectIdAsyncIfNecessary=function(){return new Promise(function(e,t){return this.enablePlugins?"string"==typeof this.getProjectId()?e():m.fetch(0,{error:t,success:(n=this,function(t){var r;return r=t,n.projectId=r.at(0).get("_id"),e()})}):e();var n})},t.prototype.isObjectTypePlugin=function(){var e;return e=this.getProjectModel(),!!this.projectModel&&(this.enablePlugins&&v.contains(e.getIntegrationTypes(),this.getObjectType()))},t.prototype.isObjectTypeProject=function(){return"project"===this.getObjectType()},t.prototype.isObjectTypeSearchable=function(){return v.contains(o,this.getObjectType())},t.prototype.isEnableLinkInput=function(){var e;return e=this.getObjectTypes(),v.contains(e,"project")},t.prototype.verifyLinkValue=function(e){var t,n,r;return _(e)?(t=(r=w(e)).objectLinkId,n=r.objectLinkType,this.setObjectLink([{_id:t,type:n}])):k(e)?this.setObjectLink([{data:{data:{url:e}},type:"link"}]):this.setObjectLink(null)},t.prototype.handleGuideOpen=function(e){return this.renderGuideView(e)},t.prototype.handleCheckDisableStatus=function(){var e;return e=this.getSelected(),this.handleDisableSubmit(0===e.length)},t.prototype.handleDisableSubmit=function(e){return this.$(".confirm-handler").prop("disabled",e),this.$(".confirm-handler")[e?"addClass":"removeClass"]("disabled")},t.prototype.handleInputClear=function(){return this.$(".search-input").val("")},t.prototype.handleClose=function(e){var t,n,r;return"function"==typeof(null!=(n=this.parentView)?n.close:void 0)?this.parentView.close():"WindowView"===(null!=(r=this.parentView)?r.viewName:void 0)?"function"==typeof(t=this.parentView).remove?t.remove():void 0:this.remove()},t.prototype.handleSearchInputFocus=function(){return C.gta.event({action:"begin search",control:"link panel"})},t.prototype.handleSearchInputSubmit=function(e){var t,n,r,o,i,s,a;if(r=$(e.currentTarget).val().trim(),13===e.keyCode)return this.setObjectType("search"),this.$(".object-nav").closest("li").removeClass("active"),this.$el.addClass("on-search"),s=(o=this.getWorkspaceInfo()).workspace,n=o.orgId,t={inSpecificProject:this.inSpecificProject,multi:this.multi,exclude:this.exclude||[],query:r,type:"task",spaceType:s,_projectId:this.getProjectId(),_organizationId:n,onSelect:(a=this,function(e){return a.setSelected(e),a.handleCheckDisableStatus()})},null!=(i=this.contentView)&&i.remove(),this.contentView=this.requestSubView(p,t),this.$(".object-picker-body").html(this.contentView.$el),this.$(".search-wrap").show(),C.gta.event({action:"begin full search",control:"link panel"})},t.prototype.handleSearchInputChange=function(e){var t;return this._searchCurrentView||(this._searchCurrentView=v.debounce((t=this,function(e){var n,r,o;if(n=$(e.currentTarget),o=n.val().trim().toLowerCase(),t.searchModel.set("query",o),(r=t.$(".link-search-wrap:last-child .link-search-content")).length)return r.each(function(){return $(this).text().toLowerCase().indexOf(o)>-1?$(this).closest("li").show():$(this).closest("li").hide()})}),400)),this._searchCurrentView(e)},t.prototype.handleActiveClassChange=function(e){return e.addClass("active").siblings().removeClass("active")},t.prototype.handleSwitch=function(e){var t,n;if("string"==typeof e?(n=e,t=this.$(".object-nav[data-type="+n+"]")):e.currentTarget&&(n=(t=$(e.currentTarget)).data("type")),this.handleActiveClassChange(t.parent()),this.handleInputClear(),n!==this.getObjectType())return this.setObjectType(n),this.setSelected([]),this.handleCheckDisableStatus(),this.renderObjectTypes()},t.prototype.handleSubmit=function(e){var t,n;if(this.trigger("object-picker-submit"),0!==(null!=(t=this.getSelected())?t.length:void 0))return t[0]._id?(this.onSelect(t),e&&e.isContinuity||this.handleClose(),this.handleGTACreate()):Promise.all(t.map((n=this,function(e){var r;return r=e.data,new Promise(function(o){return"yinxiang"===t[0].type?i.ajax({url:b.INTEGRATION_HOST+"/yinxiang/note/"+r.data.guid,data:{access_token:n.getTokens().yinxiang},dataType:"html",success:function(t){return r.data.content=t,o(e)}}):o(e)})}))).then(function(e){return function(t){return t.forEach(function(t){return e.handleIntergrationCreate(t.type,t.data)})}}(this))},t.prototype.handleIntergrationCreate=function(e,t){return i.ajax("integrations/"+e,{data:t,method:"POST",success:(n=this,function(e){var t,r;return n.onSelect([{_id:e._id,type:e.type}]),n.handleClose(),C.gta.event({action:"use plugin",control:"add link",organizationid:null!=(t=n.getProjectModel())?t.get("_organizationId"):void 0,pluginid:e._id,projectid:null!=(r=n.getProjectModel())?r.get("_id"):void 0,type:e.type})})});var n},t.prototype.handleGTACreate=function(){var e,t;return"task"!==(e=this.getSelected())[0].type?this.handleGTAInit(e[0]):v.each(e,(t=this,function(e){return t.handleGTAInit(e)}))},t.prototype.handleGTAInit=function(e){var t,n,r;return(n=e.gtaType||e.type)||(n=e.parent?"subtask":e.objectType),"undefined"===(r=e.series)&&(r=e.ancestorIds.length),t={action:"added link",method:"link window",type:n},"undefined"!==r&&(t.series=r),this.getProjectModel()&&(this.getProjectModel(),t.projectid=this.getProjectModel().get("_id")),this.getOrganizationModel()&&(this.getOrganizationModel(),t.organizationid=this.getOrganizationModel().get("_id")),C.gta.event(t)},t.prototype.handleShowLinkInput=function(){var e;return this.$(".object-picker__link__trigger").addClass("is-hidden"),this.$(".object-picker__link__input").removeClass("is-hidden").focus(),this.handleInputClear(),this.setSelected([]),this.handleCheckDisableStatus(),"search"!==this.getObjectType()?this.renderObjectTypes():(e=this.$(".object-nav[data-type='task']"),this.setObjectType("task"),this.handleActiveClassChange(e.parent()),this.renderObjectTypes())},t.prototype.handleHideLinkInput=function(){var e;if(!(e=this.$(".object-picker__link__input")).hasClass("is-hidden"))return e.val(""),e.addClass("is-hidden"),this.$(".object-picker__link__trigger").removeClass("is-hidden"),this.verifyLinkValue(""),this.handleCheckDisableStatus()},t.prototype.handleLinkInputChange=function(e){var t;return t=$(e.currentTarget).val(),this.verifyLinkValue(t),this.handleCheckDisableStatus()},t.prototype.getWorkspaceInfo=function(){var e,t;return t=this.getProjectModel(),e=this.getOrganizationModel(),(t?t.getRoleScope()>=0&&t.get("orgLevel")<-1:(null!=e?e.getRoleScope():void 0)<0)?{workspace:"user"}:{workspace:"organization",orgName:null!=e?e.get("name"):void 0,orgId:null!=e?e.get("_id"):void 0}},t.prototype.render=function(){var e,t,n,o,i;return e=this.getObjectTypeNavs(),o=(n=this.getWorkspaceInfo()).workspace,t=n.orgName,i="user"===o?tb_i18n.get("personal.projects"):t,this.$el.html(r({isEnableLinkInput:this.isEnableLinkInput(),objectTypeNavs:e,workspaceName:tb_i18n.get("search")+"&nbsp;"+i}))},t.prototype.renderPlugins=function(){var e,t,n;if(t=this.getProjectModel())return e=v.filter(t.getIntegrations(),function(e){return e.enable}),null!=(n=this.$(".integration-item"))&&n.remove(),this.$(".integration-item-line").after(s(e))},t.prototype.renderObjectTypes=function(){var e,t;return e=this.getObjectType(),t=this.getObjectTypes(),this.$el.removeClass("on-search"),this.renderSearchWrap(),t.indexOf(e)>-1?this.renderObjectTypeContent():this.isObjectTypePlugin()?this.renderPluginContent():void 0},t.prototype.renderSearchWrap=function(){return this.isObjectTypeSearchable()?this.$(".search-wrap").show():this.$(".search-wrap").hide()},t.prototype.renderObjectTypeContent=function(){var e,t,n;return e={multi:this.multi,exclude:this.exclude,searchModel:this.searchModel,inSpecificProject:this.inSpecificProject,objectType:this.getObjectType(),organizationId:this.getOrganizationId()||void 0,projectId:this.getProjectId()||void 0,getInheritedInfo:this.getInheritedInfo,onProjectChange:(n=this,function(e,t){return n.setProjectId(e,t)}),onSelect:function(e){return function(t){return e.setSelected(t),e.handleCheckDisableStatus()}}(this),onCreate:function(e){return function(t,n){return e.setSelected(t),e.handleCheckDisableStatus(),e.handleSubmit(n)}}(this),onClearInput:function(e){return function(){return e.handleInputClear()}}(this)},null!=(t=this.contentView)&&t.remove(),this.contentView=this.requestSubView(l,e),this.$(".object-picker-body").html(this.contentView.$el)},t.prototype.renderPluginContent=function(){var e,t,n;return e={exclude:this.exclude,objectType:this.getObjectType(),projectModel:this.getProjectModel(),tokens:this.getTokens(),onSelect:(n=this,function(e){return n.setSelected(e),n.handleCheckDisableStatus()})},null!=(t=this.contentView)&&t.remove(),this.contentView=this.requestSubView(u,e),this.$(".object-picker-body").html(this.contentView.$el)},t.prototype.renderGuideView=function(e){return this.popoverGuideView||(this.popoverGuideView=this.requestSubView(c,{$toggler:$(e.currentTarget),placement:"top",title:tb_i18n.get("onboarding.link.guide.title")})),this.popoverGuideView.show(),C.PREFERENCE.get("tips").ObjectPickerGuide||C.PREFERENCE.updateFeatureGuide("ObjectPickerGuide"),C.gta.event({action:"open detail",control:"Link Detail"})},t}(),v.extend(d.prototype,f),e.exports=d},Nrj6GuDs:function(e,t,n){e.exports={body:"body__3hjR",button:"button__196Z","link-content":"link-content__29bk",qrcode:"qrcode__1GCk","qrcode-wrapper":"qrcode-wrapper__3YEt",input:"input__3urQ","wechat-hint":"wechat-hint__18Xj","wechat-icon":"wechat-icon__1IFR",description:"description__3yrd","copy-handler":"copy-handler__mw9d","description-image":"description-image__loly","description-hint":"description-hint__1bCl",wider:"wider__2OJk"}},NryYMUnD:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m={}.hasOwnProperty;h=n("sa1Ed382"),d=n("a+N5u/Cl"),a=n("wd/RKGTj"),l=n("3eMzznN/"),c=n("uQN6Cr2k"),p=n("vmWJWrVe"),s=n("qHH6+g6Q"),u=n("wGUYTcJr"),r=n("JqhHIqqo"),o=n("LAbDljvG"),i=n("gwbFiUj+"),n("lNIxow/2"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)m.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.viewName="WorkVersionItemView",t.prototype.tagName="div",t.prototype.className="work-version-item",t.prototype.events={"click .work-version-content":"select","keydown .work-version-description":"quickSave","click .work-version-handler-save":"refreshDescription","click .work-version-handler-cancel":"exitEditing","click .version-menu-toggler":"toggleVersionMenu"},t.prototype.initialize=function(e){return this.workModel=e.workModel,this.versionModel=e.versionModel,this.showMainLabel=e.showMainLabel,this.onSelect=e.onSelect,this.setMainVersion=e.setMainVersion,this.updateVersionDescription=e.updateVersionDescription,this.statusModel=new s({editing:!1}),this.render(),this.listen(),this.setSelect()},t.prototype.listen=function(){return this.listenTo(this.workModel,"change:fileKey",function(){return this.renderHandler(),this.renderPoint(),this.renderDescription()}),this.listenTo(this.workModel,"change:isArchived",this.renderHandler),this.listenTo(this.versionModel,"change:description",this.renderDescription),this.listenTo(this.versionModel,"change:_selected_",this.setSelect),this.listenTo(this.statusModel,"change:editing",function(e,t,n){var r;return r=n.description,t?this.$el.addClass("on-editing"):(this.$el.removeClass("on-editing"),null!=r?this.saveDescription(r):void 0)})},t.prototype.isMainVersion=function(){return this.versionModel.get("fileKey")===this.workModel.get("fileKey")},t.prototype.select=function(e){if(!this.versionModel.get("_selected_")&&!this.statusModel.get("editing")&&!e.target.classList.contains("version-menu-toggler"))return this.onSelect()},t.prototype.toggleVersionMenu=function(e){var t,n;if(!(t=$(e.target)).data("bs.popover"))return this.gtaVersionManagement("toggle version menu"),this.requestSubView(u,{$toggler:t,showSetMainVersion:!this.isMainVersion(),labelAsMainVersion:(n=this,function(){return n.setMainVersion(),n.gtaVersionManagement("set major version")}),onEditDescription:function(e){return function(){return e.enterEditing(),e.gtaVersionManagement("set version note")}}(this),onShown:function(e){return function(){return e.$el.addClass("open")}}(this),onHidden:function(e){return function(){return e.$el.removeClass("open")}}(this)}).show()},t.prototype.enterEditing=function(){var e;return this.statusModel.set("editing",!0),(e=this.$versionInput).val(this.versionModel.get("description")||""),e.focusAtEnd()},t.prototype.exitEditing=function(){return this.statusModel.set("editing",!1)},t.prototype.saveDescription=function(e){var t,n;if(t=this.versionModel.get("description"),e!==t)return d.delay((n=this,function(){return n.updateVersionDescription(e),n.gtaVersionManagement("edited version note")}),200)},t.prototype.refreshDescription=function(){var e,t;return t=(e=this.$versionInput.val().trim())||this.getCreatedString(),this.$(".work-version-description-text").text(t),this.statusModel.set("editing",!1,{description:e})},t.prototype.quickSave=function(e){return 13===(null!=e?e.keyCode:void 0)&&(e.preventDefault(),this.refreshDescription()),this},t.prototype.gtaVersionManagement=function(e){return h.gta.event({action:e,type:"file",page:"Works Page",method:"click",control:"Right Menu",segment:"file previewer"})},t.prototype.setSelect=function(){return this.versionModel.get("_selected_")?this.$el.addClass("on-selecting"):this.$el.removeClass("on-selecting")},t.prototype.getCreatedString=function(){var e,t,n;return null!=(n=this.versionModel.toJSON()).creator&&(t=n.creator.name),e=l.formatDate(new Date(n.created)).dateString+" "+a(n.created).format("LT"),t?t+" "+tb_i18n.get("work.version.uploadAt")+" "+e:e},t.prototype.renderPoint=function(){return this.showMainLabel&&this.isMainVersion()?this.$versionPoint.addClass("icon-focus").removeClass("icon-circle"):this.$versionPoint.addClass("icon-circle").removeClass("icon-focus")},t.prototype.renderDescription=function(){var e;return e=this.versionModel.get("description"),this.$(".work-version-description-display").html(o({isCustomizedDes:!!e,description:e||this.getCreatedString(),isMainVersion:this.showMainLabel&&this.isMainVersion()}))},t.prototype.renderHandler=function(){var e,t;return(t=(e=c.getWorkData(this.workModel,this.versionModel,!0)).permissions.put&&!e.isArchived)?this.$el.addClass("editable"):this.$el.removeClass("editable"),this.$versionMenuHandler.html(i({isEditable:t,fileSizeFix:e.fileSizeFix}))},t.prototype.renderBasic=function(){var e;return this.$el.html(r()),e=this.versionModel.get("description"),this.$versionInput=this.$(".work-version-description-input").val(e).flexText(),this.$versionMenuHandler=this.$(".work-version-handler"),this.$versionPoint=this.$(".work-version-point")},t.prototype.render=function(){return this.renderBasic(),this.renderDescription(),this.renderHandler(),this.renderPoint()},t.prototype.remove=function(){return this.statusModel.set("_selected_",!1),t.__super__.remove.apply(this,arguments)},t}()},NtzEC3Pa:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("a+N5u/Cl"),a=n("17bKXt//"),c=n("HLaCnIR0"),l=n("2uRu9aah"),u=n("HDJEOtNh"),p=n("aKydnTgX"),d=n("80gYlwjC"),h=n("sa1Ed382"),m=n("ln9RsXX9"),f=n("dBz1uT71"),g=n("M1/vCJUu"),v=new d.Strategy(4);v.on(Object(m.paywallUrl)(d.PlanType.Wildcard,p.a.Basic),{validator:function(e){return m.Version.isNotExpired(e)},onFailure:function(e){Object(f.c)(e,{isProTrial:!1})}}).on(Object(m.paywallUrl)(d.PlanType.Wildcard,p.a.Pro),{validator:function(e){return m.Version.isEnterprisePro(e)},onFailure:function(e){e.ofOrganization()?Object(f.b)(e):Object(f.c)(e,{isProTrial:!0})}}).on(Object(m.paywallUrl)(d.PlanType.Wildcard,p.a.UpgradeToPro),{validator:function(e){return m.Version.isEnterprisePro(e)},onFailure:function(e,t,n){var r=Object.create(null),o=e.ofOrganization()?e.objectId:null;h.gta.event({action:"enter payment page",category:"scrum",control:"template list",method:"click",organizationid:o}),"agile-template"===n&&(r["create-from"]="agile-template"),Object(f.a)(e,{onboarding:r,onSuccess:function(e){switch(e){case g.a.ProTrial:h.gta.event({action:"upgrade enterprise pro",type:"organization",control:"Scrum",category:"enterprise pro",segment:"Org"})}}})}});var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){return this.isValid()?this.props.children:this.props.fallback},t.prototype.isValid=function(){var e=this.props.scope;return"subscription"===e?v.pass(this.props.id,"*",m.Version.isNotExpired):"enterprise-pro"===e&&v.pass(this.props.id,"*",m.Version.isEnterprisePro)},t}(i.a.Component);n.d(t,"closePaywall",function(){return y}),n.d(t,"openPaywall",function(){return k}),n.d(t,"openOrganizationCreator",function(){return _}),n.d(t,"PayAlert",function(){return w}),n.d(t,"open",function(){return C}),n.d(t,"close",function(){return S}),n.d(t,"alert",function(){return E}),n.d(t,"helper",function(){return T}),n.d(t,"Pay",function(){return b}),n.d(t,"paywall",function(){return v}),n.d(t,"FeatureType",function(){return p.a}),n.d(t,"ViewType",function(){return l.b}),n.d(t,"paywallUrl",function(){return m.paywallUrl}),n.d(t,"getOrgProTrialSuccess",function(){return m.getOrgProTrialSuccess});var y=function(){return c.a()},k=function(e){var t=r.a({onClick:s.noop},e,{onClose:function(){y(),"function"==typeof e.onClose&&e.onClose()}});c.b(i.a.createElement(l.a,r.a({},t)))},_=function(e,t,n,r){void 0===e&&(e="Workspace"),void 0===t&&(t=-1),void 0===r&&(r={}),k({viewType:l.b.Create,onClose:function(){y(),"function"==typeof n&&n()},onClick:s.noop,extra:{from:e,directive:t,onboarding:r}})},w={softExcessMember:function(e,t){void 0===t&&(t=u.RoleScope.Member),k({viewType:l.b.SoftExcess,extra:{role:t,organizationId:e}})},strictExcessMember:function(){}},C=k,S=function(){return c.a()},E=w,T={hideUpgradeBtn:a.PaymentStatus.HideUpgradeBtn}},NvRnMquD:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR"),l=n("rDKGwshR"),u=n.n(l),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=a()(this.props.className,u.a["object-field"]);return i.a.createElement("div",{className:e},i.a.createElement("div",{className:"object-field__left"},i.a.createElement(c.Icon,{name:this.props.icon,className:"object-field__icon"}),i.a.createElement("span",{className:"object-field__name"},this.props.name)),i.a.createElement("div",{className:"object-field__right"},this.props.children))},t}(i.a.PureComponent);n.d(t,"a",function(){return p})},"NwOfh+fP":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v={}.hasOwnProperty;m=n("a+N5u/Cl"),f=n("sa1Ed382"),h=n("vmWJWrVe"),d=n("3eMzznN/"),p=n("GESwhXbR").Toast,o=n("VuB9cZyl"),s=n("77NnVLwu"),l=n("PjENi0m4"),a=n("kHGemI2d"),g=n("gh8QIhMV").throwError,i=n("gLdDAp90"),r=n("r/mEAG7G"),u=n("Ewk+b4WK"),c=n("1y2tBwVR").TagPopover,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)v.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,h),t.prototype.viewName="TagPickerView",t.prototype.className="tag-picker-view",t.prototype.events={"click .remove-tag-handler":"quickUnselectTag"},t.prototype.initialize=function(e){var t,n,r,i;if(this.disabled=e.disabled,this.withIcon=e.withIcon,this._projectId=e._projectId,this.objectModel=e.objectModel,this.nestedPopover=null!=(t=e.nestedPopover)&&t,this.hasPutPermission=null==(n=e.hasPutPermission)||n,this.triggerOver=null!=(r=e.triggerOver)?r:function(){},this.isRequired=e.isRequired,this.objectModel&&this._projectId)return this.selectedTagsIds=new o([]),d.promiseChain((i=this,function(){return!i.el}))(function(e){return function(){return s.resolveFetch(e._projectId)}}(this),function(e){return function(t){e.projectModel=t}}(this),function(e){return function(){return Promise.all([e.fetchTags(),e.fetchOrganizationTags(),e.fetchTagCategories()])}}(this),function(e){return function(t){e.tagsCollection=t[0],e.organizationTagsCollection=t[1],e.tagCategoriesCollection=t[2]}}(this),function(e){return function(){return e.renderBasic(),e.listen(),e.setSelectedTags()}}(this)).catch(function(e){return function(t){return g(t),m.delay(function(){return e.$el.parent().addClass("hide")})}}(this))},t.prototype.listen=function(){return this.listenTo(this.objectModel,"change:tagIds",this.setSelectedTags),this.listenTo(this.objectModel,"change:isArchived",function(){if(this.el)return this.refresh(),this.renderTagPopover()}),this.listenToTags(this.tagsCollection),this.listenToTags(this.organizationTagsCollection),this.listenTo(this.tagCategoriesCollection,"change update",this.renderTagPopover),this.listenTo(this.selectedTagsIds,"reset update",function(){return this.refresh(),this.renderTagPopover()})},t.prototype.listenToTags=function(e){return this.listenTo(e,"change update",this.renderTagPopover),this.listenTo(e,"change",this.refresh),this.listenTo(e,"remove",function(e){var t;if(t=e.id,null!=this.selectedTagsIds.get(t))return this.unselectTag(t)})},t.prototype.getSelectedIds=function(){return this.selectedTagsIds.map(function(e){return e.get("id")})},t.prototype.getSelectedTags=function(){return m.chain(this.selectedTagsIds.toJSON()).map((e=this,function(t){var n,r,o,i;return n=t.id,(null!=(r=e.tagsCollection.get(n))?r.toJSON():void 0)||(null!=(o=e.organizationTagsCollection)&&null!=(i=o.get(n))?i.toJSON():void 0)})).compact().value();var e},t.prototype.setSelectedTags=function(){var e,t;return e=(this.objectModel.get("tagIds")||[]).filter((t=this,function(e){var n;return!(null!=(n=t.tagsCollection.get(e))?n.get("isArchived"):void 0)})).map(function(e){return{id:e}}),this.selectedTagsIds.reset(e)},t.prototype.fetchTags=function(){return d.warehouse.resolveFetch(l,this._projectId,{boundToObjectType:"project"})},t.prototype.fetchOrganizationTags=function(){var e;return(e=this.projectModel.get("_organizationId"))?d.warehouse.resolveFetch(l,e,{boundToObjectType:"organization"}):Promise.resolve()},t.prototype.fetchTagCategories=function(){var e;return(e=this.projectModel.get("_organizationId"))?d.warehouse.resolveFetch(a,e,{attrs:{_projectId:this._projectId}}):Promise.resolve()},t.prototype.checkNameExist=function(e){var t;return t=this.tagsCollection.map(function(e){return e.get("name")}),m.contains(t,e)},t.prototype.createTag=function(e){return new Promise((t=this,function(n){if(!t.checkNameExist(e.name))return t.tagsCollection.create({name:e.name,color:e.color,_projectId:t._projectId},{wait:!0,success:function(e){return t.addTag(e.id),n(e)}});p.warning({message:tb_i18n.get("tag.creator.warning.name.exit")})}));var t},t.prototype.removeTag=function(e){return this.tagsCollection.get(e).destroy()},t.prototype.addTag=function(e){return this.selectedTagsIds.add({id:e}),this.fadeIn(e)},t.prototype.unselectTag=function(e){return this.isRequired&&1===this.selectedTagsIds.length?p.error({message:tb_i18n.get("required.field.empty.error")}):(this.selectedTagsIds.remove(e),this.fadeOut(e))},t.prototype.modifyTag=function(e,t){return this.tagsCollection.get(e).save(t,{attrs:t})},t.prototype.saveTags=function(){var e,t,n;if(this.objectModel&&(t=this.getSelectedIds(),!m.isEqual(t,this.objectModel.get("tagIds"))))return this.objectModel.id?("function"==typeof(e=this.objectModel).isRecurrenceEventInstance?e.isRecurrenceEventInstance():void 0)?(this.objectModel.set("tagIds",t),i.saveAttrs(this.objectModel,{}).then((n=this,function(e){return e.saveAttr("tagIds",t,{success:function(){return n.trigger("over")}})}))):this.objectModel.saveAttr("tagIds",t,{success:function(e){return function(){return e.trigger("over")}}(this)}):(this.objectModel.set("tagIds",t),this.trigger("over"))},t.prototype.fadeIn=function(e){return this.$list.find(".tag-wrap[data-id="+e+"]").transition({opacity:0},0).transition({opacity:1})},t.prototype.fadeOut=function(e){return this.$list.find(".tag-wrap[data-id="+e+"]").transition({opacity:0},function(){return $(this).remove()})},t.prototype.quickUnselectTag=function(e){var t,n;return t=$(e.currentTarget).parent().data("id"),this.unselectTag(t),m.delay((n=this,function(){return n.saveTags()}),100),this.gtaHandler({action:"delete tag"})},t.prototype.gtaHandler=function(e){return"task"===this.objectModel.get("objectType")&&(e=m.extend({type:this.objectModel.isSubtask()?"subtask":"task",series:this.objectModel.get("ancestorIds").length},e)),f.gta.event(e)},t.prototype.renderTagPopover=function(){var e,t,n,r,o;return t=this.organizationTagsCollection?this.organizationTagsCollection.toJSON():[],e=this.canPutTag(),r=t.concat(this.tagsCollection.map(function(e){return m.extend(e.toJSON(),{canDelete:e.hasPermission("del"),canEdit:e.hasPermission("put")})})),this.requestReactView(this.$addTagHandler.get(0),c,{tags:r,withIcon:this.withIcon,tagCategories:(null!=(n=this.tagCategoriesCollection)?n.toJSON():void 0)||[],selectedTags:this.getSelectedIds(),disabled:this.disabled||this.objectModel.get("isArchived")||!e,canAddTag:!0,canPutTag:e,onSelectTag:this.addTag.bind(this),onUnselectTag:this.unselectTag.bind(this),onCreateTag:this.createTag.bind(this),onRemoveTag:this.removeTag.bind(this),onHide:this.saveTags.bind(this),onModifyTag:this.modifyTag.bind(this),nested:this.nestedPopover,onOpen:(o=this,function(){return o.gtaHandler({action:"set tags"})})})},t.prototype.refresh=function(){var e,t,n;return n=this.getSelectedTags(),this.$("li.tag-wrap").remove(),t=this.objectModel.get("isArchived"),e=!this.disabled&&!t&&this.canPutTag(),this.$list.prepend(u({tags:n,canDelete:e}))},t.prototype.renderBasic=function(){return this.$el.html(r()),this.$list=this.$(".tag-picker-list"),this.$addTagHandler=this.$(".tag-picker-add")},t.prototype.canPutTag=function(){switch(this.objectModel.get("objectType")){case"task":case"event":return this.hasPutPermission;default:return this.objectModel.hasPermission("object.put.tag")}},t}()},NxDWsJua:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("l2VkC5TB"),c=n.n(a),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getContentEditable=function(e){t.input=e},t.onKeyDown=function(e){13!==e.which&&27!==e.which||t.input.blur(),t.props.onKeyDown&&t.props.onKeyDown(e)},t.onKeyUp=function(e){t.props.onChange(t.input.textContent,e)},t.onPaste=function(e){e.preventDefault();var t=window.clipboardData?window.clipboardData.getData("Text"):e.clipboardData.getData("text/plain");document.queryCommandSupported("insertText")?document.execCommand("insertText",!1,t):document.execCommand("paste",!1,t)},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.input.textContent=this.props.value},t.prototype.componentDidUpdate=function(){this.input.textContent!==this.props.value&&(this.input.textContent=this.props.value)},t.prototype.render=function(){var e=this.props,t=e.className,n=e.readonly,i=e.disabled,a=(e.onKeyDown,e.onChange,r.g(e,["className","readonly","disabled","onKeyDown","onChange"])),l=s()(c.a.root,t,{readonly:n,disabled:i}),u=!n&&!i?r.a({},a,{spellCheck:!1,contentEditable:!0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onPaste:this.onPaste}):{};return o.createElement("div",r.a({ref:this.getContentEditable,className:l},u))},t.defaultProps={className:"",disabled:!1},t}(o.PureComponent);n.d(t,"a",function(){return l})},"Nz3F68i+":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return c});var r=function(e,t){return"number"==typeof e.columnWidth?e.columnWidth:e.columnWidth(t)},o=function(e,t){return"number"==typeof e.columnWidth?e.columnWidth:e.columnWidth(e.fixedColumnCount+t)},i=function(e){for(var t=e.columnSize-e.fixedColumnCount,n=0,r=0;r<t;r++)n+=o(e,r);return n},s=function(e){return function(e){for(var t=e.fixedColumnCount,n=0,o=0;o<t;o++)n+=r(e,o);return n}(e)},a=function(e){var t=s(e);return e.width-t},c=function(e){var t=a(e),n=i(e);return t<=0||t>=n}},O1gcYhp8:function(e,t,n){var r,o,i,s,a,c,l,u,p,d={}.hasOwnProperty;p=n("sa1Ed382"),r=n("/ba4BRMM"),u=n("85182E8g"),c=n("11Yo7oZf"),o=n("tX+U/U8q"),l=n("rZfPP7pq"),s=n("UtaV/YnI").GroupMessagePanelComponent,i=n("lcbqmfsD").GroupAddMember,a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,l),t.prototype.className="message-panel-view group-message-panel-view",t.prototype.viewName="GroupMessagePanelView",t.prototype.initialize=function(e){var t,n,o;return this.chatMessagesCollection=null!=(t=e.chatMessagesCollection)?t:new r,this.channelType=null!=(n=e.channelType)?n:"groups",this.messageModel=e.messageModel,this.modelId=e.modelId,this.roomId=e.roomId,this.roomModel=e.roomModel,this.removeChatModal=e.removeChatModal,this.onEnterGroupInfo=e.onEnterGroupInfo,this.showAddModal=!1,this.groupModel=c.get(this.modelId),this.$addMemberWrapper=$("<span class='group-add-member-wrapper'></span>"),this.$el.append(this.$addMemberWrapper),new Promise((o=this,function(e,t){return o.groupModel.fetch({success:e,error:t})})).then(function(e){return function(t){return e.orgId=t.get("_organizationId"),e.orgModel=u.get(0).find({_id:e.orgId}),e.renderBasic(),e.renderGroupAddMember()}}(this))},t.prototype.showAddMemberModal=function(){return this.showAddModal=!0,this.renderGroupAddMember()},t.prototype.hideAddMemberModal=function(){return this.showAddModal=!1,this.renderGroupAddMember()},t.prototype.onAddMember=function(e){var t;return this.groupModel.addMembers(e).then((t=this,function(){return t.hideAddMemberModal()})),p.gta.event({action:"added member",type:"group",category:""+e.length})},t.prototype.renderBasic=function(){if(this.orgModel)return this.initView({type:this.channelType,roomId:this.modelId}),this.requestReactView(this.el,s,{type:this.channelType,roomId:this.modelId,isPseudo:this.messageModel.get("isPseudo"),renderMessageCreator:this.renderMessageCreator.bind(this),groupModel:{id:this.groupModel.id},openSharingDetail:this.openSharingDetail.bind(this),enterPreviewer:this.enterPreviewer.bind(this),downloadAttachments:this.downloadAttachments.bind(this),showMemberDetail:this.showMemberDetail.bind(this),voiceInit:this.voiceInit.bind(this),voiceCtrl:this.voiceCtrl.bind(this),showAddMemberModal:this.showAddMemberModal.bind(this),onClickGotoGroup:this.onClickGotoGroup.bind(this),removeChatModal:this.removeChatModal.bind(this)},{redux:!0})},t.prototype.renderGroupAddMember=function(){return this.requestReactView(this.$addMemberWrapper[0],i,{opened:this.showAddModal,organizationId:this.groupModel.get("organization")._id,organizationName:this.groupModel.get("organization").name,onVisibleChange:(e=this,function(t){if(!t)return e.hideAddMemberModal()}),onSubmit:this.onAddMember.bind(this),groupId:this.groupModel.get("_id")});var e},t.prototype.renderMessageCreator=function(e,t,n){var r;return r=this.$(".chat-room-creator-wrapper"),this.roomCreatorView=this.requestSubView(o,{groupId:n.id,isOpen:!!this.orgModel&&t,roomId:e}),r.html(this.roomCreatorView.$el)},t.prototype.onClickGotoGroup=function(){return this.onEnterGroupInfo({groupModel:this.groupModel})},t.prototype.remove=function(){return this.destroyView({type:this.channelType,roomId:this.modelId}),t.__super__.remove.apply(this,arguments)},t}(),e.exports=a},O4cJO6Kp:function(e,t,n){e.exports={"git-integrate-settings":"git-integrate-settings__1dcZ","git-integrate-settings-input-content":"git-integrate-settings-input-content__3RNQ","git-integrate-settings-input-title":"git-integrate-settings-input-title__IFii","git-integrate-settings-hint":"git-integrate-settings-hint__8XKm","git-integrate-settings-warning":"git-integrate-settings-warning__1WMe"}},O8dRnXls:function(e,t,n){e.exports={"qrcode-container":"qrcode-container__1LeN","app-download-guide":"app-download-guide__2HHP"}},OAW0VITN:function(e,t,n){},OB4zWk6r:function(e,t,n){e.exports=n.p+"images/d_ding@2x.65298866.png"},OCYETuio:function(e,t,n){e.exports=n.p+"images/d_yinxian@2x.53aa1a1c.png"},"OE+cJKnQ":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b={}.hasOwnProperty;v=n("sa1Ed382"),f=n("uHRdHWpl").default,c=n("hGNqppva"),a=n("bctXzzPQ"),s=n("ypWNgh6R"),i=n("xK8Zjj9U"),r=n("/w7ETy+M").AppDownloadModal,o=n("CKTFwJxk"),g=n("5qt3k8Zi"),u=g.hasVisitedHelpCenter,h=g.markVisitedHelpCenter,p=g.hasVisitedHelpScenario,m=g.markVisitedHelpScenario,l=g.hasVisitedCaseCenter,d=g.markVisitedCaseCenter,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)b.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,c),t.prototype.viewName="PremiumHelpView",t.prototype.className="premium-help-view",t.prototype.events={"click .online-service-handler":"openOnlineService","click .help-center-link":"clickHelpCenterLink","click .case-center-link":"clickCaseCenterLink","click .scenario-selector":"openScenario","click .help-item.with-badge":"removeBadge","click .hotkey-handler":"showHotkeys","click .private-download":"showDownload"},t.prototype.initialize=function(e){return this.popoverTitle=tb_i18n.get("submit.ticket.title"),this.onlineService=a.getInstance(),this.listenTo(v.PREFERENCE,"change:lastWorkspace",this.render),t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return this.$el.html(o({showHelpCenterBadge:!u(),showCaseCenterBadge:!l(),showScenarioBadge:!p(),renderScenarioGuide:this.isScenarioGuideEnabled()&&!this.isTwoWeeksOldUser()})),this.renderPageSpecificVideoView(),this},t.prototype.renderPageSpecificVideoView=function(){var e;return this.removePageSpecificVideoView(),null!==(e=v.onboarding.getViewInstance("help_menu","page_specific_video"))&&(this.obdPageSepcificVideoView=this.requestSubView(e.impl,e.viewOptions),this.obdPageSepcificVideoView.hasVideo()&&this.$el.find(".dynamic-item-container").append(this.obdPageSepcificVideoView.$el)),this},t.prototype.removePageSpecificVideoView=function(){if(this.obdPageSepcificVideoView)return this.obdPageSepcificVideoView.remove(),this.obdPageSepcificVideoView=null},t.prototype.isTwoWeeksOldUser=function(){return f().subtract(14,"day").isAfter(v.user.get("created"))},t.prototype.showDownload=function(){return this.modalMountEl=document.createElement("div"),document.body.appendChild(this.modalMountEl),this.requestReactView(this.modalMountEl,r,{defaultOpened:!0,onHide:this.modalVisibleHide.bind(this)}),this.hide()},t.prototype.modalVisibleHide=function(){return this.unmountReact(this.modalMountEl),document.body.removeChild(this.modalMountEl)},t.prototype.showHotkeys=function(){return this.requestSubView(s,"hotkey-helper").open(i),this.hide()},t.prototype.openOnlineService=function(){return this.onlineService.boot(),this.onlineService.show(),this.hide(),this},t.prototype.clickHelpCenterLink=function(){return h()},t.prototype.clickCaseCenterLink=function(){return d()},t.prototype.isScenarioGuideEnabled=function(){return!!v.onboarding.getViewInstance("new_user","scenario_selector")},t.prototype.openScenario=function(){return m(),v.onboarding.getViewInstance("new_user","scenario_selector").show(),this.hide(),this},t.prototype.removeBadge=function(e){return $(e.target).closest(".help-item").removeClass("with-badge")},t.prototype.hide=function(){return t.__super__.hide.apply(this,arguments),this.removePageSpecificVideoView()},t}()},OGoqSVsy:function(e,t,n){"use strict";n.r(t),n.d(t,"CustomFieldsNotInScenario",function(){return p});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("s0r7VfKc"),a=n("KePvfzJj"),c=n("On/LiFdN"),l=n("PQO7NpRc"),u=n.n(l),p=function(e){function t(t){var n=e.call(this,t)||this;return n.onRemove=function(e){var t="tasks/"+n.props.task._id+"/customfields/"+e;n.delete$=s.default.fetch.delete(t).subscribe(function(){var t=n.state.customFieldLinks.filter(function(t){return t._customfieldId!==e});n.setState({customFieldLinks:t})})},n.state={customFieldLinks:[]},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this,t="tasks/"+this.props.task._id+"/customfields/not-in-scenariofieldconfig";this.fetch$=s.default.fetch.get(t).subscribe(function(t){e.setState({customFieldLinks:t})})},t.prototype.componentWillUnmount=function(){this.fetch$&&this.fetch$.unsubscribe(),this.delete$&&this.delete$.unsubscribe()},t.prototype.renderCustomField=function(e){return i.a.createElement(c.CustomFieldInfo,{key:e._id,fieldInfo:e,isEditable:this.props.isEditable,isDeletable:this.props.isDeletable,boundToObjectId:this.props.task._id,boundToObjectType:"task",project:this.props.project,onSave:this.props.onSave,onRemove:this.onRemove,className:u.a["custom-field-not-in-scenario"]})},t.prototype.renderCustomFieldLinks=function(){var e=this,t=this.state.customFieldLinks,n=this.props.task.customfields;return t.map(function(t){var r=n.find(function(e){return e._customfieldId===t._customfieldId}),o=Object(a.parseCustomfield)(t,r);return e.renderCustomField(o)})},t.prototype.render=function(){return i.a.createElement(i.a.Fragment,null,this.renderCustomFieldLinks())},t}(i.a.PureComponent)},ONQFQipy:function(e,t,n){var r,o,i,s={}.hasOwnProperty;r=n("VuB9cZyl"),o=n("ntm4gBOK"),i={entry:"entries"},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="objectlinks",t.prototype.model=o,t.prototype.orderBy="latest-updated",t.prototype.sync=function(e,n,r){var o;return null==r&&(r={}),o=i[r.objectType]||r.objectType+"s",r.url||(r.url="v2/"+o+"/"+this._boundToObjectId+"/objectlinks"),t.__super__.sync.call(this,e,n,r)},t}()},OTplxZeS:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};s=n("a+N5u/Cl"),a=n("sa1Ed382"),r=n("VuB9cZyl"),i=n("qHH6+g6Q"),o=n("BVXu+viu"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="entries",t.prototype.boundToObjectType="project",t.prototype.model=o,t.prototype.pageNum=20,t.prototype.getPlaceholders=function(){var e,t,n;for(n=[],t=0;t++<3;)e={creator:a.user.toJSON(),type:Math.random()>.5?1:-1,content:"placeholder内容"+t,note:"",date:new Date,amount:Math.floor(1e4*Math.random()),status:"applying",category:{icon:"icon",title:"测试"+t}},n.push(new i(e));return n},t.prototype.getCount=function(e,t){var n;return n={},this.each(function(r){var o,i;return i=r.get(e),t?s.each(i,function(e){return n[e]||(n[e]=0),n[e]++}):(n[o=i]||(n[o]=0),n[o]++)}),n},t.prototype.getCreators=function(){var e,t;return e=[],t=[],this.each(function(n){var r,o;if(o=(r=n.get("creator"))._id,l.call(e,o)<0)return t.push(r),e.push(r._id)}),t},t.prototype.getCreatorIdsCount=function(){return this.getCount("_creatorId")},t.prototype.getEntryCategoryIdsCount=function(){return this.getCount("_entryCategoryId")},t.prototype.getTagIdsCount=function(){return this.getCount("tagIds",!0)},t}()},OZhv4qSB:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("GESwhXbR"),c=n("dfZgIDk1"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickRemove=function(e){t.stopPropagation(e),(0,t.props.onClickRemove)(e)},t.onClick=function(e){var n=t.props,r=n.onClick;!n.disabled&&r&&r(e)},t}return r.d(t,e),t.prototype.stopPropagation=function(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},t.prototype.renderIconButton=function(){var e=this.props,t=e.silent,n=e.disabled;return t||n?null:o.createElement(a.Icon,{className:c["remove-btn"],name:"circle-remove",onClick:this.onClickRemove})},t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=e.contentClassName,i=e.silent,a=e.disabled,l=e.style,u=e.shape,p=void 0===u?"circle":u,d=s()(c.content,r,p,{silent:i||a,disabled:a});return o.createElement("div",{className:s()(n,c["remove-shortcut"]),onClick:this.onClick},this.renderIconButton(),o.createElement("div",{className:d,style:l},t))},t}(o.PureComponent);n.d(t,"a",function(){return l})},ObMypsvd:function(e,t,n){e.exports={table:"table__3Gdt",table__container:"table__container__1GjH","table__cell-content--first-column":"table__cell-content--first-column__-8a1","table__toolbar-title":"table__toolbar-title__3Jvd",table__toolbar:"table__toolbar__2Urp","table__configure-action":"table__configure-action__gehG","table__head-cell":"table__head-cell__32WM","table__cell--sortable":"table__cell--sortable__29t_","table__foot-cell":"table__foot-cell__eKj_","table__cell--first-column":"table__cell--first-column__2te4","table__cell--hovered":"table__cell--hovered__c9e1","table__cell--first-row":"table__cell--first-row__2_w3","table__cell--void-column":"table__cell--void-column__Rzns","table__cell--last-column":"table__cell--last-column__85KB","table__foot-row-hook":"table__foot-row-hook__3uBs","table__loading-more":"table__loading-more__4E7I",table__loading:"table__loading__1g4o"}},OfDsaQ3X:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n("mrSGxOB2"),o=n("TSYQbtd+"),i=n.n(o),s=n("q1tIBJhx"),a=n("tLZJUYWX"),c=n("a+N5u/Cl"),l=n.n(c),u=n("JcXuB+uV"),p=n("gh8QIhMV"),d=n("wScl0p2y"),h=n("GESwhXbR"),m=n("hvbDW21c"),f=n("Uh8C4V5+"),g=n("zH+Yaocm");n("Ii/4iTCP");var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onOpenTaskDetail(t.props._id)},t.onParentClick=function(){t.props.parent&&t.props.onOpenTaskDetail(t.props.parent._id)},t}return r.d(t,e),t.prototype.renderPriority=function(){var e,t=this.props,n=t.isDone,r=t.priority,o=t._id,a=t.currentConfig,c=t._creatorId,p=t.executor;if(!l.a.isNumber(r)||n)return null;var d=i()("task-priority bg-priority-"+r,((e={})[u.a]=!0,e));return s.createElement("div",{className:d,"data-taskid":o,"data-priority":r,"data-scenarioconfigid":a&&a._id,"data-creatorid":c,"data-executorid":p&&p._id})},t.prototype.renderParentTask=function(){if(!this.props.parent)return null;for(var e=[],t=this.props.parent;t;)e.unshift(t.content),t=t.parent;return s.createElement("a",{className:"parent-task hinted","data-title":e.join(" > "),onClick:this.onParentClick},a.get("task.parent",this.props.parent.content))},t.prototype.renderVisibleIcon=function(){return"involves"===this.props.visible&&s.createElement(h.Icon,{name:"lock",className:"visible-hint hinted","data-title":a.get("visible.to.involve")})},t.prototype.renderCheckBox=function(){var e={_creatorId:this.props._creatorId,_executorId:this.props._executorId,_id:this.props._id,_organizationId:this.props._organizationId,_projectId:this.props._projectId,_taskflowstatusId:this.props._taskflowstatusId,involveMembers:this.props.involveMembers,isArchived:this.props.isArchived,isDone:this.props.isDone,parent:this.props.parent,subtaskCount:this.props.subtaskCount,taskflowstatus:this.props.taskflowstatus,visible:this.props.visible};return!this.props.withoutCheckbox&&s.createElement("span",{className:"check-box"},s.createElement(g.TaskStatusCheckbox,{task:e,showLabel:!1}))},t.prototype.renderAvatar=function(){var e=this.props.executor;return e&&e.avatarUrl?s.createElement(h.Avatar,{className:"flex-static hinted","data-title":e.name,size:"small",src:e.avatarUrl}):null},t.prototype.renderInfos=function(){return s.createElement(m.a,{infos:this.props.infos,currentConfig:this.props.currentConfig,note:this.props.note,startDate:this.props.startDate,dueDate:this.props.dueDate,recurrence:this.props.recurrence,reminder:this.props.reminder,workTime:this.props.workTime,storyPoint:this.props.storyPoint,progress:this.props.progress,tags:this.props.tags,commentsCount:this.props.commentsCount,subtaskCount:this.props.subtaskCount,attachmentsCount:this.props.attachmentsCount,objectlinksCount:this.props.objectlinksCount,likesCount:this.props.likesCount,customFields:this.props.customFields,taskflowstatus:this.props.taskflowstatus,sprint:this.props.sprint})},t.prototype.renderTaskId=function(){var e=this.props,t=e.uniqueIdPrefix,n=e.uniqueId;return t&&n&&null!==n?s.createElement(f.a,{className:"task-card-unique-id",prefix:t,id:n}):null},t.prototype.renderContentWrap=function(){var e=this.props.content;return s.createElement("div",{className:"task-content-set",onClick:this.onClick},s.createElement("header",{className:"task-content-wrapper"},s.createElement("span",{className:"task-content-text"},e),this.renderVisibleIcon(),this.renderAvatar()),this.renderInfos(),this.renderTaskId())},t.prototype.render=function(){var e=i()("task-card",this.props.isDone?"done":null,this.props.preventEvent?"is-prevent-event":null);return s.createElement("div",{className:e,style:r.a({},this.props.style)},this.renderPriority(),s.createElement("div",{className:"task-card-top"},this.renderParentTask()),s.createElement("div",{className:"task-card-body"},this.renderCheckBox(),this.renderContentWrap()))},t}(s.PureComponent),b=function(e){var t=s.useCallback(function(){Object(p.throwError)(new Error("TaskCard Error: ProjectID: "+e._projectId+", TaskID: "+e._id))},[e._projectId,e._id]);return s.createElement(d.ErrorBoundary,{onError:t},s.createElement(v,r.a({},e)))}},Oi0zBIp9:function(e,t,n){"use strict";n.d(t,"d",function(){return l}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return p}),n.d(t,"g",function(){return d}),n.d(t,"h",function(){return h}),n.d(t,"i",function(){return m}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return g}),n.d(t,"a",function(){return v});var r=n("wd/RKGTj"),o=n.n(r),i=n("tLZJUYWX"),s=n.n(i),a=n("3eMzznN/"),c=n("gLdDAp90"),l=function(e){return{_id:e._id,archived:e.isArchived,description:{projectName:e.project&&e.project.name},detail:{content:v(e.startDate,e.endDate,e.isAllDay),type:"text"},mainImage:{iconName:"org-calendar",type:"icon"},name:e.title}},u=function(e){return{_id:e._id,archived:e.isArchived,description:{projectName:e.project&&e.project.name},detail:{content:e.content,type:"text"},mainImage:{iconName:"wall",type:"icon"},name:e.title}},p=function(e){return{_id:e._id,suspended:e.isSuspended,archived:e.isArchived,detail:{content:e.description,type:"text"},mainImage:{shape:"square",src:e.logo,type:"img"},name:e.name,alien:e.alien}},d=function(e){return{raw:e,_id:e._id,archived:e.isArchived,date:{startDate:e.startDate||"",endDate:e.dueDate||""},description:{executorImage:{shape:"circle",src:e.executor?e.executor.avatarUrl:"",type:"img"},projectName:e.project&&e.project.name,taskId:e.taskId,executorName:e.executor&&e.executor.name},detail:e.parent?{content:s.a.get("subtask.belong.to",e.parent.content),type:"text"}:void 0,isDone:e.isDone,mainImage:{iconName:"board",type:"icon"},name:e.content,_taskflowstatusId:e._taskflowstatusId,parent:e.parent||{},subtaskCount:e.subtaskCount||{},accomplished:e.accomplished,prevTaskId:e.previousUniqueId}},h=function(e){return{_id:e._id,archived:e.isArchived,mainImage:{shape:"circle",src:e.avatarUrl,type:"img"},name:e.name,role:e.role,detail:e.teamAncestors?{content:e.teamAncestors.map(function(e){return e.name}).join(" - "),type:"user"}:void 0}},m=function(e){return{_id:e._id,archived:e.isArchived,description:{projectName:e.project&&e.project.name},mainImage:{thumbnail:e.thumbnail,thumbnailUrl:e.thumbnailUrl,fileSize:e.fileSize,fileCategory:e.fileCategory,fileType:e.fileType,type:"thumbnail"},name:e.fileName}},f=function(e){var t="involves"===e.visible?"folder-private":"folder";return{_id:e._id,archived:e.isArchived,description:{projectName:e.project&&e.project.name},mainImage:{iconName:t,type:"icon"},name:e.title}},g=function(e){return{_id:e._id,name:e.content,description:{projectName:e.project&&e.project.name},detail:{content:{amount:e.amount,isIncome:e.type>0},type:"entry"},mainImage:{iconName:"bookkeeping-logo",type:"icon"}}},v=function(e,t,n){if(!e)return"";var r=a.formatDate(new Date(e)).dateString,i=r+" "+o()(e).format("LT");if(!t)return i;if(n)return function(e,t){var n=c.inclusiveAllDayEndDate(t),r=o()(e).isSame(o()(n),"day")?"":" - "+a.formatDate(n).dateString;return""+a.formatDate(e).dateString+r+" "+s.a.get("event.all.day.tips")}(e,t);var l=a.formatDate(new Date(t)).dateString,u=o()(t).format("LT");return r===l?i+" - "+u:i+" - "+l+" "+u}},"On/LiFdN":function(e,t,n){"use strict";n.r(t);var r,o=n("mrSGxOB2"),i=n("17x9q+7Q"),s=n("q1tIBJhx"),a=n.n(s),c=n("TSYQbtd+"),l=n.n(c),u=n("GESwhXbR"),p=n("V6edIaEd"),d=n("tLZJUYWX"),h=n.n(d),m=n("wd/RKGTj"),f=n.n(m),g=n("3eMzznN/"),v=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e){var t=e.dateString;n.props.onSave(n.props.fieldInfo,[{title:t}])},n.onClear=function(){n.props.isRequired?u.Toast.error(d.get("required.field.empty.error")):n.props.onSave(n.props.fieldInfo,[])},n.state={value:t.fieldInfo.value},n}return o.d(t,e),t.prototype.UNSAFE_componentWillUpdate=function(e){e.fieldInfo.value!==this.props.fieldInfo.value&&this.setState(o.a({},this.state,{value:e.fieldInfo.value}))},t.prototype.renderDatePicker=function(){return s.createElement(u.DatePicker,{date:this.state.value,defaultOpenDate:f()(),placement:"bottomLeft",onChange:this.onChange,onClear:this.onClear},this.renderContent())},t.prototype.renderContent=function(){var e=this.props.fieldInfo,t=e.value,n=e.hasValue,r=this.props,o=r.isEditable,i=r.emptyPlaceholder||d.get("to.be.added"),a=n?g.formatDate(t,{isUsePref:!0}).dateTimeString:i,c=l()("flex-space select-value",{"has-value":n,"cursor-not-allowed":!o});return s.createElement("a",{className:c},a)},t.prototype.render=function(){var e=this.props.isEditable;return s.createElement("div",{className:"detail-infos-content flex-space"},e?this.renderDatePicker():this.renderContent())},t}(s.PureComponent),b=n("3eMzznN/").adjustNumberByStep,y=function(e){function t(t){var n=e.call(this,t)||this;return n.onClickEdit=function(){n.props.isEditable&&(n.setState(o.a({},n.state,{isEditing:!0})),n.props.gtaHandler&&n.props.gtaHandler("number"))},n.onSave=function(){if(n.state.value!==n.props.fieldInfo.value){var e=n.state.value?[{title:n.state.value}]:[];n.props.onSave(n.props.fieldInfo,e)}n.setState(o.a({},n.state,{isEditing:!1,hasError:!1}))},n.onChangeInputNumber=function(e){var t=e.target;n.changeState(t.value)},n.onClickCancel=function(){n.setState(o.a({},n.state,{value:n.props.fieldInfo.value,isEditing:!1,hasError:!1}))},n.onClickAdjustNumber=function(e){return function(){var t=Number(n.state.value)||0,r=b(t,e);n.changeState(r.toString())}},n.state={value:t.fieldInfo.value,isEditing:!1,hasError:!1},n}return o.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.fieldInfo.value!==e.fieldInfo.value&&this.setState(o.a({},this.state,{value:e.fieldInfo.value,isEditing:!1,hasError:!1}))},t.prototype.changeState=function(e){if(this.props.isRequired&&""===e)return this.setState(o.a({},this.state,{value:e,hasError:!0,errorMsg:d.get("required.field.empty.error")}));var t=this.validateValueLength(e),n=t?e:e.slice(0,15);this.setState(o.a({},this.state,{value:n,hasError:!t,errorMsg:d.get("custom.field.word.overflow",15)}))},t.prototype.validateValueLength=function(e){return e.length<=15},t.prototype.renderInputNumberToggler=function(){return s.createElement("div",{className:"custom-arrow-handler text-center"},s.createElement("a",{className:"icon icon-chevron-up",onClick:this.onClickAdjustNumber("increase")}),s.createElement("a",{className:"icon icon-chevron-down",onClick:this.onClickAdjustNumber("decrease")}))},t.prototype.renderHandler=function(){return s.createElement("div",{className:"buttons-wrapper"},s.createElement(u.TextButton,{onClick:this.onClickCancel},d.get("cancel")),s.createElement(u.Button,{className:"btn btn-primary",onClick:this.onSave,size:"small",disabled:this.state.hasError},d.get("save")))},t.prototype.renderInput=function(){var e=l()("form-control",{"has-error":this.state.hasError});return s.createElement("input",{className:e,type:"number",placeholder:d.get("to.be.added"),value:this.state.value||"",onChange:this.onChangeInputNumber})},t.prototype.renderError=function(){var e=this.state,t=e.hasError,n=e.errorMsg;return t&&s.createElement(s.Fragment,null,s.createElement(u.Icon,{name:"circle-remove"}),s.createElement("span",{className:"error-msg"},n))},t.prototype.renderInputContents=function(){return s.createElement("div",{className:"input-wrapper"},this.renderInput(),this.renderInputNumberToggler(),s.createElement("div",{className:"handler-wrapper"},s.createElement("div",{className:"error-hint flex flex-vcenter"},this.renderError()),this.renderHandler()))},t.prototype.renderContent=function(){var e=this.props,t=e.isEditable,n=e.emptyPlaceholder,r=this.props.fieldInfo.hasValue,o=n||d.get("to.be.added"),i=this.state.value||o,a=l()("text-value",{hinted:t,"has-value":r,"cursor-not-allowed":!t});return s.createElement("a",{className:a,"data-title":d.get("clickToEdit"),onClick:this.onClickEdit},i)},t.prototype.render=function(){var e=this.state.isEditing;return s.createElement("div",{className:"detail-infos-content flex-space field-info-number"},e?this.renderInputContents():this.renderContent())},t}(s.PureComponent),k=n("s0r7VfKc"),_=n("a+N5u/Cl"),w=n.n(_),C=n("dikDkxSK"),S=function(e){function t(t){var n=e.call(this,t)||this;return n.choices=[],n.onOpenDropdown=function(){var e=n.props.fieldInfo.type;n.fetchChoices(),n.props.gtaHandler&&n.props.gtaHandler(e)},n.fetchChoices=function(){n.entitySubscription&&n.entitySubscription.unsubscribe(),n.setState({isLoading:!0}),n.entitySubscription=k.default.fetch.getCustomFieldEntity(n.props.project._organizationId,n.props.fieldInfo._id,n.props.fieldInfo._customfieldentityId).subscribe(function(e){n.choices=e,n.setState({isLoading:!1})})},n.onSave=function(e){var t=n.props,r=t.fieldInfo;if(t.isRequired&&"null"===e._id)u.Toast.error(d.get("required.field.empty.error"));else{var o="null"===e._id?[]:[e.value];n.props.onSave(r,o.map(function(e){return{title:e}}))}},n.state={isLoading:!1},n}return o.d(t,e),t.prototype.componentWillUnmount=function(){this.entitySubscription&&this.entitySubscription.unsubscribe()},t.prototype.getChoices=function(){var e=_.chain(this.choices).concat([{value:this.props.fieldInfo.value}]).uniq("value").filter(function(e){return!!e.value}).value();return[{_id:t.emptyChoiceId,value:d.get("custom.field.dropDown.null")}].concat(e)},t.prototype.renderDropdown=function(){var e=this.props.fieldInfo.value||t.emptyChoiceId,n=d.get("customfield.selection.search.hint",this.props.fieldInfo.name);return s.createElement(C.a,{inputPlaceholder:n,keyAttr:"value",labelAttr:"value",list:this.getChoices(),isLoading:this.state.isLoading,nested:!0,placement:"bottomLeft",selected:e,onOpen:this.onOpenDropdown,onSelect:this.onSave},this.renderContent())},t.prototype.renderContent=function(){var e=this.props.fieldInfo,t=e.value,n=e.hasValue,r=this.props,o=r.isEditable,i=r.emptyPlaceholder||d.get("to.be.added"),a=n?t:i,c=l()("flex-space select-value",{"has-value":n,"cursor-not-allowed":!o});return s.createElement("a",{className:c},a)},t.prototype.render=function(){var e=this.props.isEditable;return s.createElement("div",{className:"detail-infos-content field-info-select flex-space"},e?this.renderDropdown():this.renderContent())},t.emptyChoiceId="null",t}(s.PureComponent),E=n("7lticdRj"),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSave=function(e){var n=e?[{title:e}]:[];t.props.onSave(t.props.fieldInfo,n)},t}return o.d(t,e),t.prototype.render=function(){var e=this.props.withTitle,t=void 0===e||e?600:1/0;return s.createElement(E.a,{value:this.props.fieldInfo.value,textCountLimit:t,emptyPlaceholder:this.props.emptyPlaceholder,isEditable:this.props.isEditable,onSave:this.onSave,gtaHandler:this.props.gtaHandler,isRequired:this.props.isRequired})},t}(s.PureComponent),I=n("KePvfzJj"),M=function(e){function t(t){var n=e.call(this,t)||this;return n.choices=[],n.onOpenDropdown=function(){var e=n.props.fieldInfo.type;n.fetchOptions(),n.props.gtaHandler&&n.props.gtaHandler(e)},n.fetchOptions=function(){n.entitySubscription&&n.entitySubscription.unsubscribe(),n.setState({isLoading:!0}),n.entitySubscription=k.default.fetch.getCustomFieldEntity(n.props.project._organizationId,n.props.fieldInfo._id,n.props.fieldInfo._customfieldentityId).subscribe(function(e){n.choices=e,n.setState({isLoading:!1})})},n.onSave=function(){var e=n.props.fieldInfo,t=n.state.value;if(e.value.length!==t.length)return n.props.onSave(e,t.map(function(e){return{title:e}}));Object(I.arrayAreSameValue)(e.value,t)||n.props.onSave(e,t.map(function(e){return{title:e}}))},n.onClick=function(e){var t=n.state.value,r=e.value,i=_.contains(t,r)?_.without(t,r):o.h(t,[e.value]);n.props.isRequired&&0===i.length?u.Toast.error(d.get("required.field.empty.error")):n.setState({value:i})},n.state={isLoading:!1,value:o.h(t.fieldInfo.value)},n}return o.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({value:o.h(e.fieldInfo.value)})},t.prototype.componentWillUnmount=function(){this.entitySubscription&&this.entitySubscription.unsubscribe()},t.prototype.renderContent=function(){var e=this.props.fieldInfo,t=e.value,n=e.hasValue,r=this.props,o=r.isEditable,i=r.emptyPlaceholder||d.get("to.be.added"),a=n?t.join(d.get("comma")):i,c=l()("flex-space select-value",{"has-value":n,"cursor-not-allowed":!o});return s.createElement("a",{className:c},a)},t.prototype.renderDropdown=function(){var e=d.get("customfield.selection.search.hint",this.props.fieldInfo.name),t=_.chain(this.choices).concat(this.props.fieldInfo.value.map(function(e){return{value:e}})).uniq("value").value();return s.createElement(C.a,{inputPlaceholder:e,labelAttr:"value",keyAttr:"value",list:t,isLoading:this.state.isLoading,mode:"multi",nested:!0,placement:"bottomLeft",selected:this.state.value,onOpen:this.onOpenDropdown,onSelect:this.onClick,onClose:this.onSave},this.renderContent())},t.prototype.render=function(){var e=this.props.isEditable;return s.createElement("div",{className:"detail-infos-content field-info-multi-select flex-space"},e?this.renderDropdown():this.renderContent())},t}(s.PureComponent),j=n("44DsGIVT"),P=n.n(j),x=n("77NnVLwu"),N=n.n(x),O=n("0FRv5rrl"),R=n.n(O),D=n("gh8QIhMV"),L=n("XhpHwZVN"),z=n("6EY9/lIj"),A=n("OZhv4qSB"),V=n("ibviuac0"),F=n("sa1Ed382"),B=n("8N+zwa3A"),U=n("OmupbwLD"),$=n("o4N9kv/m"),H=n("eubUSX4T"),G=n("fnRWEXeT"),q=n("gZ0iyWtq"),W=/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,J=/\/work\/(\w+)/,X=function(e){function t(t){var n=e.call(this,t)||this;return n.uploadWorkDatas=[],n.getDndHandler=function(e){return n.dndHandler=e},n._getProjectModel=P()(function(e){return new N.a(e,{bindByMatrix:!1})}),n.initUploader=function(){if(n.canPostWork()){var e=new H([],{_boundToObjectId:n.getDefaultCollectionId()});n.workUploader=n.getWorkUploaderView(e,e._id,{dnd:n.dndHandler})}},n.closeDropdown=function(){return n.onDropdownVisibleChange(!1)},n.onUploadFromLocation=function(){n.workUploader.uploader.triggerUpload({multiple:!0})},n.onFileLinkInput=function(e){n.setState({fileUrlInput:e.target.value})},n.stopPropagation=function(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},n.onDropdownVisibleChange=function(e){n.setState({dropdownOpened:e})},n.onSelectFileFromLibrary=function(){n.closeDropdown(),n.requestFilePickModalView()},n.handleUpload=function(e){var t=new H([],{_boundToObjectId:e});n.getWorkUploaderView(t,e,{},function(){n.filePickModal.remove()}).uploader.triggerUpload({multiple:!0})},n.handleSelect=function(e){n.addWorksToCustomField(e.map(function(e){return e.toJSON()}))},n.onAddFile=function(){var e=n.state.fileUrlInput;n.closeDropdown();var t=encodeURI(e).match(W),r=e.match(J),o=r?r[1]:"";t&&o?new Promise(function(e,t){B.fetch(o,{success:function(t){return e(t)},error:function(){u.Toast.error(d.get("work.picker.remote.error")),t()}})}).then(function(e){n.setState({fileUrlInput:""}),n.addWorksToCustomField([e.toJSON()])}):u.Toast.error(d.get("work.picker.remote.error"))},n.onRemoveFile=function(e){return function(){return n.removeFile(e)}},n.previewFile=function(e){return function(){var t=n.props.project;F.APP.openObjectPreviewer(e,"work",{_projectId:t._id})}},n.state={fileUrlInput:"",dropdownOpened:!1},n}return o.d(t,e),t.prototype.componentDidMount=function(){this.initUploader()},t.prototype.componentWillUnmount=function(){this.clearUploader()},t.prototype.getProjectModel=function(){return this._getProjectModel(this.props.project)},t.prototype.getDefaultCollectionId=function(){var e=this.props.project._defaultCollectionId;if(e)return e;var t=this.props.project._organizationId;if(!t)return"";var n=R.a.find(t);return n&&(e=n.get("_defaultCollectionId")),e||""},t.prototype.putWorksToCustomField=function(e){var t=this.props,n=t.fieldInfo,r=t.onSave,o=w.a.uniq(e,function(e){return e._id});o.length>10&&u.Toast.error(d.get("custom.fields.file.length.limit.error",10)),r(n,o.slice(0,10).map(function(e){return w.a.pick(e,"_id","fileType","fileName","fileSize","thumbnail","thumbnailUrl","fileCategory")}))},t.prototype.addWorksToCustomField=function(e){var t=this.props.fieldInfo.workValues||[];this.putWorksToCustomField(o.h(t,e))},t.prototype.canPostWork=function(){return this.getProjectModel().hasPermission("work.post")},t.prototype.clearUploader=function(){this.workUploader&&(this.workUploader=null)},t.prototype.requestFilePickModalView=function(){var e=this.props.project;this.filePickModal&&this.filePickModal.remove(),this.filePickModal=F.APP.requestSubView(U).open(G,{_projectId:e._id,allProjects:!1,multiple:!0,onlyCollections:!1,onlyWorks:!0,onUpload:this.handleUpload,select:this.handleSelect,title:d.get("work.picker.from.library"),withWorkUpload:!0})},t.prototype.isFull=function(){return(this.props.fieldInfo.workValues||[]).length>=10},t.prototype.getWorkUploaderView=function(e,t,n,r){var i=this;void 0===n&&(n={});var s=this.props.project,a=function(){if(0===e.getUploadingCount()){var n=o.h(i.uploadWorkDatas);i.uploadWorkDatas=[],e.off("remove",a),e.addWorks(n,{_parentId:t,_projectId:s._id,success:function(e){i.addWorksToCustomField(e),"function"==typeof r&&r()},error:function(e){Object(D.throwError)(e)}})}},c=this;return F.APP.requestSubView($,o.a({collection:e,isBackground:!0,targetModel:this.getProjectModel(),validate:function(e){return!((c.props.fieldInfo.workValues||[]).length+e.length>10)||(u.Toast.error(d.get("custom.fields.file.length.limit.error",10)),!1)},beforeCreate:function(){e.on("remove",a),F.APP.worksBgUploader.resetCollection()},onComplete:function(e,t){i.uploadWorkDatas.push(e),t.model.set(Object.assign(t.model.parse(e),{thumbnail:"",completed:!0})),a()}},n))},t.prototype.removeFile=function(e){var t=this.props,n=t.fieldInfo,r=t.isRequired,o=n.workValues||[];r&&1===o.length?u.Toast.error(d.get("required.field.empty.error")):this.putWorksToCustomField(o.filter(function(t){return t._id!==e}))},t.prototype.renderAddDropdownContent=function(){var e=this.state.fileUrlInput;return s.createElement("div",{className:"upload-file-dropdown"},s.createElement(u.Menu,null,s.createElement(u.MenuItem,{onClick:this.onUploadFromLocation},d.get("custom.field.file.upload.from.location")),s.createElement(u.MenuItem,{onClick:this.onSelectFileFromLibrary},d.get("custom.field.file.choose.exist.file")),s.createElement("div",{className:"gap-line"}),s.createElement("div",{className:"link-input-wrap"},s.createElement("input",{className:"link-input form-control",placeholder:d.get("custom.field.file.link.placeholder"),value:e,onClick:this.stopPropagation,onChange:this.onFileLinkInput}),s.createElement(u.Button,{className:"add-file-from-url-button",onClick:this.onAddFile,disabled:""===e},d.get("add")))))},t.prototype.renderAddDropdown=function(e){return s.createElement(u.Dropdown,{content:this.renderAddDropdownContent(),placement:"bottom",nested:!0,opened:this.state.dropdownOpened,onVisibleChange:this.onDropdownVisibleChange},e)},t.prototype.renderAddButton=function(){var e=this.props,t=e.isEditable,n=e.emptyPlaceholder,r=this.props.fieldInfo.workValues||[];if(0===r.length){var o=s.createElement(V.b,{disabled:!t,className:q["text-button"]},n);return t?this.renderAddDropdown(o):o}return r.length>=10||!t?null:this.renderAddDropdown(s.createElement(V.a,{disabled:!t}))},t.prototype.renderContent=function(){var e=this,t=this.props,n=t.fieldInfo,r=t.isEditable,o=n.workValues||[],i=o.map(function(t){var n=t._id,o=t.fileName,i=void 0===o?"":o,a=s.createElement(A.a,{className:"file-remove-shortcut",contentClassName:"file-content",key:n,onClick:e.previewFile(n),onClickRemove:e.onRemoveFile(n),silent:!r,shape:"square"},s.createElement("div",{className:"file-icon"},Object(L.WorkIcon)(t)),s.createElement("div",{className:"file-name"},s.createElement(z.a,{title:i,sliceIndex:i.length-6})));return s.createElement("div",{className:"file-item",key:n},a)}),a=s.createElement("div",{className:"file-item"},this.renderAddButton());return s.createElement("div",{className:"file-list"},i,a)},t.prototype.getContent=function(){return this.props.isEditable?s.createElement("div",{ref:this.getDndHandler},this.renderContent()):this.renderContent()},t.prototype.render=function(){return s.createElement("div",{className:"detail-infos-content field-info-file flex-space"},this.getContent())},t}(s.PureComponent),Y=n("fZoV3jYy"),K=n("X3uQOh/O"),Q={height:"calc(100vh - 148px)",padding:0},Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onVisibleChange=function(e){e||t.props.onHide()},t}return o.d(t,e),t.prototype.render=function(){return s.createElement(u.Modal,{className:K["advanced-field-modal"],title:this.props.title,titleCls:"advanced-field-title",opened:!!this.props.url,onVisibleChange:this.onVisibleChange,width:800,bodyStyle:Q,containerCls:"advanced-field-container"},s.createElement("iframe",{className:"advanced-field-iframe",src:this.props.url||""}))},t}(s.Component),ee=n("CxY0Mkc1");!function(e){e.NewTab="new-tab",e.Modal="modal"}(r||(r={}));var te="on_click",ne=r.NewTab;var re={},oe=n("7kYIQESD"),ie=n("X3uQOh/O"),se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={modalUrl:null},t.onRemoveItem=function(){t.props.onRemoveItem(t.props.item._id)},t.onClickItem=function(){var e=t.props.item.url;if(e)switch(function(e){var t=ee.parse(e,!0).query;return t&&"string"!=typeof t&&t[te]||ne}(e)){case r.Modal:t.openModal(e);break;default:window.open(e)}},t.openModal=function(e){t.setState({modalUrl:e})},t.closeModal=function(){t.setState({modalUrl:null})},t}return o.d(t,e),t.prototype.renderAvatar=function(){var e=this.props.advancedCustomField,t=this.props.item.thumbUrl;if(t)return a.a.createElement(u.Avatar,{src:t,size:"small",className:"item-content-avatar"});if(e&&"document"===e.icon)return a.a.createElement(oe.FileIcon,{type:"thoughts",className:"item-content-thumbnail thoughts"});var n=e&&re[e.icon];return n&&a.a.createElement("svg",{className:"item-content-thumbnail"},a.a.createElement("use",{xlinkHref:"#"+n.id}))},t.prototype.renderContent=function(){return a.a.createElement("div",{className:"item-content-title"},this.props.item.title)},t.prototype.renderModal=function(){return this.props.isSelectorTrigger?null:a.a.createElement(Z,{title:this.props.item.title,url:this.state.modalUrl,onHide:this.closeModal})},t.prototype.render=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(A.a,{silent:!this.props.isEditable,onClickRemove:this.onRemoveItem,onClick:this.onClickItem,contentClassName:ie["item-content"],shape:"square"},this.renderAvatar(),this.renderContent()),this.renderModal())},t}(a.a.PureComponent),ae=n("4c1CS0b3"),ce=n("wVXDg9Ql"),le=n("dWbDnvg6"),ue=n("X3uQOh/O"),pe=function(e){function t(t){var n=e.call(this,t)||this;return n.commit=function(e){var t=e.added,r=e.removed;if(t.length||r.length){var o=e.result,i=Object.keys(o).map(function(e){return n.getOriginalItem(o[e])});n.props.onSave(n.props.fieldInfo,i)}else n.props.onClose()},n.errorHandler=function(e){return 403===e.error.status?(u.Toast.error(d.get("custom.field.advanced.error.hint")),ce.SDKInterceptor.ignore(e)):Object(D.throwError)(e),ae.Observable.empty()},n.searchFn=function(e){var t=o.a({},n.basicOption,{query:e}),r="customfields/"+n.props.fieldInfo._id+"/lookup";return k.default.fetch.get(r,t).map(function(e){return e.options}).map(function(e){return e.map(function(e){return n.transformItem(e)})}).catch(n.errorHandler)},n.loadRecommend=function(){var e="customfields/"+n.props.fieldInfo._id+"/popup";return k.default.fetch.get(e,n.basicOption).map(function(e){return e.options}).map(function(e){return e.map(function(e){return n.transformItem(e)})}).catch(n.errorHandler)},n.redirectToCreateUrl=function(){n.state.createUrl&&window.open(n.state.createUrl)},n.basicOption=n.getBasicOption(),n.initChosenItems=(t.fieldInfo.advancedValue||[]).map(function(e){return n.transformItem(e)}),n.state={createUrl:""},n}return o.d(t,e),t.prototype.componentDidMount=function(){this.getCreateUrl()},t.prototype.componentWillUnmount=function(){this.fetchCreateUrl$&&this.fetchCreateUrl$.unsubscribe()},t.prototype.getCreateUrl=function(){var e=this,t=this.props.fieldInfo,n=t._id,r=t.advancedCustomfield;if(r&&r.hasCreateUrl){var o="customfields/"+n+"/create";this.fetchCreateUrl$=k.default.fetch.get(o,this.basicOption).subscribe(function(t){e.setState({createUrl:t.redirect})})}},t.prototype.getOriginalItem=function(e){return w.a.omit(e,"id","name","desc","avatar","checked","canToggle")},t.prototype.transformItem=function(e){var t=void 0;return e.thumbUrl&&(t={src:e.thumbUrl,type:le.b.Img}),o.a({},e,{id:e._id,name:e.title,desc:e.description,avatar:t})},t.prototype.getBasicOption=function(){var e=this.props,t=e.boundToObjectType,n=e.boundToObjectId,r=e.project;return{objectType:t,_objectId:n,_organizationId:r._organizationId,_projectId:r._id}},t.prototype.renderCreateLink=function(){var e=this.props.fieldInfo.advancedCustomfield;if(!(e&&e.hasCreateUrl))return null;var t=""+d.get("create")+this.props.fieldInfo.name;return a.a.createElement(u.TextButton,{color:"blue",className:"create-link",onClick:this.redirectToCreateUrl},a.a.createElement(u.Icon,{name:"circle-cross"}),a.a.createElement("span",{className:"create-link-text"},t))},t.prototype.render=function(){var e=d.get("custom.field.advanced.find",this.props.fieldInfo.name),t={text:d.get("search.filter.selector.not.found")},n=Object(I.getIsVersionAppField)(this.props.fieldInfo)?d.get("custom.fields.recent.versions"):d.get("recommend");return a.a.createElement("div",{className:ue["advanced-field-selector"]},a.a.createElement(Y.d,{mode:this.props.mode,selected:this.initChosenItems,alwaysShowSearch:!0,contentPlaceholder:t,searchBoxPlaceholder:e,recommendTitle:n,loadRecommend:this.loadRecommend,loadSearch:this.searchFn,commit:this.commit,extra:this.renderCreateLink()}))},t}(a.a.PureComponent),de=n("X3uQOh/O"),he=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setDropdownRef=function(e){t.dropdownRef=e},t.onRemoveItem=function(e){var n=t.props.fieldInfo.advancedValue;if(n)if(t.props.isRequired&&1===n.length)u.Toast.error(h.a.get("required.field.empty.error"));else{var r=n.filter(function(t){return t._id!==e});t.props.onSave(t.props.fieldInfo,r)}},t.onSave=function(e,n){t.props.isRequired&&w.a.isEmpty(n)?u.Toast.error(h.a.get("required.field.empty.error")):t.props.onSave(e,n),t.onClose()},t.onClose=function(){t.dropdownRef.close()},t}return o.d(t,e),t.prototype.renderDropdownContents=function(e){var t=o.a({},this.props,{mode:e?Y.c.Single:Y.c.Multi,onSave:this.onSave,onClose:this.onClose});return s.createElement(pe,o.a({},t))},t.prototype.renderItemContents=function(){var e=this,t=this.props.fieldInfo.advancedCustomfield;return(this.props.fieldInfo.advancedValue||[]).map(function(n){return s.createElement("div",{className:"item-wrapper",key:n._id},s.createElement(se,{advancedCustomField:t,item:n,isEditable:e.props.isEditable,onRemoveItem:e.onRemoveItem}))})},t.prototype.renderPlaceholder=function(){var e=this.props,t=e.emptyPlaceholder,n=e.isEditable;return s.createElement("div",{className:"item-wrapper"},s.createElement(V.b,{disabled:!n,className:de["text-button"]},t))},t.prototype.renderEditableContents=function(){var e=this.props.fieldInfo;return s.createElement(u.Dropdown,{content:this.renderDropdownContents(e.isSingleSelection),placement:"bottomLeft",nested:!0,persistence:!0,ref:this.setDropdownRef},this.renderTriggerElements())},t.prototype.renderTriggerElements=function(){var e=this.props,t=e.isEditable,n=e.fieldInfo;if(!n.hasValue)return this.renderPlaceholder();if(n.hasValue&&t){var r=n.isSingleSelection?"pencil":"circle-plus";return s.createElement("div",{className:"item-wrapper"},s.createElement(V.a,{name:r}))}return null},t.prototype.renderMulti=function(){var e=this.props.isEditable?this.renderEditableContents():this.renderTriggerElements();return s.createElement(s.Fragment,null,this.renderItemContents(),e)},t.prototype.renderSingle=function(){var e=this.props,t=e.isEditable,n=e.fieldInfo,r=n.advancedCustomfield,o=n.advancedValue||[],i=o.length?s.createElement("div",{className:"item-wrapper"},s.createElement(se,{advancedCustomField:r,item:o[0],isEditable:this.props.isEditable,onRemoveItem:this.onRemoveItem,isSelectorTrigger:!0})):this.renderPlaceholder();return t?s.createElement(u.Dropdown,{content:this.renderDropdownContents(!0),placement:"bottomLeft",nested:!0,persistence:!0,ref:this.setDropdownRef},i):i},t.prototype.render=function(){var e=this.props.fieldInfo,t=de["advanced-fields-wrapper"],n=Object(I.getIsVersionAppField)(e);return s.createElement("div",{className:"detail-infos-content flex-space field-info-advanced"},s.createElement("div",{className:t},n&&this.renderSingle(),!n&&this.renderMulti()))},t}(s.PureComponent),me=n("hpce7W0k"),fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setDropdownRef=function(e){t.dropdownRef=e},t.onSave=function(e,n){t.props.onSave(e,n),t.onClose()},t.onClose=function(){t.dropdownRef.close()},t}return o.d(t,e),t.prototype.renderDropdownContents=function(){var e=o.a({},this.props,{onSave:this.onSave,onClose:this.onClose});return s.createElement(me.a,o.a({},e))},t.prototype.renderDropdown=function(){return s.createElement(u.Dropdown,{content:this.renderDropdownContents(),placement:"bottomLeft",nested:!0,persistence:!0,ref:this.setDropdownRef},this.renderContent())},t.prototype.renderContent=function(){var e=this.props.fieldInfo,t=e.commonGroupValue,n=e.hasValue,r=this.props,o=r.isEditable,i=r.emptyPlaceholder||d.get("to.be.added"),a=t&&t.value,c=n?a:i,u=l()("flex-space select-value",{"has-value":n,"cursor-not-allowed":!o});return s.createElement("a",{className:u},c)},t.prototype.render=function(){var e=this.props.isEditable?this.renderDropdown():this.renderContent();return s.createElement("div",{className:"detail-infos-content flex-space common-group-field"},e)},t}(s.PureComponent),ge=n("gZ0iyWtq"),ve=n.n(ge);n.d(t,"CustomFieldInfo",function(){return be});var be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickRemove=function(){"function"==typeof t.props.onRemove&&t.props.onRemove(t.props.fieldInfo._id)},t}return o.d(t,e),t.prototype.renderItem=function(){var e=this.props.fieldInfo;switch(e.type){case"text":return s.createElement(T,o.a({},this.props,{fieldInfo:e}));case"number":return s.createElement(y,o.a({},this.props,{fieldInfo:e}));case"date":return s.createElement(v,o.a({},this.props,{fieldInfo:e}));case"dropDown":return s.createElement(S,o.a({},this.props,{fieldInfo:e}));case"multipleChoice":return s.createElement(M,o.a({},this.props,{fieldInfo:e}));case"lookup":return s.createElement(he,o.a({},this.props,{fieldInfo:e}));case"commongroup":return s.createElement(fe,o.a({},this.props,{fieldInfo:e}));case"work":return s.createElement(X,o.a({},this.props,{fieldInfo:e}))}},t.prototype.renderRemoveIcon=function(){return this.props.isDeletable&&s.createElement("div",{className:"remove-link-icon"},s.createElement(u.Icon,{name:"circle-remove",onClick:this.onClickRemove}))},t.prototype.renderTitle=function(){var e=this.props.fieldInfo.name,t=this.props.withTitle,n=void 0===t||t,r=Object(p.castCustomFiledTypeToIconName)(this.props.fieldInfo),o=l()("detail-infos-aside",{"is-deletable":this.props.isDeletable,"short-version":!n}),i=n&&s.createElement(u.Tooltip,{title:e},s.createElement("span",{className:"name"},e));return s.createElement("div",{className:o},this.renderRemoveIcon(),s.createElement(u.Icon,{name:r}),i)},t.prototype.render=function(){return s.createElement("div",{className:l()(ve.a["custom-field-info"],this.props.className)},this.renderTitle(),this.renderItem())},t.propTypes={fieldInfo:i.object.isRequired,isEditable:i.bool.isRequired,withTitle:i.bool,emptyPlaceholder:i.string,boundToObjectType:i.oneOf(["task","event","project","testcase"]).isRequired,project:i.object.isRequired,boundToObjectId:i.string,onSave:i.func.isRequired,gtaHandler:i.func,onRemove:i.func,isRequired:i.bool},t}(s.PureComponent)},OnHNcURG:function(e,t,n){e.exports=n.p+"images/d_guile@2x.22335486.png"},"OyfLzFU+":function(e,t){e.exports=function(e){var t='<div class="tab-list"> ',n=e.list;if(n)for(var r,o=-1,i=n.length-1;o<i;)t+=' <a class="tab-item',(r=n[o+=1]).showBadge&&(t+=" with-badge"),t+='" data-index="'+o+'"> <span class="icon '+r.icon+'"></span> <span class="text">'+r.text+"</span> </a> ";return t+='</div><div class="tab-container-view-content"></div>'}},"P+f+a/gd":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w={}.hasOwnProperty;v=n("a+N5u/Cl"),d=n("q1tIBJhx"),i=n("4c1CS0b3").Observable,_=n("sa1Ed382"),f=n("3eMzznN/"),g=n("vmWJWrVe"),h=n("GESwhXbR").Toast,m=n("RLD3BeS/").ToastMessageWithUrl,s=n("85182E8g"),u=n("nL4olqOP"),c=n("BLZfz376"),r=n("lKlBpm6f"),a=n("qKYkuTVR"),l=n("Bav6P9y8"),b=n("4m0cgL3g").canForkProjectTo,y=n("tXB4VUxf").checkValidUniqueIdPrefixAsync,k=n("zkRNVHgy").findAppType,p=n("Nohvfk+i"),o=n("VEXIRFdZ"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)w.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,g),t.prototype.viewName="ActivityPanelCopyView",t.prototype.className="activity-panel-copy",t.prototype.events={"click .owner-handler":"showOwnerSelector","click .visibility-handler":"renderVisibilitySelector","click .submit-copy":"submitCopy","input .project-name":"handleNameInput","input .project-unique-id-prefix":"handleUniqueIdPrefixInput"},t.prototype.initialize=function(e){var t,n;return this.projectModel=e.projectModel,this.selectedVisibility=null!=(t=e.selectedVisibility)?t:"project",this.initializeFormSchema(),this.organizationsCollection=s.get(0),this.selectedOrgId=this.projectModel.get("_organizationId"),this.organization=this.organizationsCollection.get(this.selectedOrgId),f.promiseChain((n=this,function(){return!n.el}))(function(e){return function(){return e.readProjectTags(e.projectModel.id,e.organization)}}(this),function(e){return function(t){e.sourceProjectTags=t}}(this),function(e){return function(){return e.renderBasic(),e.renderOwner(),e.renderProjectTagsSelector(),e.handleNameInput(),e.handleUniqueIdPrefixInput(),e.$projectName.focusAtEnd()}}(this))},t.prototype.readProjectTags=function(e,t){var n;return(n=null!=t?t.id:void 0)&&e&&(null!=t?t.getRoleScope():void 0)>=0?c.fetchByProjectId(n,e).then(function(e){return e.toJSON()}).catch(function(){return[]}):Promise.resolve([])},t.prototype.renderBasic=function(){var e,t,n,r;return n=(r=this.projectModel.canCopyToAnotherOwner()).result,t=r.reason,e=v.extend({},this.projectModel.toJSON(),{displayTaskUniqueId:this.taskUniqueIdEnabled(),displayOwner:n,model:this.formSchema.valueMap,disabledSelectOwnerTips:t}),this.$el.html(o(e)),this.$submit=this.$("button"),this.$projectName=this.$("input.project-name"),this.$projectUniqueIdPrefix=this.$(".project-unique-id-prefix"),this.$projectUniqueIdPrefixError=this.$(".project-unique-id-prefix-error"),this.$projectUniqueIdPrefixErrorText=this.$(".project-unique-id-prefix-error-text"),this.$projectTagsFormGroup=this.$(".project-tags .form-group")},t.prototype.taskUniqueIdEnabled=function(){var e;return this.projectModel.isAppEnabled("taskUniqueId")&&r.isAvailableToPlan(k("taskUniqueId"),null!=(e=this.organization)?e.payment:void 0)},t.prototype.renderOwner=function(){return this.organization=this.organizationsCollection.get(this.selectedOrgId),this.$(".project-owner .selector-title").text(this.organization?this.organization.get("name"):tb_i18n.get("me")),this},t.prototype.getOwners=function(){var e,t;return e=[],b(this.projectModel,null)&&e.push({_id:_.user.id,title:tb_i18n.get("me"),plan:_.user.get("plan")}),e._userMeId=_.user.id,this.organizationsCollection.each((t=this,function(n){if(b(t.projectModel,n.id))return e.push({_id:n.id,title:n.get("name"),plan:n.get("plan")})})),e},t.prototype.showOwnerSelector=function(e){var t,n,r,o,i;if(!(t=$(null!=e?e.currentTarget:void 0)).closest(".owner-handler").hasClass("disabled")&&(n="showOwnerSelector_"+this.cid,!t.data(n)))return t.data(n,!0),null!=(o=this.ownerMenuView)&&o.remove(),r=this.getOwners(),this.ownerMenuView=this.requestSubView(a,{$toggler:t,width:320,dataList:r,selected:this.selectedOrgId,select:(i=this,function(e){return i.selectedOrgId=e===_.user.id?null:e,i.organization=i.organizationsCollection.get(i.selectedOrgId),i.renderBasic(),i.renderOwner(),i.renderProjectTagsSelector(),i.renderVisibilitySelector(),i.handleUniqueIdPrefixInput()})}),t.click(),this},t.prototype.renderProjectTagsSelector=function(){var e,t,n,r,o,s,a,c,l,u,h;if(n=this.$projectTagsFormGroup.get(0))return(t=this.selectedOrgId)===(null!=(o=this.projectModel)?o.get("_organizationId"):void 0)&&(l=null!=(s=this.sourceProjectTags)?s.map(function(e){return e._id}):void 0),e=p.createSelector({search:p.loadSearch.bind(null,t),loadRecommend:p.loadRecommend.bind(null,t,l),loadChildren:p.loadChildren.bind(null,t),create:p.create.bind(null,t)}),c=this.selectedProjectTags||[],r=p.genTagSelectorTitle(c),u=d.createElement(p.Trigger,r),this.requestReactView(n,e,{trigger:u,triggerRef:r.ref,nested:!0,selected:c,withCreator:null!=(a=this.organization)?a.hasPermission("organization.projecttag.post"):void 0,commit:(h=this,function(e){var t,n;return n=e.payload,t=e.cache,i.of(null).do(function(){if(n)return h.selectedProjectTags=n.map(function(e){return t[e]}),h.renderProjectTagsSelector()})})})},t.prototype.renderVisibilitySelector=function(e){var t;return $(null!=e?e.currentTarget:void 0).hasClass("visibility-handler")?($(e.currentTarget).remove(),this.projectVisibilityView=this.requestSubView(l,{selected:this.selectedVisibility,projectModel:this.projectModel,select:(t=this,function(e){return t.visibilityCallBack(e)}),isOrganization:this.organization}),this.projectVisibilityView.$el.appendTo(this.$(".project-visibility"))):this.projectVisibilityView&&(this.projectVisibilityView.remove(),this.projectVisibilityView=this.requestSubView(l,{selected:this.selectedVisibility,projectModel:this.projectModel,select:function(e){return function(t){return e.visibilityCallBack(t)}}(this),isOrganization:this.organization}),this.projectVisibilityView.$el.appendTo(this.$(".project-visibility"))),this},t.prototype.visibilityCallBack=function(e){return this.selectedVisibility=e,this.$(".project-visibility .selector-title").text(tb_i18n.get("project.setting.visibility."+this.selectedVisibility)),this.$(".visibility-handler").attr("value",this.selectedVisibility),this.$(".visibility-handler .icon:not(.icon-chevron-down)").removeClass("icon-lock icon-earth icon-building").addClass(function(){switch(this.selectedVisibility){case"project":return"icon-lock";case"organization":return"icon-building";case"all":return"icon-earth"}}.call(this)),this.$(".visibility-handler").click()},t.prototype.initializeFormSchema=function(){return this.formSchema={valueMap:{},touchMap:{},errorMap:{}}},t.prototype.touchFormField=function(e){return this.formSchema.touchMap[e]=!0},t.prototype.setFormFieldValue=function(e,t){return this.formSchema.valueMap[e]=t},t.prototype.setFormFieldError=function(e,t){var n;return this.formSchema.errorMap[e]=t,n=v.some(this.formSchema.errorMap,v.identity),this.disableSubmit(n)},t.prototype.handleNameInput=function(e){var t,n;return null==e&&(e=null),e&&this.touchFormField("name"),n=e?e.currentTarget.value.trim():this.formSchema.valueMap.name,this.setFormFieldValue("name",n||""),t=!n,this.setFormFieldError("name",t)},t.prototype.handleUniqueIdPrefixInput=function(e){var t;return null==e&&(e=null),e&&this.touchFormField("uniqueIdPrefix"),t=e?e.currentTarget.value.trim():this.formSchema.valueMap.uniqueIdPrefix,this.setFormFieldValue("uniqueIdPrefix",t||""),this.taskUniqueIdEnabled()?(this.$projectUniqueIdPrefix.removeClass("has-error"),this.$projectUniqueIdPrefixError.hide(),this.validateUniqueIdPrefix(t)):this.setFormFieldError("uniqueIdPrefix",void 0)},t.prototype.validateUniqueIdPrefix=v.debounce(function(e){return y(this.selectedOrgId,e).then((t=this,function(){return t.setFormFieldError("uniqueIdPrefix",void 0)})).catch(function(e){return function(t){if(e.setFormFieldError("uniqueIdPrefix",!0),e.formSchema.touchMap.uniqueIdPrefix&&(e.$projectUniqueIdPrefix.addClass("has-error"),t))return e.$projectUniqueIdPrefixError.show(),e.$projectUniqueIdPrefixErrorText.text(t.message)}}(this));var t},200),t.prototype.disableSubmit=function(e){return this.$submit.prop("disabled",e),this},t.prototype.isSubmitDisabled=function(){return this.$submit.prop("disabled")},t.prototype.submitCopy=function(e){var t,n,r,o;if(!this.isSubmitDisabled()&&("all"===this.projectModel.get("visibility")||this.projectModel.hasPermission("put.fork")))return this.disableSubmit(!0),r=this.taskUniqueIdEnabled()?this.formSchema.valueMap.uniqueIdPrefix:"",t=this.organizationsCollection.get(this.selectedOrgId)?this.selectedOrgId:null,n=(this.selectedProjectTags||[]).map(function(e){return e._id}),this.projectModel.copy({attrs:{_id:this.projectModel.id,_organizationId:t,name:this.formSchema.valueMap.name,_projecttagIds:n,uniqueIdPrefix:r,visibility:this.selectedVisibility},success:(o=this,function(e){var n,r,i;return u.get(0).add(e),(t=e._organizationId)&&(null!=(n=u.find(t))&&n.add(e),null!=(r=o.organizationsCollection.get(t))&&r.fetch({reset:!0})),m.success({messageTitle:tb_i18n.get("project.menu.copy.success"),url:"/project/"+e._id,urlTitle:e.name}),null!=(i=o.parentView)&&i.backToAll(),o.remove()}),error:function(e){return function(){return e.disableSubmit(!1),h.error({message:tb_i18n.get("project.menu.copy.fail")})}}(this),silentError:!0})},t}()},P4reLC2o:function(e,t,n){e.exports={"check-box-disabled":"check-box-disabled__Tuco","icon-external-suffix":"icon-external-suffix__1SHc"}},P4sAzqTu:function(e,t,n){},P6MFxFWo:function(e,t){e.exports=function(e){return"<h3>"+tb_i18n.get("file")+' ・ <span class="works-count">0</span></h3>'}},PAu3LtoN:function(e,t,n){e.exports={executor:"executor__2pBD","executor-shortcut":"executor-shortcut__1_gi"}},PCjZn8k4:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_={}.hasOwnProperty;f=n("a+N5u/Cl"),b=n("sa1Ed382"),m=n("vmWJWrVe"),a=n("qHH6+g6Q"),k=n("yiO17FlF"),v=n("zQgHgypC").getScrumTaskUrl,g=n("UHEHxqn1").getScenarioTaskRedirectUrl,r=n("hJ1hXzc5").DetailNavigation,d=n("oq1bWpp9"),i=n("1fU+e3+7"),u=n("Rb7YhHxV"),o=n("BVXu+viu"),h=n("eIZlrYEN"),p=n("nL4olqOP"),c=n("fIWqDpgJ"),y=n("gh8QIhMV").throwError,s=n("oLBRAHW+").DetailViews,l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)_.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,m),t.prototype.viewName="ObjectModalView",t.prototype.className="object-modal-view flex-space flex flex-center",t.prototype.hotkeys={up:"goPrev",left:"goPrev",down:"goNext",right:"goNext"},t.prototype.events={"click .url-handler":"gtaUrlHandler"},t.prototype.initialize=function(e){var t;return null==e&&(e={fullScreen:!1}),this.options=e,this.handleElWithOptions(this.options),this.parseOptions(this.options).then((t=this,function(){return t.renderDetail(),t.renderNavigations()})),this},t.prototype.handleElWithOptions=function(e){if(e.fullScreen)return this.$el.addClass("full-screen")},t.prototype.renderDetail=function(){var e,t,n,r;return this.$body=$('<div class="object-modal-view-body"></div>'),this.$el.html(this.$body),t=this.options.success||function(){},this.options.success=(r=this,function(e){return f.delay(function(){if(r.$el)return r.$detail.find(".hack-render-bug").removeClass("hack-render-bug"),r.renderNav(),t(e)})}),e=this.options.error||function(){},this.options.error=function(t){return function(n){return delete k.getData().models[t.objectId],delete k.getData().matrix[t.objectId],e()}}(this),this.detailSubView=this.requestSubView(this.DetailView,this.options),"function"==typeof(n=this.options).onOpenDetailViewInObjectModal&&n.onOpenDetailViewInObjectModal(this.detailSubView),this.$detail=this.detailSubView.$el.addClass("modal-detail"),"work"===this.objectType?(this.detailSubView.onOpen(),this.$el=this.$detail):this.$body.append(this.$detail),this},t.prototype.renderNavigations=function(){var e;if(this.options.showCursors)return this.navigationRoot=$('<div class="object-modal-navigation"></div>'),this.$body.addClass("with-nav").prepend(this.navigationRoot),this.requestReactView(this.navigationRoot.get(0),r,{placement:"top",goPrev:(e=this,function(){return e.goPrev()}),goNext:function(e){return function(){return e.goNext()}}(this)})},t.prototype.goPrev=function(){var e;return null!=(e=this.detailSubView)&&"function"==typeof e.goPrev?e.goPrev():void 0},t.prototype.goNext=function(){var e;return null!=(e=this.detailSubView)&&"function"==typeof e.goNext?e.goNext():void 0},t.prototype.renderNav=function(){var e;if(!1!==this.options.hasLink)return new Promise((e=this,function(t,n){return e.fetchObjectModel({success:function(r){return e.$el?t(r):n()},error:function(e){return n(e)}})})).then(function(e){return new Promise(function(t,n){var r;return(r=e.get("_projectId"))?p.fetchOne(0,r,{success:function(n){return t([e,n])},error:function(e){return n(e)}}):Promise.resolve([])})}).then(function(e){return function(t){var n,r,o;if(r=t[0],o=t[1])return n=e.getNavData(r,o),e.$body.addClass("with-nav").prepend(c(n))}}(this)).catch(function(e){if(e)return y(e)}),this},t.prototype.getNavData=function(e,t){var n,r,o,i;switch(n=[],o="/project/"+e.get("_projectId"),t&&(r=t.get("name")||"",n.push({url:""+o,title:""+tb_i18n.get("inbox.go.to.project")+r,type:"project"})),this.objectType){case"task":if(e.isSubtask())break;i=t.hasScrumAppEnabled()?o+"/"+g(e.get("_scenariofieldconfigId"),e.id):o+"/"+v(e.get("_tasklistId"),e.id),n.push({url:i,title:tb_i18n.get("inbox.go.to.task"),type:"task"});break;case"post":n.push({url:o+"/posts/post/"+e.id,title:tb_i18n.get("inbox.go.to.post"),type:"post"});break;case"event":n.push({url:o+"/events",title:tb_i18n.get("inbox.go.to.event"),type:"event"});break;case"entry":n.push({url:o+"/bookkeeping",title:tb_i18n.get("inbox.go.to.entry"),type:"entry"});break;case"testcase":n.push({url:o+"/testplan/"+e.get("_testplanId"),title:tb_i18n.get("inbox.go.to.testcase"),type:"testcase"})}return n},t.prototype.parseOptions=function(e){return null==e&&(e={}),s().then((t=this,function(n){var r,o,i,s;return(o=e.objectModel)?(r=e.objectId||o.id,i=e.objectType||o.get("objectType"),e._projectId||o.get("_projectId")):(r=e.objectId,i=e.objectType),t.DetailView=e.DetailView||n[i],t.objectId=r,t.objectType=i,(s=f.omit(e,["_projectId","objectType","objectId","DetailView","fullScreen"]))["_"+e.objectType+"Id"]=r,s[e.objectType+"Model"]=o,s=f.extend(s,{where:e.where||"object-modal",hasLink:!e.fullScreen&&e.hasLink,onObjectModalClose:e.fullScreen?null:t.remove.bind(t)}),t.options=s}));var t},t.prototype.fetchObjectModel=function(e){var t,n;switch(n=this.objectType,t=this.objectId,n){case"task":return d.fetch(t,e);case"event":return i.fetch(t.split("_")[0],e);case"post":return u.fetch(t,e);case"entry":return o.fetch(t,e);case"testcase":return h.fetch(t,e);default:return a.fetch(t,e)}},t.prototype.gtaUrlHandler=function(e){return b.gta.event({action:"open detail",control:"original content",type:$(e.target).data("type")})},t.prototype.remove=function(){var e,n,r;return"function"==typeof(e=this.options).onCloseDetailViewInObjectModal&&e.onCloseDetailViewInObjectModal(),"WindowView"===(null!=(r=this.parentView)?r.viewName:void 0)&&(this.parentView.close?this.parentView.close():"function"==typeof(n=this.parentView).remove&&n.remove()),t.__super__.remove.apply(this,arguments)},t}(),t.Constructor=l},PE0KiLUa:function(e,t,n){"use strict";n.r(t),n.d(t,"URLSync",function(){return s});var r=n("hkPM0sjX"),o=n("CxY0Mkc1"),i=n("QyjeWo4p"),s=function(){function e(e){var t=e.iframe,n=e.iframeOrigin;this.iframe=t,this.iframeOrigin=n}return e.prototype.parentMessageHandler=function(e){if((!this.iframeOrigin||e.origin===this.iframeOrigin)&&e.data&&"URL_SYNC/IFRAME_URL_UPDATE"===e.data.type&&e.data.newURL){var t=o.parse(location.href),n=i.parse(t.query);n.nextUrl=decodeURIComponent(e.data.newURL),"push"===e.data.mode?history.pushState({iframeURL:n.nextUrl},"",location.href.split("?")[0]+"?"+i.stringify(n)):history.replaceState({iframeURL:n.nextUrl},"",location.href.split("?")[0]+"?"+i.stringify(n))}},e.prototype.parentPopStateHandler=function(e){if(this.iframe.contentWindow)if(e.state&&e.state.iframeURL)this.iframe.contentWindow.postMessage({type:"URL_SYNC/PARENT_POP_STATE",newURL:e.state.iframeURL},this.iframeOrigin||"*");else if(!e.state){var t=i.parse(o.parse(location.href).query);this.iframe.contentWindow.postMessage({type:"URL_SYNC/PARENT_HASH_CHANGE",newURL:t.nextUrl},this.iframeOrigin||"*")}},e.prototype.init=function(){this.messageSubs=r.a.subscribe(this.parentMessageHandler.bind(this)),this.popstateSubs=r.b.subscribe(this.parentPopStateHandler.bind(this))},e.prototype.destroy=function(){this.messageSubs&&this.messageSubs.unsubscribe(),this.popstateSubs&&this.popstateSubs.unsubscribe()},e}()},PFZGUysW:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("TSYQbtd+"),i=n.n(o),s=n("tLZJUYWX"),a=n("q1tIBJhx"),c=n("qCWxDgLE"),l=n("rhK5Yt5v"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cxPrefix="project-grid-card",t}return r.d(t,e),t.prototype.renderProjectName=function(){var e=this.props.project;if(Object(l.h)(e))return null;var t=i()(this.cxPrefix+"__name",{hinted:!this.showSuspendedHint()});return a.createElement("span",{className:t,"data-title":e.name},e.name)},t.prototype.renderProjectStarHandler=function(){var e=this,t=this.props.project;if(Object(l.q)(t)||Object(l.n)(t)||Object(l.o)(t)||Object(l.p)(t))return null;return a.createElement("a",{className:i()(e.cxPrefix+"__hidden-handlers__item",e.cxPrefix+"__star-handler","hinted"),"data-title":s.get("star.project"),onClick:this.handleStarProjectClick},a.createElement("span",{className:"icon icon-star"}))},t.prototype.renderProjectEditHandler=function(){var e=this,t=this.props.project;if(Object(l.q)(t)||Object(l.n)(t))return null;return a.createElement("a",{className:i()(e.cxPrefix+"__hidden-handlers__item",e.cxPrefix+"__edit-handler","hinted"),"data-title":s.get("open.project.setting"),onClick:this.handleOpenProjectSettingClick},a.createElement("span",{className:"icon icon-cog"}))},t.prototype.renderProjectUnSuspendHandler=function(){var e=this,t=this.props.project;if(!(Object(l.q)(t)&&Object(l.j)(t)&&Object(l.k)(t)&&Object(l.c)(t)))return null;return a.createElement("a",{className:i()(e.cxPrefix+"__hidden-handlers__item",e.cxPrefix+"__unsuspend-handler","hinted"),"data-title":s.get("project.setting.handler.unsuspend"),onClick:this.handleUnSuspendProjectClick},a.createElement("span",{className:"icon icon-putback"}))},t.prototype.showSuspendedHint=function(){var e=this.props.project;return e.suspendedAt&&e.suspendedBy},t.prototype.renderProjectSuspendHandler=function(){var e=this,t=this.props.project;if(!(Object(l.m)(t)&&Object(l.n)(t)&&Object(l.c)(t)))return null;return a.createElement("a",{className:i()(e.cxPrefix+"__hidden-handlers__item",e.cxPrefix+"__suspend-handler"),"data-title":s.get("project.setting.handler.suspend"),onClick:this.handleSuspendProjectClick},a.createElement("span",{className:"icon icon-archive"}))},t.prototype.renderProjectUnArchiveHandler=function(){var e=this,t=this.props.project;if(!(Object(l.n)(t)&&Object(l.m)(t)&&Object(l.k)(t)&&Object(l.a)(t)))return null;return a.createElement("a",{className:i()(e.cxPrefix+"__hidden-handlers__item",e.cxPrefix+"__archive-handler","hinted"),"data-title":s.get("project.setting.handler.unarchive"),onClick:this.handleUnArchiveProjectClick},a.createElement("span",{className:"icon icon-putback"}))},t.prototype.renderProjectArchiveHandler=function(){var e=this,t=this.props.project;if(!(Object(l.q)(t)&&Object(l.j)(t)&&Object(l.a)(t)))return null;return a.createElement("a",{className:i()(e.cxPrefix+"__hidden-handlers__item",e.cxPrefix+"__archive-handler"),"data-title":s.get("project.setting.handler.archive"),onClick:this.handleArchiveProjectClick},a.createElement("span",{className:"icon icon-trash"}))},t.prototype.renderProjectDestoryHandler=function(){var e=this,t=this.props.project;if(!(Object(l.m)(t)&&Object(l.n)(t)&&Object(l.c)(t)))return null;return a.createElement("a",{className:i()(e.cxPrefix+"__hidden-handlers__item",e.cxPrefix+"__destory-handler","hinted"),"data-title":s.get("project.setting.handler.delete"),onClick:this.handleDestoryProjectClick},a.createElement("span",{className:"icon icon-trash"}))},t.prototype.renderProjectHiddenHandlers=function(){return!this.isAlienProject()&&a.createElement("span",{className:this.cxPrefix+"__hidden-handlers"},this.renderProjectUnSuspendHandler(),this.renderProjectUnArchiveHandler(),this.renderProjectSuspendHandler(),this.renderProjectDestoryHandler(),this.renderProjectArchiveHandler(),this.renderProjectEditHandler(),this.renderProjectStarHandler())},t.prototype.renderAlienHandlers=function(){return this.isAlienProject()&&a.createElement("div",{className:this.cxPrefix+"__hidden-handlers"},this.renderProjectEditHandler(),this.renderProjectStarHandler())},t.prototype.renderProjectUnstarHandler=function(){var e=this,t=this.props.project;if(Object(l.q)(t)||Object(l.n)(t)||Object(l.l)(t))return null;return a.createElement("a",{className:i()(e.cxPrefix+"__unstar-handler","hinted"),"data-title":s.get("unstar.project"),onClick:this.handleUnstarProjectClick},a.createElement("span",{className:"icon icon-star"}))},t.prototype.renderProjectDescription=function(){var e=this,t=this.props.project;if(Object(l.f)(t))return null;return a.createElement("span",{className:i()(e.cxPrefix+"__description",{hinted:!e.showSuspendedHint()}),"data-title":t.description},t.description)},t.prototype.renderProjectVisibility=function(){var e=this.props.project;if(Object(l.i)(e))return null;var t=Object(l.d)(e);return t?a.createElement("span",{className:this.cxPrefix+"__visibility"},t?a.createElement("span",{className:this.cxPrefix+"__visibility__text"},t):null):null},t.prototype.render=function(){var e,t,n,r=this;return a.createElement("div",{className:(e=r.props,t=e.className,n=e.project,i()(r.cxPrefix+"__component",n.canEnter?r.cxPrefix+"__can-enter":null,t)),onClick:this.handleEnterProjectClick,style:function(){var e=r.props.project;return Object(l.g)(e)?{}:{backgroundImage:"url("+e.logo+")"}}()},a.createElement("div",{className:this.cxPrefix+"__header"},a.createElement("div",{className:this.cxPrefix+"__header__top"},this.renderProjectName(),this.renderProjectHiddenHandlers(),this.renderAlienHandlers(),this.renderProjectUnstarHandler()),a.createElement("div",{className:this.cxPrefix+"__header__bottom"},this.renderProjectDescription())),a.createElement("div",{className:this.cxPrefix+"__footer"},this.renderProjectVisibility()),a.createElement("div",{className:this.cxPrefix+"__shadow"}))},t}(c.AbstractProjectGroupItem);n.d(t,"a",function(){return u})},PJIJuxhE:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";e.hasHeader&&(o+=" <header> "+r(e.title)+" </header>");var i=e.items;if(i)for(var s,a=-1,c=i.length-1;a<c;){o+=' <li class="link" data-id="'+(s=i[a+=1])._id+'" data-linkedid="'+r(s._linkedId)+'"> <a class="link-head" href="'+r(s.data.url)+'" target="_blank"> <div class="link-icon-wrap"> <span class="icon icon-jinshuju"></span> </div> <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main">  ';var l=s.data.entry?tb_i18n.get("jinshuju.data.serial_number",s.data.entry.serial_number):s.title;o+=' <span class="title-name" title="'+r(l)+'"> '+r(l)+" </span> </div> ";var u=s.createTime,p=u.dateString+" "+u.timeFormatString;o+=' <div class="link-title-header-rest" title="'+r(p)+'"> '+r(p)+" </div> </div>  ",s.data.entry&&(o+=' <div class="link-title-footer"> '+s.data.entry.content+' </div> <div class="link-title-footer"> '+tb_i18n.get("jinshuju.form.title",s.data.name)+" </div> "),o+=" </div> </a> ",s.objectlinkDel&&(o+=' <a class="link-menu-handler icon icon-chevron-down" data-id="'+s._id+'" ></a> '),o+=" </li>"}return o}},PL5VA9Qq:function(e,t,n){e.exports={"testplan-configure-action":"testplan-configure-action__3YY_","add-action-container":"add-action-container__1q_t"}},PMFMoAaP:function(e,t){},PMRoZa2N:function(e,t,n){e.exports={"task-executor":"task-executor__1uQM","task-executor__avatar":"task-executor__avatar__2xoQ","task-executor__name":"task-executor__name__3ltz"}},"PMZxl+Cy":function(e,t,n){var r,o={}.hasOwnProperty;r=n("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="search",t.prototype.urlRoot="search",t.prototype.initialize=function(e,n){return n||(n={}),n.bindByMatrix=!1,t.__super__.initialize.apply(this,arguments)},t}()},PQO7NpRc:function(e,t,n){e.exports={"custom-field-not-in-scenario":"custom-field-not-in-scenario__2plv"}},PSYzXKAW:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("GESwhXbR"),l=n("gh8QIhMV"),u=n("4c1CS0b3"),p=n("s0r7VfKc"),d=n("oRqJmROU"),h=n("bvmrLhnu"),m={get _executorId(){return a.a.get("executor")},get startDate(){return a.a.get("startDate")},get dueDate(){return a.a.get("table.task.dueDate")},get recurrence(){return a.a.get("task.copy.recurrence")},get reminder(){return a.a.get("task.copy.reminder")},get subtaskCount(){return a.a.get("subtask")},get dependency(){return a.a.get("task.copy.dependency")},get subtaskDependency(){return a.a.get("task.copy.subtask.dependency")},get involveMembers(){return a.a.get("table.task.involveMembers")},get objectlinksCount(){return a.a.get("link.contents")},get visible(){return a.a.get("visible.setting")}},f={get note(){return a.a.get("note")},get priority(){return a.a.get("priority")},get tag(){return a.a.get("tags")},get worktimes(){return a.a.get("worktime")},get storyPoint(){return"Story Points"},get taskProgress(){return a.a.get("taskProgress")}},g=function(e,t){switch(t){case"note":return"string"==typeof e.note?Boolean(e.note):Object(d.c)(e.note);case"priority":return Boolean(e.priority);case"tag":return Boolean(e.tagIds.length);case"worktimes":return Boolean(e.workTime.totalTime||e.workTime.usedTime);case"storyPoint":return Object(d.c)(e.storyPoint);case"taskProgress":return Boolean(e.progress)}},v=function(e){var t=e.selectedProject,n=e.selectedTasklist,o=e.selectedStage,i=e.selectedScenarioField,s=e.selectedTaskflowStatus;return t?Object(h.isNormal)(t)&&n&&o?{validated:{selectedTasklist:n,selectedStage:o}}:Object(h.isTaskflowEnabled)(t)&&s&&i&&(Object(h.isTasklistIgnored)(t)||n)?{validated:r.a({selectedTaskflowStatus:s,selectedScenarioField:i},Object(h.isTasklistIgnored)(t)?{}:{selectedTasklist:n})}:{}:{hasNoProject:!0}},b=n("HgMABPdd"),y=n("a+N5u/Cl"),k=n.n(y),_=n("sa1Ed382"),w=n("T6KpLPMz"),C=n("12XtBL+h"),S=function(e){function t(t){var n=e.call(this,t)||this;return n.initLocator(),n}return r.d(t,e),t.prototype.initLocator=function(){var e=this.props,t=e.hideIndieEntry,n=void 0!==t&&t,r=e.organizationId;Object(C.b)({selectedProject:this.props.selectedProject,selectedTasklist:this.props.selectedTasklist,selectedStage:this.props.selectedStage,selectedSprint:this.props.selectedSprint,selectedScenarioField:this.props.selectedScenarioField,selectedTaskflowStatus:this.props.selectedTaskflowStatus,organizationId:r,tips:this.props.tips,hideIndieEntry:n})},t.prototype.render=function(){return i.a.createElement(C.a,{acceptedStatusKinds:w.TASK_VALID_STATUS_KINDS.UNDONE,doLink:!1,doLinked:!1,optionalType:"scenarioConfigs",tips:"",showLinkOptions:!1,onSubmit:this.props.onSubmit})},t}(i.a.PureComponent),E=n("VXsmYIYU"),T=function(e){function t(t){var n=e.call(this,t)||this;return n.onClickDropdownTrigger=function(){n.setState({dropdownOpened:!n.state.dropdownOpened})},n.onDropdownVisibleChange=function(e){n.setState({dropdownOpened:e})},n.onSubmit=function(e){n.setState({selectedProject:e.selectedProject,selectedTasklist:e.selectedTasklist,selectedStage:e.selectedStage,selectedScenarioField:e.selectedScenarioField,selectedTaskflowStatus:e.selectedTaskflowStatus,selectedSprint:e.selectedSprint,dropdownOpened:!n.state.dropdownOpened}),n.props.onUpdateTaskLocatorState(e)},n.getTasklistEnabled=function(){var e=n.state.selectedProject;if(!e)return!1;var t=k.a.pluck(e.applications||[],"name");return k.a.contains(t,"tasklist")&&_.applications.checkIsAppOnline("tasklist")},n.state={dropdownOpened:!1,selectedProject:t.selectedProject,selectedTasklist:t.selectedTasklist,selectedStage:t.selectedStage,selectedSprint:t.selectedSprint,selectedScenarioField:t.selectedScenarioField,selectedTaskflowStatus:t.selectedTaskflowStatus},t.onUpdateTaskLocatorState(k.a.omit(n.state,"dropdownOpened")),n}return r.d(t,e),t.prototype.renderProjectLogo=function(e){var t=e?{backgroundImage:"url("+e+")"}:{};return i.a.createElement("div",{className:E["project-logo"],style:t},!e&&i.a.createElement(c.Icon,{name:"inbox2"}))},t.prototype.renderNamesEle=function(e){var t=i.a.createElement("span",null," · ");return e.map(function(n,r){return r===e.length-1?i.a.createElement("span",{key:r},n):i.a.createElement(i.a.Fragment,{key:r},i.a.createElement("span",null,n),t)})},t.prototype.getLocatorInfo=function(){var e=this.state,t=e.selectedProject,n=e.selectedSprint,r=v(this.state).validated,o=r?this.renderProjectLogo(t.logo):this.renderProjectLogo(),i=r?k.a.compact([t.name,this.getTasklistEnabled()&&r.selectedTasklist&&r.selectedTasklist.title,r.selectedStage&&r.selectedStage.name,Object(h.isSprintEnabled)(t)&&n&&n.name,r.selectedScenarioField&&r.selectedScenarioField.name,r.selectedTaskflowStatus&&r.selectedTaskflowStatus.name]):[a.a.get("project.selector.project.unset")];return{namesEle:this.renderNamesEle(i),projectLogo:o}},t.prototype.renderTaskLocatorTrigger=function(){var e=this.getLocatorInfo(),t=e.namesEle,n=e.projectLogo;return i.a.createElement("div",{className:E["task-locator-trigger"],onClick:this.onClickDropdownTrigger},n,i.a.createElement("div",{className:E["locator-name"]},t),i.a.createElement(c.Icon,{name:"chevron-down"}))},t.prototype.renderTaskLocatorContent=function(){var e=k.a.omit(this.state,"dropdownOpened");return i.a.createElement("div",{className:E["task-locator-content"]},i.a.createElement(S,r.a({},e,{hideIndieEntry:this.props.hideIndieEntry,organizationId:this.props.organizationId,tips:this.props.tips,onSubmit:this.onSubmit})))},t.prototype.render=function(){return i.a.createElement(c.Dropdown,{className:E["task-locator-dropdown"],content:this.renderTaskLocatorContent(),nested:!0,placement:"bottomLeft",persistence:!0,opened:this.state.dropdownOpened,onVisibleChange:this.onDropdownVisibleChange},this.renderTaskLocatorTrigger())},t}(i.a.PureComponent),I=n("V6edIaEd"),M=n("uxrOLOjG"),j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChangeCheckbox(t.props.taskProp,e)},t.onClickItem=function(){t.props.onChangeCheckbox(t.props.taskProp,!t.props.checked)},t}return r.d(t,e),t.prototype.render=function(){return i.a.createElement("div",{className:M["task-checkbox-item"],onClick:this.onClickItem},i.a.createElement(c.Checkbox,{checked:this.props.checked,onChange:this.onChange,className:M["task-checkbox"]}),i.a.createElement("span",{className:M.title},this.props.title))},t}(i.a.PureComponent),P=function(e){function t(t){var n=e.call(this,t)||this;return n.initState={scenarioFieldConfig:null,officialProps:[],checkedOfficialProps:[],customFieldLinkProps:[],checkedCustomFieldIds:[]},n.onChangeOfficialProps=function(e,t){var r=n.state.checkedOfficialProps,o=t?r.concat(e):k.a.without(r,e);n.setState({checkedOfficialProps:o}),n.props.onUpdateScenarioOfficialProps(o)},n.onChangeCustomProps=function(e,t){var r=n.state.checkedCustomFieldIds,o=t?r.concat(e):k.a.without(r,e);n.setState({checkedCustomFieldIds:o}),n.props.onUpdateCustomFieldIds(o)},n.isIndieTask=!n.props.task._projectId,n.state=r.a({},n.initState),n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;if(this.isIndieTask)this.setIndieTaskInitValues();else{var t=this.props.task._projectId,n=this.props.task._scenariofieldconfigId;this.fetch$=u.Observable.forkJoin(p.default.getCustomFieldLinks(t,"application").values(),p.default.getScenarioFieldConfigs(t,"task",{withTaskflowstatus:!0}).take(1)).subscribe(function(t){var o=r.f(t,2),i=o[0],s=o[1],a=s.find(function(e){return e._id===n});a||(a=s.find(function(e){return e.isDefault})),e.setInitValues(i,a)})}},t.prototype.componentWillUnmount=function(){this.fetch$&&this.fetch$.unsubscribe()},t.prototype.setIndieTaskInitValues=function(){var e=this.props.task,t=["note","priority","worktimes"].filter(function(t){return g(e,t)});this.setState({officialProps:t,checkedOfficialProps:t}),this.props.onUpdateScenarioOfficialProps(t)},t.prototype.setInitValues=function(e,t){if(t){var n=this.getOfficialHasValueTypes(t)||[],r=this.getCustomFieldLinksHasValue(e,t),o=r.map(function(e){return e._customfieldId});this.setState({scenarioFieldConfig:t,customFieldLinkProps:r,checkedCustomFieldIds:o,officialProps:n,checkedOfficialProps:n}),this.props.onUpdateScenarioOfficialProps(n),this.props.onUpdateCustomFieldIds(o)}else this.setState(this.initState)},t.prototype.getOfficialHasValueTypes=function(e){var t=this,n=["rating","sprint","customfield"];return e.scenariofields.map(function(e){return e.fieldType}).filter(function(e){return-1===n.indexOf(e)}).filter(function(e){return g(t.props.task,e)})},t.prototype.getCustomFieldLinksHasValue=function(e,t){var n=this,r=t.scenariofields.filter(function(e){return"customfield"===e.fieldType}).map(function(t){var r=t._customfieldId;return n.getCustomFieldLinkHasValue(r,e)});return k.a.compact(r)},t.prototype.getCustomFieldLinkHasValue=function(e,t){var n=this.props.task.customfields.find(function(t){return t._customfieldId==e}),r=t.find(function(t){return t._customfieldId===e});return n&&r&&this.canForkCustomField(r)&&Object(I.checkCustomFieldHasValue)(r,n)?r:null},t.prototype.canForkCustomField=function(e){return!(e&&"commongroup"===e.type&&("story"===e.subtype||"bug"===e.subtype))},t.prototype.renderOfficialProp=function(e){var t=this.state.checkedOfficialProps.indexOf(e)>-1,n=f[e];return i.a.createElement(j,{key:e,taskProp:e,title:n,checked:t,onChangeCheckbox:this.onChangeOfficialProps})},t.prototype.renderCustomProp=function(e){var t=this.state.checkedCustomFieldIds.indexOf(e._customfieldId)>-1;return i.a.createElement(j,{key:e._customfieldId,taskProp:e._customfieldId,title:e.name,checked:t,onChangeCheckbox:this.onChangeCustomProps})},t.prototype.renderNormalTaskContent=function(){var e=this,t=this.state,n=t.officialProps,r=t.customFieldLinkProps,o=t.scenarioFieldConfig;return o?o.scenariofields.map(function(t){if("customfield"===t.fieldType){var o=r.find(function(e){return e._customfieldId===t._customfieldId});return o?e.renderCustomProp(o):null}var i=t.fieldType;return n.indexOf(i)>-1?e.renderOfficialProp(i):null}):null},t.prototype.renderIndieTaskContent=function(){var e=this;return this.state.officialProps.map(function(t){return e.renderOfficialProp(t)})},t.prototype.render=function(){return i.a.createElement(i.a.Fragment,null,this.isIndieTask&&this.renderIndieTaskContent(),!this.isIndieTask&&this.renderNormalTaskContent())},t}(i.a.PureComponent),x=function(e){function t(t){var n=e.call(this,t)||this;n.onChangeCheckbox=function(e,t){var r=n.state.checkedOwnProps,o=t?r.concat(e):k.a.without(r,e);n.setState({checkedOwnProps:o}),n.props.onUpdateTaskOwnProps(o)};var r=Object.keys(m).filter(function(e){return n.getCanCopyProp(e)}),o=["_executorId","startDate","dueDate","subtaskCount","involveMembers","objectlinksCount","visible","dependency","subtaskDependency"].filter(function(e){return n.getCanCopyProp(e)});return n.state={ownProps:r,checkedOwnProps:o},t.onUpdateTaskOwnProps(o),n}return r.d(t,e),t.prototype.getCanCopyProp=function(e){var t=this.props,n=t.task,r=t.canCopySubtask,o=void 0===r||r,i=!n||function(e,t){switch(t){case"_executorId":return Boolean(e._executorId);case"startDate":return Boolean(e.startDate);case"dueDate":return Boolean(e.dueDate);case"recurrence":return Boolean(e.recurrence&&e.recurrence.length);case"reminder":return e.reminder.rules.length>0;case"subtaskCount":return e.subtaskCount.total>0;case"involveMembers":return e.involveMembers.length>0;case"objectlinksCount":return e.objectlinksCount>0;case"visible":return"involves"===e.visible;case"dependency":return!1;case"subtaskDependency":return e.subtaskCount.total>0}}(n,e),s=!!o||"subtaskCount"!==e,a=!this.props.isBatchCopy||"subtaskDependency"!==e;return i&&s&&a},t.prototype.renderContents=function(){var e=this,t=this.state,n=t.ownProps,r=t.checkedOwnProps;return n.map(function(t){var n=m[t],o=r.indexOf(t)>-1;return i.a.createElement(j,{key:t,title:n,taskProp:t,checked:o,onChangeCheckbox:e.onChangeCheckbox})})},t.prototype.render=function(){return i.a.createElement(i.a.Fragment,null,this.renderContents())},t}(i.a.PureComponent),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.key="withAllSfcFields",t.onChangeCheckbox=function(e,n){t.props.onUpdateTaskBatchScenario(n)},t}return r.d(t,e),t.prototype.render=function(){var e=a.a.get("task.copy.batch.scenario");return i.a.createElement(j,{key:this.key,title:e,taskProp:this.key,checked:this.props.checked,onChangeCheckbox:this.onChangeCheckbox})},t}(i.a.PureComponent),O=n("HYobN8SQ"),R=n.n(O),D=function(){function e(e,t,n){var r="task_copy_"+t+"_"+(n||"personal");this.initState=e,this.localCacheId=_.user.id,this.localCache=R.a.namespace("temp").namespace(r)}return e.prototype.getValue=function(){return this.localCache.get(this.localCacheId,this.initState)},e.prototype.setValue=function(e){this.localCache.set(this.localCacheId,e)},e.prototype.setPartialValue=function(e){var t=this.getValue(),n=Object.assign({},t,e);this.setValue(n)},e.prototype.clear=function(){this.localCache.remove(this.localCacheId)},e}(),L=n("EDUzVJsM"),z=function(e){function t(t){var n=e.call(this,t)||this;n.modalStyle={padding:0},n.taskLocatorData=null,n.taskOwnProps=[],n.taskOfficialProps=[],n.taskCustomFieldIds=[],n.onVisibleChange=function(e){n.setState({modalOpened:e}),"function"==typeof n.props.onModalVisibleChange&&n.props.onModalVisibleChange(e)},n.onToggleLink=function(e){var t,r=((t={})[e]=!n.state[e],t);n.setState(r),n.linkerCache.setPartialValue(r)},n.onTaskContentChange=function(e){var t=e.currentTarget.value;n.setState({taskContent:t},function(){n.setState({buttonEnabled:n.validateCopyData()})})},n.onUpdateTaskBatchScenario=function(e){n.setState({withAllSfcFields:e})},n.onUpdateTaskLocatorState=function(e){n.taskLocatorData=e,n.setState({buttonEnabled:n.validateCopyData()})},n.onUpdateTaskOwnProps=function(e){n.taskOwnProps=e},n.onUpdateScenarioOfficialProps=function(e){n.taskOfficialProps=e},n.onUpdateCustomFieldIds=function(e){n.taskCustomFieldIds=e},n.onCopy=function(){var e=r.h(n.taskOwnProps,n.taskOfficialProps).map(function(e){return n.transferToServerSavedProp(e)}),t={content:n.state.taskContent,doLink:n.state.doLink,doLinked:n.state.doLinked,taskLocatorData:n.taskLocatorData,customfieldIds:n.taskCustomFieldIds,copyFields:e,withAllSfcFields:n.state.withAllSfcFields};n.locatorCache.setValue(n.taskLocatorData),n.props.onSubmit(t),n.setState({modalOpened:!1})},n.initCacheManager();var o=n.linkerCache.getValue();return n.isBatchCopy=!t.task,n.state={modalOpened:t.modalOpened,taskContent:t.task&&t.task.content||"",buttonEnabled:!1,doLink:o.doLink,doLinked:o.doLinked,withAllSfcFields:!0,isSyncingCacheData:!0},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.syncCacheData()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=e.modalOpened;t!==this.state.modalOpened&&(this.setState({modalOpened:t}),t&&this.syncCacheData()),this.isBatchCopy=!e.task},t.prototype.componentWillUnmount=function(){this.cancelSyncCacheData()},t.prototype.initCacheManager=function(){var e={selectedProject:this.props.project||null,selectedTasklist:this.props.tasklist||null,selectedStage:this.props.stage||null,selectedSprint:null,selectedScenarioField:null,selectedTaskflowStatus:null},t=this.props.organizationId,n=this.isBatchCopy?"batch-copy-locator":"single-copy-locator";this.locatorCache=new D(e,n,t),this.linkerCache=new D({doLink:!1,doLinked:!1},"linker",t)},t.prototype.syncCacheData=function(){var e=this,t=this.locatorCache.getValue();this.cancelSyncCacheData(),this.setState({isSyncingCacheData:!0}),this.syncCacheDataSubscription=function(e){var t=e.selectedProject&&e.selectedProject._id,n=t?p.default.getProject(t).values().map(function(e){return r.f(e,1)[0]}):u.Observable.of(null);return u.Observable.forkJoin(n).map(function(t){var n=r.f(t,1)[0];return n=n&&Object(h.canUseTaskFeature)(n)?n:null,r.a({},e,{selectedProject:n})})}(t).subscribe(function(t){e.locatorCache.setValue(t),e.setState({isSyncingCacheData:!1})},function(t){Object(l.throwError)(t),e.setState({isSyncingCacheData:!1})})},t.prototype.cancelSyncCacheData=function(){this.syncCacheDataSubscription&&this.syncCacheDataSubscription.unsubscribe()},t.prototype.validateCopyData=function(){if(!this.taskLocatorData)return!1;var e=v(this.taskLocatorData),t=e.validated,n=e.hasNoProject;return this.isBatchCopy?Boolean(t):!(!this.state.taskContent.trim()||!(n||t))},t.prototype.transferToServerSavedProp=function(e){switch(e){case"tag":return"tagIds";case"worktimes":return"workTime";case"taskProgress":return"progress";case"subtaskCount":return"subtask";case"objectlinksCount":return"objectlink";case"subtaskDependency":return"dependency";default:return e}},t.prototype.renderConfirmButton=function(){var e=!this.state.buttonEnabled;return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.Separator,null),i.a.createElement("div",{className:L["button-wrapper"],onClick:this.onCopy},i.a.createElement(c.Button,{disabled:e},a.a.get("copy"))))},t.prototype.renderHintElement=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:L["task-copy-hint"]},a.a.get("task.copy.executor.hint")),i.a.createElement(c.Separator,null))},t.prototype.renderTaskProps=function(){var e=""+L["task-copy-content-wrapper"],t=i.a.createElement(x,{task:this.props.task,canCopySubtask:this.props.canCopySubtask,isBatchCopy:this.isBatchCopy,onUpdateTaskOwnProps:this.onUpdateTaskOwnProps}),n=!this.isBatchCopy&&i.a.createElement(P,{task:this.props.task,onUpdateScenarioOfficialProps:this.onUpdateScenarioOfficialProps,onUpdateCustomFieldIds:this.onUpdateCustomFieldIds}),r=this.isBatchCopy&&i.a.createElement(N,{checked:this.state.withAllSfcFields,onUpdateTaskBatchScenario:this.onUpdateTaskBatchScenario});return i.a.createElement("div",{className:e},i.a.createElement("div",{className:L["task-copy-subtitle"]},a.a.get("copy.contents")),i.a.createElement("div",{className:L["task-copy-content"]},t,n,r,this.renderHintElement()))},t.prototype.renderLinkChecker=function(){var e=L["task-copy-content-wrapper"]+" task-link-checkers";return this.props.showLinkOptions&&i.a.createElement("div",{className:e},i.a.createElement("div",{className:L["task-copy-subtitle"]},a.a.get("update.reminders")),i.a.createElement("div",{className:L["task-copy-content"]},i.a.createElement(b.a,{className:L["link-checker"],doLink:this.state.doLink,doLinked:this.state.doLinked,onToggleLink:this.onToggleLink})))},t.prototype.renderTaskLocator=function(){var e=L["task-copy-content-wrapper"]+" task-locator-wrapper",t=this.locatorCache.getValue(),n=this.state.isSyncingCacheData?i.a.createElement(c.Loading,{className:L["task-copy-content-loading"]}):i.a.createElement(T,{organizationId:this.props.organizationId,hideIndieEntry:this.props.hideIndieEntry,tips:this.props.tips,selectedProject:t.selectedProject,selectedTasklist:t.selectedTasklist,selectedStage:t.selectedStage,selectedSprint:t.selectedSprint,selectedScenarioField:t.selectedScenarioField,selectedTaskflowStatus:t.selectedTaskflowStatus,onUpdateTaskLocatorState:this.onUpdateTaskLocatorState});return i.a.createElement("div",{className:e},i.a.createElement("div",{className:L["task-copy-subtitle"]},a.a.get("copyTo")),i.a.createElement("div",{className:L["task-copy-content"]},n))},t.prototype.renderTaskTitle=function(){var e=L["task-copy-content-wrapper"]+" task-content-wrapper";return!this.isBatchCopy&&i.a.createElement("div",{className:e},i.a.createElement("div",{className:L["task-copy-subtitle"]},a.a.get("task.content")),i.a.createElement("div",{className:L["task-copy-content"]},i.a.createElement("input",{className:"form-control",value:this.state.taskContent,onChange:this.onTaskContentChange})))},t.prototype.render=function(){return i.a.createElement(c.Modal,{className:"dls-modal-outer-selector",title:a.a.get("task.menu.copy"),titleCls:L["task-copy-title"],titlePosition:"center",bodyStyle:this.modalStyle,width:600,opened:this.state.modalOpened,onVisibleChange:this.onVisibleChange},i.a.createElement("div",{className:L["task-copy"]},this.renderTaskTitle(),this.renderTaskLocator(),this.renderTaskProps(),this.renderLinkChecker(),this.renderConfirmButton()))},t}(i.a.PureComponent);n.d(t,"TaskCopy",function(){return z})},PVLVtUMG:function(e,t,n){"use strict";n.r(t);var r=n("UIdRF/8X");for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);var i=n("7h4K6rhl");n.d(t,"StatusCheckboxTaskflow",function(){return i.a});var s=n("PWc0zaan");n.d(t,"StatusCheckboxGeneric",function(){return s.a});var a=n("ByToORLB");n.d(t,"StatusTodoboxTaskflow",function(){return a.a});var c=n("d9XPBKXd");n.d(t,"StatusTodoboxGeneric",function(){return c.a});var l=n("Izk6vNZO");n.d(t,"StatusLabel",function(){return l.a})},PWc0zaan:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR"),l=n("sd8NNwpY"),u=function(e){var t=e.className,n=e.kind,s=e.size,u=e.fixedWidth,p=e.muted,d=e.disabled,h=e.locked,m=r.g(e,["className","kind","size","fixedWidth","muted","disabled","locked"]),f=l["status-checkbox-generic"],g=a()(f,t,n,s,{"fixed-width":u,muted:p,disabled:d,locked:h}),v="end"===n?"checkbox-checked":"checkbox",b=Object(o.useCallback)(function(t){e.muted||(e.disabled||e.locked?t.stopPropagation():e.onClick&&e.onClick(t))},[e.muted,e.disabled,e.locked,e.onClick]);return i.a.createElement("span",r.a({},m,{className:g,onClick:b,"data-role":"status-checkbox-generic"}),i.a.createElement("span",{className:"icon-box"},i.a.createElement(c.Icon,{name:v,className:"icon"})),i.a.createElement("span",{className:"text"},e.title))};u.defaultProps={size:"middle"}},PbcjBR5w:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("4c1CS0b3"),i=n("3eMzznN/"),s=n("3nOnSD6h"),a=n("BsTK5jZO"),c=n("IssmDVnT"),l=(n("r8ayFxb7"),n("KqDDC1nH")),u=(n("ctsD9mWH"),n("fB8F65SE")),p=n("s0r7VfKc"),d=n("sa1Ed382"),h=n("uELMT0Ti"),m=n("4h4mpi5f"),f=n("7RZqXtpT"),g=n("OmupbwLD");var v=function(e){function t(t,n,o,i){var s=i.eventDetailView,a=r.g(i,["eventDetailView"]),l=e.call(this,t,n,d.user.id,a)||this;return l.commit=function(e){return p.default.fetch.updateEventInvolveMembers(l.event._id,e).map(function(e){return e.involveMembers}).do(function(e){!function(e){if(c.EventSDK.isRecurrent(l.event)){var t=l.event._sourceId;u.mockMessage(t,":change:event/"+t,{involveMembers:e})}else{var n=l.event._id;u.mockMessage(n,":change:event/"+n,{involveMembers:e})}}(e)})},l.event=o,l.eventDetailView=s,l}return r.d(t,e),t.prototype.confirmAndCommit=function(e){var t,n=this,r=Boolean(e),i=this.preparePayload(r);return i?r?(e(i),t=o.Observable.of(null)):t=c.EventSDK.isRecurrent(this.event)?function(e){var t,n=e.addInvolvers,r=e.delInvolvers,i=n?n.length:0,s=r?r.length:0;t=i>0&&0===s?f:0===i&&s>0?h:m,console.assert(t);var a=new g;return o.Observable.create(function(e){return a.open(t,{onConfirm:function(t){e.next(t),e.complete()},onCancel:function(){e.error("abort")}}),function(){a.remove()}})}(i).do(function(e){var t=Object(l.toBackboneModel)(Object(l.eventUseOriginId)(n.event));n.eventDetailView?(n.eventDetailView.resetView(),t.updateEventMember(e,i).then(function(e){n.eventDetailView.resetModel(e).refreshView({checkEventConflictOnOpen:!0})})):t.updateEventMember(e,i)}):this.commit(i):t=o.Observable.of(null),t.do(function(){return n.stagedEdits.commit()}).catch(function(e){return n.reset(),n.clear(),o.Observable.of(null)})},t}(s.InvolverManagement);n.d(t,"createDetailObjectInvolverManagement",function(){return y}),n.d(t,"Involvers",function(){return _});var b=n("sa1Ed382");function y(e,t,n,r){return void 0===r&&(r={}),"event"===n.objectType?new v(e,t,n,r):new k(e,t,n,r)}var k=function(e){function t(t,n,r,o){var s=e.call(this,t,n,b.user.id,o)||this;return s.commit=function(e){var t=s.detailObject,n=t.objectType,r=t._id;return p.default.fetch.put(Object(i.pluralizeObjectType)(n)+"/"+r+"/involveMembers",e)},s.detailObject=r,s}return r.d(t,e),t.prototype.confirmAndCommit=function(e){var t,n=this,r=Boolean(e),i=this.preparePayload(r);return i?r?(e(i),t=o.Observable.of(null)):t=this.commit(i):t=o.Observable.of(null),t.do(function(){return n.stagedEdits.commit()}).catch(function(e){return n.reset(),n.clear(),o.Observable.of(null)})},t}(s.InvolverManagement),_=function(){function e(e){this.dict=this.norm(e)}return e.prototype.norm=function(e,t){return e.map(function(e){return"team"===e.type||"team"===t?a.InvolverInput.teamAsInvolver(e):"group"===e.type||"group"===t?a.InvolverInput.groupAsInvolver(e):"custom"===e.type||"custom"===t?a.InvolverInput.customAsInvolver(e):a.InvolverInput.userAsInvolver(e)}).reduce(function(e,t){return e.set(t.id,t)},new Map)},e.prototype.getObjs=function(e){var t,n,o=[];try{for(var i=r.i(this.dict),s=i.next();!s.done;s=i.next()){var a=r.f(s.value,2)[1];e&&a.type!==e||o.push(a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o},e.prototype.getIds=function(e){var t,n,o=[];try{for(var i=r.i(this.dict),s=i.next();!s.done;s=i.next()){var a=r.f(s.value,2),c=a[0],l=a[1];e&&l.type!==e||o.push(e?c:{id:l.id,type:l.type})}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o},e.prototype.reset=function(e,t){var n,o,i,s,a=this.norm(e,t);try{for(var c=r.i(a),l=c.next();!l.done;l=c.next()){var u=r.f(l.value,2),p=u[0],d=u[1];this.dict.set(p,d)}}catch(g){n={error:g}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}try{for(var h=r.i(this.dict),m=h.next();!m.done;m=h.next()){var f=r.f(m.value,2);p=f[0],d=f[1];a.has(p)||t&&d.type!==t||this.dict.delete(p)}}catch(v){i={error:v}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}},e}()},"Pe+z3yGm":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("NvRnMquD"),l=n("1gEXmjU5"),u=function(e){var t=i.a.createElement(l.TaskExecutor,r.a({},e));return e.hideFieldIconName?t:i.a.createElement(c.a,{icon:"user",name:a.a.get("task.detail.executor")},t)};n.d(t,"TaskExecutor",function(){return u})},Pf3aS65Q:function(e,t){e.exports=function(e){return'<ul class="flex-static tasklists-list thin-scroll"></ul><ul class="flex-static task-scenario-list thin-scroll"></ul><ul class="flex-fill flex-horiz tasks-list-wrapper"></ul>'}},PhHT4GjU:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;s=n("a+N5u/Cl"),i=n("vmWJWrVe"),o=n("qHH6+g6Q"),r=n("ZnBpSyZV"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="TagGroupListView",t.prototype.className="tag-group-list-view",t.prototype.events={"click .tag-group-title":"onGroupToggled"},t.prototype.initialize=function(e){return this.tagsCollection=e.tagsCollection,this.tagCategoriesCollection=e.tagCategoriesCollection,this.foldedModel=new o({foldedIds:[]}),this.render(),this.listen()},t.prototype.listen=function(){return this.listenTo(this.foldedModel,"change:foldedIds",this.render),this.listenTo(this.tagsCollection,"update change",this.render),this.listenTo(this.tagCategoriesCollection,"change",this.render)},t.prototype.isFolded=function(e){return this.foldedModel.get("foldedIds").indexOf(e)>=0},t.prototype.getGroupData=function(){return s.chain(this.tagsCollection.toJSON()).groupBy((e=this,function(t){var n;return n=t.tagcategoryIds[0],null!=e.tagCategoriesCollection.get(n)&&n})).map(function(e){return function(t,n){var r,o,i,s;return o={tags:t,categoryId:n},(r=null!=(i=e.tagCategoriesCollection.get(n))?i.toJSON():void 0)||(r=null!=(s=e.tagCategoriesCollection.getDefault())?s.toJSON():void 0),Object.assign({},o,{category:r,folded:e.isFolded(n)})}}(this)).sortBy(function(e){var t;return(null!=(t=e.category)?t.updated:void 0)?-new Date(e.category.updated).valueOf():0}).value();var e},t.prototype.onGroupToggled=function(e){var t,n;return t=$(e.currentTarget).data("id"),n=this.foldedModel.get("foldedIds"),this.foldedModel.set({foldedIds:this.isFolded(t)?s.without(n,t):n.concat(t)})},t.prototype.render=function(){if(this.tagsCollection.length>0)return this.$el.html(r({groups:this.getGroupData()}))},t}()},Pi2j2IpB:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("R2qY+4o2"),o=n("GESwhXbR"),i=n("T3rbAVQx"),s=function(){function e(){this.acceptVersion=0}return e.prototype.essage=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=o.Toast[e];"function"==typeof r&&r.apply(o.Toast,t)},e.prototype.openDetail=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];throw Error("not implemented")},e.prototype.registerHostNode=function(){if(this.hostNode)return this.hostNode.id;var e=document.createElement("div"),t=Object(i.a)(r.HostNode.Prefix);return e.id=t,document.body.appendChild(e),this.hostNode=e,"function"==typeof e.attachShadow&&(this.shadowRoot=e.attachShadow({mode:"open"})),"#"+t},e.prototype.transferStyleNode=function(e){this.styleNode?this.styleNode.textContent=e:(this.styleNode=document.createElement("style"),this.getHostNode().appendChild(this.styleNode))},e.prototype.handle=function(e,t){if("transferStyleNode"!==e.method||!t){var n=this[e.method];if(n)return n.apply(this,e.params);throw Error("Target method cannot be found.")}t.contentDocument.querySelector(e.params[0])},e.prototype.cleanup=function(){this.hostNode&&(this.shadowRoot&&this.hostNode.removeChild(this.shadowRoot),this.hostNode.parentNode.removeChild(this.hostNode)),this.shadowRoot=this.hostNode=this.styleNode=void 0},e.prototype.isolatedAPI=function(){return["registerHostNode"]},e.prototype.getHostNode=function(){return this.shadowRoot?this.shadowRoot:this.hostNode},e}()},PjwvqKDK:function(e,t,n){"use strict";n.r(t),n.d(t,"navigatorRefresh$",function(){return o});var r=n("8yf6doCl"),o=new r.Subject},Pm6yRo3w:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("tLZJUYWX"),c=n("6EY9/lIj"),l=function(e){function t(t){var n=e.call(this,t)||this;return n.inSubmit=!1,n.getInput=function(e){n.input=e},n.getClosestParent=function(){for(var e=n.props.rootClass||"",t=n.input;t.parentElement;){if(t.classList.contains(e))return t;t=t.parentElement}return t},n.onClick=function(e){for(var t=e.target;t.parentElement;){if(t===n.rootEl)return void e.stopPropagation();t=t.parentElement}var r=window.getSelection();r&&""===r.toString()&&n.onClickOutside()},n.onChange=function(e){var t=e.target;n.setState(r.a({},n.state,{name:t.value}))},n.onKeyDown=function(e){e.stopPropagation(),13===e.which&&n.submit()},n.onEsc=function(e){27===e.which&&n.props.onClose&&n.props.onClose()},n.onClose=function(){n.props.onClose&&n.props.onClose()},n.onClickOutside=function(){n.submit()},n.submit=function(){var e=n.state.name.trim(),t=n.props.name!==e&&e.length;n.props.onSubmit&&t&&!n.inSubmit?(n.inSubmit=!0,n.props.onSubmit(e).then(function(){n.input&&(n.inSubmit=!1,n.onClose())}).catch(function(){n.input&&(n.inSubmit=!1,n.onClose())})):n.onClose()},n.state={name:n.props.name||""},n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.name!==this.props.name&&this.setState(r.a({},this.state,{name:e.name}))},t.prototype.componentDidMount=function(){this.rootEl=this.props.rootClass?this.getClosestParent():this.input,document.addEventListener("click",this.onClick,!0),document.addEventListener("keyup",this.onEsc),this.input.focus()},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.onClick,!0),document.removeEventListener("keyup",this.onEsc)},t.prototype.onClickInput=function(e){e.stopPropagation()},t.prototype.render=function(){var e=this.props.creating?a.get("library.create.collection.placeholder"):a.get("library.modify.collection.placeholder");return o.createElement("input",{ref:this.getInput,className:"title-input form-control",onChange:this.onChange,onKeyDown:this.onKeyDown,onClick:this.onClickInput,value:this.state.name,placeholder:e})},t}(o.PureComponent),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onRawTitleClick=function(){t.props.triggerOnClick&&t.props.editable&&t.props.onEnterEditing&&t.props.onEnterEditing()},t}return r.d(t,e),t.prototype.renderEditor=function(){return o.createElement(l,{creating:this.props.creating,editing:this.props.editing,name:this.props.name,onClose:this.props.onClose,onSubmit:this.props.onSubmit,rootClass:this.props.rootClass})},t.prototype.renderTitle=function(){var e=this.props.name||"",t=e.length-6,n=s()("raw-title","hinted",{editable:this.props.editable,"trigger-on-click":this.props.triggerOnClick});return o.createElement("div",{className:n,onClick:this.onRawTitleClick,"data-title":this.props.name},o.createElement(c.a,{title:e,sliceIndex:t}),this.renderExtra())},t.prototype.renderExtra=function(){return this.props.children&&o.createElement("span",{className:"title-adds"},this.props.children)},t.prototype.renderContent=function(){return this.props.editable&&this.props.editing||this.props.creating?this.renderEditor():this.renderTitle()},t.prototype.render=function(){return o.createElement("div",{className:"title-bar"},this.renderContent())},t.defaultProps={name:"",editable:!0,creating:!1,editing:!1,triggerOnClick:!1},t}(o.PureComponent)},PoVVDkvK:function(e,t,n){e.exports={"task-content":"task-content__33Qc"}},PsEnwSV0:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("a+N5u/Cl"),s=n("tLZJUYWX"),a=n("TSYQbtd+"),c=n.n(a),l=n("sa1Ed382"),u=n("YqUJfXDr"),p=n("XhpHwZVN"),d=n("GESwhXbR"),h=n("Pm6yRo3w"),m=["disabled","query"],f=function(e){function t(t){var n=e.call(this,t)||this;return n.load=function(){n.props.domRef.current&&n.props.domRef.current.scrollHeight-70<=n.columnHeight&&n.onLoad()},n.hasMore=function(){return n.props.data.hasMoreCollections||Boolean(n.props.data.hasMoreWorks)},n.isDisabled=function(e){return n.props.disabled.indexOf(e)>=0},n.onLoad=function(){n.props.onLoad(n.props.data.parentId)},n.onUpload=function(){n.props.onUpload(n.props.data.parentId),l.gta.event({action:"add content",type:"file",page:"Link Window"})},n.onCreateCollection=function(){n.setState({isCreatingCollection:!0}),l.gta.event({action:"add content",type:"folder",page:"Link Window"})},n.onExitCreating=function(){n.setState({isCreatingCollection:!1})},n.onCollectionCreate=function(e){return n.onExitCreating(),n.props.onCollectionCreate(e,n.props.data.parentId)},n.getCollections=function(){var e=n.props,t=e.data.collections,r=e.query;return r?t.filter(function(e){return e.title.toLowerCase().indexOf(r)>=0}):t},n.getWorks=function(){var e=n.props,t=e.data.works,r=void 0===t?[]:t,o=e.query;return o?r.filter(function(e){return e.fileName.toLowerCase().indexOf(o)>=0}):r},n.state={isCreatingCollection:!1},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.columnHeight=this.props.domRef.current.clientHeight,this.debouncedLoad=Object(i.debounce)(this.load,300)},t.prototype.shouldComponentUpdate=function(e,t){return!Object(i.isEqual)(Object(i.pick)(this.props,m),Object(i.pick)(e,m))||!Object(i.isEqual)(this.props.data,e.data)||!Object(i.isEqual)(this.state,t)},t.prototype.componentDidUpdate=function(){this.debouncedLoad()},t.prototype.renderCollectionItems=function(){var e=this;return this.getCollections().map(function(t){var n=t.title,r=t._id,i=c()("object-picker__collection-item",{selected:e.props.data.selectedCollections.indexOf(r)>=0,active:e.props.data.activeId===r,disabled:e.isDisabled(r)});return o.createElement("li",{key:r,onClick:function(){e.props.onSelect(r,e.props.data.parentId,"collection")},className:i},Object(p.CollectionIcon)(t),o.createElement(d.Tooltip,{title:n},o.createElement("span",{className:"collection-name"},n)))})},t.prototype.renderWorkItems=function(){var e=this;return this.getWorks().map(function(t){var n=t.fileName,r=t._id,i=c()("object-picker__work-item",{selected:e.props.data.selectedWorks.indexOf(r)>=0,disabled:e.isDisabled(r)});return o.createElement("li",{key:r,onClick:function(){e.props.onSelect(r,e.props.data.parentId,"work")},className:i},Object(p.WorkIcon)(t),o.createElement(d.Tooltip,{title:n},o.createElement("span",{className:"file-name"},n)))})},t.prototype.renderCollectionCreator=function(){return this.props.withCollectionCreator&&this.state.isCreatingCollection&&o.createElement("div",{className:"file-picker-column-collection-creator flex-horiz flex-vcenter"},o.createElement(h.b,{creating:!0,onClose:this.onExitCreating,onSubmit:this.onCollectionCreate,rootClass:"file-picker-column-collection-creator"}))},t.prototype.renderCollections=function(){return(this.getCollections().length>0||this.state.isCreatingCollection)&&o.createElement("section",null,o.createElement("header",null,s.get("collection")),this.renderCollectionCreator(),o.createElement("ul",null,this.renderCollectionItems()))},t.prototype.renderWorks=function(){return this.props.showWorks&&!this.props.data.hasMoreCollections&&this.getWorks().length>0&&o.createElement("section",null,o.createElement("header",null,s.get("files")),o.createElement("ul",null,this.renderWorkItems()))},t.prototype.renderLoadMore=function(){return o.createElement(d.Defer,null,o.createElement(u.LoadMore,{clause:this.hasMore(),hasMore:this.hasMore(),onEnter:this.onLoad,endWith:null}))},t.prototype.renderCreateFolder=function(){return this.props.withCollectionCreator&&o.createElement(d.Tooltip,{title:s.get("object.picker.create.collection.tips")},o.createElement(d.IconButton,{color:"gray",name:"folder-add",onClick:this.onCreateCollection}))},t.prototype.renderUpload=function(){return this.props.withWorkUpload&&o.createElement(d.Tooltip,{title:s.get("object.picker.file.uploader.tips")},o.createElement(d.IconButton,{color:"gray",name:"upload-file",onClick:this.onUpload}))},t.prototype.renderHandlers=function(){var e=this.props.data.collections;return 1===e.length&&"root"===e[0].collectionType?null:o.createElement("div",{className:"file-picker-handlers"},this.renderUpload(),this.renderCreateFolder())},t.prototype.render=function(){return o.createElement("li",{ref:this.props.domRef,className:"file-picker-column thin-scroll"},this.renderHandlers(),this.renderCollections(),this.renderWorks(),this.renderLoadMore())},t.defaultProps={disabled:[],showWorks:!0,withWorkUpload:!1,withCollectionCreator:!1,showCollectionCreator:!1},t}(o.Component),g=n("SCi816Ey"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.columnRefs=[],t.refList=function(e){t.listEl=e},t.refColumn=function(e){t.columnRefs[e]=o.createRef()},t.scrollToLast=function(){var e=t.props.list.length-1;e>=0&&t.columnRefs[e].current&&g(t.columnRefs[e].current,"scroll",{axis:"x",container:t.listEl})},t}return r.d(t,e),t.prototype.componentDidUpdate=function(e){e.list.length!==this.props.list.length&&this.scrollToLast()},t.prototype.renderColumns=function(){var e=this,t=this.props.list;return t.length>0&&t.map(function(n,s){e.refColumn(s);var a=i.omit(r.a({},e.props,{data:n,showCollectionCreator:e.props.showCollectionCreator&&s===t.length-1}),"list");return o.createElement(f,r.a({},a,{key:n.parentId,domRef:e.columnRefs[s]}))})},t.prototype.render=function(){return o.createElement("ul",{ref:this.refList,className:"file-picker"},this.renderColumns())},t.defaultProps={multiple:!0,collectionOnly:!1,withWorkUpload:!1,withCollectionCreator:!1,showCollectionCreator:!1,disabled:[]},t}(o.PureComponent);n.d(t,"FilePicker",function(){return v}),n("T/0IBfK+")},PvILvTvE:function(e,t,n){e.exports={"navigation-breadcrumbs":"navigation-breadcrumbs__JPrT","navigation-breadcrumbs-ghost":"navigation-breadcrumbs-ghost__20-q",logo:"logo__I74z","logo-image":"logo-image__1-h0","logo-text":"logo-text__1Cpx","app-name":"app-name__33NY","abstract-logo":"abstract-logo__v4Cq","abstract-logo-img":"abstract-logo-img__3hY7",main:"main__1HMo",delimeter:"delimeter__3dHv"}},Px5WwN5g:function(e,t,n){"use strict";n.r(t),n.d(t,"RemoteStorage",function(){return i});var r=n("mrSGxOB2"),o=n("s0r7VfKc"),i=function(){function e(){}return e.get=function(e){return r.b(this,void 0,void 0,function(){var t,n;return r.e(this,function(i){switch(i.label){case 0:return[4,o.default.getPreference().values().toPromise()];case 1:return t=r.f.apply(void 0,[i.sent(),1]),n=t[0],[2,n.tips[e]]}})})},e.set=function(e,t){return r.b(this,void 0,void 0,function(){var n,i,s,a;return r.e(this,function(c){switch(c.label){case 0:return[4,o.default.getPreference().values().toPromise()];case 1:return n=r.f.apply(void 0,[c.sent(),1]),i=n[0],s=r.a({},i.tips,((a={})[e]=t,a)),[2,o.default.updatePreferenceTips(i._id,s).toPromise()]}})})},e}()},Pyijz3km:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";if(e.tasks&&e.tasks.length){o+='<li class="search-result card"> ';var i=e.tasks;if(i)for(var s,a=-1,c=i.length-1;a<c;){o+="  ",o+=" ";var l="task"===(N=(s=i[a+=1]).type);o+=" ";var u={task:"board",post:"wall",event:"calendar"};if(o+=' <a class="result-handler '+N+" ",s.disabled&&(o+="disabled"),o+='" data-id="'+s._id+'" data-type="'+N+'" data-title="'+r(s.title||s.content)+'" > <div class="result-thumbnail"> ',o+=l?' <span class="icon icon-'+u[N]+'"></span> <div class="avatar no-avatar img-24 img-circle" style="background-image: url('+s.avatarUrl+');"></div> ':"work"===N?' <span class="react-file-icon" data-type="'+s.fileType+'"></span> ':' <span class="icon icon-'+u[N]+'"></span> ',o+=' </div> <div class="result-content"> <p> <span>'+s.title+"</span> ","event"===N&&(o+=' <time class="event-date">'+s.eventDateString+"</time> "),o+=' <span class="task-id-placeholder"></span> ',s.tags&&s.tags.length>0){o+=" ";var p=s.tags;if(p)for(var d=-1,h=p.length-1;d<h;)o+=' <span class="label tag tag-'+((R=p[d+=1]).color||"default")+'"> <span class="tag-name">'+r(R.name)+"</span> </span> ";o+=" "}o+=" </p> </div> </a> "}o+="</li>"}if(e.posts&&e.posts.length){o+='<li class="search-result card"> ';var m=e.posts;if(m)for(var f,g=-1,v=m.length-1;g<v;){o+="  ",o+=" ";l="task"===(N=(f=m[g+=1]).type);o+=" ";u={task:"board",post:"wall",event:"calendar"};if(o+=' <a class="result-handler '+N+" ",f.disabled&&(o+="disabled"),o+='" data-id="'+f._id+'" data-type="'+N+'" data-title="'+r(f.title||f.content)+'" > <div class="result-thumbnail"> ',o+=l?' <span class="icon icon-'+u[N]+'"></span> <div class="avatar no-avatar img-24 img-circle" style="background-image: url('+f.avatarUrl+');"></div> ':"work"===N?' <span class="react-file-icon" data-type="'+f.fileType+'"></span> ':' <span class="icon icon-'+u[N]+'"></span> ',o+=' </div> <div class="result-content"> <p> <span>'+f.title+"</span> ","event"===N&&(o+=' <time class="event-date">'+f.eventDateString+"</time> "),o+=' <span class="task-id-placeholder"></span> ',f.tags&&f.tags.length>0){o+=" ";var b=f.tags;if(b)for(var y=-1,k=b.length-1;y<k;)o+=' <span class="label tag tag-'+((R=b[y+=1]).color||"default")+'"> <span class="tag-name">'+r(R.name)+"</span> </span> ";o+=" "}o+=" </p> </div> </a> "}o+="</li>"}if(e.files&&e.files.length){o+='<li class="search-result card"> ';var _=e.files;if(_)for(var w,C=-1,S=_.length-1;C<S;){o+="  ",o+=" ";l="task"===(N=(w=_[C+=1]).type);o+=" ";u={task:"board",post:"wall",event:"calendar"};if(o+=' <a class="result-handler '+N+" ",w.disabled&&(o+="disabled"),o+='" data-id="'+w._id+'" data-type="'+N+'" data-title="'+r(w.title||w.content)+'" > <div class="result-thumbnail"> ',o+=l?' <span class="icon icon-'+u[N]+'"></span> <div class="avatar no-avatar img-24 img-circle" style="background-image: url('+w.avatarUrl+');"></div> ':"work"===N?' <span class="react-file-icon" data-type="'+w.fileType+'"></span> ':' <span class="icon icon-'+u[N]+'"></span> ',o+=' </div> <div class="result-content"> <p> <span>'+w.title+"</span> ","event"===N&&(o+=' <time class="event-date">'+w.eventDateString+"</time> "),o+=' <span class="task-id-placeholder"></span> ',w.tags&&w.tags.length>0){o+=" ";var E=w.tags;if(E)for(var T=-1,I=E.length-1;T<I;)o+=' <span class="label tag tag-'+((R=E[T+=1]).color||"default")+'"> <span class="tag-name">'+r(R.name)+"</span> </span> ";o+=" "}o+=" </p> </div> </a> "}o+="</li>"}if(e.events&&e.events.length){o+='<li class="search-result card"> ';var M=e.events;if(M)for(var j,P=-1,x=M.length-1;P<x;){var N;o+="  ",o+=" ";l="task"===(N=(j=M[P+=1]).type);o+=" ";u={task:"board",post:"wall",event:"calendar"};if(o+=' <a class="result-handler '+N+" ",j.disabled&&(o+="disabled"),o+='" data-id="'+j._id+'" data-type="'+N+'" data-title="'+r(j.title||j.content)+'" > <div class="result-thumbnail"> ',o+=l?' <span class="icon icon-'+u[N]+'"></span> <div class="avatar no-avatar img-24 img-circle" style="background-image: url('+j.avatarUrl+');"></div> ':"work"===N?' <span class="react-file-icon" data-type="'+j.fileType+'"></span> ':' <span class="icon icon-'+u[N]+'"></span> ',o+=' </div> <div class="result-content"> <p> <span>'+j.title+"</span> ","event"===N&&(o+=' <time class="event-date">'+j.eventDateString+"</time> "),o+=' <span class="task-id-placeholder"></span> ',j.tags&&j.tags.length>0){o+=" ";var O=j.tags;if(O)for(var R,D=-1,L=O.length-1;D<L;)o+=' <span class="label tag tag-'+((R=O[D+=1]).color||"default")+'"> <span class="tag-name">'+r(R.name)+"</span> </span> ";o+=" "}o+=" </p> </div> </a> "}o+="</li>"}return o}},Q0SIXEaW:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<div class="team-list-wrapper"> <div class="team-list"> <ul class="jqtree-tree"> \x3c!-- 仿照 jqtree dom 结构 --\x3e ',i=e.teams;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=' <li class="team-item ',(s=i[a+=1]).children&&s.children.length&&(o+="has-child"),o+='"> <div class="jqtree-element"> <div class="jqtree-title flex-horiz flex-vcenter"> <span class="icon icon-menu"></span> <span class="name">'+r(s.name)+"</span> ",s.children&&s.children.length&&(o+=' <span class="icon icon-chevron-right"></span> '),o+=" </div> </div> </li> ";return o+=" </ul> </div></div>"}},QFl7Q1qw:function(e,t,n){var r,o;r=n("DKtpwQIy"),o=function(e,t){var n;return n=~["task","event","post","files"].indexOf(e)?"link."+e+".invisible.hint":"link.item.invisible.hint",tb_i18n.get(n,t)},t.invisibleNode=function(e){var t,n,i;return n=e.type,i=e.visibles,t=e.invisibles,r({visibleCount:i.length,invisibleCount:t.length,hint:o(n,t.length)})}},QIhnK5EA:function(e,t,n){var r,o,i,s,a,c,l,u;a=n("a+N5u/Cl"),l=n("sa1Ed382"),c=n("GESwhXbR"),s=c.Toast,o=c.EssageMigration,i=n("odY26VIi"),r=n("/ba4BRMM"),u=n("gh8QIhMV").throwError,t.essage=function(e){var t,n,r;return n=(r=o.formatEssageParams(e))[0],t=r[1],s[n](t)},t.open=function(e){var t,n,r;if(t=e._id,r=null!=(n=e.type)?n:"task",t)return l.APP.openObjectPreviewer(t,r)},t.navigate=function(e){var t,n,r,o,i,s,a;if(n=e._projectId,r=e._tasklistId,t=e._collectionId,s=null!=(o=e.type)?o:"project",n||(n=null!=(i=l.APP.projectModel)?i.id:void 0),n)return(a=function(){switch(s){case"project":return"project/"+n+"/tasks";case"tasklist":return"project/"+n+"/tasks/scrum/"+r;case"collection":return"project/"+n+"/works/"+t}}())?l.router.navigate(a,{trigger:!0}):u("Invalid Type")},t.closeModal=function(e,t){return $(t).trigger("closeModal")},t.sendMessage=function(e){var t,n,o;return o=e.userIds,n=e.content,!a.isArray(o)||a.isEmpty(o)?Promise.reject('"userIds" must not be null or empty'):(n=null!=n?n.trim():void 0)?(t=new r,Promise.all(o.map(function(e){return new Promise(function(n,r){return t.getRoomInfo("users",e,{silentError:!0,success:n,error:r})}).then(function(e){return new Promise(function(r,o){return t.create({content:n},{url:"rooms/"+e._id+"/activities",wait:!0,success:r,error:o})})})}))):Promise.reject('"content" must not be null or empty')},t.openChatModal=function(e){var t,r;return r=e.organizationId,t=e.memberId,Promise.resolve().then(function(e){var o;if(o=n("6vg9MnbG"),r){if(t)return i.fetch(r,{boundToObjectType:"organization",silentError:!0,success:function(e){var n;return(n=e.get(t))?o.open({pseudoMessageData:{_id:n.get("_id"),name:n.get("name"),avatarUrl:n.get("avatarUrl")}}):o.open()},error:function(){return o.open()}});o.open()}}.bind(null,n)).catch(n.oe)},t.openPluginLayer=function(e){var t,r,o,i,s,a,c,l,u;return o=null==(i=e.liftBottom)||i,u=e.viewOptions,t=null!=(s=e.id)?s:"",l=null!=(a=e.type)?a:"React",r=null!=(c=e.layerOptions)?c:{},Promise.resolve().then(function(e){var i;return i=n("5eNik3+6").PluginLayerManager,o?i.liftBottom(t):i.open(u,t,l,r)}.bind(null,n)).catch(n.oe)},t.pushPluginLayerMessage=function(e){var t,r,o;return t=null!=(o=e.id)?o:"",r=e.message,Promise.resolve().then(function(e){return n("5eNik3+6").PluginLayerManager.pushMessage(r,t)}.bind(null,n)).catch(n.oe)},t.closePluginLayer=function(e){var t,r,o,i;return t=null!=(r=e.id)?r:"",i=null!=(o=e.saveCache)&&o,Promise.resolve().then(function(e){return n("5eNik3+6").PluginLayerManager.close(t,i)}.bind(null,n)).catch(n.oe)}},QKxOxmbo:function(e,t,n){e.exports={content:"content__11Rc",header:"header__2Mbc",list:"list__3XIz",item:"item__1Fxu","item-name":"item-name__Zw62",loading:"loading__3u2u"}},QO3Jh35S:function(e,t,n){},QSq3kW9f:function(e,t,n){t.ProjectsInformationBoardView=n("RBcR2SaM")},QWGdQHge:function(e,t,n){e.exports=n("MKz6J3aY")+"\n\nquery StarredProjects(\n  $organizationId: ObjectId!,\n) {\n  starred: Projects(\n    _organizationId: $organizationId,\n    pageSize: 200,\n    filters: {\n      selectBy: starred\n    }\n  ) {\n    result {\n    \t...projectSchema\n    }\n  }\n}\n"},Qa3q4aD4:function(e,t,n){"use strict";n.r(t),n.d(t,"noExecutor",function(){return p}),n.d(t,"userAsInvolver",function(){return d}),n.d(t,"userInvolverAsUser",function(){return h}),n.d(t,"loadInitialRecommend",function(){return m}),n.d(t,"loadSearch",function(){return f}),n.d(t,"commitUpdate",function(){return g}),n.d(t,"connectDispatcher",function(){return v}),n.d(t,"consumeDispatched",function(){return b});var r,o=n("mrSGxOB2"),i=n("4c1CS0b3"),s=n("tLZJUYWX"),a=n("dWbDnvg6"),c=n("pdCqEcaI"),l=n("s0r7VfKc"),u=n("sa1Ed382"),p=(r="no.executor",{check:function(e){return e.id===r},get:function(){return{id:r,name:s.get("task.detail.no.executor"),desc:"",avatar:{type:a.b.Img,src:""}}}});function d(e){return e._id?{id:e._id,name:e.name,avatar:{type:a.b.Img,src:e.avatarUrl||""},desc:Object(c.f)(e)}:p.get()}function h(e){return{_id:p.check(e)?null:e.id,name:e.name,avatarUrl:e.avatar.src}}function m(e,t){var n=i.Observable.of(p.get()),r=i.Observable.of(d(u.user.toJSON())),s=l.default.fetch.get("members/selectors/recommend",o.a({objectType:t,type:"executors"},e)).map(function(e){return e.users.map(d)});return i.Observable.zip(n,r,s,function(e,t,n){var r=n.filter(function(e){return e.id===t.id}),o=n.filter(function(e){return e.id!==t.id});return[e].concat(r,o)})}function f(e,t,n){return l.default.fetch.get("members/selectors/search",o.a({objectType:n,type:"executors",q:t},e)).map(function(e){return e.users.map(d)})}function g(e,t,n){return l.default.fetch.put(n+"s/"+e,{_executorId:t})}var v=function(e){var t=function(e){return p.check(e)?null:e.id};return{search:function(t){return e.next({type:"SEARCH_TERM_CHANGE",payload:t})},onClickSelected:function(n){return e.next({type:"COMMIT",payload:t(n)})},onClickRecommend:function(n){return e.next({type:"COMMIT",payload:t(n)})},onClickSearched:function(n){return e.next({type:"COMMIT",payload:t(n)})}}},b=function(e){var t=Object(c.e)(e,"SEARCH_TERM_CHANGE"),n=Object(c.e)(e,"TOGGLE_ENTRY");return{searchTermChange$:t,commit$:Object(c.e)(e,"COMMIT"),searchResultSelected$:i.Observable.empty(),toggleEntry$:n}}},QaVTsF4c:function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty;c=n("a+N5u/Cl"),s=n("XQ5nL9cp"),a=n("HHtVDBJc"),i=n("hGNqppva"),o=n("EqFtzsyK"),r=n("SZxc5CJv"),l=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="PopoverRepeatPickerView",t.prototype.className="popover-repeat-picker-view",t.prototype.popoverTitle="Menu",t.prototype.width=170,t.prototype.customModeWidth=250,t.prototype.panelMode=null,t.prototype.events={"click .repeat-picker-item":"selectItem"},t.prototype.initialize=function(e){var n;if(c.has(e,"select"))return this.rruleSet=a.getRRuleSet(e.recurrence),this.rruleSet||(n=e.startDate?new Date(e.startDate):new Date,this.rruleSet=new s.RRuleSet,this.rruleSet.rrule(new s({freq:s.WEEKLY,dtstart:n}))),this.selected=a.freq2Label(this.rruleSet),t.__super__.initialize.apply(this,arguments);l("select is required!")},t.prototype.render=function(){var e,t;return t="CUSTOM"===this.selected?this.repeatOptions?a.repeatOptions2Description(this.repeatOptions):a.freq2Description(this.rruleSet):null,e={dataList:a.getRepeats(!0),selected:this.selected,description:t},this.$el.html(r(e)),this},t.prototype.selectItem=function(e){var t,n,r,o;return o=(t=$(e.currentTarget)).data("id"),t.addClass("selected").siblings().removeClass("selected"),this.panelMode=o,"CUSTOM"===o?this.enterCustomRepeat():(this.hide(),a.clearBeginning(this.rruleSet),r=a.label2RepeatOptions(o),this.rruleSet=a.updateRRuleSet(this.rruleSet,r),n=a.rruleSet2recurrence(this.rruleSet),this.options.select(n,{gtaType:o.toLowerCase()}),this.selected=o,this.repeatOptions=null),this},t.prototype.enterCustomRepeat=function(){var e,t,n,r;return n=a.freq2RepeatOptions(this.rruleSet),e="CUSTOM"===a.freq2Label(this.rruleSet)?c.pick(n,"freq","interval","byweekday","bymonthday"):null,null!=(t=this.customView)&&t.remove(),this.customView=this.requestSubView(o,{customRepeatOptions:e,select:(r=this,function(e){var t;return r.hide(),a.clearBeginning(r.rruleSet),r.rruleSet=a.updateRRuleSet(r.rruleSet,e),t=a.rruleSet2recurrence(r.rruleSet),r.options.select(t,{gtaType:"custom"}),r.selected="CUSTOM",r.repeatOptions=e})}),this.$content.html(this.customView.$el),this.fixPosition(),this},t.prototype.fixPosition=function(){var e;if(t.__super__.fixPosition.apply(this,arguments),this.$popover)return"CUSTOM"===this.panelMode?this.$popover.css("width",this.customModeWidth):this.$popover.css("width",this.width),20,(e=this.$popover[0].getBoundingClientRect()).left<20?this.$popover.css("left",20):e.right>window.innerWidth-20?this.$popover.css({left:"initial",right:20}):void 0},t}()},QbA0c8QU:function(e,t,n){e.exports={"organization-is-empty-view":"organization-is-empty-view__3GYF"}},"QbOngE/j":function(e,t,n){e.exports=n.p+"images/cs-medal.e5d88852.png"},QcmE5UU1:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;s=n("a+N5u/Cl"),a=n("sa1Ed382"),r=n("aD6I3VT4"),i=n("GESwhXbR").Toast,o=n("IhWQze/r").StoryComponent,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.tagName="section",t.prototype.viewName="DetailInfosStoryView",t.prototype.className="detail-infos-story-view no-border-wrapper",t.prototype.initialize=function(e){return t.__super__.initialize.apply(this,arguments),this.taskModel=e.objectModel,this.simplifiedVersion=e.simplifiedVersion,this.isCreator=!this.taskModel.id,this.isRequired=e.isRequired,this.canEdit=e.canEdit,this.render(),this.listen()},t.prototype.listen=function(){var e;return e=["change:storyPoint"],this.listenTo(this.taskModel,e.join(" "),this.render)},t.prototype.isCase=function(){return!0},t.prototype.hasPermission=function(){return this.canEdit},t.prototype.render=function(){var e;return e={storyPoint:this.taskModel.get("storyPoint"),hasPermission:this.hasPermission(),onClickStoryPoint:this.onClickStoryPoint.bind(this)},this.simplifiedVersion&&(e=s.extend({},e,{withTitle:!1,emptyPlaceholder:tb_i18n.get("task.creator.add.storyPoints")})),this.isCreator||(e=s.extend({},e,{gtaHandler:this.gtaHandler.bind(this)})),this.requestReactView(this.el,o,e)},t.prototype.onClickStoryPoint=function(e){var t;if(e!==this.taskModel.get("storyPoint")){if(!this.isRequired||null!==e)return this.isCreator?this.taskModel.set({storyPoint:e}):(this.taskModel.saveAttr("storypoints",null,{attrs:{storyPoint:e}}),t=null===e?"clear":e,this.gtaHandler("added story points",t));i.error(tb_i18n.get("required.field.empty.error"))}},t.prototype.gtaHandler=function(e,t){var n;return n={action:e,type:this.taskModel.isSubtask()?"subtask":"task",series:this.taskModel.get("ancestorIds").length},t&&(n.category=t),a.gta.event(n)},t}()},QdDHtIVR:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("i8i4LrFt"),s=n("a+N5u/Cl"),a=n("DdwvUwFp"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refInstance=function(e){t.component=e},t}return r.d(t,e),t.prototype.componentDidMount=function(){if(a.isSupported()){var e=Object(i.findDOMNode)(this.component);this.clipboard=new a(e,{text:this.props.getClipText}).on("success",this.props.onPasteSuccess).on("error",this.props.onPasteFail)}},t.prototype.componentWillUnmount=function(){this.clipboard&&this.clipboard.destroy()},t.prototype.render=function(){return(0,this.props.children)({ref:this.refInstance})},t.defaultProps={onPasteSuccess:s.noop,onPasteFail:s.noop},t}(o.PureComponent),l=n("tLZJUYWX"),u=n("GESwhXbR"),p=n("3eMzznN/");function d(e){return function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.getLink=function(){return p.getObjectLink(n.props.object,n.props.type)},n.onPasteSuccess=function(){u.Toast.success({message:l.get("object.link.copy.success.title"),description:l.get("object.link.copy.success.content")})},n.onPasteFail=function(){u.Toast.error({message:l.get("object.link.copy.faild.title"),description:l.get("object.link.copy.faild.content")})},n.renderHandler=function(t){var i=r.a({},n.props,t);return o.createElement(e,r.a({},i))},n}return r.d(n,t),n.prototype.render=function(){return o.createElement(c,{getClipText:this.getLink,onPasteSuccess:this.onPasteSuccess,onPasteFail:this.onPasteFail},this.renderHandler)},n}(o.PureComponent)}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d})},QdFjEc7w:function(e,t,n){},QjqlvrSk:function(e,t,n){e.exports={list:"list__1nhM"}},Qq9aldlU:function(e,t,n){},QqFE17Hu:function(e,t,n){"use strict";n.r(t);var r=n("4BeYQFX4"),o=n.n(r),i=n("IaFtV71y"),s=n.n(i),a=new o.a({id:"object-task",use:"object-task-usage",viewBox:"0 0 20 20",content:'<symbol viewBox="0 0 20 20" id="object-task"><defs><path id="object-task_a" d="M9.781 10.099l4.545-4.485a.399.399 0 0 1 .558 0 .386.386 0 0 1 0 .55l-4.824 4.76a.399.399 0 0 1-.558 0l-1.755-1.73a.386.386 0 0 1 0-.551.399.399 0 0 1 .559 0l1.475 1.456zM5.789 13.72h7.544v-2.937c0-.215.177-.39.395-.39.218 0 .395.175.395.39v3.327a.392.392 0 0 1-.395.389H5.395A.392.392 0 0 1 5 14.11V5.89c0-.215.177-.39.395-.39h5.14c.218 0 .395.175.395.39a.392.392 0 0 1-.395.389H5.79v7.442z" /></defs><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#77C2F8" rx="2" /><use fill="#FFF" fill-rule="nonzero" stroke="#FFF" stroke-width=".8" xlink:href="#object-task_a" /></g></symbol>'});s.a.add(a);t.default=a},Qus09TdU:function(e,t,n){e.exports={root:"root__3CBR"}},QxIYFO4k:function(e,t){e.exports=function(e){return'<div class="modal-header"> <div class="modal-title"> <span>'+tb_i18n.get("manage.project.categories")+'</span> </div> <a class="modal-close" data-dismiss="modal"> <span class="icon icon-remove"></span> </a></div><div class="modal-body"></div>'}},Qz4qJXzO:function(e,t,n){e.exports=n("MKz6J3aY")+"\n\nquery SearchProjects(\n  $q: String,\n  $organizationId: ObjectId!,\n  $pageToken: String,\n  $pageSize: PageSizeType = 20,\n) {\n  result: Search(\n    type: project,\n    spaceType: organization,\n    _organizationId: $organizationId,\n    q: $q,\n    pageToken: $pageToken,\n    pageSize: $pageSize,\n  ) {\n    nextPageToken\n    result {\n    \t...projectSchema\n    }\n  }\n}\n"},QzLhqKzy:function(e,t,n){e.exports=n("omctVj2L")},R81d6RG8:function(e,t){t.WAREHOUSE_NAMESPACE="plugin",t.PLUGIN_URL="plugin"},RBSYTovX:function(e,t){e.exports=function(e){var t="";return e.showFilter&&(t+='<div class="search-result-header"> <div class="search-result-filter clearfix"> <div class="filter type-filter"> <a class="type-toggler" data-toggle="dropdown"> <span class="active-type">'+tb_i18n.get("navigation.task")+'</span> <span class="icon icon-chevron-down"></span> </a> <div class="type-selector dropdown-menu card"> <ul class="type-list"> <li class="type-item active" data-type="task"> <a class="clearfix"> <span class="icon icon-board"></span> '+tb_i18n.get("navigation.task")+' </a> </li> <li class="type-item" data-type="post"> <a class="clearfix"> <span class="icon icon-wall"></span> '+tb_i18n.get("navigation.sharing")+' </a> </li> <li class="type-item" data-type="work"> <a class="clearfix"> <span class="icon icon-file"></span> '+tb_i18n.get("navigation.work")+' </a> </li> <li class="type-item" data-type="event"> <a class="clearfix"> <span class="icon icon-calendar"></span> '+tb_i18n.get("navigation.event")+' </a> </li> </ul> </div> </div> <div class="filter project-filter"> <a class="project-toggler"> <span class="active-project">'+tb_i18n.get("all.project")+'</span> <span class="icon icon-chevron-down"></span> </a> </div> <div class="filter member-filter"> <a class="member-toggler"> <span class="active-member">'+tb_i18n.get("all.member")+'</span> <span class="icon icon-chevron-down"></span> </a> </div> </div></div>'),t+='<ul class="search-list thin-scroll"></ul>'}},RBcR2SaM:function(e,t,n){var r,o={}.hasOwnProperty;n("y5IJPN/r"),r=n("vmWJWrVe"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="ProjectsInformationBoardView",t.prototype.className="projects-information-board-view",t.prototype.initialize=function(e){return this.organizationId=e.organizationId,n.e(21).then((t=this,function(e){var r,o;return r=n("rAFEKU5x").ProjectsInformationBoardAppView,o=t.requestSubView(r,{organizationId:t.organizationId}),t.$el.append(o.$el)}).bind(null,n)).catch(n.oe);var t},t.prototype.remove=function(){return t.__super__.remove.apply(this,arguments)},t}()},RDPHhKgn:function(e,t,n){e.exports={"confirm-edit-view":"confirm-edit-view__1td9"}},RDiZwTh5:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R,D,L,z,A,V=function(e,t){return function(){return e.apply(t,arguments)}},F={}.hasOwnProperty,B=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};j=n("a+N5u/Cl"),D=n("sa1Ed382"),u=n("wd/RKGTj"),C=n("3eMzznN/"),S=n("vmWJWrVe"),A=n("yiO17FlF"),w=n("GESwhXbR").Toast,a=n("9aJAKDJa"),v=n("HDJEOtNh").ProjectAccess,E=n("OmupbwLD"),s=n("1fU+e3+7"),I=n("8N+zwa3A"),b=n("77NnVLwu"),m=n("ONQFQipy"),l=n("odY26VIi"),_=n("zH+Yaocm").TaskStatusLabel,c=n("zSKlCiXU"),h=n("NqvaD/lL"),d=n("PCjZn8k4"),g=n("tGfyIDI3"),M=n("HjX9MwPa"),y=n("NDOjGFQW"),k=n("GPNoQLd7"),i=n("gLdDAp90"),f=n("YiTbVZtG"),o=n("eF8w1m/C"),R=n("d01BYUGx"),N=R.getArchiveMap,P=R.checkIsVisible,r=n("W6XdWgVo").BasicSearchComponent,O=n("iLPEDbJK").getIntegrations,x=n("WMI0/nUp").fetchProjectPlugins,T=n("XhpHwZVN").WorkIcon,z=n("gh8QIhMV").throwError,p=["weibo","github","evernote","processon","jinshuju","standard","zhihu","wechat","web","gitintegration"],L={evernote:"web",github:"web",jinshuju:"web",processon:"web",link:"web",weibo:"web",yinxiang:"web","thoughts-entry":"standard","thoughts-folder":"standard",project:"standard",zhihu:"zhihu",wechat:"wechat"},e.exports=function(e){function t(){return this.createLinks=V(this.createLinks,this),this.linksDuplicated=V(this.linksDuplicated,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)F.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,S),t.prototype.viewName="LinkView",t.prototype.className="detail-infos-link-view",t.prototype.events={"click .link-menu-handler":"onMenuTogglerClick","click .link":"enterObjectPreviewer"},t.prototype.initialize=function(e){var t;return null==e&&(e={}),this.options=e,this._projectId=e._projectId,this._objectId=e.objectModel.id.split("_")[0],this.objectModel=e.objectModel,this.boundToObjectType=e.boundToObjectType,C.promiseChain((t=this,function(){return!t.el}))(function(e){return function(){return e._projectId?C.warehouse.resolveFetch(b,e._projectId):Promise.resolve()}}(this),function(e){return function(t){var n;return e.projectModel=t,e.organizationId=e.objectModel.get("_organizationId")||(null!=(n=e.projectModel)?n.get("_organizationId"):void 0)}}(this),function(e){return function(){return e._projectId?l.fetch$(e._projectId).toPromise():Promise.resolve()}}(this),function(e){return function(t){if(e.membersCollection=t,e.renderBasic(),e.objectModel.getRoleScope()<-1)return e.$el.addClass("guest")}}(this),function(e){return function(){return C.warehouse.resolveFetch(m,e._objectId,{objectType:e.boundToObjectType})}}(this),function(e){return function(t){return e.objectlinksCollection=t,e.renderLinks().listen(),e.trigger("over")}}(this)),this},t.prototype.listen=function(){var e;return this.listenTo(this.objectlinksCollection,"add change remove destroy",(e=this,function(){return e.renderLinks()})),this},t.prototype.renderBasic=function(){return this.$el.html(o({hasPostPermission:this.hasPermission(),isArchived:this.objectModel.get("isArchived")})),this.$linksList=this.$(".links-list"),this.renderAddLinkComponent(),this},t.prototype.renderAddLinkComponent=function(){var e,t;if(e=this.$(".link-add-wrap").get(0))return this._projectId&&x(this._projectId)((t=this,function(e,n){if(!e)return t.pluginsCollection=n})),this.requestReactView(e,r,{onAddFromSourceClick:this.toggleObjectPicker.bind(this),organizationId:this.organizationId,sourceProjectId:this._projectId,parentId:this._objectId,useDefaultGta:!0,onSelect:function(e){return function(t){var n,r,o,i,s;return e.linksDuplicated(null!=t?t._id:void 0)?w.error(tb_i18n.get("link.create.duplicated")):(r=null!=t?t.type.split("-")[0]:void 0,s=L[null!=t?t.type:void 0]||L[r],n=null!=(o=e.pluginsCollection)&&null!=(i=o.findWhere({_appName:r}))?i.get("_consumerId"):void 0,s?(n&&(t=Object.assign(t,{_consumerId:n})),O(s,t).then(function(t){return e.linksDuplicated(t._id)?w.error(tb_i18n.get("link.create.duplicated")):e.createLinks(t)})):e.createLinks(t))}}(this)})},t.prototype.linksDuplicated=function(e){var t;return null!=(t=this.objectlinksCollection)?t.findWhere({_linkedId:e}):void 0},t.prototype.renderLinks=function(){var e,t,n,r;return this.$reactLinkedFileIcons&&this.$reactLinkedFileIcons.each((r=this,function(e,t){return r.unmountReact(t)})),this.$(".detail-subitem-common-category").empty(),t=this.objectlinksCollection.models.map(function(e){var t;return t=e.hasPermissions("objectlink.del"),j.extend(e.toJSON(),t)}),t=j.groupBy(j.sortBy(t,"updated"),"linkedType"),(n=j.union(t.testplangroup,t.testcase)).length&&(t=j.chain(t).omit("testcase","testplangroup").extend({testcaseAndGroup:n}).value()),(e=j.sortBy(j.union(t.work,t.collection),"updated")).length&&(t=j.chain(t).omit("work","collection").extend({files:e}).value()),j.each(p,function(e){return t[e]=t[e]||[]}),j.mapObject(t,function(e){return function(t,n){return B.call(p,n)>=0?e.renderOuterLinks(t,n):e.renderInnerLinks(t,n)}}(this)),this.renderLinksFileIcon(),this},t.prototype.renderLinksFileIcon=function(){var e;if(this.$reactLinkedFileIcons=this.$(".react-file-icon"),this.$reactLinkedFileIcons.length)return this.$reactLinkedFileIcons.each((e=this,function(t,n){return e.requestReactView(n,T,{fileType:$(n).data("type")})}))},t.prototype.renderInnerLinks=function(e,t){var n;if(n=N(t)){switch(!0,t){case"task":e=j.map(e,(r=this,function(e){var t,n,o;return j.extend(e,{dueDates:e.data.dueDate?C.formatDate(e.data.dueDate,{isUsePref:!0}):void 0}),(t=e.data).executor||(t.executor=null!=(n=r.membersCollection)&&null!=(o=n.get(e.data._executorId))?o.toJSON():void 0),e}));break;case"event":e=j.map(e,function(e){var t,n,r;return e.data=(new s).parse(e.data),r=(n=i.pickDefaultOccurrence(e.data)||j.pick(e.data,"startDate","endDate")).startDate,t=n.endDate,j.extend(e,{startDateString:C.formatDate(r,{isUsePref:!0}).dateString,startTimeString:u(r).format("LT"),endDateString:C.formatDate(t,{isUsePref:!0}).dateString,endTimeString:u(t).format("LT")})});break;case"post":e=j.map(e,function(e){var t;return t=e.data.content.replace(/<.*?>/gi,"").replace(/\&nbsp\;?/g," "),j.extend(e,{createTime:C.formatDate(e.data.created),content:C.cutString(t,90,"...")})});break;case"files":e.data=j.map(e,function(e){var t;return"collection"===e.linkedType?e:(e.data.thumbnailText=e.data.fileType,/link/.test(e.data.fileCategory)&&(e.data.thumbnailText="link"),(null!=(t=e.data.thumbnailText)?t.length:void 0)>4?e.data.thumbnailText=""+e.data.thumbnailText.substr(0,1).toUpperCase():void 0)});break;case"yinxiang":e=j.map(e,function(e){return e.data.created&&(e.createTime=C.formatDate(e.data.created)),e})}var r;return this.renderBasicInnerLink(t,e,n),"task"===t&&e.forEach(function(e){return function(t){return e.renderTaskIdLabel(t),e.renderTaskStatusCheckbox(t)}}(this)),this}},t.prototype.renderOuterLinks=function(e,t){var n,r;return"standard"===t?this.renderStandardLinks(e):(r=N(t),(n=this.$linksList.find("."+r.linkedClass)).removeClass("hide"),n.empty().append(this.requestSubView(r.template,{title:r.title,data:e,hasHeader:!0,hasSearch:!1,isSearched:!1}).$el),e.length||n.addClass("hide"),this)},t.prototype.renderStandardLinks=function(e){var t;return this.$linksList.find(".standard-link-view").remove(),j.chain(e).groupBy(function(e){return e.data._consumerId}).map(function(e){return{plugin:e[0].data.consumer,links:e}}).each((t=this,function(e){var n,r;return n=j.extend({linkModels:e.links.map(function(e){return t.objectlinksCollection.get(e._id)}),objectModel:t.objectModel,onMenuToggle:t.toggleMenu.bind(t)},e),r=t.requestSubView(y,n),t.$linksList.append(r.$el)})),this},t.prototype.renderTaskIdLabel=function(e){var t,n,r,o;if(n=e._linkedId,r=e.data.uniqueId,t=e.data._projectId)return b.fetch(t,{silentError:!0,success:(o=this,function(e){return o.requestSubView(k,{projectModel:e,uniqueId:r}).bind(o.$linksList.find(".link[data-linkedid="+n+"] .task-id-placeholder"))})})},t.prototype.renderTaskStatusCheckbox=function(e){var t,n;return n=e._linkedId,t=this.$linksList.find(".link[data-linkedid="+n+"] .task-status-label").get(0),this.requestReactView(t,_,{task:e.linked,readOnly:!0})},t.prototype.renderBasicInnerLink=function(e,t,n){var r,o,i,s;return s=j.groupBy(t,function(t){var n;return n=P(t.data,e),t.project&&v.hasProjectPrivacyPermission(t.project._id)||n}),r=n.linkedClass,o=n.template,i=n.title,this.$linksList.find("."+r).empty().append(o({title:i,type:e,visibles:s.true||[],invisibles:s.false||[],objects:"yinxiang"===e?t:void 0})),this},t.prototype.onMenuTogglerClick=function(e){var t,n;return e.stopPropagation(),n=(t=$(e.currentTarget)).data("id"),this.toggleMenu(n,t)},t.prototype.toggleMenu=function(e,t){var n;if(!t.data("bs.popover")&&e)return n=j.extend({$toggler:t,objectlinkModel:this.objectlinksCollection.get(e)},this.gtaConfig()),this.requestSubView(c,n).show()},t.prototype.toggleObjectPicker=function(){return this.objectModel.getRoleScope()>=0?(this.gtaHandler({action:"click add link handler",control:"add_link_handler",type:"Add Link Handler",method:"click",segment:"Add Link Handler"}),this.requestSubView(E).open(h,{enablePlugins:!0,exclude:[this._objectId],projectId:this._projectId,organizationId:this.organizationId,onSelect:this.createLinks,getInheritedInfo:this.options.getInheritedInfo}),this):this},t.prototype.createLinks=function(e){var t,n,r;return t={_parentId:this._objectId,parentType:this.boundToObjectType},("function"==typeof(n=this.objectModel).isRecurrenceEventInstance?n.isRecurrenceEventInstance():void 0)?i.saveAttrs(this.objectModel,{}).then((r=this,function(n){return t._parentId=n.id,r.createLinkApi(m.get(n.id),e,t)})):this.createLinkApi(this.objectlinksCollection,e,t)},t.prototype.createLinkApi=function(e,t,n){return Array.isArray(t)||(t=[t]),a.createLinks(e,t,n).then(function(e){if(!e.hasError)return w.success(tb_i18n.get("link.create.success"))}).catch()},t.prototype.enterObjectPreviewer=function(e){var t,n,r,o,i,s,a,c;if(this.$currentTarget=$(e.target),t=this.$currentTarget.closest("li").data("id"),i=this.objectlinksCollection.get(t))return o=i.get("linkedType"),B.call(p,o)>=0?this:(o=i.get("linkedType"),this.gtaHandler({action:"open detail",type:o,control:"link"}),"work"===o?this.showWorksPreviewer(i.get("_linkedId")):"collection"===o?f.enterCollection(i.get("_linkedId")):"yinxiang"===o?this.requestSubView(E).open(M,{linkModel:i}):"testplangroup"===o?(s=i.get("project"),a=i.get("testplan"),c="/project/"+s._id+"/testplan/"+a._id+"/group/"+i.get("_linkedId"),D.router.navigate(c,{trigger:!0})):(n={objectType:(r=this.objectlinksCollection.get($(e.currentTarget).data("id"))).get("linkedType"),objectId:r.get("_linkedId"),silentError:!1},this.requestSubView(E).open(d,n)),this)},t.prototype.showWorksPreviewer=function(e){var t,n,r,o,i,s;return t=null,r=[],n=[],i=j.sortBy(this.objectlinksCollection.where({linkedType:"work"}),function(e){return e.get("created")}),n=i.map(function(e){return e.id}),o=j.map(i,function(o){return new Promise(function(i,s){return I.fetch(o.get("_linkedId"),{silentError:!0,success:function(s){return r.push(s),n.push(o.id),s.id===e&&(t=s),i()},error:function(e,t){var n;return 401===(n=t.status)||403===n?(delete A.getData().models[e.id],delete A.getData().matrix[e.id],i()):s()}})})}),Promise.all(o).then((s=this,function(){var e;return t?((e={objectlinkIds:n,workModel:t}).workModels=r,s.requestSubView(E).open(g,e)):w.error({message:tb_i18n.get("authority.get.error"),description:tb_i18n.get("authority.get.error.content")})})).catch(function(e){return z(e)}),this},t.prototype.isCase=function(){var e;return null!=(e=this.objectlinksCollection)?e.length:void 0},t.prototype.hasPermission=function(){return this.objectModel.hasPermission("objectlink.post")},t.prototype.gtaConfig=function(e){return"task"===this.objectModel.get("objectType")&&(e=j.extend({type:this.objectModel.isSubtask()?"subtask":"task",series:this.objectModel.get("ancestorIds").length},e)),e},t.prototype.gtaHandler=function(e){var t;return t=this.gtaConfig(e),D.gta.event(t)},t}()},REuWawBV:function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty;c=n("a+N5u/Cl"),l=n("sa1Ed382"),s=n("vmWJWrVe"),o=n("llwZnbxj"),a=n("JDU1H68K"),i=n("L3Znt4sw"),r=n("yo9JmavA"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="TeamEventsView",t.prototype.className="team-events-view fade",t.prototype.initialize=function(e){var t;return this.teamModel=e.cardModel,this.eventsCollection=o.get(this.teamModel.id),this.objectModel=e.objectModel,this.renderBasic().renderWeekPicker().renderEvents().listen(),c.delay((t=this,function(){return t.$el.addClass("in")})),this},t.prototype.renderBasic=function(){return this.$el.html(r()),this.$weekSelectorWrap=this.$(".week-selector-wrap"),this.$eventsListWrap=this.$(".events-list-wrap"),this},t.prototype.listen=function(){return this.listenTo(this.eventsCollection,"remove add change:startDate change:endDate",this.renderEvents),this},t.prototype.renderWeekPicker=function(){var e;return this.weekPicker=this.requestSubView(a,{createdDate:this.objectModel.get("created"),onChange:(e=this,function(){return l.gta.event({action:"filter event date"}),e.renderEvents()})}),this.$weekSelectorWrap.html(this.weekPicker.$el),this},t.prototype.renderEvents=function(){var e;return this.showLoadingIndicator(this.$el),this.teamModel.fetchEvents({data:{startDate:this.weekPicker.startOfWeekInclusive(),endDate:this.weekPicker.endOfWeekExclusive()},success:(e=this,function(t){var n;if(e.$el)return e.eventsCollection.reset(t),e.eventsCollection.each(function(e){var t;return t=e.get("involvers")||[],e.set("involved",t)}),e.hideLoadingIndicator(),n=e.requestSubView(i,{groupBy:!0,rightOffset:0,showInvolved:e.objectModel.hasPermission("project.post.member"),weekly:e.weekPicker.startOfWeekInclusive(),eventsCollection:e.eventsCollection}),e.$eventsListWrap.html(n.$el)})}),this},t}()},RFRTfVZr:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;a=n("sa1Ed382"),s=n("vmWJWrVe"),r=n("Wd/8sFUG"),o=n("obMV6uGD"),i=n("cVygqyKw").PersonalSettingsNotification,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="PersonalSettingsNotificationView",t.prototype.className="personal-settings-notification-view personal-settings-container",t.prototype.initialize=function(){return this.render(),this.listen()},t.prototype.listen=function(){return"change:inboxSortMode change:notifications change:emails",this.listenTo(a.PREFERENCE,"change:inboxSortMode change:notifications change:emails",this.render)},t.prototype.render=function(){return this.requestReactView(this.el,i,{inboxSortMode:a.PREFERENCE.get("inboxSortMode"),notificationSetting:a.PREFERENCE.get("notifications"),dailyEmailSettings:a.PREFERENCE.get("emails").daily,onUpdateInboxSortMode:this.onUpdateInboxSortMode,desktopNotificationEnabled:r.axon.browser.isEnabled(),desktopNotificationSupported:r.axon.browser.isSupported(),onDesktopNotificationSet:this.onDesktopNotificationSet.bind(this),onDailyEmailSettingsChange:this.onDailyEmailSettingsChange})},t.prototype.onDailyEmailSettingsChange=function(e){var t;return t=a.PREFERENCE.get("emails"),a.PREFERENCE.updateEmailsSetting(Object.assign({},t,{daily:e}))},t.prototype.onDesktopNotificationSet=function(e){return a.gta.event({action:"desktop notification push",category:e?"on":"off",type:"desktop notification"}),e?(r.axon.browser.requestPermission().then(function(e){if("default"!==e&&o.permissionModalSubscription)return o.permissionModalSubscription.unsubscribe()}),r.axon.browser.enableNotification()):r.axon.browser.disableNotification(),this.render()},t.prototype.onUpdateInboxSortMode=function(e){var t;return t="unread"===e?"unread priority":"time priority",a.PREFERENCE.toggleInboxSortMode(e),a.gta.event({action:"sort notification",category:t})},t}()},RIMtnZSF:function(e,t,n){"use strict";n.r(t);var r=n("4BeYQFX4"),o=n.n(r),i=n("IaFtV71y"),s=n.n(i),a=new o.a({id:"object-post",use:"object-post-usage",viewBox:"0 0 20 20",content:'<symbol viewBox="0 0 20 20" id="object-post"><defs><path id="object-post_a" d="M14.1 14.358c-.417 0-.51-.355-.51-.791V7h1.01v6.567c0 .436-.084.79-.5.79zm1.45-8.6c.249 0 .45.21.45.47v7.539c0 .956-.742 1.733-1.655 1.733h-8.69C4.742 15.5 4 14.725 4 13.771v-8.8c0-.26.202-.471.45-.471h8.69c.25 0 .45.211.45.471v.786h1.96zm-4.342 1.1h-4.8a.461.461 0 0 0-.45.47.46.46 0 0 0 .45.472h4.8a.46.46 0 0 0 .45-.471.461.461 0 0 0-.45-.472zm-4.8 3.456h2.4a.46.46 0 0 0 .45-.471.46.46 0 0 0-.45-.471h-2.4a.46.46 0 0 0-.45.47.46.46 0 0 0 .45.472zm.024 1.572a.473.473 0 0 0-.474.471c0 .261.212.472.474.472h3.476a.472.472 0 1 0 0-.943H6.432z" /></defs><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#77C2F8" rx="2" /><use fill="#FFF" xlink:href="#object-post_a" /></g></symbol>'});s.a.add(a);t.default=a},RJeDJfm2:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g={}.hasOwnProperty;d=n("a+N5u/Cl"),f=n("sa1Ed382"),h=n("2qRnoGmE"),c=n("0FRv5rrl"),a=n("ypWNgh6R"),u=n("4WM0CzIx"),p=n("RkT8pnSa"),l=n("REuWawBV"),o=n("FLilGYJ1"),s=n("/lMFBNj1"),i=n("bNAEDLqP"),r=n("ecy4I4Uq"),m=function(){return{onlyMember:{subItems:[{title:tb_i18n.get("member.info"),icon:"icon-user",type:"member-info"}]},member:{subItems:[{title:tb_i18n.get("team.manger.tasks"),icon:"icon-checkbox-ios-checked",type:"member-tasks"},{title:tb_i18n.get("team.manger.events"),icon:"icon-calendar",type:"member-events"},{title:tb_i18n.get("member.info"),icon:"icon-user",type:"member-info"}]},team:{subItems:[{title:tb_i18n.get("team.manger.tasks"),icon:"icon-checkbox-ios-checked",type:"team-tasks"},{title:tb_i18n.get("team.manger.events"),icon:"icon-calendar",type:"team-events"},{title:tb_i18n.get("team.projects"),icon:"icon-collection",type:"team-projects"}]}}},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)g.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="TeamMemberDetailView",t.prototype.className="team-member-detail-view",t.prototype.events={"click .sub-menu-picker li:not(.active)":"switchContent"},t.prototype.initialize=function(e){if(e.cardModel)return this.options=e,this.isOrganization="organization"===this.options.cardModel.get("boundToObjectType")&&this.options.objectModel instanceof c,this.render()},t.prototype.render=function(){var e,t,n;return t=m()[this.options.objType].subItems,e=this.options.cardModel.toJSON(),"team"===this.options.objType&&(n={name:e.style.split(",")[0],color:e.style.split(",")[1]},e.style=n),this.data=d.extend({card:e,subItems:t,objType:this.options.objType},this.options),this.$el.html(r(this.data)),this.$subMenuList=this.$(".sub-menu-picker"),this.$subNav=this.$(".sub-menu-item"),this.$subMenuList.find("li:first-child").addClass("active"),this.$detailContent=this.$(".detail-picker-content"),this.switchContent()},t.prototype.switchContent=function(e){var t,n,r;if(e){if((t=$(e.currentTarget)).hasClass("active"))return;t.addClass("active").siblings().removeClass("active")}else this.options.fromPanel&&(r=this.options.type,this.$subMenuList.find("li[data-type='"+r+"']").addClass("active").siblings().removeClass("active"));switch(r=this.$subMenuList.find("li.active").data("type"),null!=(n=this.currentContentView)&&n.remove(),r){case"team-projects":this.renderTeamContent(u);break;case"team-tasks":this.renderTeamContent(p);break;case"team-events":this.renderTeamContent(l);break;case"member-info":this.renderMemberInfo(i);break;case"member-tasks":this.renderMemberContent(s);break;case"member-events":this.renderMemberContent(o)}return this.$detailContent.html(this.currentContentView.$el),this},t.prototype.renderTeamContent=function(e){var t;return t={organizationProjectsCollection:this.options.organizationProjectsCollection,teamProjectsCollection:this.options.teamProjectsCollection,objectModel:this.options.organizationModel},this.renderBasicView(t,e),this},t.prototype.canHandoverTasks=function(){var e,t;return t=this.options.cardModel.get("_userId")===f.user.id,e=this.options.objectModel.getRoleScope()>=1,h.FEATURES.handoverTasks&&this.isOrganization&&(e||t)},t.prototype.renderMemberContent=function(e){var t;return t={startDate:this.weekPicker?this.weekPicker.startOfWeek:void 0,noExecutor:!0,withCreate:!0,withHandover:this.canHandoverTasks(),objectModel:this.options.objectModel},this.renderBasicView(t,e),this},t.prototype.renderMemberInfo=function(e){var t;return t={fromPanel:this.options.fromPanel,objectModel:this.options.objectModel},this.renderBasicView(t,e),this},t.prototype.renderBasicView=function(e,t){var n;return n=d.extend({cardModel:this.options.cardModel},e),this.currentContentView=this.requestSubView(t,n),this},t}()},RLGFXQAd:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("fZoV3jYy"),l=n("mqeb6GpD"),u=n("85182E8g"),p=n("L7QuDhxB");function d(e){var t=e._organizationId,n=e.selected,o=e.excludes,s=e.noFilter,d=e.hideIndieEntry,h=e.objectType,m=e.onConfirm,f=e.permission,g=e.canToggle,v=i.a.useCallback(function(e){return Object(l.b)(e,t,h,f,o,g,s)},[t,h,f,o,s]),b=i.a.useCallback(function(){var e=t&&u.find(0).get(t)?"organization":"user",n=!(!t||u.find(0).get(t))||d;return Object(l.a)(n,t,h,f,o,g,e,s)},[t,d,h,f,o,s]),y=i.a.useCallback(function(e){var t=r.f(e.added,1)[0];if(t&&m){var n=e.result[t];m(n)}},[m]);return i.a.createElement(c.d,{classNames:a()(p["project-selector"],e.classNames),mode:c.c.Single,selected:n||[],recommendTitle:null,hideSelected:!0,alwaysShowSearch:!0,loadRecommend:b,loadSearch:v,commit:y,customHeight:e.customHeight})}},RSN8Fd0d:function(e,t){e.exports=function(e){var t='<ul class="list"> ';return e.permissions.put&&(t+=' <li> <a class="edit-handler" data-gta="{action: \'edit tag\', control: \'More Menu\'}"> <span class="icon icon-pencil"></span>'+tb_i18n.get("tag.menu.edit.title")+" </a> </li> "),t+=" ",e.permissions.putArchive&&(t+=" <li> ",e.isArchived?t+=' <a class="unarchive-handler" data-gta="{action: \'unarchive tag\', control: \'More Menu\'}"> <span class="icon icon-archive"></span>'+tb_i18n.get("unarchive")+" </a> ":t+=' <a class="archive-handler" data-gta="{action: \'archive tag\', control: \'More Menu\'}"> <span class="icon icon-trash"></span>'+tb_i18n.get("archive")+" </a> ",t+=" </li> "),t+="</ul>"}},RTj5z5YX:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("a+N5u/Cl"),s=n("tLZJUYWX"),a=n.n(s),c=n("s0r7VfKc"),l=n("sa1Ed382"),u=n("DOZCBSCZ"),p=n("GESwhXbR"),d=n("TSYQbtd+"),h=n.n(d),m=n("+2RfZ2TT"),f=n.n(m),g=n("QdDHtIVR"),v=n("Nrj6GuDs"),b=n.n(v),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.saveQRcode=function(e){t.qrcode=e},t.saveInput=function(e){t.input=e},t.getLink=function(){return t.props.linkObj.shareLink},t.onPasteSuccess=function(){t.props.gtaOptions&&l.gta.event(t.props.gtaOptions),p.Toast.success({message:a.a.get("share.link.paste.success")})},t.onPasteFail=function(){p.Toast.error({message:a.a.get("share.link.paste.fail")})},t.handleSelect=function(){t.input.select()},t.renderClipHandler=function(e){var n=e.ref,r=t.props.wider?a.a.get("share.link.copy.link.handler"):o.createElement(p.Icon,{name:"share-clone",size:16});return o.createElement("div",{className:b.a["copy-handler"],ref:n,onClick:t.handleSelect},r)},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.setQrCode()},t.prototype.componentDidUpdate=function(){this.setQrCode()},t.prototype.setQrCode=function(){var e=this.props.wider?124:96;f()(this.qrcode).empty().qrcode({size:e,text:this.props.linkObj.qrLink,background:"white"})},t.prototype.renderClipper=function(){return o.createElement(g.a,{getClipText:this.getLink,onPasteSuccess:this.onPasteSuccess,onPasteFail:this.onPasteFail},this.renderClipHandler)},t.prototype.renderInput=function(){return o.createElement(p.Input,{ref:this.saveInput,defaultValue:this.props.linkObj.shareLink,key:this.props.linkObj.shareLink,className:b.a.input,suffix:this.renderClipper()})},t.prototype.renderQRcode=function(){return this.props.showQRCode&&o.createElement("div",{className:h()(b.a.qrcode,this.props.qrcodeClassName)},o.createElement("div",{ref:this.saveQRcode,className:b.a["qrcode-wrapper"]}),o.createElement("div",{className:b.a["wechat-hint"]},o.createElement("div",{className:b.a["wechat-icon"]}),o.createElement("p",null,a.a.get("share.link.wechat.hint"))))},t.prototype.renderDescription=function(){return this.props.description&&o.createElement("p",{className:b.a.description},this.props.description)},t.prototype.render=function(){var e,t=h()(b.a["link-content"],((e={})[b.a.wider]=this.props.wider,e));return o.createElement("div",{className:t},this.renderDescription(),this.renderQRcode(),this.renderInput())},t.defaultProps={wider:!1},t}(o.PureComponent),k=function(e){function t(t){var n=e.call(this,t)||this;return n.share=null,n.links=null,n.onEnable=function(){n.setState({submitting:!0}),l.gta.event({action:"shared content",control:"More Menu",type:n.props.objectType}),"task"===n.props.objectType?c.default.fetch.enableTaskShare(n.props.model.id).subscribe(function(e){var t=e.shareLink,r=e.qrLink;n.links={shareLink:t,qrLink:r},n.setState({submitting:!1})}):n.props.model.share({success:function(e){e&&(n.share=e),n.setState({submitting:!1})}})},n.onDisable=function(){n.setState({submitting:!0}),l.gta.event({action:"stopped sharing",control:"More Menu",type:n.props.objectType}),"task"===n.props.objectType?c.default.fetch.disableTaskShare(n.props.model.id).subscribe(function(){n.links=null,n.setState({submitting:!1})}):n.props.model.cancelShare(n.share._id,{success:function(){n.share=null,n.setState({submitting:!1})}})},n.state={loading:!0,submitting:!1},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;"task"===this.props.objectType?this.taskShareSubscription=c.default.fetch.getTaskShare(this.props.model.id).subscribe(function(t){var n=t.shareLink,r=t.qrLink;t.isShared&&(e.links={shareLink:n,qrLink:r}),e.setState({loading:!1})}):this.props.model.shareDetails({success:function(t){var n=i.findWhere(t,{isReadonly:!0});n&&(e.share=n),e.setState({loading:!1})}})},t.prototype.componentWillUnmount=function(){this.taskShareSubscription&&this.taskShareSubscription.unsubscribe()},t.prototype.isEnabled=function(){return"task"===this.props.objectType?!!this.links:!!this.share},t.prototype.renderEnabledButton=function(){return this.props.model.canPutShareStatus()?o.createElement(p.Button,{disabled:this.state.submitting,onClick:this.onEnable,className:b.a.button},a.a.get("common.share.enable")):null},t.prototype.renderDescription=function(){var e=this.props.model.canPutShareStatus()?a.a.get("common.share.description.text",a.a.get("share.type."+this.props.objectType)):a.a.get("common.share.description.text.no.permission",a.a.get("share.type."+this.props.objectType));return!this.state.loading&&!this.isEnabled()&&o.createElement(o.Fragment,null,o.createElement("div",{className:b.a["description-image"]}),o.createElement("p",{className:b.a["description-hint"]},e),this.renderEnabledButton())},t.prototype.renderDisabledButton=function(){return this.props.model.canPutShareStatus()?o.createElement(p.Button,{disabled:this.state.submitting,onClick:this.onDisable,className:b.a.button},a.a.get("common.share.disable")):null},t.prototype.renderLink=function(){if(this.state.loading||!this.isEnabled())return null;var e;e="task"===this.props.objectType?this.links:{shareLink:this.share.shareLink,qrLink:this.share.mobileShareLink};var t={action:"copy share link",type:this.props.objectType};return o.createElement(o.Fragment,null,o.createElement(y,{linkObj:e,description:a.a.get("object.share.link.description",a.a.get("share.type."+this.props.objectType)),gtaOptions:t,showQRCode:!0}),this.renderDisabledButton())},t.prototype.renderLoading=function(){return this.state.loading&&o.createElement(u.a,null)},t.prototype.render=function(){return o.createElement("div",{className:b.a.body},this.renderLoading(),this.renderLink(),this.renderDescription())},t}(o.PureComponent),_=n("2qRnoGmE"),w=n.n(_),C=n("4ah31yVQ"),S=n("sI91bM9S"),E=n.n(S),T=function(e){function t(t){var n=e.call(this,t)||this;return n.handleLinkTypeToggle=function(e){n.setState({linkObjArrIndex:e})},n.state={linkObjArrIndex:0},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.inviteLinkSubscription=c.default.fetch.getObjectInviteLink(this.props.objectType+"s",this.props.objectId).subscribe(function(t){var n=t.innerInviteLink,r=t.innerQrLink,o=t.inviteLink,i=t.qrLink,s=[{label:a.a.get("invite.org.outer.member"),shareLink:o,qrLink:i},{label:a.a.get("invite.org.inner.member"),shareLink:n,qrLink:r}],c=s.findIndex(e.isValidLinkObj);e.setState({linkObjArr:s,linkObjArrIndex:c})})},t.prototype.componentWillUnmount=function(){this.inviteLinkSubscription&&this.inviteLinkSubscription.unsubscribe()},t.prototype.isValidLinkObj=function(e){return Boolean(e.shareLink&&e.qrLink)},t.prototype.renderLinkToggleButton=function(){return this.state.linkObjArr?this.state.linkObjArr.map(function(e,t){return o.createElement(p.ToggleButton,{key:t,title:e.label,value:t})}):null},t.prototype.renderLinkToggleButtonGroup=function(){return o.createElement(p.ToggleButtonGroup,{className:h()(E.a["link-type-switch"],{wider:this.props.wider}),size:"small",curValue:this.state.linkObjArrIndex,onButtonClick:this.handleLinkTypeToggle},this.renderLinkToggleButton())},t.prototype.render=function(){if(!this.state.linkObjArr)return o.createElement(u.a,null);if(0===this.state.linkObjArr.length)return null;var e=this.state.linkObjArr[this.state.linkObjArrIndex],t=this.isValidLinkObj(e)?o.createElement(y,{linkObj:e,wider:this.props.wider,showQRCode:w.a.FEATURES.weixinInvite,qrcodeClassName:h()(E.a.qrcode,{wider:this.props.wider})}):o.createElement(C.a,{className:E.a["invite-forbidden"]});return o.createElement(o.Fragment,null,this.renderLinkToggleButtonGroup(),t)},t.defaultProps={wider:!1},t}(o.PureComponent),I=n("g+V4+aKB");n.d(t,"CommonShare",function(){return k}),n.d(t,"InviteLink",function(){return T}),n.d(t,"ShareLink",function(){return y}),n.d(t,"ShareStatus",function(){return I.ShareStatus}),n.d(t,"isReadonlyShare",function(){return I.isReadonlyShare})},"RZPZv1M/":function(e,t,n){e.exports={"task-due-date":"task-due-date__3AIB"}},Rb7YhHxV:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;s=n("a+N5u/Cl"),r=n("qHH6+g6Q"),o=n("3eMzznN/"),i=n("8N+zwa3A"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="post",t.prototype.urlRoot="posts",t.prototype.defaults={objectType:"post",involveMembers:[],links:[]},t.prototype.listen=function(){if(!this.listenedLock&&this.id)return this.listenedLock=!0,this.on("change:visible",function(e){var t;if(!e.checkIsVisible())return null!=(t=e.collection)?t.remove(e):void 0}),t.__super__.listen.apply(this,arguments)},t.prototype.initialize=function(){return this.on("change",this.initSubscribe),t.__super__.initialize.apply(this,arguments)},t.prototype.parse=function(e){return(e=s.extend(this.toJSON(),e)).description=o.genPostDescription(e),e},t.prototype.initSubscribe=function(){var e,t,n,r;for(t=0,n=(e=this.get("attachments")||[]).length;t<n;t++)r=e[t],this.subscribeTo(r._id,"change",function(e){return function(t){return e.updateAttachments(t.toJSON())}}(this)),this.subscribeTo(r._id,"destroy",function(e){return function(t){return e.removeAttachments(t)}}(this));return this},t.prototype.updateAttachments=function(e){var t,n,r,o,i;for(o=[],n=0,r=(t=this.get("attachments")||[]).length;n<r;n++)i=t[n],e._id!==i._id?o.push(i):o.push(e);return this.set("attachments",o),this},t.prototype.removeAttachments=function(e){var t,n,r,o,i;for(o=[],n=0,r=(t=this.get("attachments")||[]).length;n<r;n++)(i=t[n])._id!==e&&o.push(i);return this.set("attachments",o),this},t.prototype.getAttachmentDatas=function(){var e,t,n,r,o;for(r=[],t=0,n=(e=this.get("attachments")||[]).length;t<n;t++)o=e[t],r.push(i.formatWork(o));return r},t.prototype.pin=function(e){return null==e&&(e={}),e.attrs={pin:!0},this.thumbUp("pin","update",e),this},t.prototype.unpin=function(e){return null==e&&(e={}),e.attrs={pin:!1},this.thumbUp("pin","update",e),this},t.prototype.forkOrMove=function(e,t,n){return n||(n={}),n.url=this.url()+"/"+e,n.attrs={_projectId:t},this.sync("update",this,n),this},t}()},Rdt1eeJR:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("GESwhXbR").Toast,o=n("hGNqppva"),r=n("M9EbmBqr"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.className="project-settings-group-menu-view",t.prototype.viewName="ProjectSettingsGroupMenuView",t.prototype.popoverTitle="",t.prototype.width=280,t.prototype.events={"click .remove-handler":"removeGroup"},t.prototype.initialize=function(e){if(null==e&&(e={}),e.projectModel||e.memberModel)return this.popoverTitle=tb_i18n.get("group.menu"),this.projectModel=e.projectModel,this.groupModel=e.objModel,this.cannotRemove=e.cannotRemove,this.projectGroupsCollection=e.projectGroupsCollection,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return this.$el.html(r()),this},t.prototype.removeGroup=function(e){var t;return this.hide(),t=$(e.currentTarget).data("action"),this.removeMember="remove"===t,this.groupModel.removeProject(this.projectModel.id,{attrs:{removeMember:this.removeMember},success:function(){return i.success(tb_i18n.get("remove.success"))}})},t}()},Ri58Iblv:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h={}.hasOwnProperty,m=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};a=n("a+N5u/Cl"),c=n("2qRnoGmE"),r=n("odY26VIi"),o=n("fnKB+hQu"),i=n("3eMzznN/"),s=n("vmWJWrVe"),d=n("sa1Ed382"),u=n("8KNpsyVU"),p=u.showVerifyBindModal,l=u.getAccountBind,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)h.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="MemberFinderView",t.prototype.initialize=function(e){if((null!=e?e.collection:void 0)&&e.$searchbox)return this.options=e,this.debouncedDoSearch=a.debounce(this.doSearch.bind(this),200),this.reset(e.collection)},t.prototype.reset=function(e){return this.$searchbox=this.options.$searchbox,this.collection=e||new r,this.initAutoComplete(),this},t.prototype.initAutoComplete=function(){var e;return this.$searchbox.autocomplete({appendTo:"body",autoFocus:!0,create:function(e,t){return $("body > .ui-autocomplete.ui-menu").addClass("dropdown-menu").addClass("member-finder-dropdown-menu").css({zIndex:1e4,visibility:"visible",opacity:1})},select:(e=this,function(t,n){return l(e.options._organizationId).then(function(r){var o;return r?(n.item.isNew&&"phone"===n.item.type||"function"==typeof(o=e.options).select&&o.select(n,t),e.$searchbox.val(""),e.$searchbox.trigger("change")):(p(),d.gta.event({action:"invitation blocked",page:"Tasks Page",type:"project"}))}),e}),source:function(e){return function(t,n){return t.term=t.term.trim(),e.search(t.term.trim(),{data:{_organizationId:e.options._organizationId},beforeSend:function(t){return e.showLoadingIndicator(e.$searchbox,{isPrepend:!0})},success:function(r){var o;return e.hideLoadingIndicator(),r=e.analysisResult(r,t.term),o=e.options.newEmailPrefix||"",a.each(r,function(n){if(n.searchType=e.getSearchType(t.term),n.name||(n.name=n.value),n.isNew&&"phone"===n.type&&(n.name=tb_i18n.get("member.finder.unregistered.phone")),n.isNew&&"email"===n.type)return n.name=""+o+n.name}),n(r)}})}}(this)}),this.autocomplete=this.$searchbox.data("ui-autocomplete"),this.autocomplete._renderItem=function(e,t){return $(o(t)).appendTo(e)},this.autocomplete.liveRegion=$("<span>"),this},t.prototype.getSearchType=function(e){switch(!1){case!i.isEmail(e):return"email";case!i.isPhone(i.formatPhone(e)):return"phone";default:return"username"}},t.prototype.search=function(e,t){var n;if(null==t.data&&(t.data={}),e=e.trim(),"phone"===(n=this.getSearchType(e))&&(e=i.formatPhone(e),c.FEATURES.enable_alias_in_member_search&&(t.data.username=e)),c.FEATURES.enable_alias_in_member_search||"username"!==n)return this.debouncedDoSearch(n,e,t)},t.prototype.doSearch=function(e,t,n){return this.collection.search(e,t,n)},t.prototype.analysisResult=function(e,t){var n,r,o,i,s,a,l;if(n=this.collection.getMemberIds(),l=this.getSearchType(t),a=[],(null!=e?e.length:void 0)>0)for(r=0,o=e.length;r<o;r++)(i=e[r]).type="email",s=i._id,m.call(n,s)>=0&&(i.invited=!0),a.push(i);else("phone"===l||"email"===l&&c.FEATURES.showInviteUserByEmail)&&a.push({isNew:!0,value:t,email:t,type:l});return a},t}()},"RjhZVbd/":function(e,t){e.exports=function(e){return'<header class=\'flex\'> <span class="icon icon-folder"></span> <span class="title">'+tb_i18n.get("work.versions.info")+'</span></header><ul class="work-versions-list"></ul>'}},RkT8pnSa:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;s=n("sa1Ed382"),i=n("gBe2F1Rz"),r=n("zWSZY3sR"),o=n("bZr3G77e"),a=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="TeamTasksView",t.prototype.className="team-tasks-view all-tasks-list thin-scroll",t.prototype.events={"click .task-create-handler":"openTaskCreator","click .task .task-content-set":"gtaLogOpenDetail","click .task .check-box-wrapper":"gtaToggleCompleteTask","click .tasks-board-date-menu":"toggleDateSelector"},t.prototype.initialize=function(e){var n;return this.teamModel=e.cardModel,this.doneTasksCollection=new i([],{bindByMatrix:!1}),this.tasksPageToken=void 0,this.load({success:(n=this,function(){return n.renderBasic(),n.refreshUndoTasks(),n.listen()})}),t.__super__.initialize.apply(this,arguments)},t.prototype.fetchTasks=function(e){var t,n,r,i;return i=e.pageSize,t=e.isDone,r=e.minAccomplished,n=e.maxAccomplished,o.get("v2/tasks",{data:{isDone:t,pageSize:i,scope:"execute",pageToken:this.tasksPageToken,includeInvisible:!0,maxAccomplished:n?new Date(n).toISOString():void 0,minAccomplished:r?new Date(r).toISOString():void 0,_organizationId:this.teamModel.get("_organizationId"),_teamId:this.teamModel.id}})},t.prototype.load=function(e){var t;return this.tasksPageToken=void 0,this.showLoadingIndicator(this.$el),this.fetchTasks({isDone:!1,pageSize:1e3}).then((t=this,function(n){var r;if(r=n.result,t.$el)return t.tasksCollection=new i(r,{bindByMatrix:!1}),t.hideLoadingIndicator(),e.success()})).catch(function(e){return a(e)}),this},t.prototype.loadDoneTasks=function(e){var t,n,r,o;return t=(r=e.attrs).maxAccomplished,n=r.minAccomplished,this.fetchTasks({minAccomplished:n,maxAccomplished:t,isDone:!0,pageSize:50}).then((o=this,function(t){var n,r;if(n=t.nextPageToken,r=t.result,o.$el)return o.tasksPageToken=n,o.doneTasksCollection.add(r),o.doneTasksCollection.hasMore=30===r.length&&n,o.hideLoadingIndicator(),e.success()})).catch(function(e){return function(t){return e.hideLoadingIndicator(),a(t)}}(this)),this},t.prototype.gtaLogOpenDetail=function(e){var t;return t=$(e.currentTarget),s.gta.event({action:"open detail",control:"Org Teams Task List",series:t.data("series")||0,type:t.data("type")||"task"})},t.prototype.gtaToggleCompleteTask=function(e){var t;return t=$(e.currentTarget),s.gta.event({action:"toggle complete task",control:"Org Teams Task List",series:t.data("series")||0,type:t.data("type")||"task"})},t}()},"Rkf+47A7":function(e,t,n){e.exports=n.p+"images/d_bizui@2x.820d4d78.png"},RqASgP7q:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("sa1Ed382"),r=n("aD6I3VT4"),o=n("yp7eYona").Priority,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.tagName="section",t.prototype.viewName=t,t.prototype.className="detail-infos-priority-view no-border-wrapper",t.prototype.initialize=function(e){return this.taskModel=e.taskModel,this.simplifiedVersion=e.simplifiedVersion,this.canEdit=e.canEdit,t.__super__.initialize.apply(this,arguments),this.render(),this.listen()},t.prototype.render=function(){if(this.el)return this.requestReactView(this.el,o,{hasPermission:this.hasPermission(),priority:this.taskModel.get("priority"),withTitle:!this.simplifiedVersion,onChangePriority:this.onChangePriority.bind(this)})},t.prototype.listen=function(){var e;return e=["change:priority","change:_executorId","change:isArchived"],this.listenTo(this.taskModel,e.join(" "),this.render)},t.prototype.onChangePriority=function(e){return this.taskModel.id?(this.taskModel.saveAttr("priority",e),this.saveGtaHandler(e)):(this.taskModel.set({priority:e}),this.createGtaHandler(e))},t.prototype.saveGtaHandler=function(e){var t;return t={action:"select priority",type:this.taskModel.isSubtask()?"subtask":"task",series:this.taskModel.get("ancestorIds").length,category:this.parsePriorityGtaCategory(e)},i.gta.event(t)},t.prototype.createGtaHandler=function(e){var t;return t={action:"select priority",note1:"new task",category:this.parsePriorityGtaCategory(e)},i.gta.event(t)},t.prototype.parsePriorityGtaCategory=function(e){switch(e){case 0:return"ordinary";case 1:return"urgent";case 2:return"very urgent";default:return"ordinary"}},t.prototype.hasPermission=function(){return this.canEdit},t.prototype.isCase=function(){return!0},t}()},RrY8rmjH:function(e,t){e.exports=function(e){var t='<div class="popover-desc ';return e.confirmStr||e.cancelStr||(t+="mute-text"),t+='"> <p>'+e.description+'</p></div><div class="popover-button-group cleaxfix"> ',e.cancelStr&&(t+=' <div class="btn-wrap pull-left',e.confirmStr||(t+=" full-width"),t+='"> <button class="popover-cancel-handler btn btn-default btn-block">'+e.cancelStr+"</button> </div> "),t+=" ",e.confirmStr&&(t+=' <div class="btn-wrap pull-left',e.cancelStr||(t+=" full-width"),t+='"> <button class="popover-confirm-handler btn btn-primary btn-block',e.isDanger&&(t+=" btn-danger"),t+='">'+e.confirmStr+"</button> "),t+="</div>"}},RwGLdX00:function(e,t){e.exports=function(e){return'<div class="org-structure-loading"></div><div class="org-structure-container"></div><div class="member-profile-form-modal"></div><div class="upload-member-container"></div>'}},RxbwIdZL:function(e,t){},Ryg6H48r:function(e,t,n){},"S/weIEx5":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m={}.hasOwnProperty;c=n("4c1CS0b3").Observable,h=n("sa1Ed382"),u=n("vmWJWrVe"),p=n("8N+zwa3A"),o=n("E86Oiqt3"),l=n("77NnVLwu"),a=n("odY26VIi"),s=n("vNWLjLJF"),i=n("fnRWEXeT"),d=n("5CiSxGri"),r=n("3778TAaH"),n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)m.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,u),t.prototype.viewName="WorkCreatorView",t.prototype.className="work-creator-view creator-view modal-dialog",t.prototype.events={"click .creator-location-handler":"toggleCollectionPicker","click .submit-handler":"submit"},t.prototype.initialize=function(e){if(null==e&&(e={}),this.options=e,this.isWorkspace=e.isWorkspace,this.worksCollection=this.options.worksCollection,this.globalTarget=h.APP.getGlobalUploaderTargetInfo(),this.projectModel=this.globalTarget.projectModel,!this.projectModel||!this.worksCollection)throw new Error("no projectModel or worksCollection in work-creator");return this.reset(),this.renderBasic(),this.renderLoaction(),this.renderWorks(),this.renderInvolve()},t.prototype.reset=function(){var e;return this._collectionId=(null!=(e=this.collectionModel)?e.id:void 0)||this.globalTarget.collectionId,this.worksCollection._boundToObjectId=this._collectionId,this.worksCollection._projectId=this.projectModel.id,this.involveModel||(this.involveModel=this.createWorkModel(this.projectModel.id)),this.listen()},t.prototype.listen=function(){return this.stopListening(),this.listenTo(this.worksCollection,"add remove",this.renderWorks)},t.prototype.renderBasic=function(){return this.$el.html(r({gta_from:this.options.gta_from})),this.$location=this.$(".creator-location"),this.$involveWrap=this.$(".creator-involve"),this.$worksWrap=this.$(".work-creator-works-wrap"),this.$creatorWrap=this.$(".work-creator-wrap"),this.$pickerWrap=this.$(".work-creator-picker-wrap"),this},t.prototype.renderLoaction=function(){var e,t,n,r,i;return n=this.projectModel.get("name"),this.$location.text(n),i=this,r=function(e){if(e.length)return e.unshift(n),i.$location.text(e.join(tb_i18n.get("comma")))},t=[],(e=function(n){return function(i){return i?o.fetch(i,{success:function(r){if(n.$el)return(i=r.get("_parentId"))&&t.unshift(r.get("title")),e(i)},error:function(){return r(t)}}):r(t)}}(this))(this._collectionId),this},t.prototype.renderWorks=function(){var e,t;return this.worksCollection.length?(e=this.$worksWrap.empty(),this.worksCollection.each((t=this,function(n){return t.requestSubView(d,{workModel:n}).$el.appendTo(e)}))):this.close()},t.prototype.renderInvolve=function(){var e;return e=this.$involveWrap.empty(),this.requestSubView(s,{_projectId:this.projectModel.id,objectModel:this.involveModel,resident:[h.user.id],where:"creator",enableInvite:this.canInvite(),hideAllProjectMembers:!this.canInvite(),contextId:{_parentId:this._collectionId},scenario:this.canInvite()?"project-members":"visible-members"}).$el.appendTo(e),this},t.prototype.canInvite=function(){return!!this.projectModel.hasPermission("post.member")&&(this.collectionModel?"members"===this.collectionModel.get("visible"):"members"===this.globalTarget.visible)},t.prototype.toggleCollectionPicker=function(){return this.isPicking?this.hideCollectionPicker():this.showCollectionPicker()},t.prototype.showCollectionPicker=function(){var e,t,n;return this.isPicking=!0,this.$el.addClass("on-picking"),(null!=(e=this.collectionModel)?e.get("title"):void 0)||this.projectModel.get("name"),null!=(t=this.picker)&&t.remove(),this.picker=this.requestSubView(i,{_projectId:this.projectModel.id,_parentId:this._collectionId,isWorkspace:this.isWorkspace,isGlobalUpload:!0,title:tb_i18n.get("work.creator.tips"),select:(n=this,function(e){var t,r;return(t=e.get("_projectId"))===n.involveModel.get("_projectId")&&e.id===n.collectionModel.id||(n.involveModel=n.createWorkModel(t)),n.collectionModel=e,null!=(r=n.collectionPickerViewSelectSub)&&r.unsubscribe(),n.collectionPickerViewSelectSub=n.subscribe(c.forkJoin(l.fetch$(t).do(function(e){n.projectModel=e}),a.fetch$(t)).do(function(){return n.reset(),n.renderLoaction(),n.renderWorks(),n.renderInvolve(),h.APP.worksBgUploader.updateWorks()}))}),onClosed:function(e){return function(){return e.hideCollectionPicker()}}(this)}).$el.removeClass("modal-dialog").appendTo(this.$pickerWrap.empty()),this.$pickerWrap.show(),this.$creatorWrap.hide()},t.prototype.createWorkModel=function(e){return new p({_creatorId:h.user.id,_projectId:e,involveMembers:[h.user.id]})},t.prototype.hideCollectionPicker=function(){return this.isPicking=!1,this.$el.removeClass("on-picking"),this.$pickerWrap.hide(),this.$creatorWrap.show()},t.prototype.submit=function(){var e,t;return t=this.involveModel.pick("involveMembers","involveTeams","involveGroups","involveAllProjectMembers"),this.worksCollection.each(function(e){return e.set(t)}),"function"==typeof(e=this.options).success&&e.success(),this.close()},t.prototype.close=function(){var e,t;return(null!=(e=this.parentView)?e.close:void 0)?this.parentView.close():null!=(t=this.parentView)&&t.remove(),this},t.prototype.remove=function(){return this.options.close(),t.__super__.remove.apply(this,arguments)},t}()},"SGcmjT4+":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("u//1fy1x"),o=n("j+mhrgl0"),i=n.n(o),s=Object(r.default)(i.a.Constructor);window.setTimeout(function(){s=Object(r.default)(i.a.Constructor)},0)},SVEFF54Z:function(e,t,n){},SZxc5CJv:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<ul class="list-unstyled"> ',i=e.dataList;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=" ","CUSTOM"===(s=i[a+=1])._id&&(o+=' <li class="divider"></li> '),o+=' <li class="repeat-picker-item ',e.selected===s._id&&(o+="selected"),o+='" data-id="'+s._id+'"> <a>'+r(s.title)+"</a> </li> ","CUSTOM"===s._id&&e.description&&(o+=' <li> <p class="repeat-description">'+e.description+"</p> </li> "),o+=" ";return o+="</ul>"}},SaPkAFtJ:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("mrSGxOB2"),o=n("a+N5u/Cl"),i=n("q1tIBJhx"),s=n("4c1CS0b3"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.targetEl,n=e.mouseMoveTarget,i=void 0===n?document:n,a=e.onClick,c=void 0===a?o.noop:a,l=e.onDragStart,u=void 0===l?o.noop:l,p=e.onDragging,d=e.onDrop,h=void 0===d?o.noop:d,m=e.isTargetDraggable,f=void 0===m?function(){return!0}:m;this.dragSub=s.Observable.fromEvent(t,"mousedown").switchMap(function(e){if(!f(e.target))return s.Observable.empty();var t=0,n=s.Observable.fromEvent(document,"mouseup").take(1);return s.Observable.fromEvent(i,"mousemove").map(function(n,r){return t+=1,1===r&&u({mouseDownEvent:e,mouseMoveEvent:n}),n}).pairwise().do(function(t){var n=r.f(t,2),o=n[0],i=n[1];p({mouseDownEvent:e,mouseMoveEvent:i,previous:{mouseMoveEvent:o}})}).takeUntil(n.do(function(e){t<=1?c(e):h(e)}))}).subscribe()},t.prototype.componentWillUnmount=function(){this.dragSub.unsubscribe()},t.prototype.render=function(){return null},t}(i.PureComponent)},SarpuGbc:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("mrSGxOB2"),o=n("TSYQbtd+"),i=n.n(o),s=n("q1tIBJhx"),a=n("sa1Ed382"),c=n("bI6GdBuM"),l=n("bv63Y0YZ"),u=n("vUGUgKq+"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cxPrefix="project-list-group",t.handleAddProjectMemberClick=function(e,n){var r=t.props.onAddProjectMemberClick;r&&r(e,n)},t.handleArchiveProjectClick=function(e,n){var r=t.props.onArchiveProjectClick;r&&r(e,n)},t.handleDestoryProjectClick=function(e,n){var r=t.props.onDestoryProjectClick;r&&r(e,n)},t.handleJoinProjectClick=function(e,n){var r=t.props.onJoinProjectClick;r&&r(e,n)},t.renderAddCard=function(){return t.props.isCreateProjectEnable?s.createElement("li",{className:t.getItemClassName()},s.createElement(l.ProjectListAddCard,{className:t.getCardClassName(),onCreateProjectClick:t.handleCreateProjectClick})):null},t}return r.d(t,e),t.prototype.componentDidMount=function(){a.gta.event({action:"show project list",method:"trace"})},t.prototype.getCardClassName=function(){var e=this.props.itemClassName;return i()(this.cxPrefix+"__card",e)},t.prototype.getItemClassName=function(){return i()(this.cxPrefix+"__item")},t.prototype.renderCardList=function(){var e=this,t=this.props.projects;return Object(u.a)(t)?null:t.map(function(t){return s.createElement("li",{className:e.getItemClassName(),key:t._id},s.createElement(l.ProjectListCard,{className:e.getCardClassName(),project:t,onAddProjectMemberClick:e.handleAddProjectMemberClick,onArchiveProjectClick:e.handleArchiveProjectClick,onEnterProjectClick:e.handleEnterProjectClick,onOpenProjectSettingClick:e.handleOpenProjectSettingClick,onStarProjectClick:e.handleStarProjectClick,onUnstarProjectClick:e.handleUnstarProjectClick,onJoinProjectClick:e.handleJoinProjectClick,onSuspendProjectClick:e.handleSuspendProjectClick,onDestoryProjectClick:e.handleDestoryProjectClick,onUnSuspendProjectClick:e.handleUnSuspendProjectClick,onUnArchiveProjectClick:e.handleUnArchiveProjectClick}))})},t.prototype.render=function(){return s.createElement("ul",{className:this.cxPrefix+"__component"},this.renderCardList(),this.renderAddCard())},t}(c.AbstractProjectGroup)},ScL7a4sY:function(e,t,n){e.exports={root:"root__u0bC","selector-wrapper":"selector-wrapper__2mMc","selector-wrapper-label":"selector-wrapper-label__4Pvx",tips:"tips__2Cxq","dumb-select":"dumb-select__1DBa","dumb-select-selected":"dumb-select-selected__75qI","dumb-select-selected-name":"dumb-select-selected-name__3Dji","project-selector":"project-selector__1U5D","project-selector-content":"project-selector-content__3zXj","project-selector-input":"project-selector-input__3yuo","project-selector-list":"project-selector-list__fOn5","project-selector-group-title":"project-selector-group-title__10DG","item-wrapper":"item-wrapper__Svuh","item-wrapper-name":"item-wrapper-name__3S2p","item-wrapper-tick":"item-wrapper-tick__2CNL","scenario-selector":"scenario-selector__2hEC","dumb-select-trigger":"dumb-select-trigger__6veh","project-selector-trigger":"project-selector-trigger__22Sd","project-selector-dropdown":"project-selector-dropdown__1V8n"}},Sfl3gFfI:function(e,t){e.exports=function(e){return'<div class="organization-placeholder-leftside"> <div class="organization-placeholder-topside organization-placeholder"> <div class="organization-placeholder-header"> <h4>'+e.header.title+"</h4> <p> "+e.header.description+' </p> </div> </div></div><div class="organization-placeholder-rightside"> <div class="organization-placeholder-video organization-placeholder"> <div class="slider-container"> <video class="active slider-child" poster="'+e.sliderInfo.poster+'" preload="metadata"> <source src="'+e.sliderInfo.video+'" type="video/mp4"> </video> <span class="icon icon-play play-ctrl"></span> </div> </div></div>'}},SjN417uV:function(e,t,n){"use strict";n.r(t);var r=n("tLZJUYWX"),o=n.n(r),i=n("q1tIBJhx"),s=n.n(i),a=n("sa1Ed382"),c=n("80gYlwjC"),l=n("HDJEOtNh"),u=n("GESwhXbR"),p=function(e){return function(){a.gta.event({action:"add content",type:"organization",control:"payment-status",payment:c.Payment.create(e.plan),role:Object(l.getRoleScopeByOrgId)(e._id),organizationId:e._id,from:"Organization Member",private:!0})}},d=function(e){return u.Toast.success({message:o.a.get("organization.member.add.success.title"),handlers:s.a.createElement(u.TextButton,{color:"blue",onClick:p(e)},o.a.get("organization.member.exceed.upgrade")),description:o.a.get("organization.member.add.success.desc")})};n.d(t,"displayMemberCountExceedToast",function(){return d})},SkIG4JfB:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("TSYQbtd+"),a=n.n(s),c=n("HYobN8SQ"),l=n.n(c),u=n("sa1Ed382"),p=n("Ve9G5Tva"),d=n("BsTK5jZO"),h=n("1gEXmjU5"),m=n("sa1Ed382"),f=n("7lRKyXCu"),g=n("eIZlrYEN"),v=n("UiLfX8VM"),b=function(e){function t(t){var n=e.call(this,t)||this;return n.getTextWrapper=function(e){n.textWrapper=e},n.testcaseModel=new g(n.props.testcase,{bindByMatrix:!1}),n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.testcase.precondition!==this.props.testcase.precondition&&this.testcaseModel.set({precondition:e.testcase.precondition})},t.prototype.componentDidMount=function(){var e=m.APP.requestSubView(f,{objectModel:this.testcaseModel,noteAttribute:"precondition",placeholder:i.get("testcase.scenariofields.precondition.placeholder"),onSavePrecondtion:this.props.onChange}).el;this.textWrapper.appendChild(e)},t.prototype.render=function(){return o.createElement("div",{className:v.precondition,ref:this.getTextWrapper})},t}(o.PureComponent),y=n("a+N5u/Cl"),k=n("Nxrdcgel"),_=n("GESwhXbR"),w=n("NxDWsJua"),C=n("pAvVHQ+W"),S=n.n(C),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChange(e)},t}return r.d(t,e),t.prototype.render=function(){var e,t=a()(S.a.input,((e={})[S.a["input-disabled"]]=!this.props.canEdit,e[S.a["input-placeholder"]]=!this.props.hidePlaceholder,e)),n=this.props.hidePlaceholder?this.props.value:i.get("testplan.step.cell.placeholder");return o.createElement(w.a,{tabIndex:this.props.tabIndex,className:t,value:n,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,disabled:!this.props.canEdit})},t.defaultProps={tabIndex:-1},t}(o.PureComponent),T=function(e){function t(t){var n=e.call(this,t)||this;return n.onRemove=function(){n.props.onRemove&&n.props.onRemove(n.props.rowIndex)},n.onChangeDescription=function(e){n.props.onChange({desc:e},n.props.rowIndex)},n.onChangePrediction=function(e){n.props.onChange({expected:e},n.props.rowIndex)},n.onFocus=function(){0===n.state.focusFlag&&n.props.onFocus(n.props.rowIndex),n.setState(function(e){return{focusFlag:e.focusFlag+1}})},n.onCellBlur=function(){y.defer(function(){n.setState(function(e){return{focusFlag:e.focusFlag-1}})})},n.onRemovePopupOpen=function(){n.setState({removePopupOpened:!0})},n.onRemovePopupClose=function(){n.setState({removePopupOpened:!1})},n.state={removePopupOpened:!1,focusFlag:0},n}return r.d(t,e),t.prototype.componentDidUpdate=function(e,t){this.state.focusFlag!==t.focusFlag&&0===this.state.focusFlag&&this.props.onBlur()},t.prototype.renderRemoveButton=function(){return o.createElement(_.IconButton,{name:"trash",color:"gray",className:S.a["remove-handler"]})},t.prototype.renderRemoveHandler=function(){return this.props.editable&&this.props.canEditContent&&o.createElement(_.PopupMenu,{main:0,nested:!0,onOpen:this.onRemovePopupOpen,onClose:this.onRemovePopupClose,trigger:this.renderRemoveButton()},o.createElement(_.PopupMenuView,{index:0,className:S.a["remove-popup"],title:i.get("testcase.step.row.remove.title")},o.createElement("p",null,i.get("testcase.step.row.remove.description")),o.createElement(_.Button,{danger:!0,onClick:this.onRemove},i.get("testcase.step.row.remove.submit"))))},t.prototype.renderSortHandler=function(){return this.props.editable&&this.props.canEditContent&&this.props.dragHandler||null},t.prototype.render=function(){var e,t=a()(S.a.tr,((e={})[S.a["remove-opened"]]=this.state.removePopupOpened,e));return o.createElement("div",{className:t},o.createElement("div",{className:S.a.th},this.props.rowIndex+1),o.createElement("div",{className:S.a.th},o.createElement(E,{value:this.props.data.desc,canEdit:this.props.canEditContent,onFocus:this.onFocus,onBlur:this.onCellBlur,tabIndex:2*this.props.rowIndex+1,onChange:this.onChangeDescription,hidePlaceholder:this.props.editable})),o.createElement("div",{className:S.a.th},o.createElement(E,{value:this.props.data.expected,canEdit:this.props.canEditContent,onFocus:this.onFocus,onBlur:this.onCellBlur,tabIndex:2*this.props.rowIndex+2,onChange:this.onChangePrediction,hidePlaceholder:this.props.editable})),this.renderSortHandler(),this.renderRemoveHandler())},t}(o.PureComponent),I={desc:"",expected:""},M=20,j=Object(k.SortableHandle)(function(){return o.createElement(_.Icon,{name:"draggable-circle",className:S.a["sort-handler"]})}),P=Object(k.SortableElement)(T),x=function(e){function t(t){var n=e.call(this,t)||this;return n.onRowChange=function(e,t){var o=n.props.steps[t];n.props.onChange(r.a({},o,e))},n.onFocus=function(e){n.setState(function(e){return{focusFlag:e.focusFlag+1}}),e===n.props.steps.length-1&&n.props.onInsertRow()},n.onBlur=function(){y.defer(function(){n.setState(function(e){return{focusFlag:e.focusFlag-1}})})},n.state={focusFlag:0},n}return r.d(t,e),t.prototype.componentDidUpdate=function(e,t){this.state.focusFlag!==t.focusFlag&&0===this.state.focusFlag&&this.props.onBlur()},t.prototype.renderHeader=function(){return o.createElement("div",{className:S.a.tr},o.createElement("div",{className:S.a.th}),o.createElement("div",{className:S.a.th},i.get("testcase.step.desc")),o.createElement("div",{className:S.a.th},i.get("testcase.step.expected")))},t.prototype.renderDragHandler=function(){return o.createElement(j,null)},t.prototype.renderBody=function(){var e=this,t=this.props,n=t.showShadowRow,r=t.steps,i=t.canEdit,s=t.onRemoveRow;return r.slice(0,M).map(function(t,a){var c=n&&a===r.length-1;return o.createElement(P,{index:a,disabled:c,key:t._id,rowIndex:a,data:t,editable:!c,canEditContent:i,onBlur:e.onBlur,onRemove:s,onFocus:e.onFocus,onChange:e.onRowChange,dragHandler:e.renderDragHandler()})})},t.prototype.render=function(){return o.createElement("div",{className:S.a.table},o.createElement("div",{className:S.a.thead},this.renderHeader()),o.createElement("div",{className:S.a.tbody},this.renderBody()))},t}(o.Component),N=Object(k.SortableContainer)(x),O=function(e){function t(t){var n=e.call(this,t)||this;return n.canAddRow=function(){return n.state.steps.length<=M},n.getStepsState=function(e){return n.canAddRowByProps(e)?e.data.concat(r.a({},I,{_id:n.createId})):e.data},n.onSort=function(e){var t=e.oldIndex,o=e.newIndex;if(t!==o){var i=n.props.data[t],s=n.props.data.filter(function(e,n){return n!==t}),a=Math.max(o,0);n.props.onChange(r.h(s.slice(0,a),[i],s.slice(a)))}},n.onSubmit=function(){var e=n.state.steps,t=e.slice(0,e.length-1);n.props.onChange(t)},n.onRemoveRow=function(e){var t=n.props.data,o=r.h(t.slice(0,e),t.slice(e+1));n.props.onChange(o)},n.onInsertRow=function(){n.canAddRow()&&(n.createId=n.createId+"_",n.setState({steps:r.h(n.state.steps,[r.a({},I,{_id:n.createId})])}))},n.onChange=function(e){var t=n.state.steps.map(function(t){return t._id===e._id?e:t});n.setState({steps:t})},n.createId="create"+(new Date).toISOString(),n.state={steps:n.getStepsState(n.props)},n}return r.d(t,e),t.prototype.shouldComponentUpdate=function(e,t){return!(y.isEqual(this.props,e)&&y.isEqual(this.state,t))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){y.isEqual(this.props.data,e.data)||this.setState({steps:this.getStepsState(e)})},t.prototype.canAddRowByProps=function(e){return e.data.length<=M},t.prototype.render=function(){return o.createElement(N,{steps:this.state.steps,canEdit:this.props.canEdit,showShadowRow:this.canAddRow(),onChange:this.onChange,onSortEnd:this.onSort,onRemoveRow:this.onRemoveRow,onInsertRow:this.onInsertRow,onBlur:this.onSubmit,helperClass:S.a.dragging,useDragHandle:!0})},t}(o.Component),R=n("DWJahcmN"),D=n("PVLVtUMG"),L=n("UiLfX8VM"),z=n.n(L),A=function(e){function t(t){var n=e.call(this,t)||this;return n.executorCache=new Map,n.getVisibleScenarioFields=function(){return n.state.folded?n.props.fields.filter(function(e){return n.props.hiddenScenarioFields.indexOf(e.fieldType)<0}):n.props.fields},n.onTestcaseChange=function(e){n.props.onChange({steps:e})},n.onChangePrecondition=function(e){n.props.onChange({precondition:e})},n.onSelectCaseType=function(e){n.props.onChange({caseType:e.data})},n.onSelectPriority=function(e){n.props.onChange({priority:e.data-1})},n.onSeletStatus=function(e){n.props.onChange({_flowstatusId:e})},n.onShowAll=function(){n.setState({folded:!1})},n.onExecutorChange=function(e,t){e&&n.executorCache.set(e,d.ExecutorInput.userInvolverAsUser(t)),n.props.onChange({_executorId:e})},n.onClearExecutor=function(){n.onExecutorChange(null)},n.onTitleChangeInCreation=function(e){n.props.onChange({title:e.target.value})},n.onToggleJumpToNext=function(e){n.localCache(u.user.id,e),n.setState({jumpToNext:e}),u.gta.event({action:e?"close automatic switching":"open automatic switching",segment:"Detail Page",control:"status label menu",type:"execute testcase",method:"check"})},n.onFlowstatusChange=function(e){n.state.jumpToNext&&"end"===e.kind&&n.props.onFlowstatusEnd&&n.props.onFlowstatusEnd()},n.localCache=l.a.namespace("temp").namespace("testcase-jump-next"),n.state={jumpToNext:!!n.localCache(u.user.id),folded:t.hiddenScenarioFields.length>0,title:t.title},n}return r.d(t,e),t.prototype.getFieldClassName=function(e){return a()(z.a["scenariofield-component"],{"cursor-not-allowed":!e})},t.prototype.renderPrecondition=function(){var e={_id:this.props.testcaseId,_organizationId:this.props._organizationId,_projectId:this.props._projectId,precondition:this.props.precondition};return o.createElement(b,{testcase:e,onChange:this.onChangePrecondition})},t.prototype.renderSteps=function(){return o.createElement(O,{key:"steps",data:this.props.steps,canEdit:!!this.props.canEdit,onChange:this.onTestcaseChange})},t.prototype.renderCaseType=function(){var e=this,t=[{label:i.get("testcase.scenariofield.casetype.unset"),data:null},{label:i.get("testcase.scenariofield.casetype.function"),data:"function"},{label:i.get("testcase.scenariofield.casetype.auto"),data:"auto"},{label:i.get("testcase.scenariofield.casetype.performance"),data:"performance"},{label:i.get("testcase.scenariofield.casetype.config"),data:"config"},{label:i.get("testcase.scenariofield.casetype.deployment"),data:"deployment"},{label:i.get("testcase.scenariofield.casetype.security"),data:"security"},{label:i.get("testcase.scenariofield.casetype.api"),data:"api"},{label:i.get("testcase.scenariofield.casetype.other"),data:"other"}],n=t.find(function(t){return t.data===e.props.caseType}),r=t.map(function(e,t){return o.createElement(_.Option,{key:t,value:e},e.label)}),s=n&&n.data?n.label:i.get("testcase.scenariofield.casetype.placeholder"),a=!this.props.canEdit;return o.createElement(_.Select,{key:"casetype",nested:!0,onSelect:this.onSelectCaseType,value:n,disabled:a,placement:"bottomLeft",trigger:o.createElement(_.TextButton,{color:"gray",disabled:a},s)},r)},t.prototype.renderPriority=function(){var e=[i.get("testcase.scenariofield.priority.unset"),i.get("testcase.scenariofield.priority.p0"),i.get("testcase.scenariofield.priority.p1"),i.get("testcase.scenariofield.priority.p2"),i.get("testcase.scenariofield.priority.p3"),i.get("testcase.scenariofield.priority.p4"),i.get("testcase.scenariofield.priority.p5")],t=this.props.priority,n={data:t,label:e[t+1]},r=e.map(function(e,t){return o.createElement(_.Option,{key:t,value:{data:t,label:e}},e)}),s=!this.props.canEdit,a=n&&n.data>=0?n.label:i.get("testcase.scenariofield.casetype.placeholder");return o.createElement(_.Select,{key:"priority",nested:!0,onSelect:this.onSelectPriority,value:n,disabled:s,placement:"bottomLeft",trigger:o.createElement(_.TextButton,{color:"gray",disabled:s},a)},r)},t.prototype.getFieldComponent=function(e){switch(e){case"precondition":return this.renderPrecondition();case"steps":return this.renderSteps();case"caseType":return this.renderCaseType();case"priority":return this.renderPriority();default:return null}},t.prototype.renderItem=function(e){var t=e.fieldType,n=e.required,r={precondition:{icon:"book",name:i.get("testcase.scenariofield.precondition")},steps:{icon:"table",name:i.get("testcase.scenariofield.steps")},caseType:{icon:"single-selection",name:i.get("testcase.scenariofield.caseType")},priority:{icon:"circle",name:i.get("testcase.scenariofield.priority")}}[t],s=this.getFieldComponent(t);if(!r||!s)return null;var c=r.icon,l=r.name;return o.createElement("div",{key:t,className:a()(z.a["scenariofield-item"],z.a["scenariofield-"+t])},o.createElement("div",{className:z.a["scenariofield-label"]},n&&o.createElement("span",{className:z.a["scenariofield-label-required"]},"*"),o.createElement(_.Icon,{className:z.a["scenariofield-label-icon"],name:c}),o.createElement("span",{className:z.a["scenariofield-label-name"]},l)),o.createElement("div",{className:this.getFieldClassName(this.props.canEdit)},s))},t.prototype.renderExecutorField=function(){var e=this.props.isUsercase?i.get("usercase.executor.title"):i.get("testcase.executor.title");return o.createElement("div",{key:"executor",className:a()(z.a["scenariofield-item"],z.a["scenariofield-executor"])},o.createElement("div",{className:z.a["scenariofield-label"]},o.createElement(_.Icon,{className:z.a["scenariofield-label-icon"],name:"user"}),o.createElement("span",{className:z.a["scenariofield-label-name"]},e)),o.createElement("div",{className:this.getFieldClassName(this.props.canSetExecutor)},this.renderExecutor()))},t.prototype.renderExecutor=function(){var e=this.props.getExecutor(this.executorCache);return o.createElement(h.TaskExecutor,{key:""+this.props._executorId,nested:!0,selectedTitle:this.props.executorSelectedTitle,executor:e,contextId:this.props.contextId,isExperiencedUser:!0,objectType:"testcase",onSelect:this.onExecutorChange,disabled:!this.props.canSetExecutor,onClickRemove:this.onClearExecutor,inviteShowed:!!this.props.inviteShowed,inviteMoreMember:this.props.inviteMoreMember,notFoundTips:this.props.notFoundExecutorTips,unsetTooltip:this.props.unsetTooltip})},t.prototype.renderTitleCreator=function(){return o.createElement(p.a,{value:this.props.title,onChange:this.onTitleChangeInCreation,placeholder:i.get("testcase.creator.content.editor.placeholder"),className:a()(z.a["content-editor"],"form-control"),rows:4,maxRows:10})},t.prototype.renderStartStatusSelectorContent=function(e){var t=this.props.taskflowstatuses.filter(function(e){return"start"===e.kind}),n=e?e._id:void 0;return o.createElement(R.TaskflowStatusLabelList,{data:t,selectedId:n,onSelect:this.onSeletStatus})},t.prototype.renderStartStatusSelector=function(e){return o.createElement(_.Dropdown,{content:this.renderStartStatusSelectorContent(e),nested:!0},o.createElement("div",null,o.createElement(D.StatusCheckboxTaskflow,{kind:e.kind,title:e.name,size:"large"})))},t.prototype.renderTestflow=function(){var e=this;if(!this.props.taskflowstatuses||!this.props.withStatus)return null;var t=this.props._flowstatusId?this.props.taskflowstatuses.find(function(t){return t._id===e.props._flowstatusId}):this.props.taskflowstatuses.find(function(e){return"start"===e.kind});return this.props.inCreation?this.renderStartStatusSelector(t):o.createElement(R.TaskCheckBoxLabel,{taskId:this.props.testcaseId,type:"testcase",showJumpToNext:!0,jumpToNext:this.state.jumpToNext,onToggleJumpToNext:this.onToggleJumpToNext,disabled:!this.props.canSetFlowStatus,onChangeSuccess:this.onFlowstatusChange,taskflowStatus:t,size:"large"})},t.prototype.renderTestflowField=function(){return!this.props.isUsercase&&o.createElement("div",{key:"testflow",className:a()(z.a["scenariofield-item"],z.a["scenariofield-flowstatus"])},o.createElement("div",{className:z.a["scenariofield-label"]},o.createElement(_.Icon,{className:z.a["scenariofield-label-icon"],name:"checkbox-checked-s"}),o.createElement("span",{className:z.a["scenariofield-label-name"]},i.get("testcase.flowstatus"))),o.createElement("div",{className:this.getFieldClassName(this.props.canSetFlowStatus)},this.renderTestflow()))},t.prototype.renderInput=function(){return this.props.inCreation&&this.renderTitleCreator()},t.prototype.renderScenarioFields=function(){var e=this;return this.getVisibleScenarioFields().map(function(t){return e.renderItem(t)})},t.prototype.renderFoldable=function(){return this.state.folded&&o.createElement(_.TextButton,{color:"gray",className:z.a["scenariofield-more"],onClick:this.onShowAll},o.createElement(_.Icon,{name:"more"}),o.createElement("span",null,i.get("testcase.scenariofield.more")))},t.prototype.renderBasicFields=function(){return o.createElement(o.Fragment,null,this.renderTestflowField(),this.renderExecutorField())},t.prototype.render=function(){var e,t=a()(z.a["scenariofield-section"],this.props.className,((e={})[z.a["in-creation"]]=!!this.props.inCreation,e));return o.createElement("div",{className:t},this.renderInput(),this.renderBasicFields(),this.renderScenarioFields(),this.renderFoldable())},t.defaultProps={hiddenScenarioFields:[],canEdit:!0,canSetExecutor:!0,canSetFlowStatus:!0},t}(o.PureComponent);n.d(t,"a",function(){return A})},SkVs4iz6:function(e,t){e.exports=function(e){return"<section class='tag-list-wrapper flex-static'></section><section class='tag-group-list-wrapper flex-static'></section>"}},SoPiyaPE:function(e,t){e.exports=function(e){return'<div class="organization-container-iframe"></div>'}},"Sp2hKok+":function(e,t){e.exports=function(e){var t='<header class="modal-header text-center"> ';return e.titleCrossActions.length&&(t+=' <a class="modal-close pull-right icon icon-remove title-cross"></a> '),t+='</header><div class="modal-body"> <div class="illustration" style=\''+e.illuStyle+'\'></div> <div class="labs-info-area"> <p class="title">'+e.onboardingTitle+'</p> <div class="subtitle"> '+e.onboardingDescription+' </div> <button class="btn btn-primary go-labs"> '+tb_i18n.get("onboarding.labs.splash.goto.labs")+' </button>  <button class="btn btn-link ignore-onboarding"> '+tb_i18n.get("onboarding.labs.splash.ignore")+" </button> </div></div>"}},Stv7G60N:function(e,t,n){e.exports={"invitee-list__item":"invitee-list__item__2f0Y","invitee-list__header":"invitee-list__header__FB5R","invitee-list__main":"invitee-list__main__1vIQ","invitee-list__avatar":"invitee-list__avatar__1xI5","invitee-list__name":"invitee-list__name__Ny-0","invitee-list__body":"invitee-list__body__2UM7","invitee-list__trigger":"invitee-list__trigger__1gGw","invitee-list__search-wrap":"invitee-list__search-wrap__32Km","invitee-list__search":"invitee-list__search__kigG","invitee-list__handles":"invitee-list__handles__3qMF","invitee-list__no-result-placeholder":"invitee-list__no-result-placeholder__1_Fm","invitee-list__loading-wrap":"invitee-list__loading-wrap__3obT"}},SzPjtQAa:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;i=n("a+N5u/Cl"),o=n("vmWJWrVe"),s=n("2qRnoGmE"),r=n("Sfl3gFfI"),n("gh8QIhMV").throwError,a=function(){return{report:{poster:n("le3nzbr1"),video:s.DN_SITE_URL+"/videos/web_onboarding_report.mp4"},statistics:{poster:n("hCND+D4a"),video:s.DN_SITE_URL+"/videos/web_onboarding_dashboards.mp4"}}},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="OrganizationPlaceholderView",t.prototype.className="organization-placeholder-view",t.prototype.events={"click .play-ctrl":"playToggle"},t.prototype.initialize=function(e){if(e.organization)return this.options=e,this.organization=this.options.organization,this.sliderInfo=a(),this.type=this.options.type,this.renderBasic().listen()},t.prototype.renderBasic=function(){var e;return e=i.extend({sliderInfo:this.sliderInfo[this.type]},this.options),this.$el.html(r(e)),this.$sliderWrap=this.$(".organization-placeholder-video"),this.$content=this.$(".slider-container"),this.$video=this.$("video"),this.video=this.$video[0],this.$playCtrl=this.$(".play-ctrl"),this},t.prototype.listen=function(){var e,t,n,r;return null!=(e=this.video)&&(e.onplay=(r=this,function(){return r.$playCtrl.hide(),i.delay(function(){return r.video.controls=!0},800)})),null!=(t=this.video)?t.onpause=null!=(n=this.video)?n.onended=function(e){return function(){return e.$playCtrl.show(),i.delay(function(){return e.video.controls=!1},800)}}(this):void 0:void 0},t.prototype.playToggle=function(){if(this.video)return this.video.isPlaying?this.video.pause():this.video.play(),this},t}()},"T/0IBfK+":function(e,t,n){},T3rbAVQx:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return void 0===e&&(e="rnd"),e+"-"+(Math.random()/+new Date).toString(36).replace(/\d/g,"").slice(1)}},T4OuoonG:function(e,t,n){"use strict";n.r(t),n.d(t,"ProjectMessagePanel",function(){return l}),n.d(t,"ProjectMessagePanelComponent",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("NdG5lKr9"),a=n("GESwhXbR"),c=n("sa1Ed382"),l=function(e){function t(t){var n=e.call(this,t)||this;return n.handleMute=function(){var e=n.props,t=e.roomInfo;if((0,e.markMute)(t),t){var r=t.isMute;c.gta.event({action:"switch mute",page:"Chats Page",type:"project",category:r?"off":"on"})}},n.goToProject=function(){n.dropdownRef&&n.dropdownRef.close();var e=n.props,t=e.roomInfo,r=e.onClickGotoProject,o=t&&t.project&&t.project._id;o&&r&&(r(o),c.gta.event({action:"open detail",type:"project",control:"More Settings",projectid:o}))},n.onClickHandlerMore=function(){c.gta.event({action:"toggle more menu",page:"Chats Page",type:"project"})},n.saveDropdownRef=function(e){n.dropdownRef=e},n.panelType="project",n.containerCls="project-message-list",n}return r.d(t,e),t.prototype.renderHandlerMore=function(){var e=this.props,t=e.isPseudo,n=e.roomInfo,r=e.activities,s=n&&n.isMute||!1,c=t||"project-group-chat"===this.panelType&&0===r.length?null:o.createElement(a.MenuItem,null,i.get("message.panel.handler.project.mute"),o.createElement(a.Switch,{size:"small",defaultChecked:s,onClick:this.handleMute})),l="project-group-chat"===this.panelType?null:o.createElement(a.MenuItem,{onClick:this.goToProject},i.get("message.panel.handler.project.goto"));if(![c,l].every(function(e){return null===e})){var u=o.createElement(a.Menu,{className:"message-panel-menu"},l,c);return o.createElement(a.Dropdown,{content:u,placement:"bottom",ref:this.saveDropdownRef,persistence:!0},o.createElement(a.IconButton,{name:"more",color:"gray",onClick:this.onClickHandlerMore}))}},t.prototype.renderHandlers=function(){var e="project-group-chat"!==this.panelType?o.createElement(a.IconButton,{name:"remove",color:"gray",onClick:this.props.removeChatModal}):null;return o.createElement("div",{className:"header-handlers"},this.renderHandlerMore(),e)},t.prototype.renderHeaderContent=function(){var e=this.props.roomInfo;if(!e)return null;var t=e&&e.project&&e.project.name;return o.createElement("div",{className:"header-content"},o.createElement(a.Tooltip,{title:t},o.createElement("h4",null,t," ")),this.renderHandlers())},t}(s.a),u=Object(s.b)(l)},TAuajgAY:function(e,t,n){var r,o,i={}.hasOwnProperty;o=n("2qRnoGmE"),r=n("KPjvlCmh"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.orderBy="order",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.name=this.name+"/"+this.options._projectId},t.prototype.parse=function(e,n){var r,o,i,s,a;if(!e)return e;for(o=Array.isArray(e)?e:[e],r=this.options._projectId,i=0,s=o.length;i<s;i++)(a=o[i])._pluginId||(a._pluginId=a._id,a._id+="_"+r);return t.__super__.parse.apply(this,arguments)},t.prototype.url=function(){return o.HOST+"/appstore/api/v2/projects/"+this.options._projectId+"/addedFeatures"},t.prototype.getPlugin=function(e){return this.findWhere({_pluginId:e})},t.prototype.enablePlugin=function(e){var t;return null!=(t=this.getPlugin(e))?t.set({status:1}):void 0},t.prototype.disablePlugin=function(e){var t;return null!=(t=this.getPlugin(e))?t.set({status:0}):void 0},t}()},TB3ThowI:function(e,t,n){e.exports=n.p+"images/d_dahaqi@2x.a7289817.png"},TCxkpEjv:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("DWJahcmN"),c=n("PVLVtUMG"),l=n("zH+Yaocm"),u=n("bGgulMbD"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderContent=function(){var e=this.props.selectedStatus,t=e?e._id:void 0;return o.createElement(a.TaskflowStatusLabelList,{data:Object(l.filterTaskflowNotEndStatuses)(this.props.taskflowStatuses),selectedId:t,onSelect:this.props.onSelect})},t.prototype.renderLabel=function(e){return o.createElement(c.StatusLabel,{kind:e.kind,title:e.name,fixedWidth:!0})},t.prototype.renderPlaceholder=function(){return o.createElement("div",{className:"tip"},i.get("task.locator.status.selector.trigger.placeholder"))},t.prototype.renderTrigger=function(){var e=this.props,t=e.trigger,n=e.selectedStatus;return t||o.createElement("div",{className:u["scenario-locator-status-trigger"]},n?this.renderLabel(n):this.renderPlaceholder(),o.createElement(s.Icon,{name:"chevron-down"}))},t.prototype.render=function(){return o.createElement(s.Dropdown,{content:this.renderContent(),nested:!0},this.renderTrigger())},t}(o.PureComponent)},TDoJWZYw:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f={}.hasOwnProperty,g=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};d=n("a+N5u/Cl"),c=n("YdqH4v7N"),u=n("3eMzznN/"),p=n("vmWJWrVe"),l=n("GESwhXbR").Toast,a=n("77NnVLwu"),s=n("2NlL4uak"),n("OmupbwLD"),r=n("2vaxzVCj"),i=n("NEE0ieHs"),m=n("gh8QIhMV").throwError,h=n("sa1Ed382"),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)f.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.viewName="ObjectPickerPostsView",t.prototype.className="object-picker-posts-view flex-vert",t.prototype.events={"click .post":"togglePost","click .object-picker-creator":"creatorHandler"},t.prototype.initialize=function(e){var t;if(e._projectId)return this.options=e,this._projectId=e._projectId,this.selected=[],a.resolveFetch(this._projectId).then((t=this,function(e){if(t.el)return t.projectModel=e,t.renderBasic(),t.listen(),t.showLoadingIndicator(t.$list),s.resolveFetch(t._projectId)})).then(function(e){return function(t){if(e.$el)return e.hideLoadingIndicator({animated:!1}),e.postsCollection=t,e.renderPosts(e.postsCollection.models),e.setupScroll(e.$list)}}(this)).catch(function(e){if(e)return m(e),l.error({message:e.message||e})}),this},t.prototype.loadMore=function(e){var t,n;return t=0,this.postsCollection.loadMore({silent:!0,section:"all",beforeSend:(n=this,function(){return t=(new Date).getTime(),n.showLoadingIndicator(n.$list)}),success:function(n){return function(r,o,i){var s,a;if(n.$el)return s=(a=(new Date).getTime()-t)<1e3?1e3-a:0,d.delay(function(){if(n.$el)return n.hideLoadingIndicator({animated:!0}),n.renderPosts(o.map(function(e){return n.postsCollection.get(e._id)})),n.postsCollection.hasMore?"function"==typeof e?e():void 0:n.showEndPoint(n.$list)},s)}}(this)}),this},t.prototype.renderBasic=function(){return this.$el.html(r()),this.togglePostCreator(),this.$list=this.$(".posts-list"),this},t.prototype.listen=function(){return this.listenTo(this.projectModel,"change:applications",function(){if(this.projectModel.isAppChanged("posts"))return this.togglePostCreator()}),this},t.prototype.togglePostCreator=function(){var e,t;return e=(null!=(t=this.projectModel)?t.isAppEnabled("posts"):void 0)?"removeClass":"addClass",this.$el[e]("no-creator"),this},t.prototype.renderPosts=function(e){var t,n;return t=$(i({posts:d.map(e,(n=this,function(e){var t,r;return(t=e.toJSON()).disabled=(r=e.id,g.call(n.options.exclude,r)>=0),t}))})),this.$list.append(t),this},t.prototype.creatorHandler=function(){return h.APP.openCreator("post",{backdrop:"static",_projectId:this._projectId,onsave:(e=this,function(t){return e.options.onCreate([t.toJSON()])})});var e},t.prototype.togglePost=function(e){var t,n;if(!(t=$(e.currentTarget)).hasClass("disabled"))return!t.hasClass("selected")&&this.selected.length>=10?l.error({message:tb_i18n.get("object.picker.exceed.number")}):(t.toggleClass("selected"),n=t.data("id"),t.hasClass("selected")?this.selected.push(n):u.removeItem(this.selected,n),this.options.onSelect(this.selected.map(function(e){return{_id:e,type:"post"}})),this)},t}(),d.extend(o.prototype,c),e.exports=o},THO7R8TO:function(e,t,n){e.exports={"back-old-version":"back-old-version__23IR"}},TLTmDwrA:function(e,t,n){e.exports=n("pdE/8Sir")},TTDkZdir:function(e,t,n){var r,o,i;o=n("a+N5u/Cl"),i=n("sa1Ed382"),r=n("uaT+k2Om"),e.exports=function(){function e(){}return e.prototype.arr=[],e.prototype.source=null,e.prototype.totalWidth=0,e.prototype.totalHeight=0,e.prototype.topLeftOnRotateFn=null,e.prototype.getImageDimension=null,e.prototype.getMaxSize=function(){var e,t,n;return"Firefox"===(e=i.ua.getBrowser().name)||"Chrome"===e?(n=32767,t=268435456):(n=8192,t=67108864),{maxSize:t,maxWidth:n,maxHeight:n}},e.prototype.getTotalDimension=function(){return[this.totalWidth,this.totalHeight]},e.prototype.getCanvasList=function(){return this.arr},e.prototype.getRotatedCanvasList=function(e){return this.arr.map((t=this,function(n){var o,i,s,a,c,l;return o=n.canvas,i=n.left,l=n.top,s=(a=t.topLeftOnRotateFn(e,[i,l],o.width,o.height))[0],{canvas:o,top:a[1],left:s,targetWidth:(c=r.switchWidthHeightByDegree(e,o.width,o.height))[0],targetHeight:c[1]}}));var t},e.prototype.assembleData=function(){var e,t,n,r,o,i;return r=(i=this.getMaxSize()).maxSize,o=i.maxWidth,n=i.maxHeight,t=this.source.width,e=this.source.height,null!=r&&r/t<n&&(n=r/o),this.splitByWidth(o,t),this.splitByHeight(n,e)},e.prototype.splitByWidth=function(e,t){var n,r,o,i;for(n=Math.ceil(t/e),r=0,o=[];r<n;)i=r===n-1?t-r*e:e,this.arr.push({width:i,left:r*e}),o.push(r++);return o},e.prototype.splitByHeight=function(e,t){var n;return n=Math.ceil(t/e),this.arr=o.chain(this.arr).map(function(r){var i,s,a,c;for(s=0,a=[];s<n;)i=s===n-1?t-s*e:e,c=s*e,a.push(o.extend({},r,{height:i,top:c})),s++;return a}).flatten().value()},e.prototype.genCanvas=function(){return this.arr=this.arr.map((e=this,function(t,n){var r,o,i,s,a;return a=t.width,o=t.height,i=t.left,s=t.top,(r=document.createElement("canvas")).width=a,r.height=o,r.getContext("2d").drawImage(e.source,i,s,a,o,0,0,a,o),{canvas:r,left:i,top:s}}));var e},e.prototype.orientationFix=function(e){var t;return t=r.subCanvasPosition(this.source.width,this.source.height,e).bind(this,0),this.arr=this.arr.map(function(n){var o,i,s,a,c,l;return o=n.canvas,i=n.left,l=n.top,s=(c=t([i,l],o.width,o.height))[0],a=c[1],{canvas:r.orientationCorrected(e,o),top:a,left:s}})},e.prototype.split=function(e,t){var n,o,i;return this.source=e,this.arr=[],this.assembleData(),this.genCanvas(),t&&this.orientationFix(t),o=this.source.naturalWidth||this.source.width,n=this.source.naturalHeight||this.source.height,this.getImageDimension=function(){return[o,n]},i=r.switchWidthHeightByOTag(t,o,n),this.totalWidth=i[0],this.totalHeight=i[1],this.topLeftOnRotateFn=r.subCanvasPosition(this.totalWidth,this.totalHeight)},e}()},TUmryrSA:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b={}.hasOwnProperty;m=n("a+N5u/Cl"),p=n("vmWJWrVe"),f=n("sa1Ed382"),u=n("3eMzznN/"),g=n("gh8QIhMV").throwError,c=n("77NnVLwu"),d=n("OmupbwLD"),s=n("YiTbVZtG"),o=n("PCjZn8k4"),a=n("tGfyIDI3"),h=n("8N+zwa3A"),v=n("yiO17FlF"),l=n("GESwhXbR").Toast,i=n("N406gSay"),r=n("Lz5j/KJN").BelinkedDetails,n("N60gWBRi"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)b.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.viewName="BeLinkedView",t.prototype.className="detail-infos-belinked-view",t.prototype.initialize=function(e){return null==e&&(e={}),this._projectId=e._projectId,this._objectId=e.objectModel.id.split("_")[0],this.objectModel=e.objectModel,this.boundToObjectType=e.boundToObjectType,u.promiseChain((t=this,function(){return!t.el}))(function(e){return function(){return e.load()}}(this),function(e){return function(){return e.renderBasic(),e.listen()}}(this)).catch(function(e){return function(){return e.remove()}}(this));var t},t.prototype.load=function(){return u.promiseChain((e=this,function(){return!e.el}))(function(e){return function(){return e.fetchObjectLinkeds()}}(this),function(e){return function(t){return e.objectlinkedsCollection=t}}(this)).catch(function(e){return function(){return e.remove()}}(this));var e},t.prototype.listen=function(){var e;return this.listenTo(this.objectlinkedsCollection,"add change remove destroy",(e=this,function(t){return e.renderBasic()})),this},t.prototype.fetchObjectLinkeds=function(){return new Promise((e=this,function(t,n){return i.fetch(e._objectId,{objectType:e.boundToObjectType,success:t,error:n})}));var e},t.prototype.onDownloadItem=function(e){var t;return this.gtaHandler(e,{action:"download"}),t=e.parent,new Promise(function(e,n){var r;return r=function(){return n({noPermission:!0})},t._projectId?c.fetch(t._projectId,{silentError:!0,success:function(t){return t.hasPermission("work.get.download")?e():r()},error:r}):new h(t).hasPermission("work.get.download")?e():r()}).then(function(){return u.downloadItem(t,e.parentType)}).catch(function(e){if(e.noPermission)return l.error(tb_i18n.get("authority.get.error"))})},t.prototype.renderBasic=function(){return this.requestReactView(this.el,r,{boundToObjectType:this.boundToObjectType,links:this.objectlinkedsCollection.toJSON(),enterObjectPreviewer:this.enterObjectPreviewer.bind(this),gtaHandler:this.gtaHandlerShowLinked.bind(this),gtaCopyLink:this.gtaCopyLink.bind(this),onDownloadItem:this.onDownloadItem.bind(this)}),this},t.prototype.enterObjectPreviewer=function(e){var t,n,r;return t=e.parent._id,"work"===(r=e.parentType)?this.showWorksPreviewer(t):"collection"===r?s.enterCollection(t):(n={objectType:r,objectId:t,silentError:!1},this.requestSubView(d).open(o,n)),this.gtaHandlerOpenDetail(e),this},t.prototype.showWorksPreviewer=function(e){var t,n,r,o,i,s;return t=null,r=[],n=[],i=m.sortBy(this.objectlinkedsCollection.where({parentType:"work"}),function(e){return e.get("created")}),n=i.map(function(e){return e.get("parent")._id}),o=m.map(i,function(o){return new Promise(function(i,s){return h.fetch(o.get("parent")._id,{silentError:!0,success:function(s){return r.push(s),n.push(o.id),s.id===e&&(t=s),i()},error:function(e,t){var n;return 401===(n=t.status)||403===n?(delete v.getData().models[e.id],delete v.getData().matrix[e.id],i()):s()}})})}),Promise.all(o).then((s=this,function(){var e;return t?((e={objectlinkIds:n,workModel:t}).workModels=r,s.requestSubView(d).open(a,e)):l.error({message:tb_i18n.get("authority.get.error"),description:tb_i18n.get("authority.get.error.content")})})).catch(function(e){return g(e)}),this},t.prototype.gtaHandlerShowLinked=function(e){var t,n,r;return t={action:e?"show the linked content":"hide the linked content",control:"Linked",type:this.boundToObjectType},"task"===this.boundToObjectType&&(n=this.objectModel.isSubtask()?"subtask":"task",r=this.objectModel.get("ancestorIds").length,t=m.extend(t,{type:n,series:r})),f.gta.event(t)},t.prototype.gtaHandlerOpenDetail=function(e){var t;return t={action:"open detail"},this.gtaHandler(e,t)},t.prototype.gtaCopyLink=function(e){return this.gtaHandler(e,{action:"copy link"})},t.prototype.gtaHandler=function(e,t){var n,r;return"task"===(r=e.parentType)&&(r=(null!=(n=e.parent.ancestorIds)?n.length:void 0)>0?"subtask":"task"),f.gta.event(Object.assign({type:r,control:"Linked"},t))},t.prototype.isCase=function(){return!0},t.prototype.hasPermission=function(){return!0},t}()},TWnaNrFS:function(e,t,n){e.exports=n.p+"images/notification-mute.e1a4d910.svg"},TWx4fFLE:function(e,t,n){e.exports={"task-story-point":"task-story-point__1mHl","task-story-point__inner":"task-story-point__inner__2g7J"}},TXoskWV7:function(e,t,n){"use strict";n.r(t),n.d(t,"DropboxSDK",function(){return r});var r=window.Dropbox},TaXCAh5t:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;i=n("vmWJWrVe"),s=n("a+N5u/Cl"),o=n("3eMzznN/"),r=n("PJIJuxhE"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="JinshujuLinkView",t.prototype.initialize=function(e){var t;return t=s.map(e.data,function(e){return e.data.updated_at&&(e.createTime=o.formatDate(e.data.updated_at)),e}),this.$el.html(r({title:e.title,items:t,hasHeader:e.hasHeader}))},t}()},TeBKNp7v:function(e,t,n){e.exports={"object-content-wrapper":"object-content-wrapper__3VaO","object-content-prefix":"object-content-prefix__IO5p","object-content-tooltip":"object-content-tooltip__3z2U","object-content":"object-content__irzS"}},Tfs9ungZ:function(e,t,n){e.exports=n.p+"images/pro-medal-active.bdcc9bda.png"},ThSbgwXN:function(e,t,n){"use strict";n.r(t),n.d(t,"scrollIntoViewSmoothly",function(){return i});var r=n("ZpRCN7tv"),o=n("HIsjb0Ux"),i="scrollBehavior"in document.documentElement.style?r.a:o.a},TiOL9HNr:function(e,t,n){e.exports=n.p+"images/f_geili@2x.1f82c84e.png"},"Tkf7Bw7+":function(e,t,n){},TmIu3fT6:function(e,t,n){e.exports={title:"title__2PeL",content:"content__1lce",body:"body__1m0S",footer:"footer__2RDm",locator:"locator__2zwK","testcase-fields":"testcase-fields__2dvB"}},To35NsR9:function(e,t,n){e.exports=n.p+"images/o_lazhu@2x.bfdcee4e.png"},Tvx2LTBq:function(e,t,n){e.exports=n.p+"images/d_aini@2x.de154cf5.png"},"Twz036/r":function(e,t,n){var r,o,i,s,a,c,l,u,p={}.hasOwnProperty;l=n("a+N5u/Cl"),a=n("vmWJWrVe"),s=n("77NnVLwu"),r=n("E86Oiqt3"),o=n("udYBhtYc"),c=n("ZiyDPH8B"),i=n("PsEnwSV0").FilePicker,u=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="FilePicker",t.prototype.className="file-picker-view flex",t.prototype.initialize=function(e){var t,n,r,o,i,a,c,l,u,p,d;if(n=e.parentId,this.projectId=e.projectId,t=e.disabled,this.searchModel=e.searchModel,this.withWorkUpload=e.withWorkUpload,this.withCollectionCreator=e.withCollectionCreator,this.excludes=null!=(r=e.excludes)?r:[],this.multiple=null==(o=e.multiple)||o,this.showWorks=null==(i=e.showWorks)||i,this.onlyWorks=null!=(a=e.onlyWorks)&&a,this.showRootCollection=null!=(c=e.showRootCollection)&&c,this.onCollectionCreate=null!=(l=e.onCollectionCreate)?l:function(){},this.onChange=null!=(u=e.onChange)?u:function(){},this.onUpload=null!=(p=e.onUpload)?p:function(){},this.projectId)return this.columns=[],this.selected=[],this.disabled=[].concat(t),this.showCollectionCreator=!1,this.subscribe(s.fetch$(this.projectId).do((d=this,function(e){return d.projectModel=e,d._rootCollectionId=d.projectModel.get("_rootCollectionId"),d.parentId=n||d._rootCollectionId,d.initColumns(),d.listen()})))},t.prototype.listen=function(){return this.listenTo(this.searchModel,"change:query",this.renderFilePicker),this.listenTo(this.projectModel,"change:applications",function(){if(this.projectModel.isAppChanged("works"))return this.renderFilePicker()})},t.prototype.initColumns=function(){return new Promise((e=this,function(t,n){return r.fetch(e.parentId,{success:t,error:n})})).then(function(e){return function(t){return e.showRootCollection&&e.setColumn(e.projectId),t.fetchParents().then(function(n){return n.forEach(function(t){var n;return n=t.id,e.setColumn(n,t.get("_parentId"))}),e.setColumn(t.id,t.get("_parentId"))})}}(this)).then(function(e){return function(){return e.renderFilePicker()}}(this));var e},t.prototype.getColumns=function(){return this.columns.map((e=this,function(t,n){var r,o,i,s,a;return Object.assign({},t,{works:e.showWorks&&(null!=(r=t.works)?r.toJSON():void 0)||[],collections:(null!=(o=t.collections)?o.excludeDefaults().map(function(e){return e.toJSON()}):void 0)||[],hasMoreWorks:e.showWorks&&(null!=(i=t.works)?i.hasMore:void 0),hasMoreCollections:null!=(s=t.collections)?s.hasMore:void 0,activeId:null!=(a=e.columns[n+1])?a.parentId:void 0})}));var e},t.prototype.getColumnIndex=function(e){return l.findIndex(this.columns,function(t){return t.parentId===e})},t.prototype.getColumnByParentId=function(e){return l.find(this.columns,function(t){return t.parentId===e})},t.prototype.setColumn=function(e,t){var n,r,i,s;return this.showWorks&&((s=new c([])).hasMore=!0),(n=new o([])).hasMore=!0,i=this.columns.length,r=t&&this.getColumnIndex(t)>=0?this.getColumnIndex(t):i,this.columns=l.chain(this.columns).first(r+1).push({parentId:e,works:this.showWorks?s:null,collections:n,selectedWorks:[],selectedCollections:[]}).value()},t.prototype.getSelectResults=function(){var e;return e=this.columns.map(function(e){return{works:e.selectedWorks.map(function(t){return e.works.get(t)}),collections:e.selectedCollections.map(function(t){return e.collections.get(t)})}}),{works:l.chain(e).pluck("works").flatten().compact().value(),collections:l.chain(e).pluck("collections").flatten().compact().value()}},t.prototype.getSelectsLength=function(){return l.chain(this.getSelectResults()).values().union().value().length},t.prototype.setSelected=function(e,t,n){var r;return r=this.selected.length,t&&this.getColumnIndex(t)>=0?this.getColumnIndex(t):r},t.prototype.hasMore=function(e){var t;return!!(t=this.getColumnByParentId(e))&&(this.showWorks&&t.works.hasMore||t.collections.hasMore)},t.prototype.loadRootCollection=function(){var e,t;return e=this.projectId,new Promise((t=this,function(e,n){return r.fetch(t._rootCollectionId,{success:e,error:n})})).then(function(t){return function(n){var r;return null!=(r=t.columns[t.getColumnIndex(e)].works)&&(r.hasMore=!1),t.columns[t.getColumnIndex(e)].collections=new o([n])}}(this))},t.prototype.loadMore=function(e){var t,n,r;return this.el&&this.hasMore(e)?e===this.projectId?this.loadRootCollection():(t=this.getColumnByParentId(e),n=t.collections.hasMore?t.collections:t.works,new Promise((r=this,function(t,o){return n.loadMore({attrs:{order:"updatedDesc",_parentId:e,_projectId:r._projectId},success:function(o,i){return!n.hasMore||n.hasMore&&i.length<20?t(r.loadMore(e)):t()},error:o})}))):Promise.resolve()},t.prototype.createCollection=function(e,t){return this.onCollectionCreate(e,t).then((n=this,function(e){var r,o;if(n.el)return r=n.getColumnIndex(t),n.columns[r]?((o=n.columns[r]).collections,o.selectedCollections,n.columns[r].collections.unshift(e),n.onSelect(e.id,t,"collection")):void 0})).catch(function(e){return u(e)});var n},t.prototype.onCollectionClick=function(e,t){var n,r,o;if(r=this.getColumnIndex(e),n=this.getColumnByParentId(e))return n.selectedCollections.indexOf(t)<0&&(null!=(o=this.columns[r+1])?o.parentId:void 0)!==t&&this.setColumn(t,e),this.renderFilePicker()},t.prototype.canSelectMultiple=function(e){return this.multiple&&"work"===e},t.prototype.getToggledSelect=function(e,t,n){return e.indexOf(t)>=0?l.without(e,t):this.canSelectMultiple(n)?e.concat(t):[t]},t.prototype.clearSelects=function(e){var t;return t={selectedCollections:[]},this.canSelectMultiple(e)||(t.selectedWorks=[]),this.columns=this.columns.map(function(e){return Object.assign({},e,t)})},t.prototype.onSelect=function(e,t,n){var r,o,i,s;if(!(this.excludes.indexOf(e)>=0||("collection"===n&&this.onCollectionClick(t,e),this.onlyWorks&&"collection"===n)))return r=this.getColumnIndex(t),i="work"===n?"selectedWorks":"selectedCollections",s=this.columns[r][i],this.clearSelects(n),o=this.getToggledSelect(s,e,n),this.disabled.indexOf(e)>=0&&(o=l.without(o,e)),this.columns[r][i]=o,this.renderFilePicker(),this.onChange(this.getSelectResults())},t.prototype.renderFilePicker=function(){return this.requestReactView(this.el,i,{disabled:this.disabled,multiple:this.multiple,showWorks:this.showWorks,withWorkUpload:this.withWorkUpload,showCollectionCreator:this.showCollectionCreator,withCollectionCreator:this.withCollectionCreator,list:this.getColumns(),query:this.searchModel&&this.searchModel.get("query"),onLoad:(e=this,function(t){return e.loadMore(t).then(function(){if(e.el)return e.renderFilePicker()})}),onUpload:this.onUpload.bind(this),onCollectionCreate:this.createCollection.bind(this),onSelect:this.onSelect.bind(this)});var e},t}()},"TxuhFsX+":function(e,t,n){e.exports={page:"page__2YDP"}},"Tyo/9bte":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m={}.hasOwnProperty;n("K+7dShhL"),d=n("a+N5u/Cl"),r=n("WCg8Kj7w"),i=n("hGNqppva"),s=n("YdqH4v7N"),p=n("3eMzznN/"),a=n("ymFCWmUp"),h=n("90U+kJWN").genUniqueIdPrefixLenRange,c=n("I8geGh50"),u=n("GPNoQLd7"),o={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,HASH:35,AT:64},l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)m.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="SymbolPopoverView",t.prototype.className="symbol-popover-view",t.prototype.popoverTitle="Menu",t.prototype.width=240,t.prototype.events={"click .symbol-item":"select","mouseenter .symbol-item":"activate",mousewheel:p.mousewheel},t.prototype.initialize=function(e){if(!((null!=e?e.$inputor:void 0)&&e.membersData))throw new Error("options should have $inputor and datas");return e=d.extend(e,{trigger:"manual",$toggler:e.$inputor}),this.popoverTitle=tb_i18n.get("activity.comment.link.title"),this.options=e,this.$inputor=e.$inputor,this.membersData=Object.assign({},e.membersData),this.allMembers=Object.assign({},e.membersData),this.objectlinksCollection=c.get(0),this.listen(),t.__super__.initialize.apply(this,arguments)},t.prototype.listen=function(){var e;return this.$inputor.off("keydown.symbolPopoverView keyup.symbolPopoverView"),this.$inputor.on("keydown.symbolPopoverView",(e=this,function(t){return e.onKeydown(t)})),this.$inputor.on("keyup.symbolPopoverView",function(e){return function(t){return e.filter(t)}}(this)),this.$inputor.on("blur.symbolPopoverView",function(e){}),this},t.prototype.updateMembersData=function(e){return this.membersData=Object.assign({},e),this.allMembers=Object.assign({},e),this.render(),this.rePosition()},t.prototype.render=function(){return this.$el.html(r({membersData:"@"===this.type?this.membersData:void 0,linksData:"#"===this.type?this.linksData:void 0})),"#"===this.type&&this.renderTaskIdLabel(),this.$list=this.$(".symbol-list"),this.setupScroll(this.$list),this},t.prototype.renderTaskIdLabel=function(){return this.$el.find(".link-item").each((e=this,function(t,n){var r,o,i,s;return o=(r=$(n)).data("id"),s=e.objectlinksCollection.get(o),e.requestSubView(u,{uniqueIdPrefix:null!=(i=s.get("project"))?i.uniqueIdPrefix:void 0,uniqueId:s.get("uniqueId")}).bind(r.find(".task-id-placeholder"))}));var e},t.prototype.fetchLinkContent=function(){var e,t,n;return(e=this.getHashQuery())?(null!=(t=this.lastFetchLinkRequest)&&t.abort(),this.lastFetchLinkRequest=this.load({silent:!0,url:"v2/tasks/search",attrs:{uniqueId:e.uniqueId,uniqueIdPrefix:e.uniqueIdPrefix},beforeSend:(n=this,function(){if(!n.linksData||!n.linksData.length)return n.showLoadingIndicator()}),success:function(e){return function(t){var n;if(e.$el)return e.hideLoadingIndicator(),t.map(function(e){}),n=d.filter(e.objectlinksCollection.toJSON(),function(t){return t._id!==e.options._id}),e.linksData=n,e.$el.siblings(".popover-header").show(),e.renderList(n)}}(this)})):this.hide()},t.prototype.load=function(e){return null==e&&(e={}),this.objectlinksCollection.reset(),this.objectlinksCollection.fetch(e)},t.prototype.getInputFilterType=function(){var e,t;return e=this.$inputor.val().replace(/\r\n/g,"\n"),t=this.$inputor.get(0).selectionStart,e=e.substring(0,t),/@[^#@]*?$/.test(e)?this.type=this.options.at:/#[^#@]*?$/.test(e)?this.type=this.options.hash:void 0},t.prototype.resetDatasList=function(){var e;switch(this.type||this.options.at){case"@":return this.getMembersList();case"#":return this._fetchLinkContent||(this._fetchLinkContent=d.debounce((e=this,function(){return e.fetchLinkContent()}),10)),this._fetchLinkContent()}},t.prototype.getMembersList=function(){var e,t,n,r,o,i,s;return t=function(e){return e&&e.length?e:[]},[],e=[this.filterDataList(this.allMembers.projectMembers)||[],this.filterDataList(this.allMembers.groupMembers)||[],this.filterDataList(this.allMembers.organizationMembers)||[],this.filterDataList(this.allMembers.visibleMembers)||[],this.filterDataList(this.allMembers.guestMembers)||[]],n=d.chain(e).map(function(e){return t(e)}).flatten().value(),this.membersData={projectMembers:e[0],groupMembers:e[1],organizationMembers:e[2],visibleMembers:e[3],guestMembers:e[4]},this.$("ul.symbol-list h5").show(),(null!=(r=this.membersData.projectMembers)?r.length:void 0)&&(null!=(o=this.membersData.groupMembers)?o.length:void 0)||this.$("h5.project-members").hide(),(null!=(i=this.membersData.organizationMembers)?i.length:void 0)||this.$("h5.not-project-members").hide(),(null!=(s=this.membersData.guestMembers)?s.length:void 0)||this.$("h5.guest-members").hide(),this.$el.siblings(".popover-header").hide(),this.renderList(n)},t.prototype.filter=function(e){var t;if(e.keyCode!==o.ESC&&(t=this.$inputor.val(),!this.inputVal||this.inputVal!==t))return this.inputVal=t,this.getInputFilterType(),this.resetDatasList()},t.prototype.renderList=function(e){if(e&&!(e.length>300)){if(e.length)this.show();else if(this.isShowing)return this.hide();return this.rePosition(),this.activateFirst(),this}},t.prototype.filterDataList=function(e){var t,n;return e||(e=[]),""===(t=this.getQuery())?e:t&&(null!=t?t.trim():void 0)?this.options.filter?d.filter(e,(n=this,function(e){return n.options.filter(e,t)})):a.objectsFilter(e,t,{spaceReserve:!0,fields:["name","pinyin","py","email"]}):[]},t.prototype.activateFirst=function(){var e;return(e=this.$(".symbol-item:visible")).filter(".active").length||(this.$(".symbol-item.active").removeClass("active"),e.first().addClass("active")),this},t.prototype.getRegExpAt=function(e,t,n){var r,o,i,s,a,c,l,u,p,h,m,f;return null==e&&(e=null),null==t&&(t="check"),null==n&&(n=""),a="check"===t,s=this.type||this.options.at,o=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},e?(u=[null!=(h=e.pinyin)?h.toLowerCase().replace(/\ /g,""):void 0],i=(null!=(m=e.email)?m.indexOf("@mail.teambition.com"):void 0)>=0?["name","py"]:["name","py","email"],r=d.union(u,d.map(i,function(t){var n;return null!=(n=e[t])?n.toLowerCase():void 0})),p=new RegExp("^"+o(n),"i"),c=d.filter(r,function(e){return e&&p.test(e)}),f=d.map(c,function(e){var t,r;return t=[],r=d.map(e.slice(n.length).split(""),function(e){var n,r,o,i,s;if(t.push(e),o=t.join(""),a)return[o];for(s=[],n=r=-1,i=-o.length;-1<=i?r<=i:r>=i;n=-1<=i?++r:--r)s.push(o.slice(n,+o.length+1||9e9));return s}),d.map(d.union.apply(d,r).sort(function(e,t){return t.length-e.length}),o)}),f=d.union(d.flatten(f)).sort(function(e,t){return t.length-e.length}),l="("+((n?o(n)+"(?:"+f.join("|")+")?":f.join("|"))||o(n))+")"+(n?"":"?"),new RegExp("(^|( *))"+s+l+"(?=( *)(?:"+(a?"[^@]":".")+"*?)$)","gi"+(a?"":"m"))):new RegExp(s+"((?:[^\\x00-\\x19\\x40\\x7f"+s+"])*)$","gi")},t.prototype.getRegExpHash=function(e,t){var n,r,o;return null==t&&(t=!1),e=(e=this.type||this.options.hash).replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t&&(e="(?:^|\\s)"+e),r=(o=h())[0],n=o[1],new RegExp("("+e+")([A-z]{"+r+","+n+"})-(\\d+)$")},t.prototype.getQuery=function(){var e,t,n,r;return e=this.$inputor.val().replace(/\r\n/g,"\n"),n=this.$inputor.get(0).selectionStart,e=e.substring(0,n),(r=(t=this.getRegExpAt().exec(e))?t[1]:null)&&(r=r.toLowerCase()),r},t.prototype.getHashQuery=function(){var e,t,n;return e=this.$inputor.get(0).selectionStart,(n=this.$inputor.val().substring(0,e).match(this.getRegExpHash()))?(n[0],t={flag:n[1],uniqueIdPrefix:n[2],uniqueId:n[3]}):t=null,t},t.prototype.onKeydown=function(e){if(this.isShowing){switch(e.keyCode){case o.UP:e.preventDefault(),this.switch("up");break;case o.DOWN:e.preventDefault(),this.switch("down");break;case o.ESC:e.preventDefault(),this.hide(e);break;case o.TAB:case o.ENTER:e.preventDefault(),e.stopPropagation(),this.select();break;default:$.noop()}return this}},t.prototype.onShown=function(){return this.isShowing=!0,t.__super__.onShown.apply(this,arguments)},t.prototype.onHidden=function(){return this.isShowing=!1,t.__super__.onHidden.apply(this,arguments)},t.prototype.select=function(e){var t,n,r,o,i,s;return(t=$(null!=e?e.currentTarget:void 0)).length||(t=this.$(".symbol-item.active")),s=t.data("id"),this.type===this.options.hash?o=d.find(this.linksData,function(e){return e._id===s}):(n=[this.membersData.projectMembers,this.membersData.groupMembers,this.membersData.organizationMembers,this.membersData.visibleMembers,this.membersData.guestMembers],i=d.chain(n).reduce(function(e,t){return d.union(e,t)},[]).flatten().value(),o=d.find(i,function(e){return e._id===s})),s&&o&&(this.insert(s,o,t,this.type),"function"==typeof(r=this.options).select&&r.select(s,o,this.type),this.hide()),this},t.prototype.insert=function(e,t,n,r){var o,i,s,a,c,l,u,p;return t?(o=this.$inputor.val().replace(/\r\n/g,"\n"),a=this.$inputor.get(0).selectionStart,(s=document.createEvent("CustomEvent")).initCustomEvent("input",!0,!1,{}),r===this.options.at?(l=(c=this.getRegExpAt(t,"check").exec(o.substring(0,a)))[3],i=c.index,o=o.replace(this.getRegExpAt(t,"replace",l),function(e,n,r,o,s,a){var l;return a!==c.index?e:(s=""===s?" ":"",l=(n=""===n&&""===r?" ":n)+"@"+t.name+s,i+=l.length-s.length+1,l)}),this.$inputor.val(o),this.$inputor[0].dispatchEvent(s),this.$inputor.is(":focus")||this.$inputor.focusAtEnd(),this.$inputor.change().selectRange(i,i),"function"==typeof this.options.onChange&&this.options.onChange(o)):(p=o.substring(a),u=o.substring(0,a)+" "+t.content+" ",this.$inputor.val(u+p),this.$inputor[0].dispatchEvent(s),this.$inputor.is(":focus")||this.$inputor.focusAtEnd(),this.$inputor.change().selectRange(u.length,u.length),"function"==typeof this.options.onChange&&this.options.onChange(u+p)),this):this},t.prototype.activate=function(e){var t;if((t=$(e.currentTarget)).length&&!t.hasClass("active"))return t.addClass("active").siblings().removeClass("active"),this},t.prototype.switch=function(e){var t,n,r,o,i,s;if(!((i=(new Date).getTime())-this.lastSwitchTime<100))return this.lastSwitchTime=i,t=(r=this.$(".symbol-item:visible")).filter(".active"),o=r.index(t),"down"===e?(s=o+1)>=r.length&&(s=0):(s=o-1)<0&&(s=r.length-1),n=r.eq(s),r.removeClass("active"),n.addClass("active"),this.slideTo(n),this},t.prototype.rePosition=function(){var e,t,n,r,o,i;if(null!=(o=this.$popover)&&o.hasClass("in")&&this.$popover.parent()[0]===document.body)return t=this.$inputor.get(0).selectionStart,e=this.$inputor.val().substring(0,t).length,null!==(n=this.getQuery())&&(e=e-n.length-1),20,(r=this.$inputor.caret("offset",e)).top+this.$popover.height()-$(window).scrollTop()+20>$(window).height()?r.top=r.top-this.$popover.height():r.top=r.top+r.height,r.left+this.$popover.width()+20>$(window).width()&&(r.left=r.left-this.$popover.width()),this.$popover.offset({left:r.left,top:r.top}),this.options.fixed?(i=this.$popover[0].getBoundingClientRect(),this.$popover.css({position:"fixed",top:i.top,left:i.left})):void 0},t.prototype.remove=function(){var e;return null!=(e=this.$inputor)&&e.off("keydown.symbolPopoverView").off("keyup.symbolPopoverView").off("blur.symbolPopoverView"),t.__super__.remove.apply(this,arguments)},t}(),d.extend(l.prototype,s),e.exports=l},U3H3Tw5e:function(e,t){e.exports=function(e){var t,n;return'<iframe width="100%" height="100%" src="'+("undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}))(e)+'" frameBorder="0"></iframe>'}},"U7+LhlCy":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";return e.canEdit&&e.editMode?o+=' <input class="file-name-editor form-control" value="'+r(e.fileName)+'"></input>':(o+=' <span class="file-name hinted">'+r(e.fileName)+"</span> ",e.canEdit&&(o+=' <span class="icon icon-pencil hinted" data-title="'+tb_i18n.get("clickToEdit")+"\" data-gta=\"{action: 'edit title', type: 'file', control: 'Title'}\"></span> ")),o}},U7xrKiaO:function(e,t,n){"use strict";n.r(t),n.d(t,"ChatPanelBridge",function(){return i});var r=n("ctsD9mWH"),o=n("HSiQYofP"),i=function(){function e(){}return e.switchChatPanelState=function(e){r.store.dispatch(Object(o.b)(e))},e.isChatPanelInCreating=function(){return r.store.getState().ui.chatRoomPanel.inCreatingChat},e}()},UAKlytna:function(e,t){e.exports=function(e){return'<a class="week-info switch-handler">'+e.weekString+'<span class="icon icon-chevron-down"></span></a>'}},"UAqZPu+N":function(e,t,n){var r,o={}.hasOwnProperty;r=n("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="app",t.prototype.urlRoot="apps",t.prototype.idAttribute="name",t.prototype.getUrl=function(){return"app:"+this.get("name")},t.prototype.getIcon=function(){var e;switch(this.get("name")){case"tasks":e="icon-board";break;case"posts":e="icon-wall";break;case"works":e="icon-folder";break;case"events":e="icon-calendar";break;case"groupchat":e="icon-chat-group";break;case"tags":e="icon-tag";break;case"bookkeeping":e="icon-bookkeeping-logo";break;case"settings":e="icon-cog";break;case"projectinfoapp":e="icon-project-info";break;case"story":e="icon-intelligence";break;case"bug":e="icon-lightning";break;case"sprint":e="icon-sprint";break;default:e="icon-"+this.get("name")}return e},t}()},UBrRDAep:function(e,t,n){var r,o,i,s,a,c,l,u,p={}.hasOwnProperty;r=n("wd/RKGTj"),l=n("vmWJWrVe"),u=n("sa1Ed382"),i=n("oEzVJ1gN"),o=n("yt+aIX9v").PowerUpModalComponent,s=n("f8E1NkYv").ProjectSuspendTips,a=n("LlYmcYj4").ProjectSuspendedTips,c=n("Px5WwN5g").RemoteStorage,n("M8NjRRva"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,l),t.prototype.className="project-tips",t.prototype.viewName="ProjectTips",t.prototype.events={"click .link-suspend":"handleSuspend","click .link-set-end-date":"handleSetEndDate"},t.prototype.initialize=function(e){return this.projectModel=e.projectModel,this.mountNode=this.getMountNode(),this.listen(),this.mount()},t.prototype.mount=function(){return this.projectModel.get("isSuspended")?this.mountSuspendedTips():this.mountSuspendTips()},t.prototype.listen=function(){var e;return this.listenTo(this.projectModel,"change:endDate change:suspendedBy",(e=this,function(){return e.mount()})),this.listenTo(this.projectModel,"change:_suspendedId",function(e){return function(){return e.projectModel.fetch().then(function(){return e.mount()})}}(this))},t.prototype.mountSuspendTips=function(){var e,t,n;if(this.projectId=this.projectModel.get("_id"),this.hasPermission=this.projectModel.getRoleScope()>=1,this.endDate=this.projectModel.get("endDate"),this.hasPermission&&this.shouldShowSuspendTips())return t=Date(this.projectModel.get("updated")).toString(),e=this.getDate(this.endDate).format("YYYY_MM_DD"),this.storageKey=this.getStorageKey(this.projectId,e,t),c.get(this.storageKey).then((n=this,function(e){return e?n.unmountReact(n.mountNode):(n.powerupConfigMountNode=$(".power-up-config-mount-node").get(0),n.unmountReact(n.mountNode),n.requestReactView(n.mountNode,s,{endDate:n.projectModel.get("endDate"),onClose:n.handleClose.bind(n)}))}));this.unmountReact(this.mountNode)},t.prototype.mountSuspendedTips=function(){return this.requestReactView(this.mountNode,a,{suspendedAt:this.projectModel.get("suspendedAt"),suspendedBy:this.projectModel.get("suspendedBy")})},t.prototype.getStorageKey=function(e,t,n){return"PROJECT_SUSPEND_TIPS_"+e+"_"+t+"_"+n},t.prototype.getDate=function(e){return r(e)},t.prototype.getMountNode=function(){return this.$el.get(0)},t.prototype.handleSuspend=function(e){return e.preventDefault(),this.requestSubView(i,{projectModel:this.projectModel,tabName:"more"})},t.prototype.handleSetEndDate=function(e){var t;return e.preventDefault(),this.hasOpenedOverviewApp()?this.isInOverviewApp()?void 0:(t="project/"+this.projectId+"/projectinfoapp?opened=endDate",u.router.navigate(t,{trigger:!0})):this.openPowerUpModal()},t.prototype.handleClose=function(){return c.set(this.storageKey,(new Date).toString()),this.unmountReact(this.mountNode)},t.prototype.isInOverviewApp=function(){return"projectinfoapp"===u.APP.currentAppName},t.prototype.hasOpenedOverviewApp=function(){return!!this.projectModel.getApplications().find(function(e){return"projectinfoapp"===e.name})},t.prototype.openPowerUpModal=function(){return this.unmountReact(this.powerupConfigMountNode),this.requestReactView(this.powerupConfigMountNode,o,{fromWhere:"appDetail",featureAppName:"projectinfoapp",defaultOpened:!0,projectModel:this.projectModel})},t.prototype.shouldShowSuspendTips=function(){var e,t;return null!==this.endDate&&(t=r(),e=r(this.endDate),t.add(7,"days").isAfter(e))},t}()},UDY5v2hn:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<div class="creator-flex-body"> <a class="event-creator-remind hinted ';return e.remindTitle!=tb_i18n.get("remind.close")&&(o+=" active "),o+="\" data-gta=\"{action: 'set reminder', type: 'event', control: '",e.isEdit?o+="Event Editor":o+="New Event",o+='\'}" data-title="'+r(e.remindTitle||tb_i18n.get("click.set.task.reminder"))+'" > <span class="icon icon-alert-clock"></span> </a></div>'}},UEjVuis2:function(e,t,n){},UFJOeuYZ:function(e,t){e.exports=function(e){var t='<aside class="tag-left"> <div class="left-header second-header"> ';return e.permissions.tagPost&&(t+=" <a class=\"tag-creator-handler link-add-handler\" data-gta=\"{action: 'add content', type: 'tag', control: 'New Tag'}\"> <span class=\"icon icon-circle-cross\"></span>"+tb_i18n.get("tag.view.create")+" </a> "),t+=' </div> <div class="tag-list thin-scroll hack-render-bug"></div></aside><section class="tag-right"> <div class="right-header second-header"></div> <div class="tag-content-wrap thin-scroll"></div> <div class="placeholder"> <h3>'+tb_i18n.get("tag.view.placeholder.title")+"</h3> <p> "+tb_i18n.get("tag.view.placeholder.info")+" ",e.isPublicServe&&(t+=" "+tb_i18n.get("tag.view.placeholder.infoLink")+" "),t+=" </p> </div></section>"}},UHEHxqn1:function(e,t,n){"use strict";n.r(t),n.d(t,"getScenarioTaskRedirectUrl",function(){return r});var r=function(e,t){void 0===t&&(t=null);var n="smartGroups/scenariofieldconfig/"+e;return t&&(n+="/task/"+t),n}},"UIdRF/8X":function(e,t){},"ULzZnFx/":function(e,t){e.exports=function(e){var t='<div class="work previewer-thumbnail"> <div class="work-thumbnail"><p class="work-name"></p></div> <p class="work-title"></p> <p class="work-fall-title">'+(e.fallTitle||"")+"</p> ";return e.download&&(t+=" <a class=\"previewer-download-link\" data-gta=\"{action: 'open detail', type: 'file', control: 'Left Download Button', method: 'download'}\"></a> "),t+=' <p class="deleted-info">'+tb_i18n.get("previewer.file.deleted")+"</p></div>"}},UMSZlliB:function(e,t,n){e.exports=n.p+"images/dorachijing@2x.1a280f78.png"},UWIAOOh5:function(e,t,n){var r,o,i,s={}.hasOwnProperty;r=n("aD6I3VT4"),o=n("YFL2W2Hw"),i=n("NwOfh+fP"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.tagName="section",t.prototype.viewName="DetailInfosTagView",t.prototype.className="detail-infos-tag-view flex no-border-wrapper",t.prototype.initialize=function(e){return this.options=e,t.__super__.initialize.apply(this,arguments),this.objectModel=this.options.objectModel,this.simplifiedVersion=this.options.simplifiedVersion,this.canEdit=this.options.canEdit,this.renderBasic(),this.renderTagPicker()},t.prototype.isCase=function(){var e;return!!(null!=(e=this.objectModel.get("tagIds"))?e.length:void 0)},t.prototype.hasPermission=function(){return!0},t.prototype.renderTagPicker=function(){var e,t;return e=this.requestSubView(i,Object.assign({},this.options,{hasPutPermission:this.canEdit,triggerOver:(t=this,function(){return t.trigger("over")})})).$el,this.$(".detail-infos-content").html(e)},t.prototype.renderBasic=function(){return this.$el.html(o({simplifiedVersion:this.simplifiedVersion}))},t}()},"UaRQ/2K/":function(e,t,n){e.exports={separator:"separator__2TAO","task-path":"task-path__3IzF",portion:"portion__Na91"}},"Uh8C4V5+":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=(n("P4sAzqTu"),n("q1tIBJhx")),i=n("TSYQbtd+"),s=n.n(i),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e,t=this.props,n=t.prefix,r=t.id,i=t.className,a=s()("task-unique-id",((e={})[""+i]=!!i,e));return o.createElement("span",{className:a,"data-role":"task-unique-id","data-title":n+"-"+r})},t}(o.PureComponent);n.d(t,"a",function(){return a})},UiLfX8VM:function(e,t,n){e.exports={"scenariofield-section":"scenariofield-section__1lkS","scenariofield-item":"scenariofield-item__3bhm","scenariofield-flowstatus":"scenariofield-flowstatus__1rq8","scenariofield-executor":"scenariofield-executor__1SHI","scenariofield-precondition":"scenariofield-precondition__2W7Y","scenariofield-label":"scenariofield-label__3VeD","scenariofield-steps":"scenariofield-steps__3Tq2","scenariofield-label-required":"scenariofield-label-required__1KNH","scenariofield-label-icon":"scenariofield-label-icon__lMpM","scenariofield-label-name":"scenariofield-label-name__39-e","scenariofield-component":"scenariofield-component__lfKT",precondition:"precondition__2gRk","scenariofield-more":"scenariofield-more__3Ae9","basic-section":"basic-section__29Wr","basic-section-status":"basic-section-status__3NqQ","content-editor":"content-editor__1SMA","in-creation":"in-creation__2PuQ"}},"UiuZC/pL":function(e,t,n){e.exports={"task-dependency":"task-dependency__3Liy","add-task-dependency-title":"add-task-dependency-title__13Pn","task-dependency-header":"task-dependency-header__n1jI","task-dependency-info":"task-dependency-info__3Q89","task-dependency-group-header":"task-dependency-group-header__gzLK","task-dependency-item":"task-dependency-item__3vKe"}},UlLXXUDL:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h={}.hasOwnProperty;l=n("a+N5u/Cl"),u=n("sa1Ed382"),r=n("VADuHuYF"),o=n("X7+VPM8x"),s=n("vmWJWrVe"),i=n("bZr3G77e"),c=n("ZiyDPH8B"),a=n("5CiSxGri"),d=n("kxBV4ly7"),p=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)h.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="WorksBackgroundUploaderView",t.prototype.tagName="section",t.prototype.className="works-background-uploader",t.prototype.events={"click .maximize-creator":"maximize","click .minimize-creator":"minimize","click .close-creator":"closeCreator"},t.prototype.initialize=function(){return this.renderBasic(),this.collections=[]},t.prototype.addCollection=function(e){return this.collections=[e].concat(this.collections),this.renderTitle(),this.listenToCollection(e)},t.prototype.resetCollection=function(){return this.stopListening(this.collections),this.collections=[],this.renderTitle()},t.prototype.updateWorks=function(){return this.renderWorks()},t.prototype.listenToCollection=function(e){var t;return this.listenTo(e,"change:queued",(t=this,function(){if(l.every(e.map(function(e){return!e.get("queued")})))return t.renderWorks(),t.renderTitle()})),this.listenTo(e,"remove reset",function(e){return function(){return e.renderWorks(),e.renderTitle(),e.checkClose()}}(this)),this.listenTo(e,"change:completed",function(e){return function(){return e.renderTitle(),e.checkClose()}}(this)),this.listenTo(e,"update change:completed",function(t){return function(){return t.checkUpload(e)}}(this))},t.prototype.renderBasic=function(){return this.$el.html(r()),this.$workSet=this.$(".work-set")},t.prototype.renderTitle=function(){var e,t;return e=this.getTotalCount(),t=this.getUploadedCount(),this.$title=this.$(".card-title-doing"),t===e?this.$title.text(tb_i18n.get("works.background.uploader.uploaded")):this.$title.text(tb_i18n.get("works.background.uploader.uploading",t,e))},t.prototype.renderWorks=function(){var e,t;if(this.removeSubViews(),e=this.getVisibleCollections().map((t=this,function(e){return t.renderWork(e)})),this.$workSet.append(e),0===e.length)return this.minimize().hide()},t.prototype.checkClose=function(){return window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((e=this,function(){if(e.getUploadedCount()===e.getTotalCount())return e.minimize()}),2e3);var e},t.prototype.getVisibleCollections=function(){return l.chain(this.collections).map(function(e){return e.filter(function(e){return!e.get("queued")})}).flatten().value()},t.prototype.getTotalCount=function(){return this.getVisibleCollections().length},t.prototype.getUploadedCount=function(){return this.getVisibleCollections().filter(function(e){return e.get("completed")}).length},t.prototype.renderWork=function(e){return this.requestSubView(a,{workModel:e,isBackground:!0}).$el},t.prototype.checkUpload=function(e){if(0===e.getUploadingCount())return this.upload(e)},t.prototype.upload=function(e){var t,n,r,o;if(r=(n=e.toJSON()).filter(function(e){return!(e.filePath||e.isUpdateVersion)}),t=n.filter(function(e){return e.filePath}),r.length||t.length)return Promise.all([r.length?[this.getWorksRequests(e,r)]:[],t.length?this.getDirsRequests(e,t):[]]).then((o=this,function(){return o.onUploadFinish(e)})).catch(function(e){return function(t){return p(t),e.minimize()}}(this))},t.prototype.getWorksRequests=function(e,t){return new Promise((n=this,function(r,o){return e.addWorks(n.pickAttributes(t),{_projectId:e._projectId,success:function(t){var n;return"function"==typeof e.onUploadWorksSuccess&&e.onUploadWorksSuccess(t),null!=(n=c.find(e._boundToObjectId))&&n.add(t),r()},error:o})}));var n},t.prototype.getDirsRequests=function(e,t){var n;return n=e._boundToObjectId,d.assembleData(this.pickAttributes(t)).map(function(e){return l.extend({},e,{_id:n})}).forEach(function(e){return i.post("collections/"+n+"/upload",e,{success:function(){if(!t[0].webkitRelativePath)return u.gta.event({action:"added content",type:"folder",control:"Upload File",method:"drag"})}})})},t.prototype.pickAttributes=function(e){return l.map(e,function(e){return l.pick(e,"filePath","fileKey","fileName","fileType","fileSize","fileCategory","imageWidth","imageHeight","involveMembers","involveGroups","involveTeams","involveAllProjectMembers","source")})},t.prototype.onUploadFinish=function(e){return this.stopListening(e)},t.prototype.closeCreator=function(){return this.getUploadedCount()===this.getTotalCount()?this.close():this.requestSubView(o,{title:tb_i18n.get("works.background.uploader.close.confirm.title"),description:tb_i18n.get("works.background.uploader.close.confirm"),onConfirm:(e=this,function(){return l.each(e.subViews,function(e){var t;return null!=(t=e.workModel)&&"function"==typeof t.abort?t.abort():void 0}),e.close()})});var e},t.prototype.close=function(){return this.collections.forEach(function(e){return e.reset(null,{silent:!0})}),this.collections=[],this.removeSubViews(),this.$el.hide()},t.prototype.maximize=function(){return this.$el.removeClass("minimize")},t.prototype.minimize=function(){return this.$el.addClass("minimize")},t.prototype.show=function(){return this.maximize().show()},t}()},UnQ0Owux:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){var t=e.permissions,n=t.putStartDate,r=t.putDueDate;return e.isVisible&&n&&r}},"UtaV/YnI":function(e,t,n){"use strict";n.r(t),n.d(t,"GroupMessagePanelComponent",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("NdG5lKr9"),c=n("sa1Ed382"),l=function(e){function t(t){var n=e.call(this,t)||this;return n.handleMute=function(){var e=n.props,t=e.roomInfo;if((0,e.markMute)(t),t){var r=t.isMute;c.gta.event({action:"switch mute",page:"Chats Page",type:"group",category:r?"off":"on"})}},n.gotoGroupInfoView=function(){n.dropdownRef&&n.dropdownRef.close();var e=n.props,t=e.roomInfo,r=e.onClickGotoGroup;t&&t.group&&t.group._id&&r&&(r(),c.gta.event({action:"open group detail",page:"Chats Page"}))},n.onClickHandlerMore=function(){c.gta.event({action:"toggle more menu",page:"Chats Page",type:"group"})},n.saveDropdownRef=function(e){n.dropdownRef=e},n.showAddMemberModal=function(){n.dropdownRef&&n.dropdownRef.close(),n.props.showAddMemberModal(),c.gta.event({action:"add member",page:"Chats Page",type:"group"})},n.panelType="group",n}return r.d(t,e),t.prototype.renderHandlerMore=function(){var e=this.props,t=e.isPseudo,n=e.roomInfo,r=n&&n.isMute||!1,a=!t&&o.createElement(s.MenuItem,null,i.get("message.panel.handler.group.mute"),o.createElement(s.Switch,{size:"small",defaultChecked:r,onClick:this.handleMute})),c=o.createElement(s.Menu,{className:"message-panel-menu"},o.createElement(s.MenuItem,{onClick:this.gotoGroupInfoView},i.get("message.panel.handler.group.info")),a,o.createElement(s.MenuItem,{onClick:this.showAddMemberModal},i.get("message.panel.handler.group.invite")));return o.createElement(s.Dropdown,{content:c,placement:"bottom",ref:this.saveDropdownRef,persistence:!0},o.createElement(s.IconButton,{name:"more",color:"gray",onClick:this.onClickHandlerMore}))},t.prototype.renderHandlers=function(){return o.createElement("div",{className:"header-handlers"},this.renderHandlerMore(),o.createElement(s.IconButton,{name:"remove",color:"gray",onClick:this.props.removeChatModal}))},t.prototype.renderHeaderContent=function(){var e=this.props.roomInfo;if(!e)return null;var t=e&&e.group&&e.group.name;return o.createElement("div",{className:"header-content"},o.createElement(s.Tooltip,{title:t},o.createElement("h4",null,t)),this.renderHandlers())},t}(a.a),u=Object(a.b)(l)},V8m3grrn:function(e,t,n){"use strict";n.r(t),n.d(t,"PluginIframe",function(){return p});var r=n("mrSGxOB2"),o=n("TSYQbtd+"),i=n.n(o),s=n("q1tIBJhx"),a=n.n(s),c=n("5eNik3+6"),l=n("kxdxzisr"),u=n.n(l),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setIframeRef=function(e){t.iframeRef=e},t.setMountNodeZIndex=function(e){t.props.mountNode.style.zIndex=e},t.setContentNodeZIndex=function(e){t.contentEl.style.zIndex=e},t.pushStyle=function(e){t.iframeRef.contentWindow&&t.iframeRef.contentWindow.postMessage({type:"changeStyle",style:e},"*")},t.listenToBottomLift=function(){t.bottomLiftSub$=c.PluginLayerManager.bottomLiftEmitter.subscribe(function(e){e?(t.iframeRef.className=t.getClassName(!0),t.setMountNodeZIndex(t.props.mountNodeZIndex||"50"),t.setContentNodeZIndex("100"),t.pushStyle(t.props.injectedStyle)):(t.iframeRef.className=t.getClassName(!1),t.setMountNodeZIndex("auto"),t.setContentNodeZIndex("auto"),t.pushStyle({paddingTop:"0"}))})},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.contentEl=document.getElementById("teambition-web-content"),this.iframeRef&&this.props.needLayerManager&&(this.iframeRef.onload=this.listenToBottomLift)},t.prototype.componentWillUnmount=function(){this.bottomLiftSub$&&this.bottomLiftSub$.unsubscribe(),c.PluginLayerManager.remove()},t.prototype.getClassName=function(e){var t;return i()(this.props.className,((t={})[u.a.lifted]=e,t))},t.prototype.render=function(){return a.a.createElement("iframe",{ref:this.setIframeRef,className:this.getClassName(),src:this.props.url,frameBorder:"0"})},t}(a.a.PureComponent)},VADuHuYF:function(e,t){e.exports=function(e){return'<div class="card"> <div class="card-header"> <p class="card-title"> <span class="card-title-doing"></span> </p> <a class="maximize-creator icon icon-window-max"></a> <a class="minimize-creator icon icon-window-min"></a> <a class="close-creator icon icon-remove"></a> </div> <ul class="work-set clearfix thin-scroll"></ul></div>'}},"VDY/mBIx":function(e,t,n){e.exports={"task-story-point":"task-story-point__ICkA"}},VEXIRFdZ:function(e,t,n){e.exports=function(e){var t="",r=n("90U+kJWN"),o=r.UNIQUE_ID_PREFIX_MIN_LENGTH,i=r.UNIQUE_ID_PREFIX_MAX_LENGTH;return t+='<div class="copy-project-wrap"> <div class="form-group"> <h5>'+tb_i18n.get("project.name")+'</h5> <input class="project-name form-control margin-bottom" value="'+(e.model.name||"")+'" /> </div> ',e.displayTaskUniqueId&&(t+=' <div class="form-group required"> <h5>'+tb_i18n.get("project.number.task.id.prefix")+'</h5> <input class="project-unique-id-prefix form-control margin-bottom" value="'+(e.model.uniqueIdPrefix||"")+'" placeholder="'+tb_i18n.get("project.creator.template.unique.id.prefix.placeholder",o,i)+'" /> <p class="project-unique-id-prefix-error"> <span class="icon icon-circle-remove"></span> <span class="project-unique-id-prefix-error-text"></span> </p> </div> '),t+=' <div class="project-owner form-group"> <h5> '+tb_i18n.get("project.creator.owner")+" ",e.disabledSelectOwnerTips&&(t+=" "+e.disabledSelectOwnerTips+" "),t+=' </h5> <div class="open-selector-handler form-control owner-handler ',e.displayOwner||(t+="disabled"),t+='"> <span class="selector-title"></span> <span class="icon icon-chevron-down"></span> </div> </div> <div class="project-tags"> <h5>'+tb_i18n.get("project.menu.copy.project.categories.selector.title")+'</h5> <div class="form-group"></div> </div> <div class="project-visibility form-group"> <div class="visibility-handler"> <a> <span class="icon icon-lock"></span> <span class="menu-item-title">'+tb_i18n.get("copyAs")+tb_i18n.get("project.setting.visibility.project")+'</span> </a> </div> </div> <button class="submit-copy btn btn-primary">'+tb_i18n.get("confirm")+"</button></div>"}},"VLEJ/3fv":function(e,t,n){"use strict";n.r(t),n.d(t,"getRole",function(){return a}),n.d(t,"getPaidOrgs",function(){return c}),n.d(t,"getUserProfile",function(){return l});var r=n("mrSGxOB2"),o=n("sa1Ed382"),i=n("a+N5u/Cl"),s=n("85182E8g");function a(e){switch(e){case 0:return"成员";case 1:return"管理员";case 2:return"拥有者";default:return""}}function c(){return s.get(0).filter(function(e){return e.payment.isPaid&&e.getRoleScope()>=0&&e.payment.isActive})}function l(){var e=o.user.get("created"),t=o.user.get("locationByIP"),n=o.user.id,s=o.user.get("name"),l=o.user.get("email"),u=new Date(e).valueOf()/1e3|0,p=o.PREFERENCE.getLanguage(),d=o.env,h=o.version,m=Math.floor((Date.now()-new Date(e).getTime())/864e5),f=o.PREFERENCE.get("lastWorkspace"),g=Object.create(null);t&&(g.city=t.city,g.country=t.country,g.region=t.region);var v=c(),b=null;v.length&&(b="string"==typeof f&&"personal"!==f?i.find(v,function(e){return e.id===f}):i.sample(v));var y=r.a({created:e,locationByIP:t,userKey:n,name:s,email:l,created_at:u,language:p,env:d,version:h,daysSinceRegistered:m},g),k=b&&b.payment||void 0;return k&&Object.assign(y,{company:{id:b.get("_id"),name:b.get("name"),plan:k.memberQuota,memberCount:k.memberQuota,created_at:new Date(e).valueOf()/1e3|0,expired:new Date(k.expiration).valueOf()/1e3|0,organizations:v.map(function(e){return e.get("_id")}).slice(0,9).join(", "),orgRole:a(b.getRoleScope())}}),y}},"VNKqy21+":function(e,t,n){e.exports=n.p+"images/d_wabishi@2x.9d98ca4b.png"},VP3MIruh:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h={}.hasOwnProperty;p=n("a+N5u/Cl"),d=n("sa1Ed382"),o=n("wd/RKGTj"),u=n("vmWJWrVe"),r=n("bZr3G77e"),l=n("3eMzznN/"),c=n("N2d6wNyq"),s=n("nL4olqOP"),i=n("SzPjtQAa"),$(window),a=o("2015-08-15"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)h.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,u),t.prototype.viewName="OrganizationReportView",t.prototype.className="organization-report-view card",t.prototype.events={"click .switch-handler":"switchWeek","click a.org-reports-rank-member":"showMemberOverall","click .task":"openTaskDetail"},t.prototype.initialize=function(e){var t;if(this.options=null!=e?e:{},this.options.organizationModel)return this.startOfWeek=o().startOf("week"),this.organization=this.options.organizationModel,this.createTime=o(this.organization.get("created")),this.dueTime=o().subtract(7,"day"),this.projectsCollection=s.get(0),n.e(41).then((t=this,function(e){return t.BasicTemplate=n("i94n7RrC"),t.HeaderTemplate=n("ULFoSMcX"),t.ReportTemplate=n("cfegJ1s0"),t.MemberTasksTemplate=n("NIzhN6x/"),t.createTime.isAfter(t.dueTime)?t.$el.html(t.requestSubView(i,{organization:t.organization,type:"report",header:{title:tb_i18n.get("organization.report.blank.title"),description:tb_i18n.get("organization.report.blank.description")}}).$el).addClass("organization-report-content"):(t.renderBasic(),t.load({success:function(){return t.renderBody()}}))}).bind(null,n)).catch(n.oe)},t.prototype.load=function(e){var t,n,i;return null==e&&(e={}),this.showLoadingIndicator(this.$body.empty()),t=this.startOfWeek.clone().add(1,"day"),n=this.startOfWeek.isBefore(o(),"week"),r.ajax("organizations/"+this.organization.id+"/statistics/"+t.toISOString(),{expireCache:{namespace:"org_report_frozen_"+t.valueOf(),expire:n?3600:300},success:(i=this,function(n){return i.hideLoadingIndicator({animated:!0}),i.isFrozen=n.isFrozen||i.startOfWeek.isBefore(o().startOf("week")),i.reportModel=new c(n,{date:t}),i.listen(),e.success()})})},t.prototype.listen=function(){return this.stopListening(),this.listenTo(this.reportModel,"change",this.renderBody)},t.prototype.renderBasic=function(){return this.$el.html(this.BasicTemplate()).addClass("organization-report-content"),this.$header=this.$(".org-reports-header"),this.$body=this.$(".org-reports-body"),this.renderHeader()},t.prototype.renderHeader=function(){return this.$header.html(this.HeaderTemplate({hasPrev:this.startOfWeek.isAfter(a,"week")&&this.startOfWeek.isAfter(o(this.organization.get("created")),"week"),hasNext:this.startOfWeek.isBefore(o(),"week"),startDate:this.startOfWeek.format("M.D"),endDate:this.startOfWeek.clone().endOf("week").format("M.D"),weekNumber:this.startOfWeek.format("wo")}))},t.prototype.renderBody=function(){var e;return(e=this.reportModel.toJSON()).isFrozen=this.isFrozen,this.$body.html(this.ReportTemplate(e)),this.$tabs=this.$(".org-reports-tab"),this.$tabContents=this.$(".org-reports-tab-content"),this.$states=this.$('.org-reports-tab-content[data-tab="states"] .org-reports-tab-list'),this.$doneList=this.$('.org-reports-tab-content[data-tab="done"] .org-reports-tab-list'),this.$delayList=this.$('.org-reports-tab-content[data-tab="delay"] .org-reports-tab-list'),this.renderDelayTasks(),this.renderDoneTasks()},t.prototype.restructTasks=function(e){var t,n,r,o,i,s;for(t in n=[],r=p.groupBy(e,"_executorId"))o={tasks:r[t],executor:r[t][0].executor},24===t.length?n.push(o):s=p.clone(o);return i=p.sortBy(n,function(e){return-e.tasks.length}),s&&i.push(s),i},t.prototype.extendDelayTasks=function(e){var t,n,r,o;for(r=[],t=0,n=e.length;t<n;t++)o=e[t],r.push(p.extend({},o,{isDone:!1,dueDate:o.dueDate?l.formatDate(o.dueDate):void 0,accomplished:o.accomplished?l.formatDate(o.accomplished):void 0}));return r},t.prototype.extendDoneTasks=function(e){var t,n,r,o;for(r=[],t=0,n=e.length;t<n;t++)o=e[t],r.push(p.extend({},o,{isDone:!0,dueDate:o.dueDate?l.formatDate(o.dueDate):void 0,accomplished:o.accomplished?l.formatDate(o.accomplished):void 0}));return r},t.prototype.renderDelayTasks=function(){var e,t,n,r,o,i,s,a;for(e=this.$delayList.empty(),(a=this.reportModel.get("delayTasks")).sort(this.getDelaySorter()),a=this.extendDelayTasks(a),s=[],r=0,o=(i=this.restructTasks(a)).length;r<o;r++)(n=i[r]).control="Delayed Task List",t=this.MemberTasksTemplate(n),s.push(e.append(t));return s},t.prototype.renderDoneTasks=function(){var e,t,n,r,o,i,s,a;for(e=this.$doneList.empty(),(a=this.reportModel.get("doneTasks")).sort(this.getDoneSorter()),a=this.extendDoneTasks(a),s=[],r=0,o=(i=this.restructTasks(a)).length;r<o;r++)(n=i[r]).control="Completed Task List",t=this.MemberTasksTemplate(n),s.push(e.append(t));return s},t.prototype.switchWeek=function(e){var t,n;return t=$(null!=e?e.currentTarget:void 0).data("type"),this.startOfWeek["next"===t?"add":"subtract"](1,"weeks"),this.renderHeader(),this.load({success:(n=this,function(){return n.renderBody()})})},t.prototype.showMemberOverall=function(e){var t,n,r;if(n=(t=$(null!=e?e.currentTarget:void 0)).data("id")){switch(d.router.navigateToMemberProfile(this.organization.id,n),t.parents(".org-reports-tab-content").data("tab")){case"delay":r="Delayed List";break;case"done":r="Completed List";break;default:r="Unknow"}return d.gta.event({action:"open detail",type:"org member",control:r}),this}},t.prototype.openTaskDetail=function(e){var t;if(t=$(null!=e?e.currentTarget:void 0).data("id"))return d.APP.openTaskPreviewer(t)},t.prototype.getDelaySorter=function(){return function(e,t){return new Date(e.dueDate)-new Date(t.dueDate)}},t.prototype.getDoneSorter=function(){return function(e,t){return new Date(e.accomplished)-new Date(t.accomplished)}},t}()},VPWUgVmx:function(e,t,n){e.exports={root:"root__3tAQ",isError:"isError__1JXI",inputContent:"inputContent__YWEY",input:"input__2U2a"}},VWt7MFBv:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;a=n("sa1Ed382"),r=n("8B9HnOA2"),s=n("vmWJWrVe"),o=n("wd/RKGTj"),i=n("rx72K1eX").Timestamp,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="PostListView",t.prototype.tagName="ul",t.prototype.className="post-list-view",t.prototype.events={"click .post":"openDetail"},t.prototype.initialize=function(e){if(null!=e?e.postsCollection:void 0)return this.options=e,this.postsCollection=e.postsCollection,this.renderBasic().listen(),this},t.prototype.listen=function(){var e;return this.listenTo(this.postsCollection,"add change",(e=this,function(t){return e.renderPost(t,!0)})),this.listenTo(this.postsCollection,"remove destroy",this.removePost),this},t.prototype.renderBasic=function(){var e;return this.postsCollection.each((e=this,function(t){return e.renderPost(t)})),this},t.prototype.renderPost=function(e,t){var n,s,a;return s=this.$(".post[data-id="+e.id+"]"),(a=e.toJSON()).creator||(a.creator={_id:"",name:""}),n=$(r(a)),s.length?s.replaceWith(n):this.$el[t?"prepend":"append"](n),this.requestReactView(n.find(".react-time-stamp").get(0),i,{initialTime:o(a.created).toDate()}),this},t.prototype.removePost=function(e){return this.unmountReact(this.$(".post[data-id="+e.id+"] .react-time-stamp").get(0)),this.$(".post[data-id="+e.id+"]").remove(),this},t.prototype.openDetail=function(e){return a.APP.openPostPreviewer($(e.currentTarget).data("id")),this},t}()},VXsmYIYU:function(e,t,n){e.exports={"task-locator-dropdown":"task-locator-dropdown__1AQT","task-locator-content":"task-locator-content__34ow","task-locator-trigger":"task-locator-trigger___pnF","project-logo":"project-logo__27-5","locator-name":"locator-name__2M4f"}},VdTqBswU:function(e,t,n){"use strict";n.r(t),n.d(t,"configMoreAfterLogin",function(){return c});var r=n("a+N5u/Cl"),o=n.n(r),i=n("2qRnoGmE"),s=n.n(i),a=n("sa1Ed382"),c=function(){var e=s.a.FEATURES,t=e.newOrganization,n=e.newOrganizationUserIds;!t&&o.a.isArray(n)&&(s.a.FEATURES.newOrganization=o.a.includes(n,a.user.id))}},VeKvNOLd:function(e,t,n){"use strict";var r,o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n.n(i),a=n("tLZJUYWX"),c=n.n(a),l=n("a+N5u/Cl"),u=n("TSYQbtd+"),p=n.n(u),d=n("sa1Ed382"),h=n("GESwhXbR"),m=n("/a0nv5kO"),f=n("LDaA6QVr"),g=function(){},v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onToggle=function(e){e.stopPropagation(),t.props.onToggle()},t.onRadioClick=function(){t.props.disabled||(t.props.onSelect(t.props.testgroup._id),d.gta.event({action:"choose content",control:"Choose Group Panel",type:"testcase group",series:t.props.depth+1}))},t}return o.d(t,e),t.prototype.renderRadioButton=function(){return s.a.createElement("div",{className:f["select-handler"]},s.a.createElement("div",{className:f.radio,onClick:this.onRadioClick},s.a.createElement("input",{type:"radio",checked:this.props.selectedId===this.props.testgroup._id,value:this.props.testgroup._id,disabled:this.props.disabled,onChange:g}),s.a.createElement("span",{className:f["radio-inner"]})))},t.prototype.renderToggler=function(){var e;if(this.props.hasChildren){var t=this.props.isExpanded?"triangle-down":"triangle-right";e=s.a.createElement(h.Icon,{name:t,size:12,onClick:this.onToggle})}else e=s.a.createElement("div",{className:f["item-toggler-dot"]});return s.a.createElement("div",{className:f["item-toggler"]},e)},t.prototype.renderName=function(){var e=this.props.testgroup,t=e.name,n=e.resourceCount;return s.a.createElement("span",{className:f["item-content"]},s.a.createElement("span",{className:f["item-name"]},t),n>0&&s.a.createElement("span",{className:f["item-count"]}," · "+n))},t.prototype.render=function(){var e,t={paddingLeft:20*(this.props.depth+1)+25},n=p()(f["item-wrapper"],((e={})[f.disabled]=!!this.props.disabled,e));return s.a.createElement("li",{className:n,style:t},s.a.createElement("div",{className:f.item},this.renderRadioButton(),this.renderToggler(),this.renderName()))},t}(i.PureComponent),b=n("/onrLvIr"),y=n("LDaA6QVr"),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderTestgroupAll=function(e){var n=e.isExpanded,r=e.onToggle,o={_id:"all",ancestorIds:[],resourceCount:t.props.sum,name:a.get("testgroup.tree.all")},i=t.props.checkIsValid(o);return s.a.createElement(v,{testgroup:o,depth:-1,hasChildren:!0,isExpanded:n,selectedId:t.props.selectedId,onToggle:r,onSelect:t.props.onSelect,disabled:!i})},t.renderNode=function(e){var n=e.data,r=e.depth,o=e.onToggle,i=e.hasChildren,a=e.isExpanded,c=t.props.checkIsValid(n);return s.a.createElement(v,{testgroup:n,depth:r,hasChildren:i,isExpanded:a,selectedId:t.props.selectedId,onToggle:o,onSelect:t.props.onSelect,disabled:!c})},t}return o.d(t,e),t.prototype.render=function(){var e=this.props.testgroups,t=Object(b.b)(e);return s.a.createElement(m.a,{className:y.tree,draggable:!1,nodes:t,renderNode:this.renderNode,renderRoot:this.renderTestgroupAll,canDrag:!1,canDrop:!1})},t}(i.PureComponent),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSelect=function(e){t.props.onSelect(e)},t.onConfirm=function(){t.props.onConfirm()},t}return o.d(t,e),t.prototype.renderBody=function(){var e=p()("thin-scroll",y["selector-body"]);return s.a.createElement("div",{className:e},s.a.createElement(k,{testgroups:this.props.testgroups,sum:this.props.sum,selectedId:this.props.selectedTestgroupId,onSelect:this.onSelect,checkIsValid:this.props.checkIsValid}))},t.prototype.renderFooter=function(){return s.a.createElement("div",{className:y["selector-footer"]},s.a.createElement("p",null,this.props.hint),s.a.createElement(h.Button,{disabled:null===this.props.selectedTestgroupId,onClick:this.onConfirm},a.get("testgroup.copy.selector.confirm")))},t.prototype.render=function(){return s.a.createElement("div",{className:y.selector},this.renderBody(),this.renderFooter())},t}(i.PureComponent),w=n("s0r7VfKc"),C=n("vEhZLygU"),S=n("voDUDzOQ");!function(e){e[e.PageTestplan=0]="PageTestplan",e[e.PageTestgroup=1]="PageTestgroup"}(r||(r={}));var E=function(e){function t(t){var n=e.call(this,t)||this;return n.onSubmit=function(){n.props.onSubmit(n.testplanId,n.state.testgroupId)},n.onTestgroupIdChange=function(e){n.setState({testgroupId:e})},n.onTestplanIdChange=function(e){n.testplanId=e,n.setState({testgroupId:null,page:r.PageTestgroup})},n.goBack=function(){n.setState({page:r.PageTestplan,testgroups:null})},n.testplanId=n.props.testplanId,n.state={page:n.props.testgroupOnly?r.PageTestgroup:r.PageTestplan,testplans:null,testgroups:null,testgroupId:null},n}return o.d(t,e),t.prototype.componentDidMount=function(){this.fetchPageData()},t.prototype.componentDidUpdate=function(e,t){t.page!==this.state.page&&this.fetchPageData(),e.opened===this.props.opened||this.props.opened||this.setState({page:r.PageTestplan,testgroupId:null,testgroups:null})},t.prototype.componentWillUnmount=function(){this.testplansSubscription&&this.testplansSubscription.unsubscribe(),this.testgroupsSubscription&&this.testgroupsSubscription.unsubscribe()},t.prototype.fetchPageData=function(){switch(this.state.page){case r.PageTestplan:this.fetchTestplans();break;case r.PageTestgroup:this.fetchTestgroups()}},t.prototype.fetchTestplans=function(){var e=this;this.testplansSubscription&&this.testplansSubscription.unsubscribe(),this.testplansSubscription=w.default.getTestplans(this.props.projectId).changes().subscribe(function(t){e.setState({testplans:t})})},t.prototype.fetchTestgroups=function(){var e=this;this.testgroupsSubscription&&this.testgroupsSubscription.unsubscribe(),this.testgroupsSubscription=w.default.fetch.getTestplanGroups(this.testplanId).subscribe(function(t){e.setState({testgroups:t})})},t.prototype.renderTitle=function(){var e,t=this.state.page!==r.PageTestplan&&i.createElement(h.IconButton,{color:"gray",name:"chevron-left",onClick:this.goBack});return i.createElement("div",{className:S.header},t,i.createElement("p",{className:S.title},((e={})[r.PageTestplan]=c.a.get("testgroup.selector.modal.title"),e[r.PageTestgroup]=c.a.get("testgroup.copy.modal.title"),e)[this.state.page]))},t.prototype.renderLoading=function(){return i.createElement(h.Loading,null)},t.prototype.renderTestplanSelector=function(){return this.state.testplans?i.createElement(C.a,{className:S["testgroup-selector"],inline:!0,autoFocus:!0,testplans:this.state.testplans,onSelect:this.onTestplanIdChange}):this.renderLoading()},t.prototype.renderTestgroupSingleSelector=function(){return this.state.testgroups?i.createElement(_,{testgroups:this.state.testgroups,checkIsValid:this.props.checkIsValid,sum:this.props.sum,hint:this.props.groupHint,selectedTestgroupId:this.state.testgroupId,onConfirm:this.onSubmit,onSelect:this.onTestgroupIdChange}):this.renderLoading()},t.prototype.renderBody=function(){switch(this.state.page){case r.PageTestplan:return this.renderTestplanSelector();case r.PageTestgroup:return this.renderTestgroupSingleSelector()}},t.prototype.render=function(){return i.createElement(h.Modal,{opened:this.props.opened,onVisibleChange:this.props.onVisibleChange,title:this.renderTitle(),width:360,bodyStyle:{padding:0}},i.createElement("div",{className:S.body},this.renderBody()))},t}(i.PureComponent),T=n("XwTZsc6U"),I=n("HnrV0Jrl"),M=n("3wkBMzjd"),j=n("ay2Xcmrs"),P=n("U3116aoz"),x=n("8L77uFaB"),N=function(e){function t(t){var n=e.call(this,t)||this;return n.sourceId=null,n.insertAfterGroup=function(e,t){if(t._id!==e._id&&!t.data.isRoot){var r=Object(b.b)(n.props.testgroups),o=l.findIndex(r,function(e){return e._id===t._id}),i=r.slice(o+1).find(function(e){return e._parentId===t._parentId}),s=r.find(function(e){return e._id===t._parentId});i?n.insertBeforeGroup(e,i):n.moveIntoGroup(e,s)}},n.onDrop=function(e,t,r){switch(d.gta.event({action:"changed order",control:"Testcase Sidebar",type:"testcase group",series:t.depth+1,method:"drag"}),r){case I.a.BEGIN:n.insertBeforeGroup(e,t);break;case I.a.MIDDLE:n.moveIntoGroup(e,t);break;case I.a.END:n.insertAfterGroup(e,t)}},n.checkCopyIsValid=function(e){return!e.isRoot},n.checkIsMoveValid=function(e){var t=n.props.testgroups.find(function(e){return e._id===n.sourceId}),r=e._id;return!e.isRoot&&t.ancestorIds[0]!==r&&n.sourceId!==r&&e.ancestorIds.indexOf(n.sourceId)<0&&!("all"===e._id&&e._testplanId===t._testplanId&&0===t.ancestorIds.length)},n.onCopyConfirm=function(){var e=n.state.selectedTestgroupId;n.props.onCopy(n.sourceId,{nextId:null,_parentId:"all"===e?null:e}),n.onCopyModalVisibleChange(!1)},n.onCrossTestplanMoveConfirm=function(e,t){n.props.moveGroup(n.sourceId,{_nextId:null,_targetTestplanId:e,_parentId:"all"===t?null:t}),d.gta.event({action:"moved content",control:"More Menu",type:"testcase group"}),n.onMoveModalVisibleChange(!1)},n.onCopyModalVisibleChange=function(e){n.setState({copyModalOpened:e})},n.onMoveModalVisibleChange=function(e){n.setState({moveModalOpened:e})},n.openCopyModal=function(e){n.sourceId=e,n.onCopyModalVisibleChange(!0)},n.openMoveModal=function(e){n.sourceId=e,n.onMoveModalVisibleChange(!0)},n.onGroupClick=function(e){n.props.onGroupClick(e._id)},n.renderTestgroupAll=function(e){var t={depth:-1,data:{_id:P.FixedCommonGroup.All,resourceCount:n.props.sum,name:a.get("testgroup.tree.all")},hasChildren:!0,onToggle:e.onToggle,isExpanded:e.isExpanded,canDrag:!1,canDrop:!1,isDragOver:!1,notAllowedDrop:!1};return i.createElement(M.a,o.a({},t,{active:!n.props.activeTestgroupId,handler:n.renderTreeRootHandler(e),onClick:n.handleClick}))},n.handleClick=function(e){n.props.onGroupClick(e._id)},n.renderTestgroupItem=function(e){return i.createElement(M.a,o.a({},e,{className:x["tree-node"],active:n.props.activeTestgroupId===e.data._id,canDrop:!0,onClick:n.onGroupClick,handler:n.renderTreeNodeHandler(e)}))},n.renderGroupCreator=function(e){var t=e.ancestorIds.length+2,r=i.createRef();return t>=j.a?null:i.createElement(h.TitledDropdown,{ref:r,title:a.get("testgroup.creator.title"),onOpen:function(){d.gta.event({action:"add content",control:"List Button",type:"testcase group",series:t})},content:i.createElement(T.a,{onSubmit:function(o){n.props.onCreate(o,e._id,t),d.gta.event({action:"added content",control:"List Button",type:"testcase group",series:t}),r.current&&r.current.close()},submitText:a.get("testgroup.creator.save")})},i.createElement(h.IconButton,{type:"subtle",className:x.handler,name:"plus-sign",color:"gray"}))},n.renderFlyingNodeContent=function(e){var t=e.data.resourceCount>0?e.name+" · "+e.data.resourceCount:e.name,n={paddingLeft:20*(e.depth+1)+9};return i.createElement("div",{className:x["flying-content"]},i.createElement("div",{className:x["flying-drag"]},i.createElement(h.Icon,{name:"draggable-circle"})),i.createElement("div",{style:n,className:x["flying-content-name"]},t))},n.onSelectedTestgroupIdChange=function(e){n.setState({selectedTestgroupId:e})},n.onCopyModalClose=function(){n.onSelectedTestgroupIdChange(null)},n.renderCopySelector=function(){if(!n.state.copyModalOpened)return null;var e=n.props.testgroups.filter(function(e){return!e.isRoot&&e._id!==n.sourceId&&e.ancestorIds.indexOf(n.sourceId)<0});return i.createElement(_,{testgroups:e,sum:n.props.sum,selectedTestgroupId:n.state.selectedTestgroupId,hint:a.get("testgroup.copy.selector.desc"),onConfirm:n.onCopyConfirm,onSelect:n.onSelectedTestgroupIdChange,checkIsValid:n.checkCopyIsValid})},n.canDrag=function(e){return!(!n.props.enableDrag||e.data.isRoot)},n.canDrop=function(e){return!(!n.props.enableDrag||e.data.isRoot)},n.state={copyModalOpened:!1,moveModalOpened:!1,selectedTestgroupId:null},n}return o.d(t,e),t.prototype.insertBeforeGroup=function(e,t){var n=e.data._id,r=t.data.isRoot?null:t.data._id;if(n!==r){var o=Object(b.b)(this.props.testgroups),i=o[l.findIndex(o,function(e){return e._id===t._id})-1];if(!(i&&i.data._id===r||i&&i.data.ancestorIds.indexOf(n)>=0)){var s=e._parentId===t._parentId?{_nextId:r}:{_parentId:t.data.ancestorIds[0]||null,_nextId:r};this.props.moveGroup(n,s)}}},t.prototype.moveIntoGroup=function(e,t){var n=e.data._id,r=t.data._id,o=e._parentId;!t.data.isRoot&&o!==t._id&&n!==t._id&&t.data.ancestorIds.indexOf(n)<0&&this.props.moveGroup(n,{_parentId:r,_nextId:null})},t.prototype.renderTreeRootHandler=function(e){var t=e.isAllExpanded?a.get("collapse"):a.get("expand"),n=e.isAllExpanded?"arrow-collapse":"dashed-vertical";return Object(b.b)(this.props.testgroups).some(function(e){return 0===e.depth&&e.hasChildren})?i.createElement(h.Button,{onClick:function(){var t=e.onToggleAll();d.gta.event({action:t?"unfold testcase group":"fold testcase group",control:"Sidebar"})},type:"subtle",color:"gray",size:"smaller",className:x["all-toggler"]},i.createElement("span",{className:"text"},t),i.createElement(h.Icon,{name:n,className:"icon"})):void 0},t.prototype.renderTreeNodeHandler=function(e){var t;if(t=e.data,!Boolean(t.isRoot))return i.createElement("div",{className:x["handler-list"]},this.renderGroupCreator(e.data),this.renderGroupMenu(e.data))},t.prototype.renderGroupMenu=function(e){var t=i.createElement(h.IconButton,{type:"subtle",color:"gray",name:"more"});return i.createElement("div",{className:x.handler},i.createElement(T.b,{nested:!1,trigger:t,onOpen:function(){d.gta.event({action:"toggle more menu",control:"Testcases Sidebar",type:"testcase group"})},testgroup:e,onEdit:this.props.onEdit,onDelete:this.props.onDelete,openObjectPicker:this.props.openObjectPicker,openCopyModal:this.openCopyModal,openMoveModal:this.openMoveModal,env:this.props.env,canEdit:this.props.canEdit,canDelete:this.props.canDelete,canLink:this.props.canLink,canCopy:this.props.canCreate,canMove:this.props.canMove}))},t.prototype.onDragStart=function(e){d.gta.event({action:"change order",control:"Testcase Sidebar",type:"testcase group",series:e.depth,method:"drag"})},t.prototype.renderMoveTestgroupModal=function(){return!!this.props.canMove&&i.createElement(E,{testgroupOnly:!1,testplanId:this.props.parentId,projectId:this.props.boundToObjectId,sum:this.props.sum,groupHint:a.get("testgroup.move.selector.desc"),opened:this.state.moveModalOpened,onVisibleChange:this.onMoveModalVisibleChange,checkIsValid:this.checkIsMoveValid,onSubmit:this.onCrossTestplanMoveConfirm})},t.prototype.renderCopyTestgroupModal=function(){return!!this.props.canCreate&&i.createElement(h.Modal,{opened:this.state.copyModalOpened,onVisibleChange:this.onCopyModalVisibleChange,title:a.get("testgroup.copy.modal.title"),titlePosition:"center",width:360,onHide:this.onCopyModalClose,bodyStyle:{padding:0}},this.renderCopySelector())},t.prototype.render=function(){var e=this.props.testgroups.map(function(e){return o.a({},e)}),t=Object(b.b)(e),n=p()(x.tree,this.props.className);return i.createElement(i.Fragment,null,i.createElement(m.a,{className:n,nodes:t,draggable:!0,onDrop:this.onDrop,onDragStart:this.onDragStart,renderNode:this.renderTestgroupItem,renderRoot:this.renderTestgroupAll,renderFlyContent:this.renderFlyingNodeContent,canDrag:this.canDrag,canDrop:this.canDrop}),this.renderCopyTestgroupModal(),this.renderMoveTestgroupModal())},t.defaultProps={withHandlers:!1,canEdit:!0,canDelete:!0,canLink:!0,canCreate:!0},t}(i.PureComponent);n.d(t,"a",function(){return N})},"Vi/WkPyP":function(e,t,n){e.exports={"task-priority":"task-priority__Mb6G"}},ViehWwv3:function(e,t,n){e.exports={root:"root__1nrv",header:"header__23CS","header-label":"header-label__3Ziy",body:"body__3Y6d",footer:"footer__3uEs","progress-hint":"progress-hint__24gT","upgrade-handler":"upgrade-handler__2xfT","member-list":"member-list__RTI-","email-invites-list":"email-invites-list__1Qu7","member-wrapper":"member-wrapper__1cgI","member-label":"member-label__JEmy","invite-handler":"invite-handler__1buO",placeholder:"placeholder__2Now",illustration:"illustration__Qm2W","in-search":"in-search__1SlU","placeholder-tip":"placeholder-tip__V5Cl"}},"VilZs/mC":function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("hGNqppva"),o=n("WieTJvx5"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="StageSelectorPopoverView",t.prototype.initialize=function(e){return null==e&&(e={}),this.popoverTitle=tb_i18n.get("stage.selector.title"),this.projectModel=e.projectModel,this.tasklistModel=e.tasklistModel,this.stageModel=e.stageModel,this.scenarioFieldConfig=e.scenarioFieldConfig,this.taskflowStatus=e.taskflowStatus,this.acceptedStatusKinds=e.acceptedStatusKinds,this.acceptedScenarioTypes=e.acceptedScenarioTypes,this.extendStatusFilter=e.extendStatusFilter,this.frozenTypes=e.frozenTypes,this.withDefaultProject=e.withDefaultProject,this.organizationId=e.organizationId,this.hideIndieEntry=e.hideIndieEntry,this.optionalType=e.optionalType,this.withDefaultProject=e.withDefaultProject,this.success=e.success,this.tips=e.tips,this.noFilter=e.noFilter,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){var e,t;return null!=(e=this.StageSelectorView)&&e.remove(),this.StageSelectorView=this.requestSubView(o,{tips:this.tips,projectModel:this.projectModel,tasklistModel:this.tasklistModel,stageModel:this.stageModel,scenarioFieldConfig:this.scenarioFieldConfig,taskflowStatus:this.taskflowStatus,acceptedStatusKinds:this.acceptedStatusKinds,acceptedScenarioTypes:this.acceptedScenarioTypes,extendStatusFilter:this.extendStatusFilter,frozenTypes:this.frozenTypes,withDefaultProject:this.withDefaultProject,organizationId:this.organizationId,hideIndieEntry:this.hideIndieEntry,optionalType:this.optionalType,noFilter:this.noFilter,success:(t=this,function(e){return"function"==typeof t.success&&t.success(e),t.hide()})}),this.$el.html(this.StageSelectorView.$el)},t}()},VlFRLepP:function(e,t,n){e.exports=n.p+"images/w_weifeng@2x.69b21221.png"},"VlMg/8hg":function(e,t,n){},VoC9J8VQ:function(e,t,n){e.exports={"option-list":"option-list__2OCE","custom-select":"custom-select__QsFJ","field-search":"field-search__3A08",placeholder:"placeholder__1NrC","placeholder-img":"placeholder-img__3EyP","placeholder-tip":"placeholder-tip__TfZ2"}},VsSIL2KK:function(e,t){e.exports=function(e){var t,n;return'<input autocapitalize="off" autocorrect="off" autofocus="autofocus" class="form-control search-input" placeholder="'+("undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}))(e.placeholder)+'" spellcheck="false" type="search"/>'}},VtcDpLJ5:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e.projects;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=' <li data-id="'+(s=i[a+=1])._id+'" class="cleafix"> <div class="logo" style="background-image:url('+s.logo+');"></div> <div class="project-name hinted" data-title="'+r(s.name)+'">'+r(s.name)+'</div> <span class="btn btn-default btn-small remove-handle">'+tb_i18n.get("remove")+"</span> </li>";return o}},"W/K/FHRR":function(e,t,n){var r,o,i={}.hasOwnProperty;o=n("sa1Ed382"),r=n("BTjUFA4g"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="EventFieldConfigView",t.prototype.className="event-field-config-view",t.prototype.initialize=function(e){return this.projectModel=e.projectModel,this._configId=e._scenariofieldconfigId,this.boundToObjectType="event",t.__super__.initialize.apply(this,arguments)},t.prototype.requestApplicationFieldsConfig=function(){return t.__super__.requestApplicationFieldsConfig.apply(this,arguments),this.gtaHandler("start to configurate event type")},t.prototype.setDefaultConfig=function(){var e;return this.defaultConfig=null!=(e=this.scenarioFieldConfigsCollection.get(this._configId)||this.scenarioFieldConfigsCollection.at(0))?e.toJSON():void 0,this.setConfig(this.defaultConfig)},t.prototype.gtaHandler=function(e){var t;return t={action:e,control:"Type List",note1:"new event",type:"event"},o.gta.event(t)},t}()},"W/kl2gze":function(e,t,n){"use strict";var r=n("/MKjzBat"),o=n("fvjXLGkK"),i=n("dbBRp+if"),s=n("mrSGxOB2"),a=n("q1tIBJhx"),c=n("sa1Ed382"),l=n("tLZJUYWX"),u=n("GESwhXbR"),p=n("s0r7VfKc"),d=n("cVY30NxL"),h=(n("LOm4bZHF"),function(e){function t(t){var n=e.call(this,t)||this;return n.getSprintLeftTasks=function(e){e.stopPropagation();var t=n.props,r=t.projectId,o=t.sprintId;n.gtaHandler("finish sprint"),p.default.fetch.getSprintTasksStatus(r,o).subscribe(function(e){var t=0===Object(d.sumTaskCount)(e.unDone);n.setState({modalOpened:!t,sprintTaskStatus:e},function(){t&&(n.completeSprint(),n.gtaHandler("finished sprint","direct"))})})},n.completeSprint=function(e){var t=n.props,r=t.onCompleteSprint,o=t.actions,i=n.getCompletesResultsStatus(e);return p.default.fetch.markSprintCompleted(n.props.sprintId).subscribe(function(){r&&r(i),o.handleCompletedSprintModalOpened({doneTasksStatus:i,sprintCompletedModalOpened:!0}),o.updateCurrentSprint({currentSprint:"all"})})},n.completeAllTasks=function(){p.default.fetch.completeSprintTasks(n.props.sprintId).subscribe(function(){n.onCloseModal(),n.completeSprint("complete")})},n.moveAllTasks=function(){p.default.fetch.moveOutSprintTasks(n.props.sprintId,{taskStatus:"unDone"}).subscribe(function(){n.onCloseModal(),n.completeSprint("remove")})},n.onClickSprintLeftTasks=function(){var e=n.state.sprintLeftTasksAction;"complete"===e?(n.completeAllTasks(),n.gtaHandler("finished sprint","finish all")):"remove"===e&&(n.moveAllTasks(),n.gtaHandler("finished sprint","move out"))},n.onChangeRadio=function(e){var t=e.target.value;n.setState(s.a({},n.state,{sprintLeftTasksAction:t}))},n.modalOnVisibleChange=function(e){n.setState({modalOpened:e})},n.state={modalOpened:!1,sprintTaskStatus:null,sprintLeftTasksAction:"remove"},n.triggerHtmlEl=a.createRef(),n}return s.d(t,e),t.prototype.gtaHandler=function(e,t){var n=this.props.gtaControl||"Kanban Button";c.gta.event({action:e,segment:"Sprint Sidebar",projectid:this.props.projectId,category:t,control:n})},t.prototype.getCompletesResultsStatus=function(e){var t=this.state.sprintTaskStatus;if(!t)return null;switch(e){case void 0:case"remove":return s.a({},t.done);case"complete":default:var n=t.done,r=t.unDone;return Object(d.mergeTaskCount)(n,r)}},t.prototype.onCloseModal=function(){this.setState({modalOpened:!1})},t.prototype.renderContents=function(){var e=this.state.sprintTaskStatus;if(!e)return null;var t=e.unDone,n=Object(d.sumTaskCount)(t),r=l.get("sprint.left.tasks.status.tasks.amount",n);return a.createElement("div",{className:"sprint-uncompleted-wrapper"},a.createElement("div",{className:"sprint-tasks-detail"},r),a.createElement(u.RadioGroup,{className:"sprint-left-tasks-radio-groups",name:"sprint-left-tasks",defaultValue:this.state.sprintLeftTasksAction,onChange:this.onChangeRadio},a.createElement(u.Radio,{label:l.get("sprint.tasks.remove"),value:"remove",className:"sprint-radio"}),a.createElement(u.Radio,{label:l.get("sprint.tasks.mark.done"),value:"complete",className:"sprint-radio"})),a.createElement(u.Button,{className:"confirm-button",onClick:this.onClickSprintLeftTasks},l.get("done")))},t.prototype.renderModal=function(){var e=this,t=this.props.nestedModal?function(){return e.triggerHtmlEl.current}:void 0;return a.createElement(u.Modal,{className:"sprint-complete-modal",title:l.get("sprint.to.be.completed"),titleCls:"modal-title",opened:this.state.modalOpened,width:360,onVisibleChange:this.modalOnVisibleChange,mountIn:t},this.renderContents())},t.prototype.renderTrigger=function(){var e=a.createElement(u.Button,{className:"complete-sprint-button"},l.get("sprint.to.complete")),t=this.props.trigger?this.props.trigger:e;return a.createElement("div",{ref:this.triggerHtmlEl,onClick:this.getSprintLeftTasks},t)},t.prototype.render=function(){return a.createElement("div",null,this.renderTrigger(),this.renderModal())},t}(a.PureComponent));n.d(t,"a",function(){return m});var m=Object(r.connect)(function(e){return{sprintCompletedModalOpened:e.ui.sprintPanel.sprintCompletedModalOpened,doneTasksStatus:e.ui.sprintPanel.doneTasksStatus}},function(e){return{actions:Object(o.bindActionCreators)({handleCompletedSprintModalOpened:i.actions.handleCompletedSprintModalOpened,updateCurrentSprint:i.actions.updateCurrentSprint},e)}})(h)},W3m4F8eF:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k={}.hasOwnProperty;g=n("a+N5u/Cl"),y=n("sa1Ed382"),u=n("HDJEOtNh").OrganizationAccess,d=n("GESwhXbR").Toast,h=n("RLD3BeS/").ToastWithObject,p=n("6XSa3ffj"),f=n("OmupbwLD"),s=n("fnRWEXeT"),o=n("3mMqB/0m"),c=n("Y0Lul/he"),r=n("WKaGr+fM"),i=n("E86Oiqt3"),m=n("+h7VEZku").VisibilityController,b=n("RTj5z5YX"),a=b.CommonShare,l=b.InviteLink,v=b.isReadonlyShare,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)k.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.viewName="PreviewerMenuView",t.prototype.popoverTitle="",t.prototype.events={"click .copy-handler":"copyWork","click .move-handler":"moveWork","click .favorite-work-handler":"favoriteWork","click .share-work-handler":"shareWork","click .archive-handler":"enterArchiveSubMenu","click .unarchive-handler":"unarchive","submit .archive-form":"archive","click .delete-handler":"enterDeleteSubMenu","submit .delete-form":"submitDeleteForm","click .invite-handler":"enterInviteSubMenu"},t.prototype.initialize=function(e){var n;return this.options=e,this.workModel=e.objectModel,this.projectModel=e.projectModel,this._organizationId=this.workModel.get("_organizationId")||(null!=(n=this.projectModel)?n.get("_organizationId"):void 0),this.popoverTitle=tb_i18n.get("previewer.menu.title"),this.listen(),t.__super__.initialize.apply(this,arguments)},t.prototype.listen=function(){return this.listenTo(this.workModel,"change:visible",this.renderVisible)},t.prototype.render=function(){var e,t,n,r,s,a;return this.unmountReactViews(),y.config.HOST,t=(s=(a=this.options.objectModel).toJSON())._projectId,e=s._parentId,s._id,n=i.find(e),r=g.extend(a.getFormatData(),{where:this.options.where,permissions:a.hasPermissions("put.fork","put.archive","put.move","del"),canModifyVisibility:a.canModifyVisibility(),showShare:!!t,showInviteLink:!!t&&this.projectModel.hasPermission("post.member")&&Boolean(this._organizationId&&u.canAddOuterMember(this._organizationId)),isShared:v(a.get("shareStatus")),parentVisible:null!=n?n.get("visible"):void 0,parentPermissions:null!=n?n.hasPermissions("put.visible"):void 0}),this.$el.html(o(r)),this.$visibleSwitchers=this.$(".switch-visible-handler"),this.renderVisible(),t&&this.setupPlugins({_projectId:t}),this},t.prototype.renderVisible=function(){if(this.options.objectModel.canModifyVisibility())return this.requestReactView(this.$visibleSwitchers.get(0),m,{visibility:this.workModel.get("visible"),onChange:this.switchVisible.bind(this)})},t.prototype.copyWork=function(e){var t,n,r;return!this.workModel.get("isArchived")&&(null!=(n=this.picker)&&n.remove(),t=(r=this.workModel).get("fileName"),this.hide(),this.picker=this.requestSubView(f).open(s,{workModel:r,_organizationId:this.options.objectModel.get("_organizationId"),_projectId:this.options.objectModel.get("_projectId"),_parentId:r.get("_parentId"),isForkOrMove:"fork",disabled:[r.get("_parentId")],title:tb_i18n.get("work.copy.message",t),select:function(e){return e.id===r.get("_parentId")?d.info({message:tb_i18n.get("work.copy.current.collection")}):r.forkToCollection(e.id,{success:function(){return h.forkWork(e)}})}}),this)},t.prototype.moveWork=function(e){var t,n,r,o;return!this.workModel.get("isArchived")&&(null!=(n=this.picker)&&n.remove(),t=(r=this.workModel).get("fileName"),this.hide(),this.picker=this.requestSubView(f).open(s,{workModel:r,_organizationId:this.options.objectModel.get("_organizationId"),_projectId:this.options.objectModel.get("_projectId"),_parentId:r.get("_parentId"),isForkOrMove:"move",disabled:[r.get("_parentId")],title:tb_i18n.get("work.move.message",t),select:(o=this,function(e){return e.id===r.get("_parentId")?d.info({message:tb_i18n.get("work.move.current.collection")}):r.moveToCollection(e.id,{success:function(){return h.moveWork(e),o.hide()}})})}),this)},t.prototype.enterArchiveSubMenu=function(){var e;return this.enterSubMenu(tb_i18n.get("archive"),(e=this,function(){return e.$el.html(r())})),this},t.prototype.archive=function(e){var t;return e.preventDefault(),this.options.objectModel.archive({success:(t=this,function(){return h.archive(),t.hide()})}),this},t.prototype.unarchive=function(){var e,t;return(e=this.options.objectModel).unarchive({success:(t=this,function(){return h.unarchive(e),t.hide()})}),this},t.prototype.favoriteWork=function(){var e,t;return e=this.options.objectModel.get("isFavorite"),this.options.objectModel[e?"unFavorite":"doFavorite"]({success:(t=this,function(e){var n;if(t.options.objectModel.set("isFavorite",e.isFavorite),t.render(),!e.isFavorite)return"function"==typeof(n=t.options).onUnfavorite?n.onUnfavorite(t.options.objectModel.get("_id")):void 0})})},t.prototype.shareWork=function(){var e;return y.gta.event({action:"share content",control:"More Menu",type:"work"}),this.enterSubMenu(tb_i18n.get("share.via.wechat"),(e=this,function(){return e.requestReactView(e.el,a,{objectType:"work",model:e.options.objectModel})})),y.gta.event({action:"share content",control:"More Menu",type:"work"}),this},t.prototype.enterInviteSubMenu=function(){var e;return y.gta.event({action:"invite project member",control:"More Menu",type:"work"}),this.enterSubMenu(tb_i18n.get("invite.from.link"),(e=this,function(){return e.requestReactView(e.el,l,{objectType:"work",objectId:e.options.objectModel.id})})),this},t.prototype.switchVisible=function(e){return this.options.objectModel.saveAttr("visible",e),y.gta.event({action:"toggle visible",type:"work",control:"More Menu"})},t.prototype.enterDeleteSubMenu=function(){var e;return this.enterSubMenu(tb_i18n.get("previewer.menu.delete.title"),(e=this,function(){return e.$el.html(c())})),this},t.prototype.submitDeleteForm=function(e){var t;return e.preventDefault(),this.options.objectModel.destroy({wait:!0,success:(t=this,function(){return d.success({message:tb_i18n.get("delete.success")}),t.hide()})}),this},t.prototype.returnMainMenu=function(){return this.unmountReact(this.el),t.__super__.returnMainMenu.apply(this,arguments)},t.prototype.unmountReactViews=function(){if(this.unmountReact(this.el),this.$visibleSwitchers)return this.unmountReact(this.$visibleSwitchers.get(0))},t.prototype.onHidden=function(){return this.unmountReactViews(),t.__super__.onHidden.apply(this,arguments)},t}()},W45aiDui:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";return e.invisibleCount&&(o+=' <div class="invisible-wrapper flex"> <span class="icon icon-lock flex flex-center flex-vcenter"></span> <p>'+r(tb_i18n.get("tasklist.invisible.hint",e.invisibleCount))+"</p> </div>"),o}},W6XdWgVo:function(e,t,n){"use strict";n.r(t);var r,o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n.n(i),a=n("17x9q+7Q"),c=n("TSYQbtd+"),l=n.n(c),u=n("8yf6doCl"),p=n("4c1CS0b3"),d=n("LvDlAkAJ"),h=n.n(d),m=n("GESwhXbR"),f=n("tLZJUYWX"),g=n.n(f),v=n("s0r7VfKc"),b=n("90U+kJWN"),y=n("vJfEDQKx"),k=n("wRzn87sO"),_=n("0sqv5CMQ"),w=n("iMQdzzrd"),C=n("9Ip6qvet"),S=n("u/LJYZ+h"),E=n.n(S),T=n("7CIb8gEw"),I=n.n(T),M=n("0iSAgZrr"),j=n("IssmDVnT"),P=n("sa1Ed382"),x=n("8y0JNx5d"),N=n("bZr3G77e"),O=n("3eO0u/rw").default,R=n("2qRnoGmE"),D=O({exact:!0}),L=new RegExp("^https?://"+R.HOST+"/task/([0-9a-fA-F]{24})/$"),z=["task","post","work","event"],A=(r={"github-commit":"GitHub Commit","github-branch":"Github Branch","github-issue":"GitHub Issue","github-pullRequest":"GitHub Pull Request",github:"GitHub",get link(){return g.a.get("link.type.link")}},Object.defineProperty(r,"zhihu-question",{get:function(){return g.a.get("link.type.zhihu.question")},enumerable:!0,configurable:!0}),Object.defineProperty(r,"zhihu-article",{get:function(){return g.a.get("link.type.zhihu.article")},enumerable:!0,configurable:!0}),Object.defineProperty(r,"wechat",{get:function(){return g.a.get("link.type.wechat")},enumerable:!0,configurable:!0}),Object.defineProperty(r,"weibo",{get:function(){return g.a.get("powerups.weibo")},enumerable:!0,configurable:!0}),r.processon="ProcessOn",Object.defineProperty(r,"jinshuju",{get:function(){return g.a.get("powerups.jinshuju")},enumerable:!0,configurable:!0}),r.yinxiang="印象笔记",r.evernote="Evernote",Object.defineProperty(r,"thoughts-entry",{get:function(){return g.a.get("link.type.thoughts")},enumerable:!0,configurable:!0}),Object.defineProperty(r,"thoughts-folder",{get:function(){return g.a.get("search.type.thoughts.folder")},enumerable:!0,configurable:!0}),Object.defineProperty(r,"collection",{get:function(){return g.a.get("search.type.collection")},enumerable:!0,configurable:!0}),Object.defineProperty(r,"event",{get:function(){return g.a.get("search.type.event")},enumerable:!0,configurable:!0}),Object.defineProperty(r,"post",{get:function(){return g.a.get("search.type.post")},enumerable:!0,configurable:!0}),Object.defineProperty(r,"task",{get:function(){return g.a.get("search.type.task")},enumerable:!0,configurable:!0}),Object.defineProperty(r,"work",{get:function(){return g.a.get("search.type.work")},enumerable:!0,configurable:!0}),Object.defineProperty(r,"testcase",{get:function(){return g.a.get("search.type.testcase")},enumerable:!0,configurable:!0}),Object.defineProperty(r,"project",{get:function(){return g.a.get("search.type.project")},enumerable:!0,configurable:!0}),r),V=function(e,t){return void 0===t&&(t=!0),function(n){var r;return o.a({},n,{typeLoading:o.a({},n.typeLoading,(r={},r[e]=t,r))})}};function F(e){return h.a.map(e,function(e){return o.a({},e,{taskId:e.project.uniqueIdPrefix+"-"+e.uniqueId,searchType:"task",type:"task"})})}function B(e){return h.a.map(h.a.take(e,100),function(e){return o.a({},e.data,{type:e.refType,searchType:e.refType})})}function U(e){return e.extra?[o.a({},e.extra,{searchType:"link",type:e.extra.subType,title:e.extra.title||"wechat-article"!==e.extra.subType?e.extra.title:e.extra.authorName})]:[o.a({},e,{searchType:"link",type:"link"})]}function $(e,t){return!(!e._id||!t._id||e._id!==t._id)}function H(e,t,n,r,o){P.gta.event({segment:"Link Input",type:e,action:t,control:n,method:r,category:o})}function G(e){switch(e){case"task":return"Task";case"event":return"Schedule";case"post":return"Share";case"work":return"File"}}function q(e,t){if(e.startsWith("//"))return""+location.protocol+e;if(/^\/[^\/]+/.test(e)&&t){var n=new URL(t);return n.protocol+"//"+n.hostname+e}return e}function W(e,t){return e?p.Observable.fromPromise(new Promise(function(n,r){N.get({data:{from:q(e,t)},headers:{authorization:P.user.get("strikerAuth")},success:n,url:Object(x.getFileHost)()+"/transfer",error:r,silentError:!0})})).pluck("thumbnailUrl").timeout(8e3).catch(function(){return p.Observable.of(void 0)}):p.Observable.of(void 0)}function J(e){return function(e){return v.default.fetch.get("tb-task/urlparser",{url:e},{apiHost:R.URL_PARSER_HOST,credentials:"include"})}(e).map(U).concatMap(function(e){return p.Observable.combineLatest.apply(p.Observable,o.h(h.a.map(e,function(e){return p.Observable.combineLatest(W(e.thumbnailUrl,e.originUrl),W(h.a.get(e,"image.url"),e.originUrl)).map(function(t){var n=o.f(t,2),r=n[0],i=n[1];return o.a({},e,{thumbnailUrl:r,image:e.image&&i?o.a({},e.image,{url:i}):void 0})}).catch(function(){return p.Observable.of(h.a.omit(e,"thumbnailUrl","image"))})})))})}n.d(t,"BasicSearchComponent",function(){return Y});var X=n("rLFWxDDv"),Y=function(e){function t(t){var n=e.call(this,t)||this;return n.input$$=new u.Subject,n.loadMore$$=new u.Subject,n.setSelectableResults=function(e){n.selectableResults=e},n.setRootEl=function(e){n.rootEl=e},n.setDropdownRef=function(e){n.dropdown=e},n.onInputChange=function(e){n.input$$.next(e.target.value),n.dropdown&&!n.dropdown.visible&&n.dropdown.open()},n.onListRendered=function(){n.forceUpdate(),n.props.useDefaultGta&&H("link input","link input onfocus","link_input","onFocus"),n.loadRecent()},n.loadRecent=function(){if(!n.state.recentList){var e=n.props.acceptTypes;n.setState({isLoading:!0}),v.default.fetch.get("footprint",{types:e}).takeUntil(n.input$$.last()).map(function(e){return h.a.reject(e,{_refId:n.props.parentId})}).map(B).toPromise().then(function(e){n.setState(function(t){var n=t.input,r=t.isLoading;return{recentList:e,isLoading:!!n.trim()&&r}})}).catch(h.a.noop)}},n.onInputKeyDown=function(e){if(!n.props.disableKeyboardEvent){var t=n.state,r=t.isLoading,o=t.list,i=t.recentList,s=n.isSearching();r||s&&0===o.length||!s&&i&&0===i.length||n.selectableResults&&n.selectableResults.keyboardHandler(e)}},n.onFocusInput=function(){n.setState({isFocused:!0})},n.onBlurInput=function(e,t){void 0===t&&(t=!1),!t&&n.dropdown&&n.dropdown.visible||n.setState({isFocused:!1})},n.onSelect=function(e,t){n.onBlurInput(null,!0),n.props.clearInputOnSelect&&n.clearInput(),n.dropdown&&n.dropdown.close(),n.props.onSelect(e,t)},n.onLoadMoreClick=function(e){return function(){n.onBlurInput(null,!0);var t=G(e);n.props.useDefaultGta&&H("Search Result Popover","click load more","link_popover","click",t),n.loadMore$$.next(e)}},n.onEnter=function(e){if(!n.props.disableKeyboardEvent&&n.dropdown&&n.dropdown.visible){var t=n.state,r=t.list,o=t.recentList,i=n.isSearching()?r[e]:o&&o[e];i&&(i.loadMore?n.loadMore$$.next(i.searchType):n.onSelect(i,e))}},n.onAddFromSourceClick=function(e){e.stopPropagation(),n.dropdown&&n.dropdown.visible&&n.dropdown.close(),n.props.onAddFromSourceClick&&n.props.onAddFromSourceClick()},n.onClearInputClick=function(e){e.stopPropagation(),n.clearInput()},n.clearInput=function(){return n.input$$.next("")},n.loadMoreHandler=h.a.reduce(z,function(e,t){var r;return o.a({},e,((r={})[t]=n.onLoadMoreClick(t),r))},{}),n.state={recentList:void 0,list:[],input:"",isFocused:!1,isLoading:!1,typeLoading:{}},n}return o.d(t,e),t.prototype.getLoadMoreHandler=function(e){return this.loadMoreHandler[e]||h.a.noop},t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.organizationId,r=t.parentId,i=t.acceptTypes,s=t.loadRecentOnMount,a=t.specificUrlRegex,c=t.disableURLParsing,l=t.searchPageSize,u=t.onValueChanged,d=t.sourceProjectId,m=n?C.b.ORGANIZATION:C.b.PERSONAL,f=n||void 0,g={};d&&(g.boostProjectId=d),s&&this.loadRecent(),this.inputSubscription=this.input$$.do(function(t){return e.setState({input:t})}).map(function(e){return h.a.trim(e)}).filter(function(e){return!!e}).do(function(){return e.setState({isLoading:!0})}).do(function(e){return u&&u(e)}).debounceTime(400).switchMap(function(t){var n=t.match(y.TASK_ID_REGEX),r=p.Observable.of([]);if(n){var s=o.f(n,3),u=s[1],d=s[2];r=v.default.fetch.get("v2/tasks/search",{uniqueId:d,uniqueIdPrefix:u,spaceType:m,_organizationId:f}).map(F)}else if(!c&&D.test(t)&&(!a||a.test(t)))return J(t).map(function(e){return i?h.a.filter(e,function(e){return h.a.includes(i,e.type)}):e}).timeout(9e3).catch(function(){return p.Observable.of([])});var b=i?z.filter(function(e){return h.a.includes(i,e)}):z;return p.Observable.combineLatest.apply(p.Observable,o.h([r],h.a.map(b,function(n){var r=function(e,t,n,r,i,s,a){return j.Page.defaultState(e,{urlQuery:o.a({q:t},r,{spaceType:n,_organizationId:i,type:s}),pageSize:a})}("v3/search",t,m,g,f,n,l||5),i=e.loadMore$$.filter(function(e){return e===n}).do(function(){return e.setState(V(n))});return v.default.fetch.expandPage(r,{loadMore$:i}).map(function(e){return function(e,t){var n=e.result,r=e.hasMore;return o.h(h.a.map(n,function(e){return h.a.assign(e,{searchType:t})}),r?[{loadMore:!0,searchType:t}]:[])}(e,n)}).do(function(){return e.setState(V(n,!1))})}))).map(h.a.flatten).catch(function(){return p.Observable.of([])})}).map(function(e){return h.a.uniqWith(h.a.reject(e,{_id:r}),$)}).subscribe(function(t){return e.setState({list:t,isLoading:!1})})},t.prototype.componentWillUnmount=function(){this.input$$.complete(),this.loadMore$$.complete(),this.inputSubscription&&this.inputSubscription.unsubscribe()},t.prototype.isSearching=function(){return!!this.state.input.trim()},t.prototype.isInputURL=function(){return D.test(this.state.input.trim())},t.prototype.hasRecentResult=function(){var e=this.state,t=e.recentList,n=e.isLoading;return!(this.isSearching()||!t||!t.length||n)},t.prototype.renderRecent=function(){var e=this;return h.a.map(this.state.recentList,function(t,n){return s.a.createElement("li",{key:t._id||"all"+n,className:"result-item",onClick:function(){e.props.useDefaultGta&&H("Recently Viewed Popover","click add recently content","link_popover","click"),e.onSelect(t,n)}},e.renderItem(t.type,t))})},t.prototype.renderLinkResult=function(e){var t=this,n=this.props.itemComponentFactory,r=n?n(e.type):M.a,i=s.a.createElement(r,o.a({},e));return s.a.createElement("li",{key:e._id,className:"result-item",onClick:function(){t.onSelect(e,0)}},i)},t.prototype.renderGroups=function(){var e=this;if(this.hasRecentResult()){var t=g.a.get("link.create.recently.viewed");return s.a.createElement(_.a,{key:"recent",type:"recent",displayName:t},this.renderRecent())}return this.isInputURL()?this.state.list.filter(function(e){return"link"===e.searchType}).map(function(t){var n=t.type,r=A[n]||A[n.split("-")[0]];return s.a.createElement(_.a,{key:"link",type:"link",displayName:r},e.renderLinkResult(t))}):this.isSearching()&&C.a.map(function(t){return{type:t,groupArray:e.state.list.map(function(e,t){return{index:t,item:e}}).filter(function(e){return e.item.searchType===t})}}).filter(function(e){return e.groupArray.length>0}).map(function(t){var n=t.type,r=t.groupArray;return s.a.createElement(_.a,{key:n,type:n},e.renderGroup(n,r))})},t.prototype.renderItem=function(e,t){var n=this.props,r=n.itemComponentFactory,i=n.disableHighlightenSearch,a=this.state.input.trim(),c=r?r(e):k.c[e],l=i?c:Object(w.a)(Object(w.b)(c,a),a);return s.a.createElement(l,o.a({},t,{size:"small"}))},t.prototype.renderLoadMore=function(e){return this.state.typeLoading[e]?s.a.createElement(m.Loading,null):s.a.createElement(m.TextButton,{color:"gray",className:l()("search-all-handler",this.props.loadMoreCls)},s.a.createElement(m.Icon,{name:"more",size:16}),g.a.get("link.create.load.more"))},t.prototype.renderGroup=function(e,t){var n=this;return t.map(function(t){var r=t.index,o=t.item,i=o.loadMore?n.renderLoadMore(e):n.renderItem(e,o),a=o.loadMore?n.getLoadMoreHandler(e):function(){var t=G(e);n.props.useDefaultGta&&H("Search Results Popover","click search result","link_popover","click",t),n.onSelect(o,r)};return s.a.createElement("li",{key:o._id||"all"+r,className:"result-item",onClick:a},i)})},t.prototype.renderPlaceholder=function(){var e=this.state,t=e.input,n=e.list,r=e.isLoading,o=e.recentList,i=this.isSearching(),a=i&&h.a.isEmpty(n)&&!r;if(!i&&o&&0===o.length||a){var c=a?g.a.get("link.create.search.no.result",t):g.a.get("link.create.recent.no.result"),u=a?E.a:I.a,p=l()("no-result-placeholder",X["no-result-placeholder"]);return s.a.createElement("div",{className:p,key:"no-result"},s.a.createElement("img",{src:u,width:"72"}),s.a.createElement("span",{className:"placeholder-text"},c))}},t.prototype.renderLoading=function(){return this.state.isLoading&&s.a.createElement(m.Loading,{key:"loading"})},t.prototype.renderContent=function(){var e=this.props,n=e.index,r=e.onSelectCls,i=this.state,a=i.isLoading,c=i.list,l=a?[this.renderLoading()]:o.h(Object(b.flattenPlainGroup)(Object(b.iterator)(this.renderGroups())),[this.renderPlaceholder()]),u=this.isInputURL()&&c[0]&&"link"===c[0].searchType&&!a;return s.a.createElement(k.b,{ref:this.setSelectableResults,focusable:!1,index:h.a.isUndefined(n)?u?0:-1:n,onEnter:this.onEnter,onSelectCls:r,filterFn:t.filterFn},l)},t.prototype.renderAddLinkFromSource=function(){var e=l()(X.handler,"flex-static flex flex-vcenter");return s.a.createElement("a",{className:e,onClick:this.onAddFromSourceClick},s.a.createElement(m.Icon,{name:"plus-s"}),s.a.createElement("span",null,g.a.get("link.create.placeholder")))},t.prototype.renderClearInputIcon=function(){var e=l()(X["clear-input"],"flex-static");return s.a.createElement(m.Icon,{className:e,name:"circle-remove",onClick:this.onClearInputClick})},t.prototype.render=function(){var e,t=this.props,n=t.render,r=t.placeHolder,o=t.disableFocusState,i=l()(X["search-wrap"],"flex flex-vcenter",((e={})[X.focused]=this.state.isFocused,e)),a=l()("form-control search-input",X["search-input"]),c=this.rootEl&&this.rootEl.getBoundingClientRect(),u=c?c.width:560,p=this.renderContent(),d=s.a.createElement("input",{className:a,placeholder:r||g.a.get("link.create.input.placeholder"),value:this.state.input,onChange:this.onInputChange,onKeyDown:this.onInputKeyDown,onFocus:o?void 0:this.onFocusInput,onBlur:o?void 0:this.onBlurInput}),h=this.isSearching()&&this.renderClearInputIcon();return n?n(d,p,this.loadRecent):s.a.createElement(m.Dropdown,{className:"global-search-popover add-link-popover",content:p,nested:!0,persistence:!0,style:{width:u},action:"click",onOpen:this.onListRendered,ref:this.setDropdownRef},s.a.createElement("div",{className:i,ref:this.setRootEl},this.renderAddLinkFromSource(),s.a.createElement("div",{className:X.separator}),s.a.createElement(m.Icon,{name:"search",className:l()(X["search-icon"],"flex-static"),size:14}),d,h))},t.propTypes={parentId:a.string,organizationId:a.string,sourceProjectId:a.string,onAddFromSourceClick:a.func,onSelect:a.func.isRequired,render:a.func,disableURLParsing:a.bool,acceptTypes:a.arrayOf(a.string),searchPageSize:a.number,index:a.number,loadRecentOnMount:a.bool,placeHolder:a.string,clearInputOnSelect:a.bool},t.defaultProps={clearInputOnSelect:!0},t.commonUrlRegex=D,t.taskUrlRegex=L,t.filterFn=function(e){return e.type!==m.Loading},t}(s.a.PureComponent)},WB6pyRpE:function(e,t){e.exports=function(e){var t='<li class="column thin-scroll flex-static flex-vert link-search-wrap ';return e.empty&&(t+="hidden"),t+='" ',e._taskId&&(t+=' data-id="'+e._taskId+'" '),t+="> ",e.taskPost&&(t+=" ",e._taskId?(t+=" ",e.canCreate?t+=' <a class="flex-static flex-vcenter object-picker-creator link-add-subtask-handler"> <span class="icon icon-circle-cross"></span> <span>'+tb_i18n.get("object.picker.subtask.creator.tips")+"</span> </a> ":t+=' <div class="object-picker-creator flex-static flex-vcenter disabled hinted" data-title="'+tb_i18n.get("subtask.can.not.create")+'" > <span class="icon icon-circle-cross"></span> <span>'+tb_i18n.get("object.picker.subtask.creator.tips")+"</span> </div> ",t+=" "):(t+=" ",e.canCreate&&(t+=' <a class="flex-static flex-vcenter object-picker-creator link-add-handler"> <span class="icon icon-circle-cross"></span> <span>'+tb_i18n.get("object.picker.task.creator.tips")+"</span> </a> "),t+=" "),t+=" "),t+=' <ul class="flex-fill thin-scroll tasks-list"> </ul></li>'}},WCg8Kj7w:function(e,t,n){e.exports=function(e){var t,r,o="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),i="",s=n("2qRnoGmE");i+='<ul class="symbol-list list-unstyled thin-scroll"> ';var a=e.membersData&&e.membersData.guestMembers&&e.membersData.guestMembers.length;if(i+=" ",e.membersData&&e.membersData.projectMembers&&e.membersData.projectMembers.length&&(e.membersData.organizationMembers&&e.membersData.organizationMembers.length||a)&&(i+=' <h5 class="project-members">'+tb_i18n.get("project.at.members.project")+"</h5> "),i+=" \x3c!-- 项目成员 --\x3e ",e.membersData&&e.membersData.projectMembers&&e.membersData.projectMembers.length){i+=" ";var c=e.membersData.projectMembers;if(c)for(var l=-1,u=c.length-1;l<u;)i+=" ","all"===(_=c[l+=1]).type?i+='  <li class="symbol-item all-involved" data-id="'+_._id+'"> <a> <div class="all-involved-avatar avatar flex-vert flex-center"> <span class="icon icon-users"></span> </div> <div class="flex-vert flex-center"> <div class="item-name"> <span>'+o(_.name)+"</span>・"+(_.hasMembers&&_.hasMembers.length)+" </div> </div> </a> </li> ":"team"===_.type?(i+='  <li class="symbol-item team" data-id="'+_._id+'" data-gta="{action: \'view team member\', control: \'Side Member Menu\'}"> <a data-gta="event" data-label="involve team members"> <div class="team-avatar avatar flex-vert flex-center" ',"default"!=_.type&&_.styleColor&&(i+='style="color: '+_.styleColor+"; border-color: "+_.styleColor+'"'),i+='> <span class="icon   ',"default"!=_.type&&_.styleName?i+=""+_.styleName:i+="icon-team-tie",i+='" ',"default"!=_.type&&_.styleColor&&(i+='style="color: '+_.styleColor+"; border-color: "+_.styleColor+'"'),i+='></span> </div> <div class="team-info flex-vert flex-center"> <div class="team-name item-name"> <span>'+o(_.name)+"</span> ",s.FEATURES.showMemberCount&&(i+=" ・"+(_.hasMembers&&_.hasMembers.length)+" "),i+=" </div> ",_.belongsTo&&(i+=' <p class="team-child muted"> '+o(tb_i18n.get("team.belongsTo",_.belongsTo))+" </p> "),i+=" </div> </a> </li> "):"group"===_.type?i+=' <li class="symbol-item group" data-id="'+_._id+'" data-gta="{action: \'view group member\', control: \'Side Member Menu\'}"> <a data-gta="event" data-label="involve group members"> <div class="group-avatar avatar flex-vert flex-center"> <span class="icon icon-member-group"></span> </div> <div class="group-info flex-vert flex-center"> <div class="group-name item-name"> <span>'+o(_.name)+"</span>・"+_.activeMembersCount+" </div> </div> </a></li> ":(i+='  <li class="symbol-item" data-id="'+_._id+'" data-gta="event" data-label="at item"> <a>  ',_.avatarUrl&&(i+=' <div class="avatar img-circle" style="background-image:url('+_.avatarUrl+');"></div> '),i+=' <div class="member-info"> <p class="name">'+o(_.name)+"</p> ",(_.teamsInfo&&_.teamsInfo.length>0||_.email&&_.email.indexOf("@mail.teambition.com")<0||_.phone&&_.phone.length>0)&&(i+=' <p class="tips"> ',_.teamsInfo&&_.teamsInfo.length>0?i+=" "+_.teamsInfo[0].name+" ":_.email&&_.email.indexOf("@mail.teambition.com")<0?i+=" "+_.email+" ":_.phone&&_.phone.length>0&&(i+=" "+_.phone+" "),i+=" </p> "),i+=" </div> </a> </li> "),i+=" ";i+=" "}if(i+=" \x3c!-- 群组成员 --\x3e ",e.membersData&&e.membersData.groupMembers&&e.membersData.groupMembers.length){i+=" ";var p=e.membersData.groupMembers;if(p)for(var d=-1,h=p.length-1;d<h;)i+=" ","all"===(_=p[d+=1]).type?i+='  <li class="symbol-item all-involved" data-id="'+_._id+'"> <a> <div class="all-involved-avatar avatar flex-vert flex-center"> <span class="icon icon-users"></span> </div> <div class="flex-vert flex-center"> <div class="item-name"> <span>'+o(_.name)+"</span>・"+(_.hasMembers&&_.hasMembers.length)+" </div> </div> </a> </li> ":(i+='  <li class="symbol-item" data-id="'+_._id+'" data-gta="event" data-label="at item"> <a>  ',_.avatarUrl&&(i+=' <div class="avatar img-circle" style="background-image:url('+_.avatarUrl+');"></div> '),i+=' <div class="member-info"> <p class="name">'+o(_.name)+"</p> ",(_.teamsInfo&&_.teamsInfo.length>0||_.email&&_.email.indexOf("@mail.teambition.com")<0||_.phone&&_.phone.length>0)&&(i+=' <p class="tips"> ',_.teamsInfo&&_.teamsInfo.length>0?i+=" "+_.teamsInfo[0].name+" ":_.email&&_.email.indexOf("@mail.teambition.com")<0?i+=" "+_.email+" ":_.phone&&_.phone.length>0&&(i+=" "+_.phone+" "),i+=" </p> "),i+=" </div> </a> </li> "),i+=" ";i+=" "}if(i+=" \x3c!-- 在企业但不在项目的成员 --\x3e ",e.membersData&&e.membersData.organizationMembers&&e.membersData.organizationMembers.length){i+=' <h5 class="not-project-members">'+tb_i18n.get("project.at.members.organization")+"</h5> ";var m=e.membersData.organizationMembers;if(m)for(var f=-1,g=m.length-1;f<g;)i+=' <li class="symbol-item not-project-member" data-id="'+(_=m[f+=1])._id+'" data-gta="event" data-label="at item"> <a>  ',_.avatarUrl&&(i+=' <div class="avatar img-circle" style="background-image:url('+_.avatarUrl+');"></div> '),i+=' <div class="member-info"> <p class="name">'+o(_.name)+"</p> ",(_.teamsInfo&&_.teamsInfo.length>0||_.email&&_.email.indexOf("@mail.teambition.com")<0||_.phone&&_.phone.length>0)&&(i+=' <p class="tips"> ',_.teamsInfo&&_.teamsInfo.length>0?i+=" "+_.teamsInfo[0].name+" ":_.email&&_.email.indexOf("@mail.teambition.com")<0?i+=" "+_.email+" ":_.phone&&_.phone.length>0&&(i+=" "+_.phone+" "),i+=" </p> "),i+=" </div> </div> </a> </li> ";i+=" "}if(i+=" \x3c!-- 可见成员 --\x3e ",e.membersData&&e.membersData.visibleMembers&&e.membersData.visibleMembers.length){i+=' <h5 class="visible-members">'+tb_i18n.get("project.at.members.visible")+"</h5> ";var v=e.membersData.visibleMembers;if(v)for(var b=-1,y=v.length-1;b<y;)i+=" ","all"===(_=v[b+=1]).type?i+='  <li class="symbol-item all-involved" data-id="'+_._id+'"> <a> <div class="all-involved-avatar avatar flex-vert flex-center"> <span class="icon icon-users"></span> </div> <div class="flex-vert flex-center"> <div class="item-name"> <span>'+o(_.name)+"</span>・"+(_.hasMembers&&_.hasMembers.length)+" </div> </div> </a> </li> ":"team"===_.type?(i+='  <li class="symbol-item team" data-id="'+_._id+'" data-gta="{action: \'view team member\', control: \'Side Member Menu\'}"> <a data-gta="event" data-label="involve team members"> <div class="team-avatar avatar flex-vert flex-center" ',"default"!=_.type&&_.styleColor&&(i+='style="color: '+_.styleColor+"; border-color: "+_.styleColor+'"'),i+='> <span class="icon   ',"default"!=_.type&&_.styleName?i+=""+_.styleName:i+="icon-team-tie",i+='" ',"default"!=_.type&&_.styleColor&&(i+='style="color: '+_.styleColor+"; border-color: "+_.styleColor+'"'),i+='></span> </div> <div class="team-info flex-vert flex-center"> <div class="team-name item-name"> <span>'+o(_.name)+"</span> ",s.FEATURES.showMemberCount&&(i+=" ・"+(_.hasMembers&&_.hasMembers.length)+" "),i+=" </div> ",_.belongsTo&&(i+=' <p class="team-child muted"> '+o(tb_i18n.get("team.belongsTo",_.belongsTo))+" </p> "),i+=" </div> </a> </li> "):"group"===_.type?i+=' <li class="symbol-item group" data-id="'+_._id+'" data-gta="{action: \'view group member\', control: \'Side Member Menu\'}"> <a data-gta="event" data-label="involve group members"> <div class="group-avatar avatar flex-vert flex-center"> <span class="icon icon-member-group"></span> </div> <div class="group-info flex-vert flex-center"> <div class="group-name item-name"> <span>'+o(_.name)+"</span>・"+_.activeMembersCount+" </div> </div> </a></li> ":(i+='  <li class="symbol-item" data-id="'+_._id+'" data-gta="event" data-label="at item"> <a>  ',_.avatarUrl&&(i+=' <div class="avatar img-circle" style="background-image:url('+_.avatarUrl+');"></div> '),i+=' <div class="member-info"> <p class="name">'+o(_.name)+"</p> ",(_.teamsInfo&&_.teamsInfo.length>0||_.email&&_.email.indexOf("@mail.teambition.com")<0||_.phone&&_.phone.length>0)&&(i+=' <p class="tips"> ',_.teamsInfo&&_.teamsInfo.length>0?i+=" "+_.teamsInfo[0].name+" ":_.email&&_.email.indexOf("@mail.teambition.com")<0?i+=" "+_.email+" ":_.phone&&_.phone.length>0&&(i+=" "+_.phone+" "),i+=" </p> "),i+=" </div> </a> </li> "),i+=" ";i+=" "}if(i+=" \x3c!-- 访客 --\x3e ",a){i+=' <h5 class="guest-members">'+tb_i18n.get("project.at.members.guest")+"</h5> ";var k=e.membersData.guestMembers;if(k)for(var _,w=-1,C=k.length-1;w<C;)i+=' <li class="symbol-item guest-member" data-id="'+(_=k[w+=1])._id+'" data-gta="event" data-label="at item"> <a>  ',_.avatarUrl&&(i+=' <div class="avatar img-circle" style="background-image:url('+_.avatarUrl+');"></div> '),i+=' <div class="member-info"> <p class="name">'+o(_.name)+"</p> ",(_.teamsInfo&&_.teamsInfo.length>0||_.email&&_.email.indexOf("@mail.teambition.com")<0||_.phone&&_.phone.length>0)&&(i+=' <p class="tips"> ',_.teamsInfo&&_.teamsInfo.length>0?i+=" "+_.teamsInfo[0].name+" ":_.email&&_.email.indexOf("@mail.teambition.com")<0?i+=" "+_.email+" ":_.phone&&_.phone.length>0&&(i+=" "+_.phone+" "),i+=" </p> "),i+=" </div> </a> </li> ";i+=" "}if(i+=" \x3c!-- 任务id搜索结果 --\x3e ",e.linksData&&e.linksData.length){i+=" ";var S=e.linksData;if(S)for(var E,T=-1,I=S.length-1;T<I;)i+=' <li class="symbol-item link-item" data-id="'+(E=S[T+=1])._id+'" data-gta="event" data-label="hash item"> <a> <div class="link-avatar avatar flex-vert flex-center"> <span class="icon icon-board"></span> </div> <div class="link-info"> <span class="title">'+o(E.content)+'</span> <span class="task-id-placeholder"></span> </div> </a> </li> ';i+=" "}return i+="</ul>"}},WEaTnrBS:function(e,t,n){e.exports={"table-placeholder":"table-placeholder__K8dT",image:"image__1p3O"}},"WKaGr+fM":function(e,t){e.exports=function(e){return'<form class="archive-form"> <p>'+tb_i18n.get("previewer.menu.confirm.archive")+'</p> <button class="btn btn-danger" type="submit">'+tb_i18n.get("archive")+"</button></form>"}},"WMI0/nUp":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b;u=n("a+N5u/Cl"),l=n("R81d6RG8").WAREHOUSE_NAMESPACE,p=n("2qRnoGmE"),r=n("bZr3G77e"),c=n("3eMzznN/"),b=n("yiO17FlF"),o=n("lc2tFaYE"),s=n("TAuajgAY"),a=n("Fb6Npyie"),i=n("w68F3Pvn"),v=n("gh8QIhMV").throwError,t.fetchMyPlugins=d=function(){return o.fetchT(l)},t.removeMyPlugin=function(e){return d()(function(t,n){return n.deletePlugin(e)})},t.fetchProjectPowerUps=f=function(e){return a.fetchT(l+"_"+e+"_powerups",{_projectId:e})},t.fetchProjectPlugins=m=function(e){return s.fetchT(l+"_"+e,{_projectId:e})},t.clearFetchProjectPluginsCache=function(e){return delete b.getData().collectionsT[l+"_"+e]},t.removeProjectPlugin=function(e,t){return Promise.all([c.thunkToPromise(f(e)).then(function(e){return e.deletePlugin(t)}),c.thunkToPromise(m(e)).then(function(e){return e.deletePlugin(t)})]).catch(function(e){return v(e)})},t.enableProjectPlugin=function(e,t,n){return Promise.all([c.thunkToPromise(f(e)).then(function(e){return e.enablePlugin(n)}),c.thunkToPromise(m(e)).then(function(e){return e.enablePlugin(t)})]).catch(function(e){return v(e)})},t.disableProjectPlugin=function(e,t,n){return Promise.all([c.thunkToPromise(f(e)).then(function(e){return e.disablePlugin(n)}),c.thunkToPromise(m(e)).then(function(e){return e.disablePlugin(t)})]).catch(function(e){return v(e)})},t.fetchOrganizationPlugins=h=function(e){return i.fetchT(l+"_"+e,{_organizationId:e})},t.removeOrganizationPlugin=function(e,t){return h(e)(function(e,n){return n.deletePlugin(t)})},t.getPluginId=g=function(e){return e._pluginId||e._id},t.requestPluginUrl=function(e,t,n){var o;return o=g(e),r.ajax(u.assign({type:"GET",url:p.HOST+"/appstore/api/apps/"+o+"/request",data:t,silentError:!0},n))},t.createLinks=function(e,n,o){var i;return i=n.map(function(e){var t;return null!=(t=e.dataUrl)?r.get(t,{data:{access_token:o}}):Promise.resolve(e)}),Promise.all(i).then(function(n){return t.createInteStandards(e,n)})},t.createInteStandards=function(e,t){return Promise.all(t.map(function(t){return r.ajax("integrations/standard",{type:"POST",data:{data:{title:t.title,content:t.content,url:t.redirectUrl,thumbnailUrl:t.thumbnailUrl,_consumerId:e._consumerId}}})}))}},WRIFfSP1:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k={}.hasOwnProperty;f=n("2qRnoGmE"),v=n("tLZJUYWX"),b=n("sa1Ed382"),m=n("a+N5u/Cl"),i=n("TXoskWV7").DropboxSDK,u=n("GESwhXbR").Toast,s=n("L4faqtAu").FangCloudSDK,g=n("8y0JNx5d").getFileHost,a=n("bZr3G77e"),c=n("hGNqppva"),y=n("gh8QIhMV").throwError,d=n("OmupbwLD"),p=n("eubUSX4T"),l=n("77NnVLwu"),h=n("o4N9kv/m"),o=n("fnRWEXeT"),r=n("mz5Ire9y"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)k.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,c),t.prototype.popoverTitle="",t.prototype.viewName="WorksPickerView",t.prototype.events={"click .dropbox-picker-handler":"handleSelectFileFromDropboxSDK","click .fangcloud-picker-handler":"handleSelectFileFromFangCloudSDK","click .library-picker-handler":"handleSelectFileFromLibrary","click .remote-picker-handler":"handleSelectFileFromRemoteURL","click .uploader-handler":"hide"},t.prototype.initialize=function(e){return this.options=e,this._projectId=this.options._projectId,this.collection=this.options.collection,this.errorHandler=this.options.error||function(){},this.popoverTitle=v.get("work.picker.title"),this.successHandler=this.options.success||function(){},t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return this.subscribe(l.fetch$(this._projectId).do((e=this,function(t){return e.projectModel=t,e._render(),e.fixPosition()})));var e},t.prototype._render=function(){return this.$el.html(r({isDropboxSDKEnable:this.isDropboxSDKEnable(),isFangCloudSDKEnable:this.isFangCloudSDKEnable(),isLibraryEnable:this.isLibraryEnable()})),this.renderWorkUploaderView()},t.prototype.remove=function(){return this.fancloudSDK&&this.fancloudSDK.destroy(),t.__super__.remove.apply(this,arguments)},t.prototype.renderWorkUploaderView=function(){return this.requestSubView(h,m.extend({},this.options,{collection:this.collection,notCheckProjectSizeLimit:!(this.projectModel instanceof l),pick:{id:this.$(".uploader-handler"),multiple:!0},targetModel:this.projectModel}))},t.prototype.isDropboxSDKEnable=function(){return Boolean(i)&&!0===f.FEATURES.dropboxSDK},t.prototype.isFangCloudSDKEnable=function(){var e;return Boolean(s)&&!0===f.FEATURES.fangCloudSDK&&Boolean(null!=(e=this.projectModel)?e.isAppEnabled("fangcloud"):void 0)},t.prototype.isLibraryEnable=function(){return"string"==typeof this._projectId&&this._projectId.length>0},t.prototype.handleSelect=function(e){var t;return t=m.map(e,function(e){return e.toJSON()}),this.collection.add(t,{parse:!0}),this.collection.trigger("change:completed"),this.successHandler(e)},t.prototype.handleUpload=function(e){var t,n;return t=new p([],{_boundToObjectId:e}),this.requestSubView(h,{collection:t,targetModel:this.projectModel,onComplete:(n=this,function(r,o){return t.addWorks([r],{_parentId:e,_projectId:n._projectId,error:function(e){return y(e),this.errorHandler(e)},success:function(e){var t;return n.collection.add(e,{parse:!0}),n.collection.trigger("change:completed"),null!=(t=n.picker)?t.remove():void 0}})})}).uploader.triggerUpload({multiple:!0})},t.prototype.handleUploadFile=function(e,t,n){switch(e){case"dropbox":case"fangcloud":t={files:m.isArray(t)?t:[t],source:e};break;case"remote":t={downloadUrl:t,source:e}}return a.ajax({data:t,dataType:"json",error:(r=this,function(e){return y(e),r.errorHandler(e)}),headers:{authorization:b.user.get("strikerAuth")},success:n,type:"POST",url:g()+"/forremote"});var r},t.prototype.handleSelectFileFromLibrary=function(){return this.hide(),this.picker&&this.picker.remove(),this.picker=this.requestSubView(d).open(o,{_projectId:this._projectId,allProjects:!1,multiple:!0,onlyCollections:!1,onlyWorks:!0,onUpload:this.handleUpload.bind(this),select:this.handleSelect.bind(this),title:v.get("work.picker.from.library"),withWorkUpload:!0})},t.prototype.handleSelectFileFromDropboxSDK=function(){return this.hide(),i.choose({cancel:function(){},linkType:"preview",multiselect:!0,success:(e=this,function(t){return e.handleUploadFile("dropbox",t,function(t){var n,r,o;for(n=0,r=t.length;n<r;n++)(o=t[n]).completed=!0,o.progress=1;return e.collection.add(t,{parse:!0}),e.collection.trigger("change:completed"),e.successHandler(t)})})});var e},t.prototype.handleSelectFileFromRemoteURL=function(){var e,t,n,r;if(this.hide(),t=this.$(".remote-input-wrap input").val().trim())return e=/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,encodeURI(t).match(e)||u.error(v.get("work.picker.remote.error")),n=this.collection.add({downloadUrl:t},{parse:!0}),this.handleUploadFile("remote",t,(r=this,function(e){return e.completed=!0,e.progress=1,n.set(n.parse(e)),r.successHandler(e)}))},t.prototype.handleSelectFileFromFangCloudSDK=function(){return this.hide(),this.fangCloudSDK&&this.fancloudSDK.destroy(),this.fancloudSDK=s.create({id:m.uniqueId("fangcloud"),success:(e=this,function(t){return e.handleUploadFile("fangcloud",t,function(t){var n,r,o;for(n=0,r=t.length;n<r;n++)(o=t[n]).completed=!0,o.progress=1;return e.collection.add(t,{parse:!0}),e.collection.trigger("change:completed"),e.successHandler(t)})})});var e},t}()},WUiXPPkw:function(e,t,n){e.exports={"location-selector":"location-selector__1kaS","location-selector-dropdown":"location-selector-dropdown__3dBk"}},WVgvAmgj:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v={}.hasOwnProperty;p=n("a+N5u/Cl"),u=n("vmWJWrVe"),h=n("2qRnoGmE"),g=n("tLZJUYWX"),m=n("BzGHEctR").labs,r=n("ypWNgh6R"),l=n("MG+UrdGu"),a=n("RFRTfVZr"),c=n("jPxgbxp7"),i=n("kQL4tsqH"),o=n("G88aO0cT"),f=n("YsJsuHrW"),d=f.checkTestsChanged,s=f.PersonalSettingsLabsView,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)v.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,u),t.prototype.viewName="PersonalSettingsView",t.prototype.className="personal-settings-view",t.prototype.initialize=function(e){return this.render(e)},t.prototype.render=function(e){var t,n,u,f;return u=this.requestSubView(r,{size:"large",modalPadding:!1,title:g.get("personal.settings"),modalClass:"tab-container-modal-view modal-fullsize"}),n={list:p.compact([{name:"notification",text:g.get("personal.settings.tab.notification"),icon:"icon-inbox",view:(f=this,function(){return f.requestSubView(a)})},{name:"personalization",text:g.get("personal.settings.tab.personalization"),icon:"icon-clothes",view:function(e){return function(){return e.requestSubView(c)}}(this)},{name:"display",text:g.get("personal.settings.tab.display"),icon:"icon-eye",view:function(e){return function(){return e.requestSubView(i)}}(this)},h.FREE?null:{name:"privacy-policy",text:g.get("personal.settings.tab.privacy.policy"),icon:"icon-lock",view:function(e){return function(){return e.requestSubView(o)}}(this)},{name:"labs",text:g.get("personal.settings.tab.labs"),icon:"icon-lab",showBadge:d(),view:function(e){return function(){return e.requestSubView(s)}}(this)}]),onOpen:function(){return m.setModalStatus(!0)},onClose:function(){return m.setModalStatus(!1)}},t=p.findIndex(n.list,{name:e.tabName}),n.tabIndex=~t?t:0,u.open(l,n)},t}()},WXjep2Z1:function(e,t,n){},WZNYrrge:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("8yf6doCl"),l=n("4c1CS0b3"),u=n("LvDlAkAJ"),p=n.n(u),d=n("tLZJUYWX"),h=n.n(d),m=n("sa1Ed382"),f=n("GESwhXbR"),g=n("jgYRBeZE"),v=n("gh8QIhMV"),b=n("ThSbgwXN"),y=n("bvmrLhnu"),k=n("s0r7VfKc"),_=n("QWGdQHge"),w=n.n(_),C=n("kWyHlA6A"),S=n.n(C),E=n("Qz4qJXzO"),T=n.n(E),I=function(e){var t=r.f(Object(o.useState)(e),1)[0];return Object(o.useRef)(t)};n.d(t,"b",function(){return N}),n.d(t,"a",function(){return R});var M=function(e){e.stopPropagation()},j=i.a.memo(function(e){var t=e.project,n=e.onSelect,r=e.cls,s=i.a.createElement("span",{className:"visibility-label icon icon-earth hinted","data-title":h.a.get("public")}),a=i.a.createElement("span",{className:"visibility-label icon icon-building hinted","data-title":h.a.get("organization.visible")}),c=Object(o.useCallback)(function(){n(t._id),m.gta.event({action:"open detail",category:Object(y.getGtaCategory)(t),control:"Project List",type:"project",fromTemplate:t._sourceId})},[t._id,n]);return i.a.createElement("li",{className:r,key:t._id,onClick:c},i.a.createElement("a",null,i.a.createElement("div",{className:"project-logo pull-left",style:{backgroundImage:"url("+t.logo+")"}}),i.a.createElement("span",{className:"project-name"},t.name),"all"===t.visibility&&s,"organization"===t.visibility&&a))}),P=i.a.memo(function(e){var t=e.projects,n=e.activeIndex,o=e.selectedId,s=e.onSelected,c=r.f(p.a.partition(t.map(function(e,r){var c=a()("project-item",{active:void 0!==n&&n%t.length===r,selected:o===e._id});return[i.a.createElement(j,{project:e,cls:c,onSelect:s,key:e._id}),e.isStar]}),function(e){return r.f(e,2)[1]}),2),l=c[0],u=c[1],d=i.a.createElement("li",{className:"group-by",onClick:M},i.a.createElement("p",{className:"group-name"},h.a.get("flagged.projects")));return i.a.createElement(i.a.Fragment,null,!!l.length&&d,l,i.a.createElement("li",{className:"group-by",onClick:M},i.a.createElement("p",{className:"group-name"},h.a.get("all.projects"))),u)}),x=i.a.memo(function(e){var t=e.projects,n=e.activeIndex,r=e.selectedId,o=e.onSelected;if(0===t.length)return i.a.createElement("div",{className:"placeholder no-result"},i.a.createElement("span",{className:"icon icon-search-warning"}),i.a.createElement("p",null,h.a.get("project.switcher.no.result")));var s=t.map(function(e,s){var c=a()("project-item",{active:void 0!==n&&n%t.length===s,selected:r===e._id});return i.a.createElement(j,{project:e,cls:c,onSelect:o,key:e._id})});return i.a.createElement(i.a.Fragment,null,s)}),N=function(e){var t=I(function(){return new c.Subject}).current,n=I(function(){return new c.Subject}).current,i=r.f(Object(o.useState)(void 0),2),s=i[0],a=i[1],u=r.f(Object(o.useState)(void 0),2),p=u[0],d=u[1],h=r.f(Object(o.useState)(void 0),2),m=h[0],f=h[1],g=r.f(Object(o.useState)(!1),2),b=g[0],y=g[1],_=r.f(Object(o.useState)(!0),2),C=_[0],E=_[1];return Object(o.useEffect)(function(){return function(){t.complete(),n.complete()}},[]),Object(o.useEffect)(function(){d(void 0),a(void 0),f(void 0),E(!0),y(!1);var r,o=function(e,n){return e().expand(function(n){var r=n.result,o=n.nextPageToken;return r.length&&""!==o?t.first().do(function(){return E(!0)}).switchMap(function(){return e(o)}):l.Observable.empty()}).map(function(e){return e.result}).do(function(e){E(!1),n(function(t){return void 0===t&&(t=[]),t.concat(e)})})},i=n.debounceTime(200).distinctUntilChanged().do(function(e){y(!!e),e&&(f(void 0),E(!0))}).filter(function(e){return!!e}).switchMap(function(t){return o(function(n){return r={q:t,organizationId:e,pageToken:n},k.default.graph(T.a,r).map(function(e){return e.result});var r},f)}).subscribe({error:v.throwError}),s=o(function(t){return n={organizationId:e,pageToken:t},k.default.graph(S.a,n).map(function(e){return e.unStarred});var n},a).subscribe({error:v.throwError}),c=(r={organizationId:e},k.default.graph(w.a,r).map(function(e){return e.starred})).subscribe(function(e){var t=e.result;return d(t)},v.throwError);return function(){i.unsubscribe(),c.unsubscribe(),s.unsubscribe()}},[e]),{starred:p,unStarred:s,searched:m,isSearching:b,isLoading:C,search$$:n,loadMore$$:t}},O=i.a.memo(function(e){var t=e.organizationId,n=r.g(e,["organizationId"]),s=Object(o.useRef)(null),a=I(function(){return Math.max(.7*document.body.getBoundingClientRect().height,300)}).current,c=r.f(Object(o.useState)(void 0),2),l=c[0],u=c[1],d=N(t),m=d.starred,v=d.unStarred,y=d.searched,k=d.isSearching,_=d.isLoading,w=d.search$$,C=d.loadMore$$,S=Object(o.useCallback)(function(e){var t=e.target.value.trim();w.next(t),u(void 0)},[]),E=Object(o.useRef)(function(){return s.current&&s.current.querySelector("li.project-item.active")}).current,T=Object(o.useCallback)(function(e){switch(e.keyCode){case g.Keyboard.Up:return e.preventDefault(),u(function(e){return(void 0===e?0:e)-1});case g.Keyboard.Down:return e.preventDefault(),u(function(e){return(void 0===e?-1:e)+1});case g.Keyboard.Enter:var t=E();return t&&t.click()}},[]);Object(o.useLayoutEffect)(function(){var e=window.requestAnimationFrame(function(){var e=E();e&&Object(b.scrollIntoViewSmoothly)(e,{block:"nearest",boundary:s.current})});return function(){return window.cancelAnimationFrame(e)}},[l]);var j=I(function(){return p.a.throttle(function(){var e=s.current;e&&e.scrollTop+e.getBoundingClientRect().height>=e.scrollHeight-10&&C.next()},60)}).current,O=r.a({},n,{activeIndex:l}),R=k?y&&i.a.createElement(x,r.a({projects:y},O)):m&&v&&i.a.createElement(P,r.a({projects:r.h(m,v)},O));return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"project-search"},i.a.createElement(f.Input,{className:"form-control",placeholder:h.a.get("project.switcher.placeholder"),onChange:S,onKeyDown:T,defaultValue:"",autoFocus:!0,onClick:M})),i.a.createElement("ul",{className:"project-list list-underscore thin-scroll",style:{maxHeight:a},onScroll:j,ref:s},R,_&&i.a.createElement(f.Loading,null)))}),R=function(e){var t=e.children,n=r.g(e,["children"]);return i.a.createElement(f.Dropdown,{content:i.a.createElement(O,r.a({},n)),className:"project-switcher-view",placement:"bottom",offset:[0,18]},t)}},WcBbSBbW:function(e,t,n){e.exports={"display-table":"display-table__i0wH","display-table__list":"display-table__list__cylo"}},"Wd/8sFUG":function(e,t,n){"use strict";n.r(t);var r=n("yU55AR5B");for(var o in r)["axon","init","default"].indexOf(o)<0&&function(e){n.d(t,e,function(){return r[e]})}(o);var i=n("ja6xOrJJ");n.d(t,"axon",function(){return i.a}),n.d(t,"init",function(){return i.b})},WdDUBogX:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("sa1Ed382"),o=n("HYobN8SQ");function i(){return r.PREFERENCE.get("lastWorkspace")||"default"}var s=new(function(){function e(){this.LocalStorage=o.namespace("temp").namespace("export-fields-cache")}return e.prototype.get=function(e){var t=i();return this.LocalStorage.namespace(t)(e)||[]},e.prototype.set=function(e,t){var n=i();return this.LocalStorage.namespace(n)(e,t)},e}())},Wf8Rby30:function(e,t,n){var r,o,i,s,a,c,l,u,p,d={}.hasOwnProperty;c=n("a+N5u/Cl"),p=n("sa1Ed382"),a=n("vmWJWrVe"),i=n("ahANzVvG"),l=n("Io315hVL").focusOnSearch,u=n("BzGHEctR").labs,s=n("4XG9A953").Guide,r=$("body"),o=$(window),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="FloatView",t.prototype.hotkeys={i:"toggleInbox",e:"toggleCalendar",m:"toggleMy",w:"toggleDashboard",s:"focusSearch",esc:function(e){return e.preventDefault(),this.close()}},t.prototype.disableFloat=!1,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.labDashboardEnabled=u.checkTest("dashboard"),this.dashboardLabSub$=u.notify$.subscribe((e=this,function(){var t;if((t=u.checkTest("dashboard"))!==e.labDashboardEnabled)return e.close(),e.labDashboardEnabled=t}));var e},t.prototype.open=function(e,t,n){var o;if(!this.disableFloat&&!p.user.get("isGhost"))return p.APP.hidePanel(),t=c.extend({animateType:"slide"},t||{}),this.currentView instanceof e?(this.currentView.remove(),this.currentView=this._currentView=this.requestSubView(e,t),this.currentView.$el.appendTo(r),p.APP.setDataCategory(n)):this._closeView((o=this,function(){return o.currentView=o.requestSubView(e,t),o.animate(o.currentView.$el,"open",function(){var e;return"function"==typeof(e=o.currentView).onOpen&&e.onOpen(),"function"==typeof t.onOpen?t.onOpen():void 0}),p.APP.setDataCategory(n)})),this},t.prototype._closeView=function(e){var t,n,r;return p.APP.setDataCategory(),this.currentView?(n=this.prevView=this.currentView,t=this.$container,null!=(r=this.prevView)&&"function"==typeof r.beforeClose&&r.beforeClose(),this.animate(n.$el,"close",function(){var r;try{null!=n&&"function"==typeof n.remove&&n.remove(),null!=t&&"function"==typeof t.remove&&t.remove()}catch(o){r=o,console.error(r)}return"function"==typeof e?e():void 0})):"function"==typeof e&&e(),this},t.prototype.close=function(e){var t;if(!this.disableFloat)return p.APP.hidePanel(),this._closeView((t=this,function(){return t.currentView=t.prevView=t._currentView=null,"function"==typeof e?e():void 0})),this},t.prototype.toggle=function(e,t,n){return this.disableFloat?Promise.resolve(null):i().then((r=this,function(o){var i;return i=function(){switch(e){case"my":return o.MyView;case"dashboard":return o.DashboardView;case"calendar":return o.CalendarView;case"inbox":return o.Inbox}}(),t||(t={}),(t.isSame||function(){return r.currentView instanceof i})()?(r.close(),!1):(r.open(i,t,n),!0)}));var r},t.prototype.toggleMy=function(e){return this.labDashboardEnabled?Promise.resolve(null):this.toggle("my",e)},t.prototype.toggleDashboard=function(){return this.labDashboardEnabled?this.toggle("dashboard",{}):Promise.resolve(null)},t.prototype.focusSearch=function(e){return e.preventDefault(),l()},t.prototype.toggleCalendar=function(e){return this.toggle("calendar",e)},t.prototype.toggleInbox=function(e){return this.toggle("inbox",e)},t.prototype.animate=function(e,t,n){return"open"===t?this.animate_open(e,t,n):this.animate_close(e,t,n)},t.prototype.animate_open=function(e,t,n){var i;switch(r.addClass("float-open"),this.currentView.options.animateType){case"slide":return i=-o.height(),e.transition({y:i},0),e.appendTo(r),e.transition({y:0},300,"ease",function(){return e.transition({y:.01*i},80,function(){return e.transition({y:0},40,function(){return e.css("transform",""),"function"==typeof n?n():void 0})})});case"fade":return e.appendTo(r),e.fadeIn(218,function(){return"function"==typeof n?n():void 0})}},t.prototype.animate_close=function(e,t,n){var i,s,a,c,l,u;if(i=(null!=(a=this._currentView)&&null!=(c=a.options)?c.animateType:void 0)||!1,(s=(null!=(l=this.prevView)&&null!=(u=l.options)?u.animateType:void 0)||!1)!==i&&s&&i)return r.removeClass("float-open"),"function"==typeof n?n():void 0;switch(s){case"slide":return e.transition({y:-o.height()},300,"snap",function(){return r.removeClass("float-open"),"function"==typeof n?n():void 0});case"fade":return e.fadeOut(218,function(){return r.removeClass("float-open"),"function"==typeof n?n():void 0})}},t.prototype.remove=function(){var e;return s.destroy(),null!=(e=this.dashboardLabSub$)&&e.unsubscribe(),r.removeClass("float-open"),t.__super__.remove.apply(this,arguments)},t}()},WieTJvx5:function(e,t,n){var r,o,i,s,a,c,l,u,p,d={}.hasOwnProperty;c=n("vmWJWrVe"),r=n("77NnVLwu"),i=n("EjIl6N9o"),a=n("FoX6irlC"),o=n("q6u3XLOb"),p=n("tkPHaDUr"),s=p.TaskLocator,l=p.bootstrapTaskLocator,u=n("NSliPjIn").getUnsetProject,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,c),t.prototype.viewName="StageSelectorView",t.prototype.className="stage-selector-view",t.prototype.initialize=function(e){var n,r,o,i,s,a;return this.tips=e.tips,this.frozenTypes=e.frozenTypes,this.withDefaultProject=e.withDefaultProject,this.optionalType=e.optionalType,a=e.tasklistModel,n=e.projectModel,i=e.stageModel,o=e.sprintModel,r=e.scenarioFieldConfig,s=e.taskflowStatus,this.acceptedStatusKinds=e.acceptedStatusKinds,this.acceptedScenarioTypes=e.acceptedScenarioTypes,this.extendStatusFilter=e.extendStatusFilter,this.noFilter=e.noFilter,this.organizationId=e.organizationId,this.hideIndieEntry=e.hideIndieEntry,this.showLinkOptions=e.showLinkOptions,this.success=e.success,this.onUpdate=e.onUpdate,this.doLink=e.doLink,this.doLinked=e.doLinked,l({selectedTasklist:(null!=a?a.toJSON():void 0)||null,selectedProject:(null!=n?n.toJSON():void 0)||u(),selectedStage:(null!=i?i.toJSON():void 0)||null,selectedSprint:(null!=o?o.toJSON():void 0)||null,selectedTaskflowStatus:s||null,selectedScenarioField:r||null,hideIndieEntry:this.hideIndieEntry,organizationId:this.organizationId,noFilter:this.noFilter}),this.render(),t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return this.requestReactView(this.el,s,{noFilter:this.noFilter,organizationId:this.organizationId,tips:this.tips,optionalType:this.optionalType,showLinkOptions:this.showLinkOptions,frozenTypes:this.frozenTypes,withDefaultProject:this.withDefaultProject,doLink:!!this.doLink,doLinked:!!this.doLinked,acceptedStatusKinds:this.acceptedStatusKinds,acceptedScenarioTypes:this.acceptedScenarioTypes,extendStatusFilter:this.extendStatusFilter,onSubmit:this.submit.bind(this),onClose:this.onCloseView.bind(this)},{redux:!0})},t.prototype.getProjectModel=function(e){return e&&new r(e)||void 0},t.prototype.getSprintModel=function(e){return e&&new o(e)||void 0},t.prototype.assembleData=function(e){var t,n;return{projectModel:this.getProjectModel(e.selectedProject),sprintModel:this.getSprintModel(e.selectedSprint),tasklistModel:e.selectedTasklist&&new a(e.selectedTasklist),stageModel:e.selectedStage&&new i(e.selectedStage),scenarioFieldConfig:e.selectedScenarioField,taskflowStatus:e.selectedTaskflowStatus,_scenariofieldconfigId:null!=(t=e.selectedScenarioField)?t._id:void 0,_taskflowstatusId:null!=(n=e.selectedTaskflowStatus)?n._id:void 0,doLink:e.doLink,doLinked:e.doLinked,organizationId:this.organizationId}},t.prototype.submit=function(e){return"function"==typeof this.success?this.success(this.assembleData(e)):void 0},t.prototype.onCloseView=function(e){return"function"==typeof this.onUpdate?this.onUpdate(this.assembleData(e)):void 0},t}()},WivmqnGB:function(e,t){e.exports=function(e){var t='<div class="dropdown"> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> <span class="selected-repo">'+e.selectedRepo.name+'</span> <span class="icon icon-chevron-down"></span> </button> <ul class="dropdown-menu thin-scroll" aria-labelledby="dropdownMenu1"> ',n=e.repos;if(n)for(var r,o=-1,i=n.length-1;o<i;)r=n[o+=1],t+=' <li> <a class="github-repo ',0===o&&(t+="selected"),t+='" data-repo="'+r.name+'">'+r.name+' <span class="icon icon-tick"></span> </a> </li> ';t+=" </ul></div>";var s=e.objects;if(s){o=-1;for(var a,c=s.length-1;o<c;)t+='<li> <a class="object-menu-item" data-id="'+(a=s[o+=1]).id+'" data-name="'+a.name+'">'+a.name+"</a></li>"}return t}},WjrpElRr:function(e,t,n){e.exports=function(e){var t,r,o="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),i="";return i+='<div class=" reminder-handler '+n("L0ULbOmZ")["task-reminder"]+" ",e.permissions.putReminder&&!e.isArchived||e.reminderTitle?i+=" hinted ":i+=" disabled ",i+=" ",e.reminderTitle||(i+=" empty "),i+=' " data-title="'+o(e.reminderTitle||tb_i18n.get("click.set.task.reminder"))+'"> <span class="icon icon-alert-clock"></span></div>'}},Wks7Fgjk:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("a+N5u/Cl"),r=n("qHH6+g6Q"),o=n("8N+zwa3A"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="activity",t.prototype.urlRoot="activities",t.prototype.defaults={objectType:"activity",action:"",_boundToObjectId:"",boundToObjectType:"",comment:"",content:{},_creatorId:"",created:"",updated:"",mentions:[],attachments:[],involveMembers:[],icon:"",title:"",creator:{_id:"",name:""}},t.prototype.parse=function(e){var t,n;return null==e&&(e={}),n=(e.locales||{})[tb_i18n.getLanguage()],t=i.extend({},this.get("content"),e.content),e.content=i.omit(t,"comment","attachments","mentions"),i.defaults(e,i.pick(t,"comment","attachments","mentions")),i.extend(this.toJSON(),e,n)},t.prototype.initSubscribe=function(){var e,t,n,r;if((n=this.get("attachments")).length&&n[0]._id){for(e=0,t=n.length;e<t;e++)r=n[e],this.subscribeTo(r._id,"change",function(e){return function(t){return e.updateAttachments(t.toJSON())}}(this)),this.subscribeTo(r._id,"destroy",function(e){return function(t){return e.removeAttachments(t)}}(this));return this}},t.prototype.updateAttachments=function(e){var t,n,r,o,i;for(o=[],n=0,r=(t=this.get("attachments")).length;n<r;n++)i=t[n],e._id===i._id?o.push(e):o.push(i);return this.set("attachments",o),this},t.prototype.removeAttachments=function(e){var t,n,r,o,i;for(o=[],n=0,r=(t=this.get("attachments")).length;n<r;n++)(i=t[n])._id!==e&&o.push(i);return this.set("attachments",o),this},t.prototype.getAttachmentDatas=function(){var e,t,n,r,i;for(r=[],t=0,n=(e=this.get("attachments")).length;t<n;t++)i=e[t],r.push(o.formatWork(i));return r},t}()},WnsHHLFq:function(e,t){e.exports=function(e){var t="";return e.searchPlaceholder&&(t+='<div class="menu-input"> <input class="filter-input form-control" placeholder="'+e.searchPlaceholder+'"/></div>'),t+='<ul class="list-unstyled thin-scroll"></ul>'}},WsfvXF4i:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R,D,L,z,A,V,F,B,U,H={}.hasOwnProperty;j=n("a+N5u/Cl"),D=n("QyjeWo4p"),T=n("3eMzznN/"),I=n("vmWJWrVe"),P=n("2qRnoGmE"),S=n("GESwhXbR").Toast,k=n("NS4ZqriE"),d=n("Lj/ldHVx"),F=n("k7+OBFO9"),B=n("sa1Ed382"),s=n("Wks7Fgjk"),i=n("++xunwor"),w=n("uQN6Cr2k"),c=n("TTDkZdir"),h=n("bZr3G77e"),y=n("ypWNgh6R"),l=n("X7+VPM8x"),p=n("iPNg/Ezr"),u=n("Fy6QNGNX"),M=n("ULzZnFx/"),a=n("LjrGGsE7"),m=n("k5DyfbO1"),E=n("Z5fnzllY"),g=n("ph6uiPdy"),x=n("8y0JNx5d").getFileHost,L=n("LkuSL3mR"),f=L.ImagePreviewer,V=L.registerState,U=L.unregisterState,_=n("5mwzFNVw").PreviewerToolbar,z=n("0X1fXJzV"),O=z.isOfficeOnlineEnabled,R=z.isOfficeOnlineFile,N=z.getOfficeOnlineIframeSrc,n("8Ia8MWec"),A=n("pHAQicEC"),b=A.MAX_TXT_SIZE,v=A.MAX_PDF_SIZE,o=A.ANIMATED_IMAGE_TYPES,C=A.SPECIAL_TYPE_WITH_PREVIEW,$(window),r=$("body"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)H.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,I),t.prototype.viewName="PreviewerContentView",t.prototype.tagName="div",t.prototype.className="previewer-content flex-vert",t.prototype.events={"click .previewer-download-link":"downloadWork"},t.prototype.initialize=function(e){var t,n;return this.viewId=e.viewId,this.canDownload=e.canDownload,this.indexModel=e.indexModel,this.workModel=e.workModel,this.versionModel=e.versionModel,this.convertFile=e.convertFile,this.inChat=e.inChat,this.contentStatusModel=e.contentStatusModel,this.canCommentSkitch=e.canCommentSkitch,this.handleDownload=e.handleDownload,this.imageLoader=e.imageLoader,t=e.onReady,this.skitchesCollection=this.versionModel.skitchesCollection,this.creatorActivitiesCollection=new i([]),this.mediaItem=null,this._zoomCenter=null,this.fullscreen=!1,this.domReady=!1,this.reactMounted=!1,this.previewerMounted=!1,this.toolbarMounted=!1,this.type=this.getType(),this.initActivityCollection(),V(this.viewId),this.render(),this.reset(),this.canvasSplitter=new c,t((n=this,function(){return n.domReady=!0,n.renderImagePreviewer()}))},t.prototype.reset=function(){return this.listenTo(this.indexModel,"change:officePreviewerEnabled",this.renderContent),this.listenTo(this.creatorActivitiesCollection,"all",function(){return this.renderImagePreviewer()}),this.listenTo(this.skitchesCollection,"add remove",function(){return this.renderImagePreviewer()}),this.listenTo(this.versionModel,"change:name",this.renderContent),this.listenTo(this.contentStatusModel,"change:convert",function(e,t){if(t)return this.renderLoading(tb_i18n.get("previewer.converting"))}),this.listenTo(this.contentStatusModel,"change:error",function(e,t){if(t)return this.renderFallback(tb_i18n.get("previewer.file.translateFail"))}),this.listenTo(this.contentStatusModel,"change:percentage",this.renderUpdate),p.add("previewerFullscreen_"+this.cid,(e=this,function(){if(e.el)return e.fullscreen=!1,e.setFullscreen()}));var e},t.prototype.setFullscreen=function(){var e;return e=this.fullscreen?"addClass":"removeClass",r[e]("previewer-fullscreen"),this.renderToolbar()},t.prototype.initActivityCollection=function(){var e;if(!this.inChat)return e=this.workModel.id,this.activityCollection=i.get(e,{boundToObjectType:"work"}),this.listenTo(this.activityCollection,"add remove change",function(){if("image"===this.type)return this.renderImagePreviewer()})},t.prototype.getType=function(){var e,t,n,r;return t=this.versionModel.toJSON(),r=w.parseUrlExt(t.previewUrl),n=t.fileType,e="text"===t.fileCategory||w.isSupportLangType(t.fileType),R(n)&&O()?"office":w.isImageWithPreview(t)?~o.indexOf(n)?"animate":"image":e&&t.fileSize<b?"text":("pdf"===r||"pdf"===(null!=n?n.toLowerCase():void 0))&&t.fileSize<v?"pdf":"video"===t.fileCategory||"mp4"===r?"video":"audio"===t.fileCategory||"mp3"===r?"audio":"other"},t.prototype.saveCenter=function(e){var t,n,r,o,i,s;return s=e.width,r=e.height,o=this.$preview.scrollLeft(),i=this.$preview.scrollTop(),n=this.containerWidth/2,t=this.containerHeight/2,this._zoomCenter={coordX:s>=this.containerWidth?(o+n)/s:.5,coordY:r>=this.containerHeight?(i+t)/r:.5,clientX:n,clientY:t}},t.prototype.setCenter=function(e,t){var n,r,o,i,s,a,c,l,u;if(this._zoomCenter)return u=e.width,s=e.height,o=(a=this._zoomCenter).coordX,i=a.coordY,n=a.clientX,r=a.clientY,t?(c=u*(1-i)-n,l=s*o-r):(l=s*i-r,c=u*o-n),this._zoomCenter=null,this.$preview.scrollTop(l).scrollLeft(c)},t.prototype.saveContainerSize=function(){if(this.$preview)return this.containerWidth=this.$preview.width()||0,this.containerHeight=this.$preview.height()||0},t.prototype.getDownloadUrl=function(e,t){var n,r,o,i;return t?(n=e.indexOf("?")+1,i=e.substr(0,n),r=e.substr(n),o=D.parse(r),""+i+D.stringify(j.extend(o,t))):e},t.prototype.downloadWork=function(){return null!=this.handleDownload?this.handleDownload(this.versionModel.toJSON()):w.downloadWork(this.versionModel)},t.prototype.onCreateSkitch=function(e,t){var n,r,o,i,s,a;return r=e.coordinate,n=e.content,i=null!=(s=e.mentions)?s:[],B.gta.event({action:"comment",control:"Skitch Box",method:t?"keyboard":"click",category:"self"}),o={},j.each(i,function(e){return o[e.id]=e.name}),new Promise((a=this,function(e,t){return a.versionModel.createSkitch({attrs:{coordinate:r,content:n,mentions:o,skitchType:"rectangle"},success:e,error:t})}))},t.prototype.onReplySkitch=function(e,t){var n,r,o,i,s,a;return n=e.content,s=e.skitchId,o=null!=(i=e.mentions)?i:[],B.gta.event({action:"comment",control:"Skitch Box",method:t?"keyboard":"click",category:o.length>0?"others":"self"}),r={},j.each(o,function(e){return r[e.id]=e.name}),new Promise((a=this,function(e,t){return a.versionModel.replySkitch(s,{attrs:{content:n,mentions:r},success:e,error:t})}))},t.prototype.canDeleteSkitch=function(e){var t,n;return(null!=(n=null!=(t=this.skitchesCollection)?t.find(function(t){return e===t.id}):void 0)?n.get("_creatorId"):void 0)===B.user.id||this.workModel.hasPermission("put")},t.prototype.saveClickPoint=function(e){var t;return t=this.fullscreen?0:56,this._zoomCenter={coordX:e.coordX,coordY:e.coordY,clientX:e.clientX-42,clientY:e.clientY-t-20}},t.prototype.renderImagePreviewer=function(e){var t,n;if(this.el&&this.domReady&&this.canvasSplitter.arr.length>0)return this.previewerMounted=!0,this.requestReactView(this.$preview[0],f,{uuid:this.viewId,canvasSplitter:this.canvasSplitter,src:this.imgSrc,imageLoader:this.imageLoader,skitches:(null!=(t=this.skitchesCollection)?t.toJSON():void 0)||[],activities:this.getCurrentVersionActivities(),creatorActivities:this.creatorActivitiesCollection.toJSON(),canCommentSkitch:this.canCommentSkitch,canDeleteSkitch:this.canDeleteSkitch.bind(this),setCenter:this.setCenter.bind(this),saveContainerSize:this.saveContainerSize.bind(this),saveCenter:this.saveCenter.bind(this),onCreateSkitch:this.onCreateSkitch.bind(this),onReplySkitch:this.onReplySkitch.bind(this),onSkitchCreatorFakeSubmit:this.onSkitchCreatorFakeSubmit.bind(this),onSkitchCreatorFakeClear:(n=this,function(){return n.creatorActivitiesCollection.reset()}),onEditComment:this.onEditComment.bind(this),onDeleteComment:this.onDeleteComment.bind(this),onDeleteSkitch:this.onDeleteSkitch.bind(this),saveClickPoint:this.saveClickPoint.bind(this),getContainerSize:function(e){return function(){return{width:e.containerWidth,height:e.containerHeight}}}(this)},{redux:!0}),this.renderToolbar()},t.prototype.renderToolbar=function(){var e,t;return this.toolbarMounted=!0,this.requestReactView(this.$previewerToolbar[0],_(this.viewId),{fullscreen:this.fullscreen,showSkitchHandler:(null!=(e=this.skitchesCollection)?e.length:void 0)>0,imageSrc:this.imgSrc,onToggleFullscreen:(t=this,function(){if(B.gta.event({action:"fullscreen",type:"picture",control:"toolbar"}),F.enabled)return t.fullscreen=!t.fullscreen,F.toggle(t.el),t.setFullscreen()})},{redux:!0})},t.prototype.onSkitchCreatorFakeSubmit=function(e,t){var n,r,o;return r=e.content,o=(new Date).toISOString(),n=new s({_id:o,created:o,comment:r,creator:B.user.toJSON(),action:this.creatorActivitiesCollection.length>0?"activity.work.reply.skitch":"activity.work.create.skitch"}),this.creatorActivitiesCollection.add(n),Promise.resolve()},t.prototype.onEditComment=function(e){var t,n,r;return(t=this.activityCollection.get(e))||(n=!0,t=this.creatorActivitiesCollection.get(e)),B.gta.event({action:"edit comment"}),(r=this.requestSubView(y,{width:520,title:tb_i18n.get("activity.editor.title"),modalClass:"activity-editor-modal-view"})).$el.on("mousedown",function(e){return e.stopPropagation(),e.stopImmediatePropagation()}),r.open(u,{fake:n,activityModel:t,onSuccess:function(){return B.gta.event({action:"edited comment"})}}),this},t.prototype.onDeleteSkitch=function(e,t){var n,r;return null==t&&(t=!1),n=t?"First Comment":"Right Button",B.gta.event({action:"delete comment",control:n}),this.requestSubView(l,{title:tb_i18n.get("skitch.destroyer.delete"),description:tb_i18n.get("skitch.destroyer.confirm.delete"),onConfirm:(r=this,function(){return B.gta.event({action:"deleted comment",control:n}),"fake"===e?r.creatorActivitiesCollection.reset():r.versionModel.removeSkitch(e)})}).$el.on("mousedown",function(e){return e.stopPropagation(),e.stopImmediatePropagation()}),this},t.prototype.onDeleteComment=function(e){var t,n,r;return(t=this.activityCollection.get(e))||(n=!0),B.gta.event({action:"delete comment"}),this.requestSubView(l,{title:tb_i18n.get("activity.destroyer.delete"),description:tb_i18n.get("activity.destroyer.confirm.delete"),onConfirm:(r=this,function(){return n?r.creatorActivitiesCollection.remove(e):t.destroy({success:function(){return B.gta.event({action:"deleted comment"}),S.success(tb_i18n.get("activity.destroyer.delete.success"))},error:function(e){return S.error(tb_i18n.get("activity.destroyer.delete.fail"))}})})}).$el.on("mousedown",function(e){return e.stopPropagation(),e.stopImmediatePropagation()}),this},t.prototype.getCurrentVersionActivities=function(){if(!this.inChat)return this.activityCollection.filter((e=this,function(t){var n;return(null!=(n=t.get("content"))?n.relatedVersionId:void 0)===e.versionModel.id})).map(function(e){return e.toJSON()});var e},t.prototype.canvasImage=function(e,t){var n;if(e)return this.imgSrc=e.fileKey?t:e.thumbnailUrl,this.loadSubscription=this.imageLoader.fetchImage(this.imgSrc,{withOrientation:!0}).catch((n=this,function(){if(n.el)return n.renderFile(e)})).subscribe(function(e){return function(t){var n,r;if(n=t.image,r=t.orientation,e.el)return e.canvasSplitter.split(n,r),e.renderImagePreviewer()}}(this))},t.prototype.renderAnimatedImage=function(e){return this.loadSubscription=this.imageLoader.fetchImage(e).catch((t=this,function(){if(t.el)return t.renderFallback()})).subscribe(function(e){return function(t){var n;if(n=t.image,e.el)return e.removePreviewer(),e.$preview.html(n)}}(this));var t},t.prototype.renderPDF=function(){var e,t,n,r;return t=(n=this.versionModel.toJSON()).previewUrl,(e=n.immPreviewUrl)?(this.removePreviewer(),this.$preview.html(m({src:e}))):this.pdfViewer=new k({pdfUrl:t,staticHost:P.PDF_VIEWER_URL,onerror:(r=this,function(){return r.renderFallback(tb_i18n.get("previewer.file.translateFail"))})}).embed(this.$preview[0])},t.prototype.renderImage=function(){var e,t,n;return e=this.versionModel.toJSON(),t=e.previewUrl,~C.indexOf(e.fileType)?this.convertFile(t).then((n=this,function(){return n.canvasImage(e,t)})):this.canvasImage(e,t),this},t.prototype.renderVideo=function(e){var t,n;return t=T.loadVideo(e,(n=this,function(e,r,o){var i;return e&&n.renderFallback(),n.mediaItem=null,i=$(t),n.removePreviewer(),n.$preview.html(i)})),this.mediaItem=t},t.prototype.renderAudio=function(e){var t,n;return t=T.loadAudio(e,(n=this,function(e,r){return e&&n.renderFallback(),n.mediaItem=null,n.removePreviewer(),n.$preview.html($(t))})),this.mediaItem=t},t.prototype.renderOffice=function(){var e;return e=this.versionModel.toJSON().downloadUrl,this.indexModel.get("officePreviewerEnabled")?(this.removePreviewer(),this.$preview.html(m({src:N(e)}))):this.renderPDF()},t.prototype.renderFile=function(e,t){var n,r,o,i,s,a,c,l;return s=this.canDownload||this.inChat,this.removePreviewer(),this.$fileViewer=this.$preview.html(M({download:s,fallTitle:t})),a=j.escape(e.fileName),n=this.$fileViewer.find(".deleted-info").hide(),o=this.$fileViewer.find(".work-thumbnail"),i=this.$fileViewer.find(".work-title"),e.isDeleted?(n.show(),r.hide(),o.hide(),void i.hide()):(l=e.fileType,/link/.test(e.fileCategory)&&(l="link"),this.$fileViewer.find(".work-title").html(l).addClass(e.fileType),this.$fileViewer.find(".work-name").html(a),r=this.$fileViewer.find(".previewer-download-link"),c="link"===l?tb_i18n.get("previewer.open.link"):tb_i18n.get("previewer.download.file")+" <span>("+T.formatFileSize(e.fileSize||0)+")</span>",r.html(c),this)},t.prototype.renderText=function(e,t){var n,r,o,i,s;return s=this,o=function(n){var r;if(s.$preview)return t[e]=n,r=$("<code></code>").text(n),d.highlightBlock(r[0]),s.removePreviewer(),s.$preview.html($("<pre></pre>").append(r))},t[e]?o(t[e]):(r=-1!==e.indexOf(x()),i=this.getDownloadUrl(e,{notRedirect:!0}),n={"text script":!0,"text json":!0,"text xml":!0},r?h.ajax({url:e,converters:n,success:o}):h.get(i,{silentError:!1}).then(function(e){var t;return t=null!=(t=e.location)?t.replace(/\?download=[^&]+&/,"?"):void 0,h.ajax({url:t,converters:n,success:o})})),this},t.prototype.renderFallback=function(e){var t;return t=this.versionModel.toJSON(),this.renderFile(t,e)},t.prototype.renderContent=function(){var e,t,n;if(this.renderLoading(),n=(e=this.versionModel.toJSON()).previewUrl,t=e.downloadUrl,"text"===this.type&&t)return this.renderText(t,this.versionModel);if(!n)return this.renderFallback();switch(this.type){case"office":return this.renderOffice();case"animate":return this.renderAnimatedImage(n);case"image":return this.renderImage();case"pdf":return this.renderPDF();case"video":return this.renderVideo(n);case"audio":return this.renderAudio(n);default:return this.renderFallback()}},t.prototype.renderLoading=function(e){return this.removePreviewer(),this.$preview.html(g({description:e}))},t.prototype.renderUpdate=function(){var e;return(e=this.contentStatusModel.get("percentage"))>0&&e<100?this.$previewerUpdater.html(E({percent:e})).css("display","flex"):this.$previewerUpdater.hide()},t.prototype.removePreviewer=function(){if(this.previewerMounted&&this.$preview[0])return this.unmountReact(this.$preview[0]),this.previewerMounted=!1},t.prototype.removeToolbar=function(){if(this.toolbarMounted&&this.$previewerToolbar[0])return this.unmountReact(this.$previewerToolbar[0]),this.toolbarMounted=!1},t.prototype.render=function(){return this.$el.html(a({type:this.type})),this.$preview=this.$(".preview"),this.$previewerToolbar=this.$(".previewer-toolbar-wrapper"),this.$previewerUpdater=this.$(".previewer-updater-wrapper").hide(),this.renderContent(),this},t.prototype.remove=function(){var e,n,r;return r=this.viewId,null!=(e=this.loadSubscription)&&e.unsubscribe(),null!=(n=this.pdfViewer)&&n.destroy(),p.remove("previewerFullscreen_"+this.cid),t.__super__.remove.apply(this,arguments),U(r)},t}()},"WwBiRI+a":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("RQ44psah"),i=n("sa1Ed382"),s=n("q1tIBJhx"),a=n.n(s),c=n("2qRnoGmE"),l=n.n(c),u=n("tLZJUYWX"),p=n.n(u),d=n("s0r7VfKc"),h=n("GESwhXbR"),m=n("5F8+bCnl"),f=n("Ym7btH8E"),g=n.n(f),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClose=function(){i.router.home(),t.props.onClose&&t.props.onClose()},t.handleUpgrade=function(){var e=t.props.organization._id,n=o.pay.orgUpgrade(e);window.open(n)},t.handleDisable=function(){return r.b(t,void 0,void 0,function(){var e,t,n,o,i,s,a,c;return r.e(this,function(r){switch(r.label){case 0:e=this.props,t=e.organization,n=e.feature,o=t._id,i=n._consumerId,s="organizations/"+o+"/addedApps/"+i,a={},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,d.default.fetch.put(s,a,{apiHost:l.a.HOST+"/appstore/api"}).toPromise()];case 2:return r.sent(),this.props.onDisable&&this.props.onDisable(i),this.handleClose(),h.Toast.success(p.a.get("app.disable.success",n.name)),[3,4];case 3:return c=r.sent(),h.Toast.error({message:p.a.get("app.disable.failure",n.name),description:c&&c.message}),[3,4];case 4:return[2]}})})},t}return r.d(t,e),t.prototype.render=function(){var e=this.props.organization,t=Object(m.a)(e);return a.a.createElement(h.Modal,{title:p.a.get("organization.pro.overdue"),defaultOpened:!0,onHide:this.handleClose,className:g.a["organization-upgrade-native-plugin"],zIndex:100},a.a.createElement("div",{className:"organization-upgrade-native-plugin__content"},this.renderText(t),this.renderButton(t)))},t.prototype.renderText=function(e){return e?a.a.createElement("p",null,p.a.get("organization.pro.overdue.desc")):a.a.createElement("p",null,p.a.get("organization.pro.overdue.desc.call"))},t.prototype.renderButton=function(e){return e?a.a.createElement(a.a.Fragment,null,a.a.createElement(h.Button,{onClick:this.handleUpgrade,className:"organization-upgrade-native-plugin__button"},p.a.get("organization.payment.buy")),a.a.createElement(h.Button,{type:"secondary",onClick:this.handleDisable,className:"organization-upgrade-native-plugin__button"},p.a.get("app.disable"))):a.a.createElement(h.Button,{onClick:this.handleClose,className:"organization-upgrade-native-plugin__button"},p.a.get("confirm"))},t}(a.a.PureComponent),b=n("OmupbwLD"),y=n.n(b),k=n("80gYlwjC"),_=n("i8i4LrFt"),w=n("CZnMppOW"),C=n("9mq3Zayu"),S=function(e,t){i.APP.requestSubView(y.a).open(C,{projectModel:e,trigger:!1,onSuccess:t})},E=function(e){return!Object(w.verifyProjectPayment)(e.toJSON())},T=function(e,t){switch(e){case"organization/okr":return!k.OrganizationPayment.create(t.plan).isProfessional;default:return!1}},I=function(e,t){var n=document.createElement("div"),o=r.a({},t,{onClose:function(){return Object(_.unmountComponentAtNode)(n)}});Object(_.render)(a.a.createElement(e,r.a({},o)),n)},M=function(e){I(P,{project:e.toJSON(),getProjectModel:function(){return e}})},j=function(e,t,n){I(v,{organization:e,feature:t,onDisable:n})},P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClose=function(){i.router.home(),t.props.onClose&&t.props.onClose()},t.handleUpgrade=function(){var e=t.props.project._organizationId;if(e){var n=o.pay.orgUpgrade(e);window.open(n)}},t.handleSuspendProject=function(){var e=(0,t.props.getProjectModel)();e&&S(e,t.handleClose)},t}return r.d(t,e),t.prototype.render=function(){var e=this.props.project,t=Object(m.b)(e);return a.a.createElement(h.Modal,{title:p.a.get("organization.pro.overdue"),defaultOpened:!0,onHide:this.handleClose,className:g.a["organization-upgrade-project"],zIndex:100},a.a.createElement("div",{className:"organization-upgrade-project__content"},this.renderText(t),this.renderButton(t,e.isSuspended)))},t.prototype.renderText=function(e){return e?a.a.createElement("p",null,p.a.get("organization.pro.overdue.desc")):a.a.createElement("p",null,p.a.get("organization.pro.overdue.desc.call"))},t.prototype.renderSuspendButton=function(e){return e?null:a.a.createElement(h.Button,{type:"secondary",danger:!0,onClick:this.handleSuspendProject,className:"organization-upgrade-project__button"},p.a.get("project.setting.handler.suspend"))},t.prototype.renderButton=function(e,t){return e?a.a.createElement(a.a.Fragment,null,a.a.createElement(h.Button,{onClick:this.handleUpgrade,className:"organization-upgrade-project__button"},p.a.get("organization.payment.buy")),this.renderSuspendButton(t)):a.a.createElement(h.Button,{onClick:this.handleClose,className:"organization-upgrade-project__button"},p.a.get("confirm"))},t}(a.a.PureComponent);n.d(t,"OrganizationUpgradeNativePlugin",function(){return v}),n.d(t,"OrganizationUpgradeProject",function(){return P}),n.d(t,"openProjectSuspendModel",function(){return S}),n.d(t,"projectUpgradeRequired",function(){return E}),n.d(t,"nativePluginUpgradeRequired",function(){return T}),n.d(t,"mountAndUnmountOnClose",function(){return I}),n.d(t,"openOrganizationUpgradeProjectModal",function(){return M}),n.d(t,"openOrganizationUpgradeNativePluginModal",function(){return j})},"X+PHI6PH":function(e,t,n){e.exports=n.p+"images/o_feiji@2x.073b5ff0.png"},"X/61m4FI":function(e,t,n){var r,o,i={}.hasOwnProperty;o=n("vmWJWrVe"),n("5VAUxBWw"),r=n("r0PDwOFs").TaskUpdatePriority,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName=t,t.prototype.className="task-priority-view",t.prototype.initialize=function(e){return this.priority=e.priority,this.onClickPriority=e.onClickPriority,this.render()},t.prototype.render=function(){return this.requestReactView(this.el,r,{priority:this.priority,onClickPriority:this.onClickPriority.bind(this)})},t}()},X3k3syqx:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b={}.hasOwnProperty,y=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};d=n("a+N5u/Cl"),p=n("vmWJWrVe"),h=n("2qRnoGmE"),u=n("3eMzznN/"),g=n("sa1Ed382"),o=n("bZr3G77e"),f=n("s0r7VfKc").default,r=n("2ivs9lcN"),i=n("odY26VIi"),a=n("85182E8g"),l=n("QSzw2VcL"),m=n("90U+kJWN").resolveUserId,c=n("Tyo/9bte"),s=n("ZkhtbhGT"),v=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)b.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.viewName="AtHandlerView",t.prototype.className="at-handler-view",t.prototype.initialize=function(e){return this._projectId=e._projectId,this.objectModel=e.objectModel,this._organizationId=e._organizationId,this.$textareaset=e.$textareaset,this.projectModel=e.projectModel,this.mentionsList=e.mentionsList,this.boundToObjectType=e.boundToObjectType,this.isShared=e.isShared,this.renderNotifTip=e.renderNotifTip,this.addLocalCache=e.addLocalCache,this.addSelectLink=e.addSelectLink,this.showAtTips=e.showAtTips,this.filterAtList=e.filterAtList,this.indieMode=e.indieMode,this.isVisibleMemberMenu=!!this.filterAtList,this.filterAtList=this.filterAtList||function(){return!0},this.organizationsCollection=a.get(0),u.promiseChain((t=this,function(){return!t.el}))(function(e){return function(){return e.initAtList()}}(this),function(e){return function(){return e.listen()}}(this),function(e){return function(){return e.renderSymbol()}}(this)).catch(function(e){return v(e)});var t},t.prototype.initAtList=function(){if(!this.indieMode)return Promise.all([this.fetchProjectMembers(),this.fetchOrganizationMembers(),this.fetchTeams(),this.fetchGroups(),this.fetchGuestMembers()])},t.prototype.fetchProjectMembers=function(){return Promise.all([new Promise((e=this,function(t,n){return o.get("v2/projects/"+e._projectId+"/members",{data:{withTeamInfo:!0},expireCache:{namespace:"project_members_fullTeamsInfo_"+e._projectId,expire:60},success:t,error:n})})),i.fetch$(this._projectId,{boundToObjectType:"project"}).toPromise()]).then(function(e){return function(t){var n,r,o,i;return r=t[0],o=t[1],e.projectMembers=r,e.projectMembersCollection=o,i=e.objectModel.get("involveMembers"),n=function(e){var t;return t=e._userId,y.call(i,t)>=0},e.allInvolveMembers=e.projectMembers.filter(n)}}(this));var e},t.prototype.fetchOrganizationMembers=function(){return this.canFetchOrganizationMembers()?new Promise((e=this,function(t,n){return o.get("organizations/"+e._organizationId+"/members",{data:{withTeamInfo:!0},expireCache:{namespace:"organization_members_fullTeamsInfo_"+e._organizationId,expire:60},success:t,error:n})})).then(function(e){return function(t){return e.organizationsMembers=t}}(this)):(this.organizationsMembers=[],Promise.resolve());var e},t.prototype.fetchTeams=function(){return this.canFetchTeamsOrGroups()?new Promise((e=this,function(t,n){return l.fetchT(e._projectId,{boundToObjectType:"project"})(function(r,o){return r?n():(e.teamsCollection=o||new l,t())})})):Promise.resolve();var e},t.prototype.fetchGroups=function(){return this.canFetchTeamsOrGroups()?new Promise((e=this,function(t,n){return r.fetch(e._projectId,{boundToObjectType:"project",success:function(n){return e.groupsCollection=n,t()},error:function(e,t){return n(t)}})})):Promise.resolve();var e},t.prototype.fetchGuestMembers=function(){return this.isShared?"task"===this.boundToObjectType?f.fetch.get("tasks/"+this.objectModel.id+"/guests",null,{apiHost:h.SHARE_HOST+"/api"}).toPromise().then((e=this,function(t){var n;return n=t.result,e.guestMembers=n})):o.get(this.boundToObjectType+"s/"+this.objectModel.id+"/guestmembers").then(function(e){return function(t){return e.guestMembers=t}}(this)):(this.guestMembers=[],Promise.resolve());var e},t.prototype.listen=function(){var e;return this.indieMode?this.listenTo(this.objectModel,"change:involvers",(e=this,function(t){return e.updateSymbol()})):this.listenTo(this.objectModel,"change:involveMembers",function(e){return function(t){var n;return n=t.get("involveMembers"),e.allInvolveMembers=e.projectMembers.filter(function(e){return n.indexOf(e._userId)>=0}),d.each(e.mentionsList,function(t){if("all"===t.type)return t.hasMembers=e.allInvolveMembers}),e.updateSymbol()}}(this)),this.listenTo(this.projectMembersCollection,"add destroy remove",function(e){return function(t){return e.projectMembersCollection.has(t)?(e.projectMembers.push(t.toJSON()),e.organizationMembers&&(e.organizationMembers=e.organizationMembers.filter(function(e){return t.get("_userId")!==e._userId}))):e.projectMembers=e.projectMembers.filter(function(e){return t.get("_userId")!==e._userId}),e.updateSymbol()}}(this)),this.listenTo(this.teamsCollection,"add destroy remove",this.updateSymbol),this.listenTo(this.groupsCollection,"add destroy remove",this.updateSymbol)},t.prototype.renderSymbol=function(){return this.initSymbol(),this.updateNotifTip()},t.prototype.updateSymbol=function(){var e,t;return e=this.getSymbolMembersData(),null!=(t=this.symbolPopoverView)&&t.updateMembersData(e),this.updateNotifTip()},t.prototype.updateNotifTip=function(){var e;return e=this.getMentions(),this.renderNotifTip(e)},t.prototype.getSymbolMembersData=function(){var e,t,n,r,o;return this.indieMode?{visibleMembers:e=(this.objectModel.get("involvers")||[]).filter(function(e){return e._id!==g.user.id})}:(n=(e=this.assembleAtList()).projectMembers,r=n.map(function(e){return e._userId}),t=e.organizationMembers.filter(function(e){return r.indexOf(e._userId)<0}),this.isVisibleMemberMenu&&(o=n.concat(t),n=[],t=[]),{projectMembers:n,organizationMembers:t,visibleMembers:o,guestMembers:e.guestMembers})},t.prototype.initSymbol=function(){return this.symbolPopoverView=this.requestSubView(c,{$inputor:this.$textareaset,at:"@",hash:"#",fixed:!0,_id:this.objectModel.id,membersData:this.getSymbolMembersData(),select:(e=this,function(t,n,r){switch(r){case"#":return e.selectLink(t,n);case"@":return e.selectAt(t,n)}})});var e},t.prototype.selectLink=function(e,t){return t=d.extend({hash:"#"},t),this.addSelectLink(t)},t.prototype.selectAt=function(e,t){return this.mentionsList.push(t),this.addLocalCache({mentionsList:this.mentionsList})},t.prototype.assembleAtList=function(){var e,t,n,r,o,i;return o=this.projectMembers.filter((i=this,function(e){return e._userId!==g.user.id&&!e.isDisabled&&i.filterAtList(e)})),r=this.projectMembers.map(function(e){return e._userId}),t=this.organizationsMembers.filter(function(e){return function(t){return t._userId!==g.user.id&&!t.isDisabled&&r.indexOf(t._userId)<0&&e.filterAtList(t)}}(this)),n=d.flatten([this._assembleAllMentions(),this._assembleTeams(),this._assembleGroups(),o]),e=this.guestMembers.filter(function(e){var t;return(t=e._id)!==g.user.id&&!n.find(function(e){return e._userId===t})}),{projectMembers:n,organizationMembers:t,guestMembers:e}},t.prototype._assembleAllMentions=function(){return[{_id:this.projectModel.get("_id"),type:"all",pinyin:"all",py:"all",name:tb_i18n.get("at.list.all.involved"),hasMembers:this.allInvolveMembers}]},t.prototype._assembleTeams=function(){var e,t;return this.teamsCollection?(e=this.teamsCollection.filter((t=this,function(e){return"default"!==e.get("type")&&!(e.get("membersCount")<=0)&&(!t.isVisibleMemberMenu||d.all(d.map(e.get("hasMembers"),function(e){return t.filterAtList(e)})))})).map(this.assignTeamAttributes),d.sortBy(e,"pos")):[]},t.prototype._assembleGroups=function(){return this.groupsCollection?this.groupsCollection.filter((e=this,function(t){return!(t.get("membersCount")<=0)&&(!e.isVisibleMemberMenu||d.all(d.map(t.get("hasMembers"),function(t){return e.filterAtList(t)})))})).map(function(e){var t;return(t=e.toJSON()).hasMembers=d.filter(t.hasMembers,function(e){return!e.isDisabled}),t.membersCount=t.hasMembers.length,Object.assign(t,{type:"group"})}):[];var e},t.prototype.assignTeamAttributes=function(e){var t;return(t=e.toJSON()).hasMembers=d.filter(t.hasMembers,function(e){return!e.isDisabled}),t.membersCount=t.hasMembers.length,Object.assign(t,{styleName:t.style.split(",")[0],styleColor:t.style.split(",")[1],belongsTo:s.getTeamBelongsTo(t),type:"team"})},t.prototype.isOrganizationMember=function(){var e;return!(!this.organizationsCollection||!this.projectModel)&&(null!=(e=this.organizationsCollection.get(this._organizationId))?e.getRoleScope():void 0)>=0},t.prototype.isProjectMember=function(){return this.projectModel.getRoleScope()>=0},t.prototype.canFetchOrganizationMembers=function(){return this.projectModel&&this._organizationId&&this.isProjectMember()&&this.isOrganizationMember()&&("all"===this.projectModel.get("visibility")||"organization"===this.projectModel.get("visibility"))},t.prototype.canFetchTeamsOrGroups=function(){return this.projectModel&&this.isProjectMember()&&this._organizationId},t.prototype.checkActivityTips=function(e){var t,n,r,o,i,s,a,c,l,u,p;return n=d.pluck(this.guestMembers,"_id"),u=d.pluck(this.projectMembers,"_userId"),c=d.pluck(this.organizationsMembers,"_userId"),a=d.keys(d.pick(e,c)),l=d.keys(d.pick(e,u)),r=d.keys(d.omit(e,n)),i=d.keys(d.omit(e,l)),o=d.keys(d.omit(e,this.objectModel.get("involveMembers"))),this.isProjectMember()&&this.isOrganizationMember()&&(s=d.intersection(a,r,i),t=d.pick(e,function(e,t){return d.contains(s,t)}),this.showNotProjectMember(t)),p=this.objectModel.hasPermission("put.involvers"),this.isProjectMember&&p&&(s=d.intersection(o,l,r),t=d.pick(e,function(e,t){return d.contains(s,t)}),this.objectModel.get("involveMembers").indexOf(g.user.id)>=0||(t[g.user.id]=g.user.get("name")),this.showNotInvolvedTip(t)),this},t.prototype.showNotInvolvedTip=function(e){var t;return t={tipType:"involve",memberList:e},this.showAtTips(t)},t.prototype.showNotProjectMember=function(e){var t;return t={tipType:"member",memberList:e},this.showAtTips(t)},t.prototype.confirmCurrentMentions=function(){var e,t,n,r,o,i;if(this.indieMode)return this.getMentions();for(t=0,n=(o=this.mentionsList).length;t<n;t++)switch((r=o[t]).type){case"all":r.hasMembers=this.allInvolveMembers,this.setAtGta("all followers");break;case"team":i=this.teamsCollection.get(r._id).toJSON().hasMembers,r.hasMembers=d.filter(i,function(e){return!e.isDisabled}),this.setAtGta("team");break;case"group":e=this.groupsCollection.get(r._id).toJSON().hasMembers,r.hasMembers=d.filter(e,function(e){return!e.isDisabled}),this.setAtGta("group");break;default:this.projectMembers.map(function(e){return e._userId}).indexOf(r._userId)>=0?this.setAtGta("project members"):this.setAtGta("non-project members")}return this.getMentions()},t.prototype.getMentions=function(){var e,t,n,r,o,i;for(e=this.$textareaset.val(),o={},t=0,n=(i=this.mentionsList).length;t<n;t++)r=i[t],e.indexOf("@"+r.name)<0?this.mentionsList=d.without(this.mentionsList,r):["all","team","group"].indexOf(r.type)>=0?d.each(r.hasMembers,function(e){return o[m(e)]=e.name}):o[m(r)]=r.name;return delete o[g.user.id],o},t.prototype.addGuestMember=function(e){if(!(this.guestMembers.map(function(e){return e._id}).indexOf(e._id)>=0))return this.guestMembers.push(e),this.updateSymbol()},t.prototype.setAtGta=function(e){return this.gtaHandler({action:"at "+e})},t.prototype.gtaHandler=function(e){return"task"===this.objectModel.get("objectType")&&(e=d.extend({type:this.objectModel.isSubtask()?"subtask":"task",series:this.objectModel.get("ancestorIds").length},e)),g.gta.event(e)},t}()},"X3uQOh/O":function(e,t,n){e.exports={"advanced-fields-wrapper":"advanced-fields-wrapper__bvoX","text-button":"text-button__1amo","item-content":"item-content__iXiE","advanced-field-selector":"advanced-field-selector__Ex8u","advanced-field-modal":"advanced-field-modal__1E-Y"}},X6Jh2VN1:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""});return'<div class="modal-content"> <header class="modal-header"> <h4 class="modal-title">'+tb_i18n.get("portal.suspend.project.title")+'</h4> <a class="modal-close pull-right icon icon-remove" data-dismiss="modal"></a> </header> <div class="modal-body"> <p>'+r(tb_i18n.get("portal.suspend.project.description",e.projectName))+'</p> </div> <div class="modal-footer"> <button class="confirm-handler btn btn-danger btn-block">'+tb_i18n.get("portal.suspend.project.confirm")+"</button> </div></div>"}},"X7+VPM8x":function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("a+N5u/Cl"),r=n("GR5KG0nr"),o=n("vmWJWrVe"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="confirmView",t.prototype.className="confirm-modal modal fade in",t.prototype.hotkeys={esc:function(e){return e.preventDefault(),this.hide()}},t.prototype.events={"click .cancel-handler":"cancel","click .confirm-handler":"confirm"},t.prototype.initialize=function(e){return this.options=i.extend({title:"",description:"",cancel:tb_i18n.get("cancel"),confirm:tb_i18n.get("confirm"),onCancel:function(){},onConfirm:function(){}},e),this.render().show(),this},t.prototype.render=function(){return this.$el.html(r(this.options)),this},t.prototype.show=function(){return this.$el.appendTo("body"),this.$backdrop=$("<div></div>").addClass("confirm-modal-backdrop fade").insertBefore(this.$el),i.delay((e=this,function(){return e.$backdrop.addClass("in")}));var e},t.prototype.hide=function(){var e,t,n;return null!=(e=this.$el)&&e.removeClass("in"),null!=(t=this.$backdrop)&&t.removeClass("in"),i.delay((n=this,function(){if(n.$el)return n.$backdrop.remove(),n.remove()}),350)},t.prototype.cancel=function(){return this.options.onCancel(),this.hide()},t.prototype.confirm=function(){return this.options.onConfirm(),this.hide()},t.prototype.remove=function(){var e;return null!=(e=this.$backdrop)&&e.remove(),t.__super__.remove.apply(this,arguments)},t}()},XADCubXo:function(e,t,n){},XBCwffYw:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("TSYQbtd+"),a=n.n(s),c=n("a+N5u/Cl"),l=n("GESwhXbR"),u=n("PVLVtUMG"),p=n("fVL/a9Qu"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onClickStatus(t.props.status._id)},t}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.status,n=e.isChosen;return o.createElement("li",{className:p["menu-item"],key:t._id,onClick:this.onClick},o.createElement("span",{className:"menu-item-status"},o.createElement(u.StatusLabel,{kind:t.kind,size:"middle",title:t.name})),n&&o.createElement(l.Icon,{name:"tick"}))},t}(o.PureComponent),h=n("oRPyOBnq");n("LjypM3NI");n.d(t,"ConfigComponent",function(){return f});var m=n("fVL/a9Qu"),f=function(e){function t(t){var n=e.call(this,t)||this;n.setPopupMenuRef=function(e){n.popupMenuRef=e},n.onOpenDropdown=function(){n.props.gtaHandler("toggle type list")},n.onSave=function(){var e=n.state.chosenConfig;n.popupMenuRef.close(),e&&(n.props.gtaHandler("switched type"),n.props.onSave(e))},n.onConfirmStatus=function(){var e=n.state,t=e.chosenConfig,r=e.chosenStatusId,o=n.props.onUpdateStatus;o&&t&&r&&o(t._id,r),n.popupMenuRef.close()},n.onChosenConfig=function(e){var t=n.props.showStatuses?c.findWhere(e.taskflowstatuses,{kind:"start"}):null,r=t?t._id:null;n.setState({chosenConfig:e,chosenStatusId:r}),n.props.gtaHandler("switch type")},n.onClickStatus=function(e){n.setState({chosenStatusId:e})};var r=t.scenarioFieldConfig,o=null;if(t.showStatuses){var i=c.findWhere(r.taskflowstatuses,{kind:"start"});o=i?i._id:null}return n.state={chosenConfig:null,chosenStatusId:o},n}return r.d(t,e),t.prototype.renderMenuLink=function(e){return o.createElement(l.PopupMenuLink,{key:e._id,goto:1,className:"config-menu-link"},this.renderMenu(e))},t.prototype.renderMenu=function(e,t){return o.createElement(h.FieldConfigMenuItem,{key:e._id,isChosen:!!t,onClickConfig:this.onChosenConfig,config:e,boundToObjectType:this.props.boundToObjectType})},t.prototype.renderMainMenu=function(){var e=this,t=this.props,n=t.scenarioFieldConfig,r=t.scenarioFieldConfigs.map(function(t){return t._id===n._id?e.renderMenu(t,!0):e.renderMenuLink(t)}),s="task"===this.props.boundToObjectType?i.get("task.creator.fieldConfig.add.config"):i.get("event.creator.fieldConfig.add.config"),a=m["menu-item"]+" add-menu-item",c=this.props.hasEditConfigPermission&&o.createElement("div",{className:a,onClick:this.props.onRequestConfigView},o.createElement(l.Icon,{name:"circle-plus-o"}),s);return o.createElement("div",{className:"menu-items-wrapper thin-scroll"},c,r)},t.prototype.renderConfirmMenu=function(e){return o.createElement("div",{className:"config-confirm-menu"},o.createElement("p",null,e),o.createElement(l.Button,{onClick:this.onSave},i.get("confirm")))},t.prototype.renderStatuses=function(){var e=this,t=this.state.chosenConfig;if(!t||!t.taskflowstatuses)return null;var n=this.props.acceptedStatusKinds,r=void 0===n?[]:n;return t.taskflowstatuses.map(function(t){return-1===r.indexOf(t.kind)?null:o.createElement(d,{key:t._id,status:t,onClickStatus:e.onClickStatus,isChosen:e.state.chosenStatusId===t._id})})},t.prototype.renderStatusesMenu=function(e){return o.createElement("div",{className:"status-menu-wrapper"},o.createElement("div",{className:"menu-items-wrapper thin-scroll"},this.renderStatuses()),o.createElement(l.Separator,null),o.createElement("p",null,e),o.createElement("div",{className:"button-wrapper"},o.createElement(l.Button,{onClick:this.onConfirmStatus},i.get("confirm"))))},t.prototype.renderSubView=function(e){return this.props.showStatuses?this.renderStatusesMenu(e):this.renderConfirmMenu(e)},t.prototype.renderContent=function(){var e=this.props,t=e.scenarioFieldConfig,n=e.boundToObjectType,r=e.hasPermission,i=e.readonly,s=e.showArrowHint,c=a()("details-scenario-config",{"has-permission":r,readonly:i});return o.createElement("div",{className:c},o.createElement(h.FieldIcon,{icon:t.icon,type:n}),o.createElement("span",{className:"field-config-name"},t.name),s&&o.createElement(l.Icon,{name:"chevron-down"}))},t.prototype.renderPopupContent=function(){var e=this.renderContent(),t=this.props.popupNested,n=void 0===t||t,r=this.getText();return o.createElement(l.PopupMenu,{className:"scenario-field-config-popup",titleCls:"config-title",ref:this.setPopupMenuRef,placement:"bottomLeft",nested:n,main:0,trigger:e,onOpen:this.onOpenDropdown},o.createElement(l.PopupMenuView,{className:"popup-menu",index:0,title:r.title},this.renderMainMenu()),o.createElement(l.PopupMenuView,{className:"popup-menu",index:1,title:r.confirmTitle},this.renderSubView(r.confirmText)))},t.prototype.getText=function(){return this.props.showStatuses?{title:i.get("task.fieldConfig.title"),confirmTitle:i.get("task.fieldConfig.status.confirm.title"),confirmText:i.get("task.fieldConfig.status.confirm.text")}:"task"===this.props.boundToObjectType?{title:i.get("task.fieldConfig.title"),confirmTitle:i.get("task.fieldConfig.confirm.title"),confirmText:i.get("task.fieldConfig.confirm.text")}:{title:i.get("event.fieldConfig.title"),confirmTitle:i.get("event.fieldConfig.confirm.title"),confirmText:i.get("event.fieldConfig.confirm.text")}},t.prototype.render=function(){return this.props.hasPermission&&!this.props.readonly?this.renderPopupContent():this.renderContent()},t}(o.PureComponent)},XBjHwBNh:function(e,t,n){e.exports=n.p+"images/h_ruo@2x.9ed6ac20.png"},XG2lpVOM:function(e,t,n){e.exports={"member-involve":"member-involve__1WLQ","member-involve-header":"member-involve-header__2BEY","member-avatar":"member-avatar__2bZu","add-handler":"add-handler__2UK1","remove-member-handler":"remove-member-handler__2H1C","remove-icon":"remove-icon__1Rh_","member-ellipsis-mask":"member-ellipsis-mask__hX2_",placeholder:"placeholder__1h0U"}},XHxZqXzL:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR"),l=n("gZW7ExDf"),u=n.n(l),p=function(e){var t=e.title,n=e.active,o=e.readonly,s=r.g(e,["title","active","readonly"]),l=a()(e.className,u.a["subtle-text-button"],{active:n,readonly:o}),p=o||s.disabled?void 0:s.onClick,d=i.a.createElement("button",r.a({},s,{className:l,onClick:p}),s.children);return t?i.a.createElement(c.Tooltip,{title:t},d):d};n.d(t,"a",function(){return p})},XOfK16tK:function(e,t,n){"use strict";n.r(t);var r,o=n("mrSGxOB2"),i=n("RQ44psah"),s=n("sa1Ed382"),a=n("q1tIBJhx"),c=n.n(a),l=n("TSYQbtd+"),u=n.n(l),p=n("tLZJUYWX"),d=n.n(p),h=n("M1/vCJUu"),m=n("dBz1uT71"),f=n("GESwhXbR"),g=n("80gYlwjC"),v=function(e){return{subscription:e.source,trial:e}},b=function(e){return function(t){var n=v(t),r=n.subscription,o=n.trial;return e(r,o)}};!function(e){e[e.Expired=0]="Expired",e[e.NewNormal=1]="NewNormal",e[e.NewWillExpireSoon=2]="NewWillExpireSoon",e[e.NormalAndTrialNormal=3]="NormalAndTrialNormal",e[e.NormalAndTrialWillExpireSoon=4]="NormalAndTrialWillExpireSoon",e[e.WillExpireSoonAndTrial=5]="WillExpireSoonAndTrial",e[e.WillExpireSoon=6]="WillExpireSoon"}(r||(r={}));var y=new g.Machine("@@ROOT");y.rule("@@ROOT",function(e){return e.isExpired},r.Expired,"NEW_OR_PAID").rule("NEW_OR_PAID",function(e){return!e.isPaid},"NEW","PAID").rule("NEW",function(e){return e.willExpireSoon},r.NewWillExpireSoon,r.NewNormal).rule("PAID",b(function(e){return e.willExpireSoon}),"WILL_EXPIRE_SOON","NORMAL").rule("WILL_EXPIRE_SOON",function(e){return e.isTrial},r.WillExpireSoonAndTrial,r.WillExpireSoon).rule("NORMAL",b(function(e,t){return t.willExpireVerySoon}),r.NormalAndTrialWillExpireSoon,r.NormalAndTrialNormal);var k=n("5F8+bCnl"),_=n("k9cQFvct"),w=n.n(_),C=n("CxY0Mkc1"),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){if(!Object(k.a)(this.props.organization))return null;var e=this.assemble();if(!e)return null;var t=e.notice,n=e.critical,r=e.handlers,o=u()(w.a["organization-payment-banner"],{danger:n});return c.a.createElement("div",{className:o},c.a.createElement("div",{className:"organization-payment-banner__content"},c.a.createElement("span",null,t),this.renderHandlerList(r)),c.a.createElement(f.Icon,{name:"remove",className:"organization-payment-banner__close",onClick:this.props.onClose}))},t.prototype.assemble=function(){var e=this.props.organization,t=g.OrganizationPayment.create(e.plan),n=v(t),a=n.subscription,c=n.trial,l=[],u=[];switch(t.canGetProfessionalTrial&&u.push({text:d.a.get("organization.trail.pro.get"),onClick:function(){Object(m.a)(t,{state:h.a.ProTrial,onSuccess:function(){s.gta.event({action:"upgrade enterprise pro",type:"organization",control:"Top Plan Tips",category:"enterprise pro",segment:"Org"}),setTimeout(function(){var t=C.format({pathname:location.origin+"/organization/"+e._id,query:{isNew:!0,templateScene:"orgPro"}});window.location.assign(t)},2e3)}})}}),y.transition(t)){case r.Expired:case r.NewNormal:case r.NormalAndTrialNormal:return null;case r.NewWillExpireSoon:return l.push({text:d.a.get("organization.trail.payment.buy"),link:c.isProfessional?i.pay.orgNewPro(e._id):i.pay.orgNew(e._id)}),{notice:d.a.get("organization.trail.dueday.planTips",c.countdown),critical:c.willExpireVerySoon,handlers:o.h(l,u)};case r.NormalAndTrialWillExpireSoon:return c.isProfessional?(l.push(a.isOld?{text:d.a.get("upgrade"),onClick:function(){Object(m.a)(t,{state:h.a.Old})}}:{text:d.a.get("upgrade"),link:i.pay.orgUpgrade(e._id)}),{notice:d.a.get("organization.trail.dueday.planTips.pro",c.countdown),critical:!1,handlers:o.h(l,u)}):null;case r.WillExpireSoonAndTrial:return l.push({text:d.a.get("organization.pro.dueday.renew"),link:i.pay.orgRenew(e._id)}),{notice:d.a.get("organization.pro.dueday.planTips.trial",a.countdown),critical:a.willExpireVerySoon,handlers:o.h(l,u)};case r.WillExpireSoon:return l.push({text:d.a.get("organization.pro.dueday.renew"),link:i.pay.orgRenew(e._id)}),u.push({text:d.a.get("learn.more"),link:i.payHelp.renewHelp}),{notice:d.a.get("organization.pro.dueday.planTips",a.countdown),critical:a.willExpireVerySoon,handlers:o.h(l,u)}}},t.prototype.renderHandlerList=function(e){return e.map(function(e,t){var n=u()(e.className,"organization-payment-banner__handler");return c.a.createElement("a",{key:t,className:n,href:e.link,target:"_blank","data-gta":{action:"enter payment page",control:"Top Plan Tips"},onClick:e.onClick},e.text)})},t}(c.a.PureComponent);n.d(t,"OrganizationPaymentBanner",function(){return S})},XRLNALej:function(e,t,n){e.exports={"team-projects":"team-projects__noen",item:"item__3a4c","item-avatar":"item-avatar__NNKe","item-title":"item-title__CnzS",placeholder:"placeholder__3ftC","team-project-remove":"team-project-remove__xyvN","team-project-add-modal-title":"team-project-add-modal-title__BUxW","team-project-add-wrapper":"team-project-add-wrapper__3AZC","team-project-input":"team-project-input__1bhK","team-projects-list":"team-projects-list__Kz2c","placeholder-no-search-content":"placeholder-no-search-content__3yUR"}},XTNJ8f1i:function(e,t,n){e.exports=n.p+"images/d_bishi@2x.ef899bed.png"},XYc95B52:function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty;l=n("a+N5u/Cl"),r=n("YdqH4v7N"),c=n("vmWJWrVe"),o=n("SkVs4iz6"),a=n("LU3fW/qa"),s=n("PhHT4GjU"),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,c),t.prototype.viewName="TagAsideView",t.prototype.className="tags-aside-view",t.prototype.events={"click .tag-item:not(.active)":"switchHandler"},t.prototype.initialize=function(e){return this.activeModel=e.activeModel,this.tagsCollection=e.tagsCollection,this.tagCategoriesCollection=e.tagCategoriesCollection,this.organizationTagsCollection=e.organizationTagsCollection,this.listen(),this.render(),this.renderTags(),this.organizationTagsCollection&&this.renderTagGroupList(),this.setupScroll(this.$el)},t.prototype.listen=function(){return this.listenTo(this.activeModel,"change:activeId",function(e){if(this.$el.find(".tag-item").removeClass("active"),e.id===this.activeModel.get("activeId"))return this.$el.find(".tag-item[data-id="+e.id+"]").addClass("active")}),this.listenTo(this.tagsCollection,"add",function(e){return this.setActiveTagId(e.id)}),this.listenTo(this.tagsCollection,"remove destroy",function(e){if(this.activeModel.get("activeId")===e.id)return this.setActiveTagId()}),this.listenTo(this.organizationTagsCollection,"remove destroy",function(e){if(this.activeModel.get("activeId")===e.id)return this.setActiveTagId()})},t.prototype.slideToActive=function(){var e,t;if(t=this.activeModel.get("activeId"))return e=this.$(".tag-item[data-id="+t+"]"),"function"==typeof this.slideTo?this.slideTo(e):void 0},t.prototype.setActiveTagId=function(e){return this.activeModel.set("activeId",e||null)},t.prototype.switchHandler=function(e){return this.setActiveTagId($(e.currentTarget).data("id"))},t.prototype.renderTags=function(){return this.$(".tag-list-wrapper").html(this.requestSubView(a,{tagsCollection:this.tagsCollection}).$el)},t.prototype.renderTagGroupList=function(){return this.$(".tag-group-list-wrapper").html(this.requestSubView(s,{tagCategoriesCollection:this.tagCategoriesCollection,tagsCollection:this.organizationTagsCollection}).$el)},t.prototype.render=function(){return this.$el.html(o())},t}(),l.extend(i.prototype,r),e.exports=i},XaxnYknK:function(e,t,n){e.exports=n.p+"images/d_yun@2x.2584982b.png"},XbrdCDrd:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h={}.hasOwnProperty;u=n("sa1Ed382"),r=n("vmWJWrVe"),s=n("u79IRQJM"),l=n("w2WS5sq3"),d=n("2YVBljVg"),c=n("RUL1qgth"),a=c.parseNativeUrl,o=c.appForWhat,i=c.composeTargetUrl,p=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)h.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="NailPluginView",t.prototype.className="nail-plugin-view",t.prototype.initialize=function(e){return this.pluginModel=e.pluginModel,this.data=e.data,this.onPluginHandle=e.onPluginHandle,this.view=e.view,this.render(),this.listen(this.pluginModel)},t.prototype.listen=function(e){return this.listenTo(e,"change",this.render)},t.prototype.render=function(){return p("This method must be override")},t.prototype.handle=function(e,t){var n;switch("function"==typeof this.onPluginHandle&&this.onPluginHandle(),n=this.translateUrl(e,t),e.mode){case"native":return this.handleNative(n,e,t);case"iframe":return this.handleIframe(n,e,t);case"modal":case"fullscreen":return this.handleModal(n,e,t);case"redirect":return this.handleRedirect(n,e,t);case"api":return this.handleAPI(n,e,t)}},t.prototype.handleNative=function(e,t,n){var r,s,c;if(c=a(e))return Object.assign(c,{type:o(t.type),id:n._id}),(s=i(c))&&(c.query.redirect?this.handleRedirect(s,t,n):"organization/members"!==(r=c.target)&&"organization/dashboard"!==r&&this.navigateTo(s)),this.track(c)},t.prototype.handleIframe=function(e,t,n){return s.open(e,t.name)},t.prototype.handleModal=function(e,t,n){return s.open(e,t.name)},t.prototype.handleRedirect=function(e,t,n){return window.open(e)},t.prototype.handleAPI=function(e,t,n){return l.get(e)},t.prototype.translateUrl=function(e,t){return d.replaceMark(e.url,t)},t.prototype.navigateTo=function(e){return u.router.navigate(e,{trigger:!0})},t.prototype.track=function(e){var t;if(t=this.composeGtaEvent(e))return u.gta.event(t)},t.prototype.composeGtaEvent=function(e){switch(e.type){case"organization":return this.composeOrgGtaEvent(e);default:return null}},t.prototype.composeOrgGtaEvent=function(e){var t;return{action:"Enter org "+({analytics:"analysis",dashboard:"dashboards",administration:"admin"}[t=e.target]||t)}},t}()},"Xdk/lFVN":function(e,t,n){e.exports={"scrollbar-broadened":"scrollbar-broadened__1qFn","scrollbar-vert-container":"scrollbar-vert-container__jY2j","scrollbar-horz-container":"scrollbar-horz-container__1nZE","scrollbar-vert-handler":"scrollbar-vert-handler__2r-u","scrollbar-horz-handler":"scrollbar-horz-handler__3-73"}},"XezW+rbT":function(e,t,n){"use strict";var r=n("drbC6CFn");n.d(t,"CommentItem",function(){return r.a});var o=n("pjThbXDB");n.d(t,"CommentCreator",function(){return o.a});n("98JeEM7J")},XhpHwZVN:function(e,t,n){"use strict";n.r(t);var r=n("q1tIBJhx"),o=n("TSYQbtd+"),i=n.n(o),s=n("7kYIQESD"),a=n("ytDAhr3u"),c=["task","event","post","entry"],l={task:"board",event:"calendar",post:"wall",entry:"normal"},u=function(e){return e.thumbnail||e.thumbnailUrl?function(e){var t={backgroundImage:"url("+(e.thumbnail||e.thumbnailUrl)+")"};return r.createElement("span",{className:"work-icon image-icon",style:t})}(e):c.indexOf(e.fileType)>-1?function(e){var t,n=l[e.fileType]?l[e.fileType]:e.fileType,o=i()("icon",((t={})["icon-"+n]=!0,t));return r.createElement("span",{className:"work-icon","data-icon-type":"app"},r.createElement("span",{className:o}))}(e):function(e){return r.createElement(s.FileIcon,{className:"work-icon",type:e.fileType})}(e)},p=function(e){var t,n;e&&(t=e.color||"blue",n=e.colorRGBA);var o={fill:a.calculateColor(t,n)},i=e&&("involves"===e.visible||"parent"===e.lockedConfigurabilityBy)?"folderLock":"folder";return r.createElement(s.FileIcon,{className:"work-icon",style:o,type:i})};n.d(t,"WorkIcon",function(){return u}),n.d(t,"CollectionIcon",function(){return p}),n("ic8UdoHl")},Xl5LV30a:function(e,t,n){e.exports=n.p+"images/h_ye@2x.869451d3.png"},XsmuAFxo:function(e,t,n){"use strict";var r,o,i=n("mrSGxOB2"),s=n("q1tIBJhx"),a=n.n(s),c=n("tLZJUYWX"),l=n.n(c),u=n("TSYQbtd+"),p=n.n(u),d=n("LvDlAkAJ"),h=n("50927W45"),m=n("GESwhXbR"),f=n("DWJahcmN"),g=n("XhpHwZVN"),v=n("3LGsbOqB"),b=n("zH+Yaocm"),y=n("3eMzznN/"),k=n("P4reLC2o"),_=function(e){var t;return(t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.onSelectItem=function(){var t=e.props,n=t._id;(0,t.onSelectItem)(n)},e}return i.d(n,t),n.prototype.shouldComponentUpdate=function(e){return!Object(d.isEqual)(e,this.props)},n.prototype.renderCheckbox=function(){var e=this.props,t=e._id,n=e.isDone,r=e.parent,o=e._taskflowstatusId,i=e.subtaskCount,s=e.onUpdateItem;return void 0===i||void 0===r?null:this.props.archived?a.a.createElement(m.Todobox,{className:k["check-box-disabled"],size:"small",disabled:!0,checked:this.props.isDone}):a.a.createElement(f.TaskCheckBox,{taskId:t,taskflowStatusId:o,isDone:!!n,hasPermission:!0,subtaskCount:i,parent:r,size:"small",onChangeSuccess:s})},n.prototype.renderPicture=function(t){if(!t)return null;var n=this.props.showDetails;switch(t.type){case"icon":return n&&e===h.a.Task?this.renderCheckbox():t.iconName?a.a.createElement(m.Icon,{className:"panel-icon",name:t.iconName,size:t.size}):null;case"img":return t.src?"normal"===t.shape?a.a.createElement("img",{className:"img",src:t.src}):a.a.createElement(m.Avatar,{className:"img-avatar",size:"small",shape:t.shape,src:t.src}):null;case"thumbnail":return a.a.createElement(g.WorkIcon,{thumbnail:t.thumbnailUrl,fileCategory:t.fileCategory,fileType:t.fileType,thumbnailUrl:t.thumbnailUrl})}},n.prototype.renderNamePrefix=function(){if(!this.props.showNamePrefix)return null;switch(e){case h.a.Task:var t=this.props.raw;return t?a.a.createElement(b.TaskStatusLabel,{className:"item-name-prefix",task:t,fixedWidth:!0,readOnly:!0}):null;default:return null}},n.prototype.renderNameSuffix=function(){switch(e){case h.a.User:return-1===this.props.role?a.a.createElement(m.Icon,{className:k["icon-external-suffix"],name:"external-member"}):null;default:return null}},n.prototype.renderArchivedBadge=function(e){return e?a.a.createElement("div",{className:"archived-badge"},a.a.createElement(m.Icon,{className:"archived-icon",name:"trash",size:12}),a.a.createElement("span",{className:"archived-tips"},l.a.get("search.archived"))):null},n.prototype.renderSuspendedBadge=function(e){return e?a.a.createElement("div",{className:"suspended-badge"},a.a.createElement(m.Icon,{className:"suspended-icon",name:"archive",size:12}),a.a.createElement("span",{className:"suspended-tips"},l.a.get("search.suspended"))):null},n.prototype.renderPrevTaskIdBadge=function(e){return e?a.a.createElement("div",{className:"prev-task-id-badge"},a.a.createElement(m.Icon,{className:"prev-task-id-icon",name:"task-id",size:12}),a.a.createElement("span",{className:"prev-task-id-tips"},l.a.get("task.id.previous"),e)):null},n.prototype.renderDescription=function(e){if(!e)return null;var t=e.taskId?a.a.createElement("div",{className:"desc-info task-id-info"},a.a.createElement(m.Icon,{className:"panel-icon",name:"task-id",size:14}),a.a.createElement("span",{className:"info-text"},e.taskId)):null,n=e.projectName?a.a.createElement("div",{className:"desc-info project-info"},a.a.createElement(m.Icon,{className:"panel-icon",name:"project",size:14}),a.a.createElement("span",{className:"info-text"},e.projectName)):null;return a.a.createElement("div",{className:"item-description"},t,this.renderDateLabel(),n,this.renderExecutor(e.executorName,e.executorImage))},n.prototype.renderContent=function(t,n){if(!t)return null;var r=p()("item-detail",e,{"has-name-prefix":n}),o=null;switch(t.type){case"file":o=a.a.createElement("span",{className:"file-detail"},this.renderPicture(t.previewImage));break;case"text":o=a.a.createElement("span",{className:"text-detail"},t.content);break;case"entry":var i=t.content,s=i.amount,c=i.isIncome,l=c?"+":"-",u=p()("entry-desc",{"is-income":c});o=a.a.createElement("span",{className:u},l+" "+s);break;case"user":o=a.a.createElement("span",{className:"text-detail"},t.content)}return a.a.createElement("div",{className:r},o)},n.prototype.renderExecutor=function(e,t){return a.a.createElement(a.a.Fragment,null,this.renderPicture(t),!!e&&a.a.createElement("span",{className:"info-text-name"},e))},n.prototype.renderDateLabel=function(){var t=this.props,n=t.showDetails,r=t.date,o=t.isDone,i=t.accomplished;if(n&&"task"===e){if(o&&i){var s=y.formatDate(i,{inShort:!1}).dateString;return a.a.createElement("time",null,l.a.get("task.list.accomplished.datestring",s))}return a.a.createElement(v.a,{solid:!1,startDate:r.startDate,dueDate:r.endDate})}return null},n.prototype.render=function(){var t=this.props,n=t.suspended,r=t.archived,o=t.prevTaskId,i=t.description,s=t.detail,c=t.mainImage,l=t.name,u=this.renderNamePrefix(),d=p()("item-badge-wrap",e,{"has-name-prefix":!!u});return a.a.createElement("div",{className:"panel-item",onClick:this.onSelectItem},a.a.createElement("div",{className:"item-title"},a.a.createElement("div",{className:"main-img-wrap"},this.renderPicture(c)),a.a.createElement("div",{className:"item-name-wrap"},u,a.a.createElement("div",{className:"item-name"},l),this.renderNameSuffix()),this.renderDescription(i)),this.renderContent(s,Boolean(u)),a.a.createElement("div",{className:d},this.renderSuspendedBadge(n),this.renderArchivedBadge(r),this.renderPrevTaskIdBadge(o)))},n}(a.a.Component)).displayName="ResultItem "+e,t};(o=r||(r={})).Event=_(h.a.Event),o.Post=_(h.a.Post),o.Project=_(h.a.Project),o.Task=_(h.a.Task),o.User=_(h.a.User),o.Work=_(h.a.Work),o.Collection=_(h.a.Collection),o.Entry=_(h.a.Entry),n.d(t,"a",function(){return r})},XvMdZhz5:function(e,t,n){var r;r=n("q1z7EYOi"),e.exports=Object.create(r.Events)},XwTZsc6U:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("sa1Ed382"),a=n("GESwhXbR"),c=n("TSYQbtd+"),l=n.n(c),u=n("ay2Xcmrs"),p=n("tTk6JCgl"),d=function(e){function t(t){var n=e.call(this,t)||this;return n.checkValid=function(){return n.state.name.trim().length<=u.b},n.checkDisabled=function(){return!n.checkValid()||!(!n.props.name||!n.props.name.length||n.props.name!==n.state.name)},n.onChange=function(e){n.setState({name:e.target.value})},n.onSubmit=function(){n.props.onSubmit({name:n.state.name.trim()})},n.onPressEnter=function(){n.checkDisabled()||n.props.onSubmit({name:n.state.name.trim()})},n.state={name:n.props.name||""},n}return r.d(t,e),t.prototype.renderErrorMessage=function(){return!this.checkValid()&&o.createElement("p",{className:p["info-error-message"]},o.createElement(a.Icon,{name:"circle-remove"}),i.get("testgroup.creator.title.error",u.b))},t.prototype.render=function(){var e,t=l()(p["info-input"],"form-control",((e={})[p["info-input-error"]]=this.checkValid(),e));return o.createElement("div",{className:p.info},o.createElement(a.Input,{autoFocus:!0,value:this.state.name,onChange:this.onChange,className:t,onPressEnter:this.onPressEnter,placeholder:i.get("testgroup.creator.title.placeholder")}),this.renderErrorMessage(),o.createElement(a.Button,{disabled:this.checkDisabled(),onClick:this.onSubmit,className:p["info-submit"]},this.props.submitText))},t}(o.PureComponent),h=function(e){function t(t){var n=e.call(this,t)||this;return n.onDelete=function(){n.props.onDelete({isDeleteCase:"delete"===n.state.value})},n.onChange=function(e){n.setState({value:e.target.value})},n.state={value:"move"},n}return r.d(t,e),t.prototype.renderRadioGroup=function(){return o.createElement(a.RadioGroup,{value:this.state.value,onChange:this.onChange,className:p["double-check-radiogroup"]},o.createElement(a.Radio,{value:"move",className:p.radio},i.get(this.props.env+".group.doublecheck.option.move")),o.createElement(a.Radio,{value:"delete",className:p.radio},i.get(this.props.env+".group.doublecheck.option.delete")))},t.prototype.render=function(){return o.createElement("div",{className:p["double-check"]},o.createElement("p",null,i.get("testgroup.doublecheck.message",this.props.usercaseCount)),this.renderRadioGroup(),o.createElement(a.Button,{danger:!0,onClick:this.onDelete,className:p["double-check-submit"]},i.get("testgroup.doublecheck.submit")))},t}(o.PureComponent),m={control:"More Menu",type:"testcase group"},f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refPopupMenu=function(e){t.popupMenu=e},t.onEdit=function(e){t.props.onEdit(t.props.testgroup._id,e),t.popupMenu.close()},t.onDelete=function(e){t.props.onDelete(t.props.testgroup._id,e),t.popupMenu.close()},t.onDirectDelete=function(){t.onDelete({isDeleteCase:!1})},t.openObjectPicker=function(){t.popupMenu.close(),t.props.openObjectPicker&&t.props.openObjectPicker(t.props.testgroup._id)},t.openCopyModal=function(){t.popupMenu.close(),t.props.openCopyModal&&t.props.openCopyModal(t.props.testgroup._id),t.handleCopyGta()},t.openMoveModal=function(){t.popupMenu.close(),t.props.openMoveModal&&t.props.openMoveModal(t.props.testgroup._id),t.handleMoveGta()},t}return r.d(t,e),t.prototype.hasSomePermission=function(){return this.props.canEdit||this.props.canDelete||this.props.canLink},t.prototype.handleCopyGta=function(){s.gta.event(r.a({},m,{action:"add content"}))},t.prototype.handleMoveGta=function(){s.gta.event(r.a({},m,{action:"move content"}))},t.prototype.handleEditGta=function(){s.gta.event(r.a({},m,{action:"edit content"}))},t.prototype.handleDeleteGta=function(){s.gta.event(r.a({},m,{action:"delete content"}))},t.prototype.renderDeleteConfirm=function(){return o.createElement(a.PopupMenuView,{index:3,title:i.get("testgroup.editor.delete.title")},o.createElement(h,{env:this.props.env,usercaseCount:this.props.testgroup.resourceCount,onDelete:this.onDelete}))},t.prototype.renderDelete=function(){return o.createElement(a.PopupMenuView,{index:2,title:i.get("testgroup.editor.delete.title")},o.createElement("div",{className:p.delete},o.createElement("p",{className:p["delete-message"]},i.get("testgroup.editor.delete.message")),o.createElement(a.Button,{danger:!0,className:p["delete-submit"],onClick:this.onDirectDelete},i.get("testgroup.editor.delete.submit"))))},t.prototype.renderEditor=function(){return o.createElement(a.PopupMenuView,{index:1,title:i.get("testgroup.editor.edit.title")},o.createElement(d,{name:this.props.testgroup.name,onSubmit:this.onEdit,submitText:i.get("testgroup.editor.save")}))},t.prototype.renderLinkItem=function(){return"testplan"===this.props.env&&this.props.canLink&&o.createElement(a.MenuItem,{className:p["menu-item"],onClick:this.openObjectPicker},o.createElement(a.Icon,{name:"link3"}),i.get("testplan.plan.link"))},t.prototype.renderEditItem=function(){return this.props.canEdit&&o.createElement(a.PopupMenuLink,{goto:1},o.createElement(a.MenuItem,{className:p["menu-item"],onClick:this.handleEditGta},o.createElement(a.Icon,{name:"pencil"}),i.get("testgroup.menu.edit")))},t.prototype.renderCopyItem=function(){return this.props.canCopy&&o.createElement(a.MenuItem,{className:p["menu-item"],onClick:this.openCopyModal},o.createElement(a.Icon,{name:"copy"}),i.get("testgroup.menu.copy"))},t.prototype.renderMoveItem=function(){return"testplan"===this.props.env&&this.props.canMove&&o.createElement(a.MenuItem,{className:p["menu-item"],onClick:this.openMoveModal},o.createElement(a.Icon,{name:"move-task"}),i.get("testgroup.menu.move"))},t.prototype.renderDeleteItem=function(){var e=this.props.testgroup.resourceCount>0?3:2;return this.props.canDelete&&o.createElement(a.PopupMenuLink,{goto:e},o.createElement(a.MenuItem,{className:p["menu-item"],onClick:this.handleDeleteGta},o.createElement(a.Icon,{name:"trash"}),i.get("testgroup.menu.delete")))},t.prototype.renderMenu=function(){return o.createElement(a.PopupMenuView,{index:0,title:i.get("testgroup.editor.title"),className:p["menu-wrapper"]},o.createElement(a.Menu,{className:p.menu},this.renderLinkItem(),this.renderEditItem(),this.renderCopyItem(),this.renderMoveItem(),this.renderDeleteItem()))},t.prototype.render=function(){return this.hasSomePermission?o.createElement(a.PopupMenu,{ref:this.refPopupMenu,trigger:this.props.trigger,nested:this.props.nested,onOpen:this.props.onOpen,main:0},this.renderMenu(),this.renderEditor(),this.renderDelete(),this.renderDeleteConfirm()):null},t}(o.PureComponent);n.d(t,"b",function(){return f}),n.d(t,"a",function(){return d})},"Y0Lul/he":function(e,t){e.exports=function(e){return'<form class="delete-form"> <p>'+tb_i18n.get("previewer.menu.confirm.delete")+'</p> <button class="btn btn-danger" type="submit">'+tb_i18n.get("delete")+"</button></form>"}},Y5VZwSuJ:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=function(e){function t(t){var n=e.call(this,t)||this;return n.onImageLoad=function(e){n.revokeBlobURL(),n.props.onLoad&&n.props.onLoad(e)},n.onImageError=function(e){n.revokeBlobURL(),n.props.onError&&n.props.onError(e)},n.state={blobURL:""},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.createBlobURL()},t.prototype.UNSAFE_componentWillUpdate=function(e){this.props.blob!==e.blob&&this.createBlobURL(e)},t.prototype.componentWillUnmount=function(){this.revokeBlobURL()},t.prototype.createBlobURL=function(e){void 0===e&&(e=this.props),this.revokeBlobURL(),this.setState({blobURL:URL.createObjectURL(e.blob)})},t.prototype.revokeBlobURL=function(){URL.revokeObjectURL(this.state.blobURL)},t.prototype.render=function(){var e=this.state.blobURL,t=this.props,n=(t.blob,r.g(t,["blob"]));return e?o.createElement("img",r.a({},n,{src:e,onLoad:this.onImageLoad,onError:this.onImageError})):o.createElement("img",r.a({},n))},t}(o.PureComponent),s=function(e){function t(t){var n=e.call(this,t)||this;return n.onImageLoad=function(e){var t=n.props,r=t.loader,o=t.onLoad;r.revokeBlobURL(n.state.blobURL),o&&o(e)},n.onImageError=function(e){var t=n.props,r=t.loader,o=t.onError;r.revokeBlobURL(n.state.blobURL),o&&o(e)},n.subscription=null,n.state={blobURL:""},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.loadImage(this.props)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this.props,n=t.src,r=t.loader;n===e.src&&r===e.loader||(this.stopLoading(),this.loadImage(e))},t.prototype.componentWillUnmount=function(){this.stopLoading()},t.prototype.loadImage=function(e){var t=this;this.state.blobURL&&e.loader.revokeBlobURL(this.state.blobURL),this.subscription=e.loader.fetchBlobURL(e.src).subscribe(function(e){var n=e.blobURL;t.setState({blobURL:n})})},t.prototype.stopLoading=function(){this.props.loader.revokeBlobURL(this.state.blobURL),this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)},t.prototype.render=function(){var e=this.state.blobURL,t=this.props,n=(t.loader,r.g(t,["loader"]));return e?o.createElement("img",r.a({},n,{src:e,onLoad:this.onImageLoad,onError:this.onImageError})):o.createElement("img",r.a({},n))},t}(o.PureComponent);n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s})},Y7i3EItP:function(e,t,n){e.exports=n.p+"images/d_zhutou@2x.41e95b75.png"},Y9CdjF8l:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<div class="jinshuju-forms-detail"> <p class="text-hint">'+e.createDateDes+'</p> <p class="text-hint">'+e.formStatusDes+'</p> <div class="body"> <p class="text-hint">'+tb_i18n.get("jinshuju.form.detail.header")+'</p> <ul class="forms"> ',i=e.typesData;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=' <li class="form flex flex-vstart"> <a class="check-box jinshuju ',(s=i[a+=1]).isClosed&&(o+="closed"),o+='" data-type="'+s.tb_type+'"> <span class="icon icon-tick"></span> </a> <div class="flex-space"> <header>'+r(s.title)+" ",!s.isClosed&&s.url&&(o+=' <a href="'+r(s.url)+'" target="_blank" class="view-url"> '+tb_i18n.get("view")+"</a> "),o+=' </header> <p class="text-hint">'+(s.isClosed?s.closedHint:s.hint)+"</p> ","detail"===s.tb_type&&(o+=' <div class="search-input-wrapper hide flex flex-vcenter"> <input type="text" class="form-control detail-search flex-space" placeholder="'+tb_i18n.get("jinshuju.detail.search.placeholder")+'"> <a class="search-btn">'+tb_i18n.get("search")+'</a> </div> <div class="detail-search-wrapper"></div> '),o+=" </div> </li> ";return o+=" </ul> </div></div>"}},"YADA1w+/":function(e,t,n){e.exports={handler:"handler__3dee","clear-input":"clear-input__1ckY","no-result-placeholder":"no-result-placeholder__1X1s","search-wrap":"search-wrap__LfN6","search-input":"search-input__2F4v","search-icon":"search-icon__1eLf"}},YByE0VpC:function(e,t,n){"use strict";n.d(t,"d",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return p}),n.d(t,"f",function(){return d}),n.d(t,"g",function(){return h}),n.d(t,"b",function(){return m});var r=n("mrSGxOB2"),o=n("a+N5u/Cl"),i=n("nDsjpj50"),s=n("sa1Ed382"),a=n("BzGHEctR"),c=function(e,t){void 0===t&&(t=void 0);var n=s.PREFERENCE.get("tips").labs||{};return e?n[e]||t:n},l=function(e,t){var n,o=s.PREFERENCE.url()+"/tips",i=s.PREFERENCE.get("tips"),a=r.a({},i.labs,((n={})[e]=t,n));s.PREFERENCE.save({tips:r.a({},i,{labs:a})},{url:o})},u=new i.BehaviorSubject(!1),p=function(){var e,t,n=Array.from(a.labs.onlineTests),i=(""+c("checkedtests",[])).split(";"),s=!1;try{for(var l=r.i(i),p=l.next();!p.done;p=l.next()){var d=p.value,h=/(.+?):(.+?)/.exec(d);if(h){var m=r.f(h,3),f=m[1],g=m[2],v=o.findWhere(n,{abtestName:f});if(v&&(n.splice(n.indexOf(v),1),"TBD"===g&&v.downTime&&"TBD"!==v.downTime)){s=!0;break}}}}catch(b){e={error:b}}finally{try{p&&!p.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}return u.next(s||0!==n.length),s||0!==n.length},d=function(){var e=a.labs.onlineTests.reduce(function(e,t){return""+e+t.abtestName+":"+(t.downTime||"TBD")+";"},"");l("checkedtests",e),u.next(!1)},h=function(){var e=a.labs.onlineTests;l("checkedObds",o.pluck(e,"abtestName").join(";"))},m=function(){var e=a.labs.onlineTests,t=(""+c("checkedObds","")).split(";"),n=o.chain(e).filter(function(e){return e.useOnboarding}).map(function(e){return e.abtestName}).difference(t).sample().value();return o.findWhere(e,{abtestName:n})}},YD9eiOcr:function(e,t){e.exports=function(e){return'<li class="my-tasks-group" data-id="'+e._id+'"> <ul class="group-list my-list"></ul></li>'}},YFL2W2Hw:function(e,t){e.exports=function(e){var t='<div class="tag-aside detail-infos-aside ';return e.simplifiedVersion&&(t+=" short-version "),t+='"> <span class="icon icon-tag"></span> ',e.simplifiedVersion||(t+=' <span class="tag-title">'+tb_i18n.get("tags")+"</span> "),t+='</div><div class="tags-list detail-infos-content flex-fill"></div>'}},YGplC0C3:function(e,t,n){e.exports={"project-cluster-configure":"project-cluster-configure__3X3T","project-cluster-configure__dropdown":"project-cluster-configure__dropdown__Be4N","project-cluster-configure-dropdown-add":"project-cluster-configure-dropdown-add__1QUq","project-cluster-configure-dropdown-menu":"project-cluster-configure-dropdown-menu__1kXB"}},YNuMcZdd:function(e,t,n){e.exports={title:"title__xuPg",body:"body__yrjU",content:"content__3ta8",footer:"footer__3qWF","reUpload-wrap":"reUpload-wrap__qLrq",reUpload:"reUpload__tWOy","steps-section":"steps-section__3fIb","steps-section-icon":"steps-section-icon__d2gc","steps-section-content":"steps-section-content__DaIz","content-title":"content-title__396I","content-subtitle":"content-subtitle__2_k5","file-container":"file-container__Mtcd","file-name":"file-name__irCv","file-name-icon":"file-name-icon__3lGb","file-status":"file-status__1vXu","file-status-icon":"file-status-icon__2xOt","update-file":"update-file__3vh6","file-update-icon":"file-update-icon__3S8n","parse-success":"parse-success__1voX","parse-success-icon":"parse-success-icon__-KLy","parse-error":"parse-error__1BYO","parse-error-icon":"parse-error-icon__lqyB","error-table":"error-table__PRvo","button-wrapper":"button-wrapper__3po_"}},YONqUBBZ:function(e,t,n){e.exports=function(e){var t,r,o="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),i="",s=n("QFl7Q1qw").invisibleNode;if(i+="<header> "+o(e.title)+"</header>",e.visibles.length>0){i+="<ul> ";var a=e.visibles;if(a)for(var c,l=-1,u=a.length-1;l<u;){i+=' <li class="link" data-id="'+(c=a[l+=1])._id+'" data-linkedid="'+c._linkedId+'"> <div class="link-head">  ',"collection"===c.linkedType?i+=' <div class="react-file-icon link-icon-wrap" data-type="folder"></div> ':i+=' <div class="react-file-icon link-icon-wrap" data-type="'+c.data.fileType+'"></div> ',i+=' <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main"> ';var p=c.data.title||c.data.fileName;if(i+=' <span class="title-name" title="'+o(p)+'"> '+o(p)+" </span> </div> ",c.data.project){i+=" ";var d=c.data.project.name;i+=' <div class="link-title-header-rest" title="'+o(d)+'"> '+o(d)+" </div> "}i+=' </div> </div> </div> <a class="link-menu-handler icon icon-chevron-down" data-id="'+c._id+'"></a> </li> '}i+="</ul>"}return i+=""+s(e)}},YPgjEQB8:function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;c=n("sa1Ed382"),r=n("GESwhXbR").Toast,n("70UrrKBP").Uploader,o=n("vmWJWrVe"),s=n("S/weIEx5"),i=n("OmupbwLD"),a=n("o4N9kv/m"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="WorkUploaderGlobalView",t.prototype.initialize=function(e){return this.options=e,this.createUploader()},t.prototype.createUploader=function(){var e,t;return null!=(e=this.workUploaderView)&&e.remove(),this.workUploaderView=this.requestSubView(a,Object.assign({auto:!1,isBackground:!0,onQueued:(t=this,function(e,n){var r;if(null==(r=t.workCreatorView)||!r.$el)return t.showWorkCreator(n.collection)})},this.options))},t.prototype.showWorkCreator=function(e){return this.options.isWorkspace&&!c.APP.getGlobalUploaderTargetInfo().projectModel?r.error(tb_i18n.get("uploader.no.target")):this.workCreatorView=this.requestSubView(i).open(s,{worksCollection:e,gta_from:this.options.gta_from,isWorkspace:this.options.isWorkspace,success:(t=this,function(){return t.workUploaderView.uploader.uploadQueue(),t.workCreatorView.remove()}),close:function(e){return function(){return e.createUploader()}}(this)});var t},t}()},"YQWS+4rz":function(e,t,n){e.exports={"gray-banner":"gray-banner__3Hbr"}},YR0BrVIr:function(e,t,n){"use strict";n.r(t);var r=n("IssmDVnT"),o=n("wd/RKGTj"),i=n.n(o);t.default=function(e,t){void 0===t&&(t=i()().startOf("day").toISOString());var n=new r.EventSDK.Generator(e),o=n.after(new Date(t))||n.next().value;return o&&{startDate:o.startDate,endDate:o.endDate}||null}},YWDYW7xG:function(e,t,n){e.exports=function(e){var t,r,o="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),i="",s=n("2qRnoGmE"),a=e.list;if(a)for(var c,l=-1,u=a.length-1;l<u;)if(i+=" ",(c=a[l+=1]).isNoAssign)i+=' <li class="member-item one" data-id=""> <a> <div class="avatar img-circle no-avatar"></div> '+tb_i18n.get("task.detail.no.executor")+" </a> </li> ";else if(c.isAll)i+=' <li class="member-item all"> <a data-gta="event" data-label="involve all members"> <span class="icon icon-users icon-gray"></span> '+(c.title||tb_i18n.get("member.menu.all"))+" </a> </li> ";else if(c.isTeam){i+=" ";var p=c;i+=' <li class="member-item team hinted" data-id="'+p._id+"\" data-gta=\"{action: 'view team member', control: 'Side Member Menu'}\" data-title=\""+o(p.name)+'"> <a data-gta="event" data-label="involve team members"> <div class="team-avatar avatar pull-left"> <span class="icon ',"default"!=p.type&&p.styleName?i+=""+p.styleName:i+="icon-team-tie",i+='" ',"default"!=p.type&&p.styleColor&&(i+='style="color: '+p.styleColor+'"'),i+=' ></span> </div> <div class="team-info flex-vert flex-center"> <div class="team-name item-name"> <span>'+o(p.name)+"</span> ",s.FEATURES.showMemberCount&&(i+=" ・"+p.hasMembers.length+" "),i+=" </div> ",p.belongsTo&&(i+=' <p class="team-child muted"> '+tb_i18n.get("team.belongsTo",p.belongsTo)+" </p> "),i+=" </div> </a> </li> "}else if(c.isGroup){i+=" ";var d=c;i+=' <li class="member-item group hinted" data-id="'+d._id+"\" data-gta=\"{action: 'view group member', control: 'Side Member Menu'}\" data-title=\""+o(d.name)+'"> <a data-gta="event" data-label="involve group members"> <div class="group-avatar avatar pull-left"> <span class="icon icon-member-group"></span> </div> <div class="group-info flex-vert flex-center"> <div class="group-name item-name"> <span>'+o(d.name)+"</span>・"+d.activeMembersCount+" </div> </div> </a> </li> "}else if(c.isMember){i+=" ";var h=c;i+=' <li class="member-item one hinted" data-id="'+h._id+'" data-title="'+o(h.name)+'"> <a> <div class="avatar img-circle" style="background-image:url('+h.avatarUrl+');"></div> <span>'+o(h.name)+"</span> </a> </li> "}return e.enableInvite&&(i+=" ",e.list.length||(i+=' <li class="list-tips"> <span>'+tb_i18n.get("member.menu.not.found")+"</span> </li> "),i+=' <li class="member-item invite-more"> <a> <span class="icon icon-circle-plus"></span> <span>'+tb_i18n.get("member.menu.invite")+"</span> </a> </li>"),i}},Ydeu5xb8:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("a+N5u/Cl"),o=n("vmWJWrVe"),r=n("cvyh5t06"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="TeamTree",t.prototype.className="team-tree-view",t.prototype.events={"click .team-node":"selectTeam","click .toggle-subtree":"toggleSubtree"},t.prototype.initialize=function(e){return this.options=e,this.render()},t.prototype.renderSelectedTeams=function(){var e,t;if(this.options.reactRender&&(null!=(e=this.options.selectTeamIds)?e.length:void 0)>0)return this.options.selectTeamIds.forEach((t=this,function(e){return t.changeActive(e,!0)}))},t.prototype.render=function(){var e,t;return e=this.requestSubView(r,{teamTree:this.options.teamTree,teamTreeState:this.options.teamTreeState}),this.$el.html(e.$(".teams-level-1")),this.options.reactRender?i.delay((t=this,function(){return t.renderSelectedTeams()})):i.delay(function(e){return function(){return e.wrapActive()}}(this))},t.prototype.selectTeam=function(e){var t,n,r,o;return e.toggleSubtree?this:(t=$(e.currentTarget),this.options.reactRender?this.options.multiple?(n=t.data("id"),r=[].concat(this.options.selectTeamIds),r=i.compact(r),r=i.uniq(r),this.options.onSelect(n,r)):void 0:(o=t.data("id"),this.changeActive(o),this.options.onSelect([o])))},t.prototype.toggleSubtree=function(e){var t;return e.toggleSubtree=!0,t=$(e.currentTarget).data("id"),this.toggleState(t),this.toggleClass(this.$(".team-"+t),"open"),this.toggleClass(this.$(".team-"+t+"-children"),"open")},t.prototype.toggleState=function(e){return this.options.teamTreeState[e]=!this.options.teamTreeState[e]},t.prototype.toggleClass=function(e,t){return e.hasClass(t)?e.removeClass(t):e.addClass(t)},t.prototype.wrapActive=function(){var e;if(this.$el&&(e=this.$(".team-node.active")))return e.parents(".team-tree-node-view").find(".team-node:first").addClass("active-wrap")},t.prototype.changeActive=function(e,t){return t||this.$(".team-node").removeClass("active active-wrap"),this.$(".team-"+e).addClass("active"),this.wrapActive()},t}()},Ydsl2KTY:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S={}.hasOwnProperty;v=n("a+N5u/Cl"),l=n("wd/RKGTj"),m=n("3eMzznN/"),c=n("bZr3G77e"),f=n("vmWJWrVe"),g=n("OmupbwLD"),h=n("GESwhXbR").Toast,d=n("HHtVDBJc"),w=n("gh8QIhMV").throwError,C=n("90U+kJWN").urlFormat,p=n("77NnVLwu"),r=n("KCOaqNuq"),o=n("gLdDAp90"),a=n("llwZnbxj"),u=n("yJLhdYN7"),s=n("IssmDVnT").EventSDK,i=n("k6ijkwm8").EventList,b=function(e,t){var n,r;return r=m.formatDate(e).dateString,t=o.inclusiveAllDayEndDate(t),r===(n=m.formatDate(t).dateString)?{startDateString:r}:{startDateString:r,endDateString:n}},y=function(e,t){var n,r;return"HH:mm",r=m.formatDate(new Date(e)).dateString,n=m.formatDate(new Date(t)).dateString,{startDateString:r+" "+l(e).format("HH:mm"),endDateString:n+" "+l(t).format("HH:mm")}},k=function(e){var t;return d.isFakeEvent(e)&&d.resetEventId(e),t=s.isAllDay(e)?b(e.startDate,e.endDate):y(e.startDate,e.endDate),v.extend({},e,t)},_=function(e,t){return v.chain(e).map(function(e){return d.fakeByModel(e,t,t,!0)}).flatten().map(k).sortBy("startDate").value()},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)S.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,f),t.prototype.viewName="ObjectPickerEventsView",t.prototype.className="object-picker-events-view thin-scroll",t.prototype.initialize=function(e){var t;return this._projectId=e._projectId,this._organizationId=e._organizationId,this.onCreate=e.onCreate,this.onSelect=e.onSelect,this.exclude=null!=(t=e.exclude)?t:[],this.getInheritedInfo=e.getInheritedInfo,this.selected={future:[]},this.activePastMonth=-1,this.pastEvents=[],this.futureEvents=[],this.loading=!0,this.initView()},t.prototype.initView=function(){return this.fetchProject().then((e=this,function(t){return e.projectModel=t})).then(function(e){return function(){return e.render()}}(this)).then(function(e){return function(){return Promise.all([e.loadFutureEvents(),e.loadPastEventMonth()])}}(this)).then(function(e){return function(t){return e.futureEventsCollection=t[0],e.pastEventsGroupCollection=t[1],e.setFutureEvents(),e.setPastEvents(),e.loading=!1,e.render(),e.listen()}}(this)).catch(function(e){return w(e)});var e},t.prototype.listen=function(){return this.listenTo(this.projectModel,"change:applications",function(){if(this.projectModel.isNavAppChanged())return this.render()})},t.prototype.fetchProject=function(){return this._projectId?new Promise((e=this,function(t,n){return p.fetch(e._projectId,{success:t,error:n})})):Promise.resolve();var e},t.prototype.loadFutureEvents=function(){return this._projectId?new Promise(function(e){return function(t,n){return a.get(e._projectId).fetch({url:"projects/"+e._projectId+"/events",silent:!0,attrs:{startDate:l().startOf("day").toISOString()},success:t,error:n})}}(this)):c.get("v2/organizations/"+this._organizationId+"/events").then((e=this,function(t){var n;if(n=t.result,e.$el)return new a(n)}));var e},t.prototype.loadPastEventMonth=function(){return this._projectId?new Promise(function(e){return function(t,n){return u.get(e._projectId).fetch({url:"projects/"+e._projectId+"/events_count",attrs:{endDate:l().startOf("day").toISOString()},success:t,error:n})}}(this)):c.get("organizations/"+this._organizationId+"/events_count").then((e=this,function(t){if(e.$el)return new u(t)}));var e},t.prototype.loadPastEventByMonth=function(e){var t,n,r,o,i;return t=l(e,"YYYYMM").startOf("month"),n=t.clone().add(1,"month"),(r=l().startOf("day")).isBefore(n)&&(n=r),this._projectId?new Promise(function(r){return function(o,i){return a.get(r._projectId+"_"+e).fetch({url:"projects/"+r._projectId+"/events",silent:!0,fromDate:t,toDate:n,attrs:{startDate:t.toISOString(),endDate:n.toISOString()},success:o,error:i})}}(this)):(o=C("v2/organizations/"+this._organizationId+"/events",{startDate:t.toISOString(),endDate:n.toISOString()}),c.get(o).then((i=this,function(e){var t;if(t=e.result,i.$el)return new a(t)})))},t.prototype.isSelectedInMonth=function(e,t){return(this.selected[t]||[]).indexOf(e)>=0},t.prototype.toggleSelectInMonth=function(e,t){var n,r,o;return r=this.selected[t]||[],o=this.isSelectedInMonth(e,t)?v.without(r,e):r.concat(e),this.selected=Object.assign({},this.selected,((n={})[""+t]=o,n))},t.prototype.clearSelectByMonth=function(e){var t;if(-1!==e)return this.selected=Object.assign({},this.selected,((t={})[""+e]=[],t))},t.prototype.getFlattenedSelected=function(){return v.chain(this.selected).values().flatten().uniq().value()},t.prototype.onClickCreate=function(){return this.requestSubView(g).open(r,{_organizationId:this._organizationId,_projectId:this._projectId,getInheritedInfo:this.getInheritedInfo,success:(e=this,function(t){return e.onCreate([t.toJSON()])})});var e},t.prototype.onToggleEvent=function(e,t){if(!(this.exclude.indexOf(e)>=0))return!this.isSelectedInMonth(e,t)&&this.getFlattenedSelected().length>=10?h.error(tb_i18n.get("object.picker.exceed.number")):(this.toggleSelectInMonth(e,t),this.onSelect(this.getFlattenedSelected().map(function(e){return{_id:e,type:"event"}})),this.render())},t.prototype.setFutureEvents=function(){var e,t;return e=(new Date).toDateString(),this.futureEvents=_((null!=(t=this.futureEventsCollection)?t.toJSON():void 0)||[],e)},t.prototype.setPastEvents=function(e,t){var n,r;return e?(n=l(e,"YYYYMM"),t=_(t||[],n)):t=[],this.pastEvents=((null!=(r=this.pastEventsGroupCollection)?r.toJSON():void 0)||[]).map(function(n){return Object.assign({},n,{monthString:l(n.month,"YYYYMM").format(tb_i18n.get("moment.MMMMYYYY")),events:e===n.month?t:[]})}).sort(function(e,t){return t.month-e.month})},t.prototype.render=function(){return this.requestReactView(this.el,i,{loading:this.loading,selected:this.selected,showCreator:!this._projectId||this.projectModel.isAppEnabled("events"),futureEvents:this.futureEvents,activePastMonth:this.activePastMonth,pastEvents:this.pastEvents,onClickCreate:this.onClickCreate.bind(this),clearSelectByMonth:this.clearSelectByMonth.bind(this),onToggleMonth:(e=this,function(t){return Promise.resolve().then(function(){return t===e.activePastMonth?(e.activePastMonth=-1,e.pastEvents[t]||[]):(e.activePastMonth=t,e.loadPastEventByMonth(t).then(function(e){return e.toJSON()}))}).then(function(n){if(e.el)return e.setPastEvents(t,n)}).then(function(){return e.render()})}),onToggleEvent:this.onToggleEvent.bind(this)});var e},t}()},YeX3DkAL:function(e,t){e.exports=function(e){return'<div class="object-picker-projects__content thin-scroll"> <ul class="object-picker-projects__project-list"></ul> <div class="object-picker-projects__loading"></div></div>'}},YfEMcI56:function(e,t,n){e.exports=n.p+"images/d_heng@2x.fca8eaa8.png"},YgQKVIvW:function(e,t,n){e.exports={"organization-selector":"organization-selector__hqV3"}},Yhl9Tv18:function(e,t,n){var r,o={}.hasOwnProperty;r=n("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="skitch",t}()},YiTbVZtG:function(e,t,n){var r,o,i,s,a;s=n("sa1Ed382"),i=n("GESwhXbR").Toast,a=n("yiO17FlF"),r=n("E86Oiqt3"),o=n("77NnVLwu"),e.exports={enterCollection:function(e,t){var n;if(e)return new Promise((n=this,function(t,o){return r.fetch(e,{silentError:!0,success:function(e){return t(e.get("_projectId"))},error:function(t,r){return n.clearCache(e),o(r)}})})).then(function(n){return new Promise(function(r){return function(a,c){return o.fetch(n,{silentError:!0,success:function(r){var o;return r.isAppEnabled("works")?(o="project/"+n+"/works/"+e,"function"==typeof t&&t(),s.router.navigate(o,{trigger:!0}),a()):i.error({message:tb_i18n.get("link.collection.preview.error")})},error:function(e,t){return r.clearCache(n),c(t)}})}}(this))}).catch(function(e){var t;if(t=e.message,403===e.status&&(t=tb_i18n.get("link.collection.permission.error")),t)return i.error({message:t})})},clearCache:function(e){return delete a.getData().models[e],delete a.getData().matrix[e]}}},Ym7btH8E:function(e,t,n){e.exports={"clarity-design-popup":"clarity-design-popup__ExCp","clarity-design-menu-item":"clarity-design-menu-item__wjcd","clarity-design-input":"clarity-design-input__1d9e","clarity-design-modal":"clarity-design-modal__1cdk","organization-upgrade-native-plugin":"organization-upgrade-native-plugin__3wIe","organization-upgrade-project":"organization-upgrade-project__43QH","clarity-design-checkbox":"clarity-design-checkbox__3qIM","clarity-design-loading":"clarity-design-loading__QqtI"}},Ymtlsjgy:function(e,t){e.exports=function(e){var t='<div class="activity-creator-wrap"> ';return e.isGhost?t+=" "+tb_i18n.get("activity.timeline.comment.ghost")+" ":(t+=' <div class="activity-creator-fast-emoji"></div> <div class="comment-box-wrap"> <div class="comment-box-input-wrap"> <textarea type="text" placeholder="'+e.placeholder+'" class="form-control comment-input" ></textarea> </div> <ul class="attachments-list scrollable thin-scroll clearfix"></ul> </div> <div class="activity-creator-active-emoji"></div> <div class="activity-handler clearfix"> ',e.showSkitchCreator&&(t+=' <a class="add-skitch-handler pull-left hinted" data-title="'+tb_i18n.get("activity.timeline.add.skitch")+'"> <span class="icon icon-punctuate"></span> </a> '),t+=' <a class="add-work-handler pull-left hinted" data-title="'+tb_i18n.get("activity.timeline.add.attachment")+'"> <span class="icon icon-paperclip"></span> </a> <a class="open-emoji-handler pull-left hinted" data-title="'+tb_i18n.get("activity.timeline.add.emoji")+'" data-type="active" data-gta="event" data-label="activity add emoji"> <span class="icon icon-emoji"></span> </a> ',e.isShowCropBtn&&(t+=' <a class="screen-crop-handler pull-left hinted" data-title="'+tb_i18n.get("screen.crop")+'"> <span class="icon icon-clip"></span> </a> '),t+=' <div class="reply-btn pull-right"> <span class="link-add-handler reply-handler"> '+tb_i18n.get("activity.timeline.reply")+' </span> <span class="link-handler-gray dropdown-toggle enter-short-key" data-toggle="dropdown"> <span class="icon icon-triangle-down-s"></span> <span class="sr-only">Enter short key toggle dropdown</span> </span> <ul class="dropdown-menu reply-menu" role="menu" aria-labelledby="dLabel"> <li><a class="',e.quickReply&&(t+="active"),t+='" data-type="only-enter"><span>'+tb_i18n.get("activity.timeline.reply.enter")+'</span><i class="icon icon-tick"></i></a></li> <li><a class="',e.quickReply||(t+="active"),t+='" data-type="ctrl-enter"><span>'+tb_i18n.get("activity.timeline.reply.shortcut")+'</span><i class="icon icon-tick"></i></a></li> </ul> </div> <input type="hidden" class="quick-create"> <div class="notif-info pull-right"></div> </div> '),t+="</div>"}},Ys3yUe9R:function(e,t,n){"use strict";n.r(t);var r,o,i=n("mrSGxOB2"),s=n("q1tIBJhx"),a=n.n(s),c=n("a+N5u/Cl"),l=n.n(c),u=n("sa1Ed382"),p=n("tLZJUYWX"),d=n.n(p),h=n("TSYQbtd+"),m=n.n(h),f=n("/MKjzBat"),g=n("GESwhXbR"),v=n("80gYlwjC"),b=n("2qRnoGmE"),y=n.n(b),k=n("LvDlAkAJ"),_=n("ln9RsXX9"),w=n("dtw8XZ3o"),C=n("L342T8FT"),S=(C.push,C.replace,C.goBack,function(e){return e?"/project/"+e:"/project/:_projectId"}),E=function(e){return e&&e.params._organizationId?"/organization/"+e.params._organizationId+"/search":"/organization/:_organizationId/search"},T=n("s0r7VfKc"),I=n("783lg5EQ"),M=n("WZNYrrge"),j=n("a5ReMzFe"),P=n.n(j),x=function(e){function t(t){var n=e.call(this,t)||this;return n.onSwitchProject=function(e){n.props.projectId!==e&&n.props.onSwitchProject({_id:e})},n.onToggleStar=function(){return n.props.onToggleStar(n.props.projectModel)},n.state={project:n.props.projectModel&&n.props.projectModel.toJSON()},n}return i.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.subscription=T.default.socketProxy.publish(":change:project").subscribe(function(t){var n=t.id,r=t.data;e.state.project&&e.props.projectId===n&&e.setState({project:i.a({},e.state.project,r)})})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.projectModel!==this.props.projectModel&&e.projectModel&&this.setState({project:e.projectModel.toJSON()})},t.prototype.componentWillUnmount=function(){this.subscription.unsubscribe()},t.prototype.renderProjectToggler=function(){var e=this.state.project.name,t=this.props,n=t.isGhost,r=t.projectId,o=t.projectModel,i=o&&o.get("_organizationId")||u.PREFERENCE.get("lastWorkspace");return n?s.createElement(g.Tooltip,{title:e},s.createElement("div",{className:P.a["project-toggler"]},s.createElement("span",{className:P.a["project-toggler-name"]},e))):s.createElement(M.a,{selectedId:r,organizationId:i,onSelected:this.onSwitchProject},s.createElement("div",null,s.createElement(g.Tooltip,{title:e},s.createElement("div",{className:P.a["project-toggler"]},s.createElement("span",{className:P.a["project-toggler-name"]},e),s.createElement(g.Icon,{name:"triangle-down-s",className:P.a["project-toggler-toggler"]})))))},t.prototype.renderProjectStar=function(){if(!this.props.projectModel)return null;var e=this.props.projectModel.getRoleScope()>=0||this.props.projectModel.get("orgLevel")>-1;return s.createElement(I.a,{canStar:!this.props.isGhost&&e,starred:this.state.project.isStar,className:P.a["star-handler"],onToggleStar:this.onToggleStar})},t.prototype.renderPublicLabel=function(){return"all"==this.state.project.visibility&&s.createElement("span",{className:P.a["public-label"]},s.createElement(g.Icon,{name:"earth",size:14}),d.a.get("public"))},t.prototype.render=function(){return this.state.project?s.createElement("div",{className:P.a["navigation-page-header-project"]},this.renderProjectToggler(),this.renderProjectStar(),this.renderPublicLabel()):null},t}(s.PureComponent),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.d(t,e),t.prototype.render=function(){return!!this.props.title&&s.createElement("h2",{className:P.a["navigation-page-header-title"]},this.props.title)},t}(s.PureComponent);!function(e){e.project=x,e.search=N}(r||(r={})),function(e){e.Project="project",e.Search="search"}(o||(o={}));var O=n("wScl0p2y"),R=n("wRzn87sO"),D=n("9ZkRTOjE"),L=n.n(D),z=n("2YVBljVg").replaceMark,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modalRef=s.createRef(),t.openModal=function(){t.modalRef.current&&t.modalRef.current.open()},t.onItemClick=function(e){t.modalRef.current&&t.modalRef.current.close(),window.open(z(e.url,t.props.organization))},t.renderPluginItem=function(e){return s.createElement(g.Tooltip,{key:e._id,title:e.name},s.createElement(g.MenuItem,{className:L.a["plugin-item"],onClick:function(){return t.onItemClick(e)}},s.createElement(g.Avatar,{className:L.a["plugin-logo"],src:e.avatarUrl,shape:"square"}),s.createElement("p",{className:L.a["plugin-name"]},e.name)))},t}return i.d(t,e),t.prototype.renderMenuPlugins=function(){var e=this.props.apps.slice(0,5);return e.length>0&&s.createElement(s.Fragment,null,s.createElement(g.Separator,{full:!0}),e.map(this.renderPluginItem))},t.prototype.renderModalPlugins=function(){var e=this.props.apps,t=e.slice(5,e.length);return t.length>0&&s.createElement(s.Fragment,null,s.createElement(g.Separator,{full:!0}),s.createElement(g.MenuItem,{onClick:this.openModal},s.createElement(g.Icon,{name:"more"}),d.a.get("object.creator.plugins.more")),s.createElement(g.Modal,{ref:this.modalRef,width:300,titlePosition:"center",title:d.a.get("object.creator.plugins.more")},s.createElement("div",{className:m()(L.a["modal-body"],"thin-scroll")},t.map(this.renderPluginItem))))},t.prototype.render=function(){var e=this.props.apps;return e&&0!==e.length?s.createElement(s.Fragment,null,this.renderMenuPlugins(),this.renderModalPlugins()):null},t}(s.PureComponent),V=n("nsoHN48C"),F=function(e){function t(t){var n=e.call(this,t)||this;return n.handleVisibleChange=function(e){n.setState({opened:e})},n.onOpen=function(){u.gta.event({action:"open global creation",control:"Navigation Tab"})},n.state={opened:!1},n}return i.d(t,e),t.prototype.renderObjectItems=function(){if(!this.props.canCreateObject)return null;var e=this.props,t=e.onOpenTaskCreator,n=e.onOpenFileCreator,r=e.onOpenEventCreator,o=e.onOpenPostCreator;return s.createElement(s.Fragment,null,s.createElement(g.MenuItem,{onClick:t},s.createElement(g.Icon,{name:"board"}),p.get("navigation.task")),s.createElement(g.MenuItem,{onClick:n},s.createElement(g.Icon,{name:"file"}),p.get("navigation.work")),s.createElement(g.MenuItem,{onClick:r},s.createElement(g.Icon,{name:"calendar"}),p.get("navigation.event")),s.createElement(g.MenuItem,{onClick:o},s.createElement(g.Icon,{name:"wall"}),p.get("navigation.sharing")))},t.prototype.renderProjectItem=function(){var e=this.props,t=e.canCreateProject,n=e.onOpenProjectCreator;return t&&s.createElement(s.Fragment,null,s.createElement(g.MenuItem,{onClick:n},s.createElement(g.Icon,{name:"org-projects"}),p.get("navigation.project")),s.createElement(g.Separator,{full:!0}))},t.prototype.renderObjectCreatorPlugins=function(){return s.createElement(A,{organization:this.props.organization,apps:this.props.creatorApps})},t.prototype.renderMenuList=function(){return s.createElement(g.Menu,{className:V["object-creator-menu"]},this.renderProjectItem(),this.renderObjectItems(),this.renderObjectCreatorPlugins())},t.prototype.render=function(){return s.createElement(g.Dropdown,{offset:[0,18],autoDestroy:!1,placement:"bottom",className:V["object-creator"],content:this.renderMenuList(),onOpen:this.onOpen,opened:this.state.opened,onVisibleChange:this.handleVisibleChange},s.createElement("i",{className:V["object-creator-trigger"]}))},t}(s.PureComponent),B=n("RUL1qgth"),U=n("G94ZpdML"),$=n("5VcWHOOl"),H=n("PvILvTvE"),G=n.n(H),q=n("G3WDRlaO"),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goHome=function(){u.APP.Float.close(),u.gta.event({action:"open projects page",control:"Logo"}),u.router.home()},t.gotoCurrentAppMainPage=function(){var e=t.props,n=e.app,r=e.organizationId;if(!r||!n)return t.goHome();var o=n.url,i=Object(B.parseNativeUrl)(o);if(i){var s=Object.assign({},i,{type:Object(B.appForWhat)(n.type),id:r});return u.router.navigate(Object(B.composeTargetUrl)(s),{trigger:!0})}u.router.navigate("/organization/"+t.props.organizationId+"/plugin/"+n._id,{trigger:!0})},t.onLogoClick=function(){t.isNativeApp()?t.goHome():t.gotoCurrentAppMainPage()},t}return i.d(t,e),t.prototype.isNativeApp=function(){return!!this.props.app&&["native","iframe"].indexOf(this.props.app.mode)>=0},t.prototype.isRedirectApp=function(){return!!this.props.app&&["redirect"].indexOf(this.props.app.mode)>=0},t.prototype.renderMainAppLogo=function(){var e=y.a.FEATURES.appLogo;if(e&&e.imageUrl){var t={backgroundImage:"url("+e.imageUrl+")"};return s.createElement("span",{className:G.a["logo-image"],style:t})}if(e&&e.tag)return s.createElement("span",{title:e.tag,className:G.a["logo-text"]},e.tag);var n=Object($.a)();if(n&&n.resource&&n.resource.doodle){var r={backgroundImage:"url("+n.resource.doodle+")",width:n.resource.width,height:n.resource.height},o=s.createElement("span",{className:G.a.logo,style:r});return n.resource.tip?s.createElement(g.Tooltip,{title:n.resource.tip},o):o}return s.createElement("span",{className:G.a.logo})},t.prototype.renderAbstractLogo=function(){var e=this.isRedirectApp()?this.props.app:this.props.tbApp,t={backgroundImage:"url("+(e?e.avatarUrl:q)+")"};return s.createElement(g.Tooltip,{title:d.a.get("navigation.breadcrumbs.back.home")},s.createElement("div",{className:G.a["abstract-logo"]},s.createElement("div",{className:G.a["abstract-logo-img"],style:t}),s.createElement(g.Icon,{name:"home-fill",size:14})))},t.prototype.renderCurrentAppName=function(){var e=this.props.app.name;return s.createElement(g.Tooltip,{title:e},s.createElement("span",{className:G.a["app-name"],onClick:this.gotoCurrentAppMainPage},e))},t.prototype.renderMainLogo=function(){return this.isNativeApp()||this.props.pageHeader?this.renderAbstractLogo():this.renderMainAppLogo()},t.prototype.renderMainSection=function(){return s.createElement("div",{className:G.a.main,onClick:this.onLogoClick},this.renderMainLogo())},t.prototype.renderSubSection=function(){return this.isNativeApp()&&s.createElement(s.Fragment,null,this.renderDelimeter(),this.renderCurrentAppName())},t.prototype.renderDelimeter=function(){return s.createElement(g.Icon,{name:"chevron-right",size:12,className:G.a.delimeter})},t.prototype.renderPageHeader=function(){return this.props.pageHeader?s.createElement(s.Fragment,null,this.renderDelimeter(),this.props.pageHeader):null},t.prototype.render=function(){var e,t=m()(G.a["navigation-breadcrumbs"],((e={})[G.a["navigation-breadcrumbs-ghost"]]=this.props.isGhost,e));return s.createElement("div",{className:t},this.renderMainSection(),this.renderSubSection(),this.renderPageHeader())},t}(s.PureComponent),J=Object(f.connect)(function(e){return{app:Object(U.e)(e),tbApp:Object(U.h)(e)}})(W),X=n("DOZCBSCZ"),Y=n("WwBiRI+a"),K=n("suI5NDUm"),Q=n("lDYZCKQt"),Z=n("8s4B/NC6"),ee=function(e){return{hasVisitedAoneGuideStep1:e.ui.aoneGuide.hasVisitedAoneGuideStep1,hasVisitedAoneGuideStep2:e.ui.aoneGuide.hasVisitedAoneGuideStep2,dockDropdownOpened:e.ui.dock.opened}},te={toggleDockDropdown:U.j,visitAoneStep1:Q.d,visitAoneStep2:Q.e,initGuide:Q.b},ne=[0,3],re=Object(f.connect)(ee,te)(function(e){var t=e.children,n=e.toggleDockDropdown,r=e.hasVisitedAoneGuideStep1,o=e.visitAoneStep1,i=e.dockDropdownOpened,c=e.initGuide;Object(s.useEffect)(function(){Object(K.isAone)()&&c()},[c]);var l=Object(s.useCallback)(function(){o(),i||n(!0)},[i]);if(r)return a.a.createElement(a.a.Fragment,null,t);var u=a.a.createElement("div",{className:Z["aone-guide-container"]},a.a.createElement("p",{className:Z["aone-guide-header"]},p.get("aone.guide.step1.header")),a.a.createElement("div",{className:Z["aone-guide-text"]},p.get("aone.guide.step1.text")),a.a.createElement(g.Button,{className:Z["aone-guide-button"],onClick:l},p.get("aone.guide.step1.button")));return a.a.createElement(g.Dropdown,{content:u,arrow:!0,placement:"bottom",opened:!0,offset:ne,persistence:!0},t)}),oe=Object(f.connect)(ee,te)(function(e){var t=e.children,n=e.hasVisitedAoneGuideStep1,r=e.hasVisitedAoneGuideStep2,o=e.visitAoneStep2,i=Object(s.useCallback)(function(e){e.stopPropagation(),o()},[o]);if(r||!n)return a.a.createElement(a.a.Fragment,null,t);var c=a.a.createElement("div",{className:Z["aone-guide-container"]},a.a.createElement("p",{className:Z["aone-guide-header"]},p.get("aone.guide.step2.header")),a.a.createElement("div",{className:Z["aone-guide-text"]},p.get("aone.guide.step2.text")),a.a.createElement(g.Button,{className:Z["aone-guide-button"],onClick:i},p.get("aone.guide.step2.button")));return a.a.createElement(g.Dropdown,{content:c,arrow:!0,placement:"rightTop",opened:!0,persistence:!0},t)}),ie=n("2YVBljVg"),se=n("w2WS5sq3"),ae=n("u79IRQJM"),ce=n("0lCab8jM"),le={onFetchFeatures:U.c,onDisableApplication:U.a,toggleDocKDropdown:U.j},ue={analytics:"analysis",dashboard:"dashboard",administration:"backstage",okr:"objectives",reportapp:"reporting apps"},pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.handleClose();var e=t.props,n=e.app,r=e.organization,o=ie.replaceMark(n.url,r);switch(n.mode){case"native":t.handleNative(o,n,r);break;case"redirect":t.handleRedirect(n,o);break;case"iframe":t.handleIframe(n,r._id);break;case"modal":case"fullscreen":ae.open(o,n.name);break;case"api":se.get(o)}},t}return i.d(t,e),t.prototype.handleOrgGta=function(e){var t=ue[e]||e,n=Object.assign({action:"enter exciting docker",control:"Dock",type:t},"reportapp"===e?{method:"click",organizationid:this.props.organization._id,page:"Org Projects Page"}:{});u.gta.event(n)},t.prototype.redirectTo=function(e){window.open(e)},t.prototype.handleNative=function(e,t,n){if(!Object(B.parseNativeUrl)(e))return this.handleOrgGta("Teambition"),u.router.home();var r=Object.assign({},Object(B.parseNativeUrl)(e),{type:Object(B.appForWhat)(t.type),id:n._id}),o=Object(B.composeTargetUrl)(r);if(Object(Y.nativePluginUpgradeRequired)(r.target,n))Object(Y.openOrganizationUpgradeNativePluginModal)(n,t,this.props.onDisable);else{o&&(r.query.redirect?this.redirectTo(o):u.router.navigate(o,{trigger:!0}));var i=r.target,s="organization/".length;"organization/"===i.slice(0,s)&&this.handleOrgGta(i.slice(s))}},t.prototype.handleRedirect=function(e,t){this.redirectTo(t),e.isProductApp?this.handleOrgGta(e.name):this.handleOrgGta("custom")},t.prototype.handleIframe=function(e,t){u.router.navigate("/organization/"+t+"/plugin/"+e._id,{trigger:!0})},t.prototype.render=function(){var e=this.props.app,t=e.name,n=e.avatarUrl,r=e.isProductApp;return s.createElement("div",{className:m()(ce["app-item"],{"no-border":r})},s.createElement(g.Avatar,{shape:"square",src:n,className:ce["app-item-logo"],onClick:this.onClick}),s.createElement("p",{className:ce["app-item-name"]},t))},t}(s.PureComponent),de=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onVisibleChange=function(e){t.props.aoneGuideStep2||t.props.toggleDocKDropdown(e)},t.fetchFeatures=function(){t.props.organization&&t.props.onFetchFeatures(t.props.organization._id)},t.handleClose=function(){t.onVisibleChange(!1)},t}return i.d(t,e),t.prototype.componentDidMount=function(){this.fetchFeatures()},t.prototype.componentDidUpdate=function(e){(this.props.organization&&this.props.organization._id)!==(e.organization&&e.organization._id)&&this.fetchFeatures(),this.props.opened!==e.opened&&this.props.opened&&u.gta.event({action:"open dock",control:"Dock"})},t.prototype.renderApps=function(){var e=this;return!this.props.isLoading&&this.props.apps.map(function(t){return s.createElement(pe,{key:t._id,app:t,handleClose:e.handleClose,onDisable:e.props.onDisableApplication,organization:e.props.organization})})},t.prototype.renderloading=function(){return this.props.isLoading&&s.createElement(X.a,null)},t.prototype.renderContent=function(){return s.createElement("div",{className:m()(ce["dock-container"],"thin-scroll")},s.createElement("div",{className:ce["dock-list"]},this.renderApps(),this.renderloading()))},t.prototype.renderTrigger=function(){var e,t=m()(ce["dock-trigger"],((e={})[ce["dock-trigger-opened"]]=this.props.opened,e));return s.createElement("div",{className:t},s.createElement(g.IconButton,{name:"dock",type:"subtle",color:"gray"}))},t.prototype.render=function(){return s.createElement(g.Dropdown,{persistence:!0,opened:this.props.opened,className:ce["dock-dropdown"],onVisibleChange:this.onVisibleChange,content:s.createElement(oe,null,this.renderContent()),offset:[8,4],placement:"bottomRight"},this.renderTrigger())},t}(s.PureComponent),he=Object(f.connect)(function(e){var t=e.ui.dock.opened,n=Object(U.f)(e),r=Object(U.e)(e),o=e.ui.aoneGuide,i=o.hasVisitedAoneGuideStep1,s=o.hasVisitedAoneGuideStep2;return{opened:t,currentApp:r,apps:n,isLoading:!n,location:e.router.location,aoneGuideStep2:i&&!s}},le)(de),me=n("NtzEC3Pa"),fe=n("HDJEOtNh"),ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.d(t,e),t.prototype.getStyle=function(){var e=this.props,t=e.shape,n=e.color,r=e.size,o=e.alpha,i=e.bgColor;return{minWidth:r,height:r,borderRadius:null!==e.count?10:void 0,lineHeight:("inline"!==t?r-2:r)+"px",opacity:o&&o/100,backgroundColor:i,color:n}},t.prototype.renderCount=function(){var e=this.props,t=e.max,n=e.count;return null===n?void 0:n>t?t+"+":""+n},t.prototype.render=function(){var e,t=m()("react-badge",{hinted:!!this.props.title}),n=m()(((e={})["badge-"+this.props.shape]=!0,e));return s.createElement("span",{className:t,"data-title":this.props.title},this.props.children,s.createElement("sup",{className:n,style:this.getStyle()},s.createElement("span",null,this.renderCount())))},t.defaultProps={max:99,size:20,shape:"default"},t}(s.PureComponent),ve=function(e){var t=e.children,n=i.g(e,["children"]);return s.createElement(ge,i.a({},n),t)},be=function(e){var t=i.a({},{shape:"inline"},e);return ve(t)},ye=n("YsJsuHrW"),ke=n("gl5ckapz"),_e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onClick(t.props.organization._id)},t}return i.d(t,e),t.prototype.renderName=function(){var e=this.props.organization,t=e.name,n=e.description;return s.createElement("div",{className:ke["organization-item-info"]},s.createElement("span",{className:ke["organization-item-name"]},t),s.createElement("p",{className:ke["organization-item-description"]},n))},t.prototype.renderExpiredTip=function(){var e=this.props.organization.expireHint;return e&&s.createElement("span",{className:ke["organization-item-expired-label"]},e)},t.prototype.renderTick=function(){return this.props.selected&&s.createElement(g.Icon,{name:"tick"})},t.prototype.render=function(){return s.createElement(g.MenuItem,{onClick:this.onClick},s.createElement("div",{className:ke["organization-item"]},this.renderName(),this.renderExpiredTip(),this.renderTick()))},t}(s.PureComponent),we=n("L+U0RKxI"),Ce=n("gl5ckapz"),Se=function(e){function t(t){var n=e.call(this,t)||this;return n.getOrganizationData=function(){return c.chain(n.props.organizations).map(function(e){return i.a({},e,{expireHint:n.getExpireHint(e)})}).sortBy(function(e){return e._id!==n.props.organizationId}).value()},n.getExpireHint=function(e){var t=v.Payment.create(e.plan);return t.days<=14?p.get("system.bar.workspace.switcher.organization.dueday",t.days):""},n.openPersonalCenter=function(){var e="string"==typeof y.a.FEATURES.userMenu_personalCenter?y.a.FEATURES.userMenu_personalCenter:y.a.ACCOUNT_HOST+"/my";window.open(e)},n.openUserSettings=function(){n.props.openUserSettings()},n.onOpen=function(){u.gta.event({action:"open personal menu",control:"Navigation Tab"})},n.onSwitchHost=function(){var e=we.isInternational()?y.a.CHINA_HOST:y.a.INTERNATIONAL_HOST;window.location.href=e},n.openPaymentStatus=function(){var e=n.props,t=e.organizationId,r=e.organizations,o=i.f(r.filter(function(e){return e._id===t}),1)[0];o?u.gta.event({control:"payment-status",payment:v.Payment.create(o.plan),role:Object(fe.getRoleScopeByOrgId)(o._id),organizationId:o._id,from:"Portrait Menu",private:!0}):t||n.openOrganizationCreator()},n.onSwitchToPersonalWorkspace=function(){n.onSwitchWorkspace()},n.onSwitchWorkspace=function(e){e!==n.props.organizationId&&(e?n.props.organizations.filter(function(t){return t._id===e})[0]&&u.router.navigateToWorkspaceOrganization(e):(u.gta.event({action:"enter personal project",control:"Navigation Tab Org List"}),u.router.navigateToWorkspacePersonal()),u.APP.Float.close())},n.onLogout=function(){window.location.href=y.a.ACCOUNT_HOST+"/logout"},n.userMe=u.user.toJSON(),n.labsNewTestSubscription=null,n.state={labsHasNewTest:!1},n}return i.d(t,e),t.prototype.componentDidMount=function(){var e=this;y.a.FEATURES.userMenu_international&&u.user.fetchCrossNotify(),Object(ye.checkTestsChanged)(),this.labsNewTestSubscription=ye.labsHasNewTest$.subscribe(function(t){e.setState(i.a({},e.state,{labsHasNewTest:t}))})},t.prototype.componentWillUnmount=function(){this.labsNewTestSubscription&&this.labsNewTestSubscription.unsubscribe()},t.prototype.openOrganizationCreator=function(){Object(me.openOrganizationCreator)()},t.prototype.renderUserCenterItem=function(){return y.a.FEATURES.userMenu_personalCenter&&s.createElement(g.MenuItem,{onClick:this.openPersonalCenter},p.get("navigation.account.personalCenter"))},t.prototype.renderUserSettingsItem=function(){return s.createElement(g.MenuItem,{onClick:this.openUserSettings},s.createElement("div",{className:Ce["personal-settings"]},p.get("user.settings.setting"),this.state.labsHasNewTest&&s.createElement(be,{count:null,size:10})))},t.prototype.renderInternaionalItem=function(){var e,t;we.isInternational()?(e=p.get("international.tip.inner.switch"),t=p.get("international.tip.current.us")):(e=p.get("international.tip.outer.switch"),t=p.get("international.tip.current.cn"));var n=this.userMe.crossNotify&&this.userMe.crossNotify.badge;return y.a.FEATURES.userMenu_international&&s.createElement(g.MenuItem,{secondary:t,onClick:this.onSwitchHost},s.createElement("div",{className:Ce["international-switcher"]},e,!!n&&s.createElement(ge,{count:n})))},t.prototype.renderOrganiaztionCreator=function(){return y.a.FEATURES.newOrganization?s.createElement(g.MenuItem,{className:Ce["workspace-switcher-creator"],onClick:this.openOrganizationCreator,key:"organiaztion-creator"},p.get("system.bar.user.info.menu.organization.creator")):null},t.prototype.renderOrganizations=function(){var e=this;return this.getOrganizationData().map(function(t){return s.createElement(_e,{key:"org-"+t._id,organization:t,selected:e.props.organizationId===t._id,onClick:e.onSwitchWorkspace})})},t.prototype.renderWorkspaceSwitcher=function(){var e=this.renderOrganizations();return 0===(e=c.compact(i.h(this.renderUpgradeBtn(),[this.renderOrganiaztionCreator()],e))).length?null:s.createElement(g.Menu,{className:m()(Ce["workspace-switcher"],"thin-scroll")},e)},t.prototype.renderUpgradeBtn=function(){return y.a.FREE?[null]:[s.createElement(g.MenuItem,{key:"open-payment-statuds",className:Ce["user-info-upgrade"],onClick:this.openPaymentStatus},p.get("upgrade")),s.createElement(g.Separator,{key:"payment-sep",full:!0})]},t.prototype.renderSettingsMenu=function(){return s.createElement(g.Menu,null,this.renderUserCenterItem(),this.renderUserSettingsItem(),this.renderInternaionalItem(),s.createElement(g.Separator,{full:!0}),this.renderLogout())},t.prototype.renderLogout=function(){return s.createElement(g.MenuItem,{onClick:this.onLogout},p.get("logout"))},t.prototype.renderContent=function(){return s.createElement("div",null,this.renderWorkspaceSwitcher(),this.renderSettingsMenu())},t.prototype.renderAvatar=function(){return s.createElement(s.Fragment,null,s.createElement(g.Avatar,{shape:"circle",src:this.userMe.avatarUrl,className:Ce["user-info-avatar"]}),s.createElement("div",{className:Ce["hover-avatar-bg"]},s.createElement(g.Icon,{name:"more"})))},t.prototype.renderTriggerBadge=function(){var e=this.userMe.crossNotify&&this.userMe.crossNotify.badge;return e?s.createElement(ge,{count:e}):this.state.labsHasNewTest?s.createElement(be,{count:null,size:10}):null},t.prototype.renderTrigger=function(){return s.createElement("div",{className:Ce["user-info-trigger"]},this.renderAvatar(),this.renderTriggerBadge())},t.prototype.render=function(){return s.createElement(g.Dropdown,{offset:[0,12],placement:"bottomLeft",className:Ce["user-info"],content:this.renderContent(),onOpen:this.onOpen},this.renderTrigger())},t}(s.PureComponent),Ee=n("BzGHEctR"),Te=n("Wd/8sFUG"),Ie=n("/w7ETy+M"),Me=n("6vg9MnbG"),je=n("1KFih46x"),Pe=n("L+AUxvqI"),xe=n("5qt3k8Zi"),Ne=xe.hasVisitedDashboard,Oe=xe.markVisitedDashboard,Re=function(e){function t(t){var n=e.call(this,t)||this;return n.refHelperTrigger=function(e){n.helperTrigger=e},n.onHelperClick=function(){Object(K.isAone)()?n.setState({showHelpCenterMenu:!n.state.showHelpCenterMenu}):n.props.onHelperOpen(n.helperTrigger),u.gta.event({action:"add feedback",control:"Navigation Tab"})},n.onMyOpen=function(){return i.b(n,void 0,void 0,function(){var e;return i.e(this,function(t){switch(t.label){case 0:return[4,u.APP.Float.toggleMy()];case 1:return null==(e=t.sent())?[2]:(e?u.gta.event({action:"open me tab",control:"Navigation Tab"}):u.gta.event({action:"close me tab",control:"Navigation Tab"}),[2])}})})},n.onDashboardOpen=function(){return i.b(n,void 0,void 0,function(){var e;return i.e(this,function(t){switch(t.label){case 0:return[4,u.APP.Float.toggleDashboard()];case 1:return null==(e=t.sent())?[2]:(e?u.gta.event({action:"open dashboard tab",control:"Navigation Tab",page:"workbench"}):u.gta.event({action:"close dashboard tab",control:"Navigation Tab",page:"workbench"}),[2])}})})},n.onCalendarOpen=function(){return i.b(n,void 0,void 0,function(){var e;return i.e(this,function(t){switch(t.label){case 0:return[4,u.APP.Float.toggleCalendar()];case 1:return null==(e=t.sent())?[2]:(e?u.gta.event({action:"open calendar tab",control:"Navigation Tab"}):u.gta.event({action:"close calendar tab",control:"Navigation Tab"}),[2])}})})},n.onInboxOpen=function(){return i.b(n,void 0,void 0,function(){var e;return i.e(this,function(t){switch(t.label){case 0:return[4,u.APP.Float.toggleInbox()];case 1:return null==(e=t.sent())?[2]:(e?u.gta.event({action:"open inbox tab",control:"Navigation Tab"}):u.gta.event({action:"close inbox tab",control:"Navigation Tab"}),[2])}})})},n.onChatOpen=function(){Me.open(),u.gta.event({action:"enter chats page",control:"Navigation Tab"})},n.onCloseDashboardUserTip=function(){Oe(),n.setState({showDashboardTip:!1}),u.APP.Float.toggleDashboard()},n.onGuideVisibleChange=function(e){e||(n.setState({showDashboardTip:e}),Oe())},n.onHelpMenuVisibleChange=function(e){n.setState({showHelpCenterMenu:e})},n.onHelpClose=function(){n.onHelpMenuVisibleChange(!1)},n.state={chatBadgeType:Te.BadgeType.None,chatUnreadCount:0,inboxBadgeType:Te.BadgeType.None,inboxUnreadCount:0,showDashboardTip:!1,showHelpCenterMenu:!1,dashboardEnabled:Ee.labs.checkTest("dashboard")},n}return i.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.dashboardLabSub$=Ee.labs.notify$.subscribe(function(){e.setState({dashboardEnabled:Ee.labs.checkTest("dashboard"),showDashboardTip:!Ne()&&!Ee.labs.checkPersonalSettingsOpened()})}),this.badgeSub=Te.axon.badge$.subscribe(function(t){var n=t.apps,r=Object(Te.normalizeBadge)([n[Te.OfficialApp.chat]]),o=l.a.chain(n).keys().without(Te.OfficialApp.chat).map(function(e){return n[e]}).value(),i=Object(Te.normalizeBadge)(o);e.setState({chatBadgeType:r.badgeType,chatUnreadCount:r.badgeCount,inboxBadgeType:i.badgeType,inboxUnreadCount:i.badgeCount})})},t.prototype.componentWillUnmount=function(){this.dashboardLabSub$.unsubscribe(),this.badgeSub.unsubscribe()},t.prototype.renderUnreadBadge=function(e,t){return"dot"===e?s.createElement(be,{count:null,size:10}):"number"===e?t>0&&s.createElement(ge,{count:t}):null},t.prototype.renderDashboard=function(){return s.createElement("div",{className:m()(je.item,je["item-dashboard"]),onClick:this.onDashboardOpen},this.renderGuideDropdown())},t.prototype.renderMy=function(){return s.createElement("div",{className:m()(je.item,je["item-my"]),onClick:this.onMyOpen},s.createElement("span",null,p.get("navigation.my")))},t.prototype.renderCalendar=function(){return s.createElement("div",{className:m()(je.item,je["item-calendar"]),onClick:this.onCalendarOpen},s.createElement(g.Tooltip,{title:p.get("navigation.calendar")},s.createElement(g.IconButton,{name:"calendar",type:"subtle"})))},t.prototype.renderMyOrDashboard=function(){var e=this.state.dashboardEnabled?this.renderDashboard():this.renderMy();return s.createElement(re,null,e)},t.prototype.renderHelper=function(){var e,t=this.state.showHelpCenterMenu,n=m()("nav-question",je.item,((e={})[je["item-active"]]=t,e)),r=s.createElement(g.IconButton,{name:"circle-question",type:"subtle"}),o=s.createElement(g.Tooltip,{title:p.get("navigation.helper")},r),i=t?r:o,a=y.a.HELP_CENTER_URL&&s.createElement("div",{ref:this.refHelperTrigger,className:n,onClick:this.onHelperClick},i);return Object(K.isAone)()?s.createElement(g.Dropdown,{content:s.createElement(Ie.HelpCenterMenu,{onClose:this.onHelpClose}),offset:[60,0],persistence:!0,autoDestroy:!1,opened:this.state.showHelpCenterMenu,onVisibleChange:this.onHelpMenuVisibleChange},a):a},t.prototype.renderInbox=function(){var e=this.state,t=e.inboxBadgeType,n=e.inboxUnreadCount;return s.createElement("div",{className:m()(je.item,je["item-inbox"]),onClick:this.onInboxOpen},s.createElement(g.Tooltip,{title:p.get("navigation.inbox")},s.createElement(g.IconButton,{name:"inbox",type:"subtle"})),this.renderUnreadBadge(t,n))},t.prototype.renderChat=function(){var e=this.state,t=e.chatBadgeType,n=e.chatUnreadCount;return s.createElement("div",{className:je.item,onClick:this.onChatOpen},s.createElement(g.Tooltip,{title:p.get("navigation.chat")},s.createElement(g.IconButton,{name:"message",type:"subtle"})),this.renderUnreadBadge(t,n))},t.prototype.renderGuideContent=function(){return s.createElement("div",{className:Pe["guide-popover-dashboard"]},s.createElement("div",{className:Pe["guide-popover-image"]}),s.createElement("h2",{className:Pe["guide-popover-header"]},p.get("system.bar.guide.dashboard.header")),s.createElement("p",{className:Pe["guide-popover-description"]},p.get("system.bar.guide.dashboard.description")),s.createElement(g.Button,{onClick:this.onCloseDashboardUserTip,className:Pe["guide-popover-button"]},p.get("system.bar.guide.dashboard.submit")))},t.prototype.renderGuideDropdown=function(){return s.createElement(g.Dropdown,{arrow:!0,offset:[0,16],placement:"bottomRight",persistence:!0,opened:this.state.showDashboardTip,onVisibleChange:this.onGuideVisibleChange,content:this.renderGuideContent()},s.createElement("span",null,p.get("navigation.dashboard")))},t.prototype.renderHelpOnly=function(){return s.createElement("div",{className:je["control-bar"]},this.renderHelper())},t.prototype.render=function(){return this.props.helpOnly?this.renderHelpOnly():s.createElement("div",{className:je["control-bar"]},this.renderMyOrDashboard(),this.renderCalendar(),this.renderInbox(),this.renderChat(),this.renderHelper())},t}(s.PureComponent),De=n("2YVBljVg").replaceMark,Le=n("EPRFTt9e"),ze=2,Ae=280,Ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onToggleTopNavigation=function(){t.props.onToggle(t.props.app)},t}return i.d(t,e),t.prototype.renderBarItem=function(){var e=this.props.app;return a.a.createElement("li",{className:Le["navigation-item"],onClick:this.onToggleTopNavigation},a.a.createElement("span",{className:Le["ellipsis-text"]},e.name))},t.prototype.renderMenuItem=function(){var e=this.props.app;return a.a.createElement(g.MenuItem,{onClick:this.onToggleTopNavigation},e.name)},t.prototype.render=function(){switch(this.props.position){case"in-bar":return this.renderBarItem();case"in-more":return this.renderMenuItem();default:return null}},t}(s.PureComponent),Fe=function(e){function t(t){var n=e.call(this,t)||this;return n.toggleModal=function(e){n.activeApp=e,n.onVisibleChange(!n.state.opened),u.gta.event({action:n.state.opened?"close nav ability":"open nav ability",control:"Navigation Tab"})},n.closeModal=function(){n.onVisibleChange(!1)},n.onVisibleChange=function(e){n.setState({opened:e})},n.state={opened:!1},n}return i.d(t,e),t.prototype.renderTopBar=function(){return a.a.createElement("div",{className:Le["app-top-bar"]},this.activeApp.name,a.a.createElement(g.IconButton,{color:"gray",name:"remove",onClick:this.closeModal}))},t.prototype.renderIFrame=function(){var e=De(this.activeApp.url,this.props.organization);return a.a.createElement("div",{className:Le["iframe-container"]},a.a.createElement("iframe",{src:e,frameBorder:"0"}))},t.prototype.renderModal=function(){return this.state.opened&&a.a.createElement(g.Modal,{title:"",opened:this.state.opened,onVisibleChange:this.onVisibleChange,className:Le["app-container"]},this.renderTopBar(),this.renderIFrame())},t.prototype.renderNavItems=function(){var e=this,t=this.props.showNumber;return t<=0?null:this.props.apps.slice(0,t).map(function(t){return a.a.createElement(Ve,{key:t._id,app:t,position:"in-bar",onToggle:e.toggleModal})})},t.prototype.renderMenuItems=function(){var e=this,t=this.props.showNumber,n=t>0?t:0;return this.props.apps.slice(n).map(function(t){return a.a.createElement(Ve,{app:t,position:"in-more",key:t._id,onToggle:e.toggleModal})})},t.prototype.renderMenuContent=function(){return a.a.createElement(g.Menu,null,this.renderMenuItems())},t.prototype.renderMenu=function(){var e,t=this.props,n=t.apps,r=t.showNumber;if(r>=n.length||n.length<=0)return null;var o=r>=0?a.a.createElement(g.TextButton,null,p.get("top.navitaion.app.more"),a.a.createElement(g.Icon,{name:"arrow-down-s"})):a.a.createElement(g.Icon,{name:"more"}),i=m()(Le["navigation-item-more"],((e={})[Le["navigation-item-icon-more"]]=r<0,e));return a.a.createElement(g.Dropdown,{content:this.renderMenuContent(),offset:[0,4]},a.a.createElement("li",{className:i},o))},t.prototype.render=function(){var e;if(!this.props.organization)return null;var t=this.props,n=t.width,r=t.apps,o=t.showNumber,i=n?{maxWidth:"calc((100vw - "+Ae+"px) / 2 - "+(n+16)+"px)"}:{},s=m()(Le["top-navigation"],((e={})[Le["top-navigation-only-icon"]]=o<0,e[Le["top-navigation-none"]]=!r.length,e));return a.a.createElement("ul",{className:s,style:i},this.renderMenu(),this.renderNavItems(),this.renderModal())},t}(s.PureComponent),Be=Object(f.connect)(function(e){return{apps:Object(U.g)(e)}})(Fe),Ue=n("THO7R8TO"),$e=n.n(Ue),He=n("iV9vK7yl"),Ge=n("CxY0Mkc1"),qe=function(){if(Object(He.b)())return null;var e=Ge.format({pathname:y.a.AONE_HOST+"/home/old",query:{staffId:u.user.get("openId")}});return s.createElement("div",{className:$e.a["back-old-version"]},s.createElement("a",{href:e},d.a.get("system.bar.back.old.version")))},We={openModal:function(){return u.gta.event({action:"get your package",control:"Navigation Tab"})},checkPackageDetails:function(){return u.gta.event({action:"check package details",control:"Package"})},scanQRCode:function(){return u.gta.event({action:"scan QR code",control:"Package"})},quitModal:function(e){return u.gta.event({action:"main"===e?"no interest and skip package":"skip package",control:"Package"})}},Je=n("gdvhuPU0"),Xe=n.n(Je),Ye=function(e){function t(t){var n=e.call(this,t)||this;return n.modalRef=a.a.createRef(),n.backToDescription=function(){We.checkPackageDetails(),n.goBack()},n.goToQRCode=function(){We.scanQRCode(),n.setState({pageName:"qrcode"})},n.openModal=function(){We.openModal(),n.modalRef&&n.modalRef.current&&n.modalRef.current.open()},n.closeModal=function(){n.props.onQuit(),We.quitModal(n.state.pageName),n.modalRef&&n.modalRef.current&&n.modalRef.current.close()},n.onModalHide=function(){n.goBack()},n.state={pageName:"main"},n}return i.d(t,e),t.prototype.goBack=function(){this.setState({pageName:"main"})},t.prototype.renderBanner=function(){return a.a.createElement("div",{className:Xe.a.banner})},t.prototype.renderDescription=function(){var e=u.user.get("name");return a.a.createElement("div",{className:Xe.a.content},a.a.createElement("p",{className:Xe.a["desc-intro"],dangerouslySetInnerHTML:{__html:d.a.get("default.priviledge.provider.description.intro",e)}}),a.a.createElement("section",{className:Xe.a["desc-priviledges"]},a.a.createElement("span",{className:Xe.a["desc-priviledges-title"]},d.a.get("default.priviledge.provider.priviledge.title")),a.a.createElement("ul",{className:Xe.a["desc-priviledges-list"]},[d.a.get("default.priviledge.provider.priviledge.guide"),d.a.get("default.priviledge.provider.priviledge.scenario"),d.a.get("default.priviledge.provider.priviledge.resolution"),d.a.get("default.priviledge.provider.priviledge.training")].map(function(e,t){return a.a.createElement("li",{key:t},e)}))),a.a.createElement("div",{className:Xe.a["desc-footer"]},a.a.createElement(g.Button,{onClick:this.goToQRCode,className:Xe.a["desc-footer-next"]},d.a.get("default.priviledge.provider.go.to.qrcode")),a.a.createElement(g.TextButton,{onClick:this.closeModal,className:Xe.a["desc-footer-quit"]},d.a.get("default.priviledge.provider.quit.without.priviledge"))))},t.prototype.renderQRCodes=function(){return a.a.createElement("div",{className:Xe.a.content},a.a.createElement(g.TextButton,{onClick:this.backToDescription,className:Xe.a["back-handler"]},a.a.createElement(g.Icon,{name:"chevron-left"}),d.a.get("default.priviledge.provider.back.to.description")),a.a.createElement("div",{className:Xe.a["qrcode-section"]},a.a.createElement("div",{className:Xe.a["qrcode-block"]},a.a.createElement("img",{src:"https://tboperation.oss-cn-hangzhou.aliyuncs.com/%E5%BE%AE%E4%BF%A1%E4%BA%8C%E7%BB%B4%E7%A0%81/wechat%20QR%20code.PNG",width:156,height:156}),a.a.createElement("span",null,d.a.get("default.privildge.provider.qrcode.wechat")))),a.a.createElement(g.TextButton,{onClick:this.closeModal,className:Xe.a["qrcode-quit"]},d.a.get("default.privildge.provider.quit")))},t.prototype.renderBody=function(){switch(this.state.pageName){case"main":return this.renderDescription();case"qrcode":return this.renderQRCodes()}},t.prototype.renderContent=function(){return a.a.createElement("div",{className:Xe.a.modal},this.renderBanner(),this.renderBody())},t.prototype.renderModal=function(){return a.a.createElement(g.Modal,{ref:this.modalRef,width:694,titleCls:"hidden",bodyStyle:{padding:0},onHide:this.onModalHide,mask:{closeable:!1}},this.renderContent())},t.prototype.renderTrigger=function(){return a.a.createElement("div",{className:Xe.a.trigger,onClick:this.openModal},d.a.get("default.priviledge.provider.trigger"))},t.prototype.render=function(){return a.a.createElement(a.a.Fragment,null,this.renderTrigger(),this.renderModal())},t}(a.a.PureComponent),Ke=n("5qt3k8Zi"),Qe=Ke.hasVisiteDefaultPriviledgeProvider,Ze=Ke.markVisiteDefaultPriviledgeProvider,et=n("I7Y89+UI"),tt=n("QyjeWo4p"),nt=n("RQ44psah"),rt=function(e){function t(t){var n=e.call(this,t)||this;return n.leftRef=s.createRef(),n.rightRef=s.createRef(),n.onWindowResize=Object(k.debounce)(function(){n.setShowAppNumber()},200),n.setShowAppNumber=function(){if(n.leftRef.current&&n.rightRef.current){var e=n.leftRef.current.getBoundingClientRect().width+n.rightRef.current.getBoundingClientRect().width,t=(document.body.clientWidth-Ae-32)/2-e,r=t<70?-1:Math.min(Math.floor(t/70)-1,ze);n.setState({showAppNumber:r,leftAndRightWidth:e})}},n.onLoginClick=function(){u.router.gotoLogin()},n.onRegisterClick=function(){u.router.gotoRegister()},n.onReleaseRibbonClick=function(){u.PREFERENCE.save(null,{attrs:{hasNew:!1}});var e="zh"===p.getLanguage()?nt.blog.zh.updates:nt.blog.en.updates;window.open(e)},n.onClickUpgradeButton=function(){n.props.organizationId&&(u.gta.event({action:"trigger org-invite-member"}),u.gta.event({action:"invite member",control:"Navigation Tab",method:"click",page:"Organization Page"}))},n.onMarkDefaultPriviledge=function(){Ze(),n.setState({hasVisiteDefaultPriviledgeProvider:!0})},n.isHide=function(){return!n.props.organizationId},n.pageHeaderParams=n.getPageHeaderParams(n.props.location.pathname),n.state={showAppNumber:ze,leftAndRightWidth:0,hasVisiteDefaultPriviledgeProvider:Qe()},n}return i.d(t,e),t.prototype.componentDidMount=function(){this.setShowAppNumber(),window.addEventListener("resize",this.onWindowResize)},t.prototype.componentWillUpdate=function(e){this.props.location.pathname!==e.location.pathname&&(this.pageHeaderParams=this.getPageHeaderParams(e.location.pathname),this.setShowAppNumber())},t.prototype.componentWillUnmount=function(){this.onWindowResize.cancel(),window.removeEventListener("resize",this.onWindowResize)},t.prototype.getOrganization=function(){var e=this.props,t=e.organizationId;return e.organizations.find(function(e){return e._id===t})},t.prototype.isEmptyOrgnizationList=function(){return 0===this.props.organizations.length},t.prototype.getPageHeaderParams=function(e){var t=Object(w.e)(e,{path:E()});if(t)return{pageType:o.Search,pageParams:t.params};var n=Object(w.e)(e,{path:S()});return n?{pageType:o.Project,pageParams:n.params}:void 0},t.prototype.renderSearchBar=function(e){return s.createElement(R.a,{organization:e,onSelect:this.props.onSelectResult})},t.prototype.renderObjectCreator=function(){var e=this.getOrganization();if(!e)return null;var t=c.pick(this.props,["onOpenTaskCreator","onOpenFileCreator","onOpenEventCreator","onOpenPostCreator","onOpenProjectCreator","openMoreEntryModal"]),n=e._id,r=this.props.creatorApps,o=fe.OrganizationAccess.hasMemberAuthority(n),a=fe.OrganizationAccess.hasPermission(n,"organization.post.project");return Boolean(a||o||r.length>0)?s.createElement(F,i.a({},t,{creatorApps:r,canCreateProject:a,canCreateObject:o,organization:e})):null},t.prototype.renderReleaseRibbon=function(){return y.a.FEATURES.showReleaseRibbon&&this.props.hasNewVersion&&s.createElement("div",{className:et["release-ribbon"],onClick:this.onReleaseRibbonClick},s.createElement("span",null,p.get("system.bar.release.ribbon")))},t.prototype.renderUserInfo=function(){var e=tt.parse(this.props.location.search.slice(1)).isNew,t=c.pick(this.props,"openUserSettings","organizations","organizationId");return s.createElement(Se,i.a({},t,{isNew:e,showUpgradeItem:!this.props.showUpgradeBtn}))},t.prototype.renderNavigationBreadCrumbs=function(e){var t;if(this.pageHeaderParams){var n=this.pageHeaderParams,o=n.pageType,a=n.pageParams,c=r[o],l=i.a({},this.props.getPageHeaderInfo(o)(a),{isGhost:this.props.isGhost});t=s.createElement(O.ErrorBoundary,null,s.createElement(c,i.a({},l)))}else t=null;return s.createElement(J,{isGhost:this.props.isGhost,organizationId:e&&e._id,pageHeader:t})},t.prototype.renderNavLeft=function(e){var t=!!e&&fe.OrganizationAccess.hasGuestAuthority(e._id)?e:void 0;return s.createElement("div",{className:et["system-bar-left"]},this.renderDock(t),this.renderNavigationBreadCrumbs(t))},t.prototype.renderTopNavigation=function(e){return!!e&&s.createElement(Be,{width:this.state.leftAndRightWidth,showNumber:this.state.showAppNumber,organization:e})},t.prototype.renderControlBar=function(e){void 0===e&&(e=!1);var t=c.pick(this.props,["inboxUnread","inboxHasUnread","chatUnread","onHelperOpen"]);return s.createElement(Re,i.a({},t,{helpOnly:e}))},t.prototype.shouldRenderUpgradeMenu=function(e){var t=this.props.organizationId;return!(!this.props.showUpgradeBtn||y.a.FREE||t&&!fe.OrganizationAccess.hasMemberAuthority(t))&&(!e||!v.Payment.create(e.plan).isPaid)},t.prototype.renderUpgradeMenu=function(e){if(!this.shouldRenderUpgradeMenu(e))return null;var t=this.props.organizationId;return fe.OrganizationAccess.hasPermission(t,"organization.post.member")?s.createElement("div",{className:et["upgrade-button"],onClick:this.onClickUpgradeButton},p.get("invite")):null},t.prototype.renderPriviledgeProvider=function(e){var t=this;return e?[function(){return!y.a.FREE&&["us","us-ga"].indexOf(u.env)<0},function(){return!t.state.hasVisiteDefaultPriviledgeProvider},function(){return new Date(e.created).valueOf()>new Date("2019-06-01").valueOf()},function(){return fe.OrganizationAccess.hasAdminAuthority(e._id)},function(){var t=v.OrganizationPayment.create(e.plan);return t.isPaid&&(t.memberQuota<=50&&_.Version.isEnterpriseBasic(t)||t.memberQuota<=20&&_.Version.isEnterprisePro(t))}].every(function(e){return e()})&&s.createElement(Ye,{onQuit:this.onMarkDefaultPriviledge}):null},t.prototype.renderNavMiddle=function(e){return s.createElement("div",{className:et["system-bar-middle"]},!this.isHide()&&this.renderSearchBar(e))},t.prototype.renderNavRight=function(e){return this.isEmptyOrgnizationList()?s.createElement("div",{className:et["system-bar-right"]},this.renderControlBar(!0),this.renderUserInfo()):s.createElement("div",{className:et["system-bar-right"]},s.createElement("div",{className:et["system-bar-right-content"],ref:this.leftRef},this.renderReleaseRibbon(),s.createElement(qe,null),this.renderPriviledgeProvider(e),!this.isHide()&&this.renderObjectCreator()),this.renderTopNavigation(e),s.createElement("div",{className:et["system-bar-right-content"],ref:this.rightRef},this.renderControlBar(),this.renderUpgradeMenu(e),this.renderUserInfo()))},t.prototype.renderDock=function(e){return e&&s.createElement(he,{organization:e})},t.prototype.renderLogo=function(){return s.createElement("span",{className:et.logo})},t.prototype.renderLogControl=function(){return s.createElement("div",{className:et["log-control"]},s.createElement(g.TextButton,{className:et["log-control-login"],onClick:this.onLoginClick},p.get("system.bar.ghost.login")),s.createElement(g.TextButton,{className:et["log-control-register"],onClick:this.onRegisterClick},p.get("system.bar.ghost.register")))},t.prototype.renderGhostNavBar=function(){return s.createElement(s.Fragment,null,this.renderNavLeft(),this.renderLogControl())},t.prototype.renderSystemBar=function(){var e=this.getOrganization(),t=!!e&&fe.OrganizationAccess.hasMemberAuthority(e._id)?e:void 0;return s.createElement(s.Fragment,null,this.renderNavLeft(e),s.createElement("div",null),this.renderNavMiddle(e),this.renderNavRight(t))},t.prototype.renderNavBar=function(){return this.props.isGhost?this.renderGhostNavBar():this.renderSystemBar()},t.prototype.render=function(){var e,t=m()(et["system-bar"],((e={})[et["system-bar-project"]]=!!this.pageHeaderParams&&this.pageHeaderParams.pageType===o.Project,e));return s.createElement("div",{className:t},this.renderNavBar())},t}(s.PureComponent),ot=Object(f.connect)(function(e){return{creatorApps:Object(U.d)(e),location:e.router.location}})(rt);n.d(t,"SystemBar",function(){return ot})},YsJsuHrW:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("vmWJWrVe"),i=n.n(o),s=n("q1tIBJhx"),a=n("tLZJUYWX"),c=n("GESwhXbR"),l=n("BzGHEctR"),u=n("TSYQbtd+"),p=n.n(u),d=n("wd/RKGTj"),h=n.n(d),m=n("sa1Ed382"),f=3,g=function(e){function t(t){var n=e.call(this,t)||this;return n.flipTest=function(){var e=n.props,t=e.abtestName,o=e.forceRefresh;n.state.isSubmitting||(n.setState(r.a({},n.state,{isSubmitting:!0})),l.labs.flipTest(t).then(function(e){m.gta.event({action:"switch lab function",category:e?"open":"close"}),n.setState(r.a({},n.state,{isSubmitting:!1,needConfirm:!1})),c.Toast.success({message:e?a.get("labs.essage.enable.success"):a.get("labs.essage.disable.success"),description:o?a.get("labs.essage.refresh.hint",""+f):void 0}),o&&setTimeout(function(){return window.location.reload()},1e3*f)}).catch(function(){n.setState(r.a({},n.state,{isSubmitting:!1}))}))},n.handleClickFlipTest=function(){!!n.props.enabled?n.setState(r.a({},n.state,{needConfirm:!0})):n.flipTest()},n.handleConfirmModalVisibleChange=function(e){n.setState(r.a({},n.state,{needConfirm:e}))},n.state={needConfirm:!1,isSubmitting:!1},n}return r.d(t,e),t.prototype.renderOfflineTips=function(){if(!this.props.downTime)return null;var e=h()(this.props.downTime);return s.createElement("div",{className:"labs-test-offline-tips"},s.createElement(c.Notice,{type:"warning",closable:!1,message:a.get("labs.test.offline.tips",e.format("YYYY-MM-DD")),defaultOpened:!0}))},t.prototype.renderScreenshot=function(){var e=this.props,t=e.screenshots,n=e.onScreenshotClick;return(t||[]).map(function(e,t){return s.createElement("div",{key:t+"-"+e,className:"labs-test-screenshot",onClick:function(){n&&n(e)}},s.createElement("img",{src:e}))})},t.prototype.renderScreenshots=function(){var e=this.props.screenshots;return e&&0!==e.length?s.createElement("div",{className:"labs-test-screenshots"},this.renderScreenshot()):null},t.prototype.renderSwitchOFFConfirm=function(){var e=this.state,t=e.needConfirm,n=e.isSubmitting,r=this.props.name;return t?s.createElement(c.Modal,{center:!0,opened:t,className:"labs-switch-off-confirm-modal",titleCls:"labs-switch-off-confirm-modal-title",title:a.get("labs.switch.off.confirm.modal.title",r),onVisibleChange:this.handleConfirmModalVisibleChange},s.createElement("p",{className:"labs-switch-off-confirm-modal-content"},a.get("labs.switch.off.confirm.modal.content")),s.createElement(c.Button,{className:"labs-switch-off-confirm-modal-button",onClick:this.flipTest,disabled:n},a.get("labs.switch.off.confirm.modal.confirm"))):null},t.prototype.render=function(){var e=this.props,t=e.name,n=e.enabled,r=e.description,o=e.locked,i=p()("labs-test-switch-btn",{"switch-off":n}),l=o?null:s.createElement(c.Button,{type:"secondary",className:i,loading:this.state.isSubmitting,onClick:this.handleClickFlipTest},n?a.get("close"):a.get("open"));return s.createElement("div",{className:"labs-test-item"},s.createElement("header",{className:"labs-test-header"},s.createElement("p",{className:"labs-test-name"},t),l),this.renderOfflineTips(),s.createElement("p",{className:"labs-test-description"},r),this.renderScreenshots(),this.renderSwitchOFFConfirm())},t}(s.PureComponent),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modalStyle={width:"auto"},t.modalBodyStyle={paddingLeft:0,paddingRight:0,paddingBottom:0},t.handleClose=function(){var e=t.props.onVisibleChange;e&&e(!1)},t}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.imageUrl,n=e.onVisibleChange;return s.createElement(c.Modal,{closeable:!1,opened:!!t,onVisibleChange:n,style:this.modalStyle,bodyStyle:this.modalBodyStyle,className:"labs-previewer-modal",titleCls:"labs-previewer-title",containerCls:"labs-previewer-container"},s.createElement("div",null,s.createElement("img",{src:this.props.imageUrl})),s.createElement(c.IconButton,{className:"labs-previewer-close",color:"gray",name:"remove",onClick:this.handleClose}))},t}(s.PureComponent),b=n("YByE0VpC"),y=function(e){function t(t){var n=e.call(this,t)||this;return n.labsSubscription=null,n.handleAlertClose=function(){n.setState(r.a({},n.state,{showSLAWarning:!1})),Object(b.e)("hideSLAWarning",!0)},n.handleScreenshotClick=function(e){n.setState(r.a({},n.state,{preivewShotUrl:e}))},n.handleScreenshotVisibleChange=function(e){e||n.setState(r.a({},n.state,{preivewShotUrl:""}))},n.state={preivewShotUrl:"",showSLAWarning:!Object(b.d)("hideSLAWarning"),onlineTests:l.labs.onlineTests},Object(b.g)(),Object(b.f)(),n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.labsSubscription=l.labs.notify$.subscribe(function(){e.setState(r.a({},e.state,{onlineTests:l.labs.onlineTests}))})},t.prototype.componentWillUnmount=function(){this.labsSubscription&&this.labsSubscription.unsubscribe()},t.prototype.renderPlaceholder=function(){return s.createElement("div",{className:"labs-no-tests-exist"},s.createElement("div",{className:"labs-no-tests-illustration"}),a.get("labs.no.tests.placeholder"))},t.prototype.renderAlert=function(){return Object(b.d)("hideSLAWarning")?null:s.createElement("div",{className:"labs-alert"},s.createElement("p",null,a.get("labs.no.sla.alert")),s.createElement(c.IconButton,{name:"remove",className:"labs-alert-mute-btn",onClick:this.handleAlertClose}))},t.prototype.renderTests=function(){var e=this,t=this.state.onlineTests;return 0===t.length?this.renderPlaceholder():t.map(function(t){return s.createElement(g,r.a({key:t.abtestName,onScreenshotClick:e.handleScreenshotClick},t))})},t.prototype.renderScreenshotPreviewModal=function(){var e=this.state.preivewShotUrl;return e?s.createElement(v,{imageUrl:e,onVisibleChange:this.handleScreenshotVisibleChange}):null},t.prototype.render=function(){var e=this.state.showSLAWarning;return s.createElement("div",{className:"labs-panel"},e&&this.renderAlert(),s.createElement("div",{className:"labs-test-container"},this.renderTests()),this.renderScreenshotPreviewModal())},t}(s.PureComponent);n("577sg96d");var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"viewName",{get:function(){return"PersonalSettingsLabsView"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"personal-settings-labs-view"},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.render()},t.prototype.render=function(){return this.requestReactView(this.el,y),this},t}(i.a);n.d(t,"PersonalSettingsLabsView",function(){return k}),n.d(t,"checkTestsChanged",function(){return b.a}),n.d(t,"labsHasNewTest$",function(){return b.c}),n.d(t,"getOnboardingtest",function(){return b.b})},"YzJ1+ZsV":function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;s=n("sa1Ed382"),i=n("RLD3BeS/").ToastWithObject,o=n("hGNqppva"),r=n("LqEctW6J"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="UnarchivedMenuView",t.prototype.className="unarchived-menu-view",t.prototype.popoverTitle="",t.prototype.events={"submit .cancel-form":"unarchiveModelObject"},t.prototype.initialize=function(e){return null==e&&(e={}),e.currentModel?(this.options=e,this.currentModel=this.options.currentModel,t.__super__.initialize.apply(this,arguments)):this},t.prototype.render=function(){var e,t,n;return"archive"===(n=this.currentModel.name)&&(n=this.currentModel.get("boundToObjectType")),t="work"===n,this.$el.html(r({isFile:t,isSubtask:"function"==typeof(e=this.currentModel).isSubtask?e.isSubtask():void 0})),this},t.prototype.unarchiveModelObject=function(e){var t,n;return e.preventDefault(),s.gta.event({action:"unarchived content",type:this.options.type||this.currentModel.get("objectType")}),t={_stageId:this.options.stageId?this.options.stageId:void 0,_taskId:this.options._taskId,success:(n=this,function(){var e;return i.unarchive(n.currentModel),null!=(e=n.options)&&"function"==typeof e.success&&e.success(),n.remove()})},this.currentModel[this.currentModel.get("isArchived")?"unarchive":"unarchiveObject"](t),this},t}()},YzcFctrT:function(e,t,n){e.exports=n("IrIsz1ep")},"Z+A7b00p":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("GESwhXbR"),c=n("OcUPLOSr"),l=n("4C11Q7Si"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="cell-title",t}return r.d(t,e),t.prototype.renderSortingBadge=function(){var e,t=this.props.sortOrder;if(!t)return null;switch(t){case c.SortOrder.DESC:e="triangle-down";break;case c.SortOrder.ASC:e="triangle-up";break;default:return null}return o.createElement(a.Icon,{className:l[this.rootClassName+"__sorting-badge"],name:e})},t.prototype.renderTitle=function(){var e=o.createElement("span",{className:l[this.rootClassName+"__inner"]},this.props.title);return this.props.tooltip?o.createElement(a.Tooltip,{title:this.props.tooltip},e):e},t.prototype.render=function(){var e=s()(this.props.className,l[this.rootClassName]);return o.createElement("div",{className:e},this.renderTitle(),this.renderSortingBadge())},t}(o.PureComponent)},Z0LNo3tR:function(e,t){e.exports=function(e){return'<span class="icon icon-remove cross-button"></span><video class="obd-video" src="'+e.url+'" autoplay controls></video>'}},Z5fnzllY:function(e,t){e.exports=function(e){var t='<div class="previewer-updating ';return e.isRawStriker&&(t+="only-file"),t+='"> <div class="previewer-updating-tips"> <span class="icon icon-arrow-up"></span> <span class="previewer-updating-tips-message">'+tb_i18n.get("previewer.updating")+'</span> <span class="previewer-updating-tips-progress">'+e.percent+"%</span> </div></div>"}},Z71XTHUQ:function(e,t,n){e.exports={"status-todobox-taskflow":"status-todobox-taskflow__28sj"}},Z7VmBAXA:function(e,t,n){e.exports={trigger:"trigger__agf6","trigger-icon":"trigger-icon__GOQ2","trigger-toggler":"trigger-toggler__2bNH","trigger-name":"trigger-name__3gKT",selector:"selector__K3Rw","selector-label":"selector-label__3RcB","selector-name":"selector-name__2O6v","selector-trigger":"selector-trigger__2b9i",hint:"hint__uw_6",submit:"submit__3tIe",main:"main__26w5","testgroup-selector-wrapper":"testgroup-selector-wrapper__31L1"}},ZCq35AYP:function(e,t,n){e.exports={root:"root__22TU",calendar:"calendar__c22I",board:"board__3vGZ",view:"view__3Yt0","error-fallback":"error-fallback__1Osb","error-fallback-sidebar":"error-fallback-sidebar__GeHz","error-fallback-board":"error-fallback-board__23QG","error-fallback-calendar":"error-fallback-calendar__3daW","error-fallback-placeholder":"error-fallback-placeholder__ST3-",loading:"loading__2haX"}},ZFupaTh7:function(e,t,n){"use strict";var r=n("A8p3utT7");n.d(t,"ExportModal",function(){return r.a});var o=n("WdDUBogX");n.d(t,"LSSelectedFieldsHelper",function(){return o.a});n("oaEIIoHT")},ZG23DIrl:function(e,t,n){"use strict";n.r(t),n.d(t,"DisplaySettings",function(){return f});var r=n("mrSGxOB2"),o=n("17x9q+7Q"),i=n("q1tIBJhx"),s=n("TSYQbtd+"),a=n.n(s),c=n("tLZJUYWX"),l=n("2qRnoGmE"),u=n.n(l),p=u.a.DN_SITE_URL+"/videos/open_window_mode_slide.mov",d=u.a.DN_SITE_URL+"/videos/open_window_mode_window.mov",h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPlay=function(){t.video.loop=!0,t.video.play()},t.stopPlay=function(){t.video.pause(),t.video.currentTime=0},t.setRefVideo=function(e){t.video=e},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.props.isPlay&&this.startPlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.isPlay!==e.isPlay&&(e.isPlay?this.startPlay():this.stopPlay())},t.prototype.render=function(){return i.createElement("video",{muted:!0,preload:"auto",ref:this.setRefVideo,src:this.props.url,width:"260"})},t}(i.PureComponent),m=function(e){return i.createElement("div",{className:a()("showcase-root",e.isActive?"is-active":null),onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},i.createElement("div",{className:"showcase-title"},e.title),e.children?i.createElement("div",{className:"showcase-content"},e.children):null)},f=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChooseTaskModeSlide=function(){n.props.onUpdateTaskMode("slide")},n.handleChooseTaskModeWindow=function(){n.props.onUpdateTaskMode("window")},n.handleVideoPlay=function(e){return function(){n.setState({taskMode:e})}},n.handleVideoStop=function(){n.setState({taskMode:null})},n.state={taskMode:null},n}return r.d(t,e),t.prototype.render=function(){var e=this.props.taskMode;return i.createElement("div",{className:"personal-settings-display-mode"},i.createElement("section",null,i.createElement("h4",{className:"section-title"},c.get("personal.settings.display.taskMode.title")),i.createElement("div",{className:"section-content"},i.createElement(m,{isActive:"window"===e,onClick:this.handleChooseTaskModeWindow,onMouseEnter:this.handleVideoPlay("window"),onMouseLeave:this.handleVideoStop,title:c.get("personal.settings.display.taskMode.window.text")},i.createElement(h,{isPlay:"window"===this.state.taskMode,url:d})),i.createElement(m,{isActive:"slide"===e,onClick:this.handleChooseTaskModeSlide,onMouseEnter:this.handleVideoPlay("slide"),onMouseLeave:this.handleVideoStop,title:c.get("personal.settings.display.taskMode.slide.text")},i.createElement(h,{isPlay:"slide"===this.state.taskMode,url:p})))))},t.propTypes={onUpdateProjectMode:o.func,onUpdateTaskMode:o.func,projectMode:o.string,taskMode:o.string},t}(i.Component)},ZISfHezt:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("a+N5u/Cl"),a=n.n(s),c=n("tLZJUYWX"),l=n.n(c),u=n("GESwhXbR"),p=n("h6BO7+cQ");n("AucP5D8q");var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setPopupRef=function(e){t.popupRef=e},t.choose=function(e){t.popupRef.close(),t.props.onChoose(e)},t}return r.d(t,e),t.prototype.render=function(){var e=this,t=i.a.createElement(u.TextButton,{color:"blue"},l.a.get("event.reschedule")),n=this.props,o=n.recommendedDates,s=n.otherAvailableDates,c=0===o.length,d=0===s.length,m=(new Date).toISOString(),f=function(e){return function(t){var n=Object(p.assemble)(r.a({},t,{now:e}));return n.startDateString+" - "+n.endDateString}}(m),g=c?null:h(l.a.get("event.schedule.recommend"),o,f,this.choose),v=d?[]:function(e,t){var n=a.a.groupBy(e,function(e){return t(e)});return a.a.pairs(n)}(s,function(e){return function(t){var n=t.startDate;return Object(p.getDateStr)(n,e)}}(m)).map(function(t){var n=r.f(t,2),o=n[0],i=n[1];return h(o,i,f,e.choose)}),b=g?r.h([g],v):v;return i.a.createElement(u.PopupMenu,{ref:this.setPopupRef,className:"reschedule-menus",main:0,trigger:t,placement:"bottomLeft",titleCls:"reschedule-menus-popup-title"},i.a.createElement(u.PopupMenuView,{className:"reschedule-menus-popup-view",index:0,title:l.a.get("event.reschedule.title")},i.a.createElement(u.Menu,{className:"thin-scroll"},y(b,i.a.createElement(u.Separator,null)))))},t}(i.a.PureComponent),h=function(e,t,n,o){var s=i.a.createElement("div",{className:"reschedule-menus-popup-view-group-title"},e),a=t.map(function(e){var t=n(e),s={className:"reschedule-menus-menu-item",onClick:function(){return o(e)}};return i.a.createElement(u.MenuItem,r.a({key:t},s),t)});return i.a.createElement(i.a.Fragment,{key:e},s,a)},m=n("aADxT37/"),f=n.n(m),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderNotice=function(e){if(!e)return l.a.get("event.conflict.detect.none");var t=this.props.conflictUsers.map(function(e){var t=e._id,n=e.name;return i.a.createElement("span",{key:t},n)});return i.a.createElement(i.a.Fragment,null,b(t),"en"===l.a.getLanguage()?" ":"",l.a.get("event.conflict.detect.exist"))},t.prototype.render=function(){if(this.props.isLoading)return i.a.createElement("div",{className:f.a.notice},l.a.get("event.conflict.detect.loading"));var e=this.props,t=e.conflictUsers,n=(e.isLoading,r.g(e,["conflictUsers","isLoading"])),o=t.length>0,s=o&&(n.recommendedDates.length>0||n.otherAvailableDates.length>0),a=o?f.a.conflict:f.a["no-conflict"];return i.a.createElement("div",{className:f.a.notice},i.a.createElement(u.Icon,{name:o?"circle-info-o":"circle-check-o",className:a}),i.a.createElement("div",{className:f.a["notice-text"]},this.renderNotice(o),s&&l.a.get("comma"),s&&i.a.createElement(d,r.a({},n))))},t}(i.a.PureComponent),v=i.a.createElement("span",{style:{whiteSpace:"pre"}}," "),b=function(e){var t=e.length,n=a.a.min([t,4]);if(t<=0)return null;var r=null;if(1===t)r=e[0];else if(t>1){var o=e[n-1],s=e.slice(0,n-1),c=l.a.get("common.seperator");r=i.a.createElement(i.a.Fragment,null,y(s,c),v,l.a.get("and"),v,o)}var u=n===t?null:l.a.get("n.others",t);return i.a.createElement(i.a.Fragment,null,r,v,u)},y=function(e,t){return e.map(function(e,n){return 0===n?e:i.a.createElement(i.a.Fragment,{key:e.key},t,e)})},k=n("4c1CS0b3"),_=n("wd/RKGTj"),w=n.n(_),C=n("s0r7VfKc"),S=n("gh8QIhMV");function E(e){if(e.isAllDay||e.recurrence&&e.recurrence.length>0)return!0;var t=e.startDate,n=e.endDate;return w()(n).diff(t,"hours")>=9}var T=function(e){var t=e._organizationId,n=e._projectId,o=e._eventId,i=e.involveMembers,s=e.involveGroups,a=e.involveTeams,c=r.g(e,["_organizationId","_projectId","_eventId","involveMembers","involveGroups","involveTeams"]),l=E(c),u=c.startDate,p=c.endDate,d=c.recurrence,h=c.isAllDay,m=c.isDefaultDate;return C.default.fetch.get("events/detect",{isDefaultDate:m,startDate:u,endDate:p,recurrence:d,isAllDay:h,omitRecommend:l,involveMembers:i,involveGroups:s,involveTeams:a,_organizationId:t||void 0,_projectId:n||void 0,_editingEventId:o}).map(function(e){var t=e.conflictUsers,n=e.extra;return{conflictUsers:t,recommendedDates:n.recommendedDates||[],otherAvailableDates:n.availableDates||[]}}).catch(function(){return k.Observable.empty()})},I=function(){function e(e){var t=this,n=e.render,o=e.extract;this.action$=new k.Observable(function(e){t.actionSubscriber=e}).share();var i=this.action$.switchMap(function(){return T(o())}).share(),s=k.Observable.merge(this.action$.mapTo(!0),i.mapTo(!1)).distinctUntilChanged(),a=k.Observable.combineLatest(i.startWith({}),s,function(e,t){return r.a({},e,{isLoading:t})});this.render$=a.do(n).catch(function(e){return Object(S.throwError)(e),k.Observable.empty()}),this.subscription=this.render$.subscribe()}return e.prototype.clear=function(){this.subscription&&this.subscription.unsubscribe()},e.prototype.asyncRender=function(){this.actionSubscriber.next()},e}();n.d(t,"Component",function(){return g}),n.d(t,"join",function(){return y}),n.d(t,"doOmitRecommend",function(){return E}),n.d(t,"eventConflictResolution",function(){return T}),n.d(t,"Module",function(){return I})},"ZKvdKH5+":function(e,t,n){e.exports=n.p+"images/turn-off.68e751a1.png"},"ZLvQ/AW4":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("GESwhXbR"),a=n("fqc9cz9t"),c=n.n(a),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){return function(n){t.props.onClick&&t.props.onClick(e,n)}},t}return r.d(t,e),t.prototype.render=function(){return i.a.createElement("div",{className:c.a["object-ellipsis-path"]},this.props.prefix,this.renderEllipsisDropdown(),this.renderRightList())},t.prototype.renderSeparator=function(){return i.a.createElement(s.Icon,{name:"chevron-right",className:c.a.separator})},t.prototype.renderEllipsisDropdown=function(){return this.shouldShowEllipsis()?i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Dropdown,{content:this.renderEllipsisDropdownContent(),nested:!0},i.a.createElement("div",{className:c.a.ellipsis},"…")),this.renderSeparator()):null},t.prototype.renderEllipsisDropdownContent=function(){var e=this,t=this.props.itemToString,n=this.getLeftList(),r=c.a["menu-item"],o=n.map(function(n,o){return i.a.createElement(s.MenuItem,{key:o,onClick:e.handleClick(n),className:r},t(n))});return i.a.createElement(s.Menu,null,o)},t.prototype.renderRightList=function(){var e=this,t=this.props,n=t.itemToString,r=t.onClick,o=this.getRightList(),s=c.a[r?"portion":"portion-text"];return o.map(function(t,r){var o=0===r?null:e.renderSeparator(),a=n(t),c=i.a.createElement("div",{className:s,onClick:e.handleClick(t),title:a},a);return i.a.createElement(i.a.Fragment,{key:r},o,c)})},t.prototype.getLeftList=function(){var e=this.props.list,t=this.getRightListMaxLength();return e.slice(t)},t.prototype.getRightList=function(){var e=this.props.list,t=this.getRightListMaxLength();return e.slice(0,t).reverse()},t.prototype.shouldShowEllipsis=function(){var e=this.props.list,t=this.getRightListMaxLength();return e.length>t},t.prototype.getRightListMaxLength=function(){return this.props.max||1/0},t.defaultProps={max:3,itemToString:function(e){return""+e}},t}(o.PureComponent);n.d(t,"a",function(){return l})},ZSQrvOOr:function(e,t,n){e.exports={submitContent:"submitContent__2sC-",submit:"submit__3Zen",label:"label__UL_L"}},"ZX+P9A1v":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k={}.hasOwnProperty;b=n("a+N5u/Cl"),y=n("tLZJUYWX"),g=n("YdqH4v7N"),v=n("vmWJWrVe"),p=n("85182E8g"),m=n("nL4olqOP"),d=n("BLZfz376"),c=n("1zTUTjkq").ObjectPickerProjectsView,o=n("Ydsl2KTY"),i=n("IIX4yb2G"),a=n("TDoJWZYw"),l=n("yyFmPRUj"),u=n("NUiYjMN+"),r=n("+Z9OF4Fq"),f=n("LxQDdmNp"),h=n("zlaFRclc"),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)k.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,v),t.prototype.className="object-picker-inner-view flex-horiz",t.prototype.viewName="ObjectPickerInnerView",t.prototype.events={"click .switch-handler":"handleSwitch"},t.prototype.initialize=function(e){var t,n,r,o,i,s,a;return this.exclude=null!=(t=e.exclude)?t:[],this.objectType=null!=(n=e.objectType)?n:"task",this.onClearInput=null!=(r=e.onClearInput)?r:function(){},this.onCreate=null!=(o=e.onCreate)?o:function(){},this.onProjectChange=null!=(i=e.onProjectChange)?i:function(){},this.onSelect=null!=(s=e.onSelect)?s:function(){},this.organizationId=e.organizationId,this.projectId=e.projectId,this.searchModel=e.searchModel,this.inSpecificProject=e.inSpecificProject,this.multi=e.multi,this.getInheritedInfo=e.getInheritedInfo,this.fetchInitial().then((a=this,function(e){return a.projectsCollection=e[0],a.organizationsCollection=e[1],a.projectTagsCollection=e[2],a.render()}))},t.prototype.fetchInitial=function(){var e;return e="project"===this.objectType&&"string"==typeof this.organizationId,Promise.all([new Promise(function(e,t){return m.fetch(0,{error:t,success:e})}),new Promise(function(e,t){return p.fetch(0,{error:t,success:e})}),e?d.fetchByOrganizationId(this.organizationId):Promise.resolve()])},t.prototype.getContentProps=function(){return{exclude:this.exclude,onClearInput:this.onClearInput,onCreate:this.onCreate,onSelect:this.onSelect,searchModel:this.searchModel}},t.prototype.handleChangeActive=function(e){return e.addClass("active").siblings().removeClass("active")},t.prototype.handleSwitch=function(e){return"project"===this.objectType?this.handleSwitchProjectTag(e):this.handleSwitchProject(e)},t.prototype.handleSwitchProjectTag=function(e){var t,n;return n=(t=$(e.currentTarget)).data("id"),this.handleChangeActive(t.parent()),this.onClearInput(),this.projectId=void 0,this.onProjectChange(),this.renderProjectContent(n)},t.prototype.handleSwitchProject=function(e){var t,n,r;return"string"==typeof e?(r=e,t=this.$(".switch-handler[data-id="+r+"]:first")):(r=(t=$(e.currentTarget)).data("id"),(n=t.data("organization-id"))===r&&(r=null)),this.handleChangeActive(t.parent()),this.onClearInput(),this.projectId=r,this.organizationId=n,this.onProjectChange(this.projectId,this.organizationId),this.renderObjectContent()},t.prototype.render=function(){if(this.$el.html(r()),this.setupScroll(this.$(".object-menu")),"project"===this.objectType?this.renderOrganizationProjectTags():this.renderProjects(),"string"==typeof this.projectId)return this.handleSwitchProject(this.projectId)},t.prototype.renderOrganizationProjectTags=function(){var e,t,n;return t=[["cell",{_id:"star",name:y.get("starred.projects")}],["cell",{_id:"personal",name:y.get("personal.projects")}]],e=this.organizationsCollection.toJSON().filter((n=this,function(e){return e._id===n.organizationId})).reduce(function(e){return function(t,n){var r;return 0===(r=e.projectTagsCollection.getSortedOrganizationProjectTagModelsByPos(n._id).map(function(e){return["cell",e.toJSON()]})).length?t:t.concat([["group",n]].concat(r))}}(this),[]),this.$(".object-menu").html(h({cells:t.concat(e)}))},t.prototype.renderProjects=function(){var e,t,n;return e=this.$(".object-menu"),this.inSpecificProject?(n=this.projectsCollection.get(this.projectId).toJSON(),e.html("<li> <a class='switch-handler active' data-id="+this.projectId+" data-organization-id="+n._organizationId+">"+n.name+"</a> </li>")):(t=this.projectsCollection.getGroupByOrganization(this.organizationsCollection,this.objectType).map(function(e){return Object.assign({},e,{projects:e.projects.map(function(e){return e.toJSON()})})}),e.html(f({projects:t})))},t.prototype.renderProjectContent=function(e){return this.renderContentView(c,{projectTagId:e,organizationId:this.organizationId})},t.prototype.renderObjectContent=function(){var e;return e=function(){switch(this.objectType){case"event":return o;case"file":return i;case"post":return a;case"task":return l;case"testcase":return u}}.call(this),this.renderContentView(e,{multi:this.multi,_projectId:this.projectId,_organizationId:this.organizationId,getInheritedInfo:this.getInheritedInfo})},t.prototype.renderContentView=function(e,t){var n,r;if(n=this.$(".object-content"),null!=(r=this.contentView)&&r.remove(),n.length>0&&e)return this.contentView=this.requestSubView(e,b.extend(this.getContentProps(),t)),n.html(this.contentView.$el)},t}(),b.extend(s.prototype,g),e.exports=s},ZXOnUJpY:function(e,t,n){"use strict";var r=n("kbitN9xC");n.o(r,"SwimTable")&&n.d(t,"SwimTable",function(){return r.SwimTable}),n.o(r,"Table")&&n.d(t,"Table",function(){return r.Table}),n.o(r,"TaskTablePrinter")&&n.d(t,"TaskTablePrinter",function(){return r.TaskTablePrinter});var o=n("23VHpif8");n.d(t,"Table",function(){return o.a});var i=n("7qsdOjBG");n.d(t,"TaskTablePrinter",function(){return i.D})},ZaifPgkD:function(e,t,n){"use strict";n.r(t);var r=n("4BeYQFX4"),o=n.n(r),i=n("IaFtV71y"),s=n.n(i),a=new o.a({id:"object-file",use:"object-file-usage",viewBox:"0 0 20 20",content:'<symbol viewBox="0 0 20 20" id="object-file"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#77C2F8" rx="2" /><path fill="#FFF" d="M11.4 4l3.1 3.1h-2.6a.5.5 0 0 1-.5-.5V4zm-.982 3a1 1 0 0 0 1 1H14.5v7a1 1 0 0 1-1 1h-7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h3.918v3z" /></g></symbol>'});s.a.add(a);t.default=a},Zfk35hIE:function(e,t,n){e.exports=n.p+"images/notification-counter.6ddb15b7.svg"},Zgk2zrTd:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("GESwhXbR"),c=n("6EY9/lIj"),l=n("XhpHwZVN");n("sIpwP/0f");var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.preprocess=function(e){var t=e.work,n=e.subtitle,r=e.thirdtitle,o=t[n]||"",i=t[r]||"";return o&&i&&(i="("+i+")"),{subValue:o,thirdValue:i}},t.prototype.nameRender=function(){var e=this.props,t=e.work,n=e.tooltip,r=t.fileName,i=t.fileType?t.fileType.length+3:0,s=o.createElement(c.a,{className:"work-item-name flex-horiz flex-vcenter",title:r,sliceIndex:r.length-i});return n?o.createElement(a.Tooltip,{title:r},s):s},t.prototype.render=function(){var e,t=this.props,n=t.work,i=t.subtitle,a=this.preprocess(this.props),c=a.subValue,u=a.thirdValue,p=s()("work-item-content",((e={})["with-subtitle"]=!!i,e));return o.createElement("div",{className:"work-item row-flex flex-vcenter"},o.createElement("header",{className:"work-item-icon"},o.createElement(l.WorkIcon,r.a({},n))),o.createElement("section",{className:p},this.nameRender(),o.createElement("div",{className:"work-info"},o.createElement("span",{className:"work-item-subtitle"},c),o.createElement("span",{className:"work-item-thirdtitle"},u))))},t.defaultProps={tooltip:!0},t}(o.PureComponent);n.d(t,"a",function(){return u})},ZiyDPH8B:function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;a=n("a+N5u/Cl"),c=n("sa1Ed382"),r=n("VuB9cZyl"),i=n("wu4EEviu"),s=n("8N+zwa3A"),o=n("nL4olqOP"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="works",t.prototype.boundToObjectType="parent",t.prototype.model=s,t.prototype.pageNum=50,t.prototype.orderBy=null,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listen()},t.prototype.checkIsVisible=function(e){var t,n,r,i,s;return n=(null!=(s=e.involveMembers)?s.indexOf(c.user.id):void 0)>-1,r="members"===e.visible,t=null!=(i=o.get(0).get(e._projectId))?i.hasPermission("projecttag.get.project.privacy"):void 0,n||r||t},t.prototype.listen=function(){var e;return t.__super__.listen.apply(this,arguments),this._boundToObjectId&&this.listenTo(c.PREFERENCE,"change:libraryOrder",function(){return this.reset(),this.hasMore=!0}),this.on("change:_parentId",(e=this,function(t){return e.remove(t.id)})),i.on("all",function(e){return function(t,n){var r,o,i;if((o=null!=n?n._parentId:void 0)&&(i=null!=(r=/\:change\:work\/(\w{24})/.exec(t))?r[1]:void 0)&&n&&e.checkIsVisible(n))return e._boundToObjectId!==o||e.get(i)?void 0:s.fetchT(i)(function(t,n){if(!t)return e.add(n)})}}(this))},t.prototype.sync=function(e,n,r){var o,i;switch(e){case"create":r.remove=!1,o=r.success||function(){},r.success=(i=this,function(e){var n,r,s;return a.each(e,function(e){var t;if((t=e.fileKey?i.findWhere({fileKey:e.fileKey}):i.findWhere({downloadUrl:e.downloadUrl}))&&!t.get("_id"))return t.set("_id",e._id)}),(n=null!=(r=e[0])?r._parentId:void 0)&&n!==i._boundToObjectId?null!=(s=t.find(n))&&s.add(e,{remove:!1}):i.set(e,{remove:!1}),o(e)})}return t.__super__.sync.apply(this,arguments)},t}()},ZkhtbhGT:function(e,t,n){var r,o,i,s,a,c,l;r=n("a+N5u/Cl"),l=function(e,t,n){return null==n&&(n=0),t||(t=r.find(e,function(e){return null===e._id})),t.children=r.sortBy(e.filter(function(e){return e._parentId===t._id}),"pos"),t.level=n,t.children.forEach(function(r){return r.style||(r.style=t.style||"icon-team-tie,#8193ba"),r.styleName=r.style.split(",")[0],r.styleColor=r.style.split(",")[1],l(e,r,n+1)}),t},i=function(e,t,n){return null==n&&(n=[]),t(e)&&n.push(e),e.children.forEach(function(e){return i(e,t,n)}),n},s=function(e,t){var n,s;return e.teams?((n=(s=i(t,function(t){return null!==t._parentId&&r.contains(e.teams,t._id)})).map(function(e){return o(e,s)})).forEach(function(e){return e.belongsTo=a(e)}),n):[]},o=function(e,t){return e.parent=r.find(t,function(t){return t._id===e._parentId}),e.parent&&o(e.parent,t),e},a=function(e){var t;for(t=[];e.parent;)t.unshift(e.parent.name),e=e.parent;return t.shift(),t.join(" ＞ ")},c=function(e){for(var t;e.parent&&null!==e.parent._parentId;)e=e.parent;return{styleName:(t=e._parentId?(e.style||"icon-team-tie,#8193ba").split(","):["icon-users","#3DA8F5"])[0],styleColor:t[1]}},e.exports={parseTree:l,getMemberTeams:s,getTeamBelongsTo:a,getTeamStyle:c}},ZnBpSyZV:function(e,t,n){e.exports=function(e){var t,r,o="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),i="";TagTemplate=n("bXbOecvn"),i+="<section> <header class='tag-group-list-header'> <span>"+tb_i18n.get("organization.tags")+"</span> <span class='icon icon-help hinted' data-title=\""+tb_i18n.get("organization.tag.group.list.hint")+"\"></span> </header> <ul class='tag-group-list'> ";var s=e.groups;if(s)for(var a,c=-1,l=s.length-1;c<l;){if(i+=" ",(a=s[c+=1]).category&&a.tags.length>0){if(i+=" <li> <div class='tag-group-title' data-id=\""+a.categoryId+"\"> <span class='tag-group-title-name hinted' data-title=\""+o(a.category.name)+'">'+o(a.category.name)+"</span> <span class='icon icon-circle-chevron-",a.folded?i+="up":i+="down",i+="-o tag-group-title-toggler'></span> </div> ",!a.folded){i+=" <ul class='tag-group'> ";var u=a.tags;if(u)for(var p,d=-1,h=u.length-1;d<h;)i+=" <li class='tag-item' data-id=\""+(p=u[d+=1])._id+'"> '+TagTemplate(p)+" </li> ";i+=" </ul> "}i+=" </li> "}i+=" "}return i+=" </ul></section>"}},ZoNjS4Nr:function(e,t,n){e.exports=n.p+"images/d_zhuakuang@2x.8329a52e.png"},Zvfygpg0:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("a+N5u/Cl"),a=n("/MKjzBat"),c=n("GESwhXbR"),l=n("x89q56rT"),u=n("wIa0soTd"),p=n("s0r7VfKc"),d=n("zXmn5Z7T"),h=n("lcbqmfsD"),m=n("YqUJfXDr"),f=n("DOZCBSCZ"),g=function(e){function t(t){var n=e.call(this,t)||this;return n.loadMembers=function(){n.subscription$&&n.subscription$.unsubscribe(),n.subscription$=p.default.fetch.expandPage(n.membersPageState,{mutate:!0}).subscribe(function(e){n.setState({hasMore:e.hasMore,members:e.result,isLoading:!1})})},n.onInviteClick=function(){n.setState(r.a({},n.state,{showInviteModal:!0}))},n.onInviteSubmit=function(e){n.props.onInvite(e).then(function(){n.membersPageState=p.default.getMembersInPages("group",n.props.group._id),n.loadMembers()}),n.setState(r.a({},n.state,{showInviteModal:!1}))},n.onRemoveClick=function(e){n.props.onRemoveClick(e).then(function(){n.membersPageState=p.default.getMembersInPages("group",n.props.group._id),n.loadMembers()})},n.onInviteModalVisibleChange=function(e){!e&&n.setState(r.a({},n.state,{showInviteModal:!1}))},n.state={showInviteModal:!1,members:[],isLoading:!0,hasMore:!1},n.membersPageState=p.default.getMembersInPages("group",n.props.group._id),n}return r.d(t,e),t.prototype.componentDidMount=function(){this.loadMembers()},t.prototype.componentWillUnmount=function(){this.subscription$.unsubscribe()},t.prototype.renderMemberInvite=function(){return this.props.canAddMember&&o.createElement("div",{className:"group-members-invite",onClick:this.onInviteClick},o.createElement(c.Icon,{name:"circle-plus",size:32}),o.createElement("span",null,i.get("group.members.invite")))},t.prototype.renderRemoveHandler=function(e){var t=this;return this.props.canRemoveMember&&e!==this.props.group._ownerId&&o.createElement(c.Tooltip,{title:i.get("group.members.remove.member")},o.createElement(c.IconButton,{name:"trash",onClick:function(){return t.onRemoveClick(e)}}))},t.prototype.renderMembers=function(){var e=this;return this.state.members.map(function(t){var n=t._userId;return o.createElement("li",{key:n,className:"group-members-item-wrapper"},o.createElement(d.a,{name:t.name,avatarUrl:t.avatarUrl,size:"medium"}),e.renderRemoveHandler(n))})},t.prototype.renderInviteModal=function(){return o.createElement(h.GroupAddMember,{groupId:this.props.group._id,organizationId:this.props.group._organizationId,opened:this.state.showInviteModal,onSubmit:this.onInviteSubmit,onVisibleChange:this.onInviteModalVisibleChange,organizationName:this.props.group.organization.name})},t.prototype.renderLoadMore=function(){return o.createElement(m.LoadMore,{onEnter:this.loadMembers,hasMore:this.state.hasMore,endWith:null})},t.prototype.renderLoading=function(){return this.state.isLoading&&o.createElement(f.a,null)},t.prototype.render=function(){return o.createElement("div",{className:"group-members"},o.createElement("h3",null,i.get("group.members",this.state.members.length)),o.createElement("ul",{className:"group-members-list thin-scroll"},this.renderMemberInvite(),this.renderMembers(),this.renderLoading(),this.renderLoadMore()),this.renderInviteModal())},t.defaultProps={canAddMember:!0,canRemoveMember:!0},t}(o.PureComponent);n("nOG//8Lj");var v=n("sa1Ed382"),b={markMute:l.markMute},y=function(e){function t(t){var n=e.call(this,t)||this;return n.refRemovePopup=function(e){n.removeDropdown=e},n.refQuitPopup=function(e){n.quitDropdown=e},n.onRemoveGroup=function(){n.removeDropdown.close(),n.props.onRemoveGroup()},n.onQuitGroup=function(){n.quitDropdown.close(),n.props.onQuitGroup()},n.onExitGroupInfo=function(){n.props.onExitGroupInfo(n.props.roomInfo)},n.onMarkMute=function(){n.props.markMute(n.props.roomInfo)},n.isGroupOwner=function(){return n.props.group._ownerId===v.user.id},n.onSubmit=function(){n.props.group.name.trim()!==n.state.name.trim()&&n.props.onSubmit(n.state.name.trim())},n.onChange=function(e){n.setState(r.a({},n.state,{name:e.name}))},n.state={name:n.props.group.name},n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=e.group;s.isEqual(t,this.props.group)&&this.setState({name:t.name})},t.prototype.renderGroupSettings=function(){return o.createElement(u.GroupSettings,{name:this.state.name,autoFocus:!1,organization:this.props.group.organization,isOrganizationSelectable:!1,showOrganization:!0,instantSubmit:!0,canModify:this.isGroupOwner(),onSubmit:this.onSubmit,onChange:this.onChange})},t.prototype.renderGroupMembers=function(){return o.createElement(g,{canAddMember:!0,canRemoveMember:this.isGroupOwner(),onRemoveClick:this.props.onRemoveMember,onInvite:this.props.onInviteMember,group:this.props.group})},t.prototype.renderMuteHandler=function(){return!(this.props.activedMessage&&this.props.activedMessage.isPseudo)&&this.props.roomInfo&&o.createElement("section",{className:"group-settings-mute"},o.createElement("label",null,i.get("group.info.mute.handler.label")),o.createElement(c.Switch,{size:"small",checked:this.props.roomInfo.isMute,onChange:this.onMarkMute}))},t.prototype.renderInfo=function(){return o.createElement("div",{className:"group-info-body flex-horiz"},o.createElement("div",{className:"group-setting-wrapper"},this.renderGroupSettings(),this.renderMuteHandler()),o.createElement("div",{className:"group-members-wrapper"},this.renderGroupMembers()))},t.prototype.renderRemoveHandler=function(){return o.createElement("a",{className:"group-info-handler"},o.createElement(c.Tooltip,{title:i.get("group.info.remove.group")},o.createElement(c.IconButton,{name:"trash",color:"gray"})))},t.prototype.renderQuitHandler=function(){return o.createElement("a",{className:"group-info-handler"},o.createElement(c.Tooltip,{title:i.get("group.info.quit.group")},o.createElement(c.IconButton,{name:"quit2",color:"gray"})))},t.prototype.getQuitPopupContent=function(){var e=this.isGroupOwner()?i.get("group.info.owner.quit.group.content"):i.get("group.info.quit.group.content");return o.createElement("div",{className:"group-info-quit-popup"},o.createElement("p",null,e),o.createElement(c.Button,{danger:!0,onClick:this.onQuitGroup},i.get("group.info.quit.group.confirm")))},t.prototype.getRemovePopupContent=function(){return o.createElement("div",{className:"group-info-remove-popup"},o.createElement("p",null,i.get("group.info.remove.group.content")),o.createElement(c.Button,{danger:!0,onClick:this.onRemoveGroup},i.get("group.info.remove.group.confirm")))},t.prototype.renderRemovePopup=function(){return this.isGroupOwner()&&o.createElement(c.TitledDropdown,{ref:this.refRemovePopup,title:i.get("group.info.remove.group.title"),content:this.getRemovePopupContent()},this.renderRemoveHandler())},t.prototype.renderQuitPopup=function(){return o.createElement(c.TitledDropdown,{ref:this.refQuitPopup,title:i.get("group.info.quit.group.title"),content:this.getQuitPopupContent()},this.renderQuitHandler())},t.prototype.renderHeader=function(){return o.createElement("header",{className:"group-info-header"},o.createElement(c.IconButton,{name:"chevron-left",color:"gray",onClick:this.onExitGroupInfo}),o.createElement("h2",null,i.get("group.info.title")),o.createElement("div",{className:"group-info-handlers"},this.renderQuitPopup(),this.renderRemovePopup(),o.createElement(c.IconButton,{name:"remove",color:"gray",onClick:this.props.onCloseChat})))},t.prototype.render=function(){return o.createElement("div",{className:"group-info flex-vert"},this.renderHeader(),this.renderInfo())},t}(o.PureComponent),k=Object(a.connect)(function(e){return{roomInfo:e.ui.room.room[0],activedMessage:e.ui.chat.activedChannel}},b)(y);n.d(t,"GroupInfo",function(){return k}),n("d6Tuyyud")},ZwFhTFL5:function(e,t){},ZwNv0eBs:function(e,t){e.exports=function(e){var t='<div class="previewer-header-wrapper"></div><div class="previewer-main"> <div class="previewer-body"> <div class="handlers-wrapper"></div> <div class="previewer-content-wrapper"></div> </div> ';return e.isRawStriker||(t+=' <div class="activities-container"> <div class="previewer-panel"> <section class="detail-content scrollable thin-scroll"> <div class="previewer-versions-wrap"></div> <div class="previewer-infos-wrap"></div> <section class="detail-activities-wrap"></section> </section> <footer class="activity-creator-wrapper"></footer> </div> </div> '),t+="</div>"}},ZxHluEX4:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("a+N5u/Cl"),i=n.n(o),s=n("q1tIBJhx"),a=n.n(s),c=n("TSYQbtd+"),l=n.n(c),u=n("cXOPvvXb"),p=n("/LaY8A3m"),d=n.n(p),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){var n=t.props.setContainerScrollTop,r=e.currentTarget===e.target;n&&r&&n(u.f.scrollTop)},t}return r.d(t,e),t.prototype.render=function(){var e=l()(this.props.className,d.a["detail-head"],{disabled:this.props.disabled,clickable:this.showDivisionCaption()});return a.a.createElement("div",{className:e,onClick:this.handleClick},this.renderHeadLeft(),this.renderHeadRight())},t.prototype.renderHeadLeft=function(){return a.a.createElement("div",{className:d.a["detail-head__left"]},a.a.createElement("div",{className:d.a["detail-head__object-type"]},this.props.objectType),a.a.createElement("div",{className:d.a["detail-head__object-caption"]},this.renderObjectCaption()))},t.prototype.renderHeadRight=function(){return a.a.createElement("div",{className:d.a["detail-head__right"]},this.props.actionList)},t.prototype.renderObjectCaption=function(){return a.a.createElement(a.a.Fragment,null,this.renderObjectCaptionDivision(),this.renderObjectCaptionDefault())},t.prototype.renderObjectCaptionDefault=function(){return a.a.createElement("div",{className:d.a["default-caption"]},this.props.objectCaption)},t.prototype.renderObjectCaptionDivision=function(){if(this.props.disabled)return null;var e=this.getDivisionCaption(),t=e.caption,n=e.placeholder,r=t||n,o=l()(d.a["division-caption"],{empty:!t});return a.a.createElement("div",{className:o},r)},t.prototype.getDivisionCaption=function(){var e,t,n,o,s=this.props,a=s.divisionVisibilityMap,c=s.divisionCaptionGetter,l=i.a.keys(a);try{for(var u=r.i(r.h(l).reverse()),p=u.next();!p.done;p=u.next()){var d=!a[g=p.value],h=c(g);if(d&&h)return{caption:h}}}catch(v){e={error:v}}finally{try{p&&!p.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}try{for(var m=r.i(l),f=m.next();!f.done;f=m.next()){var g;if(h=c(g=f.value))return{placeholder:h}}}catch(b){n={error:b}}finally{try{f&&!f.done&&(o=m.return)&&o.call(m)}finally{if(n)throw n.error}}return{}},t.prototype.showDivisionCaption=function(){return!this.props.disabled&&!!this.getDivisionCaption().caption},t}(s.PureComponent),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderContent=function(e){return a.a.createElement(h,r.a({},t.props,e))},t}return r.d(t,e),t.prototype.render=function(){return a.a.createElement(u.e.Consumer,{children:this.renderContent})},t}(s.PureComponent);n.d(t,"a",function(){return m})},ZzdZwz82:function(e,t,n){var r,o={}.hasOwnProperty;r=n("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="application",t}()},"a+HTX0Vb":function(e,t,n){e.exports={"add-button-text":"add-button-text__3ESU"}},a3xD06cl:function(e,t,n){e.exports={"search-bar-result-content-footer":"search-bar-result-content-footer__1RRW","guide-icon-chevron":"guide-icon-chevron__12vP"}},a4lfCy7a:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("s0r7VfKc"),o={getOrganizationTeams:function(e){return r.default.fetch.get("v2/organizations/"+e+"/teams")},getOrganizationGroups:function(e){return r.default.fetch.get("v2/organizations/"+e+"/groups")},getSubTeams:function(e){return r.default.fetch.get("teams/"+e+"/subTeams")},getTeamMembers:function(e,t){return void 0===t&&(t=""),r.default.fetch.get("v3/teams/"+e+"/members",{pageToken:t,pageSize:30})},getGroupMembers:function(e,t){return void 0===t&&(t=""),r.default.fetch.get("v3/groups/"+e+"/members",{pageToken:t,pageSize:30})},searchMembers:function(e,t,n){return r.default.fetch.get("projecttags/"+e+"/search-members",{_organizationId:t,q:n})},recommendMembers:function(e,t){return r.default.fetch.get("projecttags/"+e+"/recommend-members",{_organizationId:t})}}},a5ReMzFe:function(e,t,n){e.exports={"navigation-page-header-title":"navigation-page-header-title__jGhP","navigation-page-header-project":"navigation-page-header-project__Fmpe","project-toggler":"project-toggler__2QQf","project-toggler-name":"project-toggler-name__1sAv","project-toggler-toggler":"project-toggler-toggler__3z1Z","star-handler":"star-handler__35_4","public-label":"public-label__37Mo"}},a8ZOy5i7:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N=function(e,t){return function(){return e.apply(t,arguments)}},O={}.hasOwnProperty;k=n("a+N5u/Cl"),x=n("sa1Ed382"),g=n("vmWJWrVe"),P=n("tLZJUYWX"),s=n("85182E8g"),d=n("nL4olqOP"),h=n("//SEpMEE"),o=n("Wd/8sFUG"),v=n("OmupbwLD"),y=n("YPgjEQB8"),a=n("WVgvAmgj"),c=n("OE+cJKnQ"),l=n("tGfyIDI3"),w=n("iEgAZGI+").creator,b=n("8N+zwa3A"),p=n("77NnVLwu"),f=n("FoX6irlC"),i=n("hg6sBHEu"),u=n("F1nFexqL"),T=n("NtzEC3Pa"),m=n("Ys3yUe9R").SystemBar,M=n("Io315hVL"),C=M.focusOnSearch,_=M.assignWorkspaceData,j=n("WwBiRI+a"),I=j.projectUpgradeRequired,E=j.openOrganizationUpgradeProjectModal,S=n("PjwvqKDK").navigatorRefresh$,r={"-1":"guest",0:"member",1:"admin",2:"owner"},e.exports=function(e){function t(){return this.openFileCreator=N(this.openFileCreator,this),this.openSharingCreator=N(this.openSharingCreator,this),this.openEventCreator=N(this.openEventCreator,this),this.renderTaskCreatorView=N(this.renderTaskCreatorView,this),this.openTaskCreator=N(this.openTaskCreator,this),this.openProjectCreator=N(this.openProjectCreator,this),this.showUserSettings=N(this.showUserSettings,this),this.toggleSubmitTicket=N(this.toggleSubmitTicket,this),this.onSelectResult=N(this.onSelectResult,this),this.getPageHeaderInfo=N(this.getPageHeaderInfo,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)O.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,g),t.prototype.viewName="NavigationView",t.prototype.className="navigation-view nav-inner row-flex",t.prototype.$parent=$("#navigator"),t.prototype.initialize=function(){return this.projectsCollection=d.get(0),this.organizationsCollection=s.get(0),this.$parent.html(this.$el),this.listen(),this.assignSearchWorkspaceData(),this.ready().then((e=this,function(){return e.render(),e.observeNavigatorRefresh(),e.observeFavIconBadge(),e.setGtaOrgProps()}));var e},t.prototype.listen=function(){return this.listenTo(x.user,"change:name change:avatarUrl change:crossNotify",k.after(2,this.render)),this.listenTo(x.user,"change:isGhost",this.render),this.listenTo(x.PREFERENCE,"change:hasNew",this.render),this.listenTo(x.PREFERENCE,"change:lastWorkspace",function(){return this.assignSearchWorkspaceData(),this.setGtaOrgProps(),this.render()}),this.listenTo(this.organizationsCollection,"change:name add remove",this.render)},t.prototype.ready=function(){return w().then((e=this,function(t){return e.ProjectCreatorView=t.project,e.EventCreatorView=t.event,e.TaskCreatorView=t.task,e.PostCreatorView=t.post}));var e},t.prototype.render=function(){var e,t,n;return e="personal"===(n=x.PREFERENCE.get("lastWorkspace"))?void 0:n,t=this.organizationsCollection.filter(function(e){return e.getRoleScope()>=-1}).map(function(e){return e.toJSON()}),this.requestReactView(this.el,m,{organizationId:e,isGhost:x.user.get("isGhost"),hasNewVersion:this.hasNewVersion(),onSelectResult:this.onSelectResult,onHelperOpen:this.toggleSubmitTicket,showUpgradeBtn:this.showUpgradeBtn(),getPageHeaderInfo:this.getPageHeaderInfo,onOpenTaskCreator:this.openTaskCreator,onOpenFileCreator:this.openFileCreator,onOpenEventCreator:this.openEventCreator,onOpenPostCreator:this.openSharingCreator,onOpenProjectCreator:this.openProjectCreator,organizations:t,openUserSettings:this.showUserSettings},{redux:!0,router:!0,errorBoundary:!0})},t.prototype.getPageHeaderInfo=function(e){switch(e){case"project":return t=this,function(e){var n;return n=e._projectId,{projectModel:t.projectsCollection.get(n),projectId:n,onSwitchProject:t.onSwitchProject,onToggleStar:t.toggleProjectStar}};case"search":return function(){return{title:P.get("navigation.page.header.search")}};default:return function(){return{}}}var t},t.prototype.onSwitchProject=function(e){if(!e.alien)return x.router.navigate("project/"+e._id,{trigger:!0});window.location.href=e.alien.url},t.prototype.toggleProjectStar=function(e){return new Promise(function(t,n){return e.toggleStar({success:function(n){return n.isStar?d.get(0).add(e):e.getRoleScope()>=0||d.get(0).remove(e.id,{silent:!0}),x.gta.event({action:(n.isStar?"":"un")+"star project",control:"Project Name"}),t(n.isStar)},error:n})})},t.prototype.assignSearchWorkspaceData=function(){var e;return"personal"===(e=x.PREFERENCE.get("lastWorkspace"))?void 0:e,_({workspaceType:"personal"===e?"user":"organization",workspaceId:e})},t.prototype.showUpgradeBtn=function(){var e,t;return e="personal"===(t=x.PREFERENCE.get("lastWorkspace"))?void 0:t,!T.helper.hideUpgradeBtn(e)},t.prototype.onSelectResult=function(e,t,n){var r,o,i;switch(r={action:"open detail",type:e,control:"Quick Result",method:"click",order:n,targetId:o=t._id,sessionId:t.sessionId||null},"project"===e&&(r.projectid=o),x.gta.event(r),e){case"project":return this.onProjectResultSelect(o);case"user":return this.onMemberResultSelect(o);case"work":return b.fetch(o,{success:(i=this,function(e){return i.requestSubView(v,{onRemove:C}).open(l,{workModel:e})})});default:return x.APP.openObjectPreviewer(o,e,{onRemove:C})}},t.prototype.onProjectResultSelect=function(e){return x.gta.event(null,"click","projects - enter project"),p.fetch(e,{success:(t=this,function(e){if(t.el)return e.isAlienProject()?window.open(e.get("alien").url):e.payment.isExpired?e.payment.isUser?t.requestSubView(u):t.requestSubView(v).open(i,{_organizationId:e.get("_organizationId"),projectModel:e}):I(e)?E(e):x.router.navigate("project/"+e.id+"/"+e.getFirstApp(),{trigger:!0})})});var t},t.prototype.onMemberResultSelect=function(e){return x.router.navigateToMemberProfile(x.PREFERENCE.get("lastWorkspace"),e)},t.prototype.observeNavigatorRefresh=function(){return this.navigatorRefresh$=S.subscribe((e=this,function(){return e.render()}));var e},t.prototype.observeFavIconBadge=function(){return this.previousBadgeCount=0,this.inboxCountSub=o.axon.badge$.auditTime(1e3).subscribe(function(e){var t,n,r,o,i,s,a;if(n=(r=e.total).badgeType,t=r.badgeCount,"number"!==n&&(t=0),this.previousBadgeCount!==t)return null!=window.WebExtensionWin10&&(x.user.attributes.badge=""+(0|t),null!=(o=window.WebExtensionWin10)&&o.messageCount(t)),this.previousBadgeCount=t,t=t<100?t:"99+",(null!=(i=x.favico)?i.browser.supported:void 0)?null!=(s=x.favico)?s.badge(t):void 0:null!=(a=x.APP)?a.dynamicTitle(t):void 0})},t.prototype.hasNewVersion=function(){return!0===x.PREFERENCE.get("hasNew")&&!x.user.isNew()},t.prototype.toggleSubmitTicket=function(e){if(!this.submitTicketView)return this.submitTicketView=this.requestSubView(c,{$toggler:$(e),fixed:!0}).show()},t.prototype.showUserSettings=function(e){return this.requestSubView(a)},t.prototype.gtaHandlerCreator=function(e){return x.gta.event({type:e,action:"add content",control:"Navigation Tab",project_template_algo:x.ab.getTestGroup("all","project_template_algo")})},t.prototype.openProjectCreator=function(){return this.gtaHandlerCreator("project"),this.requestSubView(v).open(this.ProjectCreatorView)},t.prototype.openTaskCreator=function(){var e,t,n,r;if(this.gtaHandlerCreator("task"),e=this.getCurrentProjectId(),t=this.getCurrentTasklistId(),null!=(n=this.tasklistModelSub)&&n.unsubscribe(),e&&t)return this.tasklistModelSub=this.subscribe(f.fetch$(t).do((r=this,function(n){var o;return o=n.get("_defaultScenariofieldconfigId"),r.renderTaskCreatorView(e,t,o)})));this.renderTaskCreatorView(e,t)},t.prototype.renderTaskCreatorView=function(e,t,n){var r,o;return o=x.PREFERENCE.get("lastWorkspace"),r=this.getSmartGroupType()||void 0,this.requestSubView(v).open(this.TaskCreatorView,{isWorkspace:!0,_organizationId:x.PREFERENCE.isPersonalWorkspace()?void 0:o,_projectId:e,_tasklistId:t,scenarioFieldConfigId:n,proTemplateConfigType:r})},t.prototype.getUrlParam=function(e){var t,n,r;return r=window.location.href,n=new RegExp("/"+e+"/(\\w+)"),null!=(t=r.match(n))?t[1]:void 0},t.prototype.getCurrentProjectId=function(){return this.getUrlParam("project")},t.prototype.getCurrentTasklistId=function(){return this.getUrlParam("scrum")},t.prototype.getSmartGroupType=function(){var e;return e=x.APP.getCurrentAppName(),h.getScrumAppNames().find(function(t){return t===e})},t.prototype.openEventCreator=function(){return this.gtaHandlerCreator("event"),this.requestSubView(v).open(this.EventCreatorView,{isWorkspace:!0,_organizationId:x.PREFERENCE.get("lastWorkspace")})},t.prototype.openSharingCreator=function(){return this.gtaHandlerCreator("post"),this.requestSubView(v).open(this.PostCreatorView,{backdrop:"static",gta_from:"Global New Post",isWorkspace:!0})},t.prototype.openFileCreator=function(){return this.gtaHandlerCreator("file"),this.requestSubView(y,{isWorkspace:!0,pick:{multiple:!0},gta_from:"Global New File"}).workUploaderView.uploader.triggerUpload()},t.prototype.registerGtaOrgProps=function(e,t,n,r){return x.gta.registerProperty("org_subscription",e),x.gta.registerProperty("pro_subscription",t),x.gta.registerProperty("max_member_role",n),x.gta.registerProperty("max_orgsubscription_member",r)},t.prototype.setGtaOrgProps=function(){var e,t,n,o;return(o=x.PREFERENCE.get("lastWorkspace"))?(t=this.organizationsCollection.findWhere({_id:o}))&&t.payment?(e=t.payment.isPaid&&t.payment.isActive,n=r[""+t.getRoleScope()],this.registerGtaOrgProps(e,t.payment.isProfessional,n,t.payment.memberQuota)):void 0:this.registerGtaOrgProps(!1,!1,"personal",0)},t.prototype.remove=function(){var e,n;return null!=(e=this.inboxCountSub)&&e.unsubscribe(),null!=(n=this.navigatorRefresh$)&&n.unsubscribe(),t.__super__.remove.apply(this,arguments)},t}()},"aADxT37/":function(e,t,n){e.exports={notice:"notice__3w2K","notice-text":"notice-text__2jhe","no-conflict":"no-conflict__3Zqp",conflict:"conflict__1tce"}},aD6I3VT4:function(e,t,n){var r,o={}.hasOwnProperty;r=n("vmWJWrVe"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="DetailBaseView",t.prototype.initialize=function(e){if(this.isRequired=e.isRequired,this.isRequired)return this.$el.addClass("is-required")},t}()},aIk28nG9:function(e,t,n){e.exports={"menu-item-with-tick":"menu-item-with-tick__bIYg","organization-portal":"organization-portal__3GME","organization-access-denied":"organization-access-denied__3QG6","view-toggle-dropdown":"view-toggle-dropdown__1Kxv","tag-menu-dropdown":"tag-menu-dropdown__3Gqr","list-tool-switch-wrap":"list-tool-switch-wrap__1pkO","list-tool-menu-separator":"list-tool-menu-separator__3t1m"}},aKMSYotH:function(e,t,n){e.exports=n("oI+5R3hX")},aKydnTgX:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.Basic="basic-subscription-feature",e.Pro="pro-subscription-feature",e.UpgradeToPro="upgrade-to-pro-subscription",e.ProOverviewApp="pro-subscription-feature-overview-app"}(r||(r={}))},aL8N2c85:function(e,t,n){"use strict";n.r(t),n.d(t,"GitIntegrate",function(){return h});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("sa1Ed382"),c=n("s0r7VfKc"),l=n("wVXDg9Ql"),u=n("oEzVJ1gN"),p=n.n(u),d=n("O4cJO6Kp"),h=function(e){function t(t){var n=e.call(this,t)||this;return n.helperBlog="https://guide.teambition.net/hc/kb/article/1169715/",n.settingView=null,n.goToBlog=function(){window.open(n.helperBlog)},n.openTaskIdPowerUp=function(){n.settingView&&n.settingView.remove(),n.settingView=a.APP.requestSubView(p.a,{projectModel:n.props.projectModel,tabName:"tasks"})},n.state={url:"",secret:""},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this,t="projects/"+this.props.projectModel.id+"/gitintegration";c.default.fetch.get(t).toPromise().then(function(t){e.setState({url:t.url,secret:t.secret})}).catch(function(e){l.SDKInterceptor.ignore(e)})},t.prototype.renderTaskIdWarning=function(){return this.props.isTaskIdOpened?null:o.createElement("div",{className:d["git-integrate-settings-warning"]},o.createElement(s.Icon,{name:"warning"}),o.createElement("p",null,i.get("activity.panel.menu.git.warning.taskid")),o.createElement("span",{className:"link",onClick:this.openTaskIdPowerUp},i.get("activity.panel.menu.git.open.taskid")))},t.prototype.renderInput=function(e,t){return o.createElement("div",{className:d["git-integrate-settings-input-content"]},o.createElement("div",{className:d["git-integrate-settings-input-title"]},e),o.createElement("input",{className:"form-control",value:t,readOnly:!0}))},t.prototype.renderHint=function(){return o.createElement("div",{className:d["git-integrate-settings-hint"]},i.get("activity.panel.menu.git.instruction"),o.createElement(s.TextButton,{color:"blue",onClick:this.goToBlog},i.get("activity.panel.menu.git.instruction.link")))},t.prototype.render=function(){return o.createElement("div",{className:d["git-integrate-settings"]},this.renderTaskIdWarning(),this.renderInput("URL",this.state.url),this.renderInput("Secret",this.state.secret),this.renderHint())},t}(o.PureComponent)},aNCC9bZV:function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty,p=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};l=n("a+N5u/Cl"),o=n("bZr3G77e"),a=n("3eMzznN/"),c=n("vmWJWrVe"),s=n("YdqH4v7N"),r=n("K9v/P97o"),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,c),t.prototype.viewName="MemberTaskListView",t.prototype.className="member-task-list-view",t.prototype.tagName="ul",t.prototype.events={"click .task-item":"selectTask"},t.prototype.initialize=function(e){return this.options=e,this.state={tasks:[],selectedTaskIds:[]},this.nextPageToken=null,this.hasMore=!0,this.loadMore().then((t=this,function(){return t.setupScroll(t.$el)}));var t},t.prototype.loadMore=function(){return this.hasMore?(this.showLoadingIndicator(this.$el),this.loadTasks().then((e=this,function(t){var n,r;if(n=t.nextPageToken,r=t.result,e.$el)return e.state.tasks=e.state.tasks.concat(r),e.hasMore=n&&50===r.length,e.hideLoadingIndicator(),e.render(r)})).catch(function(e){return function(t){return e.hideLoadingIndicator()}}(this))):Promise.resolve([]);var e},t.prototype.loadTasks=function(){var e,t,n;return t=(n=this.options).projectId,e=n.organizationId,o.get("v2/tasks",{data:{scope:"execute",isDone:!1,pageSize:50,pageToken:this.nextPageToken,includeInvisible:!1,_organizationId:t?void 0:e,_projectId:t,onlyOrganizationTask:!t,_userId:this.options.userId}})},t.prototype.render=function(e){var t;if(!this.state.tasks.length||e.length)return e=e.map((t=this,function(e){var n;return n=e._id,p.call(t.state.selectedTaskIds,n)>=0&&(e=l.extend({isSelected:!0},e)),e})).map(function(e){var t,n;return n=a.formatDate(e.dueDate),t=function(){switch(n.dateClass){case"overdue":return"color-important";case"today":return"color-warning";case"upcoming":return"color-info";default:return""}}(),e=l.extend({duedateClass:t,dateTimeString:n.dateTimeString},e)}),this.$el.append(r({tasks:e}))},t.prototype.processTasks=function(e){return e.map((t=this,function(e){var n;return n=e._id,p.call(t.state.selectedTaskIds,n)>=0&&(e=l.extend({isSelected:!0},e)),e})).map(function(e){var t,n;return n=a.formatDate(e.dueDate),t=function(){switch(n.dateClass){case"overdue":return"color-important";case"today":return"color-warning";case"upcoming":return"color-info";default:return""}}(),e=l.extend({duedateClass:t,dateTimeString:n.dateTimeString},e)});var t},t.prototype.selectTask=function(e){var t,n;return n=(t=$(e.currentTarget)).data("id"),p.call(this.state.selectedTaskIds,n)>=0?(this.state.selectedTaskIds=l.without(this.state.selectedTaskIds,n),t.removeClass("active")):(this.state.selectedTaskIds.push(n),t.addClass("active")),this.options.onSelect(this.state)},t.prototype.selectAllTasks=function(e){return this.state.selectedTaskIds=this.state.tasks.map(function(e){return e._id}),this.$(".task-item").addClass("active"),this.options.onSelect(this.state)},t.prototype.unselectAllTasks=function(e){return this.state.selectedTaskIds=[],this.$(".task-item").removeClass("active"),this.options.onSelect(this.state)},t.prototype.removeTasks=function(e){var t;return null==e&&(e=[]),this.state.tasks=this.state.tasks.filter(function(t){return!l.contains(e,t._id)}),this.state.selectedTaskIds=this.state.selectedTaskIds.filter(function(t){return!l.contains(e,t)}),e.forEach((t=this,function(e){return t.$(".task-item[data-id='"+e+"']").remove()})),this.options.onSelect(this.state)},t}(),l.extend(i.prototype,s),e.exports=i},aR9Pp0Vi:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("sa1Ed382"),s=n("tLZJUYWX"),a=n("GESwhXbR"),c=n("s0r7VfKc"),l=n("LxI6N5g+"),u=n("BWH8qnKJ"),p=n("cVY30NxL"),d=(n("6fMv8n31"),n("VlMg/8hg"),function(e){function t(t){var n=e.call(this,t)||this;return n.setModalRef=function(e){n.modalRef=e},n.onVisibleChange=function(e){n.setState({modalOpened:e}),"function"==typeof n.props.onModalVisibleChange&&n.props.onModalVisibleChange(e)},n.onModalClose=function(){n.setState({name:"",weeks:null,startDate:null,dueDate:null})},n.onCreateSprint=function(){var e=n.state,t=e.name,r=e.startDate,o=e.dueDate;if(t.trim()){var s={name:t,startDate:r,dueDate:o},a=n.props,l=a.projectId,u=a.onSuccess,p=a.routeToCreatedSprint;c.default.createSprint(l,s).subscribe(function(e){if(u&&u(e),n.modalRef.close(),n.gtaHandler("added content"),p&&e._id){var t="project/"+l+"/sprint/section/"+e._id;i.router.navigate(t,{trigger:!0})}})}},n.openModal=function(){n.props.unfinishedSprintsAmount>=u.a||(n.setState({modalOpened:!0}),n.gtaHandler("add content"))},n.gtaHandler=function(e){var t=n.props.gtaControl||"Table Button";i.gta.event({action:e,type:"sprint",page:"Sprint Page",segment:"Sprint Sidebar",projectid:n.props.projectId,control:t})},n.updateSprint=function(e){n.setState(r.a({},n.state,e),function(){var e=Object(p.checkDateValidation)(n.state.startDate,n.state.dueDate);n.setState({buttonEnabled:!!n.state.name&&e})})},n.state={name:"",weeks:null,startDate:null,dueDate:null,modalOpened:t.modalOpened||!1,buttonEnabled:!1},n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){void 0!==e.modalOpened&&e.modalOpened!==this.props.modalOpened&&this.setState({modalOpened:e.modalOpened})},t.prototype.renderSprintUpdate=function(){var e=this.state,t={name:e.name,weeks:e.weeks,startDate:e.startDate,dueDate:e.dueDate,showDueDate:!0,updateSprint:this.updateSprint};return o.createElement(l.a,r.a({},t))},t.prototype.renderButton=function(){var e=this.state.buttonEnabled;return o.createElement("div",{className:"button-handlers"},o.createElement("div",{className:"divider"}),o.createElement(a.Button,{onClick:this.onCreateSprint,disabled:!e},s.get("create")))},t.prototype.renderTrigger=function(e){var t="sprint-create-trigger "+(e||""),n=this.props.trigger?this.props.trigger:o.createElement("a",{className:t},o.createElement(a.Icon,{name:"circle-plus-o"}));return o.createElement("div",{className:t,onClick:this.openModal},n)},t.prototype.renderContents=function(){return o.createElement("div",{className:"sprint-create-wrapper"},this.renderTrigger(),o.createElement(a.Modal,{className:"sprint-update-modal",ref:this.setModalRef,title:s.get("sprint.create"),titleCls:"modal-title",width:600,opened:this.state.modalOpened,onVisibleChange:this.onVisibleChange,onHide:this.onModalClose},this.renderSprintUpdate(),this.renderButton()))},t.prototype.renderSprintAmountLimit=function(){return o.createElement(a.Tooltip,{placement:"left",title:s.get("sprint.create.max.amount")},o.createElement("div",{className:"sprint-create-wrapper"},this.renderTrigger("banned")))},t.prototype.render=function(){return this.props.unfinishedSprintsAmount>=u.a?this.renderSprintAmountLimit():this.renderContents()},t}(o.PureComponent))},"aS+ErZRd":function(e,t,n){},aSEoMnrP:function(e,t,n){e.exports=n.p+"images/notification-push.33d38247.svg"},aTNGTwiG:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e.content,s={sanitize:!0},a={ALLOWED_TAGS:["a"]};if(~e.action.indexOf("activity.comment")){if(o+=' <div class="avatar img-36 img-circle pull-left ',e.creator.avatarUrl||(o+="no-avatar"),o+='" data-id="'+e.creator._id+"\" data-gta=\"{action: 'view member info', control: 'Comment Portrait'}\" ",e.creator.avatarUrl&&(o+=' style="background-image: url('+e.creator.avatarUrl+');"'),o+='> </div> <div class="activity-body"> <div class="activity-header-all"> <div class="activity-header clearfix"> <span class="activity-creator-name">'+r(e.creator.name),e.isGuest&&(o+=""+tb_i18n.get("share.activity.creator.guest.suffix")),o+='</span> </div> <div class="activity-handler-set-button link-handler-gray"> ',e.hasAttachments&&(e.isOwn||e.canDownload)&&(o+=' <a class="download-attachments-handler">'+tb_i18n.get("activity.download.all.attachments")+"</a> "),o+=" ",e.isOwn&&!e.voice&&(o+=' <a class="edit-activity-handler">'+tb_i18n.get("edit")+"</a> "),o+=" ",(e.canReplyActivity||e.isGuest)&&(o+=' <a class="reply-activity-handler"',e.isGuest&&(o+=' data-member-type="guest"'),o+=">"+tb_i18n.get("reply")+"</a> "),o+=" ",e.isOwn&&(o+=' <a class="delete-activity-handler">'+tb_i18n.get("delete")+"</a> "),o+=' </div> <div class="react-time-stamp muted hinted" data-title="'+e.createdTime+'"></div> </div> ',!e.content.renderMode&&e.mdStatus||"markdown"===e.content.renderMode)o+=' <div class="activity-content readable"> '+r(e.commentMD,"MD",s,{FORBID_TAGS:["style"],FORBID_ATTRS:["style"]})+" </div> ";else{o+=' \x3c!-- pre tag fn, no break line --\x3e <div class="activity-content readable pre">';var c=e.commentList;if(c)for(var l,u=-1,p=c.length-1;u<p;)(l=c[u+=1]).isEmoji,o+=""+l.value;o+="</div> "}o+=" ",e.content.voice&&(o+=' <div class="activity-voice-wrapper clearfix" style="width:'+e.content.voice.barWidth+'"> <div class="voice-progress transition-ctrl"></div> <span class="icon icon-play play-ctrl pull-left"></span> <span class="icon icon-pause pause-ctrl pull-left" style="display:none;"></span> <span class="play-time pull-right">'+e.content.voice.durationFormat+"</span> </div> "),o+=' <div class="react-activity-attachments"></div> </div>'}else o+=' <span class="icon '+e.iconName+' activity-type-icon pull-left muted"></span> <div class="react-time-stamp muted pull-right hinted" data-title="'+e.createdTime+'"></div> <div class="activity-body-coyness readable muted"> <span> ',e.titleToStress?(o+=" "+r(e.titleToStressLeft)+" <a class='linked-handler' ",e.url&&(o+='href="'+e.url+'"'),o+="> "+r(e.titleToStress)+" </a> "+r(e.titleToStressRight)+" "):e.titleWithFiles?o+=" "+e.titleWithFiles+" ":e.content.linkedCollection?(o+=" "+e.titleLeft+" <a class='linked-collection-handler'>"+r(e.titleSubFirst)+"</a> "+e.titleMiddle+" ",/remove/.test(e.action)||/archive.collection/.test(e.action)?o+=" "+r(e.titleSubSecond)+" ":o+=" <a class='linked-file-handler'>"+r(e.titleSubSecond)+"</a> ",o+=" "+e.titleRight+" "):e.isSkitchActivity?o+=" "+e.titleLeft+" <a class='skitch-link-handler'>"+e.skitchName+"</a> ":o+=" "+r(e.title||"")+" ",o+=" </span> ",e.hasContentPreview&&(o+=" ","activity.task.create"===e.action||"activity.task.create.from.ancestor"===e.action?o+=' <div class="activity-content overflow"> <blockquote class="activity-description">'+r(e.description)+'</blockquote> <blockquote class="activity-content-detail">'+r(i.task.content)+"</blockquote> </div> ":"activity.testcase.create"===e.action?o+=' <div class="activity-content overflow"> <blockquote class="activity-description">'+r(e.description)+'</blockquote> <blockquote class="activity-content-detail">'+r(i.testcase.title)+"</blockquote> </div> ":"activity.post.update.content"===e.action?o+=' <div class="activity-content overflow"> <blockquote class="activity-description">'+r(e.description)+'</blockquote> <blockquote class="activity-content-detail">'+r(i.content)+"</blockquote> </div> ":~e.action.indexOf("update.customfield.text")?o+=' <div class="activity-content overflow"> <blockquote class="activity-description">'+r(e.customfieldValueHyper,"sanitize",s,a)+'</blockquote> <blockquote class="activity-content-detail">'+r(e.customfieldValueHyper,"sanitize",s,a)+"</blockquote> </div> ":~e.action.indexOf("update.content")?o+=' <div class="activity-content overflow"> <blockquote class="activity-description">'+r(e.description)+'</blockquote> <blockquote class="activity-content-detail">'+r(i.content)+"</blockquote> </div> ":~e.action.indexOf("testcase.update.title")?o+=' <div class="activity-content overflow"> <blockquote class="activity-description">'+r(e.description)+'</blockquote> <blockquote class="activity-content-detail">'+r(i.title)+"</blockquote> </div> ":~e.action.indexOf("update.note")?o+=' <div class="activity-content overflow"> <blockquote class="activity-description">'+r(e.description)+'</blockquote> <blockquote class="activity-content-detail"> '+e.html.note+" </blockquote> </div> ":~e.action.indexOf("update.precondition")?o+=' <div class="activity-content overflow"> <blockquote class="activity-description">'+r(e.description)+'</blockquote> <blockquote class="activity-content-detail">'+e.html.precondition+"</blockquote> </div> ":e.isSkitchActivity?o+=' <div class="activity-content overflow"> <blockquote class="activity-description">'+r(e.description)+'</blockquote> <blockquote class="activity-content-detail">'+r(e.comment)+"</blockquote> </div> ":"standard"===e.rawAction&&(o+=' <div class="activity-content overflow"> <blockquote class="activity-description">'+r(e.description)+'</blockquote> <blockquote class="activity-content-detail">'+r(i.subtitle)+"</blockquote> </div> "),o+=" "),o+=" </div>";return o}},aU5SzB8w:function(e,t,n){e.exports=n.p+"images/d_shiwang@2x.e0bea7fe.png"},aWGODt9f:function(e,t,n){e.exports={"field-set":"field-set__3wxu",separator:"separator__18Ap"}},aYY9630l:function(e,t,n){e.exports={"object-type":"object-type__1LAP"}},"abvD/6Uj":function(e,t){e.exports=function(e){var t='<div class="tab-list thin-scroll"> ',n=e.projects;if(n)for(var r,o=-1,i=n.length-1;o<i;)t+=' <a class="tab-item ',(r=n[o+=1])._id===e.currentProjectId&&(t+="active"),t+='" data-id="'+r._id+'" data-gta="{action: \'switch project\', segment: \'Handover Task\'}"> <div class="avatar flex-static project" style="background-image: url('+r.logo+')"></div> <span class="text">'+r.name+"</span> </a> ";return t+='</div><div class="content"> <div class="tasks"></div> <div class="footer"></div></div>'}},acteLzhK:function(e,t,n){},aeteqxLH:function(e,t,n){e.exports={root:"root__2MMm"}},ahANzVvG:function(e,t,n){e.exports=function(){return new Promise(function(e){return n.e(8).then(function(t){var r,o,i,s;return o=n("JsUcZmUD"),r=n("7qVBrAdE"),s=n("9CJ8r+Bm"),i=n("PoR/zweq"),e({DashboardView:o,CalendarView:r,MyView:s,Inbox:i})}.bind(null,n)).catch(n.oe)})}},akZvDr5p:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<li> <div class="team-node team-'+e._id+" ";return e.isOpen&&(o+="open"),o+=' flex flex-between" data-id="'+e._id+'" data-gta="{action: \'open team detail\'}"> <div class="team-name hinted" data-title="'+r(e.name)+'"> ',e.level>1?o+=' <span class="team-child-icon" style="background-color:'+(e.styleColor||"#8193BA")+'"></span> ':o+=' <span class="icon '+(e.styleName||"icon-team-tie")+'" style="color:'+(e.styleColor||"#8193BA")+'"></span> ',o+=" "+r(e.name)+" ",e.isLeader&&(o+=' <span class="leader"> '+r(tb_i18n.get("team.leader.title"))+" </span> "),o+=" </div> ",e.children&&e.children.length>0&&(o+=' <span class="icon icon-circle-down pull-right toggle-subtree" data-id="'+e._id+'"></span> '),o+=" </div> ",e.children&&e.children.length>0&&(o+=' <ul class="team-'+e._id+"-children ",e.isOpen&&(o+="open"),o+=" teams-level-"+(e.level+1)+'"></ul> '),o+="</li>"}},am3yOv0o:function(e,t,n){e.exports=n("MKz6J3aY")+"\n\nquery OrganizationProjects(\n  $_organizationId: ObjectId!,\n  $q: String,\n  $pageToken: String,\n  $pageSize: PageSizeType = 20,\n) {\n  projects: Search(\n    type: project,\n    spaceType: organization,\n    _organizationId: $_organizationId,\n    q: $q,\n    pageToken: $pageToken,\n    pageSize: $pageSize,\n  ){\n    nextPageToken\n    totalSize\n    result {\n    \t...projectSchema\n    }\n  }\n}\n"},"aoqbw/EN":function(e,t){e.exports=function(e){var t,n;return"<header> "+("undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}))(e.name)+"</header><div class='plugin-list'></div>"}},arJxzJPZ:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=n("q1tIBJhx"),o={},i=Object(r.createContext)(o)},asYwtd89:function(e,t,n){e.exports={banner:"banner__2mM3","icon-wrapper":"icon-wrapper__2Qyz"}},asccv5YG:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""});return'<form class="activity-editor-form clearfix"> <div class="activity-editor-input-wrap"> <textarea class="activity-editor-input clearfix" placeholder="'+tb_i18n.get("activity.editor.place.holder")+'">'+r(e.comment)+'</textarea> </div> <button class="btn btn-primary btn-block submit-handler">'+tb_i18n.get("save")+"</button></form>"}},au4f8wXm:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("wd/RKGTj"),s=n.n(i),a=n("tLZJUYWX"),c=n("TSYQbtd+"),l=n.n(c),u=n("UnQ0Owux"),p=n("3eMzznN/"),d=n("AIF/HEzv").default,h=n("BImTYCVK").default,m=n("rgtqvNII").default,f=n("en987hhL").default,g=function(e){function t(t){var n=e.call(this,t)||this;n.onClick=function(){if(n.props.task.isVisible&&n.isClickOpenDetail&&!n.withoutDate){var e=n.props.onOpenTaskDetail;e&&e(n.props.task,"chart")}},n.onMouseDown=function(e){n.clientX=e.clientX},n.onMouseUp=function(e){n.isClickOpenDetail=!(e.clientX!==n.clientX)},n.state={isSettingTime:!1};var r=t.task,o=r.startDate,i=r.dueDate;return n.withoutDate=!(o||i),n}return r.d(t,e),t.prototype.checkDragBodyPermission=function(){return Object(u.a)(this.props.task)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=e.task.startDate,n=e.task.dueDate;this.withoutDate=!t&&!n},t.prototype.getHint=function(){if(this.withoutDate)return a.get("gantt.chart.withoutDate");var e=this.props.task,t=e.startDate,n=e.dueDate,r=e.progress,o=e.isVisible,i=[],c=this.parseTaskContent();if(c&&i.push(c),t){var l=s()(t).format("MM.DD HH:mm");i.push(a.get("gantt.chart.startDate",l))}if(n){var u=s()(n).format("MM.DD HH:mm");i.push(a.get("gantt.chart.dueDate",u))}return r&&o&&i.push(a.get("gantt.chart.taskProgress",""+r)),i.join("\n")},t.prototype.parseTaskContent=function(){var e=this.props.task.content;return p.cutString(e,28,"...")},t.prototype.getAngle=function(e,t,n){return e?d:t?f:n?m:h},t.prototype.render=function(){var e=this.props.task,t=e.startDate,n=e.dueDate,r=e.isDone,i=e.isVisible,s=e.progress,a=this.state.isSettingTime,c=this.checkDragBodyPermission(),u=n;(a||!a&&(!t&&!n)&&c)&&(u=this.props.hoverDueDate||"");var d="overdue"===(u&&!r&&p.formatDate(u).dateClass),h=this.getHint(),m=l()("gantt-chart-task-layer flex",{fake:this.withoutDate,hinted:!!h&&!this.props.isMoving&&i,"has-permission":c,overdue:d,"invisible-task":!i,"has-progress":s>0,"progress-finish":100===s}),f=this.getAngle(i,r,d),g=i?o.createElement("div",{className:"progress-bar",style:{width:s+"%"}}):null;return o.createElement("div",{className:m,"data-title":h,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},o.createElement("svg",{className:"layer-angle on-left","aria-hidden":"true"},o.createElement("use",{xlinkHref:"#"+f.id})),o.createElement("div",{className:"task-body"},g),o.createElement("svg",{className:"layer-angle on-right","aria-hidden":"true"},o.createElement("use",{xlinkHref:"#"+f.id})))},t}(o.Component)},ay2Xcmrs:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r=9,o=40},b0zn66md:function(e,t,n){e.exports={table:"table__lrCQ",table__container:"table__container__aUvC",table__cell:"table__cell__1lwi","table__cell-content":"table__cell-content__1nIM","table__cell-content--first-column":"table__cell-content--first-column__Ippc","table__toolbar-title":"table__toolbar-title__qOTG",table__toolbar:"table__toolbar__wSrv","table__configure-action":"table__configure-action__xA6a","table__head-cell":"table__head-cell__YXCk","table__empty-head-cell":"table__empty-head-cell__1rkL","table__cell--resizing":"table__cell--resizing__10Ku","table__cell--void-column":"table__cell--void-column__nwsk","table__cell--last-column":"table__cell--last-column__1Dsh","table__foot-cell":"table__foot-cell__1Uhb","table__cell--first-column":"table__cell--first-column__3n8W","table__foot-row-hook":"table__foot-row-hook__2E4T","table__cell-content--first-row":"table__cell-content--first-row__10_Y"}},b2RDlbIm:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("s0r7VfKc"),a=n("a+N5u/Cl"),c=n("GESwhXbR"),l=n("dikDkxSK"),u=n("M70E0b3m"),p=function(e){function t(t){var n=e.call(this,t)||this;return n.fetchTestgroups=function(){n.testgroupsSub&&n.testgroupsSub.unsubscribe(),n.testgroupsSub=s.default.getTestgroups(n.props.testhub._id).changes().subscribe(function(e){var t=e.map(function(e){return e.isRoot?r.a({},e,{name:i.get("testgroup.selector.testgroup.name")}):e}),o=n.props.testgroup?a.uniq([n.props.testgroup].concat(t),"_id"):t;n.setState({testgroups:o})})},n.filterFn=function(e){return!(e.props.className.split(" ").indexOf(u["testgroup-creator-handler"])>=0)},n.onTestgroupSelect=function(e){n.props.onSetTestgroup&&n.props.onSetTestgroup(e)},n.renderCreateHandler=function(){return n.props.showTestgroupCreator?o.createElement(c.TextButton,{key:"creator",color:"blue",className:u["testgroup-creator-handler"],onClick:n.props.onCreateTestgroupClick},o.createElement(c.Icon,{name:"circle-plus"}),i.get("testgroups.selector.create.handler")):null},n.state={testgroups:null},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.fetchTestgroups()},t.prototype.componentWillUnmount=function(){this.testgroupsSub&&this.testgroupsSub.unsubscribe()},t.prototype.render=function(){var e=this.props.testgroup&&this.props.testgroup._id;return o.createElement(l.a,{className:u["testgroup-selector"],inline:this.props.inline,list:this.state.testgroups||[],isLoading:!this.state.testgroups,autoFocus:!0,selected:e,filterFn:this.filterFn,inputPlaceholder:i.get("testgroup.selector.testgroup.select.input.placeholder"),onSelect:this.onTestgroupSelect,renderListPrefix:this.renderCreateHandler})},t.defaultProps={showTestgroupCreator:!1},t}(o.PureComponent)},b8GjvuDT:function(e,t,n){e.exports=n.p+"images/step-1.891efde5.png"},b9Ok9wpi:function(e,t,n){var r,o,i,s,a,c,l,u,p,d;o=n("a+N5u/Cl"),r=n("bZr3G77e"),d=n("gh8QIhMV").throwError,i=function(e){return e.access_token||d("no access_token"),e.success||e.error||d("no callback function"),e.url?r.ajax({url:e.url,data:{access_token:e.access_token}}).then(function(t){return e.success(t)}).catch(function(t){var n;return 409===t.status?e.success([]):401===t.status?e.tokenInvalidHandler(t.responseJSON.message):e.error(null!=(n=t.responseJSON)?n.message:void 0)}):d("no url")},p=function(e){return"https://api.github.com/user/repos?page=1&per_page=100",i(o.extend({url:"https://api.github.com/user/repos?page=1&per_page=100"},e))},l=function(e){var t;return t="https://api.github.com/repos/"+e.owner+"/"+e.repo+"/issues",i(o.extend({url:t},e))},u=function(e){var t;return t="https://api.github.com/repos/"+e.owner+"/"+e.repo+"/pulls",i(o.extend({url:t},e))},c=function(e){var t;return t="https://api.github.com/repos/"+e.owner+"/"+e.repo+"/commits",i(o.extend({url:t},e))},s=function(e){var t;return t="https://api.github.com/repos/"+e.owner+"/"+e.repo+"/branches",i(o.extend({url:t},e))},a=function(e){var t;return t="https://api.github.com/repos/"+e.owner+"/"+e.repo+"/branches/"+e.branch,i(o.extend({url:t},e))},e.exports={getRepos:p,getIssues:l,getPullRequests:u,getCommits:c,getBranchs:s,getBranchsData:a}},"bB/7G3An":function(e,t,n){e.exports=n.p+"images/d_sikao@2x.f6e20744.png"},bEEyjJyi:function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("vmWJWrVe"),n("a+N5u/Cl"),n("3eMzznN/"),o=n("AGtPin/S").WebLinkComponent,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="LinkLinkView",t.prototype.className="link-link-view flex-vert flex-space",t.prototype.initialize=function(e){var t;if((t=e.data).length>0)return this.requestReactView(this.el,o,{items:t})},t}()},bEQZLW52:function(e,t,n){e.exports=n.p+"images/d_chigua@2x.934e1d51.png"},bGgulMbD:function(e,t,n){e.exports={"scenario-locator-dropdown":"scenario-locator-dropdown__3Rxp","scenario-locator-dropdown-content":"scenario-locator-dropdown-content__35LW","scenario-locator-dropdown-title":"scenario-locator-dropdown-title__2QeR","scenario-locator-item":"scenario-locator-item__2c5c","scenario-locator-dropdown-trigger":"scenario-locator-dropdown-trigger__24Tc","scenario-locator-status-trigger":"scenario-locator-status-trigger__QC9O"}},bI6GdBuM:function(e,t,n){"use strict";var r=n("+aKKcIe6");n.d(t,"AbstractProjectGroup",function(){return r.a});var o=n("lFehy1tv");n.o(o,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return o.AbstractPortal}),n.o(o,"getProjectGroupComponent")&&n.d(t,"getProjectGroupComponent",function(){return o.getProjectGroupComponent}),n.o(o,"getProjectGroupProps")&&n.d(t,"getProjectGroupProps",function(){return o.getProjectGroupProps}),n.o(o,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return o.getSuspendedMsg}),n.o(o,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return o.verifyProjectPayment})},bNAEDLqP:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b={}.hasOwnProperty;h=n("a+N5u/Cl"),v=n("sa1Ed382"),u=n("GESwhXbR").Toast,a=n("wd/RKGTj"),p=n("vmWJWrVe"),d=n("OmupbwLD"),g=n("ZkhtbhGT"),f=g.parseTree,m=g.getMemberTeams,i=n("9sOPw9dz"),s=n("odY26VIi"),l=n("QSzw2VcL"),r=n("Li2ycGYD"),o=n("wziRQp6w"),c=n("3hU7IruY"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)b.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.viewName="MemberInfoView",t.prototype.tagName="section",t.prototype.className="member-info-view thin-scroll",t.prototype.events={"click .remove-from-team":"removeOtherTeamMember","click .quit-from-team":"removeSelfTeamMember","click .add-team-menu-handler":"showAssignTeam"},t.prototype.initialize=function(e){return this.options=e,this.memberModel=this.options.cardModel,this.objectModel=this.options.objectModel,this.renderBasic(),this.listen()},t.prototype.listen=function(){return this.listenTo(this.memberModel,"change",this.renderBasic),this},t.prototype.renderBasic=function(){var e,t;return t=this.memberModel.toJSON(),e=a(t.birthday),t.birthday=e.isValid()?e.format("LL"):"",t.fromPanel=this.options.fromPanel,t.language=tb_i18n.getLanguage(),this.$el.html(o(t)),this.$teamInfoWrap=this.$(".team-list")},t.prototype.renderTeamsInfo=function(){var e,t,n;return"organization"!==this.memberModel.get("boundToObjectType")?this.$teamInfoWrap.html(tb_i18n.get("member.team.belongnings.none")):(e=h.extend(this.memberModel.toJSON(),{isMe:this.memberModel.id===v.user.id,permissions:null!=(t=this.objectModel)?t.hasPermissions("team.manage","put.member"):void 0}),l.fetch(this.memberModel.get("_boundToObjectId"),{boundToObjectType:"organization",beforeSend:(n=this,function(){return n.showLoadingIndicator(n.$teamInfoWrap)}),success:function(t){return function(n){var r;return t.teamsCollection=n,r=f(n.toJSON()),e.inTeams=m(t.memberModel.toJSON(),r),t.hideLoadingIndicator(t.$teamInfoWrap),t.$teamInfoWrap.html(c(e))}}(this)}))},t.prototype.removeOtherTeamMember=function(e){var t,n;return t=$(e.currentTarget),this.teamMembersCollection=new s([],{boundToObjectType:"team",_boundToObjectId:t.data("id")}),this.requestSubView(d).open(i,{title:tb_i18n.get("member.remove.from.team"),content:tb_i18n.get("team.member.remove.content"),confirmText:tb_i18n.get("project.settings.remove.member"),confirmStyle:"danger",onConfirm:(n=this,function(){return n.teamMembersCollection.removeMember(n.options.cardModel.get("_id"),{wait:!0,success:function(){return u.success(tb_i18n.get("remove.success")),v.gta.event({action:"remove member",type:"team member",control:"Org Member Info"})}})})})},t.prototype.removeSelfTeamMember=function(e){var t,n;return t=$(e.currentTarget).data("id"),n=this.teamsCollection.get(t),this.requestSubView(d).open(i,{title:tb_i18n.get("team.member.remove"),content:tb_i18n.get("team.member.remove.content"),confirmText:tb_i18n.get("project.settings.remove.member"),confirmStyle:"danger",onConfirm:function(){return n.quit({wait:!0,success:(e=this,function(){return e.renderBasic(),u.success(tb_i18n.get("quit.success")),v.gta.event({action:"quit team",type:"team member",control:"Org Member Info"})})});var e}})},t.prototype.showAssignTeam=function(e){var t;if(e.assignTeamClick=!0,!$(e.currentTarget).data("bs.popover"))return null!=(t=this.assignTeamView)&&t.remove(),this.assignTeamView=this.requestSubView(d).open(r,{memberModel:this.memberModel,teamTree:f(this.teamsCollection.toJSON()),teamTreeState:{},gta:{type:"org member",control:"Org Member Info"}})},t.prototype.renderRoleheader=function(e){return this.$(".member-role").html(e)},t}()},bQC5J7d5:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("i8i4LrFt"),a=n("GESwhXbR"),c=n("a+N5u/Cl"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this,t=this.props.messages.map(function(t){if(e.isCustomComp(t)){var n=t.component,o=t.props;return i.a.createElement(n,r.a({},o||{},{key:t.key}))}var s=c.omit(t,["props","component","key"]);return i.a.createElement(a.GlobalNotice,r.a({key:t.key},s))});return i.a.createElement(i.a.Fragment,null,t)},t.prototype.isCustomComp=function(e){return!!e.hasOwnProperty("component")},t}(o.PureComponent),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(a.ServiceQueue),p=function(e){function t(t){void 0===t&&(t=document.body);var n=e.call(this,new u)||this;return n.host=t,n.render=function(e){n.flush(i.a.createElement(l,{messages:e}))},n.queue.subscribe(n.render),n}return r.d(t,e),t.prototype.createMountNode=function(){if(!this.host)throw Error("Host element was not found.");return this.host},t.prototype.destroy=function(){this.queue.deleteAll(),this.host&&(s.unmountComponentAtNode(this.host),this.host=null)},t.prototype.next=function(e){return this.queue.add(e)},t}(a.ServiceManager);n.d(t,"OrganizationBanner",function(){return d});var d=function(){function e(){}return e.on=function(t,n){e.listeners[t].push(n)},e.off=function(t,n){if(n){var r=e.listeners[t];r.splice(r.indexOf(n),1)}else e.listeners[t]=[]},e.setup=function(t){this.hostEl&&e.destroy(),this.hostEl=t},e.next=function(t,n){if(!n)throw Error("key for `OrganizationBanner` is required");return e.listeners.next.forEach(function(e){return e(t,n)}),e.getManager().next(r.a({},t,{key:n,onHide:function(){t.onHide&&t.onHide(),e.close(n)}}))},e.close=function(t){e.getManager().close(t),e.listeners.close.forEach(function(e){return e(t)})},e.destroy=function(){e.getManager().destroy(),e.hostEl=null,e.manager=null,e.listeners.destroy.forEach(function(e){return e()})},e.getManager=function(){if(!e.manager){if(!e.hostEl)throw Error("Manager was not initialized, Host el was not found.");e.manager=new p(e.hostEl)}return e.manager},e.listeners={next:[],close:[],destroy:[]},e.manager=null,e}()},"bSSE+uWj":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e;if(i)for(var s,a=-1,c=i.length-1;a<c;)if(o+=" ",(s=i[a+=1]).isNoAssign)o+=' <li class="member-item one" data-id=""> <a> <div class="avatar img-circle no-avatar"></div> '+tb_i18n.get("task.detail.no.executor")+" </a> </li> ";else if(s.isMember){o+=" ";var l=s;o+=' <li class="member-item one" data-id="'+l._id+'"> <a> <div class="avatar img-circle" style="background-image:url('+l.avatarUrl+');"></div> '+r(l.name)+" </a> </li> "}return o}},bTtssQ3S:function(e,t,n){e.exports=n.p+"images/d_heixian@2x.3b84a11d.png"},bVSsPzm3:function(e,t,n){e.exports={root:"root__9m3n",inputContent:"inputContent__1fBz",trigger:"trigger__1JP9",triggerText:"triggerText__1ugg",teamTree:"teamTree__1-I_"}},bXbOecvn:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<a class="tag tag-handler hinted" data-title="'+r(e.name)+"\" data-gta=\"{action: 'open detail', type: 'tag', control: 'Tag List'}\"> <span class=\"tag-label tag-label-"+e.color+'"></span> <span class="tag-name">'+r(e.name)+"</span></a>";return e.permissions&&(e.permissions.put||e.permissions.putArchive||e.permissions.del)&&(o+='<a class="tag-menu-toggler icon icon-chevron-down hinted" data-title="'+tb_i18n.get("more.operations")+'"></a>'),o}},"bZn+K9Wv":function(e,t,n){e.exports=n.p+"images/member@2x.d156a908.png"},bctXzzPQ:function(e,t,n){"use strict";n.r(t);var r,o=n("2qRnoGmE");!function(e){e.Intercom="intercom",e.Kf5="kf5",e.Vone="vone"}(r||(r={}));var i=n("mrSGxOB2"),s=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e.resolveFn=t,e.rejectFn=n})}return e.prototype.resolve=function(e){this.resolveFn(e)},e.prototype.reject=function(e){this.rejectFn(e)},e}(),a=n("VLEJ/3fv"),c=function(){function e(t,n){var o=this;void 0===t&&(t=e.Host),void 0===n&&(n=e.AssetAddr),this.host=t,this.asset=n,this.serviceType=r.Kf5,this.scriptId="kf5-provide-supportBox",this.loaded=!1,this.resolver=new s,this.onScriptLoad=function(){var t=window[e.ApiContext];if(t){var n=o.userProfile,r=n.name,s=n.phone,a=n.email,c=i.g(n,["name","phone","email"]);t.ready(function(){t.identify({name:r,phone:s,email:a,metadata:o.formatProfile(c)}),t.removeButton(),o.resolver.resolve()}),o.init()}};var a=(new Date).getDay();this.scriptNode=document.createElement("script"),this.scriptNode.id=this.scriptId,this.scriptNode.src=this.asset+"?"+a,this.scriptNode.charset="utf-8",this.scriptNode.setAttribute("kf5-domain",this.host),this.scriptNode.onload=this.onScriptLoad}return e.prototype.boot=function(){this.loaded||(this.userProfile=a.getUserProfile(),document.body.appendChild(this.scriptNode),this.loaded=!0)},e.prototype.allowAutoBoot=function(){return!1},e.prototype.show=function(){return i.b(this,void 0,void 0,function(){return i.e(this,function(e){switch(e.label){case 0:return[4,this.isReady()];case 1:return e.sent().open(),[2]}})})},e.prototype.close=function(){return i.b(this,void 0,void 0,function(){return i.e(this,function(e){switch(e.label){case 0:return[4,this.isReady()];case 1:return e.sent().close(),[2]}})})},e.prototype.isReady=function(){return this.resolver.promise.then(function(){return window[e.ApiContext]})},e.prototype.init=function(){var t=window[e.ApiContext];t&&t.init()},e.prototype.formatProfile=function(e){var t=this;return Object.keys(e).reduce(function(n,r){return"object"==typeof e[r]?n.concat(t.formatProfile(e[r])):n.concat({name:r,value:e[r]})},[])},e.Host="teambition.kf5.com",e.AssetAddr="//assets-cdn.kf5.com/supportbox/main.js",e.ApiContext="KF5SupportBoxAPI",e}(),l=n("sa1Ed382"),u=function(){function e(t){var n=this;void 0===t&&(t=e.AssetAddr),this.asset=t,this.serviceType=r.Vone,this.scriptId="vone-provide-supportBox",this.loaded=!1,this.onScriptLoad=function(){n.init()};var o=(new Date).getDay();this.staffId=l.user.toJSON().openId,this.scriptNode=document.createElement("script"),this.scriptNode.id=this.scriptId,this.scriptNode.src=this.asset+"?"+o,this.scriptNode.charset="utf-8",this.scriptNode.onload=this.onScriptLoad}return e.prototype.boot=function(){this.loaded||(document.body.appendChild(this.scriptNode),this.loaded=!0)},e.prototype.allowAutoBoot=function(){return!1},e.prototype.show=function(){},e.prototype.close=function(){},e.prototype.init=function(){window.voneInit&&window.voneInit({voneProductId:e.ProductId,voneUserId:this.staffId,voneEnv:"alibaba_prod",tenant:"aliyun",theme:"DayAndNight"})},e.AssetAddr="//g.alicdn.com/ais-fed/vone-q-init/voneinit.js",e.ProductId="1721177",e}();n.d(t,"setServiceType",function(){return m}),n.d(t,"getInstance",function(){return f}),n.d(t,"ServiceType",function(){return r});var p=n("EBlcl0eU"),d=n("sa1Ed382"),h=r.Intercom;function m(e){h=e}function f(){if(d.onlineService)return d.onlineService;switch(h){case r.Intercom:return d.onlineService=new p(o.INTERCOM_APP_ID),d.onlineService;case r.Kf5:return d.onlineService=new c,d.onlineService;case r.Vone:return d.onlineService=new u,d.onlineService}throw new Error("unreachable code path")}},"bf5pbG/9":function(e,t){e.exports=function(e){var t="";return e.searchPlaceholder?t+='<div class="menu-input"> <input class="filter-input form-control" placeholder="'+e.searchPlaceholder+'"/></div>':e.addPlaceholder&&(t+='<div class="menu-input add-form"> <input class="add-input form-control" placeholder="'+e.addPlaceholder+'"/> <button class="btn btn-link link-add-handler">'+tb_i18n.get("add")+"</button></div>"),t+='<ul class="list-unstyled thin-scroll ',(e.searchPlaceholder||e.addPlaceholder)&&(t+="with-input"),t+='"></ul>'}},bkHM83tG:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("sa1Ed382"),o=n("vmWJWrVe"),r=n("NR/6Mr8q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="ActivityPanelShareView",t.prototype.className="activity-panel-share",t.prototype.initialize=function(e){return this.projectModel=e.projectModel,this.renderBasic()},t.prototype.renderBasic=function(){var e,t,n,o,s,a,c;return a=i.user.get("name"),s=this.projectModel.get("name"),o=this.projectModel.get("shortLink"),t=(n=this.projectModel.get("description"))?tb_i18n.get("project.menu.mail.content.desc",a,s,n,o):tb_i18n.get("project.menu.mail.content",a,s,o),c=n?tb_i18n.get("project.menu.weibo.content.desc",s,n):tb_i18n.get("project.menu.weibo.content",s),e={shareLink:o,mailTitle:encodeURIComponent(tb_i18n.get("project.menu.mail.title",s)),mailBody:encodeURIComponent(t),weiboLink:encodeURIComponent(o),weiboBody:encodeURIComponent(c)},this.$el.html(r(e))},t}()},blcJqBeA:function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty;r=n("t9XoEkGd"),o=n("wd/RKGTj"),i=n("tGfyIDI3"),a=n("vmWJWrVe"),c=n("OmupbwLD"),s=n("rx72K1eX").Timestamp,l=n("XhpHwZVN").WorkIcon,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="WorkListView",t.prototype.tagName="ul",t.prototype.className="work-list-view",t.prototype.events={"click .work":"openDetail"},t.prototype.initialize=function(e){if(null!=e?e.worksCollection:void 0)return this.options=e,this.worksCollection=e.worksCollection,this.renderBasic().listen(),this},t.prototype.listen=function(){var e;return this.listenTo(this.worksCollection,"add change",(e=this,function(t){return e.renderWork(t,!0)})),this.listenTo(this.worksCollection,"remove destroy",this.removeWork),this},t.prototype.renderBasic=function(){var e;return this.worksCollection.each((e=this,function(t){return e.renderWork(t)})),this},t.prototype.renderWork=function(e,t){var n,i,a,c;return i=this.$(".work[data-id="+e.id+"]"),c=this.getData(e),a=$(r(c)),i.length?(this.unmountReact(i.find(".react-file-icon").get(0)),i.replaceWith(a)):this.$el[t?"prepend":"append"](a),this.requestReactView(a.find(".react-time-stamp").get(0),s,{initialTime:o(c.created).toDate()}),n=a.find(".react-file-icon"),this.requestReactView(n.get(0),l,{fileType:n.data("type")}),this},t.prototype.removeWork=function(e){var t,n;return n=this.$(".work[data-id="+e.id+"] .react-time-stamp").get(0),this.unmountReact(n),t=this.$(".work[data-id="+e.id+"] .react-file-icon").get(0),this.unmountReact(t),this.$(".work[data-id="+e.id+"]").remove(),this},t.prototype.getData=function(e){var t;return(t=e.getFormatData()).creator||(t.creator={_id:"",name:""}),t},t.prototype.openDetail=function(e){var t;return t=this.worksCollection.get($(e.currentTarget).data("id")),this.requestSubView(c).open(i,{workModel:t,workModels:this.worksCollection.models}),this},t}()},bmdSruO6:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R,D,L,z,A,V,F,B,U,$,H,G,q,W,J,X,Y,K,Q,Z,ee,te,ne,re,oe={}.hasOwnProperty;D=n("2qRnoGmE"),T=n("HYobN8SQ"),ne=n("sa1Ed382"),r=n("+2RfZ2TT"),R=n("a+N5u/Cl"),U=n("tLZJUYWX"),te=n("s0r7VfKc").default,Y=n("wd/RKGTj"),c=n("bZr3G77e"),j=n("RQ44psah"),P=n("CxY0Mkc1"),Z=n("QyjeWo4p"),re=n("gh8QIhMV").throwError,x=n("vmWJWrVe"),K=n("90U+kJWN").openInNewTab,ee=n("5qt3k8Zi"),G=ee.markPersonalOrgTipDisplayed,z=ee.hasPersonalOrgTipBannerConsumed,H=ee.markPersonalOrgTipBannerConsumed,A=ee.hasVisitedDingTalkBind,q=ee.markVisitedDingTalkBind,V=ee.hasVisitedDingTalkTransfer,W=ee.markVisitedDingTalkTransfer,B=ee.hasVisitedOrgOuterMembersQuotaBanner,X=ee.markVisitedOrgOuterMembersQuotaBanner,F=ee.hasVisitedInviteMemberIntoOrgBanner,J=ee.markVisitedInviteMemberIntoOrgBanner,l=n("HDJEOtNh").OrganizationAccess,S=n("q1tIBJhx"),y=n("85182E8g"),_=n("nL4olqOP"),u=n("0tZ0ePmD"),d=n("uGcFUGYs"),h=n("hg6sBHEu"),M=n("6+kgR2XT"),f=n("QzLhqKzy"),v=n("Ar3iunZ4"),b=n("VP3MIruh"),I=n("l8L1crJR").TesthubAppView,g=n("Eq0YbNMI"),C=n("KJFqng8l"),E=n("uZGFX7kQ"),a=n("zN7osOLL").GanttTimelineView,k=n("EE/OV44P"),O=n("OmupbwLD"),m=n("XOfK16tK").OrganizationPaymentBanner,p=n("bQC5J7d5").OrganizationBanner,w=n("QSq3kW9f").ProjectsInformationBoardView,i=n("9sOPw9dz"),$=n("suI5NDUm").isAone,L=n("8KNpsyVU").getAccountBind,s=n("jenUMZo6"),o=n("uKNTIkse"),Q=n("NtzEC3Pa"),N={analysis:u,plugins:k,"projects-information":w,projects:f,reports:b,"report-app":v,statistics:E,timeline:a,testcase:I,portal:g},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)oe.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,x),t.prototype.viewName="OrganizationView",t.prototype.className="organization-view",t.prototype.routes={"analysis(/*paramString)":"enterAnalysis","plugin(/:_pluginId)":"enterPlugins","plugin/:_pluginId(/member/:memberUserId)":"enterPlugins",members:"enterMemberPlugin","profile/:memberId":"enterMemberPlugin",projectboard:"enterProjectsInformationBoardView",projects:"enterProjects",reports:"enterReports","statistics(/:_tab)":"enterStatistics","testhub(/*paramString)":"enterTestcase","reportapp(/*paramString)":"enterReportApp",timeline:"enterTimeline",portal:"enterPortal","*paramString":"enterProjects"},t.prototype.events={"click .export-projects":"openProjectsExportTransfer","click .phone-to-bind-link":"handlePhoneLink"},t.prototype.enterTimeline=function(){return this.refreshTab("timeline")},t.prototype.initialize=function(e){return this.options=null!=e?e:{},r("html, body").scrollTop(0),this.organization=this.options.organizationModel,this.organizationModel=this.options.organizationModel,this.organizationPaymentBannerCache=T.namespace("temp").namespace(this.organization.id+"_plan_tips"),this.renderBasic(),this.organizationProjects=_.get(this.organization.id,{boundToObjectType:"organization"}),this.listen(),this.renderDIS(),p.setup(this.$bannerContainer.get(0)),this.renderBanner(),this},t.prototype.listen=function(){var e;return this.listenTo(this.organization,"change:name",(e=this,function(){return e.$(".org-name").text(e.organization.get("name"))})),this.listenTo(this.organization,"change:plan",function(e){return function(){var t;return e.renderPlan(),e.organization.payment.isActive?null!=(t=e.overdueView)?t.remove():void 0:e.overdueView?void 0:e.showOverdue()}}(this)),this.listenTo(this.organizationProjects,"add remove",function(e){return function(){return e.refreshPlanTip()}}(this)),this},t.prototype.renderBasic=function(){var e,t;return this.$el.html(o({})),this.$bannerContainer=this.$(".organization-banner-container"),this.$organizationTabContent=this.$(".organization-tab-content"),e=this.options.routeString,this.organization.payment.isExpired?R.delay((t=this,function(){return t.showOverdue()})):""!==e&&"projects"!==e||this.tryRenderExcess(this.organization.payment),this},t.prototype.renderPlan=function(){var e;return this.organizationPaymentBannerCache("closed")||(p.close("payment"),p.next({component:m,props:{organization:this.organization.toJSON(),onClose:(e=this,function(){return p.close("payment"),e.organizationPaymentBannerCache("closed",(new Date).toISOString())})}},"payment")),this},t.prototype.renderPersonalWSUpgrade=function(){if(!!ne.PREFERENCE.get("personalOrganizationId")&&!z())return p.next({type:"info",message:U.get("pernsonal.workspace.transfer.hint"),handler:U.get("learn.more"),onClickHandler:function(){return window.open("https://teambition.kf5.com/hc/kb/article/1218426/")},onHide:function(){return H()}},"PersonalWSUpgrade"),G()},t.prototype.handlePhoneLink=function(){return window.open(D.ACCOUNT_HOST+"/my/account")},t.prototype.renderAccountBindBanner=function(){return L(this.organization.id).then(function(e){var t;if(!e&&!ne.user.get("visitedAccountBindBanner"))return t=S.createElement("div",{dangerouslySetInnerHTML:{__html:tb_i18n.get("account.band.banner")}}),p.next({type:"info",message:t,handler:tb_i18n.get("account.load.more"),onClickHandler:function(){return window.open("https://guide.teambition.net/hc/kb/article/1274160/")},onHide:function(){return ne.user.set("visitedAccountBindBanner",!0),p.close("accountBind")}},"accountBind")})},t.prototype.renderInviteMemberBanner=function(){var e,t,n,r;if(n=this.organization.id,!D.FREE&&!this.organization.payment.isPaid&&Y().subtract(1,"day").isAfter(this.organization.get("created"))&&l.hasPermission(n,"organization.post.member")&&!F())return e=function(){return p.close("inviteMember"),J()},t=function(){return ne.gta.event({action:"trigger org-invite-member"}),ne.gta.event({action:"invite member",control:"Banner",method:"click",page:"Organization Page"})},te.fetch.getMembersCount(n).toPromise().then((r=this,function(n){var o;if(o=r.organization.payment.memberQuota,Math.max(o-n,0)>0)return p.next({type:"info",message:tb_i18n.get("onboarding.view.org.invite.member.notice"),handler:tb_i18n.get("onboarding.view.org.invite.member.go"),onClickHandler:function(){return t(),e()},onHide:function(){return e()}},"inviteMember")}))},t.prototype.renderDingtalkBanner=function(){var e;if(-1===ne.env.indexOf("us")&&(this.organization.getRoleScope()>=0&&D.DINGTALK_HOST))return te.fetch.get("checkbind",{organizationid:this.organization.id},{apiHost:""+D.DINGTALK_HOST}).toPromise().then((e=this,function(t){if(e.$el)return t.needBindDing&&!A()?e.renderDingtalkBind():t.needBindTb&&!V()?e.renderDingtalkTransfer():void 0}))},t.prototype.renderDingtalkBind=function(){return te.fetch.get("aliens",null,{apiHost:D.ACCOUNT_HOST+"/api"}).toPromise().then(function(e){var t,n,r,o;return r="next_url="+encodeURI(location.href),n=D.ACCOUNT_HOST+"/dingTalk/bind?"+r+"&r="+e.csrfToken,t=S.createElement("a",{className:"dingtalk-to-bind-link",href:n,target:"_blank"},tb_i18n.get("dingtalk.banner.to.bind")),o=S.createElement("div",null,tb_i18n.get("dingtalk.bind.notice"),t),p.next({type:"info",message:o,handler:tb_i18n.get("dingtalk.banner.nomore.notice"),onClickHandler:function(){return q(),p.close("dingTalk1")}},"dingTalk1")}),this},t.prototype.renderDingtalkTransfer=function(){var e,t,n;return e=S.createElement("span",{className:"dingtalk-to-transfer",onClick:(n=this,function(){return n.showTransferDingTalkModal()})},tb_i18n.get("dingtalk.transfer.title")),t=S.createElement("div",null,tb_i18n.get("dingtalk.transfer.notice"),e),p.next({type:"info",message:t,handler:tb_i18n.get("dingtalk.banner.nomore.notice"),onClickHandler:function(){return W(),p.close("dingTalk2")}},"dingTalk2"),this},t.prototype.showTransferDingTalkModal=function(){return this.requestSubView(M),this},t.prototype.renderOrgOuterMembersQuotaBanner=function(){var e;if(e=this.organizationModel.id,l.hasAdminAuthority(e)&&Y().isBefore("2019-05-12")&&!B())return p.next({message:U.get("organization.outer.members.quota"),handler:U.get("learn.more"),type:"info",onClickHandler:function(){return K(j.help.outerMember)},onHide:function(){return X()}},"OrgOuterMembersQuota")},t.prototype.renderBanner=function(){return this.renderPlan(),this.renderPersonalWSUpgrade(),this.renderDingtalkBanner(),this.renderAccountBindBanner(),this.renderInviteMemberBanner(),this.renderOrgOuterMembersQuotaBanner()},t.prototype.showOverdue=function(){var e;return null!=(e=this.overdueView)&&e.remove(),this.overdueView=this.requestSubView(O).open(h,{_organizationId:this.organization.id}),this},t.prototype.tryRenderExcess=function(e){var t,n,r,o;if(o=this.organizationModel.getRoleScope(),e.isStrictExceed){if(null!=this.excessView)return;o>=1?this.excessView=this.requestSubView(O).open(d,{organizationId:this.organization.id}):(n=tb_i18n.get("organization.settings.add.member.toplimit"),t=j.pay.orgAddMember(this.organizationModel.id),r=tb_i18n.get("organization.member.exceed.description",this.organizationModel.payment.memberQuota),this.excessView=this.requestSubView(O).open(i,{title:tb_i18n.get("organization.member.exceed"),content:r,confirmText:n,confirmHref:t}))}else e.isSoftExceed&&Q.alert.softExcessMember(this.organizationModel.id,o);return this},t.prototype.switchTo=function(e,t){return this.$(".organization-nav li").removeClass("active"),"plugins"===e?this.$(".organization-nav-"+e+"[data-id="+t+"]").addClass("active"):this.$(".organization-nav-"+e).addClass("active"),this},t.prototype.enterProjects=function(){return this.refreshTab("projects")},t.prototype.enterPortal=function(e){var t;return $()?(t=this.getURLQuery(),this.refreshTab("portal",{options:{url:decodeURIComponent(t.nextUrl)},tabName:"portal"})):ne.router.navigateToWorkspaceOrganization(this.organization.id)},t.prototype.enterReports=function(){return this.enterTab("reports")},t.prototype.enterAnalysis=function(){return _.fetch(this.organization.id,{boundToObjectType:"organization",error:function(e,t){return re(t)},success:(e=this,function(t){return e.enterTab("analysis",{organizationProjects:t.toJSON()})})});var e},t.prototype.enterStatistics=function(e){return this.enterTab("statistics",{tab:e})},t.prototype.enterTestcase=function(){return c.get(D.HOST+"/appstore/api/organizations/"+this.organization.id+"/installedFeatures").then((e=this,function(t){var n,r,o;if(o=/organization\/testcase/,t&&R.some(R.pluck(t,"url"),function(e){return o.test(e)})){if(e.contentView instanceof N.testcase)return;return null!=(n=e.contentView)&&n.remove(),e.$(".organization-workspace-topbar").hide(),e.tabName="testcase",e.updateWrapClassName("testcase"),e.contentView=e.requestSubView(N.testcase,{organizationModel:e.organization}),null!=(r=e.$organizationTabContent)?r.append(e.contentView.$el):void 0}return ne.router.navigateToWorkspaceOrganization(e.organization.id)}));var e},t.prototype.enterReportApp=function(){var e,t;if(!(this.contentView instanceof N["report-app"]))return null!=(e=this.contentView)&&e.remove(),this.tabName="report-app",this.updateWrapClassName("report-app"),this.contentView=this.requestSubView(N["report-app"],{organizationId:this.organization.id}),null!=(t=this.$organizationTabContent)?t.append(this.contentView.$el):void 0},t.prototype.enterPlugins=function(e,t){return this.enterTab("plugins",{_pluginId:e,memberUserId:t})},t.prototype.enterMemberPlugin=function(e){return ne.router.navigateToMemberProfile(this.organization.id,e)},t.prototype.getURLQuery=function(){var e;return e=P.parse(location.href),Z.parse(e.query)},t.prototype.enterTab=function(e,t){var n,r;if(null==e&&(e="projects"),"admin"!==e){if(~["reports","statistics","plugins"].indexOf(e)&&this.organization.getRoleScope()<0&&(e="projects",t=null),n={tabName:e},t)switch(n.options=t,e){case"plugins":n._pluginId=t._pluginId,r=t._pluginId,n.options.url=this.getURLQuery().nextUrl,this.switchTo("plugins",r),this.navigateTo("/plugin/"+r,{trigger:!1});break;case"statistics":r=t.tab,this.switchTo(e),this.navigateTo("/"+e+"/"+r,{trigger:!1})}else switch(this.switchTo(e),e){case"analysis":this.navigateTo("/"+e,{replace:!0,trigger:!0});break;case"statistics":this.navigateTo("/"+e+"/project",{trigger:!1});break;default:this.navigateTo("/"+e,{trigger:!1})}return this.refreshTab(e,n)}window.open("/organization-admin/"+this.organization.id)},t.prototype.refreshTab=function(e,t,n){var r;if(null==t&&(t={tabName:e}),this.tabName,"plugins"===e||e!==this.tabName)return this.tabName=e,this.updateWrapClassName(e),this.renderTab(t),null!=this.excessView&&(null!=(r=this.excessView)&&r.remove(),this.excessView=null),this.tryRenderExcess(this.organization.payment)},t.prototype.renderTab=function(e){var t,n,r,o;return o=e.tabName,t=e.options,null!=(n=this.contentView)&&n.remove(),t=R.extend({},t,{organizationModel:this.organization}),this.contentView=this.requestSubView(N[o],t),null!=(r=this.$organizationTabContent)?r.append(this.contentView.$el):void 0},t.prototype.openProjectsExportTransfer=function(){var e,t;return e=y.get(0).getOrganizationsByRight(2),(t=R.pluck(e,"id")).push(0),this.requestSubView(O).open(C,{sourceId:this.organization.id,targetIds:t,action:"export"}),this},t.prototype.refreshPlanTip=function(){return this.organizationProjects.length||this.$(".export-projects").hide(),this},t.prototype.navigateTo=function(e,t){var n;return n="/organization/"+this.organization.get("_id"),e&&(n+=e),ne.router.navigate(n,t),this},t.prototype.remove=function(){return p.destroy(),t.__super__.remove.apply(this,arguments)},t.prototype.updateWrapClassName=function(e){var t,n,r;if((null!=(n=this.$el)?n.get(0):void 0)&&(null!=(t=this.$(".organization-wrap"))?t.get(0):void 0))return r=function(){switch(e){case"analysis":return"analysis";case"plugins":return"plugins";case"projects-information":return"projects-information";case"projects":return"projects";case"report-app":return"report-app";case"reports":return"reports";case"statistics":return"statistics";case"timeline":return"timeline";case"portal":return"portal";default:return"default"}}(),t.removeClass(this.prevWrapClassName),this.prevWrapClassName="is-"+r,t.addClass(this.prevWrapClassName)},t.prototype.enterProjectsInformationBoardView=function(){return this.enterTab("projects-information",{organizationId:this.organizationModel.get("_id")})},t.prototype.renderDIS=function(){var e;if(e="organization"===D.FEATURES.enableDIS)return this.requestSubView(s,{isEnable:e,myUserId:ne.user.get("_id"),organizationId:this.organizationModel.get("_id")})},t}()},"bmniE/8j":function(e,t,n){e.exports={"color-picker":"color-picker__3til"}},"bt0fKs+7":function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;a=n("a+N5u/Cl"),o=n("qHH6+g6Q"),s=n("3eMzznN/"),i=n("wu4EEviu"),c=n("wMS7wN+j"),r=n("/e+Ob7oW"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.name="message",t.prototype.urlRoot="messages",t.prototype.isReading=!1,t.prototype.parse=function(e){return e.mentions||(e.mentions={}),(e=a.extend(this.toJSON(),e)).inboxIgnore="home"===e.type,e.inboxIgnore?e.unreadActivitiesCount=0:"system"!==e.type||e.isRead||(e.unreadActivitiesCount=1),e},t.prototype.listen=function(){var e;if(!this.listened&&this.id)return i.on(":refresh:message/"+this.id,(e=this,function(t){return e.fetch({url:"v2/"+e.urlRoot+"/"+t})})),t.__super__.listen.apply(this,arguments)},t.prototype.archive=function(){return this.has("isPseudo")&&this.get("isPseudo")?this.collection.removePseudoMessage(this):(this.set({isRead:!0,isArchived:!0,unreadActivitiesCount:0}),this.destroy())},t.prototype.markRead=function(){var e;if(!this.get("isRead"))return e={isRead:!0,unreadActivitiesCount:0},this.save(e,{attrs:e})},t.prototype.markLater=function(e,t){var n;return n={isLater:e,reminderDate:t||void 0},this.save(n,{url:this.urlRoot+"/"+this.id+"/later",attrs:n})},t.prototype.genMessage=function(){var e;return(e=this.toJSON()).title=this.parseString(e.content||e.note||e.title),e.boundToObjectType=e.boundToObjectType||e.objectType,e.creator||(e.creator={name:"",avatarUrl:""}),e},t.prototype.parseString=function(e){return e=c.sanitize(r(e),{ALLOWED_TAGS:["img"]}),s.cutString(e,100,"...")},t.prototype.getModelId=function(){var e;return e=null,this.has("group")&&(e=this.get("group")._id),this.has("project")?e=this.get("project")._id:this.has("creator")&&(e=this.get("creator")._id),e},t.prototype.isValid=function(){return!this.get("isArchived")&&!this.get("inboxIgnore")},t.prototype.isReaded=function(){return this.isValid()&&this.get("isRead")&&0===this.get("unreadActivitiesCount")},t.prototype.isUnread=function(){return this.isValid()&&!this.get("isRead")||this.get("unreadActivitiesCount")>0},t.prototype.onRead=function(){var e,t;if(!this.isReading)return this.isUnread()?(this.isReading=!0,e={isRead:!0,unreadActivitiesCount:0},this.save(e,{attrs:e,complete:(t=this,function(){return t.isReading=!1})})):void 0},t.prototype.onRemove=function(){if(this.set({isRead:!0,isArchived:!0,unreadActivitiesCount:0}),!this.get("isPseudo"))return this.destroy()},t.prototype.getTargetId=function(){var e;return e=null,this.has("group")?e=this.get("group")._id:this.has("project")?e=this.get("project")._id:this.has("creator")&&(e=this.get("creator")._id),e},t}()},btZiwEgG:function(e,t,n){e.exports={"import-projects-title":"import-projects-title__1nWV","import-projects-footer":"import-projects-footer__2sNX","multi-selector":"multi-selector__15pA"}},bv63Y0YZ:function(e,t,n){"use strict";var r=n("qCWxDgLE");n.o(r,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return r.AbstractPortal}),n.o(r,"ProjectGridAddCard")&&n.d(t,"ProjectGridAddCard",function(){return r.ProjectGridAddCard}),n.o(r,"ProjectGridCard")&&n.d(t,"ProjectGridCard",function(){return r.ProjectGridCard}),n.o(r,"ProjectListAddCard")&&n.d(t,"ProjectListAddCard",function(){return r.ProjectListAddCard}),n.o(r,"ProjectListCard")&&n.d(t,"ProjectListCard",function(){return r.ProjectListCard}),n.o(r,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return r.getSuspendedMsg}),n.o(r,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return r.verifyProjectPayment});var o=n("JjQg5B8J");n.o(o,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return o.AbstractPortal}),n.o(o,"ProjectGridAddCard")&&n.d(t,"ProjectGridAddCard",function(){return o.ProjectGridAddCard}),n.o(o,"ProjectGridCard")&&n.d(t,"ProjectGridCard",function(){return o.ProjectGridCard}),n.o(o,"ProjectListAddCard")&&n.d(t,"ProjectListAddCard",function(){return o.ProjectListAddCard}),n.o(o,"ProjectListCard")&&n.d(t,"ProjectListCard",function(){return o.ProjectListCard}),n.o(o,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return o.getSuspendedMsg}),n.o(o,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return o.verifyProjectPayment});var i=n("PFZGUysW");n.d(t,"ProjectGridCard",function(){return i.a});var s=n("gcGC7lGn");n.o(s,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return s.AbstractPortal}),n.o(s,"ProjectGridAddCard")&&n.d(t,"ProjectGridAddCard",function(){return s.ProjectGridAddCard}),n.o(s,"ProjectListAddCard")&&n.d(t,"ProjectListAddCard",function(){return s.ProjectListAddCard}),n.o(s,"ProjectListCard")&&n.d(t,"ProjectListCard",function(){return s.ProjectListCard}),n.o(s,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return s.getSuspendedMsg}),n.o(s,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return s.verifyProjectPayment});var a=n("e2uirt9A");n.o(a,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return a.AbstractPortal}),n.o(a,"ProjectGridAddCard")&&n.d(t,"ProjectGridAddCard",function(){return a.ProjectGridAddCard}),n.o(a,"ProjectListAddCard")&&n.d(t,"ProjectListAddCard",function(){return a.ProjectListAddCard}),n.o(a,"ProjectListCard")&&n.d(t,"ProjectListCard",function(){return a.ProjectListCard}),n.o(a,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return a.getSuspendedMsg}),n.o(a,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return a.verifyProjectPayment})},bwmLBNku:function(e,t,n){e.exports={root:"root__34Ub",content:"content__2xxE",trigger:"trigger__256j",placeholder:"placeholder__1KwA",triggerText:"triggerText__2Ra6",popupContent:"popupContent__34nB",optionList:"optionList__182I",optionTrigger:"optionTrigger__1l7x",optionTriggerText:"optionTriggerText__B9Pi",optionEmpty:"optionEmpty__3-hA",createInputContent:"createInputContent__1CKE",createInput:"createInput__3wpR",createInputButton:"createInputButton__2hBH"}},c2hT3iqT:function(e,t,n){"use strict";n.r(t),n.d(t,"flattenObject",function(){return o}),n.d(t,"hash",function(){return i});var r=n("a+N5u/Cl"),o=function(e,t,n,i){return void 0===t&&(t="."),void 0===n&&(n={}),void 0===i&&(i=""),r.isObject(e)&&0!==r.keys(e).length&&r.each(e,function(e,r){o(e,t,n,""+i+(i?t:"")+r)}),i&&(n[i]=e),n},i=function(e){void 0===e&&(e="");var t=0;if(0===e.length)return t;for(var n=0;n<e.length;++n)t=(t<<5)-t+e.charCodeAt(n)|0;return t.toString(16).replace("-","n")}},c3AfLWNW:function(e,t,n){e.exports=n.p+"images/d_ku@2x.165ca95e.png"},c5kIt6mT:function(e,t){e.exports=function(e){return'<div class="header member-bar-header"> <a class="switch-handler back-to-project-members"> <span class="icon icon-chevron-left"></span> <span class="get-back">'+tb_i18n.get("back")+'</span> </a> <div class="title hinted">'+tb_i18n.get("member.bar.title")+'</div> <a class="icon icon-remove close-handler"></a></div><div class="member-bar-body thin-scroll"> <div class="member-bar-input-wrap"> <input class="filter-input form-control" placeholder="'+tb_i18n.get("member.bar.input")+'" /> </div> <ul class="members-list clearfix"></ul></div><div class="member-progress"></div>'}},cD1SPGFo:function(e,t,n){},cHtiPwnq:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";e.hasHeader&&(o+=" <header>"+e.title+"</header>");var i=e.items;if(i)for(var s,a=-1,c=i.length-1;a<c;){if(s=i[a+=1],o+='  <li class="link',e.hasHeader||(o+=" object-picker"),o+='" data-id="'+r(s._id)+'" data-linkedid="'+r(s._linkedId)+'" >  ',e.hasHeader?o+=' <a class="link-head" href="'+r(s.data.html_url)+'" target="_blank"> ':o+=' <div class="link-head"> ',o+="  ",e.hasHeader&&(o+=' <div class="link-icon-wrap link-github-icon"> <span class="icon icon-github"></span> </div> '),o+='  <div class="link-icon-wrap link-github-type"> <span class="icon avatar '+(d(s.data.type)||"")+'"></span> </div> ',"commit"===s.data.type){if(o+=' <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main">  <span class="title-name" title="'+r(s.data.commit.message)+'">'+r(s.data.commit.message)+"</span> </div>  ",e.hasHeader)o+=" ",o+=' <div class="link-title-header-rest" title="'+r(l=[s.commitTime.dateString,s.commitTime.timeFormatString][0]+" "+(s.commitTime.dateString,s.commitTime.timeFormatString))+'"> '+r(l)+" </div> ";o+=' </div> <div class="link-title-footer"> '+tb_i18n.get("by")+" "+r(s.data.commit.committer.name)+" </div> </div> "}else if("pullRequest"===s.data.type){if(o+=' <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main">  <span class="title-name" title="'+r(s.data.title)+'">'+r(s.data.title)+"</span> </div>  ",e.hasHeader)o+=" ",o+=' <div class="link-title-header-rest" title="'+r(l=[s.time.dateString,s.time.timeFormatString][0]+" "+(s.time.dateString,s.time.timeFormatString))+'"> '+r(l)+" </div> ";o+=' </div> <div class="link-title-footer"> '+r(s.data.state)+" "+tb_i18n.get("by")+" "+r(s.data.user.login)+' </div> <div class="link-title-footer"> '+tb_i18n.get("merge")+' <span class="git-resp">'+r(s.data.head.ref)+'</span> into <span class="git-resp">'+r(s.data.base.ref)+"</span> </div> </div> "}else if("issue"===s.data.type){var l;if(o+=' <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main">  <span class="title-name" title="'+r(s.data.title)+'">'+r(s.data.title)+"</span> </div>  ",e.hasHeader)o+=" ",o+=' <div class="link-title-header-rest" title="'+r(l=[s.time.dateString,s.time.timeFormatString][0]+" "+(s.time.dateString,s.time.timeFormatString))+'"> '+r(l)+" </div> ";o+=' </div> <div class="link-title-footer"> '+r(s.data.body)+' </div> <div class="link-title-footer"> '+r(s.data.state)+" "+tb_i18n.get("by")+" "+r(s.data.user.login)+" </div> </div> "}else if("branch"===s.data.type){o+=' <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main link-github-branch"> ';var u=s.data.repo?s.data.repo.name:"";o+='  <span class="title-name" title="'+r(u)+'">'+r(u)+'</span> <span class="git-resp">'+r(s.data.name)+"</span> </div> </div> </div> "}o+="   ",e.hasHeader?o+=" </a> ":o+=" </div> ",o+="  ",s.objectlinkDel&&(o+=' <a class="link-menu-handler icon icon-chevron-down" data-id="'+r(s._id)+'" ></a> '),o+=" </li>"}function p(e){return"icon-git-"+e}function d(e){switch(e){case"commit":return p("commit");case"pullRequest":return p("pull-request");case"issue":return p("issue");case"branch":return p("fork")}}return o}},cHwzqZWf:function(e,t,n){"use strict";n.r(t),n.d(t,"isInCreationMode",function(){return r}),n.d(t,"isArchived",function(){return o}),n.d(t,"canPutRecurrence",function(){return i});var r=function(e){return!e.id},o=function(e){return!!e.get("isArchived")},i=function(e){return e.hasPermission("put")&&!o(e)}},cI3PKZPl:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("eO8HY5nz"),a=n("/MKjzBat"),c=n("tLZJUYWX"),l=n.n(c),u=n("sa1Ed382"),p=n("GESwhXbR"),d=n("YqUJfXDr"),h=n("Ln2xgh+2"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onClick(t.props.testhub._id)},t}return r.d(t,e),t.prototype.renderTitle=function(){return o.createElement("h4",{className:h.title},this.props.testhub.name)},t.prototype.renderDescription=function(){return o.createElement("p",{className:h.description},this.props.testhub.description)},t.prototype.render=function(){return o.createElement("div",{className:h.card,onClick:this.onClick},this.renderTitle(),this.renderDescription())},t}(o.PureComponent),f=n("a+N5u/Cl"),g=n("TSYQbtd+"),v=n.n(g),b=n("FeMXPqu9"),y=function(e){function t(t){var n=e.call(this,t)||this;return n.saveInputRef=function(e){n.inputRef=e},n.submit=function(){n.props.onSubmit({name:n.state.name.trim(),description:n.state.description.trim()})},n.onNameChange=function(e){var t=e.target.value;n.setState({name:t})},n.onDescriptionChange=function(e){var t=e.target.value;n.setState({description:t})},n.onCreatorModalOpen=function(){f.defer(function(){n.inputRef&&n.inputRef.focus()})},n.state={name:"",description:""},n}return r.d(t,e),t.prototype.checkDisabled=function(){var e=this.state,t=e.name,n=e.description,r=t.trim(),o=n.trim();return 0===r.length||r.length>20||o.length>500},t.prototype.renderTitle=function(){return o.createElement("div",{className:b.header},o.createElement("div",{className:b["header-image"]}),o.createElement("p",{className:b["header-message"]},c.get("testhub.creator.message")))},t.prototype.renderNameInput=function(){var e=v()("form-control",b["testhub-name"]);return o.createElement(p.Input,{className:e,value:this.state.name,onChange:this.onNameChange,placeholder:c.get("testhub.app.creator.name.placeholder"),ref:this.saveInputRef})},t.prototype.renderDescriptionInput=function(){var e=v()("form-control",b["testhub-description"]);return o.createElement("textarea",{className:e,value:this.state.description,onChange:this.onDescriptionChange,placeholder:c.get("testhub.app.creator.description.placeholder")})},t.prototype.renderSubmit=function(){return o.createElement(p.Button,{className:b.submit,onClick:this.submit,disabled:this.checkDisabled()},c.get("testhub.app.creator.submit"))},t.prototype.render=function(){return o.createElement(p.Modal,{title:c.get("testhub.app.creator.title"),titleCls:b.title,opened:this.props.opened,onOpen:this.onCreatorModalOpen,onVisibleChange:this.props.onVisibleChange},o.createElement("div",{className:b.creator},this.renderTitle(),this.renderNameInput(),this.renderDescriptionInput(),this.renderSubmit()))},t}(o.PureComponent),k=n("wXiA47ap"),_=n("Si88ejXw"),w=n.n(_),C=n("UnXYfJ+a"),S=n.n(C),E=n("i/yG9/km"),T=n("IwxuFAT9"),I={createTesthub:E.a,fetchTesthubs:E.d,onCreatorVisibleChange:E.f,onRouteTo:k.a.push,onUnmount:E.c},M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e={enter:T["item-fade-enter"],enterActive:T["item-fade-enter-active"],exit:T["item-fade-exit"],exitActive:T["item-fade-exit-active"]};return o.createElement(w.a,r.a({},this.props,{classNames:e,enter:!0,exit:!0,timeout:{enter:180,exit:240}}))},t}(o.PureComponent),j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enterLibrary=function(e){u.gta.event({action:"open detail",type:"testcase library"}),t.props.onRouteTo(k.a.testhub(t.props.match,e))},t.onLibraryCreatorOpen=function(){u.gta.event({action:"add content",type:"testcase library"}),t.props.onCreatorVisibleChange(!0)},t.onCreate=function(e){u.gta.event({action:"added content",type:"testcase library"}),t.props.createTesthub(e)},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.props.fetchTesthubs()},t.prototype.componentWillUnmount=function(){this.props.onUnmount()},t.prototype.renderHeader=function(){var e=this.props.totalSize?c.get("testhub.app.header")+" · "+this.props.totalSize:c.get("testhub.app.header");return o.createElement("div",{className:T.header},o.createElement("h1",{className:T["header-title"]},e),o.createElement(p.TextButton,{color:"blue",className:T["header-handler"],onClick:this.onLibraryCreatorOpen},o.createElement(p.Icon,{name:"circle-plus"}),o.createElement("span",null,c.get("testhub.app.creator"))))},t.prototype.renderLibraryCards=function(){var e=this;return this.props.testhubs.map(function(t){return o.createElement(M,{key:t._id},o.createElement(m,{testhub:t,onClick:e.enterLibrary}))}).concat([this.renderCreator()])},t.prototype.renderLibraryCreatorModal=function(){return o.createElement(y,{opened:this.props.creatorOpened,onVisibleChange:this.props.onCreatorVisibleChange,onSubmit:this.onCreate})},t.prototype.renderCreator=function(){return o.createElement(M,{key:"creator"},o.createElement("div",{onClick:this.onLibraryCreatorOpen,className:T.creator},o.createElement(p.Icon,{name:"circle-plus",size:30,className:T["creator-icon"]}),o.createElement("span",{className:T["creator-hint"]},c.get("testhub.app.creator"))))},t.prototype.renderLibraries=function(){return!this.props.isLoading&&o.createElement(S.a,{className:T.library},this.renderLibraryCards())},t.prototype.renderLoading=function(){return this.props.isLoading&&o.createElement(p.Loading,null)},t.prototype.renderLoadMore=function(){return o.createElement(d.LoadMore,{onEnter:this.props.fetchTesthubs,hasMore:this.props.hasMore,endWith:null})},t.prototype.render=function(){return o.createElement("div",{className:T.app},this.renderHeader(),this.renderLibraries(),this.renderLoading(),this.renderLoadMore(),this.renderLibraryCreatorModal())},t}(o.PureComponent),P=Object(a.connect)(function(e){var t=e.ui.testhubApp,n=t.testhubs,r=t.creatorOpened;return{totalSize:t.totalSize,hasMore:t.hasMore,creatorOpened:r,isLoading:!n,testhubs:n||[]}},I)(j),x=n("s0r7VfKc"),N=n("zir0hWNI"),O=n("eKedrZ+V"),R=n("wVXDg9Ql"),D=n("VeKvNOLd"),L=n("SaPkAFtJ"),z=n("XwTZsc6U"),A=n("+khYcOo0"),V=n("sa1Ed382"),F=n("HYobN8SQ").namespace("testhub-sidebar"),B=function(e){function t(t){var n=e.call(this,t)||this;return n.refCreator=function(e){n.creatorPopup=e},n.refRootEl=function(e){n.rootEl=e},n.refSideline=function(e){n.sidelineEl=e},n.goHome=function(){n.props.goHome()},n.onSettingsOpen=function(){n.props.onSettingsOpen()},n.onDragStart=function(){document.body.classList.add("dragging")},n.onDragging=function(e){var t=e.mouseMoveEvent,r=e.previous,o=n.width;n.width=n.width+t.clientX-r.mouseMoveEvent.clientX;var i=n.clampWidth(n.width);i!==n.clampWidth(o)&&(n.rootEl.style.width=i+"px")},n.onDrop=function(){document.body.classList.remove("dragging"),n.width=n.clampWidth(n.width)},n.onGroupClick=function(e){n.props.gotoGroup(e)},n.moveGroup=function(e,t){x.default.moveTestgroup(e,t).subscribe()},n.onAllClick=function(){n.onGroupClick()},n.onTreeCreate=function(e,t,o){x.default.createTestgroup(r.a({_testhubId:n.props.testhub._id,_parentId:t},e)).subscribe(function(){V.gta.event({action:"added content",control:"List Button",type:"testcase group",series:o})})},n.onTreeEdit=function(e,t){x.default.updateTestgroup(e,t).subscribe(function(){V.gta.event({control:"More Menu",type:"testcase group",action:"edited content"})})},n.onTreeDelete=function(e,t){var n=t.isDeleteCase;x.default.deleteTestgroup(e,{isDeleteCase:n}).subscribe(function(){V.gta.event({control:"More Menu",type:"testcase group",action:"deleted content",category:n?"delete all":"reserved testcase"})})},n.onGroupCopy=function(e,t){x.default.copyTestgroup(e,t).subscribe({next:function(){p.Toast.success({message:c.get("testgroup.copy.success")}),V.gta.event({action:"added content",page:"Testcases Page",control:"More Menu",type:"testcase group"})},error:function(e){R.SDKInterceptor.ignore(e),p.Toast.error({message:c.get("testgroup.copy.exceed.limit")})}})},n.onBottomCreate=function(e){n.creatorPopup.close(),x.default.createTestgroup(r.a({_testhubId:n.props.testhub._id},e)).subscribe(function(){V.gta.event({action:"added content",control:"Bottom Button",type:"testcase group",series:0})})},n.cacheId=V.user.id,n.width=F(n.cacheId)||300,n.state={mounted:!1},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.setState({mounted:!0})},t.prototype.componentWillUnmount=function(){F(this.cacheId,this.width)},t.prototype.clampWidth=function(e){return e>360?360:e<300?300:e},t.prototype.renderTesthubBreadcrumb=function(){return o.createElement("div",{className:A["testhub-info-breadcrumb"]},o.createElement(p.TextButton,{onClick:this.goHome,className:A["testhub-info-breadcrumb-home"]},c.get("testhub.sidebar.breadcrumb.home")),o.createElement(p.Icon,{name:"chevron-right",size:14,className:A["testhub-info-breadcrumb-delimeter"]}),o.createElement("span",{className:A["testhub-info-breadcrumb-crumb"]},this.props.testhub.name))},t.prototype.renderTesthubInfo=function(){return o.createElement("div",{className:A["testhub-info"]},o.createElement("div",{className:A["testhub-info-header"]},this.renderTesthubBreadcrumb(),o.createElement(p.IconButton,{name:"more",color:"gray",onClick:this.onSettingsOpen,className:A["testhub-info-settings"]})),o.createElement("p",{className:A["testhub-info-description"]},this.props.testhub.description))},t.prototype.renderGroups=function(){return o.createElement(D.a,{env:"testhub",parentId:this.props.testhub._id,boundToObjectId:this.props.testhub._organizationId,onCreate:this.onTreeCreate,onEdit:this.onTreeEdit,onDelete:this.onTreeDelete,onCopy:this.onGroupCopy,className:A.tree,withHandlers:!0,enableDrag:!0,testgroups:this.props.testgroups,onGroupClick:this.onGroupClick,onAllClick:this.onAllClick,moveGroup:this.moveGroup,activeTestgroupId:this.props.currentTestgroupId})},t.prototype.handleCreateGta=function(){V.gta.event({action:"add content",control:"Bottom Button",type:"testcase group",series:0})},t.prototype.renderCreator=function(){return o.createElement(p.TitledDropdown,{ref:this.refCreator,title:c.get("testgroup.creator.title"),nested:!1,onOpen:this.handleCreateGta,content:o.createElement(z.a,{onSubmit:this.onBottomCreate,submitText:c.get("testgroup.creator.save")})},o.createElement(p.TextButton,{color:"blue",className:A.creator},o.createElement(p.Icon,{name:"circle-plus"}),o.createElement("span",null,c.get("testgroup.creator.handler"))))},t.prototype.renderDraggable=function(){return this.state.mounted&&o.createElement(L.a,{targetEl:this.sidelineEl,onDragStart:this.onDragStart,onDrop:this.onDrop,onDragging:this.onDragging})},t.prototype.renderSideLine=function(){return o.createElement("div",{ref:this.refSideline,className:A.sideline})},t.prototype.render=function(){return o.createElement("div",{className:A.sidebar,ref:this.refRootEl,style:{width:this.width}},this.renderTesthubInfo(),this.renderGroups(),this.renderCreator(),this.renderDraggable(),this.renderSideLine())},t}(o.PureComponent),U=n("E+oPn2IN"),$=n.n(U),H=n("0cpN1+LA"),G=n.n(H),q=n("fvjXLGkK"),W=n("gh8QIhMV"),J=n("n/9r1egZ"),X=n("+jTfkVXR"),Y=n("2fNf6n4X"),K=n.n(Y),Q=n("BhpaI0l/"),Z=n("qup9nDqU"),ee={control:"Table Header",type:"base testcae",method:"batch operation"},te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dropdownRef=null,t.setDropdownRef=function(e){t.dropdownRef=e},t.handleUpdatePriority=function(e){u.gta.event(r.a({},ee,{action:"selected priority"})),t.props.onUpdateUsercases({type:"priority",query:{priority:e}})},t.handleUpdateExecutor=function(e){var n=e.executorId;u.gta.event(r.a({},ee,{action:"changed assignee"})),t.props.onUpdateUsercases({type:"executor",query:{_executorId:n}})},t.handleMoveUsercases=function(e){var n=e.testgroup;u.gta.event(r.a({},ee,{action:"moved content"})),t.props.onUpdateUsercases({type:"move",query:{_commongroupId:n?n._id:null}})},t.handleCopyUsercases=function(e){var n=e.testgroup;u.gta.event(r.a({},ee,{action:"added content"})),t.props.onCopyUsercases({_commongroupId:n?n._id:null})},t.handleDeleteUsercases=function(){u.gta.event(r.a({},ee,{action:"deleted content"})),t.props.onDeleteUsercases(),t.dropdownRef&&t.dropdownRef.close()},t}return r.d(t,e),t.prototype.handleExecutorGta=function(){u.gta.event(r.a({},ee,{action:"change assignee"}))},t.prototype.handlePriorityGta=function(){u.gta.event(r.a({},ee,{action:"select priority"}))},t.prototype.handleMoveGta=function(){u.gta.event(r.a({},ee,{action:"move content"}))},t.prototype.handleForkGta=function(){u.gta.event(r.a({},ee,{action:"add content"}))},t.prototype.handleDeleteGta=function(){u.gta.event(r.a({},ee,{action:"delete content"}))},t.prototype.renderDeleteContent=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,l.a.get("testhub.delete.usercases.notice1",this.props.usercasesCount),i.a.createElement("br",null),l.a.get("testhub.delete.usercases.notice2")),i.a.createElement(p.Button,{danger:!0,onClick:this.handleDeleteUsercases},l.a.get("confirm")))},t.prototype.renderDelete=function(){return i.a.createElement(p.TitledDropdown,{title:l.a.get("testhub.delete.usercases"),ref:this.setDropdownRef,content:this.renderDeleteContent(),className:K.a.dropdown,titleCls:K.a["dropdown-title"],onOpen:this.handleDeleteGta},i.a.createElement("div",{className:K.a["toolbar-button-wrapper"]},i.a.createElement(p.TextButton,null,i.a.createElement(p.Icon,{name:"trash"}),l.a.get("testhub.delete.cases"))))},t.prototype.renderCopy=function(){var e=i.a.createElement("div",{className:K.a["toolbar-button-wrapper"]},i.a.createElement(p.TextButton,null,i.a.createElement(p.Icon,{name:"copy"}),l.a.get("usercase.menu.fork"))),t=r.a({},Object(f.pick)(this.props,"organizationId","testhub"),{testgroup:this.props.testgroup,renderTrigger:function(){return e},hint:l.a.get("usercase.menu.copy.hint"),onSubmit:this.handleCopyUsercases,onOpen:this.handleForkGta});return i.a.createElement(Z.a,r.a({},t))},t.prototype.renderMove=function(){var e=i.a.createElement("div",{className:K.a["toolbar-button-wrapper"]},i.a.createElement(p.TextButton,null,i.a.createElement(p.Icon,{name:"move-task"}),l.a.get("usercase.menu.move"))),t=r.a({},Object(f.pick)(this.props,"organizationId","testhub"),{testgroup:this.props.testgroup,renderTrigger:function(){return e},hint:l.a.get("usercase.menu.move.hint"),onSubmit:this.handleMoveUsercases,onOpen:this.handleMoveGta});return i.a.createElement(Z.a,r.a({},t))},t.prototype.renderPriority=function(){return i.a.createElement("div",{className:K.a["toolbar-button-wrapper"]},i.a.createElement(Q.e,{onChange:this.handleUpdatePriority,onOpen:this.handlePriorityGta},i.a.createElement(p.TextButton,null,i.a.createElement(p.Icon,{name:"circle"}),l.a.get("testcase.edit.priority"))))},t.prototype.renderExecutor=function(){var e=r.a({},Object(f.pick)(this.props,["organizationId"]),{executorId:null,executorSelectedTitle:l.a.get("usercase.executor.title"),notFoundExecutorTips:l.a.get("member.menu.not.found.in.organization"),unsetTooltip:l.a.get("usercase.executor.click.to.set"),onChange:this.handleUpdateExecutor,onOpen:this.handleExecutorGta});return i.a.createElement("div",{className:K.a["toolbar-button-wrapper"]},i.a.createElement(Q.c,r.a({},e),i.a.createElement(p.TextButton,null,i.a.createElement(p.Icon,{name:"circle-user-o"}),l.a.get("usercase.set.executor"))))},t.prototype.render=function(){return i.a.createElement("div",{className:K.a.toolbar},this.renderExecutor(),this.renderPriority(),this.renderMove(),this.renderCopy(),this.renderDelete())},t}(i.a.PureComponent),ne=n("mj8jMcjo"),re=n.n(ne),oe=function(){return i.a.createElement("div",{className:re.a["table-placeholder"]},i.a.createElement("span",{className:re.a.image}),i.a.createElement("p",null,l.a.get("testhub.no.usercase")))},ie=n("geguUBpm"),se=n("90U+kJWN"),ae=n("SkIG4JfB"),ce=n("TmIu3fT6"),le=n.n(ce),ue=n("sa1Ed382"),pe=n("HYobN8SQ"),de=["title","_executorId","precondition","priority","caseType","steps"],he=[{fieldType:"precondition",required:!1},{fieldType:"steps",required:!1},{fieldType:"caseType",required:!1},{fieldType:"priority",required:!1}],me=["caseType","priority"],fe=pe.namespace("usercase-creator"),ge=function(e){function t(t){var n=e.call(this,t)||this;return n.executorCache=new Map,n.getInitialState=function(){return{_executorId:null,title:"",precondition:"",steps:[],priority:-1,caseType:null}},n.getUsercaseExecutor=function(e){return Object(se.getExecutor)(n.state._executorId,null,null,e)},n.handleSubmit=function(){var e=f.pick(n.state,de),t=e.steps,o=r.g(e,["steps"]),i=t.map(function(e){return 0===e._id.indexOf("create")?{desc:e.desc,expected:e.expected}:e});return x.default.createUsercase(r.a({},o,{steps:i,_testhubId:n.state.testhub._id,_commongroupId:n.state.testgroup?n.state.testgroup._id:void 0})).toPromise()},n.onSubmit=function(){n.handleSubmit().then(function(e){ue.gta.event({action:"added content",type:"base testcase",control:"Single"}),fe(n.cacheId,null),n.setState(n.getInitialState()),n.props.onSubmit(e)})},n.onSubmitAndContinue=function(){n.handleSubmit().then(function(){ue.gta.event({action:"added content",type:"base testcase",control:"Continuous"}),fe(n.cacheId,null),n.setState(r.a({},n.getInitialState(),{testgroup:n.state.testgroup,testhub:n.state.testhub}))})},n.onChange=function(e){n.setState(e)},n.onChangeLocation=function(e){var t=e.testhub,r=e.testgroup;n.setState({testhub:t,testgroup:r||null})},n.contextId={_organizationId:n.props.organizationId},n.cacheId=ue.user.id+"_"+n.props.testhub._id,n.state=r.a({},n.getInitialState(),fe(n.cacheId)||{},{testgroup:n.props.testgroup,testhub:n.props.testhub}),n}return r.d(t,e),t.prototype.componentWillUnmount=function(){fe(this.cacheId,this.state)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this.props.testgroup,n=e.testgroup;t&&n?t._id!==n._id&&this.setState({testgroup:n}):(t||n)&&this.setState({testgroup:n})},t.prototype.renderSubmitButtons=function(){var e=!this.state.title.trim();return o.createElement("div",null,o.createElement(p.Button,{type:"secondary",disabled:e,onClick:this.onSubmitAndContinue},l.a.get("object.creator.submit.and.continue")),o.createElement(p.Button,{onClick:this.onSubmit,disabled:e},l.a.get("object.creator.submit")))},t.prototype.renderScenarioFields=function(){return this.props.opened&&o.createElement(ae.a,{withStatus:!1,contextId:this.contextId,_executorId:this.state._executorId,getExecutor:this.getUsercaseExecutor,title:this.state.title,onChange:this.onChange,inCreation:!0,inviteShowed:!1,executorSelectedTitle:l.a.get("usercase.executor.title"),notFoundExecutorTips:l.a.get("member.menu.not.found.in.organization"),unsetTooltip:l.a.get("usercase.executor.click.to.set"),className:le.a["testcase-fields"],isUsercase:!0,_organizationId:this.props.organizationId,precondition:this.state.precondition,steps:this.state.steps,priority:this.state.priority,caseType:this.state.caseType,hiddenScenarioFields:me,fields:he})},t.prototype.renderFooter=function(){return o.createElement("div",{className:le.a.footer},this.renderSubmitButtons())},t.prototype.renderLocator=function(){return o.createElement("div",{className:le.a.locator},o.createElement(Z.a,{testhub:this.state.testhub,testgroup:this.state.testgroup||void 0,organizationId:this.props.organizationId,onSubmit:this.onChangeLocation}))},t.prototype.render=function(){var e=v()(le.a.body,"thin-scroll");return o.createElement(p.Modal,{width:600,zIndex:100,className:le.a.creator,titleCls:le.a.title,opened:this.props.opened,onVisibleChange:this.props.onVisibleChange,title:l.a.get("usercase.creator.title")},o.createElement("div",{className:le.a.content},o.createElement("div",{className:e},this.renderLocator(),this.renderScenarioFields()),this.renderFooter()))},t}(o.PureComponent),ve=n("HMGcR10L"),be=n("4c1CS0b3"),ye=function(e){function t(t){var n=e.call(this,t)||this;return n.onQueued=function(e){n.setState(r.a({},n.getInitialState(),{file:e,status:ve.a.PreUpload}))},n.onStart=function(){n.setState({status:ve.a.Uploading})},n.onComplete=function(e){n.setState({file:e,status:ve.a.Uploaded}),n.tryImport()},n.onOpen=function(){n.setState(n.getInitialState())},n.submitImport=function(){n.importSub&&n.importSub.unsubscribe(),n.importSub=n.importRequest(!0).subscribe(function(e){"success"===e.status&&n.props.onImportComplete(e.totalRows)})},n.tryImport=function(){n.importSub&&n.importSub.unsubscribe(),n.importSub=n.importRequest(!1).do(function(e){"success"===e.status?(n.setState({status:ve.a.ParsedSuccess,totalRows:e.totalRows}),n.token=e.token):e.errors&&(n.setState({status:ve.a.ParsedError,errData:e.errors,totalRows:e.totalRows}),n.token=e.token)}).catch(function(e){return R.SDKInterceptor.ignore(e),e.error.json().then(function(e){400==e.code&&(n.setState({status:ve.a.ParsedError}),"ExceedLimit: 500"===e.error&&p.Toast.error(c.get("testcase.import.exceed.limit")))}),be.Observable.empty()}).subscribe()},n.importRequest=function(e){var t=n.state.file,r=t.downloadUrl,o=t.fileType,i=n.props,s=i.testhub,a=i.organizationId,c={fileType:o,downloadUrl:r,_testhubId:s._id,_organizationId:a,isImport:e};return e&&(c=Object.assign({},c,{token:n.token})),x.default.fetch.post("tis/upload/testcase",c)},n.state=n.getInitialState(),n}return r.d(t,e),t.prototype.getInitialState=function(){return{file:null,status:ve.a.PreUpload,errData:[],totalRows:0}},t.prototype.componentWillUnmount=function(){this.importSub&&this.importSub.unsubscribe()},t.prototype.render=function(){return i.a.createElement(ve.b,r.a({},this.props,this.state,{targetName:this.props.testhub.name,targetId:this.props.testhub._id,isUsercase:!0,onQueued:this.onQueued,onStart:this.onStart,onComplete:this.onComplete,onOpen:this.onOpen,tryImport:this.tryImport,submitImport:this.submitImport}))},t}(i.a.PureComponent),ke=function(e){function t(t){var n=e.call(this,t)||this;return n.onTestcaseCreatorVisibleChange=function(e,t){n.testgroup=t||null,n.setState({usercaseCreatorOpened:e})},n.handleTestcaseCreate=function(e){return function(t){t.stopPropagation(),u.gta.event({action:"add content",type:"base testcase",control:e?"Table Button":"Table Header button"}),n.onTestcaseCreatorVisibleChange(!0,e)}},n.handleSortTestcase=function(e,t){return function(n){u.gta.event({action:"change order",control:"Table",type:"execute testcase"}),n.stopPropagation(),x.default.sortUsercase(e._id,e._commongroupId,t).subscribe()}},n.onTestcaseImportModalVisibleChange=function(e){n.setState({testcaseImportModalOpened:e})},n.handleTestcaseImport=function(){n.onTestcaseImportModalVisibleChange(!0)},n.onCreateSubmit=function(e){n.setState({usercaseCreatorOpened:!1});p.Toast.success({message:i.a.createElement("p",null,i.a.createElement("span",null,l.a.get("toast.usercase.create.success")),i.a.createElement("a",{className:"link-add-handler",onClick:function(){return n.props.openUsercaseDetail(e,!0)}},e.title))})},n.onImportComplete=function(e){n.setState({testcaseImportModalOpened:!1}),p.Toast.success(l.a.get("testcase.import.success",e))},n.handleRowClick=function(e){Object(X.d)(e)?n.props.openUsercaseDetail(e,!1):n.props.actions.onToggleRow(e)},n.handleGroupCollapse=function(e){u.gta.event({action:"fold list content",segment:"table",series:e.entity.ancestorIds.length}),n.props.actions.onGroupCollapse(e)},n.handleGroupExpand=function(e){u.gta.event({action:"unfold list content",segment:"table",series:e.entity.ancestorIds.length}),n.props.actions.onGroupExpand(e),n.props.fetchUsercases(e.entity._id)},n.handleRowCollapse=function(e){u.gta.event({action:"fold list content",segment:"table"}),n.props.actions.onRowCollapse(e)},n.handleRowExpand=function(e){u.gta.event({action:"unfold list content",segment:"table"}),n.props.actions.onRowExpand(e),n.props.fetchUsercases(e[0].entity._id)},n.handleSelectTestplan=function(e){var t=e.projectId,r=e.testplanId,o=n.props.selectedTestcaseRows.length;n.props.actions.onResetTable(),x.default.fetch.planTestplan(r,[{_testhubId:n.props.testhub._id,testcaseIds:n.props.selectedTestcaseRows.map(function(e){return e.entity._id})}]).toPromise().then(function(e){u.gta.event({action:"Planned into testplan"}),p.Toast.success({message:i.a.createElement("p",null,i.a.createElement("span",null,l.a.get("toast.usercase.plan.success",o)),i.a.createElement("a",{className:"link-add-handler",onClick:function(){u.router.navigate("project/"+t+"/testplan/"+r,{trigger:!0})}},e.name))})}).catch(function(e){return Object(W.throwError)(e)})},n.renderControllerAddAction=function(){return i.a.createElement(p.IconButton,{name:"circle-plus",onClick:n.handleTestcaseCreate()})},n.renderGroupTitleAction=function(e){return i.a.createElement(p.IconButton,{name:"circle-plus-o",onClick:n.handleTestcaseCreate(e.entity)})},n.renderRowAddAction=function(e){return i.a.createElement(p.IconButton,{name:"circle-plus-o",onClick:n.handleTestcaseCreate(e.entity)})},n.renderRowSortAction=function(e){if(n.props.sortBy)return null;var t=e.indexes.length,r=e.indexes[t-1]+1,o=1===r,s=r===e.total,a=!o&&i.a.createElement(p.IconButton,{color:"gray",name:"chevron-up",onClick:n.handleSortTestcase(e.entity,e.prevId)}),c=!s&&i.a.createElement(p.IconButton,{color:"gray",name:"chevron-down",className:G.a["move-down"],onClick:n.handleSortTestcase(e.entity,e.nextId)});return i.a.createElement(i.a.Fragment,null,a,c)},n.renderToolbarAction=function(){var e=n.props.testgroups.find(function(e){return e._id===n.props.currentTestgroupId}),t={organizationId:n.props.organizationId,testhub:n.props.testhub,testhubs:n.props.testhubs,testgroup:e,usercasesCount:n.props.selectedTestcaseRows?n.props.selectedTestcaseRows.length:0,onCopyUsercases:n.props.actions.copyUsercases,onUpdateUsercases:n.props.actions.updateUsercases,onDeleteUsercases:n.props.actions.deleteUsercases};return i.a.createElement(te,r.a({},t))},n.renderPlaceholder=function(){return i.a.createElement(oe,{onClick:n.handleTestcaseCreate})},n.state={usercaseCreatorOpened:!1,testgroup:null,testcaseImportModalOpened:!1},n}return r.d(t,e),t.prototype.handlePlanGta=function(){u.gta.event({action:"Plan into testplan"})},t.prototype.getCurrentTestgroup=function(){var e=this.props,t=e.testgroups,n=e.currentTestgroupId;return this.testgroup||t.find(function(e){return e._id===n})},t.prototype.renderUsercaseCreator=function(){var e=this.props,t=e.testhub,n=e.organizationId,r=this.getCurrentTestgroup();return i.a.createElement(ge,{organizationId:n,opened:this.state.usercaseCreatorOpened,testhub:t,testgroup:r,onVisibleChange:this.onTestcaseCreatorVisibleChange,onSubmit:this.onCreateSubmit})},t.prototype.renderTestcaseImportModal=function(){return i.a.createElement(ye,{testhub:this.props.testhub,organizationId:this.props.organizationId,opened:this.state.testcaseImportModalOpened,onVisibleChange:this.onTestcaseImportModalVisibleChange,onImportComplete:this.onImportComplete})},t.prototype.renderTableBoard=function(){var e={fromWhere:"testhub",commonGroupTree:this.props.currentCommonGroupTree,testhub:this.props.testhub,testplan:null,cellDescriptors:this.props.cellDescriptors,groups:this.props.groups,rows:this.props.rows,selectedTestcaseRows:this.props.selectedTestcaseRows,isLoading:!this.props.testgroups||this.props.isLoadingUsercases,sortBy:this.props.sortBy,toRowIsExpanded:this.props.toRowIsExpanded,toRowIsLoadingChildren:this.props.toRowIsLoadingSubRows,renderPlaceholder:this.renderPlaceholder,renderToolbarAction:this.renderToolbarAction,renderControllerAddAction:this.renderControllerAddAction,renderGroupTitleAction:this.renderGroupTitleAction,renderRowAddAction:this.renderRowAddAction,renderRowSortAction:this.renderRowSortAction,onColumnResort:this.props.actions.onColumnResort,onResetTable:this.props.actions.onResetTable,onConfigure:this.props.actions.onConfigure,onRowClick:this.handleRowClick,onGroupCollapse:this.handleGroupCollapse,onGroupExpand:this.handleGroupExpand,onRowCollapse:this.handleRowCollapse,onRowExpand:this.handleRowExpand,onDeselectTestcases:this.props.actions.onDeselectTestcases,onSelectTestcases:this.props.actions.onSelectTestcases,onSort:this.props.actions.onSort};return i.a.createElement(J.a,r.a({},e))},t.prototype.renderOperators=function(){var e=this.props.selectedTestcaseRows,t=i.a.createElement(ie.a,{organizationId:this.props.organizationId,onSelect:this.handleSelectTestplan,disabled:!e||$()(e),onOpen:this.handlePlanGta});return i.a.createElement("section",null,i.a.createElement(p.TextButton,{onClick:this.handleTestcaseCreate()},i.a.createElement(p.Icon,{name:"usercase-create"}),l.a.get("testplan.create.testcase")),i.a.createElement(p.TextButton,{onClick:this.handleTestcaseImport},i.a.createElement(p.Icon,{name:"import-project"}),l.a.get("testplan.import.testcases")),t)},t.prototype.renderName=function(){var e=this.props,t=e.currentTestgroupId,n=e.testgroups.find(function(e){return e._id===t}),r=n?n.name+" · "+n.resourceCount:""+l.a.get("testgroup.tree.all");return i.a.createElement("p",null,r)},t.prototype.renderAbstract=function(){return i.a.createElement("div",{className:G.a["table-head"]},this.renderName(),this.renderOperators())},t.prototype.render=function(){return this.props.testgroups?i.a.createElement("div",{className:G.a["table-wrapper"]},this.renderAbstract(),this.renderTableBoard(),this.renderUsercaseCreator(),this.renderTestcaseImportModal()):null},t}(i.a.PureComponent),_e=Object(a.connect)(function(e){var t=e.ui,n=t.testhubTable,r=t.testhubApp,o=t.testhubPage;return{testhubs:r.testhubs,testhub:o.testhub,testgroups:o.testgroups,usercases:o.usercases,isLoadingUsercases:o.isLoadingUsercases,currentCommonGroupTree:O.d.selectCurrentTree(e),cellDescriptors:n.cellDescriptors,groups:O.d.selectGroups(e),rows:O.d.selectRows(e),selectedTestcaseRows:n.selectedTestcaseRows,sortBy:n.sortBy,toRowIsExpanded:n.toRowIsExpanded,toRowIsLoadingSubRows:n.toRowIsLoadingSubRows}},function(e){return{actions:Object(q.bindActionCreators)(O.a,e)}})(ke),we=n("yiTDTdSW"),Ce=function(e){function t(t){var n=e.call(this,t)||this;return n.onSubmit=function(){n.props.onSubmit({name:n.state.name.trim(),description:n.state.description.trim()})},n.onNameChange=function(e){var t=e.target.value;n.setState({name:t})},n.onDescriptionChange=function(e){var t=e.target.value;n.setState({description:t})},n.state={name:n.props.name,description:n.props.description},n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.name===e.name&&this.props.description===e.description||this.setState({name:e.name,description:e.description})},t.prototype.checkDisabled=function(){var e=this.state,t=e.name,n=e.description,r=t.trim(),o=n.trim();return 0===r.length||r.length>20||o.length>500||r===this.props.name.trim()&&o===this.props.description.trim()},t.prototype.renderNameInput=function(){var e=v()(we["info-name"],"form-control");return o.createElement("input",{value:this.state.name,onChange:this.onNameChange,className:e,disabled:!this.props.canEdit,placeholder:c.get("testhub.app.creator.name.placeholder")})},t.prototype.renderDescriptionInput=function(){var e=v()(we["info-description"],"form-control");return o.createElement("textarea",{value:this.state.description,onChange:this.onDescriptionChange,className:e,disabled:!this.props.canEdit,placeholder:c.get("testhub.app.creator.description.placeholder")})},t.prototype.renderSubmit=function(){return this.props.canEdit&&o.createElement(o.Fragment,null,o.createElement(p.Separator,null),o.createElement(p.Button,{disabled:this.checkDisabled(),onClick:this.onSubmit,className:we["info-submit"]},c.get("testhub.settings.info.save")))},t.prototype.render=function(){return o.createElement("div",{className:we.info},o.createElement("div",{className:we["info-title"]},c.get("testhub.settings.info.title")),this.renderNameInput(),this.renderDescriptionInput(),this.renderSubmit())},t}(o.PureComponent),Se=function(e){function t(t){var n=e.call(this,t)||this;return n.onVisibleChange=function(e){u.gta.event({action:"delete content",control:"Testcase Library Settings",type:"testcase library"}),n.setState({confirmOpened:e})},n.onOpenConfirm=function(){n.onVisibleChange(!0)},n.onDelete=function(){u.gta.event({action:"deleted content",control:"Testcase Library Settings",type:"testcase library"}),n.props.onDelete()},n.state={confirmOpened:!1},n}return r.d(t,e),t.prototype.renderConfirm=function(){return o.createElement(p.Modal,{width:500,zIndex:230,center:!0,opened:this.state.confirmOpened,onVisibleChange:this.onVisibleChange,title:c.get("testhub.settings.more.delete.confirm.title"),titleCls:we["confirm-title"]},o.createElement("div",{className:we["confirm-body"]},o.createElement("p",{className:we["confirm-message"]},c.get("testhub.settings.more.delete.confirm.message",this.props.testhub.name)),o.createElement(p.Button,{danger:!0,onClick:this.onDelete,className:we["confirm-submit"]},c.get("testhub.settings.more.delete.submit"))))},t.prototype.render=function(){return o.createElement("div",{className:we.more},o.createElement("div",{className:we["more-title"]},c.get("testhub.settings.more.delete.title")),o.createElement("p",{className:we["more-description"]},c.get("testhub.settings.more.delete.description")),o.createElement(p.Button,{danger:!0,onClick:this.onOpenConfirm,className:we["more-submit"]},c.get("testhub.settings.more.delete.submit")),this.renderConfirm())},t}(o.PureComponent),Ee=function(e){function t(t){var n=e.call(this,t)||this;return n.onInfoChange=function(e){x.default.updateTesthub(n.props.testhub._id,e).subscribe(function(){u.gta.event({action:"edited content",control:"Testcase Library Settings",type:"testcase library"}),p.Toast.success({message:c.get("testhub.settings.info.success")})})},n.onDelete=function(){x.default.deleteTesthub(n.props.testhub._id).subscribe(function(){p.Toast.success({message:c.get("testhub.settings.delete.success")}),n.props.onVisibleChange(!1)})},n.setTab=function(e){"more"===e&&u.gta.event({action:"enter more setting",control:"Testcase Library Settings",type:"testcase library"}),n.setState({tab:e})},n.state={tab:"info"},n}return r.d(t,e),t.prototype.renderTabs=function(){var e=this;return[{name:"info",icon:"usercase-library",text:c.get("testhub.settings.tab.info")},{name:"more",icon:"more",text:c.get("testhub.settings.tab.more")}].map(function(t){var n;if("more"===t.name&&!e.props.canDelete)return null;var r=v()(we.tab,((n={})[we["tab-active"]]=e.state.tab===t.name,n));return o.createElement("div",{key:t.name,onClick:function(){return e.setTab(t.name)},className:r},o.createElement(p.Icon,{name:t.icon,className:we["tab-icon"]}),o.createElement("span",{className:we["tab-text"]},t.text))})},t.prototype.renderInfo=function(){var e=this.props.testhub,t=e.name,n=e.description;return o.createElement(Ce,{name:t,canEdit:this.props.canEdit,description:n,onSubmit:this.onInfoChange})},t.prototype.renderMore=function(){return o.createElement(Se,{testhub:this.props.testhub,onDelete:this.onDelete})},t.prototype.renderContent=function(){switch(this.state.tab){case"info":return this.renderInfo();case"more":return this.renderMore();default:return null}},t.prototype.render=function(){return o.createElement(p.Modal,{width:800,zIndex:200,opened:this.props.opened,onVisibleChange:this.props.onVisibleChange,title:c.get("testhub.settings.title"),titleCls:we.title},o.createElement("div",{className:we.settings},o.createElement("div",{className:we.tabs},this.renderTabs()),o.createElement("div",{className:we.content},this.renderContent())))},t.defaultProps={canEdit:!0,canDelete:!0},t}(o.PureComponent),Te=n("TxuhFsX+"),Ie={exitTesthubPage:N.b,fetchTestgroups:N.d,fetchGroups:N.c,fetchUsercasesByHub:N.f,fetchUsercasesByGroup:N.e,fetchUsercasesIncludeNodesByGroup:N.g,onTesthubSettingsVisibleChange:N.j,onResetTable:O.a.onResetTable,onRouteTo:k.a.push},Me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectGroup=function(){var e=t.props,n=e.currentTestgroupId,r=e.testgroups;if(t.props.onResetTable(),n)t.props.fetchUsercasesIncludeNodesByGroup(n);else{var o=r.find(function(e){return!e.ancestorIds.length});o&&t.props.fetchUsercasesIncludeNodesByGroup(o._id)}},t.goHome=function(){t.props.onRouteTo(k.a.base(t.props.match))},t.gotoGroup=function(e){t.props.onRouteTo(k.a.group(t.props.match,t.props.testhubId,e))},t.handleRemoveTestcasePreviewer=function(){u.PREFERENCE.getIsUsePanelToOpenTask()&&u.APP.panelView._usercaseId!==t.props.currentUsercaseId||t.gotoGroup(t.props.currentTestgroupId)},t.onOpenTesthubSettings=function(){u.gta.event({action:"toggle more menu",control:"Testcase Sidebar",type:"testcase library"}),t.props.onTesthubSettingsVisibleChange(!0)},t.gotoTestcase=function(e,n){var r=e._id,o=e._testhubId,i=e._commongroupId,s=n?i:t.props.currentTestgroupId;t.props.onRouteTo(k.a.usercase(t.props.match,o,s,r))},t.closeUsercaseDetail=function(){u.PREFERENCE.getIsUsePanelToOpenTask()||t.previewerView&&(t.previewerView.cancel(),t.previewerView=null)},t.openUsercaseDetail=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){return this.closeUsercaseDetail(),this.previewerView=u.APP.openUsercasePreviewer(e,this.getPreviewerOptions()),[2]})})},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.setTesthub()},t.prototype.componentDidUpdate=function(e){var t=this,n=this.props,r=n.currentTestgroupId,o=n.currentUsercaseId,i=n.isLoading,s=n.testhubId,a=n.testgroups;if(s!==e.testhubId)return this.props.exitTesthubPage(),this.setTesthub();if(a&&r&&!a.find(function(e){return e._id===r}))return void this.gotoGroup();i||(e.isLoading||r!==e.currentTestgroupId)&&this.selectGroup(),o!==e.currentUsercaseId&&(o?f.defer(function(){return t.openUsercaseDetail(o)}):this.closeUsercaseDetail())},t.prototype.componentWillUnmount=function(){this.props.exitTesthubPage(),this.socketSubscription$&&this.socketSubscription$.unsubscribe(),this.deleteGroupSubscription$&&this.deleteGroupSubscription$.unsubscribe()},t.prototype.fetchUnplannedGroupCases=function(){var e=this.props.unplannedGroup;e&&this.props.fetchUsercasesByGroup(e._id)},t.prototype.setTesthub=function(){var e=this,t=this.props,n=t.currentUsercaseId,r=t.testhubId;this.props.fetchTestgroups(r),this.props.fetchUsercasesByHub(r),n&&this.openUsercaseDetail(n),this.socketSubscription$&&this.socketSubscription$.unsubscribe(),this.deleteGroupSubscription$&&this.deleteGroupSubscription$.unsubscribe(),this.socketSubscription$=x.default.socketProxy.publish(":refresh:testhub/"+r).subscribe(function(){return e.props.fetchGroups(r)}),this.deleteGroupSubscription$=x.default.socketProxy.publish(":remove:commongroup").subscribe(function(){return e.fetchUnplannedGroupCases()})},t.prototype.hasPermission=function(){return this.props.testhub&&this.props.testhub._creatorId===u.user.id||this.props.organizationModel.getRoleScope()>0},t.prototype.getPreviewerOptions=function(){var e,t=u.PREFERENCE.getIsUsePanelToOpenTask();return(e={isUsePanel:t,hasLink:!1})[t?"beforeHide":"onRemove"]=this.handleRemoveTestcasePreviewer,e},t.prototype.renderSidebar=function(){return i.a.createElement(B,{testhub:this.props.testhub,testgroups:this.props.testgroups,onSettingsOpen:this.onOpenTesthubSettings,goHome:this.goHome,gotoGroup:this.gotoGroup,currentTestgroupId:this.props.currentTestgroupId})},t.prototype.renderTable=function(){return i.a.createElement(_e,{organizationId:this.props.organizationId,currentTestgroupId:this.props.currentTestgroupId,fetchUsercases:this.props.fetchUsercasesByGroup,openUsercaseDetail:this.gotoTestcase})},t.prototype.renderTesthubSettings=function(){return i.a.createElement(Ee,{testhub:this.props.testhub,opened:this.props.testhubSettingsOpened,canEdit:this.hasPermission(),canDelete:this.hasPermission(),onVisibleChange:this.props.onTesthubSettingsVisibleChange})},t.prototype.render=function(){return this.props.isLoading?i.a.createElement(p.Loading,null):i.a.createElement("div",{className:Te.page},this.renderSidebar(),this.renderTable(),this.renderTesthubSettings())},t}(i.a.PureComponent),je=Object(a.connect)(function(e){var t=e.ui.testhubPage,n=t.testhub,o=t.testgroups,i=t.unplannedGroup,s=t.testhubSettingsOpened;return r.a({},Object(N.h)(e),{testhubSettingsOpened:s,testhub:n,testgroups:o,unplannedGroup:i,isLoading:!(o&&n)})},Ie)(Me),Pe=n("2qRnoGmE"),xe=n.n(Pe);n.d(t,"TesthubApp",function(){return Re});var Ne=n("wu4EEviu"),Oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderApp=function(e){var t=e.match;return o.createElement(P,{match:t})},t.renderGroupPage=function(e){var n=e.match;return o.createElement(je,{match:n,organizationModel:t.props.organizationModel})},t}return r.d(t,e),t.prototype.componentDidMount=function(){Ne.join(xe.a.HOST+"/testhub/api/organizations/"+this.props.organizationModel.id),Ne.join(xe.a.HOST+"/testhub/api/organizations/"+this.props.organizationModel.id+"/testhubs")},t.prototype.render=function(){return o.createElement(s.Switch,null,o.createElement(s.Route,{path:k.a.testhub(),render:this.renderGroupPage}),o.createElement(s.Route,{path:k.a.group(),render:this.renderGroupPage}),o.createElement(s.Route,{path:k.a.usercase(),render:this.renderGroupPage}),o.createElement(s.Route,{path:k.a.base(),render:this.renderApp}))},t}(o.PureComponent),Re=Object(s.withRouter)(Oe)},cSYW21Cq:function(e,t,n){"use strict";n.r(t),n.d(t,"SearchView",function(){return o});var r=n("92Y4NLYL");n.d(t,"searchProjects",function(){return r.f});var o=n("IxHRUQ47")},cVygqyKw:function(e,t,n){"use strict";n.r(t);var r,o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n("tLZJUYWX"),a=n("TSYQbtd+"),c=n.n(a),l=n("a+N5u/Cl"),u=n.n(l),p=n("2qRnoGmE"),d=n.n(p),h=n("DOZCBSCZ"),m=n("Wd/8sFUG"),f=n("GESwhXbR"),g=["appId","channels","rule","badgeType"];!function(e){e[e.POPUP_WITH_NUMBER=0]="POPUP_WITH_NUMBER",e[e.COUNT_ONLY=1]="COUNT_ONLY",e[e.DOT_ONLY=2]="DOT_ONLY",e[e.MUTE=3]="MUTE"}(r||(r={}));var v=function(e){function t(t){var n=e.call(this,t)||this;return n.onEmailChange=function(e){var t=new Set(n.state.channels);e?t.add("email"):t.delete("email"),n.setState({channels:o.h(t)},function(){m.axon.settings.setPushRules(u.a.pick.apply(u.a,o.h([n.state],g)))})},n.onPushFormChange=function(e){var t=m.BadgeType.None,i=e.target.value,s=new Set(n.state.channels);switch(i){case r.POPUP_WITH_NUMBER:s.add("popup"),t=m.BadgeType.Number;break;case r.COUNT_ONLY:s.delete("popup"),t=m.BadgeType.Number;break;case r.DOT_ONLY:s.delete("popup"),t=m.BadgeType.Dot;break;case r.MUTE:s.delete("popup"),t=m.BadgeType.None}n.setState({channels:o.h(s),badgeType:t},function(){m.axon.settings.setPushRules(u.a.pick.apply(u.a,o.h([n.state],g)))})},n.state=o.a({},t.rule),n}return o.d(t,e),t.prototype.getPushFormValue=function(){var e=this.state.badgeType;if(this.state.channels.includes("popup")){if("number"===e)return r.POPUP_WITH_NUMBER}else{if("number"===e)return r.COUNT_ONLY;if("dot"===e)return r.DOT_ONLY;if("none"===e)return r.MUTE}return null},t.prototype.render=function(){var e=this.props,t=e.type,n=e.name,o=e.desc,a=e.rule;return i.createElement("div",{key:t,className:c()("notification-channel-select")},i.createElement("p",{className:"notification-channel-name"},n),i.createElement("p",{className:"notification-channel-desc"},o),i.createElement("div",{className:"notification-channel-selector"},i.createElement(f.RadioGroup,{value:this.getPushFormValue(),onChange:this.onPushFormChange},i.createElement(f.Radio,{className:"radio-selector",value:r.POPUP_WITH_NUMBER,label:s.get("personal.settings.notification.channel.push.number"),disabled:!(a.channelChoices.includes("popup")&&a.badgeTypeChoices.includes("number"))}),i.createElement(f.Radio,{className:"radio-selector",value:r.COUNT_ONLY,disabled:!a.badgeTypeChoices.includes("number"),label:s.get("personal.settings.notification.channel.count.only")}),i.createElement(f.Radio,{className:"radio-selector",value:r.DOT_ONLY,disabled:!a.badgeTypeChoices.includes("dot"),label:s.get("personal.settings.notification.channel.dot.only")}),i.createElement(f.Radio,{className:"radio-selector",value:r.MUTE,disabled:!a.badgeTypeChoices.includes("none"),label:s.get("personal.settings.notification.channel.mute")})),i.createElement(f.Checkbox,{className:"email-notification",onChange:this.onEmailChange,checked:this.state.channels.includes("email"),disabled:!a.channelChoices.includes("email"),label:s.get("personal.settings.notification.channel.email")})))},t}(i.PureComponent),b=function(e){function t(t){var n=e.call(this,t)||this;return n.state={rules:null},n.loadRules(),n}return o.d(t,e),t.prototype.render=function(){return null===this.state.rules?i.createElement(h.a,null):this.renderChannels()},t.prototype.loadRules=function(){var e=this;m.axon.settings.getPushRules(d.a.NOTIFICATION_APP_ID).then(function(t){return e.setState({rules:t})})},t.prototype.renderChannels=function(){var e=this;return[{type:"basic",name:s.get("personal.settings.notification.notifications.basic.content"),desc:s.get("personal.settings.notification.notifications.basic.desc")},{type:"update",name:s.get("personal.settings.notification.notifications.update.content"),desc:s.get("personal.settings.notification.notifications.update.desc")},{type:"objectlink",name:s.get("personal.settings.notification.notifications.objectlink.content"),desc:s.get("personal.settings.notification.notifications.objectlink.desc")},{type:"dependency",name:s.get("personal.settings.notification.notifications.dependency.content"),desc:s.get("personal.settings.notification.notifications.dependency.desc")},{type:"reminder",name:s.get("personal.settings.notification.notifications.reminder.content"),desc:s.get("personal.settings.notification.notifications.reminder.desc")},{type:"mentionMe",name:s.get("personal.settings.notification.notifications.atme.content"),desc:s.get("personal.settings.notification.notifications.atme.desc")}].map(function(t){var n=t.type,r=t.name,o=t.desc,s=u.a.findWhere(e.state.rules,{rule:n});return s?i.createElement(v,{key:n,type:n,name:r,desc:o,rule:s}):null})},t}(i.PureComponent);n.d(t,"PersonalSettingsNotification",function(){return k});var y=n("x0ETOehG"),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onDailyEmailSettingsSet=function(){var e=!t.props.dailyEmailSettings;t.props.onDailyEmailSettingsChange(e)},t.onDesktopNotificationSet=function(){var e=!t.props.desktopNotificationEnabled;t.props.onDesktopNotificationSet(e)},t}return o.d(t,e),t.prototype.renderNotificationExplanation=function(){return[{icon:n("aSEoMnrP"),name:s.get("personal.settings.notification.explan.push.name"),description:s.get("personal.settings.notification.explan.push.desc")},{icon:n("jN5oBbom"),name:s.get("personal.settings.notification.explan.dot.name"),description:s.get("personal.settings.notification.explan.dot.desc")},{icon:n("JfRUaBiN"),name:s.get("personal.settings.notification.explan.mail.name"),description:s.get("personal.settings.notification.explan.mail.desc")},{icon:n("Zfk35hIE"),name:s.get("personal.settings.notification.explan.counter.name"),description:s.get("personal.settings.notification.explan.counter.desc")},{icon:n("TWnaNrFS"),name:s.get("personal.settings.notification.explan.mute.name"),description:s.get("personal.settings.notification.explan.mute.desc")}].map(function(e){var t=e.icon,n=e.name,r=e.description;return i.createElement("div",{key:n,className:"notification-explanation-wrapper"},i.createElement("img",{src:t}),i.createElement("div",{className:"notification-explanation-detail"},i.createElement("p",{className:"notification-explanation-detail-name"},n),i.createElement("p",{className:"notification-explanation-detail-desc"},r)))})},t.prototype.renderEmailsSettings=function(){var e=c()("check",{checked:this.props.dailyEmailSettings});return i.createElement("section",{className:"emails-setting two-column-setting"},i.createElement("div",{className:"setting-content"},i.createElement("h4",null,s.get("personal.settings.notification.emails.title")),i.createElement("p",null,s.get("personal.settings.notification.emails.description"))),i.createElement("div",{className:"toggle blue setting-handler",onClick:this.onDailyEmailSettingsSet},i.createElement("input",{type:"button",className:e}),i.createElement("div",{className:"switch"}),i.createElement("div",{className:"track"})))},t.prototype.renderNotificationsSettings=function(){return i.createElement("section",{className:"notifications-setting"},i.createElement("h4",null,s.get("personal.settings.notification.notifications.title")),i.createElement("section",{className:"notification-explanation"},this.renderNotificationExplanation()),i.createElement(b,null))},t.prototype.renderDesktopNotificationSettings=function(){var e=c()("check",{checked:this.props.desktopNotificationEnabled});return this.props.desktopNotificationSupported&&i.createElement("section",{className:"destktop-notification-setting"},i.createElement("div",{className:"two-column-setting"},i.createElement("div",{className:"setting-content"},i.createElement("h4",null,s.get("personal.settings.notification.desktop.title")),i.createElement("p",null,s.get("personal.settings.notification.desktop.description"))),i.createElement("div",{className:"toggle blue setting-handler",onClick:this.onDesktopNotificationSet},i.createElement("input",{type:"button",className:e}),i.createElement("div",{className:"switch"}),i.createElement("div",{className:"track"}))),i.createElement("img",{src:y}))},t.prototype.render=function(){return i.createElement("div",null,this.renderDesktopNotificationSettings(),this.renderNotificationsSettings(),this.renderEmailsSettings())},t}(i.PureComponent)},cXOPvvXb:function(e,t,n){"use strict";var r;!function(e){e.horizontal="horizontal",e.vertical="vertical"}(r||(r={}));var o=n("a+N5u/Cl"),i=n.n(o),s=n("q1tIBJhx"),a=n.n(s),c=n("mrSGxOB2"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.d(t,e),t.prototype.render=function(){return a.a.createElement("div",{className:t.className,"data-type":this.props.type},this.props.children)},t.className="division-offset-top-anchor__"+i.a.uniqueId(),t}(s.PureComponent),u=function(e){return"."+e},p={scrollTop:0},d=["scenariofields","subtasks","links"],h={containerEl:null,containerScrollTopRecord:p,divisionVisibilityMap:{title:!0}},m=Object(s.createContext)(h),f=function(){return"scroll-top-container-class-name__"+i.a.uniqueId()},g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.saveEl=function(e){return t.el=e},t}return c.d(t,e),t.prototype.render=function(){return a.a.createElement("div",{ref:this.saveEl,className:this.props.className,"data-division":this.props.type},this.props.children)},t.prototype.componentDidUpdate=function(){if(this.el&&this.props.onDivisionVisibilityChange){var e=this.props.type,t=this.props.containerScrollTopRecord.scrollTop<=this.el.offsetTop+this.el.offsetHeight;t!==this.props.divisionVisibilityMap[e]&&this.props.onDivisionVisibilityChange(e,t)}},t}(a.a.PureComponent),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderContent=function(e){return a.a.createElement(g,c.a({},t.props,{containerScrollTopRecord:e.containerScrollTopRecord,divisionVisibilityMap:e.divisionVisibilityMap,onDivisionVisibilityChange:e.onDivisionVisibilityChange}))},t}return c.d(t,e),t.prototype.render=function(){return a.a.createElement(m.Consumer,{children:this.renderContent})},t}(a.a.PureComponent),b=n("TSYQbtd+"),y=n.n(b),k=n("tLZJUYWX"),_=n.n(k),w=n("GESwhXbR"),C=n("Nxrdcgel"),S=n("ThSbgwXN"),E={get scenariofields(){return _.a.get("detail.division.scenariofields")},get subtasks(){return _.a.get("detail.division.subtasks")},get links(){return _.a.get("detail.division.links")}},T=n("3pHTkdzH"),I=n.n(T),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.props.onDivisionClick(t.props.item)},t}return c.d(t,e),t.prototype.render=function(){var e=this.props,t=e.item,n=e.isActive,r=e.isDisabled,o=y()(I.a.item,{active:n});return a.a.createElement("div",{className:o,onClick:this.handleClick},a.a.createElement("span",null,E[t.type]),r?null:a.a.createElement(j,null))},t}(a.a.PureComponent),j=Object(C.SortableHandle)(function(){return a.a.createElement(w.Icon,{name:"draggable-circle",className:I.a["drag-handle"]})}),P=Object(C.SortableElement)(M),x=I.a.dragged,N=n("QjqlvrSk"),O=n.n(N),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.d(t,e),t.prototype.render=function(){var e=y()(this.props.className,O.a.list);return a.a.createElement("div",{className:e},this.renderContent())},t.prototype.renderContent=function(){var e=this;return this.props.list.map(function(t,n){return a.a.createElement(P,{key:n,item:t,index:n,isActive:t===e.props.activeItem,isDisabled:e.props.disabled,onDivisionClick:e.props.onDivisionClick})})},t}(a.a.PureComponent),D=Object(C.SortableContainer)(R),L=n("sa1Ed382"),z=function(e){var t={action:"open content navigation",type:e};L.gta.event(t)},A=function(e,t){var n={action:"toggle content",type:e,category:V[t]};L.gta.event(n)},V={scenariofields:"field content",subtasks:"subtask content",links:"link content"},F=function(e,t){var n=B[e]||U,r={action:"replace content navigation",type:e,note1:t.map(function(e){return n.indexOf(e)}).join(";"),method:"drag"};L.gta.event(r)},B={task:["scenariofields","subtasks","links"]},U=["scenariofields","links"],$=n("I4dWDknY"),H=n.n($);var G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.setMountInRef=function(e){t.mountIn=e},t.getMountInRef=function(){return t.mountIn},t.onVisibleChange=function(e){e?t.handleDropdownOpen():t.handleDropdownHide()},t.handleDropdownOpen=function(){t.setState({isOpened:!0}),t.setOffsetTopRecordList(),z(t.props.objectType)},t.handleDropdownHide=function(){t.setState({isOpened:!1,isLeavingOrigin:!1})},t.handleDivisionClick=function(e){Object(S.scrollIntoViewSmoothly)(e.el,{behavior:"smooth",block:"start"}),A(t.props.objectType,e.type),t.setState({isLeavingOrigin:!0})},t.handleSortStart=function(){t.setState({isDragging:!0})},t.handleSortEnd=function(e){if(t.state.offsetTopRecordList){var n=Object(C.arrayMove)(t.state.offsetTopRecordList,e.oldIndex,e.newIndex);t.props.onDivisionListChange(n),t.setState({isDragging:!1,offsetTopRecordList:n}),F(t.props.objectType,n.map(function(e){return e.type}))}},t}return c.d(t,e),t.prototype.render=function(){var e=this.state.isLeavingOrigin,t=y()(this.props.className,H.a["object-division-elevator__trigger"],e?"leaving-origin":"origin"),n=function(e,t){var n=t.top,r=t.left;if(e)return{top:n,left:r};var o=n>210?n:0;return{transitionDuration:o+"ms",transitionDelay:"-"+.2*o+"ms"}}(!!e,this.mountIn?this.mountIn.getBoundingClientRect():{top:0,left:0});return a.a.createElement(w.Dropdown,{content:this.renderContent(),mountIn:this.getMountInRef,persistence:!0,placement:"bottomRight",action:"hover",opened:this.state.isOpened,onVisibleChange:this.onVisibleChange},a.a.createElement("div",{className:t,style:n,ref:this.setMountInRef},a.a.createElement(w.Icon,{name:"area"})))},t.prototype.componentDidUpdate=function(e){this.state.isOpened&&this.props.divisions!==e.divisions&&this.setOffsetTopRecordList()},t.prototype.renderContent=function(){if(!this.state.offsetTopRecordList)return null;var e=this.state.isDragging?void 0:this.getActiveItem();return a.a.createElement("div",{className:H.a["object-division-elevator__content"]},a.a.createElement(D,{className:H.a.list,list:this.state.offsetTopRecordList,activeItem:e,disabled:!this.props.hasPermission,lockAxis:"y",useDragHandle:!0,lockToContainerEdges:!0,lockOffset:Object(w.getQuadUnit)(-4),onDivisionClick:this.handleDivisionClick,onSortStart:this.handleSortStart,onSortEnd:this.handleSortEnd,helperClass:x}),a.a.createElement("div",{className:y()(H.a.hint,"flex flex-center flex-vcenter")},_.a.get("task.detail.elevator.hint")))},t.prototype.setOffsetTopRecordList=function(){var e,t,n=this.props.containerClassName?(e=this.props.containerClassName,t=[u(e),u(l.className)].join(" "),document.querySelectorAll(t)):[],r=i.a.map(n,function(e){return{el:e,type:e.dataset.type,offsetTop:e.offsetTop}});this.setState({offsetTopRecordList:r})},t.prototype.getActiveItem=function(){var e=this.props.containerScrollTopRecord.scrollTop,t=this.state.offsetTopRecordList;if(t){var n=i.a.sortBy(t,function(e){return-1*e.offsetTop});return i.a.find(n,function(t){var n=t.offsetTop;return e>=n})||n[n.length-1]}},t}(a.a.PureComponent),q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderContent=function(e){return a.a.createElement(G,c.a({},t.props,e))},t}return c.d(t,e),t.prototype.render=function(){return a.a.createElement(m.Consumer,{children:this.renderContent})},t}(a.a.PureComponent);n.d(t,"a",function(){return r}),n.d(t,"f",function(){return p}),n.d(t,"h",function(){return d}),n.d(t,"g",function(){return h}),n.d(t,"e",function(){return m}),n.d(t,"i",function(){return f}),n.d(t,"c",function(){return v}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return q})},cXcX6yOS:function(e,t,n){e.exports={"task-recurrence":"task-recurrence__2FuF","task-recurrence__inner":"task-recurrence__inner__3VKZ"}},cYCUfKUd:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<li class="testplan-title group-name"><p>'+tb_i18n.get("testplan")+"</p></li>",i=e.testplans;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+='<li class="testplan" data-id="'+(s=i[a+=1])._id+'" data-title="'+r(s.name)+'"> <a class="testplan-title link-search-content">'+r(s.name)+"</a></li>";return o}},cdS6Urxf:function(e,t,n){e.exports={popup__head:"popup__head__1trK","table-configure__head":"table-configure__head__1wbZ",popup__body:"popup__body__P7zH","table-configure__body":"table-configure__body__1Px3","table-configure":"table-configure__50Pj","table-configure__trigger":"table-configure__trigger__JRKh","table-configure__trigger-inner":"table-configure__trigger-inner__1xIO","table-configure__item":"table-configure__item__3Mvp","table-configure__item--disabled":"table-configure__item--disabled__j0un","table-configure__item-text":"table-configure__item-text__3QUQ","table-configure__item-icon":"table-configure__item-icon__3v4c","table-configure__new-item":"table-configure__new-item__3wPN","table-configure__sorting-item":"table-configure__sorting-item__2IHX","sortable-icon":"sortable-icon__2_Wf"}},crizMn49:function(e,t,n){},cvyh5t06:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("a+N5u/Cl"),o=n("vmWJWrVe"),r=n("akZvDr5p"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="TeamTreeNode",t.prototype.className="team-tree-node-view",t.prototype.initialize=function(e){return this.options=e,this.render()},t.prototype.render=function(){var e,n,o,s,a,c;if(e=this.options.teamTree._id,a=this.options.teamTree.style,o=(s=this.options.teamTree._leaderId)&&s===this.options.currentMemberId,n=i.extend({styleName:a.split(",")[0],styleColor:a.split(",")[1],isOpen:this.options.teamTreeState[e],isLeader:o},this.options.teamTree),this.$el.html(r(n)),null!=this.options.teamTree.children)return this.options.teamTree.children.forEach((c=this,function(e){var n;return n=c.requestSubView(t,{teamTree:e,teamTreeState:c.options.teamTreeState}),c.$("ul.team-"+c.options.teamTree._id+"-children").append(n.$el)}))},t}()},czyw6ATt:function(e,t,n){e.exports=n.p+"images/h_quantou@2x.66a97e52.png"},d01BYUGx:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k;b=n("a+N5u/Cl"),k=n("sa1Ed382"),f=n("lzhnO+R2"),s=n("lDvyWifu"),o=n("8/x4MbOA"),p=n("2yb3tZzU"),c=n("TaXCAh5t"),v=n("runzuuFW"),m=n("HgmqnJFi"),l=n("bEEyjJyi"),a=n("Kofb29LJ"),d=n("zNFDTgJw"),u=n("w2dXMpGP"),r=n("txsSAGGy"),i=n("YONqUBBZ"),h=n("6uvpIrW6"),g=n("4JRuWEI1"),y={task:{linkedClass:"link-task",icon:"icon-board",title:function(){return tb_i18n.get("link.task.title")},template:d},post:{linkedClass:"link-post",icon:"icon-wall",title:function(){return tb_i18n.get("link.post.title")},template:u},event:{linkedClass:"link-event",icon:"icon-calendar",title:function(){return tb_i18n.get("link.event.title")},template:r},files:{linkedClass:"link-files",icon:"icon-folder",title:function(){return tb_i18n.get("link.file.title")},template:i},testcaseAndGroup:{linkedClass:"link-testcase",icon:"icon-testcase",title:function(){return tb_i18n.get("link.testcase.title")},template:h},weibo:{linkedClass:"link-weibo",icon:"icon-weibo",title:function(){return tb_i18n.get("link.weibo.title")},template:f},github:{linkedClass:"link-github",icon:"icon-github",title:function(){return tb_i18n.get("link.github.title")},template:s},evernote:{linkedClass:"link-evernote",icon:"icon-evernote",title:function(){return tb_i18n.get("link.evernote.title")},template:o},yinxiang:{linkedClass:"link-yinxiang",icon:"icon-evernote",title:function(){return tb_i18n.get("link.yinxiang.title")},template:g},processon:{linkedClass:"link-processon",icon:"icon-processon",title:function(){return tb_i18n.get("link.processon.title")},template:p},jinshuju:{linkedClass:"link-jinshuju",icon:"icon-jinshuju",title:function(){return tb_i18n.get("link.jinshuju.title")},template:c},gitintegration:{linkedClass:"link-git-integration",template:a,title:function(){return tb_i18n.get("link.git.integration.title")}},zhihu:{linkedClass:"link-zhihu",icon:"icon-zhihu",template:v},wechat:{linkedClass:"link-wechat",icon:"icon-wechat",title:function(){return tb_i18n.get("link.wechat.title")},template:m},web:{linkedClass:"link-link",title:function(){return tb_i18n.get("link.link.title")},template:l}},t.getArchiveMap=function(e){return b.mapObject(y[e],function(e,t){return"title"===t?e():e})},t.checkIsVisible=function(e,t){var n,r,o,i;return null==e&&(e={}),i=e.visible,n=e.involveMembers,o=e.parentVisible,r=e.parentInvolveMembers,null==i||("files"!==t||"involves"!==o||-1!==(null!=r&&"function"==typeof r.indexOf?r.indexOf(k.user.id):void 0))&&("involves"!==i||(null!=n&&"function"==typeof n.indexOf?n.indexOf(k.user.id):void 0)>=0)}},d1kOqy5u:function(e,t,n){e.exports={"visibility-controller":"visibility-controller__2n9m","visibility-controller-icon":"visibility-controller-icon__1rnO","visibility-controller-body":"visibility-controller-body__3ok6","visibility-controller-mode":"visibility-controller-mode__VB1g","visibility-controller-description":"visibility-controller-description__2PpH","visibility-controller-hover":"visibility-controller-hover__10mh"}},d511H0LF:function(e,t){e.exports=function(e){var t="",n=e.objects;if(n)for(var r,o=-1,i=n.length-1;o<i;)t+='<li> <a class="object-menu-item" data-id="'+(r=n[o+=1]).id+'" data-name="'+r.name+'">'+r.name+"</a></li>";return t}},d6Tuyyud:function(e,t,n){},d6c6pAxJ:function(e,t){},d9XPBKXd:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR"),l=n("sKWSahZj"),u=function(e){var t=e.className,n=e.kind,s=e.size,u=e.muted,p=e.disabled,d=e.locked,h=r.g(e,["className","kind","size","muted","disabled","locked"]),m=l["status-todobox-generic"],f=a()(m,t,n,s,{muted:u,disabled:p,locked:d}),g="end"===n?"checkbox-checked":"checkbox",v=Object(o.useCallback)(function(t){e.muted||(e.disabled||e.locked?t.stopPropagation():e.onClick&&e.onClick(t))},[e.muted,e.disabled,e.locked,e.onClick]);return i.a.createElement("span",r.a({},h,{className:f,onClick:v,"data-role":"status-todobox-generic"}),i.a.createElement("span",{className:"icon-box"},i.a.createElement(c.Icon,{name:g,className:"icon"})))};u.defaultProps={size:"middle"}},dBz1uT71:function(e,t,n){"use strict";var r,o=n("M1/vCJUu"),i=n("mrSGxOB2"),s=n("q1tIBJhx"),a=n.n(s),c=n("80gYlwjC"),l=n("GESwhXbR"),u=n("tLZJUYWX"),p=n("2uRu9aah"),d=n("ln9RsXX9"),h=n("HLaCnIR0"),m=n("4m0cgL3g"),f=n("RQ44psah");!function(e){e[e.Trial=0]="Trial",e[e.Renew=1]="Renew",e[e.Old=2]="Old",e[e.Upgrade=3]="Upgrade",e[e.Purchase=4]="Purchase"}(r||(r={}));var g=new c.Machine("root");g.rule("root",function(e){return e.canGetProfessionalTrial},r.Trial,"isPaid").rule("isPaid",function(e){return e.isPaid},"isExpired",r.Purchase).rule("isExpired",function(e){return e.isExpired},r.Renew,"isOld").rule("isOld",function(e){return e.isOld},r.Old,r.Upgrade);var v,b=function(e,t){var n={onClose:h.a,onClick:function(){},viewType:p.b.Unset};switch(g.transition(e)){case r.Trial:n=i.a({},n,{viewType:p.b.Trial,onClick:function(){var t=e.objectId,n=Object(m.OrganizationModelById)(t);n.getProTrial().then(function(){if(!n.payment.isProfessional)throw new Error("Failed to get Pro trial");Object(d.getOrgProTrialSuccess)(n),Object(h.a)()}).catch(function(){l.Toast.error(u.get("organization.trail.pro.getStarted.failure"))})}});break;case r.Old:n=i.a({},n,{viewType:p.b.ContactCS,onClick:function(){window.open(f.pay.orgOldRenew(e.objectId))}});break;case r.Renew:n=i.a({},n,{viewType:p.b.Renew,onClick:function(){window.open(f.pay.orgRenew(e.objectId))}});break;case r.Purchase:n=i.a({},n,{viewType:p.b.PurchasePro,onClick:function(){window.open(f.pay.orgNewPro(e.objectId))}});break;case r.Upgrade:n=i.a({},n,{viewType:p.b.Upgrade,onClick:function(){window.open(f.pay.orgUpgrade(e.objectId))}})}t&&(n.extra=t),Object(h.b)(a.a.createElement(p.a,i.a({},n)))};!function(e){e[e.Create=0]="Create",e[e.Renew=1]="Renew"}(v||(v={}));var y=new c.Machine("root");y.rule("root",function(e){return e.isPaid},v.Renew,v.Create);var k=function(e,t){var n={onClose:h.a,onClick:function(){},viewType:p.b.Unset};switch(y.transition(e)){case v.Create:n.viewType=p.b.Create;break;case v.Renew:n.viewType=p.b.Renew,n.extra={isProTrial:!1};break;default:return}t&&(n.extra=t),Object(h.b)(a.a.createElement(p.a,i.a({},n)))};n.d(t,"a",function(){return o.b}),n.d(t,"b",function(){return b}),n.d(t,"c",function(){return k})},dI54NnHG:function(e,t,n){e.exports={option:"option__1KUK"}},dJkP6FWJ:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;n("/4WNKxan"),i=n("CxY0Mkc1"),r=n("QyjeWo4p"),s=n("vmWJWrVe"),o=n("dPy5pRdR"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="PluginIframeView",t.prototype.className="plugin-iframe-view modal-dialog flex-vert",t.prototype.initialize=function(e){var n,s,a,c,l,u,p,d;return a=e.link,p=e.title,t.__super__.initialize.apply(this,arguments),l=i.parse(a).query,c=(u=r.parse(l)).mode,d=u.width,s=u.height,"fullscreen"===c?this.$el.addClass("fullscreen"):((n=/^(\d+|\d+\.\d*|\d*\.\d+)(px|%)?$/i).test(d)&&this.$el.width(d),n.test(s)&&this.$el.height(s)),this.$el.html(o({link:a,title:p})),this.listen()},t.prototype.listen=function(){return this.$el.on("closeModal",(e=this,function(){var t;return"function"==typeof(t=e.parentView).close?t.close():void 0}));var e},t}()},dKomSvKR:function(e,t){e.exports=function(e){var t="";return e.showOnlyMention&&(t+=' <div class="only-mentions-tips check-item ',e.onlyMention&&(t+="is-checked"),t+='"> <div class="check-box"> <i class="check-mark icon icon-tick"></i> </div> <span class="only-mentions-content">'+tb_i18n.get("acitivity.creator.mention.tip")+"</span> </div>"),t}},dMJJV7Vx:function(e,t,n){var r,o,i;o=n("a+N5u/Cl"),i=n("2qRnoGmE"),r=n("bZr3G77e"),e.exports=function(){function e(e){this.accessToken=e.accessToken,this.HTTP_PRE=i.INTEGRATION_HOST+"/processon/",this.curPage=0,this.loadMore=!0,this.currentQuery=null}return e.prototype._getInfo=function(e,t,n){var i,s,a;return null==t&&(t={}),null==n&&(n={}),o.extend(t,{access_token:this.accessToken}),a=this,s=function(e){return e.data=o.map(e.data,function(e){return{_id:e._id,data:e}}),e.data.length<a.pageSize&&(a.loadMore=!1),"function"==typeof n.success?n.success(e):void 0},i=function(e){return"function"==typeof n.error?n.error(e):void 0},r.ajax({data:t,method:"GET",url:e,success:s,error:i})},e.prototype.getUserInfo=function(e){var t;return null==e&&(e={}),this.paginateSet(null,null),"http://open.processon.com/api/user",t=this.HTTP_PRE+"user",this._getInfo(t,null,e)},e.prototype.getMyFiles=function(e,t){var n;return null==e&&(e={}),null==t&&(t={}),this.paginateSet(15,"myFiles"),"http://open.processon.com/api/diagrams",n=this.HTTP_PRE+"diagrams",e=o.extend({chart_title:null,teamid:null,page_size:this.pageSize,cur_page:++this.curPage,status:null},e),e=o.pick(e,function(e){return null!=e}),this._getInfo(n,e,t)},e.prototype.getRecent=function(e,t){var n;return null==e&&(e={}),null==t&&(t={}),this.paginateSet(null,"recent"),"http://open.processon.com/api/diagrams/recent",n=this.HTTP_PRE+"diagrams/recent",e=o.extend({count:null},e),e=o.pick(e,function(e){return null!=e}),this._getInfo(n,e,t)},e.prototype.getCooperated=function(e,t){var n;return null==e&&(e={}),null==t&&(t={}),this.paginateSet(5,"cooperated"),"http://open.processon.com/api/diagrams/colla",n=this.HTTP_PRE+"diagrams/colla",e=o.extend({page_size:this.pageSize,cur_page:++this.curPage},e),e=o.pick(e,function(e){return null!=e}),this._getInfo(n,e,t)},e.prototype.reset=function(){return this.curPage=0,this.loadMore=!0,this.currentQuery=null},e.prototype.paginateSet=function(e,t){return this.pageSize=e,e||(this.loadMore=!1),this.currentQuery=t},e.prototype.cacheSet=function(e){return this.curPage=1,"myFiles"!==e&&"cooperated"!==e||(this.loadMore=!0),this.currentQuery=e},e.prototype.myFiles=function(e,t){return null==e&&(e={}),null==t&&(t={}),this.getMyFiles(e,t)},e.prototype.recent=function(e,t){return null==e&&(e={}),null==t&&(t={}),this.getRecent(e,t)},e.prototype.cooperated=function(e,t){return null==e&&(e={}),null==t&&(t={}),this.getCooperated(e,t)},e}()},dNxFYq8c:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("sa1Ed382"),s=n("s0r7VfKc"),a=n("wd/RKGTj"),c=n.n(a),l=n("a+N5u/Cl"),u=n("IssmDVnT"),p=n("GESwhXbR"),d=n("YqUJfXDr"),h=n("/A1HOqjB"),m=n("/MKjzBat"),f=n("50927W45"),g=n("XsmuAFxo"),v=n("Oi0zBIp9");n("qKJ99bi6");var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSelectItem=function(e){var n=t.props,o=n.data,i=n.officialKey===u.DashboardOfficialKey.Favorite?r.a({},o.data,{_id:o._refId,objectType:o.refType}):o;t.props.onSelectItem(i.objectType,e,i._projectId)},t}return r.d(t,e),t.prototype.getItemData=function(e){switch(e.objectType){case f.a.Event:return v.d(e);case f.a.Post:return v.e(e);case f.a.Project:return v.f(e);case f.a.Task:return v.g(e);case f.a.User:return v.h(e);case f.a.Work:return v.i(e);case f.a.Collection:return v.b(e);case f.a.Entry:return v.c(e);default:return e}},t.prototype.render=function(){var e=this.props,t=e.data,n=e.officialKey===u.DashboardOfficialKey.Favorite,i=n?r.a({},t.data,{_id:t._refId,objectType:t.refType}):t,s=r.a({},this.getItemData(i),{onSelectItem:this.onSelectItem,showDetails:!n,showNamePrefix:!1,onUpdateItem:this.props.onUpdateItem});switch(i.objectType){case f.a.Event:return o.createElement(g.a.Event,r.a({},s));case f.a.Post:return o.createElement(g.a.Post,r.a({},s));case f.a.Task:return o.createElement(g.a.Task,r.a({},s));case f.a.Work:return o.createElement(g.a.Work,r.a({},s));case f.a.Collection:return o.createElement(g.a.Collection,r.a({},s));case f.a.Entry:return o.createElement(g.a.Entry,r.a({},s));default:return null}},t}(o.PureComponent);n.d(t,"DashboardModalContainer",function(){return T}),n.d(t,"DashboardModal",function(){return I});var y=n("3eMzznN/"),k=n("75pUczFf"),_=n("tOYy32ox"),w=n("GJs41Fxt"),C=k(function(e){var t=[],n=c()().startOf("day").toDate(),r=c()().add(6,"day").endOf("day").toDate();return e.forEach(function(e){var o=new u.EventSDK.Generator(e).takeFrom(n,r);t=t.concat(o)}),l.sortBy(t,"startDate")}),S=k(function(e,t){switch(t){case u.DashboardOfficialKey.Recent:var n=l.chain(e).filter(function(e){return"task"===e.objectType}).sort(y.compareTask).value(),o=C(e.filter(function(e){return"event"===e.objectType}));return r.h(n,o);case u.DashboardOfficialKey.EventInvolved:var i=c()().startOf("day").toDate();return l.chain(e).map(function(e){return new u.EventSDK.Generator(e).after(i)}).compact().sortBy("startDate").value();default:return e}}),E={onLoad:h.fetchDashboardCardDataurl,onVisibleChange:h.toggleDashboardModal,fetchDashboardCard:h.fetchDashboardCard,refreshDashboardItems:h.refreshDashboardItems,onUnmount:h.exitDashboardModal},T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onVisibleChange=function(e){t.props.onVisibleChange(e)},t.onUpdateItem=function(e){if(e){var n=t.props.items,o=(void 0===n?[]:n).map(function(t){return t._id===e._id?r.a({},t,e):t});t.props.refreshDashboardItems(o)}},t.onSelectItem=function(e,t,n){switch(e){case"collection":window.open("/project/"+n+"/works/"+t);break;case"event":_(t);break;default:i.APP.openObjectPreviewer(t,e,{_projectId:n})}},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.props.opened&&this.subscribeToSocket()},t.prototype.componentDidUpdate=function(e){e.opened!==this.props.opened&&(this.props.opened?this.subscribeToSocket():this.unsubscribeSocket())},t.prototype.componentWillUnmount=function(){this.unsubscribeSocket(),this.props.onUnmount()},t.prototype.subscribeToSocket=function(){var e=this;this.changeSubscription=s.default.socketProxy.publish(":change:(task|event)").subscribe(function(t){var n=e.props.items,o=void 0===n?[]:n,i=t.id,s=t.type,a=t.data;"event"===s&&(a=u.EventSDK.marshaler.parse(a));var c=o.map(function(e){return e._id===i?r.a({},e,a):e});e.props.refreshDashboardItems(c)}),this.removeSubscription=s.default.socketProxy.publish(":destroy:(task|work|event|post|entry)").subscribe(function(t){var n=e.props.items,r=void 0===n?[]:n,o=t.id,i=r.filter(function(e){return e._id!==o});e.props.refreshDashboardItems(i)})},t.prototype.unsubscribeSocket=function(){this.changeSubscription&&this.changeSubscription.unsubscribe(),this.removeSubscription&&this.removeSubscription.unsubscribe()},t.prototype.renderLoadMore=function(){return o.createElement(d.LoadMore,{hasMore:this.props.hasMore,onEnter:this.props.onLoad,endWith:null})},t.prototype.renderItems=function(){var e=this,t=this.props,n=t.items,r=t.card;return r&&n&&S(n,r.officialKey).map(function(t){return o.createElement(b,{key:t._id,data:t,officialKey:r.officialKey,onSelectItem:e.onSelectItem,onUpdateItem:e.onUpdateItem})})},t.prototype.renderContent=function(){return o.createElement("div",{className:w["dashboard-modal-body"]},this.renderItems(),this.renderLoadMore())},t.prototype.render=function(){var e=this.props,t=e.opened,n=e.card;return o.createElement(p.Modal,{zIndex:100,opened:t,width:800,onVisibleChange:this.onVisibleChange,title:n&&n.name,titleCls:w["dashboard-modal-title"]},this.renderContent())},t}(o.PureComponent),I=Object(m.connect)(function(e){var t=e.ui.dashboardModal,n=t.card,o=t.items,i=t.pageToken,s=!(n&&o);return r.a({},t,{hasMore:s||!!i})},E)(T)},dPy5pRdR:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""});return'<header class="plugin-iframe-header modal-header flex-static"> <h4>'+r(e.title)+'</h4> <a class="plugin-iframe-closer icon icon-remove" data-dismiss="modal"></a></header><iframe class="plugin-iframe flex-fill thin-scroll" src="'+r(e.link)+'" frameBorder="0"></iframe>'}},"dROYn/vd":function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;s=n("a+N5u/Cl"),c=n("sa1Ed382"),i=n("vmWJWrVe"),r=n("pBu40acj"),o=n("yQh2FoYJ"),(a=n("zTT+LU7r")).refreshSyncStatus,a.customfieldNotifyStatus$,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="ProjectPanelView",t.prototype.className="project-panel",t.prototype.currentView=null,t.prototype.events={"click .close-handler":"closeHandler"},t.prototype.initialize=function(e){if(null==e&&(e={}),this.options=e,this.projectModel=e.projectModel,!this.projectModel)throw new Error(this.viewName+" need dependency projectModel");return this.render(),this.listenTo(this.projectModel,"change:currentPanel",this.render)},t.prototype.render=function(){var e;switch(e=this.projectModel.get("currentPanel")){case"member":this.renderMember();break;case"activity":this.renderActivity()}return e?this.show():this.hide()},t.prototype.renderMember=function(){var e;return this.memberBarView||(this.memberBarView=this.requestSubView(o,{_projectId:this.projectModel.id,projectModel:this.projectModel})),this.switchToView(this.memberBarView),e=this.currentView.$el,s.delay(function(){return e.find(".filter-input").focus()},100)},t.prototype.renderActivity=function(){var e;return this.activityPanelView||(this.activityPanelView=this.requestSubView(r,{projectModel:this.projectModel,membersCollection:this.options.membersCollection})),(e=this.activityPanelView).renderChild("all"),this.switchToView(e)},t.prototype.switchToView=function(e){var t,n,r;return null!=(t=this.currentView)&&null!=(n=t.$el)&&n.detach(),this.currentView=e,null!=(r=this.currentView)?r.$el.appendTo(this.$el):void 0},t.prototype.toggle=function(){return this.isShowing?this.hide():this.show()},t.prototype.show=function(){if(!this.isShowing&&this.projectModel.get("currentPanel"))return this.isShowing=!0,c.APP.$el.addClass("with-full-project-panel")},t.prototype.hide=function(){if(this.isShowing)return this.isShowing=!1,c.APP.$el.removeClass("with-full-project-panel")},t.prototype.closeHandler=function(e){return this.projectModel.set("currentPanel",null)},t.prototype.remove=function(){return this.projectModel.set("currentPanel",null),c.APP.$el.removeClass("with-full-project-panel"),t.__super__.remove.apply(this,arguments)},t}()},dSYllay4:function(e,t,n){e.exports=function(e){var t="";return t+='<div class="archive-list-placeholder"> <div class="placeholder-wrapper"> <img src="'+n("6ARYQl7C")+'"> <p>'+tb_i18n.get("archive.list.placeholder.desc")+"</p> </div></div>"}},dXJoXsL7:function(e,t,n){var r,o,i,s={}.hasOwnProperty;r=n("q1z7EYOi"),i=n("WMI0/nUp").fetchOrganizationPlugins,o={waiting:"waiting",loading:"loading",error:"error",empty:"empty",end:"end"},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r.Model),t.prototype.defaults={status:o.waiting,plugin:null},t.prototype.fetchOrganization=function(e){return this.set({status:o.loading}),i(e)((t=this,function(e,n){var r;return e?t.set({error:e,status:o.error}):(r=t.setPluginFromCollection(n)?o.end:o.empty,t.set({status:r}))}));var t},t.prototype.setPluginFromCollection=function(e){var t,n;return t=null!=(n=e.get(this.id))?n.toJSON():void 0,this.set({plugin:t}),t},t}()},"db4+OjB4":function(e,t,n){"use strict";n.r(t);var r=n("4BeYQFX4"),o=n.n(r),i=n("IaFtV71y"),s=n.n(i),a=new o.a({id:"object-testcase",use:"object-testcase-usage",viewBox:"0 0 20 20",content:'<symbol viewBox="0 0 20 20" id="object-testcase"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#77C2F8" rx="2" /><path fill="#FFF" fill-rule="nonzero" d="M14.135 13.333c-1.315-3.404-2.85-4.302-2.85-6v-2h.322A.327.327 0 0 0 11.928 5v-.667a.328.328 0 0 0-.32-.333H8.392a.328.328 0 0 0-.321.333V5c0 .184.143.333.32.333h.322v2c0 1.698-1.534 2.596-2.849 6C5.447 14.417 4.372 16 10 16s4.553-1.583 4.135-2.667zm-1.357.84c-.4.114-1.194.245-2.738.245-1.545 0-2.34-.13-2.739-.245-.141-.04-.197-.199-.147-.344.126-.367.362-1 .803-1.707 1.078-1.729 2.197.271 3.128.271.93 0 .676-.853 1.037-.271.44.708.678 1.34.803 1.707.05.145-.005.303-.147.344z" /></g></symbol>'});s.a.add(a);t.default=a},dcBzEMrG:function(e,t,n){"use strict";n.r(t);var r,o=n("mrSGxOB2"),i=n("/MKjzBat"),s=n("fvjXLGkK"),a=n("a+N5u/Cl"),c=n.n(a),l=n("oRqJmROU"),u=n("tLZJUYWX"),p=n.n(u),d=n("sa1Ed382"),h=n("TSYQbtd+"),m=n.n(h),f=n("q1tIBJhx"),g=n.n(f),v=n("GESwhXbR"),b=n("s0r7VfKc"),y=n("5V57DkyA"),k=n("CFOPnz30"),_=n("cUZYBCvT"),w=n("cY+V28dO"),C=n("77NnVLwu"),S=n.n(C),E=n("YqUJfXDr"),T=n("HDJEOtNh"),I=n("5qt3k8Zi"),M=n("LvDlAkAJ"),j=n("/onrLvIr"),P=n("dMp4HTVj"),x=12;!function(e){e[e.Custom=0]="Custom",e[e.Create=1]="Create",e[e.Edit=2]="Edit",e[e.Delete=3]="Delete"}(r||(r={}));var N,O=n("suI5NDUm"),R=n("ds2JuV/Y"),D=n("aWGODt9f"),L=n.n(D),z=function(e){var t=Object(O.isAone)()?"involves":void 0,n=e.name,i=void 0===n?"":n,s=e.visible,a=void 0===s?t:s,c=e.validation,l=e.onConfirm,u=e.mode,d=e.visibleReadonly,h=o.f(Object(f.useState)(i),2),m=h[0],b=h[1],y=o.f(Object(f.useState)(a||(d?"involves":"organization")),2),k=y[0],_=y[1],w=o.f(Object(f.useState)(""===i),2),C=w[0],S=w[1],E=u===r.Create?p.a.get("create"):p.a.get("confirm");return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:L.a["field-set"]},g.a.createElement("label",null,p.a.get("project.hierarchy.edit.name")),g.a.createElement(v.Input,{placeholder:p.a.get("project.hierarchy.edit.placeholder"),value:m,onChange:function(t){var n=t.target.value;b(n),S(!c(e.mode,n))}})),g.a.createElement("div",{className:L.a["field-set"]},g.a.createElement("label",null,p.a.get("projecttag.visible")),g.a.createElement(R.a,{value:k,onSelect:function(e){_(e.data)},disabled:d,className:"visible-select"})),g.a.createElement("div",{className:L.a.separator},g.a.createElement(v.Separator,{component:"div"})),g.a.createElement(v.Button,{disabled:C,onClick:function(){l({name:m,visible:k})},block:!0},E))},A=n("lFkNNyTc"),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.saveRef=function(e){return t.popupMenuRef=e},t.onCreateTag=function(e){var n=t.props.onAddSubTag,r=e.name.trim();""!==r&&(n&&n({name:r,visible:e.visible}),t.popupMenuRef.close())},t.onDeleteTag=function(){var e=t.props.onRemoveTag;e&&e(),t.popupMenuRef.close()},t.onEditTag=function(e){var n=t.props.onEditTag,r=e.name.trim();""!==r&&(n&&n({name:r,visible:e.visible}),t.popupMenuRef.close())},t.validation=function(e,n){var o,i=t.props,s=i.existsTagNames,a=i.existsSubTagNames,c=i.tag,l=n.trim();switch(e){case r.Create:return o=(a||[]).filter(function(e){return e===l}),!(""===l||o.length>0);case r.Edit:var u=c&&c.name||"";return o=(s||[]).filter(function(e){return e===l}),!(""===l||o.length>1||1===o.length&&l!==u)}return!1},t}return o.d(t,e),t.prototype.renderCreateView=function(){var e=this.props,t=e.createViewTitle,n=e.tag,o=!!n&&"involves"===n.visible;return g.a.createElement(v.PopupMenuView,{index:r.Create,title:t||"",className:"tag-create"},g.a.createElement(z,{mode:r.Create,onConfirm:this.onCreateTag,validation:this.validation,visibleReadonly:o}))},t.prototype.renderEditView=function(){var e=this.props,t=e.editViewTitle,n=e.tag,o=e.node,i=!(!o||!o.parent)&&"involves"===o.parent.visible;return g.a.createElement(v.PopupMenuView,{index:r.Edit,title:t||u.get("project.hierarchy.edit.tag"),className:"tag-create"},g.a.createElement(z,{mode:r.Edit,name:n&&n.name,visible:n&&n.visible||"organization",onConfirm:this.onEditTag,validation:this.validation,visibleReadonly:i}))},t.prototype.renderDeleteView=function(){return g.a.createElement(v.PopupMenuView,{index:r.Delete,title:u.get("project.hierarchy.del.tag"),className:"tag-delete"},g.a.createElement("p",{className:"tag-delete-confirm"},u.get("project.hierarchy.del.tag.confirm")),g.a.createElement(v.Button,{className:"tag-confirm-delete-btn",danger:!0,onClick:this.onDeleteTag},u.get("delete")))},t.prototype.render=function(){var e=this.props,t=e.onHide,n=e.className,r=e.initPage,i=e.customPopupView,s=o.g(e,["onHide","className","initPage","customPopupView"]),a=o.a({},s,{main:r,titleCls:"popup-title",ref:this.saveRef,onClose:t}),c=m()(A["tag-popup-menu"],n);return g.a.createElement(v.PopupMenu,o.a({className:c},a),i,this.renderCreateView(),this.renderEditView(),this.renderDeleteView())},t}(g.a.PureComponent),F=function(){},B=Object(f.createContext)({exportTableHandler:F,editHandler:F,removeHandler:F,addSubTagHandler:F}),U=n("q80r3APc"),$=n.n(U),H=n("afows5Ma"),G=function(e){var t=e.permissionBinding;return t?t.permissions:[]},q=function(e,t){return c.a.intersection(e,t).length>0},W=function(e){var t=G(e),n=e.strictVisible,r=function(e){return e.parent&&e.parent.id!==Fe.g?e.parent:null}(e),i=r?!!o.h([r],r.ancestors).find(function(e){var t=G(e);return q(t,[H.a.Del,w.c.Del])}):q(t,[H.a.Del]);return{canEditTag:q(t,[H.a.Put,w.c.Put])&&n,canCreateTag:q(t,[H.a.Create,w.c.Create])&&n,canDelTag:i&&n,canExport:n}},J={clickMore:function(){d.gta.event({action:"view project group more"})},clickEdit:function(){d.gta.event({action:"edit project group"})},clickDel:function(){d.gta.event({action:"del project group"})},clickCreateSubTag:function(){d.gta.event({action:"add sub group"})}},X=function(e){!function(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}(e),J.clickMore()},Y=function(e){var t=Object(f.useContext)(B),n=t.editHandler,i=t.addSubTagHandler,s=t.removeHandler,a=t.exportTableHandler,c=e.node,l=e.triggerClassName,u=c.subNodes.map(function(e){return e.name}),d=function(e){var t=e.node,n=e.canCreateTag,o=e.canDelTag,i=e.canEditTag,s=e.exportTableHandler,a=t.depthIgnoreRoot<9,c=t.id,l=i&&g.a.createElement(v.PopupMenuLink,{goto:r.Edit},g.a.createElement(v.MenuItem,{onClick:J.clickEdit},g.a.createElement(v.Icon,{name:"edit"}),p.a.get("project.hierarchy.edit.tag"))),u=o&&g.a.createElement(v.PopupMenuLink,{goto:r.Delete},g.a.createElement(v.MenuItem,{onClick:J.clickDel},g.a.createElement(v.Icon,{name:"trash"}),p.a.get("project.hierarchy.del.tag"))),d=n&&a&&g.a.createElement(v.PopupMenuLink,{goto:r.Create},g.a.createElement(v.MenuItem,{onClick:J.clickCreateSubTag},g.a.createElement(v.Icon,{name:"plus"}),p.a.get("project.hierarchy.create.sub.tag"))),h=g.a.createElement(v.MenuItem,{onClick:function(){return s(c)}},g.a.createElement(v.Icon,{name:"move-task"}),p.a.get("project.cluster.export"));return g.a.createElement(v.PopupMenuView,{index:r.Custom,title:p.a.get("portal.tag.menu.title"),className:$.a["first-popup-view"]},g.a.createElement(v.Menu,null,l,d,h,u))}(o.a({node:c,exportTableHandler:a},W(c))),h=g.a.createElement(v.IconButton,{type:"subtle",name:"more",color:"gray",className:m()($.a["subtile-btn"],l,"btn-menu"),onClick:X}),b=c.parent.subNodes.map(function(e){return e.name});return g.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},style:{cursor:"default"}},g.a.createElement(V,{initPage:r.Custom,customPopupView:d,createViewTitle:p.a.get("project.hierarchy.create.sub.tag"),existsSubTagNames:u,onAddSubTag:function(e){return i(c,e)},tag:c,node:c,existsTagNames:b,onEditTag:function(e){return n(c,e)},onRemoveTag:function(){return s(c)},trigger:h,nested:!0,placement:"bottom"}))},K=n("ACCEx9jd"),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){return g.a.createElement("div",o.a({className:K["insert-line"]},this.props),g.a.createElement("div",{className:"line-head"}))},t}(g.a.PureComponent);!function(e){e.begin="begin",e.middle="middle",e.end="end"}(N||(N={}));var Z=function(e){function t(t){var n=e.call(this,t)||this;return n.stopPropagation=function(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},n.onSelect=function(e){var t=n.props;(0,t.onSelect)(t.node),n.onExpand(e)},n.onExpand=function(e){var t=n.props,r=t.onToggleExpand,o=t.node;n.stopPropagation(e),r(o)},n.onToggleStar=function(e){var t=n.props,r=t.onToggleStar,o=t.node;n.stopPropagation(e),r(o)},n.onMousedown=function(e){n.callDragHandler(e,n.props.onMousedownDocument)},n.onMousemove=function(e){n.callDragHandler(e,n.props.onMousemoveDocument)},n.onMouseup=function(e){n.callDragHandler(e,n.props.onMouseupDocument)},n.state={toolsOpened:!1},n}return o.d(t,e),t.prototype.callDragHandler=function(e,t){t&&t(this.props.node,e,this.calculateMoveData(e))},t.prototype.calculateMoveData=function(e){var t=e.nativeEvent,n=e.currentTarget,r=Object(j.c)(e.target,e.currentTarget),o={x:r.left+t.offsetX-20,y:r.top+t.offsetY},i=n.clientHeight,s=function(e,t){var n=e/t;return Object(M.inRange)(n,te,ne)?N.middle:Object(M.inRange)(n,ee,te)?N.begin:N.end}(o.y,i),a=this.props.node,c=null,l=null;switch(s){case N.middle:l=a;break;case N.begin:var u=re(o.x,this.props.previous,a);c=u.next,l=u.parent;break;case N.end:var p=re(o.x,a,this.props.next);c=p.next,l=p.parent}return{next:c,parent:l,area:s,target:a}},t.prototype.renderInsertLine=function(){var e=this.props,t=e.node,n=e.moveData,r={display:"none"};if(n&&n.target.id===t.id){var o=n.parent,i=20+function(e,t){return e&&e.depthIgnoreRoot||t&&t.depthIgnoreRoot+1||0}(n.next,o)*x,s="translateX("+i+"px)",a="calc(100% - "+i+"px)";n.area===N.begin?r={transform:s,top:-40,width:a}:n.area===N.end&&(r={transform:s,width:a})}return g.a.createElement(Q,{style:r})},t.prototype.renderMoreToolsPopup=function(){var e=this.props,t=e.node,n=e.showMoreTools,r=e.projectCount;return n?g.a.createElement(Y,{node:t,triggerClassName:"more-tools-btn"}):g.a.createElement("div",{className:"projects-count-in-more-btn"},P.d(r))},t.prototype.render=function(){var e=this.props,t=e.node,n=e.moveData,r=e.hiddenTagExpandHandler,o=e.projectCount,i=t.isSelected,s=t.depthIgnoreRoot,a=t.folded,c=t.hasChild,l=t.name,u=t.isStar,p=m()(K["project-tag-item"],{selected:i}),d=m()("item-body",{"is-putin":!!n&&n.area===N.middle}),h="";c&&(h=a?"triangle-right-s":"triangle-down-s");var f=null;r||(f=h?g.a.createElement(v.IconButton,{type:"subtle",name:h,color:"gray",className:"tag-expand-handler subtile-btn",onClick:this.onExpand}):g.a.createElement("div",{className:"tag-expand-handler"}));var b=u?"gold-star":"star-stroke",y=u?g.a.createElement(v.Icon,{name:"star-s"}):g.a.createElement(v.Icon,{name:"star-stroke-s"});return g.a.createElement("div",{className:p,onMouseMove:this.onMousemove,onMouseUp:this.onMouseup,onClick:this.onSelect},g.a.createElement("div",{className:d,style:{paddingLeft:16+x*s},onMouseDown:this.onMousedown},f,g.a.createElement(v.Tooltip,{title:l},g.a.createElement("div",{className:"tag-name"},l)),g.a.createElement("div",{className:m()("tag-star",b),onClick:this.onToggleStar},y),this.renderMoreToolsPopup(),g.a.createElement("div",{className:"projects-count"},P.d(o))),this.renderInsertLine())},t}(g.a.PureComponent),ee=0,te=.25,ne=.75;function re(e,t,n){var r=null,o=null;if(t){var i=t.depthIgnoreRoot,s=n&&n.depthIgnoreRoot||0;if(i<s)r=n.parent,o=n;else if(i>s){var a=i,c=s,l=Object(M.clamp)(Math.floor(e/x),c,a);n&&l===c?(r=n.parent,o=n):r=function(e,t){if(0===e)return null;for(;t.parent;)if((t=t.parent).depthIgnoreRoot<e)return t;return null}(l,t)}else r=t.parent,o=Object(P.e)(t,1)}else n&&(r=n.parent,o=n);return{parent:r,next:o}}var oe,ie=n("4c1CS0b3"),se=n("8yf6doCl"),ae=n("svve/QA+");!function(e){e.Drag="Drag",e.Move="Move",e.Drop="Drop",e.Reset="Reset"}(oe||(oe={}));var ce=function(e){function t(t){var n=e.call(this,t)||this;return n.mousedown$=new se.Subject,n.mousemove$=new se.Subject,n.mouseup$=new se.Subject,n.draggedNode=null,n.onMousedownDocument=function(e,t,r){if(n.isBindDragEvent){var o=Object(j.c)(t.target,t.currentTarget),i=t.nativeEvent,s={x:o.left+i.offsetX,y:o.top+i.offsetY},a={left:i.clientX,top:i.clientY};n.mousedown$.next({node:e,offset:s,moveData:r,position:a})}},n.onMousemoveDocument=function(e,t,r){n.draggedNode&&n.mousemove$.next(r)},n.onMouseupDocument=function(e,t,r){n.draggedNode&&n.mouseup$.next(r)},n.state={},n}return o.d(t,e),t.prototype.setSubscription=function(){this.subscription=this.createDragObserver().subscribe()},t.prototype.clearSubscription=function(){this.subscription&&this.subscription.unsubscribe()},t.prototype.UNSAFE_componentWillMount=function(){this.isBindDragEvent=!!this.props.onDragDocument||!!this.props.onDropDocument,this.isBindDragEvent&&this.setSubscription()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=!!e.onDragDocument||!!e.onDropDocument;t!==this.isBindDragEvent&&(this.isBindDragEvent=t,this.isBindDragEvent?this.setSubscription():this.clearSubscription())},t.prototype.componentWillUnmount=function(){this.clearSubscription(),this.mousedown$.complete(),this.mousemove$.complete(),this.mouseup$.complete()},t.prototype.createDragObserver=function(){var e=this,t=ie.Observable.fromEvent(document,"mouseup").share();return this.mousedown$.switchMap(function(e){return ie.Observable.of(e).delay(300).takeUntil(t)}).switchMap(function(n){var r=n.node,i=function(e){return function(t){var n=le(e,t.parent);if(n)return!1;var r=le(e,t.next);if(r)return!1;if(t.parent){var o=t.parent.ancestorIds,i=o.includes(e.id);if(i)return!1}var s=le(e.parent,t.parent),a=le(Object(P.e)(e,1),t.next);return!s||!a}}(r),s=e.mousemove$.map(function(e){return i(e)?{type:oe.Move,moveData:e}:{type:oe.Move}}),a=e.mouseup$.filter(i).map(function(e){return{type:oe.Drop,draggedNode:r,moveData:e}});return ie.Observable.merge(s,a).startWith(o.a({type:oe.Drag},n,{draggedNode:r})).takeUntil(t).concat(ie.Observable.of({type:oe.Reset}).delay(50))}).do(function(t){return e.reduceAction(t)})},t.prototype.reduceAction=function(e){switch(e.type){case oe.Drag:this.draggedNode=e.draggedNode,this.tryOutputDragDocument(e);break;case oe.Drop:this.tryOutputDropDocument(e.draggedNode,e.moveData);case oe.Move:this.setState({moveData:e.moveData});break;default:this.tryOutputReleaseDocument(),this.draggedNode=null,this.setState({moveData:void 0})}},t.prototype.tryOutputDragDocument=function(e){var t=this.props.onDragDocument;t&&t(e.node,e.offset,e.position)},t.prototype.tryOutputReleaseDocument=function(){var e=this.props.onReleaseDocument;e&&e()},t.prototype.tryOutputDropDocument=function(e,t){var n=this.props.onDropDocument,r=t.next,o=t.parent;n&&n({draggedNode:e,dropedNext:r,dropedParent:o})},t.prototype.renderList=function(){var e=this,t=this.props.nodes,n=this.state.moveData,r=t.length-1,i=n&&n.target.id,s=t.every(function(e){return!e.hasChild});return t.map(function(a,l){var u=i===a.id,p=c.a.values(W(a)).some(function(e){return e}),d=Object(ae.e)(a._id,e.props.projectTagCountDict,!a.hideChild)||0;return g.a.createElement(Z,o.a({},e.props,{key:a.id,node:a,projectCount:d,showMoreTools:p,hiddenTagExpandHandler:s,previous:l>0?t[l-1]:void 0,next:l<r?t[l+1]:void 0,moveData:u?n:void 0,onMousedownDocument:e.onMousedownDocument,onMousemoveDocument:e.onMousemoveDocument,onMouseupDocument:e.onMouseupDocument}))})},t.prototype.render=function(){return g.a.createElement("div",{className:"tree"},this.renderList())},t}(g.a.PureComponent);function le(e,t){return!e&&!t||!(!e||!t)&&e.id===t.id}var ue=n("zHprUn39"),pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stopPropagation=function(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},t.onClick=function(e){var n=t.props,r=n.payload,o=n.onSelect,i=n.onClick;"function"!=typeof o?"function"!=typeof i||i(e):o(r)},t.onToggleStar=function(e){var n=t.props,r=n.onToggleStar,o=n.payload;t.stopPropagation(e),r&&r(o)},t}return o.d(t,e),t.prototype.render=function(){var e=this.props,t=e.selected,n=e.className,r=e.iconName,i=e.iconSize,s=e.name,a=e.projectsCountStr,c=e.isStar,u=(e.onSelect,e.onToggleStar,e.fillIconName),p=o.g(e,["selected","className","iconName","iconSize","name","projectsCountStr","isStar","onSelect","onToggleStar","fillIconName"]),d=m()(ue["sidebar-item"],n,{selected:t}),h={height:i,width:i},f=r&&g.a.createElement(v.Icon,{name:r,size:i,style:h}),b=u&&g.a.createElement(v.Icon,{name:u,size:i,style:h}),y=c?"gold-star":"star-stroke",k=c?g.a.createElement(v.Icon,{name:"star-s"}):g.a.createElement(v.Icon,{name:"star-stroke-s"}),_=Object(l.c)(c)&&g.a.createElement("div",{className:m()("tag-star",y),onClick:this.onToggleStar},k);return g.a.createElement("div",o.a({className:d,onClick:this.onClick},p),g.a.createElement("div",{className:"icon-wrapper"},g.a.createElement("span",{className:"iswitch iconlinner"},f),g.a.createElement("span",{className:"iswitch iconfill"},b)),g.a.createElement("div",{className:"name"},s),_,g.a.createElement("div",{className:"projects-count"},a))},t}(g.a.PureComponent);n("gR0lnSMk");var de={node:null,offset:{x:0,y:0},mouse:{left:0,top:0},visible:!1},he=function(e){function t(t){var n=e.call(this,t)||this;return n.node$=new se.Subject,n.state=de,n}return o.d(t,e),t.prototype.componentDidMount=function(){var e=this,t=o.f(this.node$.partition(function(e){return!!e}),2),n=t[0],r=t[1];this.dragSub$=n.switchMap(function(){return ie.Observable.fromEvent(document,"mousemove").map(function(e){return{left:e.clientX,top:e.clientY}}).takeUntil(r)}).do(function(t){return e.setState({mouse:t})}).subscribe()},t.prototype.componentWillUnmount=function(){this.node$.complete(),this.dragSub$.unsubscribe()},t.prototype.dragStart=function(e,t,n){this.setState({node:e,offset:t,mouse:n,visible:!0}),this.node$.next(e)},t.prototype.dragEnd=function(){this.setState(de),this.node$.next(null)},t.prototype.render=function(){var e=this.state,t=e.node,n=e.mouse,r=e.offset;if(null===t)return null;var i={left:n.left-r.x,top:n.top-r.y,width:"240px"},s={showMoreTools:!1,onSelect:c.a.noop,onToggleExpand:c.a.noop,onToggleStar:c.a.noop,onRemove:c.a.noop,onEdit:c.a.noop,onAddSubTag:c.a.noop};return g.a.createElement("div",{className:"following-node",style:i},g.a.createElement(Z,o.a({node:t},s,{projectCount:0})))},t}(g.a.PureComponent),me=function(e){function t(t){var n=e.call(this,t)||this;return n.onExpandFilter=function(){n.setState({filterExpanded:!0}),d.gta.event({action:"expand more project",method:"hover"})},n.onFoldFilter=function(){n.setState({filterExpanded:!1}),d.gta.event({action:"close more project",method:"click"})},n.onChangeProjectFilter=function(e){n.props.actions.changeProjectFilter({projectFilter:e,ignoreSame:!0})},n.onToggleStarByCategory=function(e){var t=n.props,r=t.actions,o=t.tagStars,i=t._organizationId,s=o.find(function(t){return Object(k.a)(t)&&t.subjectValue===e});s?r.delTagStar({starId:s._id}):r.addTagStar({payload:{_organizationId:i,subjectType:"projecttag",_subjectId:null,subjectValue:e}})},n.filter2nameMap=Object(Fe.h)(),n.state={filterExpanded:!1,envConfigs:{}},n}return o.d(t,e),t.prototype.componentDidMount=function(){this.props.actions.getProjectsCount(),this.subscribeSiteConfig()},t.prototype.componentWillUnmount=function(){this.unsubscribeSiteConfig()},t.prototype.subscribeSiteConfig=function(){var e=this;this.config$=b.default.fetch.getSiteConfig().subscribe(function(t){var n={};t.forEach(function(e){var t=e.officialKey,r=e.support;n[t]=r}),e.setState({envConfigs:n})})},t.prototype.unsubscribeSiteConfig=function(){this.config$&&this.config$.unsubscribe()},t.prototype.isHistoryProjectsShowed=function(){return this.state.envConfigs["list.project.recent"]},t.prototype.UNSAFE_componentWillReceiveProps=function(){this.followingNodeRef&&this.followingNodeRef.dragEnd()},Object.defineProperty(t.prototype,"canAccessOrgProjectFilter",{get:function(){return T.OrganizationAccess.hasGuestAuthority(this.props._organizationId)},enumerable:!0,configurable:!0}),t.prototype.getSidebarItemProps=function(e,t){var n=this.filter2nameMap[e];return{selected:e===t,name:n.name,iconName:n.icon,fillIconName:n.iconFill,payload:e,onSelect:this.onChangeProjectFilter,projectsCountStr:"all"===e?P.d(this.props.projectsCount[e]):void 0}},t.prototype.renderTransferIn=function(){var e=this.props,t=e.organization,n=e.onOpenProjectTransferModalClick;return t&&t.canTransferInProjects&&g.a.createElement(pe,{selected:!1,name:u.get("projects.transferIn"),iconName:"import-project",fillIconName:"import-project-fill",onClick:n})},t.prototype.getVirtualTagStar=function(){return this.props.tagStars.filter(function(e){return Object(k.a)(e)}).map(function(e){return e.subjectValue})},t.prototype.renderDefaultFilters=function(){var e=this,t=this.props.projectFilter,n=Object(ae.d)(this.canAccessOrgProjectFilter).filter(function(t){return!(t===_.a.History&&!e.isHistoryProjectsShowed())}).map(function(n){return g.a.createElement(pe,o.a({key:n},e.getSidebarItemProps(n,t)))});return g.a.createElement("div",{className:"project-filters"},n)},t.prototype.renderExpandedFilters=function(){var e=this,t=this.props,n=t.projectFilter,r=t.projectsCount,i=t.tagStars,s=this.state.filterExpanded;if(i&&this.canAccessOrgProjectFilter){var a=this.getVirtualTagStar(),c=Fe.c.map(function(t){return g.a.createElement(pe,o.a({},e.getSidebarItemProps(t,n),{key:t,isStar:t===_.a.Archived?void 0:a.indexOf(t)>-1,onToggleStar:e.onToggleStarByCategory,projectsCountStr:P.d(r[t])}))});return s?g.a.createElement("div",{className:"project-filters"},c,this.renderTransferIn(),g.a.createElement(pe,{selected:!1,name:u.get("collapse"),iconName:"chevron-up",iconSize:12,onSelect:this.onFoldFilter})):g.a.createElement("div",{className:"project-filters"},g.a.createElement(pe,{selected:!1,name:u.get("more"),iconName:"chevron-down",iconSize:12,onSelect:this.onExpandFilter}))}},t.prototype.render=function(){return g.a.createElement(g.a.Fragment,null,this.renderDefaultFilters(),this.renderExpandedFilters())},t}(g.a.PureComponent),fe=Object(i.connect)(function(e){var t=e.ui.organizationPortal,n=t.tagStars,r=t.projectFilter,o=t.projectsCount,i=t.organization;return{tagStars:n,projectFilter:r,projectOrder:t.projectOrder,projectsCount:o,organization:i}},function(e){return{actions:Object(s.bindActionCreators)(Nt.a,e)}})(me),ge=n("RQ44psah"),ve=n("aIk28nG9"),be=n.n(ve),ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cxPrefix="organization-portal-sidebar",t.getFollowingNodeRef=function(e){return t.followingNodeRef=e},t.handleDocumentDrag=function(e,n,r){t.followingNodeRef.dragStart(e,n,r)},t.handleDocumentDrop=function(e){var n=e.draggedNode,r=e.dropedNext,o=e.dropedParent,i=t.props.actions,s=n.parent&&n.parent.id,a=o&&o.id;i.moveProjectTag({id:n.id,_nextId:r?r.id:null,_parentId:s===a?void 0:a})},t.handleDocumentRelease=function(){t.followingNodeRef.dragEnd()},t.onClickTagNode=function(e){t.props.actions.changeProjectFilter({projectFilter:_.a.ProjectTag,cursor:e._id,ignoreSame:!0})},t.onToggleTagStar=function(e){var n=t.props,r=n.actions,o=n.tagStars,i=n._organizationId,s=e.id,a=e.isStar,c=e.path;if(a){var l=o.find(function(e){return"projecttag"===e.subjectType&&e.projecttag&&e.projecttag._id===s});l&&r.delTagStar({starId:l._id,nodeInfo:{id:s,path:c}})}else r.addTagStar({payload:{_organizationId:i,subjectType:"projecttag",_subjectId:s},nodeInfo:{id:s,path:c}}),d.gta.event({action:"collect project group",method:"click"})},t.onToggleExpandTagNode=function(e){var n=t.props,r=n.actions,o=n._organizationId,i=e.path,s=e.folded,a=e.id;e.hasChild&&(r.toggleNodeFolded({path:i,id:a,folded:!s,_organizationId:o}),d.gta.event({action:"expand project group",method:"click"}))},t.onClickCreateTagBtn=function(){d.gta.event({action:"add project group",method:"click",control:"right"})},t.onAddTagWithPlusBtn=function(e){var n=t.props,r=n.actions,i=n._organizationId;r.createProjectTag(o.a({},e,{_organizationId:i,successGtaOptions:{action:"added project group",method:"trace",control:"right"}}))},t.onAddTagWithBottomBtn=function(e){var n=t.props,r=n.actions,i=n._organizationId;r.createProjectTag(o.a({},e,{_organizationId:i,successGtaOptions:{action:"added project group",method:"trace",control:"bottom"}}))},t.onClickBottomCreateTagBtn=function(){d.gta.event({action:"add project group",method:"click",control:"bottom"})},t.handleOrganizationAccessDeniedClick=function(e){if(e.target instanceof HTMLAnchorElement){var t=window.open(ge.account.orgs,"_blank");t&&(t.opener=null)}},t}return o.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(){this.followingNodeRef&&this.followingNodeRef.dragEnd()},t.prototype.renderHierarchyTree=function(){var e=this.props.flattenDocumentNodes;return g.a.createElement(ce,{nodes:e,projectTagCountDict:this.props.projectTagCountDict,onDropDocument:this.handleDocumentDrop,onDragDocument:this.handleDocumentDrag,onReleaseDocument:this.handleDocumentRelease,onSelect:this.onClickTagNode,onToggleStar:this.onToggleTagStar,onToggleExpand:this.onToggleExpandTagNode})},t.prototype.renderTree=function(){var e=this.props,t=e.tagStars,n=e._organizationId;if(!T.OrganizationAccess.hasPermission(n,"projecttag.get.public"))return null;if(!t)return null;var r=g.a.createElement(v.IconButton,{className:"create-tag-btn",type:"subtle",color:"gray",name:"plus",onClick:this.onClickCreateTagBtn});return g.a.createElement("div",{className:"project-tree"},g.a.createElement("div",{className:"project-tree-head"},g.a.createElement("div",{className:"project-tree-title"},u.get("project.categories")),this.renderCreateTagMenu(r,"plusBtn")),this.renderHierarchyTree(),g.a.createElement(he,{ref:this.getFollowingNodeRef}))},t.prototype.renderCreateTagMenu=function(e,t){var n=this.props,o=n.projectTree,i=n.canCreateProjecTags,s=o.root.getSubNodes().map(function(e){return e.get("name")}),a="bottomBtn"===t?this.onAddTagWithBottomBtn:this.onAddTagWithPlusBtn;return i&&g.a.createElement(V,{nested:!0,placement:"bottom",initPage:r.Create,trigger:e,onAddSubTag:a,createViewTitle:u.get("project.hierarchy.create.tag"),existsTagNames:s})},t.prototype.renderOrganizationFilters=function(){var e=this.props,t=e._organizationId,n=e.onOpenProjectTransferModalClick;return g.a.createElement(fe,{_organizationId:t,onOpenProjectTransferModalClick:n})},t.prototype.renderOrganizationAccessDenied=function(){var e=this.props._organizationId,t=Object(T.getRoleScopeByOrgId)(e)===T.RoleScope.Guest,n=u.get("org.access.denied");return t?g.a.createElement("div",{className:be.a["organization-access-denied"],dangerouslySetInnerHTML:{__html:n},onClick:this.handleOrganizationAccessDeniedClick}):null},t.prototype.render=function(){var e=g.a.createElement(pe,{selected:!1,iconName:"plus",iconSize:14,className:"create-tag-sidebar-item",name:u.get("project.hierarchy.create.tag"),onClick:this.onClickBottomCreateTagBtn}),t=this.renderCreateTagMenu(e,"bottomBtn");return g.a.createElement("div",{className:m()(this.cxPrefix,"col-count-3")},this.renderOrganizationFilters(),this.renderTree(),t,this.renderOrganizationAccessDenied())},t}(g.a.PureComponent),ke=n("BG7MerIK"),_e=n("peh1clMB"),we=Object(_e.createSelector)(function(e){return e.projectTree},function(e){return e.cursor},function(e,t){return t&&e.getNode(t)||null}),Ce=Object(_e.createSelector)(function(e){return e.tagStars},function(e){return e.focusedStarId},P.i),Se=Object(_e.createSelector)(function(e){return e.projectTagCount},function(e){var t={};return e.forEach(function(e){t[e._id]=e}),t}),Ee=Object(_e.createSelector)(function(e){return e.projectTree},function(e){return e.cursor},function(e){return e.projectFilter},function(e,t,n){var r=n===ke.a.ProjectTag?t:null,i=e.toJS(function(e){return o.a({},e,{hasChild:e.hasChild||!!e.subNodes.length,isSelected:!!r&&e.id===r,depthIgnoreRoot:Math.max(e.depth-1,0)})});return Object(P.a)(i)}),Te=Object(i.connect)(function(e){var t=e.ui.organizationPortal;return{tagStars:t.tagStars,projectTree:t.projectTree,projectOrder:t.projectOrder,projectTagCountDict:Se(e.ui.organizationPortal)}},function(e){return{actions:Object(s.bindActionCreators)(Nt.a,e)}})(ye),Ie=n("mNUNGEpO"),Me=n("Hb0+frtR"),je=n("ZFupaTh7"),Pe="project-cluster-export",xe=function(e){function t(t){var n=e.call(this,t)||this;return n.onFetchPresetFields=function(){var e=n.props,t=e.actions,r=e.organizationId,o=e.viewId;t.getDefaultFields({organizationId:r,viewId:o,exportCacheId:n.cacheName})},n.onExports=function(e){var t=n.props,r=t.organizationId,o=t.viewId,i=t.actions,s=t.withChild;i.exportTable({organizationId:r,viewId:o,fieldKeys:e.map(Me.c),protalMode:n.props.protalMode,withChild:s})},n.onLoadMoreCustomFields=function(){n.props.actions.getMoreCustomFields()},n.onSearchCustomFields=function(e){var t=n.props,r=t.organizationId;t.actions.getCustomFields({q:e,_organizationId:r,pageSize:50})},n.onChangeSelectedFields=function(e){n.props.actions.setSelectedFields(e),Me.d.set(n.cacheName,e)},n.cacheName=Pe+":"+t.viewId,n}return o.d(t,e),t.prototype.componentWillUnmount=function(){this.props.actions.exitPagination()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.viewId!==this.props.viewId&&(this.cacheName=Pe+":"+e.viewId)},t.prototype.isCustomField=function(e){return!!e.type},t.prototype.id2IconName=function(e){var t=Me.a[e];return t?t.icon:"custom-text"},t.prototype.render=function(){var e=this.props,t=e.presetFields,n=e.customFields,r=e.hasMore,i=e.organizationId,s=e.actions,a=o.g(e,["presetFields","customFields","hasMore","organizationId","actions"]),c=o.a({},a,{presetFields:t,customFields:n,hasMore:r,limit:30,cacheName:this.cacheName,exports:this.onExports,onChangeSelectedFields:this.onChangeSelectedFields,onLoadMoreCustomFields:this.onLoadMoreCustomFields,searchCustomFields:this.onSearchCustomFields,fetchPresetFields:this.onFetchPresetFields,customFieldsShowed:!!i,initExport:s.initExport,isPresetFieldsLoading:!1,id2IconName:this.id2IconName});return f.createElement(je.ExportModal,o.a({},c))},t}(f.PureComponent),Ne=n("sa1Ed382");var Oe,Re,De=Object(i.connect)(function(e){return o.a({organizationId:(t=Ne.PREFERENCE.get("lastWorkspace")||"","personal"===t?"":t)},e.ui.projectClusterExport);var t},function(e){return{actions:Object(s.bindActionCreators)(Ie.a,e)}})(xe),Le=n("dWbDnvg6"),ze=n("KAS2OY82"),Ae=n("HBFx+Fuo"),Ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderAvatarMask=function(){return g.a.createElement("div",{className:"avatar-mask"},g.a.createElement(v.Icon,{name:"more",className:"mask-content"}))},t.renderMemberAvatar=function(e,t){var n=Object(ze.a)(e).avatar;return g.a.createElement("div",null,g.a.createElement(Le.d,{avatar:n,imgProps:{size:"small"},iconProps:{className:"icon-avatar",circleSize:24}}),t)},t}return o.d(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.members,r=t.onClick,o=n.filter(function(e){return!!Object(ze.a)(e)}),i=[],s=null;if(o.length<=4)i=o.slice(0,4);else{i=o.slice(0,3);var a=this.renderAvatarMask();s=this.renderMemberAvatar(o[3],a)}var c=i.map(function(t){return g.a.createElement("div",{className:"avatar-wrap",key:t._id},e.renderMemberAvatar(t))}),l=s&&g.a.createElement("div",{className:"avatar-wrap"},s),u=m()(Ae["avatar-list"],this.props.className);return g.a.createElement("div",{className:u,onClick:r},c,l)},t}(g.a.PureComponent),Fe=n("2KPNj85v"),Be=n("gNFMJi3i"),Ue=n("96mTauR+");!function(e){e.Visible="visible",e.Operable="operable"}(Re||(Re={}));var $e=((Oe={})[w.c.PutMember]={category:"manage member"},Oe[w.c.Put]={category:"manage group"},Oe[w.c.PostProject]={category:"manage project"},Oe[w.c.JoinProject]={category:"join project"},Oe[w.c.AccessProject]={category:"have project role"},Oe[w.c.GetProjectPrivacy]={category:"view protected info"},Oe),He=function(e){function t(t){var n=e.call(this,t)||this;n.onSelectAccess=function(e){var t=n.props,r=t.member,i=t.onChange;n.setState({access:e.data}),e.data===Re.Visible&&i(o.a({},r,{joinProjectRole:"default",permissions:[]})),d.gta.event({method:"click",action:"switch advanced permissions",control:"PG Permission Panel",category:e.data===Re.Visible?"basic":"advanced"})},n.onClickQuickAdd=function(){var e=n.props,t=e.member,r=e.onAddMembers,o=e.onHide;r([{subjectType:w.b.organizationMember,_subjectId:t._memberId}],!0),o&&o()},n.onChange=function(e){return function(t){var r=n.props,i=r.member,s=r.onChange,a=i.permissions,c=t?a.concat([e]):a.filter(function(t){return t!==e}),l=i._projectRoleId;e===w.c.AccessProject&&(l=t?l||n.getDefaultRoleOption().data:null),s(o.a({},i,{permissions:c,_projectRoleId:l}));var u=t?"on":"off";d.gta.event(o.a({method:"click",action:"toggle "+u+" project group permission",control:"PG Permission Panel"},$e[e]))}},n.onClickMember=function(){var e=n.props,t=e.member,r=e.onClickMember;t.memberSource||r&&r(n.props.member)},n.onSelectProjectRole=function(e){var t=n.props,r=t.member,i=t.projectRoles,s=t.onChange,a=e.data;s(o.a({},r,{_projectRoleId:a}));var l=c.a.findWhere(i,{_id:a});if(l){var u=n.getGtaCategoryOfRole(l),p="custom"===u?{note1:l._id}:{};d.gta.event(o.a({method:"click",action:"give project role",control:"PG Permission Panel",category:u},p))}},n.onSelectJoinRole=function(e){var t=n.props,r=t.member;(0,t.onChange)(o.a({},r,{joinProjectRole:e.data})),d.gta.event({method:"click",action:"change join project role",control:"PG Permission Panel",category:e.data})},n.renderSectionItem=function(e,t){return g.a.createElement("li",{className:"operable-content-section-item flex flex-vcenter",key:t},e)},n.removeMember=function(){var e=n.props,t=e.onRemoveMember,r=e.member;d.gta.event({method:"click",action:"remove project group permission"}),t(r,n.isMyself())},n.removeMemberRemainUsers=function(){var e=n.props,t=e.onRemoveMember,r=e.member;d.gta.event({method:"click",action:"remove project group permission"}),t(r,n.isMyself(),!0)},n.onOpenAccessDropdown=function(){var e=n.props.disabled;d.gta.event({method:"click",action:"view project group permission",control:"PG Member List",category:e?"readonly":"writable"})};var r=t.member;return n.state={access:n.getAccess(r)},n}return o.d(t,e),t.prototype.getAccess=function(e){var t=e.permissions,n=e.joinProjectRole;return 0===t.length&&"default"===n?Re.Visible:Re.Operable},Object.defineProperty(t.prototype,"accessOptions",{get:function(){return[{label:u.get("portal.tag.member.visible"),data:Re.Visible},{label:u.get("portal.tag.member.operable"),data:Re.Operable}]},enumerable:!0,configurable:!0}),t.prototype.renderAvatar=function(){var e=this.props.item.avatar;return g.a.createElement(Le.d,{avatar:e,className:"tag-member-avatar"})},t.prototype.renderMembersCountHint=function(){var e=this.props.item;if("team"===e.type&&!(e.membersCount<1e4))return g.a.createElement(v.Tooltip,{title:u.get("portal.tag.member.member.count.out.limit")},g.a.createElement(v.Icon,{name:"circle-info-o"}))},t.prototype.renderAccessSelect=function(){var e=this.props.disabled,t=this.state.access,n=this.accessOptions.map(function(e){var t=e.data,n=e.label;return g.a.createElement(v.Option,{value:e,key:t},n)}),r=c.a.findWhere(this.accessOptions,{data:t});return g.a.createElement(v.Select,{onSelect:this.onSelectAccess,defaultValue:r,nested:!0,disabled:e},n)},t.prototype.getGtaCategoryOfRole=function(e){var t,n=e.level,r=e.isDefault,o=((t={})[T.RoleScope.Member]="member",t[T.RoleScope.Admin]="admin",t[T.RoleScope.Owner]="owner",t);return r&&o[n]||"custom"},t.prototype.getDefaultRoleOption=function(){var e=this.props.projectRoles,t=c.a.findWhere(e,{isDefault:!0,level:0});return{label:t.name,data:t._id}},t.prototype.renderOwnProjectRoleSelect=function(){var e=this.props,t=e.member,n=e.disabled,r=e.projectRoles.map(function(e){return{label:e.name,data:e._id}}),o=r.map(function(e){var t=e.data,n=e.label;return g.a.createElement(v.Option,{value:e,key:t},n)}),i=c.a.findWhere(r,{data:t._projectRoleId}),s=P.g(t.permissions,[w.c.AccessProject]);return g.a.createElement(v.Select,{className:"role-select",onSelect:this.onSelectProjectRole,nested:!0,defaultValue:i||this.getDefaultRoleOption(),disabled:n||!s},o)},Object.defineProperty(t.prototype,"joinProjectRoleOptions",{get:function(){return[{label:u.get("portal.tag.member.permission.role.default"),data:"default"},{label:u.get("portal.tag.member.permission.role.owner"),data:"owner"}]},enumerable:!0,configurable:!0}),t.prototype.renderJoinProjectRoleSelect=function(){var e=this.props,t=e.member,n=e.disabled,r=this.joinProjectRoleOptions.map(function(e){var t=e.data,n=e.label;return g.a.createElement(v.Option,{value:e,key:t},n)}),o=c.a.findWhere(this.joinProjectRoleOptions,{data:t.joinProjectRole}),i=P.g(t.permissions,[w.c.JoinProject]);return g.a.createElement(v.Select,{className:"role-select",onSelect:this.onSelectJoinRole,nested:!0,defaultValue:o,disabled:n||!i},r)},Object.defineProperty(t.prototype,"tagRelatedPermissionsConfig",{get:function(){var e;return(e={})[w.c.PutMember]={name:u.get("portal.tag.member.permission.put.member")},e[w.c.Create]={name:u.get("portal.tag.member.permission.create")},e[w.c.Put]={name:u.get("portal.tag.member.permission.put")},e[w.c.Move]={name:u.get("portal.tag.member.permission.move")},e[w.c.Del]={name:u.get("portal.tag.member.permission.del")},e[w.c.PostProject]={name:u.get("portal.tag.member.permission.post.project")},e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"projectRelatedPermissionsConfig",{get:function(){var e;return(e={})[w.c.GetProjectPrivacy]={name:u.get("portal.tag.member.permission.get.project.privacy")},e[w.c.AccessProject]={name:u.get("portal.tag.member.permission.access.project")},e[w.c.JoinProject]={name:u.get("portal.tag.member.permission.join.project")},e},enumerable:!0,configurable:!0}),t.prototype.checkTagRelatedPermissions=function(){var e=this;return c.a.some(this.props.member.permissions,function(t){return e.tagRelatedPermissionsConfig[t]})},t.prototype.checkProjectRelatedPermissions=function(){var e=this;return c.a.some(this.props.member.permissions,function(t){return e.projectRelatedPermissionsConfig[t]})},t.prototype.renderTagRelatedPermissionLabels=function(){var e=this;return this.props.member.permissions.map(function(t){return e.tagRelatedPermissionsConfig[t]?e.renderSectionItem(g.a.createElement("span",null,e.tagRelatedPermissionsConfig[t].name),t):null})},t.prototype.renderProjectRelatedPermissionLabels=function(){var e=this,t=this.props.member;return t.permissions.map(function(n){if(!e.projectRelatedPermissionsConfig[n])return null;switch(n){case w.c.AccessProject:var r=t.projectRole?t.projectRole.name:e.getDefaultRoleOption().label;return e.renderSectionItem(g.a.createElement(g.a.Fragment,null,u.get("portal.tag.member.permission.access.project.desc.1"),g.a.createElement("strong",null,r),u.get("portal.tag.member.permission.access.project.desc.2")),w.c.AccessProject);case w.c.JoinProject:var o="default"===t.joinProjectRole?u.get("portal.tag.member.permission.role.default.label"):u.get("portal.tag.member.permission.role.owner.label");return e.renderSectionItem(g.a.createElement(g.a.Fragment,null,u.get("portal.tag.member.permission.join.project.desc.1"),g.a.createElement("strong",null,o),u.get("portal.tag.member.permission.join.project.desc.2")),w.c.JoinProject);case w.c.GetProjectPrivacy:return e.renderSectionItem(g.a.createElement(g.a.Fragment,null,e.projectRelatedPermissionsConfig[n].name),w.c.GetProjectPrivacy);default:return null}})},t.prototype.renderSearchedTips=function(){var e=this.props,t=e.member,n=e.hasPermission;if(t.memberSource&&t.memberSource!==w.a.Inner){var r=n?g.a.createElement("span",{className:"quick-add-link",onClick:this.onClickQuickAdd},u.get("portal.tag.member.search.result.quick.add")):g.a.createElement("span",null,u.get("portal.tag.member.search.result.quick.add"));return g.a.createElement(g.a.Fragment,null,g.a.createElement("hr",null),g.a.createElement("div",{className:"search-result-tips"},g.a.createElement("span",null,u.get("portal.tag.member.search.result.quick.add.desc")),r))}},t.prototype.renderDisabledInfos=function(){var e=this.checkTagRelatedPermissions()&&g.a.createElement("div",{className:"operable-content-section"},g.a.createElement("div",{className:"operable-content-section-label"},u.get("portal.tag.member.access.tag.related")),g.a.createElement("ul",null,this.renderTagRelatedPermissionLabels())),t=this.checkProjectRelatedPermissions()&&g.a.createElement("div",{className:"operable-content-section"},g.a.createElement("div",{className:"operable-content-section-label"},u.get("portal.tag.member.access.project.related")),g.a.createElement("ul",null,this.renderProjectRelatedPermissionLabels()));return g.a.createElement("div",{className:"operable-content"},e,t,this.renderSearchedTips())},t.prototype.renderOperableBtns=function(){if(this.props.disabled)return this.renderDisabledInfos();var e=g.a.createElement(v.PopupMenuLink,{goto:3,className:"tag-related-btn-wrap"},g.a.createElement("div",{className:"tag-related-btn"},g.a.createElement("span",{className:"tag-related-label"},u.get("portal.tag.member.access.tag.related")),g.a.createElement(v.Icon,{name:"chevron-right",size:12}))),t=g.a.createElement(v.PopupMenuLink,{goto:4,className:"project-related-btn-wrap"},g.a.createElement("div",{className:"project-related-btn"},g.a.createElement("span",{className:"tag-related-label"},u.get("portal.tag.member.access.project.related")),g.a.createElement(v.Icon,{name:"chevron-right",size:12})));return g.a.createElement("div",{className:"operable-content"},g.a.createElement("div",{className:"permission-change-tips"},u.get("portal.tag.member.permission.change.tips")),g.a.createElement("div",{className:"gap-line"}),e,t)},t.prototype.renderTagRelatedContent=function(){var e=this,t=this.props,n=t.member,r=t.disabled,o=c.a.mapObject(this.tagRelatedPermissionsConfig,function(t,o){var i=t.name;return g.a.createElement("div",{className:"permission-option",key:o},g.a.createElement(v.Checkbox,{size:"small",className:"permission-checkbox",checked:P.f(n.permissions,o),disabled:r,onChange:e.onChange(o)}),g.a.createElement("div",{className:"permission-desc"},i))}),i=[w.c.PutMember,w.c.Create,w.c.Put,w.c.Move,w.c.Del,w.c.PostProject].map(function(e){return o[e]});return g.a.createElement("div",{className:"operable-content"},g.a.createElement("div",{className:"content-group"},i))},t.prototype.renderProjectRelatedContent=function(){var e=this,t=this.props,n=t.member,r=t.disabled,o=c.a.mapObject(this.projectRelatedPermissionsConfig,function(t,o){var i=t.name;return g.a.createElement("div",{className:"permission-option",key:o},g.a.createElement(v.Checkbox,{size:"small",className:"permission-checkbox",checked:P.f(n.permissions,o),disabled:r,onChange:e.onChange(o)}),g.a.createElement("div",{className:"permission-desc"},i))}),i=[w.c.GetProjectPrivacy,w.c.AccessProject].map(function(e){return o[e]}),s=[w.c.JoinProject].map(function(e){return o[e]});return g.a.createElement("div",{className:"operable-content"},g.a.createElement("div",{className:"content-group"},i,this.renderOwnProjectRoleSelect(),s,this.renderJoinProjectRoleSelect()))},t.prototype.isMyself=function(){var e=this.props.member;return P.h(e)&&"organizationMember"===e.subjectType},t.prototype.renderRemove=function(){var e=this.props,t=e.member,n=e.disabled,r=this.isMyself();return"organizationTeam"===t.subjectType?!n&&g.a.createElement(g.a.Fragment,null,g.a.createElement(v.PopupMenuLink,{goto:1,className:"remove-member-btn-wrap"},g.a.createElement("div",{className:"remove-member-btn"},u.get("portal.tag.remove.team.remove.members"))),g.a.createElement(v.PopupMenuLink,{goto:2,className:"remove-member-btn-wrap"},g.a.createElement("div",{className:"remove-member-btn"},u.get("portal.tag.remove.team.remain.members")))):"organizationGroup"===t.subjectType?!n&&g.a.createElement(g.a.Fragment,null,g.a.createElement(v.PopupMenuLink,{goto:1,className:"remove-member-btn-wrap"},g.a.createElement("div",{className:"remove-member-btn"},u.get("portal.tag.remove.group.remove.members"))),g.a.createElement(v.PopupMenuLink,{goto:2,className:"remove-member-btn-wrap"},g.a.createElement("div",{className:"remove-member-btn"},u.get("portal.tag.remove.group.remain.members")))):(!n||r)&&g.a.createElement(v.PopupMenuLink,{goto:1,className:"remove-member-btn-wrap"},g.a.createElement("div",{className:"remove-member-btn"},r?u.get("portal.tag.member.exit"):u.get("remove")))},t.prototype.renderAccessDropdown=function(){var e=this.state.access,t=c.a.findWhere(this.accessOptions,{data:e}),n=this.isMyself();if(!t)return null;var r=g.a.createElement(v.TextButton,{className:"access-trigger",onClick:this.onOpenAccessDropdown},t.label,g.a.createElement(v.Icon,{name:"chevron-down"})),o=e===Re.Visible?g.a.createElement("div",{className:"access-visible-tips"},u.get("portal.tag.member.visible.tips")):this.renderOperableBtns(),i=n?{removeText:u.get("portal.tag.member.exit"),removeTips:u.get("portal.tag.member.exit.tips"),removeConfirm:u.get("portal.tag.member.exit.confirm")}:{removeText:u.get("remove"),removeTips:u.get("portal.tag.member.remove.tips"),removeConfirm:u.get("portal.tag.member.remove.confirm")},s=this.renderRemove(),a=s&&g.a.createElement("div",{className:"gap-line"});return g.a.createElement(v.PopupMenu,{main:0,trigger:r,nested:!0,className:Ue["member-permission-menu"]},g.a.createElement(v.PopupMenuView,{index:0,className:"permission-config-view",title:u.get("portal.tag.member.access.title")},this.renderAccessSelect(),o,a,s),g.a.createElement(v.PopupMenuView,{index:1,className:"remove-member-view",title:i.removeText},g.a.createElement("div",{className:"remove-member-tips"},i.removeTips),g.a.createElement(v.Button,{type:"primary",className:"remove-member-btn-confirm",danger:!0,onClick:this.removeMember},i.removeConfirm)),g.a.createElement(v.PopupMenuView,{index:2,className:"remove-member-view",title:i.removeText},g.a.createElement("div",{className:"remove-member-tips"},i.removeTips),g.a.createElement(v.Button,{type:"primary",className:"remove-member-btn-confirm",danger:!0,onClick:this.removeMemberRemainUsers},i.removeConfirm)),g.a.createElement(v.PopupMenuView,{index:3,className:"remove-member-view",title:u.get("portal.tag.member.access.tag.related")},this.renderTagRelatedContent()),g.a.createElement(v.PopupMenuView,{index:4,className:"remove-member-view",title:u.get("portal.tag.member.access.project.related")},this.renderProjectRelatedContent()))},t.prototype.render=function(){var e=this.props,t=e.item,n=e.descShowed,r=e.className,o=e.disabled,i=e.member,s=t.name,a=t.desc,c=t.secondLineDesc,l=i.subjectType,u=m()(Ue["member-permission-item"],r,{disabled:o}),p=m()("item-content",{"item-content-clickable":"organizationGroup"===l||"organizationTeam"===l}),d=a&&n?g.a.createElement("div",{className:"item-desc"},a):null,h=c&&n?g.a.createElement("div",{className:"item-other-desc"},c):null;return g.a.createElement("li",{className:u},this.renderAvatar(),g.a.createElement("div",{className:p,onClick:this.onClickMember},g.a.createElement("div",{className:"item-name"},s,this.renderMembersCountHint()),d,h),this.renderAccessDropdown())},t.defaultProps={className:""},t}(g.a.PureComponent),Ge=n("uKLCz5zR"),qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickAddMember=function(){var e=t.props,n=e.item,r=e.parentType,o=e.parentId;t.props.onAddMembers([{subjectType:w.b.organizationMember,_subjectId:n.id,fromSubjectType:r,_fromSubjectId:o}])},t}return o.d(t,e),t.prototype.renderAvatar=function(){var e=this.props.item.avatar;return g.a.createElement(Le.d,{avatar:e,className:Ge["item-avatar"]})},t.prototype.renderName=function(){var e=this.props.item.name;return g.a.createElement("div",{className:Ge["item-name"]},e)},t.prototype.renderAddHandler=function(){return!this.props.isOwnMember&&g.a.createElement(v.Tooltip,{title:u.get("portal.members.add.projecttag.member"),placement:"left"},g.a.createElement(v.IconButton,{name:"plus",color:"gray",onClick:this.onClickAddMember}))},t.prototype.render=function(){return g.a.createElement("li",{className:Ge["organization-member-item"]},this.renderAvatar(),this.renderName(),this.renderAddHandler())},t}(g.a.PureComponent),We=n("1KRxJB1w"),Je=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickItem=function(){t.props.onClick(t.props.item)},t}return o.d(t,e),t.prototype.renderName=function(){var e=this.props.item.name;return g.a.createElement("div",{className:We["item-name"],onClick:this.onClickItem},e)},t.prototype.renderAvatar=function(){var e=this.props.item.avatar;return g.a.createElement(Le.d,{avatar:e})},t.prototype.render=function(){return g.a.createElement("li",{className:We["organization-subteam-item"]},this.renderAvatar(),this.renderName())},t}(g.a.PureComponent),Xe=n("rBqbN9/w"),Ye=n("DOZCBSCZ"),Ke=n("u/LJYZ+h"),Qe=n.n(Ke),Ze=n("96mTauR+"),et=n("1Ms/DjSE"),tt={opened:!1,isInheritedPage:!1,hierarchy:[],hierarchyMembers:null,hierarchySubTeams:null,isInSearchMode:!1},nt=function(e){function t(t){var n=e.call(this,t)||this;return n.searchInputRef=g.a.createRef(),n.stopPropagation=function(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},n.onVisibleChange=function(e){n.setState({opened:e})},n.onClickInviteMemberBtn=function(){n.props.onOpenInviteModal(),n.onVisibleChange(!1),d.gta.event({method:"click",action:"add project group member",control:"PG Member List"})},n.onClickInheritedMembersGroup=function(){n.setState({isInheritedPage:!0})},n.onClickBack=function(){n.setState({isInheritedPage:!1})},n.onClickBackHierarchy=function(){var e=n.state.hierarchy;n.setState({hierarchy:e.slice(0,e.length-1),hierarchyMembers:null})},n.onClickSubTeam=function(e){var t=n.state.hierarchy.concat({data:e.id,type:"team"});n.setState({hierarchy:t})},n.onClickMember=function(e){var t=e.subjectType;if("organizationTeam"===t){var r=n.state.hierarchy.concat({data:e._subjectId,type:"team"});n.setState({hierarchy:r})}else{if("organizationGroup"!==t)return;r=n.state.hierarchy.concat({data:e._subjectId,type:"group"});n.setState({hierarchy:r})}},n.onDropdownHide=function(){n.setState(tt),n.props.setIsSearching(!1)},n.onClickSearch=function(){n.setState({isInSearchMode:!0},function(){n.searchInputRef.current&&n.searchInputRef.current.focus()})},n.onSearchInputChange=function(e){n.props.onSearchInnerMembers(e.target.value)},n.isInheritedMember=function(e){return e.projecttag._id!==n.props.cursor},n.renderMemberPermissionItems=function(e){var t=n.props,r=t.cursor,i=t.hasPermission,s=t.onAddMembers,c=t.onChange,l=t.onRemoveMember,u=t.projectRoles,p=a.groupBy(e,"subjectType"),d=p.organizationTeam,h=void 0===d?[]:d,m=p.organizationGroup,f=void 0===m?[]:m,v=p.teamLeader,b=void 0===v?[]:v,y=p.organizationMember,k=void 0===y?[]:y,_=p.organizationRole,w=void 0===_?[]:_;return h.concat(f,b,w,k).map(function(e){var t=Object(ze.a)(e,r);if(!t)return null;var a=r!==e.projecttag._id,p={descShowed:!0,item:t,member:e,projectRoles:u,disabled:!i||a,hasPermission:i,onAddMembers:s,onChange:c,onRemoveMember:l,onClickMember:n.onClickMember};return g.a.createElement(He,o.a({key:e._id},p))}).filter(function(e){return!!e})},n.renderSubTeamItems=function(e){if(e)return e.map(function(e){return g.a.createElement(Je,{item:e,onClick:n.onClickSubTeam,key:e.id})})},n.renderOrganizationMemberItems=function(e){if(!e)return g.a.createElement(Ye.a,null);var t=n.props.members.filter(function(e){return!n.isInheritedMember(e)&&e.user}).map(function(e){return e._subjectId});return e.map(function(e){var r=a.contains(t,e.id);return g.a.createElement(qe,{item:e,isOwnMember:r,parentType:a.last(n.state.hierarchy).type,parentId:a.first(n.state.hierarchy).data,key:e.id,onAddMembers:n.props.onAddMembers})})},n.state=tt,n}return o.d(t,e),t.prototype.componentDidUpdate=function(e,t){var n=this;if(this.state.hierarchy.length!==t.hierarchy.length){var r=a.last(this.state.hierarchy);if(this.hierarchySub$&&this.hierarchySub$.unsubscribe(),r)switch(r.type){case"team":var i=b.default.fetch.get("v3/teams/"+r.data+"/members",{isDirect:!0}),s=b.default.fetch.get("teams/"+r.data+"/subTeams");this.hierarchySub$=ie.Observable.forkJoin(i,s).subscribe(function(e){var t=o.f(e,2),r=t[0],i=t[1];n.setState({hierarchyMembers:r.result,hierarchySubTeams:i.result})});break;case"group":this.hierarchySub$=b.default.fetch.get("v3/groups/"+r.data+"/members").subscribe(function(e){n.setState({hierarchyMembers:e.result})});break;default:return}}},t.prototype.componentWillUnmount=function(){this.hierarchySub$&&this.hierarchySub$.unsubscribe()},Object.defineProperty(t.prototype,"memberSourceDesc",{get:function(){var e;return(e={}).fromGroup=u.get("portal.tag.member.search.from.group"),e.fromTeam=u.get("portal.tag.member.search.from.team"),e.inherit=u.get("portal.tag.member.search.from.inherit"),e.inner="",e},enumerable:!0,configurable:!0}),t.prototype.renderPlainMembers=function(){var e=this.props.members;return this.renderMemberPermissionItems(e)},t.prototype.renderSearchedMembers=function(){var e=this,t=this.props,n=t.hasPermission,r=t.onAddMembers,i=t.searchedMembers,s=t.onChange,c=t.onRemoveMember,l=t.projectRoles,p=t.isSearching;return p&&null===i?g.a.createElement(Ye.a,null):a.isEmpty(i)&&p&&null!==i?g.a.createElement("div",{className:"no-result-placeholder"},g.a.createElement("img",{src:Qe.a,width:"72"}),g.a.createElement("span",{className:"placeholder-text"},u.get("portal.tag.member.search.no.result"))):null!==i?i.map(function(t){var i={descShowed:!0,item:Object(Xe.tagMemberAsInvolver)(t.user,t._id,e.memberSourceDesc[t.memberSource]),member:t,projectRoles:l,disabled:!n||"inner"!==t.memberSource,hasPermission:n,onAddMembers:r,onChange:s,onRemoveMember:c,onClickMember:e.onClickMember,onHide:e.onDropdownHide};return g.a.createElement(He,o.a({key:t.user._id+"-"+t.memberSource},i))}):void 0},t.prototype.renderMembersWithInheritedGroup=function(){var e=this,t=this.props.members,n={type:0,name:"org-users",color:v.colors.$G80},r=g.a.createElement("div",{className:"permission-dropdown-content-inherited flex flex-vcenter flex-between",onClick:this.onClickInheritedMembersGroup},g.a.createElement("span",{className:"flex flex-vcenter"},g.a.createElement(Le.d,{avatar:n,className:"tag-member-avatar"}),g.a.createElement("span",{className:"inherited-label"},u.get("portal.inherited.members.group"))),g.a.createElement(v.IconButton,{name:"arrow-right-s",color:"gray"})),o=t.filter(function(t){return!e.isInheritedMember(t)}),i=this.renderMemberPermissionItems(o);return g.a.createElement(g.a.Fragment,null,r,g.a.createElement("hr",{className:"permission-dropdown-content-separator"}),i)},t.prototype.renderInheritedPage=function(){var e=this,t=this.props.members.filter(function(t){return e.isInheritedMember(t)});return g.a.createElement("div",{className:"permission-dropdown-body"},g.a.createElement("div",{className:"permission-dropdown-header"},g.a.createElement(v.TextButton,{onClick:this.onClickBack},g.a.createElement(v.Icon,{name:"arrow-left-s"}),u.get("back"))),g.a.createElement("div",{className:"permission-dropdown-content"},this.renderMemberPermissionItems(t)))},t.prototype.renderMainPage=function(){var e=this,t=this.props,n=t.members,r=t.hasPermission,o=0===n.length&&g.a.createElement("div",{className:"dropdown-placeholder"},g.a.createElement("img",{src:et,alt:"content-placeholder",className:"placeholder-img"}),g.a.createElement("div",{className:"placeholder-desc"},u.get("portal.tag.member.placeholder.desc"))),i=g.a.createElement(v.IconButton,{name:"search",color:"gray",onClick:this.onClickSearch}),s=g.a.createElement(v.IconButton,{name:"plus",color:"gray",className:"dropdown-invite-member-btn",disabled:!r,onClick:this.onClickInviteMemberBtn}),a=g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"dropdown-title"},u.get("portal.project.tag.member")),i),c=g.a.createElement("div",{className:"dropdown-search-wrap"},g.a.createElement(v.Icon,{name:"search"}),g.a.createElement("input",{placeholder:u.get("portal.project.tag.member.search"),ref:this.searchInputRef,onChange:this.onSearchInputChange})),l=n.filter(function(t){return e.isInheritedMember(t)}),p=l.length===n.length||0===l.length?this.renderPlainMembers():this.renderMembersWithInheritedGroup(),d=this.renderSearchedMembers(),h=this.props.isSearching?d:p;return g.a.createElement("div",{className:"permission-dropdown-body"},g.a.createElement("div",{className:"permission-dropdown-header"},this.state.isInSearchMode?c:a,s),g.a.createElement("div",{className:"permission-dropdown-content"},o,h))},t.prototype.renderHierarchyPage=function(){var e=this.state,t=e.hierarchy,n=e.hierarchyMembers,r=e.hierarchySubTeams,o=a.last(t).type,i="group"===o?u.get("portal.organization.group.members.tips"):u.get("portal.organization.team.members.tips"),s=n?n.map(Xe.userAsInvolver):null,c="team"===o&&r?r.map(Xe.subTeamAsInvolver):null;return g.a.createElement("div",{className:"permission-dropdown-body"},g.a.createElement("div",{className:"permission-dropdown-header"},g.a.createElement(v.TextButton,{onClick:this.onClickBackHierarchy},g.a.createElement(v.Icon,{name:"arrow-left-s"}),u.get("back"))),g.a.createElement("div",{className:"permission-dropdown-content"},this.renderSubTeamItems(c),this.renderOrganizationMemberItems(s)),g.a.createElement("div",{className:"permission-dropdown-footer"},i))},t.prototype.renderDropdownBody=function(){return a.isEmpty(this.state.hierarchy)?this.state.isInheritedPage?this.renderInheritedPage():this.renderMainPage():this.renderHierarchyPage()},t.prototype.render=function(){var e=this.props,t=e.children,n=(e.members,e.onChange,e.onRemoveMember,o.g(e,["children","members","onChange","onRemoveMember"])),r=this.state.opened,i=m()(Ze["member-permission-dropdown"]);return g.a.createElement(v.Dropdown,o.a({className:i,placement:"bottom",content:this.renderDropdownBody(),persistence:!0,nested:!0,onVisibleChange:this.onVisibleChange,onHide:this.onDropdownHide,opened:r},n),t)},t}(g.a.PureComponent),rt=n("xBT6LeRu"),ot=n("a4lfCy7a"),it=n("H5WCQzW3"),st=["organizationMember","teamLeader","organizationRole"],at=["organizationGroup","organizationTeam"],ct=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasVisitedGuide:Object(I.hasVisitedProjecttagUserGuide)()},t.inviteeMap=new WeakMap,t.getSelectedIds=function(e){var n=t.props.cursor;return e.map(function(e){return t.inviteeMap.get(e)}).filter(function(e){return st.indexOf(e.subjectType)>=0&&e.projecttag._id===n}).filter(function(e){return e.user||e.role}).map(function(e){switch(e.subjectType){case"teamLeader":return e.team._id;case"organizationRole":return e.role._id;default:return e.user._id}})},t.getSyncedIds=function(e){var n=t.props.cursor;return e.map(function(e){return t.inviteeMap.get(e)}).filter(function(e){return at.indexOf(e.subjectType)>=0&&e.projecttag._id===n}).map(function(e){return e._subjectId})},t.onClickUserGuide=function(){window.open("https://teambition.kf5.com/hc/kb/article/1303363/")},t.onMarkVisitedUserGuide=function(){Object(I.markVisitedProjecttagUserGuide)(),t.setState({hasVisitedGuide:!0})},t}return o.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.tagMembers&&this.tagMemberToInvitees(e.tagMembers)},t.prototype.tagMemberToInvitee=function(e){switch(e.subjectType){case w.b.organizationMember:return e.user?{_id:e._id,_subjectId:e._memberId,subjectType:e.subjectType,user:e.user}:null;case w.b.teamLeader:return e.team&&e.user?{_id:e._id,_subjectId:e.team._id,subjectType:e.subjectType,user:e.user,team:e.team}:null;case w.b.organizationRole:return e.role?{_id:e._id,_subjectId:e.role._id,subjectType:e.subjectType,role:e.role}:null;case w.b.organizationTeam:return e.organizationTeam?{_id:e._id,_subjectId:e.organizationTeam._id,subjectType:e.subjectType,organizationTeam:e.organizationTeam}:null;case w.b.organizationGroup:return e.organizationGroup?{_id:e._id,_subjectId:e.organizationGroup._id,subjectType:e.subjectType,organizationGroup:e.organizationGroup}:null}},t.prototype.tagMemberToInvitees=function(e){var t=this;return c.a.compact(e.map(function(e){var n=t.tagMemberToInvitee(e);return n&&t.inviteeMap.set(n,e),n}))},t.prototype.getService=function(){var e=this.props.cursor;return o.a({},ot.a,{searchMembers:function(t,n){return ot.a.searchMembers(e,t,n)},recommendMembers:function(t){return ot.a.recommendMembers(e,t)}})},t.prototype.renderHint=function(){return this.state.hasVisitedGuide?void 0:g.a.createElement("div",{className:it["guide-hint"]},g.a.createElement("div",{className:"flex flex-vcenter"},g.a.createElement(v.Icon,{name:"circle-info"}),g.a.createElement("span",null,p.a.get("portal.tab.member.invite.guide.title"))),g.a.createElement("div",{className:"flex flex-vcenter"},g.a.createElement(v.TextButton,{color:"blue",onClick:this.onClickUserGuide},p.a.get("portal.tab.member.invite.guide.doc")),g.a.createElement(v.IconButton,{name:"remove",onClick:this.onMarkVisitedUserGuide})))},t.prototype.render=function(){var e=this.props,t=e.tagMembers,n=o.g(e,["tagMembers"]),r=this.tagMemberToInvitees(t);return g.a.createElement(rt.InviteModal,o.a({invitees:r,getSelectedIds:this.getSelectedIds,getSyncedIds:this.getSyncedIds,service:this.getService(),modalTitle:p.a.get("portal.tab.member.invite.title"),hint:this.renderHint()},n))},t}(g.a.PureComponent),lt=n("H72dUcNY"),ut=n("btZiwEgG"),pt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modalBodyStyle={padding:0},t.onConfirm=function(e){t.props.onImportProjects(e)},t}return o.d(t,e),t.prototype.renderSelector=function(){return this.props.opened&&g.a.createElement(lt.ProjectMultipleSelector,{classNames:ut["multi-selector"],_organizationId:this.props.organizationId,hideIndieEntry:!0,excludes:this.props.excludedProjectIds,permission:"project.put.info",customHeight:552,onConfirm:this.onConfirm,placeholderText:p.a.get("project.tag.import.project.search.not.found")})},t.prototype.render=function(){return g.a.createElement(v.Modal,{opened:this.props.opened,onVisibleChange:this.props.onVisibleChange,title:p.a.get("projecttag.import.projects.modal.title"),titleCls:ut["import-projects-title"],bodyStyle:this.modalBodyStyle},this.renderSelector())},t}(g.a.PureComponent),dt=n("sa1Ed382"),ht=n("2qRnoGmE"),mt=n("3Q/xbIvW"),ft=n("EGpl4vXb"),gt=function(e){var t=e.lang,r=o.f(Object(f.useState)(null),2),i=r[0],s=r[1];return Object(f.useEffect)(function(){return t.indexOf("zh")>-1?n.e(51).then(n.t.bind(null,"wlhhFI/H",7)).then(function(e){s(e.default())}):n.e(50).then(n.t.bind(null,"xKEvG6fP",7)).then(function(e){s(e.default())}),function(){}},[]),i?g.a.createElement("div",{className:"policy-content",dangerouslySetInnerHTML:{__html:i}}):g.a.createElement(v.Loading,null)},vt=function(e){function t(t){var n=e.call(this,t)||this;return n.onPolicyModalVisibleChange=function(e){n.setState({policyModalOpened:e})},n.onConfirmDisagreeModalVisibleChange=function(e){n.setState({confirmDisagreeModalOpened:e})},n.onAgreePolicy=function(){dt.PREFERENCE.togglePrivacyPolicyAccepted(!0)&&n.onPolicyModalVisibleChange(!1)},n.onDisagreePolicy=function(){n.onConfirmDisagreeModalVisibleChange(!0)},n.onCloseConfirmModal=function(){n.onConfirmDisagreeModalVisibleChange(!1)},n.onLogoutForGDPR=function(){window.location.href=ht.ACCOUNT_HOST+"/logout?next_url=/logout-for-gdpr"},n.state={policyModalOpened:!1,confirmDisagreeModalOpened:!1},n}return o.d(t,e),t.prototype.componentDidMount=function(){!1===dt.PREFERENCE.get("acceptPrivacyPolicy")&&this.onPolicyModalVisibleChange(!0)},t.prototype.renderPolicyModal=function(){var e={opened:this.state.policyModalOpened,onVisibleChange:this.onPolicyModalVisibleChange,closeable:!1,title:null,titleCls:"policy-modal-title",width:600,style:{top:100},mask:{closeable:!1}},t=dt.PREFERENCE.get("language");return g.a.createElement(v.Modal,o.a({className:mt["policy-modal"]},e),g.a.createElement("div",{className:"policy-modal-content"},g.a.createElement("img",{className:"lock-placeholder",src:ft}),g.a.createElement("div",{className:"policy-title"},p.a.get("privacy.policy.title")),g.a.createElement("div",{className:"policy-desc"},p.a.get("privacy.policy.desc1")),g.a.createElement("br",null),g.a.createElement("div",{className:"policy-desc"},p.a.get("privacy.policy.desc2")),g.a.createElement("div",{className:"policy-content-wrap"},g.a.createElement(gt,{lang:t})),g.a.createElement("div",{className:"submit-wrap"},g.a.createElement(v.Button,{type:"secondary",onClick:this.onDisagreePolicy},p.a.get("disagree")),g.a.createElement(v.Button,{onClick:this.onAgreePolicy},p.a.get("agree")))))},t.prototype.renderConfirmDisagreeModal=function(){var e={opened:this.state.confirmDisagreeModalOpened,onVisibleChange:this.onConfirmDisagreeModalVisibleChange,title:p.a.get("privacy.policy.disagree.title"),titleCls:"disagree-policy-modal-title",width:500,style:{top:200},mask:{closeable:!1},zIndex:1100};return g.a.createElement(v.Modal,o.a({className:mt["disagree-policy-modal"]},e),g.a.createElement("div",{className:"disagree-tips"},p.a.get("privacy.policy.disagree.tips")),g.a.createElement(v.Button,{onClick:this.onCloseConfirmModal},p.a.get("rereading")),g.a.createElement(v.Button,{className:"disagree-button",onClick:this.onLogoutForGDPR},p.a.get("disagree.and.exit")))},t.prototype.render=function(){return g.a.createElement("div",{className:mt["privacy-policy-modal"]},this.renderPolicyModal(),this.renderConfirmDisagreeModal())},t}(g.a.PureComponent),bt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cxPrefix="project-list",t.itemClassNames={grid:t.cxPrefix+"__project-grid-card",list:t.cxPrefix+"__project-list-item"},t.handleJoinProjectClick=function(e,n){e.stopPropagation();var r=t.props.onJoinProjectClick;r&&r(n)},t}return o.d(t,e),t.prototype.renderCurrentTagProjectGroup=function(){var e=this.props,t=e.currentTagProjects,n=e.isCreateProjectEnable;return this.renderProjectGroup({projects:t,isCreateProjectEnable:n,onCreateProjectClick:this.handleCreateProjectClick,onEnterProjectClick:this.handleEnterProjectClick,onOpenProjectSettingClick:this.handleOpenProjectSettingClick,onStarProjectClick:this.handleStarProjectClick,onUnstarProjectClick:this.handleUnstarProjectClick,onJoinProjectClick:this.handleJoinProjectClick,onSuspendProjectClick:this.handleSuspendProjectClick,onUnSuspendProjectClick:this.handleUnSuspendProjectClick,onArchiveProjectClick:this.handleArchiveProjectClick,onDestoryProjectClick:this.handleDestoryProjectClick,onUnArchiveProjectClick:this.handleUnArchiveProjectClick},null,{onAddProjectMemberClick:this.handleAddProjectMemberClick},{organizationId:this.props.organizationId,viewId:this.props.viewId,className:this.props.tableClassName,projectTag:this.props.projectTag,openMemberCardHandler:this.props.openMemberCardHandler,doNotShowOverviewGuide:this.props.doNotShowOverviewGuide,title:this.props.title,width:this.props.tableContainerWidth,exportTable:this.props.exportTable,count:this.props.projectCount})},t.prototype.render=function(){return g.a.createElement("div",{className:this.cxPrefix+"__component"},this.renderCurrentTagProjectGroup())},t}(n("CZnMppOW").AbstractPortal),yt=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(n){}return e}(),kt=function(e){function t(t){var n=e.call(this,t)||this;return n.setSelfRef=function(e){return n.el=e},n.onScrollImpl=function(){if(n.el){var e=n.el.clientHeight,t=n.ancestor.clientHeight-(n.props.ancestorPadding||0);n.el.style.top=e>t?"-"+(e-t)+"px":"0"}},n.onScroll=c.a.debounce(n.onScrollImpl,1e3,!0),n.state={inSight:!1},n}return o.d(t,e),t.prototype.componentDidMount=function(){var e=this;if(this.ancestor=this.findScrollableAncestor(),this.ancestor){var t=yt?{passive:!0}:void 0;this.ancestor.addEventListener("scroll",this.onScroll,t),setTimeout(function(){return e.onScroll()},0)}},t.prototype.componentWillUnmount=function(){this.ancestor&&this.ancestor.removeEventListener("scroll",this.onScroll)},t.prototype.componentDidUpdate=function(){var e=this;setTimeout(function(){return e.onScrollImpl()},0)},t.prototype.scrollToTop=function(){this.el&&(this.el.scrollTop=0,this.el.style.top="0")},t.prototype.findScrollableAncestor=function(){for(var e=this.el;e.parentNode;)if((e=e.parentNode)!==document&&e!==document.documentElement){var t=window.getComputedStyle(e),n=t.getPropertyValue("overflow-y")||t.getPropertyValue("overflow");if("auto"===n||"scroll"===n)return e}return window.document.documentElement},t.prototype.render=function(){var e=this.props,t=e.className,n=e.children;return g.a.createElement("div",{className:m()("org-sticky",t),ref:this.setSelfRef},n)},t}(g.a.PureComponent),_t=n("XIKSkjsA"),wt=n("GOfL9MB5"),Ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(){return g.a.createElement("div",{className:wt["guide-component"]},g.a.createElement("div",null,p.a.get("project.tag.import.project.guide.title")),g.a.createElement("ul",null,g.a.createElement("li",null,p.a.get("project.tag.import.project.guide.import")),g.a.createElement("li",null,p.a.get("project.tag.import.project.guide.create"))))},t}(g.a.PureComponent),St=n("/ywSGDqL"),Et=n("EGpl4vXb"),Tt=n("piyYzrBy"),It=n("KnUC4fdI"),Mt=n("aIk28nG9"),jt=n("75pUczFf"),Pt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onClick(t.props.order)},t}return o.d(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.checked?g.a.createElement(v.Icon,{name:"tick",className:"icon-tick"}):null;return g.a.createElement(v.MenuItem,{className:Mt["menu-item-with-tick"],onClick:this.onClick},g.a.createElement("span",{className:"menu-item-with-tick-content"},t),n)},t}(g.a.PureComponent),xt=function(e){function t(t){var n=e.call(this,t)||this;return n.protalViewInfoMap={grid:{get title(){return u.get("portal.view.grid")},icon:"org-apps"},list:{get title(){return u.get("portal.view.list")},icon:"unordered-list"},table:{get title(){return u.get("portal.view.table")},icon:"table"}},n.cxPrefix="organization-portal",n.itemClassNames={grid:n.cxPrefix+"__project-grid-card",list:n.cxPrefix+"__project-list-item"},n.forceUpdateTableView=c.a.debounce(function(){var e=document.querySelector(".organization-portal-content-container");if(e){var t=e.getBoundingClientRect().width;n.state.tableContainerWidth!==t&&n.setState({tableContainerWidth:t-16})}},200),n.project2ModelMapper=function(e){return new S.a(e,{bindByMatrix:!1})},n.enhanceProjects=jt(function(e){return e?n.props.getProjects(e.map(n.project2ModelMapper),!0):e}),n.getProjectMode=function(){return n.getProjectViewConfig().mode},n.getProjectOrder=function(){return n.getProjectViewConfig().order},n.onToggleViewMode=function(e){return function(){var t=function(){switch(e){case"grid":return"switch cover view";case"list":return"switch list view";case"table":return"switch table view"}}();n.setProjectViewConfig({view:e}),d.gta.event({action:t,type:"view",method:"trace"})}},n.vistedProjectCluster=function(){Object(I.hasVisitedProjectCluster)()||(Object(I.markVisitedProjectCluster)(),n.setState({visitedProjectCluster:!0}))},n.visitedImportProject=function(){Object(I.hasVisitedProjecttagImportProjectsGuide)()||(Object(I.markVisitedProjecttagImportProjectsGuide)(),n.setState({visitedImportProject:!0}))},n.onToggleViewOrder=function(e){n.setProjectViewConfig({order:e});var t="name"===e?"sort project by name":"sort project by time";d.gta.event({action:t,method:"trace"})},n.onCreateProjectClick=function(){return n.props.onCreateProjectClick()},n.onEnableBehaviorLogsCollectioin=function(){return d.PREFERENCE.toggleCollectBehavior(!0)},n.callByProjectModel=function(e,t){for(var r,i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=n.getProject(t);if(a){var c=n.project2ModelMapper(a);return"onEnterProjectClick"===e?(r=n.props)[e].apply(r,o.h([c],i)):n.props[e](c)}},n.onAddProjectMemberClick=function(e){return n.callByProjectModel("onAddProjectMemberClick",e)},n.onArchiveProjectClick=function(e){return n.callByProjectModel("onArchiveProjectClick",e)},n.onDestoryProjectClick=function(e){return n.callByProjectModel("onDestoryProjectClick",e)},n.onEnterProjectClick=function(e,t){return n.callByProjectModel("onEnterProjectClick",e,t)},n.onOpenProjectSettingClick=function(e){return n.callByProjectModel("onOpenProjectSettingClick",e)},n.onSuspendProjectClick=function(e){return n.callByProjectModel("onSuspendProjectClick",e)},n.onUnSuspendProjectClick=function(e){return n.callByProjectModel("onUnSuspendProjectClick",e)},n.onUnArchiveProjectClick=function(e){return n.callByProjectModel("onUnArchiveProjectClick",e)},n.onJoinProjectClick=function(e){return n.callByProjectModel("onJoinProjectClick",e)},n.onStarProjectClick=function(e){return n.setProjectStar(e,!0)},n.onUnstarProjectClick=function(e){return n.setProjectStar(e,!1)},n.onAddMembers=function(e,t){var r=n.props,o=r.cursor,i=r._organizationId,s=r.actions;o&&i&&(d.gta.event({method:"click",action:"added project group member",control:"PG Invite Popup"}),s.addProjectTagMember({_organizationId:i,_id:o,$add:e,showToast:t}))},n.onSearchInnerMembers=function(e){var t=n.props,r=t.cursor,o=t._organizationId,i=t.actions;r&&o&&i.searchProjectTagMember({_organizationId:o,query:e,projectTagId:r})},n.handleStopPropagation=function(e){e.stopPropagation()},n.handleSwitchChange=function(e){return function(t){n.props.actions.setChildProjectsVisible({projectTagId:e,hideChild:t})}},n.onClickProjectCreatorMenu=function(e){return function(){if("create"===e)n.props.onCreateProjectClick(n.props.cursor,n.getProjectGroupTitle());else{if("import"!==e)return;n.showImportProjectModal()}}},n.onChangeTagMember=function(e){var t=n.props,r=t._organizationId,o=t.cursor,i=t.actions,s=e.joinProjectRole,a=e.permissions,c=e._projectRoleId;o&&r&&i.putTagMemberPermissions({_organizationId:r,projectTagId:o,projectTagMemberId:e._id,joinProjectRole:s,_projectRoleId:c,permissions:a})},n.onRemoveMember=function(e,t,r){void 0===r&&(r=!1);var o=n.props,i=o._organizationId,s=o.cursor,a=o.actions;s&&i&&a.delProjectTagMember({_organizationId:i,projectTagId:s,projectTagMemberId:e._id,member:e,isMyself:t,noRemoveMembers:r})},n.onOpenInviteModal=function(){n.onInviteModalVisibleChange(!0)},n.onCloseInviteModal=function(){n.onInviteModalVisibleChange(!1)},n.onClickInviteBtn=function(){d.gta.event({method:"click",action:"open project group setting",control:"PG Invite"}),n.onOpenInviteModal()},n.onClickAvatarList=function(){d.gta.event({method:"click",action:"open project group setting",control:"PG Avatar"})},n.onEnterProjectFromStarredProjects=function(e,t){d.gta.event({action:"view project from star project",type:"project",method:"click"}),n.onEnterProjectClick(e,t)},n.onEnterProjectFromTagProjects=function(e,t){d.gta.event({action:"view project from group",type:"project",method:"click"}),n.onEnterProjectClick(e,t)},n.hasTagMenuProjectFilters=[_.a.Joined,_.a.Public,_.a.Suspended,_.a.Ungrouped],n.menuClickHandler=function(){d.gta.event({action:"open group menu",page:"Organization Page",organizationid:"",method:"click",type:n.getProjectMode()})},n.onSwitchStarredTag=function(e){n.props.actions.switchStarredTag({starId:e}),d.gta.event({action:"switch star group",type:"group",method:"click"})},n.onCancelStarByStarId=function(e){n.props.actions.delTagStar({starId:e})},n.onEnterProjectFromStarredTab=function(e,t){d.gta.event({action:"view project from star group",type:"project",method:"click"}),n.onEnterProjectClick(e,t)},n.getStarProjectCount=function(e){var t=e,r=e;if(t.projecttag){var o=n.props.projectTree.getNode(t.projecttag._id);return o?Object(ae.e)(o.id,n.props.projectTagCountDict,!o.get("hideChild")):null}return n.props.projectsCount[r.subjectValue]},n.exportTableBtnClickHandler=function(){d.gta.event({action:"export project data",page:"Organization Page",method:"click",control:"group menu",type:n.getProjectMode()}),n.exportTableHandler(n.getViewId())},n.exportTableHandler=function(e){n.setState({currentExportViewId:e,showExportModal:!0})},n.exportModalVisibleChangeHandler=function(e){n.setState({showExportModal:e})},n.onInviteModalVisibleChange=function(e){n.props.actions.setInviteModalVisibility(e)},n.onImportProjectModalVisibleChange=function(e){n.setState({importProjectModalOpened:e})},n.showImportProjectModal=function(){n.onImportProjectModalVisibleChange(!0)},n.onImportProjects=function(e){n.props.actions.importProjects({projectIds:e}),n.onImportProjectModalVisibleChange(!1),"table"===n.getProjectMode()&&(d.APP.reset(),d.router.loadUrl())},n.onEditTag=function(e,t){var r=n.props.actions,i=e._id,s=e.path;r.updateProjectTag(o.a({},t,{_id:i,path:s}))},n.onRemoveTag=function(e){var t=n.props.actions,r=e._id,o=e.path;t.delProjectTag({_id:r,path:o})},n.onAddSubTag=function(e,t){var r=n.props,i=r.actions,s=r._organizationId;s&&i.createProjectTag(o.a({},t,{_organizationId:s,_parentId:e._id}))},n.subjectValue2NameMap=Object(Fe.j)(),n.filters=Object(Fe.i)(),n.state={projectRoles:[],visitedProjectCluster:Object(I.hasVisitedProjectCluster)(),visitedImportProject:Object(I.hasVisitedProjecttagImportProjectsGuide)(),tableContainerWidth:_t.n,inviteModalOpened:!1,importProjectModalOpened:!1},n}return o.d(t,e),t.prototype.componentDidMount=function(){var e=this.props._organizationId;e&&T.OrganizationAccess.hasPermission(e,"projecttag.get.public")&&this.props.actions.getProjectTags(),this.fetchProjectRoles(),this.forceUpdateTableView(),window.addEventListener("resize",this.forceUpdateTableView)},t.prototype.fetchProjectRoles=function(){var e=this,t=this.props._organizationId;b.default.fetch.getCustomRoles(t,"project").subscribe(function(t){e.setState({projectRoles:t})})},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.projectOrder,r=t.tagProjectsOrder;n===e.projectOrder&&r===e.tagProjectsOrder||this.onChangeProjectOrder()},t.prototype.componentWillUnmount=function(){this.props.actions.unmountOrganizationPortal(),window.removeEventListener("resize",this.forceUpdateTableView)},Object.defineProperty(t.prototype,"isOrgMember",{get:function(){return!!this.props._organizationId&&T.OrganizationAccess.hasMemberAuthority(this.props._organizationId)},enumerable:!0,configurable:!0}),t.prototype.getEnhancedProjects=function(){var e=this.props,t=e.projects,n=e.projectFilter;if(!t)return t;var r=[];n!==_.a.Archived&&n!==_.a.Suspended&&r.push(function(e){return!e.isArchived&&!e.isSuspended}),n===_.a.Archived&&r.push(function(e){return!!e.isArchived}),n===_.a.Suspended&&r.push(function(e){return!!e.isSuspended}),n===_.a.Starred&&r.push(function(e){return e.isStar});var o=t.filter(function(e){return r.every(function(t){return t(e)})});return this.enhanceProjects(o)},t.prototype.getEnhancedStarredTagProjects=function(){return this.enhanceProjects(this.props.starredTagProjects)},t.prototype.getEnhancedChildProjects=function(){var e=this.props.childProjects;return e?this.enhanceProjects(e):e},t.prototype.isVirtualGroup=function(){return this.props.projectFilter!==_.a.ProjectTag},t.prototype.isCurrentProjectTagStrictVisible=function(){var e=this.getSelectedProjectTagNode();return e&&e.get("strictVisible")},t.prototype.getProjectViewConfig=function(){var e=this.props,t=e.projectFilter,n=e.portalMode,r=e.tagProjectsMode,o=e.projectOrder,i=e.tagProjectsOrder;return t&&Object(P.j)(t,this.isOrgMember)?{mode:n,modeToggleFunc:"togglePortalMode",order:o,orderToggleFunc:"toggleProjectOrder"}:{mode:r,modeToggleFunc:"toggleTagProjectsMode",order:i,orderToggleFunc:"toggleTagProjectsOrder"}},t.prototype.setProjectViewConfig=function(e){var t=e.view,n=e.order,r=["toggleTagProjectsMode"],o=["toggleTagProjectsOrder"];"table"!==t&&(r.push("togglePortalMode"),o.push("toggleProjectOrder")),t&&r.forEach(function(e){return d.PREFERENCE[e](t)}),n&&o.forEach(function(e){return d.PREFERENCE[e](n)})},t.prototype.onChangeProjectOrder=function(){var e=this.props,t=e.actions,n=e.projectFilter,r=e.focusedStarId,o=n!==_.a.ProjectTag,i=this.isCurrentProjectTagStrictVisible();(o||i)&&t.getProjects({isSlient:!1}),i&&t.getChildProjects(),n===_.a.Starred&&r&&t.switchStarredTag({starId:r})},t.prototype.isLoading=function(){var e=this.props,t=e.projectFilter,n=e.childProjects,r=e.projects,o=e.starredTagProjects,i=e.tagStars;switch(t){case _.a.ProjectTag:return!n||!r;case _.a.Starred:return!r||!i||i.length>0&&!o;default:return!r}},t.prototype.renderLoadMore=function(){if("table"!==this.getProjectMode()){var e,t,n=this.props,r=n.projectFilter,o=n.actions,i=n.projectsHasMore,s=n.starredTagProjectsHasMore,a=n.childProjectsHasMore;if(i)e=i,t=o.getMoreProjects;else if(r===_.a.Starred)e=s,t=o.getMoreProjectsOfStarredTag;else{e=a,t=o.getMoreChildProjects;var c=this.getSelectedProjectTagNode();if(e&&c&&c.get("hideChild"))return}return g.a.createElement(E.LoadMore,{endWith:null,hasMore:!this.isLoading()&&e,clause:e,onEnter:t})}},t.prototype.renderPlaceholder=function(e){var t;switch(e){case"no-projects":t={imgSrc:St,text:u.get("project.hierarchy.no.projects")};break;case"no-all-projects":t={imgSrc:St,text:u.get("project.hierarchy.no.projects"),tips:u.get("project.hierarchy.no.projects.tips"),btns:g.a.createElement("div",{className:"placeholder-btns"},g.a.createElement(v.Button,{size:"small",onClick:this.onCreateProjectClick},u.get("project.creator.create.project")),this.renderTransferInProjectsBtn())};break;case"no-section-projects":t={imgSrc:Tt,text:u.get("project.hierarchy.no.projects")};break;case"no-stars":t={imgSrc:It,text:u.get("project.hierarchy.no.stars"),tips:u.get("project.hierarchy.no.stars.tips")};break;case"no-behavior-collection":t={imgSrc:St,text:u.get("project.hierarchy.no.projects"),tips:u.get("project.hierarchy.history.forbidden.by.privacy.setting"),btns:g.a.createElement("div",{className:"placeholder-btns"},g.a.createElement(v.Button,{size:"small",onClick:this.onEnableBehaviorLogsCollectioin},u.get("project.hierarchy.history.enable")))};break;case"not-visible":t={imgSrc:Et,text:u.get("project.hierarchy.not.visible"),tips:u.get("project.hierarchy.contact.admin")};break;default:return null}var n=t.text&&g.a.createElement("div",{className:"placeholder-text"},t.text),r=t.tips&&g.a.createElement("div",{className:"placeholder-tips"},t.tips);return g.a.createElement("div",{className:m()("content-placeholder-wrap","col-count-12",e)},g.a.createElement("div",{className:"content-placeholder"},g.a.createElement("img",{src:t.imgSrc,alt:"content-placeholder",className:"placeholder-img"}),n,r,t.btns))},t.prototype.renderTransferInProjectsBtn=function(){return!!this.props.organization&&this.props.organization.canTransferInProjects&&g.a.createElement(v.Button,{size:"small",type:"secondary",onClick:this.props.onOpenProjectTransferModalClick},u.get("projects.transferIn"))},t.prototype.isCreateProjectEnable=function(e,t){var n=this.props,r=n.focusedStarId,o=n.tagStars,i=n.currentProjectTagNode,s=n.organization,a=Boolean(s&&s.canPostProject);switch(e){case"all":case _.a.Joined:case _.a.Public:case _.a.Ungrouped:return a;case _.a.ProjectTag:if(a)return!0;var l=void 0;if(t)(u=c.a.findWhere(o||[],{_id:r}))&&(l=u.projecttag.permissionBinding);else i&&(l=i.get("permissionBinding"));return!!l&&P.g(l.permissions,[w.c.PostProject]);case _.a.Starred:var u;if(t&&o)if(u=c.a.findWhere(o,{_id:r}))return Object(k.a)(u)?this.isCreateProjectEnable(u.subjectValue):this.isCreateProjectEnable(_.a.ProjectTag,t)}return!1},t.prototype.setProjectStar=function(e,t){var n=this.props,r=n._organizationId;n.actions.setProjectStar({_organizationId:r,subjectType:"project",_subjectId:e,isStar:t})},t.prototype.getProject=function(e){var t=this.getEnhancedProjects()||[],n=this.getEnhancedStarredTagProjects()||[],r=this.getEnhancedChildProjects()||[];return c.a.findWhere(t,{_id:e})||c.a.findWhere(n,{_id:e})||c.a.findWhere(r,{_id:e})},t.prototype.getProjectListProps=function(){var e=this.props,t=e.currentProjectTagNode,n=e.onCreateProjectClick,r=e.cursor,o=e._organizationId;return{selectedProjectTagId:r||void 0,selectedProjectTagName:t?t.get("name"):void 0,suspendedProjects:null,archivedProjects:null,starredProjects:null,isOpenProjectInNewTab:!1,projectPortalMode:this.getProjectMode(),organizationId:o,onAddProjectMemberClick:this.onAddProjectMemberClick,onArchiveProjectClick:this.onArchiveProjectClick,onDestoryProjectClick:this.onDestoryProjectClick,onCreateProjectClick:n,onEnterProjectClick:this.onEnterProjectClick,onJoinProjectClick:this.onJoinProjectClick,onOpenProjectSettingClick:this.onOpenProjectSettingClick,onStarProjectClick:this.onStarProjectClick,onUnstarProjectClick:this.onUnstarProjectClick,onSuspendProjectClick:this.onSuspendProjectClick,onUnSuspendProjectClick:this.onUnSuspendProjectClick,onUnArchiveProjectClick:this.onUnArchiveProjectClick}},t.prototype.renderPortalTableModeTips=function(){if(!this.state.visitedProjectCluster)return g.a.createElement("span",{className:"blue-dot"})},t.prototype.renderChildProjectsSwitch=function(){var e=this.getSelectedProjectTagNode();if(e)return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:Mt["list-tool-menu-separator"]},g.a.createElement(v.Separator,null)),g.a.createElement("div",{className:Mt["list-tool-switch-wrap"],onClick:this.handleStopPropagation},g.a.createElement(v.Icon,{name:"eye"}),g.a.createElement("div",{className:"list-tool-switch-text"},u.get("portal.view.showChildren"),g.a.createElement("div",null,u.get("portal.view.showChildren.sub"))),g.a.createElement(v.Switch,{size:"smaller",checked:!!e.get("hideChild"),onChange:this.handleSwitchChange(e.id),className:"list-tool-switch"})))},t.prototype.renderPortalModeToggleBtn=function(){var e=this,t=this.getProjectMode(),n=Object.keys(this.protalViewInfoMap).filter(function(t){return!("table"===t&&e.props.projectFilter&&Object(P.j)(e.props.projectFilter,e.isOrgMember))}).map(function(n){var r=e.protalViewInfoMap[n],o=t===n?g.a.createElement(v.Icon,{name:"tick",className:"icon-check"}):null;return g.a.createElement(v.MenuItem,{key:n,onClick:e.onToggleViewMode(n),className:Mt["view-toggle-dropdown"]},g.a.createElement(v.Icon,{name:r.icon,className:"icon-view"}),r.title,o)}),r=g.a.createElement(g.a.Fragment,null,g.a.createElement(v.Menu,null,n),this.renderChildProjectsSwitch());return g.a.createElement(v.Dropdown,{content:r,persistence:!1},g.a.createElement("span",{className:"list-tool-item-wrap"},g.a.createElement(v.Tooltip,{title:u.get("portal.view.setting")},g.a.createElement(v.IconButton,{className:"list-tool-item",type:"subtle",color:"gray",name:this.protalViewInfoMap[t].icon,onClick:this.vistedProjectCluster})),this.renderPortalTableModeTips()))},t.prototype.renderOrderToggleBtn=function(){var e=this,t=this.getProjectOrder(),n="updated"===t?{tooltip:u.get("portal.sorted.by",u.get("portal.updated.sorted"))}:{tooltip:u.get("portal.sorted.by",u.get("portal.name.sorted"))},r=[{order:"name",name:u.get("portal.name.sorted")},{order:"updated",name:u.get("portal.updated.sorted")}].map(function(n){var r=n.order,o=n.name;return g.a.createElement(Pt,{key:r,order:r,checked:t===r,onClick:e.onToggleViewOrder},o)});return g.a.createElement(v.Dropdown,{content:g.a.createElement(v.Menu,null,r)},g.a.createElement("span",{className:"list-tool-item-wrap"},g.a.createElement(v.Tooltip,{title:n.tooltip},g.a.createElement(v.IconButton,{className:"list-tool-item",type:"subtle",color:"gray",name:"sort"}))))},t.prototype.renderListTools=function(){var e=this.props.projectFilter;return g.a.createElement("div",{className:"list-tools"},this.renderPortalModeToggleBtn(),e!==_.a.History&&this.renderOrderToggleBtn())},t.prototype.renderProjectCreatorBtn=function(){var e=this,t=this.props.projectFilter,n=this.isCreateProjectEnable(t);if(t===_.a.ProjectTag&&n){var r=[{type:"create",name:u.get("portal.create.project")},{type:"import",name:u.get("portal.import.projects")}].map(function(t){var n=t.type,r=t.name;return g.a.createElement(v.MenuItem,{key:n,onClick:e.onClickProjectCreatorMenu(n)},r)});return g.a.createElement(v.Dropdown,{nested:!0,offset:[80,6],content:g.a.createElement(v.Menu,null,r)},g.a.createElement("span",{className:"add-projects-btn"},g.a.createElement(v.IconButton,{name:"circle-plus",onClick:this.visitedImportProject})))}},t.prototype.renderImportProjectGuide=function(){var e=this.props.projectFilter,t=this.isCreateProjectEnable(e);if(e===_.a.ProjectTag&&t)return!this.state.visitedImportProject&&g.a.createElement(Ct,null)},t.prototype.renderMemberPermissionDropdown=function(e,t){var n=this.props,r=n.tagMembers,o=n._organizationId,i=n.cursor,s=n.searchedMembers,a=n.isSearching,c=this.state.projectRoles;return o&&i?g.a.createElement(nt,{_organizationId:o,cursor:i,hasPermission:t,members:r,searchedMembers:s,isSearching:a,projectRoles:c,onChange:this.onChangeTagMember,onRemoveMember:this.onRemoveMember,onAddMembers:this.onAddMembers,onSearchInnerMembers:this.onSearchInnerMembers,onOpenInviteModal:this.onOpenInviteModal,setIsSearching:this.props.actions.setIsSearchingInnerMember},e):null},t.prototype.renderTagMembers=function(){var e=this.props,t=e.tagMembers,n=e._organizationId,r=e.organization,o=e.cursor,i=e.currentProjectTagNode,s=r&&r.canManageProjectTagMember;if(!n||!o)return null;var a=!1;if(i&&i.get("permissionBinding")){var c=i.get("permissionBinding").permissions;a=P.g(c,[w.c.PutMember],!0)}var l=s||a;if(0===t.length&&!l)return null;var p=g.a.createElement(Ve,{members:t,onClick:this.onClickAvatarList}),d=g.a.createElement("div",{className:"invite-btn-wrap",onClick:this.onClickInviteBtn},g.a.createElement(v.Button,{type:"primary",size:"smaller",className:"invite-btn"},u.get("invite")));return g.a.createElement("div",{className:"tag-members"},this.renderMemberPermissionDropdown(p,l),l&&d)},t.prototype.getEnterProjectHandlerForFocusedProjects=function(){switch(this.props.projectFilter){case _.a.Starred:return this.onEnterProjectFromStarredProjects;case _.a.ProjectTag:return this.onEnterProjectFromTagProjects;default:return this.onEnterProjectClick}},t.prototype.getProjectGroupTitle=function(){var e=this.props.projectFilter,t=this.getSelectedProjectTagNode();if(t)return t.get("name");var n=this.filters.find(function(t){return t.filter===e});return n?n.name:""},t.prototype.getSelectedProjectTagNode=function(){var e=this.props,t=e.projectFilter,n=e.currentProjectTagNode;if(t===_.a.ProjectTag&&n)return n},t.prototype.getProjectCount=function(){var e=this.props,t=e.projectFilter,n=e.projectsCount,r=e.projectTagCountDict,o=this.getSelectedProjectTagNode();if(o)return Object(ae.e)(o.id,r,!o.get("hideChild"));var i=t&&n[t];return Object(l.c)(i)?i:null},t.prototype.renderLockIcon=function(){var e=this.getSelectedProjectTagNode();if(e&&"involves"===e.get("visible"))return g.a.createElement(v.Icon,{name:"lock",className:"privity-tag-lock"})},t.prototype.getViewId=function(){var e=this.props.projectFilter;return"projecttag"===e?this.getProjectListProps().selectedProjectTagId:e},t.prototype.viewHasTagMenu=function(e){if(!Object(Be.l)(e))return!0;var t=e;return c.a.contains(this.hasTagMenuProjectFilters,t)},t.prototype.renderEmptyProjectsPlaceholder=function(){return g.a.createElement("div",{className:"empty-projects"},g.a.createElement("img",{src:St,alt:"empty-projects",className:"empty-projects-placeholder"}),g.a.createElement("div",{className:"empty-projects-title"},u.get("project.tag.empty.projects")),g.a.createElement("div",{className:"empty-projects-hint"},u.get("project.tag.empty.projects.hint")),g.a.createElement("div",{className:"empty-projects-operations"},g.a.createElement(v.Button,{type:"secondary",onClick:this.onClickProjectCreatorMenu("create")},u.get("project.tag.empty.projects.create")),g.a.createElement(v.Button,{onClick:this.onClickProjectCreatorMenu("import")},u.get("project.tag.empty.projects.import"))))},t.prototype.renderFocusedProjects=function(){var e=this.props,t=e.projectFilter,n=e._organizationId,r=this.getEnhancedProjects(),i=this.isCreateProjectEnable(t),s=this.getViewId();if(!r)return g.a.createElement(v.Loading,null);if(!r.length&&t===_.a.Starred)return null;if(!n)return null;var a=this.getProjectListProps(),c=t!==_.a.Starred?this.getProjectCount():null,u=this.getProjectGroupTitle(),p=this.viewHasTagMenu(s),d=0===c?this.renderEmptyProjectsPlaceholder():g.a.createElement(bt,o.a({},a,{onEnterProjectClick:this.getEnterProjectHandlerForFocusedProjects(),currentTagProjects:r,isCreateProjectEnable:i,organizationId:this.props._organizationId,viewId:s,projectFilter:this.props.projectFilter,openMemberCardHandler:this.props.openMemberCardHandler,tableClassName:"focused",title:u,tableContainerWidth:this.state.tableContainerWidth,exportTable:this.exportTableHandler,projectTag:"projecttag"===this.props.projectFilter,projectCount:c})),h=t===_.a.ProjectTag&&this.renderTagMembers(),m=h&&g.a.createElement("div",{className:"vertical-gap-line"}),f=Object(l.c)(c)&&" · "+Object(ae.b)(c),b=p&&this.renderTagMenu(s),k=this.renderLockIcon();return g.a.createElement("div",{className:"focused-projects"},g.a.createElement("div",{className:"list-title-bar"},g.a.createElement("div",{className:"list-title"},g.a.createElement("span",null,u,f),k,b),h,m,this.renderListTools(),this.renderProjectCreatorBtn(),this.renderImportProjectGuide()),d,y.OrganizationPortalApm.component)},t.prototype.renderTagMenu=function(e){if(!Object(Be.l)(e)){var t=this.props.currentProjectTagNode,n=this.props.documentNodes.find(function(e){return e._id===t.id});if(!n)return;return g.a.createElement(Y,{node:n})}var r=g.a.createElement(v.Menu,null,g.a.createElement(v.MenuItem,{onClick:this.exportTableBtnClickHandler},g.a.createElement(v.Icon,{name:"move-task"}),u.get("project.cluster.export")));return g.a.createElement(v.TitledDropdown,{title:u.get("project.tag.menu.title"),content:r,className:Mt["tag-menu-dropdown"]},g.a.createElement(v.IconButton,{onClick:this.menuClickHandler,className:"btn-menu",name:"more",type:"subtle",color:"gray"}))},t.prototype.renderFocusedChildProjects=function(){var e=this.props,t=e.projectFilter,n=e.currentProjectTagNode,r=this.getEnhancedProjects(),i=this.getEnhancedChildProjects(),s=this.getSelectedProjectTagNode(),a=this.getProjectListProps();if(!n||!r||i&&0===i.length||"table"===a.projectPortalMode||s.get("hideChild"))return null;if(n.getSubNodes().length>0){var c=n.getSubNodes()[0];a=o.a({},a,{selectedProjectTagId:c.id,selectedProjectTagName:c.get("name")})}var l=this.getViewId(),p=i?g.a.createElement(bt,o.a({},a,{currentTagProjects:i,isCreateProjectEnable:this.isCreateProjectEnable(t),organizationId:this.props._organizationId,viewId:l,openMemberCardHandler:this.props.openMemberCardHandler,title:this.getProjectGroupTitle(),tableContainerWidth:this.state.tableContainerWidth,exportTable:this.exportTableHandler,projectTag:"projecttag"===this.props.projectFilter})):g.a.createElement(v.Loading,null);return g.a.createElement("div",{className:"focused-projects child-projects"},g.a.createElement("div",{className:"list-title-bar"},g.a.createElement("div",{className:"list-title"},u.get("project.hierarchy.sub.tag.projects"))),p,y.OrganizationPortalApm.component)},t.prototype.getStarName=function(e){return Object(k.a)(e)?this.subjectValue2NameMap[e.subjectValue]:e.projecttag&&e.projecttag.name},t.prototype.renderTabHeader=function(e){var t=this,n=this.getStarName(e);return g.a.createElement("div",{className:"starred-tab-header"},g.a.createElement("span",null,n),g.a.createElement(v.Tooltip,{title:u.get("unstar.project")},g.a.createElement("div",{className:"tag-star-wrap"},g.a.createElement(v.Icon,{name:"star-s",className:"tag-star",size:16,onClick:function(){return t.onCancelStarByStarId(e._id)}}))))},t.prototype.renderStarredTagProjectsSnippet=function(e,t,n,r){var i=this.getEnhancedStarredTagProjects(),s=this.isCreateProjectEnable(_.a.Starred,!0);if(this.props.statTagIsNotVisible)return this.renderPlaceholder("not-visible");if(!i)return g.a.createElement(v.Loading,null);if(0===i.length&&!s)return this.renderPlaceholder("no-section-projects");var a=this.getProjectListProps();return g.a.createElement(bt,o.a({},a,{onEnterProjectClick:this.onEnterProjectFromStarredTab,currentTagProjects:i,isCreateProjectEnable:s,organizationId:this.props._organizationId,viewId:n,tableClassName:"table-view",projectFilter:this.props.projectFilter,openMemberCardHandler:this.props.openMemberCardHandler,doNotShowOverviewGuide:e,title:t,tableContainerWidth:this.state.tableContainerWidth,exportTable:this.exportTableHandler,projectTag:!Object(Be.l)(n),projectCount:r}))},t.prototype.renderStarredTabs=function(e){var t=this,n=this.props,r=n.tagStars,o=n.focusedStarId;return r.map(function(n,r){var i=Object(k.a)(n)?n.subjectValue:n.projecttag._id,s=o?o===n._id:0===r,a=t.getStarName(n),c=t.getStarProjectCount(n);return g.a.createElement(v.TabPane,{tab:t.renderTabHeader(n),key:n._id},s&&t.renderStarredTagProjectsSnippet(e,a,i,c),0===r&&y.OrganizationPortalApm.component)})},t.prototype.renderStarredTagGroup=function(){var e=this.props,t=e.tagStars,n=e.focusedStarId,r=this.getEnhancedProjects();if(!t||0===t.length)return null;if(!r)return null;var o=r.length>0;return g.a.createElement("div",{className:"focused-projects starred-tag-group"},g.a.createElement("div",{className:"list-title-bar"},g.a.createElement("div",{className:"list-title"},g.a.createElement("span",null,u.get("starred.tags"))),0===r.length&&this.renderListTools()),g.a.createElement(v.Tabs,{onTabClick:this.onSwitchStarredTag,activeKey:n||void 0},this.renderStarredTabs(o)))},t.prototype.defaultPlaceholderFlow=function(){var e=this.props.projectFilter,t=this.getEnhancedProjects();return this.isCreateProjectEnable(e)||0!==t.length?null:this.renderPlaceholder("no-projects")},t.prototype.renderMainPlaceholder=function(){var e=this.props,t=e.projectFilter,n=e.tagStars,r=e.collectBehaviorLogs,o=this.getEnhancedProjects();if(this.isLoading())return null;switch(t){case _.a.Starred:if(0===o.length&&0===n.length)return this.renderPlaceholder("no-stars");break;case _.a.History:return r?this.defaultPlaceholderFlow():this.renderPlaceholder("no-behavior-collection");case"all":if(0===o.length)return this.renderPlaceholder("no-all-projects");break;default:return this.defaultPlaceholderFlow()}return null},t.prototype.renderSidebar=function(){var e=this.props,t=e._organizationId,n=e.organization,r=e.onOpenProjectTransferModalClick,o=e.documentNodes,i=n&&n.canCreateProjecTags;return t&&g.a.createElement(kt,{className:"organization-portal-sidebar-container col-count-4",ancestorPadding:40},g.a.createElement(Te,{_organizationId:t,canCreateProjecTags:!!i,onOpenProjectTransferModalClick:r,flattenDocumentNodes:P.b(o)}))},t.prototype.renderContent=function(){var e=this.props.projectFilter,t=this.renderMainPlaceholder();return this.isVirtualGroup()||this.isCurrentProjectTagStrictVisible()?g.a.createElement(kt,{className:this.cxPrefix+"-content-container col-count-12",ancestorPadding:40},!t&&this.renderFocusedProjects(),e===_.a.ProjectTag&&this.renderFocusedChildProjects(),e===_.a.Starred&&this.renderStarredTagGroup(),t,this.renderLoadMore()):this.renderPlaceholder("not-visible")},t.prototype.renderInviteModal=function(){var e=this.props.inviteModalOpened;return g.a.createElement(ct,{onAddMembers:this.onAddMembers,organizationId:this.props._organizationId,tagMembers:this.props.tagMembers,cursor:this.props.cursor,opened:e,onVisibleChange:this.onInviteModalVisibleChange,handleClose:this.onCloseInviteModal})},t.prototype.renderImportProjectModal=function(){var e=this.state.importProjectModalOpened;return g.a.createElement(pt,{opened:e,onVisibleChange:this.onImportProjectModalVisibleChange,organizationId:this.props._organizationId,excludedProjectIds:this.props.projects?c.a.pluck(this.props.projects,"_id"):[],cursor:this.props.cursor,onImportProjects:this.onImportProjects})},t.prototype.renderExportModal=function(){var e=this.state,t=e.showExportModal,n=e.currentExportViewId;if(n){var r=this.getSelectedProjectTagNode(),o=!r||!r.get("hideChild");return g.a.createElement(De,{opened:t,viewId:n,onVisibleChange:this.exportModalVisibleChangeHandler,protalMode:this.getProjectMode(),withChild:o})}},t.prototype.render=function(){var e={exportTableHandler:this.exportTableHandler,editHandler:this.onEditTag,removeHandler:this.onRemoveTag,addSubTagHandler:this.onAddSubTag};return g.a.createElement(B.Provider,{value:e},g.a.createElement("div",{className:Mt[this.cxPrefix]},this.renderSidebar(),this.renderContent(),this.renderExportModal(),g.a.createElement(vt,null),this.renderInviteModal(),this.renderImportProjectModal()))},t}(g.a.PureComponent),Nt=n("7JhjQgus"),Ot=Object(i.connect)(function(e){var t=e.ui.organizationPortal;return o.a({},t,{currentProjectTagNode:we(t),documentNodes:Ee(t),statTagIsNotVisible:Ce(t),projectTagCountDict:Se(t)})},function(e){return{actions:Object(s.bindActionCreators)(Nt.a,e)}})(xt),Rt=n("gGLCgK+J"),Dt=n("eXJ3Aer9");n.d(t,"OrganizationPortalContainer",function(){return Ot}),n.d(t,"OrganizationPortal",function(){return xt}),n.d(t,"getFilters",function(){return Fe.i}),n.d(t,"getSubjectValue2NameMap",function(){return Fe.j}),n.d(t,"DEFAULT_FILTERS",function(){return Fe.b}),n.d(t,"EXPANED_FILTERS",function(){return Fe.c}),n.d(t,"NON_ORG_MEMBER_FILTERS",function(){return Fe.e}),n.d(t,"getFilter2NameMap",function(){return Fe.h}),n.d(t,"GTA_OPTIONS_MAP",function(){return Fe.d}),n.d(t,"NOT_TABLE_VIEW_MODALS",function(){return Fe.f}),n.d(t,"ACTIVED_VIEW_ID_CACHE",function(){return Fe.a}),n.d(t,"ROOT_TAG_ID",function(){return Fe.g}),n.d(t,"PROJECTS_PAGE_SIZE",function(){return Rt.b}),n.d(t,"MAX_PROJECTS_COUNT",function(){return Rt.a}),n.d(t,"getNodeFromTreeByStarId",function(){return P.c}),n.d(t,"getProjectsCountStr",function(){return P.d}),n.d(t,"isMyself",function(){return P.h}),n.d(t,"hasTagPermission",function(){return P.f}),n.d(t,"hasTagPermissions",function(){return P.g}),n.d(t,"modalNoTableView",function(){return P.j}),n.d(t,"isStarTagNotVisible",function(){return P.i}),n.d(t,"viewIdIsProjectTagId",function(){return P.l}),n.d(t,"toTree",function(){return P.k}),n.d(t,"flattenDocumentNode",function(){return P.a}),n.d(t,"getAncestorUnfoldDocumentNodes",function(){return P.b}),n.d(t,"getSibling",function(){return P.e}),n.d(t,"OrganizationPortalBridge",function(){return Dt.OrganizationPortalBridge}),n.d(t,"actions",function(){return Nt.a}),n.d(t,"reducer",function(){return Nt.c}),n.d(t,"epic",function(){return Nt.b})},dfZgIDk1:function(e,t,n){e.exports={"remove-btn":"remove-btn__329u","remove-shortcut":"remove-shortcut__2G3s",content:"content__3gKP"}},dikDkxSK:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("a+N5u/Cl"),a=n("TSYQbtd+"),c=n.n(a),l=n("GESwhXbR"),u=n("QKxOxmbo"),p=n.n(u),d=function(e){var t=e.item,n=e.onSelect,r=e.selected,i=e.keyAttr,s=void 0===i?"_id":i,a=e.labelAttr,c=void 0===a?"name":a,u=t[s];return o.createElement("div",{key:u,onClick:function(){return n(t)},className:p.a.item},o.createElement("span",{className:p.a["item-name"]},t[c]),r&&o.createElement(l.Icon,{name:"tick"}))},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=c()(p.a.list,"thin-scroll");return o.createElement("ul",{className:e},this.props.children)},t}(o.PureComponent),m=Object(l.Selectable)(h),f=function(e){function t(t){var n=e.call(this,t)||this;return n.getInputRef=function(e){n.input=e},n.getSelectRef=function(e){n.select=e},n.getDropdownRef=function(e){n.dropdown=e},n.filterList=function(e,t){var r=n.props,o=r.filterList,i=r.labelAttr;return o?o(e,t):e.filter(function(e){return e[i].toLowerCase().indexOf(t)>=0})},n.getList=function(){var e=n.state.input.trim().toLowerCase();return n.filterList(n.props.list,e)},n.onOpen=function(){n.props.autoFocus&&(s.defer(function(){return n.input.focus()}),n.props.onOpen&&n.props.onOpen())},n.onClose=function(){n.setState({input:""}),n.props.onClose&&n.props.onClose()},n.onEnter=function(){n.onSelect(Math.max(n.select.activedIndex,0))},n.onChange=function(e){n.setState({input:e.target.value})},n.onKeyDown=function(e){27===e.which?n.dropdown&&n.dropdown.close():n.select.keyboardHandler(e)},n.onSelect=function(e){n.props.renderListPrefix&&n.props.renderListPrefix()&&e--;var t=n.getList()[e];t&&n.props.onSelect(t),n.isSingleMode()&&n.dropdown&&n.dropdown.close()},n.onItemSelect=function(e){n.props.onSelect(e),n.isSingleMode()&&n.dropdown&&n.dropdown.close()},n.state={input:""},n}return r.d(t,e),t.prototype.isSingleMode=function(){return"single"===this.props.mode},t.prototype.renderItems=function(){var e=this,t=this.props,n=t.selected,r=t.renderItem,o=t.keyAttr,i=t.labelAttr;return this.getList().map(function(t){return r({item:t,keyAttr:o,labelAttr:i,selected:s.isArray(n)?s.contains(n,t[o]):n===t[o],onSelect:e.onItemSelect})})},t.prototype.renderSelectList=function(){if(this.props.isLoading)return null;var e=this.renderItems(),t=this.props.renderListPrefix&&this.props.renderListPrefix();return t&&(e=[t].concat(this.renderItems())),o.createElement(m,{ref:this.getSelectRef,focusable:!1,index:-1,onEnter:this.onEnter,filterFn:this.props.filterFn},e)},t.prototype.renderInput=function(){return!this.props.isLoading&&o.createElement("div",{className:p.a.header},o.createElement("input",{ref:this.getInputRef,className:"form-control",autoFocus:this.props.autoFocus,placeholder:this.props.inputPlaceholder,onChange:this.onChange,onKeyDown:this.onKeyDown}))},t.prototype.renderLoading=function(){return this.props.isLoading&&o.createElement(l.Loading,{className:p.a.loading})},t.prototype.renderContent=function(){var e=c()(p.a.content,this.props.className);return o.createElement("div",{className:e},this.renderInput(),this.renderSelectList(),this.renderLoading())},t.prototype.renderDropdown=function(){return o.createElement(l.Dropdown,{ref:this.getDropdownRef,nested:this.props.nested,onOpen:this.onOpen,onHide:this.onClose,placement:this.props.placement,content:this.renderContent(),persistence:!0},this.props.children)},t.prototype.render=function(){return this.props.inline?this.renderContent():this.renderDropdown()},t.defaultProps={inline:!1,mode:"single",keyAttr:"_id",labelAttr:"name",autoFocus:!0,nested:!1,isLoading:!1,placement:"bottomLeft",inputPlaceholder:i.get("filter.selector.placeholder"),renderItem:d},t}(o.PureComponent);n.d(t,"a",function(){return f})},"dnIpZF/8":function(e,t,n){var r,o={}.hasOwnProperty;r=n("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="customfieldlink",t.prototype.defaults={categoryIds:[]},t}()},dqTqx3l1:function(e,t){e.exports=function(e){return'<ul class="list"> <li> <a class="remove-handler" data-action="remain"> '+tb_i18n.get("project.remove.team.remain.members")+' </a> </li> <li> <a class="remove-handler text-danger" data-action="remove"> '+tb_i18n.get("project.remove.team.remove.members")+" </a> </li></ul>"}},dqsr8tl4:function(e,t,n){},drbC6CFn:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("a+N5u/Cl"),i=n("q1tIBJhx"),s=n("tLZJUYWX"),a=n("TSYQbtd+"),c=n.n(a),l=n("GESwhXbR"),u=n("rx72K1eX");n.d(t,"a",function(){return h}),n("qVa/iWOz");var p=n("IM6TaE5+"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e,t=this.props,n=t.type,r=t.onClick,o=c()("comment-handler",((e={})[n+"-handler"]=!0,e));return i.createElement(l.TextButton,{className:o,onClick:r},{edit:s.get("edit"),reply:s.get("reply"),delete:s.get("delete")}[n])},t}(i.PureComponent),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onEditComment=function(){t.props.onEdit&&t.props.onEdit(t.props.id)},t.onDeleteComment=function(){t.props.onDelete&&t.props.onDelete(t.props.id)},t.onReplyComment=function(){var e=t.props.creator;t.props.onReply&&t.props.onReply({id:e._id,name:e.name})},t}return r.d(t,e),t.prototype.stopPropagation=function(e){e.stopPropagation()},t.prototype.renderHandlers=function(){var e=this.props,t=e.showReply,n=e.showEdit,o=e.showDelete;if(!(t||n||o))return null;var s,a,c=(s=d,a={time:this.props.createdDate,duration:240},function(e){function t(t){var n=e.call(this,t)||this;return n.getTimeoutDiff=function(){var e=(new Date).valueOf(),t=new Date(a.time).valueOf();return Math.ceil(a.duration-(e-t)/1e3)},n.isTimeout=function(){return n.getTimeoutDiff()<=0},n.timer=function(){n.setState(r.a({},n.state,{isTimeout:!0}))},n.state={isTimeout:n.isTimeout()},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.state.isTimeout||(this.timeoutId=window.setTimeout(this.timer,1e3*this.getTimeoutDiff()))},t.prototype.componentWillUnmount=function(){clearTimeout(this.timeoutId)},t.prototype.render=function(){return this.state.isTimeout?null:i.createElement(s,this.props)},t}(i.PureComponent));return i.createElement("div",{className:"comment-handlers",onClick:this.stopPropagation},n&&i.createElement(c,{type:"edit",onClick:this.onEditComment}),t&&i.createElement(d,{type:"reply",onClick:this.onReplyComment}),o&&i.createElement(c,{type:"delete",onClick:this.onDeleteComment}))},t.prototype.render=function(){var e={backgroundImage:"url("+this.props.creator.avatarUrl+")"},t={__html:p.replace(o.escape(this.props.content))};return i.createElement("div",{className:"comment-item flex-horiz"},i.createElement("div",{className:"avatar img-36 img-circle flex-static",style:e}),i.createElement("div",{className:"comment-body flex-fill flex-vert"},i.createElement("header",{className:"comment-header flex-horiz"},i.createElement("span",{className:"comment-creator-name flex-fill"},this.props.creator.name),this.renderHandlers(),i.createElement("div",{className:"comment-created flex-static"},i.createElement(u.Timestamp,{initialTime:new Date(this.props.createdDate)}))),i.createElement("section",{className:"comment-content"},i.createElement("p",{dangerouslySetInnerHTML:t}))))},t.defaultProps={showEdit:!1,showReply:!1,showDelete:!1},t}(i.PureComponent)},"ds2JuV/Y":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("GESwhXbR"),a=n("tLZJUYWX"),c=n.n(a),l=n("dI54NnHG"),u=function(e){var t=e.data,n=r.g(e,["data"]),o=t.map(function(e){return i.a.createElement(s.Option,{value:e,key:e.data},i.a.createElement("div",{className:l.option},i.a.createElement("div",null,e.label),i.a.createElement("span",null,e.subTitle)))});return i.a.createElement(s.Select,r.a({},n,{nested:!0}),o)},p=[{get label(){return c.a.get("projecttag.visible.members")},get subTitle(){return c.a.get("projecttag.visible.members.subtitle")},data:"organization"},{get label(){return c.a.get("projecttag.visible.involves")},get subTitle(){return c.a.get("projecttag.visible.involves.subtitle")},data:"involves"}],d=function(e){var t=e.value?p.find(function(t){return t.data===e.value}):void 0,n=i.a.createElement(u,{value:t,onSelect:e.onSelect,data:p,disabled:e.disabled,className:e.className});return e.disabled?i.a.createElement(s.Tooltip,{title:c.a.get("projecttag.visible.readonly.tooltip")},i.a.createElement("div",null,n)):n}},"e+AphIH/":function(e,t){e.exports=function(e){var t='<div class="creator-flex-body"> ';return"past"==e.scope?t+=' <span class="dirty event-creator-repeat-dirty hinted" data-title="'+tb_i18n.get("repeat.freq.NO")+'"> <span class="icon icon-repeat"></span> '+tb_i18n.get("repeat.freq.NO")+" </span> ":(t+=' <a class="event-creator-repeat hinted ',e.repeatTitle||(t+="dirty"),t+=" ",e.repeatTitle!=tb_i18n.get("repeat.freq.NO")&&(t+=" active "),t+="\" data-gta=\"{action: 'set repeat', type: 'event', control: '",e.isEdit?t+="Event Editor":t+="New Event",t+='\'}" data-title="'+(e.repeatTitle||tb_i18n.get("repeat.freq.NO"))+'" > <span class="icon icon-repeat"></span> </a> '),t+="</div>"}},e2uirt9A:function(e,t,n){"use strict";var r=n("pLf3YKvk");n.d(t,"ProjectListCard",function(){return r.a});var o=n("re1Qwcf5");n.o(o,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return o.AbstractPortal}),n.o(o,"ProjectGridAddCard")&&n.d(t,"ProjectGridAddCard",function(){return o.ProjectGridAddCard}),n.o(o,"ProjectListAddCard")&&n.d(t,"ProjectListAddCard",function(){return o.ProjectListAddCard}),n.o(o,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return o.getSuspendedMsg}),n.o(o,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return o.verifyProjectPayment})},e75nvevp:function(e,t,n){},"eF8w1m/C":function(e,t){e.exports=function(e){var t='<div class="detail-infos-link-wrapper"> <div class="detail-subitem-common-header"> <span class="icon icon-link3"></span>'+tb_i18n.get("link.add")+" </div> ";return e.hasPostPermission&&!e.isArchived&&(t+=' <div class="link-add-wrap"></div> '),t+=' <div class="links-list"> <div class="detail-subitem-common-category link-task"></div> <div class="detail-subitem-common-category link-event"></div> <div class="detail-subitem-common-category link-files"></div> <div class="detail-subitem-common-category link-testcase"></div> <div class="detail-subitem-common-category link-post"></div> <div class="detail-subitem-common-category link-yinxiang"></div> <div class="detail-subitem-common-category link-evernote"></div> <div class="detail-subitem-common-category link-weibo"></div> <div class="detail-subitem-common-category link-git-integration"></div> <div class="detail-subitem-common-category link-github"></div> <div class="detail-subitem-common-category link-jinshuju"></div> <div class="detail-subitem-common-category link-processon"></div> <div class="detail-subitem-common-category link-zhihu"></div> <div class="detail-subitem-common-category link-wechat"></div> <div class="detail-subitem-common-category link-link"></div> </div></div>'}},eHLmQbcC:function(e,t,n){e.exports={root:"root__3Y8Q"}},eI0B4r2P:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;r=n("P6MFxFWo"),o=n("vmWJWrVe"),s=n("ZiyDPH8B"),i=n("blcJqBeA"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="TagWorksView",t.prototype.className="tag-works-view fade",t.prototype.initialize=function(e){var t;return this.tagModel=e.tagModel,this.worksCollection=s.get("tag_"+this.tagModel.id),this.renderBasic(),this.tagModel.fetchRelation("works",{attrs:{page:1,count:500,_projectId:e._projectId},success:(t=this,function(n){if(t.$el)return t.worksCollection.reset(n),t.requestSubView(i,{worksCollection:t.worksCollection}).$el.appendTo(t.$el),t.refreshCount(),t.worksCollection.length&&t.$el.show().addClass("in"),t.listen(),"function"==typeof e.onFinish?e.onFinish():void 0}),error:function(){return"function"==typeof e.onFinish?e.onFinish():void 0}}),this},t.prototype.renderBasic=function(){return this.$el.html(r()).hide(),this},t.prototype.listen=function(){var e;return this.listenTo(this.worksCollection,"add remove",this.refreshCount),this.listenTo(this.worksCollection,"change:tagIds",(e=this,function(t,n){if(!((null!=n?n.indexOf(e.tagModel.id):void 0)>=0))return e.worksCollection.remove(t),e.tagModel.refreshCache()})),this},t.prototype.refreshCount=function(){var e;return this.tagModel.set("worksCount",this.worksCollection.length),this.$(".works-count").text(this.worksCollection.length),e=this.worksCollection.length?"show":"hide",this.$el[e](),this},t}()},eIZlrYEN:function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("qHH6+g6Q"),n("s0r7VfKc").default,o=n("a+N5u/Cl"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="testcase",t.prototype.urlRoot="testcases",t.prototype.defaults={objectType:"testcase"},t.prototype.isIndie=function(){return!this.get("_projectId")},t.prototype.hasPermission=function(){return!!this.isIndie()||t.__super__.hasPermission.apply(this,arguments)},t.prototype.hasPermissions=function(){var e;return this.isIndie()?(e=t.__super__.hasPermissions.apply(this,arguments),o.mapObject(e,function(){return!0})):t.__super__.hasPermissions.apply(this,arguments)},t.prototype.getRoleScope=function(){return this.isIndie()?0:t.__super__.getRoleScope.apply(this,arguments)},t}()},eMSp2D5P:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;s=n("a+N5u/Cl"),a=n("sa1Ed382"),o=n("RQ44psah"),i=n("vmWJWrVe"),r=n("oHyoeiPN").ProOverdueTipsContainer,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.className="pro-overdue-tips-view",t.prototype.viewName="ProOverdueTipsView",t.prototype.initialize=function(){return this.mount()},t.prototype.mount=function(){return this.requestReactView(this.getMountNode(),r,{onClose:s.bind(this.handleClose,this),onUpgrade:s.bind(this.handleUpgrade,this),onKeepBack:s.bind(this.handleKeepBack,this),payment:a.user.payment},{redux:!0})},t.prototype.getMountNode=function(){return this.$el.get(0)},t.prototype.handleClose=function(){return this.remove()},t.prototype.handleUpgrade=function(){return a.user.migrate().then(function(e){var t;return t=e.orderId,location.href=o.pay.order(t)})},t.prototype.handleKeepBack=function(){return a.user.keepBack().then(function(){return a.router.refreshUrl()})},t}()},eUOXB7It:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("a+N5u/Cl"),s=n("TSYQbtd+"),a=n.n(s),c=n("tLZJUYWX"),l=n("zXmn5Z7T"),u=n("GESwhXbR"),p=n("YqUJfXDr"),d=n("DOZCBSCZ"),h=n("sa1Ed382"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){return o.createElement("ul",{className:"member-invite-list"},this.props.children)},t}(o.PureComponent),f=Object(u.Selectable)(m),g=function(e){function t(t){var n=e.call(this,t)||this;return n.inSubmit=!1,n.refInput=function(e){n.input=e},n.refSelect=function(e){n.select=e},n.getSortedMembers=function(){if(n.state.query.trim())return i.sortBy(n.state.searchResults,function(e){return e._userId===h.user.id});var e=r.a({},h.user.toJSON(),{_userId:h.user.id}),t=n.state.members.filter(function(t){return t._userId!==e._id});return[e].concat(t)},n.onChange=function(e){var t=e.target;n.setState(r.a({},n.state,{query:t.value}))},n.onKeyDown=function(e){n.select.keyboardHandler(e)},n.onEnter=function(e){n.select.activedIndex<0&&13===e.which&&n.onSubmit()},n.onSubmit=function(){if(!n.inSubmit){var e=n.state.selected.filter(function(e){var t=e._userId;return 0===n.state.originSelected.filter(function(e){return e===t}).length});n.props.onSubmit(e),n.inSubmit=!0}},n.isMember=function(e){return n.state.originSelected.indexOf(e)>=0},n.isSelected=function(e){return n.state.selected.filter(function(t){return t._userId===e}).length>0},n.isProtected=function(e){var t=n.state.originSelected;return i.isArray(t)?t.indexOf(e)>=0:t===e},n.searchMembers=i.debounce(function(e){n.setState({searchResults:[],isLoading:!0}),n.searchMembersSub$&&n.searchMembersSub$.unsubscribe(),n.searchMembersSub$=n.props.searchMembers(e).subscribe(function(e){n.setState({searchResults:e,isLoading:!1})})},300),n.loadMembers=function(){n.getMembersSub$&&n.getMembersSub$.unsubscribe(),n.getMembersSub$=n.props.getMembers().subscribe(function(e){var t=e.result,r=e.hasMore;n.setState({hasMore:r,members:t,isLoading:!1})})},n.loadOriginMemberIds=function(){n.getOriginMembersSub$&&n.getOriginMembersSub$.unsubscribe(),n.getOriginMembersSub$=n.props.getOriginMembers().subscribe(function(e){n.setState({originSelected:i.pluck(e,"_userId")})})},n.onMemberSelect=function(e){if(-1!==e){var t,o=n.props.removable,i=n.getSortedMembers()[e],s=i._userId;if(!n.isMember(s)||o&&!n.isProtected(s))t=n.isSelected(s)?n.state.selected.filter(function(e){var t=e._userId;return s!==t}):n.state.selected.concat(i),n.setState(r.a({},n.state,{selected:t}))}},n.state={query:"",selected:[],originSelected:[],members:[],searchResults:[],isLoading:!0,hasMore:!1},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;i.delay(function(){e.input&&(e.input.focus(),window.addEventListener("keydown",e.onEnter))},218),this.loadMembers(),this.loadOriginMemberIds()},t.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.onEnter),this.getMembersSub$.unsubscribe(),this.getOriginMembersSub$.unsubscribe(),this.searchMembersSub$&&this.searchMembersSub$.unsubscribe()},t.prototype.componentDidUpdate=function(e,t){var n=this.state.query.trim();n!==t.query.trim()&&(n?this.searchMembers(n):this.setState({searchResults:[]}))},t.prototype.renderSearchBar=function(){return o.createElement("input",{ref:this.refInput,className:"member-invite-search form-control",placeholder:c.get("member.invite.input.placeholder"),value:this.state.query,onChange:this.onChange,onKeyDown:this.onKeyDown})},t.prototype.renderTail=function(e){return(this.isProtected(e)||this.isSelected(e))&&o.createElement(u.Icon,{name:"tick"})},t.prototype.renderMembers=function(){var e=this;return this.getSortedMembers().map(function(t,n){var r=t._userId,i=a()("member-item-wrapper flex-horiz flex-vcenter",{protected:e.isProtected(r)});return o.createElement("li",{className:i,key:r,onClick:function(){return e.onMemberSelect(n)}},o.createElement(l.a,{name:t.name,size:"small",avatarUrl:t.avatarUrl}),e.renderTail(r))})},t.prototype.renderMemberLabel=function(){var e=this.props.memberLabel;return e&&o.createElement("p",{className:"member-invite-label"},e)},t.prototype.renderLoading=function(){return this.state.isLoading&&o.createElement(d.a,null)},t.prototype.renderLoadMore=function(){return!this.state.query.trim()&&o.createElement(p.LoadMore,{onEnter:this.loadMembers,hasMore:this.state.hasMore,endWith:null})},t.prototype.renderMemberList=function(){return o.createElement("div",{className:"member-invite-members thin-scroll"},this.renderLoading(),o.createElement(f,{ref:this.refSelect,focusable:!1,index:-1,onEnter:this.onMemberSelect},!this.state.isLoading&&this.renderMembers()),this.renderLoadMore())},t.prototype.renderSubmitButton=function(){var e=this.state.selected.length;return o.createElement("footer",null,o.createElement(u.Button,{className:"member-invite-submit",onClick:this.onSubmit},e>0?c.get("member.list.submit",e):c.get("member.list.submit.zero")))},t.prototype.render=function(){return o.createElement("div",{className:"member-invite"},this.renderSearchBar(),this.renderMemberLabel(),this.renderMemberList(),this.renderSubmitButton())},t.defaultProps={removable:!0,includes:[]},t}(o.PureComponent);n.d(t,"MemberInvite",function(){return g}),n.d(t,"MemberInviteProps",function(){}),n("e75nvevp")},eVKQYjBk:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;i=n("a+N5u/Cl"),s=n("CrgVhEYo").getDescription,o=n("CMQjtSNt"),r=n("WjrpElRr"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="TaskReminderView",t.prototype.className="task-reminder-view",t.prototype.events={"click .reminder-handler:not(.disabled)":"toggleReminderPopover"},t.prototype.initialize=function(e){return this.taskModel=e.taskModel,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){var e,n,o;if(this.taskModel)return o=this.taskModel.toJSON(),n=this.reminderMembersCollection.toJSON(),e=i.extend(o,{permissions:this.taskModel.hasPermissions("put","put.reminder"),reminderTitle:o.reminder&&s(o,o.reminder,n)}),this.$el.html(r(e)),t.__super__.render.apply(this,arguments)},t}()},eXJ3Aer9:function(e,t,n){"use strict";n.r(t),n.d(t,"OrganizationPortalBridge",function(){return i});var r=n("ctsD9mWH"),o=n("7JhjQgus"),i=function(){function e(){}return e.assign=function(e){r.store.dispatch(o.a.assignDataToOrganizationPortal(e))},e.assignOrganizationData=function(e){r.store.dispatch(o.a.assignOrganizationData(e))},e.assignProjectFilter=function(e){r.store.dispatch(o.a.setDefaultProjectFilter(e))},e.changeProjectTags=function(){r.store.dispatch(o.a.updateByProjectTagsChanged())},e.unmount=function(){r.store.dispatch(o.a.unmountOrganizationPortal())},e.forceRefreshPortalForOnboarding=function(){r.store.dispatch(o.a.forceRefreshPortalForOnboarding())},e}()},ecy4I4Uq:function(e,t,n){e.exports=function(e){var t,r,o="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),i="",s=n("2qRnoGmE");i+='<div class="detail-picker-menu flex-static"> <div class="content-header"> ',"team"==e.objType?(i+=' <div class="detail-picker-img team-icon icon ',e.card.style.name?i+=""+e.card.style.name:i+="icon-team-tie",i+='" ',e.card.style.color?i+='style="color:'+e.card.style.color+'"':i+='style="color:#8193BA"',i+='> </div> <div class="card-detail"> <h4 class="card-name">'+o(e.card.name)+"</h4> ",s.FEATURES.showMemberCount&&(i+=' <p class="card-description">'+tb_i18n.get("team.members.count",e.membersCount)+"</p> "),i+=" </div> "):(i+=' <div class="detail-picker-img avatar img-36 img-circle ',e.card.avatarUrl||(i+="no-avatar"),i+='" ',e.card.avatarUrl&&(i+='style="background-image: url('+e.card.avatarUrl+');"'),i+='> </div> <div class="card-detail"> <h4 class="card-name"> '+o(e.card.name)+" ",e.card.isDisabled&&(i+=' <span class="icon icon-disable hinted" data-title="'+tb_i18n.get("organization.member.disabled")+'"></span> '),i+=' </h4> <p class="card-description">'+o(e.card.title||e.card.email)+"</p> </div> "),i+=' </div> <ul class="sub-menu-picker"> ';var a=e.subItems;if(a)for(var c,l=-1,u=a.length-1;l<u;)i+=' <li class="sub-menu-item" data-type="'+(c=a[l+=1]).type+'"> <a class="sub-menu-handler" data-gta="{action: \'switch '+e.objType+" tab', type: '"+c.type+'\'}"> <span class="icon '+c.icon+'"></span> <span class="menu-title">'+c.title+"</span> </a> </li> ";return i+=' </ul></div><div class="detail-picker-content flex-fill thin-scroll"></div>'}},egP4WLFV:function(e,t){e.exports=function(e){var t='<div class="archive-panel-left thin-scroll flex-static"> <ul class="archive-menu"> ',n=e.archives;if(n)for(var r,o=-1,i=n.length-1;o<i;)t+=' <li class="archive-item" data-type="'+(r=n[o+=1]).type+'" data-gta="event" data-label="show '+r.label+' archives"> <span class="icon '+r.icon+'"></span> <span class="archive-title">'+r.title+"</span> </li> ";return t+=' </ul></div><div class="archive-panel-right flex-vert flex-fill"> <header class="archive-list-header flex-static"> <div class="flex-horiz flex-between"> <span>'+tb_i18n.get("archive.list.header.name")+"</span> <span>"+tb_i18n.get("archive.list.header.update")+'</span> </div> </header> <ul class="archive-list thin-scroll flex-fill"></ul></div>'}},"eh/6l5m9":function(e,t,n){},"ekGk+avW":function(e,t,n){var r,o,i={}.hasOwnProperty;o=n("vmWJWrVe"),r=n("80iZGukZ").TeamProjects,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="TeamProjectsView",t.prototype.className="team-projects-view",t.prototype.initialize=function(e){return this.teamModel=e.cardModel,this.organizationModel=e.objectModel,this.renderBasic()},t.prototype.renderBasic=function(){return this.requestReactView(this.el,r,{team:this.teamModel.toJSON(),canManageTeam:this.organizationModel.hasPermissions("team.manage")})},t}()},ekrwq9FP:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("XHxZqXzL"),a=n("QdDHtIVR"),c=n("GESwhXbR"),l={collection:{type:"folder"},entry:{type:"entry"},event:{type:"event"},post:{type:"post"},task:{type:"task"},testcase:{type:"execute testcase"},work:{type:"file",segment:"file detail"}},u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){return i.a.createElement(s.a,{className:this.props.className,title:this.props.title,"data-gta":JSON.stringify((e=this.props.type,t=this.props.isSubtask,r.a({},l[e],{action:"copy link",control:"More Menu"},t?{type:"subtask"}:{})))},i.a.createElement(c.Icon,{name:"link"}));var e,t},t}(o.PureComponent),p=Object(a.b)(u);n.d(t,"ObjectLink",function(){return p})},"emKJ+GRy":function(e,t,n){e.exports=n.p+"images/o_liwu@2x.9b5e4f2f.png"},en987hhL:function(e,t,n){"use strict";n.r(t);var r=n("4BeYQFX4"),o=n.n(r),i=n("IaFtV71y"),s=n.n(i),a=new o.a({id:"angle-invisible-gray",use:"angle-invisible-gray-usage",viewBox:"0 0 8 16",content:'<symbol viewBox="0 0 8 16" id="angle-invisible-gray"><path fill="#D9D9D9" d="M7.997 16H6.302c-.555 0-1.279-.36-1.614-.8L.511 9.704c-.67-.882-.682-2.317-.029-3.199L4.699.807C5.03.36 5.742 0 6.302 0h1.695v16z" /><path fill="#CCCCCC" d="M1.957 11.606L.51 9.704c-.67-.882-.682-2.317-.029-3.199L4.699.807c.216-.292.597-.548.99-.69l-3.732 11.49zm3.4 4.13l2.64-8.122V16H6.302c-.295 0-.638-.102-.945-.263z" /></symbol>'});s.a.add(a);t.default=a},eppvX3IL:function(e,t,n){e.exports=n.p+"images/d_feizao@2x.babf77a3.png"},eubUSX4T:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("a+N5u/Cl"),r=n("VuB9cZyl"),o=n("8N+zwa3A"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="upload-works",t.prototype.model=o,t.prototype.addWorks=function(e,t){var n,r;return t||(t={}),n=[],i.each(e,(r=this,function(e){if(!r.get(e._id))return e._parentId=t._parentId||r._boundToObjectId,e=i.omit(e,"thumbnail","filePath"),n.push(e)})),n.length?(t.url="works",t.attrs={works:n},t.attrs._parentId=t._parentId||this._boundToObjectId,t.attrs._projectId=t._projectId||e[0]._projectId,this.sync("create",this,t)):"function"==typeof t.success?t.success(e):void 0},t.prototype.getUploadingCount=function(){return this.where({completed:!1}).length},t}()},eupXItUO:function(e,t,n){var r,o,i,s;i=n("a+N5u/Cl"),r=n("q1z7EYOi"),o=n("wu4EEviu"),s=n("JLEQYBrM"),e.exports=function(){function e(){return this.bridge=i.extend({},r.Events),this._bindEvents(),this.bridge}return e.prototype._bindEvents=function(){var e;return":action:",o.on(":action:",(e=this,function(t){var n;return"function"==typeof s[n=t.action]?s[n](t,e.bridge):void 0}))},e}()},ewKRJkVa:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("17x9q+7Q"),l=n("oRqJmROU"),u=n("RLGFXQAd"),p=n("L7QuDhxB"),d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.hintRef=i.a.createRef(),n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this.hintRef.current;e&&this.setState({hintHeight:e.getBoundingClientRect().height+10})},t.prototype.render=function(){var e=this.props,t=e.hint,n=e.hintClass,o=e.hintStyle,s=(e.children,e.containerHeight),c=r.g(e,["hint","hintClass","hintStyle","children","containerHeight"]),d=t.constructor===String?i.a.createElement("p",null,t):t,h=Object(l.c)(s)&&Object(l.c)(this.state.hintHeight)?{customHeight:s-this.state.hintHeight}:{};return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,r.a({},c,h)),i.a.createElement("div",{className:a()(p["hint-wrapper"],n),style:o,ref:this.hintRef},d))},t.propTypes={hint:c.oneOfType([c.string,c.element]).isRequired,hintClass:c.string,hintStyle:c.objectOf(c.oneOfType([c.string,c.number])),containerHeight:c.number},t}(i.a.PureComponent)},"f3h/zoSc":function(e,t){e.exports=function(e){var t='<ul class="search-items"> ',n=e;if(n)for(var r,o=-1,i=n.length-1;o<i;)t+=' <li class="search-item flex flex-vcenter"> <a class="check-box jinshuju checked" data-type="'+(r=n[o+=1]).tb_type+'" data-token="'+r.token+'" data-number="'+r.entry.serial_number+'"> <span class="icon icon-tick"></span> </a> <p class="single-data">'+r.entry.serial_number+": "+r.entry.content+"</p> </li> ";return t+="</ul>"}},f8E1NkYv:function(e,t,n){"use strict";n.r(t),n.d(t,"ProjectSuspendTips",function(){return d});var r=n("a+N5u/Cl"),o=n.n(r),i=n("q1tIBJhx"),s=n.n(i),a=n("wd/RKGTj"),c=n.n(a),l=n("tLZJUYWX"),u=n("GESwhXbR"),p=n("KSXnA8QZ"),d=function(e){var t=c()(e.endDate),n=s.a.createElement(p.a,{html:l.get("project.suspend.tips",t.format("LL")),onClick:o.a.noop});return s.a.createElement(u.GlobalNotice,{type:"info",message:n,onHide:e.onClose})}},fCNqCmfQ:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";e.isSubtaskList&&(o+='<li class="group-name"><p>'+tb_i18n.get("subtask")+"</p></li>");var i=e.tasks;if(i)for(var s,a=-1,c=i.length-1;a<c;)s=i[a+=1],o+='<li class="task',e.fromSmart&&(o+=" smart-task"),s.disabled&&(o+=" disabled"),s.isDone&&(o+=" done"),o+=' hinted" data-id="'+s._id+'" data-title="'+r(s.content)+'"> <div class="check-box non-checkable"> <span class="icon icon-tick"></span> </div> ',s.executor&&s.executor.avatarUrl?o+=' <div class="avatar img-circle img-24" style="background-image:url('+s.executor.avatarUrl+')"></div> ':o+=' <div class="avatar img-circle img-24 no-avatar"></div> ',o+=' <div class="task-content-wrapper"> <span class="task-content link-search-content">'+r(s.content)+'</span> </div> <span class="task-id-placeholder"></span></li>';return o}},fGXGG6UZ:function(e,t,n){var r,o,i,s;e.exports={_views:[],views:function(){return s.pluck(this._views,"view")},add:function(e,t){if(e instanceof o.Constructor)return this._views.push({view:e,taskId:t})},delete:function(e){return this._views=s.reject(this._views,function(t){return t.view===e})},checkParentPath:function(e,t){var n,r,o;for(n=!1,r=s.find(this._views,function(t){return t.view===e}),o=e;r&&(r=s.find(this._views,function(e){return e.childNode===o}))&&!(n=r.taskId===t);)o=r.view;return n},updateTaskDetail:function(e){var t,n,a,c;if(c=s.last(this._views),a=c.view)return a.trigger("dataFetching"),n=function(e){return e instanceof o.Constructor?(a.trigger("dataFetched",e),a.listenTo(e,"remove",a.close),c.childNode=e):a.trigger("dataError")},t=function(){return a.trigger("dataError"),i.error({message:tb_i18n.get("authority.get.error"),description:tb_i18n.get("authority.get.error.content")})},a.parentView instanceof r.Constructor?a.requestSubView(r,{objectType:"task",objectId:e,hasLink:!1,success:n.bind(this),error:t}):a.requestSubView(o,{_taskId:e,success:n.bind(this),error:t})}},s=n("a+N5u/Cl"),i=n("GESwhXbR").Toast,r=n("PCjZn8k4"),o=n("hy/w7Vok")},fIWqDpgJ:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<div class="object-nav"> ',i=e;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=' <a class="btn url-handler" href="'+(s=i[a+=1]).url+"\" data-type='"+s.type+"'>"+r(s.title)+"</a> ";return o+="</div>"}},fKO3iLmS:function(e,t,n){e.exports={"task-unique-id":"task-unique-id__2hrc"}},fMev4aLY:function(e,t,n){"use strict";n.r(t),n.d(t,"ProgressComponent",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("tLZJUYWX"),c=n("GESwhXbR"),l=(n("EWBwGbZz"),n("3eMzznN/").adjustNumberByStep),u=function(e){function t(t){var n=e.call(this,t)||this;return n.onClickEdit=function(){n.setState(r.a({},n.state,{errMsg:"",editing:!0})),n.props.gtaHandler&&n.props.gtaHandler("add progress")},n.onClickCancel=function(){n.setState(r.a({},n.state,{editing:!1,progressValue:n.getProgressValue(n.props.progress)}))},n.validateProgressInput=function(e){return/(^100((\.?|(\.0)))$)|(^\d{0,2}((\.?|(\.\d{1})))$)/.test(e)},n.onChange=function(e){var t=e.target.value;n.changeState(t)},n.onClickSave=function(){var e=parseFloat(n.state.progressValue)||0;n.props.onClickSave(e),n.setState(r.a({},n.state,{editing:!1,progressValue:n.getProgressValue(e)}))},n.adjustNumber=function(e){return function(){var t=Number(n.state.progressValue)||0,r=l(t,e);n.changeState(r.toString())}},n.state={editing:!1,errMsg:"",progressValue:n.getProgressValue(n.props.progress)},n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState(r.a({},this.state,{errMsg:"",editing:!1,progressValue:this.getProgressValue(e.progress)}))},t.prototype.getProgressValue=function(e){return e?String(e):""},t.prototype.changeState=function(e){var t=this.validateProgressInput(e);!t&&Number(e)>100&&this.setState(r.a({},this.state,{errMsg:a.get("task.progress.add.progress.exceed",100)})),t&&this.setState(r.a({},this.state,{progressValue:e,errMsg:""}))},t.prototype.renderAdjustNumberIcons=function(){return o.createElement("div",{className:"adjust-number-wrapper text-center"},o.createElement("a",{className:"icon icon-chevron-up",onClick:this.adjustNumber("increase")}),o.createElement("a",{className:"icon icon-chevron-down",onClick:this.adjustNumber("decrease")}))},t.prototype.renderErr=function(){var e=this.state.errMsg;return e&&o.createElement("div",{className:"task-progress-err"},e)},t.prototype.renderHandler=function(){return o.createElement("div",{className:"btn-handlers text-right"},o.createElement("a",{className:"btn-cancel",onClick:this.onClickCancel},a.get("cancel")),o.createElement("a",{className:"btn btn-primary btn-save",onClick:this.onClickSave},a.get("save")))},t.prototype.renderEditContent=function(){var e=this.state,t=e.progressValue,n=e.errMsg,r=s()("form-control",{"has-error":!!n});return o.createElement("div",{className:"progress-editing-container"},o.createElement("input",{className:r,value:t,onChange:this.onChange,placeholder:a.get("to.be.added")}),this.renderAdjustNumberIcons(),this.renderErr(),this.renderHandler())},t.prototype.renderContent=function(){var e=this.props,t=e.progress,n=e.hasPermission,r=t?t+"%":a.get("to.be.added"),i=s()("task-progress-content",{"has-content":!!t,"cursor-not-allowed":!n});return n?o.createElement("div",{className:i,onClick:this.onClickEdit},o.createElement(c.Tooltip,{title:a.get("clickToEdit")},r)):o.createElement("div",{className:i},r)},t.prototype.renderTitle=function(){return o.createElement("div",{className:"detail-infos-aside"},o.createElement(c.Icon,{name:"normal"}),o.createElement("span",null,a.get("taskProgress")))},t.prototype.render=function(){var e=this.state.editing;return o.createElement("div",{className:"task-progress-container flex flex-vcenter"},this.renderTitle(),o.createElement("div",{className:"detail-infos-content flex-space"},!e&&this.renderContent(),e&&this.renderEditContent()))},t}(o.PureComponent)},"fO/hx3w1":function(e,t,n){e.exports={"detail-container":"detail-container__2WxP"}},"fPt7YS//":function(e,t,n){e.exports=n.p+"images/d_yiwen@2x.2dee9208.png"},"fROYW9B/":function(e,t,n){"use strict";n.r(t),n.d(t,"ConfigComponent",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("17x9q+7Q"),s=n("tLZJUYWX"),a=n("GESwhXbR"),c=n("oRPyOBnq"),l=n("fVL/a9Qu");n("8aAzMfPX");var u=function(e){function t(t){var n=e.call(this,t)||this;n.onOpenDropdown=function(){n.props.gtaHandler&&n.props.gtaHandler("toggle type list")},n.onClickConfig=function(e){n.props.gtaHandler&&n.props.gtaHandler("switch type"),n.setState(r.a({},n.state,{currentConfig:e}),function(){n.props.onSelectConfig(e)})};var o=t.defaultConfig||t.scenarioFieldConfigs[0];return n.state={currentConfig:r.a({},o)},n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=e.defaultConfig||e.scenarioFieldConfigs[0];this.setState(r.a({},this.state,{currentConfig:r.a({},t)}))},t.prototype.renderMenus=function(){var e=this;return this.props.scenarioFieldConfigs.map(function(t){var n=t._id===e.state.currentConfig._id;return o.createElement(c.FieldConfigMenuItem,{key:t._id,boundToObjectType:e.props.boundToObjectType,isChosen:n,config:t,onClickConfig:e.onClickConfig})})},t.prototype.renderConfigMenu=function(){var e="task"===this.props.boundToObjectType?s.get("task.creator.fieldConfig.add.config"):s.get("event.creator.fieldConfig.add.config"),t=l["menu-item"]+" creator-menu-item";return this.props.hasPermission&&o.createElement("li",{className:t,onClick:this.props.onRequestConfigView},o.createElement(a.Icon,{name:"circle-plus-o"}),e)},t.prototype.renderMenuItems=function(){return o.createElement("ul",{className:"menu-items-wrapper thin-scroll"},this.renderConfigMenu(),this.renderMenus())},t.prototype.renderTextHint=function(){return this.props.showTextHint?"string"==typeof this.props.showTextHint?o.createElement("span",{className:"config-text-hint"},this.props.showTextHint):o.createElement("span",{className:"config-text-hint"},s.get("type"),s.get("colon")):null},t.prototype.render=function(){var e=this.props.popupNested,t=void 0===e||e;return o.createElement(a.Dropdown,{className:"scenario-field-config-creator",content:this.renderMenuItems(),nested:t,placement:this.props.popupPlacement||"bottomLeft",onOpen:this.onOpenDropdown},o.createElement("div",{className:"scenario-field-config-dropdown-toggler"},this.renderTextHint(),o.createElement(c.FieldIcon,{icon:this.state.currentConfig.icon,type:this.props.boundToObjectType}),o.createElement("span",{className:"config-name"},this.state.currentConfig.name),o.createElement(a.Icon,{name:"chevron-down"})))},t.propTypes={defaultConfig:i.object,scenarioFieldConfigs:i.array.isRequired,boundToObjectType:i.oneOf(["task","event"]).isRequired,showTextHint:i.oneOfType([i.bool,i.string]),popupNested:i.bool,popupPlacement:i.string,hasPermission:i.bool,onRequestConfigView:i.func,onSelectConfig:i.func.isRequired,gtaHandler:i.func},t}(o.PureComponent)},fYwV8xMK:function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("VuB9cZyl"),o=n("I+S24KlG"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="versions",t.prototype.boundToObjectType="work",t.prototype.model=o,t.prototype.sync=function(e,n,r){return null==r&&(r={}),r.url="works/"+this._boundToObjectId+"/versions",t.__super__.sync.call(this,e,n,r)},t.prototype.comparator=function(e,t){var n;return n=new Date(e.get("created")),new Date(t.get("created"))-n},t}()},"fa8wX/46":function(e,t,n){e.exports=n.p+"images/d_erha@2x.8c4b0b0b.png"},fbEqbFyH:function(e,t,n){"use strict";n.r(t),n.d(t,"OnboardingOrgInviteComponent",function(){return v});var r=n("mrSGxOB2"),o=n("a+N5u/Cl"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("q1tIBJhx"),l=n("tLZJUYWX"),u=n("GESwhXbR"),p=n("sa1Ed382"),d=n("s0r7VfKc"),h=n("ms7sa36K"),m=n("j/+BlrNb"),f=n("2qRnoGmE"),g=n("zvueJ76V"),v=function(e){function t(t){var n=e.call(this,t)||this;return n.onClose=function(){return r.b(n,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return this.props.onClose(),"agile-template"!==p.onboarding.runtime.memread("createFrom")?[3,2]:[4,p.APP.openCreator("project",{_fsm_state:"from-template",selectedTemplate:{categories:["rd"]},_direct_template:"agile"})];case 1:e.sent(),e.label=2;case 2:return[2]}})})},n.onSkip=function(){p.gta.event({action:"skip add org member",control:"Onboarding"}),n.onClose()},n.onInvite=function(){var e=Array.from(n.state.inviteList);e.forEach(function(e){e.email&&!e.name&&(e.name=e.email.split("@")[0])});var t=!0;i.a.every(e,function(e){return!e.email})&&e[0]&&(e[0].validEmail=!1,t=!1),n.setState({isInviting:t,inviteList:e});var r=p.PREFERENCE.get("lastWorkspace"),o=e.filter(function(e){return""!==e.email}).map(function(e){return e.email});0!==o.length&&(p.gta.event({action:"added member",type:"organization",control:"Onboarding"}),n.inviteMembers$=d.default.fetch.inviteMemberByEmail(r,o).subscribe({next:function(){return n.onClose()},error:function(){n.setState({isInviting:!1}),u.Toast.error(l.get("onboarding.view.org.invite.essage.failed"))}}))},n.onPressEnter=function(e){var t=e.target;t.blur(),setTimeout(function(){t&&t.parentNode&&t.parentNode.nextSibling&&t.parentNode.nextSibling.firstChild&&t.parentNode.nextSibling.firstChild.focus&&t.parentNode.nextSibling.firstChild.focus()},0)},n.validateInviteList=function(){var e=Array.from(n.state.inviteList);e.forEach(function(e){return n.validateItem(e)}),n.setState({inviteList:e})},n.onFocus=function(e){return function(){var t=e===n.state.inviteList.length-1;p.gta.event({action:"add member",type:"organization",control:"Onboarding"}),t&&n.pushInviteItem()}},n.pushInviteItem=function(){var e=Array.from(n.state.inviteList);e.push({name:"",email:"",validEmail:!0}),n.setState({inviteList:e})},n.onQRcodeClick=function(){var e=p.PREFERENCE.get("lastWorkspace");n.props.openQRcode(e,n.state.orgMemberCount)},n.state={orgMemberCount:1,isInviting:!1,inviteList:[{name:"",email:"",validEmail:!0},{name:"",email:"",validEmail:!0},{name:"",email:"",validEmail:!0}]},n}return r.d(t,e),t.prototype.componentDidMount=function(){p.gta.event({action:"begin member invite",control:"Onboarding"})},t.prototype.componentWillUnmount=function(){null!=this.inviteMembers$&&this.inviteMembers$.unsubscribe(),this.inviteMembers$=null},t.prototype.validateItem=function(e){e.validEmail=!e.email&&!e.name||Object(h.b)(e.email)},t.prototype.renderQRCodeHandler=function(){return f.FEATURES.qrLinkInvite&&c.createElement(u.TextButton,{className:m["qrcode-handler"],color:"blue",onClick:this.onQRcodeClick},c.createElement(u.Icon,{name:"qrcode",size:16}),c.createElement("span",{className:m["qrcode-handler-text"]},l.get("project.memberadd.addMembersByLink")))},t.prototype.renderInviteList=function(){var e=this;return this.state.inviteList.map(function(t,n){var r,o=!e.state.isInviting&&1!==e.state.inviteList.length,i=a()("email-item",{invalid:!1===t.validEmail}),s=o?c.createElement(u.IconButton,{className:"remove-item",name:"remove",tabIndex:-1,onClick:function(){var t=Array.from(e.state.inviteList);t.splice(n,1),e.setState({inviteList:t})}}):null;return c.createElement("div",{className:m["invite-item"],key:n},c.createElement(u.Input,{className:i,value:t.email,onChange:(r="email",function(o){var i={validEmail:t.validEmail,name:"name"===r?o.target.value:t.name,email:"email"===r?o.target.value:t.email};"email"!==r||i.name&&0!==t.email.indexOf(t.name)||(i.name=i.email.split("@")[0]),!1===i.validEmail&&e.validateItem(i);var s=Array.from(e.state.inviteList);s.splice(n,1,i),e.setState({inviteList:s})}),onFocus:e.onFocus(n),onBlur:e.validateInviteList,onPressEnter:e.onPressEnter,disabled:e.state.isInviting,placeholder:l.get("onboarding.view.org.invite.placeholder.email")}),s)})},t.prototype.render=function(){var e=i.a.any(this.state.inviteList,function(e){return!1===e.validEmail});return c.createElement(u.Modal,{className:m.modal,opened:!0,onVisibleChange:this.onSkip,zIndex:104},c.createElement("img",{className:m.illustration,src:g}),c.createElement("div",{className:m["info-text"]},c.createElement("p",{className:"info-success"},l.get("onboarding.view.org.invite.create.success")),c.createElement("p",{className:"info-invite"},l.get("onboarding.view.org.invite.member.into.org"))),c.createElement("div",{className:m["invite-form"]},c.createElement("div",{className:"form-label"},l.get("onboarding.view.org.invite.team.member")),this.renderQRCodeHandler(),this.renderInviteList()),c.createElement("div",{className:m["modal-action"]},c.createElement(u.Button,{className:"send-invitation",disabled:e,onClick:this.onInvite,loading:this.state.isInviting},l.get("onboarding.view.org.invite.send.invitation")),c.createElement(u.Button,{type:"subtle",className:"cancel",onClick:this.onSkip,disabled:this.state.isInviting},l.get("onboarding.view.org.invite.skip"))))},t}(c.PureComponent)},fgCt0kht:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N=function(e,t){return function(){return e.apply(t,arguments)}},O={}.hasOwnProperty;w=n("a+N5u/Cl"),f=n("q1tIBJhx"),x=n("sa1Ed382"),n("bZr3G77e"),k=n("vmWJWrVe"),v=n("GESwhXbR").Toast,y=n("3eMzznN/"),b=n("RQ44psah"),g=n("HYobN8SQ"),n("ypWNgh6R"),_=n("OmupbwLD"),m=n("RLD3BeS/").RawHTMLWithAnchorFormatter,l=n("hg6sBHEu"),d=n("F1nFexqL"),i=n("9sOPw9dz"),c=n("uGcFUGYs"),j=n("WwBiRI+a"),M=j.projectUpgradeRequired,T=j.openOrganizationUpgradeProjectModal,a=n("mm5OMB1B"),p=n("1X9nTsXu"),s=n("odY26VIi"),u=n("85182E8g"),P=n("HUhQ835W"),C=P.dispatchMountAction,S=P.dispatchUnmountAction,I=n("NtzEC3Pa"),h=n("UBrRDAep"),o=n("/Y5FF5ZO"),E=n("bvmrLhnu").getProjectGtaType,r={posts:o.WallView,tasks:o.BoardView,works:o.LibraryView,events:o.EventsView,groupchat:o.GroupchatView,bookkeeping:o.BookkeepingView,plugin:o.PluginView,analytics:o.AnalyticsView,projectinfoapp:o.ProjectInfoView,testplan:o.TestplanAppView,story:o.SmartGroupView,bug:o.SmartGroupView,sprint:o.SmartGroupView,smartGroups:o.SmartGroupView},g.namespace("temp").namespace("organization_expiring"),e.exports=function(e){function t(){return this.canJoin=N(this.canJoin,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)O.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,k),t.prototype.viewName="ProjectAppView",t.prototype.className="project-app-view",t.prototype.remindUserJoinProjectToastId=null,t.prototype.initialize=function(e){var t;if(this.$el){if(!e.projectModel)throw new Error("initialize "+this.viewName+" must have projectModel");return this.options=w.extend({},e),this.projectModel=e.projectModel,t=u.get(0),this.organizationModel=t.get(this.projectModel.get("_organizationId")),C({projectId:this.projectModel.id}),y.trackRecentlyViewed("project",this.projectModel.id),this.enterProjectGta(),this.renderNavigation(),this.renderSuspendTips(),w.delay((n=this,function(){return n.navigationView.refreshNavs(),n.projectModel.payment.isExpired?n.renderOverdue():M(n.projectModel)?T(n.projectModel):n.organizationModel?n.tryRenderExcess():void 0}));var n}},t.prototype.renderNavigation=function(){var e;return e={projectModel:this.projectModel},this.navigationView=this.requestSubView(a,e),this.$el.append(this.navigationView.$el)},t.prototype.renderSuspendTips=function(){var e;return e=this.requestSubView(h,{projectModel:this.projectModel}),this.$el.append(e.$el)},t.prototype.canJoin=function(){var e,t,n,r;return n=this.projectModel.hasPermission("projecttag.join.project"),t=null!=(r=this.organizationModel)?r.hasPermission("organization.join.project"):void 0,"boolean"!=typeof(e=this.projectModel.isJoined())&&(e=!0),(t||n)&&!e},t.prototype.remindUserJoinProject=function(){if(this.canJoin())return this.remindUserJoinProjectToastId=v.info({message:f.createElement(m,{html:tb_i18n.get("project.join.tips"),onClick:(e=this,function(){return e.projectModel.join({success:function(){return document.location.reload()}})})}),duration:2e4});var e},t.prototype.renderApp=function(e,t){var n,o,i,a;return i=this.projectModel.getNavigations(),(o="plugin"===e)||~i[e]||(e="tasks"),this.projectModel.joinRoom(),"groupchat"!==e||this.projectModel.isJoined()||(e=this.projectModel.getFirstAppExclude("groupchat")),"testplan"===e&&(t.membersCollection=s.get(this.projectModel.id)),this.remindUserJoinProject(),e?((n=r[e]).lazy?n():Promise.resolve(n)).then((a=this,function(n){var r,i;if(o||a.currentAppName!==e){if(i=w.extend({},t,{appName:e}),a.currentAppName=e,null!=(r=a.currentAppView)&&r.remove(),a.currentAppView=a.requestSubView(n,i),!a.$el)return;a.$el.append(a.currentAppView.$el)}return a.navigationView.setApp(e),x.router.checkRoute(t.routeString,a.currentAppView)})):this.$el?this.$el.append(p()):void 0},t.prototype.renderOverdue=function(){var e;return(e=this.projectModel.payment).isUser?(this.requestSubView(d),this):(this.requestSubView(_).open(l,{_organizationId:this.projectModel.get("_organizationId"),projectModel:this.projectModel,onclose:function(){if(!e.isUser||!e.isProfessional)return x.router.navigate("/projects",{trigger:!0})}}),this)},t.prototype.tryRenderExcess=function(){var e,t,n,r;return r=this.organizationModel.getRoleScope(),this.organizationModel.payment.isStrictExceed?r>=1?this.requestSubView(_).open(c,{organizationId:this.organizationModel.id}):(t=tb_i18n.get("organization.settings.add.member.toplimit"),e=b.pay.orgAddMember(this.organizationModel.id),n=tb_i18n.get("organization.member.exceed.description",this.organizationModel.payment.memberQuota),this.requestSubView(_).open(i,{title:tb_i18n.get("organization.member.exceed"),content:n,confirmText:t,confirmHref:e})):this.organizationModel.payment.isSoftExceed&&I.alert.softExcessMember(this.organizationModel.id,r),this},t.prototype.updateUrl=function(e,t){var n;return"function"==typeof(n=this.currentAppView).updateUrl?n.updateUrl(e,t):void 0},t.prototype.enterProjectGta=function(){var e;return e=E(this.projectModel.toJSON()),x.gta.event({action:"project displayed",objectid:this.projectModel.id,fromTemplate:this.projectModel.get("_sourceId"),category:e})},t.prototype.remove=function(){return this.remindUserJoinProjectToastId&&v.close(this.remindUserJoinProjectToastId),S(),t.__super__.remove.apply(this,arguments)},t}()},fhg7Ktga:function(e,t,n){"use strict";var r=n("q1tIBJhx"),o=n.n(r),i=n("TSYQbtd+"),s=n.n(i),a=n("tLZJUYWX"),c=n.n(a),l=n("GESwhXbR"),u={get entry(){return c.a.get("entry")},get event(){return c.a.get("event")},get post(){return c.a.get("post")},get task(){return c.a.get("task")},get testcase(){return c.a.get("testcase")},get work(){return c.a.get("file")}},p=n("3eOOw3Kj"),d=n.n(p),h=function(e){var t,n=s()(e.className,d.a["object-archive-status"]),r=(t=e.objectType,u[t]),i=c.a.get("archived.header.message",r);return o.a.createElement("div",{className:n},o.a.createElement(l.Icon,{name:"trash"}),o.a.createElement("span",{className:"object-archive-status__text",title:i},i))};n.d(t,"a",function(){return h})},fm2ngtub:function(e,t,n){e.exports=n.p+"images/d_shuijiao@2x.7744d8ed.png"},"fnKB+hQu":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";return e.isNew?o+=' <li> <a class="member-item" data-param="'+e.params+'"> '+r(e.name||e.value)+" </a> </li>":(o+=' <li> <a class="member-item ',e.invited&&(o+="added"),o+='"> <div class="avatar img-circle img-24" style="background-image:url('+e.avatarUrl+');"> </div> '+r(e.name)+" ",e.isActive&&(o+=" "+r(e.title||e.location||"")+" "),o+=" </a> </li>"),o}},fnRWEXeT:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h={}.hasOwnProperty;p=n("a+N5u/Cl"),u=n("vmWJWrVe"),o=n("E86Oiqt3"),a=n("77NnVLwu"),s=n("85182E8g"),c=n("nL4olqOP"),r=n("iREo7zOO"),l=n("/xGqNlTL"),i=n("Twz036/r"),d=n("H72dUcNY").projectsFilter,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)h.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,u),t.prototype.viewName="CollectionPickerView",t.prototype.className="collections-picker modal-dialog flex-fill",t.prototype.events={"click .picker-handler.collection:not(.disabled)":"switchProject","click .confirm-handler":"submit","click .cancel-handler":"close"},t.prototype.initialize=function(e){var t,n,r,o,i,s,l,u;return this.title=e.title,this._projectId=e._projectId,this._organizationId=e._organizationId,this._parentId=e._parentId,this.disabled=e.disabled,this.isWorkspace=e.isWorkspace,this.isForkOrMove=e.isForkOrMove,this.isNoCollectionSelected=null!=(t=e.isNoCollectionSelected)&&t,this.isGlobalUpload=e.isGlobalUpload,this.select=e.select,this.onClosed=e.onClosed,this.excludes=null!=(n=e.excludes)?n:[],this.multiple=null!=(r=e.multiple)&&r,this.allProjects=null==(o=e.allProjects)||o,this.onlyCollections=null==(i=e.onlyCollections)||i,this.onlyWorks=null!=(s=e.onlyWorks)&&s,this.withWorkUpload=e.withWorkUpload,this.onUpload=null!=(l=e.onUpload)?l:function(){},this.projectsCollection=c.get(0),this.target=null,this._projectId?this.subscribe(a.fetch$(this._projectId).do((u=this,function(e){return u.projectModel=e,u.initView()}))):this.initView()},t.prototype.initView=function(){return this.renderBasic(),this.renderProjects(),this.renderFilePicker(),this.fadeInTimer=p.delay((e=this,function(){return e.$el.addClass("in")}));var e},t.prototype.getProjectWithDisabledHint=function(e){return e.map((t=this,function(e){return Object.assign({},e,{projects:e.projects.map(function(e){var n;return n=function(){switch(e.getCopyOrMoveStatus("works")){case"closed":return tb_i18n.get("target.work.closed");case"denied":if("fork"===this.isForkOrMove)return tb_i18n.get("target.work.fork.post.denied");if("move"===this.isForkOrMove)return tb_i18n.get("target.work.move.post.denied");if(this.isGlobalUpload)return tb_i18n.get("target.work.upload.post.denied");break;default:return""}}.call(t),Object.assign(e.toJSON(),{disabledHint:n})})})}));var t},t.prototype.createCollection=function(e,t){return new Promise((n=this,function(r,i){return(new o).save(null,{attrs:{title:e,_projectId:n._projectId,_parentId:t},wait:!0,success:r,error:i})}));var n},t.prototype.canSelectProjectAsRoot=function(){return this.allProjects&&!this.onlyWorks},t.prototype.submit=function(){var e,t;return!this.target&&this.canSelectProjectAsRoot()&&(t=new o({_id:null!=(e=this.projectModel)?e.get("_rootCollectionId"):void 0,title:tb_i18n.get("library.title"),_projectId:this._projectId}),this.multiple?this.target={collections:[t]}:this.target=t),this.select(this.target),this.close()},t.prototype.switchProject=function(e){return this._projectId=$(e.currentTarget).data("id"),this._parentId=null,this._projectId?this.subscribe(a.fetch$(this._projectId).do((t=this,function(e){return t.projectModel=e,t.switchProjectUpdate()}))):(this.projectModel=void 0,void this.switchProjectUpdate());var t},t.prototype.switchProjectUpdate=function(){return this.renderProjects(),this.renderFilePicker()},t.prototype.isWithWorkUpload=function(){var e,t;return(null!=(e=this.projectModel)?e.hasPermission("work.post"):void 0)&&(!this.projectModel||(null!=(t=this.projectModel)?t.isAppEnabled("works"):void 0))},t.prototype.isWithCollectionCreator=function(){var e,t;return(null!=(e=this.projectModel)?e.hasPermission("collection.post"):void 0)&&(!this.projectModel||(null!=(t=this.projectModel)?t.isAppEnabled("works"):void 0))},t.prototype.renderFilePicker=function(){var e,t;return null!=(e=this.$filePickerView)&&e.remove(),this.$filePickerView=this.requestSubView(i,{disabled:this.disabled,excludes:this.excludes,projectId:this._projectId,parentId:this._parentId,multiple:this.multiple,showWorks:!this.onlyCollections,onlyWorks:this.onlyWorks,withWorkUpload:this.withWorkUpload&&this.isWithWorkUpload(),withCollectionCreator:this.isWithCollectionCreator(),showRootCollection:!this.allProjects,onUpload:this.onUpload.bind(this),onCollectionCreate:this.createCollection.bind(this),onChange:(t=this,function(e){var n,r,o;return o=e.works,n=e.collections,r=t.$confirmHandler.prop("disabled"),t.onlyWorks?(t.target=o,r=0===o.length):t.multiple?t.target={works:o,collections:n}:(t.target=n[0],r=0===n.length),t.canSelectProjectAsRoot()&&(r=!1),t.$confirmHandler.prop("disabled",r)})}),this.$column.html(this.$filePickerView.$el)},t.prototype.renderProjects=function(){var e,t,n,r;if(this.allProjects)return t=s.get(0),n=this.isWorkspace?this.projectsCollection.getGroupedByWorkspace():this.projectsCollection.getGroupByOrganization(t),(this.isForkOrMove||this.isGlobalUpload)&&(n=this.getProjectWithDisabledHint(n)),e=(null!=(r=this.projectModel)?r.get("_organizationId"):void 0)||this._organizationId,n=n.map(function(t){return Object.assign(t,{projects:d(e)(t.projects)})}),this.$projectsColumn.html(l({_projectId:this._projectId,projects:n}))},t.prototype.renderBasic=function(){var e,t;return this.isNoCollectionSelected?"move"===this.isForkOrMove?e=tb_i18n.get("work.picker.move.hint"):"fork"===this.isForkOrMove&&(e=tb_i18n.get("work.picker.fork.hint")):"move"===this.isForkOrMove?e=tb_i18n.get("collection.picker.move.hint"):"fork"===this.isForkOrMove&&(e=tb_i18n.get("collection.picker.fork.hint")),this.$el.html(r({_projectId:this._projectId,title:this.title||tb_i18n.get("collection.picker.select.collection"),hint:e,showHint:!!this.isForkOrMove,permissions:null!=(t=this.projectModel)?t.hasPermissions("collection.post"):void 0})),this.$confirmHandler=this.$(".confirm-handler"),this.$projectsColumn=this.$(".column-projects"),this.$column=this.$(".picker-column"),this.$confirmHandler.prop("disabled",!this.canSelectProjectAsRoot())},t.prototype.close=function(){var e,t;return"function"==typeof this.onClosed&&this.onClosed(),"WindowView"===(null!=(t=this.parentView)?t.viewName:void 0)?"function"==typeof(e=this.parentView).remove?e.remove():void 0:this.remove()},t.prototype.remove=function(){return clearTimeout(this.fadeInTimer),t.__super__.remove.apply(this,arguments)},t}()},fpeYzDX0:function(e,t,n){"use strict";n.r(t);var r=n("q1tIBJhx"),o=n.n(r),i=n("TSYQbtd+"),s=n.n(i),a=n("tLZJUYWX"),c=n.n(a),l=n("90U+kJWN"),u=n("e2BLJDjb"),p={entry:n("noT5B027").default,event:n("Ee2Pn0VN").default,post:n("RIMtnZSF").default,task:n("QqFE17Hu").default,testcase:n("db4+OjB4").default,work:n("ZaifPgkD").default},d=n("E3j+w83k"),h=n.n(d),m=n("u//1fy1x"),f=Object(m.default)(h.a),g=n("mrSGxOB2"),v=n("pMTT9VcQ"),b=n.n(v),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g.d(t,e),t.prototype.render=function(){var e=p[this.props.type],t=s()(this.props.className,b.a["object-icon"]);return o.a.createElement("svg",g.a({},this.props,{className:t}),o.a.createElement("use",{xlinkHref:"#"+e.id}))},t}(o.a.PureComponent),k=n("aYY9630l"),_=n.n(k),w=function(e){var t=e.object,n=e.objectModel,r=e.projectModel;return function(e){return Object(u.e)(e)&&!Object(l.isIndieTask)(e)||Object(u.a)(e)}(t)&&n&&r?o.a.createElement(f,{objectModel:n,projectModel:r,boundToObjectType:t.objectType,hideTitle:!0}):o.a.createElement("div",{className:s()(_.a["object-type"],e.className)},o.a.createElement(y,{type:t.objectType,className:"object-type__icon"}),o.a.createElement("div",{className:"object-type__text"},function(e){switch(e.objectType){case"task":return Object(l.isIndieTask)(e)?c.a.get("task.detail.free"):c.a.get("task");case"event":return Object(l.isIndieEvent)(e)?c.a.get("event.detail.free"):c.a.get("event");case"post":return c.a.get("post");case"work":return c.a.get("file");case"entry":return c.a.get("bookkeeping");case"testcase":return Object(l.isIndieTestcase)(e)?c.a.get("usercase"):c.a.get("testcase")}}(t)))};n.d(t,"ObjectType",function(){return w})},fqc9cz9t:function(e,t,n){e.exports={separator:"separator__2B78","object-ellipsis-path":"object-ellipsis-path__ke_A",portion:"portion__3IMC",ellipsis:"ellipsis__iwU3","menu-item":"menu-item__3t3j","portion-text":"portion-text__12e9"}},fxEyMcXL:function(e,t,n){e.exports=n.p+"images/d_qinqin@2x.bc4a710a.png"},"g+V4+aKB":function(e,t,n){"use strict";var r;n.r(t),n.d(t,"ShareStatus",function(){return r}),n.d(t,"isReadonlyShare",function(){return o}),function(e){e[e.READONLY=1]="READONLY",e[e.INVITE=2]="INVITE"}(r||(r={}));var o=function(e){return e===r.READONLY}},"g/otyo9p":function(e,t,n){"use strict";n.r(t);var r,o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n.n(i),a=n("i8i4LrFt"),c=n("a+N5u/Cl"),l=n.n(c),u=function(){return function(e){var t=this;this.Component=e,this.mountNode=null,this.open=function(e){t.close(),t.mountNode||(t.mountNode=document.createElement("div"),document.querySelector("body").appendChild(t.mountNode));var n=t.Component;Object(a.render)(s.a.createElement(n,o.a({},e,{close:function(){"close"in e&&l.a.isFunction(e.close)&&e.close(),t.close()}})),t.mountNode)},this.close=function(){t.mountNode&&(Object(a.unmountComponentAtNode)(t.mountNode),t.mountNode.remove(),t.mountNode=null)}}}(),p=n("GESwhXbR");!function(e){e[e.create=0]="create",e[e.edit=1]="edit",e[e.copy=2]="copy"}(r||(r={}));var d=n("2qRnoGmE"),h=n.n(d),m=n("QyjeWo4p");function f(e,t,n){var o=function(e){return h.a.HOST+"/applications/create-project-template/"+e};switch(e){case r.create:return o("?"+m.stringify({_organizationId:t}));case r.edit:return o(t+"/edit/"+n);case r.copy:return o(t+"/copy/"+n)}}var g=n("FtadyD4n"),v=n("nJ3YrKjr"),b=function(e){function t(t){var n=e.call(this,t)||this;return n.rootCls="template-creator-modal",n.handleMessage=function(e){var t=e.data,r=t.payload,o=t.action;switch(o){case"close template":n.props.close();break;case"edit template":case"create template":case"set-template-visible":v.ProjectTemplateEventEmitter$.next({payload:r,action:o})}},n.iframeRef=s.a.createRef(),n}return o.d(t,e),t.prototype.componentDidMount=function(){window.addEventListener("message",this.handleMessage)},t.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.handleMessage)},t.prototype.getIframeSrc=function(){switch(this.props.mode){case r.create:return f(this.props.mode,this.props.organizationId);case r.edit:return f(this.props.mode,this.props.organizationId,this.props.projectTemplateId);case r.copy:return f(this.props.mode,this.props.organizationId,this.props.projectId)}},t.prototype.render=function(){return s.a.createElement(p.Modal,{className:g[this.rootCls],opened:!0},s.a.createElement("iframe",{ref:this.iframeRef,src:this.getIframeSrc(),onError:this.props.close,className:g[this.rootCls+"__iframe"]}))},t}(s.a.PureComponent);n.d(t,"ProjectTemplateDetailModal",function(){return y}),n.d(t,"Mode",function(){return r});var y=new u(b)},g09zqn9P:function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("7bLrUvyy"),o=n("vmWJWrVe"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="ICalendarView",t.prototype.className="icalendar-view modal-dialog modal-padding",t.prototype.initialize=function(e){return!!e&&(this.options=e,this.renderBasic(),this)},t.prototype.renderBasic=function(){return this.$el.html(r(this.options)),this.$qr=this.$(".icalendar-qrcode"),this.renderQr(),this},t.prototype.renderQr=function(){return this.$qr.qrcode({size:170,text:this.options.webcal,background:"white"})},t}()},g0CKOpxX:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;r=n("K1g1+kw9"),i=n("llwZnbxj"),o=n("L3Znt4sw"),s=n("vmWJWrVe"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="TagEventsView",t.prototype.className="tag-events-view fade",t.prototype.initialize=function(e){var t;return this.tagModel=e.tagModel,this.eventsCollection=i.get("tag_"+this.tagModel.id),this.renderBasic(),this.tagModel.fetchRelation("events",{attrs:{page:1,count:500,_projectId:e._projectId},success:(t=this,function(n){if(t.$el)return t.eventsCollection.reset(n),t.requestSubView(o,{groupBy:!1,eventsCollection:t.eventsCollection}).$el.appendTo(t.$el),t.refreshCount(),t.eventsCollection.length&&t.$el.show().addClass("in"),t.listen(),"function"==typeof e.onFinish?e.onFinish():void 0}),error:function(){return"function"==typeof e.onFinish?e.onFinish():void 0}}),this},t.prototype.renderBasic=function(){return this.$el.html(r()).hide(),this},t.prototype.listen=function(){var e;return this.listenTo(this.eventsCollection,"add remove",this.refreshCount),this.listenTo(this.eventsCollection,"change:tagIds",(e=this,function(t,n){if(!((null!=n?n.indexOf(e.tagModel.id):void 0)>=0))return e.eventsCollection.remove(t),e.tagModel.refreshCache()})),this},t.prototype.refreshCount=function(){var e;return this.tagModel.set("eventsCount",this.eventsCollection.length),this.$(".events-count").text(this.eventsCollection.length),e=this.eventsCollection.length?"show":"hide",this.$el[e](),this},t}()},g0mohWXm:function(e,t){e.exports=function(e){return'<div class="event-placeholder placeholder muted"> <a class="icon icon-calendar"></a> <br /> '+tb_i18n.get("event.placeholder")+"</div>"}},g1ExiWxz:function(e,t,n){"use strict";var r=n("KvEb59eD");n.o(r,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return r.AbstractPortal}),n.o(r,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return r.getSuspendedMsg}),n.o(r,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return r.verifyProjectPayment})},g8BsEPZW:function(e,t){e.exports=function(e){var t="";return e.hasPrev&&(t+=" <div class=\"prev-handler\" data-gta=\"{action: 'open detail', type: 'file', segment: 'file page', control: 'Toggle Button', category: 'previous', method: 'click'}\"> <div class=\"arrow-container\"></div> </div>"),e.hasNext&&(t+=" <div class=\"next-handler\" data-gta=\"{action: 'open detail', type: 'file', segment: 'file page', control: 'Toggle Button', category: 'next', method: 'click'}\"> <div class=\"arrow-container\"></div> </div>"),t}},gDBASSQ2:function(e,t){e.exports="\nfragment plan on Plan {\n  days\n  expired\n  isExpired\n  isTrialExpired\n  membersCount\n  objectType\n  paidCount\n  payType\n  status\n  trialExpired\n  trialType\n  _objectId\n  isBasic\n  isExceedMember\n  isStrictExceedMember\n}\n"},gLdDAp90:function(e,t,n){var r,o,i,s,a;i=n("OmupbwLD"),o=n("/5MwcYUV"),r=n("GLe2TS/Q"),a=n("+wb0Gkt/"),s=n("OFL0i0gL"),t.pickDefaultOccurrence=n("YR0BrVIr").default,Object.assign(t,a),t.saveAttrs=function(e,t){return e.isRecurrenceEventInstance()?new Promise(function(n,r){var a;return a=e.toJSON(),(new i).open(o,{onConfirm:function(o){var i;return(i=e.eventDetailView)&&i.resetView(),e.updateEvent(o,t).then(function(e){var r;return(s(t,"startDate")||s(t,"endDate")||s(t,"isAllDay"))&&(r=!0),i&&i.resetModel(e).refreshView({checkEventConflictOnOpen:r}),n(e)},r)},onCancel:function(){return e.set(a),e.trigger("cancel")}})}):e.saveEvent(t)},t.setRepeat=function(e,t){return(new i).open(r,{onConfirm:function(){var n;return(n=e.eventDetailView)&&n.resetView(),e.updateEvent("next",t).then(function(e){if(n)return n.resetModel(e).refreshView({checkEventConflictOnOpen:!1})})},onCancel:function(){return e.trigger("cancel")}})}},"gMwrA6S/":function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;s=n("hGNqppva"),a=n("RLD3BeS/").ToastWithObject,i=n("3HWq49Gv"),o=n("RSN8Fd0d"),r=n("zhGE4Zhy"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="TagMenuView",t.prototype.className="tag-menu-view",t.prototype.popoverTitle="",t.prototype.events={"click .unarchive-handler":"unarchiveTag","click .edit-handler":"enterEditSubMenu","click .archive-handler":"enterArchiveSubMenu","click .archive-submit":"submitArchive","click .edit-submit":"submitEdit","click .tag-label":"changeLabel"},t.prototype.initialize=function(){return this.popoverTitle=tb_i18n.get("tag.menu.title"),t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){var e;return(e=this.options.tagModel.toJSON()).permissions=this.options.tagModel.hasPermissions("put","put.archive"),this.$el.html(o(e)),this},t.prototype.unarchiveTag=function(){var e,t;return(e=this.options.tagModel).unarchive({success:(t=this,function(){return a.unarchive(e),t.hide()})}),this},t.prototype.changeLabel=function(e){var t;return(t=$(e.currentTarget)).addClass("active").siblings().removeClass("active"),this.color=t.data("color"),this},t.prototype.enterEditSubMenu=function(){var e;return this.enterSubMenu(tb_i18n.get("tag.menu.edit.title"),(e=this,function(){var t,n;return n=e.options.tagModel.toJSON(),e.$el.html(i(n)),t="gray"===n.color?"cyan":n.color,e.color=t,e.$(".tag-label-"+t).addClass("active"),e.$editInput=e.$(".add-input")})),this},t.prototype.enterArchiveSubMenu=function(){var e;return this.enterSubMenu(tb_i18n.get("archive"),(e=this,function(){return e.$el.html(r())})),this},t.prototype.submitEdit=function(){var e,t,n,r;if(t=null!=(n=this.$editInput)?n.val().trim():void 0)return e={name:t,color:this.color},this.options.tagModel.save(e,{attrs:e,wait:!0,success:(r=this,function(){return r.hide()})}),this},t.prototype.submitArchive=function(){var e;return this.options.tagModel.archive({success:(e=this,function(){return a.archive(),e.hide()})}),this},t}()},gR0lnSMk:function(e,t,n){},gZ0iyWtq:function(e,t,n){e.exports={"custom-field-info":"custom-field-info__1_4X","text-button":"text-button__1An6"}},gZW7ExDf:function(e,t,n){e.exports={"subtle-text-button":"subtle-text-button__15HP"}},gajqdbew:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("sa1Ed382"),r=n("aD6I3VT4"),o=n("fMev4aLY").ProgressComponent,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.tagName="section",t.prototype.viewName="DetailInfosProgressView",t.prototype.className="detail-infos-progress-view no-border-wrapper",t.prototype.initialize=function(e){return t.__super__.initialize.apply(this,arguments),this.taskModel=e.objectModel,this.isCreator=!this.taskModel.id,this.canEdit=e.canEdit,this.render(),this.listen()},t.prototype.listen=function(){var e;return e=["change:progress","change:_executorId","change:isArchived"],this.listenTo(this.taskModel,e.join(" "),this.render)},t.prototype.isCase=function(){return!0},t.prototype.hasPermission=function(){return this.canEdit},t.prototype.gtaHandler=function(e,t){var n;return n={action:e,type:this.taskModel.isSubtask()?"subtask":"task",series:this.taskModel.get("ancestorIds").length},t&&(n.category=t),i.gta.event(n)},t.prototype.render=function(){return this.requestReactView(this.el,o,{progress:this.taskModel.get("progress"),hasPermission:this.hasPermission(),onClickSave:this.saveProgress.bind(this),gtaHandler:this.isCreator?void 0:this.gtaHandler.bind(this)})},t.prototype.saveProgress=function(e){var t;if(e!==this.taskModel.get("progress"))return this.isCreator?this.taskModel.set({progress:e}):(this.taskModel.saveAttr("progress",e),t=e%1==0?"integer":"decimal",this.gtaHandler("added progress",t))},t}()},gcGC7lGn:function(e,t,n){"use strict";var r=n("xbWsbIB7");n.d(t,"ProjectListAddCard",function(){return r.a});var o=n("iIFTzg/E");n.o(o,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return o.AbstractPortal}),n.o(o,"ProjectGridAddCard")&&n.d(t,"ProjectGridAddCard",function(){return o.ProjectGridAddCard}),n.o(o,"ProjectListCard")&&n.d(t,"ProjectListCard",function(){return o.ProjectListCard}),n.o(o,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return o.getSuspendedMsg}),n.o(o,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return o.verifyProjectPayment})},gdvhuPU0:function(e,t,n){e.exports={trigger:"trigger__3P_e",banner:"banner__3iaG",content:"content__9aqO","desc-priviledges":"desc-priviledges__3wK4","desc-priviledges-list":"desc-priviledges-list__3dd4","desc-footer":"desc-footer__2ubl","desc-footer-next":"desc-footer-next__1_G3","desc-footer-quit":"desc-footer-quit__1wgc","back-handler":"back-handler__vqpO","qrcode-section":"qrcode-section__3wAJ","qrcode-block":"qrcode-block__2ybD","qrcode-quit":"qrcode-quit__1Hqi"}},geguUBpm:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("IoSlT9mR"),i=n.n(o),s=n("q1tIBJhx"),a=n.n(s),c=n("tLZJUYWX"),l=n.n(c),u=n("TSYQbtd+"),p=n.n(u),d=n("s0r7VfKc"),h=n("GESwhXbR"),m=n("H72dUcNY"),f=n("vEhZLygU"),g=function(e){function t(t){var n=e.call(this,t)||this;return n.dropdownRef=null,n.setRef=function(e){n.dropdownRef=e},n.handleSubmit=function(){n.props.onSelect({projectId:n.state.projectItem.id,testplanId:n.state.testplanId,project:n.state.projectItem,testplan:n.state.testplans.find(function(e){return e._id===n.state.testplanId})}),n.dropdownRef&&n.dropdownRef.close()},n.handleChangeProject=function(e){n.setState({projectItem:e,testplanId:null,isLoadingTestplans:!0,projectSelectorOpened:!1})},n.handleChangeTestplan=function(e){n.setState({testplanId:e})},n.handleVisibleChange=function(e){n.setState({projectSelectorOpened:e})},n.state={testplans:t.testplans||[],projectId:t.projectId||t.selectedProject&&t.selectedProject.id||null,testplanId:t.testplanId||t.selectedTestplan&&t.selectedTestplan._id||null,projectItem:t.selectedProject||null,projectSelectorOpened:!1,isLoadingTestplans:!t.projectId||!t.testplans},n}return r.d(t,e),t.prototype.componentDidUpdate=function(e,t){var n=this;this.state.projectItem&&(t.projectItem&&t.projectItem.id===this.state.projectItem.id&&this.state.testplans||(this.testplansSubscription&&this.testplansSubscription.unsubscribe(),this.testplansSubscription=d.default.getTestplansRequest(this.state.projectItem.id).changes().subscribe(function(e){n.setState({testplans:e,isLoadingTestplans:!1})})))},t.prototype.componentWillUnmount=function(){this.testplansSubscription&&this.testplansSubscription.unsubscribe()},t.prototype.renderSubmitButton=function(){return a.a.createElement(h.Button,{disabled:!this.state.projectItem||!this.state.testplanId,onClick:this.handleSubmit},l.a.get("confirm"))},t.prototype.renderTestplanSelector=function(){if(!this.state.projectItem)return null;var e=Object.assign({testplans:this.state.testplans,onSelect:this.handleChangeTestplan,canCreate:!0,seletedTestplan:this.props.selectedTestplan},this.state.testplanId?{_testplanId:this.state.testplanId}:{});return a.a.createElement("section",{className:i.a.section},a.a.createElement("span",{className:i.a["section-label"]},l.a.get("testplan")),a.a.createElement(f.a,r.a({},e)))},t.prototype.renderProjectSelectorContent=function(){return a.a.createElement("div",{className:i.a.selector},a.a.createElement(m.ProjectSelector,{_organizationId:this.props.organizationId,hideIndieEntry:!0,objectType:"testplan",onConfirm:this.handleChangeProject}))},t.prototype.renderProjectSelector=function(){var e=this.state.projectItem?this.state.projectItem.name:l.a.get("testplan.selector.placeholder");return a.a.createElement("section",{className:i.a.section},a.a.createElement("span",{className:i.a["section-label"]},l.a.get("project")),a.a.createElement(h.Dropdown,{opened:this.state.projectSelectorOpened,onVisibleChange:this.handleVisibleChange,content:this.renderProjectSelectorContent(),placement:"bottomLeft",nested:!0,persistence:!0},a.a.createElement(h.TextButton,{className:i.a["project-selector-trigger"]},e,a.a.createElement(h.Icon,{name:"chevron-down"}))))},t.prototype.renderContent=function(){var e=p()(i.a["global-testplan-selector"],this.props.className);return a.a.createElement("div",{className:e},this.renderProjectSelector(),this.renderTestplanSelector(),this.renderSubmitButton())},t.prototype.renderTrigger=function(){return a.a.createElement(h.Button,{className:i.a.trigger,size:"small",disabled:this.props.disabled},l.a.get("plan.to.testplan"))},t.prototype.render=function(){return a.a.createElement(h.TitledDropdown,{title:l.a.get("choose.testplan"),ref:this.setRef,onOpen:this.props.onOpen,content:this.renderContent(),className:i.a.dropdown,nested:this.props.nested},this.props.children||this.renderTrigger())},t}(a.a.PureComponent);n.d(t,"a",function(){return g})},gl5ckapz:function(e,t,n){e.exports={"user-info":"user-info__1zFd","user-info-avatar":"user-info-avatar__3_CZ","user-info-trigger":"user-info-trigger__mvSU","hover-avatar-bg":"hover-avatar-bg__umo_","personal-settings":"personal-settings__1eAG","international-switcher":"international-switcher__nF7I","workspace-switcher":"workspace-switcher__325G","workspace-switcher-creator":"workspace-switcher-creator__34Mn","workspace-switcher-personal":"workspace-switcher-personal__XapG","organization-item":"organization-item__1GNZ","organization-item-info":"organization-item-info__1Lvb","organization-item-description":"organization-item-description__1E_E","organization-item-expired-label":"organization-item-expired-label__1Zmp","user-info-upgrade":"user-info-upgrade__TWLV"}},gm4QKkGU:function(e,t,n){"use strict";n.r(t),n.d(t,"taskScenarioFieldMap",function(){return a}),n.d(t,"parseTaskWithScenarioFieldConfig",function(){return c}),n.d(t,"tasksFilterRelativeEvents",function(){return l}),n.d(t,"isFilterEmpty",function(){return u});var r=n("mrSGxOB2"),o=n("a+N5u/Cl"),i=n("+69hA2nB"),s={note:{alias:"note",defaultValue:""},priority:{alias:"priority",defaultValue:0},tag:{alias:"tagIds",defaultValue:[]},worktimes:{alias:"workTime",defaultValue:{totalTime:0,usedTime:0,unit:""}},sprint:{alias:"_sprintId",defaultValue:void 0},storyPoint:{alias:"storyPoint",defaultValue:""},taskProgress:{alias:"progress",defaultValue:0},rating:{alias:"rating",defaultValue:0}},a=r.a({},s,{storyPoint:{alias:"storyPoint",defaultValue:null},customfield:{alias:"customfields",defaultValue:[]}}),c=function(e,t){var n=o.clone(e),r=o.groupBy(t.scenariofields,function(e){return"customfield"==e.fieldType}),a=r.true,c=void 0===a?[]:a,l=r.false,u=void 0===l?[]:l;o.difference(i.taskFieldOfficialTypes,o.pluck(u,"fieldType")).forEach(function(e){var t=s[e];n[t.alias]=t.defaultValue});var p=o.pluck(c,"_customfieldId"),d=(n.customfields||[]).filter(function(e){return p.indexOf(e._customfieldId)>-1});return n.customfields=d,n},l=["change:_executorId","change:tagIds","change:_scenariofieldconfigId"].join(" "),u=function(e){return o.values(e).every(function(e){return"string"==typeof e&&""===e||Array.isArray(e)&&o.isEqual(e,[])||"object"==typeof e&&(null===e||o.isEqual(e,{}))||void 0===e})}},gpXgy0o6:function(e,t,n){"use strict";n.r(t),n.d(t,"checkLimitTaskflowProjects",function(){return o}),n.d(t,"formatTaskflowProjectByVisible",function(){return i});var r=n("ln9RsXX9"),o=function(e,t){if(void 0===e&&(e=[]),t){var n=t.payment;return!r.Version.isEnterprisePro(n)&&(!r.Version.isEnterprise(n)||e.length>=5)}return e.length>=1},i=function(e){void 0===e&&(e=[]);var t=[],n=[];return e.forEach(function(e){"project"!==e.visibility||e.name?t.push(e):n.push(e)}),{visible:t,invisible:n}}},gss2RKSv:function(e,t,n){var r,o={}.hasOwnProperty;r=n("C9IiAhE3"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.smartType="member",t.prototype.viewName="ScrumSmartMemberView",t.prototype.getViewName=function(){var e;return e=this.options.memberModel.get("name"),tb_i18n.get("tasklist.bar.memberOf.tasks",e)},t.prototype.getViewId=function(){return"membertasks/"+this.options.memberModel.id},t.prototype.getQueryType=function(){return"excutor"},t.prototype.getQueryId=function(){return this._projectId+"_member_"+this.options.memberModel.id},t.prototype.getQueryAttrs=function(){return{_executorId:this.options.memberModel.id,isDone:!1}},t}()},"gwbFiUj+":function(e,t){e.exports=function(e){var t='<span class="work-version-filesize flex-static"> '+e.fileSizeFix+"</span>";return e.isEditable&&(t+=' <a class="icon icon-chevron-down version-menu-toggler"></a>'),t}},"h15kZ/2D":function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n("mrSGxOB2"),o=n("R2qY+4o2"),i=n("GESwhXbR"),s=n("sa1Ed382"),a=n("8yf6doCl"),c=n("4XG9A953"),l=n("c8AfT5ki"),u=n("T3rbAVQx"),p=n("CxY0Mkc1"),d=n("QyjeWo4p"),h=n("w2WS5sq3"),m=n("u79IRQJM"),f=n("tOYy32ox"),g=n("5qt3k8Zi"),v=g.hasVisitedDashboardToCreate,b=g.markVisitedDashboardToCreate,y=function(){function e(){var e=this;this.notify$=new a.Subject,this.acceptVersion=0,this.toDashboard=function(){var t={pathname:e.getCurrentWorkspaceRoute(),search:d.stringify({type:"task",showGuide:!0})};s.router.navigate(p.format(t),{trigger:!0}),s.APP.Float.close()}}return e.prototype.navigate=function(e){switch(e){case"advanced-search":this.toDashboard()}},e.prototype.showGuide=function(e){v()||c.Guide.open(r.a({},e,{onClose:function(){b()},onTriggerClick:this.toDashboard}))},e.prototype.essage=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=i.Toast[e];"function"==typeof r&&r.apply(i.Toast,t)},e.prototype.openDetail=function(e,t){var n=t.id,r=t.projectId;switch(e){case"collection":window.open("/project/"+r+"/works/"+n);break;case"event":f(n);break;default:s.APP.openObjectPreviewer(n,e,{_projectId:r})}},e.prototype.handlePlugin=function(e){var t=e.url;switch(e.mode){case"redirect":window.open(t);break;case"api":h.get(t);break;default:m.open(t,e.name)}},e.prototype.closeFloat=function(){s.APP.Float.close()},e.prototype.openDashboardModal=function(e){s.APP.openDashboardModal(e)},e.prototype.transferStyleNode=function(e){this.styleNode?this.styleNode.textContent=e:(this.styleNode=document.createElement("style"),this.styleNode.textContent=e,this.getHostNode().appendChild(this.styleNode))},e.prototype.registerHostNode=function(){if(this.hostNode)return this.hostNode.id;var e=document.createElement("div"),t=Object(u.a)(o.HostNode.Prefix);return e.id=t,document.body.appendChild(e),this.hostNode=e,"#"+t},e.prototype.setReady=function(){this.notify$.next()},e.prototype.handle=function(e,t){var n=e.params;if("transferStyleNode"===e.method&&t){var r=t.contentDocument;n=[Array.from(r.getElementsByTagName("style")).reduce(function(e,t){return e+t.textContent},"")]}var o=this[e.method];if(o)return o.apply(this,n);throw Error("Target method cannot be found.")},e.prototype.cleanup=function(){this.hostNode&&this.hostNode.parentNode.removeChild(this.hostNode),this.shadowRoot=this.hostNode=this.styleNode=void 0},e.prototype.getHostNode=function(){return this.shadowRoot?this.shadowRoot:this.hostNode},e.prototype.getCurrentWorkspaceRoute=function(){var e=s.PREFERENCE.get("lastWorkspace");return l.a.organization({params:{_organizationId:e}})},e.prototype.isolatedAPI=function(){return[]},e}()},h2ReQ0We:function(e,t,n){e.exports=n.p+"images/o_weibo@2x.b5c7de0b.png"},h3j1Ipa9:function(e,t){e.exports=function(e){var t='<ul class="list work-menu-list"> ';return e.showSetMainVersion&&(t+=' <li> <a class="label-version-handler"> <span class="icon icon-focus"></span>'+tb_i18n.get("version.menu.label.as.main")+" </a> </li> "),t+=' <li> <a class="edit-description-handler"> <span class="icon icon-pencil"></span>'+tb_i18n.get("work.versions.enter.edit")+" </a> </li></ul>"}},"h6BO7+cQ":function(e,t,n){"use strict";n.r(t),n.d(t,"showDateStrOrNot",function(){return s}),n.d(t,"getDateStr",function(){return a}),n.d(t,"assemble",function(){return c});var r=n("wd/RKGTj"),o=n.n(r),i=n("3eMzznN/"),s=function(e,t){void 0===t&&(t={});var n=!0,r=!0;return t.groupByDay&&(n=!1),o()(e.endDate).isSame(e.startDate,"day")&&(r=!1),{showStartDateStr:n,showEndDateStr:r}},a=function(e,t,n){return void 0===n&&(n={}),i.formatDate(o()(e).toDate(),{isUsePref:n.isUsePref,inShort:!1,currentMoment:o()(t)}).dateString},c=function(e,t){void 0===t&&(t={});var n=e.startDate,r=e.endDate;return function(e,t,n){var r=t.showStartDateStr,i=t.showEndDateStr;void 0===n&&(n={});var s=o()(e.startDate),c=o()(s).format("HH:mm"),l=r?a(s,e.now,n)+" ":"",u=o()(e.endDate),p=o()(u).format("HH:mm");return{startDateString:l+c,endDateString:(i?a(u,e.now,n)+" ":"")+p}}(e,s({startDate:n,endDate:r},t),t)}},"hCND+D4a":function(e,t,n){e.exports=n.p+"images/web_onboarding_statistics.24d57266.png"},hDsDWWfV:function(e,t,n){e.exports=function(e){var t="",r=n("L0ULbOmZ"),o=n("GQ5fdR+l");return t+='<div class="'+(e.inCreationMode?r["one-row"]:r["object-field-list"])+'"> <div class="component-mount task-status"></div> <div class="component-mount task-executor"></div> <div class="task-date-range"> '+o(e)+" </div></div>"}},"hDy2W4+o":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("GESwhXbR"),l=n("H72dUcNY"),u=n("WUiXPPkw"),p=n.n(u),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.projectSelectorRef=i.a.createRef(),t.onSelectProject=function(e){var n=e?e.id:null;t.props.handleSelectProject(n),t.projectSelectorRef.current&&t.projectSelectorRef.current.close()},t}return r.d(t,e),t.prototype.renderArrow=function(){return i.a.createElement(c.Icon,{name:"chevron-down",className:"location-toggler"})},t.prototype.renderDropdownContent=function(){var e=this.props.organizationId;return i.a.createElement("div",{className:p.a["location-selector-dropdown"]},i.a.createElement(l.ProjectSelector,{selected:[],_organizationId:e,objectType:"events",permission:"event.post",noFilter:!0,onConfirm:this.onSelectProject,hideIndieEntry:!1}))},t.prototype.renderProjectSelector=function(){var e=this.props.project,t=e?e.name:a.a.get("project.selector.project.unset");return i.a.createElement("div",{className:"location-text"},t)},t.prototype.renderLogo=function(){var e=this.props.project;return e?i.a.createElement("div",{className:"location-logo",style:{backgroundImage:"url("+e.logo+")"}}):i.a.createElement("div",{className:"location-logo"},i.a.createElement(c.Icon,{name:"inbox2"}))},t.prototype.render=function(){return i.a.createElement(c.Dropdown,{ref:this.projectSelectorRef,content:this.renderDropdownContent(),nested:!0,persistence:!0},i.a.createElement("div",{className:p.a["location-selector"]},this.renderLogo(),this.renderProjectSelector(),this.renderArrow()))},t}(i.a.PureComponent);n.d(t,"LocationSelector",function(){return d})},"hHjO/rhR":function(e,t,n){"use strict";n.r(t),n.d(t,"GroupChatMessagePanelComponent",function(){return l});var r=n("mrSGxOB2"),o=n("/MKjzBat"),i=n("5lGttqQN"),s=n("T4OuoonG"),a={onGetRoomInfoRequest:i.getGroupChatRoomInfoRequest,onGetRoomActivitiesLoadMoreRequest:i.getGroupChatRoomActivitiesLoadMore,markMute:i.markGroupChatRoomMute,recall:i.recallGroupMessage},c=function(e){function t(t){var n=e.call(this,t)||this;return n.panelType="project-group-chat",n}return r.d(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.renderMessageCreator,r=t.roomInfo,o=t.projectModel;r&&!this.chatMessageCreatorView&&(this.chatMessageCreatorView=n(r._id,o)),this.controlScrollBar(e)},t}(s.ProjectMessagePanel),l=Object(o.connect)(function(e){var t=e.ui.groupChat,n=t.room,o=t.isLoading,i=t.hasMore,s=t.activities,a=r.f(n,1)[0],c=e.ui.chat.activedChannel;return{roomInfo:a,isLoading:o,hasMore:i,activities:s,isPseudo:!!c&&c.isPseudo}},a)(c)},hJ1hXzc5:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR"),l=n("l/J3RzyO"),u=n.n(l),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goPrev=function(){t.props.goPrev&&t.props.goPrev()},t.goNext=function(){t.props.goNext&&t.props.goNext()},t}return r.d(t,e),t.prototype.renderPrevHandelr=function(){return"left"===this.props.placement?o.createElement(c.Icon,{name:"chevron-up",size:12}):i.get("object.detail.switcher.prev")},t.prototype.renderNextHandelr=function(){return"left"===this.props.placement?o.createElement(c.Icon,{name:"chevron-down",size:12}):i.get("object.detail.switcher.next")},t.prototype.render=function(){var e=a()(u.a.switchers,{vertical:"left"===this.props.placement});return o.createElement("div",{className:e},o.createElement("div",{onClick:this.goPrev,className:u.a["switcher-handler"]},this.renderPrevHandelr()),o.createElement("div",{onClick:this.goNext,className:u.a["switcher-handler"]},this.renderNextHandelr()))},t}(o.PureComponent);n.d(t,"DetailNavigation",function(){return p})},"hPD7hY+l":function(e,t){e.exports=function(e){var t='<a class="nav-menu-handler ';return"activity"===e.currentPanel&&(t+="on-active"),t+='" data-menu="activity" data-gta="{action: \'toggle task panel menu\', control: \'tasks corner menu\'}"> <i class="icon icon-menu-s"></i>'+tb_i18n.get("nav.menu.menu")+' <span class="nav-badge ',e.showBadge||(t+="hide"),t+='"></span></a>',e.isTemplate||(t+='<a class="nav-menu-handler ',"member"===e.currentPanel&&(t+="on-active"),t+='" data-menu="member" data-gta="{action: \'view members\', control: \'Side Member Menu\'}"> <i class="icon icon-users"></i>'+(e.memberLength||0)+"</a>"),t}},hVgOUOmn:function(e,t,n){"use strict";n.r(t);var r,o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n("17x9q+7Q"),a=n("a+N5u/Cl"),c=n("tLZJUYWX"),l=n.n(c),u=n("vyNrxjj3"),p=n("V6edIaEd"),d=n("3eMzznN/");!function(e){e[e.Progress=0]="Progress",e[e.Note=1]="Note",e[e.Repeat=2]="Repeat",e[e.Reminder=3]="Reminder",e[e.StoryPoint=4]="StoryPoint",e[e.Worktimes=5]="Worktimes",e[e.Sprint=6]="Sprint"}(r||(r={}));var h=function(e){function t(t){var n=e.call(this,t)||this;return n.hasTaskFieldConfig=!1,n.scenarioTypes={},n.handleProps=function(e){var t=e.card._scenariofieldconfigId,r=e.scenarios;n.currentConfig=Object(u.getFieldConfig)(r,t),n.scenarioTypes=Object(u.getScenarioTypes)(n.currentConfig),n.hasTaskFieldConfig=!!n.currentConfig},n.displayOnCard=function(e){return!n.hasTaskFieldConfig||n.scenarioTypes[e]},n.datetimeFormat=function(e){var t=e.dateString;return e.dateIsToday&&"00:00"!=e.timeFormatString?t+" "+e.timeFormatString:t},n.getCustomFieldFormatter=function(){var e=n.props.card.customfields,t=n.props.customFields,r=n.scenarioTypes;if(!e.length||!t)return[];var i=[];return t.forEach(function(t){var s=a.findWhere(e,{_customfieldId:t._customfieldId});if(s){var c=Object(p.checkCustomFieldHasValue)(t,s),l=!(r&&!r[t._customfieldId]);c&&l&&i.push(o.a({},a.pick(t,"name","type"),{_id:t._customfieldId},n.getFormattedCustomfieldAttrs(s,t)))}}),i},n.getInfosExistArray=function(e){var t=[];return e.forEach(function(e){switch(e){case"taskProgress":t[r.Progress]=!0;break;case"note":t[r.Note]=!0;break;case"repeat":t[r.Repeat]=!0;break;case"reminder":t[r.Reminder]=!0;break;case"storyPoint":t[r.StoryPoint]=!0;break;case"worktimes":t[r.Worktimes]=!0;break;case"sprint":t[r.Sprint]=!0}}),t},n.handleProps(t),n}return o.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.handleProps(e)},t.prototype.getFormattedCustomfieldAttrs=function(e,t){switch(e.type){case"number":case"text":return{value:Object(p.getSingleValue)(e)};case"dropDown":case"multipleChoice":return{value:Object(p.getMultiValue)(e,t.choices).join(l.a.get("comma"))};case"date":return{value:this.datetimeFormat(d.formatDate(Object(p.getSingleValue)(e),{isUsePref:!0,inShort:!0}))};case"lookup":return{value:a.pluck(e.value,"title").join(l.a.get("comma")),type:t.type,advancedCustomfield:t.advancedCustomfield};case"commongroup":return{value:Object(p.getCommonGroupChoiceValue)(t,e),subtype:t.subtype};case"work":return{value:e.value.length}}},t.prototype.getUniqueIdPrefix=function(){return this.context.uniqueIdPrefix||this.props.uniqueIdPrefix},t.prototype.getOnOpenTaskDetail=function(){return this.context.onOpenTaskDetail||this.props.onOpenTaskDetail},t.prototype.render=function(){var e=this,t=this.getCustomFieldFormatter(),n=this.props,o=n.card,s=n.tags,a={putStatus:n.canPutStatus},c=(o.isDone?u.CardInfo.doneCardInfos:u.CardInfo.defaultCardInfos).filter(function(t){return!(u.CardInfo.scenarioCardInfos.indexOf(t)>=0)||e.displayOnCard(t)}),l=o.tagIds.map(function(e){return s.find(function(t){return t._id===e})}).filter(function(e){return!!e}),p=this.getInfosExistArray(c);return i.createElement(u.Card,{withoutCheckbox:this.props.withoutCheckbox,_id:o._id,_taskflowstatusId:this.props.card._taskflowstatusId,_projectId:o._projectId,_organizationId:o._organizationId,_creatorId:o._creatorId,_executorId:o._executorId,attachmentsCount:o.attachmentsCount,commentsCount:o.commentsCount,content:o.content,currentConfig:this.currentConfig,customFields:t,dueDate:o.dueDate,executor:o.executor,infos:c,isArchived:o.isArchived,isDone:o.isDone,involveMembers:o.involveMembers,likesCount:o.likesCount,objectlinksCount:o.objectlinksCount,parent:o.parent,permissions:a,preventEvent:this.props.preventEvent,priority:this.displayOnCard("priority")?o.priority:void 0,startDate:o.startDate,subtaskCount:o.subtaskCount,tags:l,uniqueId:o.uniqueId,uniqueIdPrefix:this.getUniqueIdPrefix(),onOpenTaskDetail:this.getOnOpenTaskDetail(),visible:o.visible,progress:p[r.Progress]?o.progress:void 0,note:p[r.Note]?o.note:void 0,recurrence:p[r.Repeat]?o.recurrence:null,reminder:p[r.Reminder]?o.reminder:void 0,storyPoint:p[r.StoryPoint]?o.storyPoint:void 0,workTime:p[r.Worktimes]?o.workTime:void 0,sprint:p[r.Sprint]?o.sprint:void 0,taskflowstatus:this.props.showTaskflowStatusLabel&&o.taskflowstatus||void 0})},t.propTypes={tags:s.array.isRequired,scenarios:s.array.isRequired,customFields:s.array.isRequired,canPutStatus:s.bool.isRequired,card:s.object.isRequired,withoutCheckbox:s.bool,preventEvent:s.bool},t.contextTypes={uniqueIdPrefix:s.string,onOpenTaskDetail:s.func},t}(i.Component),m=n("/MKjzBat"),f=Object(m.connect)(function(e,t){var n=e.ui.kanban,r=(n.tasksPermission[t.card._id]||{}).putStatus,o=void 0===r||r;return{customFields:n.customFields,scenarios:n.scenarios,tags:n.tags,canPutStatus:o}})(h);n.d(t,"SmartCard",function(){return h}),n.d(t,"SmartCardConnect",function(){return f})},hXgEMHUQ:function(e,t){e.exports=function(e){var t='<div class="check-box event-creator-allday-handler flex flex-center flex-vcenter ';return e.isAllDay&&(t+="active"),t+='"> <span class="icon icon-checkbox-checked"></span> <span class="icon icon-checkbox"></span> <span class="allday-title">'+tb_i18n.get("event.creator.all.day")+'</span></div><div class="event-dates-handler flex flex-vcenter"> <span class="icon icon-calendar2"></span> <span class="event-creator-date-wrap"> <a class="event-creator-datepicker event-start-date"></a> </span> <span class="connector">-</span> <span class="event-creator-date-wrap"> <a class="event-creator-datepicker event-end-date"></a> </span></div>'}},hg6sBHEu:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m={}.hasOwnProperty;d=n("a+N5u/Cl"),h=n("sa1Ed382"),p=n("OmupbwLD"),o=n("bZr3G77e"),l=n("GESwhXbR").Toast,i=n("85182E8g"),s=n("nL4olqOP"),u=n("vmWJWrVe"),c=n("8iEkTkoU"),a=n("KJFqng8l"),r=n("wZNQzrHi"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)m.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,u),t.prototype.viewName="OrganizationOverdueView",t.prototype.className="it-is-overdue modal-dialog modal-padding",t.prototype.events={"click .export-projects":"openProjectsExportTransfer","click .contact-owner":"close","click .enter-teambition":"close","click .enter-free-version":"enterFreeVersion","click .delete-organization-handler":"handleDeleteOrganizationClick","click .quit-project":"handleQuitProject"},t.prototype.initialize=function(e){var t;if(this.options=e,this.projectModel=this.options.projectModel,t={action:"reach plan limit",control:"renew"},this.organizationsCollection=i.get(0),this.organizationModel=this.organizationsCollection.get(this.options._organizationId),this.projectModel||this.organizationModel)return this.renderBasic(),t.type="business",h.gta.event(t),this},t.prototype.renderBasic=function(){var e,t,n,o;return this.organizationModel&&this.organizationModel.getRoleScope()>=0?(n=d.escape(this.organizationModel.get("name")),o=this.organizationModel.getRoleScope(),t=this.organizationModel.hasPermissions("put.transferOut","del"),"",e={message:o>=0&&t?tb_i18n.get("organization.overdue.renew",n):tb_i18n.get("organization.overdue.contact",n),_organizationId:this.organizationModel.id,roleScope:o,permissions:t,projectsCount:s.get(0).getOrgWorkspaceProjects(this.organizationModel.id).length,header:tb_i18n.get("organization.overdue.title"),payment:this.organizationModel.payment}):(n=d.escape(this.organizationModel.get("name")),t={putTransferOut:!1,del:!1},e={message:tb_i18n.get("organization.overdue.contact",n),_organizationId:this.organizationModel.get("_id"),roleScope:-2,permissions:t,projectsCount:1,header:tb_i18n.get("organization.overdue.title"),payment:this.projectModel.payment,canQuitProject:this.projectModel.getCanQuit()}),this.$el.html(r(e)),this},t.prototype.openProjectsExportTransfer=function(){var e,t;return e=i.get(0).getOrganizationsByRight(2),(t=d.pluck(e,"id")).push(0),this.requestSubView(p).open(a,{sourceId:this.organizationModel.id,targetIds:t,action:"export"}),this},t.prototype.enterFreeVersion=function(){return o.ajax({method:"PUT",url:"/api/users/me/trial",success:function(){return h.router.refreshUrl()}})},t.prototype.handleDeleteOrganizationClick=function(e){var t;return e.preventDefault(),t=this.organizationModel.get("name"),this.requestSubView(p).open(c,{model:this.organizationModel,password:t,confirmPlaceholder:tb_i18n.get("organization.settings.delete.placeholder",t),title:tb_i18n.get("organization.settings.delete"),message:tb_i18n.get("organization.settings.delete.msg",d.escape(t)),success:function(){return s.get(0).fetch({reset:!0}),l.success(tb_i18n.get("organization.settings.delete.success")),h.router.navigate("projects",{trigger:!0})}})},t.prototype.handleQuitProject=function(e){return e.preventDefault(),this.projectModel.quit({wait:!0,success:(t=this,function(){var e;return null!=(e=t.projectModel.collection)&&e.remove(t.projectModel),l.success({message:tb_i18n.get("project.settings.leave.success")}),t.close()})});var t},t.prototype.close=function(){var e;return null!=(e=this.parentView)&&e.remove(),this},t.prototype.remove=function(){var e;return"function"==typeof(e=this.options).onclose&&e.onclose(),t.__super__.remove.apply(this,arguments)},t}()},hkPM0sjX:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var r=n("4c1CS0b3"),o=r.Observable.fromEvent(window,"message").share(),i=r.Observable.fromEvent(window,"popstate").share()},hkY5KnkX:function(e,t,n){e.exports=n.p+"images/dorahan@2x.f7ade07f.png"},hlB2LTRb:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O={}.hasOwnProperty,R=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};T=n("a+N5u/Cl"),P=n("sa1Ed382"),b=n("HYobN8SQ"),_=n("3eMzznN/"),w=n("vmWJWrVe"),y=n("GESwhXbR").Toast,I=n("90U+kJWN").genUniqueIdPrefixLenRange,r=n("++xunwor"),m=n("ONQFQipy"),g=n("nL4olqOP"),k=n("eubUSX4T"),f=n("0FRv5rrl"),a=n("+daK+zGx"),E=n("WRIFfSP1"),C=n("o4N9kv/m"),S=n("5CiSxGri"),o=n("X3k3syqx"),s=n("Ymtlsjgy"),d=n("dKomSvKR"),i=n("j7oW5/Et"),x=n("gh8QIhMV").throwError,N=n("HYobN8SQ"),j=n("90U+kJWN"),I=j.genUniqueIdPrefixLenRange,p=j.NEW_REG_SOURCE,v=j.REG_SOURCE,u=new RegExp(p()),l=new RegExp(p(),"g"),h=new RegExp(v()),c=new RegExp(v(),"g"),M=function(){return{task:tb_i18n.get("navigation.task"),post:tb_i18n.get("navigation.sharing"),work:tb_i18n.get("navigation.work"),event:tb_i18n.get("navigation.event"),entry:tb_i18n.get("bookkeeping"),testcase:tb_i18n.get("testcase")}},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)O.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,w),t.prototype.viewName="ActivityCreatorView",t.prototype.tagName="div",t.prototype.className="activity-creator active",t.prototype.events={"click .reply-handler":"submit","keydown .comment-input":"quickSubmit","click .reply-menu li a":"changeQuickType","click .add-work-handler":"toggleWorksPicker","click .screen-crop-handler":"openScreenCrop","click .add-skitch-handler":"enterPreviewerSkitchMode","click .login-handler":"loginHandler","click .register-handler":"registerHandler","click .only-mentions-tips":"toggleOnlyMentions","mousewheel .scrollable":_.mousewheel},t.prototype.initialize=function(e){return this.options=e,this._projectId=this.options._projectId,this._organizationId=this.options._organizationId,this.objectModel=this.options.objectModel,this.activityCollection=r.get(this.objectModel.id.split("_")[0],{boundToObjectType:this.options.boundToObjectType}),this.objectlinksCollection=m.get(this.activityCollection._boundToObjectId,{boundToObjectType:this.options.boundToObjectType}),this.onlyMention=N.get("mention_at_target_only",!0),this.localCache=b.namespace("temp").namespace("activities_"+this.options.boundToObjectType),this.localCacheId=this.objectModel.id+"_"+P.user.id,_.promiseChain((t=this,function(){return!t.el}))(function(e){return function(){return e._projectId?Promise.resolve():_.warehouse.resolveFetch(f,e._organizationId)}}(this),function(e){return function(t){e.organizationModel=t}}(this),function(e){return function(){return e._projectId?_.warehouse.resolveFetchOne(g,0,e._projectId):Promise.resolve()}}(this),function(e){return function(t){var n,r;if(!P.user.get("isGhost"))return e.projectModel=t,e.renderBasic(),n=e.localCache(e.localCacheId)||{},e.mentionsList=n.mentionsList||[],e.initAttachments(n.attachments),e.initUploader(),e.initSortable(),e.initEmoji(),e.initAtList(),e.objectlinks=[],e.$textareaset.val(n.content).flexText(function(){return e.cacheActivity()}),e.options.autoFocus||(null!=(r=n.content)?r.length:void 0)?e.$textareaset.focusAtEnd():void 0}}(this)).catch(function(e){return x(e)});var t},t.prototype.initAtList=function(){var e,t,n;return null!=(e=this.atHandlerView)&&e.remove(),this.atHandlerView=this.requestSubView(o,{_projectId:this._projectId,objectModel:this.objectModel,_organizationId:null!=(t=this.projectModel)?t.get("_organizationId"):void 0,$textareaset:this.$textareaset,projectModel:this.projectModel,mentionsList:this.mentionsList,filterAtList:this.options.filterAtList,boundToObjectType:this.options.boundToObjectType,isShared:this.options.isShared,renderNotifTip:(n=this,function(e){return n.renderNotifTip(e)}),addLocalCache:function(e){return function(t){return e.addLocalCache(t)}}(this),addSelectLink:function(e){return function(t){return e.addSelectLink(t)}}(this),showAtTips:function(e){return function(t){return e.showAtTips(t)}}(this),indieMode:!!this.isIndieObject()})},t.prototype.initAttachments=function(e){return null==e&&(e=[]),this.$attachmentsList=this.$(".attachments-list"),e=T.filter(e,function(e){return!1!==e.completed}),this.attachments=new k(e,{_boundToObjectId:this.getDefaultCollectionId()}),this.renderAttachments(),this.listenTo(this.attachments,"change:downloadUrl remove",this.cacheActivity),this.listenTo(this.attachments,"add remove reset",(t=this,function(){return t.attachments.length?t.renderAttachments():t.deactiveAttachment()}));var t},t.prototype.getDefaultCollectionId=function(){var e,t;return(null!=(e=this.projectModel)?e.get("_defaultCollectionId"):void 0)||(null!=(t=this.organizationModel)?t.get("_defaultCollectionId"):void 0)},t.prototype.assembleAll=function(){var e;return null!=(e=this.atHandlerView)?e.assembleAtList():void 0},t.prototype.isIndieObject=function(){var e;return"function"==typeof(e=this.objectModel).isIndie?e.isIndie():void 0},t.prototype.isOnlyMention=function(){var e,t;return e=null!=(t=this.atHandlerView)?t.getMentions():void 0,!T.isEmpty(e)&&this.onlyMention},t.prototype.renderBasic=function(){var e,t;return(e=P.user.get("isGhost"))&&this.$el.addClass("ghost"),this.$el.html(s({isGhost:e,placeholder:this.getPlaceholder(P.PREFERENCE.quickReply()),quickReply:P.PREFERENCE.quickReply(),isShowCropBtn:null!=(null!=(t=window.TbScreenshotD)?t.startScreenShot:void 0),showSkitchCreator:this.options.showSkitchCreator})),this.$textareaset=this.$(".comment-input"),this.$quickCreate=this.$(".quick-create"),this.$submit=this.$(".reply-handler"),this.$enterShortKey=this.$(".enter-short-key")},t.prototype.renderAttachments=function(){var e;if(this.attachments.length)return this.$attachmentsList.empty(),this.attachments.each((e=this,function(t){return e.renderAttachment(t)})),this.$attachmentsList.css("max-height",Math.max(58*this.attachments.length,100))},t.prototype.toggleOnlyMentions=function(){var e;return P.gta.event({action:"only inform of target",control:"Comment Box",category:this.onlyMention?"off":"on"}),this.onlyMention=!this.onlyMention,N.set("mention_at_target_only",this.onlyMention),null!=(e=this.atHandlerView)?e.updateNotifTip():void 0},t.prototype.renderNotifTip=function(e){return this.$(".notif-info").html(d({showOnlyMention:!T.isEmpty(e),onlyMention:this.isOnlyMention()}))},t.prototype.submitFiles=function(){var e,t;return this.attachments.length?(e=this.$attachmentsList.find(".work").map(function(){return $(this).data("cid")}).toArray(),this.attachments.comparator=function(t,n){return e.indexOf(t.cid)-e.indexOf(n.cid)},this.attachments.sort(),new Promise((t=this,function(e,n){return t.attachments.addWorks(t.attachments.toJSON(),{_parentId:t.getDefaultCollectionId(),_organizationId:t._organizationId,_projectId:t._projectId,success:e,error:n})}))):Promise.resolve()},t.prototype.parseShortLink=function(e){var t,n;return!!(n=e.match(u))&&(n[0],t=n[1],{_linkedId:n[2],linkedType:t,fragments:n})},t.prototype.parseAutoLink=function(e){var t,n,r,o,i,s;if(!this.objectModel.hasPermission("objectlink.post"))return Promise.resolve(!0);if(r=e.match(h))r[0],o=r[1],t=r[2],(s=r[3])&&(t=s,o="work");else{if(!(n=this.parseShortLink(e)))return Promise.resolve(!0);r=n.fragments,t=n._linkedId,o=n.linkedType}return t&&t!==this.activityCollection._boundToObjectId?(i=this.objectlinksCollection.where({_linkedId:t}),this.submitAutoLink(t,o,function(){return i.length&&y.info(tb_i18n.get("activity.creator.auto.link.done")),r[0]!==e||i.length})):Promise.resolve(!0)},t.prototype.parseTaskIdAutoLink=function(e){var t;return e&&e!==this.activityCollection._boundToObjectId?(t=this.objectlinksCollection.where({_linkedId:e}),this.submitAutoLink(e,"task",function(){return t.length&&y.info(tb_i18n.get("activity.creator.auto.link.done")),t.length})):Promise.resolve(!0)},t.prototype.submitAutoLink=function(e,t,n){return"group"===t&&(t="testplangroup"),"works"===t&&(t="collection"),new Promise((r=this,function(n,o){return r.objectlinksCollection.create({_parentId:r.activityCollection._boundToObjectId,parentType:r.activityCollection.boundToObjectType,_linkedId:e,linkedType:t},{silentError:!0,wait:!0,success:n,error:function(){return n(!1)}})})).then(function(e){return function(r){return e.gtaHandler({action:"added link",type:t,method:"comment"}),!r||(n&&!n()&&y.success(tb_i18n.get("activity.creator.auto.link.success")),"function"==typeof n?n():void 0)}}(this));var r},t.prototype.submitRecurrenceEventComment=function(e,t){var n,r,o;return n=null!=(r=this.atHandlerView)?r.confirmCurrentMentions():void 0,new Promise((o=this,function(r,i){return o.objectModel.commentRecurrence({action:"comment",_creatorId:P.user.id,content:e,mentions:n,attachments:t,isOnlyNotifyMentions:o.isOnlyMention(),renderMode:P.PREFERENCE.get("activityMode")||"text"},{success:r,error:i})}))},t.prototype.submitNormalComment=function(e,t){var n,r,o,i;return("function"==typeof(n=this.objectModel).isRecurrenceEventInstance?n.isRecurrenceEventInstance():void 0)?this.submitRecurrenceEventComment(e,t):(r=null!=(o=this.atHandlerView)?o.confirmCurrentMentions():void 0,new Promise((i=this,function(n,o){return i.activityCollection.create({},{wait:!0,attrs:{content:e,attachments:t,mentions:r,isOnlyNotifyMentions:i.isOnlyMention(),renderMode:P.PREFERENCE.get("activityMode")||"text"},success:n,error:o})})).then(function(e){return function(t){var n;return r=T.clone(t.get("mentions")),e.isIndieObject()?e.checkActivityTips():null!=(n=e.atHandlerView)&&n.checkActivityTips(r),t.initialize()}}(this)))},t.prototype.checkActivityTips=function(){var e;if(this.objectModel.get("involveMembers").indexOf(P.user.id)<0)return this.showAtTips({tipType:"involve",memberList:(e={},e[""+P.user.id]=P.user.get("name"),e)})},t.prototype.submit=function(){var e,t,n;if(e=this.attachments.getUploadingCount())y.error(tb_i18n.get("works.uploader.uploading.total",e));else if(((t=this.$textareaset.val().trim())||this.attachments.length)&&!this.$submit.prop("disabled"))return this.disableSubmit(!0),Promise.resolve().then((n=this,function(){return n.submitFiles()})).then(function(e){return function(t){return e.attachments?T.chain(e.attachments.toJSON()).pluck("_id").compact().union(T.pluck(t,"_id")).value():[]}}(this)).then(function(e){return function(n){var r,o,i;return o=e.getResultAndLinks(t),i=o.results,r=o.finalLinks,_.promiseChain(function(){return!e.el})(function(){return i.length+r.length===0||e.submitLinks(t,i,r)},function(r){return r&&e.submitNormalComment(t,n)}),Promise.resolve(!0)}}(this)).then(function(e){return function(){if(e.$el)return e.gtaHandler({action:"comment",control:"Comment Button"}),e.formatActivityCreator()}}(this)).catch(function(e){return console.error(e)}).then(function(e){return function(){if(e.$el)return e.disableSubmit(!1),e.$textareaset.focusAtEnd()}}(this)),this},t.prototype.submitLinks=function(e,t,n){return new Promise((r=this,function(o,i){var s,a,c;return c=e.slice(),a=[],t.length&&T.each(t,function(e){return c=c.replace(e,""),a.push(new Promise(function(t,n){return r.parseAutoLink(e).then(t)}))}),n.length&&T.each(n,function(e){var t;return t="#"+e.uniqueTaskId+" "+e.content,c=c.replace(t,""),a.push(new Promise(function(t,n){return r.parseTaskIdAutoLink(e._id).then(t)}))}),s=!c.replace(/\s+/g,"").length&&!r.attachments.length,Promise.all(a).then(function(e){var t;return t=T.some(e,function(e){return e}),o(t||!s)})}));var r},t.prototype.getResultAndLinks=function(e){var t,n,r,o,i,s,a,u;return n=e.match(c)||[],u=e.match(l)||[],a=n.concat(u),i=(s=I())[0],o=s[1],r=new RegExp("#[A-z]{"+i+","+o+"}-\\d+","g"),t=e.match(r)||[],T.uniq(this.objectlinks,"_id"),{results:a,finalLinks:T.filter(this.objectlinks,function(e){var n,r;return!(null==(n=e.project)||!n.uniqueIdPrefix)&&(e.uniqueTaskId=e.project.uniqueIdPrefix+"-"+e.uniqueId,r=""+e.hash+e.uniqueTaskId,R.call(t,r)>=0)})}},t.prototype.addSelectLink=function(e){return this.objectlinks.push(e)},t.prototype.formatActivityCreator=function(){var e;return this.mentionsList=[],this.$attachmentsList.empty(),null!=(e=this.attachments)&&e.reset(),this.$textareaset.val(""),this.$textareaset.trigger("change"),this.localCache.remove(this.localCacheId)},t.prototype.showAtTips=function(e){var t,n,r,o,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k;if(e)return y=e.tipType,o=e.memberList,n=(s=T.values(o)).length,t="involves"!==this.objectModel.get("visible"),n?(k=M()[this.objectModel.get("objectType")],r=T.escape(s.join(", ")),"involve"===y&&(P.user.id in o?1===n?b=tb_i18n.get("activity.visible.not.involved.tip3",k):(r=T.values(T.omit(o,P.user.id)).join(", "),b=tb_i18n.get("activity.visible.not.involved.tip4",r,k)):b=1===n?t?tb_i18n.get("activity.visible.not.involved.tip1",r,k):tb_i18n.get("activity.invisible.not.involved.tip1",r,k):t?tb_i18n.get("activity.visible.not.involved.tip2",r,n,k):tb_i18n.get("activity.invisible.not.involved.tip2",r,n,k)),"member"===y&&(b=1===n?t?tb_i18n.get("activity.visible.not.member.tip1",r,k):tb_i18n.get("activity.invisible.not.member.tip1",r,k):t?tb_i18n.get("activity.visible.not.member.tip2",r,n,k):tb_i18n.get("activity.invisible.not.member.tip2",r,n,k),(null!=(h=this.projectModel)?h.hasPermission("post.member"):void 0)?b+=1===n?t?tb_i18n.get("activity.visible.not.member.tip1.addmember"):tb_i18n.get("activity.invisible.not.member.tip1.addmember"):t?tb_i18n.get("activity.visible.not.member.tip2.addmember"):tb_i18n.get("activity.invisible.not.member.tip2.addmember"):b+=tb_i18n.get("fullStop")),null!=(m=this.options.activityPanelContext)&&null!=(f=m.activityTimelineView)&&f.$("."+y+"-tip-wrap").html(i({type:y,tip:b})),null!=(g=this.options.activityPanelContext)&&null!=(v=g.activityTimelineView)&&(v[y]=o),null!=(c=this.options.activityPanelContext)&&null!=(l=c.activityTimelineView)?l.tipTypeVisible=t:void 0):(null!=(a=this.options.activityPanelContext)&&null!=(u=a.activityTimelineView)&&u.$("."+y+"-tip-wrap").empty(),null!=(p=this.options.activityPanelContext)&&null!=(d=p.activityTimelineView)&&(d[y]=o),this)},t.prototype.disableSubmit=function(e){return this.$submit.prop("disabled",e),this.$enterShortKey.prop("disabled",e)},t.prototype.getPlaceholder=function(e){var t;return t=e?tb_i18n.get("activity.timeline.comment.enter"):tb_i18n.get("activity.timeline.comment.ctrl.enter"),this.isIndieObject()||(t=""+tb_i18n.get("activity.timeline.comment.at.hint")+t),t},t.prototype.changeQuickType=function(e){var t,n,r;return(t=$(e.currentTarget)).hasClass("active")||(this.$(".reply-menu li a").removeClass("active"),t.addClass("active"),r="only-enter"===t.data("type"),P.PREFERENCE.quickReply(r),n=this.getPlaceholder(r),this.$textareaset.attr("placeholder",n)),this.$textareaset.focusAtEnd()},t.prototype.quickSubmit=function(e){if(13===e.keyCode&&!(e.ctrlKey||e.metaKey||e.shiftKey)&&P.PREFERENCE.quickReply()||13===e.keyCode&&(e.ctrlKey||e.metaKey||e.shiftKey)&&!P.PREFERENCE.quickReply())return e.preventDefault(),this.submit(),P.gta.event({action:"comment",control:"Comment Button",method:"keyboard"})},t.prototype.initUploader=function(){var e,t;return null!=(t=this.workuploaderView)&&t.remove(),e={collection:this.attachments,dnd:this.options.dragAndDropWrap||this.$el,paste:this.$textareaset,targetModel:this.projectModel||this.organizationModel},this.workuploaderView=this.requestSubView(C,e),this},t.prototype.initSortable=function(){return this.$attachmentsList.sortable({items:".work",helper:"clone",placeholder:"work-drag-placeholder",tolerance:"pointer",zIndex:2001,axis:"y",scroll:!1,update:(e=this,function(t,n){var r,o,i;return r=$(t.target),i=r.sortable("toArray",{attribute:"data-cid"}),o=e.attachments.sortBy(function(e){return i.indexOf(e.cid)}),e.attachments.models=o})});var e},t.prototype.checkIsAlreadyAt=function(e){var t;return null!=(t=this.atHandlerView)?t.getMentions()[e]:void 0},t.prototype.selectAt=function(e,t){var n;return null!=(n=this.atHandlerView)?n.selectAt(e,t):void 0},t.prototype.toggleWorksPicker=function(e){var t;if(t=$(e.currentTarget),this.gtaHandler({action:"add content",type:"file",control:"Comment Attachment"}),!t.data("bs.popover"))return this.requestSubView(E,{_projectId:this._projectId,collection:this.attachments,$toggler:t,placement:"auto top"}).show()},t.prototype.openScreenCrop=function(){var e;if(null!=(null!=(e=window.TbScreenshotD)?e.startScreenShot:void 0))return this.$textareaset.focusAtEnd(),window.TbScreenshotD.startScreenShot()},t.prototype.initEmoji=function(){var e;return this.activeEmojiView=this.requestSubView(a,{$toggler:this.$(".activity-handler .open-emoji-handler"),select:(e=this,function(t){return e.insertEmoji(t)})}),this.activeEmojiView.$el.appendTo(this.$(".activity-creator-active-emoji"))},t.prototype.insertEmoji=function(e){var t,n,r,o;return o=(t=this.$(".comment-input")).val().replace(/\n/g,""),n=t[0].selectionStart,o=(o=o.slice(0,n)+e+o.slice(n)).replace(/\r/g,"\r\n"),t.val(o).change(),r=n+e.length,t.selectRange(r,r)},t.prototype.loginHandler=function(e){return P.router.gotoLogin()},t.prototype.registerHandler=function(e){return P.router.gotoRegister()},t.prototype.renderAttachment=function(e){return this.requestSubView(S,{workModel:e,thirdtitle:!0}).$el.appendTo(this.$attachmentsList),this.$attachmentsList.scrollTop(999),this.$(".comment-input").focusAtEnd()},t.prototype.cacheActivity=function(){var e,t;return this.localCache(this.localCacheId,{content:this.$textareaset.val(),attachments:null!=(e=this.attachments)?e.toJSON().map(function(e){return T.omit(e,"thumbnail")}):void 0,mentionsList:this.mentionsList}),null!=(t=this.atHandlerView)?t.updateNotifTip():void 0},t.prototype.addLocalCache=function(e){return this.mentionsList=e.mentionsList,this.cacheActivity()},t.prototype.deactiveAttachment=function(){if(this.$attachmentsList.empty(),!this.attachments.length&&!this.$textareaset.val().trim())return this.$textareaset.val(""),this.$textareaset.trigger("change")},t.prototype.enterPreviewerSkitchMode=function(){var e;return"function"==typeof(e=this.options).enterSkitchMode&&e.enterSkitchMode(),P.gta.event({action:"prepare to skitch"})},t.prototype.show=function(){return T.delay((e=this,function(){var t,n;if(e.$el)return(n=e.$el.height())>0?(t={display:"block",height:"0px",overflow:"hidden"},e.$el.css(t),e.$el.on("transitionend.activity-creator",function(e){var t;if((t=$(e.target)).hasClass("activity-creator"))return t.off(".activity-creator"),t.addClass("showing"),t.removeAttr("style")}),T.delay(function(){if(e.$el)return e.$el.height(n)},10),P.gta.event({action:"activity-creator-loadend",private:"onboarding"})):e.$el.addClass("showing")}),100);var e},t.prototype.remove=function(){var e;return null!=(e=this.atwho)&&e.shutdown(),t.__super__.remove.apply(this,arguments)},t.prototype.gtaHandler=function(e){return"task"===this.objectModel.get("objectType")&&(e=T.extend({type:this.objectModel.isSubtask()?"subtask":"task",series:this.objectModel.get("ancestorIds").length},e)),P.gta.event(e)},t.prototype.introduceGuest=function(e){var t;if(this.$textareaset.length)return null!=(t=this.atHandlerView)?t.addGuestMember(e):void 0},t}()},hlXBzpUv:function(e,t){},hpTGtx7E:function(e,t,n){e.exports={"task-custom-field":"task-custom-field__12Fn","task-custom-field__inner":"task-custom-field__inner__19CQ"}},hpce7W0k:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n("4c1CS0b3"),c=n("s0r7VfKc"),l=n("gh8QIhMV"),u=n("fZoV3jYy"),p=n("sa1Ed382"),d=function(){p.gta.event({action:"enter search content",page:"Story Page",control:"Fieldslist",type:"task",category:"commongroup",method:"keyboard"})};n.d(t,"a",function(){return h});var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCommit=function(e){if(0!==e.added.length){var n=e.result[e.added[0]];t.props.onSave(t.props.fieldInfo,[{_id:n.id,title:n.name}])}else t.props.onClose()},t.errorHandler=function(e){return Object(l.throwError)(e),a.Observable.empty()},t.searchInputIsTouched=!1,t.searchFn=function(e){t.searchInputIsTouched||(t.searchInputIsTouched=!0,d());var n={_projectId:t.props.project._id,name:e,subtype:t.props.fieldInfo.subtype};return c.default.fetch.get("commongroups/search",n).map(function(e){return function(e){return e.map(function(e){var t=e.parentName?s.get("common.field.selector.belong.to",e.parentName):"";return{id:e._id,name:e.name,desc:t}})}(e)}).catch(t.errorHandler)},t.getPoolItems=function(){var e=t.props.fieldInfo.choices.map(function(e){return{id:e._id,name:e.value,desc:""}}).slice(0,50);return a.Observable.of(e)},t}return r.d(t,e),t.prototype.getInitItems=function(){var e=this.props.fieldInfo,t=e.commonGroupValue;return e.hasValue&&t?[{id:t._id,name:t.value,desc:""}]:[]},t.prototype.render=function(){var e=s.get("common.field.selector.search",this.props.fieldInfo.name),t=s.get("common.field.selector.recommend.title"),n={text:s.get("search.filter.selector.not.found")};return i.a.createElement("div",{className:"common-group-field-selector"},i.a.createElement(u.d,{mode:u.c.Single,selected:this.getInitItems(),alwaysShowSearch:!0,contentPlaceholder:n,searchBoxPlaceholder:e,recommendTitle:t,loadSearch:this.searchFn,loadRecommend:this.getPoolItems,commit:this.onCommit,onClickSelected:this.props.onClickSelected,onClickRecommend:this.props.onClickRecommend,onClickSearched:this.props.onClickSearched}))},t}(i.a.PureComponent)},htZYNBgN:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("u//1fy1x"),a=n("usVkIs8Q"),c=n.n(a),l=Object(s.default)(c.a.Constructor),u=n("arJxzJPZ");n.d(t,"a",function(){return p});var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderContent=function(e){return t.activityPanelContextState=e,i.a.createElement(l,r.a({},t.props,{activityPanelContext:e,ref:t.saveActivityTimelineRef}))},t.activityPanelContextState={},t.saveActivityTimelineRef=function(e){t.activityTimelineRef=e;var n=t.activityPanelContextState.saveActivityTimelineViewInstance;n&&n(e&&e.viewInstance||void 0)},t}return r.d(t,e),t.prototype.render=function(){return i.a.createElement(u.a.Consumer,{children:this.renderContent})},Object.defineProperty(t.prototype,"viewInstance",{get:function(){return this.activityTimelineRef&&this.activityTimelineRef.viewInstance},enumerable:!0,configurable:!0}),t}(o.PureComponent)},hvbDW21c:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"defaultCardInfos",function(){return l}),n.d(r,"doneCardInfos",function(){return u}),n.d(r,"basicCardInfos",function(){return p}),n.d(r,"scenarioCardInfos",function(){return d}),n.d(r,"restCardInfos",function(){return h});var o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n("TSYQbtd+"),a=n.n(s),c=n("a+N5u/Cl"),l=["scenario","time","repeat","note","worktimes","storyPoint","taskProgress","subtask","comment","reminder","attachment","objectlink","like","tag","sprint"],u=["scenario","tag"],p=["scenario","time","repeat","reminder"],d=["note","tag","worktimes","storyPoint","taskProgress","sprint"],h=["subtask","objectlink","comment","attachment","like"],m=n("oRPyOBnq"),f=n("3LGsbOqB"),g=(n("zVCf3FCx"),n("GESwhXbR")),v=n("HHtVDBJc"),b=n("XQ5nL9cp"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRRule=function(){var e=t.props.recurrence;if(!e)return null;var n,r=e.join("\n");return n=-1===r.indexOf("DTSTART")?{forceset:!0,dtstart:new Date}:{forceset:!0},r&&(r=b.rrulestr(r,n)),r},t}return o.d(t,e),t.prototype.renderIcon=function(){var e=this.props.icon;return e?"string"==typeof e?i.createElement(g.Icon,{name:e,size:12}):e:null},t.prototype.render=function(){var e,t=this.getRRule();if(!t)return null;var n=v.freq2Title(t),r=this.props.className,o=a()("repeat-label",((e={})[""+r]=!!r,e));return i.createElement("span",{className:o,"data-role":"repeat-label"},this.renderIcon(),n)},t}(i.PureComponent),k=n("V6edIaEd"),_=n("zH+Yaocm"),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.formatWorktime=function(e,t){void 0===t&&(t=1),c.isNumber(e)&&!c.isNaN(e)||(e=0);var n=Math.pow(10,t);return Math.round(e*n/60)/n},t.worktimeFormatter=function(e){var n=e.totalTime,r=e.usedTime;if(!n&&!r)return null;var o=t.formatWorktime(n),i=t.formatWorktime(r),s=!!n&&r>n;return Object.assign({},e,{totalTimeFormatted:o,usedTimeFormatted:i,isOverdue:s})},t}return o.d(t,e),t.prototype.getAvailableTypes=function(e){return c.intersection(e,this.props.infos||[])},t.prototype.renderTimeLabel=function(){var e=this.props,t=e.startDate,n=e.dueDate;return t||n?i.createElement(f.a,{key:"timelabel",startDate:t,dueDate:n}):null},t.prototype.renderRepeat=function(){var e=this.props.recurrence;return e?i.createElement(y,{key:"repeat",recurrence:e}):null},t.prototype.renderScenario=function(){var e=this.props.currentConfig;return e&&e.displayed?i.createElement("span",{key:"scenario",className:"icon-wrapper with-svg hinted","data-title":e.name},i.createElement(m.FieldIcon,{icon:e.icon,type:"task"})):null},t.prototype.renderNote=function(){var e=this.props.note;return e?!!(e.length>0)&&i.createElement(g.Icon,{key:"note",className:"icon-wrapper",name:"book"}):null},t.prototype.renderWorkTime=function(){var e=this.props.workTime;if(!e)return null;var t=this.worktimeFormatter(e);if(!t)return null;var n=a()("icon-wrapper with-text",{overdue:t.isOverdue});return i.createElement("span",{key:"worktime",className:n},i.createElement(g.Icon,{name:"tachometer"}),t.usedTimeFormatted+"/"+(t.totalTimeFormatted||"-"))},t.prototype.renderStoryPoint=function(){var e=this.props.storyPoint;return!!e&&i.createElement("span",{key:"storypoint",className:"icon-wrapper with-text"},i.createElement(g.Icon,{name:"story-points"}),e)},t.prototype.renderProgress=function(){var e=this.props.progress;return!!(e&&e>0)&&i.createElement("span",{key:"progress",className:"icon-wrapper with-text"},i.createElement(g.Icon,{name:"normal"}),e+"%")},t.prototype.renderSprint=function(){var e=this.props.sprint;return e&&i.createElement("span",{key:"sprint",className:"icon-wrapper with-text"},i.createElement(g.Icon,{name:"sprint"}),e.name)},t.prototype.renderSubtask=function(){var e=this.props.subtaskCount;return!!(e&&e.total>0)&&i.createElement("span",{key:"subtask",className:"icon-wrapper with-text"},i.createElement(g.Icon,{name:"ul"}),e.done+"/"+e.total)},t.prototype.renderComment=function(){var e=this.props.commentsCount;return!!(e&&e>0)&&i.createElement(g.Icon,{key:"comment",className:"icon-wrapper",name:"comment-line"})},t.prototype.renderReminder=function(){var e=this.props.reminder;return e&&e.rules&&e.rules.length>0&&i.createElement(g.Icon,{key:"reminder",className:"icon-wrapper",name:"alert-clock"})},t.prototype.renderAttachments=function(){var e=this.props.attachmentsCount;return!!(e&&e>0)&&i.createElement(g.Icon,{key:"attachments",className:"icon-wrapper",name:"paperclip"})},t.prototype.renderObjectlinks=function(){var e=this.props.objectlinksCount;return!!(e&&e>0)&&i.createElement(g.Icon,{key:"objectlinks",className:"icon-wrapper",name:"link2"})},t.prototype.renderLikes=function(){var e=this.props.likesCount;return!!(e&&e>0)&&i.createElement("span",{key:"links",className:"icon-wrapper with-text"},i.createElement(g.Icon,{name:"dig-line"}),e>999?"999+":e)},t.prototype.renderTags=function(){var e=this.props.tags;return e&&e.length?e.map(function(e){var t,n=a()("tag",((t={})["tag-color-"+e.color]=!0,t));return i.createElement("span",{key:"tags_"+e._id,className:n},e.name)}):null},t.prototype.renderCustomField=function(e){var t=e.type,n=Object(k.castCustomFiledTypeToIconName)({type:t,advancedCustomfield:e.advancedCustomfield,subtype:e.subtype}),r=a()("custom-field-label","type-"+t),o=a()("custom-field-content","type-"+t);return!!n&&i.createElement("span",{key:e._id,className:"icon-wrapper with-text"},i.createElement("span",{className:"icon icon-"+n}),i.createElement("span",{className:r},e.name),i.createElement("span",{className:o},": ",e.value))},t.prototype.renderCrumbFactory=function(e){switch(e){case"scenario":return this.renderScenario();case"time":return this.renderTimeLabel();case"repeat":return this.renderRepeat();case"reminder":return this.renderReminder();case"note":return this.renderNote();case"tag":return this.renderTags();case"worktimes":return this.renderWorkTime();case"storyPoint":return this.renderStoryPoint();case"taskProgress":return this.renderProgress();case"subtask":return this.renderSubtask();case"objectlink":return this.renderObjectlinks();case"comment":return this.renderComment();case"attachment":return this.renderAttachments();case"like":return this.renderLikes();case"sprint":return this.renderSprint();default:return null}},t.prototype.renderCrumbs=function(e){return this.getAvailableTypes(e).map(this.renderCrumbFactory.bind(this))},t.prototype.renderScenarioInfos=function(){var e=this,t=this.props.currentConfig,n=this.getAvailableTypes(d);return t&&t.scenariofields.map(function(t){var r=t.fieldType,o=e.props.customFields||[];if(c.contains(n,r))return e.renderCrumbFactory(r);var i=c.findWhere(o,{_id:t._customfieldId});return i?e.renderCustomField(i):null})},t.prototype.renderTaskflowStatusLabel=function(){return i.createElement(_.TaskStatusLabelTaskflow,{task:{taskflowstatus:this.props.taskflowstatus},size:"normal",readOnly:!0})},t.prototype.render=function(){return i.createElement("div",{className:"task-infos"},this.renderTaskflowStatusLabel(),this.renderCrumbs(p),this.renderScenarioInfos(),this.renderCrumbs(h))},t}(i.PureComponent);n.d(t,"a",function(){return w}),n.d(t,"b",function(){return r})},"hy/w7Vok":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R,D,L,z,A,V,F,B=function(e,t){return function(){return e.apply(t,arguments)}},U={}.hasOwnProperty,H=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};R=n("a+N5u/Cl"),n("4c1CS0b3").Observable,p=n("q1tIBJhx"),V=n("sa1Ed382"),I=n("GESwhXbR").Toast,x=n("3eMzznN/"),N=n("vmWJWrVe"),i=n("bZr3G77e"),O=n("OmupbwLD"),D=n("2qRnoGmE"),m=n("wu4EEviu"),n("s0r7VfKc").default,F=n("gh8QIhMV").throwError,k=n("5V57DkyA").TaskDetailApm,A=n("RLD3BeS/"),M=A.ToastMessageWithUrl,j=A.ToastWithObject,L=n("WMI0/nUp").fetchProjectPlugins,C=n("oq1bWpp9"),S=n("FoX6irlC"),f=n("q6u3XLOb"),u=n("77NnVLwu"),d=n("mQWTeDcC"),c=n("0FRv5rrl"),s=n("odY26VIi"),v=n("+BDmEJp8"),T=n("gBe2F1Rz"),E=n("ioaOqjIU"),h=n("4bWDEe5E"),l=n("qKYkuTVR"),w=n("4GkEO0HF"),P=n("YzJ1+ZsV"),g=n("VilZs/mC"),r=n("yeXCkzp4"),b=n("nzzhqMsF"),a=n("PCjZn8k4"),z=n("D15MKVbL").findSubtaskDefaultScenarioFieldConfig,y=n("E4Gg0AdJ").TaskDetail,o=n("fGXGG6UZ"),_=function(e){function t(){return this.onContentChange=B(this.onContentChange,this),this.deleteModelObject=B(this.deleteModelObject,this),this.openUnarchiveMenu=B(this.openUnarchiveMenu,this),this.openAncestorView=B(this.openAncestorView,this),this.toggleTaskMenu=B(this.toggleTaskMenu,this),this.toggleStageSwitcher=B(this.toggleStageSwitcher,this),this.toggleGroupSwitcher=B(this.toggleGroupSwitcher,this),this.toggleAncestorsPopover=B(this.toggleAncestorsPopover,this),this.toggleStageSelectorPopover=B(this.toggleStageSelectorPopover,this),this.toggleDone=B(this.toggleDone,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)U.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,N),t.prototype.viewName="TaskDetailView",t.prototype.className="task-detail task-detail-loading column-rest-fill",t.prototype.initialize=function(e){var t;if(e._taskId||e.taskModel)return this.options=e,this.taskModel=e.taskModel,this.mounted=!1,this.shareRefreshHandler=(t=this,function(e){if(t.el)return t.isShared=e.isShared,t.mounted?t.render():void 0}),this.renderShareStatus(),k.measure(),x.promiseChain(function(e){return function(){return!e.el}}(this))(function(e){return function(){return e.load()}}(this),function(e){return function(){var t;return e.render(),e.listen(),"function"==typeof(t=e.options).success&&t.success(e),o.add(e,e.taskModel.id),x.trackRecentlyViewed("task",e.taskModel.id)}}(this)).catch(function(e){return function(t){var n;return(R.isString(t)||R.isString(null!=t?t.message:void 0))&&I.error(t),e.options.silentError||"function"==typeof(n=e.options).error&&n.error(e),F(t),e.close()}}(this)),this},t.prototype.fetchTask=function(){return x.warehouse.resolveFetch(C,this.options._taskId,{silentError:null!=this.options.silentError||!1}).then((e=this,function(t){if(e.taskModel=t,!e.taskModel.isIntegral())return e.fetchFullTask()})).then(function(e){return function(){if(e._projectId=e.taskModel.get("_projectId"),e._organizationId||(e._organizationId=e.taskModel.get("_organizationId")),!e.taskModel.checkIsVisible())return Promise.reject()}}(this));var e},t.prototype.fetchLocation=function(){return this.isIndieTask()?this.fetchOrganization():this.fetchProject()},t.prototype.fetchProject=function(){return this.taskModel.checkIsVisible()?x.warehouse.resolveFetch(u,this._projectId).then((e=this,function(t){return e.projectModel=t,e._organizationId||(e._organizationId=e.projectModel.get("_organizationId"))})):Promise.reject();var e},t.prototype.fetchOrganization=function(){return this.taskModel.checkIsVisible()?x.warehouse.resolveFetch(c,this._organizationId).then(function(e){return e.joinRoom()}):Promise.reject()},t.prototype.fetchFullTask=function(){return new Promise((e=this,function(t,n){return e.taskModel.fetch({success:t,error:n})}));var e},t.prototype.renderShareStatus=function(){if(this.isShared=!1,D.FEATURES.thirdShare)return i.get(D.SHARE_HOST+"/api/tasks/"+this.options._taskId+"/share",{silentError:!0}).then(this.shareRefreshHandler)},t.prototype.fetchTasklist=function(){return x.warehouse.resolveFetch(E,this._projectId).then((e=this,function(t){e.tasklistsCollection=t}));var e},t.prototype.fetchSprint=function(){return new Promise((e=this,function(t,n){var r;return(r=e.taskModel.get("_sprintId"))?f.fetch(r,{success:function(n){return e.sprintModel=n,t()}}):t()}));var e},t.prototype.fetchTasksCollection=function(){return x.warehouse.resolveFetch(T,this.taskModel.id,{boundToObjectType:"task"}).then((e=this,function(t){e.subtasksCollection=t}));var e},t.prototype.fetchMembersCollection=function(){return x.warehouse.resolveFetch(s,this._projectId,{boundToObjectType:"project"}).then((e=this,function(t){e.membersCollection=t}));var e},t.prototype.fetchPluginsCollection=function(){return x.thunkToPromise(L(this._projectId)).then((e=this,function(t){e.pluginsCollection=t}));var e},t.prototype.fetchScenarioFieldConfigsCollection=function(){var e,t;return e=h.genCacheId(this._projectId,"task"),x.warehouse.resolveFetch(h,e,{attrs:{withTaskflowstatus:this.projectModel.isTaskflowEnabled()},boundToObjectType:"task"}).then((t=this,function(e){t.scenarioFieldConfigsCollection=e}))},t.prototype.fetchDetailInfos=function(){return Promise.all([this.fetchTasksCollection()].concat(this.isIndieTask()?[]:[this.fetchTasklist(),this.fetchStages(),this.fetchScenario(),this.fetchSprint(),this.fetchMembersCollection(),this.fetchPluginsCollection(),this.fetchScenarioFieldConfigsCollection()]))},t.prototype.hasReadPermission=function(){return!!this.isIndieTask()||(this.projectModel.getRoleScope()>=-1||"all"===this.projectModel.get("visibility")||"organization"===this.projectModel.get("visibility"))},t.prototype.fetchStages=function(){return this.projectModel.isTaskflowEnabled()?Promise.resolve():this.taskModel.get("isArchived")?Promise.resolve():x.warehouse.resolveFetch(v,this.taskModel.get("_tasklistId")).then((e=this,function(t){e.stagesCollection=t}));var e},t.prototype.fetchScenario=function(){var e,t,n;return(null!=(t=this.projectModel)?t.isTaskflowEnabled():void 0)&&(e=this.taskModel.get("_scenariofieldconfigId"))?x.warehouse.resolveFetch(d,e,{attrs:{withTaskflowstatus:!0}}).then((n=this,function(e){n.scenarioFieldConfigModel=e})):Promise.resolve()},t.prototype.load=function(){return this.showLoadingIndicator(),x.promiseChain((e=this,function(){return!e.el}))(function(e){return function(){return e.fetchTask()}}(this),function(e){return function(){return e.fetchLocation()}}(this),function(e){return function(){return e._taskId=e.taskModel.id,e.sprintModel=null,e.hasReadPermission()?e.fetchDetailInfos():(e.subtasksCollection=T.get(e._taskId),e.membersCollection=s.get(e._projectId),Promise.resolve())}}(this),function(e){return function(){return e.hideLoadingIndicator(),e.$el.removeClass("task-detail-loading")}}(this));var e},t.prototype.listen=function(){return m.on(":refresh:shareStatus/"+this.taskModel.id,this.shareRefreshHandler),this.listenTo(this.taskModel,"destroy",function(){var e,t;return(t=this.taskModel.get("ancestorIds")[0])&&o.checkParentPath(this,t)?o.updateTaskDetail(t):("function"==typeof(e=this.options).onUnfavorite&&e.onUnfavorite(this.taskModel.get("_id")),this.close())}),this.listenTo(this.taskModel,"change:isVisible",function(){if(!this.taskModel.checkIsVisible())return this.close()}),this.listenTo(this.taskModel,["change:_executorId","change:_stageId","change:ancestorIds","change:ancestors","change:content","change:divisions","change:involveMembers","change:involvers","change:isArchived","change:isDone"].join(" "),this.render),this.listenTo(this.taskModel,"change:_scenariofieldconfigId",function(){return this.fetchScenario().then((e=this,function(){if(e.el)return e.render()}));var e}),this.projectModel&&this.listenTo(this.projectModel,"change:applications",function(){if(this.projectModel.isAppChanged("tasklist")||this.projectModel.isAppChanged("taskUniqueId")||this.projectModel.isAppChanged("testplan"))return this.render()}),this.listenBelongAttrs(),this.listenSubtaskOpen()},t.prototype.listenBelongAttrs=function(){return this.listenTo(this.taskModel,"change:_tasklistId",function(){if(this.taskModel.hasChanged("_projectId")||this.taskModel.hasChanged("_organizationId"))return this.close();var e;if(!this.isIndieTask()&&!this.projectModel.isTasklistIgnored())return x.promiseChain((e=this,function(){return!e.el}))(function(e){return function(){return x.warehouse.resolveFetch(v,e.taskModel.get("_tasklistId"))}}(this),function(e){return function(t){return e.stagesCollection=t,e.render()}}(this))})},t.prototype.listenSubtaskOpen=function(){return this.on("dataFetching",function(){return this.$el.addClass("refreshing"),R.defer((e=this,function(){return e.$el.addClass("fade"),e.showLoadingIndicator()}));var e}),this.on("dataFetched",function(e){return this.$el.removeClass("refreshing fade").replaceWith(e.el),this.stopListening(),this.undelegateEvents()}),this.on("dataError",function(){return R.defer((e=this,function(){return e.$el.removeClass("refreshing fade"),e.hideLoadingIndicator()}));var e})},t.prototype.render=function(){var e,t,n,r,o,i,s,a,c,l,u,d,h,m,f,g,v;return h=Boolean(this.stagesCollection)&&!((null!=(t=this.projectModel)?t.isTaskflow():void 0)&&this.stagesCollection.length<=1),m=null!=(o=this.stagesCollection)?o.get(this.taskModel.get("_stageId")):void 0,g=null!=(i=this.tasklistsCollection)?i.get(this.taskModel.get("_tasklistId")):void 0,e=(null!=(s=this.tasklistsCollection)?s.length:void 0)>1||(null!=(a=this.projectModel)?a.isAppEnabled("tasklist"):void 0),f=this.taskModel.pick("_organizationId","ancestors","content","divisions","involveMembers","involvers","isArchived","isDone","shareStatus","uniqueId"),this.requestReactView(this.el,y,R.extend(f,{isShared:this.isShared,isGhost:V.user.get("isGhost"),isIndie:this.taskModel.isIndie(),isSubtask:this.taskModel.isSubtask(),isTasklistEnabled:!!e&&!(null!=(c=this.projectModel)?c.isTasklistIgnored():void 0),permissions:this.getPermissions(),projectName:null!=(l=this.projectModel)?l.get("name"):void 0,showStage:h,stageName:(null!=m?m.get("name"):void 0)||(null!=(u=this.taskModel.get("stage"))?u.name:void 0),taskIdEnabled:!!(null!=(d=this.projectModel)?d.isAppEnabled("taskUniqueId"):void 0),isStory:"story"===(null!=(n=this.scenarioFieldConfigModel)?n.get("proTemplateConfigType"):void 0),tasklistName:(null!=g?g.get("title"):void 0)||(null!=(r=this.taskModel.get("tasklist"))?r.title:void 0),subtaskDefaultScenarioFieldConfig:this.getSubtaskDefaultScenarioFieldConfig(),where:this.options.where,task:this.taskModel.toJSON(),taskModel:this.taskModel,members:this.membersCollection,project:this.projectModel,subtasks:this.subtasksCollection,plugins:this.pluginsCollection,onAncestorClick:this.openAncestorView,onClose:this.options.onObjectModalClose,onContentChange:this.onContentChange,onDelete:this.deleteModelObject,onMenuToggle:this.toggleTaskMenu,onProjectSelect:this.toggleStageSelectorPopover,onRestore:this.openUnarchiveMenu,onStageClick:this.toggleStageSwitcher,onTasklistClick:this.toggleGroupSwitcher,onDateSelectExternal:this.checkTaskDependencyConflict.bind(this),onToggleDone:this.toggleDone,onChangeStatusError:this.onChangeStatusError.bind(this),banner:p.createElement(b.TaskDependencyWrapper,{taskId:this.taskModel.id,organizationId:this._organizationId,projectId:this._projectId,isSubtask:this.taskModel.isSubtask(),onClickItem:(v=this,function(e){return v.enterDependencyTaskDetail(e),v.gtaHandler({action:"open detail",control:"Detail Page",category:"dependency",type:"task"})}),ref:function(e){return function(t){return e.taskDependencyRef=t}}(this)})})),this.mounted=!0},t.prototype.getSubtaskDefaultScenarioFieldConfig=function(){var e,t,n,r,o;return e=null!=(n=this.scenarioFieldConfigsCollection)?n.toJSON():void 0,t=null!=(r=this.tasklistsCollection)&&null!=(o=r.findWhere({_id:this.taskModel.get("_tasklistId")}))?o.toJSON():void 0,e?z(e,t):void 0},t.prototype.enterDependencyTaskDetail=function(e){var t;return t={objectType:"task",objectId:e,fixedModal:!0},this.requestSubView(O).open(a,t)},t.prototype.addTaskDependency=function(e){var t;return null!=(t=this.taskDependencyRef)?t.addTaskDependency(e):void 0},t.prototype.checkTaskDependencyConflict=function(){var e;return null!=(e=this.taskDependencyRef)?e.checkConflict():void 0},t.prototype.onChangeStatusError=function(e){var t;if("hasUndoneDependencyTasks"===(null!=e?e.name:void 0))return null!=(t=this.taskDependencyRef)?t.preventedCheckDone():void 0},t.prototype.isIndieTask=function(){return this.taskModel.isIndie()},t.prototype.getPermissions=function(){var e,t,n;return e=this.taskModel.get("isArchived"),n="complete"!==(null!=(t=this.sprintModel)?t.get("status"):void 0),{put:!e&&this.taskModel.hasPermission("put"),putMove:!e&&this.taskModel.hasPermission("put.move"),putArchive:this.taskModel.hasPermission("put.archive")&&n,del:this.taskModel.hasPermission("del")}},t.prototype.toggleDone=function(){var e,t,n;return e=!(t=this.taskModel.get("isDone")),this.taskModel.saveAttr("isDone",e,{error:(n=this,function(e){return n.taskModel.set("isDone",t),n.onChangeStatusError(e)})}),this.gtaHandler({action:"toggle complete status",control:"Title",category:t?"off":"on"})},t.prototype.toggleStageSelectorPopover=function(e){var t,n,r,o,i;if(!(t=$(e.currentTarget)).data("bs.popover"))return o=this.taskModel,n=function(e){return M.success({messageTitle:tb_i18n.get("task.menu.move.success"),url:"/task/"+(e._id||e.id),urlTitle:o.get("content")})},null!=(r=this.stageSelectorView)&&r.remove(),this.stageSelectorView=this.requestSubView(g,{$toggler:t,container:t.parent(),optionalType:"scenarioConfigs",tips:tb_i18n.get("task.menu.move.tips"),organizationId:this._organizationId,acceptedStatusKinds:o.getAcceptedStatusKinds(),showLinkOptions:this.taskModel.hasPermissions("objectlink.post"),withDefaultProject:!1,success:(i=this,function(e){var t,r,s,a,c,l;return i.projectModel=e.projectModel,i.stageModel=e.stageModel,i.sprintModel=e.sprintModel,(null!=(a=i.projectModel)?a.isTaskflowEnabled():void 0)?(r=e._taskflowstatusId,t=e._scenariofieldconfigId,s={success:n,attrs:{_scenariofieldconfigId:t}},o.moveByStatus(r,s)):o.forkOrMove("move",null!=(c=i.stageModel)?c.id:void 0,{attrs:{doLink:e.doLink,doLinked:e.doLinked,_organizationId:(null!=(l=e.projectModel)?l.get("_organizationId"):void 0)||i._organizationId},success:n})})}).show()},t.prototype.toggleAncestorsPopover=function(e){var t,n,r;if(!(t=$(e.currentTarget)).data("bs.popover"))return n=this.taskModel.get("ancestors").map(function(e){return{_id:e._id,title:e.content}}).slice(2),this.requestSubView(l,{width:248,$toggler:t,dataList:n,select:(r=this,function(t){return r.openAncestorView(e,t)})}).show()},t.prototype.toggleGroupSwitcher=function(e){var t,n,r,o,i;if(this.gtaHandler({action:"move tasklist"}),t=$(e.currentTarget),o=this.taskModel.get("_tasklistId"),n=(this.tasklistsCollection||[]).map(function(e){return{_id:e.get("_id"),title:e.get("title")}}),!t.data("bs.popover")||!this.groupSwitcherView)return null!=(r=this.groupSwitcherView)&&r.remove(),this.groupSwitcherView=this.requestSubView(l,{$toggler:t,container:t.parent(),dataList:n,selected:o,select:(i=this,function(e){var t;if(e!==i.taskModel.get("_tasklistId"))return t=S.find(e),i.taskModel.saveAttr("move",null,{attrs:{_stageId:t.get("stageIds")[0]}}),i.gtaHandler({action:"moved tasklist"})})}).show(),this;this.groupSwitcherView.update(n,o)},t.prototype.toggleStageSwitcher=function(e){var t,n,r,o,i;if(this.gtaHandler({action:"move content",control:"Task Editor"}),t=$(e.currentTarget),o=this.taskModel.get("_stageId"),n=(this.stagesCollection||[]).map(function(e){return{_id:e.get("_id"),title:e.get("name")}}),!t.data("bs.popover")||!this.stageSwitcherView)return null!=(r=this.stageSwitcherView)&&r.remove(),this.stageSwitcherView=this.requestSubView(l,{$toggler:t,container:t.parent(),dataList:n,selected:o,select:(i=this,function(e){var t,n,r,o;if(e!==i.taskModel.get("_stageId"))return!i.taskModel.isSubtaskDone()&&(null!=(r=i.stagesCollection)&&null!=(o=r.get(e))?o.get("isLocked"):void 0)?I.error(tb_i18n.get("task.menu.move.uncomplete")):(n={_stageId:e},(t=i.taskModel.get("_sprintId"))&&(n._sprintId=t),i.taskModel.saveAttr("move",null,{attrs:n}),i.gtaHandler({action:"moved content",control:"Task Editor"}))})}).show(),this;this.stageSwitcherView.update(n,o)},t.prototype.toggleTaskMenu=function(e){var t;return(t=$(e.currentTarget)).data("bs.popover")||this.requestSubView(w,{fixed:!0,$toggler:t,taskModel:this.taskModel,sprintModel:this.sprintModel,scenarioFieldConfigModel:this.scenarioFieldConfigModel,isShared:this.isShared,onUnfavorite:this.options.onUnfavorite,addPreTaskDependency:this.addTaskDependency.bind(this,"pre"),addPostTaskDependency:this.addTaskDependency.bind(this,"post")}).show(),this.gtaHandler({action:"toggle more menu"}),this},t.prototype.openAncestorView=function(e,t){var n,r;return r=$(e.target).data("id")||t,o.updateTaskDetail(r),n=this.taskModel.get("ancestorIds").slice().reverse().indexOf(r),this.gtaHandler({action:"open detail",control:"Breadcrumb",type:n>0?"subtask":"task",series:n})},t.prototype.openUnarchiveMenu=function(e){var t,n,r,o,i,s;if(this.gtaHandler({action:"unarchive content"}),!(t=$(e.currentTarget)).data("bs.popover")){var a;if(s=null!=(n=this.tasklistsCollection)?n.get(this.taskModel.get("_tasklistId")):void 0,i=null!=(r=this.stagesCollection)?r.get(this.taskModel.get("_stageId")):void 0,null==(o=this.projectModel)||!o.isTaskflowEnabled())return this.taskModel.isSubtask()?this.requestSubView(P,{$toggler:t,title:tb_i18n.get("unarchive"),isSubtask:this.taskModel.isSubtask(),_taskId:this.taskModel.get("ancestorIds")[0],currentModel:this.taskModel,success:(a=this,function(){return a.gtaHandler({action:"unarchived content"})})}).show():this.requestSubView(g,{$toggler:t,projectModel:this.projectModel,tasklistModel:s,stageModel:i,frozenTypes:["project"],optionalType:"scenarioConfigs",organizationId:this._organizationId,success:function(e){return function(t){var n;return e.projectModel=t.projectModel,e.stageModel=t.stageModel,e.taskModel.unarchive({_stageId:null!=(n=e.stageModel)?n.id:void 0,success:e.unarchiveSuccessCallback.bind(e)}),e.gtaHandler({action:"unarchived content"})}}(this)}).show();this.unarchiveScrumTask(t,s)}},t.prototype.unarchiveSuccessCallback=function(){return V.PREFERENCE.getIsUsePanelToOpenTask()&&V.APP.hidePanel(),j.unarchive(this.taskModel),this.remove()},t.prototype.unarchiveScrumTask=function(e,t){var n,r,o,i,s,a,c,l,u;return a=null!=(i=this.scenarioFieldConfigModel)?i.toJSON():void 0,r=this.taskModel.getAcceptedStatusKinds(),a.proTemplateConfigType?(n=[a.proTemplateConfigType],o=["project","scenarioConfig"]):(n=void 0,o=["project"]),(c=(l=(null!=a?a.taskflowstatuses:void 0)||[]).find((u=this,function(e){return e._id===u.taskModel.get("_taskflowstatusId")})))&&(s=c.kind,H.call(r,s)>=0)||(c=l.find(function(e){var t;return t=e.kind,H.call(r,t)>=0})),this.requestSubView(g,{$toggler:e,projectModel:this.projectModel,tasklistModel:t,frozenTypes:o,optionalType:"scenarioConfigs",scenarioFieldConfig:a,taskflowStatus:c,acceptedScenarioTypes:n,acceptedStatusKinds:r,success:function(e){return function(n){var r,o,i,s;return e.projectModel=n.projectModel,o=n._taskflowstatusId,r=n._scenariofieldconfigId,s=n.sprintModel,i={_tasklistId:null!=(t=n.tasklistModel)?t.get("_id"):void 0,_scenariofieldconfigId:r,_parentId:e.taskModel.get("ancestorIds")[0]},e.projectModel.isSprintEnabled()&&(i=R.extend({},i,{_sprintId:null!=s?s.get("_id"):void 0})),e.projectModel.isTasklistIgnored()&&(i=R.omit(i,"_tasklistId")),e.taskModel.unarchiveByStatus(o,{attrs:i,success:e.unarchiveSuccessCallback.bind(e)}),e.gtaHandler({action:"unarchived content"})}}(this)}).show()},t.prototype.deleteModelObject=function(e){var t,n;return this.gtaHandler({action:"delete archived content"}),(t=$(e.currentTarget)).data("bs.popover")||this.requestSubView(r,{$toggler:t,title:tb_i18n.get("archive.list.menu.remove.completely"),confirmDelete:tb_i18n.get("archive.list.menu.confirm.delete.task"),currentModel:this.taskModel,gtaType:this.taskModel.isSubtask()?"subtask":"task",success:(n=this,function(){return n.gtaHandler({action:"deleted archived content"})})}).show(),this},t.prototype.close=function(){var e,t;return"taskDetailPanel"===(null!=(t=this.parentView)?t.viewName:void 0)?"function"==typeof(e=this.parentView).back&&e.back():this.remove(),this},t.prototype.remove=function(){var e,n,r,i;return this.taskModel&&m.off(":refresh:shareStatus/"+this.taskModel.id,this.shareRefreshHandler),null!=(e=this.$noteEditContent)&&e.off("change"),(null!=(n=this.taskModel)?n.get("_projectId"):void 0)&&(i=V.router.getUrl().replace("/task/"+this.taskModel.id,""),V.router.navigate(i,{trigger:!1})),"ObjectModalView"===(null!=(r=this.parentView)?r.viewName:void 0)&&this.parentView.remove(),this.trigger("remove"),o.delete(this),t.__super__.remove.apply(this,arguments)},t.prototype.onContentChange=function(e){return e!==this.taskModel.get("content")&&this.taskModel.updateContent(e),this.gtaHandler({action:"edited title",control:"Title"})},t.prototype.gtaHandler=function(e){return e=R.extend({type:this.taskModel.isSubtask()?"subtask":"task",series:this.taskModel.get("ancestorIds").length},e),V.gta.event(e)},t}(),t.Constructor=_},hzH29J8E:function(e,t,n){},i0T2B3DC:function(e,t){},"i3VL+mBE":function(e,t){},"i5/Rw1pB":function(e,t,n){},iCr2nGAb:function(e,t,n){"use strict";n.r(t);var r=n("a+N5u/Cl"),o=n.n(r),i=function(e,t,n){var r=t||e[0],o=r.taskflowstatuses||[];return{defaultConfig:r,defaultStatus:n&&o.some(function(e){return e._id===n._id})?n:s(o)}};function s(e){return o.a.find(e,function(e){return"start"===e.kind})}var a=n("mrSGxOB2"),c=n("q1tIBJhx"),l=n("tLZJUYWX"),u=n("GESwhXbR"),p=n("oRPyOBnq"),d=n("TCxkpEjv"),h=n("fROYW9B/"),m=n("bGgulMbD"),f=function(e){function t(t){var n=e.call(this,t)||this;n.setDropdownRef=function(e){n.dropdownRef=e},n.onConfirm=function(){n.setState({confirmedScenario:n.state.selectedScenario,confirmedStatus:n.state.selectedStatus}),n.props.onSelect(n.state.selectedScenario,n.state.selectedStatus),n.dropdownRef.close()},n.onSelectScenario=function(e){if(e._id!==n.state.selectedScenario._id){var t=n.props.scenarioFieldConfigs.find(function(t){return t._id===e._id}),r=s(t&&t.taskflowstatuses||[]);n.setState({selectedScenario:t,selectedStatuses:t.taskflowstatuses,selectedStatus:r||null})}},n.onSelectStatus=function(e){var t=n.state.selectedScenario.taskflowstatuses.find(function(t){return t._id===e});n.setState({selectedStatus:t})},n.onRequestConfigView=function(){n.dropdownRef.close(),n.props.onRequestConfigView&&n.props.onRequestConfigView()};var r=i(t.scenarioFieldConfigs,t.defaultScenarioFieldConfig,t.defaultTaskflowStatus),o=r.defaultConfig,a=r.defaultStatus;return n.props.onSelect(o,a),n.state={selectedScenario:o,selectedStatuses:o.taskflowstatuses,selectedStatus:a,confirmedScenario:o,confirmedStatus:a},n}return a.d(t,e),t.prototype.shouldDisplaySelector=function(){var e=this.props.scenarioFieldConfigs,t=[e.length>1,e[0]&&e[0].displayed].some(function(e){return!!e});return this.props.isOrg&&t},t.prototype.renderScenarioSelector=function(){return c.createElement("div",{className:m["scenario-locator-item"]},c.createElement("div",{className:"title"},l.get("type")),c.createElement(h.ConfigComponent,{defaultConfig:this.state.selectedScenario,scenarioFieldConfigs:this.props.scenarioFieldConfigs,boundToObjectType:"task",showTextHint:!1,onSelectConfig:this.onSelectScenario,hasPermission:this.props.hasPermission,onRequestConfigView:this.onRequestConfigView}))},t.prototype.renderStatusSelector=function(){return c.createElement("div",{className:m["scenario-locator-item"]},c.createElement("div",{className:"title"},l.get("task.locator.status.selector.label")),c.createElement(d.a,{taskflowStatuses:this.state.selectedStatuses,selectedStatus:this.state.selectedStatus,onSelect:this.onSelectStatus}))},t.prototype.renderConfirmButton=function(){var e=Boolean(this.state.selectedScenario&&this.state.selectedStatus);return c.createElement(u.Button,{disabled:!e,onClick:this.onConfirm},l.get("confirm"))},t.prototype.renderContent=function(){return c.createElement("div",{className:m["scenario-locator-dropdown-content"]},this.renderScenarioSelector(),this.renderStatusSelector(),this.renderConfirmButton())},t.prototype.renderTrigger=function(){var e=this.state,t=e.confirmedScenario,n=e.confirmedStatus;return c.createElement("div",{className:m["scenario-locator-dropdown-trigger"]},c.createElement(p.FieldIcon,{icon:t.icon,type:"task"}),c.createElement("span",null,t.name)," · ",c.createElement("span",{className:"status-name"},n.name),c.createElement(u.Icon,{name:"chevron-down"}))},t.prototype.render=function(){if(!this.shouldDisplaySelector())return null;var e=m["scenario-locator-dropdown"]+" scenario-locator-dropdown";return c.createElement(u.TitledDropdown,{ref:this.setDropdownRef,className:e,content:this.renderContent(),titleCls:m["scenario-locator-dropdown-title"],title:l.get("scenario.locator.dropdown.title"),placement:"bottomLeft",nested:!0},this.renderTrigger())},t}(c.Component);n.d(t,"getDefaultScenarioAndConfig",function(){return i}),n.d(t,"getDefaultStatus",function(){return s}),n.d(t,"ScenarioLocator",function(){return f}),n.d(t,"TaskflowStatusesDropdown",function(){return d.a})},"iEgAZGI+":function(e,t,n){"use strict";n.r(t);var r=function(){return new Promise(function(e){n.e(10).then(function(t){var r=n("7ntPDBf8"),o=n("Jz+XfQZJ"),i=n("n7Erqg0L"),s=n("ElPnlcE4"),a=n("LcUGkZ6O"),c=n("MNlYA0fk");e({task:r,post:o,event:i,entry:s,testcase:a,usercase:c})}.bind(null,n)).catch(n.oe)})},o=function(){return new Promise(function(e){n.e(14).then(function(t){var r=n("ZKkHIpWT"),o=n("KCOaqNuq"),i=n("H5U46Bxa"),s=n("RFllHK7R");e({project:r,event:o,task:i,post:s})}.bind(null,n)).catch(n.oe)})};n.d(t,"panels",function(){return r}),n.d(t,"creator",function(){return o})},"iIFTzg/E":function(e,t){},iIpjbFsv:function(e,t,n){e.exports=n.p+"images/d_aoteman@2x.480f51ec.png"},iLPEDbJK:function(e,t,n){"use strict";n.r(t),n.d(t,"getIntegrations",function(){return p});var r=n("mrSGxOB2"),o=n("s0r7VfKc"),i=n("LvDlAkAJ"),s=n.n(i),a=n("2qRnoGmE"),c=n.n(a),l=c.a.DN_SITE_URL+"/teambition/object-link-icons/thoughts-folder.png",u=c.a.DN_SITE_URL+"/teambition/object-link-icons/thoughts-docs.png";function p(e,t){return o.default.fetch.post("integrations/"+e,{data:d(t)}).toPromise()}function d(e){var t=r.a({},e,{type:e.subType,summary:e.summary||e.content,url:e.originUrl});return e&&s.a.startsWith(e.subType,"thoughts")&&s.a.assign(t,{thumbnailUrl:"thoughts-entry"===e.subType?u:l}),t}},iMQdzzrd:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return p});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("a+N5u/Cl"),s=n("6EY9/lIj"),a=n("9Ip6qvet");function c(e,t,n,s,a){var c,l=function(e){var t,n=e;return(t=e).render||t.prototype&&t.prototype.render||(n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r.d(n,t),n.prototype.render=function(){return e(this.props,this.context)},n}(o.Component)),n}(e);return(c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){return 0===n.length?e.prototype.render.call(this):function e(t,n,r){if(!t)return o.createElement("noscript",null);if("string"==typeof t||"number"==typeof t)return n(t);if(function(e){return/\bno-highlight\b/.test(e.props.className)}(t))return t;var s=t.props.children;return"function"==typeof t.type?o.createElement(r(t.type),t.props):i.isArray(s)?o.cloneElement(t,t.props,o.Children.map(s,function(t){return e(t,n,r)})):o.isValidElement(s)?o.cloneElement(t,t.props,e(s,n,r)):n(t)}(e.prototype.render.call(this),function(e){return s(e,n)},function(e){return a(e,n)})},t}(l)).displayName=(l.displayName||l.name)+"-"+t,c}var l=function(e,t){return(n=function(e){return e(e)})(function(r){return function(o,i){return c(o,e,i,t,n(r))}});var n};var u=l("sliced",function(e,t){var n;if("string"==typeof e){var r=(i=e.replace(/(\r\n|\n|\r)/gm,"").replace(/<\/?em>/gi,"")).indexOf(t);n=o.createElement(s.a,{title:i,sliceIndex:r,position:"ends"})}else if("number"==typeof e)n=e;else{n=o.cloneElement(e);var i,a=e.props.children;if("string"==typeof a)r=(i=a.replace(/(\r\n|\n|\r)/gm,"")).indexOf(t),n=i&&r>=6?o.cloneElement(e,{},o.createElement(s.a,{title:i,sliceIndex:r,position:"ends"})):o.cloneElement(e,{},i)}return n}),p=l("highlightened",function(e,t){if("string"==typeof e||"number"==typeof e){var n=i.escape(e).replace(Object(a.e)(t),"<em>$1</em>");return o.createElement("span",{dangerouslySetInnerHTML:{__html:n}})}var s=e.props.children;if("string"==typeof s)return n=i.escape(s).replace(Object(a.e)(t),"<em>$1</em>"),o.cloneElement(e,r.a({},e.props,{dangerouslySetInnerHTML:{__html:n}}),null);return o.cloneElement(e)})},iPBkuJnN:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("wd/RKGTj"),s=n.n(i),a=n("Z7XVTGXp"),c=(n("Ryg6H48r"),"left"),l="middle",u="right",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getStartDate=function(){return s()(this.props.startDate)},t.prototype.getEndDate=function(){return s()(this.props.endDate)},t.prototype.getCurrentDate=function(){return s()(this.props.currentDate)},t.prototype.getWidth=function(){var e=this.getStartDate(),t=this.getEndDate(),n=Object(a.x)(this.props.mode);return(Object(a.l)(t,e)+1)*n},Object.defineProperty(t.prototype,"viewPosition",{get:function(){var e=this.getCurrentDate(),t=this.props.mode,n=this.getEndDate(),r=this.getStartDate();if("week"===t){var o=Object(a.r)(t);r=(n=n.clone().endOf(o).subtract(7,"day")).clone().subtract(7,"day"),t="day"}var i=Object(a.H)(t);return n.isSameOrBefore(e,i)?c:r.isAfter(e)?u:l},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.getStartDate(),t={width:this.getWidth()+"px"},n=this.props.mode,r={minWidth:Object(a.y)(n,e)};return o.createElement("div",{className:"gantt-chart-month-component on-"+this.viewPosition,style:t},o.createElement("div",{className:"gantt-chart-month-text",style:r},Object(a.m)(e,n)))},t}(o.PureComponent),d=n("2BlQZA9A"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getStartDate=function(){var e=this.props,t=e.startDate,n=e.from,r=e.mode,o=Object(a.H)(r);return s()(t).add(n,o)},t.prototype.getEndDate=function(){var e=this.props,t=e.mode,n=e.startDate,r=e.to,o=Object(a.H)(t);return s()(n).add(r,o).endOf(o)},t.prototype.getMonths=function(){var e=[],t=this.getStartDate(),n=this.getEndDate(),r=t.clone(),o=Object(a.r)(this.props.mode);do{var i=r.clone().startOf(o);t.isAfter(i)&&(i=t.clone());var s=r.clone().endOf(o);n.isBefore(s)&&(s=n.clone()),e.push({startDate:i.toISOString(),endDate:s.toISOString(),currentDate:this.props.currentDay}),r.add(1,o)}while(n.isSameOrAfter(r,o));return e},t.prototype.renderMonths=function(){var e=this;return this.getMonths().map(function(t){return o.createElement(p,r.a({key:t.startDate.valueOf()},t,{mode:e.props.mode}))})},t.prototype.render=function(){return o.createElement("header",{className:d.root},this.renderMonths())},t}(o.PureComponent);n.d(t,"a",function(){return h})},"iPNg/Ezr":function(e,t,n){var r,o,i;i=n("k7+OBFO9"),r=null!=(o=i.raw)?o.fullscreenchange:void 0,e.exports={callbacks:{},callbefores:{},add:function(e,t){if(e&&t&&r)return this.callbacks[e]&&$(document).off(r,this.callbacks[e]),this.callbacks[e]=function(){if(!i.isFullscreen)return t()},$(document).on(r,this.callbacks[e])},remove:function(e,t){var n;if(e&&r&&this.callbacks[e])return"function"==typeof t&&t(),this.callbefores[e]=(n=this,function(){if(!i.isFullscreen)return $(document).off(r,n.callbacks[e]),delete n.callbacks[e],$(document).off(r,n.callbefores[e]),delete n.callbefores[e]}),$(document).on(r,this.callbefores[e])}}},iREo7zOO:function(e,t){e.exports=function(e){var t='<div class="modal-content col-flex"> <header class="modal-header"> <h4 class="modal-title">'+e.title+'</h4> </header> <section class="modal-body flex-horiz"> <div class=\'column-projects flex-static thin-scroll\'></div> <div class="picker-column thin-scroll flex-fill flex-vert"></div> </section> <footer class="modal-footer"> ';return e.showHint&&(t+=" <p>"+e.hint+"</p> "),t+=" <div class='modal-footer-handlers'> <button class=\"cancel-handler btn btn-link\">"+tb_i18n.get("cancel")+'</button> <button class="confirm-handler btn btn-primary" disabled="',e.selected,t+="false",t+='">'+tb_i18n.get("confirm")+"</button> </div> </footer></div>"}},iRK0phUl:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w={}.hasOwnProperty;b=n("a+N5u/Cl"),k=n("sa1Ed382"),p=n("YdqH4v7N"),g=n("vmWJWrVe"),f=n("vJfEDQKx"),l=n("nL4olqOP"),o=n("odY26VIi"),h=n("I8geGh50"),a=n("qKYkuTVR"),m=n("GPNoQLd7"),i=n("BUABmAqa"),u=n("Pyijz3km"),d=n("RBSYTovX"),c=n("72Xjo1GT"),r=n("2jCR0LhH"),v=n("XhpHwZVN").WorkIcon,_=n("gh8QIhMV").throwError,y=function(){return{task:tb_i18n.get("navigation.task"),post:tb_i18n.get("navigation.sharing"),work:tb_i18n.get("navigation.work"),event:tb_i18n.get("navigation.event"),entry:tb_i18n.get("bookkeeping")}},s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)w.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,g),t.prototype.viewName="ObjectPickerSearchView",t.prototype.className="object-picker-search-view flex-fill",t.prototype.events={"click .type-item":"filterType","click .type-toggler":"toggleTypeSelector","click .project-toggler":"toggleProjectSelector","click .member-toggler":"toggleMemberSelector","click .result-handler":"toggleResult"},t.prototype.initialize=function(e){return this.options=e||{},this.query=e.query||"",this.inSpecificProject=e.inSpecificProject,this.multi=e.multi,this.orgId=e._organizationId,this.attrs=this.getAttrs(),this.collection=h.get(0),this.uniqueTaskCollection=new h([]),this.projectsCollection=l.get(0),this.membersCollection=null,this.selected=[],this.nextPageToken=null,this.filteredProjectId=null,this.filteredMemberId=null,this.renderBasic().listen(),this.startSearch(),this},t.prototype.getAttrs=function(){var e;return e={q:this.options.query,type:this.options.type,spaceType:this.options.spaceType,pageSize:20,pageToken:this.nextPageToken},this.orgId&&(e._organizationId=this.orgId),this.inSpecificProject&&(e._projectId=this._projectId),e},t.prototype.renderBasic=function(){return this.$el.html(d({showFilter:!this.inSpecificProject})),this.$noresult=$(i()),this.$input=this.$(".search-input"),this.$list=this.$(".search-list"),this},t.prototype.listen=function(){var e;return this.listenTo(this.collection,"reset",(e=this,function(){return e.$list.empty()})),this},t.prototype.renderResult=function(e){var t,n;return t={tasks:[],posts:[],files:[],events:[]},(e&&null!=e.length?new h(e):this.collection).each((n=this,function(e){var r;if(r=e.toJSON(),!n.getVisibleUniqueIdTasks().get(r._id))switch(r.disabled=~n.options.exclude.indexOf(r._id),r.type){case"task":return t.tasks.push(r);case"post":return t.posts.push(r);case"work":return t.files.push(r);case"event":return t.events.push(r)}})),this.$list.append(u(t)),this.renderReactFileIcon(),this},t.prototype.renderReactFileIcon=function(){var e,t;if((e=this.$(".react-file-icon")).length)return e.each((t=this,function(e,n){return t.unmountReact(n),t.requestReactView(n,v,{fileType:$(n).data("type")})}))},t.prototype.renderUniqueIdTasks=function(){var e,t;return e=this.getVisibleUniqueIdTasks().map((t=this,function(e){var n;return(n=e.toJSON()).type="task",n.disabled=~t.options.exclude.indexOf(n._id),n})),this.$list.append(u({tasks:e})),this.renderTaskIdLabel()},t.prototype.renderTaskIdLabel=function(){return this.getVisibleUniqueIdTasks().each((e=this,function(t){var n,r,o,i;if(r=t.id,n=e.$list.find(".result-handler[data-id="+r+"]"),o=t.get("_projectId"))return i=e.projectsCollection.get(o),e.requestSubView(m,{projectModel:i,uniqueId:t.get("uniqueId")}).bind(n.find(".task-id-placeholder"))}));var e},t.prototype.getVisibleUniqueIdTasks=function(){var e,t;return e=this.uniqueTaskCollection.filter((t=this,function(e){var n,r,o,i,s,a,c,l;if((r=(e=e.toJSON())._projectId)&&(null!=(a=t.projectsCollection.get(r))?a.isAppEnabled("taskUniqueId"):void 0))return l=(c=t.attrs).type,n=c._creatorId,i=!(r=c._projectId)||e._projectId===r,s=!l||"task"===l,o=!n||n===e.executor._id,i&&s&&o})).map(function(e){return e.toJSON()}),new h(e,{parse:!1})},t.prototype.startSearch=function(){return this.nextPageToken=null,f.searchForUniqueTask(this.uniqueTaskCollection,{query:this.query}).then((e=this,function(){return e.fetchSearchResults()})).catch(function(e){return _(e)});var e},t.prototype.fetchSearchResults=function(){var e,t;return this.collection.reset(),this.query?(e=b.extend({},this.attrs,{pageToken:this.nextPageToken}),this.load({silent:!0,url:"v3/search",attrs:e,beforeSend:(t=this,function(){return t.showLoadingIndicator(t.$list)}),success:function(e){return function(t,n){var r;if(null==n&&(n={}),r=n.result,e.nextPageToken=n.nextPageToken,e.$el)return e.checkHasMore(n),e.hideLoadingIndicator(),e.$el.addClass("on-search"),e.renderUniqueIdTasks(),e.renderResult(r),e.checkPlaceholder(r),e.collection.hasMore&&e.setupScroll(e.$list),k.gta.event(null,"view","search result|start search",e.query.length)}}(this)}),this):this.checkPlaceholder()},t.prototype.load=function(e){return this.collection.resetSoft(),this.collection.fetch(e),this},t.prototype.loadMore=function(e){var t,n;return t=b.extend({},this.attrs,{pageToken:this.nextPageToken}),this.collection.loadMore({silent:!0,url:"v3/search",attrs:t,beforeSend:(n=this,function(){return n.showLoadingIndicator(n.$list)}),success:function(t){return function(n,r,o){var i;if(null==r&&(r={}),i=r.result,t.nextPageToken=r.nextPageToken,t.$el)return t.checkHasMore(r),t.hideLoadingIndicator({animated:!0}),i.length&&t.renderResult(i),t.collection.hasMore&&"function"==typeof e&&e(),k.gta.event(null,"view","search result|load more",t.pageIndex+1)}}(this)}),this},t.prototype.checkHasMore=function(e){var t,n;return null==e&&(e={}),t=!!(e.nextPageToken&&(null!=(n=e.result)?n.length:void 0)),this.collection.hasMore=t},t.prototype.checkPlaceholder=function(e){var t;return this.getVisibleUniqueIdTasks().length||(null!=e?e.length:void 0)?this.$noresult.remove():(t=this.query,this.query.length>0&&this.$noresult.find(".search-placeholder-content").text(tb_i18n.get("search.no.result",t)),this.$list.html(this.$noresult)),this},t.prototype.toggleResult=function(e){var t,n,r;if(!(t=$(e.currentTarget)).hasClass("disabled"))return t.toggleClass("selected"),r={_id:t.data("id"),type:t.data("type"),title:t.data("title")},this.multi?(n=b.findIndex(this.selected,r),t.hasClass("selected")&&n<0?this.selected.push(r):this.selected.splice(n,1)):t.hasClass("selected")?this.selected=[r]:this.selected=[],this.options.onSelect(this.selected),this},t.prototype.toggleTypeSelector=function(e){var t,n;return null!=(t=this.projectPopover)&&t.remove(),null!=(n=this.memberPopover)&&n.remove(),this},t.prototype.toggleProjectSelector=function(e){var t,n,r,o,i,s,u,p;if(!(t=$(e.currentTarget)).data("bs.popover"))return o=[{_id:0,all:!0,title:tb_i18n.get("all.project")}],u=(s=this.attrs).spaceType,n=s._organizationId,r="user"===u?"personal":n,i=this.projectsCollection.getCurrentWorkspaceProjects(r),l.fetch(0,{success:(p=this,function(e){return p.projectPopover=p.requestSubView(a,{container:p.$el,ListTemplate:c,hideDelay:0,$toggler:t,searchPlaceholder:tb_i18n.get("task.menu.search.project"),dataList:o.concat(i.filter(function(e){return e.getRoleScope()>=0}).map(function(e){return{_id:e.get("_id"),logo:e.get("logo"),title:e.get("name"),pinyin:e.get("pinyin")}})),selected:p.filteredProjectId||0,select:function(e){return p.filterProject(e)}}).show()})})},t.prototype.toggleMemberSelector=function(e){var t,n,i;if(!(t=$(e.currentTarget)).data("bs.popover"))return n=[{_id:0,all:!0,title:tb_i18n.get("all.member")}],o.fetch(this.orgId,{boundToObjectType:"organization",success:(i=this,function(e){return i.membersCollection=e,i.memberPopover=i.requestSubView(a,{container:i.$el,ListTemplate:r,hideDelay:0,$toggler:t,searchPlaceholder:tb_i18n.get("member.menu.search"),dataList:n.concat(i.membersCollection.map(function(e){return{_id:e.get("_id"),avatarUrl:e.get("avatarUrl"),title:e.get("name"),pinyin:e.get("pinyin")}})),selected:i.filteredMemberId||0,select:function(e){return i.filterMember(e)}}).show()})})},t.prototype.filterSearchResult=function(e){var t;return(t=this.getTql())&&(this.attrs=b.extend(this.attrs,{tql:t})),this.attrs=b.extend(this.attrs,e),this.$list.html(""),this.startSearch(),this},t.prototype.getTql=function(){var e;if(e=[],this.query&&e.push("(text ~ '"+this.query+"')"),this.filteredProjectId&&e.push("(projectId = "+this.filteredProjectId+")"),this.filteredMemberId&&e.push("(creatorId = "+this.filteredMemberId+")"),e.length)return e.join(" AND ")},t.prototype.filterType=function(e){var t,n,r;return r=y(),(t=$(e.currentTarget)).siblings("li").removeClass("active"),t.addClass("active"),n=t.data("type")||"",this.$(".active-type").text(n?r[n]:tb_i18n.get("search.result.all.type")),this.filterSearchResult({type:n}),this},t.prototype.filterProject=function(e){var t,n;if(e){if(n=e,!(t=this.projectsCollection.get(e)))return;this.$(".active-project").text(t.get("name"))}else this.$(".active-project").text(tb_i18n.get("all.project"));return this.filteredProjectId=n,this.filterSearchResult(),this},t.prototype.filterMember=function(e){var t,n,r;if(e){if(t=e,!(n=null!=(r=this.membersCollection)?r.get(e):void 0))return;this.$(".active-member").text(n.get("name"))}else this.$(".active-member").text(tb_i18n.get("all.member"));return this.filteredMemberId=t,this.filterSearchResult(),this},t}(),b.extend(s.prototype,p),e.exports=s},iToWI0vK:function(e,t,n){e.exports=n.p+"images/d_keai@2x.4ffa52b9.png"},iYgY8DEL:function(e,t){e.exports=function(e){return'<div class="notification-modal modal"> <div class="modal-dialog card"> <div class="card-header"> <a class="close-modal-btn icon icon-remove pull-right" data-dismiss="modal"></a> <p class="card-title">'+tb_i18n.get("desktop.notification")+'</p> </div> <div class="card-content"> <p class="description">'+tb_i18n.get("desktop.notification.desc")+'</p> <hr> <button class="request-permission-btn btn btn-primary btn-block">'+tb_i18n.get("desktop.notification.enable")+'</button> <button class="cancel-setup-btn btn btn-block">'+tb_i18n.get("desktop.notification.disable")+'</button> </div> </div></div><div class="notification-modal-backdrop modal-backdrop"></div>'}},ibviuac0:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR"),l=n("ANUNAeSO"),u=n.n(l),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=a()(this.props.className,u.a["add-button-icon"],{disabled:this.props.disabled}),t=this.props.name||"circle-plus";return i.a.createElement(c.Icon,r.a({},this.props,{name:t,className:e}))},t}(i.a.PureComponent),d=n("tLZJUYWX"),h=n.n(d),m=n("a+HTX0Vb"),f=n.n(m),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=a()(this.props.className,f.a["add-button-text"],{disabled:this.props.disabled});return i.a.createElement("div",r.a({},this.props,{className:e,"data-role":"add-button-text"}),this.props.children||h.a.get("to.be.added"))},t}(i.a.PureComponent);n.d(t,"a",function(){return p}),n.d(t,"b",function(){return g})},ic8UdoHl:function(e,t,n){},"if3Bv+C2":function(e,t,n){},ipyXjlCx:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";if(e.length){o+=" ";var i=e;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=' <li class="integration-item"> <a class="object-nav" data-type="'+(s=i[a+=1]).type+"\" data-gta=\"{action: 'to use plugin', type: "+s.type+'}"> <span class="icon icon-outer img-icon-'+s.type+' size-ssm"></span> <span class="object-copy">'+r(s.name)+"</span> </a> </li> "}return o}},iyGwx6rD:function(e,t,n){e.exports={"custom-select-multiple":"custom-select-multiple__3ZFP","field-search":"field-search__3cxW",placeholder:"placeholder__3WLY","placeholder-img":"placeholder-img__1qAA","placeholder-tip":"placeholder-tip__2uTo"}},"j+mhrgl0":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m={}.hasOwnProperty,f=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};d=n("a+N5u/Cl"),p=n("vmWJWrVe"),c=n("77NnVLwu"),i=n("RDiZwTh5"),r=n("TUmryrSA"),s=n("7lRKyXCu"),a=n("RqASgP7q"),l=n("UWIAOOh5"),h=n("gh8QIhMV").throwError,u=["note","priority","tag","link","belinked"],o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)m.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.viewName="DetailInfosView",t.prototype.className="detail-infos-view detail-infos-wrapper",t.prototype.initialize=function(e){var t;if(null!=e?e.objectModel:void 0)return this.options=e,this.objectModel=e.objectModel,this.disabledItems=e.disabledItems||[],this.boundToObjectType=e.boundToObjectType,this.infos=e.infos||["link","belinked","tag"],this.load().then((t=this,function(){if(t.el)return t.initViews(),t.renderInfos(),t.listen()})).catch(h),this},t.prototype.load=function(){var e,t;return(e=this.objectModel.get("_projectId"))?new Promise((t=this,function(n,r){return c.fetch(e,{success:function(e){return t.projectModel=e,n()},error:r})})):Promise.resolve()},t.prototype.listen=function(){return this.listenTo(this.objectModel,"change",function(){if(this.$el)return this.renderInfos()})},t.prototype.initViews=function(){var e,t,n,o,c;return this.views=[],f.call(this.infos,"note")>=0&&(n=this.requestSubView(s,{objectModel:this.objectModel,boundToObjectType:this.options.boundToObjectType,noteAttribute:this.options.noteAttribute,disabled:this.isViewDisabled("note")}),this.views.push({name:"note",view:n})),f.call(this.infos,"priority")>=0&&(o=this.requestSubView(a,{taskModel:this.objectModel}),this.views.push({name:"priority",view:o})),f.call(this.infos,"tag")>=0&&(c=this.requestSubView(l,{objectModel:this.objectModel,_projectId:this.objectModel.get("_projectId"),disabled:this.isViewDisabled("tag"),withIcon:this.options.withIcon}),this.listenTo(c,"over",this.renderInfos),this.views.push({name:"tag",view:c})),f.call(this.infos,"link")>=0&&this.objectModel.getRoleScope()>=-1&&(t=this.requestSubView(i,{objectModel:this.objectModel,_projectId:this.objectModel.get("_projectId"),boundToObjectType:this.options.boundToObjectType,getInheritedInfo:this.options.getInheritedInfo}),this.linkAddWrap=t.$el.find(".link-add-wrap"),this.listenTo(t,"over",this.renderInfos),this.views.push({name:"link",view:t})),f.call(this.infos,"belinked")>=0&&this.objectModel.getRoleScope()>=-1&&(e=this.requestSubView(r,{objectModel:this.objectModel,_projectId:this.objectModel.get("_projectId"),boundToObjectType:this.options.boundToObjectType}),this.views.push({name:"belinked",view:e})),this.views=this.sortInfosView(this.views),this},t.prototype.sortInfosView=function(e){return d.sortBy(e,function(e){var t,n;return n=e.name,-1===(t=u.indexOf(n))?u.length:t})},t.prototype.isViewDisabled=function(e){return this.disabledItems.indexOf(e)>=0},t.prototype.renderInfos=function(){var e,t,n,r,o,i,s;for(e=function(){switch(this.objectModel.get("isArchived")){case!0:return"addClass";default:return"removeClass"}}.call(this),this.$el[e]("archived"),r=n=0,o=(i=this.views).length;n<o;r=++n)(s=i[r].view).isCase()||s.hasPermission()?-1!==(t=this.$el.children().index(s.$el))&&t===r||this.$el.append(s.$el):s.$el.detach();return this},t}(),t.Constructor=o},"j/+BlrNb":function(e,t,n){e.exports={modal:"modal__1xfz",illustration:"illustration__2irv","info-text":"info-text__1Tg5","invite-form":"invite-form__2iR6","qrcode-handler":"qrcode-handler__1zbG","qrcode-handler-text":"qrcode-handler-text__hXUa","invite-item":"invite-item__rwtn","modal-action":"modal-action__30Pr"}},j0w21su5:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("Hb+rakDI"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleAddProjectMemberClick=function(e,n){e.stopPropagation();var r=t.props.onAddProjectMemberClick;n&&r&&r(n)},t.handleEnterProjectClick=function(e,n){e.stopPropagation();var r=t.props,o=r.onEnterProjectClick,i=r.isOpenProjectInNewTab;n&&o&&o(n,i)},t.handleCreateProjectClick=function(e){e.stopPropagation();var n=t.props,r=n.onCreateProjectClick,o=n.selectedProjectTagId,i=n.selectedProjectTagName;r&&r(o,i)},t.handleUnSuspendProjectClick=function(e,n){e.stopPropagation();var r=t.props.onUnSuspendProjectClick;r&&r(n)},t.handleSuspendProjectClick=function(e,n){e.stopPropagation();var r=t.props.onSuspendProjectClick;r&&r(n)},t.handleUnArchiveProjectClick=function(e,n){e.stopPropagation();var r=t.props.onUnArchiveProjectClick;r&&r(n)},t.handleArchiveProjectClick=function(e,n){e.stopPropagation();var r=t.props.onArchiveProjectClick;r&&r(n)},t.handleDestoryProjectClick=function(e,n){e.stopPropagation();var r=t.props.onDestoryProjectClick;r&&r(n)},t.handleOpenProjectSettingClick=function(e,n){e.stopPropagation();var r=t.props.onOpenProjectSettingClick;n&&r&&r(n)},t.handleStarProjectClick=function(e,n){e.stopPropagation();var r=t.props.onStarProjectClick;n&&r&&r(n)},t.handleUnstarProjectClick=function(e,n){e.stopPropagation();var r=t.props.onUnstarProjectClick;n&&r&&r(n)},t}return r.d(t,e),t.prototype.renderProjectGroup=function(e,t,n,o){var s=this.props.projectPortalMode;if(!s)return null;var a=Object(i.getProjectGroupProps)(s,r.a({},e),r.a({itemClassName:this.itemClassNames.grid},t),r.a({itemClassName:this.itemClassNames.list},n),r.a({},o)),c=Object(i.getProjectGroupComponent)(s);return a&&c?c(a):null},t}(o.Component)},"j7oW5/Et":function(e,t){e.exports=function(e){return'<span class="icon icon-info"></span><div class="'+e.type+'-tip"> <span class="tip">'+e.tip+"</span></div>"}},"jDpg3yt+":function(e,t,n){e.exports=n.p+"images/add-chat-no-group@2x.0afd83fd.png"},jExk1OWA:function(e,t,n){e.exports={"task-sprint":"task-sprint__1D6u","task-sprint__inner":"task-sprint__inner__22XW"}},jGbVZCJ5:function(e,t,n){},jHmlyl5r:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;i=n("a+N5u/Cl"),a=n("sa1Ed382"),s=n("c2hT3iqT").hash,o=n("Atd/KrMo"),r=n("m0ECVB5f"),n("dqsr8tl4"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="PageSpecificHelpVideo",t.prototype.className="obd-page-specific-help-video",t.prototype.events={"click .video-item":"onVideoClick"},t.prototype.initialize=function(e){return this.options=e,t.__super__.initialize.apply(this,arguments),this.renderBasic(),this},t.prototype.normalizeOptions=function(){var e;return this.viewOptions=i.chain(this.options.runtime_variable_map).map((e=this,function(t,n){var r;return e.options.runtime.memread(n)?(r=e.options.page_specific_video[t],i.each(r.videos,function(t){var n;return n="help-menu-video-"+s(t.url)+"-visited",t.visited=e.options.runtime.mntread(n,!1)}),r):null})).filter(Boolean).first().value(),this},t.prototype.hasVideo=function(){return!!~a.user.getLanguage().indexOf("zh")&&!!this.viewOptions},t.prototype.renderBasic=function(){return this.hasVideo()&&this.$el.html(r(this.viewOptions)),this},t.prototype.onVideoClick=function(e){var t,n,r,o;return t=$(e.target).closest(".video-item").data("gta-category"),a.gta.event({action:"watch video",category:t,control:"Navigation Tab"}),o=$(e.target).closest(".video-item").data("url"),null!=(r=i.findWhere(this.viewOptions.videos,{url:o}))&&(r.visited=!0),this.sendAction({name:"view://video_layer",payload:{url:o}}),(n={})["help-menu-video-"+s(o)+"-visited"]=!0,this.sendAction({name:"action://save-progress",payload:n}),this.sendAction("view-action://close-view"),this},t}()},jN5oBbom:function(e,t,n){e.exports=n.p+"images/notification-dot.701b3155.svg"},jPxgbxp7:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty;a=n("sa1Ed382"),s=n("2qRnoGmE"),i=n("vmWJWrVe"),o=n("8eqYv3w5").PersonalizationSettings,r={zh:"simplified chinese",en:"english",zh_tw:"traditional chinese"},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="PersonalSettingsPersonalizationView",t.prototype.className="personal-settings-personalization-view personal-settings-container",t.prototype.initialize=function(){return this.render(),this.listenTo(a.user,"change:language",this.render)},t.prototype.render=function(){return this.requestReactView(this.el,o,{initialLanguage:a.user.getLanguage(),languages:this.getLanguages(),onClickLanguage:this.onClickLanguage,initialDateFormat:a.PREFERENCE.getDateFormat(),onClickDateFormat:this.onClickDateFormat,initialMarkdown:"markdown"===a.PREFERENCE.getActivityMode(),onChangeMarkdown:this.onChangeMarkdown})},t.prototype.onClickLanguage=function(e){return a.gta.event({action:"switch language",method:"click",type:r[e]}),a.PREFERENCE.setLanguage(e)},t.prototype.onClickDateFormat=function(e){return a.PREFERENCE.setDateFormat(e)},t.prototype.onChangeMarkdown=function(e){var t;return t=e?"markdown":"text",a.PREFERENCE.setActivityMode(t)},t.prototype.getLanguages=function(){var e;return e={zh:"简体中文",en:"English",zh_tw:"繁體中文"},s.LANGUAGES.map(function(t){return{id:t,display:e[t]}})},t}()},jSJa2pQN:function(e,t,n){},"jW/QFCCH":function(e,t,n){e.exports=n.p+"images/d_chanzui@2x.a6ad9090.png"},ja6xOrJJ:function(e,t,n){"use strict";var r=n("yU55AR5B"),o=n("2qRnoGmE"),i=n.n(o),s=n("obMV6uGD"),a=n("sa1Ed382"),c=n("WVgvAmgj");n.d(t,"a",function(){return d}),n.d(t,"b",function(){return f});var l=n("bZr3G77e"),u=n("wu4EEviu"),p=n("sa1Ed382"),d=null,h={get:function(e,t){return l.get(e,{data:t})},put:l.put.bind(l),post:l.post.bind(l),delete:l.del.bind(l)},m={joinedRoom:new Map,join:function(e){if(!this.joinedRoom.has(e)){var t=u.getConsumerId$().subscribe(function(t){l.post(i.a.NOTIFICATION_CENTER_HOST+"/api/subscribe",{consumerId:t,type:e})});this.joinedRoom.set(e,t)}},leave:function(e){var t=this.joinedRoom.get(e);t&&(t.unsubscribe(),u.getConsumerId$().take(1).subscribe(function(t){l.post(i.a.NOTIFICATION_CENTER_HOST+"/api/unsubscribe",{consumerId:t,type:e})}))},on:function(e,t){u.on(e,t)},off:function(e,t){u.off(e,t)}},f=function(){p.axon=d=r.Axon.getInstance({appId:i.a.NOTIFICATION_APP_ID,userId:p.user.id,host:i.a.NOTIFICATION_CENTER_HOST,lang:g(p.PREFERENCE.getLanguage()),infra:{http:{mode:"external",adapter:h},socket:{mode:"external",adapter:m}},ipc:{name:"teambition"},widget:{selectable:!0,theme:r.OfficialApp.teambition,enableGTA:!!p.PREFERENCE.get("collectBehaviorLogs")}}),d.notification.registerActionHandler(/axon:\/\/action\/open-settings/,function(){a.APP.requestSubView(c,{tabName:"notification"}),a.gta.event({action:"enter my settings",control:"feed"})}),d.notification.registerFallbackHandler(function(e){return setTimeout(function(){return window.open(e)},0),!0}),Promise.resolve().then(function(e){var t=n("6vg9MnbG"),r=/teambition:\/\/room\/(?:user|group|project)\?(?:user|group|project)Id=(.*?)$/;d.browser.registerActionHandler(r,function(e){var n=r.exec(e);n&&n[1]&&t.open({hasRequested:!1,activeCreatorId:n[1]})});var o=/teambition:\/\/(task|event|entry|post|work|testcase)\/(.*?)$/;d.browser.registerActionHandler(o,function(e,n){var r=o.exec(e);r&&(t.close(),d.notification.markAsRead(n.id),a.APP.openObjectPreviewer(r[2],r[1],{where:"notification"}))}),d.browser.registerActionHandler(/teambition:\/\/project\/(.*?)\/projectinfoapp/,function(e,t){return d.notification.markAsRead(t.id),setTimeout(function(){return window.open(e)},0),!0}),d.browser.registerFallbackHandler(function(e,t){return d.notification.markAsRead(t.id),setTimeout(function(){return window.open(e)},0),!0})}.bind(null,n)).catch(n.oe),Object(s.initPermissionModalObserver)(),v(),$.cookie("axon-debug")&&d.debugMode()},g=function(e){return~e.indexOf("zh")?~e.indexOf("tw")?r.AxonLang.zh_TW:r.AxonLang.zh_CN:r.AxonLang.en},v=function(){p.PREFERENCE.getLanguage$().subscribe(function(e){d.setLanguage(g(e))})}},jenUMZo6:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h={}.hasOwnProperty;u=n("2qRnoGmE"),r=n("+2RfZ2TT"),s=n("wd/RKGTj"),c=n("HYobN8SQ"),i=n("bZr3G77e"),l=n("vmWJWrVe"),o=n("JLnmqBbR").DISDialog,p=function(e,t){return null==e&&(e="all"),null==t&&(t="me"),t+"_"+e},a={dismiss:(d=function(e){return c.namespace("dis").namespace(e)})("dismiss"),today:d("today")},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)h.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,l),t.prototype.viewName="DISDialogView",t.prototype.initialize=function(e){var t,n,o;if(this.isEnable=e.isEnable,this.myUserId=e.myUserId,this.organizationId=e.organizationId,!this.isEnable)return this;if((t=r("body"),this.mountNode=r("<span data-mountnode=dis-dialog></span>"),t.append(this.mountNode),n=p(this.organizationId,this.myUserId),!a.dismiss(n))&&(!s(a.today(n)).isValid()||!s(a.today(n)).isSame(s(),"day")))return this.request().then((o=this,function(e){return o.el&&(null!=e?e.show:void 0)?(a.today(n,(new Date).toISOString()),o.render()):Promise.resolve()})),this},t.prototype.render=function(){var e;if(this.mountNode)return e=u.HOST+"/dis/html",this.organizationId&&(e=e+"?_organizationId="+this.organizationId),this.requestReactView(this.mountNode.get(0),o,{iframeSrc:e,organizationId:this.organizationId,userId:this.myUserId,onHide:function(e,t,n){var r;if(r=p(e,t),!a.dismiss(r))return a.dismiss(r,n)}}),this.isMounted=!0},t.prototype.remove=function(){return this.mountNode&&this.mountNode.remove(),t.__super__.remove.apply(this,arguments)},t.prototype.request=function(){return new Promise((e=this,function(t,n){var r;return r=u.HOST+"/dis",e.organizationId&&(r=r+"?_organizationId="+e.organizationId),i.ajax({error:n,method:"GET",silentError:!0,success:t,url:r})}));var e},t}()},jgtiIYUZ:function(e,t,n){"use strict";var r=n("q1tIBJhx"),o=n.n(r),i=n("tLZJUYWX"),s=n.n(i),a=n("GESwhXbR"),c=n("XHxZqXzL"),l=function(e){return e.delPermission?o.a.createElement(c.a,{className:e.className,onClick:e.onClick},o.a.createElement(a.Icon,{name:"trash"}),o.a.createElement("span",null,s.a.get("archive.list.menu.remove.completely"))):null};n.d(t,"a",function(){return l})},jjkLIigZ:function(e,t){e.exports=function(e){var t='<div class="visibility-selector"> <ul class="visibility-menu"> <li class="visibility-project" data-id="project"> <a> <span class="icon icon-lock"></span> <span class="menu-item-title">'+tb_i18n.get("project.setting.visibility.project")+'</span> <p class="menu-item-info">'+tb_i18n.get("project.setting.visibility.info.project")+"</p> </a> </li> ";return e.isOrganization&&(t+=' <li class="visibility-organization" data-id="organization"> <a> <span class="icon icon-building"></span> <span class="menu-item-title">'+tb_i18n.get("project.setting.visibility.organization")+'</span> <p class="menu-item-info">'+tb_i18n.get("project.setting.visibility.info.organization")+"</p> </a> </li> "),t+=" </ul></div>"}},jo7bxacm:function(e,t,n){e.exports=n.p+"images/d_youhengheng@2x.54e9b9c9.png"},"jq+Ck5p3":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=(n("N5TVuzEe"),n("TSYQbtd+")),i=n.n(o),s=n("q1tIBJhx"),a=n.n(s),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cxPrefix="invite-members-modal__button-handler",t.handleClick=function(e){t.props.id?t.props.onClick(e,t.props.id):t.props.onClick(e)},t}return r.d(t,e),t.prototype.renderDisabled=function(){return this.props.disabled?s.createElement("span",{className:this.cxPrefix+"__disabled"},this.props.text):null},t.prototype.renderHandler=function(){return this.props.disabled?null:s.createElement("a",{className:this.cxPrefix+"__handler",onClick:this.handleClick},this.props.text)},t.prototype.render=function(){var e=this;return s.createElement("div",{className:i()(e.cxPrefix,e.props.className)},s.createElement("span",{className:this.cxPrefix+"__content"},this.props.children),this.renderDisabled(),this.renderHandler())},t}(s.PureComponent),l=(n("5wg/PQvs"),n("GESwhXbR")),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cxPrefix="invite-members-modal__chevron-right-handler",t.handleClick=function(e){t.props.id?t.props.onClick(e,t.props.id):t.props.onClick(e)},t}return r.d(t,e),t.prototype.render=function(){var e=this;return s.createElement("a",{className:i()(e.cxPrefix,e.props.className),onClick:this.handleClick},s.createElement("span",{className:this.cxPrefix+"__content"},this.props.children),s.createElement(l.Icon,{className:this.cxPrefix+"__icon",name:"chevron-right",size:12}))},t}(s.PureComponent),p=(n("UEjVuis2"),function(e){var t,n,r="invite-members-modal__group-bar";return s.createElement("div",{className:i()(r,e.className)},s.createElement("span",{className:r+"__icon icon icon-member-group"}),"string"!=typeof(n=e.name)||0===n.length?null:s.createElement("span",{className:r+"__name hinted","data-title":n},n),"number"!=typeof(t=e.count)&&"string"!=typeof t?null:(t=parseInt(""+t,10),isNaN(t)?null:s.createElement("span",{className:r+"__count"},"・"+t)))}),d=(n("kibL+kLb"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clsPrefix="invite-members-modal__list",t.renderHeader=function(){var e=t.props.title;return"string"!=typeof e||0===e.length?null:s.createElement("div",{className:t.clsPrefix+"__header"},s.createElement("span",{className:t.clsPrefix+"__header__title"},t.props.title),s.createElement("hr",{className:t.clsPrefix+"__header__divider"}))},t}return r.d(t,e),t.prototype.render=function(){var e=i()(this.clsPrefix,this.props.className);return s.createElement("div",{className:e},this.renderHeader(),s.createElement("div",{className:this.clsPrefix+"__body"},s.createElement("ul",{className:this.props.containerCls},this.props.children)))},t}(s.Component)),h=(n("AaggvXFt"),n("a+N5u/Cl")),m=n("tLZJUYWX"),f=n("6EY9/lIj"),g=function(e){var t,n,r="invite-members-modal__member-bar";return n=e.belongingTo&&s.createElement("div",{className:r+"__content__bottom"},function(){var t=e.belongingTo;return"string"!=typeof t||0===t.length?null:s.createElement(l.Tooltip,{title:t},s.createElement("div",{className:r+"__belonging-to"},s.createElement("span",null,m.get("belonging.to")),s.createElement(f.a,{title:t})))}()),s.createElement("div",{className:i()(r,e.className)},s.createElement("div",{className:r+"__left"},s.createElement("span",{className:r+"__avatar",style:(t=e.avatarUrl,h.isEmpty(t)?{}:{backgroundImage:"url("+t+")"})})),s.createElement("div",{className:r+"__content"},s.createElement("div",{className:r+"__content__top"},function(){var t=e.name,n=e.role;if(h.isEmpty(t))return null;var o=-1===n?s.createElement(l.Icon,{name:"external-member",className:r+"__external-icon"}):null;return s.createElement(s.Fragment,null,s.createElement("span",{className:i()(r+"__name","hinted"),"data-title":t},t),o)}()),n))},v=(n("78+aw0mX"),n("B1kKgoX2")),b=n("nUH1srrj"),y=function(e){var t,n,r="invite-members-modal__placeholder";return s.createElement("div",{className:i()(r,e.className)},s.createElement("img",{className:r+"__image",src:function(){switch(e.type){case"group":case"member":case"team":return v;case"search":return b;default:return null}}()}),"string"!=typeof(n=function(){switch(e.type){case"group":return m.get("has.none.groups");case"member":return m.get("has.none.members");case"team":return m.get("has.none.teams");case"search":return m.get("has.none.search.results");default:return null}}())?null:s.createElement("div",{className:r+"__title"},n),"object"!=typeof(t=e.description)&&"string"!=typeof t?null:s.createElement("div",{className:r+"__description"},t||function(){switch(e.type){case"group":case"team":return m.get("please.go.to.member.page.to.create.one");default:return null}}()))},k=(n("FyfRbPm8"),n("2qRnoGmE")),_=n.n(k),w=n("0aWc+x3/"),C=function(e){var t,n,r,o,a="invite-members-modal__team-bar";return s.createElement("div",{className:i()(a)},s.createElement("div",{className:a+"__left"},(r=e.iconColor,o=e.iconName,"string"==typeof r&&0!==r.length||(r=w.DEFAULT_TEAM_ICON_COLOR),o="string"!=typeof o||0===o.length?w.DEFAULT_TEAM_ICON_NAME:o.replace(/^icon\-/,""),e.showAsSubteam?s.createElement("span",{className:a+"__icon "+a+"__icon__round",style:{backgroundColor:r}}):s.createElement(l.Icon,{name:o,className:a+"__icon",style:{color:r}}))),s.createElement("div",{className:a+"__content"},s.createElement("div",{className:a+"__content__top"},"string"!=typeof(n=e.name)||0===n.length?null:s.createElement(l.Tooltip,{title:n},s.createElement("span",{className:a+"__name"},n)),function(){if(!_.a.FEATURES.showMemberCount)return null;var t=e.count;return"number"!=typeof t&&"string"!=typeof t?null:(t=parseInt(""+t,10),isNaN(t)?null:s.createElement("span",{className:a+"__count"},"・"+t))}()),s.createElement("div",{className:a+"__content__bottom"},"string"!=typeof(t=e.belongingTo)||0===t.length||e.showAsSubteam?null:s.createElement(l.Tooltip,{title:t},s.createElement("div",{className:a+"__belonging-to"},s.createElement("span",null,m.get("belonging.to")),s.createElement(f.a,{title:t,sliceIndex:t.lastIndexOf(" > ")}))))))},S=(n("xip8tQxt"),function(e){var t,n,r="invite-members-modal__leader-bar";return a.a.createElement("div",{className:r},a.a.createElement("div",{className:r+"__left"},(t=e.iconColor,n=e.iconName,"string"==typeof t&&0!==t.length||(t="#8193BA"),n="string"!=typeof n||0===n.length?"icon-team-tie":n.replace(/^icon\-/,""),a.a.createElement(l.Icon,{name:n,className:r+"__icon",style:{color:t}}))),a.a.createElement("div",{className:r+"__content"},a.a.createElement("div",{className:r+"__content__top"},a.a.createElement("span",{className:r+"__team-name"},m.get("team.leader.who",e.teamName))),a.a.createElement("div",{className:r+"__content__bottom"},a.a.createElement("div",{className:r+"__leader-name"},e.leaderName))))}),E=(n("xijJaQkU"),function(e){var t="invite-members-modal__organization-role-bar";return a.a.createElement("div",{className:t},a.a.createElement("div",{className:t+"__left"},a.a.createElement(l.Icon,{name:"medal",style:{color:l.colors.$A50},className:t+"__icon"})),a.a.createElement("div",{className:t+"__content"},e.name))});n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return p}),n.d(t,"e",function(){return d}),n.d(t,"f",function(){return g}),n.d(t,"h",function(){return y}),n.d(t,"i",function(){return C}),n.d(t,"d",function(){return S}),n.d(t,"g",function(){return E})},jxTVpsFZ:function(e,t,n){e.exports=n.p+"images/no-app.e6f7c4a9.png"},jz2LwHQ8:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("s0r7VfKc"),a=n("a+N5u/Cl"),c=n("dikDkxSK"),l=n("M70E0b3m"),u=function(){return{_id:"unset",name:i.get("testgroup.selector.testhub.name")}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.fetchTesthubs=function(e){n.testhubSub&&n.testhubSub.unsubscribe(),n.testhubSub=s.default.getTesthubs(n.props.organizationId,{q:e}).next().update$.subscribe(function(t){var o=r.h(t.result);e&&0!==e.length||(n.props.showUnsetOption&&(o=r.h([u()],o)),o=n.props.testhub?a.uniq([n.props.testhub].concat(o),"_id"):o),n.setState({testhubs:o})})},n.onTesthubSelect=function(e){n.props.onSetTesthub(e._id===u()._id?null:e)},n.filterList=function(e,t){var r=t.trim();return r!==n.q&&n.fetchTesthubs(r),n.q=r,n.state.testhubs||[]},n.state={showUnsetOption:!1,testhubs:null},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.fetchTesthubs()},t.prototype.componentWillUnmount=function(){this.testhubSub&&this.testhubSub.unsubscribe()},t.prototype.render=function(){return o.createElement(c.a,{className:l["testhub-selector"],inline:this.props.inline,list:this.state.testhubs||[],filterList:this.filterList,isLoading:!this.state.testhubs,autoFocus:!0,selected:this.props.testhub?this.props.testhub._id:"unset",inputPlaceholder:i.get("testgroup.selector.testhub.select.input.placeholder"),onSelect:this.onTesthubSelect})},t}(o.PureComponent)},k3kB6Jq4:function(e,t){e.exports=function(e){return'<form class="archive-form"> <p>'+tb_i18n.get("task.menu.confirm.archive")+'</p> <button class="btn btn-danger" type="submit">'+tb_i18n.get("archive")+"</button></form>"}},k5DyfbO1:function(e,t){e.exports=function(e){var t,n;return'<iframe className="office-online-iframe" src="'+("undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}))(e.src)+'"  frameBorder="none"></iframe>'}},k6ijkwm8:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("DOZCBSCZ"),a=n("GESwhXbR"),c=n("TSYQbtd+"),l=n.n(c),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSelect=function(){t.props.onSelectEvent(t.props.event._id)},t}return r.d(t,e),t.prototype.renderDateString=function(){var e=this.props.event,t=e.startDateString,n=e.endDateString,r=n?t+" - "+n:t;return o.createElement(a.Tooltip,{title:r},o.createElement("div",{className:"event-item-time muted"},r))},t.prototype.renderContent=function(){var e=this.props.event.title;return o.createElement("div",{className:"event-item-content-wrapper"},o.createElement(a.Icon,{name:"calendar"}),o.createElement(a.Tooltip,{title:e},o.createElement("p",{className:"event-item-title"},e)))},t.prototype.render=function(){var e=this.props.selected,t=l()("event-item",{selected:e});return o.createElement("li",{className:t,onClick:this.onSelect},this.renderContent(),this.renderDateString())},t}(o.PureComponent);n("if3Bv+C2");var p=n("wd/RKGTj"),d=n.n(p),h=function(e){function t(t){var n=e.call(this,t)||this;return n.isSelected=function(e,t){return(n.props.selected[t]||[]).indexOf(e)>=0},n.getTotaCount=function(){return n.props.pastEvents.map(function(e){return e.count}).reduce(function(e,t){return e+t},0)},n.onTogglePastFold=function(){n.setState({pastFolded:!n.state.pastFolded})},n.state={pastFolded:!0},n}return r.d(t,e),t.prototype.renderPastEvents=function(){var e=this.state.pastFolded?i.get("object.picker.event.past.event.unfold"):i.get("object.picker.event.past.event.fold");return o.createElement("section",{className:"object-picker-past-events"},o.createElement("header",null,o.createElement("p",null,i.get("object.picker.event.past.event",this.props.pastEvents.length)),o.createElement(a.TextButton,{color:"blue",onClick:this.onTogglePastFold},e)),o.createElement("ul",null,this.renderPastMonthList()))},t.prototype.renderPastEventList=function(e){var t=this;if(this.props.activePastMonth===e){var n=function(n){t.props.onToggleEvent(n,e)};return this.props.pastEvents.filter(function(t){return t.month===e})[0].events.sort(function(e,t){return+d()(t.startDate)-+d()(e.startDate)}).map(function(r){return o.createElement(u,{key:r._id,event:r,onSelectEvent:n,selected:t.isSelected(r._id,e)})})}},t.prototype.renderPastMonthList=function(){var e=this;return!this.state.pastFolded&&this.props.pastEvents.map(function(t){var n=t.month,r=e.props.activePastMonth===n?"triangle-down":"triangle-right";return o.createElement("li",{key:t.month,className:"object-picker-past-events-accordin"},o.createElement("p",{onClick:function(){return e.props.onToggleMonth(n)},className:"object-picker-past-events-toggler "+r},t.monthString),o.createElement("ul",null,e.renderPastEventList(n)))})},t.prototype.render=function(){var e=this.state.pastFolded?i.get("object.picker.event.past.event.unfold"):i.get("object.picker.event.past.event.fold");return o.createElement("section",{className:"object-picker-past-events"},o.createElement("header",{className:"object-picker-past-events-header"},o.createElement("p",{className:"object-picker-past-events-title"},i.get("object.picker.event.past.event",this.getTotaCount())),o.createElement(a.TextButton,{color:"blue",onClick:this.onTogglePastFold},e)),o.createElement("ul",null,this.renderPastMonthList()))},t}(o.PureComponent);n("Bq/6r0kd");var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isSelected=function(e){return t.props.selected.future.indexOf(e)>=0},t.onToggleFutureEvent=function(e){t.props.onToggleEvent(e,"future")},t}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.activePastMonth!==this.props.activePastMonth&&this.props.clearSelectByMonth(this.props.activePastMonth)},t.prototype.renderFutureEventList=function(){var e=this;return this.props.futureEvents.map(function(t){return o.createElement(u,{key:t._id,event:t,selected:e.isSelected(t._id),onSelectEvent:e.onToggleFutureEvent})})},t.prototype.renderFutureEvents=function(){return this.props.futureEvents.length>0&&o.createElement("section",{className:"object-picker-future-events"},o.createElement("p",{className:"object-picker-future-events-title"},i.get("object.picker.event.future.event",this.props.futureEvents.length)),this.renderFutureEventList())},t.prototype.renderPastEvents=function(){return this.props.pastEvents.length>0&&o.createElement(h,{selected:this.props.selected,pastEvents:this.props.pastEvents,activePastMonth:this.props.activePastMonth,onToggleEvent:this.props.onToggleEvent,onToggleMonth:this.props.onToggleMonth})},t.prototype.renderCreator=function(){return this.props.showCreator&&o.createElement(a.TextButton,{className:"object-picker-event-creator",color:"blue",onClick:this.props.onClickCreate},o.createElement(a.Icon,{name:"circle-cross"}),i.get("object.picker.event.creator.tips"))},t.prototype.renderLoading=function(){return o.createElement(s.a,null)},t.prototype.renderBody=function(){return this.props.loading?this.renderLoading():o.createElement("div",{className:"object-picker-event-list-body"},this.renderFutureEvents(),this.renderPastEvents())},t.prototype.render=function(){return o.createElement("div",{className:"object-picker-event-list"},this.renderCreator(),this.renderBody())},t}(o.PureComponent);n.d(t,"EventList",function(){return m}),n("i5/Rw1pB")},k9cQFvct:function(e,t,n){e.exports={"organization-payment-banner":"organization-payment-banner__3kDu"}},"kAl3+ULZ":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("q1tIBJhx"),o=n.n(r),i=n("TSYQbtd+"),s=n.n(i),a=n("fZoV3jYy"),c=n("mqeb6GpD"),l=n("L7QuDhxB"),u=n.n(l),p=n("85182E8g");function d(e){var t=e._organizationId,n=e.selected,r=e.excludes,i=e.noFilter,l=e.hideIndieEntry,d=e.objectType,h=e.onConfirm,m=e.permission,f=e.canToggle,g=o.a.useCallback(function(e){return Object(c.b)(e,t,d,m,r,f,i)},[t,d,m,r,i]),v=o.a.useCallback(function(){var e=t&&p.find(0).get(t)?"organization":"user",n=!(!t||p.find(0).get(t))||l;return Object(c.a)(n,t,d,m,r,f,e,i)},[t,l,d,m,r,i]),b=o.a.useCallback(function(e){h&&h(e.added)},[h]),y={text:e.placeholderText};return o.a.createElement(a.d,{classNames:s()(u.a["project-selector"],e.classNames),mode:a.c.Multi,checkStyle:"checkbox",selected:n||[],recommendTitle:null,hideSelected:!1,alwaysShowSearch:!0,loadRecommend:v,loadSearch:g,commit:b,customHeight:e.customHeight,withMultiInfo:!0,searchNotFoundPlaceholder:y})}},"kEx7B/ON":function(e,t,n){e.exports={label:"label__DcTk","dropdown-content":"dropdown-content__1ALm","dropdown-button":"dropdown-button__LWBt"}},kHGemI2d:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("a+N5u/Cl"),r=n("VuB9cZyl"),o=n("2o3Aa8VP"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="tagcategories",t.prototype.model=o,t.prototype.initialize=function(){return this.uniqueCategoryId=i.uniqueId("uncategorized"),t.__super__.initialize.apply(this,arguments)},t.prototype.parse=function(e){return Array.isArray(e)&&(e=e.concat({_id:this.uniqueCategoryId,name:tb_i18n.get("organization.tag.category.uncategorized"),isDefault:!0})),e},t.prototype.fetch=function(e){return null==e&&(e={}),e=Object.assign({},e,{url:"organizations/"+this._boundToObjectId+"/"+this.name}),t.__super__.fetch.call(this,e)},t.prototype.getDefault=function(){return this.find((e=this,function(t){return t.id===e.uniqueCategoryId}));var e},t}()},kMmlF21x:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<li class="task-group-by" data-id="'+e._id+'"> ';return e.avatarUrl&&(o+=' <div class="avatar img-circle img-36 pull-left" style="background-image:url('+e.avatarUrl+');"></div> '),o+=' <span class="task-group-name">'+r(e.name)+"</span> ",e.groupHandler&&(o+=' <a class="group-handler link-add-handler">'+e.groupHandler+"</a> "),o+='</li><li class="member-no-task"> <span class="muted">'+tb_i18n.get("task.list.no.task")+"</span></li>"}},kN0Ms7YR:function(e,t,n){e.exports={"task-progress":"task-progress__2Rj4"}},kPU5o9li:function(e,t,n){},kQL4tsqH:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("sa1Ed382"),o=n("vmWJWrVe"),r=n("ZG23DIrl").DisplaySettings,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="PersonalSettingsDisplayView",t.prototype.className="personal-settings-display-view personal-settings-container",t.prototype.initialize=function(){return this.render()},t.prototype.render=function(){return this.requestReactView(this.el,r,{onUpdateTaskMode:this.onUpdateTaskMode.bind(this),taskMode:i.PREFERENCE.get("openWindowMode")})},t.prototype.onUpdateTaskMode=function(e){var t,n;return t={openWindowMode:e},i.PREFERENCE.set(t),i.PREFERENCE.save(null,{attrs:t}),n={slide:"slide out",window:"pop window"},i.gta.event({action:"switch preferences",category:n[e],method:"click",type:"task open mode"}),this.render()},t}()},"kQP9/K5/":function(e,t,n){var r,o={}.hasOwnProperty;r=n("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="worktime",t}()},kRW9thl2:function(e,t){e.exports=function(e){return'<div class="recently-done-tasks finished-tasks member-tasks" data-gta="event" data-label="member recently done tasks" data-value="member recently done tasks"> <ul class="task-list"></ul></div>'}},kUW0ceqd:function(e,t,n){e.exports=n.p+"images/f_meng@2x.6278f804.png"},kWyHlA6A:function(e,t,n){e.exports=n("MKz6J3aY")+"\n\nquery UnStarredProjects(\n  $organizationId: ObjectId!,\n  $pageToken: String,\n  $pageSize: PageSizeType = 20\n) {\n  unStarred: Projects(\n    _organizationId: $organizationId,\n    pageToken: $pageToken,\n    pageSize: $pageSize,\n    filters: {\n      selectBy: unstarred\n    }\n  ) {\n    nextPageToken\n    result {\n    \t...projectSchema\n    }\n  }\n}\n"},kYwCKdnI:function(e,t,n){var r,o,i={}.hasOwnProperty;o=n("vmWJWrVe"),r=n("FEIJU5XE"),n("I+69Sort"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="LinkAbstractView",t.prototype.className="link-abstract-view link",t.prototype.events={click:"onLinkClick","click .link-menu-handler":"handleMenuClick"},t.prototype.initialize=function(e){return this.link=e.link,this.showMenuHandler=e.showMenuHandler,this.onClick=e.onClick,this.onMenuHandlerClick=e.onMenuHandlerClick,this.render()},t.prototype.handleMenuClick=function(e){return e.stopPropagation(),"function"==typeof this.onMenuHandlerClick?this.onMenuHandlerClick(e):void 0},t.prototype.onLinkClick=function(e){return this.onClick(e)},t.prototype.render=function(){return this.$el.html(r({link:this.link,showMenu:this.showMenuHandler&&null!=this.onMenuHandlerClick}))},t}()},kZqo3QZT:function(e,t,n){},kbitN9xC:function(e,t,n){"use strict";n("18nYzn40");var r=n("lDS2Mlkz");n.o(r,"SwimTable")&&n.d(t,"SwimTable",function(){return r.SwimTable}),n.o(r,"Table")&&n.d(t,"Table",function(){return r.Table}),n.o(r,"TaskTablePrinter")&&n.d(t,"TaskTablePrinter",function(){return r.TaskTablePrinter});var o=n("9cguhGnN");n.d(t,"SwimTable",function(){return o.a})},keGpi1ni:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("a+N5u/Cl"),a=n("wj/icwnL"),c=function(e){return s.last(e)},l=function(e,t,n){var r;switch(t){case a.TabTypes.Teams:r={displayTypes:[a.DisplayTypes.Teams,a.DisplayTypes.Search],index:c(e).index+1,tabType:a.TabTypes.Teams};break;case a.TabTypes.Groups:r={displayTypes:[a.DisplayTypes.Groups,a.DisplayTypes.Search],index:c(e).index+1,tabType:a.TabTypes.Groups};break;case a.TabTypes.Team:r={data:n,displayTypes:[a.DisplayTypes.Search,a.DisplayTypes.TeamSync,a.DisplayTypes.Subteams,a.DisplayTypes.TeamMembers],index:c(e).index+1,tabType:a.TabTypes.Team};break;case a.TabTypes.Group:r={data:n,displayTypes:[a.DisplayTypes.Search,a.DisplayTypes.GroupSync,a.DisplayTypes.GroupMembers],index:c(e).index+1,tabType:a.TabTypes.Group};break;case a.TabTypes.Search:r={displayTypes:[a.DisplayTypes.Search],index:c(e).index+1,tabType:a.TabTypes.Search};break;default:return e.slice()}return e.concat(r)},u=function(e){return s.initial(e)},p=function(e){return{_id:e._id,name:e.user.name,avatarUrl:e.user.avatarUrl,_userId:e._userId,teamAncestors:e.teamAncestors}},d=(n("jGbVZCJ5"),n("tLZJUYWX")),h=n("YqUJfXDr"),m=n("DOZCBSCZ"),f=n("90U+kJWN"),g=n("nfkxbxYy"),v=n("ECjfTaVg"),b=n("jq+Ck5p3"),y=b.a,k=b.b,_=b.a,w=b.b,C=b.a,S=b.a,E=b.a,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cxPrefix="invite-members-modal__component",t.cxBorderSectionPrefix=t.cxPrefix+"__border-section",t.cxHandlerPrefix=t.cxPrefix+"__handler",t.cxPlaceholderPrefix=t.cxPrefix+"__placeholder",t.isInTeamPage=function(){var e=t.props.tab.tabType;return[a.TabTypes.Team,a.TabTypes.Teams].indexOf(e)>=0},t.getSearchPlaceholder=function(){return t.isInTeamPage(),d.get("enter.keywords.or.email.to.search")},t.handleBackwardClick=function(){var e=t.props.onBackwardClick;e&&e()},t.handleCloseModalClick=function(){var e=t.props.onCloseModalClick;e&&e()},t.handleEnterGroupClick=function(e,n){var r=t.props.onEnterGroupClick;r&&r(n)},t.handleEnterGroupsClick=function(){var e=t.props.onEnterGroupsClick;e&&e()},t.handleEnterTeamClick=function(e,n){var r=t.props.onEnterTeamClick;r&&r(n)},t.handleEnterTeamsClick=function(){var e=t.props.onEnterTeamsClick;e&&e()},t.handleGroupClick=function(e,n){var r=t.props,o=r.onSyncGroupClick,i=r.syncedIds;Object(v.a)(i,n)||o&&o(n)},t.handleTeamClick=function(e,n){var r=t.props,o=r.onSyncTeamClick,i=r.syncedIds;Object(v.a)(i,n)||o&&o(n)},t.handleUserClick=function(e,n){var r=t.props,o=r.onSelectUserClick,i=r.selectedIds;Object(v.a)(i,n)||o&&o(n)},t.handleLeaderClick=function(e,n){var r=t.props,o=r.onSelectLeaderClick,i=r.selectedIds;Object(v.a)(i,n)||o&&o(n)},t.handleRoleClick=function(e,n){var r=t.props,o=r.onSelectRoleClick,i=r.selectedIds;Object(v.a)(i,n)||o&&o(n)},t.handleLoadMore=function(){var e=t.props.onLoadMore;e&&e()},t.handleOpenInviteLinkClick=function(){var e=t.props.onOpenInviteLinkClick;e&&e()},t.handleSearch=function(e,n){var r=t.props.onSearch;r&&r(n)},t.handleSendingInviteEmailClick=function(e){return function(n){var r=t.props.onSendingInviteEmailClick;r&&r(e)}},t}return r.d(t,e),t.prototype.getRenderFunctions=function(){switch(this.props.tab.tabType){case a.TabTypes.Default:return[this.renderInviteFromTeams(),this.renderInviteFromGroups(),this.renderRecommendHeader(),this.renderLists()];case a.TabTypes.Group:case a.TabTypes.Groups:case a.TabTypes.Team:case a.TabTypes.Teams:case a.TabTypes.Search:return[this.renderLists()];default:return[]}},t.prototype.getIsSelected=function(e){var t=this.props.selectedIds;return Object(v.a)(t,e)},t.prototype.getButtonHandlerSelectedText=function(e){return this.getIsSelected(e)?d.get("already.join"):d.get("add")},t.prototype.getIsSynced=function(e){var t=this.props.syncedIds;return Object(v.a)(t,e)},t.prototype.getButtonHandlerSyncedText=function(e){return this.getIsSynced(e)?d.get("already.sync"):d.get("sync")},t.prototype.renderBackwardHandler=function(){return 0===this.props.tab.index?null:o.createElement("a",{className:this.cxPrefix+"__backward-handler",onClick:this.handleBackwardClick},o.createElement("span",{className:"icon icon-chevron-left"}))},t.prototype.renderHeaderTitle=function(){var e=this.props,t=e.tab,n=e.modalTitle,r=t.title||n;return"string"!=typeof r||0===r.length?null:o.createElement("div",{className:this.cxPrefix+"__header__title"},r)},t.prototype.renderCloseModalHandler=function(){return o.createElement("a",{className:this.cxPrefix+"__close-modal-handler",onClick:this.handleCloseModalClick},o.createElement("span",{className:"icon icon-remove"}))},t.prototype.renderHeader=function(){return this.props.tab?o.createElement("div",{className:this.cxPrefix+"__header"},this.renderBackwardHandler(),this.renderHeaderTitle(),this.renderCloseModalHandler()):null},t.prototype.renderBodySearch=function(){var e=this.props.tab;return Object(v.b)(a.DisplayTypes.Search)(e.displayTypes)?o.createElement(g.a,{className:this.cxPrefix+"__body__search",defaultValue:this.props.searchValue,onSearch:this.handleSearch,showHeader:!0,placeholder:this.getSearchPlaceholder()}):null},t.prototype.renderInviteFromTeams=function(){var e=this.props,t=e.isOrganization,n=e.searchValue,r=e.tab,i=Object(v.b)(a.DisplayTypes.InviteFromTeams)(r.displayTypes);return t&&i&&!Object(v.d)(n)?o.createElement("div",{className:this.cxPrefix+"__body__section"},o.createElement(b.b,{className:this.cxPrefix+"__body__section__handler",onClick:this.handleEnterTeamsClick},o.createElement("span",{className:this.cxPrefix+"__body__section__handler__text"},d.get("invite.member.from.team")))):null},t.prototype.renderInviteFromGroups=function(){var e=this.props,t=e.isOrganization,n=e.searchValue,r=e.tab;if(!e.hideInviteFromGroups){var i=Object(v.b)(a.DisplayTypes.InviteFromGroups)(r.displayTypes);return t&&i&&!Object(v.d)(n)?o.createElement("div",{className:this.cxPrefix+"__body__section"},o.createElement(b.b,{className:this.cxPrefix+"__body__section__handler",onClick:this.handleEnterGroupsClick},o.createElement("span",{className:this.cxPrefix+"__body__section__handler__text"},d.get("invite.member.from.group")))):null}},t.prototype.renderRecommendHeader=function(){return o.createElement(o.Fragment,null,o.createElement("hr",{className:this.cxPrefix+"__body__content__recommend-divider"}),o.createElement("span",{className:this.cxPrefix+"__body__content__recommend-header"},d.get("recommend")))},t.prototype.renderGroupItem=function(e){return o.createElement("li",{className:this.cxPrefix+"__body__section__list__item",key:e._id},o.createElement(k,{className:""+this.cxHandlerPrefix,id:e._id,onClick:this.handleEnterGroupClick},o.createElement(b.c,{count:e.membersCount,name:e.name})))},t.prototype.renderGroupSync=function(e){var t=e.data;return t?o.createElement(y,{className:""+this.cxBorderSectionPrefix,disabled:this.getIsSynced(t._id),id:t._id,key:e.id,onClick:this.handleGroupClick,text:this.getButtonHandlerSyncedText(t._id)},o.createElement(b.c,{count:t.membersCount,name:t.name})):null},t.prototype.renderGroups=function(e){var t=this;return o.createElement(b.e,{className:this.cxPrefix+"__body__section",key:e.id,title:e.title,containerCls:this.cxPrefix+"__body__section__list"},e.data.map(function(e){return t.renderGroupItem(e)}))},t.prototype.renderMemberItem=function(e){var t=Object(f.resolveUserId)(e),n=e.teamAncestors?e.teamAncestors.map(function(e){return e.name}).join(" - "):null;return o.createElement("li",{className:this.cxPrefix+"__body__section__list__item",key:t},o.createElement(C,{className:""+this.cxHandlerPrefix,disabled:this.getIsSelected(t),id:e._id,onClick:this.handleUserClick,text:this.getButtonHandlerSelectedText(t)},o.createElement(b.f,{avatarUrl:e.avatarUrl,name:e.name,belongingTo:n})))},t.prototype.renderLeaderItem=function(e){var t=e._id,n=r.f(e.style?e.style.split(","):["",""],2),i=n[0],s=n[1];return o.createElement("li",{className:this.cxPrefix+"__body__section__list__item",key:t},o.createElement(S,{className:""+this.cxHandlerPrefix,disabled:this.getIsSelected(t),id:t,onClick:this.handleLeaderClick,text:this.getButtonHandlerSelectedText(t)},o.createElement(b.d,{leaderName:e.user?e.user.name:"",teamName:e.name,iconColor:s,iconName:i})))},t.prototype.renderRoleItem=function(e){var t=e._id;return o.createElement("li",{className:this.cxPrefix+"__body__section__list__item",key:t},o.createElement(E,{className:""+this.cxHandlerPrefix,disabled:this.getIsSelected(t),id:t,onClick:this.handleRoleClick,text:this.getButtonHandlerSelectedText(t)},o.createElement(b.g,{name:e.name})))},t.prototype.renderMembers=function(e){var t=this;return o.createElement(b.e,{title:e.title,className:this.cxPrefix+"__body__section",containerCls:this.cxPrefix+"__body__section__list",key:e.id},e.data.map(function(e){return t.renderMemberItem(e)}))},t.prototype.renderLeaders=function(e){var t=this;return o.createElement(b.e,{title:e.title,className:this.cxPrefix+"__body__section",containerCls:this.cxPrefix+"__body__section__list",key:e.id},e.data.map(function(e){return t.renderLeaderItem(e)}))},t.prototype.renderOrganizationRoles=function(e){var t=this;return o.createElement(b.e,{title:e.title,className:this.cxPrefix+"__body__section",containerCls:this.cxPrefix+"__body__section__list",key:e.id},e.data.map(function(e){return t.renderRoleItem(e)}))},t.prototype.renderTeamItem=function(e,t){return void 0===t&&(t=!1),o.createElement("li",{className:this.cxPrefix+"__body__section__list__item",key:e._id},o.createElement(w,{className:""+this.cxHandlerPrefix,id:e._id,onClick:this.handleEnterTeamClick},o.createElement(b.i,{belongingTo:e.teamChainName,count:e.membersCount,iconColor:e.style.split(",")[1],iconName:e.style.split(",")[0],showAsSubteam:t,name:e.name})))},t.prototype.renderTeamSync=function(e){var t=e.data;return t?o.createElement(_,{className:this.cxBorderSectionPrefix+"__header",disabled:this.getIsSynced(t._id),id:t._id,key:e.id,onClick:this.handleTeamClick,text:this.getButtonHandlerSyncedText(t._id)},o.createElement(b.i,{belongingTo:t.teamChainName,count:t.membersCount,iconColor:t.style.split(",")[1],iconName:t.style.split(",")[0],name:t.name})):null},t.prototype.renderSubteams=function(e){var t=this;return o.createElement(b.e,{className:this.cxPrefix+"__subteams "+this.cxBorderSectionPrefix+"__header",key:e.id,containerCls:this.cxPrefix+"__body__section__list"},e.data.map(function(e){return t.renderTeamItem(e,!0)}))},t.prototype.renderRecommendMembers=function(e){var t=this;return o.createElement(b.e,{title:e.title,className:this.cxPrefix+"__body__section",containerCls:this.cxPrefix+"__body__section__list",key:e.id},e.data.map(function(e){return t.renderMemberItem(e)}))},t.prototype.renderTeams=function(e){var t=this;return o.createElement(b.e,{className:this.cxPrefix+"__body__section",key:e.id,title:e.title,containerCls:this.cxPrefix+"__body__section__list"},e.data.map(function(e){return t.renderTeamItem(e)}))},t.prototype.renderList=function(e){var t=e.data,n=e.displayType,r=e.hasPlaceholder,i=e.id,s=e.listType;if(n===a.DisplayTypes.GroupSync)return this.renderGroupSync(e);if(n===a.DisplayTypes.TeamSync)return this.renderTeamSync(e);if(n===a.DisplayTypes.Subteams)return this.renderSubteams(e);if(n===a.DisplayTypes.RecentContacts)return this.renderRecommendMembers(e);if(!r&&!Object(v.c)(t))return null;if(r&&!Object(v.c)(t)){var c=function(){switch(s){case a.ListTypes.Groups:return"group";case a.ListTypes.Members:return"member";case a.ListTypes.Teams:return"team";default:return null}}();return"string"!=typeof c?null:o.createElement(b.h,{className:""+this.cxPlaceholderPrefix,key:i,type:c})}switch(s){case a.ListTypes.Groups:return this.renderGroups(e);case a.ListTypes.Members:return this.renderMembers(e);case a.ListTypes.Leaders:return this.renderLeaders(e);case a.ListTypes.Roles:return this.renderOrganizationRoles(e);case a.ListTypes.Teams:return this.renderTeams(e);default:return null}},t.prototype.renderLists=function(){var e=this,t=this.props.lists;return null===t?o.createElement(m.a,null):Object(v.c)(t)?t.map(function(t){return e.renderList(t)}):null},t.prototype.renderTabContent=function(){var e=this.props,t=e.lists,n=e.tab;return null!==t&&n.tabType===a.TabTypes.Search&&s.every(t,function(e){return!Object(v.c)(e.data)})?o.createElement(b.h,{className:""+this.cxPlaceholderPrefix,type:"search"}):this.getRenderFunctions().map(function(e,t){return o.createElement("span",{key:t},e)})},t.prototype.renderLoadMoreMembers=function(){var e=this.props,t=e.lists,n=e.isLoadingMembers,r=e.tab;return null===t||r.tabType!==a.TabTypes.Team&&r.tabType!==a.TabTypes.Group?null:o.createElement(h.LoadMore,{hasMore:n,endWith:null,onEnter:this.handleLoadMore})},t.prototype.renderLoadMoreGroups=function(){var e=this.props,t=e.lists,n=e.isLoadingGroups,r=e.tab;return null===t||r.tabType!==a.TabTypes.Groups?null:o.createElement(h.LoadMore,{hasMore:n,endWith:null,onEnter:this.handleLoadMore})},t.prototype.renderBodyContent=function(){return o.createElement("div",{className:this.cxPrefix+"__body__content"},this.renderTabContent(),this.renderLoadMoreGroups(),this.renderLoadMoreMembers())},t.prototype.renderBody=function(){return this.props.tab?o.createElement("div",{className:this.cxPrefix+"__body"},this.renderBodySearch(),this.renderBodyContent()):null},t.prototype.renderHint=function(){return this.props.hint},t.prototype.render=function(){return o.createElement("div",{className:""+this.cxPrefix},this.renderHeader(),o.createElement("hr",{className:this.cxPrefix+"__divider"}),this.renderHint(),this.renderBody())},t}(o.PureComponent),I=n("M6knRl17"),M=n("hxiM8Hy+"),j=n.n(M),P=n("cY+V28dO"),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.organizationTeamsCol=[],t.organizationGroupsCol=[],t.teamMembersPageToken="",t.groupMembersPageToken="",t.state={lists:[],tabs:[{displayTypes:[a.DisplayTypes.Search,a.DisplayTypes.InviteFromGroups,a.DisplayTypes.InviteFromLink,a.DisplayTypes.InviteFromTeams,a.DisplayTypes.RecentContacts],index:0,tabType:a.TabTypes.Default}],isLoadingMembers:!1,isLoadingTeams:!1},t.clearSubs=function(){t.loadTabDataSub$&&t.loadTabDataSub$.unsubscribe(),t.searchMembersSub$&&t.searchMembersSub$.unsubscribe(),t.loadMoreMembersSub$&&t.loadMoreMembersSub$.unsubscribe()},t.resetPageTokens=function(){t.teamMembersPageToken="",t.groupMembersPageToken=""},t.onBackwardClick=function(){t.setState({tabs:u(t.state.tabs),lists:null})},t.onEnterTeamsClick=function(){t.setState({tabs:l(t.state.tabs,a.TabTypes.Teams),lists:null})},t.onEnterGroupsClick=function(){t.setState({tabs:l(t.state.tabs,a.TabTypes.Groups),lists:null})},t.onEnterTeamClick=function(e){t.setState({tabs:l(t.state.tabs,a.TabTypes.Team,{teamId:e}),lists:null})},t.onEnterGroupClick=function(e){t.setState({tabs:l(t.state.tabs,a.TabTypes.Group,{groupId:e}),lists:null})},t.loadMoreTeamMembers=function(){var e=c(t.state.tabs).data.teamId;t.loadMoreMembersSub$&&t.loadMoreMembersSub$.unsubscribe(),t.loadMoreMembersSub$=t.props.service.getTeamMembers(e,t.teamMembersPageToken).subscribe(function(e){var n=t.state.lists.map(function(t){return t.listType===a.ListTypes.Members&&(t.data=t.data.concat(e.result)),t});t.teamMembersPageToken=e.nextPageToken;var r=e.nextPageToken.length>0;t.setState({lists:n,isLoadingMembers:r,isLoadingTeams:!1})})},t.loadMoreGroupMembers=function(){var e=c(t.state.tabs).data.groupId;t.loadMoreMembersSub$&&t.loadMoreMembersSub$.unsubscribe(),t.loadMoreMembersSub$=t.props.service.getGroupMembers(e,t.groupMembersPageToken).subscribe(function(e){var n=t.state.lists.map(function(t){return t.listType===a.ListTypes.Members&&(t.data=t.data.concat(e.result)),t});t.groupMembersPageToken=e.nextPageToken;var r=e.nextPageToken.length>0;t.setState({lists:n,isLoadingMembers:r,isLoadingTeams:!1})})},t.onLoadMore=function(){t.setState({isLoadingTeams:!0}),c(t.state.tabs).data.groupId?t.loadMoreGroupMembers():t.loadMoreTeamMembers()},t.onSelectUserClick=function(e){t.props.onAddMembers([{subjectType:P.b.organizationMember,_subjectId:e}])},t.onSelectLeaderClick=function(e){t.props.onAddMembers([{subjectType:P.b.teamLeader,_subjectId:e}])},t.onSelectRoleClick=function(e){t.props.onAddMembers([{subjectType:P.b.organizationRole,_subjectId:e}])},t.onSyncTeamClick=function(e){t.props.onAddMembers([{subjectType:P.b.organizationTeam,_subjectId:e}])},t.onSyncGroupClick=function(e){t.props.onAddMembers([{subjectType:P.b.organizationGroup,_subjectId:e}])},t.onSearch=function(e){if(e||c(t.state.tabs).tabType!==a.TabTypes.Search)return c(t.state.tabs).tabType===a.TabTypes.Search?(t.searchMembersSub$&&t.searchMembersSub$.unsubscribe(),void(t.searchMembersSub$=t.props.service.searchMembers(t.props.organizationId,e).subscribe(function(e){var n=e.roles,r=e.teams,o=e.members.map(p),i=r.filter(function(e){return e.user});t.setState({lists:[{data:o,displayType:a.DisplayTypes.TeamMembers,id:"INVITE_MEMBERS_MODAL_210",listType:a.ListTypes.Members},{data:i,displayType:a.DisplayTypes.TeamLeaders,id:"INVITE_MEMBERS_MODAL_213",listType:a.ListTypes.Leaders},{data:n,displayType:a.DisplayTypes.OrganizationRoles,id:"INVITE_MEMBERS_MODAL_214",listType:a.ListTypes.Roles}]})}))):t.setState({tabs:l(t.state.tabs,a.TabTypes.Search),lists:null},function(){t.searchMembersSub$&&t.searchMembersSub$.unsubscribe(),t.searchMembersSub$=t.props.service.searchMembers(t.props.organizationId,e).subscribe(function(e){var n=e.roles,r=e.teams,o=e.members.map(p),i=r.filter(function(e){return e.user});t.setState({lists:[{data:o,displayType:a.DisplayTypes.TeamMembers,id:"INVITE_MEMBERS_MODAL_210",listType:a.ListTypes.Members},{data:i,displayType:a.DisplayTypes.TeamLeaders,id:"INVITE_MEMBERS_MODAL_213",listType:a.ListTypes.Leaders},{data:n,displayType:a.DisplayTypes.OrganizationRoles,id:"INVITE_MEMBERS_MODAL_214",listType:a.ListTypes.Roles}]})})});t.onBackwardClick()},t.onCloseModalClick=function(){t.props.handleClose(),t.clearSubs(),t.resetPageTokens()},t}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.setState({lists:null}),this.loadTabDataSub$=this.props.service.recommendMembers(this.props.organizationId).subscribe(function(t){var n=t.members.map(function(e){return{_id:e._id,name:e.user.name,avatarUrl:e.user.avatarUrl,_userId:e._userId}});e.setState({lists:[{data:n,displayType:a.DisplayTypes.RecentContacts,id:"INVITE_MEMBERS_MODAL_207",listType:a.ListTypes.Members}]})})},t.prototype.componentDidUpdate=function(e,t){if(this.state.tabs.length!==t.tabs.length){this.clearSubs(),this.resetPageTokens();var n=this.state.tabs;switch(c(n).tabType){case a.TabTypes.Teams:this.enterOrganizationTeamsTab();break;case a.TabTypes.Groups:this.enterOrganizationGroupsTab();break;case a.TabTypes.Team:this.enterTeamTab();break;case a.TabTypes.Group:this.enterGroupTab();break;case a.TabTypes.Default:this.enterDefaultTab();break;default:return}}},t.prototype.componentWillUnmount=function(){this.clearSubs()},t.prototype.enterOrganizationTeamsTab=function(){var e=this;this.loadTabDataSub$=this.props.service.getOrganizationTeams(this.props.organizationId).subscribe(function(t){e.organizationTeamsCol=j()(e.organizationTeamsCol,t.result,"_id"),e.setState({lists:[{data:t.result,hasPlaceholder:!0,id:"INVITE_MEMBERS_MODAL_212",listType:a.ListTypes.Teams}]})})},t.prototype.enterOrganizationGroupsTab=function(){var e=this;this.loadTabDataSub$=this.props.service.getOrganizationGroups(this.props.organizationId).subscribe(function(t){e.organizationGroupsCol=t.result,e.setState({lists:[{data:t.result,hasPlaceholder:!0,id:"INVITE_MEMBERS_MODAL_212",listType:a.ListTypes.Groups}]})})},t.prototype.enterTeamTab=function(){var e=this,t=this.state.tabs,n=c(t).data.teamId,o=this.props.service.getSubTeams(n),i=this.props.service.getTeamMembers(n);this.loadTabDataSub$=I.Observable.forkJoin(o,i).subscribe(function(t){var o=r.f(t,2),i=o[0],s=o[1];i.result.forEach(function(t){var n=t.style,r=t._parentId;if("string"!=typeof n||0===n.length){var o=e.organizationTeamsCol.find(function(e){return e._id===r});t.style=o.style}});var c={data:e.organizationTeamsCol.find(function(e){return e._id===n}),displayType:a.DisplayTypes.TeamSync,id:"INVITE_MEMBERS_MODAL_211"},l={data:i.result,displayType:a.DisplayTypes.Subteams,id:"INVITE_MEMBERS_MODAL_209"},u={data:s.result,displayType:a.DisplayTypes.TeamMembers,listType:a.ListTypes.Members,id:"INVITE_MEMBERS_MODAL_210"};e.organizationTeamsCol=j()(e.organizationTeamsCol,i.result,"_id"),e.teamMembersPageToken=s.nextPageToken;var p=s.nextPageToken.length>0;e.setState({lists:[c,l,u],isLoadingMembers:p})})},t.prototype.enterGroupTab=function(){var e=this,t=this.state.tabs,n=c(t).data.groupId,r=this.organizationGroupsCol.find(function(e){return e._id===n});this.loadTabDataSub$=this.props.service.getGroupMembers(n).subscribe(function(t){e.groupMembersPageToken=t.nextPageToken;var n=t.nextPageToken.length>0;e.setState({lists:[{data:r,displayType:a.DisplayTypes.GroupSync,id:"INVITE_MEMBERS_MODAL_201"},{data:t.result,displayType:a.DisplayTypes.GroupMembers,id:"INVITE_MEMBERS_MODAL_200",listType:a.ListTypes.Members}],isLoadingMembers:n})})},t.prototype.enterDefaultTab=function(){var e=this;this.loadTabDataSub$=this.props.service.recommendMembers(this.props.organizationId).subscribe(function(t){var n=t.members.map(function(e){return{_id:e._id,name:e.user.name,avatarUrl:e.user.avatarUrl,_userId:e._userId}});e.setState({lists:[{data:n,displayType:a.DisplayTypes.RecentContacts,id:"INVITE_MEMBERS_MODAL_207",listType:a.ListTypes.Members}]})})},t.prototype.render=function(){return i.a.createElement(T,{isOrganization:!0,isValidSearchValue:null,lists:this.state.lists,isLoadingGroups:!1,isLoadingMembers:this.state.isLoadingMembers,isLoadingTeams:this.state.isLoadingTeams,membersCount:null,membersTotal:null,organizationId:this.props.organizationId,searchValue:null,selectedIds:this.props.selectedIds,syncedIds:this.props.syncedIds,tab:c(this.state.tabs),hideInviteFromGroups:this.props.hideInviteFromGroups,onBackwardClick:this.onBackwardClick,onEnterTeamsClick:this.onEnterTeamsClick,onEnterGroupsClick:this.onEnterGroupsClick,onEnterTeamClick:this.onEnterTeamClick,onEnterGroupClick:this.onEnterGroupClick,onLoadMore:this.onLoadMore,onSelectUserClick:this.onSelectUserClick,onSelectLeaderClick:this.onSelectLeaderClick,onSelectRoleClick:this.onSelectRoleClick,onSyncTeamClick:this.onSyncTeamClick,onSyncGroupClick:this.onSyncGroupClick,onSearch:this.onSearch,onCloseModalClick:this.onCloseModalClick,modalTitle:this.props.modalTitle,hint:this.props.hint})},t}(i.a.PureComponent),N=n("GESwhXbR"),O=n("1NVLEqJ4"),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modalBodyStyle={paddingLeft:0,paddingRight:0,paddingBottom:0},t}return r.d(t,e),t.prototype.renderInvite=function(){var e=this.props.getSelectedIds(this.props.invitees),t=this.props.getSyncedIds(this.props.invitees);return this.props.opened&&i.a.createElement(x,{selectedIds:e,syncedIds:t,organizationId:this.props.organizationId,handleClose:this.props.handleClose,onAddMembers:this.props.onAddMembers,service:this.props.service,hideInviteFromGroups:this.props.hideInviteFromGroups,modalTitle:this.props.modalTitle,hint:this.props.hint})},t.prototype.render=function(){return i.a.createElement(N.Modal,{closeable:!1,opened:this.props.opened,onVisibleChange:this.props.onVisibleChange,title:null,width:360,bodyStyle:this.modalBodyStyle,className:O["project-tag-invite-modal"],titleCls:O["project-tag-invite-modal__title"],zIndex:this.props.zIndex},this.renderInvite())},t}(o.Component);n.d(t,"a",function(){return R})},kgLdAlVe:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("a+N5u/Cl"),a=n("GESwhXbR"),c=n("smMC6FqF"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){return o.createElement("ul",{className:"tag-list thin-scroll","data-role":"select"},this.props.children)},t}(o.PureComponent),u=Object(a.Selectable)(l),p=n("HVbnodQK");n.d(t,"a",function(){return v});var d,h=n("ytDAhr3u").Colors,m=n("ymFCWmUp").objectsFilter,f=n("l7bwUp3k");!function(e){e[e.Search=0]="Search",e[e.Create=1]="Create"}(d||(d={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onTagSelect(t.props.index)},t.onEdit=function(e){e.stopPropagation(),t.props.onTagEdit(t.props.index)},t}return r.d(t,e),t.prototype.renderEditBtn=function(){return this.props.tag.canEdit&&o.createElement(a.IconButton,{className:"tag-edit icon",color:"gray",name:"pencil",onClick:this.onEdit})},t.prototype.renderTagCheck=function(){return this.props.isSelected(this.props.tag._id)&&o.createElement(a.Icon,{size:16,name:"tick icon"})},t.prototype.render=function(){var e=this.props.tag,t={label:e.name,data:e._id};return o.createElement("li",{className:"tag-list-item",key:e._id,onClick:this.onClick},o.createElement("div",{className:"tag-circle-wrap"},o.createElement("div",{className:"tag-circle",style:{backgroundColor:h[e.color]}})),o.createElement("div",{className:"tag-name"},t.label),this.renderEditBtn(),this.renderTagCheck())},t}(o.PureComponent),v=function(e){function t(t){var n=e.call(this,t)||this;return n.refRoot=function(e){n.rootEl=e},n.refInput=function(e){n.input=e},n.refSelect=function(e){n.select=e},n.getMode=function(){return n.props.canAddTag&&n.state.query.trim().length>0&&0===n.getFilteredTags().length?d.Create:d.Search},n.getFilteredTags=function(){return m(n.props.tags,n.state.query)},n.getFlattenedTagList=function(){var e=r.f(s.partition(n.getFilteredTags(),function(e){return e._organizationId}),2),t=e[0],o=e[1],i=function(e){return r.a({},e,{__type:"tag"})},a=(void 0===o?[]:o).map(i),c={};t.forEach(function(e){var t=e.tagcategoryIds[0]||"uncategorized",n=i(e);c[t]?c[t].push(n):c[t]=[n]});var l=s.chain(c).keys().map(function(e){var t=n.props.tagCategories.filter(function(t){return t._id===e})[0];return t||(t=n.props.tagCategories.filter(function(e){return e.isDefault})[0]),t}).uniq("_id").sortBy(function(e){return e.updated?-new Date(e.updated).valueOf():0}).map(function(e){var t=/^uncategorized/.test(e._id)?c.uncategorized:c[e._id];return t&&t.length>0?[Object.assign(e,{__type:"category"})].concat(t):[]}).flatten().value();return l.length>0?a.concat({__type:"organization",_id:"organization"},l):a},n.isSelected=function(e){return n.props.selectedTags.indexOf(e)>=0},n.onChange=function(e){var t=e.target;n.setState({query:t.value})},n.onKeyDown=function(e){switch(n.getMode()){case d.Search:n.select.keyboardHandler(e);break;case d.Create:13===e.which&&n.onCreateTag()}},n.onEnter=function(){n.select.activedIndex>=0?n.onTagSelect(n.select.activedIndex):n.selectFirstTag()},n.onClickCreateTagBtn=function(){switch(n.getMode()){case d.Search:n.props.switchTagPopupMenu(p.b.Create,{name:n.state.query});break;case d.Create:n.state.query.length>0&&n.onCreateTag()}},n.onTagSelect=function(e){if(n.props.canPutTag){var t=n.getFlattenedTagList()[e]._id;n.isSelected(t)?n.props.onUnselectTag(t):n.props.onSelectTag(t)}},n.onTagEdit=function(e){n.props.switchTagPopupMenu(p.b.Edit,n.getFlattenedTagList()[e])},n.onSelectTagColor=function(e){n.setState({tagColor:e})},n.onCreateTag=function(){var e=n.state.query.trim();""!==e&&(n.setState({query:"",tagColor:""}),n.props.onCreateTag({name:e,color:n.state.tagColor}))},n.onClickToFocusInput=function(){n.input.focus()},n.selectFirstTag=function(){var e=s.findIndex(n.getFlattenedTagList(),function(e){return"tag"===e.__type});e>=0&&n.onTagSelect(e)},n.filterTagCategory=function(e){return"p"!==e.type},n.renderOptions=function(){return n.getFlattenedTagList().map(function(e,t){switch(e.__type){case"tag":return o.createElement(g,{key:e._id,tag:e,index:t,onTagSelect:n.onTagSelect,onTagEdit:n.onTagEdit,isSelected:n.isSelected});case"organization":return o.createElement("p",{key:"organization",className:f["organization-tag-title"]},i.get("organization.tags"));case"category":return o.createElement("p",{key:e._id,className:f["tag-category-title"]},e.name);default:return null}})},n.state={query:"",tagColor:""},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.input.focus(),this.rootEl.addEventListener("mousewheel",this.stopWheelPropagation)},t.prototype.componentWillUnmount=function(){this.rootEl.removeEventListener("mousewheel",this.stopWheelPropagation)},t.prototype.stopWheelPropagation=function(e){e.stopPropagation()},t.prototype.renderCreateContent=function(){return o.createElement("div",{onClick:this.onClickToFocusInput},o.createElement(c.a,{className:"color-picker",selectedColor:this.state.tagColor,onSelectColor:this.onSelectTagColor}),o.createElement("div",{className:"create-tag-btn-wrap"},o.createElement(a.Button,{className:"create-tag-btn",disabled:""===this.state.query.trim(),onClick:this.onCreateTag},i.get("create"))))},t.prototype.renderSelectContent=function(){return o.createElement("div",null,o.createElement(u,{ref:this.refSelect,focusable:!1,index:-1,filterFn:this.filterTagCategory,onEnter:this.onEnter},this.renderOptions()))},t.prototype.renderPlaceholder=function(){return this.getMode()===d.Search&&0===this.getFilteredTags().length&&o.createElement("div",{className:f["tag-search-placeholder"]},o.createElement("span",{className:"placeholder-image"}),o.createElement("span",null,i.get("tag.picker.no.tag.placeholder")))},t.prototype.renderContent=function(){switch(this.getMode()){case d.Search:return this.renderSelectContent();case d.Create:return this.renderCreateContent();default:return null}},t.prototype.renderInput=function(){return o.createElement("div",{className:f["tag-input"]},o.createElement("input",{ref:this.refInput,className:"form-control tag-input",placeholder:i.get("tag.search.placeholder"),value:this.state.query,onChange:this.onChange,onKeyDown:this.onKeyDown}),this.renderInputAddButton())},t.prototype.renderInputAddButton=function(){return this.props.canAddTag?o.createElement("div",{className:"btn-in-input"},o.createElement(a.Tooltip,{title:i.get("tag.creator.title"),placement:"top"},o.createElement(a.IconButton,{name:"circle-plus-o",onClick:this.onClickCreateTagBtn}))):null},t.prototype.render=function(){return o.createElement("div",{ref:this.refRoot,className:f["tag-search"]},this.renderInput(),this.renderContent(),this.renderPlaceholder())},t.defaultProps={canRemove:!0,disabled:!1},t}(o.PureComponent)},"kibL+kLb":function(e,t,n){},knRt0vpv:function(e,t,n){e.exports={"task-title":"task-title__1MiG","task-name-wrap":"task-name-wrap__1tXG","task-name":"task-name__12vQ","item-description":"item-description__3Yed","taskid-info":"taskid-info__1ffl","project-info":"project-info__1cBU","archived-badge":"archived-badge__3NSv"}},kpf8nsNF:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;s=n("a+N5u/Cl"),r=n("VuB9cZyl"),o=n("dnIpZF/8"),(i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.model=o,t.prototype.name="customfieldlinks",t.prototype.orderBy="pos",t.prototype.initialize=function(e,n){if(t.__super__.initialize.apply(this,arguments),this.boundToObjectType)return this._boundToObjectId=this._boundToObjectId.replace("_"+this.name,"")},t.prototype.url=function(){return"projects/"+this._boundToObjectId+"/customfieldlinks"},t.prototype.sync=function(e,n,r){switch(null==r&&(r={}),r.url=this.url(),e){case"read":return r.attrs={boundType:this.boundToObjectType,withRootCommongroup:!0},r.skipBoundToObjectType=!0,t.__super__.sync.call(this,"read",this,r);default:return t.__super__.sync.apply(this,arguments)}},t.prototype.getModels=function(){return this.models},t.prototype.getSortedModels=function(){return s.chain(this.getModels()).sortBy(function(e){return e.get("pos")}).value()},t.prototype.createCustomFieldLinks=function(e,t){return null==e&&(e=[]),null==t&&(t={}),new Promise((n=this,function(r,o){return n.sync("create",n,{attrs:{_customfieldIds:e,boundType:n.boundToObjectType},wait:!0,success:function(){return"function"==typeof t.success&&t.success(),r()},error:o})}));var n},t}()).genCacheId=function(e){return e+"_"+i.prototype.name},e.exports=i},kqHT5GUC:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("a+N5u/Cl"),l=n("TSYQbtd+"),u=n.n(l),p=n("s0r7VfKc"),d=n("GESwhXbR"),h=n("RTj5z5YX"),m=n("kEx7B/ON"),f=n.n(m),g=function(e){function t(t){var n=e.call(this,t)||this;return n.objectShareId=null,n.saveDropdown=function(e){n.dropdown=e},n.closeDropdown=function(){n.dropdown.close()},n.onOpen=function(){var e=n.props.objectModel;"task"===n.props.objectType?p.default.fetch.getTaskShare(e.id).subscribe(function(e){e.isShared?n.setState({links:{shareLink:e.shareLink,qrLink:e.qrLink}}):n.closeDropdown()}):e.shareDetails({success:function(e){var t=c.findWhere(e,{isReadonly:!0});t?(n.objectShareId=t._id,n.setState({links:{shareLink:t.shareLink,qrLink:t.mobileShareLink}})):n.closeDropdown()}})},n.disableShare=function(){"task"===n.props.objectType?p.default.fetch.disableTaskShare(n.props.objectModel.id).subscribe():(n.props.objectModel.cancelShare(n.objectShareId,{}),n.objectShareId=null),n.dropdown.close()},n.state={},n}return r.d(t,e),t.prototype.renderTrigger=function(){var e=u()(f.a.label,this.props.className);return i.a.createElement("div",{className:e},i.a.createElement(d.Icon,{name:"earth",size:14}),a.a.get("share.status.sharing"))},t.prototype.renderButton=function(){return this.props.objectModel.canPutShareStatus()?i.a.createElement(d.Button,{className:f.a["dropdown-button"],onClick:this.disableShare},a.a.get("share.status.stop.sharing")):null},t.prototype.renderContent=function(){return this.state.links?i.a.createElement("div",{className:f.a["dropdown-content"]},i.a.createElement(h.ShareLink,{showQRCode:!0,linkObj:this.state.links,description:a.a.get("object.share.link.description",a.a.get(this.props.objectType))}),this.renderButton()):i.a.createElement(d.Loading,null)},t.prototype.render=function(){return i.a.createElement(d.TitledDropdown,{ref:this.saveDropdown,nested:!0,onOpen:this.onOpen,title:a.a.get("share.via.wechat"),content:this.renderContent()},this.renderTrigger())},t}(i.a.PureComponent);n.d(t,"ObjectShareStatus",function(){return g})},"krSX/Zau":function(e,t){e.exports=function(e){var t='<section class="emoji-body"> ',n=e.emojiGroups;if(n)for(var r=-1,o=n.length-1;r<o;){t+=' <div class="emoji-group"> ';var i=n[r+=1];if(i)for(var s,a=-1,c=i.length-1;a<c;)t+=' <div class="emoji-cell" data-content="'+((s=i[a+=1]).content[e.lang]||s.content.zh)+'"> <img src="'+s.src+'" alt="'+(s.content[e.lang]||s.content.zh)+'"> </div> ';t+=" </div> "}t+='</section><footer class="emoji-footer"> ';var l=e.emojiGroups;if(l){a=-1;for(var u=l.length-1;a<u;)l[a+=1],t+=' <div class="emoji-switcher" data-index="'+a+'"> <div class="emoji-switcher-circle"></div> </div> '}return t+="</footer>"}},kuYoSsIJ:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("4c1CS0b3"),a=n("8yf6doCl"),c=n("NMLEq1ET"),l=n("BsTK5jZO"),u=n("fZoV3jYy"),p=n("AJKJAcwg"),d=function(e){function t(t){var n=e.call(this,t)||this;return n.onOpen=function(){n.props.onOpen&&n.props.onOpen(),n.open$.next()},n.onHide=function(){n.hide$.next()},n.onSelect=function(e){var t=n.props.onSelect;"function"==typeof t&&t(e)},n.state={list:[],pool:[],isPoolLoading:!1,searchTerm:"",searchResults:[],isSearchLoading:!1,commitResults:[]},n.action$=new a.Subject,n.open$=new a.Subject,n.hide$=new a.Subject,n.dispatchProps=(n.props.connectDispatcher||l.ExecutorInput.connectDispatcher)(n.action$),n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.contextId,n=l.ExecutorInput.consumeDispatched(this.action$),o=n.commit$,i=r.g(n,["commit$"]),a=function(n){return l.ExecutorInput.loadSearch(t,n,e.props.objectType).catch(function(){return s.Observable.empty()})},d=function(){return!0};this.stateSubscription=(this.props.inline?s.Observable.of(void 0):this.open$).concatMap(function(){return u.h(a,void 0,d,p.a,c.c.Single)(r.a({},i,{initListLoad$:s.Observable.of(e.props.executor?[l.ExecutorInput.userAsInvolver(e.props.executor)]:[]),initPoolLoad$:l.ExecutorInput.loadInitialRecommend(t,e.props.objectType).catch(function(){return s.Observable.empty()})})).takeUntil(e.hide$)}).subscribe(function(t){e.setState(t)});var h=t._id;h&&(this.commitSubscription=o.concatMap(function(t){return l.ExecutorInput.commitUpdate(h,t,e.props.objectType).catch(function(){return s.Observable.empty()})}).subscribe())},t.prototype.componentWillUnmount=function(){this.action$.complete(),this.open$.complete(),this.hide$.complete(),this.stateSubscription.unsubscribe(),this.commitSubscription&&this.commitSubscription.unsubscribe()},t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.nested,s=e.defaultOpened,a=e.inline,l=e.inviteShowed,u=e.reactToHover,p=e.onSelect,d=e.inviteMoreMember,h=e.notFoundTips,m=this.state,f=m.list,g=m.pool,v=m.isPoolLoading,b=m.searchTerm,y=m.isSearchLoading,k=m.searchResults,_=p?{onClickSelected:this.onSelect,onClickRecommend:this.onSelect,onClickSearched:this.onSelect}:{},w=r.a({},this.dispatchProps,_,{disabled:t,nested:n,defaultOpened:s,query:b,isSearchLoading:y,isRecommendLoading:v,selected:f,recommend:g,searched:k,onOpen:this.onOpen,onHide:this.onHide,mode:c.c.Single,inviteShowed:l,reactToHover:u,notFoundTips:h,selectedTitle:this.props.selectedTitle||i.get("executor"),inviteMoreMember:d});return a?o.createElement(c.b,r.a({},w)):o.createElement(c.a,r.a({},w),this.props.children)},t.defaultProps={objectType:"task"},t}(o.Component)},kwic24gT:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=function(){function e(e,t,n,r){this.batch=e,this.count=t,this.sizeGetter=n,this.estimatedSize=r,this.lastMeasuredIndex=-1,this.cache={}}return e.prototype.configure=function(e,t,n){this.count=e,this.estimatedSize=t,e<=this.lastMeasuredIndex&&(this.lastMeasuredIndex=Math.max(0,e-1)),"function"==typeof n&&(this.sizeGetter=n)},e.prototype.getSizeAndPosition=function(e){if(e<0||e>=this.count)throw Error("Unreachable Index");if(e>this.lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasured(),n=t.offset+t.size,r=this.lastMeasuredIndex+1;r<=e;r++){var o=this.sizeGetter(r);if(void 0===o)throw Error("Invalid size");null===o?this.cache[r]={offset:n,size:0}:(this.cache[r]={offset:n,size:o},n+=o,this.lastMeasuredIndex=e)}return this.cache[e]},e.prototype.getSizeAndPositionOfLastMeasured=function(){return this.lastMeasuredIndex>=0?this.cache[this.lastMeasuredIndex]:{offset:0,size:0}},e.prototype.getTotalSize=function(){var e=this.getSizeAndPositionOfLastMeasured();return e.offset+e.size+(this.count-this.lastMeasuredIndex-1)*this.estimatedSize},e.prototype.getUpdatedOffsetForIndex=function(e,t,n){if(e<0)return 0;var r=this.getSizeAndPosition(n),o=r.offset,i=o-e+r.size,s=Math.max(i,Math.min(o,t)),a=this.getTotalSize();return Math.max(0,Math.min(a-e,s))},e.prototype.getVisibleCellRange=function(e,t){if(this.batch)return{start:0,stop:this.count-1};if(0===this.getTotalSize())return{start:0,stop:-1};var n=t+e,r=this.getNearestCell(t),o=this.getSizeAndPosition(r);t=o.offset+o.size;for(var i=r;t<n&&i<this.count-1;)i++,t+=this.getSizeAndPosition(i).size;return{start:r,stop:i}},e.prototype.reset=function(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)},e.prototype.getNearestCell=function(e){if(isNaN(e))throw Error("Invalid index");var t=Math.max(0,e),n=this.getSizeAndPositionOfLastMeasured(),r=Math.max(0,this.lastMeasuredIndex);return n.offset>=t?this.binarySearch(r,0,t):this.exponentialSearch(r,t)},e.prototype.binarySearch=function(e,t,n){for(;t<e;){var r=t+Math.floor((e-t)/2),o=this.getSizeAndPosition(r).offset;if(o===n)return r;o<n?t=r+1:o>n&&(e=r-1)}return t>0?t-1:0},e.prototype.exponentialSearch=function(e,t){for(var n=1;e<this.count&&this.getSizeAndPosition(e).offset<t;)e+=n,n*=2;return this.binarySearch(Math.min(e,this.count-1),Math.floor(e/2),t)},e}(),i=n("x0w+nCUa"),s=function(e){function t(t,n,r,o,s){void 0===s&&(s=i.c.MaxSize);var a=e.call(this,t,n,r,o)||this;return a.maxSize=s,a}return r.d(t,e),t.prototype.areOffsetsAdjusted=function(){return e.prototype.getTotalSize.call(this)>this.maxSize},t.prototype.getOffsetAdjustment=function(t,n){var r=e.prototype.getTotalSize.call(this),o=this.getTotalSize()-r;if(0===o)return 0;var i=this.getOffsetPercentage(t,n,r);return Math.round(i*o)},t.prototype.getTotalSize=function(){return Math.min(this.maxSize,e.prototype.getTotalSize.call(this))},t.prototype.getVisibleCellRange=function(t,n){return n=this.getOffsetToOffset(t,n),e.prototype.getVisibleCellRange.call(this,t,n)},t.prototype.getUpdatedOffsetForIndex=function(t,n,r){n=this.getOffsetToOffset(t,n);var o=e.prototype.getUpdatedOffsetForIndex.call(this,t,n,r);return this.getOffsetToSafeOffset(t,o)},t.prototype.getOffsetPercentage=function(e,t,n){return n<=e?0:t/(n-e)},t.prototype.getOffsetToOffset=function(t,n){var r=e.prototype.getTotalSize.call(this),o=this.getTotalSize();if(r===o)return n;var i=this.getOffsetPercentage(t,n,o);return Math.round(i*(r-t))},t.prototype.getOffsetToSafeOffset=function(t,n){var r=e.prototype.getTotalSize.call(this),o=this.getTotalSize();if(r===o)return n;var i=this.getOffsetPercentage(t,n,r);return Math.round(i*(o-t))},t}(o),a=function(){function e(){}return e.calc=function(e,t,n,r,o,i,s,a,c){e===o&&"number"!=typeof t&&"number"!=typeof i&&t===i||(n(r),a>=0&&a===s&&c())},e.tryUpdateScrollIndex=function(e,t,n,r,o,i,s,a,c,l,u){var p=e.count,d=s>=0&&s<p;return d&&(a!==o||c||l||!n||s!==r)?(u(s),!0):!d&&p>0&&(a<o||p<t)&&i>e.getTotalSize()-a&&(u(p-1),!0)},e}(),c=window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,l=function(e){var t=r.f([0,0,0,0],4),n=t[0],o=t[1],i=t[2],s=t[3];return"detail"in e&&(o=e.detail),"wheelDelta"in e&&(o=-e.wheelDelta/120),"wheelDeltaY"in e&&(o=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(n=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(n=o,o=0),i=10*n,s=10*o,"deltaY"in e&&(s=e.deltaY),"deltaX"in e&&(i=e.deltaX),(i||s)&&e.deltaMode&&(1===e.deltaMode?(i*=40,s*=40):(i*=800,s*=800)),i&&!n&&(n=i<1?-1:1),s&&!o&&(o=s<1?-1:1),{spinX:n,spinY:o,pixelX:i,pixelY:s}},u=function(){return!0},p=function(){return!1},d=function(){function e(e,t,n,o,i){var s=this;this.deltaX=0,this.deltaY=0,this.didWheel=function(){s.callback(s.deltaX,s.deltaY),s.deltaX=0,s.deltaY=0},this.onWheel=function(e){var t=l(e),n=r.f([s.deltaX+t.pixelX,s.deltaY+t.pixelY],2),o=n[0],i=n[1],a=s.handleScrollX(o,i),u=s.handleScrollY(i,o);s.allowNativeScroll&&(s.allowNativeScroll.Y&&!o||s.allowNativeScroll.X&&!i)||(e.preventDefault(),e.nativeEvent&&e.nativeEvent.preventDefault(),(a||u)&&(s.deltaX+=a?t.pixelX:0,s.deltaY+=u?t.pixelY:0,0===s.deltaX&&0===s.deltaY||(s.stopPropagation()&&e.stopPropagation(),c?requestAnimationFrame(function(){return s.didWheel()}):s.didWheel())))},"function"!=typeof t&&(t=t?u:p),"function"!=typeof n&&(n=n?u:p),"function"!=typeof o&&(o=o?u:p),this.handleScrollX=t,this.handleScrollY=n,this.stopPropagation=o,this.callback=e,this.allowNativeScroll=i}return e.prototype.configure=function(e){this.callback=e},e}(),h=function(e,t,n){return n.addEventListener(e,t),{off:function(){return n.removeEventListener(e,t)}}},m=function(){function e(e,t,n){var r=this;this.onMoveCallback=e,this.onMoveEndCallback=t,this.el=n,this.isDragging=!1,this.rafId=null,this.evtMoveToken=null,this.evtUpToken=null,this.onMouseMove=function(e){var t=e.clientX,n=e.clientY;r.deltaX+=t-r.x,r.deltaY+=n-r.y,null===r.rafId&&(r.rafId=window.requestAnimationFrame(r.didMouseMove)),r.x=t,r.y=n,r.moveEvt=e,e.preventDefault()},this.onMouseUp=function(){r.rafId&&r.didMouseMove(),r.onMoveEndCallback()},this.didMouseMove=function(){r.rafId=null,r.onMoveCallback(r.deltaX,r.deltaY,r.moveEvt),r.deltaX=r.deltaY=0}}return e.prototype.captureMouseMove=function(e){this.evtMoveToken||this.evtUpToken||(this.evtMoveToken=h("mousemove",this.onMouseMove,this.el),this.evtUpToken=h("mouseup",this.onMouseUp,this.el)),this.isDragging||(this.isDragging=!0,this.deltaX=this.deltaY=0,this.x=e.clientX,this.y=e.clientY),e.preventDefault()},e.prototype.releaseMouseMoves=function(){this.evtMoveToken&&this.evtUpToken&&(this.evtMoveToken.off(),this.evtMoveToken=null,this.evtUpToken.off(),this.evtUpToken=null),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=null),this.isDragging&&(this.isDragging=!1,this.x=this.y=null)},e}();n.d(t,"a",function(){return s}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return d}),n.d(t,"b",function(){return m})},kxBV4ly7:function(e,t,n){"use strict";n.r(t),n.d(t,"assembleData",function(){return s});var r=n("a+N5u/Cl");function o(e){return{title:e,works:[],collections:[]}}function i(e,t){var n=t.dirname.split("/"),i=e;n.forEach(function(e){var t=r.findIndex(i.collections,function(t){return t.title===e});-1===t&&(t=i.collections.push(o(e))-1),i=i.collections[t]}),i.works=t.works}function s(e){if(!e||!e.length)return[];for(var t=o(""),n=function(e){return r.chain(e).groupBy(function(e){return e.filePath.split("/").slice(0,-1).join("/")}).map(function(e,t){return{dirname:t,works:r.map(e,function(e){return r.omit(e,"filePath")})}}).value()}(e),s=0;s<n.length;s++)i(t,n[s]);return t.collections}},kxdxzisr:function(e,t,n){e.exports={lifted:"lifted__1QbQ"}},kzOoOGf8:function(e,t,n){e.exports={prefix:"prefix__MufM"}},kzkYb0WA:function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("qHH6+g6Q"),o=n("8N+zwa3A"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="chatMessage",t.prototype.defaults={objectType:"ChatMessage",_boundToObjectId:"",boundToObjectType:"",_creatorId:"",created:"",updated:"",content:"",attachments:[]},t.prototype.urlRoot=function(){return"direct_messages/"+this.chatType+"/"+this.roomId+"/messages"},t.prototype.getAttachmentDatas=function(){var e,t,n,r,i,s;for(r=[],t=0,n=(e=(null!=(i=this.get("content"))?i.attachments:void 0)||[]).length;t<n;t++)s=e[t],r.push(o.formatWork(s));return r},t}()},"l/J3RzyO":function(e,t,n){e.exports={switchers:"switchers__249A","switcher-handler":"switcher-handler__3iMc"}},l1usYcM2:function(e,t,n){e.exports={root:"root__2AN3",isError:"isError__WR4P",inputContent:"inputContent__3v7x",resetValueButton:"resetValueButton__1-Mf",outerContent:"outerContent__1jx_",triggerContent:"triggerContent__QhmD",triggerText:"triggerText__bbk-",inputAreaCode:"inputAreaCode__3Qsp",inputPhone:"inputPhone__1uG3",popupContent:"popupContent__1yzy",optionList:"optionList__JlsX",optionTrigger:"optionTrigger__zftq",optionTriggerText:"optionTriggerText__2Jw6",countryFlagRoot:"countryFlagRoot__msPk",countryFlag:"countryFlag__u_D-",zh:"zh__2My1",hk:"hk__2BVr",tw:"tw__1Qjp",jp:"jp__2lBV",us:"us__36Sd",other:"other__lAOL"}},l2VkC5TB:function(e,t,n){e.exports={root:"root__13wo"}},l7bwUp3k:function(e,t,n){e.exports={"tag-search":"tag-search__1WuW","tag-input":"tag-input__30UW","organization-tag-title":"organization-tag-title__2lwF","tag-category-title":"tag-category-title__32D-","tag-search-placeholder":"tag-search-placeholder__3tbb"}},l8L1crJR:function(e,t,n){"use strict";n.r(t),n.d(t,"TesthubAppView",function(){return r});var r=n("FjS+RJ4A")},lAykE7PB:function(e,t,n){var r,o,i,s,a,c,l;a=n("a+N5u/Cl"),s=n("3eMzznN/"),o=$(document),r=$("body"),i=function(e){return"<div class='arrow'></div>\n<p class='message'>"+a.escape(e)+"</p>"},l=function(e,t){var n,i;return i=s.interval(function(){var n;return(n=!$.contains(r.get(0),t.get(0)))&&e(),n},800),n=function(){return e(),i()},t.one("mouseleave click",n).on("mousedown.hint",function(){return o.one("mousemove.hint",n)}).on("mouseup.hint",function(){return o.off("mousemove.hint")}).on("remove.hint",n)},c=function(){var e,t;return this.$el=$('<div class="hint"></div>'),t=this,e=function(e){var n,s,a;(s=+(n=$(e.currentTarget)).attr("data-hinted-delay"))>=0||(s=370),a=setTimeout(function(){var s,a,c,u,p,d,h,m,f,g,v,b,y,k;if(null!=n&&n.off(".hint"),(y=n.outerWidth())>(v=n.parent().outerWidth())&&(y=v),m=n.attr("data-hinted-width"),h=n.attr("data-hinted-anchor"),s=(a=$(h)).size()>0?a:n,b={$el:s,message:n.attr("data-title"),offset:{top:s.offset().top,left:s.offset().left},size:{height:s.outerHeight(),width:m||y}},(!n.hasClass("hint-content")||n.get(0).scrollWidth>n.width())&&(!n.hasClass("auto-hint")||n.width()>n.parent().width())){if(b.message||(b.message=n.text()),t.$el.html(i(b.message)),r.append(t.$el),g={height:t.$el.outerHeight(),width:t.$el.outerWidth()},k={width:window.innerWidth,height:window.innerHeight},document.documentElement.scrollTop||window.pageYOffset,d=function(){return g.top=b.offset.top+b.size.height+12,g.left=b.offset.left+.5*b.size.width-.5*g.width,g.arrowPosition="top"},c=function(){return g.top=b.offset.top-g.height-12,g.left=b.offset.left+.5*b.size.width-.5*g.width,g.arrowPosition="bottom"},u=function(){return g.top=b.offset.top+.5*b.size.height-.5*g.height,g.left=b.offset.left+b.size.width+12,g.arrowPosition="left"},p=function(){return g.top=b.offset.top+.5*b.size.height-.5*g.height,g.left=b.offset.left-g.width-12,g.arrowPosition="right"},!(f=$(e.currentTarget).attr("data-direction"))||"left"!==f&&"right"!==f&&"bottom"!==f&&"top"!==f)c(),g.left+g.width>k.width&&b.offset.left-g.width-10>0?p():g.top<0?b.offset.left+b.size.width+g.width+10<k.width?u():d():g.left<0&&u();else switch(f){case"left":u();break;case"right":p();break;case"top":d();break;case"bottom":c()}t.$el.css({top:g.top+"px",left:g.left+"px"}),t.$el.children(".arrow").prop("class","arrow "+g.arrowPosition),t.$el.addClass("on"),l(function(){var e;return t.$el.css({top:"50%",left:"50%"}).removeClass("on").remove(),null!=(e=b.$el)&&e.off(".hint"),o.off(".hint")},n)}},s),l(function(){return clearTimeout(a),null!=n?n.off(".hint"):void 0},n)},o.on("mouseenter",".hinted",e)},e.exports={initialize:c}},lDS2Mlkz:function(e,t){},lDq4bgXP:function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;c=n("a+N5u/Cl"),a=n("vmWJWrVe"),s=n("YdqH4v7N"),o=n("yXKnvBS7"),i=n("9MfEVcnq"),n("hzH29J8E"),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="EvernotePickerView",t.prototype.className="evernote-picker-view flex-space thin-scroll",t.prototype.tagName="ul",t.prototype.initialize=function(e){var t;return this.bookId=e.bookId,this.type=e.type,t=e.token,this.cache=e.cache,this.evernote=new o({token:t,type:this.type,bookId:this.bookId}),this.setupScroll(this.$el),this.load()},t.prototype.load=function(){return this.showLoadingIndicator(this.$el),this.evernote.getNotes({success:(e=this,function(t){var n;return(n=e.parseDataEvernote(t.notes)).length?e.renderItems(n):e.trigger("empty",e.bookId)}),error:function(e){return function(){return e.trigger("error",e.bookId)}}(this)});var e},t.prototype.renderItems=function(e){return this.hideLoadingIndicator(this.$el),this.cache[this.type][this.bookId]=(this.cache[this.type][this.bookId]||[]).concat(e),this.$el.append(i(e))},t.prototype.loadMore=function(e){return this.showLoadingIndicator(this.$el),this.evernote.getNotes({success:(t=this,function(n){var r;if(r=t.parseDataEvernote(n.notes),t.renderItems(r),t.evernote.noteHasMore)return"function"==typeof e?e():void 0}),error:function(e){return function(){return e.trigger("error",e.bookId)}}(this)});var t},t.prototype.parseDataEvernote=function(e){return c.chain(e).sortBy("updated").map(function(e){return{_id:""+e.guid,data:e}}).value().reverse()},t.prototype.remove=function(){var e;return null!=(e=this.cache)&&(e[this.type][this.bookId]=[]),t.__super__.remove.apply(this,arguments)},t}(),c.extend(r.prototype,s),e.exports=r},lDvyWifu:function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty;c=n("a+N5u/Cl"),s=n("3eMzznN/"),a=n("vmWJWrVe"),l=n("tLZJUYWX"),r=n("cHtiPwnq"),o=["pullRequest","issue","commit","branch"],i={pullRequest:function(){return l.get("link.github.pull.requests.title")},issue:function(){return l.get("link.github.pull.issues.title")},commit:function(){return l.get("link.github.pull.commits.title")},branch:function(){return l.get("link.github.pull.branches.title")}},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="GitHubLinkView",t.prototype.className="detail-infos-github-link",t.prototype.tagName="ul",t.prototype.initialize=function(e){return this.items=e.data,this.hasHeader=e.hasHeader,this.render()},t.prototype.render=function(){var e,t,n,a,l,u;for(e=c.chain(this.items).map(function(e){var t,n,r,o;return c.extend({},e,{time:s.formatDate(null!=(t=e.data)?t.updated_at:void 0),commitTime:s.formatDate(null!=(n=e.data)&&null!=(r=n.commit)&&null!=(o=r.committer)?o.date:void 0)})}).groupBy(function(e){return e.data.type}).value(),l=[],t=0,a=o.length;t<a;t++)(null!=(n=e[u=o[t]])?n.length:void 0)&&l.push(this.$el.append(r({items:n,hasHeader:this.hasHeader,title:("function"==typeof i[u]?i[u]():void 0)||""})));return l},t}()},"lFG5vd3/":function(e,t,n){e.exports=n.p+"images/o_yinyue@2x.5d746b3e.png"},lFehy1tv:function(e,t){},lFkNNyTc:function(e,t,n){e.exports={"tag-popup-menu":"tag-popup-menu__ciVD"}},lGc0ZNfx:function(e,t,n){e.exports=function(e){var t="",r=n("ytDAhr3u").ColorNames;t+='<input class="add-input form-control" placeholder="'+tb_i18n.get("tag.creator.placeholder")+'"/><ul class="clearfix"> ';var o=r;if(o)for(var i,s=-1,a=o.length-1;s<a;)t+=' <li class="tag-label tag-label-'+(i=o[s+=1])+'" data-color="'+i+'"> <span class="icon icon-tick icon-white"></span> </li> ';return t+="</ul><button class=\"btn btn-primary submit-handler disabled\" data-gta=\"{action: 'added content', type: 'tag', control: 'New Tag'}\"> "+tb_i18n.get("create")+"</button>"}},lKlBpm6f:function(e,t,n){var r,o,i,s={}.hasOwnProperty,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};i=n("a+N5u/Cl"),o=n("VuB9cZyl"),r=n("ZzdZwz82"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.name="applications",t.prototype.url="/applications",t.prototype.model=r,t.isAvailableToFreePlan=function(e){return 0===e||1===e},t.isAvailableToOrgStandardPlan=function(e){return 0===e||1===e||2===e||3===e},t.isAvailableToOrgProPlan=function(e){return 0===e||1===e||2===e||3===e||4===e||5===e},t.isAvailableToPlan=function(e,t){return!(!e&&0!==e)&&(!t||t.isUser?this.isAvailableToFreePlan(e):t.isBasicOrganizationVersion?this.isAvailableToOrgStandardPlan(e):!!t.isProfessional&&this.isAvailableToOrgProPlan(e))},t.prototype.getCommonApps=function(){return this._filterAppsByType(0)},t.prototype.getNavApps=function(){return this._filterAppsByType([1,3,5])},t.prototype.getPremiumApps=function(){return this._filterAppsByType(2)},t.prototype.getOnlineApps=function(){return this.filter(function(e){return"online"===e.get("status")})},t.prototype.getOnlineAppNames=function(){return i.map(this.getOnlineApps(),function(e){return e.get("name")})},t.prototype.getPlugins=function(){return this._filterAppsByType([0,2,4])},t.prototype.findByName=function(e){return this.findWhere({name:e})},t.prototype.checkIsAppOnline=function(e){var t;return"online"===(null!=(t=this.findByName(e))?t.get("status"):void 0)},t.prototype.checkIsPremiumApp=function(e){var t,n;return 2===(t=null!=(n=this.findByName(e))?n.get("type"):void 0)||3===t||4===t||5===t},t.prototype._filterAppsByType=function(e){return e instanceof Array||(e=[e]),i.filter(this.getOnlineApps(),function(t){var n;return n=t.get("type"),a.call(e,n)>=0})},t}()},"lMSfz3/p":function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("GESwhXbR").Toast,r=n("lGc0ZNfx"),o=n("hGNqppva"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="TagCreatorView",t.prototype.className="tag-creator-view",t.prototype.popoverTitle="",t.prototype.events={"input input":"checkSubmit","click .tag-label":"changeLabel","click .submit-handler":"submit"},t.prototype.initialize=function(){return this.popoverTitle=tb_i18n.get("tag.creator.title"),t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return this.$el.html(r()),this.color&&this.$("[data-color='"+this.color+"']").addClass("active"),this.$input=this.$("input"),this.$submitHandler=this.$(".submit-handler"),this},t.prototype.checkSubmit=function(){var e;return e=this.$input.val().trim()?"removeClass":"addClass",this.$submitHandler[e]("disabled")},t.prototype.changeLabel=function(e){var t;return(t=$(e.currentTarget)).addClass("active").siblings().removeClass("active"),this.color=t.data("color"),this},t.prototype.submit=function(e){var t,n;if(!this.$submitHandler.hasClass("disabled")&&(t=this.$input.val().trim()))return this.options.checkNameExist(t)?i.warning({message:tb_i18n.get("tag.creator.warning.name.exit")}):(this.$submitHandler.addClass("disabled"),this.options.tagsCollection.create({_projectId:this.options._projectId,name:t,color:this.color},{wait:!0,success:(n=this,function(){return n.$input.val(""),n.remove()}),error:function(e){return function(){return e.$submitHandler.removeClass("disabled")}}(this)}),this)},t}()},"lNIxow/2":function(e,t,n){},lc2tFaYE:function(e,t,n){var r,o,i,s={}.hasOwnProperty;o=n("2qRnoGmE"),i=n("sa1Ed382"),r=n("KPjvlCmh"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.name=this.name+"/"+i.user.id},t.prototype.url=function(){return o.HOST+"/appstore/api/me/installedFeatures"},t}()},lcbRHKA0:function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty;c=n("77NnVLwu"),i=n("tX+U/U8q"),o=n("rZfPP7pq"),s=n("T4OuoonG").ProjectMessagePanelComponent,r=n("hHjO/rhR").GroupChatMessagePanelComponent,l=n("5lGttqQN").closeGroupChat,a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="ProjectMessagePanelView",t.prototype.className="message-panel-view project-message-panel-view card",t.prototype.events={"click .switch-mute":"toggleMessageMute"},t.prototype.initialize=function(e){var t;return this.modelId=e.modelId,this.roomId=e.roomId,this.messageModel=e.messageModel,this.from=e.from,this.channelType="projects",this.onClickGotoProject=e.onClickGotoProject,this.removeChatModal=e.removeChatModal,this.subscribe(c.fetch$(this.modelId).do((t=this,function(e){return t.projectModel=e,t.renderBasic()}))),this},t.prototype.renderBasic=function(){var e,t,n,o,i;return this.initView({type:this.channelType,roomId:this.modelId}),o=this.from?r:s,this.requestReactView(this.el,o,{type:this.channelType,roomId:this.modelId,isPseudo:null!=(e=this.messageModel)?e.get("isPseudo"):void 0,renderMessageCreator:this.renderProjectMessageCreator.bind(this),projectModel:{getRoleScope:this.projectModel.getRoleScope.bind(this.projectModel),id:this.projectModel.id,isAppEnabled:this.projectModel.isAppEnabled.bind(this.projectModel),isArchived:(i=this,function(){return i.projectModel.get("isArchived")})},openSharingDetail:this.openSharingDetail.bind(this),enterPreviewer:this.enterPreviewer.bind(this),downloadAttachments:this.downloadAttachments.bind(this),showMemberDetail:this.showMemberDetail.bind(this),voiceInit:this.voiceInit.bind(this),voiceCtrl:this.voiceCtrl.bind(this),onClickGotoProject:null!=(t=this.onClickGotoProject)?t.bind(this):void 0,removeChatModal:null!=(n=this.removeChatModal)?n.bind(this):void 0},{redux:!0}),this},t.prototype.renderProjectMessageCreator=function(e,t){return this.projectMessageCreatorView=this.requestSubView(i,{roomId:e,projectModel:t,isOpen:!t.isArchived()&&t.isAppEnabled("groupchat")}),this.$(".chat-room-creator-wrapper").html(this.projectMessageCreatorView.$el),this.projectMessageCreatorView},t.prototype.close=function(e){return this.remove(),this},t.prototype.remove=function(){return this.destroyView({type:this.channelType,roomId:this.modelId}),this.from&&l(),t.__super__.remove.apply(this,arguments)},t}(),e.exports=a},lcbqmfsD:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("a+N5u/Cl"),a=n("s0r7VfKc"),c=n("GESwhXbR"),l=n("eUOXB7It"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getOrganizationMembers=function(){return a.default.fetch.expandPage(t.membersPageState,{mutate:!0})},t.getOriginMembers=function(){return a.default.fetch.expandPage(t.groupMembersPageState,{mutate:!0}).map(function(e){return e.result})},t.searchOrganizationMembers=function(e){return a.default.searchMembers(t.props.organizationId,{q:e})},t.onAddMember=function(e){t.props.onSubmit(s.pluck(e,"email"))},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.membersPageState=a.default.getMembersInPages("organization",this.props.organizationId),this.groupMembersPageState=a.default.getMembersInPages("group",this.props.groupId)},t.prototype.componentDidUpdate=function(e){(e.opened!==this.props.opened&&!this.props.opened||e.groupId!==this.props.groupId||e.organizationId!==this.props.organizationId)&&(this.membersPageState=a.default.getMembersInPages("organization",this.props.organizationId),this.groupMembersPageState=a.default.getMembersInPages("group",this.props.groupId))},t.prototype.renderContent=function(){var e=this.props,t=e.opened,n=e.organizationName;return t&&o.createElement(l.MemberInvite,{getMembers:this.getOrganizationMembers,getOriginMembers:this.getOriginMembers,searchMembers:this.searchOrganizationMembers,memberLabel:n?i.get("group.add.member.organization.member",n):void 0,onSubmit:this.onAddMember})},t.prototype.render=function(){var e=this.props,t=e.opened,n=e.onVisibleChange;return o.createElement(c.Modal,{opened:t,onVisibleChange:n,width:360,style:{top:60},titleCls:"group-addmember-modal-title",className:"group-addmember-modal",title:i.get("group.add.member.modal.title")},this.renderContent())},t}(o.PureComponent);n.d(t,"GroupAddMember",function(){return u}),n("5Jy5DHf5")},le3nzbr1:function(e,t,n){e.exports=n.p+"images/web_onboarding_report.a9d33e54.png"},ljKqFuR1:function(e,t,n){e.exports={"task-item":"task-item__3U5C","task-item-main":"task-item-main__HYER","task-item-desc":"task-item-desc__28c4","task-info":"task-info__2iqz","project-info":"project-info__2IrJ","parent-task":"parent-task__2T8j","taskid-badge":"taskid-badge__5S1Y"}},llwZnbxj:function(e,t,n){var r,o,i,s,a,c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};r=n("VuB9cZyl"),o=n("1fU+e3+7"),s=n("bZr3G77e"),a=n("wd/RKGTj"),i=n("IssmDVnT").EventSDK,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="events",t.prototype.model=o,t.prototype.boundToObjectType="project",t.prototype.initialize=function(e,n){return null==n&&(n={}),this.fromDate=n.fromDate||a().startOf("day").toISOString(),n.toDate&&(this.toDate=n.toDate),t.__super__.initialize.apply(this,arguments)},t.prototype.parse=function(e,t){var n,r,o,s;if(!e)return e;for(o=0,s=(n=Array.isArray(e)?e:[e]).length;o<s;o++)r=n[o],r=i.marshaler.parse(r);return e},t.prototype.listen=function(){if(!this.listened)return t.__super__.listen.apply(this,arguments),this.on("change:_projectId",function(e,n){var r;return null!=(r=t.find(n))&&r.add(e),this.remove(e)})},t.prototype.comparator=function(e,t){var n,r;return(r=new Date(e.get("startDate"))-new Date(t.get("startDate")))?r:(n=new Date(e.get("endDate"))-new Date(t.get("endDate")))?n:new Date(e.get("created"))-new Date(t.get("created"))},t.prototype.getParams=function(e,t){if("read"===e)return{boundToObjectType:t.boundToObjectType||this.boundToObjectType,_boundToObjectId:this._boundToObjectId}},t.prototype.checkScopes=function(e){return this.each((t=this,function(n){var r;if(r=n.getScope(),l.call(e,r)<0)return t.remove(n)}));var t},t.prototype.sync=function(e,n,r){var o;return null==r&&(r={}),o={"x-timezone":s.timezone()},r.headers=Object.assign(o,r.headers),t.__super__.sync.call(this,e,n,r)},t}()},ln9RsXX9:function(e,t,n){"use strict";n.r(t),n.d(t,"Version",function(){return u}),n.d(t,"paywallUrl",function(){return p}),n.d(t,"getOrgProTrialSuccess",function(){return d});var r=n("q1tIBJhx"),o=n.n(r),i=n("tLZJUYWX"),s=n.n(i),a=n("GESwhXbR"),c=n("RQ44psah"),l=n("RLD3BeS/"),u={isNotExpired:function(e){return e.ofOrganization()?!e.isExpired:e.ofUser()?e.isProfessional&&!e.isExpired:!e.isExpired},isFree:function(e){return e.ofUser()&&e.isFree},isProfessional:function(e){return e.ofUser()&&e.isProfessional&&!e.isExpired},isEnterprise:function(e){return e.ofOrganization()&&!e.isExpired},isEnterprisePro:function(e){return e.ofOrganization()&&!e.isExpired&&e.isProfessional},isEnterpriseBasic:function(e){return e.ofOrganization()&&!e.isExpired&&e.isBasicOrganizationVersion}},p=function(e,t,n,r){return r=void 0===r?"":"/"+r,n?"pay-"+e+"://"+t+"/"+n+r:"pay-"+e+"://"+t+r},d=function(e){var t=s.a.get("organization.trail.pro.getStarted.success",e.name,e.payment.countdown),n="<a>"+s.a.get("organization.trail.pro.getStarted.success.more")+"</a>";a.Toast.success({message:t,description:o.a.createElement(l.RawHTMLWithAnchorFormatter,{html:n,onClick:function(){return window.open(c.help.upgradeToPro)}})})}},"ltsvG1+o":function(e,t,n){e.exports={"task-progress":"task-progress__3E6d"}},lu4Xb2Hy:function(e,t){e.exports=function(e){return"<h3>"+tb_i18n.get("task")+' ・ <span class="tasks-count">0</span></h3>'}},lzAmRYta:function(e,t){e.exports=function(e){return'<div class="guide-wrap"> <img src="'+e.guideImageUrl+'" class="guide-image"> <p class="guide-desc"> '+tb_i18n.get("onboarding.link.guide.slide.desc")+" </p></div>"}},"lzhnO+R2":function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;s=n("a+N5u/Cl"),o=n("3eMzznN/"),i=n("vmWJWrVe"),r=n("C04qO9Zz"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="WeiboLinkView",t.prototype.className="detail-infos-weibo-link",t.prototype.tagName="ul",t.prototype.initialize=function(e){return this.items=s.clone(e.data),s.map(this.items,function(e){var t,n;if((null!=(t=e.data.pic_urls)?t.length:void 0)>1&&s.map(e.data.pic_urls,function(e){return e.thumbnail_pic=e.thumbnail_pic.replace("/thumbnail/","/square/")}),e.data.retweeted_status&&(null!=(n=e.data.retweeted_status.pic_urls)?n.length:void 0)>1&&s.map(e.data.retweeted_status.pic_urls,function(e){return e.thumbnail_pic=e.thumbnail_pic.replace("/thumbnail/","/square/")}),e.data.retweeted_status&&(e.retweetCreateTime=o.formatDate(e.data.retweeted_status.created_at.replace("+","GMT+"))),e.data.created_at)return e.createTime=o.formatDate(e.data.created_at.replace("+","GMT+"))}),this.$el.html(r({title:e.title,hasHeader:e.hasHeader,items:this.items}))},t}()},m0ECVB5f:function(e,t,n){e.exports=function(e){var t="",r=n("KfDuJ4Zw");t+='<div class="title"> <span class="title-this-page">'+tb_i18n.get("onboarding.page.video.help.title")+"</span> ",e.right_corner_link&&(t+=' <a class="title-details-link" href="'+e.right_corner_link.href+'" target="_blank">'+e.right_corner_link.text+"</a> "),t+='</div><div class="video-list"> ';var o=e.videos;if(o)for(var i,s=-1,a=o.length-1;s<a;)t+=' <div class="video-item',(i=o[s+=1]).visited&&(t+=" visited"),t+='" data-url="'+i.url+'" data-gta-category="'+i.category+'"> <div class="item-cover-container"> <div class="item-cover" style="background-image: url('+i.cover+');"></div> <img class="item-play-icon" src="'+r+'"></img> </div> <div class="item-info"> <p class="video-title">'+i.title+'</p> <p class="video-length">'+i.time+"</p> </div> </div> ";return t+="</div>"}},m20r5o9x:function(e,t,n){"use strict";var r=n("q1tIBJhx"),o=n.n(r),i=n("tLZJUYWX"),s=n.n(i),a=n("GESwhXbR"),c=n("XHxZqXzL"),l=function(e){return e.putArchivePermission?o.a.createElement(c.a,{className:e.className,onClick:e.onRestore},o.a.createElement(a.Icon,{name:"putback"}),o.a.createElement("span",null,s.a.get("archive.list.menu.restore"))):null};n.d(t,"a",function(){return l})},"m42AS+xK":function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;c=n("sa1Ed382"),r=n("fbEqbFyH"),o=n("Atd/KrMo"),i=n("85182E8g"),a=n("OmupbwLD"),s=n("+j2D3LI+"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="OrgInviteView",t.prototype.className="obd-org-invite",t.prototype.initialize=function(e){var t;return this.options=e,this.requestReactView(this.el,r.OnboardingOrgInviteComponent,{openQRcode:this.openQRcode.bind(this),onClose:(t=this,function(){return t.remove()})}),this},t.prototype.openQRcode=function(e,t){var n;return(n=i.get(0).get(e)).payment,n.getRoleScope(),c.gta.event({action:"add member",type:"organization",category:"link invitation",control:"Onboarding"}),this.requestSubView(a).open(s,{membersCount:t,type:"organization",model:n})},t.prototype.close=function(){var e;return null!=(e=this.parentView)&&e.close(),this},t}()},m5JTG8yK:function(e,t,n){e.exports=n.p+"images/f_xi@2x.0a8c928e.png"},mC3nfpWm:function(e,t,n){"use strict";n.r(t),n.d(t,"RoomListContainer",function(){return p});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("/MKjzBat"),a=n("TSYQbtd+"),c=n.n(a),l={enterRoom:n("cl35kkSI").enterChannelRoom},u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enterTargetRoom=function(e){var n=t.props.getTargetRoom;return function(){var r=n(e);t.props.enterRoom(r)}},t}return r.d(t,e),t.prototype.handleOnClick=function(e){var t=this;return function(){t.isRoomDisabled(e)||t.enterTargetRoom(e._id)}},t.prototype.isRoomDisabled=function(e){return"project"===this.props.activeTab&&!e.isGroupChatEnabled},t.prototype.renderNoRooms=function(){var e=this.props,t=e.rooms,n=e.options;return t?null:o.createElement("div",{className:"placeholder-section"},o.createElement("div",{className:"placeholder-image"},o.createElement("img",{alt:n.title,src:n.imageUrl})),o.createElement("p",{className:"placeholder-title"},n.title),o.createElement("p",{className:"placeholder-desc"},n.desc))},t.prototype.renderPlanOverdueTip=function(){return o.createElement("div",{className:"room-rightside"},o.createElement("span",{className:"project-room-closed-tip"},i.get("chat.room.overdue.room")))},t.prototype.renderGroupItem=function(e){var t=this.props.activeTab,n=e.isPlanOverdue,r=c()("room-item","project-room",{"is-disabled":n});return o.createElement("div",{className:r,"data-id":e._id,"data-tab":t},o.createElement("div",{className:"room-leftside"},o.createElement("span",{className:"room-avatar",style:{backgroundImage:"url("+e.logo+")"}})),o.createElement("div",{className:"room-content"},o.createElement("p",{className:"room-name"},e.name)),n&&this.renderPlanOverdueTip())},t.prototype.renderPrivateItem=function(e){var t=this.props.activeTab,n=e.title||e.email?o.createElement("p",{className:"room-subname"},e.title||e.email):null;return o.createElement("div",{className:"room-item private-room","data-id":e._id,"data-tab":t},o.createElement("div",{className:"room-leftside"},o.createElement("span",{className:"room-avatar",style:{backgroundImage:"url("+e.avatarUrl+")"}})),o.createElement("div",{className:"room-content"},o.createElement("p",{className:"room-name"},e.name),n))},t.prototype.renderProjectItem=function(e){var t=this.props.activeTab,n=o.createElement("div",{className:"room-rightside"},o.createElement("span",{className:"project-room-closed-tip"},i.get("chat.room.cloesd.room"))),r=c()("room-item","project-room",{"is-disabled":!e.isGroupChatEnabled||e.isPlanOverdue});return o.createElement("div",{className:r,"data-id":e._id,"data-tab":t},o.createElement("div",{className:"room-leftside"},o.createElement("span",{className:"room-avatar",style:{backgroundImage:"url("+e.logo+")"}})),o.createElement("div",{className:"room-content"},o.createElement("p",{className:"room-name"},e.name)),!e.isGroupChatEnabled&&n,e.isPlanOverdue&&this.renderPlanOverdueTip())},t.prototype.renderRoomItem=function(e){var t,n=this.props.activeTab;return t="private"===n?this.renderPrivateItem(e):"group"===n?this.renderGroupItem(e):this.renderProjectItem(e),o.createElement("li",{className:"room-list-item",key:e._id,onClick:this.handleOnClick(e)},t)},t.prototype.renderRoomList=function(e){var t=this;if(!(e.length<=0)){var n=e.map(function(e){return t.renderRoomItem(e)});return o.createElement("ul",{className:"room-list"},n)}},t.prototype.renderRooms=function(){var e=this,t=this.props.rooms;if(t&&!(t.length<=0))return t.map(function(t,n){var i=r.f(t,2),s=i[0],a=i[1],c=s?o.createElement("h4",{className:"room-title"},s):null;return o.createElement("div",{key:n},c,e.renderRoomList(a))})},t.prototype.render=function(){return o.createElement("div",null,this.renderNoRooms(),this.renderRooms())},t}(o.PureComponent),p=Object(s.connect)(null,l)(u)},mHz0QvBA:function(e,t,n){var r,o,i,s,a,c,l,u,p,d={}.hasOwnProperty;u=n("a+N5u/Cl"),p=n("sa1Ed382"),c=n("vmWJWrVe"),l=n("OmupbwLD"),o=n("PCjZn8k4"),s=n("hy/w7Vok"),a=n("ELMSE2ES"),r=n("kMmlF21x"),i=n("NQHOq8Cg"),t.Constructor=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,c),t.prototype.viewName="TaskListView",t.prototype.className="task-list",t.prototype.tagName="ul",t.prototype.initialize=function(e){return!!e.tasksCollection&&(this.options=e,this.tasksCollection=e.tasksCollection,this.renderBasic().checkPlaceholder().listen(),this)},t.prototype.listen=function(){return this.listenTo(this.tasksCollection,"add",this.addTask),this.listenTo(this.tasksCollection,"remove reset destroy",this.checkGroupBy),this.listenTo(this.tasksCollection,"add remove reset destroy",this.checkPlaceholder),this.listenTo(this.tasksCollection,"change:isVisible",this.checkPlaceholder),this},t.prototype.getGroupedTasks=function(){return this.tasksCollection.groupBy(function(e){return e.checkIsVisible()})},t.prototype.renderBasic=function(){var e;return u.each(this.getGroupedTasks().true,(e=this,function(t){return e.renderTask(t)})),"executor"===this.options.groupBy&&this.options.membersCollection&&this.options.membersCollection.each(function(e){return function(t){return e.getOrRenderGroup(t.toJSON())}}(this)),this.options._taskId&&this.openTaskDetail(this.options._taskId),this},t.prototype.renderTask=function(e,t){var n,r,o,i,s;return i=t?"prependTo":"appendTo",n=this.requestSubView(a,{model:e,noExecutor:this.options.noExecutor,onTaskTagClick:this.options.onTaskTagClick,showTaskDetail:(s=this,function(){return s.showTaskDetail(e)})}).$el,o=null,this.options.groupBy&&(o=e.get("project"),"executor"===this.options.groupBy&&(o=e.get("executor"))),o?((r=this.getOrRenderGroup(o)).next(".member-no-task").remove(),n.insertAfterH(r)):n[i](this.$el),this},t.prototype.getOrRenderGroup=function(e){var t,n,o;for(e=u.clone(e),this.options.groupHandler&&(e.groupHandler=this.options.groupHandler),(t=this.$("[data-id="+e._id+"]")).length||(t=$(r(e))).appendTo(this.$el),n=(o=t).next();n.length&&!n.hasClass("task-group-by")&&!n.hasClass("member-no-task");)n=(o=n).next();return o},t.prototype.addTask=function(e){if(e.checkIsVisible())return this.renderTask(e,null==this.options.isPrepend||this.options.isPrepend),this},t.prototype.showTaskDetail=function(e){var t,n,r;if(e)return t=e.id,this.options.modalDetail?this.requestSubView(l).open(o,{DetailView:s,_projectId:e.get("_projectId"),_tasklistId:e.get("_tasklistId"),taskModel:e}):this.options.isInBoard&&(null!=(r=p.APP.currentView)?r.renderTaskDetail:void 0)?(n={isUsePanel:!0,hasLink:!1},p.APP.openTaskPreviewer(e,n),p.APP.currentView.updateUrl(this._tasklistId,t)):p.APP.openTaskPreviewer(e),this},t.prototype.checkGroupBy=function(e){var t,n,r;if(this.options.groupBy&&(r=e.get("project")))return(n=(t=this.$(".task-group-by[data-id="+r._id+"]")).next()).length&&!n.hasClass("task-group-by")||t.remove(),this},t.prototype.checkPlaceholder=function(){var e,t,n,r,o;return"executor"===this.options.groupBy&&this.options.membersCollection||(t=!(null!=(n=(e=this.getGroupedTasks()).true)?n.length:void 0)&&(null!=(r=e.false)?r.length:void 0),this.tasksCollection.isEmpty()||t?this.$el.html(i({invisibleCount:(null!=(o=e.false)?o.length:void 0)||0})):this.$(".placeholder").remove()),this},t}()},mIV10VeD:function(e,t,n){e.exports={popup__head:"popup__head__3dwn","modal-head":"modal-head__2ouQ",popup__body:"popup__body__3ZHV","modal-body":"modal-body__1GPO",container:"container__38kQ"}},"mPaF1WF+":function(e,t,n){e.exports=function(e){var t,r,o="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),i="",s=n("2qRnoGmE"),a=n("tgkvVaQb");e.exceedLimit?i+=' <p class="add-members-exceed-tip">'+tb_i18n.get("activity.panel.invite.exceed.limit",e.memberLimit)+"</p>":e.permissions.postMember&&(i+=' <li class="member add-members-handler" data-gta="{action: \'begin add member\', control: \'Side Member Menu\'}"> <div class="add-members"> <i class="img-icon img-icon-circle-cross-36 add-member-icon" style="background-image: url(\''+a+'\')"></i> </div> <p class="add-members-p">'+tb_i18n.get("activity.panel.invite")+"</p> </li>");var c=e.teams;if(c)for(var l,u=-1,p=c.length-1;u<p;)i+='<li class="team ',"default"==(l=c[u+=1]).type?i+="all-member":i+="team-member",i+='" data-id="'+l._id+"\" data-gta=\"{action: 'view team member', control: 'Side Member Menu'}\" data-title=\""+o(l.name)+'"> <div class="team-avatar avatar img-circle img-36 pull-left" ',"default"!=l.type&&l.styleColor&&(i+='style="border-color: '+l.styleColor+'"'),i+='> <span class="icon ',"default"!=l.type&&l.styleName?i+=""+l.styleName:i+="icon-team-tie",i+='" ',"default"!=l.type&&l.styleColor&&(i+='style="color: '+l.styleColor+'"'),i+=' ></span> </div> <div class="team-info flex-vert flex-center"> <div class="team-name item-name hinted" data-title="'+o(l.name)+'"> <span>'+o(l.name)+"</span> ",s.FEATURES.showMemberCount&&"number"==typeof l.activeMembersCount&&(i+=" ・"+l.activeMembersCount+" "),i+=" </div> ",l.belongsTo&&(i+=' <p class="team-child muted"> '+o(tb_i18n.get("team.belongsTo",l.belongsTo))+" </p> "),i+=" </div> ",e.permissions.delMember&&(i+=' <a class="item-menu-handler icon icon-chevron-down" data-id="'+l._id+'" data-toggle="team"></a> '),i+="</li>";var d=e.groups;if(d){u=-1;for(var h,m=d.length-1;u<m;)i+='<li class="group group-member" data-id="'+(h=d[u+=1])._id+"\" data-gta=\"{action: 'view group member', control: 'Side Member Menu'}\" data-title=\""+o(h.name)+'"> <div class="group-avatar avatar img-circle img-36 pull-left"> <span class="icon icon-member-group"></span> </div> <div class="group-info flex-vert flex-center"> <div class="group-name item-name hinted" data-title="'+o(h.name)+'"> <span>'+o(h.name)+"</span>・"+h.activeMembersCount+" </div> </div> ",e.permissions.delMember&&(i+=' <a class="item-menu-handler icon icon-chevron-down" data-id="'+h._id+'" data-toggle="group"></a> '),i+="</li>"}var f=e.members;if(f){u=-1;for(var g,v=f.length-1;u<v;)i+='<li class="member member-detail ',(g=f[u+=1]).isDisabled&&(i+="disabled"),i+='" data-id="'+g._id+'" data-gta="{action: \'view member info\', control: \'Side Member Menu\'}"> <div class="avatar img-circle img-36 pull-left" style="background-image: url('+g.avatarUrl+')"> ',g.hasVisited||(i+=' <span class="icon icon-leave-state never-visit"></span> '),i+=' </div> <div class="member-info"> <div class="member-name item-name"> <span>'+o(g.name)+"</span> ",g.isOrgGuest&&(i+=' <span class="member-role-icon icon color-role-org-guest hinted" data-title="'+tb_i18n.get("organization.member.outer")+'"></span> '),i+=" ",s.FEATURES.showMemberIcon&&(i+=' <span class="member-role-icon icon ',g.isDisabled?i+="disabled":i+="color-role-"+g.__role,i+=' hinted" data-title="'+o(g.isDisabled?tb_i18n.get("organization.member.disabled"):g.roleName)+'"></span> '),i+=' </div> <p class="member-email muted"> '+o(g.email)+" </p> </div> ",(g.canSetSelfOwner||g.canManageMemberRole||g.canDeleteMember&&teambition.user.id!==g._id)&&(i+=' <a class="item-menu-handler icon icon-chevron-down" data-id="'+g._id+'" data-toggle="member"></a> '),i+="</li>"}return e.hasProjectTagMember&&(i+='<li class="project-tag-member-divider"></li><li class="project-tag-member"> <div class="avatar img-circle img-36 pull-left"> <span class="icon icon-org-users"></span> </div> <div class="tag-member-info flex-vert flex-center"> <p>'+tb_i18n.get("project.panel.project.tag.member")+"</p> </div></li>"),i}},mQWTeDcC:function(e,t,n){var r,o={}.hasOwnProperty;r=n("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="scenariofieldconfig",t.prototype.urlRoot="scenariofieldconfigs",t.prototype.updateInfo=function(e,t){var n,r,o,i;return o=this.get("name")!==e,r=this.get("icon")!==t,o||r?(n={},o&&(n.name=e),r&&(n.icon=t),new Promise((i=this,function(e,t){return i.saveAttr("info",null,{attrs:n,success:e,error:t})}))):Promise.resolve()},t.prototype.updateScenariofields=function(e){return new Promise((t=this,function(n,r){return t.saveAttr("scenariofields",e,{wait:!0,success:n,error:r})}));var t},t.prototype.getIsDeletable=function(){return new Promise((e=this,function(t,n){return e.sync("read",e,{url:e.url()+"/object-count",success:function(e){return t(!e.objectCount)},error:n})}));var e},t}()},mgrpwCDb:function(e,t,n){"use strict";n.r(t),n.d(t,"parseDatas",function(){return c}),n.d(t,"parseTasks",function(){return p}),n.d(t,"fromAndToKind",function(){return d}),n.d(t,"hasConflict",function(){return h});var r=n("mrSGxOB2"),o=n("wd/RKGTj"),i=n.n(o),s=n("a+N5u/Cl"),a=n("CYJibKqy"),c=function(e){var t=[],n=[];return e.forEach(function(e){n.push(u(e.from)),n.push(u(e.to)),l(e)||t.push(Object(s.omit)(e,"from","to"))}),n=Object(s.uniq)(n,!1,function(e){return e._id}),{dependencyLines:t,tasks:n}},l=function(e){switch(e.kind){case a.a.FF:return null===e.from.dueDate||null===e.to.dueDate;case a.a.FS:return null===e.from.dueDate||null===e.to.startDate;case a.a.SF:return null===e.from.startDate||null===e.to.dueDate;case a.a.SS:return null===e.from.startDate||null===e.to.startDate;default:return!1}},u=function(e){var t="involves"!==e.visible;return Object.assign({},e,{permissions:{putStartDate:!1,putDueDate:!1},isVisible:t})},p=function(e,t){var n=[],o=[];return e.forEach(function(e){e._fromId===t?o.push(r.a({},e.to,{dependencyKind:e.kind,dependencyId:e._id})):e._toId===t&&n.push(r.a({},e.from,{dependencyKind:e.kind,dependencyId:e._id}))}),{preTasks:n,postTasks:o}},d=function(e){return e.split("_")},h=function(e){var t={finish:"dueDate",start:"startDate"},n=e.kind,o=e.from,s=e.to,a=r.f(d(n),2),c=a[0],l=a[1],u=o[t[c]],p=s[t[l]];return!!u&&!!p&&i()(u).isAfter(p)}},miDVAhhc:function(e,t){e.exports=function(e){var t='<div class="subtask-card"> <div class="detail-subitem-common-header subtask-header"></div> <div class="subtask-card-main"> <ul class="subtasks-list"></ul> ';return e.hasPermission&&(t+=' <div class="subtask-creator"> <div class="subtask-view editing"> <div class="subtask-wrap row-flex"> <header class="flex flex-center flex-vcenter"> <div class="subtask-icon-wrap flex flex-static"></div> </header> <section> <div class="subtask-content-wrap"> <div class="subtask-edit-wrap"> <textarea class="subtask-input form-control" placeHolder="'+tb_i18n.get("subtask.card.create.input.placeholder")+'" /> </div> <div class="subtask-handler-set has-task-field-config"> <div class="subtask-field-config-wrapper flex"></div> <a class="cancel-subtask-handler">'+tb_i18n.get("cancel")+'</a> <a class="save-subtask-handler btn btn-primary">'+tb_i18n.get("save")+'</a> </div> </div> </section> <footer> <div class="subtask-infos"> <div class="subtask-info subtask-duedate"> <a class="task-datepicker task-creator-datepicker"></a> </div> <div class="subtask-info subtask-info-executor flex"> <a class="avatar"></a> </div> <div class="subtask-info ban"> <a class="subtask-menu-trigger"></a> </div> </div> </footer> </div> </div> </div> '),t+=' <div class="invisible-wrapper flex"></div> <div class="creator-toggler"></div></div></div>'}},mj8jMcjo:function(e,t,n){e.exports={"table-placeholder":"table-placeholder__3jaf",image:"image__3ka7"}},mm5OMB1B:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I=function(e,t){return function(){return e.apply(t,arguments)}},M={}.hasOwnProperty;b=n("a+N5u/Cl"),T=n("sa1Ed382"),g=n("vmWJWrVe"),n("2qRnoGmE"),n("UIA+SUpX").Alert,p=n("HDJEOtNh").ProjectAccess,o=n("5tMx3C2f"),n("nL4olqOP"),a=n("odY26VIi"),m=n("//SEpMEE"),h=n("dROYn/vd"),v=n("OmupbwLD"),s=n("7UQIdnmo"),_=n("8KNpsyVU"),S=_.showVerifyBindModal,k=_.getAccountBind,u=n("yt+aIX9v").PowerUpModalComponent,w=n("zTT+LU7r"),C=w.refreshSyncStatus,y=w.customfieldNotifyStatus$,i=n("1Rycahsz"),c=n("hPD7hY+l"),f=n("z221MNj7"),l=n("R81d6RG8").PLUGIN_URL,E=n("fio7jWQ0").store,r=$(window),d=function(e){function t(){return this.linkAppStoreHandler=I(this.linkAppStoreHandler,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)M.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,g),t.prototype.viewName="ProjectNavigationView",t.prototype.tagName="nav",t.prototype.className="project-navigation sub-nav sub-navigator",t.prototype.events={"click .app:not(.plugin-handler)":"appHandler","click .app":"gtaHandler","click .nav-menu-handler":"panelHandler","click a.nav-link":"linkAppStoreHandler"},t.prototype.initialize=function(e){var t,n;if(!e.projectModel)throw new Error("initialize "+this.viewName+" must have projectModel");return this.options=b.extend({},e),this.projectModel=e.projectModel,this.membersCollection=a.fetch(this.projectModel.id),p.hasAdminAuthority(this.projectModel.id)&&(C(this.projectModel.id),this.customfieldNotify=y.subscribe((n=this,function(e){return n.customfieldNotifyStatusValue=e,n.renderMenu()}))),this.render(),this.renderGuide(),this.listen(),this.initProjectPanel(),t=b.throttle(function(e){return function(){return e.refreshNavs()}}(this),10),r.on("resize."+this.viewName,t),this.checkRefreshTimerId=this.checkRefresh(function(e){return function(){return e.refreshNavs()}}(this),100),this.powerupConfigMountNode=this.$(".power-up-config-mount-node").get(0),this},t.prototype.checkRefresh=function(e,t){return setTimeout((n=this,function(){return n.$el.parents("html").length>0&&n._pluginView?(e(),n.checkRefreshTimerId=null):n.checkRefreshTimerId=n.checkRefresh(e,t)}),t);var n},t.prototype.listen=function(){var e;return this.listenTo(this.projectModel,"change:currentPanel",function(e,t){return"activity"===t&&p.hasAdminAuthority(this.projectModel.id)&&(T.gta.event({action:"show customfield update"}),C(this.projectModel.id)),this.renderMenu}),this.listenTo(this.projectModel,"change:applications",function(){if(this.projectModel.isNavAppChanged())return this.render(),this.renderMenu(),this.refreshNavs()}),e=b.debounce(function(e){if(this.renderMenu(),this.refreshNavs(),e.id===T.user.id)return T.router.navigate("project/"+this.projectModel.id+"/tasks",{trigger:!0})},1e3),this.listenTo(this.membersCollection,"add remove",e),this},t.prototype.assembleRenderData=function(){var e;return(e=this.projectModel.toJSON()).appName=this.appName,e.permissions=this.projectModel.hasPermissions("get.subscribe","put.fork"),e.isGhost=T.user.get("isGhost"),e},t.prototype.getTasksAppName=function(){return tb_i18n.get("tasks")},t.prototype.assemblePluginsRenderData=function(e){var t,n;return t=[],(n={url:"teambition://tasks"}).hide||(n.html=f({name:"tasks",appName:this.getTasksAppName()})),t.push(n),this.projectModel.isJoined()||t.push({url:"teambition://groupchat",hide:!0}),t},t.prototype.render=function(){var e;return e=this.assembleRenderData(),this.$el.html(i(e)),this.setupPlugins({_projectId:this.projectModel.id,nativePluginConfigs:this.assemblePluginsRenderData(e)}),this.$navBody=this.$(".nav-body"),this.$navFooter=this.$(".nav-footer"),this.$navMore=this.$(".nav-more"),this.$navMoreUl=this.$(".nav-more > ul"),this.$navLink=this.$(".nav-link")},t.prototype.renderGuide=function(){var e;return this.projectModel.get("isNew")&&(this.projectModel.set("isNew",!1),this.projectModel.set("currentPanel","member"),k(this.projectModel.get("_organizationId")).then((e=this,function(t){return t?e.requestSubView(v).open(s,{projectModel:e.projectModel,qrCodeType:"project"}):(S(),T.gta.event({action:"invitation blocked",page:"Project Page",type:"project"}))}))),this},t.prototype.isScrumApp=function(){return m.getScrumAppNames().indexOf(this.appName)>-1},t.prototype.renderMenu=function(){var e,t,n;return t=["tasks"===this.appName,this.isScrumApp()&&!this.projectModel.get("isTemplate")].some(function(e){return e}),(e=this.projectModel.toJSON()).memberLength=this.membersCollection.toJSONActive().length,e.hasFilter=t,e.showBadge=this.customfieldNotifyStatusValue,this.projectPanelView&&"filter"===e.currentPanel&&(e.hasFilter?this.projectPanelView.show():this.projectPanelView.hide()),b.delay((n=this,function(){var t;return null!=(t=n.$navFooter)?t.html(c(e)):void 0}))},t.prototype.initProjectPanel=function(){if(this.projectPanelView=this.requestSubView(h,{projectModel:this.projectModel,membersCollection:this.membersCollection}),this.projectPanelView.$el.appendTo($("body")),T.user.isNew())return this.projectModel.set("currentPanel","activity")},t.prototype.setApp=function(e){return this.appName=e,this.refreshAppActive(),this.renderMenu()},t.prototype.refreshAppActive=function(){var e,t,n;if(this.$navBody.find(".active").removeClass("active"),null!=(t=this.$(".app[data-app=tasks]"))&&t.text(this.getTasksAppName()),this.appName===l?(n=T.router.getUrl().split("/").pop(),e=this.$(".app[data-plugin-id="+n+"]")):e=this.$(".app[data-app="+this.appName+"]"),e.parent().addClass("active"),e.parent().is(".dropdown-menu"))return this.$navMore.addClass("active")},t.prototype.refreshNavs=function(){var e;if(!this.$el)return this;if(this.$navMore.before(this.$navMoreUl.children()),this.$navMore.removeClass("on-show active"),this.$navLink.removeClass("on-collapse"),this.checkNavWidth(!0))return this;for(;!this.checkNavWidth();)e=this.$navMore.prev(),this.$navMoreUl.prepend(e),this.$navMore.addClass("on-show"),this.$navLink.addClass("on-collapse");return this.$navMore.find(".active").length&&this.$navMore.addClass("active"),this},t.prototype.renderPlugins=function(e){if(this.el)return this.$navMoreUl.children().length>0?this.$navMoreUl.append(e):(this.$navMore.before(e),this.refreshNavs())},t.prototype.gtaHandler=function(e){var t;return t=$(e.currentTarget).data("app"),this.appNavGta(t)},t.prototype.appHandler=function(e){var t,n,r,i,s;return"tasks"===(t=$(e.currentTarget).data("app"))?(this.appName=t,r=this.projectModel.get("currentTasklistId"),i=this.projectModel.get("currentViewId"),s=T.router.getPrefix()+"/tasks",i?s+="/view/"+i:r&&(s+="/scrum/"+r),T.router.navigate(s,{trigger:!0})):this.appName!==t?(this.appName=t,s=T.router.getUrl(),n=o.get(0).pluck("name").concat(l).join("|"),s=s.replace(new RegExp("("+n+")+\\S*"),t),T.router.navigate(s,{trigger:!0})):void 0},t.prototype.appNavGta=function(e){var t;return t={action:"open "+e+" tab",control:"Project Tabbar",category:this.projectModel.getGtaCategory()},T.gta.event(t)},t.prototype.panelHandler=function(e){var t,n;return t=$(e.currentTarget),this.projectModel.get("currentPanel")===(n=t.data("menu"))&&(n=null),this.projectModel.set("currentPanel",n),E.dispatch({type:"TAP_PROJECT_TOGGLE_MANAGEMENT_PANEL",payload:!1})},t.prototype.linkAppStoreHandler=function(){return this.unmountReact(this.powerupConfigMountNode),this.requestReactView(this.powerupConfigMountNode,u,{fromWhere:"appList",defaultOpened:!0,projectModel:this.projectModel})},t.prototype.checkNavWidth=function(e){var t,n;if(!this.$el)return!0;if(t=this.$navBody.find(">ul >li"),e){if((t=t.filter(":not(.nav-more)")).length<1)return!0}else if(t.length<=1)return!0;return n=0,t.each(function(e,t){return n+=$(t).outerWidth()}),this.$navBody.width()-this.$navLink.outerWidth(!0)>=n},t.prototype.homePageHandler=function(){var e,t;return T.gta.event({action:"open projects page",control:"Breadcrumb"}),t=null!=(e=this.projectModel.get("_organizationId"))&&this.projectModel.get("orgLevel")>=-1?"organization/"+e:"projects",T.router.navigate(t,{trigger:!0})},t.prototype.remove=function(){var e;return null!==this.checkRefreshTimerId&&clearTimeout(this.checkRefreshTimerId),r.off("."+this.viewName),this.customfieldNotify&&(null!=(e=this.customfieldNotify)&&e.unsubscribe(),y.next(!1)),t.__super__.remove.apply(this,arguments)},t}(),t.Constructor=d},mmmX94Uw:function(e,t,n){},mqeb6GpD:function(e,t,n){"use strict";n.d(t,"d",function(){return k}),n.d(t,"e",function(){return _}),n.d(t,"c",function(){return w}),n.d(t,"b",function(){return S}),n.d(t,"a",function(){return E});var r=n("tLZJUYWX"),o=n.n(r),i=n("a+N5u/Cl"),s=n("4c1CS0b3"),a=n("80gYlwjC"),c=n("s0r7VfKc"),l=n("gh8QIhMV"),u=n("4nTvW6pf"),p=n.n(u),d=n("FXyeC79C"),h=n.n(d),m=n("fZoV3jYy"),f=n("p7RaAO2S"),g=n("zT6SYcu2"),v=n("bvmrLhnu"),b=n("L2bYkKUI");function y(e){var t={text:Object(f.c)({values:["text"]},g.f.RangeText),isSuspended:Object(f.c)({values:["false"]},g.f.Select),isArchived:Object(f.c)({values:["false"]},g.f.Select),isTemplate:Object(f.c)({values:["false"]},g.f.Select)};return Object(f.b)(t,e,!0)}var k=function(e,t){return function(n){if(!n)return!1;if(n.isGroup)return!0;if(t&&t.indexOf(n._id)>=0)return!1;if(e){var r=n.roleRight?n.roleRight._orgRoleId:n._orgRoleId;if(r&&r>=0)return n._organizationId===e;var o=n.roleRight?n.roleRight._roleId:n._roleId;return n._organizationId===e&&void 0!==o&&-1!==o&&-2!==o}return!n._organizationId}},_=function(e,t){return function(n){return n.filter(k(e,t))}},w=function(e,t,n,r,s){var c=e._organizationId===t,l=e.organization&&e.organization.name?e.organization.name:o.a.get("personal.projects"),u=e.organization&&e.organization.plan||e.plan,p=e._organizationId?!a.Payment.create(u,"organization").isActive:!a.Payment.create(u,"user").isActive,d=!r||function(e,t){return e.roleRight.role.permissions.indexOf(t)>=0}(e,r),h=!n||function(e,t){if("preciseDate"===t)return!0;if("tasks"===t)return Object(v.canUseTaskFeature)(e);return Object(i.pluck)(e.applications||[],"name").indexOf(t)>=0}(e,n),f=s?s(e):{result:!0},g=p||!d||!h||!f.result,b=void 0;return p?b=o.a.get("project.selector.overdue"):d?h?!f.result&&f.error&&(b=f.error):b=o.a.get("project.selector.application.disabled."+n):b=o.a.get("project.selector.no.permission"),{id:e._id,name:e.name,desc:c?void 0:o.a.get("project.belongsTo",l),avatar:{type:m.b.Img,src:e.logo},disableToggle:g,toggleTip:b}},C=function(){return{id:"default",name:o.a.get("project.selector.project.unset"),avatar:{type:m.b.Img,src:b},canToggle:!0}};function S(e,t,n,r,o,i,a){var u={q:e,tql:y(e),organizationId:t,hasOrganizationId:!!t,pageSize:50};return c.default.graph(h.a,u).map(function(e){var s=e.organization,c=s?s.result:[];return(a?c:_(t,o)(c)).map(function(e){return w(e,t,n,r,i)})}).catch(function(e){return Object(l.throwError)(e),s.Observable.empty()})}function E(e,t,n,r,o,i,a,u){var d={spaceType:a||(t?"organization":"user"),organizationId:t,pageSize:50};return c.default.graph(p.a,d).map(function(s){var a=s.recommend,c=!0===e?[]:[C()],l=(u?a.result:_(t,o)(a.result)).map(function(e){return w(e,t,n,r,i)});return c.concat(l)}).catch(function(e){return Object(l.throwError)(e),s.Observable.empty()})}},msTNxTQE:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("wd/RKGTj"),a=n.n(s),c=n("TSYQbtd+"),l=n.n(c),u=n("sa1Ed382"),p=n("GESwhXbR"),d=n("4c1CS0b3"),h=n("QSzw2VcL"),m=n("2ivs9lcN"),f=n("9MOL8v5J");var g=n("sPJHzNB/"),v=function(e){var t=e.projectId,n=e.orgId,i=e.userId,s=r.g(e,["projectId","orgId","userId"]),a=function(e,t,n){var i=n&&f.get(n)||null;i&&"function"==typeof i.resetSoft&&i.resetSoft();var s=r.f(Object(o.useState)({customRoles:[],isRelated:!1,isLoaded:!1}),2),a=s[0],c=s[1];return Object(o.useEffect)(function(){if(t&&n){var o=d.Observable.forkJoin(h.fetch$(t,{boundToObjectType:"project"}),m.fetch$(t,{boundToObjectType:"project"}),f.fetch$(n,{roleType:"project"})).subscribe(function(t){var n=r.f(t,3),o=n[0],i=n[1],s=n[2],a=o&&o.isInTeams(e)||i&&i.isInGroups(e),l=s&&s.toJSON()||[];c({isRelated:a,customRoles:l,isLoaded:!0})});return function(){return o.unsubscribe()}}},[e,t,n]),a}(i,t,n),c=a.customRoles,l=a.isRelated,u=a.isLoaded,p=r.a({},s,{customRoles:c,isRelated:l,isLoaded:u});return o.createElement(b,r.a({},p))},b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClsName="roles-select",t.onSetRole=function(e){var n=t.props.onSetRole;n&&n(e)},t.onClick=function(e){return function(){t.onSetRole(e)}},t.onDelete=function(){t.props.onDeleteRole&&(t.props.onDeleteRole(),u.gta.event({action:"remove member",type:t.props.isOrganization?"org project member":"project member",control:"Member Card"}))},t.onSetSelfOwnerRole=function(){if("function"==typeof t.props.onSetSelfOwnerRole){var e=t.props.customRoles.find(function(e){return e.isDefault&&2===e.level}),n=e?e._id:void 0;t.props.onSetSelfOwnerRole(n)}},t}return r.d(t,e),t.prototype.renderSelfOwnerItem=function(){return this.props.onSetSelfOwnerRole?o.createElement(p.MenuItem,{key:this.rootClsName+"__self-owner",onClick:this.onSetSelfOwnerRole},i.get("project.owner")):null},t.prototype.renderCustomRoles=function(){var e=this;return this.props.customRoles.length&&this.props.onSetRole?this.props.customRoles.map(function(t,n){var r=t._id===e.props._roleId&&o.createElement(p.Icon,{name:"tick"});if(t.level>e.props.myRoleScope)return null;return o.createElement(p.MenuItem,{key:e.rootClsName+"__custom—roles-"+n,onClick:function(){return e.onSetRole(t._id)}},t.name,r)}):null},t.prototype.renderUpgradeGuide=function(){var e=this;if(this.props.payment&&this.props.payment.isOrganization)return null;return o.createElement(p.Menu,{className:g["with-top-divider"]},o.createElement(p.MenuItem,{key:this.rootClsName+"-upgrade",className:g[this.rootClsName+"-upgrade-item"],secondary:i.get("project.settings.member.menu.upgrade.description"),onClick:function(){window.open(u.config.SITE_HOST+"/pricing"),u.gta.event({action:"view plan option",control:"permission",type:e.props.isOrganization?"business":"plus"})}},i.get("project.settings.member.menu.upgrade.button")))},t.prototype.renderDelete=function(){return this.props.onDeleteRole&&!this.props.isOwner?this.props.isRelated?this.renderDeleteTips():this.renderDeleteItem():null},t.prototype.renderDeleteTips=function(){return o.createElement(p.Menu,{className:g["with-top-divider"]},o.createElement(p.MenuItem,{key:this.rootClsName+"__delete-limit",className:g[this.rootClsName+"-delete-limit-item"]},i.get("project.settings.cannot.remove")))},t.prototype.renderDeleteItem=function(){return o.createElement(p.Menu,{className:g["with-top-divider"]},o.createElement(p.MenuItem,{key:this.rootClsName+"__delete",className:g[this.rootClsName+"-delete-item"],onClick:this.onDelete},i.get("project.settings.remove.member")))},t.prototype.render=function(){return this.props.isLoaded?o.createElement("div",{className:g[""+this.rootClsName]},o.createElement(p.Menu,null,this.renderSelfOwnerItem(),this.renderCustomRoles()),this.renderUpgradeGuide(),this.renderDelete()):o.createElement(p.Loading,null)},t}(o.PureComponent);n.d(t,"MemberCard",function(){return k});var y=n("DEXK/wwe"),k=function(e){function t(t){var n=e.call(this,t)||this;return n.rootClassName="member-card",n.onEnterSetRole=function(){n.setState({isSettingRole:!0})},n.onQuitSetRole=function(){n.setState({isSettingRole:!1})},n.onOpenChat=function(){n.props.onOpenChat&&n.props.onOpenChat()},n.state={isSettingRole:!1},n}return r.d(t,e),t.prototype.renderHeader=function(){var e=this.props.member,t=e.lastLoginTime?i.get("member.card.last.login.time",a()(e.lastLoginTime).format("YYYY-MM-DD HH:mm")):null,n=t?o.createElement("p",{className:"member-last-active"},t):null,r=e.isDisabled?o.createElement(p.Tooltip,{title:i.get("organization.member.disabled")},o.createElement(p.Icon,{name:"disable"})):null;return o.createElement("header",{className:y[this.rootClassName+"-header"]},o.createElement(p.Avatar,{className:y[this.rootClassName+"-avatar"],size:"large",src:e.avatarUrl}),o.createElement("div",{className:y[this.rootClassName+"-info"]},o.createElement("p",{className:"name"},o.createElement("span",{className:"user-name"},e.name),r),o.createElement("p",{className:"subtitle"},e.title||e.email),n))},t.prototype.renderDetailItem=function(){var e=this.props.onOpenOrganizationDetail;return e?o.createElement(p.MenuItem,{onClick:e},o.createElement(p.Icon,{name:"user"}),i.get("member.card.organization.detail")):null},t.prototype.renderProjectTasksItem=function(){var e=this.props.onOpenProjectTasks;return e?o.createElement(p.MenuItem,{onClick:e},o.createElement(p.Icon,{name:"project"}),i.get("member.card.project.task")):null},t.prototype.renderRoleItem=function(){var e,t=this,n=this.props,r=n.canShowRoleItem,s=n.member,a=n.onSetRole,c=n.onDeleteRole,d=n.onSetSelfOwnerRole;if(!r)return null;var h=a||c||d,m=l()(((e={})[y[this.rootClassName+"-disabled"]]=!h||s._id===u.user.id,e));return o.createElement(p.MenuItem,{className:m,onClick:function(){h&&t.onEnterSetRole()}},o.createElement(p.Icon,{name:"medal"}),i.get("member.card.role.setting"),o.createElement("span",null,this.props.member.role))},t.prototype.renderMenu=function(){var e=this.props,t=e.onOpenOrganizationDetail,n=e.onOpenProjectTasks,r=e.onOpenChat,i=e.canShowRoleItem;return t||n||r||i?o.createElement("section",{className:y[this.rootClassName+"-content"]},o.createElement(p.Menu,{className:y[this.rootClassName+"-handler-list"]},this.renderDetailItem(),this.renderProjectTasksItem(),this.renderRoleItem())):null},t.prototype.renderChat=function(){return this.props.onOpenChat?o.createElement("div",{className:y[this.rootClassName+"-chat"]},o.createElement(p.Button,{onClick:this.onOpenChat},i.get("member.card.open.chat"))):null},t.prototype.renderMemberContent=function(){return o.createElement("div",{className:this.rootClassName+"-member-wrapper"},this.renderHeader(),this.renderMenu(),this.renderChat())},t.prototype.renderRoleContent=function(){var e=this.props,t=e.member,n=e.isOwner,r=e.onDeleteRole,s=e.onSetRole,a=e.onSetSelfOwnerRole;return o.createElement("div",{className:y[this.rootClassName+"-role-wrapper"]},o.createElement("header",null,i.get("member.card.submenu.title"),o.createElement(p.IconButton,{className:"role-wrapper-back",name:"chevron-left",color:"gray",onClick:this.onQuitSetRole})),o.createElement("section",null,o.createElement(v,{projectId:this.props.projectId,orgId:this.props.orgId,userId:this.props.userId,_roleId:t._roleId,isOwner:n,onSetSelfOwnerRole:a,onSetRole:s,onDeleteRole:r,payment:this.props.payment,myRoleScope:this.props.myRoleScope,isOrganization:this.props.isOrganization})))},t.prototype.renderContainer=function(){return this.state.isSettingRole?this.renderRoleContent():this.renderMemberContent()},t.prototype.render=function(){return o.createElement("div",{className:y[""+this.rootClassName]},this.renderContainer())},t}(o.PureComponent)},msiDz7wE:function(e,t,n){},mthB5Tgu:function(e,t,n){e.exports=n.p+"images/d_guzhang@2x.266f44da.png"},mvlQz3Ik:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";return e.hasHeader&&(o+="<header> "+r(e.title)+"</header>"),e.hasSearch&&(o+='<div class="search-wrapper"> <input class="form-control" placeholder="'+tb_i18n.get("integrations.processon.search.hint")+'"></div>'),o+='<ul class="thin-scroll"></ul>'}},"myb+1gHu":function(e,t,n){var r,o,i,s={}.hasOwnProperty,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};i=n("a+N5u/Cl"),o=n("vmWJWrVe"),r=n("vAHkzNvY"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="MemberProgressView",t.prototype.className="member-progress-view",t.prototype.initialize=function(e){if(e.projectModel||e.organizationModel)return this.options=e,this.render(),this.listen()},t.prototype.listen=function(){var e;if(null!=this.options.projectModel&&this.listenTo(this.options.projectModel,"change:plan",(e=this,function(){return e.render()})),null!=this.options.organizationModel)return this.listenTo(this.options.organizationModel,"change:plan",function(e){return function(){return e.render()}}(this))},t.prototype.hasKeys=function(e,t){var n;return n=i.keys(e),t.every(function(e){return a.call(n,e)>=0})},t.prototype.render=function(){var e,t,n,o,i,s;return o=null!=(i=this.options.projectModel)?i.payment:void 0,this.limit=o.memberQuota,this.exist=this.options.exist,e=this.options.projectModel.get("_organizationId"),n=(null!=(s=this.options.projectModel)?s.get("orgLevel"):void 0)>=0,t={exist:this.exist,limit:this.limit,isOrgMember:n,_organizationId:e},this.$el.html(r(t)),this.renderProgressBarWidth()},t.prototype.renderProgressBarWidth=function(){var e;return e=Math.min(Math.floor(this.exist/this.limit*100),100),this.$(".progress-bar").css("width",e+"%")},t}()},mz5Ire9y:function(e,t){e.exports=function(e){var t='<ul class="list works-picker"> <li> <a class="uploader-handler" data-gta="event" data-label="choose file from computer"> <span class="icon icon-upload"></span> <span>'+tb_i18n.get("work.picker.uploader")+"</span> </a> </li> ";return(e.isLibraryEnable||e.isDropboxSDKEnable||e.isFangCloudSDKEnable)&&(t+=' <li class="list-divider"></li> '),t+=" ",e.isLibraryEnable&&(t+=' <li> <a class="library-picker-handler" data-gta="event" data-label="choose file from library"> <span class="icon icon-folder"></span> <span>'+tb_i18n.get("work.picker.from.library")+"</span> </a> </li> "),t+=" ",e.isDropboxSDKEnable&&(t+=' <li> <a class="dropbox-picker-handler" data-gta="event" data-label="choose file from dropbox"> <span class="icon icon-dropbox"></span> <span>'+tb_i18n.get("work.picker.from.dropbox")+"</span> </a> </li> "),t+=" ",e.isFangCloudSDKEnable&&(t+=' <li> <a class="fangcloud-picker-handler" data-gta="event" data-label="choose file from fangcloud"> <span class="icon icon-fangcloud"></span> <span>'+tb_i18n.get("work.picker.from.fangcloud")+"</span> </a> </li> "),t+=' <li class="list-divider"></li> <li class="remote-input-wrap"> <input type="text" placeholder="'+tb_i18n.get("work.picker.from.link")+'" class="form-control pull-left"/> <span class="btn btn-default remote-picker-handler pull-right">'+tb_i18n.get("add")+"</span> </li></ul>"}},"n++cSDpC":function(e,t,n){e.exports=n.p+"images/h_woshou@2x.e22ddbc1.png"},"n/9r1egZ":function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("sEfCy7Dp"),i=n.n(o),s=n("E+oPn2IN"),a=n.n(s),c=n("TSYQbtd+"),l=n.n(c),u=n("urgRemqh"),p=n.n(u),d=n("q1tIBJhx"),h=n.n(d),m=n("yfEWqN/6"),f=n("tM7ZA2EX"),g=n("GESwhXbR"),v=n("ZXOnUJpY"),b=n("PL5VA9Qq"),y=n.n(b),k=n("tLZJUYWX"),_=n.n(k),w=n("EiUFTky8"),C=n("+jTfkVXR"),S=n("cdS6Urxf"),E=n.n(S),T=n("Nxrdcgel"),I=Object(T.SortableElement)(g.MenuItem),M=Object(T.SortableContainer)(g.Menu),j=Object(T.SortableHandle)(function(){return h.a.createElement(g.Icon,{className:E.a["sortable-icon"],name:"menu",size:12})}),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="table-configure",t.popupRef=null,t.setPopupRef=function(e){t.popupRef=e},t.handleToggle=function(e){return function(){e.cannotHide||t.props.onToggle([r.a({},e,{hidden:!e.hidden})])}},t.handleColResort=function(e){t.props.onDragEnd(e)},t.renderSelected=function(e){return e.hidden?null:h.a.createElement(g.Icon,{className:E.a[t.rootClassName+"__item-icon"],name:"tick"})},t.renderContent=function(){var e=t.props.cellDescriptors.map(function(e,n){var r=l()(E.a[t.rootClassName+"__item"],e.cannotHide?E.a[t.rootClassName+"__item--disabled"]:null);return h.a.createElement(I,{className:r,key:e.key,onClick:t.handleToggle(e),index:n,disabled:e.unDraggable},h.a.createElement(j,null),h.a.createElement("span",{className:E.a[t.rootClassName+"__item-text"]},t.props.printer.toTitle(e)),t.renderSelected(e))}),n=l()(E.a[t.rootClassName],E.a[t.rootClassName+"__body"],"thin-scroll"),r=E.a[t.rootClassName+"__sorting-item"];return h.a.createElement(M,{className:n,helperClass:r,useDragHandle:!0,onSortEnd:t.handleColResort},e)},t}return r.d(t,e),t.prototype.renderTrigger=function(){var e=l()(this.props.className,E.a[this.rootClassName+"__trigger"]);return h.a.createElement("div",{className:e,style:this.props.style},h.a.createElement(g.Tooltip,{title:_.a.get("table.config")},h.a.createElement(g.Icon,{className:E.a[this.rootClassName+"__trigger-inner"],name:"cog"})))},t.prototype.render=function(){return h.a.createElement(g.TitledDropdown,{content:this.renderContent(),ref:this.setPopupRef,title:_.a.get("table.config.title"),titleCls:E.a[this.rootClassName+"__head"]},this.renderTrigger())},t}(h.a.PureComponent),x=n("WEaTnrBS"),N=n.n(x),O=function(e){return h.a.createElement("div",{className:N.a["table-placeholder"]},h.a.createElement("span",{className:N.a.image}),h.a.createElement("p",null,e.placeholder))},R=n("3kCMucPD"),D=n.n(R),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="case-type",t}return r.d(t,e),t.prototype.getCaseTypeText=function(e){switch(e){case"function":return _.a.get("testcase.scenariofield.casetype.function");case"auto":return _.a.get("testcase.scenariofield.casetype.auto");case"performance":return _.a.get("testcase.scenariofield.casetype.performance");case"config":return _.a.get("testcase.scenariofield.casetype.config");case"deployment":return _.a.get("testcase.scenariofield.casetype.deployment");case"security":return _.a.get("testcase.scenariofield.casetype.security");case"api":return _.a.get("testcase.scenariofield.casetype.api");case"other":return _.a.get("testcase.scenariofield.casetype.other");default:return""}},t.prototype.render=function(){if(!Object(C.d)(this.props.entity))return null;var e=l()(this.props.className,D.a[this.rootClassName]),t=this.props.entity.caseType;return h.a.createElement("div",{className:e,style:this.props.style},h.a.createElement("p",null,this.getCaseTypeText(t)))},t}(h.a.PureComponent),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="executor",t}return r.d(t,e),t.prototype.render=function(){if(!Object(C.d)(this.props.entity))return null;var e=l()(this.props.className,D.a[this.rootClassName]),t=this.props.entity.executor;return h.a.createElement("div",{className:e,style:this.props.style},t&&h.a.createElement(g.Avatar,{size:"small",src:t.avatarUrl}),t&&h.a.createElement("p",null,t.name))},t}(h.a.PureComponent),A=n("PVLVtUMG"),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="flow-status",t}return r.d(t,e),t.prototype.render=function(){if(!Object(C.d)(this.props.entity))return null;var e=l()(this.props.className,D.a[this.rootClassName]),t=this.props.entity.flowStatus,n=t&&h.a.createElement(A.StatusLabel,{className:D.a[this.rootClassName+"__inner"],kind:t.kind,title:t.name,muted:!0});return h.a.createElement("div",{className:e,style:this.props.style},n)},t}(h.a.PureComponent),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="priority",t}return r.d(t,e),t.prototype.render=function(){if(!Object(C.d)(this.props.entity))return null;var e=l()(this.props.className,D.a[this.rootClassName]),t=-1===this.props.entity.priority?"":"P"+this.props.entity.priority;return h.a.createElement("div",{className:e,style:this.props.style},h.a.createElement("p",null,t))},t}(h.a.PureComponent),B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="title",t}return r.d(t,e),t.prototype.render=function(){var e,t,n=l()(this.props.className,D.a[this.rootClassName],((e={})[D.a.group]=!Object(C.d)(this.props.entity),e));Object(C.d)(this.props.entity)?t=this.props.entity.title:(t=""+this.props.entity.name,0===this.props.entity.doneCount&&0===this.props.entity.resourceCount||(t+=" · ","testplan"===this.props.fromWhere&&(t+=this.props.entity.doneCount+"/"),t+=""+this.props.entity.resourceCount));var r=t.trim(),o=Object(C.d)(this.props.entity)?h.a.createElement("div",{className:D.a.dot}):null;return h.a.createElement(h.a.Fragment,null,o,h.a.createElement("div",{className:n,style:this.props.style},h.a.createElement(g.Tooltip,{title:r},h.a.createElement("p",null,r))))},t}(h.a.PureComponent),U=function(){function e(e){var t=this;this.configureActionWidth=44,this.props=Object.create(null),this.shouldUpdate=!1,this.groupPrinters={name:{title:_.a.get("testcase.title"),component:B}},this.casePrinters={title:{title:_.a.get("testcase.title"),component:B},priority:{title:_.a.get("testcase.scenariofield.priority"),component:F},executor:{title:_.a.get("executor"),component:z},flowStatus:{title:_.a.get("testcase.flowstatus"),component:V},caseType:{title:_.a.get("testcase.scenariofield.caseType"),component:L}},this.renderAddAction=function(e,n){return void 0===n&&(n={}),Object(C.d)(e)?null:h.a.createElement("div",{key:n.key,className:y.a["add-action-container"]},t.props.renderControllerAddAction(e))},this.renderAddChildAction=function(e,n,r){return void 0===r&&(r={}),Object(C.d)(e.entity)?h.a.createElement("div",{key:r.key,className:y.a["add-action-container"],style:r.style},t.props.renderRowSortAction(e)):h.a.createElement("div",{key:r.key,className:y.a["add-action-container"],style:r.style},t.props.renderRowAddAction(e))},this.renderGroupTitleAction=function(e,n){return void 0===n&&(n={}),h.a.createElement("div",{key:n.key,className:y.a["add-action-container"],style:n.style},t.props.renderGroupTitleAction(e))},this.renderBodyCell=function(e,n,o){var i=r.a({},o,{cellDescriptor:e,entity:n,fromWhere:t.props.fromWhere}),s=t.casePrinters[e.key];return Object(C.d)(n)||"title"!==e.key?s?h.a.createElement(s.component,r.a({},i)):null:(s=t.groupPrinters.name)?h.a.createElement(s.component,r.a({},i)):null},this.renderConfigureAction=function(e){var n=r.a({},e,{cellDescriptors:t.props.cellDescriptors,onToggle:t.props.onConfigure,onDragEnd:t.props.onColumnResort,printer:t,className:y.a["testplan-configure-action"],key:"testplan-configure-action",style:{height:t.props.cellDescriptors[0].headHeight-1,width:t.configureActionWidth}});return h.a.createElement(P,r.a({},n))},this.renderPlaceholder=function(e){return void 0===e&&(e=_.a.get("no.testcase")),h.a.createElement(O,{placeholder:e})},this.renderToolbarAction=function(e){return t.props.renderToolbarAction(e)},this.toStatusBarTitle=function(){return _.a.get("table.loadMore")},this.toTitle=function(e){if("customfields"===e.key)return e.customField?e.customField.name:null;var n=t.casePrinters[e.key];return"testhub"===t.props.fromWhere&&"executor"===e.key?_.a.get("usercase.executor.title"):n?n.title:null},this.toToolbarTitle=function(e){return _.a.get("table.row.selected",e.length)},e&&this.receiveProps(e)}return e.prototype.receiveProps=function(e){this.shouldUpdate=!Object(w.shallowEqual)(e,this.props),this.props=e},e}(),$={},H=function(e){function t(t){var n=e.call(this,t)||this;return n.tableBodyRef=null,n.tablePrinter=new U,n.needRefresh=!0,n.tableResize=function(){n.tableBodyRef&&n.setState({width:n.tableBodyRef.clientWidth,height:n.tableBodyRef.clientHeight})},n.setTableBodyRef=function(e){n.tableBodyRef=e},n.handleConfigure=function(e){n.props.onConfigure(e)},n.handleLoadMore=function(){},n.handleGroupCollapse=function(e){n.props.onGroupCollapse(e)},n.handleGroupExpand=function(e){n.props.onGroupExpand(e)},n.handleRowCollapse=function(e){n.props.onRowCollapse(e)},n.handleRowExpand=function(e){n.props.onRowExpand(e)},n.handleRowDeselect=function(e){n.props.onDeselectTestcases(e)},n.handleRowSelect=function(e){n.props.onSelectTestcases(e)},n.handleSort=function(e){n.props.onSort(e)},n.tableResize=i()(n.tableResize,100),n.state={width:0,height:0},n.tablePrinter.receiveProps({fromWhere:t.fromWhere,cellDescriptors:t.cellDescriptors,onConfigure:n.handleConfigure,onColumnResort:t.onColumnResort,renderToolbarAction:t.renderToolbarAction,renderGroupTitleAction:n.props.renderGroupTitleAction,renderRowAddAction:n.props.renderRowAddAction,renderRowSortAction:n.props.renderRowSortAction}),n}return r.d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this.props.testplan&&e.testplan&&e.testplan._id!==this.props.testplan._id,n=this.props.testhub&&e.testhub&&e.testhub._id!==this.props.testhub._id,r=e.commonGroupTree.entity._id!==this.props.commonGroupTree.entity._id;t||n||r?(this.props.onResetTable(),this.tableBodyRef&&Object(f.b)(this.tableBodyRef,this.tableResize),this.needRefresh=!0):(e.testplan||e.testhub)&&this.tablePrinter.receiveProps({fromWhere:e.fromWhere,cellDescriptors:e.cellDescriptors,onConfigure:this.handleConfigure,onColumnResort:e.onColumnResort,renderToolbarAction:e.renderToolbarAction,renderControllerAddAction:e.renderControllerAddAction,renderGroupTitleAction:e.renderGroupTitleAction,renderRowAddAction:e.renderRowAddAction,renderRowSortAction:e.renderRowSortAction})},t.prototype.componentDidUpdate=function(){this.needRefresh&&this.tableBodyRef&&(this.setState({width:this.tableBodyRef.clientWidth,height:this.tableBodyRef.clientHeight}),Object(f.a)(this.tableBodyRef,this.tableResize))},t.prototype.componentWillUnmount=function(){this.tableBodyRef&&Object(f.b)(this.tableBodyRef,this.tableResize)},t.prototype.getTableBodyClassName=function(e){return"testplan"===this.props.fromWhere?l()(p.a["table-body"],p.a["table-body-testplan"],e):l()(p.a["table-body"],e)},t.prototype.renderLoading=function(){return h.a.createElement("div",{className:this.getTableBodyClassName(p.a.placeholder)},h.a.createElement(g.Loading,null))},t.prototype.renderPlaceholder=function(){return h.a.createElement("div",{className:this.getTableBodyClassName(p.a.placeholder)},this.props.renderPlaceholder())},t.prototype.render=function(){var e=this.props,t=e.commonGroupTree,n=e.groups,r=e.rows,o=e.testhub,i=e.isLoading;if(i&&!o||!n&&!r)return this.renderLoading();var s=a()(t.children);if(s||t.entity._id!==m.b.All&&(!t.entity.isRoot||t.entity.pos)){if(s?!r||i:!n)return this.renderLoading();if(s?a()(r):a()(n))return this.renderPlaceholder();var c=s?r:n[0].data;return h.a.createElement("div",{className:this.getTableBodyClassName(),ref:this.setTableBodyRef},h.a.createElement(v.Table,{cellDescriptors:this.props.cellDescriptors,rows:c,height:this.state.height,width:this.state.width,new:null,hasMore:!1,isLoadingMore:!1,printer:this.tablePrinter,selectedRows:this.props.selectedTestcaseRows,sortBy:this.props.sortBy,toRowIsExpanded:this.props.toRowIsExpanded,toRowIsLoadingChildren:$,onConfigure:this.handleConfigure,onLoadMore:this.handleLoadMore,onRowClick:this.props.onRowClick,onRowCollapse:this.handleRowCollapse,onRowDeselect:this.handleRowDeselect,onRowExpand:this.handleRowExpand,onRowSelect:this.handleRowSelect,onSort:this.handleSort,rowIndentation:16}))}return n?a()(n)?this.renderPlaceholder():h.a.createElement("div",{className:this.getTableBodyClassName(),ref:this.setTableBodyRef},h.a.createElement(v.SwimTable,{cellDescriptors:this.props.cellDescriptors,groups:n,height:this.state.height,width:this.state.width,new:null,hasLoader:!1,isLoading:!1,printer:this.tablePrinter,selectedRows:this.props.selectedTestcaseRows,sortBy:this.props.sortBy,toRowIsExpanded:this.props.toRowIsExpanded,toRowIsLoadingChildren:this.props.toRowIsLoadingChildren,onConfigure:this.handleConfigure,onGroupCollapse:this.handleGroupCollapse,onGroupExpand:this.handleGroupExpand,onRowCollapse:this.handleRowCollapse,onRowExpand:this.handleRowExpand,onLoadMore:this.handleLoadMore,onRowClick:this.props.onRowClick,onRowDeselect:this.handleRowDeselect,onRowSelect:this.handleRowSelect,onSort:this.handleSort,rowIndentation:16})):this.renderLoading()},t}(h.a.PureComponent);n.d(t,"a",function(){return H})},"n1F+jPwo":function(e,t,n){var r,o,i,s={}.hasOwnProperty;o=n("vmWJWrVe"),r=n("zQvn7WV5").OrganizationIsEmpty,i=n("QbA0c8QU"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.className=i["organization-is-empty-view"],t.prototype.viewName="OrganizationIsEmptyView",t.prototype.initialize=function(){return this.requestReactView(this.el,r)},t}()},n2Lzi2oi:function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("RrY8rmjH"),o=n("hGNqppva"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="PopoverConfirmView",t.prototype.className="popover-confirm-view",t.prototype.width=300,t.prototype.events={"click .popover-cancel-handler":"cancel","click .popover-confirm-handler":"confirm"},t.prototype.render=function(){return this.$el.html(r({isDanger:null!=this.options.isDanger&&this.options.isDanger,description:this.options.description,cancelStr:this.options.cancelStr,confirmStr:this.options.confirmStr})),this},t.prototype.cancel=function(){var e;return"function"==typeof(e=this.options).onCancel&&e.onCancel(),this.hide()},t.prototype.confirm=function(){var e;return"function"==typeof(e=this.options).onConfirm&&e.onConfirm(),this.hide()},t.prototype.hide=function(){return this.remove()},t}()},n7DEg2nM:function(e,t,n){e.exports={"task-detail-action-list":"task-detail-action-list__p8r2","testgroup-creator-help":"testgroup-creator-help__CMPm"}},n8Repvf6:function(e,t,n){var r,o,i,s={}.hasOwnProperty;o=n("gLdDAp90"),r=n("aD6I3VT4"),i=n("43qOt/EN").LocationComponent,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.tagName="section",t.prototype.viewName="DetailInfosLocationView",t.prototype.className="detail-infos-location-view no-border-wrapper",t.prototype.initialize=function(e){return t.__super__.initialize.apply(this,arguments),this.objectModel=e.objectModel,this.isRequired=e.isRequired,this.canEdit=e.canEdit,this.render(),this.listen()},t.prototype.listen=function(){var e;return e=["change:location"],this.listenTo(this.objectModel,e.join(" "),this.render)},t.prototype.isCase=function(){return!0},t.prototype.hasPermission=function(){return this.canEdit},t.prototype.render=function(){return this.requestReactView(this.el,i,{location:this.objectModel.get("location"),hasPermission:this.hasPermission(),onClickSave:this.saveLocation.bind(this),isRequired:this.isRequired})},t.prototype.saveLocation=function(e){if(e!==this.objectModel.get("location"))return this.objectModel.id?o.saveAttrs(this.objectModel,{location:e}):this.objectModel.set({location:e})},t}()},nDCZ0jUn:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("NvRnMquD"),l=n("zH+Yaocm"),u=n("3Xu1NP0g"),p=n.n(u),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){return i.a.createElement(c.a,{icon:"checkbox-checked-s",name:a.a.get("task.detail.status")},i.a.createElement("div",{className:p.a["task-status"]},this.renderContent()))},t.prototype.renderContent=function(){return i.a.createElement(l.TaskStatusCheckbox,{task:this.props.task,size:"large",onChange:this.props.onChange,onChangeError:this.props.onChangeError})},t}(i.a.PureComponent);n.d(t,"TaskStatus",function(){return d})},"nOG//8Lj":function(e,t,n){},nUH1srrj:function(e,t,n){e.exports=n.p+"images/search@2x.b61053d7.png"},nfPdorDU:function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty;a=n("a+N5u/Cl"),c=n("sa1Ed382"),r=n("GSNuuXNY"),o=n("/dfPTVwF"),i=n("OTplxZeS"),s=n("vmWJWrVe"),l=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="TagEntriesView",t.prototype.className="tag-entries-view fade",t.prototype.events={"click .open-detail":"openDetail"},t.prototype.initialize=function(e){var t;return this.tagModel=e.tagModel,this._projectId=e._projectId,this.entriesCollection=i.get("tag_"+this.tagModel.id),this.bookkeepingModel=new o,this.load().then((t=this,function(){if(t.el)return t.listen(),t.renderBasic(),t.renderItems(),t.refreshCount()})).catch(function(e){return l(e)}).then(function(){return"function"==typeof e.onFinish?e.onFinish():void 0}),this},t.prototype.load=function(){return new Promise((e=this,function(t,n){return e.tagModel.fetchRelation("entries",{attrs:{_projectId:e._projectId,page:1,count:500},success:function(n){var r;return null!=(r=e.entriesCollection)&&r.reset(n),t()},error:function(e,t){return n(t)}})}));var e},t.prototype.listen=function(){var e;return this.listenTo(this.entriesCollection,"add",this.renderItems),this.listenTo(this.entriesCollection,"remove",this.removeItem),this.listenTo(this.entriesCollection,"change:tagIds",(e=this,function(t,n){if(!((null!=n?n.indexOf(e.tagModel.id):void 0)>=0))return e.entriesCollection.remove(t),e.tagModel.refreshCache()})),this},t.prototype.renderBasic=function(){return this.$el.html(r()).hide(),this.$list=this.$(".tag-entries-list"),this},t.prototype.renderItems=function(e){var t,n;return e?(a.isArray(e)||(e=[e]),t=!0):(this.$list.empty(),e=this.entriesCollection.toJSON()),a.each(e,(n=this,function(e){return n.renderItem(e,t)})),this.refreshCount(),this},t.prototype.renderItem=function(e,t){var r;return n.e(33).then((r=this,function(o){var i,s,a,c;return a=n("LT1EfuSf"),c=e.id||e._id||e,i=r.requestSubView(a,{_entryId:c,displayFields:r.bookkeepingModel.getFields(["category","content"]),viewType:"open-detail"}).$el,(s=r.$(".entry-view[data-id="+c+"]")).length?s.replaceWith(i):r.$list[t?"prepend":"append"](i)}).bind(null,n)).catch(n.oe),this},t.prototype.removeItem=function(e){var t;return t=e.id||e._id||e,this.$(".entry-view[data-id="+t).remove(),this.refreshCount(),this},t.prototype.refreshCount=function(){var e;return e=this.entriesCollection.length,this.tagModel.set("entriesCount",e),this.$(".entries-count").text(e),e?this.$el.show().addClass("in"):this.$el.hide(),this},t.prototype.openDetail=function(e){var t;if(t=(null!=e?e.currentTarget:void 0)?$(e.currentTarget).data("id"):e)return c.APP.openEntryPreviewer(t),this},t}()},nfkxbxYy:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=(n("B53qLZ71"),n("TSYQbtd+")),i=n.n(o),s=n("tLZJUYWX"),a=n("q1tIBJhx"),c=function(e){function t(t){var n=e.call(this,t)||this;return n.cxPrefix="invite-members-modal__search",n.handleBlur=function(e){n.setState({isFocused:!1})},n.handleFocus=function(e){n.setState({isFocused:!0})},n.handleSearch=function(e){(0,n.props.onSearch)(e,e.currentTarget.value)},n.state={isFocused:!1},n}return r.d(t,e),t.prototype.renderHandlers=function(){return this.props.handlers?a.createElement("span",{className:this.cxPrefix+"__header__handlers"},this.props.handlers):null},t.prototype.renderHeader=function(){return this.props.showHeader&&a.createElement("div",{className:this.cxPrefix+"__header"},a.createElement("span",{className:this.cxPrefix+"__header__title"},s.get("account.invitation")),this.renderHandlers())},t.prototype.renderBody=function(){var e=this;return a.createElement("div",{className:this.cxPrefix+"__body"},a.createElement("div",{className:i()(e.cxPrefix+"__body__input-content",e.state.isFocused?e.cxPrefix+"__body__input-content__is-focused":null)},a.createElement("span",{className:this.cxPrefix+"__body__input-content__symbol icon icon-search"}),a.createElement("input",{autoCapitalize:"none",autoComplete:"off",autoFocus:!0,className:this.cxPrefix+"__body__input-content__input",defaultValue:this.props.defaultValue,onBlur:this.handleBlur,onChange:this.handleSearch,onFocus:this.handleFocus,placeholder:this.props.placeholder,type:"text"})))},t.prototype.render=function(){var e=this;return a.createElement("div",{className:i()(e.cxPrefix,e.props.className)},this.renderHeader(),this.renderBody())},t}(a.PureComponent);n.d(t,"a",function(){return c})},noT5B027:function(e,t,n){"use strict";n.r(t);var r=n("4BeYQFX4"),o=n.n(r),i=n("IaFtV71y"),s=n.n(i),a=new o.a({id:"object-entry",use:"object-entry-usage",viewBox:"0 0 20 20",content:'<symbol viewBox="0 0 20 20" id="object-entry"><defs><path id="object-entry_a" d="M10 4a6 6 0 1 1 0 12 6 6 0 0 1 0-12zm2.058 2.93L10 8.988 7.943 6.93a.45.45 0 1 0-.636.637L8.969 9.23H7.773a.45.45 0 1 0 0 .9H9.55v.867H7.773a.45.45 0 0 0 0 .9H9.55v1.353a.45.45 0 1 0 .9 0v-1.352h1.778a.45.45 0 0 0 0-.9H10.45v-.868h1.778a.45.45 0 1 0 0-.9h-1.196l1.663-1.662a.45.45 0 0 0-.637-.637z" /></defs><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><rect width="16" height="16" x="2" y="2" fill="#77C2F8" rx="2" /><use fill="#FFF" xlink:href="#object-entry_a" /></g></symbol>'});s.a.add(a);t.default=a},nsoHN48C:function(e,t,n){e.exports={"object-creator-menu":"object-creator-menu__2wRJ","object-creator-trigger":"object-creator-trigger__25I5"}},ntm4gBOK:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("a+N5u/Cl"),o=n("wu4EEviu"),r=n("qHH6+g6Q"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="objectlink",t.prototype.urlRoot="objectlinks",t.prototype.initialize=function(){if(t.__super__.initialize.apply(this,arguments),"collection"===this.get("linkedType")&&this.get("_linkedId"))return o.on(":change:collection/"+this.get("_linkedId"),(e=this,function(t){return t=i.extend({},e.get("data"),t),e.set("data",t)}));var e},t.prototype.initSubscribe=function(){var e,t,n;return e=this.get("_linkedId"),t=this.get("_parentId"),this.subscribeTo(e,"change",(n=this,function(e){var t;return t=i.extend(n.get("linked"),e.changed),n.set({linked:t}),n.trigger("change",n)})),this.subscribeTo(e,"destroy",function(e){return function(t){return e.trigger("destroy",e)}}(this)),this.subscribeTo(t,"change",function(e){return function(t){var n;return n=i.extend(e.get("parent"),t.changed),e.set({parent:n}),e.trigger("change",e)}}(this)),this.subscribeTo(t,"destroy",function(e){return function(t){return e.trigger("destroy",e)}}(this)),this},t}()},ntrC7oz9:function(e,t,n){e.exports=n.p+"images/w_taiyang@2x.61286876.png"},nxD9fhrn:function(e,t,n){"use strict";n.r(t),n.d(t,"NoteLiteComponent",function(){return c});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("7lticdRj"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderTitle=function(){return o.createElement("div",{className:"detail-infos-aside short-version"},o.createElement(s.Icon,{name:"book"}))},t.prototype.render=function(){var e=!1!==this.props.canEdit;return o.createElement("div",{className:"note-creator-container flex"},this.renderTitle(),o.createElement(a.a,{value:this.props.note,isEditable:e,emptyPlaceholder:i.get("entry.creator.placeholder.note"),onSave:this.props.onSave,isRequired:this.props.isRequired}))},t}(o.PureComponent)},nzzhqMsF:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("GESwhXbR"),a=n("CYJibKqy"),c=n("tLZJUYWX"),l=n.n(c),u=n("17x9q+7Q"),p=n("TSYQbtd+"),d=n.n(p),h=n("4c1CS0b3"),m=n("8yf6doCl"),f=n("LvDlAkAJ"),g=n.n(f),v=n("IssmDVnT"),b=n("s0r7VfKc"),y=n("90U+kJWN"),k=n("vJfEDQKx"),_=n("wRzn87sO"),w=n("0sqv5CMQ"),C=n("9Ip6qvet"),S=n("u/LJYZ+h"),E=n.n(S),T=n("7CIb8gEw"),I=n.n(T),M=n("a+N5u/Cl"),j=n("knRt0vpv"),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderDescription=function(){var e=this.props.taskId?i.a.createElement("div",{className:j["taskid-info"]},i.a.createElement(s.Icon,{name:"id",size:14}),i.a.createElement("span",null,this.props.taskId)):null,t=this.props.project?i.a.createElement(s.Tooltip,{title:this.props.project.name},i.a.createElement("div",{className:j["project-info"]},i.a.createElement(s.Icon,{name:"project",size:14}),i.a.createElement("span",{className:"info-text"},this.props.project.name))):null,n=Object(M.isEmpty)(this.props.executor)?null:i.a.createElement(s.Avatar,{src:this.props.executor.avatarUrl,size:"small"});return i.a.createElement("div",{className:j["item-description"]},e,t,n)},t.prototype.renderArchivedBadge=function(){return this.props.isArchived?i.a.createElement("div",{className:j["archived-badge"]},i.a.createElement(s.Icon,{name:"trash",size:12}),i.a.createElement("span",{className:j["archived-tips"]},c.get("search.archived"))):null},t.prototype.render=function(){var e=this.props.content;return i.a.createElement("div",{className:j["task-item"]},i.a.createElement("div",{className:j["task-title"]},i.a.createElement("div",{className:j["task-name-wrap"]},i.a.createElement(s.Icon,{name:"board"}),i.a.createElement("div",{className:j["task-name"]},e)),this.renderDescription()),i.a.createElement("div",{className:j["task-badge-wrap"]},this.renderArchivedBadge()))},t}(o.PureComponent),x=n("wVXDg9Ql"),N=n("YADA1w+/"),O=n.n(N),R=["task"],D=function(e,t){return void 0===t&&(t=!0),function(n){var o;return r.a({},n,{typeLoading:r.a({},n.typeLoading,(o={},o[e]=t,o))})}};function L(e){return g.a.map(e,function(e){return r.a({},e,{taskId:e.project.uniqueIdPrefix+"-"+e.uniqueId,searchType:"task",type:"task"})})}function z(e){return[r.a({},e,{searchType:"task",type:"task"})]}function A(e){return g.a.map(g.a.take(e,20),function(e){return r.a({},e.data,{type:e.refType,searchType:e.refType})})}function V(e,t){return!(!e._id||!t._id||e._id!==t._id)}var F,B=function(e){function t(t){var n=e.call(this,t)||this;return n.input$$=new m.Subject,n.loadMore$$=new m.Subject,n.setSelectableResults=function(e){n.selectableResults=e},n.setInputEl=function(e){n.inputEl=e},n.setDropdownRef=function(e){n.dropdown=e},n.onInputChange=function(e){n.input$$.next(e.target.value),n.dropdown&&!n.dropdown.visible&&n.dropdown.open()},n.onDropdownOpen=function(){n.state.recentList||(n.setState({isLoadingRecentList:!0}),b.default.fetch.get("footprint?types=task").takeUntil(n.input$$.last()).map(function(e){return g.a.reject(e,{_refId:n.props.parentId})}).map(A).toPromise().then(function(e){n.setState({recentList:e,isLoadingRecentList:!1})}).catch(g.a.noop))},n.onDropdownHide=function(){n.props.onClickOutside()},n.onInputKeyDown=function(e){n.selectableResults&&n.selectableResults.keyboardHandler(e)},n.onSelect=function(e){n.props.onSelect(e),n.clearInput(),n.dropdown&&n.dropdown.close()},n.onLoadMoreClick=function(e){return function(){n.loadMore$$.next(e)}},n.onEnter=function(e){var t=n.state,r=t.list,o=t.recentList,i=n.isSearching()?r[e]:o&&o[e];i&&(i.loadMore?n.loadMore$$.next(i.searchType):n.onSelect(i))},n.onClearInputClick=function(e){e.stopPropagation(),n.clearInput()},n.clearInput=function(){return n.input$$.next("")},n.loadMoreHandler=g.a.reduce(R,function(e,t){var o;return r.a({},e,((o={})[t]=n.onLoadMoreClick(t),o))},{}),n.state={recentList:void 0,list:[],input:"",isLoadingRecentList:!1,isLoadingSearchList:!1,typeLoading:{}},n}return r.d(t,e),t.prototype.getLoadMoreHandler=function(e){return this.loadMoreHandler[e]||g.a.noop},t.prototype.componentDidMount=function(){var e=this,n=this.props.organizationId?C.b.ORGANIZATION:C.b.PERSONAL,o=this.props.organizationId||void 0,i=this.props.parentId,s={};this.props.preferredSourceProject&&(s.boostProjectId=this.props.preferredSourceProject),this.inputSubscription=this.input$$.do(function(t){return e.setState({input:t})}).map(function(e){return g.a.trim(e)}).filter(function(e){return!!e}).do(function(){return e.setState({isLoadingSearchList:!0})}).debounceTime(400).switchMap(function(i){var a=i.match(t.taskUrlRegex),c=i.match(t.taskFullUrlRegex);if(a||c){var l=r.f(a||c,3)[2];return b.default.fetch.get("tasks/"+l).do(function(){return e.setState(D("task"))}).map(z).catch(function(e){return x.SDKInterceptor.ignore(e),h.Observable.of([])})}var u=i.match(k.TASK_ID_REGEX),p=h.Observable.of([]);if(u){var d=r.f(u,3),m=d[1],f=d[2];p=b.default.fetch.get("v2/tasks/search",{uniqueId:f,uniqueIdPrefix:m,spaceType:n,_organizationId:o}).map(L)}var y=v.Page.defaultState("v3/search",{urlQuery:r.a({q:i,spaceType:n,_organizationId:o,type:"task"},s),pageSize:5}),_=e.loadMore$$.filter(function(e){return"task"===e}).do(function(){return e.setState(D("task"))}),w=b.default.fetch.expandPage(y,{loadMore$:_}).map(function(e){return function(e,t){var n=e.result,o=e.hasMore;return r.h(g.a.map(n,function(e){return g.a.assign(e,{searchType:t})}),o?[{loadMore:!0,searchType:t}]:[])}(e,"task")}).do(function(){return e.setState(D("task",!1))});return h.Observable.combineLatest(p,w).map(g.a.flatten).catch(function(){return h.Observable.of([])})}).map(function(e){return g.a.uniqWith(g.a.reject(e,{_id:i}),V)}).subscribe(function(t){return e.setState({list:t,isLoadingSearchList:!1})}),this.dropdown&&!this.dropdown.visible&&this.dropdown.open(),this.inputEl&&this.inputEl.focus()},t.prototype.componentWillUnmount=function(){this.input$$.complete(),this.loadMore$$.complete(),this.inputSubscription&&this.inputSubscription.unsubscribe()},t.prototype.isSearching=function(){return!!this.state.input.trim()},t.prototype.isLoading=function(){return this.state.isLoadingRecentList||this.state.isLoadingSearchList},t.prototype.hasRecentResult=function(){var e=this.state.recentList;return!(this.isSearching()||!e||!e.length||this.isLoading())},t.prototype.renderRecent=function(){var e=this;return g.a.map(this.state.recentList,function(t,n){return i.a.createElement("li",{key:t._id||"all"+n,className:"result-item",onClick:function(){e.onSelect(t)}},e.renderItem(t.type,t))})},t.prototype.renderGroups=function(){var e=this;if(this.hasRecentResult()){var t=l.a.get("link.create.recently.viewed");return i.a.createElement(w.a,{key:"recent",type:"recent",displayName:t},this.renderRecent())}return this.isSearching()&&C.a.map(function(t){return{type:t,groupArray:e.state.list.map(function(e,t){return{index:t,item:e}}).filter(function(e){return e.item.searchType===t})}}).filter(function(e){return e.groupArray.length>0}).map(function(t){var n=t.type,r=t.groupArray;return i.a.createElement(w.a,{key:n,type:n},e.renderGroup(n,r))})},t.prototype.renderItem=function(e,t){return i.a.createElement(P,r.a({},t))},t.prototype.renderLoadMore=function(e){return this.state.typeLoading[e]?i.a.createElement(s.Loading,null):i.a.createElement(s.TextButton,{color:"gray",className:"search-all-handler"},i.a.createElement(s.Icon,{name:"more",size:16}),l.a.get("link.create.load.more"))},t.prototype.renderGroup=function(e,t){var n=this;return t.map(function(t){var r=t.index,o=t.item,s=o.loadMore?n.renderLoadMore(e):n.renderItem(e,o),a=o.loadMore?n.getLoadMoreHandler(e):function(){n.onSelect(o)};return i.a.createElement("li",{key:o._id||"all"+r,className:"result-item",onClick:a},s)})},t.prototype.renderPlaceholder=function(){var e=this.state,t=e.input,n=e.list,r=e.isLoadingSearchList,o=e.recentList,s=this.isSearching(),a=s&&g.a.isEmpty(n)&&!r;if(!s&&o&&0===o.length||a){var c=a?l.a.get("link.create.search.no.result",t):l.a.get("link.create.recent.no.result"),u=a?E.a:I.a,p=d()("no-result-placeholder",O.a["no-result-placeholder"]);return i.a.createElement("div",{className:p,key:"no-result"},i.a.createElement("img",{src:u,width:"72"}),i.a.createElement("span",{className:"placeholder-text"},c))}},t.prototype.renderLoading=function(){return this.isLoading()&&i.a.createElement(s.Loading,{key:"loading"})},t.prototype.renderContent=function(){var e=this.isLoading()?[this.renderLoading()]:r.h(Object(y.flattenPlainGroup)(Object(y.iterator)(this.renderGroups())),[this.renderPlaceholder()]);return i.a.createElement(_.b,{ref:this.setSelectableResults,focusable:!1,index:-1,onEnter:this.onEnter},e)},t.prototype.renderClearInputIcon=function(){var e=d()(O.a["clear-input"]);return i.a.createElement(s.Icon,{className:e,name:"circle-remove",onClick:this.onClearInputClick})},t.prototype.render=function(){var e=O.a["search-wrap"],t=d()("form-control search-input",O.a["search-input"]),n=this.inputEl&&this.inputEl.getBoundingClientRect(),r=n?n.width:560;return i.a.createElement(s.Dropdown,{className:"global-search-popover add-link-popover",content:this.renderContent(),persistence:!0,style:{width:r},action:"click",onOpen:this.onDropdownOpen,onHide:this.onDropdownHide,ref:this.setDropdownRef},i.a.createElement("div",{className:e},i.a.createElement(s.Icon,{name:"search",className:O.a["search-icon"],size:14}),i.a.createElement("input",{className:t,placeholder:l.a.get("task.dependency.create.input.placeholder"),value:this.state.input,onChange:this.onInputChange,onKeyDown:this.onInputKeyDown,ref:this.setInputEl,onClick:function(e){e.stopPropagation()}}),this.isSearching()?this.renderClearInputIcon():null))},t.propTypes={parentId:u.string,organizationId:u.string,onSelect:u.func.isRequired,onClickOutside:u.func.isRequired},t.taskUrlRegex=new RegExp(Object(y.NEW_REG_SOURCE)(["task"])),t.taskFullUrlRegex=new RegExp(Object(y.REG_SOURCE)(["task"])),t}(i.a.PureComponent),U=n("mgrpwCDb"),$=n("sa1Ed382"),H=n("wd/RKGTj"),G=n.n(H),q=n("oRqJmROU"),W=n("Z7XVTGXp"),J=n("PXasOaBr"),X=n("iPBkuJnN"),Y=n("xi8Rfh2S"),K=n("xY22QeOT"),Q=n("M3Thqi/G"),Z=n("au4f8wXm"),ee=n("uGvZvGGl"),te=function(e){function t(t){var n=e.call(this,t)||this;n.tipDot=o.createElement(o.Fragment,null," · "),n.setElementRef=function(e){n.taskBodyElement=e},n.state={hoverStartDate:null,hoverDueDate:null,isMouseDown:!1,resultStartDate:t.task.startDate,resultDueDate:t.task.dueDate,offsetLeft:0,offsetRight:null,moveOffsetLeft:0};var r=t.task,i=r.startDate,s=r.dueDate;return n.withoutDate=!(i||s),n}return r.d(t,e),t.prototype.componentDidMount=function(){this.updateTaskPosition()},t.prototype.componentWillUnmount=function(){this.props.onUpdateTaskPosition({width:0,offsetLeft:0,offsetTop:0,taskId:this.props.task._id})},t.prototype.getStyle=function(){var e=this.state,t=e.offsetLeft,n=e.offsetRight,o=e.hoverStartDate,i=e.hoverDueDate,s=this.props.task,a=s.startDate,c=s.dueDate,l=this.props.mode,u=Object(ee.c)(l,a,c,o,i),p=u.startDate,d=u.endDate,h=n||0,m={width:Object(ee.d)(p,d,l)-t+h};if(null!==p){var f=G()(this.props.startDate),g=Object(W.h)(f,p,l),v=Object(W.n)(g+t);m=r.a({},m,v)}return m},t.prototype.updateTaskPosition=function(){var e=this.state,t=e.hoverStartDate,n=e.hoverDueDate,r=this.props.task,o=r.startDate,i=r.dueDate,s=this.props,a=s.taskIndex,c=s.mode,l=Object(ee.c)(c,o,i,t,n),u=l.startDate,p=l.endDate,d=Object(ee.d)(u,p,c),h=J.b;if(null!==u){var m=G()(this.props.startDate),f=Object(W.h)(m,u,c),g={width:d,offsetTop:J.c+h*a,offsetLeft:f,taskId:this.props.task._id.toString()};this.props.onUpdateTaskPosition(g)}},t.prototype.renderTaskContentTip=function(){var e=this.props.task,t=e.content;return e.isVisible&&t&&o.createElement(s.Tooltip,{title:t},o.createElement("span",{className:"gantt-chart-task-content-tip"},t))},t.prototype.renderTaskTip=function(){var e=this.props.task.executor,t=e&&e.name,n=this.renderTaskContentTip(),r=t&&n?this.tipDot:null;return n||t?o.createElement("div",{className:"gantt-chart-task-tip"},n,r,t):null},t.prototype.renderLayer=function(){return o.createElement(Z.a,{task:this.props.task,isMoving:!1,hoverDueDate:this.state.hoverDueDate})},t.prototype.renderLayerBody=function(){var e=d()("gantt-chart-task-body",{fake:this.withoutDate});return o.createElement("div",{className:e,style:this.getStyle(),ref:this.setElementRef},this.renderLayer(),this.renderTaskTip())},t.prototype.render=function(){var e=this.props.task,t=e.startDate,n=e.dueDate,r=this.state,i=r.hoverStartDate,s=r.hoverDueDate,a=this.props.mode,c=Object(ee.d)(Object(ee.b)(t,i),Object(ee.a)(n,s),a),l=d()("gantt-chart-task-component",{"on-no-start":!t,"on-no-end":!n,done:this.props.task.isDone,"without-width":0===c});return o.createElement("div",{className:l},this.renderLayerBody())},t}(o.PureComponent),ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderTasks=function(e){var t=this;return e.map(function(e,n){return o.createElement(te,{taskIndex:n,key:e._id,mode:t.props.mode,task:e,startDate:t.props.startDate,onTaskScroll:t.props.onTaskScroll,onUpdateTaskPosition:t.props.onUpdateTaskPosition})})},t.prototype.render=function(){var e=this.props.tasks;return o.createElement("div",{className:"gantt-chart-body-component"},this.renderTasks(e))},t}(o.PureComponent),re=function(e){function t(t){var n=e.call(this,t)||this;n.scrollLeft=0,n.scrollTop=0,n.forceUpdateView=function(){var e=n.state,t=e.startDate,o=e.endDate,i=n.props.mode,s=Object(W.a)(t,o,i);n.setState(r.a({},n.state,{endDate:s}))},n.onChartTaskTriggerScroll=function(e,t){(e-=J.g)<=0||e>=n.$chartBox.clientWidth||(e<100&&n.scrollToLeft(n.$chartBox.scrollLeft-t),e>n.$chartBox.clientWidth-100&&n.scrollToLeft(n.$chartBox.scrollLeft+t))},n.onChartBoxRef=function(e){n.$chartBox=e},n.onCalenderBoxRef=function(e){n.$calenderBox=e},n.onCalenderScroll=function(e){var t=e.target.scrollLeft;n.scrollToLeft(t)},n.onChartScroll=function(e){var t=e.target,r=t.scrollTop,o=t.scrollLeft;n.calcScrollTopOrLeft(r,o)};var o=t.mode,i=Object(W.f)(t.startDate,o),s=Object(W.d)(i,t.endDate,o),a=Object(W.p)(o),c=Math.abs(a.diff(i,Object(W.H)(o))),l=Object(W.j)(a,i,o),u=Object(W.c)(o,l,i),p=u.currentDay,d=u.isPinCurrent;return n.state={startDate:i.toISOString(),endDate:s.toISOString(),current:c,currentDay:p,isPinCurrent:d},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;window.addEventListener("resize",this.forceUpdateView),setTimeout(function(){var t=e.state.current,n=e.props.mode,r=G()(e.state.startDate),o=r.clone().add(t,Object(W.H)(n)),i=Object(W.j)(o,r,n);e.scrollToLeft(i)},100)},t.prototype.scrollToLeft=function(e){if(e!==this.scrollLeft){var t=this.$chartBox.scrollWidth-this.$chartBox.clientWidth,n=this.$calenderBox.scrollWidth-this.$calenderBox.clientWidth;e=Math.min(e,t,n),this.scrollLeft=e,this.$chartBox.scrollLeft!==e&&(this.$chartBox.scrollLeft=e),this.$calenderBox.scrollLeft!==e&&(this.$calenderBox.scrollLeft=e);var o=Object(W.c)(this.props.mode,e,this.state.startDate),i=o.currentDay,s=o.isPinCurrent,a=G()(this.state.startDate),c=this.props.mode,l={current:G()(i).diff(a,Object(W.H)(c)),currentDay:i,isPinCurrent:s},u=M.pick(this.state,"current","currentDay","isPinCurrent");M.isEqual(u,l)||this.setState(r.a({},this.state,l))}},t.prototype.scrollToTop=function(e){this.scrollTop=e,this.$chartBox.scrollTop!==e&&(this.$chartBox.scrollTop=e)},t.prototype.deleteDependencyLine=function(e){return e},t.prototype.calcScrollTopOrLeft=function(e,t){e!==this.scrollTop?this.scrollToTop(e):this.scrollToLeft(t)},t.prototype.renderCalScaleSmall=function(e,t,n){switch(this.props.mode){case"unset":case"day":case"week":case"month":case"quarter":return o.createElement(Y.a,{mode:this.props.mode,startDate:e,from:t,to:n});case"year":return null}},t.prototype.render=function(){var e=this.props.mode,t=this.state,n=t.startDate,i=t.endDate,s=t.current,a=t.currentDay,c=t.isPinCurrent,l=Object(W.e)(s,e),u=Object(W.g)(e,n,i,s),p={width:Object(W.q)(n,i,e)},h=Object(W.H)(e),m=G()(n).add(l,h),f=Object(W.j)(m,G()(n),h),g=m.clone().add(u-l+1,h),v=r.a({},Object(W.n)(f),{width:Object(W.j)(g,m,e)}),b=d()("gantt-month-pin",{hide:!c}),y={width:Object(W.y)(e)};return o.createElement("div",{className:"gantt-wrapper gantt-component thin-scroll row-flex"},o.createElement("section",{className:"gantt-right col-flex"},o.createElement("header",null,o.createElement("div",{className:b,style:y},Object(W.m)(G()(a),e)),o.createElement("div",{className:"gantt-calender-box",ref:this.onCalenderBoxRef,onScroll:this.onCalenderScroll},o.createElement("div",{className:"gantt-cotton",style:p},o.createElement("div",{className:"gantt-calender-wrapper",style:v},o.createElement(X.a,{mode:e,startDate:n,current:s,currentDay:a,from:l,to:u}),this.renderCalScaleSmall(n,l,u))))),o.createElement("section",null,o.createElement("div",{className:"gantt-chart-box thin-scroll",ref:this.onChartBoxRef,onScroll:this.onChartScroll},o.createElement("div",{className:"gantt-cotton",style:p},o.createElement("div",{className:"gantt-fences-wrapper",style:v},o.createElement(K.a,{mode:e,startDate:n,from:l,to:u})),o.createElement(Q.a,{isLoading:!1,lines:this.props.dependencyLines,taskPositions:this.props.taskPositions,hasDependencyPermission:!1,onDeleteDependencyLine:this.deleteDependencyLine}),o.createElement(ne,{tasks:this.props.tasks,mode:e,startDate:n,endDate:i,onTaskScroll:this.onChartTaskTriggerScroll,onUpdateTaskPosition:this.props.onUpdateTaskPosition}))))))},t}(o.PureComponent),oe={unset:0,day:7,week:30,month:90,quarter:365,year:1/0},ie=function(e){function t(t){var n=e.call(this,t)||this;return n.onUpdateTaskPosition=function(e){if(e){var t=e.taskId;n.setState(function(n){var o;return r.a({},n,{taskPositions:r.a({},n.taskPositions,(o={},o[t]=e,o))})})}},n.getStartAndEndDate(),n.getViewMode(),n.state={taskPositions:{}},n}return r.d(t,e),t.prototype.getStartAndEndDate=function(){var e=this,t=this.props.tasks.map(function(t){var n=Object(ee.c)(e.mode,t.startDate,t.dueDate,null,null);return{startDate:n.startDate,endDate:n.endDate}}),n=t.map(function(e){return e.startDate}).filter(q.c),r=t.map(function(e){return e.endDate}).filter(q.c);n.length>0&&(this.startDate=M.chain(n).map(function(e){return G()(e).startOf("day")}).min().value().toISOString()),r.length>0&&(this.endDate=M.chain(r).map(function(e){return G()(e).startOf("day")}).max().value().toISOString())},t.prototype.getViewMode=function(){var e=G()(this.endDate).diff(this.startDate,"days");for(var t in oe){if(e<oe[t]){this.mode=t;break}}this.mode=this.mode||"day"},t.prototype.render=function(){var e=this.state.taskPositions;return o.createElement("div",{className:"dependency-gantt"},o.createElement(re,{tasks:this.props.tasks,dependencyLines:this.props.dependencyLines,startDate:this.startDate,endDate:this.endDate,mode:this.mode,taskPositions:e,onUpdateTaskPosition:this.onUpdateTaskPosition}))},t}(o.PureComponent),se=(n("xls+Hirz"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openDependencyDetails=function(){$.gta.event({action:"preview dependency",control:"Detail Page",type:"task"})},t}return r.d(t,e),t.prototype.renderGantt=function(){return i.a.createElement(ie,r.a({},this.props))},t.prototype.renderTrigger=function(){return i.a.createElement(s.TextButton,{color:"blue",onClick:function(e){e.stopPropagation()}},c.get("task.detail.task.dependency.preview"))},t.prototype.render=function(){var e=this.renderTrigger();return i.a.createElement(s.PopupMenu,{main:0,trigger:e},i.a.createElement(s.PopupMenuView,{className:"dependency-details-popup-view",index:0,title:c.get("task.detail.task.dependency.preview.title")},this.renderGantt()))},t}(i.a.PureComponent)),ae=n("HagJDa9N");!function(e){e.Add="ADD",e.AddCancel="ADD_CANCEL",e.CheckConflict="CHECK_CONFLICT",e.CheckConflictSuccess="CHECK_CONFLICT_SUCCESS",e.Create="CREATE",e.CreateFail="CREATE_FAIL",e.CreateSuccess="CREATE_SUCCESS",e.Delete="DELETE",e.DeleteFail="DELETE_FAIL",e.DeleteSuccess="DELETE_SUCCESS",e.Expand="EXPAND",e.Collapse="COLLAPSE",e.Load="LOAD",e.LoadFail="LOAD_FAIL",e.LoadSuccess="LOAD_SUCCESS",e.PreventedCheckDone="PREVENTED_CHECK_DONE",e.UpdateDepKind="UPDATE_DEP_KIND",e.UpdateDepKindFail="UPDATE_DEP_KIND_FAIL",e.UpdateDepKindSuccess="UPDATE_DEP_KIND_SUCCESS",e.Quit="QUIT"}(F||(F={}));var ce=function(e,t){return void 0===t&&(t=void 0),{type:e,payload:t}},le=function(e){return function(t){return t.type===e}};function ue(e,t){switch(t.type){case F.Add:return r.a({},e,{add:!0,addType:t.payload});case F.AddCancel:case F.CreateFail:return r.a({},e,{add:!1,addType:void 0});case F.CreateSuccess:return r.a({},e,{add:!1,addType:void 0,collapsed:!1});case F.Collapse:return r.a({},e,{collapsed:!0});case F.Expand:return r.a({},e,{collapsed:!1});case F.Load:return r.a({},e,{taskId:t.payload,isLoading:!0});case F.LoadFail:return r.a({},e,{isLoading:!1});case F.LoadSuccess:return r.a({},e,{dependencies:t.payload});default:return e}}var pe=n("Oz5YBPa+"),de=n("eBzvnLeU"),he=n("UiuZC/pL"),me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onToggle=function(e){e.stopPropagation();var n=t.props.collapsed?ce(F.Expand):ce(F.Collapse);t.props.dispatchAction(n)},t.createDependency=function(e){t.props.dispatchAction(ce(F.Create,{otherTaskId:e._id,kind:"finish_start"}))},t.onAddCancel=function(){t.props.dispatchAction(ce(F.AddCancel))},t.onDelete=function(e){t.props.dispatchAction(ce(F.Delete,e))},t.onUpdate=function(e,n){t.props.dispatchAction(ce(F.UpdateDepKind,{dependencyId:e,kind:n}))},t.onAddPre=function(){t.props.dispatchAction(ce(F.Add,"pre"))},t.onAddPost=function(){t.props.dispatchAction(ce(F.Add,"post"))},t}return r.d(t,e),t.prototype.renderAddDependency=function(){var e={pre:c.get("task.menu.add.pre.dependency.task"),post:c.get("task.menu.add.post.dependency.task")},t=this.props.add,n=t&&e[t]||"";return t?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:he["add-task-dependency-title"]},n),i.a.createElement(B,{parentId:this.props.taskId,organizationId:this.props.organizationId,preferredSourceProject:this.props.projectId,onSelect:this.createDependency,onClickOutside:this.onAddCancel})):null},t.prototype.renderInfo=function(){var e=Object(U.parseDatas)(this.props.data),t=e.dependencyLines,n=e.tasks,r=""+he["task-dependency-info"];return i.a.createElement("div",{className:r},i.a.createElement(s.Icon,{name:"dependency"}),c.get("task.detail.task.dependency.current.count",this.props.data.length),i.a.createElement(se,{dependencyLines:t,tasks:n}))},t.prototype.renderToggle=function(){var e=this.props.collapsed?t.up:t.down;return i.a.createElement(pe,{animation:e,duration:300},i.a.createElement(s.TextButton,null,i.a.createElement(s.Icon,{name:"chevron-down"})))},t.prototype.renderDependencies=function(e){var t=Object(U.parseTasks)(this.props.data,this.props.taskId),n=t.preTasks,r=t.postTasks;return i.a.createElement("div",{className:"task-dependency-group"},this.renderPreDependencyTasks(n,e),this.renderPostDependencyTasks(r,e))},t.prototype.renderDependencyGroupHeader=function(e){var t="pre"===e?c.get("task.detail.task.dependency.group.title.pre"):c.get("task.detail.task.dependency.group.title.post"),n="pre"===e?this.onAddPre:this.onAddPost;return i.a.createElement("div",{className:he["task-dependency-group-header"]},i.a.createElement("div",{className:"title"},t),i.a.createElement(s.TextButton,{className:"add-handler",color:"blue",onClick:n},c.get("add")))},t.prototype.renderPreDependencyTasks=function(e,t){var n=this,r="pre"===this.props.add?t:null,o=null;r?o=r:e.length>0&&(o=this.renderDependencyGroupHeader("pre"));var s=e.map(function(e){return i.a.createElement(a.b,{key:e._id,task:e,group:"pre",onClickItem:n.props.onClickItem,onDelete:n.onDelete,onUpdate:n.onUpdate})});return i.a.createElement(i.a.Fragment,null,o,s)},t.prototype.renderPostDependencyTasks=function(e,t){var n=this,r="post"===this.props.add?t:null,o=null;r?o=r:e.length>0&&(o=this.renderDependencyGroupHeader("post"));var s=e.map(function(e){return i.a.createElement(a.b,{key:e._id,task:e,group:"post",onClickItem:n.props.onClickItem,onDelete:n.onDelete,onUpdate:n.onUpdate})});return i.a.createElement(i.a.Fragment,null,o,s)},t.prototype.render=function(){var e=this.props,n=e.add,r=e.collapsed,o=e.data.length;if(0===o&&!n)return null;var s=n?i.a.createElement("div",{className:"add"},this.renderAddDependency()):null;return 0===o&&n?i.a.createElement("div",{className:he["task-dependency"]},s):i.a.createElement("div",{className:he["task-dependency"]},i.a.createElement("div",{className:he["task-dependency-header"],onClick:this.onToggle},this.renderInfo(),this.renderToggle()),r&&s?s:null,i.a.createElement(de,{component:"div",enter:t.transitEnter,leave:t.transitLeave},r?null:this.renderDependencies(s)))},t.transitEnter={animation:"slideDown",duration:300,style:{height:""}},t.transitLeave={animation:"slideUp",duration:300},t.up={rotateZ:0},t.down={rotateZ:-180},t}(o.PureComponent),fe=function(e){return{finish_finish:"FF",finish_start:"FS",start_finish:"SF",start_start:"SS"}[e]},ge=function(e){function t(t){var n=e.call(this,t)||this;return n.dispatchAction=function(e){n.action$.next(e)},n.state={add:!1,collapsed:!0,isLoading:!1,taskId:t.taskId,dependencies:[]},n.action$=new m.Subject,n}return r.d(t,e),t.prototype.componentDidMount=function(){var e,t,n,o,i,s,a,c,l,u,p,d,m,f,g,v,y,k=this,_=this.action$.scan(ue,r.a({},this.state)).do(function(e){Object(M.isEqual)(e,k.state)||k.setState(e)}),w=h.Observable.zip(this.action$,_).map(function(e){var t=r.f(e,2),n=t[0],o=t[1];return r.a({},n,{state:o})}),C=(e=w,t=e.share(),n=t.filter(le(F.CheckConflict)),o=t.filter(le(F.Create)),i=t.filter(le(F.CreateSuccess)),s=t.filter(le(F.Delete)),a=t.filter(le(F.Load)),c=t.filter(le(F.LoadSuccess)).debounceTime(500).share(),l=t.filter(le(F.UpdateDepKind)),u=t.filter(le(F.UpdateDepKindSuccess)),p=t.filter(le(F.Quit)),d=o.concatMap(function(e){var t=e.payload,n=t.otherTaskId,o=t.kind,i=e.state,s=i.taskId,a=i.addType,c=r.f("pre"===a?[n,s]:[s,n],2),l=c[0],u=c[1];return b.default.fetch.createTaskDependency({_fromId:l,_toId:u,kind:o}).map(function(){return ce(F.CreateSuccess)}).catch(function(){return h.Observable.of(ce(F.CreateFail))})}),m=s.concatMap(function(e){var t=e.payload;return b.default.fetch.deleteTaskDependency(t).map(function(){return ce(F.DeleteSuccess)}).catch(function(){return h.Observable.of(ce(F.DeleteFail))})}),f=a.switchMap(function(e){var t=e.payload;return b.default.getDependenciesByTaskId(t,{withTask:!0}).changes().map(function(e){return ce(F.LoadSuccess,e)}).catch(function(){return h.Observable.of(ce(F.LoadFail))})}),g=h.Observable.merge(n,i.switchMap(function(){return c.take(1)}),u.switchMap(function(){return c.take(1)})).do(function(e){var t=e.payload,n=e.state,r=(t||n.dependencies).filter(U.hasConflict).length;r>0&&Object(ae.a)(r,[n.taskId])}).map(function(){return ce(F.CheckConflictSuccess)}),v=l.concatMap(function(e){var t=e.payload,n=t.dependencyId,r=t.kind;return b.default.updateTaskDependency(n,{kind:r}).map(function(){return ce(F.UpdateDepKindSuccess)}).catch(function(){return h.Observable.of(ce(F.UpdateDepKindFail))})}),h.Observable.merge(d,m,f,v,g).takeUntil(p)).do(function(e){return k.action$.next(e)}),S=this.action$.map((y=this.props.isSubtask,function(e){var t={control:"Detail Page",type:y?"subtask":"task"};switch(e.type){case F.Add:return r.a({},t,{action:"add dependency",control:"More Menu",category:"pre"===e.payload?"previous task":"next task"});case F.Collapse:return r.a({},t,{action:"toggle dependency",category:"off"});case F.CreateSuccess:return r.a({},t,{action:"edited content",category:"dependency"});case F.Expand:return r.a({},t,{action:"toggle dependency",category:"on"});case F.PreventedCheckDone:return r.a({},t,{action:"constrained by dependency"});case F.UpdateDepKind:var n=fe(e.payload.kind);return r.a({},t,{action:"edited content",category:"dependency",note1:n});case F.Delete:return r.a({},t,{action:"edited content",category:"dependency",note1:"delete"});default:return}})).filter(q.c).do(function(e){return $.gta.event(e)}).catch(function(){return h.Observable.empty()});this.subs=h.Observable.merge(C,S).subscribe(),this.action$.next(ce(F.Load,this.props.taskId))},t.prototype.componentWillUnmount=function(){this.action$.next(ce(F.Quit)),this.subs.unsubscribe(),this.action$.complete()},t.prototype.addTaskDependency=function(e){this.dispatchAction(ce(F.Add,e))},t.prototype.checkConflict=function(){this.dispatchAction(ce(F.CheckConflict))},t.prototype.preventedCheckDone=function(){this.dispatchAction(ce(F.PreventedCheckDone))},t.prototype.render=function(){return i.a.createElement(me,{taskId:this.state.taskId,add:this.state.addType,collapsed:this.state.collapsed,organizationId:this.props.organizationId,projectId:this.props.projectId,data:this.state.dependencies,onClickItem:this.props.onClickItem,dispatchAction:this.dispatchAction})},t}(i.a.PureComponent);n.d(t,"TaskDependencyComponent",function(){return me}),n.d(t,"hasConflict",function(){return U.hasConflict}),n.d(t,"conflictReminder",function(){return ae.a}),n.d(t,"TaskDependencyWrapper",function(){return ge}),n.d(t,"gtaDependencyKind",function(){return fe})},o2xN9HeW:function(e,t,n){e.exports=n.p+"images/collection@2x.33f68f30.png"},"o4N9kv/m":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b={}.hasOwnProperty;n("a+N5u/Cl"),v=n("sa1Ed382"),l=n("3eMzznN/"),c=n("RQ44psah"),u=n("vmWJWrVe"),p=n("OmupbwLD"),s=n("eubUSX4T"),r=n("9sOPw9dz"),o=n("MmYzUhjM"),i=n("cYPCnssF").UploadError,f=n("MmYzUhjM").getFileSizeLimit,g=n("70UrrKBP"),m=g.getFileExtension,h=g.getFileCategory,d=g.createThumbnail,a=g.Uploader,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)b.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,u),t.prototype.viewName="WorkUploaderView",t.prototype.initialize=function(e){if(!e.isBackground&&!e.collection)throw new Error("no isBackground and no collection in work-uploader");if(!e.notCheckProjectSizeLimit&&e.collection&&!e.targetModel)throw new Error("no targetModel in work-uploader, need check project sizeLimit");return this.uploader=new a(Object.assign({},{fileSizeLimit:(t=this,function(n){var r;return e.notCheckProjectSizeLimit||!t.isTargetProject(e)?v.config.FILE_FREE_SIZE:(r=t.getTargetModel(e),f(r.payment))}),onCreateBatch:function(t){return function(n){var r,o,i;return e.collection?r=e.collection:(o=v.APP.getGlobalUploaderTargetInfo().collectionId,r=new s([],{_boundToObjectId:o})),i=r.length,r.add(n.map(function(e){return Object.assign(t.getWorkData(e),{queued:!0,completed:!1})})),e.isBackground&&v.APP.worksBgUploader.addCollection(r),{collection:r,length:i}}}(this),onCreate:function(e,t,n){var r,o;return r=n.collection,o=r.at(t+(n.length||0)),d(e).subscribe(function(e){return o.set("thumbnail",e)}),{model:o,collection:r}},onStart:function(t,n){return e.isBackground&&v.APP.worksBgUploader.show(),n.model.set("queued",!1),n.model.setupUploadHandlers(t)},onProgress:function(e,t){return t.model.progress(e)},onComplete:function(e,t){return t.model.set(Object.assign(t.model.parse(e),{thumbnail:"",completed:!0}))},onPausable:function(e,t){return t.model.pausable(e)},onRetryable:function(e,t){return t.model.retryable(e)},onError:function(t){return function(n,r){var o;if(n instanceof i&&r.model&&(e.isBackground?r.model.get("progress")||(r.model.abort(),r.collection.remove(r.model)):r.collection.remove(r.model)),n instanceof i&&n.state===i.SizeLimit&&!e.notCheckProjectSizeLimit&&t.isTargetProject(e))return o=t.getTargetModel(e),t.showProjectSizeWarning(n,r,o)}}(this)},e));var t},t.prototype.getWorkData=function(e){return{fileName:e.name,fileSize:e.size,fileType:m(e),fileCategory:h(e),thumbnailUrl:"",filePath:e.path,webkitRelativePath:e.webkitRelativePath}},t.prototype.isTargetProject=function(e){var t;return"project"===(null!=(t=this.getTargetModel(e))?t.name:void 0)},t.prototype.getTargetModel=function(e){return e.targetModel?e.targetModel:v.APP.getGlobalUploaderTargetInfo().projectModel},t.prototype.showProjectSizeWarning=function(e,t,n){var i,s,a;if(n.payment.isFree)return a="business","project"===n.name&&(a="plus"),v.gta.event({type:a,action:"reach plan limit",control:"file size"}),i=l.formatFileSize(o.FILE_FREE_SIZE,0),s=l.formatFileSize(o.FILE_MAX_SIZE,0),this.requestSubView(p).open(r,{title:tb_i18n.get("uploader.file.exceed"),content:tb_i18n.get("uploader.file.exceed.size.free",e.data.file.name,i,s),confirmText:tb_i18n.get("upgrade"),confirmHref:c.pay.plans})},t.prototype.remove=function(){return this.uploader.destroy(),t.__super__.remove.apply(this,arguments)},t}()},oBMTqYJ0:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("GESwhXbR"),s=n("tLZJUYWX"),a=n("AjX2Fov0");n("+IbFgNGC");var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootCls="taskflow-status-label-list",t.stopPropagation=function(e){e.stopPropagation()},t}return r.d(t,e),t.prototype.renderItems=function(){var e=this;return 0===this.props.data.length?this.renderPlaceholder():this.props.data.map(function(t){return o.createElement(a.a,{key:t._id,status:t,selected:t._id===e.props.selectedId,onSelect:e.props.onSelect})})},t.prototype.renderPlaceholder=function(){return o.createElement("section",{className:this.rootCls+"-placeholder"},o.createElement("div",{className:this.rootCls+"-placeholder-img"}),o.createElement("p",null,s.get("taskflow.status.transform.list.empty")))},t.prototype.renderTestcaseFooter=function(){return"testcase"===this.props.type&&this.props.showJumpToNext&&o.createElement(o.Fragment,null,o.createElement(i.Separator,{full:!0}),o.createElement(i.Checkbox,{checked:this.props.jumpToNext,onClick:this.stopPropagation,onChange:this.props.onToggleJumpToNext,className:"taskflow-status-label-list-jump-next",label:s.get("flowstatus.menu.testcase.footer")}))},t.prototype.render=function(){return o.createElement(i.Menu,{className:this.rootCls},this.renderItems(),this.renderTestcaseFooter())},t.defaultProps={type:"task"},t}(o.PureComponent)},oCfSqszA:function(e,t,n){"use strict";n.r(t),n.d(t,"DirectMessagePanelComponent",function(){return l});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("NdG5lKr9"),s=n("GESwhXbR"),a=n("sa1Ed382"),c=function(e){function t(t){var n=e.call(this,t)||this;return n.panelType="direct",n}return r.d(t,e),t.prototype.renderHandlers=function(){return o.createElement("div",{className:"header-handlers"},o.createElement(s.IconButton,{name:"remove",color:"gray",onClick:this.props.removeChatModal}))},t.prototype.renderHeaderContent=function(){var e=this.props.roomInfo,t=e&&e.users;if(!e||!t)return null;var n=r.f(t.filter(function(e){return e._id!==a.user.id}),1)[0],i=n&&n.name;return o.createElement("div",{className:"header-content"},o.createElement(s.Tooltip,{title:i},o.createElement("h4",null,i)),this.renderHandlers())},t}(i.a),l=Object(i.b)(c)},oE8S651X:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("/MKjzBat"),a=n("dtw8XZ3o"),c=n("tLZJUYWX"),l=n.n(c),u=n("f0NJUF9/"),p=n("fO/hx3w1"),d=n.n(p),h=n("PuqeRHPh"),m=n.n(h),f=n("JZM8nUfk"),g=n.n(f),v=n("TSYQbtd+"),b=n.n(v),y=n("sfEmw17c"),k=n("GESwhXbR"),_=n("sa1Ed382"),w=n("Jodm6imw"),C=n.n(w),S=n("3WF5WP/g"),E=n.n(S),T=n("Xp7I1dFv"),I=n.n(T),M=n("mNz5hSha"),j=n.n(M),P=n("4c1CS0b3"),x=n("rx72K1eX"),N=n("dWbDnvg6"),O=(0,n("zi/b5T/r").default)(function(e){function t(t){var n=e.call(this,t)||this;return n.setInputRef=function(e){n.inputRef=e},n.handleSubmit=function(){var e=n.state.name.trim();e&&e!==n.props.name&&Object(u.n)(e)<=100?n.props.onChangeName(e):n.props.onChangeName(null)},n.handleFocusAtEnd=function(){var e=n.state.name.length;n.inputRef.focus(),n.inputRef.setSelectionRange(e,e)},n.handleKeyDown=function(e){13===e.which&&(e.stopPropagation(),e.preventDefault(),n.handleSubmit())},n.handleChange=function(e){var t=e.currentTarget.value;n.setState({name:t})},n.handleClickOutside=function(){n.handleSubmit()},n.state={name:n.props.name},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.handleFocusAtEnd()},t.prototype.render=function(){return i.a.createElement("input",{ref:this.setInputRef,type:"text",value:this.state.name,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onFocus:this.handleFocusAtEnd})},t}(i.a.PureComponent)),R=n("BsTK5jZO"),D=n("3nOnSD6h"),L=function(e){function t(t){var n=e.call(this,t)||this;n.rootClassName="top-bar",n.setModalRef=function(e){n.modalRef=e},n.setSaveAsDropdownRef=function(e){n.saveAsDropdownRef=e},n.setMemberMenuWrapper=function(){var e=new D.InvolverManagement(E()(n.props.report.involveMembers,"_id"),{put:!0,del:!1},_.user.id),t={_id:n.props.organizationId};return Object(D.createMemberMenuWrapper)({search:function(e){return R.InvolverInput.loadSearch("organization",t,e).catch(function(){return P.Observable.empty()})},loadRecommend:function(){return R.InvolverInput.loadInitialRecommend("organization",t,{hideAllProjectMembersHandler:!0}).catch(function(){return P.Observable.empty()})},commit:function(){var t=e.preparePayload(!1);return t||P.Observable.of(null),n.handleGtaEvent("involve member"),P.Observable.of(n.props.onShare(t))},involverMgmt:e},{nested:!0,searchNotFoundPlaceholder:{text:l.a.get("member.menu.not.found.in.organization")},selectedTitle:""})},n.handleChangeSaveAsName=function(e){var t=e.currentTarget.value;n.setState({saveAsName:t})},n.handleClickEdit=function(){n.setState({isEditing:!n.state.isEditing})},n.handleClickStar=function(){n.handleGtaEvent("star chart"),n.props.report.isStarred?n.props.onCancelStar(n.props.report._id):n.props.onStar(n.props.report._id)},n.handleClickDelete=function(){n.modalRef.open()},n.handleEditName=function(e){n.handleGtaEvent("rename chart"),n.setState({isEditing:!1},function(){null!==e&&n.props.onEditName({name:e.trim()})})},n.handleSave=function(){n.handleGtaEvent("save chart"),n.props.onSave()},n.handleSaveAs=function(){n.handleGtaEvent("duplicate chart"),n.saveAsDropdownRef&&n.saveAsDropdownRef.close(),n.props.onSaveAs({_featureId:n.props.report._featureId,name:n.state.saveAsName.trim(),logo:n.props.report.logo}),n.state.saveAsName&&n.setState({saveAsName:""})},n.handleClickCustom=function(e){return function(){n.props.onClickCustom(e)}},n.handleClickDeleteMember=function(e){return function(){n.handleGtaEvent("involve member"),n.props.onShare({delInvolvers:[e._id]})}},n.handleDelete=function(){n.handleGtaEvent("delete chart"),n.props.onDelete(n.props.report._id)};var r=n.props.report,o=r.creator,i=r.involveMembers,s=o._id!==_.user.id&&!!~E()(i,"_id").indexOf(_.user.id);return n.MemberMenuWrapper=n.setMemberMenuWrapper(),n.state={isInvolver:s,isEditing:!1,saveAsName:""},n}return r.d(t,e),t.prototype.componentWillUnmount=function(){this.modalRef&&this.modalRef.close()},t.prototype.handleGtaEvent=function(e){_.gta.event({action:e,category:this.props.report.isDefault?"template":"chart",control:"navigation bar",method:"click",organizationid:this.props.organizationId,page:"Reporting App",pluginid:this.props.report._consumerId,note1:this.props.report._id})},t.prototype.renderDeleteMemberDropdown=function(e){return i.a.createElement(k.Menu,null,i.a.createElement(k.MenuItem,{onClick:this.handleClickDeleteMember(e)},l.a.get("remove")))},t.prototype.renderDeleteMemberButton=function(e){return this.state.isInvolver&&e._id!==_.user.id?i.a.createElement("span",{"data-role":"operator"},l.a.get("organization.report.app.readonly")):i.a.createElement(k.Dropdown,{className:b()(C.a["delete-member-dropdown"]),content:this.renderDeleteMemberDropdown(e),nested:!0},i.a.createElement("button",null,i.a.createElement("span",null,l.a.get("organization.report.app.readonly")),i.a.createElement(k.Icon,{name:"chevron-down",size:12})))},t.prototype.renderSelectMemberDropdown=function(){var e=this.props.report,t=e.creator,n=e.involveMembers;if(t._id!==_.user.id)return null;var r=[{id:t._id,type:"user",name:t.name,avatar:{type:N.b.Img,src:t.avatarUrl}}];return n.forEach(function(e){r.push({id:e._id,type:"user",name:e.name,avatar:{type:N.b.Img,src:e.avatarUrl}})}),i.a.createElement(this.MemberMenuWrapper,{key:j()("member_menu"),involvers:r,inviteShowed:!1},i.a.createElement("section",null,i.a.createElement(k.TextButton,{color:"blue"},i.a.createElement(k.Icon,{name:"circle-plus"}),l.a.get("add.member"))))},t.prototype.renderMemberList=function(){var e=this,t=this.props.report.involveMembers,n=[this.props.report.creator].concat(t).map(function(t){var n=t._id===e.props.report._creatorId?i.a.createElement("span",{"data-role":"operator"},l.a.get("creator")):e.renderDeleteMemberButton(t);return i.a.createElement(k.MenuItem,{key:t._id},i.a.createElement("section",null,i.a.createElement(k.Avatar,{src:t.avatarUrl}),i.a.createElement(k.Tooltip,{title:t.name},i.a.createElement("span",{"data-role":"name"},t.name))),i.a.createElement("section",null,n))});return i.a.createElement(k.Menu,null,n)},t.prototype.renderMoreDropdown=function(){return i.a.createElement(k.Menu,null,i.a.createElement(k.MenuItem,{onClick:this.handleClickDelete},l.a.get("delete")))},t.prototype.renderShareDropdown=function(){return i.a.createElement(i.a.Fragment,null,this.renderSelectMemberDropdown(),this.renderMemberList())},t.prototype.renderSaveAsDropdown=function(){var e=this.state.saveAsName.trim();return i.a.createElement("div",{className:b()(C.a["save-as-dropdown"])},i.a.createElement("input",{type:"text",placeholder:l.a.get("organization.report.app.report.name"),autoFocus:!0,value:this.state.saveAsName,onChange:this.handleChangeSaveAsName}),i.a.createElement(k.Button,{disabled:!e||Object(u.n)(e)>100,onClick:this.handleSaveAs},l.a.get("organization.report.app.confirm")))},t.prototype.renderClose=function(){return i.a.createElement(k.IconButton,{color:"gray",name:"remove",onClick:this.props.onClose})},t.prototype.renderMore=function(){return this.props.report.isDefault||this.state.isInvolver?null:i.a.createElement(k.Dropdown,{className:b()(C.a["more-dropdown"]),content:this.renderMoreDropdown(),nested:!0},i.a.createElement(k.TextButton,null,i.a.createElement(k.Icon,{name:"more"}),l.a.get("more")))},t.prototype.renderShare=function(){return this.props.report.isDefault?null:i.a.createElement(k.TitledDropdown,{title:l.a.get("organization.report.app.share"),titleCls:b()(C.a.bold),className:b()(C.a["share-dropdown"]),content:this.renderShareDropdown(),nested:!0},i.a.createElement(k.TextButton,null,i.a.createElement(k.Icon,{name:"org-users"}),l.a.get("organization.report.app.share")))},t.prototype.renderCustom=function(){var e=this,t=this.props,n=t.report,r=t.isLoadingIframe,o=t.thirdPartyPermissions.customOrders;if(n.isDefault||!o||r)return null;var s=I()(o,3).map(function(t){var n=t.title.length>4?t.title.slice(0,4)+"···":t.title;return i.a.createElement(k.Tooltip,{key:t.type,title:t.title},i.a.createElement(k.TextButton,{onClick:e.handleClickCustom(t)},t.icon&&i.a.createElement(k.Icon,{name:t.icon}),n))});return i.a.createElement(i.a.Fragment,null,s)},t.prototype.renderSaveAs=function(){return!this.props.thirdPartyPermissions.saveAs||this.props.isLoadingIframe?null:i.a.createElement(k.TitledDropdown,{ref:this.setSaveAsDropdownRef,title:l.a.get("organization.report.app.save.as"),titleCls:b()(C.a.bold),content:this.renderSaveAsDropdown(),nested:!0},i.a.createElement(k.TextButton,null,i.a.createElement(k.Icon,{name:"copy"}),l.a.get("organization.report.app.save.as")))},t.prototype.renderSave=function(){var e=this.props,t=e.report,n=e.isLoadingIframe,r=e.thirdPartyPermissions,o=this.state.isInvolver;return t.isDefault||n||!r.save||o?null:i.a.createElement(k.TextButton,{onClick:this.handleSave},i.a.createElement(k.Icon,{name:"disk"}),l.a.get("save"))},t.prototype.renderDescription=function(){if(this.props.report.isDefault)return null;var e=l.a.get("creator")+"："+this.props.report.creator.name;return i.a.createElement("section",null,i.a.createElement("span",{"data-role":"text"},e),i.a.createElement("span",{"data-role":"text"},l.a.get("organization.report.app.recent.edit.time")+"：",i.a.createElement(x.Timestamp,{initialTime:new Date(this.props.report.updated)})))},t.prototype.renderStar=function(){var e;if(this.props.report.isDefault)return null;var t=b()(((e={})[C.a.star]=this.props.report.isStarred,e[C.a["star-stroke"]]=!this.props.report.isStarred,e)),n=this.props.report.isStarred?"star":"star-stroke";return i.a.createElement(k.Icon,{className:t,name:n,onClick:this.handleClickStar})},t.prototype.renderPencil=function(){return this.props.report.isDefault||this.state.isInvolver?null:i.a.createElement(k.IconButton,{color:"gray",name:"pencil",onClick:this.handleClickEdit})},t.prototype.renderName=function(){return i.a.createElement(k.Tooltip,{title:this.props.report.name},i.a.createElement("p",null,this.props.report.name))},t.prototype.renderBasic=function(){return this.state.isEditing?i.a.createElement("section",null,i.a.createElement(O,{name:this.props.report.name,onChangeName:this.handleEditName})):i.a.createElement("section",null,this.renderName(),this.renderPencil(),this.renderStar())},t.prototype.renderModal=function(){return this.props.isLoadingIframe?null:i.a.createElement(k.Defer,null,i.a.createElement(k.Modal,{title:l.a.get("organization.report.app.delete.report"),center:"perfect",titleCls:b()(C.a.bold,C.a["text-center"]),className:b()(C.a.modal),containerCls:b()(C.a["modal-body"]),zIndex:1100,ref:this.setModalRef},i.a.createElement("p",null,l.a.get("organization.report.app.delete.report.notice")),i.a.createElement(k.Button,{danger:!0,onClick:this.handleDelete},l.a.get("delete.confirm"))))},t.prototype.renderRight=function(){return i.a.createElement("div",{className:b()(C.a[this.rootClassName+"__right"])},this.renderSave(),this.renderSaveAs(),this.renderCustom(),this.renderShare(),this.renderMore(),this.renderClose())},t.prototype.renderLeft=function(){return i.a.createElement("div",{className:b()(C.a[this.rootClassName+"__left"])},this.renderBasic(),this.renderDescription())},t.prototype.render=function(){return i.a.createElement("nav",{className:b()(C.a[this.rootClassName])},this.renderLeft(),this.renderRight(),this.renderModal())},t}(i.a.PureComponent),z=n("IWNkNrkY"),A=n.n(z),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setSectionRef=function(e){t.sectionRef=e},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.props.sendCallbackRef(this.sectionRef)},t.prototype.render=function(){var e=i.a.createElement("div",{className:b()(A.a["spin-container"])},this.props.isLoadingIframe&&i.a.createElement(k.Loading,null));return i.a.createElement(i.a.Fragment,null,e,i.a.createElement("section",{ref:this.setSectionRef,className:b()(A.a["iframe-container"])}))},t}(i.a.PureComponent),F={onMountDetail:u.r,onEditName:u.A,onStar:u.y,onCancelStar:u.g,onSaveAs:u.w,onShare:u.x,onDelete:u.i,onLoadIframe:u.o,onAddThirdPartyPermissions:u.f,onRouteTo:u.v.push,releaseLeavingLock:u.u},B=function(e){function t(t){var n=e.call(this,t)||this;return n.setModalRef=function(e){n.modalRef=e},n.setCallbackRef=function(e){n.frameRef=e,n.initialContainer(n.frameRef,n.props.report)},n.onHide=function(){n.removeContainer(),n.subscription$&&n.subscription$.unsubscribe(),n.props.onRouteTo(u.v.base(n.props.match))},n.onError=function(e){console.warn({msg:l.a.get("load.error"),err:e.toString()}),n.props.onLoadIframe(!0),n.props.onAddThirdPartyPermissions({save:!1,saveAs:!0})},n.removeContainer=function(){n.reportContainer&&(n.props.onLoadIframe(!1),n.reportContainer.remove())},n.initialContainer=function(e,t){n.removeContainer();var o=Object(u.m)(t.originUrl,r.a({},t,{userId:_.user.id}));n.reportContainer=new y.Container(o,u.e,{onError:n.onError}),e&&(n.reportContainer.setup(e),n.reportContainer.remote.on("start",function(e){n.props.onLoadIframe(!0),n.props.onAddThirdPartyPermissions(e)}))},n.onRouteToDetail=function(e){return function(){n.props.onRouteTo(u.v.detail(n.props.match,e))}},n.onSave=function(){n.reportContainer.push({type:"SAVE",payload:g()(n.props.report,"_id","logo","name","created","updated","_organizationId","_featureId")})},n.onSaveAs=function(e){n.props.onSaveAs(e)},n.onClickCustom=function(e){var t=g()(n.props.report,"_id","logo","name","created","updated","_organizationId","_featureId");"all"===e.ignores?t={}:e.ignores&&e.ignores.length&&(t=r.a({},m()(t,e.ignores))),n.reportContainer.push({type:e.type,payload:t})},n.onDelete=function(e){n.props.releaseLeavingLock(),n.props.onDelete(e)},n.onClose=function(){n.props.hasLeavingLock&&!window.confirm(l.a.get("organization.report.app.has.leaving.lock"))||n.modalRef&&n.modalRef.close()},n.props.onMountDetail(n.props.match.params.reportId),n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.modalRef&&this.modalRef.open(),this.subscription$=u.s.subscribe(function(t){e.reportContainer&&e.reportContainer.push(t),"SAVE_AS"===t.type&&k.Toast.success({message:l.a.get("organization.report.app.save.success.notice"),handlers:l.a.get("organization.report.app.save.success.notice.link"),onClickHandlers:e.onRouteToDetail(t.payload._id)})})},t.prototype.componentDidUpdate=function(e){this.modalRef&&this.modalRef.open(),e.match.params.reportId!==this.props.match.params.reportId&&e.report&&this.props.report&&e.report._id===this.props.report._id&&this.props.onMountDetail(this.props.match.params.reportId),e.match.params.reportId===this.props.match.params.reportId&&e.report&&this.props.report&&e.report._id!==this.props.report._id&&this.initialContainer(this.frameRef,this.props.report)},t.prototype.componentWillUnmount=function(){this.props.releaseLeavingLock(),this.removeContainer(),this.subscription$&&this.subscription$.unsubscribe(),this.modalRef&&this.modalRef.close()},t.prototype.renderIFrame=function(){var e={report:this.props.report,isLoadingIframe:!this.props.loadedIframe,sendCallbackRef:this.setCallbackRef};return i.a.createElement(V,r.a({},e))},t.prototype.renderTopBar=function(){var e={report:this.props.report,organizationId:this.props.organizationId,isLoadingIframe:!this.props.loadedIframe,thirdPartyPermissions:this.props.thirdPartyPermissions,onEditName:this.props.onEditName,onStar:this.props.onStar,onCancelStar:this.props.onCancelStar,onSave:this.onSave,onSaveAs:this.onSaveAs,onClickCustom:this.onClickCustom,onShare:this.props.onShare,onDelete:this.onDelete,onClose:this.onClose};return i.a.createElement(L,r.a({},e))},t.prototype.render=function(){return this.props.report?i.a.createElement(k.Modal,{ref:this.setModalRef,className:b()(d.a["detail-container"]),onHide:this.onHide},this.renderTopBar(),this.renderIFrame()):i.a.createElement(k.Loading,null)},t}(i.a.PureComponent),U=Object(a.f)(Object(s.connect)(function(e){return{report:e.ui.organizationReportApp.currentReport,organizationId:e.ui.organizationReportApp.organizationId,loadedIframe:e.ui.organizationReportApp.loadedIframe,thirdPartyPermissions:e.ui.organizationReportApp.thirdPartyPermissions,hasLeavingLock:e.ui.organizationReportApp.hasLeavingLock}},F)(B)),$=(n("0kmyfGCI"),n("E+oPn2IN")),H=n.n($),G=n("KTVfYGRH"),q=n.n(G),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickCategory=function(e){return function(){t.handleGtaEvent(e),t.props.onClickCategory(e._id)}},t}return r.d(t,e),t.prototype.handleGtaEvent=function(e){!!~[u.d.MyStar,u.d.MyCreate,u.d.MyShare].indexOf(e._id)?_.gta.event({action:"filter charts",control:"upper navigation",method:"click",organizationid:this.props.organizationId,page:"Reporting Apps",category:e.gtaCategory}):_.gta.event({action:"filter charts",control:"lower navigation",method:"click",organizationid:this.props.organizationId,page:"Reporting Apps",category:e._id})},t.prototype.renderList=function(e){var t=this,n=e.map(function(e){var n;return i.a.createElement(k.MenuItem,{className:b()((n={},n[q.a.focus]=e._id===t.props.category._id,n)),key:e._id,onClick:t.onClickCategory(e)},e.name)});return i.a.createElement(k.Menu,null,n)},t.prototype.renderApplications=function(){var e=!H()(this.props.categories)&&!this.props.isLoadingCategories&&i.a.createElement("p",null,l.a.get("powerups.settings.tab.app")),t=this.props.isLoadingCategories?i.a.createElement(k.Loading,null):this.renderList(this.props.categories);return i.a.createElement(i.a.Fragment,null,e,t)},t.prototype.render=function(){return i.a.createElement("aside",{className:b()(q.a["side-bar"])},this.renderList(u.a),this.renderApplications())},t}(i.a.PureComponent),J=n("WcBbSBbW"),X=n.n(J),Y=n("82clTwJw"),K=n.n(Y),Q=n("CPuJppTW"),Z=function(e){return i.a.createElement("div",{className:b()(K.a.placeholder)},i.a.createElement("span",null,i.a.createElement("img",{src:Q})),i.a.createElement("p",null,u.b[e.categoryId]))},ee=n("YqUJfXDr"),te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickReport=function(e){return function(){t.handleGtaEvent(e),t.props.onClickReport(e._id)}},t.renderLoadMore=function(e){return!(!e.pagination||!e.result.length)&&i.a.createElement(ee.LoadMore,{clause:e.hasMore,hasMore:e.hasMore,onEnter:t.props.onLoadMoreReports,endWith:null})},t}return r.d(t,e),t.prototype.handleGtaEvent=function(e){_.gta.event({action:"open detail",type:"chart",category:e.isDefault?"template":"chart",control:"charts section",method:"click",organizationid:this.props.organizationId,page:"Reporting Apps",pluginid:this.props.category._id,note1:e._id})},t.prototype.renderList=function(e){var t=this,n=this.props.reportsMap[e],r=!!~[u.d.MyStar,u.d.MyCreate,u.d.MyShare].indexOf(this.props.category._id);if(r&&H()(n.result))return i.a.createElement(Z,{key:e+"__placeholder",categoryId:this.props.category._id});var o=!r&&!H()(n.result)&&i.a.createElement("p",null,u.c[e]),s=n.result.map(function(e){return i.a.createElement("section",{key:e._id,onClick:t.onClickReport(e)},i.a.createElement(k.Tooltip,{title:e.name},i.a.createElement("p",null,e.name)),i.a.createElement("span",{style:{backgroundImage:"url('"+e.logo+"')"}}))});return i.a.createElement(i.a.Fragment,{key:e},o,i.a.createElement("div",{className:b()(X.a["display-table__list"])},s),this.renderLoadMore(n))},t.prototype.render=function(){var e=this,t=Object.keys(this.props.reportsMap).map(function(t){return e.renderList(t)});return i.a.createElement("div",{className:b()(X.a["display-table"])},this.props.isLoadingReports?i.a.createElement(k.Loading,null):t)},t}(i.a.PureComponent),ne={onFetchCategories:u.k,onFetchReports:u.l,onClickCategory:u.h,onRouteTo:u.v.push,onLoadMoreReports:u.p},re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickCategory=function(e){t.props.onClickCategory(e)},t.onClickReport=function(e){t.props.onRouteTo(u.v.detail(t.props.match,e))},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.props.onFetchCategories(),this.props.onFetchReports()},t.prototype.componentDidUpdate=function(e){e.category!==this.props.category&&this.props.onFetchReports()},t.prototype.renderDisplayTable=function(){var e={category:this.props.category,reportsMap:this.props.reportsMap,onClickReport:this.onClickReport,isLoadingReports:this.props.isLoadingReports,organizationId:this.props.organizationId,onLoadMoreReports:this.props.onLoadMoreReports};return i.a.createElement(te,r.a({},e))},t.prototype.renderSideBar=function(){var e={category:this.props.category,categories:this.props.categories,onClickCategory:this.onClickCategory,isLoadingCategories:this.props.isLoadingCategories,organizationId:this.props.organizationId};return i.a.createElement(W,r.a({},e))},t.prototype.render=function(){return i.a.createElement("div",{className:b()("organization-report-app-container")},this.renderSideBar(),this.renderDisplayTable())},t}(i.a.PureComponent),oe=Object(a.f)(Object(s.connect)(function(e){return{organizationId:e.ui.organizationReportApp.organizationId,categories:e.ui.organizationReportApp.categories,category:e.ui.organizationReportApp.category,reportsMap:e.ui.organizationReportApp.reportsMap,isLoadingCategories:e.ui.organizationReportApp.isLoadingCategories,isLoadingReports:e.ui.organizationReportApp.isLoadingReports}},ne)(re));n.d(t,"OrganizationReportApp",function(){return ae});var ie={onMount:u.q,onUnmount:u.z},se=function(e){function t(t){var n=e.call(this,t)||this;return n.props.onMount(n.props.organizationId),n}return r.d(t,e),t.prototype.componentWillUnmount=function(){this.props.onUnmount()},t.prototype.render=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(a.d,null,i.a.createElement(a.b,{exact:!0,path:u.v.detail(),component:U}),i.a.createElement(a.b,{path:u.v.base(),component:oe})),i.a.createElement(a.a,{when:this.props.hasLeavingLock,message:l.a.get("organization.report.app.has.leaving.lock")}))},t}(i.a.PureComponent),ae=Object(a.f)(Object(s.connect)(function(e){return{hasLeavingLock:e.ui.organizationReportApp.hasLeavingLock}},ie)(se))},oEzVJ1gN:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h={}.hasOwnProperty;c=n("a+N5u/Cl"),p=n("sa1Ed382"),a=n("vmWJWrVe"),s=n("3eMzznN/"),d=n("gh8QIhMV").throwError,r=n("ypWNgh6R"),l=n("2qRnoGmE"),o=n("85182E8g"),i=n("MG+UrdGu"),u=n("WMI0/nUp").fetchProjectPlugins,t.Constructor=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)h.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="ProjectSettingsView",t.prototype.className="project-settings-view",t.prototype.initialize=function(e){return this.options=null,n.e(1).then((t=this,function(o){return t.ProjectSettingsInfoView=n("0DksSmVX"),t.ProjectSettingsPreferenceView=n("pTJozMjs"),t.ProjectSettingsMoreView=n("s6xVq3TY"),t.ProjectSettingsTasksView=n("CxjWOkP4"),t.ProjectSettingsEventsView=n("z5FN8uBu"),t.ProjectSettingsPostsView=n("TNCEAJrp"),t.ProjectSettingsTestplanView=n("znlGTjBq"),t.ProjectSettingsTestcaseFlowstatusView=n("weIBMfRo"),t.ProjectSettingsFrameView=n("y5YK0IIH"),t.ApplicationFieldConfigView=n("mx8VOQAS"),t.TaskPermissionsView=n("nttfMa5U"),t.TaskflowView=n("BfB7n1Xy"),t.ProjectSettingsProjectOverviewView=n("ir6DbCvz"),t.StatusTemplateView=n("whWy+QkU"),t.ProjectSettingsCustomScrumflowView=n("KEm5Sc5S"),t.inSubMenu=null,Promise.all([t.loadOrganization(e),t.loadPlugins(e.projectModel.id)]).then(function(n){var o,i;return o=n[0],i=n[1],t.options=c.assign(e,o,i),t.projectModel=e.projectModel,t.modalView=t.requestSubView(r,{size:"large",modalPadding:!1,title:tb_i18n.get("project.settings"),modalClass:"tab-container-modal-view modal-fullsize"}),t.render(),t.listen()}).catch(function(e){if(e)return d(e)})}).bind(null,n)).catch(n.oe);var t},t.prototype.listen=function(){if("change:isArchived change:isSuspended change:_roleId change:_orgRoleId remove destroy",this.listenTo(this.options.projectModel,"change:isArchived change:isSuspended change:_roleId change:_orgRoleId remove destroy",function(){return this.remove()}),this.options.organizationModel)return this.listenTo(this.options.organizationModel,"change:_roleId destroy",function(){return this.remove()})},t.prototype.loadOrganization=function(e){return p.user.get("isGhost")?Promise.resolve():new Promise(function(e,t){return o.fetch(0,{success:e,error:function(e,n){return t(n)}})}).then(function(t){return{organizationModel:t.get(e.projectModel.get("_organizationId")),organizationsCollection:t}})},t.prototype.loadPlugins=function(e){return s.thunkToPromise(u(e)).then(function(e){return e.where({type:"plugin_for_setting"})}).then(function(e){return{plugins:e.map(function(e){return e.toJSON()})}})},t.prototype.render=function(){var e,t,n,r,o,s,a,u,d,h,m,f;if(!this.inSubMenu)return r=this.projectModel.get("isTemplate"),n=null!=this.projectModel.get("_organizationId"),d=!r&&n&&this.projectModel.isNormal(),h=this.projectModel.isTaskflowEnabled()&&this.projectModel.get("_organizationId"),o=this.options.plugins.map((f=this,function(e){if(e.status)return{name:e.name,text:e.name,icon:"icon-config",view:function(){var t;return t={projectModel:f.options.projectModel,plugin:e},f.requestSubView(f.ProjectSettingsFrameView,t)}}})),t={list:c.compact(c.flatten([r?void 0:{name:"info",text:tb_i18n.get("project.settings.tab.infomation"),icon:"icon-project",gta:{action:"switch detail setting",segment:"Project Setting"},view:function(e){return function(){return e.requestSubView(e.ProjectSettingsInfoView,e.options)}}(this)},{name:"preference",text:tb_i18n.get("project.settings.tab.preference"),icon:"icon-eye",gta:{action:"switch project setting",segment:"Project Setting"},view:function(e){return function(){return e.requestSubView(e.ProjectSettingsPreferenceView,e.options)}}(this)},this.options.projectModel.canUseTaskFeature()?{name:"tasks",text:tb_i18n.get("project.settings.tab.tasks"),icon:"icon-board",gta:{action:"start to configurate tasks",segment:"Project Setting",control:"Project Setting"},view:function(e){return function(){var t;return t={projectModel:e.options.projectModel,organizationModel:e.options.organizationModel,showTaskFieldLink:null!=e.options.projectModel.get("_organizationId"),showTaskflowLink:h,showPrivilege:!r,onGoToConfig:e.onGoToSubMenu.bind(e)},e.requestSubView(e.ProjectSettingsTasksView,t)}}(this)}:void 0,this.options.projectModel.isAppEnabled("events")?{name:"events",text:tb_i18n.get("project.settings.tab.events"),icon:"icon-calendar",gta:{action:"start to configurate events",segment:"Project Setting",control:"Project Setting"},view:function(e){return function(){var t;return t={projectModel:e.options.projectModel,showEventFieldLink:null!=e.options.projectModel.get("_organizationId"),onGoToEventFieldConfig:e.onGoToSubMenu.bind(e)},e.requestSubView(e.ProjectSettingsEventsView,t)}}(this)}:void 0,this.options.projectModel.isAppEnabled("posts")&&!l.FREE&&-1===p.env.indexOf("us")?{name:"posts",text:tb_i18n.get("project.settings.tab.posts"),icon:"icon-wall",gta:{action:"start to configurate posts",segment:"Project Setting",control:"Project Setting"},view:function(e){return function(){var t;return t={projectModel:e.options.projectModel},e.requestSubView(e.ProjectSettingsPostsView,t)}}(this)}:void 0,h&&this.options.projectModel.isAppEnabled("testplan")?{name:"testplan",text:tb_i18n.get("project.settings.tab.testplan"),icon:"icon-testplan",gta:{action:"start to configurate testplan",segment:"Project Setting",control:"Project Setting"},view:function(e){return function(){return e.requestSubView(e.ProjectSettingsTestplanView,{onGoToConfig:e.onGoToSubMenu.bind(e)})}}(this)}:void 0,this.options.projectModel.isAppEnabled("projectinfoapp")?{name:"project-overview",text:tb_i18n.get("project.settings.tab.project.overview"),icon:"icon-tachometer",gta:{},view:function(e){return function(){return e.requestSubView(e.ProjectSettingsProjectOverviewView,{projectId:e.options.projectModel.id,projectModel:e.options.projectModel,onGoToConfig:e.onGoToSubMenu.bind(e)})}}(this)}:void 0,d?{name:"customscrumflow",text:tb_i18n.get("project.settings.tab.customScrumflow"),icon:"icon-circular-flow",gta:{action:"switch custom process",segment:"Project Setting"},view:function(e){return function(){return e.requestSubView(e.ProjectSettingsCustomScrumflowView,e.options)}}(this),permission:function(e){return function(){return!!e.projectModel}}(this)}:void 0,o,!r&&(this.options.projectModel.hasPermission("put.archive")||this.options.projectModel.getCanQuit()||this.options.projectModel.hasPermission("del"))?{name:"more",text:tb_i18n.get("project.settings.tab.more"),icon:"icon-more",gta:{action:"switch project setting more",segment:"Project Setting"},view:function(e){return function(){return e.requestSubView(e.ProjectSettingsMoreView,e.options)}}(this)}:void 0],!0))},m=this.options.tabName,"taskFieldConfig"===this.options.tabName&&(m="tasks"),"eventFieldConfig"===this.options.tabName&&(m="events"),e=c.findIndex(t.list,{name:m}),t.tabIndex=~e?e:0,t.onClose=this.remove.bind(this),this.modalView.open(i,t),this.$modalHeader=null!=(s=this.modalView.$el)?s.find(".modal-header"):void 0,this.$modalTitle=null!=(a=this.modalView.$el)?a.find(".modal-title"):void 0,this.$modalBody=null!=(u=this.modalView.$el)?u.find(".modal-body"):void 0,"taskFieldConfig"===this.options.tabName&&this.onGoToSubMenu("taskField"),"eventFieldConfig"===this.options.tabName?this.onGoToSubMenu("eventField"):void 0;this.renderSubMenu()},t.prototype.renderSubMenu=function(){var e,t;switch(e=tb_i18n.get("project.settings"),this.inSubMenu){case"taskField":p.gta.event({action:"start to configurate task type",segment:"Project Setting",control:"Project Setting"}),this.subView=this.requestSubView(this.ApplicationFieldConfigView,{projectModel:this.options.projectModel,boundToObjectType:"task"}),e=tb_i18n.get("project.settings.tasks.taskFieldConfig.title");break;case"taskflow":p.gta.event({action:"switch taskflow",segment:"Project Setting"}),this.subView=this.requestSubView(this.TaskflowView,{projectModel:this.options.projectModel}),e=tb_i18n.get("project.settings.tasks.taskflow.title");break;case"testflow":p.gta.event({action:"switch testflow",segment:"Project Setting"}),this.subView=this.requestSubView(this.ProjectSettingsTestcaseFlowstatusView,{projectId:this.options.projectModel.id,projectModel:this.options.projectModel}),e=tb_i18n.get("project.settings.testcaseFieldConfig.title");break;case"privilege":p.gta.event({action:"switch project setting more",segment:"Project Setting"}),this.subView=this.requestSubView(this.TaskPermissionsView,{projectModel:this.options.projectModel}),e=tb_i18n.get("project.settings.tasks.privilege.title");break;case"eventField":p.gta.event({action:"start to configurate event type",segment:"Project Setting",control:"Project Setting"}),this.subView=this.requestSubView(this.ApplicationFieldConfigView,{projectModel:this.options.projectModel,boundToObjectType:"event"}),e=tb_i18n.get("project.settings.events.eventFieldConfig.title");break;case"statusTemplate":this.subView=this.requestSubView(this.StatusTemplateView,{organizationId:this.projectModel.get("_organizationId"),projectId:this.options.projectModel.id,onClose:this.remove.bind(this)});break;default:return}return this.$modalBody.find(".tab-container-view").css("display","none"),this.$modalTitle.html(e),this.$modalHeader.append('<a class="icon icon-chevron-left modal-go-back pull-left"></a>'),this.$modalHeader.find(".modal-go-back").click((t=this,function(){return t.onGoToSubMenu(null)})),this.$modalBody.append(this.subView.$el)},t.prototype.onGoToSubMenu=function(e){var t,n;return this.inSubMenu=e,this.inSubMenu?this.render():(null!=(t=this.subView)&&t.remove(),this.$modalTitle.html(tb_i18n.get("project.settings")),this.$modalHeader.find(".modal-go-back").remove(),null!=(n=this.$modalBody.find(".tab-container-view"))?n.css("display","block"):void 0)},t}()},oHyoeiPN:function(e,t,n){"use strict";n.r(t);var r=n("/MKjzBat"),o=n("mrSGxOB2"),i=(n("71fEzK1u"),n("MmYzUhjM")),s=n("q1tIBJhx"),a=n("tLZJUYWX"),c=n("wd/RKGTj"),l=n.n(c),u=n("GESwhXbR"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootClassName="pro-overdue-tips-view",t.classes={title:t.rootClassName+"__title",diagrImage:t.rootClassName+"__diagrammatic-image",tip:t.rootClassName+"__tip",actionWrapper:t.rootClassName+"__action-wrapper",action:t.rootClassName+"__action"},t.renderUpgradeAction=function(){return s.createElement(u.Button,{className:t.classes.action,onClick:t.props.onUpgrade},a.get("globalGuide.prefession.upgrade"))},t.renderKeepBackAction=function(e,n){if(!e.isExpired)return null;var r=n?a.get("globalGuide.prefession.goonfree.coupon"):a.get("globalGuide.prefession.goonfree");return s.createElement(u.Button,{type:"secondary",className:t.classes.action,onClick:t.props.onKeepBack},r)},t}return o.d(t,e),t.prototype.renderDiagrImage=function(){return s.createElement("div",{className:this.classes.diagrImage})},t.prototype.renderTips=function(e,t,n,r,o){var c=i.MIGRATION_PRICE,l=i.PERSONAL_PROJECT_MEMBER_QUOTA,u=[];u.push(e.isExpired?a.get("globalGuide.profession.account.tip1"):a.get("globalGuide.profession.account.tip7",e.countdown)),t&&(n?u.push(e.isOld?a.get("globalGuide.profession.account.tip2",o,c.HALF,c.OLD):a.get("globalGuide.profession.account.tip3",o,c.HALF,c.NORMAL,l)):u.push(e.isOld?a.get("globalGuide.profession.account.tip4",c.OLD):a.get("globalGuide.profession.account.tip5",c.NORMAL,l)),u.push(a.get("globalGuide.profession.account.tip6",r)));var p=this.classes;return u.map(function(e,t){return s.createElement("p",{className:p.tip,key:t,dangerouslySetInnerHTML:{__html:e}})})},t.prototype.renderActions=function(e,t,n){return s.createElement("div",{className:this.classes.actionWrapper},t?this.renderUpgradeAction():null,this.renderKeepBackAction(e,n))},t.prototype.render=function(){var e=this.classes,t=this.props,n=t.onClose,r=t.payment;if(!r)return null;var o=r.expiration?l()(r.expiration).add(i.MIGRATION_PERIOD,"d"):null,c=o&&o.format("LL"),p=c,d=!!o&&o.isSameOrAfter(l()()),h=d,m=d?a.get("globalGuide.prefession.upgrade"):a.get("globalGuide.prefession.gameover");return s.createElement(u.Modal,{title:m,titleCls:e.title,opened:!0,onVisibleChange:n},this.renderDiagrImage(),this.renderTips(r,d,h,c,p),this.renderActions(r,d,h))},t}(s.PureComponent),d=Object(r.connect)(function(){return{}},function(){return{}})(p);n.d(t,"ProOverdueTipsContainer",function(){return d})},"oI+5R3hX":function(e,t,n){var r,o,i,s,a,c=function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n("aS+ErZRd"),r=n("q1z7EYOi"),a=n("tLZJUYWX"),o=n("hGNqppva"),s=n("H8Maba57"),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t}(r.Model),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,o),t.prototype.className="project-category-action-menu-view",t.prototype.events={"click .change-project-category-name-handler":"handleChangeProjectCategoryNameClick","click .delete-project-category-handler":"handleDeleteProjectCategoryClick","click .route-to-delete-project-category-handler":"handleRouteToDeleteProjectCategoryClick","click .route-to-rename-project-category-handler":"handleRouteToRenameProjectCategoryClick","keyup .project-category-action-menu-input-text":"handleProjectTagNameKeyup"},t.prototype.viewName="ProjectCategoryActionMenuView",t.prototype.initialize=function(e){var n,r,o;return this.onChangeProjectTagNameClick=null!=(n=e.onChangeProjectTagNameClick)?n:function(){},this.onDeleteProjectTagClick=null!=(r=e.onDeleteProjectTagClick)?r:function(){},this.projectTagModel=null!=(o=e.projectTagModel)?o:null,this.viewModel=new i,this.popoverTitle=this.getPopoverTitle(),t.__super__.initialize.apply(this,arguments)},t.prototype.onHidden=function(){return t.__super__.onHidden.apply(this,arguments),this.viewModel.unset("nextProjectTagName"),this.viewModel.unset("tab"),this.stopListening()},t.prototype.onShown=function(){return t.__super__.onShown.apply(this,arguments),this.viewModel.set("nextProjectTagName",this.projectTagModel.get("name")),this.checkChangeProjectCategoryNameHandler(),this.listen()},t.prototype.listen=function(){return this.listenTo(this.viewModel,"change:nextProjectTagName",(e=this,function(t,n){return e.checkChangeProjectCategoryNameHandler(n)}));var e},t.prototype.getPopoverTitle=function(){switch(this.viewModel.get("tab")){case"rename":return a.get("rename.project.category");case"delete":return a.get("delete.project.category");default:return a.get("project.category.menu")}},t.prototype.onClickBackHandler=function(){return this.viewModel.set("tab",null),t.__super__.onClickBackHandler.apply(this,arguments)},t.prototype.checkChangeProjectCategoryNameHandler=function(e){return(null!=e?e.length:void 0)>0?this.enableChangeProjectCategoryNameHandler():this.disableChangeProjectCategoryNameHandler()},t.prototype.enableChangeProjectCategoryNameHandler=function(){return this.$(".change-project-category-name-handler").attr("disabled",!1)},t.prototype.disableChangeProjectCategoryNameHandler=function(){return this.$(".change-project-category-name-handler").attr("disabled",!0)},t.prototype.handleRouteToDeleteProjectCategoryClick=function(){return this.viewModel.set("tab","delete"),this.enterNextMenu(this.getPopoverTitle(),(e=this,function(){return e.render()}));var e},t.prototype.handleRouteToRenameProjectCategoryClick=function(){return this.viewModel.set("tab","rename"),this.enterNextMenu(this.getPopoverTitle(),(e=this,function(){return e.render(),e.$(".project-category-action-menu-input-text").val(e.projectTagModel.get("name"))}));var e},t.prototype.handleChangeProjectCategoryNameClick=function(){var e;if((null!=(e=this.viewModel.get("nextProjectTagName"))?e.length:void 0)>0&&e!==this.projectTagModel.get("name"))return this.onChangeProjectTagNameClick(this.projectTagModel.id,e),this.hide()},t.prototype.handleDeleteProjectCategoryClick=function(){return this.onDeleteProjectTagClick(this.projectTagModel.id),this.hide()},t.prototype.handleProjectTagNameKeyup=function(e){var t;if(13!==e.keyCode)return t=this.$(e.currentTarget).val().trim(),this.viewModel.get("nextProjectTagName")!==t?this.viewModel.set("nextProjectTagName",t):void 0;this.handleChangeProjectCategoryNameClick()},t.prototype.render=function(){var e;return e=this.projectTagModel.toJSON(),this.$el.html(s({currentTab:this.viewModel.get("tab"),projectTagName:e.name}))},t}()},oJO6AMd2:function(e,t){e.exports=function(e){return'<form class="delete-form"> <p>'+tb_i18n.get("link.confirm.delete")+'</p> <button class="btn btn-danger" type="submit">'+tb_i18n.get("delete")+"</button></form>"}},"oLBRAHW+":function(e,t,n){"use strict";n.r(t),n.d(t,"DetailViews",function(){return r});var r=function(){return new Promise(function(e){n.e(9).then(function(t){var r=n("uXr6XyZn"),o=n("yRUyRg+G"),i=n("kHmZn/Bz"),s=n("hy/w7Vok"),a=n("tGfyIDI3"),c=n("Ln8Pxfod"),l=n("tmrXJa8S");e({entry:r,event:o,post:i,task:s,work:a,testcase:c,usercase:l})}.bind(null,n)).catch(n.oe)})}},oOjzkqQz:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";if(e.displayPriority&&(o+=" ",e.permissions.put?o+=' <div class="task-priority-wrapper"></div> ':o+=' <div class="task-priority bg-priority-'+e.priority+'"></div> '),o+='<div class="check-box-wrapper" data-series="'+e.series+'" data-type="'+e.type+'"></div><div class="task-content-set" data-id="'+e._id+'" data-series="'+e.series+'" data-type="'+e.type+'"> ',e.noExecutor||(o+=" ",e.executorData&&e.executorData.avatarUrl?o+=' <div class="avatar img-circle img-24" style="background-image:url('+e.executorData.avatarUrl+')"></div> ':o+=' <div class="avatar img-circle img-24 no-avatar"></div> ',o+=" "),o+=' <div class="task-content-wrapper"> <div class="task-content"> '+e.content+" ",e.taskListTitle&&(o+=' <a class="task-tag" data-tag="tasklist"> '+r(e.taskListTitle)+" </a> "),o+=' <span class="task-id-placeholder"></span> ',e.tags&&e.tags.length){o+=" ";var i=e.tags;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=' <span class="label tag tag-'+(s=i[a+=1]).color+'"> <span class="tag-name">'+r(s.name)+"</span> </span> ";o+=" "}return o+=" ",e.parent&&(o+=' <div class="subtask-info muted">'+r(tb_i18n.get("task.list.belong.to",e.parent.content))+"</div> "),o+=" </div> ",e.isDone||!e.dueDate&&!e.startDate?e.isDone&&e.accomplished&&(o+=' <time class="task-accomplished-date"> '+e.accomplished+" </time> "):(o+=' <time class="task-duedate label ',e.dueDate&&(o+=" ","overdue"===e.dueDate.dateClass?o+=" label-important ":"today"===e.dueDate.dateClass?o+=" label-warning ":"upcoming"===e.dueDate.dateClass&&(o+=" label-info "),o+=" "),o+=' "> <span class="icon icon-calendar2 ',e.dueDate&&"normal"!==e.dueDate.dateClass&&(o+="icon-white"),o+='"></span> '+e.datetimeString+" </time> "),o+=" </div></div>"}},oRXP9OaV:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return a});var r=n("a+N5u/Cl"),o=n("WbsqMM+H"),i=n.n(o),s=i()(function(e,t){return r.find(e,function(e){return e._id===t})||r.find(e,function(e){return e.isDefault})},{length:2}),a=i()(function(e){if(!e)return{};var t={};return e.scenariofields.forEach(function(e){"customfield"===e.fieldType&&e._customfieldId?t[e._customfieldId]=e.displayed:t[e.fieldType]=e.displayed}),t},{length:1})},"oXtD/CwF":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h={}.hasOwnProperty;p=n("sa1Ed382"),c=n("3eMzznN/"),i=n("hGNqppva"),l=n("OmupbwLD"),n("cDm32Cmn"),r=n("6vg9MnbG"),s=n("gss2RKSv"),o=n("msTNxTQE").MemberCard,a=n("GESwhXbR").Toast,u=n("zQptecJq"),d=n("gh8QIhMV").throwError,t.Constructor=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)h.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="MemberCardView",t.prototype.className="member-card-view card popover-no-header",t.prototype.popoverTitle="Menu",t.prototype.width=320,t.prototype.initialize=function(e){var n,r;if(e.userId)return t.__super__.initialize.apply(this,arguments),this._userId=e.userId,this.projectModel=e.projectModel,this.organizationId=e.organizationId||(null!=(n=this.projectModel)?n.get("_organizationId"):void 0),this.fromPrivateChat=e.fromPrivateChat,e.memberCardClass&&this.$popover.addClass(e.memberCardClass),this.memberModel=null,this.orgMemberModel=null,this.privateMemberModel=null,this.load().then((r=this,function(){if(r.el)return r.hideLoadingIndicator(),r.renderBasic(),r.fixPosition()}))},t.prototype.load=function(){return Promise.all([this.projectModel?u.fetchProjects(this.projectModel):void 0,this.projectModel?u.fetchProjectMember(this.projectModel.id,this._userId):void 0,this.organizationId?u.fetchOrganizations(this.organizationId):void 0]).then((e=this,function(t){e.projectModel=t[0],e.memberModel=t[1],e.organizationModel=t[2]})).then(function(e){return function(){if(e.projectModel&&!e.memberModel)throw tb_i18n.get("chat.room.member.project.not.found")}}(this)).then(function(e){return function(){return e.fetchOrgMember()}}(this)).then(function(e){return function(){return e.fetchPrivateMember()}}(this)).then(function(e){return function(){if(!e.orgMemberModel&&!e.privateMemberModel)throw tb_i18n.get("chat.room.member.not.found")}}(this)).catch(function(e){return function(t){return"string"==typeof t&&a.error(t),d(t),e.hide()}}(this));var e},t.prototype.fetchOrgMember=function(){var e,t,n;if(e=(null!=(t=this.organizationModel)?t.getRoleScope():void 0)>=0,null!=this.organizationModel&&e)return u.fetchOrgMember(this.organizationId,this._userId).then((n=this,function(e){n.orgMemberModel=e}))},t.prototype.fetchPrivateMember=function(){if(this.fromPrivateChat&&!this.orgMemberModel)return u.fetchPrivateMember(this._userId).then((e=this,function(t){e.privateMemberModel=t}));var e},t.prototype.render=function(){return this.showLoadingIndicator(this.$el)},t.prototype.isAllOrganizationMember=function(){var e;return(null!=(e=this.organizationModel)?e.getRoleScope():void 0)>=0&&!!this.orgMemberModel},t.prototype.renderBasic=function(){var e,t,n,r,i,s,a,l,u,d,h,m,f,g,v;return $(".member-card-view.card").addClass("popover-no-header"),this.projectModel&&this.memberModel&&(a=c.getMemberPermissions(this.projectModel,this.memberModel)),r=p.user.id!==this._userId&&!this.getMemberInfo("isDisabled")&&!this.fromPrivateChat,t=this.isAllOrganizationMember(),n=!!this.projectModel,s=this.canSetSelfOwner(),i=null!=a?a.canManageMemberRole:void 0,e=p.user.id!==this._userId&&(null!=a?a.canDeleteMember:void 0),l=2===(null!=(h=this.memberModel)?h.getRoleScope():void 0),d=this.memberModel?this.memberModel.get("_roleId"):void 0,u=this.memberModel&&!this.memberModel.get("isDisabled")?this.memberModel.getRole():void 0,this.requestReactView(this.$el.get(0),o,{member:{_id:this.getMemberInfo("_id"),name:(null!=(m=this.getMemberInfo("profile"))?m.name:void 0)||this.getMemberInfo("name"),avatarUrl:this.getMemberInfo("avatarUrl"),email:this.getMemberInfo("email"),title:this.getMemberInfo("title"),isDisabled:this.getMemberInfo("isDisabled"),hasVisited:this.getMemberInfo("visited"),lastLoginTime:this.getMemberInfo("latestActived"),_roleId:d,role:u,isOwner:l},payment:null!=(f=this.projectModel)?f.payment:void 0,canShowRoleItem:!!this.projectModel,projectId:null!=(g=this.projectModel)?g.id:void 0,orgId:this.organizationId,userId:this._userId,myRoleId:null!=(v=this.projectModel)?v.getRoleScope():void 0,isOrganization:!!this.organizationModel,onOpenOrganizationDetail:t?this.onOpenOrganizationDetail.bind(this):void 0,onOpenProjectTasks:n?this.handleOpenProjectMemberTasksModal.bind(this):void 0,onOpenChat:r?this.openChatView.bind(this):void 0,onSetRole:i?this.setRole.bind(this):void 0,onDeleteRole:e?this.deleteMember.bind(this):void 0,onSetSelfOwnerRole:s?this.setProjectRole.bind(this):void 0}),this},t.prototype.canSetSelfOwner=function(){var e,t,n;return!!(this.orgMemberModel&&this.memberModel&&this.projectModel)&&(t=this.orgMemberModel.getRoleScope(),n=this.memberModel.getRoleScope(),e=this.projectModel.hasPermission("projecttag.join.project")&&"owner"===this.projectModel.getJoinProjectRole(),this.memberModel.canSetSelfOwner(t,n,e))},t.prototype.getMemberInfo=function(e){var t;return null!=(t=this.memberModel||this.orgMemberModel||this.privateMemberModel)?t.get(e):void 0},t.prototype.onOpenOrganizationDetail=function(){var e,t;return e=this.organizationModel.get("_id"),t=this.getMemberInfo("_id"),p.router.navigateToMemberProfile(e,t),p.gta.event({action:"open detail",type:"org member",control:"Member Card"}),this.remove()},t.prototype.deleteMember=function(){if(this.memberModel)return this.memberModel.destroy({wait:!0,success:function(){return{message:tb_i18n.get("remove.success"),status:"success"}}}),this.remove()},t.prototype.setRole=function(e){if(this.memberModel&&(24!==e.length&&(e=parseInt(e,10)),e!==this.memberModel.get("_roleId")))return this.memberModel.saveAttr("_roleId",e,{wait:!0}),p.gta.event({action:"change member permission",control:"Member Card"}),this.remove()},t.prototype.setProjectRole=function(e){if(this.memberModel)return this.projectModel.upgradeToOwner({roleId:e}),this.memberModel.set("role",2),p.gta.event({action:"change member permission",control:"Member Card"}),this.remove()},t.prototype.handleOpenProjectMemberTasksModal=function(){if(this.projectModel&&this.memberModel)return p.APP.requestSubView(l).open(s,{_projectId:this.projectModel.get("_id"),memberModel:this.memberModel}),p.gta.event({action:"open detail",type:"project task",control:"Member Card"}),this.remove()},t.prototype.openChatView=function(){var e;return e={_id:this.getMemberInfo("_id"),name:this.getMemberInfo("name"),avatarUrl:this.getMemberInfo("avatarUrl")},r.open({pseudoMessageData:e}),p.gta.event({action:"enter chats page",control:"Member Card"}),this.remove()},t.prototype.hide=function(){return this.remove()},t.prototype.remove=function(){var e;return"WindowView"===(null!=(e=this.parentView)?e.viewName:void 0)&&this.parentView.close(),t.__super__.remove.apply(this,arguments)},t}()},oaEIIoHT:function(e,t){},obMV6uGD:function(e,t,n){"use strict";n.r(t),n.d(t,"permissionModalSubscription",function(){return h}),n.d(t,"initPermissionModalObserver",function(){return m});var r=n("mrSGxOB2"),o=n("+2RfZ2TT"),i=n.n(o),s=n("HYobN8SQ"),a=n.n(s),c=n("4c1CS0b3"),l=n("ja6xOrJJ"),u=n("iYgY8DEL"),p="disableDesktopNotification",d=a.a.namespace("desktopNotification"),h=null,m=function(){return r.b(void 0,void 0,void 0,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return d.has(p)?[4,l.a.browser.checkEnabled()]:[3,2];case 1:e=n.sent(),t=d.get(p),e&&!0===t&&l.a.browser.disableNotification(),d.remove(p),n.label=2;case 2:return l.a.browser.isSupported()?(l.a.browser.checkPermission().then(function(e){if("default"===e){var t=new c.Observable(function(e){var t=i()(u()).appendTo("body");return t.find(".request-permission-btn").one("click",function(){t.remove(),l.a.browser.requestPermission().then(function(t){e.next(t),e.complete()})}),t.find(".cancel-setup-btn").one("click",function(){l.a.browser.disableNotification(),e.next("denied"),e.complete()}),t.find(".close-modal-btn").one("click",function(){e.next("default"),e.complete()}),function(){return t.remove()}}).publish().refCount(),n=l.a.browser.notifications$.take(1).concatMap(function(){return t});h=l.a.browser.notifications$.bufferWhen(function(){return n}).take(1).subscribe(function(e){setTimeout(function(){var t,n;try{for(var o=r.i(e),i=o.next();!i.done;i=o.next()){var s=i.value;s&&l.a.browser.handleMessage(s)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},1e3)})}}),[2]):[2]}})})}},"ocgd+n+k":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+='<li> <a class="object-menu-item" data-id="'+(s=i[a+=1]).token+'">'+r(s.name)+"</a></li>";return o}},ocyOxKWv:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;r=n("tX+U/U8q"),o=n("oCfSqszA").DirectMessagePanelComponent,s=n("rZfPP7pq"),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="DirectMessagePanelView",t.prototype.className="message-panel-view direct-message-panel-view card",t.prototype.initialize=function(e){return this.modelId=e.modelId,this.roomId=e.roomId,this.messageModel=e.messageModel,this.removeChatModal=e.removeChatModal,this.channelType="users",this.renderBasic(),this},t.prototype.renderBasic=function(){return this.initView({type:this.channelType,roomId:this.modelId}),this.requestReactView(this.el,o,{type:this.channelType,roomId:this.modelId,renderMessageCreator:this.renderDirectMessageCreator.bind(this),openSharingDetail:this.openSharingDetail.bind(this),enterPreviewer:this.enterPreviewer.bind(this),downloadAttachments:this.downloadAttachments.bind(this),showMemberDetail:this.showMemberDetail.bind(this),voiceInit:this.voiceInit.bind(this),voiceCtrl:this.voiceCtrl.bind(this),removeChatModal:this.removeChatModal.bind(this)},{redux:!0}),this},t.prototype.renderDirectMessageCreator=function(e){return this.directMessageCreatorView=this.requestSubView(r,{roomId:e}),this.$(".chat-room-creator-wrapper").html(this.directMessageCreatorView.$el),this.directMessageCreatorView},t.prototype.close=function(e){return this.remove(),this},t.prototype.remove=function(){return this.destroyView({type:this.channelType,roomId:this.modelId}),t.__super__.remove.apply(this,arguments)},t}(),e.exports=i},"ogYb4/7i":function(e,t,n){e.exports={modal:"modal__8wXY","modal-title":"modal-title__3pju","modal-body":"modal-body__21GH","modal-body-main":"modal-body-main__3PZT","in-sub":"in-sub__1-qs","fix-button":"fix-button__2HYE","body-header":"body-header__2rdK","search-bar":"search-bar__c9n-","selector-picker":"selector-picker__OALF","icon-grey":"icon-grey__31uI","body-content":"body-content__9OLw","app-list-placeholder":"app-list-placeholder__2j23",card:"card__3gm-",void:"void__1DSc","feature-pro-mark":"feature-pro-mark__3LO1","feature-avatar":"feature-avatar__31lU","feature-infos":"feature-infos__75Wd",title:"title__35yU","short-des":"short-des__2HuI","button-group":"button-group__1IHP","modal-body-sub":"modal-body-sub__3d1N","in-main":"in-main__3J-i",avatar:"avatar__1W6q",infos:"infos__16mz","title-and-buttons":"title-and-buttons__1bbH",left:"left__2snA",name:"name__2GUy","short-desc":"short-desc__bXMJ",right:"right__eZJ3",description:"description__1a6i",separator:"separator__3gKq",slide:"slide__tPjT",features:"features__J7Eq","power-up-upgrade":"power-up-upgrade__1bAC",desc:"desc__gUeW","pro-mark":"pro-mark___Jqi","circle-tick":"circle-tick__hYn2",medium:"medium__2M4C","confirm-close-title":"confirm-close-title__tu5E","confirm-close":"confirm-close__JOpT","toast-desc-settings":"toast-desc-settings__3kpY"}},omctVj2L:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R,D,L,z,A=function(e,t){return function(){return e.apply(t,arguments)}},V={}.hasOwnProperty;E=n("a+N5u/Cl"),w=n("CxY0Mkc1"),T=n("2qRnoGmE"),(P=n("GESwhXbR")).Alert,_=P.Toast,L=n("sa1Ed382"),C=n("vmWJWrVe"),n("s0r7VfKc").default,x=n("5V57DkyA"),l=x.OrganizationPortalApm,a=x.OrgPortalToProjectAppAPm,y=n("9MOL8v5J"),d=n("85182E8g"),o=n("X7+VPM8x"),i=n("7UQIdnmo"),N=n("8KNpsyVU"),D=N.showVerifyBindModal,I=N.getAccountBind,h=n("YzcFctrT"),f=n("30IMcDuq"),g=n("9mq3Zayu"),v=n("oEzVJ1gN"),b=n("KJFqng8l"),k=n("8iEkTkoU"),S=n("OmupbwLD"),O=n("WwBiRI+a"),j=O.projectUpgradeRequired,M=O.openOrganizationUpgradeProjectModal,c=n("uGcFUGYs"),r=n("9sOPw9dz"),w=n("RQ44psah"),m=n("77NnVLwu"),s=n("oXtD/CwF"),R=n("dcBzEMrG"),p=R.OrganizationPortalContainer,u=R.OrganizationPortalBridge,z=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return this.openMemberCardHandler=A(this.openMemberCardHandler,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)V.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,C),t.prototype.className="organization-portal-view",t.prototype.viewName="OrganizationPortalView",t.prototype.initialize=function(e){return this.organizationModel=e.organizationModel,l.measure(),this.readOrganizationRoles().then((t=this,function(){return t.readOrganizations()})).then(function(e){return function(t){e.organizationsCollection=t}}(this)).then(function(e){return function(){return e.assignOrganization()}}(this)).then(function(e){return function(){return e.assignProjectFilter()}}(this)).then(function(e){return function(){return e.assignProjectPortalMode()}}(this)).then(function(e){return function(){return e.assignTagProjectsMode()}}(this)).then(function(e){return function(){return e.assignProjectOrder()}}(this)).then(function(e){return function(){return e.assignTagProjectsOrder()}}(this)).then(function(e){return function(){return e.assignCollectBehaviorLogs()}}(this)).then(function(e){return function(){return e.mount()}}(this)).then(function(e){return function(){return e.listen()}}(this)).catch(function(e){return z(e)});var t},t.prototype.remove=function(){var e;return null!=(e=this.excessView)&&e.remove(),this.unmount(),t.__super__.remove.apply(this,arguments)},t.prototype.unmount=function(){return u.unmount()},t.prototype.listen=function(){if(this.organizationsCollection&&this.listenTo(this.organizationsCollection,"update change",this.assignOrganization),L.PREFERENCE)return this.listenTo(L.PREFERENCE,"change:portalMode",(e=this,function(){return e.assignProjectPortalMode()})),this.listenTo(L.PREFERENCE,"change:tagProjectsMode",function(e){return function(){return e.assignTagProjectsMode()}}(this)),this.listenTo(L.PREFERENCE,"change:projectOrder",function(e){return function(){return e.assignProjectOrder()}}(this)),this.listenTo(L.PREFERENCE,"change:tagProjectsOrder",function(e){return function(){return e.assignTagProjectsOrder()}}(this)),this.listenTo(L.PREFERENCE,"change:collectBehaviorLogs",function(e){return function(){return e.assignCollectBehaviorLogs()}}(this));var e},t.prototype.mount=function(){return this.requestReactView(this.getMountNode(),p,{onAddProjectMemberClick:E.bind(this.handleAddProjectMemberClick,this),onArchiveProjectClick:E.bind(this.handleArchiveProjectClick,this),onCreateProjectClick:E.bind(this.handleCreateProjectClick,this),onEnterProjectClick:E.bind(this.handleEnterProjectClick,this),onJoinProjectClick:E.bind(this.handleJoinProjectClick,this),onOpenProjectSettingClick:E.bind(this.handleOpenProjectSettingClick,this),onOpenProjectTransferModalClick:E.bind(this.handleOpenProjectTransferModalClick,this),onUnArchiveProjectClick:E.bind(this.handleUnArchiveProjectClick,this),onDestoryProjectClick:E.bind(this.handleDestoryProjectClick,this),onSuspendProjectClick:E.bind(this.handleSuspendProjectClick,this),onUnSuspendProjectClick:E.bind(this.handleUnSuspendProjectClick,this),getProjects:E.bind(this.getProjects,this),openMemberCardHandler:this.openMemberCardHandler},{redux:!0})},t.prototype.getMountNode=function(){return this.$el.get(0)},t.prototype.isOrgOwner=function(){return 2===this.organizationModel.getRoleScope()},t.prototype.getProject=function(e,t){var n,r,o;return o=t.organization,r=t.isOverdue,e.get("visibility"),e.getRoleScope(),n=o.permissions.organizationJoinProject||e.hasPermission("projecttag.join.project"),E.extend(e.toJSON(),{canAddMember:e.hasPermission("post.member"),canArchive:this.isOrgOwner()||e.hasPermission("put.archive"),canSuspend:this.isOrgOwner()||e.hasPermission("put.suspend"),canEnter:!0,canJoin:n,isOverdue:r,isJoined:e.isJoined()})},t.prototype.renderGuide=function(){return L.APP.openCreator("project",{_fsm_state:"from-template",_direct_template:"agile",selectedTemplate:{categories:["rd"]}})},t.prototype.getOptionForProject=function(){return{organization:{permissions:{getAllProjects:this.organizationModel.hasPermission("get.allProjects"),organizationJoinProject:this.organizationModel.hasPermission("organization.join.project")},roleScope:this.organizationModel.getRoleScope()},isOverdue:!this.organizationModel.payment.isActive}},t.prototype.getProjects=function(e,t){var n,r,o;return n=this.getOptionForProject(),r=e.map((o=this,function(e){return o.getProject(e,n)})),t?r:E.sortBy(r,"pinyin")},t.prototype.getPreference=function(e){return L.PREFERENCE.get(e)},t.prototype.getOrganization=function(){return E.extend({},this.organizationModel.toJSON(),{canManageProjectTagMember:this.organizationModel.hasPermission("organization.projecttagmember.manage"),canCreateProjecTags:this.organizationModel.hasPermission("organization.projecttag.post"),canPostProject:this.organizationModel.hasPermission("organization.post.project"),canTransferInProjects:this.organizationModel.hasPermission("put.transferIn")&&this.getTransferOrgIds().length>0})},t.prototype.getTransferOrgIds=function(){return E.without(E.pluck(this.organizationsCollection.getOrganizationsByRight(2),"id"),this.organizationModel.id)},t.prototype.readOrganizations=function(){return new Promise((e=this,function(t,n){var r;return r=d.find(0),e.el&&r?t(r):n()}));var e},t.prototype.readOrganizationRoles=function(){return new Promise((e=this,function(t,n){return y.get(e.organizationModel.id).reset(),y.fetch(e.organizationModel.id,{roleType:"organization",error:function(){return n()},success:function(){var r;return(null!=(r=e.$el)?r.get(0):void 0)?t():n()}})}));var e},t.prototype.handleAddProjectMemberClick=function(e){return I(this.organizationModel.id).then((t=this,function(n){return n?t.requestSubView(S).open(i,{projectModel:e,qrCodeType:"project"}):(D(),L.gta.event({action:"invitation blocked",page:"Organization Portal Page",type:"project"}))}));var t},t.prototype.handleEnterProjectClick=function(e,t,n){var o,i,s,l,u,p;if(!e.isAlienProject())return u=e.getFirstApp(),p=function(){var r;if(r="project/"+e.id+"/"+u,t)window.open(T.HOST+"/"+r);else{if(!n)return L.router.navigate(r,{trigger:!0}),"tasks"===u||"story"===u||"bug"===u||"sprint"===u?a.measure([u,e.getBoardViewType(u)]):void 0;document.location.href=T.HOST+"/"+r}},e.payment.isActive?j(e)?M(e):(o=e.getGtaCategory(),L.gta.event({action:"open detail",category:o,control:"Project List",segment:this.getPreference("portalMode"),type:"project",fromTemplate:e.get("_sourceId")}),p()):(L.gta.event({action:"enter organization expiration",category:e.get("category"),control:"Project List",segment:this.getPreference("portalMode"),type:"project"}),this.organizationModel.getRoleScope()>=1?this.excessView=this.requestSubView(S).open(c,{organizationId:this.organizationModel.id}):(s=tb_i18n.get("organization.settings.add.member.toplimit"),i=w.pay.orgAddMember(this.organizationModel.id),l=tb_i18n.get("organization.member.exceed.description",this.organizationModel.payment.memberQuota),this.excessView=this.requestSubView(S).open(r,{title:tb_i18n.get("organization.member.exceed"),content:l,confirmText:s,confirmHref:i})));document.location.href=e.get("alien").url},t.prototype.handleArchiveProjectClick=function(e){return this.requestSubView(S).open(f,{projectModel:e,trigger:!1})},t.prototype.handleOpenProjectSettingClick=function(e){if(!e.isAlienProject())return this.requestSubView(v,{projectModel:e});document.location.href=e.get("alien").extra.settingUrl},t.prototype.handleUnArchiveProjectClick=function(e){return this.requestSubView(o,{description:tb_i18n.get("portal.unarchive.project.description"),title:tb_i18n.get("portal.unarchive.project.title"),onConfirm:function(){return L.gta.event({action:"unarchive content",type:"Project",control:"Project Cover"}),e.save(null,{attrs:{isArchived:!1},success:function(){return e.joinRoom(),_.success({message:tb_i18n.get("portal.unarchive.success")})},error:function(e){return _.error({message:tb_i18n.get("portal.unarchive.error")})}})}})},t.prototype.handleSuspendProjectClick=function(e){return this.requestSubView(S).open(g,{projectModel:e,trigger:!1})},t.prototype.handleDestoryProjectClick=function(e){var t,n;return n=e.get("name"),t=e.get("_organizationId"),this.requestSubView(S).open(k,{model:e,password:n,confirmPlaceholder:tb_i18n.get("project.settings.delete.placeholder",E.escape(n)),title:tb_i18n.get("project.settings.delete"),message:tb_i18n.get("project.settings.delete.msg",E.escape(n)),success:function(){return _.success(tb_i18n.get("project.settings.delete.success")),t?L.router.navigate("organization/"+t,{trigger:!0}):L.router.navigate("projects",{trigger:!0})}})},t.prototype.handleUnSuspendProjectClick=function(e){return this.requestSubView(o,{title:tb_i18n.get("portal.unsuspend.project.title"),description:tb_i18n.get("portal.unsuspend.project.description"),confirm:tb_i18n.get("portal.unsuspend.project.confirm"),onConfirm:function(){return e.updateUnsuspend({success:function(){return _.success(tb_i18n.get("portal.unsuspend.project.success"))},error:function(){return _.error(tb_i18n.get("portal.unsuspend.project.error"))}})}}),L.gta.event({action:"unsuspend content",type:"Project",control:"Project Cover"})},t.prototype.handleCreateProjectClick=function(e,t){return L.gta.event({action:"create new project",method:"click"}),L.APP.openCreator("project",{_organizationId:this.organizationModel.id,projectTagId:e,projectTagSnippet:{_id:e,name:t}})},t.prototype.handleOpenProjectCategoryManagerClick=function(){return L.gta.event({action:"edit project tag"}),this.requestSubView(S).open(h,{organizationModel:this.organizationModel})},t.prototype.handleOpenProjectTransferModalClick=function(){return L.gta.event({action:"move in project",method:"click"}),this.requestSubView(S).open(b,{action:"import",sourceIds:this.getTransferOrgIds(),targetId:this.organizationModel.id})},t.prototype.handleJoinProjectClick=function(e){return e.join({success:(t=this,function(){return setTimeout(function(){return t.handleEnterProjectClick(e,!1,!0)},1e3)})});var t},t.prototype.assignDataToState=function(e){return u.assign(e)},t.prototype.assignOrganization=function(){var e;return e=this.getOrganization(),u.assignOrganizationData({organization:e,_organizationId:e._id})},t.prototype.assignProjectFilter=function(){return u.assignProjectFilter(this.organizationModel.id)},t.prototype.assignProjectPortalMode=function(){return this.assignDataToState({portalMode:this.getPreference("portalMode")})},t.prototype.assignTagProjectsMode=function(){return this.assignDataToState({tagProjectsMode:this.getPreference("tagProjectsMode")})},t.prototype.assignProjectOrder=function(){return this.assignDataToState({projectOrder:this.getPreference("projectOrder")})},t.prototype.assignTagProjectsOrder=function(){return this.assignDataToState({tagProjectsOrder:this.getPreference("tagProjectsOrder")})},t.prototype.assignCollectBehaviorLogs=function(){return this.assignDataToState({collectBehaviorLogs:this.getPreference("collectBehaviorLogs")})},t.prototype.openMemberCardHandler=function(e,t,n){var r,o;return null!=(r=this.memberCardView)&&r.remove(),this.subscribe(m.fetch$(e).do((o=this,function(e){return o.memberCardView=o.requestSubView(s,{$toggler:n,withChat:!0,projectModel:e,userId:t}),o.memberCardView.show()})))},t}()},"osTTB3X/":function(e,t,n){e.exports=n.p+"images/d_shuai@2x.4a859d59.png"},ot2OFKYt:function(e,t,n){e.exports={"task-table-printer__toolbar-action-container":"task-table-printer__toolbar-action-container__uttF","task-table-printer__group-title-action-container":"task-table-printer__group-title-action-container__SglG","task-table-printer__group-toolbar-action-container":"task-table-printer__group-toolbar-action-container__h7y9","task-table-printer__group-toolbar-action-jump-iteration":"task-table-printer__group-toolbar-action-jump-iteration__1P9F","task-table-printer__placeholder-wrapper":"task-table-printer__placeholder-wrapper__17ax","task-table-printer__placeholder":"task-table-printer__placeholder__16tL","task-table-printer__placeholder-image":"task-table-printer__placeholder-image__1Ibs","private-subtask-count-row-hook":"private-subtask-count-row-hook__16ag","private-subtask-count":"private-subtask-count__5TQd"}},"p3+KPrP0":function(e,t){e.exports=function(e){return'<div class="modal-content"> <header class="modal-header text-center"> <a class="modal-close modal-close pull-right icon icon-remove close-handler"></a> <h4 class="modal-title"> '+tb_i18n.get("organization.member.excess.title")+' </h4> </header> <div class="modal-body"> <p class="description"> '+tb_i18n.get("organization.member.excess.message",e.organizationName)+' </p> <div class="organization-excess-handler-set clearfix"> <a class="btn btn-primary btn-block pay-to-handler" data-gta="event" data-label="pay"> '+tb_i18n.get("organization.member.excess.renewBtnText")+' </a> <a class="btn btn-primary btn-block jump-to-handler" data-gta="event" data-label="management"> '+tb_i18n.get("organization.member.excess.manageBtnText")+' </a> <a class="btn btn-primary btn-block tranfer-to-handler" data-gta="event" data-label="management"> '+tb_i18n.get("projects.export")+' </a> <div class="member-excess-line" /> <a class="btn btn-danger btn-block remove-to-handler" data-gta="event" data-label="management"> '+tb_i18n.get("delete.organization")+' </a> </div> <div class="aside"> '+tb_i18n.get("organization.member.excess.refresh","refresh-handler")+" </div> </div></div>"}},p3c90j9n:function(e,t,n){e.exports={"tag-popover":"tag-popover__1C-D","text-button":"text-button__1NDY"}},p5Ufk1Ob:function(e,t,n){var r,o,i,s={}.hasOwnProperty;r=n("J4aergI2"),o=n("/e+Ob7oW"),i=n("vmWJWrVe"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,i),t.prototype.viewName="markdownHelperView",t.prototype.className="markdown-helper",t.prototype.initialize=function(){return this.renderBasic(),this},t.prototype.renderBasic=function(){var e;return this.$el.html(r()),this.$markdown=this.$(".markdown-textarea").flexText(),this.$preview=this.$(".markdown-preview"),this.$markdown.on("input",(e=this,function(t){var n;return n=o(e.$markdown[0].value||""),e.$preview.html(n)})),this},t}()},p5ZwduzY:function(e,t){e.exports=function(e){var t='<form> <div class="form-group"> <label>'+tb_i18n.get("repeat")+':</label> <div class="dropdown"> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu-repeat-freq" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> <span>'+e.freqTitle+'</span> <span class="icon icon-chevron-down"></span> </button> <ul class="dropdown-menu" aria-labelledby="dropdownMenu-repeat-freq"> ',n=e.freqs;if(n)for(var r,o=-1,i=n.length-1;o<i;)r=n[o+=1],t+=' <li class="repeat-freq ',e.freq===r._id&&(t+="selected"),t+='" data-id="'+r._id+'"><a>'+r.title+"</a></li> ";t+=' </ul> </div> </div> <div class="form-group"> <label>'+tb_i18n.get("repeat.interval")+':</label> <div class="dropdown"> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu-repeat-interval" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> <span>'+e.interval+'</span> <span class="icon icon-chevron-down"></span> </button> <ul class="dropdown-menu thin-scroll" aria-labelledby="dropdownMenu-repeat-interval"> ';var s=e.intervals;if(s){o=-1;for(var a,c=s.length-1;o<c;)a=s[o+=1],t+=' <li class="repeat-interval ',e.interval===a&&(t+="selected"),t+='" data-id='+a+"><a>"+a+"</a></li> "}if(t+=" </ul> </div> ",3===e.freq?t+=" <span>"+tb_i18n.get("day")+"</span> ":2===e.freq?t+=" <span>"+tb_i18n.get("week")+"</span> ":1===e.freq&&(t+=" <span>"+tb_i18n.get("month")+"</span> "),t+=" </div> ",2===e.freq){t+=' <div class="form-group"> <ul class="optional-days"> ';var l=e.weekdays;if(l){o=-1;for(var u,p=l.length-1;o<p;)t+=" <li data-id="+(u=l[o+=1])._id+' class="optional-day ',e.byweekday.indexOf(u._id)>-1&&(t+="active"),t+=' toggle-weekday-handle" >'+u.title+"</li> "}t+=" </ul> </div> "}else if(1===e.freq){t+=' <div class="form-group"> <ul class="optional-days"> ';var d=e.monthdays;if(d){o=-1;for(var h,m=d.length-1;o<m;)t+=" <li data-id="+(h=d[o+=1])+' class="optional-day ',e.bymonthday.indexOf(h)>-1&&(t+="active"),t+=' toggle-monthday-handle">'+h+"</li> "}t+=" </ul> </div> "}return t+=' <div class="form-group"> <p class="repeat-description">'+e.description+'</p> </div> <div class="form-group submit-wrap"> <button type="submit" ',(2===e.freq&&!e.byweekday.length||1===e.freq&&!e.bymonthday.length)&&(t+="disabled"),t+=' class="btn btn-primary submit-handler">'+tb_i18n.get("confirm")+"</button> </div></form>"}},"pAvVHQ+W":function(e,t,n){e.exports={table:"table__CN1M",thead:"thead__fkct",tbody:"tbody__262C",tr:"tr__1u1_",th:"th__2rVo","remove-handler":"remove-handler__1t0s","sort-handler":"sort-handler__2weN","remove-opened":"remove-opened__xIqL",dragging:"dragging__SGLd","remove-popup":"remove-popup__23vP",input:"input__27sx","input-disabled":"input-disabled__1-qX","input-placeholder":"input-placeholder__1A_O"}},pBu40acj:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v={}.hasOwnProperty;m=n("a+N5u/Cl"),d=n("3eMzznN/"),h=n("vmWJWrVe"),l=n("bZr3G77e"),p=n("YdqH4v7N"),u=n("0FRv5rrl"),r=n("+pMB8BsN"),s=n("bkHM83tG"),o=n("P+f+a/gd"),f=n("gpXgy0o6").checkLimitTaskflowProjects,c=n("uuGB3tC8").CopyLimit,a=n("w8ZHMe1A"),g=function(){return{all:{title:tb_i18n.get("activity.panel.title.all"),backTo:"all",View:r},share:{backTo:"all",View:s},copy:{backTo:"all",View:o}}},i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)v.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,h),t.prototype.viewName="ActivityPanelView",t.prototype.className="activity-panel",t.prototype.currentView=null,t.prototype.events={"click .switch-handler":"switchHandler","click .close-handler":"toggle","mousewheel .activity-panel-body":d.mousewheel,"click .project-copy-taskflow-limit-upgrade":"onUpgradeEnterprisePro"},t.prototype.initialize=function(e){return null==e&&(e={}),this.projectModel=e.projectModel,this.options=e,this.children={},this.renderBasic(),this.setupScroll(this.$body),this.setupLoadMore(10)},t.prototype.loadMore=function(e){var t;return null!=(t=this.currentView)&&"function"==typeof t.loadMore&&t.loadMore(),"function"==typeof e?e():void 0},t.prototype.renderBasic=function(){var e;return e=g(),this.$el.html(a(e.all)),this.$body=this.$(".activity-panel-body"),this.$backButton=this.$(".activity-panel-header .activity-back")},t.prototype.refreshHeader=function(e){var t,n;return t=g(),this.$backButton.attr("data-type",t[e].backTo),n="all"!==e,this.$el[n?"addClass":"removeClass"]("with-back")},t.prototype.renderChild=function(e){var t,n,r,o,i,s;return(r=g())[e]||(e="all"),(null!=(o=this.children[e])?o.$el:void 0)||(n=r[e],(i=m.extend({},this.options))._projectId||(i._projectId=this.projectModel.id),i.projectModel||(i.projectModel=this.projectModel),this.children[e]=o=this.requestSubView(n.View,i)),null!=(s=this.currentView)&&s.$el.detach(),this.refreshHeader(e),this.scrollToTop(),this.$body.html(o.$el),this.currentView=o,"function"==typeof(t=this.currentView).onEnter?t.onEnter():void 0},t.prototype.switchHandler=function(e){var t;if(t=$(null!=e?e.currentTarget:void 0).attr("data-type"))return"all"===t?this.backToAll():this.enterChild(t)},t.prototype.backToAll=function(){return this.renderChild("all"),this.leftIn()},t.prototype.enterChild=function(e){var t,n,r,o,i;return"copy"===e&&this.projectModel.isTaskflow()?(t=this.projectModel.get("_organizationId"),r=u.find(t),t&&(n={_organizationId:t}),o=new Promise((i=this,function(e,o){return l.get("taskflow-projects",{data:n}).then(function(n){var s;return f(n,r)?((s=i.$(".copy-project-handler-react").get(0))&&i.unmountReact(s),i.requestReactView(s,c,{taskflowProjectsLength:n.length,organizationId:t}),o()):e()})}))):o=Promise.resolve(),d.promiseChain(function(e){return function(){return!e.el}}(this))(function(){return o},function(t){return function(){return t.renderChild(e),t.rightIn()}}(this)).catch(m.noop)},t.prototype.scrollToTop=function(){return this.slideTo(null,!0),this},t.prototype.leftIn=function(){var e;return(e=this.currentView.$el).css({x:"-100%",opacity:0}),e.transition({x:"0",opacity:1},128,"out")},t.prototype.rightIn=function(){var e;return(e=this.currentView.$el).css({x:"100%",opacity:0}),e.transition({x:"0",opacity:1},128,"out")},t}(),m.extend(i.prototype,p),e.exports=i},pFzwY3HK:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("mrSGxOB2"),o=n("GESwhXbR"),i=function(){function e(e){this.destination=e}return e.forwardCall=function(t){return function(e){function n(){return e.call(this,t)||this}return r.d(n,e),n}(e)},e.prototype.essage=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var s=o.Toast[e];"function"==typeof s&&s.apply(o.Toast,n),this.destination.essage&&(t=this.destination).essage.apply(t,r.h([e],n))},e.prototype.refresh=function(){this.destination.refresh&&this.destination.refresh()},e.prototype.close=function(){this.destination.close&&this.destination.close()},e.prototype.handle=function(e){var t=this[e.method];if("function"==typeof t)return t.apply(this,e.params);throw new ReferenceError(e.method+" is not defined")},e.prototype.cleanup=function(){},e.prototype.isolatedAPI=function(){return[]},e}()},pHAQicEC:function(e,t){t.MAX_IMAGE_SIZE=20971520,t.MAX_TXT_SIZE=2097152,t.MAX_PDF_SIZE=104857600,t.SPECIAL_TYPE_WITH_PREVIEW=["psd","ai"],t.FILE_TYPE_WITH_PREVIEW=["sketch"],t.ANIMATED_IMAGE_TYPES=["gif","svg"],t.FileTypes={jpg:"jpeg"}},"pJ3mASY/":function(e,t,n){e.exports=n.p+"images/d_nvhaier@2x.ce1e6788.png"},pLf3YKvk:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("mrSGxOB2"),o=n("TSYQbtd+"),i=n.n(o),s=n("tLZJUYWX"),a=n("q1tIBJhx"),c=n("GESwhXbR"),l=n("qCWxDgLE"),u=n("rhK5Yt5v"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cxPrefix="project-list-card",t.handleAddProjectMemberClick=function(e){var n=t.props,r=n.onAddProjectMemberClick,o=n.project;r&&r(e,o._id)},t.handleArchiveProjectClick=function(e){var n=t.props,r=n.onArchiveProjectClick,o=n.project;r&&r(e,o._id)},t.handleDestoryProjectClick=function(e){var n=t.props,r=n.onDestoryProjectClick,o=n.project;r&&r(e,o._id)},t.handleJoinProjectClick=function(e){var n=t.props,r=n.onJoinProjectClick,o=n.project;r&&r(e,o._id)},t}return r.d(t,e),t.prototype.renderLogo=function(){var e=this.props.project,t=a.createElement("span",{className:this.cxPrefix+"__logo",style:u.g(e)?{}:{backgroundImage:"url("+e.logo+")"}});return e.suspendedAt&&e.suspendedBy&&(t=a.createElement(c.Tooltip,{title:u.e(e.suspendedAt,e.suspendedBy)},t)),t},t.prototype.renderName=function(){var e=this.props.project;if(u.h(e))return null;var t=i()(this.cxPrefix+"__name","hinted");return a.createElement("span",{className:t,"data-title":e.name},e.name)},t.prototype.renderDescription=function(){var e=this.props.project;if(u.f(e))return null;var t=i()(this.cxPrefix+"__description","hinted");return a.createElement("span",{className:t,"data-title":e.description},e.description)},t.prototype.renderVisibility=function(){var e=this.props.project;if(u.i(e))return null;var t=u.d(e);return t?a.createElement("span",{className:this.cxPrefix+"__visibility"},t?a.createElement("span",{className:this.cxPrefix+"__visibility__text"},t):null):null},t.prototype.renderStarred=function(){var e,t=this;return a.createElement("span",{className:this.cxPrefix+"__starred"},(e=t.props.project,u.q(e)||u.n(e)||u.l(e)?null:a.createElement(c.Icon,{name:"star",size:16})))},t.prototype.renderUnSuspendProjectHandler=function(){var e=this.props.project;if(!(u.q(e)&&u.j(e)&&u.k(e)&&u.c(e)))return null;var t=i()(this.cxPrefix+"__hidden-handlers__item",this.cxPrefix+"__unsuspend-project-handler","hinted");return a.createElement("a",{className:t,"data-title":s.get("project.setting.handler.unsuspend"),onClick:this.handleUnSuspendProjectClick},a.createElement("span",{className:"icon icon-putback"}))},t.prototype.renderUnArchiveProjectHandler=function(){var e=this.props.project;if(!(u.n(e)&&u.m(e)&&u.k(e)&&u.a(e)))return null;var t=i()(this.cxPrefix+"__hidden-handlers__item",this.cxPrefix+"__unarchive-project-handler","hinted");return a.createElement("a",{className:t,"data-title":s.get("project.setting.handler.unarchive"),onClick:this.handleUnArchiveProjectClick},a.createElement("span",{className:"icon icon-putback"}))},t.prototype.renderDestoryProjectHandler=function(){var e=this.props.project;if(!(u.m(e)&&u.n(e)&&u.c(e)))return null;var t=i()(this.cxPrefix+"__hidden-handlers__item",this.cxPrefix+"__destory-project-handler","hinted");return a.createElement("a",{className:t,"data-title":s.get("project.setting.handler.delete"),onClick:this.handleDestoryProjectClick},a.createElement("span",{className:"icon icon-trash"}))},t.prototype.renderSuspendProjectHandler=function(){var e=this.props.project;if(!(u.m(e)&&u.n(e)&&u.c(e)))return null;var t=i()(this.cxPrefix+"__hidden-handlers__item",this.cxPrefix+"__suspend-project-handler","hinted");return a.createElement("a",{className:t,"data-title":s.get("project.setting.handler.suspend"),onClick:this.handleSuspendProjectClick},a.createElement("span",{className:"icon icon-archive"}))},t.prototype.renderJoinProjectHandler=function(){var e=this.props.project,t="boolean"!=typeof e.isJoined||e.isJoined;if(u.q(e)||u.n(e)||u.o(e)||!e.canJoin||t)return null;var n=i()(this.cxPrefix+"__hidden-handlers__item",this.cxPrefix+"__join-project-handler","hinted");return a.createElement("a",{className:n,"data-title":s.get("join.project"),onClick:this.handleJoinProjectClick},a.createElement("span",{className:"icon icon-enter-project"}))},t.prototype.renderAddProjectMemberHandler=function(){var e=this.props.project;if(u.q(e)||u.n(e)||u.o(e)||u.b(e))return null;var t=i()(this.cxPrefix+"__hidden-handlers__item",this.cxPrefix+"__add-project-member-handler","hinted");return a.createElement("a",{className:t,"data-title":s.get("add.member"),onClick:this.handleAddProjectMemberClick},a.createElement("span",{className:"icon icon-add-user"}))},t.prototype.renderArchiveProjectHandler=function(){var e=this.props.project;if(!u.j(e)||!u.a(e))return null;var t=i()(this.cxPrefix+"__hidden-handlers__item",this.cxPrefix+"__archive-project-handler","hinted");return a.createElement("a",{className:t,"data-title":s.get("project.setting.handler.archive"),onClick:this.handleArchiveProjectClick},a.createElement("span",{className:"icon icon-trash"}))},t.prototype.renderOpenProjectSettingHandler=function(){var e=this.props.project;if(u.q(e)||u.n(e))return null;var t=i()(this.cxPrefix+"__hidden-handlers__item",this.cxPrefix+"__open-project-setting-handler","hinted");return a.createElement("a",{className:t,"data-title":s.get("open.project.setting"),onClick:this.handleOpenProjectSettingClick},a.createElement("span",{className:"icon icon-cog"}))},t.prototype.renderStarProjectHandler=function(){var e=this.props.project;if(u.q(e)||u.n(e)||u.o(e)||u.p(e))return null;var t=i()(this.cxPrefix+"__hidden-handlers__item",this.cxPrefix+"__star-project-handler","hinted");return a.createElement("a",{className:t,"data-title":s.get("star.project"),onClick:this.handleStarProjectClick},a.createElement(c.Icon,{name:"star-stroke",size:16}))},t.prototype.renderUnstarProjectHandler=function(){var e=this.props.project;if(u.q(e)||u.n(e)||u.o(e)||u.l(e))return null;var t=i()(this.cxPrefix+"__hidden-handlers__item",this.cxPrefix+"__unstar-project-handler","hinted");return a.createElement("a",{className:t,"data-title":s.get("unstar.project"),onClick:this.handleUnstarProjectClick},a.createElement(c.Icon,{name:"star",size:16}))},t.prototype.renderHiddenHandlers=function(){return!this.isAlienProject()&&a.createElement("div",{className:this.cxPrefix+"__hidden-handlers"},this.renderUnSuspendProjectHandler(),this.renderUnArchiveProjectHandler(),this.renderJoinProjectHandler(),this.renderAddProjectMemberHandler(),this.renderSuspendProjectHandler(),this.renderDestoryProjectHandler(),this.renderArchiveProjectHandler(),this.renderOpenProjectSettingHandler(),this.renderStarProjectHandler(),this.renderUnstarProjectHandler())},t.prototype.renderAlienHandlers=function(){return this.isAlienProject()&&a.createElement("div",{className:this.cxPrefix+"__hidden-handlers"},this.renderOpenProjectSettingHandler(),this.renderStarProjectHandler(),this.renderUnstarProjectHandler())},t.prototype.render=function(){var e=this.props.className,t=i()(this.cxPrefix+"__component",e);return a.createElement("div",{className:t,onClick:this.handleEnterProjectClick},a.createElement("span",{className:this.cxPrefix+"__content "+this.cxPrefix+"__content__left"},this.renderLogo()),a.createElement("div",{className:this.cxPrefix+"__content-wrap"},a.createElement("span",{className:this.cxPrefix+"__content "+this.cxPrefix+"__content__middle"},this.renderName(),this.renderDescription()),a.createElement("span",{className:this.cxPrefix+"__content "+this.cxPrefix+"__content__right"},this.renderVisibility(),this.renderStarred(),this.renderHiddenHandlers(),this.renderAlienHandlers())))},t}(l.AbstractProjectGroupItem)},pMTT9VcQ:function(e,t,n){e.exports={"object-icon":"object-icon__1FXu"}},pOv4eJ7f:function(e,t,n){"use strict";n.r(t),n.d(t,"Container",function(){return u});var r=n("mrSGxOB2"),o=n("R2qY+4o2"),i=n("OWVr6ITO"),s=n("hkPM0sjX"),a=n("T3rbAVQx"),c=n("2qRnoGmE"),l=n("CxY0Mkc1"),u=function(){function e(e,t,n){var r=this;void 0===n&&(n={}),this.cid=Object(a.a)("container"),this.sameOrigin=!0,this.isolatedAPIs=[],this.reConnectToken=null,this.connected=!1,this.callbacks=Object.create(null),this.pendingQueue=[],this.retryLeftCount=10,this.retryTimeout=218,this.subscribeFromContainer=function(){r.subscription=r.message$.subscribe(function(e){if(e.data.requestType===o.MessageType.ACK&&!r.connected)return r.connected=!0,r.pendingQueue.forEach(function(e){return r.push(e)}),r.pendingQueue.length=0,void(null!=r.reConnectToken&&window.clearTimeout(r.reConnectToken));var t=null,n=null;try{!r.sameOrigin&&r.isolatedAPIs.indexOf(e.data.payload.method)>-1&&r.onError(Error(i.CrossOrigin)),t=r.platformAPI.handle(e.data.payload,r.containerNode)}catch(c){n=c}if(t&&"function"==typeof t.then)t.then(function(t){var o={hasError:!!n,hasNode:r.isHostNode(t)};r.response(e.data.requestId,o,n||t)});else{var s={hasError:!!n,hasNode:r.isHostNode(t)};r.response(e.data.requestId,s,n||t)}if(null==n&&r.containerNode&&e.data.payload&&e.data.payload.method&&r.callbacks[e.data.payload.method]){var a=r.callbacks[e.data.payload.method];"function"==typeof a&&a.apply(null,e.data.payload.params)}}),r.connect()},this.unsubscribe=function(){r.subscription&&r.subscription.unsubscribe()},this.platformAPI=new t,this.url=l.parse(e);var u=l.parse(c.HOST);this.targetOrigin=this.url.protocol!==u.protocol||this.url.host!==u.host?"*":this.url.protocol+"//"+this.url.host,this.message$=s.a.filter(function(e){return e.data.targetId===r.cid&&void 0!==e.data.requestId}),this.isolatedAPIs=this.platformAPI.isolatedAPI();var p=n.retryLeftCount,d=n.retryTimeout,h=n.onError;this.retryLeftCount="number"==typeof p?p:this.retryLeftCount,this.retryTimeout="number"==typeof d?d:this.retryTimeout,this.onError="function"==typeof h?h:this.onError}return Object.defineProperty(e.prototype,"remote",{get:function(){return{on:this.on.bind(this),off:this.off.bind(this)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"node",{get:function(){return this.containerNode},enumerable:!0,configurable:!0}),e.prototype.style=function(e){if(this.containerNode){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+": "+e[n]+";");this.containerNode.style.cssText=t}},e.prototype.setup=function(e){this.hostNode||(this.hostNode=e,this.createIframe(e))},e.prototype.remove=function(){this.containerNode&&this.hostNode&&(this.hostNode.removeChild(this.containerNode),this.unsubscribe(),this.containerNode=void 0,this.callbacks=Object.create(null)),this.platformAPI.cleanup()},e.prototype.push=function(e){this.containerNode&&void 0!==e&&(this.connect&&this.containerNode.contentWindow?this.containerNode.contentWindow.postMessage({type:o.MessageType.PSH,payload:JSON.parse(JSON.stringify(e))},this.targetOrigin):this.pendingQueue.push(e))},e.prototype.on=function(e,t){this.callbacks[e]=t},e.prototype.off=function(e){this.callbacks[e]=null},e.prototype.createIframe=function(e){this.containerNode=document.createElement("iframe"),this.containerNode.frameBorder="0",this.containerNode.src=l.format(this.url),this.containerNode.onload=this.subscribeFromContainer,e.innerHTML="",e.appendChild(this.containerNode)},e.prototype.connect=function(){var e=this;this.containerNode&&this.containerNode.contentWindow&&(this.containerNode.contentWindow.postMessage({type:o.MessageType.SYN,targetId:this.cid,origin:document.location.origin},this.targetOrigin),this.retryLeftCount>0?this.reConnectToken=window.setTimeout(function(){e.retryLeftCount--,e.connect()},this.retryTimeout):this.onError(new Error("Connect target container failed.")))},e.prototype.createResponse=function(e,t,n){var i={type:o.MessageType.MSG,responseId:e,payload:n};return t.hasError?r.a({},i,{hasError:!0,payload:n.toString()}):t.hasNode?r.a({},i,{hasNode:!0,payload:n}):i},e.prototype.response=function(e,t,n){if(this.containerNode&&this.containerNode.contentWindow&&this.connected){var r=this.createResponse(e,t,n);this.containerNode.contentWindow.postMessage(JSON.parse(JSON.stringify(r)),this.targetOrigin)}},e.prototype.isHostNode=function(e){return"string"==typeof e&&e.slice(1,o.HostNode.Prefix.length+1)===o.HostNode.Prefix},e.prototype.onError=function(e){if("string"!=typeof e)throw e;console.error(e)},e}()},pRhN8ZQR:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e.cells;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=' <li class=" object-picker-projects__project-item select-handler ',(s=i[a+=1]).isDisabled&&(o+=" object-picker-projects__project-item__is-disabled"),o+='" data-id="'+s._id+'" > '+r(s.name)+" </li>";return o}},pRtpPrbP:function(e,t){e.exports=function(e){var t='<div class="modal-content"> <header class="modal-header"> <h4 class="modal-title text-center">'+e.title+'</h4> <a class="modal-close pull-right icon icon-remove" data-dismiss="modal"></a> </header> <div class="modal-body"> <p>'+e.content+'</p> <a class="btn btn-'+e.confirmStyle+' confirm-handler" ';return e.confirmHref&&(t+=' href="'+e.confirmHref+'" target="_blank" '),t+=">"+e.confirmText+"</a> </div></div>"}},pVPhvouy:function(e,t,n){e.exports={"task-progress":"task-progress__2Kwt"}},pX0uXGHm:function(e,t,n){e.exports=n.p+"images/o_zhaoxiangji@2x.f7f35a92.png"},pXQoaRAy:function(e,t,n){e.exports={"task-reminder":"task-reminder__FgF_","task-reminder__inner":"task-reminder__inner__1HIy"}},pY3rxez1:function(e,t,n){e.exports=function(e){var t="";return t+='<div class="previewer-header-type"></div><div class="file-category-wrapper"></div><div class="file-name-wrapper"></div><div class="previewer-header-handler"> <div class="share-status"></div> '+n("/nSGaWXY")(e)+' <div class="previewer-handler info-handler"> <span class="icon icon-circle-info-o"></span> <span>'+tb_i18n.get("previewer.info")+"</span> </div> ",!e.isArchived&&e.canUpdate&&(t+=" <div class=\"previewer-handler update-handler\" data-gta-ignore=\"input\" data-gta=\"{action: 'update file', type: 'file', page: 'Works Page', control: 'Right Menu', method: 'click', segment: 'file previewer'}\" > <span class=\"icon icon-upload-file\"></span> <span>"+tb_i18n.get("previewer.update")+"</span> </div> "),t+=" ",e.permissions.getDownload&&(t+=" ",e.isFileLocalExist?t+=" <a class=\"previewer-handler open-work-handler\" data-gta=\"{action: 'open detail', type: 'file', control: 'Right Open Button', method: 'open'}\"> <span class=\"icon icon-file3\"></span> <span>"+tb_i18n.get("previewer.open")+"</span> </a> ":t+=" <div class=\"previewer-handler download-handler\" data-gta=\"{action: 'open detail', type: 'file', segment: 'file page', control: 'Right Menu', method: 'download'}\"> <span class=\"icon icon-download-file\"></span> <span>"+tb_i18n.get("previewer.download")+"</span> </div> ",t+=" "),t+=" ",e.isArchived?t+=" <div class=\"previewer-handler unarchive-handler\" data-gta=\"{action: 'unarchive', type: 'file', control: 'right menu', method: 'unarchive'}\"> <span class=\"icon icon-putback\"></span> <span>"+tb_i18n.get("archive.list.menu.restore")+'</span> </div> <div class="previewer-handler remove-archive-handler"> <span class="icon icon-trash"></span> <span>'+tb_i18n.get("archive.list.menu.remove.completely")+"</span> </div> ":t+=' <div class="previewer-handler component-mount copy-url-wrapper"></div> <div class="previewer-handler component-mount likes-wrapper"></div> <div class="previewer-handler menu-handler" data-gta="{action: \'toggle more menu\', type: \'file\'}"> <span class="icon icon-more"></span> </div> ',t+=' <div class="previewer-handler cancel-handler" data-dismiss="modal" data-gta="event" data-label="close previewer"> <span class="icon icon-remove-s"></span> </div></div>'}},"pZtHSz+O":function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("a+N5u/Cl"),r=n("VuB9cZyl"),o=n("kQP9/K5/"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="worktimes",t.prototype.model=o,t.prototype.pageNum=20,t.prototype.url=function(){return"tasks/"+this._boundToObjectId+"/worktimes"},t.prototype.sync=function(e,n,r){return null==r&&(r={}),r=i.extend({url:this.url()},r),t.__super__.sync.apply(this,arguments)},t.prototype.comparator=function(e,t){var n,r,o,i,s,a;return o=e.get("recordDate"),a=t.get("recordDate"),i=new Date(a)-new Date(o),r=e.get("created"),s=t.get("created"),n=new Date(s)-new Date(r),i||n},t.prototype.addWorktime=function(e){var t,n;return null==e&&(e={}),t=e.success||function(){},e.success=(n=this,function(e){return n.remove(e._id,{silent:!0}),n.add(e,{sort:!1,at:0}),t(e)}),this.sync("create",this,e)},t}()},pdCqEcaI:function(e,t,n){"use strict";n.d(t,"e",function(){return o}),n.d(t,"f",function(){return i}),n.d(t,"g",function(){return s});var r=n("3eMzznN/");function o(e,t){return e.filter(function(e){return e.type===t}).map(function(e){return e.payload})}function i(e){return e.subTitle?e.subTitle:e.teams&&e.teams.length>0?e.teams[0].name:e.email&&!r.isDefaultEmail(e.email)?e.email:e.phone||""}function s(e){var t=e._id,n=e._projectId,r=e._organizationId;return t&&{_id:t}||n&&{_projectId:n}||{_organizationId:r}}},"pdE/8Sir":function(e,t,n){var r,o,i,s,a,c,l={}.hasOwnProperty;s=n("a+N5u/Cl"),c=n("sa1Ed382"),i=n("gLdDAp90"),r=n("aD6I3VT4"),o=n("On/LiFdN").CustomFieldInfo,a=n("KePvfzJj").parseCustomfield,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.tagName="section",t.prototype.viewName="DetailInfosCustomField",t.prototype.className="detail-infos-custom-field-view no-border-wrapper",t.prototype.initialize=function(e){return t.__super__.initialize.apply(this,arguments),this.projectModel=e.projectModel,this.objectModel=e.objectModel,this.customFieldModel=e.customFieldModel,this.boundToObjectType=e.boundToObjectType,this.simplifiedVersion=e.simplifiedVersion,this.isRequired=e.isRequired,this.canEdit=e.canEdit,this.isCreationMode=!this.objectModel.id,this.listen(),this.render()},t.prototype.listen=function(){return this.listenTo(this.objectModel,"change:customfields",this.render),this.listenTo(this.customFieldModel,"change",this.render)},t.prototype.getComponentOptions=function(){var e,t;return t={fieldInfo:this.customField,boundToObjectType:this.boundToObjectType,project:(null!=(e=this.projectModel)?e.toJSON():void 0)||{},isRequired:this.isRequired,isEditable:this.hasPermission()},t=this.isCreationMode?s.extend(t,{fieldInfo:this.customField,onSave:this.setCustomFieldInfo.bind(this)}):s.extend(t,{fieldInfo:this.customField,boundToObjectId:this.objectModel.id,onSave:this.saveCustomFieldInfo.bind(this),gtaHandler:this.gtaConfigFunction.bind(this)}),this.simplifiedVersion&&(t=s.extend(t,{withTitle:!1,emptyPlaceholder:this.customField.name})),t},t.prototype.render=function(){var e,t,n;return e=s.findWhere(this.objectModel.get("customfields"),{_customfieldId:this.customFieldModel.get("_customfieldId")}),this.customField=a(null!=(n=this.customFieldModel)?n.toJSON():void 0,e),t=this.getComponentOptions(),this.requestReactView(this.el,o,t)},t.prototype.gtaConfigFunction=function(e,t){var n,r,o;return"task"===this.boundToObjectType?(n=(null!=(r=this.objectModel)?r.isSubtask():void 0)?"subtask":"task",o=this.objectModel.get("ancestorIds").length):n=this.boundToObjectType,t||(t="edit"),c.gta.event({action:t+" customfields",category:e,control:"fieldslist",segment:"Task Page",type:n,series:o,projectid:this.projectModel.id,organizationid:this.projectModel.get("_organizationId")})},t.prototype.saveCustomFieldInfo=function(e,t){var n,r,o;switch(n=e._id,o=e.type,r=s.extend({},{value:t,_customfieldId:n}),this.boundToObjectType){case"task":this.objectModel.updateCustomField(r);break;case"event":i.saveAttrs(this.objectModel,{customfields:[r]})}return this.gtaConfigFunction(o,"edited")},t.prototype.setCustomFieldInfo=function(e,t){var n,r,o,i,a,c;return n=e._id,c=e.type,o=(null!=(a=this.objectModel.get("customfields"))?a.slice():void 0)||[],r=s.findIndex(o,{_customfieldId:n}),i=s.extend({},{value:t,_customfieldId:n}),r>-1?o[r]=s.extend({},o[r],i):(i=s.extend(i,{type:c}),o.push(i)),this.objectModel.set("customfields",o)},t.prototype.isCase=function(){return!0},t.prototype.hasPermission=function(){return this.canEdit},t}()},"pfQN+kvY":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N={}.hasOwnProperty;E=n("a+N5u/Cl"),b=n("GESwhXbR").Toast,P=n("sa1Ed382"),u=n("qHH6+g6Q"),w=n("vmWJWrVe"),_=n("3eMzznN/"),g=n("uQN6Cr2k"),c=n("E86Oiqt3"),S=n("I+S24KlG"),k=n("eubUSX4T"),f=n("W3m4F8eF"),C=n("o4N9kv/m"),i=n("pY3rxez1"),a=n("yko8HlGT"),s=n("ts2I+BSf"),p=n("U7+LhlCy"),v=n("NcJws2TO"),y=n("YzJ1+ZsV"),o=n("yeXCkzp4"),l=n("IXGYRbNF"),m=n("fpeYzDX0").ObjectType,d=n("ekrwq9FP").ObjectLink,M=n("g+V4+aKB").isReadonlyShare,h=n("kqHT5GUC").ObjectShareStatus,x=n("gh8QIhMV").throwError,j=n("0X1fXJzV"),T=j.isOfficeOnlineEnabled,I=j.isOfficeOnlineFile,r=$(window),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)N.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,w),t.prototype.viewName="PreviewerHeaderView",t.prototype.tagName="div",t.prototype.className="previewer-header",t.prototype.events={"click .file-name-wrapper .icon-pencil":"onEditClick","click .breadcrumb-handler":"enterCollection","click .breadcrumb-display":"enterCollection","click .breadcrumb-more-handler":"loadMoreCats","blur .file-name-editor":"saveFileName","keydown .file-name-editor":"quickSubmit","click .office-handler":"onOfficeClick","click .info-handler":"onInfoClick","click .download-handler":"downloadWork","click .open-work-handler":"openWork","click .menu-handler":"togglePreviewerMenu","click .remove-archive-handler":"deleteModelObject","click .unarchive-handler":"openUnarchiveMenu"},t.prototype.initialize=function(e){var t,n,r;if(this.indexModel=e.indexModel,this.workModel=e.workModel,this.versionModel=e.versionModel,this.projectModel=e.projectModel,this.organizationModel=e.organizationModel,this.where=e.where,this.inChat=e.inChat,this.onReady=e.onReady,this.onUnfavorite=e.onUnfavorite,this.onInfoClick=null!=(t=e.onInfoClick)?t:function(){},this.onModalClose=null!=(n=e.onModalClose)?n:function(){},this.convertFile=e.convertFile,this.createVersion=e.createVersion,this.handleDownload=e.handleDownload,this.onToggleOfficePreviewer=e.onToggleOfficePreviewer,this.workModel)return this.editHelper=new u({editMode:!1}),this.render().listen(),this.initUploader(),this.reset=E.debounce((r=this,function(){return r.renderBreadcrumbs()}),200)},t.prototype.listen=function(){return this.listenTo(this.indexModel,"change:officePreviewerEnabled",this.render),this.listenTo(this.workModel,"change:isArchived",this.render),this.listenTo(this.workModel,"change:shareStatus",this.renderShareLink),this.listenTo(this.workModel,"change:parent change:_parentId",this.renderCategory),this.listenTo(this.versionModel,"change:fileName",function(){if(!0!==this.editHelper.get("editMode"))return this.renderName()}),this.listenTo(this.editHelper,"change",this.renderName)},t.prototype.setEditMode=function(e){return this.editHelper.set("editMode",e)},t.prototype.downloadWork=function(){return null!=this.handleDownload?this.handleDownload(this.versionModel.toJSON()):g.downloadWork(this.versionModel)},t.prototype.openWork=function(){var e,t;return e=this.versionModel,null!=(t=window.WebExtensionWin10)&&"function"==typeof t.openFile&&t.openFile(e.get("fileKey")),this},t.prototype.getWorkData=function(){return g.getWorkData(this.workModel,this.versionModel,!0)},t.prototype.enterCollection=function(e){var t,n,r;if(n=$(e.target).data("id"),t=this.projectModel.id)return r="project/"+t+"/works/"+n,this.onModalClose(),P.router.navigate(r,{trigger:!0})},t.prototype.quickSubmit=function(e){if(13===e.keyCode)return this.saveFileName()},t.prototype.saveFileName=function(){var e,t,n,r,o,i,s;return e=this.$(".file-name-editor"),n=(o=this.versionModel).get("fileName"),i=e.val().trim(),t=n.split(".").pop(),r=g.isProperType(this.versionModel.toJSON())?i+"."+t:i,i&&r!==o.get("fileName")?_.filenameReservedRegex(r)?b.error(tb_i18n.get("work.rename.reserved.string")):o.save(null,{attrs:{fileName:r},success:(s=this,function(){return s.setEditMode(!1)})}):this.setEditMode(!1)},t.prototype.deleteModelObject=function(e){var t;return(t=$(e.currentTarget)).data("bs.popover")||this.requestSubView(o,{$toggler:t,title:tb_i18n.get("previewer.delete.file"),confirmDelete:tb_i18n.get("previewer.confirm.delete"),currentModel:this.workModel}).show(),this},t.prototype.openUnarchiveMenu=function(e){var t;if(!(t=$(e.currentTarget)).data("bs.popover"))return this.requestSubView(y,{$toggler:t,title:tb_i18n.get("unarchive"),type:"file",currentModel:this.workModel}).show()},t.prototype.togglePreviewerMenu=function(e){var t;if(!(t=$(e.currentTarget)).data("bs.popover"))return this.previewerMenuView=this.requestSubView(f,{fixed:this.$el.closest(".modal").length,$toggler:t,objectModel:this.workModel,projectModel:this.projectModel,where:this.where,onUnfavorite:this.onUnfavorite}).show()},t.prototype.genBreadcrumbs=function(){return this.breadcrumbs=this.folderData.map(function(e){var t,n;return n=(t=e.toJSON())._parentId,{id:t._id,parentId:n,title:n?t.title:tb_i18n.get("library.title")}})},t.prototype.loadMoreCats=function(e){var t,n,r,o,i;return e.stopPropagation(),n=(o=this.breadcrumbs[0]).id,r=o.parentId,t=c.find(n),this.open=this.$(".dropdown").hasClass("open"),r?t.fetchParents().then((i=this,function(e){return i.folderData=e.concat(i.folderData),i.renderBreadcrumbs()})).catch(function(e){return x(e)}):(this.folderData.push(t),this.renderBreadcrumbs())},t.prototype.onEditClick=function(){return!this.workModel.get("isArchived")&&(this.setEditMode(!0),this.$(".file-name-editor").focusAtEnd())},t.prototype.onInfoClick=function(){return this.onInfoClick()},t.prototype.onOfficeClick=function(){return this.onToggleOfficePreviewer()},t.prototype.renderBreadcrumbs=function(){var e,t,n,r,o,i;return this.genBreadcrumbs(),t=this.breadcrumbs,this.$fileCategoryWrapper.empty(),e=$(s({breadcrumbs:t,type:"list"})).appendTo(this.$fileCategoryWrapper),o=t.length<=1,r=null!=t[0].parentId,i=this,o||!r&&!function(){var e;return(e=i.$flexibleContent.get(0)).scrollWidth>e.offsetWidth}()?this.$fileCategoryWrapper.html(e.css("visibility","visible")):(n=t.slice(0).reverse(),this.$fileCategoryWrapper.html(s({type:"dropdown",display:n[0],breadcrumbs:n.slice(1),hasMore:r,open:this.open})))},t.prototype.renderFolder=function(e){var t,n,r;return n=e.isArchived,t=e._parentId,r=e.roleScope,this.$fileCategoryWrapper.html(a({isArchived:n,_parentId:t,roleScope:r}))},t.prototype.renderCategory=function(){var e,t,n,o,i,s,a,l,u,p,d;if(!this.inChat)return this.open=!1,p=null!=(o=(t=this.getWorkData()).parent)?o.title:void 0,e=t._parentId,n=t.isArchived,this.workModel.isIndie()?(u=null!=(i=this.organizationModel)?i.getRoleScope():void 0,(null!=(s=this.organizationModel)?s.get("_defaultCollectionId"):void 0)===e&&(e=null)):(u=null!=(a=this.projectModel)?a.getRoleScope():void 0,(null!=(l=this.projectModel)?l.get("_defaultCollectionId"):void 0)===e&&(e=null)),"Root"===p&&(p=tb_i18n.get("previewer.header.root.tips")),!n&&u>=0&&e&&p?c.fetch(e,{silentError:!0,success:(d=this,function(o){return o.fetchParents().then(function(e){return(t=e.slice(0)).push(o),d.folderData=t,d.onReady(function(){if(d.el)return d.renderBreadcrumbs(),r.on("resize",d.reset)})}).catch(function(){if(d.el)return d.renderFolder({isArchived:n,_parentId:e,roleScope:u})})})}):this.renderFolder({isArchived:n,_parentId:e,roleScope:u})},t.prototype.renderObjectType=function(){var e;if(e=this.$(".previewer-header-type").get(0))return this.requestReactView(e,m,{object:this.workModel.toJSON(),objectModel:this.workModel})},t.prototype.renderName=function(){var e,t,n,r,o,i;if(!this.inChat)return n=(i=this.getWorkData()).fileName,i.fileType,o=i.isArchived,(e=this.editHelper.get("editMode"))&&g.isProperType(this.versionModel.toJSON())&&(t=n.split(".").pop(),n=n.substring(0,n.length-t.length-1)),r=this.workModel.hasPermission("put"),this.$fileNameWrapper.html(p({editMode:e,canEdit:r&&!o,fileName:n}))},t.prototype.renderBasic=function(){var e,t;return(e=this.getWorkData()).isFileLocalExist=null!=(t=window.WebExtensionWin10)&&"function"==typeof t.fileIsExist?t.fileIsExist(e.fileKey):void 0,e.showOfficeHandler=T()&&I(e.fileType),e.officePreviewerEnabled=this.indexModel.get("officePreviewerEnabled"),e.canUpdate=this.canUpdate(),this.inChat?(this.$el.html(v(e)),this.$el.addClass("is-simple")):(this.$el.html(i(e)),this.$likes=this.$(".likes-wrapper"),this.$shareWrapper=this.$(".share-status")),this.$menuHandler=this.$(".previewer-handler.menu-handler"),this.$fileCategoryWrapper=this.$(".file-category-wrapper"),this.$fileNameWrapper=this.$(".file-name-wrapper"),this.$workUpdateHandler=this.$(".update-handler")},t.prototype.render=function(){return this.renderBasic(),this.renderShareLink(),this.renderObjectType(),this.renderName(),this.renderCategory(),this.renderCopyUrl(),this.renderLikes(),this.$flexibleContent=this.$(".file-name"),this},t.prototype.renderShareLink=function(){if(this.$shareWrapper)return M(this.workModel.get("shareStatus"))?this.requestReactView(this.$shareWrapper.get(0),h,{objectType:"work",objectModel:this.workModel}):this.unmountReact(this.$shareWrapper.get(0))},t.prototype.renderCopyUrl=function(){var e,t,n;if(n=!this.workModel.get("isArchived")&&!!this.workModel.get("_projectId"),e=this.$(".copy-url-wrapper").get(0),n&&e)return t=this.workModel.toJSON(),this.requestReactView(e,d,{object:t,type:t.objectType,title:tb_i18n.get("object.link.copy.handler.file")})},t.prototype.renderLikes=function(){var e;if(!this.inChat)return(null!=(e=this.likeView)?e.$el:void 0)||(this.likeView=this.requestSubView(l,{boundToObjectType:"work",objectModel:this.workModel})),this.$likes.html(this.likeView.$el)},t.prototype.canUpdate=function(){var e,t;return t=this.workModel.hasPermission("put.version"),e=this.workModel.get("isArchived"),t&&!e},t.prototype.initUploader=function(){var e,t,n;if(this.canUpdate())return this.$workUpdateHandler=this.$(".update-handler"),this.$workUpdateHandler.length?(this.$workUpdateHandler.trigger("updateEnded"),(t=new k([],{_boundToObjectId:this.workModel.get("_parentId")})).model(S),e={collection:t,targetModel:this.projectModel||this.organizationModel,pick:{id:this.$workUpdateHandler},onStart:(n=this,function(){return n.$workUpdateHandler.trigger("updating",0)}),onProgress:function(e){return function(t){return e.$workUpdateHandler.trigger("updating",t)}}(this),onComplete:function(e){return function(t){return e.$workUpdateHandler.trigger("updateEnded"),t.previewUrl?"function"==typeof e.convertFile?e.convertFile(t.previewUrl).then(function(){return e.createVersion(t)}).catch(function(){return e.createVersion(t)}):void 0:e.createVersion(t)}}(this),onPausable:E.noop,onRetryable:E.noop,onError:E.noop},this.requestSubView(C,e)):void 0},t.prototype.remove=function(){var e;return null!=(e=this.previewerMenuView)&&e.remove(),r.off("resize",this.reset),t.__super__.remove.apply(this,arguments)},t}()},pgEES3Do:function(e,t,n){e.exports=n.p+"images/cs-medal-active.c16215ba.png"},ph6uiPdy:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<div class="previewer-loading-wrapper"> <div class="loading-indicator"> <span class="loader-dot"></span> <span class="loader-dot"></span> <span class="loader-dot"></span> </div> ';return e.description&&(o+=' <p class="loading-description">'+r(e.description)+"</p> "),o+="</div>"}},piyYzrBy:function(e,t,n){e.exports=n.p+"images/project-gray@2x.a53c60e8.png"},pjThbXDB:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("TSYQbtd+"),a=n.n(s),c=n("a+N5u/Cl"),l=n("GESwhXbR"),u=n("sa1Ed382");n("x7zMi+hR");var p=function(e){function t(t){var n=e.call(this,t)||this;return n.refTextarea=function(e){n.textarea=e},n.focus=function(){n.onFocus()},n.onChange=function(e){var t=e.target.value;n.setState(r.a({},n.state,{input:t}))},n.onSubmit=function(e){""!==n.state.input.trim()&&n.props.onSubmit(n.state.input,Boolean(e)).then(function(){n.hasMounted&&n.setState(r.a({},n.state,{input:""}))})},n.onSubmitClick=function(){n.onSubmit()},n.onFocus=function(){n.setState(r.a({},n.state,{active:!0})),n.onFocusAtEnd()},n.onBlur=function(){n.setState(r.a({},n.state,{active:!1}))},n.onMouseDown=function(e){e.preventDefault(),e.stopPropagation()},n.onKeyDown=function(e){var t=13===e.which&&!(e.ctrlKey||e.metaKey||e.shiftKey),r=13===e.which&&(e.ctrlKey||e.metaKey||e.shiftKey),o=u.PREFERENCE.quickReply();(t&&o||r&&!o)&&(e.stopPropagation(),e.preventDefault(),n.onSubmit(!0))},n.onFocusAtEnd=function(){var e=n.state.input.length;n.textarea.focus(),n.textarea.setSelectionRange(e,e)},n.getPlaceholder=function(){var e=u.PREFERENCE.quickReply()?"Enter":"Ctrl+Enter";return n.state.active?i.get("comment.creator.quick.submit.tip",e):i.get("comment.creator.placeholder")},n.state={input:"",active:!1},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.autoFocus&&c.delay(function(){return e.textarea.focus()}),this.hasMounted=!0},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this,n=e.mention;if(n&&this.state.input.indexOf(n.name)<0){var o=this.state.input+" @"+n.name+" ";this.setState(r.a({},this.state,{input:o}),function(){t.onFocus()})}},t.prototype.componentWillUnmount=function(){this.hasMounted=!1},t.prototype.render=function(){var e=a()("comment-creator",{active:this.state.active});return o.createElement("div",{tabIndex:0,onFocus:this.onFocus,onBlur:this.onBlur,className:e},o.createElement("textarea",{ref:this.refTextarea,value:this.state.input,onChange:this.onChange,className:"comment-creator-input",placeholder:this.getPlaceholder(),onKeyDown:this.onKeyDown}),o.createElement(l.Button,{disabled:0===this.state.input.trim().length,className:"comment-creator-submit",size:"small",onClick:this.onSubmitClick,onMouseDown:this.onMouseDown},i.get("comment.creator.submit")))},t}(o.PureComponent)},plv2hwzz:function(e,t,n){e.exports=function(e){var t,r,o="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),i="",s=n("RQ44psah");if(i+='<ul class="list"> ',e.canSetSelfOwner&&!e.isDisabled)i+=' <li> <a class="project-role-handler"> '+tb_i18n.get("project.owner")+" </a> </li> ";else{if(i+=" ",e.canManageMemberRole&&!e.isDisabled){i+=" ";var a=e.roles;if(a)for(var c,l=-1,u=a.length-1;l<u;)c=a[l+=1],i+=' <li class="',e._roleId==c._id&&(i+="selected"),i+=" ",0==l&&(i+="underscore"),i+='"> <a class="role-handler" data-role="'+c._id+'"> '+o(c.name)+" </a> </li> ";i+=" "}i+=" ",e._organizationId||(i+=' <hr/> <div class="upgrade-wrapper"> <a class="upgrade-handler" href="'+s.pay.plans+"\" target=\"_blank\" data-gta=\"{action: 'view plan option', control: 'permission', type: '",e._organizationId?i+="business":i+="plus",i+="'}\"> "+tb_i18n.get("project.settings.member.menu.upgrade.button")+' </a> <p class="description"> '+tb_i18n.get("project.settings.member.menu.upgrade.description")+" </p> </div> "),i+=" ",e.canDeleteMember&&!e.isOwner&&(i+=' <hr/> <div class="remove-wrapper"> ',e.setRelated?i+=' <p class="description"> '+tb_i18n.get("project.settings.cannot.remove")+" </p> ":i+=' <a class="remove-member-handler"> '+tb_i18n.get("project.settings.remove.member")+" </a> ",i+=" </div> "),i+=" "}return i+="</ul>"}},priCjIQI:function(e,t,n){"use strict";n.r(t),n.d(t,"bootstrapService",function(){return p});var r=n("s0r7VfKc"),o=n("HDJEOtNh"),i=n("sa1Ed382"),s=n("85182E8g"),a=n.n(s),c=n("lKlBpm6f"),l=n.n(c),u=n("nL4olqOP"),p=function(){return{rules:r.default.fetch.get("permissions").toPromise(),perms:o.PermissionController.prepare(),projects:new Promise(function(e,t){u.fetch(0,{success:function(t){t.joinRooms(),e()},error:t})}),organizations:new Promise(function(e,t){a.a.fetch(0,{success:e,error:t})}),applications:new Promise(function(e,t){l.a.fetch(0,{success:e,error:t})}),preference:new Promise(function(e,t){i.PREFERENCE.fetch({success:e,error:t})}),abtest:i.ab.fetch()}}},pstmOn2P:function(e,t,n){e.exports={"confirm-clear-view":"confirm-clear-view__3ckI"}},pvstIaRp:function(e,t){e.exports=function(e){var t="";return e.selectedTaskIds.length>0&&e.tasks.length===e.selectedTaskIds.length?t+=' <a class="unselect-all-tasks">'+tb_i18n.get("unselect.all")+"</a>":t+=' <a class="select-all-tasks">'+tb_i18n.get("select.all")+"</a>",t+='<button class="btn btn-primary set-executor" ',e.selectedTaskIds.length||(t+="disabled"),t+=" data-gta=\"{action: 'select assignee', type: 'task', segment: 'Handover Task'}\"> "+tb_i18n.get("member.handover.tasks.set.executor")+"</button>"}},q80r3APc:function(e,t,n){e.exports={"first-popup-view":"first-popup-view__2U4T","subtile-btn":"subtile-btn__DPuJ"}},qAFkeKnD:function(e,t,n){},"qAdrY/s+":function(e,t){e.exports=function(e){return'<div id="close-intercom"> <a><span class="icon icon-remove"></span>'+tb_i18n.get("intercom.shutdown")+"</a></div>"}},qCWxDgLE:function(e,t,n){"use strict";var r=n("skByHrds");n.d(t,"AbstractProjectGroupItem",function(){return r.a});var o=n("RxbwIdZL");n.o(o,"AbstractPortal")&&n.d(t,"AbstractPortal",function(){return o.AbstractPortal}),n.o(o,"ProjectGridAddCard")&&n.d(t,"ProjectGridAddCard",function(){return o.ProjectGridAddCard}),n.o(o,"ProjectGridCard")&&n.d(t,"ProjectGridCard",function(){return o.ProjectGridCard}),n.o(o,"ProjectListAddCard")&&n.d(t,"ProjectListAddCard",function(){return o.ProjectListAddCard}),n.o(o,"ProjectListCard")&&n.d(t,"ProjectListCard",function(){return o.ProjectListCard}),n.o(o,"getSuspendedMsg")&&n.d(t,"getSuspendedMsg",function(){return o.getSuspendedMsg}),n.o(o,"verifyProjectPayment")&&n.d(t,"verifyProjectPayment",function(){return o.verifyProjectPayment})},"qD/Uhw1r":function(e,t,n){e.exports={"guide-modal":"guide-modal__3BeT",guide:"guide__2ci-","guide-content":"guide-content__3dUX","guide-content-mes":"guide-content-mes__12So","guide-content-title":"guide-content-title__2nQh","guide-trigger-box":"guide-trigger-box__uPjD","guide-trigger":"guide-trigger__1Jrd",breathe:"breathe__ZNBe","close-handler":"close-handler__3nnf"}},qJEY3WrE:function(e,t,n){e.exports={"field-list-item":"field-list-item__1Jg1"}},qKJ99bi6:function(e,t,n){e.exports={"search-result-panel":"search-result-panel__c8pX","search-result-panel-body":"search-result-panel-body__1amR"}},qKYkuTVR:function(e,t,n){var r,o,i,s,a,c,l,u={}.hasOwnProperty;l=n("a+N5u/Cl"),r=n("bf5pbG/9"),o=n("2kctFniS"),s=n("hGNqppva"),a=n("YdqH4v7N"),c=n("ymFCWmUp"),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,s),t.prototype.viewName="PopoverMenuView",t.prototype.className="popover-menu-view",t.prototype.popoverTitle="Menu",t.prototype.width=200,t.prototype.hotkeys={"up|down|enter":"quickSelect",esc:function(e){var t;return e.preventDefault(),null!=(t=this.$popover)&&t.parent().trigger("click"),this.hide()}},t.prototype.events={"click .menu-item":"toggleItem","click .link-add-handler":"addItem","input .menu-input input":"filterData","keydown .menu-input input":"quickSelect"},t.prototype.initialize=function(e){var n;if(null!=e?e.dataList:void 0)return this.multi=e.multi,this.dataList=e.dataList||[],this.selected=e.selected,this.multi&&!l.isArray(this.selected)&&(this.selected=[]),this.ListTemplate=e.ListTemplate||o,this.unselectPermission=(null!=(n=this.options)?n.unselectPermission:void 0)||!0,t.__super__.initialize.apply(this,arguments),this},t.prototype.render=function(){return this.$el.html(r({searchPlaceholder:this.options.searchPlaceholder,addPlaceholder:this.options.addPlaceholder})),this.$ul=this.$("ul"),this.$addInput=this.$(".add-input"),this.renderItems(this.dataList,this.selected),this.$("input").focusAtEnd(),this.setupScroll(this.$ul),this},t.prototype.renderItems=function(e,t){if(this.$ul)return l.isArray(t)||(t=[t]),l.each(e,function(e){return e.selected=t.indexOf(e._id)>=0}),this.$ul.html(this.ListTemplate({dataList:e})),e!==this.dataList&&this.$ul.find(".menu-item:first").addClass("active"),this},t.prototype.update=function(e,t){return this.dataList=e,null!=t&&(this.selected=t),this.renderItems(this.dataList,this.selected),this},t.prototype.quickSelect=function(e){var t,n;switch(null!=e?e.keyCode:void 0){case 38:return e.preventDefault(),this.switchActive("up");case 40:return e.preventDefault(),this.switchActive("down");case 13:if(e.preventDefault(),(t=this.$ul.find(".active")).length)return t.trigger("click");if(null!=(n=this.$addInput.val())?n.trim():void 0)return this.addItem()}},t.prototype.filterData=function(){var e,t,n;return(t=this.$(".menu-input input").val().trim().toLowerCase())?(n=l.map(this.dataList,function(e){return(e=l.clone(e)).title||(e.title=""),e.name=e.title,e.pinyin||(e.pinyin=""),e.py||(e.py=""),e}),e=c.objectsFilter(n,t)):e=this.dataList,this.renderItems(e,this.selected)},t.prototype.toggleItem=function(e){var t,n,r;if((t=$(e.currentTarget)).hasClass("menu-item")){if(t.length){if(r=t.data("id"),!this.unselectPermission&&t.hasClass("selected"))return;t.hasClass("selected")&&!this.multi||t.toggleClass("selected")}else r=e,(t=this.$ul.find("li.menu-item[data-id="+r+"]")).addClass("selected");return t.hasClass("selected")?this.options.select(r):("function"==typeof(n=this.options).unselect&&n.unselect(r),r=""),this.multi?this.selected=this.$ul.find("li.menu-item.selected").map(function(){return $(this).data("id")}).toArray():(this.selected=r,t.siblings().removeClass("selected"),this.hide()),this}},t.prototype.addItem=function(){var e,t;if(t=this.$addInput.val().trim())return this.$addInput.val(""),(e=l.find(this.dataList,function(e){return e.title===t}))?this.toggleItem(e._id):this.options.add(t),this},t.prototype.switchActive=function(e){var t,n,r,o,i;return t=this.$ul.find(".active"),"up"===e&&((i=t.removeClass("active").prev()).hasClass("menu-item")||(i=i.prev()),r=this.$ul.find("li.menu-item:last"),i.length>0?i.addClass("active"):r.addClass("active")),"down"===e&&((o=t.removeClass("active").next()).hasClass("menu-item")||(o=o.next()),n=this.$ul.find("li.menu-item:first"),o.length>0?o.addClass("active"):n.addClass("active")),this.slideTo(this.$ul.find(".active"))},t.prototype.scrollToSelected=function(e,t){var n;return(n=this.$ul.find(".selected")).length&&(e?this.slideTo(n,!0,t):this.scrollTo(n,!0,t)),this},t}(),l.extend(i.prototype,a),e.exports=i},qKyDwEZb:function(e,t,n){e.exports={"free-task-path":"free-task-path__t7T5"}},qM5bi5Tl:function(e,t,n){e.exports=n.p+"images/layers@2x.247eeacd.png"},"qVa/iWOz":function(e,t,n){},qZRiOr4V:function(e,t,n){e.exports={"task-follower-list":"task-follower-list__2RuY","task-follower-list__inner":"task-follower-list__inner__3ZzT"}},qfubVY4S:function(e,t,n){e.exports={wrap:"wrap__1IbP"}},qgmt8VTp:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("GESwhXbR").Toast,o=n("hGNqppva"),r=n("dqTqx3l1"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.className="project-settings-team-menu-view",t.prototype.viewName="ProjectSettingsTeamMenuView",t.prototype.popoverTitle="",t.prototype.width=280,t.prototype.events={"click .remove-handler":"removeTeam"},t.prototype.initialize=function(e){if(null==e&&(e={}),e.projectModel||e.memberModel)return this.popoverTitle=tb_i18n.get("team.menu"),this.projectModel=e.projectModel,this.teamModel=e.objModel,this.cannotRemove=e.cannotRemove,this.projectTeamsCollection=e.projectTeamsCollection,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return this.$el.html(r()),this},t.prototype.removeTeam=function(e){var t;return this.hide(),t=$(e.currentTarget).data("action"),this.removeMember="remove"===t,this.teamModel.removeProject(this.projectModel.id,{attrs:{removeMember:this.removeMember},success:function(){return i.success(tb_i18n.get("remove.success"))}})},t}()},qhovRTlL:function(e,t,n){e.exports={"task-convert":"task-convert__1lLR","task-convert-title":"task-convert-title__2y_v",body:"body__2z1g",footer:"footer__3LwU","footer-tips":"footer-tips__2ghg","footer-tips-icon":"footer-tips-icon__tLEm","task-convert-search":"task-convert-search__krCE","search-icon":"search-icon__3PiN","search-input":"search-input__1_ck","task-convert-search-result":"task-convert-search-result__2uCL","load-more":"load-more__8O7U","selected-item":"selected-item__1DQD"}},"qmk1p/3o":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n("mrSGxOB2"),o=n("TSYQbtd+"),i=n.n(o),s=n("tLZJUYWX"),a=n("q1tIBJhx"),c=n("GESwhXbR"),l=n("sa1Ed382"),u=n("bI6GdBuM"),p=n("bv63Y0YZ"),d=n("rhK5Yt5v"),h=n("vUGUgKq+"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cxPrefix="project-grid-group",t.handleJoinProjectClick=function(e,n){var r=t.props.onJoinProjectClick;r&&r(e,n)},t.renderAddCard=function(){return t.props.isCreateProjectEnable?a.createElement("li",{className:i()(t.getItemClassName(),"add-card-wrap")},a.createElement(p.ProjectGridAddCard,{className:t.getCardClassName(),onCreateProjectClick:t.handleCreateProjectClick})):null},t}return r.d(t,e),t.prototype.componentDidMount=function(){l.gta.event({action:"show project cover",method:"trace"})},t.prototype.getCardClassName=function(){var e=this.props.itemClassName;return i()(this.cxPrefix+"__card",e)},t.prototype.getItemClassName=function(){return i()(this.cxPrefix+"__item")},t.prototype.renderJoinProjectMask=function(e){var t=this;if(e.alien)return null;var n="boolean"!=typeof e.isJoined||e.isJoined;if(Object(d.n)(e)||Object(d.o)(e)||!e.canJoin||n)return null;return a.createElement("div",{className:i()(t.cxPrefix+"__mask__backdrop",t.cxPrefix+"__join-project-mask")},a.createElement("button",{className:this.cxPrefix+"__join-project-mask__button",onClick:function(n){t.handleJoinProjectClick(n,e._id)}},s.get("join.project")))},t.prototype.renderOverduedCardMask=function(e){var t=this;if(Object(d.k)(e)&&Object(d.r)(e))return null;return a.createElement("a",{className:i()(t.cxPrefix+"__mask__backdrop",t.cxPrefix+"__overdued-mask"),onClick:function(n){t.handleEnterProjectClick(n,e._id)}},a.createElement("span",{className:"icon icon-lock"}))},t.prototype.renderCardMask=function(e){return a.createElement("div",{className:this.cxPrefix+"__mask"},this.renderJoinProjectMask(e),this.renderOverduedCardMask(e))},t.prototype.renderCard=function(e){return a.createElement(p.ProjectGridCard,{className:this.getCardClassName(),project:e,onEnterProjectClick:this.handleEnterProjectClick,onOpenProjectSettingClick:this.handleOpenProjectSettingClick,onStarProjectClick:this.handleStarProjectClick,onUnstarProjectClick:this.handleUnstarProjectClick,onSuspendProjectClick:this.handleSuspendProjectClick,onArchiveProjectClick:this.handleArchiveProjectClick,onDestoryProjectClick:this.handleDestoryProjectClick,onUnSuspendProjectClick:this.handleUnSuspendProjectClick,onUnArchiveProjectClick:this.handleUnArchiveProjectClick})},t.prototype.renderCardList=function(){var e=this,t=this.props.projects;return Object(h.a)(t)?null:t.map(function(t){var n=a.createElement("li",{className:e.getItemClassName(),key:t._id},e.renderCard(t),e.renderCardMask(t));return t.suspendedBy&&t.suspendedAt&&(n=a.createElement(c.Tooltip,{key:t._id,title:Object(d.e)(t.suspendedAt,t.suspendedBy)},n)),n})},t.prototype.render=function(){return a.createElement("ul",{className:this.cxPrefix+"__component"},this.renderCardList(),this.renderAddCard())},t}(u.AbstractProjectGroup)},qs4hSbFB:function(e,t,n){e.exports=n.p+"images/basic-medal-active.4e09e98d.png"},qtg9ccEz:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("GESwhXbR"),c={task:"board",event:"calendar",work:"book",post:"wall",github:"github",gh:"github",wechat:"wechat",zhihu:"zhihu",wb:"weibo",weibo:"weibo",evernote:"evernote",yinxiang:"evernote",processon:"processon",jinshuju:"jinshuju","github-commit":"git-commit","github-branch":"git-fork","github-issue":"git-issue","github-pullRequest":"git-pull-request","thoughts-entry":"text-file","thoughts-folder":"folder",testcase:"testcase",project:"project",collection:"folder"},l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderIcon=function(){return this.props.icon?this.props.icon:o.createElement(a.Icon,{className:"abstract-item-leading",name:c[this.props.type]})},t.prototype.render=function(){var e=this.props,t=e.title,n=e.content,r=e.label,i=e.type,a=s()("abstract-item","abstract-item-"+i,this.props.classNames);return o.createElement("div",{className:a},this.renderIcon(),o.createElement("div",{className:"abstract-item-info"},o.createElement("div",{className:"abstract-item-title"},t),o.createElement("div",{className:"abstract-item-content"},n),o.createElement("div",{className:"abstract-item-label"},r)))},t}(o.PureComponent)},qup9nDqU:function(e,t,n){"use strict";var r,o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n("tLZJUYWX"),a=n("s0r7VfKc"),c=n("GESwhXbR"),l=n("jz2LwHQ8"),u=n("b2RDlbIm"),p=n("ay2Xcmrs"),d=n("M70E0b3m");!function(e){e[e.Main=0]="Main",e[e.Testhub=1]="Testhub",e[e.Testgroup=2]="Testgroup",e[e.TestgroupCreator=3]="TestgroupCreator"}(r||(r={}));var h=function(e){function t(t){var n=e.call(this,t)||this;return n.refPopupMenu=function(e){n.popupMenu=e},n.isDisabled=function(){var e=n.state,t=e.testhub,r=void 0===t?null:t,o=e.testgroup,i=void 0===o?null:o;return n.props.submitDisabled(r,i)||!!r&&!i},n.getDefaultTestgroupName=function(){return n.props.defaultGroupCreatorName.slice(0,p.b)},n.getTestgroupName=function(e){return e?e.isRoot?s.get("testgroup.selector.testgroup.name"):e.name:s.get("testgroup.selector.testgroup.unset.name")},n.getTesthubName=function(e){return e?e.name:s.get("testgroup.selector.testhub.name")},n.onSubmit=function(){n.props.onSubmit({testhub:n.state.testhub,testgroup:n.state.testgroup}),n.popupMenu.close()},n.onSetTesthub=function(e){(e&&e._id)!==(n.state.testhub&&n.state.testhub._id)&&n.setState({testgroup:void 0}),n.setState({testhub:e}),n.popupMenu.goTo(r.Main)},n.onSetTestgroup=function(e){n.setState({testgroup:e}),n.popupMenu.goTo(r.Main)},n.onCreateTestgroupClick=function(){n.popupMenu.goTo(r.TestgroupCreator),n.setState({testgroupName:n.getDefaultTestgroupName()})},n.onTesthubGroupNameChange=function(e){n.setState({testgroupName:e.target.value})},n.handleCreateTesthub=function(){n.isTestgroupNameDisabled()||(n.createSubscription&&n.createSubscription.unsubscribe(),n.createSubscription=a.default.createTestgroup({_testhubId:n.state.testhub._id,name:n.state.testgroupName.trim()}).subscribe({next:function(e){n.setState({testgroup:e}),n.popupMenu.back(),n.popupMenu.back(),c.Toast.success({message:s.get("testhub.testgroup.create.toast.success")})},error:function(){n.popupMenu.back(),c.Toast.error({message:s.get("testhub.testgroup.create.toast.error")})}}))},n.state={testhub:n.props.testhub,testgroup:n.props.testgroup,testgroupName:n.getDefaultTestgroupName()},n}return o.d(t,e),t.prototype.componentWillUnmount=function(){this.createSubscription&&this.createSubscription.unsubscribe()},t.prototype.isTestgroupNameDisabled=function(){var e=this.state.testgroupName.trim();return 0===e.length||e.length>p.b},t.prototype.renderTesthubGroupCreator=function(){return i.createElement(c.PopupMenuView,{index:r.TestgroupCreator,title:s.get("testgroup.selector.testgroup.creator.title"),className:d["testgroup-creator-wrapper"]},i.createElement(c.Input,{value:this.state.testgroupName,autoFocus:!0,onChange:this.onTesthubGroupNameChange,onPressEnter:this.handleCreateTesthub}),i.createElement(c.Button,{className:d.submit,disabled:this.isTestgroupNameDisabled(),onClick:this.handleCreateTesthub},s.get("testcase.menu.create")))},t.prototype.renderTestgroupSelector=function(){return i.createElement(c.PopupMenuView,{index:r.Testgroup,title:s.get("testgroup.selector.testgroup.select.title"),className:d["testgroup-selector-wrapper"]},i.createElement(u.a,{inline:!0,testhub:this.state.testhub,testgroup:this.state.testgroup,onSetTestgroup:this.onSetTestgroup,showTestgroupCreator:this.props.showTestgroupCreator,onCreateTestgroupClick:this.onCreateTestgroupClick}))},t.prototype.renderTesthubSelector=function(){return i.createElement(c.PopupMenuView,{index:r.Testhub,title:s.get("testgroup.selector.testhub.select.title"),className:d["testhub-selector-wrapper"]},i.createElement(l.a,{inline:!0,organizationId:this.props.organizationId,testhub:this.state.testhub,showUnsetOption:this.props.showUnsetTesthub,onSetTesthub:this.onSetTesthub}))},t.prototype.renderHint=function(){return this.props.hint&&i.createElement("p",{className:d.hint},this.props.hint)},t.prototype.renderTesthubSection=function(){return i.createElement(i.Fragment,null,i.createElement("div",{className:d.selector},i.createElement("span",{className:d["selector-label"]},s.get("testgroup.selector.testhub.label")),i.createElement(c.PopupMenuLink,{goto:r.Testhub,className:d["selector-trigger"]},i.createElement(c.TextButton,null,i.createElement("span",{className:d["selector-name"]},this.getTesthubName(this.state.testhub)),i.createElement(c.Icon,{size:12,name:"chevron-right"})))),i.createElement(c.Separator,null))},t.prototype.renderTestgroupSection=function(){return this.state.testhub&&i.createElement(i.Fragment,null,i.createElement("div",{className:d.selector},i.createElement("span",{className:d["selector-label"]},s.get("testgroup.selector.testgroup.label")),i.createElement(c.PopupMenuLink,{goto:r.Testgroup,className:d["selector-trigger"]},i.createElement(c.TextButton,null,i.createElement("span",{className:d["selector-name"]},this.getTestgroupName(this.state.testgroup)),i.createElement(c.Icon,{size:12,name:"chevron-right"})))),i.createElement(c.Separator,null))},t.prototype.renderMain=function(){return i.createElement(c.PopupMenuView,{index:r.Main,title:this.props.title||s.get("testgroup.selector.title")},i.createElement("div",{className:d.main},this.renderTesthubSection(),this.renderTestgroupSection(),this.renderHint(),i.createElement(c.Button,{onClick:this.onSubmit,className:d.submit,disabled:this.isDisabled()},s.get("testgroup.selector.submit"))))},t.prototype.renderTrigger=function(){if(this.props.renderTrigger)return this.props.renderTrigger();var e="";this.props.testhub&&(e=""+this.getTesthubName(this.props.testhub)),this.props.testgroup&&(e=e+" · "+this.getTestgroupName(this.props.testgroup)),0===e.length&&(e=s.get("testgroup.seletor.trigger.placeholder"));var t=!this.props.disabled&&i.createElement(c.Icon,{size:12,name:"chevron-down",className:d["trigger-toggler"]});return i.createElement("div",{className:d.trigger},i.createElement("div",{className:d["trigger-icon"]},i.createElement(c.Icon,{name:"usercase-library"})),i.createElement("span",{className:d["trigger-name"]},e),t)},t.prototype.renderPopup=function(){return i.createElement(c.PopupMenu,{ref:this.refPopupMenu,trigger:this.renderTrigger(),nested:this.props.nested,onOpen:this.props.onOpen,main:r.Main},this.renderMain(),this.renderTesthubSelector(),this.renderTestgroupSelector(),this.renderTesthubGroupCreator())},t.prototype.render=function(){return this.props.disabled?this.renderTrigger():this.renderPopup()},t.defaultProps={nested:!0,disabled:!1,defaultGroupCreatorName:"",showUnsetTesthub:!1,submitDisabled:function(){return!1}},t}(i.PureComponent);n.d(t,"a",function(){return h})},"r+6fnJQ4":function(e,t,n){e.exports=n.p+"images/d_bingbujiandan@2x.3822441a.png"},"r/mEAG7G":function(e,t){e.exports=function(e){return'<ul class="tag-picker-list"> <li class="tag-picker-add"></li></ul>'}},r0Djj00O:function(e,t,n){e.exports={cell:"cell__pFco",cell__resizer:"cell__resizer__2N9z","cell__resizer--resizing":"cell__resizer--resizing__1jd1"}},r0PDwOFs:function(e,t,n){"use strict";n.r(t),n.d(t,"TaskUpdatePriority",function(){return c});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("GESwhXbR"),s=(n("5VAUxBWw"),n("MKFOP9IO")),a=n("fpIMfP/U"),c=function(e){function t(t){var n=e.call(this,t)||this;return n.priorities=a.a,n.onClickPriority=function(e){n.props.onClickPriority(e.number)},n}return r.d(t,e),t.prototype.renderPriorityList=function(){var e=this.priorities[this.props.priority];return o.createElement(s.a,{onClickPriority:this.onClickPriority,priority:e})},t.prototype.render=function(){var e="task-priority bg-priority-"+this.props.priority;return o.createElement(i.Dropdown,{content:this.renderPriorityList(),placement:"bottomLeft"},o.createElement("div",{className:e}))},t}(o.PureComponent)},r1FBglIs:function(e,t,n){"use strict";n("q1tIBJhx")},r1msZhOF:function(e,t,n){},r5Tx7kzV:function(e,t,n){e.exports={"empty-container":"empty-container__kCc0",img:"img__371V"}},"rBqbN9/w":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("4c1CS0b3"),i=n("tLZJUYWX"),s=n("dWbDnvg6"),a=n("fZoV3jYy"),c=n("pdCqEcaI"),l=n("3eMzznN/"),u=n("ytDAhr3u"),p=n("s0r7VfKc"),d=n("sa1Ed382");function h(e){return{id:e._id,name:e.name,avatar:{type:s.b.Img,src:e.avatarUrl||""},desc:Object(c.f)(e),type:"user",externalMember:-1===e.role}}function m(e){e._id;var t=e._userId,n=r.g(e,["_id","_userId"]);return h(r.a({},n,{_id:t}))}function f(e){return e.ancestorNames&&e.ancestorNames.length>0?i.get("team.belongsTo",e.ancestorNames.join(" - ")):e.subTitle||""}function g(e){return i.get("team.belongsTo",e.ancestorNames.join(" - "))}function v(e){return e.subTitle||""}function b(e){var t=r.f(e.style?e.style.split(","):["",""],2),n=t[0],o=t[1];return{id:e._id,name:e.name,avatar:{type:s.b.Icon,name:n||"team-tie",color:o||"#8193ba"},desc:f(e),type:"team",membersCount:e.membersCount,hasChildren:e.membersCount>0||e.hasSubTeams}}function y(e){return{id:e._id,name:e.name,avatar:{type:s.b.Icon,name:"team-tie",color:"#8193ba"},desc:g(e),type:"team",membersCount:e.membersCount,hasChildren:e.membersCount>0||e.hasSubTeams}}function k(e){return{id:e._id,name:e.name,avatar:{type:s.b.Icon,name:"member-group",color:"grey"},desc:v(e),type:"group",membersCount:e.membersCount,hasChildren:e.membersCount>0}}function _(e){switch(e.type){case"team":case"group":case"custom":var t=e.avatar,n=t.name,r=t.color;return{_id:e.id,name:e.name,type:e.type,style:n+","+r};default:return{_id:e.id,name:e.name,avatarUrl:e.avatar.src}}}var w,C=(w="allProjectMembers",{check:function(e){return e.id===w},get:function(){return{id:w,name:i.get("selector.involver.entry.allProjectMembers"),desc:"",avatar:{type:s.b.Icon,name:"users",color:"grey"},type:"custom"}}});function S(e){var t=r.f(e.style?e.style.split(","):["",""],2),n=t[0],o=t[1];return{id:e._id,name:e.name,avatar:{type:s.b.Icon,name:n,color:o},desc:"",type:"custom"}}function E(e,t,n){return{id:t,name:e.name,avatar:{type:s.b.Img,src:e.avatarUrl||""},desc:"",secondLineDesc:n,type:"organizationMember"}}function T(e,t){return{id:e._id,name:e.name,avatar:{type:s.b.Icon,name:"medal",color:u.A50},desc:"",secondLineDesc:t,type:"organizationRole"}}function I(e,t,n){var o=r.f(e.style?e.style.split(","):["",""],2),a=o[0],c=o[1],l=t&&t.name;return{id:e._id,name:i.get("team.leader.who",e.name),avatar:{type:s.b.Icon,name:a||"team-tie",color:c||"#8193ba"},desc:l,secondLineDesc:n,type:"teamLeader"}}var M=function(e){return function(t){var n=e?"member":"user";return r.a({},t,{usersType:n})}};function j(e,t,n){var r=Object(l.pluralizeObjectType)(t),o=n._id||"",i=e+"-involvemembers";return o?r+"/"+o+"/"+i:r+"/"+i}function P(e,t,n,r){void 0===r&&(r={});var o=r.withTeamsAndGroups,i=r.useMember,s=r.skipUsers;return Object.assign({},e,"organization"===t&&o?{withTeamsAndGroups:!0}:void 0,"organization"===t&&i?{replaceUserByMember:!0}:void 0,"organization"!==t?n:void 0,s?{involveMembers:s}:void 0)}function x(e,t,n){void 0===n&&(n={});var i=n.hideAllProjectMembersHandler,s=r.g(n,["hideAllProjectMembersHandler"]),a=o.Observable.of(i?[]:[C.get()]),c=o.Observable.of(h(d.user.toJSON())),l=j("recommend",e,t),u=P({},e,t,s),f=p.default.fetch.get(l,u).map(M(s.useMember)).map(function(e){return{teams:e.teams.map(b),groups:e.groups.map(k),users:"member"===e.usersType?e.users.map(m):e.users.map(h)}});return o.Observable.zip(a,c,f,function(e,t,r){var o=r.teams,i=r.groups,s=r.users,a=s.filter(function(e){return e.id===t.id}),c=s.filter(function(e){return e.id!==t.id});return n.withTeamsAndGroups?e.concat(o,i,a,c):e.concat(a,c)})}function N(e,t,n,r){void 0===r&&(r={});var o=j("search",e,t),i=P({q:n},e,t,r);return p.default.fetch.get(o,i).map(M(r.useMember)).map(function(e){var t="member"===e.usersType?e.users.map(m):e.users.map(h),n=e.teams.map(b),o=e.groups.map(k);return r.withTeamsAndGroups?n.concat(o,t):t})}function O(e,t,n){if("group"===t){var i=e;return(n?p.default.fetch.get("projects/"+n+"/groups/"+i+"/members"):p.default.fetch.get("v3/groups/"+i+"/members")).map(function(e){return e.result.map(m)})}if("team"===t){var s=e,a=p.default.fetch.get("v3/teams/"+s+"/members"),c=p.default.fetch.get("teams/"+s+"/subTeams");return o.Observable.forkJoin(a,c).map(function(e){var t=r.f(e,2),n=t[0],o=t[1],i=n.result.map(m),s=o.result.map(y);return r.h(s,i)})}return o.Observable.of([])}var R=function(e){return{search:function(t){return e.next({type:"SEARCH_TERM_CHANGE",payload:t})},onClickNext:function(t){return e.next({type:"MOVE_FORWARD",payload:t})},onClickBack:function(){return e.next({type:"MOVE_BACKWARD"})},onClickSelected:function(t){return e.next({type:"TOGGLE_ENTRY",payload:t})},onClickRecommend:function(t){return e.next({type:"TOGGLE_ENTRY",payload:t})},onClickSearched:function(t){return e.next({type:"TOGGLE_FROM_SEARCH",payload:t})},onConfirm:function(t){return e.next({type:"COMMIT",payload:t})},onOpen:function(){return e.next({type:"START"})},onHide:function(){return e.next({type:"SUSPEND"})}}},D=function(e){return function(t){var n=Object(c.e)(e,"START"),r=Object(c.e)(e,"SUSPEND");return n.switchMap(function(){return t.takeUntil(r)})}},L=function(e){return Object(c.e)(e,"START")},z=function(e){return Object(c.e)(e,"SUSPEND")},A=function(e,t){var n=Object(c.e)(e,"SEARCH_TERM_CHANGE"),r=Object(c.e)(e,"MOVE_FORWARD"),o=Object(c.e)(e,"MOVE_BACKWARD"),i=Object(c.e)(e,"COMMIT"),s=Object(c.e)(e,"TOGGLE_ENTRY"),l=Object(c.e)(e,"TOGGLE_FROM_SEARCH");return t&&(s=s.filter(function(e){return Object(a.g)(e)?t.removeInvolver(e.id,e.type,e):t.addInvolver(e.id,e.type,e)}),l=l.filter(function(e){return Object(a.g)(e)?t.removeInvolver(e.id,e.type,e):t.addInvolver(e.id,e.type,e)})),{searchTermChange$:n,searchResultSelected$:l,toggleEntry$:s,commit$:i,moveForward$:r,moveBackward$:o}},V=function(e){return function(t){var n=t.type;return(!n&&"user"===e||n===e)&&e}},F=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=t.reduce(function(e,t){return e[t]=[],e},{}),i=t.map(V);return e.reduce(function(e,t){var n,o;try{for(var s=r.i(i),a=s.next();!a.done;a=s.next()){var c=(0,a.value)(t);if(c){e[c].push(t);break}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return e},o)},B=n("q1tIBJhx"),U=n.n(B),$=n("8yf6doCl"),H=n("NMLEq1ET"),G={selected:[],recommend:[],recommendTop:void 0,isRecommendLoading:!1,query:"",searched:[],isSearchLoading:!1,historyPath:[],childrenResults:[]};function q(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.setMenuRef=function(e){n.menu=e},n.state=G,n.action$=new $.Subject,n.dispatchProps=R(n.action$),n}return r.d(n,t),n.prototype.componentDidMount=function(){var t=this,n=a.h(e.search,e.loadChildren,e.canToggle,e.genId),i=r.a({},A(this.action$,this.props.involverMgmt),{initListLoad$:e.selected$,initPoolLoad$:e.recommended$}),s=D(this.action$),c=(this.props.inline?n(i):s(n(i))).do(function(e){t.setState(a.i(e)),e.commitPayload&&t.commit(e.commitPayload)}),l=L(this.action$).do(function(){e.onOpen&&e.onOpen()}),u=z(this.action$).do(function(){e.onHide&&e.onHide(),t.props.involverMgmt&&t.props.involverMgmt.reset()});this.subscription=o.Observable.merge(c,l,u).subscribe()},n.prototype.componentWillUnmount=function(){this.subscription.unsubscribe(),this.action$.complete()},n.prototype.commit=function(e){var t,n=this;if(this.props.involverMgmt){var r=this.props;t=r.onCommit(r.involverMgmt)}else t=this.props.onCommit(e);t.toPromise().then(function(){n.menu&&n.menu.closeDropdown()})},n.prototype.render=function(){var e=this.props,t=e.inline,n=(e.onCommit,r.g(e,["inline","onCommit"])),o=r.a({},n,this.state,this.dispatchProps,{hideMembersCountOnItem:!0});return t?U.a.createElement(H.b,r.a({mode:H.c.Multi},o)):U.a.createElement(H.a,r.a({ref:this.setMenuRef,mode:H.c.Multi},o))},n}(U.a.PureComponent)}n.d(t,"userAsInvolver",function(){return h}),n.d(t,"memberAsInvolver",function(){return m}),n.d(t,"generateTeamDesc",function(){return f}),n.d(t,"generateSubTeamDesc",function(){return g}),n.d(t,"generateGroupDesc",function(){return v}),n.d(t,"teamAsInvolver",function(){return b}),n.d(t,"subTeamAsInvolver",function(){return y}),n.d(t,"groupAsInvolver",function(){return k}),n.d(t,"deparse",function(){return _}),n.d(t,"allProjectMembers",function(){return C}),n.d(t,"customAsInvolver",function(){return S}),n.d(t,"tagMemberAsInvolver",function(){return E}),n.d(t,"roleAsInvolver",function(){return T}),n.d(t,"leaderAsInvolver",function(){return I}),n.d(t,"loadInitialRecommend",function(){return x}),n.d(t,"loadSearch",function(){return N}),n.d(t,"loadChildren",function(){return O}),n.d(t,"connectDispatcher",function(){return R}),n.d(t,"whileOpenedWith",function(){return D}),n.d(t,"openWith",function(){return L}),n.d(t,"closeWith",function(){return z}),n.d(t,"consumeDispatched",function(){return A}),n.d(t,"ofType",function(){return V}),n.d(t,"groupByType",function(){return F}),n.d(t,"createInvolverMenu",function(){return q})},rDKGwshR:function(e,t,n){e.exports={"object-field":"object-field__1cNl"}},rDy43jHF:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("a+N5u/Cl"),o=n("Atd/KrMo"),r=n("rMIoYAJP"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="OnboardingSlide",t.prototype.className="obd-oboarding-slide",t.prototype.events={"click .slide .btn":"onBtnClick","click .title-cross":"onTitleCrossCilck","click .slide-progress-item.active":"onSlideChoice"},t.prototype.initialize=function(e){var n,r,o;return this.options=e,t.__super__.initialize.apply(this,arguments),null==(n=this.options).currentStep&&(n.currentStep=0),null==(r=this.options).currentSlide&&(r.currentSlide=0),"modal"===this.options.type&&this.$el.addClass("modal-dialog modal-view"),(null!=(o=this.options.style)?o.classes:void 0)&&this.$el.addClass(this.options.style.classes),this.renderBasic(),this.$modalTitle=this.$(".modal-title"),this.$slidesList=this.$(".slides-list"),this.$progressAnimation=this.$(".progress-animation"),this},t.prototype.extractFromSlidesPreset=function(e,t){return i.isArray(this.options.slidesPreset[e])?this.options.slidesPreset[e][t]||this.options.slidesPreset[e][0]:this.options.slidesPreset[e]},t.prototype.normalizeOptions=function(){var e,t,n;return null==(e=this.options).slides&&(e.slides=[]),null==(t=this.options).titleCrossActions&&(t.titleCrossActions=[]),this.options.slidesPreset&&"manual-next-close-end-with-gta-step"===this.options.slidesPreset.plan&&(this.options.slides=i.map(this.options.slidesPreset.contentUrl,(n=this,function(e,t){var r,o;return(o={content:{url:e}}).title=n.extractFromSlidesPreset("title",t),o.content_type=n.extractFromSlidesPreset("content_type",t),o.description=n.extractFromSlidesPreset("description",t),r=t===n.options.slidesPreset.contentUrl.length-1,o.buttons=[{title:n.extractFromSlidesPreset(r?"buttonDoneTitle":"buttonNextTitle"),style:n.extractFromSlidesPreset("buttonStyle"),actions:[r?"view-action://close-view":"view-action://next-slide",{name:"action://gta",payload:n.extractFromSlidesPreset("gta")}]}],o}))),i.each(this.options.slides,function(e){return function(t){return t.title=e.i18n(t.title),t.content.url=e.i18n(t.content.url),t.description=e.i18n(t.description),i.each(t.buttons,function(t){return t.title=e.i18n(t.title),i.defaults(t,{style:{},actions:[]}),i.defaults(t.style,{classes:[]})})}}(this)),this},t.prototype.sendAction=function(e){var n,r;if(n=e.name||e,r=o.kViewActionRegex.exec(n))switch(r[1]){case"next-slide":return this.nextSlide();case"prev-slide":return this.prevSlide()}return t.__super__.sendAction.apply(this,arguments),this},t.prototype.renderBasic=function(){var e,t;return t=this.getProgressBarWidth(),e=i.extend({progressBarWidth:t},this.options),this.$el.html(r(e)),this},t.prototype.onTitleCrossCilck=function(){return i.each(this.options.titleCrossActions,(e=this,function(t){return e.sendAction(t)}));var e},t.prototype.onBtnClick=function(e){var t,n,r;return t=$(e.currentTarget).closest(".btn").data("btn-gen-id"),n=this.options.currentSlide,i.each(this.options.slides[this.options.currentSlide].buttons[t].actions,(r=this,function(e){return r.sendAction(e,{"gta-step":"step "+r.extractFromSlidesPreset("step",n)})})),this},t.prototype.getProgressBarWidth=function(){var e,t,n;return n=this.options.slides.length,e=this.options.currentStep,t=n-1,Math.min(e+1,t)/t*100+"%"},t.prototype.commitChange=function(){var e,t,n,r,o;return o=this.$(".slide").width(),n=this.options.slides.length,r=o+(this.$(".slides-list").get(0).scrollWidth-o*n)/(n-1),null!=(t=this.$modalTitle)&&t.html(this.options.slides[this.options.currentSlide].title),this.$("[data-slide-gen-index="+this.options.currentSlide+"]").addClass("selected").siblings().removeClass("selected"),this.$("[data-slide-gen-index="+this.options.currentStep+"]").prevAll().andSelf().addClass("active"),this.$progressAnimation.css("width",this.getProgressBarWidth()),this.$slidesList.css("transform","translateX("+-r*this.options.currentSlide+"px)"),"VIDEO_SLIDE"===this.options.slides[this.options.currentSlide].content_type&&(e=this.$("[data-slide-gen-id='"+this.options.currentSlide+"'] video")[0])&&(e.currentTime=0,e.play()),this},t.prototype.nextSlide=function(){return this.options.currentSlide<this.options.slides.length&&(++this.options.currentSlide,this.options.currentStep<this.options.currentSlide&&(this.options.currentStep=this.options.currentSlide)),this.commitChange(),this},t.prototype.prevSlide=function(){return this.options.currentSlide>0&&(--this.options.currentSlide,this.options.currentStep<this.options.currentSlide&&(this.options.currentStep=this.options.currentSlide)),this.commitChange(),this},t.prototype.resetState=function(){return this.options.currentStep=0,this.options.currentSlide=0,this.commitChange(),this},t.prototype.onSlideChoice=function(e){var t;return t=this.$(e.currentTarget).closest(".slide-progress-item"),this.options.currentSlide=t.data("slide-gen-index"),this.commitChange(),this},t}()},"rK+Qbpe7":function(e,t,n){e.exports={modal:"modal__1iB9"}},rLFWxDDv:function(e,t,n){e.exports={handler:"handler__2UdJ","clear-input":"clear-input__2fia","search-icon":"search-icon__g7bz","no-result-placeholder":"no-result-placeholder__1BcH","search-wrap":"search-wrap__22DI",focused:"focused__1RI1","search-input":"search-input__2BSJ",separator:"separator__3jIh","item-image":"item-image__34Z4"}},rMIoYAJP:function(e,t){e.exports=function(e){var t="";"modal"==e.type&&(t+=' <header class="modal-header text-center"> <h4 class="modal-title">'+e.slides[e.currentSlide].title+"</h4> ",e.titleCrossActions.length&&(t+=' <a class="modal-close pull-right icon icon-remove title-cross"></a> '),t+=' </header> <div class="modal-body">'),t+=' <div class="slide-progress flex"> <div class="slide-progress-wrap"> <div class="slide-progress-bar"> <span class="progress-animation" style="width: '+e.progressBarWidth+'"></span> </div> <ul class="slide-projgress-items"> ';var n=e.slides;if(n)for(var r=-1,o=n.length-1;r<o;)s=n[r+=1],t+=' <li class="slide-progress-item',r<=e.currentStep&&(t+=" active"),e.currentSlide==r&&(t+=" selected"),t+='" data-slide-gen-index="'+r+'"> <span class="slide-count">'+(r+1)+"</span> </li> ";t+=' </ul> </div> </div> <div class="slide-container"> <ul class="slides-list flex"> ';var i=e.slides;if(i)for(var s,a=-1,c=i.length-1;a<c;){s=i[a+=1],t+=' <li class="slide" data-slide-gen-id="'+a+'"> <div class="slide-content"> ',"GIF_SLIDE"===s.content_type?t+=' <div class="img-container"> <img src="'+s.content.url+'"></img> </div> ':"VIDEO_SLIDE"===s.content_type&&(t+=' <div class="video-container"> <video src="'+s.content.url+'" controls muted',0===a&&(t+=" autoplay"),t+="></video> </div> "),t+=' <div class="description">'+s.description+'</div> </div> <div class="slide-action flex"> ';var l=s.buttons;if(l)for(var u,p=-1,d=l.length-1;p<d;){t+=' <button class="btn';var h=(u=l[p+=1]).style.classes;if(h)for(var m=-1,f=h.length-1;m<f;)t+=" "+h[m+=1];t+='" data-btn-gen-id="'+p+'"> '+u.title+" </button> "}t+=" </div> </li> "}return t+=" </ul> </div>","modal"==e.type&&(t+=" </div>"),t}},rXRlQlqo:function(e,t,n){e.exports={banner:"banner__3ke6",header:"header__7d_2","header-tip":"header-tip__39Xr","header-left":"header-left__GBNU","diff-area":"diff-area__bYwJ","diff-area-body":"diff-area-body__3w2K","diff-content":"diff-content__2iCv","diff-title":"diff-title__2GIq","diff-attr":"diff-attr__3j2N","diff-value":"diff-value__2w7w","link-info":"link-info__H2xm","link-body":"link-body__3EE_","link-name":"link-name__NPvt","link-modifier-info":"link-modifier-info__1ceI","link-apply-to":"link-apply-to__QlVd",footer:"footer__3BWY"}},rZWLBB2n:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;i=n("a+N5u/Cl"),o=n("hGNqppva"),r=n("4SYsFa44"),s=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="PopoverSinglePickerView",t.prototype.className="popover-single-picker-view",t.prototype.popoverTitle="Menu",t.prototype.width=170,t.prototype.events={"click .single-picker-item":"selectItem"},t.prototype.initialize=function(e){if(i.has(e,"dataList","select"))return this.dataList=e.dataList,this.selected=e.selected,t.__super__.initialize.apply(this,arguments),this;s("dataList and select is required!")},t.prototype.render=function(){return this.$el.html(r({dataList:this.dataList,selected:this.selected})),this},t.prototype.selectItem=function(e){var t;return t=$(e.currentTarget),this.selected=t.data("id"),t.addClass("selected").siblings().removeClass("selected"),this.options.select(this.selected),this.hide(),this},t}()},rZfPP7pq:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C=function(e,t){return function(){return e.apply(t,arguments)}},S={}.hasOwnProperty;g=n("a+N5u/Cl"),_=n("sa1Ed382"),n("cDm32Cmn"),d=n("3eMzznN/"),h=n("vmWJWrVe"),w=n("yiO17FlF"),i=n("+3Dxh9Ew"),p=n("oq1bWpp9"),l=n("Rb7YhHxV"),o=n("1fU+e3+7"),f=n("8N+zwa3A"),m=n("OmupbwLD"),c=n("PCjZn8k4"),u=n("tGfyIDI3"),s=n("oXtD/CwF"),r=n("9sOPw9dz"),k=n("x89q56rT"),b=k.bootstrapView,y=k.closeView,v=n("5lGttqQN").bootstrapGroupChatView,a=function(e){function t(){return this.voiceEnd=C(this.voiceEnd,this),this.voiceTimeUpdate=C(this.voiceTimeUpdate,this),this.voiceState=C(this.voiceState,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)S.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,h),t.prototype.initView=function(e){return this.from?v(e):b(e)},t.prototype.openSharingDetail=function(e){var t,n,i,s,a,u,d;return t=$(e.currentTarget),a=t.data("share-url"),s=t.data("share-type"),"file"===(u={isRawStriker:!0,objectId:t.data("id"),objectType:t.data("type")}).objectType&&(u.objectType="work"),d=this,n=function(){return d.requestSubView(m).open(c,u)},i=function(e){return function(){return e.requestSubView(m).open(r,{title:tb_i18n.get("share.message.open.in.new.tab.title"),content:tb_i18n.get("share.message.open.in.new.tab.content"),confirmText:tb_i18n.get("share.message.open.in.new.tab.confirm"),confirmHref:window.decodeURIComponent(a)})}}(this),"LEGACY"===s?n():function(){switch(u.objectType){case"task":return p;case"post":return l;case"event":return o;case"work":return f}}().fetch(u.objectId,{silentError:!0,success:function(e){return-2!==e.getRoleScope()?(u.objectModel=e,n()):i()},error:function(){return delete w.getData().models[u.objectId],delete w.getData().matrix[u.objectId],i()}}),this},t.prototype.enterPreviewer=function(e,t){var n,r;if(!_.user.get("isGhost"))return n=(r=t.map(function(e){return new f(Object.assign(e,{hasPermission:function(e){return"get.download"===e}}))})).filter(function(t){return t.get("fileKey")===e})[0],this.requestSubView(m).open(u,{isRawStriker:!0,workModel:n,workModels:r,key:"fileKey"}),this},t.prototype.downloadAttachments=function(e){var t,n,r,o,i,s;return(t=e)&&t.length?(t.length>1?(n=d.getStrikerDownloadConfig(),i=(o=t[0].fileName).indexOf("."),s=(s=o.slice(0,i))+"_"+tb_i18n.get("activity.moreAttachments")+"_"+t.length+"_"+tb_i18n.get("activity.moreFiles")+"_teambition",(r={httpMethod:"POST"}).data={zipName:s,downloadUrls:t.map(function(e){return e.downloadUrl})}):t.length&&(n=t[0].downloadUrl,r=""),1===t.length?d.downloadFile(t[0]):$.fileDownload(n,r)):this},t.prototype.showMemberDetail=function(e,t,n){return r=this,function(t){var o,i,s;if(!n)return(o=$(t.currentTarget)).data("bs.popover")?(null!=(i=r.memberCardView)&&i.remove(),r):(s=o.data("id"),r.projectModel?r.showMemberDetailFromProject(o,s,e):r.showMemberDetailFromOther(o,s,e))};var r},t.prototype.showMemberDetailFromProject=function(e,t){return this.requestMemberCardView(e,{projectModel:this.projectModel,userId:t}),this.gtaEvent("project")},t.prototype.showMemberDetailFromOther=function(e,t,n){var r;return r=this.orgId||_.PREFERENCE.get("lastWorkspace"),this.requestMemberCardView(e,{fromPrivateChat:"users"===n||void 0,organizationId:r,userId:t}),this.gtaEvent("users"===n?"private":"group")},t.prototype.requestMemberCardView=function(e,t){var n;return n=Object.assign({},{$toggler:e,placement:"right",affixToggler:!0},t),this.memberCardView=this.requestSubView(s,n),this.memberCardView.show()},t.prototype.gtaEvent=function(e){return _.gta.event({action:"view member info",page:"Chats Page",type:e})},t.prototype.voiceInit=function(e,t,n,r){return e._$progress=this.$('li[data-id="'+r+'"] .voice-progress'),e._$playTime=this.$('li[data-id="'+r+'"] .play-time'),e.audio=new i({src:t,duration:n,onStateChange:this.voiceState(e,r),onTimeUpdate:this.voiceTimeUpdate(e),onEnd:this.voiceEnd(e,n,r)})},t.prototype.voiceCtrl=function(e){var t;return null!=(t=e.audio)&&t.playClick(),this},t.prototype.voiceState=function(e,t){return n=this,function(r){var o;return o=function(){var t;return t=Math.abs(1e3*(r.duration-r.currentTime-0)),e._$progress.animate({width:"100%"},t,"linear")},e.voiceTimer&&(e._$progress.stop(!0,!0).css({width:0}).fadeIn(0),clearTimeout(e.voiceTimer),e.voiceTimer=null),r.paused?(e._$progress.stop(!0),n.$('li[data-id="'+t+'"] .play-ctrl').show(),n.$('li[data-id="'+t+'"] .pause-ctrl').hide()):(o(),n.$('li[data-id="'+t+'"] .play-ctrl').hide(),n.$('li[data-id="'+t+'"] .pause-ctrl').show()),n};var n},t.prototype.voiceTimeUpdate=function(e){return t=this,function(n){return e._$playTime.html(t.voiceDurationFormat(n.currentTime)),t};var t},t.prototype.voiceEnd=function(e,t,n){return r=this,function(){return e._$playTime.html(r.voiceDurationFormat(t)),e.voiceTimer=g.delay(function(){return r.$('li[data-id="'+n+'"] .play-ctrl').show(),r.$('li[data-id="'+n+'"] .pause-ctrl').hide(),e._$progress.stop(!0,!0).fadeOut(218)},400),r};var r},t.prototype.voiceDurationFormat=function(e){var t,n;return e=Math.floor(e),(t=parseInt(e/60))<10&&(t="0"+t),(n=parseInt(e%60))<10&&(n="0"+n),t+":"+n},t.prototype.destroyView=function(e){return y(e)},t}(),e.exports=a},rZkGVoQa:function(e,t,n){"use strict";n.r(t),n.d(t,"TaskWorktimeCreator",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("TSYQbtd+"),a=n.n(s),c=n("GESwhXbR"),l=n("8aUxFyB8"),u=(n("eh/6l5m9"),n("CG/Nb0sI"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setDropdownRef=function(e){t.dropdownRef=e},t.updateTotalTime=function(e){return t.dropdownRef.close(),t.props.updateTotalTime(e)},t}return r.d(t,e),t.prototype.renderContent=function(){var e=this.props.totalTime,t=e?i.get("task.worktime.summary.totalTime",e):i.get("task.worktime.summary.placeholder"),n=a()("task-worktime-content flex-space",{"has-value":!!e,disabled:!1===this.props.hasPutPermission});return o.createElement("div",{className:"detail-infos-content flex-fill"},o.createElement("a",{className:n},t))},t.prototype.renderPlan=function(){var e={totalTime:this.props.totalTime,hasPutPermission:!0,updateTotalTime:this.updateTotalTime,isRequired:this.props.isRequired};return o.createElement(l.a,r.a({},e))},t.prototype.renderDropdown=function(){return!1!==this.props.hasPutPermission?o.createElement(c.Dropdown,{className:"task-worktime-creator-dropdown",ref:this.setDropdownRef,content:this.renderPlan(),placement:"bottomLeft",nested:!0,persistence:!0},this.renderContent()):this.renderContent()},t.prototype.renderTitle=function(){var e=this.props.withTitle,t=void 0===e||e,n=t?"detail-infos-aside":"detail-infos-aside short-version";return o.createElement("div",{className:n},o.createElement(c.Icon,{name:"tachometer"}),t&&o.createElement("span",null,i.get("worktime")))},t.prototype.render=function(){return o.createElement("div",{className:"task-work-time-creator flex flex-vcenter"},this.renderTitle(),this.renderDropdown())},t}(o.Component))},rd17oOkg:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("4z2SmMW4"),a=n("tLZJUYWX"),c=n.n(a),l=n("wn+bmAxP"),u=n("vcYXyHGP"),p=n.n(u),d=n("pSso42HE"),h=function(e){function t(t){var n=e.call(this,t)||this;return n.handleClickPOHandler=function(){l.b.openedProjectinfoapp(),n.props.onProjectOverviewBannerClick()},n.bannerGta={shown:{action:"show guide",control:"Side Menu",method:"trace"},closed:{action:"close guide",control:"Side Menu",method:"click"}},n}return r.d(t,e),t.prototype.render=function(){return i.a.createElement("div",{className:p.a["project-menu-notice"]},this.renderProjectOverview())},t.prototype.renderProjectOverview=function(){return!(Object(d.g)(this.props.project,"projectinfoapp")||!this.props.hasPermission)&&i.a.createElement(s.a,{storage:s.a.Storage.remote,index:"PROJECT_OVERVIEW_V_9_21",content:this.renderProjectOverviewContent(),gta:this.bannerGta})},t.prototype.renderProjectOverviewContent=function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"project-overview-banner__title"},c.a.get("project.overview.app.notice.title")),i.a.createElement("p",{className:"project-overview-banner__desc"},c.a.get("project.overview.app.notice.desc")),i.a.createElement("a",{className:"project-overview-banner__button",onClick:this.handleClickPOHandler},c.a.get("project.overview.app.notice.enable")))},t}(i.a.PureComponent);n.d(t,"ProjectMenuNotice",function(){return h})},re1Qwcf5:function(e,t){},rgtqvNII:function(e,t,n){"use strict";n.r(t);var r=n("4BeYQFX4"),o=n.n(r),i=n("IaFtV71y"),s=n.n(i),a=new o.a({id:"angle-invisible-red",use:"angle-invisible-red-usage",viewBox:"0 0 8 16",content:'<symbol viewBox="0 0 8 16" id="angle-invisible-red"><path fill="#FF6051" d="M7.997 16H6.302c-.555 0-1.279-.36-1.614-.8L.511 9.704c-.67-.882-.682-2.317-.029-3.199L4.699.807C5.03.36 5.742 0 6.302 0h1.695v16z" /><path fill="#FF8478" d="M1.957 11.606L.51 9.704c-.67-.882-.682-2.317-.029-3.199L4.699.807c.216-.292.597-.548.99-.69l-3.732 11.49zm3.4 4.13l2.64-8.122V16H6.302c-.295 0-.638-.102-.945-.263z" /></symbol>'});s.a.add(a);t.default=a},rrNAR71G:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"AddMenu",function(){return f}),n.d(r,"projectAsSelectorItem",function(){return k}),n.d(r,"loadRecommend",function(){return _}),n.d(r,"loadSearch",function(){return w});var o=n("fZoV3jYy"),i=function(e,t,n){var r=t.added;return!Object(o.g)(e)||r.indexOf(n)>=0},s=n("EfuvDahv"),a=n("q1tIBJhx"),c=n.n(a),l=n("GESwhXbR"),u=n("tLZJUYWX"),p=n.n(u),d=n("u/LJYZ+h"),h=n("NZ1cSdKb"),m=function(e){return{id:e}},f=function(e){var t,n=function(e){t=e},r=function(){t&&t.close()},s=function(t){e.commit(t).do({complete:r}).toPromise()};return function(t){return c.a.createElement(l.Dropdown,{className:h["project-add-menu"],ref:n,onHide:r,content:(a=p.a.get("project.addmenu.search.not.found"),u=p.a.get("project.addmenu.content.empty"),c.a.createElement(o.d,{mode:o.c.Multi,selected:e.selectedIds.map(m),hideSelected:!0,iconShape:"square",searchNotFoundPlaceholder:{text:a},contentPlaceholder:{text:u,imgSrc:d},alwaysShowSearch:!0,loadRecommend:e.loadRecommend,loadSearch:e.loadSearch,canToggle:i,commit:s})),persistence:!0},t.children);var a,u}},g=n("mrSGxOB2"),v=n("dWbDnvg6"),b=n("s0r7VfKc"),y=n("cSYW21Cq"),k=function(e){return{id:e._id,name:e.name,desc:"",avatar:{type:v.b.Img,src:e.logo}}},_=function(e,t){return void 0===t&&(t=[]),function(){var n="organizations/"+e+"/projects/all",r={page:1,count:100};return b.default.fetch.get(n,r).map(function(e){return e.filter(function(e){return-1===t.indexOf(e._id)}).slice(0,50).map(k)})}},w=function(e){return function(t){var n={isArchived:"!= true",isSuspended:"!= true"},r=g.h(['(text ~ "'+t+'")'],Object.keys(n).map(function(e){return"("+e+" "+n[e]+")"})).join(" AND ");return Object(y.searchProjects)(t,r,50,e).map(function(e){return e.result.map(k)})}};n.d(t,"a",function(){return C}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return r});var C={add:function(e){return{action:"add timeline lane",control:"Topleft Add Button",type:e}},added:function(e){return{action:"added timeline lane",control:"Topleft Add Button",type:e}}}},runzuuFW:function(e,t,n){var r,o,i,s={}.hasOwnProperty;r=n("vmWJWrVe"),n("a+N5u/Cl"),n("3eMzznN/"),i=n("tLZJUYWX"),o=n("CA+X8ptj").ZhihuLinkComponent,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="ZhihuLinkView",t.prototype.className="zhihu-link-view flex-vert flex-space",t.prototype.initialize=function(e){if(e.data.length>0)return this.requestReactView(this.el,o,{items:e.data,linkTitle:i.get("link.zhihu.question.title")})},t}()},rvh1g4f9:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C={}.hasOwnProperty;k=n("a+N5u/Cl"),_=n("sa1Ed382"),p=n("YdqH4v7N"),y=n("vmWJWrVe"),c=n("qHH6+g6Q"),b=n("GESwhXbR").Toast,u=n("77NnVLwu"),g=n("PjENi0m4"),h=n("kHGemI2d"),o=n("nfPdorDU"),i=n("g0CKOpxX"),s=n("eI0B4r2P"),l=n("LG/I01pk"),m=n("lMSfz3/p"),v=n("4uKPJ5lc"),d=n("XYc95B52"),r=n("UFJOeuYZ"),a=n("xZLF/QRF"),w=n("gh8QIhMV").throwError,f=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)C.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,y),t.prototype.viewName="TagView",t.prototype.className="tags-view row-flex",t.prototype.events={"click .tag-creator-handler":"toggleCreator","click .tag-info":"scrollToSection","click .task":"gtaTaskDetail","click .entry":"gtaEntryDetail","click .event":"gtaEventDetail","click .post":"gtaPostDetail","click .work":"gtaWorkDetail"},t.prototype.initialize=function(e){var t,n;if(null!=e?e._projectId:void 0)return this.tagId=e.tagId,this._projectId=e._projectId,this.activeModel=new c({activeId:null}),t=u.fetch$(this._projectId).concatMap((n=this,function(e){return n.projectModel=e,n.renderBasic(),n.setupScroll(n.$contentWrap),n.showLoadingIndicator(n.$tags,{isPrepend:!0}),n.load()})),this.subscribe(t.do(function(e){return function(t){return e.tagsCollection=t[0],e.organizationTagsCollection=t[1],e.tagCategoriesCollection=t[2],e.hideLoadingIndicator(),e.renderTagAside(),e.showContent(),e.listen()}}(this),function(e){return function(t){var n;return(k.isString(t)||k.isString(null!=t?t.message:void 0))&&b.error(t),w(t),null!=(n=e.parentView)?n.close():void 0}}(this)))},t.prototype.load=function(){return Promise.all([this.loadTags(),this.loadOrganizationTags(),this.loadTagCategories()])},t.prototype.loadTags=function(){return new Promise((e=this,function(t,n){return g.fetch(e._projectId,{success:t,error:n})}));var e},t.prototype.loadOrganizationTags=function(){return this.projectModel.get("_organizationId")?new Promise((e=this,function(t,n){return g.fetch(e.projectModel.get("_organizationId"),{boundToObjectType:"organization",success:t,error:n})})):Promise.resolve();var e},t.prototype.loadTagCategories=function(){return this.projectModel.get("_organizationId")?new Promise((e=this,function(t,n){return h.fetch(e.projectModel.get("_organizationId"),{attrs:{_projectId:e._projectId},success:t,error:n})})):Promise.resolve();var e},t.prototype.onOpen=function(){var e;return null!=(e=this.tagAsideView)?e.slideToActive():void 0},t.prototype.renderTagAside=function(){return this.tagAsideView=this.requestSubView(d,{activeModel:this.activeModel,tagsCollection:this.tagsCollection,tagCategoriesCollection:this.tagCategoriesCollection,organizationTagsCollection:this.organizationTagsCollection}),this.$tags.html(this.tagAsideView.$el)},t.prototype.renderBasic=function(){return this.$el.html(r({permissions:this.projectModel.hasPermissions("tag.post")})),this.$header=this.$(".right-header"),this.$tags=this.$(".tag-list"),this.$contentWrap=this.$(".tag-content-wrap"),this.$placeholder=this.$(".placeholder"),this},t.prototype.listen=function(){var e;return this.listenTo(this.projectModel,"change:applications",function(){if(this.projectModel.isNavAppChanged())return this.renderHeader()}),this.listenTo(this.tagsCollection,"change",this.renderHeader),this.listenTo(this.organizationTagsCollection,"change",this.renderHeader),this.listenTo(this.activeModel,"change:activeId",(e=this,function(){return e.showContent()})),this},t.prototype.getTag=function(){var e,t;return e=this.activeModel.get("activeId")||this.tagId,this.tagsCollection.get(e)||(null!=(t=this.organizationTagsCollection)?t.get(e):void 0)||this.tagsCollection.at(0)},t.prototype.renderHeader=function(e){var t;return(e=this.getTag())&&((t=e.toJSON()).hasEntry=this.projectModel.isAppEnabled("bookkeeping"),this.$header.html(a(t))),this},t.prototype.showContent=function(){var e,t,n,r,a,c,u,p;return(c=this.getTag())?(this.$placeholder.hide(),this.$(".tag-item[data-id="+c.id+"]").addClass("active").siblings().removeClass("active"),this.renderHeader(c),null!=(e=this.tasksView)&&e.remove(),null!=(t=this.eventsView)&&t.remove(),null!=(n=this.postsView)&&n.remove(),null!=(r=this.filesView)&&r.remove(),null!=(a=this.entriesView)&&a.remove(),this.$contentWrap.empty(),u=[{constructor:v,view:"tasksView"},{constructor:i,view:"eventsView"},{constructor:l,view:"postsView"},{constructor:s,view:"filesView"},{constructor:o,view:"entriesView"}],k.reduce(u,(p=this,function(e,t){return e.then(function(){return new Promise(function(e,n){return p[t.view]=p.requestSubView(t.constructor,{tagModel:c,_projectId:p._projectId,onFinish:function(){return k.defer(e)}}),p[t.view].$el.appendTo(p.$contentWrap)})})}),Promise.resolve()).catch(k.noop),this):this.$placeholder.show()},t.prototype.checkNameExist=function(e){var t;return t=this.tagsCollection.map(function(e){return e.get("name")}),k.contains(t,e)},t.prototype.toggleCreator=function(e){var t;return(t=$(e.currentTarget)).data("bs.popover")||this.requestSubView(m,{$toggler:t,_projectId:this._projectId,tagsCollection:this.tagsCollection,checkNameExist:this.checkNameExist.bind(this),onShown:function(){return t.addClass("active")},onHidden:function(){return t.removeClass("active")}}).show(),this},t.prototype.scrollToSection=function(e){var t;if(!(t=$(e.currentTarget)).hasClass("disabled"))return this.slideTo(this.$(t.data("target")),!0),this},t.prototype.gtaTaskDetail=function(){return this.gtaObjectDetail("task")},t.prototype.gtaEntryDetail=function(){return this.gtaObjectDetail("entry")},t.prototype.gtaEventDetail=function(){return this.gtaObjectDetail("event")},t.prototype.gtaPostDetail=function(){return this.gtaObjectDetail("post")},t.prototype.gtaWorkDetail=function(){return this.gtaObjectDetail("file")},t.prototype.gtaObjectDetail=function(e){return _.gta.event({action:"open detail",page:"Tag Page",type:e,control:"Tag Detail"})},t}(),k.extend(f.prototype,p),e.exports=f},rx72K1eX:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n("/GeFQFAU"),c=function(e){var t=e.i18n,n=e.i18nVars,o=void 0===n?[]:n,c=e.initialTime,l=Object(a.a)(c);return i.a.createElement("time",{className:"time-stamp"},t?s.get.apply(s,r.h([t,l],o)):l)};n.d(t,"Timestamp",function(){return c})},s4X3VMgc:function(e,t,n){e.exports=n.p+"images/h_good@2x.3447c6f6.png"},"sDKf+sGL":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("TSYQbtd+"),c=n.n(a),l=n("7l29IdI8"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderLikedCount=function(){var e=this.props.likesGroup.length;return 0===e?null:o.createElement("span",{className:l["like-count"]},e)},t.prototype.render=function(){var e=this.props.likesGroup.length,t=c()("like-toggler-wrap",{active:this.props.isLike,"like-toggler-handler":!this.props.isGhost,"has-hint":!!e}),n=this.props.isGhost?{}:{onClick:this.props.onToggleLike};return o.createElement("div",r.a({className:t},n),o.createElement(s.Icon,{name:"dig",className:l["icon-button"]}),o.createElement(s.Icon,{name:"dig",className:l["icon-button"]}),this.renderLikedCount())},t}(o.PureComponent);n.d(t,"TooltipLike",function(){return p});var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getHintMessage=function(){return this.props.likesGroup.map(function(e){return e.name}).join(i.get("comma"))+" "+i.get("activity.timeline.liked")},t.prototype.render=function(){var e=this.props.likesGroup.length;if(this.props.isGhost&&0===e)return o.createElement(u,r.a({},this.props));var t=e?this.getHintMessage():i.get("activity.timeline.like");return o.createElement(s.Tooltip,{placement:"bottomRight",title:t},o.createElement("div",null,o.createElement(u,r.a({},this.props))))},t}(o.PureComponent)},sGvj1dfm:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e.stages;if(i)for(var s,a=-1,c=i.length-1;a<c;){o+=' <li class="stage-name group-name"><p>'+r((s=i[a+=1]).stageName)+"</p></li> ";var l=s.tasks;if(l)for(var u,p=-1,d=l.length-1;p<d;)o+=' <li class="task ',(u=l[p+=1]).disabled&&(o+="disabled"),o+=" ",u.isDone&&(o+="done"),o+=' hinted" data-id="'+u._id+'" data-title="'+r(u.content)+'"> <div class="check-box non-checkable"> <span class="icon icon-tick"></span> </div> ',u.executor&&u.executor.avatarUrl?o+=' <div class="avatar img-circle img-24" style="background-image:url('+u.executor.avatarUrl+')"></div> ':o+=' <div class="avatar img-circle img-24 no-avatar"></div> ',o+=' <div class="task-content-wrapper"> <span class="task-content link-search-content">'+r(u.content)+'</span> </div> <span class="task-id-placeholder"></span> </li> '}return o}},sI91bM9S:function(e,t,n){e.exports={"link-type-switch":"link-type-switch__2u6Z",qrcode:"qrcode__34pW","invite-forbidden":"invite-forbidden__2LTf"}},sIfICzuw:function(e,t,n){},"sIpwP/0f":function(e,t,n){},sKWSahZj:function(e,t,n){e.exports={"status-todobox-taskflow":"status-todobox-taskflow__2cAn","status-todobox-generic":"status-todobox-generic__3uI-"}},"sPJHzNB/":function(e,t,n){e.exports={"roles-select":"roles-select__3EDv","roles-select-upgrade-item":"roles-select-upgrade-item__29kq","roles-select-delete-item":"roles-select-delete-item__2G4l","roles-select-delete-limit-item":"roles-select-delete-limit-item__3hXP","with-top-divider":"with-top-divider__1w0l"}},sSp8UPiE:function(e,t){e.exports=function(e){return'<ul class="flex-static testplan-list thin-scroll"></ul><ul class="flex-static testgroup-list thin-scroll"></ul><ul class="flex-fill flex-horiz testcase-list-wrapper"></ul>'}},sXU8FVuc:function(e,t,n){},saEkUttf:function(e,t,n){e.exports=function(e){var t="",r=n("2qRnoGmE");return t+='<p class="qrcode-tip">'+e.i18n.invite_tip+'</p><div class="qr-invite-group flex flex-center"> ',r.FEATURES.weixinInvite&&!e.need_monkey_patch&&(t+=' <div class="qr-invite-wrapper"> <div class="message"> <span class="icon qrcode-icon icon-wechat"></span> '+e.i18n.wechat_scan+' </div> <div class="qrcode-img wechat-qrcode"></div> <div class="expiration-tip"> '+tb_i18n.get("settings.invite.valid.until")+" "+e.expiration+' </div> <div class="input-group invite-link ',e.hasCopySupport||(t+="no-copy"),t+='"> <input type="text" class="form-control input wechat-link base-link-input" data-scan-app="wechat" value="'+e.mobileInviteLink+'"> <div class="input-group-btn"> ',e.projectPutInfo&&(t+=' <a class="icon icon-refresh hinted reset-url-handler" data-title="'+tb_i18n.get("settings.invite.reset.tip")+'"></a> '),t+=' <button class="btn btn-primary copy-url-handler copy-wechat">'+tb_i18n.get("copy.link")+"</button> </div> </div> </div> "),t+=' <div class="qr-invite-wrapper"> <div class="message"',e.need_monkey_patch&&(t+=' style="display: none;"'),t+='> <span class="icon qrcode-icon icon-t"></span> '+e.i18n.tb_scan+' </div> <div class="qrcode-img tb-qrcode"',e.need_monkey_patch&&(t+=' style="display: none;"'),t+='></div> <div class="expiration-tip"> '+tb_i18n.get("settings.invite.valid.until")+" "+e.expiration+' </div> <div class="input-group invite-link ',e.hasCopySupport||(t+="no-copy"),t+='"> <input type="text" class="form-control input tb-link base-link-input" data-scan-app="tb" value="'+e.inviteLink+'"> <div class="input-group-btn"> ',e.projectPutInfo&&(t+=' <a class="icon icon-refresh hinted reset-url-handler" data-title="'+tb_i18n.get("settings.invite.reset.tip")+'"></a> '),t+=' <button class="btn btn-primary copy-url-handler copy-tb">'+tb_i18n.get("copy.link")+"</button> </div> </div> </div></div>"}},sd8NNwpY:function(e,t,n){e.exports={"status-checkbox-taskflow":"status-checkbox-taskflow__1g-R","status-checkbox-generic":"status-checkbox-generic__2S3D"}},sfDrL6f9:function(e,t,n){e.exports={"help-center-item":"help-center-item__1Aqg","with-badge":"with-badge__2naH","hotkey-helper":"hotkey-helper__3NG3"}},sfEmw17c:function(e,t,n){"use strict";var r=n("pOv4eJ7f");n.d(t,"Container",function(){return r.Container});var o=n("0HK9poFJ");n.o(o,"PluginAPI")&&n.d(t,"PluginAPI",function(){return o.PluginAPI}),n.o(o,"PluginLayerManager")&&n.d(t,"PluginLayerManager",function(){return o.PluginLayerManager}),n.o(o,"PluginLayerViewType")&&n.d(t,"PluginLayerViewType",function(){return o.PluginLayerViewType});var i=n("5eNik3+6");n.d(t,"PluginLayerManager",function(){return i.PluginLayerManager}),n.d(t,"PluginLayerViewType",function(){return i.PluginLayerViewType})},sfyFhkUk:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("/MKjzBat"),s=n("tLZJUYWX"),a=n("TSYQbtd+"),c=n.n(a),l=n("GESwhXbR"),u=n("cl35kkSI"),p=n("uYqc/Zh+"),d=n("wd/RKGTj"),h=n.n(d),m=n("a+N5u/Cl"),f=n("wMS7wN+j"),g=n.n(f),v=n("rx72K1eX"),b=n("/oI3bVAP"),y=n("IM6TaE5+"),k=/(&nbsp\;){1,}$/,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClickGotoProject=function(e){e.stopPropagation(),t.props.projectId&&t.props.onGotoProject(t.props.projectId)},t.handleDeleteMessage=function(e){e.stopPropagation();var n=t.props,r=n._id;(0,n.onDelete)({_id:r,isPseudo:n.isPseudo})},t.handleClick=function(){var e=t.props._id;t.props.onClick(e)},t}return r.d(t,e),t.prototype.renderUnreadCount=function(){var e=this.props,t=e.isMute,n=e.unreadCount,r=e.isActive;return t&&n>0&&!r?o.createElement("span",{className:"mute-point message-unread-count flex-static"}):n>0&&!r?o.createElement("span",{className:"normal-mode message-unread-count flex-static"},n):void 0},t.prototype.renderAtMe=function(){if(this.props.isAted)return o.createElement("span",{className:"badge-at flex-static"},s.get("chat.message.at.me")," ")},t.prototype.renderGotoProject=function(){if(this.props.type===b.a.project)return o.createElement(l.Tooltip,{title:s.get("inbox.go.to.project.handler")},o.createElement(l.IconButton,{className:"message-handler goto-project-handler flex-static",name:"import-project",color:"gray",onClick:this.handleClickGotoProject}))},t.prototype.renderTimeStamp=function(){var e=this.props,t=e.isPseudo,n=e.lastUpdateTime;return t?null:o.createElement("span",{className:"time flex-static"},o.createElement(v.Timestamp,{initialTime:h()(n).toDate()}))},t.prototype.renderAvatar=function(){var e,t=this.props,n=t.avatar,r=t.type,i={backgroundImage:"url("+n+")"},s=r===b.a.project||r===b.a.group,a=c()("message-avatar",((e={})["is-corner"]=s,e["is-circle"]=!s,e["no-avatar"]=!0,e));return o.createElement("i",{className:a,style:i})},t.prototype.renderMessageHeader=function(){var e=this.props,t=e.name,n=e.isMute&&o.createElement(l.Icon,{name:"mute"});return o.createElement("p",{className:"message-header flex-horiz"},o.createElement("span",{className:"name flex-fill flex-horiz"},o.createElement("span",{className:"message-source"},t),n),this.renderTimeStamp(),this.renderGotoProject(),o.createElement(l.IconButton,{className:"message-handler delete-handler flex-static",name:"remove",color:"gray",onClick:this.handleDeleteMessage}))},t.prototype.render=function(){var e=this.props,t=e.title,n=e.isRead,r=e.isActive,i={__html:k.test(t)?"&nbsp;":y.translate(g.a.sanitize(m.escape(t))).reduce(function(e,t){return e+t.value},"")||"&nbsp;"},s=c()("chat-message-view",{"is-active":r,"is-read":n});return o.createElement("div",{className:s,onClick:this.handleClick},this.renderAvatar(),o.createElement("div",{className:"message-info"},this.renderMessageHeader(),o.createElement("p",{className:"content-wrap flex-horiz"},this.renderAtMe(),o.createElement("span",{className:"content flex-fill",dangerouslySetInnerHTML:i}),this.renderUnreadCount())))},t}(o.PureComponent),w=n("sa1Ed382"),C=n("YqUJfXDr"),S=n("gh8QIhMV"),E=n("eBzvnLeU"),T="robot@mail.teambition.com",I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.saveScrollNode=function(e){t.scrollNode=e},t.getScrollNode=function(){return t.scrollNode},t.handleItemClick=function(e){var n=t.props.channels.find(function(t){return t._id===e});if(n){t.props.onActive(e);var r="private";n.project&&(r="project"),n.group&&(r="group");var o=n.isRead,i=n.creator&&n.creator.isRobot&&n.creator.email===T;w.gta.event({action:i?"open tbrobot message":"begin to chat",category:o?"read":"unread",documentid:e,page:"Chats Page",segment:"Side Chat List",type:r,userid:w.user.id})}},t}return r.d(t,e),t.prototype.componentDidUpdate=function(e){var t=this;this.props.channels.length>0&&0===e.channels.length?requestAnimationFrame(function(){t.scrollNode&&(t.scrollNode.scrollTop=0)}):this.scrollNode&&(!e.activedChannel&&this.props.activedChannel&&this.props.activedChannel.isPseudo||this.props.activedChannel&&e.activedChannel&&this.props.activedChannel.isPseudo&&e.activedChannel._id!==this.props.activedChannel._id)&&(this.scrollNode.scrollTop=0)},t.prototype.renderEmpty=function(){var e=this.props,t=e.channels;if(!e.hasMore&&0===t.length)return o.createElement("div",{className:"status-handler empty-handler"},o.createElement("div",{style:{textAlign:"center"}},s.get("chat.message.list.is.empty")))},t.prototype.renderError=function(){return o.createElement("div",{className:"status-handler error-handler"},o.createElement("div",{style:{textAlign:"center"}},s.get("chat.message.list.is.error"),o.createElement("a",{className:"refresh-handler"},s.get("click.to.refresh"))))},t.prototype.renderLoadMore=function(){var e=this.props,t=e.isLoading,n=e.hasMore,r=e.onLoadMore;return o.createElement(l.Defer,null,o.createElement(C.LoadMore,{hasMore:n,onEnter:r,clause:!t,endWith:null,scrollNode:this.getScrollNode}))},t.prototype.createCreator=function(e,t){return{name:e.name,id:e._id,avatar:t}},t.prototype.getCreator=function(e){var t=e.creator,n=e.project,r=e.group;return n?this.createCreator(n,n.logo):r?this.createCreator(r,r.logo):t?this.createCreator(t,t.avatarUrl):null},t.prototype.renderContent=function(){var e=this,t=this.props,n=t.channels,i=t.onClickGotoProject,s=t.onDelete,a=t.activedChannel;return n.map(function(t){var n=t.project,c=t.group,l=e.getCreator(t);if(!l)return Object(S.throwError)("message: creator data is empty("+l+"), failed to render channel list item("+JSON.stringify(t)+")"),null;var u={type:!!n&&b.a.project||!!c&&b.a.group||b.a.direct,_id:t._id,title:t.title,isAted:t.isAted,isMute:t.isMute,isRead:t.isRead,isPseudo:t.isPseudo,lastUpdateTime:t.boundToObjectUpdated,unreadCount:t.unreadActivitiesCount,isActive:!!a&&a._id===t._id,projectId:n?n._id:null,name:l.name,avatar:l.avatar,onDelete:s,onGotoProject:i,onClick:e.handleItemClick};return o.createElement(_,r.a({},u,{key:""+l.id}))})},t.prototype.render=function(){return o.createElement("div",{className:"chat-message-list-view thin-scroll",ref:this.saveScrollNode},this.renderEmpty(),o.createElement(E,{leave:t.leaveAnimation,component:"div"},this.renderContent()),this.renderLoadMore())},t.leaveAnimation={animation:"slideUp"},t}(o.PureComponent);n.d(t,"ChatModalContainer",function(){return P});var M={onMarkAllReaded:u.markAllChannelsRead,onClearAllReaded:u.clearAllReadedChannels,onPreheadChannel:u.preheadPrivateChannelByCreatorInfo,onLoadMore:u.getChannelListRequest,onDelete:u.deleteChannelRequest,onActive:u.activeChannel},j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.firstRender=!0,t.handleStartChatClick=function(){t.onTriggerChatState(!0),w.gta.event({action:"begin to create chat",page:"Chats Page",segment:"Side Chat List"})},t.handleEndChatClick=function(){t.onTriggerChatState(!1),w.gta.event({action:"return to side chat list",page:"Chats Page",segment:"Create Chat List"})},t.onTriggerChatState=function(e){t.props.onSwitchCreatChat(e)},t.onClickMoreBtn=function(){w.gta.event({action:"toggle more menu",page:"Chats Page",segment:"Side Chat List",type:"general"})},t.onCreateNewGroup=function(){t.props.onCreateNewGroupChat(),w.gta.event({action:"create new group",page:"Chats Page",segment:"Side Chat List"})},t.onReadAll=function(){t.props.onMarkAllReaded(),w.gta.event({action:"mark all as read",page:"Chats Page",segment:"Side Chat List"})},t.onClearAllReaded=function(){var e=t.props,n=e.onClearReadedMessages,r=e.onClearAllReaded;n(e.channels.filter(function(e){return e.isRead}).length,r),w.gta.event({action:"delete all read messages",page:"Chats Page",segment:"Side Chat List"})},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.renderPanel()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this.props,n=t.renderPanel,r=t.activedChannel,o=t.inCreatingChat,i=e.activedChannel,s=i&&!r||i&&i._id!==r._id,a=!i,c=!p.a.isReplaced(r,i);(s||a)&&c&&n(i),e.channels.length>0&&this.firstRender&&this.props.privateMessageUIData&&(this.firstRender=!1,this.props.onPreheadChannel(this.props.privateMessageUIData)),e.inCreatingChat!==o&&this.renderPanelLeft()},t.prototype.renderHandlerDropdown=function(){var e=this.props,t=e.inCreatingChat,n=e.isShowCreatGroup,r=c()({"is-hidden":t}),i=n?o.createElement(l.MenuItem,{onClick:this.onCreateNewGroup},o.createElement(l.Icon,{name:"org-users"}),s.get("chat.modal.new.chat.group")):null,a=o.createElement(l.Menu,{className:"message-panel-menu"},i,o.createElement(l.MenuItem,{onClick:this.onReadAll},o.createElement(l.Icon,{name:"tick"}),s.get("inbox.read.messages")),o.createElement(l.MenuItem,{onClick:this.onClearAllReaded},o.createElement(l.Icon,{name:"trash"}),s.get("inbox.clear.messages")));return o.createElement("span",{className:r},o.createElement(l.Dropdown,{content:a,placement:"bottom"},o.createElement(l.IconButton,{name:"more",color:"gray",onClick:this.onClickMoreBtn})))},t.prototype.renderPanelLeftSwitch=function(){return this.props.inCreatingChat?o.createElement(l.IconButton,{name:"chevron-left",color:"gray",onClick:this.handleEndChatClick}):o.createElement(l.IconButton,{name:"chat-create",color:"gray",onClick:this.handleStartChatClick})},t.prototype.renderPanelLeft=function(){var e=this.props,t=e.inCreatingChat,n=e.isLoading,i=e.hasMore,a=e.activedChannel,l=e.onLoadMore,u=e.onActive,p=e.onDelete,d=e.channels,h=c()("panel-left",{"in-creating":t}),m={onClickGotoProject:this.props.onClickGotoProject,isLoading:n,hasMore:i,channels:d,activedChannel:a,onLoadMore:l,onDelete:p,onActive:u};return o.createElement("div",{className:h},o.createElement("header",{className:"message-panel-header"},o.createElement("div",{className:"header-content"},this.renderPanelLeftSwitch(),t&&o.createElement("h2",{className:"create-chat-title"},s.get("chat.nav.popover.new.chat")),this.renderHandlerDropdown())),o.createElement("div",{className:"new-chat-wrapper"}),o.createElement(I,r.a({},m)))},t.prototype.render=function(){var e=this.props.activedChannel,t=e?null:this.renderPlaceholder(),n=c()("panel-right",{hide:!e});return o.createElement("div",{className:"chat-modal-view"},o.createElement("div",{className:"chat-modal-body"},this.renderPanelLeft(),o.createElement("div",{className:n}),t))},t.prototype.renderPlaceholder=function(){return o.createElement("div",{className:"panel-right-placeholder"},o.createElement("span",{className:"icon icon-remove message-panedl-placeholder-close"}),o.createElement("div",{className:"message-panel-placeholder"}))},t.prototype.renderPanel=function(){var e=this.props,t=e.activedChannel;(0,e.renderPanel)(t)},t}(o.PureComponent),P=Object(i.connect)(function(e){var t=e.ui.chat,n=t.activedChannel,r=t.channels,o=t.hasMore,i=t.isLoading;return{activedChannel:n,channels:r,inCreatingChat:e.ui.chatRoomPanel.inCreatingChat,hasMore:o,isLoading:i}},M)(j)},skByHrds:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleEnterProjectClick=function(e){var n=t.props,r=n.onEnterProjectClick,o=n.project;r&&r(e,o._id)},t.handleUnSuspendProjectClick=function(e){var n=t.props,r=n.onUnSuspendProjectClick,o=n.project;r&&r(e,o._id)},t.handleSuspendProjectClick=function(e){var n=t.props,r=n.onSuspendProjectClick,o=n.project;r&&r(e,o._id)},t.handleDestoryProjectClick=function(e){var n=t.props,r=n.onDestoryProjectClick,o=n.project;r&&r(e,o._id)},t.handleUnArchiveProjectClick=function(e){var n=t.props,r=n.onUnArchiveProjectClick,o=n.project;r&&r(e,o._id)},t.handleArchiveProjectClick=function(e){var n=t.props,r=n.onArchiveProjectClick,o=n.project;r&&r(e,o._id)},t.handleOpenProjectSettingClick=function(e){var n=t.props,r=n.onOpenProjectSettingClick,o=n.project;r&&r(e,o._id)},t.handleStarProjectClick=function(e){var n=t.props,r=n.onStarProjectClick,o=n.project;r&&r(e,o._id)},t.handleUnstarProjectClick=function(e){var n=t.props,r=n.onUnstarProjectClick,o=n.project;r&&r(e,o._id)},t}return r.d(t,e),t.prototype.isAlienProject=function(){return!!this.props.project.alien},t}(o.PureComponent)},smMC6FqF:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("GESwhXbR"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.size,n=e.color,i=e.style,s=e.children,a=r.a({},i,{width:t,height:t,backgroundColor:n});return o.createElement("div",{className:"color-disc",style:a},s)},t}(o.PureComponent),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.onSelectColor(t.props.index)},t}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.checked,n=e.circleColor,r=void 0===n?"":n,i=t?o.createElement(a.Icon,{className:"tick",name:"tick",size:14}):null;return o.createElement("li",{className:"color-circle"},o.createElement("a",{className:"color-circle-btn",role:"icon-button",onClick:this.onClick},o.createElement(c,{size:24,color:r},i)))},t}(o.PureComponent),u=n("ytDAhr3u").Colors,p=["blue","green","cyan","purple","yellow","red"],d=n("bmniE/8j"),h=function(e){function t(t){var n=e.call(this,t)||this;n.onColorSelect=function(e){n.setState({checkedColorIndex:e},function(){var e=n.props.colorList[n.state.checkedColorIndex];n.props.onSelectColor(e)})};var r=n.props.colorList.indexOf(n.props.selectedColor);return n.state={checkedColorIndex:r},n}return r.d(t,e),t.prototype.componentDidMount=function(){-1===this.state.checkedColorIndex&&this.onColorSelect(0)},t.prototype.renderColorList=function(e){var t=this;return e.map(function(e,n){return o.createElement(l,{key:n,index:n,checked:t.state.checkedColorIndex===n,circleColor:u[e],onSelectColor:t.onColorSelect})})},t.prototype.render=function(){var e,t=this.props,n=t.className,r=t.colorList,i=s()(((e={})[d["color-picker"]]=!0,e[n]=!!n,e));return o.createElement("ul",{className:i},this.renderColorList(r))},t.defaultProps={colorList:p,selectedColor:""},t}(o.PureComponent);n.d(t,"a",function(){return h})},"sqeXP+dr":function(e,t,n){e.exports=n.p+"images/d_chijing@2x.7da3908e.png"},"srlD+xxn":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R,D,L={}.hasOwnProperty,z=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};k=n("a+N5u/Cl"),b=n("CxY0Mkc1"),P=n("QyjeWo4p"),O=n("k7+OBFO9"),a=n("4c1CS0b3").Observable,v=n("GESwhXbR").Toast,D=n("sa1Ed382"),S=n("tLZJUYWX"),_=n("2qRnoGmE"),r=n("q1z7EYOi"),i=n("iPNg/Ezr"),I=n("tOYy32ox"),C=n("5qt3k8Zi").hasPersonalOrgTipDisplayed,l=n("0FRv5rrl"),u=n("85182E8g"),m=n("nL4olqOP"),g=n("oq1bWpp9"),o=n("1fU+e3+7"),h=n("77NnVLwu"),f=n("HYobN8SQ"),y=n("3eMzznN/"),p=n("R81d6RG8").PLUGIN_URL,R=n("ctsD9mWH").store,x=n("L342T8FT"),j=x.push,N=x.replace,d=n("80gYlwjC").Payment,v=n("GESwhXbR").Toast,M=n("NtzEC3Pa"),v=n("GESwhXbR").Toast,w=n("WMI0/nUp").fetchOrganizationPlugins,c=n("0HK9poFJ").OrgStructureEventEmitter$,T=n("5qt3k8Zi").markPersonalOrgTipDisplayed,s={wall:"posts",board:"tasks",library:"works"},e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)L.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r.Router),t.prototype.routes={"organization/:_organizationId/search(/*paramString)":"enterSearch","projects/search(/*paramString)":"enterSearch","projects(/*paramString)":"enterPortal","project/:_projectId(?:paramString)":"enterProjectHome","project/:_projectId(/)":"enterProject","project/:_projectId/:appName(/*paramString)":"enterProject","organization/:_organizationId(/*paramString)":"enterOrganization","task/:taskId(?:fullScreen)":"gotoTask","event/:eventId":"gotoEvent","organization-not-found":"enterOrganizationNotFound","organization-is-empty":"enterOrganizationIsEmpty","organization-creator(/:_version)(/*paramString)":"enterOrganizationCreator","*paramString":"home"},t.prototype.navigate=function(e,n){var r,o,i,s;return null==n&&(n={}),e=0===e.indexOf("/")?e:"/"+e,o=(s=b.parse(e)).pathname,i=s.query,n.keepQuery&&(r=P.parse(b.parse(location.href).query),i=k.extend({},r,i)),e=b.format({search:P.stringify(P.parse(i)),pathname:o}),n.replace?R.dispatch(N(e)):R.dispatch(j(e)),t.__super__.navigate.call(this,e,k.assign({},n,{replace:!0}))},t.prototype.cleanUrlQuery=function(e){var t,n,r;return r=b.parse(window.location.href),(n=P.parse(r.query))[e]=void 0,r.search=P.stringify(n),t=b.format(r),window.history.replaceState(null,null,t),this},t.prototype.execute=function(e,t,n){var r,o;return(!D.templateEditorFramed||t[0]===D.templateEditorFramed)&&(o=[function(){return"enterProject"===n},function(){var e;return t[0]===(null!=(e=D.APP.getCurrentProject())?e.id:void 0)},function(){return"tasks"===t[1]}],r=[function(){return O.enabled},function(){return O.isFullscreen},function(){return!k.every(o,function(e){return e()})}],k.every(r,function(e){return e()})&&i.remove("boardFullscreen",O.exit),null!=e?e.apply(this,t):void 0)},t.prototype.start=function(){return this.routeSideEffect(),this.isStarted=!1,r.history.start({pushState:!0}),this.isStarted=!0,this},t.prototype.routeSideEffect=function(){var e,t,n,r;if(n=b.parse(window.location.href),"true"===(t=P.parse(n.query)).hasPrisePro&&(r=(u.find(0)||[]).find(function(e){var t;if((t=d.create(e.get("plan"))).isProfessional&&t.isActive)return e}),this.cleanUrlQuery("hasPrisePro"),r&&(e=r.get("plan")._objectId,this.navigateToWorkspaceOrganization(e,!0))),"agile-template"===t["create-from"]||t.hasPrisePro&&r)return D.onboarding.runtime.memset("createFrom","agile-template"),this.cleanUrlQuery("create-from")},t.prototype.home=function(){return this.enterWorkspace()},t.prototype.addParamToOptions=function(e,t){var n;return null==t&&(t={}),n=this.splitParamString(e),k.extend({},t,{params:this.analyzeParams(n.paramString),attrs:this.analyzeParams(n.paramString),routeString:n.routeString})},t.prototype.enterPortal=function(e){var t,n,r,o;return r=u.find(0),(t=D.PREFERENCE.get("personalOrganizationId"))&&!C()&&r&&!r.isEmpty()?(r.get(t)?this.navigateToWorkspaceOrganization(t):(n=r.first(),T(),D.APP.refreshWorkspace(n.id),this.navigateToWorkspaceOrganization(n.id)),this):r&&r.isEmpty()?void this.navigateToOrganizationIsEmpty():this.isStarted?E()?((null!=(o=u.find(0))?o.size():void 0)>0?this.enterWorkspace():this.navigateToOrganizationNotFound(),this):(D._global={},D.user.toJSON().isGhost&&this.gotoLogin(),this):(this.enterWorkspace(),this)},t.prototype.enterSearch=function(e){var t;return((t=e)?new Promise(function(e,n){return l.fetch(t,{success:e,error:n})}):Promise.resolve()).then(function(e){return D.APP.enterSearch(e)})},t.prototype.enterProjectHome=function(e,t){return this.enterProject(e)},t.prototype.enterProject=function(e,t,n){var r,o,i;return D._global={_projectId:e},o=t,t=s[t]||t,r=Boolean(s[t]),m.fetchOne(0,e,{success:(i=this,function(s){var a,c,l,u,d,h,m;if(!s.isAlienProject())return c=s.getApplications(),s.hasScrumAppEnabled()&&(h="smartGroups"===t)&&(t="smartGroups",r=!0),t&&z.call(k.pluck(c,"name").concat(p),t)>=0||h||(t=s.getFirstApp()),a=t?"/"+t:"",(o||t)&&(o?o!==t&&(u=r?"/"+o:new RegExp("/"+o+"\\S*"),m=D.router.getUrl().replace(u,a),r||(n=null),D.router.navigate(m,{trigger:!1,replace:!0}),"home"===o||r||(l=S.get("project.app.disabled.and.redirect"),v.warning({message:l}))):(m=D.router.getUrl()+a,D.router.navigate(m,{trigger:!1,replace:!0}))),d={_projectId:e,projectModel:s},d=i.addParamToOptions(n,d),i.doGtaBeforeEnter("/project/"+e+"/"+t,t),D.APP.enterProject(s,t,d);window.location.href=s.get("alien").url}),error:function(e){return function(){return e.home()}}(this)})},t.prototype.enterOrganization=function(e,t){var n;return D._global={_organizationId:e},u.fetchOne(0,e,{success:(n=this,function(r){var o;return o={organizationModel:r,_organizationId:e},o=n.addParamToOptions(t,o),D.APP.enterOrganization(r,o)}),error:function(e){return function(){return e.navigateToOrganizationNotFound()}}(this)}),this},t.prototype.enterOrganizationNotFound=function(){return D.APP.enterOrganizationNotFound()},t.prototype.enterOrganizationIsEmpty=function(){return D.APP.enterOrganizationIsEmpty()},t.prototype.gotoTask=function(e,t){return y.promiseChain(function(){return!1})(function(){return y.warehouse.resolveFetch(g,e)},function(e){var t;return t=e.get("_projectId"),e.isIndie()?{task:e,organizationId:e.get("_organizationId")}:y.warehouse.resolveFetch(h,t).then(function(t){var n;return n=t.get("_organizationId"),{task:e,organizationId:n}})},(n=this,function(e){var t;return(t=e.organizationId)?y.warehouse.resolveFetch(l,t,{silentError:!0}).then(function(){return n.enterOrganization(t),e}).catch(function(){return n.enterPortal(),{task:e.task}}):(n.enterPortal(),e)}),function(n){return function(r){var o,i,s;return i=r.task,o=r.organizationId,s=D.router.getUrl(),D.APP.openTaskPreviewer(e,{hasLink:!i.isIndie(),fullScreen:!!t,onRemove:function(){if(D.router.getUrl()===s)return o?n.navigateToWorkspaceOrganization(o,!1):n.navigateToWorkspacePersonal(!1)}})}}(this)).catch(function(e){return function(t){return(k.isString(t)||k.isString(null!=t?t.message:void 0))&&v.error(t),e.home()}}(this));var n},t.prototype.gotoEvent=function(e){return y.promiseChain(function(){return!1})(function(){return y.warehouse.resolveFetch(o,e)},function(e){var t;return t=e.get("_projectId"),e.isIndie()?{event:e,organizationId:e.get("_organizationId")}:y.warehouse.resolveFetch(h,t).then(function(t){var n;return n=t.get("_organizationId"),{event:e,organizationId:n}})},(t=this,function(e){var n;return(n=e.organizationId)?y.warehouse.resolveFetch(l,n,{silentError:!0}).then(function(){return t.enterOrganization(n),e}).catch(function(){return t.enterPortal(),{event:e.event}}):(t.enterPortal(),e)}),function(t){return function(n){var r,o,i;return r=n.event,i=n.organizationId,o=D.router.getUrl(),I(e,{hasLink:!r.isIndie(),onRemove:function(){if(D.router.getUrl()===o)return i?t.navigateToWorkspaceOrganization(i,!1):t.navigateToWorkspacePersonal(!1)}})}}(this)).catch(function(e){return function(t){return(k.isString(t)||k.isString(null!=t?t.message:void 0))&&v.error(t),e.home()}}(this));var t},t.prototype.gotoTeambition=function(){return window.location=_.HOST,this},t.prototype.gotoLogin=function(){var e;return f.clear(),e=encodeURIComponent(window.location.href),window.location=_.ACCOUNT_HOST+"/login?next_url="+e,this},t.prototype.gotoRegister=function(){var e;return e=encodeURIComponent(window.location.href),window.location=_.ACCOUNT_HOST+"/signup?next_url="+e,this},t.prototype.doGtaBeforeEnter=function(e,t){return D.gta.pageview({page:e,title:t})},t.prototype.splitParamString=function(e){var t,n;return t={routeString:"",paramString:""},e?(~e.indexOf("?")?(n=e.split("?"),t.routeString=n[0],t.paramString=n[1]):~e.indexOf("=")?(t.routeString="",t.paramString=e):(t.routeString=e,t.paramString=""),t):t},t.prototype.analyzeParams=function(e){var t,n,r,o,i,s;if(!e)return{};for(o={},n=0,r=(t=e.split(",")).length;n<r;n++)~(s=t[n]).indexOf("=")&&(o[(i=s.split("="))[0]]=i[1]);return o},t.prototype.routeToHandler=function(e){var t,n,r,o,i,s;for(i in t=function(e,t,n,r){return function(o){var i,s;return i=r._extractParameters(n,o),s=function(){return t[e].apply(t,i)},null!=t.routesPreload?t.subscribe(a.from(t.routesPreload).do(s)):s()}},s=e.routes,e.handlers=[],r=[],s)n=s[i],o=this._routeToRegExp(i),r.push(e.handlers.push({routeString:i,route:o,callback:t(n,e,o,this)}));return r},t.prototype.checkRoute=function(e,t){var n,r,o,i,s;for(null!=(i=D.APP)&&i.dynamicTitle(),this.routeToHandler(t),r=0,o=(s=t.handlers).length;r<o;r++)if((n=s[r]).route.test(e))return n.callback(e)},t.prototype.getUrl=function(){return r.history.getFragment()},t.prototype.loadUrl=function(e){return r.history.loadUrl(e)},t.prototype.refreshUrl=function(e){return e||(e=this.getUrl()),window.location.href=e},t.prototype.getPrefix=function(){var e,t,n;switch(t="",n=this.getUrl(),(e=b.parse(n).pathname.split("/"))[0]){case"organizations":t="organizations";break;case"projects":t="projects";break;case"organization":t=e.slice(0,2).join("/");break;case"project":t=e.slice(0,2).join("/")}return t},t.prototype.navigateToWorkspaceOrganization=function(e,t){return null==t&&(t=!0),this.navigate("/organization/"+e,{trigger:t})},t.prototype.navigateToWorkspacePersonal=function(e,t){var n;return null==e&&(e=!0),this.isStarted?this.navigate("/projects",{trigger:e,keepQuery:t}):(this.isStarted=!0,n=this.getUrl(),this.loadUrl(n))},t.prototype.enterWorkspace=function(){var e,t,n;if(e=D.PREFERENCE.get("lastWorkspace"),E()&&"personal"===e&&(e=null),n=u.get(0),null===e)return n.size()>0?(t=n.first(),void this.navigateToWorkspaceOrganization(t.id)):void this.navigateToWorkspacePersonal(!0,!0);if("personal"!==e){if(!(t=function(){switch(n.has(e)){case!0:return n.get(e);default:return n.at(0)}}()))return this.navigateToWorkspacePersonal();this.navigateToWorkspaceOrganization(t.id)}else this.navigateToWorkspacePersonal()},t.prototype.enterOrganizationCreator=function(e,t){var n,r,o,i,s;return n=null===e?-1:parseInt(e,10),i=b.parse(location.href),r=P.parse(i.query),null!=(o=D.APP)&&o.dynamicTitle(),M.openOrganizationCreator(t||"Workspace",n,(s=this,function(){return s.home()}),r)},t.prototype.navigateToMemberProfile=function(e,t){return w(e)((n=this,function(r,o){var i,s,a;return r?v.error({message:r.toString()}):(s=o.findWhere({_appName:"member"}))?(i="organization/"+e+"/plugin/"+s.id,n.getUrl().indexOf(i)>-1?c.next({type:"changeRouteHistory",payload:{method:"push",path:"/member/"+t}}):(a=i,t&&(a="/"+a+"/member/"+t),n.navigate(a,{trigger:!0}))):v.error({message:tb_i18n.get("no.permission.to.member.profile")})}));var n},t.prototype.navigateToOrganizationNotFound=function(){return this.navigate("/organization-not-found",{trigger:!0,keepQuery:!0})},t.prototype.navigateToOrganizationIsEmpty=function(){return this.navigate("organization-is-empty",{trigger:!0,keepQuery:!0})},t}(),E=function(){return!0}},"t+pwECrv":function(e,t,n){e.exports={"task-unique-id":"task-unique-id__3kCN"}},t4XGQn5x:function(e,t,n){e.exports={"placeholder-no-permission":"placeholder-no-permission__28G_"}},t5iMsrXP:function(e,t,n){e.exports={popup__head:"popup__head__3MQa","popup-head":"popup-head__2yu1",popup__body:"popup__body__sI8f","popup-body":"popup-body__3Izm","bulk-action__trigger":"bulk-action__trigger__2C_R",trigger:"trigger__1nIt","bulk-action__trigger--disabled":"bulk-action__trigger--disabled__hzof","trigger--disabled":"trigger--disabled__f2Kp","bulk-action__trigger-text":"bulk-action__trigger-text__gC4v","trigger-text":"trigger-text__1Rpj","bulk-action__trigger-icon":"bulk-action__trigger-icon__3Xxm","trigger-icon":"trigger-icon__I93t"}},t9XoEkGd:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""});return'<li class="work" data-id="'+e._id+'"> <span class="react-file-icon" data-type="'+e.fileType+'"></span> <span class="work-title">'+r(e.fileName)+'</span> <div class="work-info muted"> '+r(tb_i18n.get("work.creator.info",e.creator.name))+' <span class="react-time-stamp"></span> </div></li>'}},"tBjKPM/k":function(e,t){e.exports=function(e){var t='<header class="modal-header"> <h4 class="modal-title">'+tb_i18n.get("event.creator.modal.title")+'</h4> <a class="icon icon-remove modal-close" data-dismiss="modal"></a></header><section class="creator-body"> <div class=\'event-location-wrapper\'> <div class=\'location-selector-wrapper\'></div> <div class=\'event-field-config-wrapper\'></div> </div> <div class="creator-block no-padding"> <div class="event-input-wrap event-title-input-wrap"> <textarea class="event-title-input" placeholder="'+tb_i18n.get("event.creator.title.placeholder")+'" data-gta="{action: \'edit title\', type: \'event\', control: \'New Event\'}"> </textarea> </div> </div> <div class="event-extra-area"> <div class="event-handlers-wrap flex"> <div class="date-time-wrap flex"></div> <div class="repeat-wrap flex"></div> <div class="remind-wrap flex"></div> </div> <div class="event-conflict-detect"></div> <hr /> </div> <div class="event-field-config-contents"></div> <div class="creator-involve"></div></section><footer class="creator-footer clearfix"> <a class="creator-visible"></a> ';return e.hasOldRecurrence?t+=' <div class="btn-wrap"> <button class="btn btn-primary submit-handler hinted" data-title="'+tb_i18n.get("event.confirm.update.following")+'" data-type="after">'+tb_i18n.get("event.creator.save.after")+'</button> <div class="btn-layer"></div> </div> <div class="btn-wrap"> <button class="btn btn-primary submit-handler hinted" data-title="'+tb_i18n.get("event.confirm.update.single")+'" data-type="single">'+tb_i18n.get("event.creator.save.single")+'</button> <div class="btn-layer"></div> </div> ':t+=' <div class="btn-wrap"> <button class="btn btn-primary submit-handler" data-gta="{action: \'added content\', type: \'event\'}"> '+tb_i18n.get("create")+' </button> <div class="btn-layer"></div> </div> ',t+="</footer>"}},tGAhh72B:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("a+N5u/Cl"),o=n("kpf8nsNF"),r=n("xL/A1S1t"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="ScenarioInfosCreatorView",t.prototype.className="scenario-infos-creator-view detail-infos-wrapper",t.prototype.initialize=function(e){var n,r;if(null!=e?e.objectModel:void 0)return t.__super__.initialize.apply(this,arguments),this.objectModel=e.objectModel,this.projectModel=e.projectModel,this.onRemove=e.onRemove,this.scenarioFields=e.scenarioFields||[],this.initScenarioFields=this.getInitFields(e.extraFieldTypes),this.requiredFields=[],(null!=(n=this.initScenarioFields)?n.length:void 0)&&this.$el.addClass("has-configs"),this.load().then((r=this,function(){if(r.el)return r.initData(),r.validateRequiredFields(),r.prepareViews(),r.listen()})),this},t.prototype.load=function(){return new Promise((e=this,function(t,n){return e.projectModel||t(),o.fetch(e.objectModel.get("_projectId"),{boundToObjectType:"application",success:function(n){return e.setCustomFieldLinksCollection(n),t()},error:n})}));var e},t.prototype.initData=function(){var e,t;return(null!=(e=this.scenarioFields)?e.length:void 0)&&this.$el.addClass("has-configs"),this.requiredFields=this.scenarioFields.filter(function(e){return e.required}),t=this.requiredFields.map(function(e){return"customfield"===e.fieldType?e._customfieldId:e.fieldType}),this.setRequiredFieldTypes(t)},t.prototype.listen=function(){var e;return e=i.chain(this.requiredFields).map(function(e){return"change:"+function(){switch(e.fieldType){case"customfield":return"customfields";case"tag":return"tagIds";case"worktimes":return"workTime";default:return e.fieldType}}()}).uniq().value().join(" "),this.listenTo(this.objectModel,e,this.validateRequiredFields),this.listenTo(this.objectModel,"change:_executorId",this.prepareViews)},t.prototype.getInitFields=function(e){var t,n,r;return r=this.scenarioFields,e&&(Array.isArray(e)||(e=[e]),n=function(e){return"customfield"===e.fieldType?function(t){return t.fieldType===e.fieldType&&t._customfieldId===e._customfieldId}:function(t){return t.fieldType===e.fieldType}},t=i.reject(e,function(e){return r.some(n(e))}),r=t.concat(r)),r},t.prototype.validateRequiredFields=function(){var e,t,n;return e=function(e){return function(t){var n,r;return n=null!=(r=t.value)?r.length:void 0,t._customfieldId===e&&n}},t=this.requiredFields.reduce((n=this,function(t,r){var o,i,s,a;if(!t)return!1;switch(r.fieldType){case"customfield":return i=n.objectModel.get("customfields"),o=r._customfieldId,null!=i?i.some(e(o)):void 0;case"tag":return!!(null!=(s=n.objectModel.get("tagIds"))?s.length:void 0);case"priority":return!0;case"storyPoint":return null!=n.objectModel.get("storyPoint");case"worktimes":return null!=(a=n.objectModel.get("workTime"))?a.totalTime:void 0;default:return!!n.objectModel.get(r.fieldType)}}),!0),this.trigger("requiredFieldsChanged",t)},t.prototype.prepareViews=function(){return this.initViews(this.initScenarioFields)},t.prototype.remove=function(){return"function"==typeof this.onRemove&&this.onRemove(),t.__super__.remove.apply(this,arguments)},t}()},tGfyIDI3:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R=function(e,t){return function(){return e.apply(t,arguments)}},D={}.hasOwnProperty;S=n("a+N5u/Cl"),N=n("sa1Ed382"),_=n("vmWJWrVe"),d=n("qHH6+g6Q"),k=n("3eMzznN/"),u=n("bZr3G77e"),p=n("Rmym59ay").ImageLoader,g=n("uQN6Cr2k"),O=n("gh8QIhMV").throwError,x=n("90U+kJWN").resolveUserId,C=n("FTOhhj1A"),c=n("j+mhrgl0"),b=n("77NnVLwu"),a=n("E86Oiqt3"),h=n("0FRv5rrl"),w=n("fYwV8xMK"),f=n("pfQN+kvY"),m=n("WsfvXF4i"),y=n("E5wMRikh").SpaceCompletion,i=n("6kNLk80W").ActivityPanelAndContextProvider,I=n("6kNLk80W").autoFocusActivityCreator,o=n("hlB2LTRb"),s=n("ZwNv0eBs"),l=n("g8BsEPZW"),M=n("RTj5z5YX").isReadonlyShare,P=n("LkuSL3mR"),E=P.activeSkitchCreating,T=P.activeSkitchMode,j=P.onSetActiveIds,r=n("pHAQicEC").ANIMATED_IMAGE_TYPES,v=function(e){function t(){return this.filterAtList=R(this.filterAtList,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)D.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,_),t.prototype.viewName="PreviewerView",t.prototype.tagName="div",t.prototype.className="previewer modal-dialog",t.prototype.hotkeys={right:"goNext",left:"goPrev"},t.prototype.preventHotkeys=["i","n","h"],t.prototype.events={"click .prev-handler":"goPrev","click .next-handler":"goNext","click .previewer-download-link":"downloadWork","mousewheel .detail-content":k.mousewheel},t.prototype.initialize=function(e){var t,n,r,o;if(this.workModel=e.workModel,this.workModels=e.workModels,this.versionId=e.versionId,this.skitchId=e.skitchId,this.isRawStriker=e.isRawStriker,this.onUnfavorite=e.onUnfavorite,this.where=e.where,this.handleDownload=e.handleDownload,this.key=null!=(n=e.key)?n:"_id",this.isUpdateUrl=null!=(r=e.isUpdateUrl)&&r,this.workModel||this.workModels)return!this.workModels&&this.workModel&&(this.workModels=[this.workModel]),t=this.getIndex(),this.indexModel=new d({index:t,officePreviewerEnabled:!0}),this.workModel=this.workModels[t],this.collectionModel=a.find(this.workModel.get("_parentId")),this.collectionModel||this.isRawStriker||a.fetch(this.workModel.get("_parentId"),{success:(o=this,function(e){return o.collectionModel=e})}),this.versionModel=this.workModel,this.contentStatusModel=new d({convert:!1}),this.versionCollection=w.get(this.workModel.id),this.viewId=S.uniqueId("previewer_"),this.imageLoader=new p(3),this.activityPanelContext={},this.renderBasic(),this.listen(),this.load()},t.prototype.load=function(){return Promise.resolve().then((e=this,function(){return e.isRawStriker?Promise.resolve():e.workModel.fetch()})).then(function(e){return function(){return Promise.all([e.fetchProject(),e.fetchOrganization()])}}(this)).then(function(e){return function(){return e.versionId?e.loadVersion().then(function(){return e.initialRender()}):(e.loadVersion(),e.initialRender()),k.trackRecentlyViewed("file",e.workModel.id)}}(this)).catch(function(e){return function(t){var n;return O(t),"function"==typeof(n=e.parentView).close?n.close():void 0}}(this));var e},t.prototype.fetchProject=function(){return this.isRawStriker?Promise.resolve():this.isIndieFile()?Promise.resolve():new Promise((e=this,function(t,n){return b.fetch(e.workModel.get("_projectId"),{success:function(n){return e.projectModel=n,t()},error:n})}));var e},t.prototype.fetchOrganization=function(){var e,t;return this.isRawStriker?Promise.resolve():(e=this.workModel.get("_organizationId"))?new Promise((t=this,function(n,r){return h.fetch(e,{success:function(e){return t.organizationModel=e,t.organizationModel.joinRoom(),n()},error:r})})):Promise.resolve()},t.prototype.loadVersion=function(){var e,t;return this.isRawStriker?Promise.resolve():(e=this.workModel.get("_id"),new Promise((t=this,function(n,r){return w.fetch(e,{reset:!0,success:function(e){var r,o;if(t.$el)return r=e.findWhere({fileKey:t.workModel.get("fileKey")}),o=e.get(t.versionId)||r,"work"===t.versionModel.name&&o?(t.resetVersion(o),t.renderVersions(o.id),n(o)):void 0},error:r})})))},t.prototype.listenToVersions=function(){return this.listenTo(this.versionCollection,"add",function(e){return this.resetVersion(e),this.renderVersions()})},t.prototype.listen=function(){var e;return this.listenToUploader(),this.listenTo(this.workModel,"change",(e=this,function(){if(e.workModel.hasChanged("_projectId")||e.workModel.hasChanged("_organizationId"))return e.close()})),this.listenTo(this.indexModel,"change:index",function(e){return function(t,n){return e.workModel=e.workModels[n],e.versionModel=e.workModel,e.stopListening(e.versionCollection,"add"),e.versionCollection=w.get(e.workModel.id),e.load()}}(this))},t.prototype.listenToWork=function(){return this.stopListening(this.workModel,"remove destroy change:isArchived"),this.clientEventsToggle(this.workModel,"unbind"),this.listenToVersions(),this.listenTo(this.workModel,"destroy",function(){return"function"==typeof this.onUnfavorite&&this.onUnfavorite(this.workModel.get("_id")),this.close()}),this.listenTo(this.workModel,"change:isArchived",function(){return this.renderContent(),this.checkIsArchived()}),this.listenTo(this.workModel,"change:involvers change:involveMembers",function(){return this.renderActivityPanel()}),this.clientEventsToggle(this.workModel,"bind")},t.prototype.listenToUploader=function(){var e;return this.$el.off(".update-work-handler"),this.$el.on("updating.update-work-handler",(e=this,function(t,n){return e.contentStatusModel.set({percentage:Math.ceil(100*n)})})),this.$el.on("updateEnded.update-work-handler",function(e){return function(){return e.contentStatusModel.set({percentage:100})}}(this))},t.prototype.clientEventsToggle=function(e,t){var n;if(null!=window.WebExtensionWin10)switch(n="fileDownloaded:"+e.get("fileKey"),t){case"bind":this.listenTo(window.clientEvents,n,this.renderHeader);break;case"unbind":this.stopListening(window.clientEvents,n)}return this},t.prototype.isIndieFile=function(){return!this.workModel.get("_projectId")},t.prototype.isImageWithPreview=function(){return g.isImageWithPreview(this.versionModel.toJSON())&&r.indexOf(this.versionModel.get("fileType"))<0},t.prototype.isPanelOpen=function(){return this.$el.hasClass("with-panel")},t.prototype.resetVersion=function(e){return this.versionModel=e,this.renderContent(),this.renderHeader(),this.renderActivityPanel(),this.renderActivityCreator(),this.refreshPreviewerUrl()},t.prototype.getIndex=function(){return this.workModel?S.findIndex(this.workModels,(e=this,function(t){return t.get(e.key)===e.workModel.get(e.key)})):0;var e},t.prototype.onOpen=function(){return this._onOpened=!0,"function"==typeof this._domReadyCallback?this._domReadyCallback():void 0},t.prototype.domReady=function(e){var t;return this._onOpened?"function"==typeof e?e():void 0:(t=this._domReadyCallback,this._domReadyCallback=function(){return"function"==typeof t&&t(),"function"==typeof e?e():void 0})},t.prototype.initialRender=function(){return this.versionModel||this.close(),this.listenToWork(),this.refreshPreviewerUrl(),this.renderLayout(),j(this.viewId)({activeSkitchId:this.skitchId}),this.skitchId=void 0,this.renderHandlers()},t.prototype.fireResizeEvent=function(){var e;return(e=document.createEvent("HTMLEvents")).initEvent("resize",!0,!1),window.dispatchEvent(e)},t.prototype.renderHandlers=function(){var e,t;if(this.workModels)return e=this.indexModel.get("index"),t=this.workModels.length,this.$(".handlers-wrapper").html(l({hasPrev:e>0,hasNext:e<t-1})),this.$prev=this.$(".prev-handler"),this.$next=this.$(".next-handler")},t.prototype.renderPanel=function(){if(!this.isRawStriker)return this.renderInfos(),this.renderActivityPanel()},t.prototype.renderVersions=function(e){var t,n;return g.getWorkData(this.workModel),t=this.requestSubView(C,{versionId:e,workModel:this.workModel,workVersionCollection:this.versionCollection,onSelect:(n=this,function(e){if(n.gtaSwitchVersion(),n.resetVersion(e),e)return n.clientEventsToggle(e,"unbind"),n.clientEventsToggle(e,"bind")})}),this.$workVersionsWrap.html(t.$el)},t.prototype.renderInfos=function(){var e;return null!=(e=this.infosView)&&e.remove(),this.infosView=this.requestSubView(c,{objectModel:this.workModel,boundToObjectType:this.workModel.get("objectType"),infos:this.isIndieFile()?["link","belinked"]:["link","belinked","tag"],withIcon:!0}),this.spaceCompletionNode||(this.spaceCompletionNode=document.createElement("div")),this.requestReactView(this.spaceCompletionNode,y,{}),this.$(".previewer-infos-wrap").html(this.infosView.$el).append(this.spaceCompletionNode)},t.prototype.renderActivityPanel=function(){return this.domReady((e=this,function(){var t;return e.requestReactView(e.$(".detail-activities-wrap").get(0),i,{projectId:e.workModel.get("_projectId"),organizationId:e.workModel.get("_organizationId")||(null!=(t=e.projectModel)?t.get("_organizationId"):void 0),object:e.workModel.toJSON(),objectModel:e.workModel,scrollFrameEl:e.$(".scrollable"),where:e.where,projectModel:e.projectModel,canInviteMember:"members"===e.collectionModel.get("visible"),hideAllProjectMembers:"involves"===e.collectionModel.get("visible"),scenario:"involves"===e.collectionModel.get("visible")?"visible-members":void 0,jumpToSkitch:function(t){var n,r,o;return N.gta.event({action:"open detail",type:"skitch",control:"Comment"}),r=t.skitchId,n=t.activityId,o=t.versionId,t.versionId===e.versionModel.id?T(e.viewId):(e.resetVersion(e.versionCollection.get(o)),e.renderVersions(o)),j(e.viewId)({activeSkitchId:r,activeActivityId:n})},activityPanelContext:e.activityPanelContext})}));var e},t.prototype.renderActivityCreator=function(){var e,t,n;return null!=(e=this.activityCreatorView)&&e.remove(),this.activityCreatorView=this.requestSubView(o,{_projectId:this.workModel.get("_projectId"),_organizationId:this.workModel.get("_organizationId")||(null!=(t=this.projectModel)?t.get("_organizationId"):void 0),boundToObjectType:this.workModel.get("objectType"),objectModel:this.workModel,isShared:M(this.workModel.get("shareStatus")),autoFocus:I(this.where),showSkitchCreator:this.isImageWithPreview(),enterSkitchMode:(n=this,function(){return E(n.viewId)}),filterAtList:"members"===this.collectionModel.get("visible")?void 0:this.filterAtList,activityPanelContext:this.activityPanelContext}),this.$(".activity-creator-wrapper").html(this.activityCreatorView.$el),this.activityPanelContext.activityCreatorView=this.activityCreatorView},t.prototype.renderHeader=function(){var e,t;return null!=(e=this.headerView)&&e.remove(),this.headerView=this.requestSubView(f,{indexModel:this.indexModel,handleDownload:this.handleDownload,workModel:this.workModel,versionModel:this.versionModel,projectModel:this.projectModel,organizationModel:this.organizationModel,where:this.where,onUnfavorite:this.onUnfavorite,inChat:this.isRawStriker,onReady:(t=this,function(e){return t.domReady(e)}),onModalClose:function(e){return function(){return e.close()}}(this),onInfoClick:function(e){return function(){return e.$el.toggleClass("with-panel"),e.fireResizeEvent(),N.gta.event({control:"right menu",action:"file operation panel",type:e.isPanelOpen()?"open":"close"})}}(this),convertFile:this.convertFile.bind(this),createVersion:function(e){return function(t){return e.workModel.createVersion(t)}}(this),onToggleOfficePreviewer:function(e){return function(){return e.indexModel.set("officePreviewerEnabled",!e.indexModel.get("officePreviewerEnabled"))}}(this)}),this.$previewerHeader.html(this.headerView.$el)},t.prototype.renderContent=function(){var e,t,n;return null!=(e=this.contentView)&&e.remove(),this.contentView=this.requestSubView(m,{viewId:this.viewId,indexModel:this.indexModel,handleDownload:this.handleDownload,imageLoader:this.imageLoader,canDownload:this.workModel.hasPermission("get.download"),canCommentSkitch:this.isIndieFile()||!this.isRawStriker&&(null!=(t=this.projectModel)?t.getRoleScope():void 0)>=0,workModel:this.workModel,versionModel:this.versionModel,inChat:this.isRawStriker,contentStatusModel:this.contentStatusModel,convertFile:(n=this,function(e){return n.convertFile(e)}),onReady:this.domReady.bind(this)}),this.$previewerContainer.html(this.contentView.$el)},t.prototype.renderLayout=function(){if(this.renderPanel(),this.renderHeader(),this.isRawStriker)return this.renderContent()},t.prototype.renderBasic=function(){return this.$el.html(s({isRawStriker:this.isRawStriker})),this.$previewerPanel=this.$(".activities-container"),this.$previewerHeader=this.$(".previewer-header-wrapper"),this.$previewerContainer=this.$(".previewer-content-wrapper"),this.$workVersionsWrap=this.$(".previewer-versions-wrap"),this.isRawStriker||this.$el.addClass("with-panel"),this.renderHandlers(),this.checkIsArchived(),this},t.prototype.checkIsArchived=function(){return this.workModel.get("isArchived")?this.$el.addClass("archived"):this.$el.removeClass("archived"),this},t.prototype.goPrev=function(){var e;if(e=this.indexModel.get("index")-1,this.workModels[e])return this.indexModel.set("index",e)},t.prototype.goNext=function(){var e;if(e=this.indexModel.get("index")+1,this.workModels[e])return this.indexModel.set("index",e)},t.prototype.convertFile=function(e){return u.ajax({url:e,method:"head",silentError:!0,beforeSend:(t=this,function(){return t.contentStatusModel.set("convert",!0)}),success:function(e){return function(){return e.contentStatusModel.set("convert",!1)}}(this),error:function(e){return function(){return e.contentStatusModel.set({convert:!1,error:!0})}}(this)});var t},t.prototype.refreshPreviewerUrl=function(){var e,t;if(this.isUpdateUrl&&!this.isRawStriker&&(t=N.router.getUrl(),e="/work/"+this.workModel.id,this.versionModel.get("fileKey")!==this.workModel.get("fileKey")&&(e+="/version/"+this.versionModel.id),!RegExp("/"+e+"$/").exec(t)))return t=t.replace(/\/work\/.+/,""),t+=e,N.router.navigate(t,{trigger:!1})},t.prototype.gtaSwitchVersion=function(){return N.gta.event({action:"switch version",type:"file",page:"Works Page",method:"click",control:"Right Menu",segment:"file previewer"})},t.prototype.filterAtList=function(e){var t;return t=x(e),(this.collectionModel.get("involveMembers")||[]).indexOf(t)>=0},t.prototype.close=function(){var e;return null!=(e=this.parentView)?e.remove():void 0},t.prototype.remove=function(){var e;return this.imageLoader.destroy(),e=N.router.getUrl().replace(/\/work\/.+/,""),N.router.navigate(e,{trigger:!1}),t.__super__.remove.apply(this,arguments)},t}(),t.Constructor=v},tM7ZA2EX:function(e,t,n){"use strict";void 0===window.ontransitionend&&window.onwebkittransitionend;var r=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend,o=r?"webkitAnimationStart":"animationstart",i=r?"WebkitAnimationName":"AnimationName",s="__resizeTriggers__",a="__resizeListeners__",c=function(e){var t=e[s],n=t.firstElementChild,r=t.lastElementChild,o=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,o.style.width=n.offsetWidth+1+"px",o.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},l=function(e){var t=this,n=e.target;if(!(n.className.indexOf("contract-trigger")<0&&n.className.indexOf("expand-trigger")<0)){var r=this;c(this),this.__resizeRaf__&&cancelAnimationFrame(this.__resizeRaf__),this.__resizeRaf__=requestAnimationFrame(function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(r)&&(r.__resizeLast__.width=r.offsetWidth,r.__resizeLast__.height=r.offsetHeight,r[a].forEach(function(t){t.call(r,e)}),t.__resizeRaf__=null)})}},u=!1,p=function(){var e=!1,t=document.createElement("fakeelement");void 0!==t.style.animationName&&(e=!0),!1===e&&void 0!==t.style[i]&&(e=!0);return{animationName:"resizeanim",keyframes:"@keyframes resizeanim { from { opacity: 0; } to { opacity: 0; } }",animStyle:"animation: 1ms resizeanim;"}}(),d=function(e,t){e[s]||("static"===window.getComputedStyle(e).position&&(e.style.position="relative"),function(e,t){if(!u){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style"),o="\n    "+e+" .resize-triggers { "+t+" visibility: hidden; opacity: 0; }\n    .resize-triggers,\n    .resize-triggers > div,\n    .contract-trigger:before { content: ' '; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; }\n    .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }\n  ";r.type="text/css",r.appendChild(document.createTextNode(o)),n.appendChild(r),u=!0}}(p.keyframes,p.animStyle),e.__resizeLast__={},e[a]=[],e[s]=document.createElement("div"),e[s].className="resize-triggers",e[s].innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e[s]),c(e),e.addEventListener("scroll",l,!0),e[s].addEventListener(o,function(t){t.animationName===p.animationName&&c(e)})),e[a].push(t)},h=function(e,t){e[a]&&(e[a].splice(e[a].indexOf(t),1),0===e[a].length&&(e.removeEventListener("scroll",l),e[s]=!e.removeChild(e[s])))};n.d(t,"a",function(){return d}),n.d(t,"b",function(){return h})},tOYy32ox:function(e,t,n){var r,o,i,s,a,c,l,u,p;o=n("a+N5u/Cl"),l=n("sa1Ed382"),r=n("4c1CS0b3").Observable,a=n("KqDDC1nH"),i=a.dataUpdateToView,p=a.toBackboneModel,s=a.eventUseOriginId,u=n("gh8QIhMV").throwError,c=n("s0r7VfKc").default,e.exports=function(e,t){var n,a,d,h;return null==t&&(t={}),d=o.isObject(e)?(a=e)._id:e,n=a&&r.of(a)||c.getEventInstance(d),h=n.filter(Boolean).take(1).subscribe({next:function(e){var n,r;return n=p(s(e)),r=null,t=Object.assign({},t,{onOpenDetailViewInObjectModal:function(e){return r=i(e,d).subscribe()},onCloseDetailViewInObjectModal:function(){return null!=r&&r.unsubscribe(),null!=h?h.unsubscribe():void 0}}),l.APP.openEventPreviewer(n,t)},error:function(e){return u(e)}})}},tTk6JCgl:function(e,t,n){e.exports={menu:"menu__3ZK3",info:"info__19dQ",delete:"delete__1ov8","double-check":"double-check__UKxo","menu-item":"menu-item__IFAC","menu-wrapper":"menu-wrapper__36Go","info-input-error":"info-input-error__2QC-","info-error-message":"info-error-message__360f","info-submit":"info-submit__1-1s","delete-submit":"delete-submit__1tXb","double-check-radiogroup":"double-check-radiogroup__3wwW","double-check-submit":"double-check-submit__1t8p",radio:"radio__3FPb"}},tWAcY96j:function(e,t,n){"use strict";n.r(t),n.d(t,"SubtaskMenu",function(){return v});var r,o=n("mrSGxOB2"),i=n("q1tIBJhx"),s=n.n(i),a=n("17x9q+7Q"),c=n.n(a),l=n("tLZJUYWX"),u=n.n(l),p=n("sa1Ed382"),d=n.n(p),h=n("GESwhXbR"),m=n("AcoKqCS/"),f=n.n(m);!function(e){e[e.main=0]="main",e[e.delete=1]="delete"}(r||(r={}));var g=s.a.createElement("a",{className:"subtask-menu-trigger icon icon-chevron-down"}),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setMenuRef=function(e){t.menuRef=e},t.onClickEditContent=function(){d.a.gta.event({action:"edit content",control:"Subtask Display",type:"subtask"}),t.props.onEditContent(),t.menuRef&&t.menuRef.close()},t.onClickArchive=function(){d.a.gta.event({action:"archive content",control:"Subtask Display",type:"subtask"}),t.menuRef&&t.menuRef.goTo(r.delete)},t.onArchive=function(){t.props.onArchive()},t}return o.d(t,e),t.prototype.renderArchive=function(){return s.a.createElement(h.PopupMenuView,{index:r.delete,title:u.a.get("subtask.menu"),className:f.a.content},u.a.get("subtask.archive.confirm"),s.a.createElement(h.Button,{danger:!0,block:!0,onClick:this.onArchive,className:f.a.submit},u.a.get("subtask.archive.handler")))},t.prototype.renderArchiveItem=function(){return s.a.createElement(h.MenuItem,{className:f.a.item,onClick:this.onClickArchive},s.a.createElement(h.Icon,{name:"archive",className:f.a.icon}),u.a.get("subtask.archive"))},t.prototype.renderEditItem=function(){return s.a.createElement(h.MenuItem,{className:f.a.item,onClick:this.onClickEditContent},s.a.createElement(h.Icon,{name:"pencil",className:f.a.icon}),u.a.get("subtask.menu.edit.content"))},t.prototype.renderMain=function(){return s.a.createElement(h.PopupMenuView,{index:r.main,title:u.a.get("subtask.menu"),className:f.a["main-content"]},this.renderArchiveItem(),this.renderEditItem())},t.prototype.render=function(){return s.a.createElement(h.PopupMenu,{main:r.main,trigger:g,ref:this.setMenuRef,className:this.props.className},this.renderMain(),this.renderArchive())},t.propTypes={onEditContent:c.a.func.isRequired},t}(s.a.PureComponent)},"tX+U/U8q":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y=function(e,t){return function(){return e.apply(t,arguments)}},k={}.hasOwnProperty;g=n("a+N5u/Cl"),v=n("sa1Ed382"),a=n("odY26VIi"),u=n("eubUSX4T"),s=n("cDm32Cmn"),i=n("11Yo7oZf"),o=n("+daK+zGx"),c=n("HYobN8SQ"),l=n("Tyo/9bte"),p=n("3eMzznN/"),d=n("vmWJWrVe"),f=n("WRIFfSP1"),h=n("o4N9kv/m"),m=n("5CiSxGri"),r=n("wnD/zndQ").ChatMessageCreator,b=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return this.getMentions=y(this.getMentions,this),this.confirmCurrentMentions=y(this.confirmCurrentMentions,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)k.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,d),t.prototype.viewName="ChatRoomCreatorView",t.prototype.tagName="div",t.prototype.className="chat-room-creator",t.prototype.events={"focusin .message-input":"focusAttachment","focusout .message-input":"blurAttachment","click .add-work-handler":"toggleWorksPicker","click .screen-crop-handler":"openScreenCrop","click .login-handler":"loginHandler","click .register-handler":"registerHandler","mousewheel .scrollable":p.mousewheel},t.prototype.initialize=function(e){var t;if(e.roomId)return e=g.extend({},{isOpen:!0},e),this.roomId=e.roomId,this.groupId=e.groupId,this.projectModel=e.projectModel,this.collection=e.collection,this.isOpen=e.isOpen,this.localCache=c.namespace("temp").namespace("direct_messages"),this.localCacheId=this.roomId+"_"+v.user.id,p.promiseChain((t=this,function(){return!t.el}))(function(e){return function(){return e.renderBasic()}}(this),function(e){return function(){return e.initUploader(),e.initSortable(),e.initAt(),e.listen()}}(this)),this},t.prototype.getCreatorRef=function(){return this.rCreator},t.prototype.setCreatorRef=function(e){return this.rCreator=e},t.prototype.renderBasic=function(){var e,t,n,o,i,s,a;return s=v.user.toJSON(),t=this.localCache(this.localCacheId)||{},e=g.filter(t.attachments,function(e){return!1!==e.completed}),this.mentionsList=t.mentionsList||[],this.attachments=new u(e),s.isGhost&&this.$el.addClass("ghost"),n=this.projectModel?"project":this.groupId?"group":"private",this.requestReactView(this.el,r,{attachments:this.attachments,defaultValue:t.content,type:n,initEmoji:this.initEmoji.bind(this),isOpen:this.isOpen,isShowCropBtn:null!=(null!=(o=window.TbScreenshotD)?o.startScreenShot:void 0),mentions:this.confirmCurrentMentions.bind(this),projectId:null!=(i=this.projectModel)?i.id:void 0,ref:this.setCreatorRef.bind(this),roomId:this.roomId,submitFulfilled:this.submitFulfilled.bind(this)},(a=this,function(){return a.$textareaset=a.$(".message-input"),a.$attachmentsList=a.$(".attachments-list"),a.$quickCreate=a.$(".quick-create"),a.$submit=a.$(".reply-handler"),a.isOpen&&(a.$textareaset.flexText(function(){return a.cacheChatRoom()}),g.delay(function(){if(a.$el)return a.$textareaset.focusAtEnd()},100)),a.$attachmentsList.css("max-height",Math.max(58*a.attachments.length,100)),a.attachments.each(function(e){return a.renderAttachment(e)})}))},t.prototype.submitFulfilled=function(){if(this.$el)return this.mentionsList=[],this.$attachmentsList.empty(),this.attachments.reset(),this.$textareaset.val(""),this.$textareaset.trigger("change"),this.$el.removeClass("active"),this.localCache.remove(this.localCacheId),this.$textareaset.focusAtEnd()},t.prototype.listen=function(){return this.listenTo(this.attachments,"add change:downloadUrl remove",this.cacheChatRoom),this.listenTo(this.attachments,"add remove reset",(e=this,function(){return e.$attachmentsList.empty(),e.attachments.length?(e.attachments.each(function(t){return e.renderAttachment(t)}),e.$attachmentsList.css("max-height",Math.max(58*e.attachments.length,100))):e.deactiveAttachment()}));var e},t.prototype.listenToGroupModel=function(){return this.listenTo(this.groupModel,"change:hasMembers",(e=this,function(t){return e.groupMembers=(null!=t?t.get("hasMembers"):void 0)||[],e.updateSymbol()}));var e},t.prototype.initUploader=function(){var e,t;return null!=(t=this.workUploaderView)&&t.remove(),e={collection:this.attachments,dnd:this.$el,paste:this.$textareaset,notCheckProjectSizeLimit:!0},this.isOpen&&(this.workUploaderView=this.requestSubView(h,e)),this},t.prototype.initEmoji=function(){var e;return this.isOpen&&(this.fastEmojiView=this.requestSubView(o,{$toggler:this.$(".message-box-wrap .add-emoji-handler"),select:(e=this,function(t){return e.insertEmoji(t)})}),this.fastEmojiView.$el.appendTo(this.$(".chat-room-creator-fast-emoji")),this.activeEmojiView=this.requestSubView(o,{$toggler:this.$(".chat-room-handler .add-emoji-handler"),select:function(e){return function(t){return e.insertEmoji(t)}}(this)}),this.activeEmojiView.$el.appendTo(this.$(".chat-room-creator-active-emoji"))),this},t.prototype.insertEmoji=function(e){var t,n,r;return r=this.$textareaset.val().replace(/\n/g,""),t=this.$textareaset[0].selectionStart,r=(r=r.slice(0,t)+e+r.slice(t)).replace(/\r/g,"\r\n"),this.getCreatorRef().value$.next(r),n=t+e.length,this.$textareaset.selectRange(n,n)},t.prototype.initSortable=function(){var e;return this.$attachmentsList.sortable({items:".work",helper:"clone",placeholder:"work-drag-placeholder",tolerance:"pointer",zIndex:2001,axis:"y",scroll:!1,update:(e=this,function(t,n){var r,o,i;return r=$(t.target),i=r.sortable("toArray",{attribute:"data-cid"}),o=e.attachments.sortBy(function(e){return i.indexOf(e.cid)}),e.attachments.models=o})}),this},t.prototype.updateSymbol=function(){var e,t;return e={projectMembers:this.assembleAll(),organizationMembers:[],guestMembers:[]},null!=(t=this.symbolPopoverView)?t.updateMembersData(e):void 0},t.prototype.initAt=function(){var e,t,n;return this.isOpen?(n=this,t=function(e){var t,r;if(null!=(r=n.$textareaset)?r.length:void 0)return t=g.extend({},{$inputor:n.$textareaset,at:"@",fixed:!0,select:function(e,t){return n.selectAt(e,t)},onChange:function(e){return n.getCreatorRef().value$.next(e)}},e),n.symbolPopoverView=n.requestSubView(l,t)},(null!=(e=this.projectModel)?e.getRoleScope():void 0)>=-1?a.fetch(this.projectModel.id,{boundToObjectType:"project",silentError:!0,error:function(){},success:function(e){return function(n){return e.projectMembersCollection=n,t({membersData:{projectMembers:e.assembleAll()}})}}(this)}):this.groupId&&this.fetchGroupModel(this.groupId).then(function(e){return function(n){return e.groupModel=n,e.groupMembers=(null!=n?n.get("hasMembers"):void 0)||[],t({membersData:{groupMembers:e.assembleAll()}}),e.listenToGroupModel()}}(this)).catch(function(e){return b(e)}),this):this},t.prototype.fetchGroupModel=function(e){return new Promise(function(t,n){return i.fetch(e,{success:t,error:n})})},t.prototype.assembleAll=function(){return this.projectMembersCollection?this.getMemberList(this.projectMembersCollection.toJSON(),this.projectMembersCollection._boundToObjectId):this.groupMembers?this.getMemberList(this.groupMembers,this.groupId):[]},t.prototype.getMemberList=function(e,t){var n;return(n=this.getValidMembers(e)).length?[{_id:t,type:"all",pinyin:"all",py:"all",name:tb_i18n.get("at.list.all.members"),hasMembers:n}].concat(n):[]},t.prototype.getValidMembers=function(e){return g.filter(e,function(e){return e._id!==v.user.id&&!e.isDisabled})},t.prototype.selectAt=function(e,t){return this.mentionsList.push(t),this.cacheChatRoom(),this},t.prototype.toggleWorksPicker=function(e){var t;return this.isOpen&&((t=$(e.currentTarget)).data("bs.popover")||this.requestSubView(f,{$toggler:t,collection:this.attachments,placement:"auto top"}).show()),this},t.prototype.openScreenCrop=function(){var e;if(null!=(null!=(e=window.TbScreenshotD)?e.startScreenShot:void 0))return this.$textareaset.focusAtEnd(),window.TbScreenshotD.startScreenShot()},t.prototype.focusAttachment=function(){var e;return this.$el.addClass("focus"),this.$el.addClass("active"),this.$el.handleClickOutside((e=this,function(){return e.deactiveAttachment()}),"click",".file-picker, #atwho-container"),this},t.prototype.blurAttachment=function(){return this.$el.removeClass("focus"),this},t.prototype.loginHandler=function(e){return v.router.gotoLogin(),this},t.prototype.registerHandler=function(e){return v.router.gotoRegister(),this},t.prototype.renderAttachment=function(e){return this.requestSubView(m,{workModel:e}).$el.appendTo(this.$attachmentsList),this.$attachmentsList.scrollTop(999),this.$textareaset.focusAtEnd(),this},t.prototype.cacheChatRoom=function(){var e;return e=this.$textareaset.val().trim(),this.localCache(this.localCacheId,{content:e,attachments:this.attachments.toJSON().map(function(e){return g.omit(e,"thumbnail")}),mentions:this.mentionsList}),this},t.prototype.confirmCurrentMentions=function(){var e,t,n,r;for(e=0,t=(r=this.mentionsList).length;e<t;e++)switch((n=r[e]).type){case"all":this.projectMembersCollection?n.hasMembers=this.getValidMembers(this.projectMembersCollection.toJSON()):this.groupMembers&&(n.hasMembers=this.getValidMembers(this.groupMembers))}return this.getMentions()},t.prototype.getMentions=function(){var e,t,n,r,o,i;for(e=this.$textareaset.val(),o={},t=0,n=(i=this.mentionsList).length;t<n;t++)r=i[t],e.indexOf("@"+r.name)<0?this.mentionsList=g.without(this.mentionsList,r):"all"===r.type?g.each(r.hasMembers,function(e){return e instanceof s?o[e.get("_id")]=e.get("name"):o[e._id]=e.name}):o[r._id]=r.name;return delete o[v.user.id],o},t.prototype.deactiveAttachment=function(){return this.attachments.length||this.$textareaset.val().trim()||(this.$textareaset.val(""),this.$textareaset.trigger("change"),this.$el.removeClass("active")),this},t.prototype.show=function(){return g.delay((e=this,function(){var t,n;if(e.$el)return(n=e.$el.height())>0?(t={display:"block",height:"0px",overflow:"hidden"},e.$el.css(t),e.$el.on("transitionend.chat-room-creator",function(e){var t;if((t=$(e.target)).hasClass("chat-room-creator"))return t.off(".chat-room-creator"),t.addClass("showing"),t.removeAttr("style")}),g.delay(function(){if(e.$el)return e.$el.height(n)},10)):e.$el.addClass("showing")}),100);var e},t.prototype.remove=function(){var e;return null!=(e=this.atwho)&&e.shutdown(),t.__super__.remove.apply(this,arguments)},t}()},tXB4VUxf:function(e,t,n){"use strict";n.r(t),n.d(t,"checkValidUniqueIdPrefixAsync",function(){return l});var r=n("mrSGxOB2"),o=n("tLZJUYWX"),i=n.n(o),s=n("s0r7VfKc"),a=n("90U+kJWN"),c=n("IssmDVnT"),l=function(e,t,n){return void 0===n&&(n={}),r.b(void 0,void 0,void 0,function(){var o,c,l;return r.e(this,function(r){switch(r.label){case 0:if(o=n.projectId,c=n.prevUniqueIdPrefix,!e||"string"!=typeof t)throw void 0;if((t=t.trim())===c)return[2,!1];if(0===t.length||!Object(a.checkValidUniqueIdPrefix)(t))throw void 0;return[4,s.default.fetch.checkUniqueIdPrefix(e,t,o).toPromise()];case 1:if(r.sent())throw l=i.a.get("powerups.taskUniqueId.dialog.hint.existant"),new Error(l);return[2,!0]}})})};c.SDKFetch.prototype.checkUniqueIdPrefix=function(e,t,n){var r="organizations/"+e+"/check-project-prefix-unique",o={prefix:t,_projectId:n};return this.get(r,o).map(function(e){return e.isDuplicated})}},tbvzLGsm:function(e,t,n){},tfIJglG0:function(e,t,n){},tgkvVaQb:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAABQCAMAAACpg44GAAAAvVBMVEUAAAAAAAAAgIAAVaoAgL8AgNUAn98AleoAnesAn+8AnvMAp+sAou4ApfAApfAAqfIApvIApvMAqfMDqPMDqPQDqPIDp/IDp/ICqPMCp/MCqPQCqfQCp/QCqPMCp/MCqPQCqPICqfICqPMCqPMDqPMDqfMDqPQDqPMDqPQDqfQCqPMCqfMCqfMCqPQCqfQCqfMCqfMCqfMCqPMCqfMCqfMCqfQCqPQCqfQDqfROwvdbx/eC1PmM1/mV2vr///+p/AKNAAAAOHRSTlMAAQIDBAYIDA0QFRoeIjM7PEJTVVthYmVtbnJzdH6AiY2OkqWwsbnEy8zR0tXf5+nq7O7v8Pn9/oauYS8AAAMaSURBVGje7ZpXb+JAFIVDCISEXkPoxVRjCGXwhc3y/3/WEq20GI/LlDMPK3EeDTp8wlNue3p6yJjeK93x3NkytnXm427lHWD5XGj0reVfz6XVbxSela0KA9ulO7n2oKBFl21ae/JpbzWzClaZ9ooCtWpnFOnStekx2PM4raXlvN56OwrVrvemgPfaWVOE1p1Xca9E/Ysi9VVPSOK9tLYUo23rRdAsN6NYzXJSfCWbBGSXhMyKGxGzTVEcLzVySUjuKBXv1mBiZqwhypdfkLAW+Riz5FDcbJgU4isfSEKHcjTfRMZsIkJYZSQlVo1yG8qZDeP5Po4kqeNHxPqTNYtdh1Vpvith6H9YZLJeLGYvlxkpiIWsw9xG3msTeR7mD6SkQ+BeTsxUvGYRd0pqQYpaBJ2HdTWvejjgiJQ1CogPQu/f8+WqU+i9HBo5lFx1QJe/9XqkBki9sPjAJg3Z/sghs1MF3IXEh62o34/xvKrls2urm7WD47+tHuDWFx+u1M1WgYAd0gOkzn3+oWMWlKek17qA67ssYKBjNggArJEuINW8fraOmR0AONUHnHrzX1fHzOXz5exRH/DoyUYremYVDvCT9AGpefPr6pl1OcAJAtC6+Y31zMZcfWOPANzfqiJzPbM5VzUhBKDn/HJ8n5y8+v4x+3X3yPd1Rzo0FwO8Bez+a+kSI/+15AfsYwD7/wyZHiDzA1oYQMsY4BIDuDT2ih3ut06nuHV94nmdUMOzV79/zL7vHsVtEj7UugiID7mMHTMMA8iMHdRwQPRVB3/F6GCB3yTnc9y65la2d22jwy34MYMOWOEHNTrkh1916KQJHiyg0054uIVO3OEBK7z0gQ754cUjdNIEL7+h0058AROcuONLwOjSB7yIji4e4dsQ4PIbvpGDLmDiW2HgEjC+mQguohtox4LbEAYa2thGjoGRAHArzMBQBbaZaGIsBduONTHYg21omxiNwo4EmBguww5VmBjPg46lGBF0sMeIsKNRRgQdLjMi6HieGSEHHA0JOSJqStnPCT9kO1EasjWmJG5M+aGHHvpf9Ad20EVLfrQy+AAAAABJRU5ErkJggg=="},"tjH8pC/R":function(e,t,n){e.exports={"link-item":"link-item__2qIs"}},tk919NOw:function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("qHH6+g6Q"),o=n("a2Z1fDJ7").sanitize,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="consumer",t.prototype.parse=function(e){var t;return null==e&&(e={}),"string"==typeof(t=Object.assign(this.toJSON(),e)).avatarUrl&&(t.avatarUrl=o(t.avatarUrl)),t},t.prototype.isEnabled=function(){return 1===this.get("status")},t.prototype.getPluginId=function(){return this.get("_pluginId")||this.get("_id")},t.prototype.getConsumerId=function(){return this.get("_consumerId")},t}()},tkPHaDUr:function(e,t,n){"use strict";n.r(t);var r=n("12XtBL+h");n.d(t,"TaskLocator",function(){return r.a}),n.d(t,"bootstrapTaskLocator",function(){return r.b}),n.d(t,"selectScenarioField",function(){return r.c})},"ts2I+BSf":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";if("list"===e.type){o+=' <ol class="breadcrumbs"> ';var i=e.breadcrumbs;if(i)for(var s=-1,a=i.length-1;s<a;)o+=" ",(l=i[s+=1]).id?(o+=' <li> <a class="breadcrumb-handler',s===e.breadcrumbs.length-1&&(o+=" active"),o+='" data-id="'+l.id+"\" data-gta=\"{action: 'open detail', type: 'folder', control: 'title'}\"> "+r(l.title)+" </a> </li> "):o+=' <li class="breadcrumb-title">'+r(l.title)+"</li> ",o+=" ";o+=" </ol>"}else{o+=' <div class="dropdown breadcrumbs-dropdown',e.open&&(o+=" open"),o+='"> <a class="breadcrumb-display" data-id="'+e.display.id+"\" data-gta=\"{action: 'open detail', type: 'folder', control: 'title'}\"> "+r(e.display.title)+' </a> <span data-toggle="dropdown" class="dropdown-caret icon icon-chevron-down"></span> <ul class="dropdown-menu" role="menu"> ';var c=e.breadcrumbs;if(c)for(var l,u=-1,p=c.length-1;u<p;)o+=' <li> <a class="breadcrumb-handler" data-id="'+(l=c[u+=1]).id+"\" data-gta=\"{action: 'open detail', type: 'folder', control: 'title'}\"> "+r(l.title)+" </a> </li> ";o+=" ",e.hasMore&&(o+=' <li> <a class="breadcrumb-more-handler"> '+tb_i18n.get("previewer.breadcrumbs.more")+" </a> </li> "),o+=" </ul> </div>"}return o}},"tupV5ip+":function(e,t,n){},tuwDRQZf:function(e,t,n){e.exports={"custom-text":"custom-text__2rHo"}},txsSAGGy:function(e,t,n){e.exports=function(e){var t,r,o="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),i="",s=n("QFl7Q1qw").invisibleNode;if(i+="<header> "+o(e.title)+"</header>",e.visibles.length>0){i+="<ul> ";var a=e.visibles;if(a)for(var c,l=-1,u=a.length-1;l<u;){i+=' <li class="link" data-id="'+(c=a[l+=1])._id+'" data-linkedid="'+c._linkedId+'"> <div class="link-head"> <div class="link-icon-wrap"> <span class="icon icon-calendar"></span> </div> <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main"> ';var p=c.data.title;if(i+=' <span class="title-name" title="'+o(p)+'"> '+o(p)+" </span> </div> ",c.data.project){i+=" ";var d=c.data.project.name;i+=' <div class="link-title-header-rest" title="'+o(d)+'"> '+o(d)+" </div> "}i+=' </div> <div class="link-title-footer"> <span>'+c.startDateString+" "+c.startTimeString+'</span> <span class="timeTo">-</span> <span>'+c.endDateString+" "+c.endTimeString+'</span> </div> </div> </div> <a class="link-menu-handler icon icon-chevron-down" data-id="'+c._id+'"></a> </li> '}i+="</ul>"}return i+=""+s(e)}},"u//1fy1x":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("TSYQbtd+"),a=n.n(s),c=n("a+N5u/Cl"),l=n.n(c);function u(e,t){var n;return(n=function(n){function o(){var e=null!==n&&n.apply(this,arguments)||this;return e.saveEl=function(t){e.el=t},e}return r.d(o,n),Object.defineProperty(o.prototype,"viewInstance",{get:function(){return this.viewRef},enumerable:!0,configurable:!0}),o.prototype.render=function(){var n=e.prototype,r=n.tagName,o=n.className,s=a()(o,this.props.className,t&&t(this.props));return i.a.createElement(r,{className:s,ref:this.saveEl})},o.prototype.componentDidMount=function(){this.el&&(this.viewRef=new e(r.a({el:this.el},l.a.omit(this.props,"children"))))},o.prototype.componentWillUnmount=function(){this.viewRef&&(this.viewRef.resetView(),this.viewRef.$el=this.viewRef.$el.clone(),this.viewRef.remove())},o}(i.a.PureComponent)).displayName=e&&e.name,n}},u6XknbFU:function(e,t,n){e.exports={"task-scenario":"task-scenario__1u7l"}},u79IRQJM:function(e,t,n){var r,o;o=n("OmupbwLD"),r=n("dJkP6FWJ"),t.open=function(e,t){return(new o).open(r,{link:e,title:t})}},uD1kTzXE:function(e,t,n){e.exports={"swim-grid":"swim-grid__3u5_","swim-grid-inner":"swim-grid-inner__3Bvb","swim-grid-controller":"swim-grid-controller__YCCu","swim-grid-container":"swim-grid-container__O4oK","swim-grid-content":"swim-grid-content__1I6_"}},uELMT0Ti:function(e,t,n){var r,o={}.hasOwnProperty;r=n("GsAQlUN+"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="EventConfirmRemoveMemberView",t.prototype.initialize=function(){var e,n,r;return t.__super__.initialize.apply(this,arguments),r=tb_i18n.get("event.confirm.removeMember.title"),n=tb_i18n.get("event.confirm.removeMember.description"),e=["current","next","all"],this.render({title:r,description:n,btns:e})},t}()},uGN8aFcU:function(e,t,n){var r,o,i,s,a,c,l,u=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty;o=n("vmWJWrVe"),c=n("HUhQ835W"),s=c.dispatchMountAction,a=c.dispatchUnmountAction,(l=n("fio7jWQ0")).addEpic,i=l.addUIReducer,r=n("77NnVLwu"),e.exports=function(e){function t(){return this.onOpenMemberCard=u(this.onOpenMemberCard,this),this.clearUnreadCount=u(this.clearUnreadCount,this),this.getParentView=u(this.getParentView,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="MiniOverview",t.prototype.className="mini-overview thin-scroll",t.prototype.initialize=function(e){return this.projectId=e.projectId,this.title=e.title,this.orgId=e.orgId,this.openMemberCardHandler=e.openMemberCardHandler,this.mountIn=e.mountIn,this.subscribe(r.fetch$(this.projectId).do((t=this,function(e){return t.projectModel=e,t.initView()})));var t},t.prototype.initView=function(){return n.e(6).then((e=this,function(t){var r,o;return r=(o=n("lSKi634H")).reducer,o.epic,e.MiniOverviewModal=n("Plxqv2QS").MiniOverviewModal,s({projectId:e.projectId}),i({projectOverview:r}),e.render()}).bind(null,n)).catch(n.oe);var e},t.prototype.getParentView=function(){return this.parentView},t.prototype.clearUnreadCount=function(){return this.projectModel.clearUnreadCount(),this},t.prototype.onOpenMemberCard=function(e,t){return this.openMemberCardHandler(this.projectId,e,t)},t.prototype.remove=function(){return a(),t.__super__.remove.apply(this,arguments)},t.prototype.render=function(){var e,t;return e=this.projectModel.hasPermission("put.info"),t=this.projectModel.hasPermission("organization.customfield.edit")&&this.projectModel.hasPermission("customfield.edit"),this.requestReactView(this.el,this.MiniOverviewModal,{projectId:this.projectId,projectTitle:this.title,canPostStatus:e,customFieldEdit:t,permission:!0,isSprintEnabled:this.projectModel.isSprintEnabled(),organizationId:this.orgId,getParentView:this.getParentView,clearUnreadCount:this.clearUnreadCount,onOpenMemberCard:this.onOpenMemberCard,mountIn:this.mountIn},{redux:!0})},t}()},uGcFUGYs:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m={}.hasOwnProperty;p=n("a+N5u/Cl"),d=n("sa1Ed382"),c=n("GESwhXbR").Toast,h=n("RQ44psah"),l=n("vmWJWrVe"),u=n("OmupbwLD"),s=n("nL4olqOP"),o=n("85182E8g"),i=n("KJFqng8l"),a=n("8iEkTkoU"),r=n("p3+KPrP0"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)m.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,l),t.prototype.viewName="OrganizationExcessView",t.prototype.className="organization-excess modal-dialog modal-padding",t.prototype.events={"click .close-handler":"handleCloseClick","click .jump-to-handler":"handleJumpToMemberManagementUrlClick","click .refresh-handler":"handleRefreshClick","click .tranfer-to-handler":"handleTransferClick","click .pay-to-handler":"handlePayClick","click .remove-to-handler":"handleRemoveClick"},t.prototype.initialize=function(e){var t;return this.organizationId=e.organizationId,this.onClose=null!=(t=e.onClose)?t:function(){},this.organizationModel=o.get(0).get(this.organizationId),this.render(),this.type=function(){switch(this.organizationModel.payment.type){case"org":return"enterprise";default:return"enterprise pro"}}.call(this),d.gta.event({action:"reach plan limit",control:"renew",organizationId:this.organizationId,type:this.type})},t.prototype.remove=function(){var e;return null!=(e=this.parentView)&&"function"==typeof e.close&&e.close(),t.__super__.remove.apply(this,arguments)},t.prototype.render=function(){return this.$el.html(r({organizationName:this.organizationModel.get("name")}))},t.prototype.handleCloseClick=function(){return this.onClose(),this.remove()},t.prototype.handleJumpToMemberManagementUrlClick=function(){var e;if(h=d.router.getUrl(),e="organization/"+d.PREFERENCE.get("lastWorkspace")+"/plugin/",!(h.indexOf(e)>-1))return d.router.navigateToMemberProfile(d.PREFERENCE.get("lastWorkspace")),d.gta.event({action:"view enterprise members",control:"renew",organizationId:this.organizationId,type:this.type}),this.handleCloseClick();this.handleCloseClick()},t.prototype.handleRefreshClick=function(){return location.reload()},t.prototype.handleTransferClick=function(){var e,t,n;if(e=null!=(t=o.find(0))?t.getOrganizationsByRight(2):void 0)return n=p.pluck(e,"id"),this.requestSubView(u).open(i,{sourceId:this.organizationModel.id,targetIds:n,action:"export"}),d.gta.event({action:"move out project",control:"renew",organizationId:this.organizationId,type:this.type})},t.prototype.handlePayClick=function(){return window.open(h.pay.orgAddMember(this.organizationModel.id)),d.gta.event({action:"view payment options",control:"renew",organizationId:this.organizationId,type:this.type})},t.prototype.handleRemoveClick=function(){var e;return e=this.organizationModel.escape("name"),this.requestSubView(u).open(a,{model:this.organizationModel,password:e,confirmPlaceholder:tb_i18n.get("organization.settings.delete.placeholder",e),title:tb_i18n.get("organization.settings.delete"),message:tb_i18n.get("organization.settings.delete.msg",e),success:function(){return s.get(0).fetch({reset:!0}),c.success(tb_i18n.get("organization.settings.delete.success")),d.router.navigate("projects",{trigger:!0})}}),d.gta.event({action:"delete content",control:"renew",organizationId:this.organizationId,type:"organization"})},t}()},uGvZvGGl:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l});var r=n("wd/RKGTj"),o=n.n(r),i=n("Z7XVTGXp"),s=function(e,t){return e?o()(e):t?o()(t):null},a=function(e,t){return e?o()(e):t?o()(t):null};function c(e,t,n,r,c){var l=null,u=null,p=Object(i.t)(e);return l=s(t,r),!t&&n&&(l=(a(n,c)||o()()).subtract(p)),u=a(n,c),t&&!n&&(u=(s(t,r)||o()()).add(p)),{startDate:l,endDate:u}}var l=function(e,t,n){return null!==e&&null!==t?Object(i.k)(e,t,n):0}},uGzReZHx:function(e,t,n){e.exports=n.p+"images/l_shangxin@2x.c927bc38.png"},uKLCz5zR:function(e,t,n){e.exports={"organization-member-item":"organization-member-item__2Spn","item-name":"item-name__24XK","item-avatar":"item-avatar__mlCR"}},uKNTIkse:function(e,t){e.exports=function(e){return'<div class="organization-banner-container"></div><div class="organization-content organization-wrap clearfix"> <div class="organization-workspace-section"> <div class="organization-tab-content"></div> </div></div>'}},uMV6vy0g:function(e,t,n){e.exports={"filter-trigger":"filter-trigger__2pCP","activity-panel":"activity-panel__1Q-g",header:"header__P1Gl","filter-option":"filter-option__2UKL",title:"title__1kXZ","event-plugin-handler":"event-plugin-handler__sBBz"}},uQN6Cr2k:function(e,t,n){var r,o,i,s,a,c,l,u,p,d=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};l=n("a+N5u/Cl"),i=n("Lj/ldHVx"),c=n("3eMzznN/"),p=n("pHAQicEC"),o=p.FileTypes,s=p.MAX_IMAGE_SIZE,a=p.SPECIAL_TYPE_WITH_PREVIEW,r=p.FILE_TYPE_WITH_PREVIEW,u={adb:"ada",ads:"ada",sh:"bash",clj:"clojure",cljs:"clojure",coffee:"coffeescript",cpp:"cpp",cs:"cs",css:"css",d:"d",dart:"dart",erl:"erlang",hrl:"erlang",hs:"haskell",lhs:"haskell",f:"fortran",for:"fortran",f90:"fortran",f95:"fortran",fs:"fsharp",fsi:"fsharp",fsx:"fsharp",fsscript:"fsharp",go:"go",groovy:"groovy",ini:"ini",java:"java",js:"javascript",json:"json",lisp:"lisp",lua:"lua",xml:"xml",m:"matlab",md:"markdown",h:"objectivec",mm:"objectivec",C:"objectivec",perl:"perl",php:"php",pl:"prolog",pro:"prolog",p:"prolog",py:"python",q:"q",r:"r",R:"r",RData:"r",rds:"r",rda:"r",ruby:"ruby",rs:"rust",rlib:"rust",scala:"scala",scm:"scheme",ss:"scheme",scss:"scss",swift:"swift",sql:"sql",vb:"vbnet",vbs:"vbscript",vbe:"vbscript",wsf:"vbscript",wsc:"vbscript",hta:"vbscript",vim:"vim"},t.downloadWork=function(e){var t;return(t=e.toJSON()).downloadUrl,null!=window.WebExtensionWin10&&"&filekey="+t.fileKey+"&workid="+t._id,c.downloadFile(t),this},t.getWorkData=function(e,t,n){var r;return!0===n?(r=e.getFormatData(),t&&(r=l.extend(r,t.getFormatData()))):(r=e.toJSON(),t&&(r=l.extend(r,t.toJSON()))),r.permissions=e.hasPermissions("get.download","put","put.move","put.version","put.archive","del"),r.isArchived=e.get("isArchived"),r},t.parseUrlExt=function(e){var t;return e&&(t=(t=e.replace(/(\?|#).*$/,"").replace(/^.*\//,"")).match(/\.(\w+)$/))?t[1]:""},t.isSupportLangType=function(e){var t;return t=u[e],d.call(i.listLanguages(),t)>=0},t.isProperType=function(e){var t,n,r,i,s;return n=e.fileName,r=null!=(s=e.fileType)?s.toLowerCase():void 0,(i=n.split(".")).length>1&&(t=i.pop().toLowerCase()),t&&(r===t||r===o[t])},t.isImageWithPreview=function(e){var t,n,o,i;return o=e.fileType,t=e.fileCategory,n=e.fileSize,i=e.previewUrl,"image"===t&&n<s||a.indexOf(o)>=0||r.indexOf(o)>=0&&i}},uQmYGniC:function(e,t,n){e.exports={"cell-hook":"cell-hook__2cCN","cell-hook__checkbox":"cell-hook__checkbox__3ooV","cell-hook__checkbox--disabled":"cell-hook__checkbox--disabled__3smV","cell-hook__index":"cell-hook__index__HprH",short:"short__2XHY"}},uW4wTxs2:function(e,t,n){"use strict";n.r(t),n.d(t,"OrganizationNotFound",function(){return f});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("GESwhXbR"),a=n("tLZJUYWX"),c=n.n(a),l=n("sa1Ed382"),u=n("2qRnoGmE"),p=n.n(u),d=n("NtzEC3Pa"),h=n("BBUbNOFr"),m=n.n(h),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){Object(d.openOrganizationCreator)("Fallback"),l.gta.event({action:"enter fallback",page:"Choose Enterprise Page"})},t}return r.d(t,e),t.prototype.renderCreatorBtn=function(){return p.a.FEATURES.newOrganization?i.a.createElement(s.Button,{onClick:this.handleClick},c.a.get("create.organization")):null},t.prototype.render=function(){return i.a.createElement("section",{className:m.a["not-found"]},i.a.createElement("div",{className:m.a.img}),i.a.createElement("p",null,c.a.get("org.not.found.hint")),i.a.createElement("p",null,c.a.get("org.not.found.reason")),i.a.createElement("p",null,c.a.get("org.not.found.join.guide")),this.renderCreatorBtn())},t}(o.PureComponent)},uZGFX7kQ:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty;n("9D5xdHW1"),d=n("a+N5u/Cl"),r=n("+2RfZ2TT"),h=n("sa1Ed382"),o=n("wd/RKGTj"),p=n("vmWJWrVe"),u=n("3eMzznN/"),c=n("ymFCWmUp"),s=n("BLZfz376"),a=n("YdqH4v7N"),i=n("SzPjtQAa"),l=function(e){function t(){return this.searchItem=m(this.searchItem,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)f.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,p),t.prototype.viewName="StatisticsView",t.prototype.className="statistics-view",t.prototype.routes={project:"projectsTab",member:"membersTab"},t.prototype.events={"click .tab.projects":"projectsTab","click .tab.members":"membersTab","click .enter-project":"enterProject","click .enter-member":"showMemberOverall","click [role=menuitem]":"filter","input [type=search]":"search","focus [type=search]":"search","click [type=search]":"search","keydown [type=search]":"itemSelect","mousewheel .dropdown-menu":u.mousewheel},t.prototype.initialize=function(e){var t,a,c,l;if(e.organizationModel)return this.organization=e.organizationModel,t=o(this.organization.get("created")),a=o().subtract(7,"day"),this.tab=e.tab?e.tab:"project",c=h.router.getUrl().split("/"),this.currentUrlTab=c[c.length-1],this.membersHasMore=this.projectsHasMore=!0,this.membersPage=this.projectsPage=1,n.e(31).then((l=this,function(e){return l.D3chart=n("bIMexTcE"),l.StatisticsSearchView=n("8GqU6GMf"),l.ChartsTemplate=n("eE+ue2VW"),l.MembersHeaderTemplate=n("vwEdgQF7"),l.MembersDataTemplate=n("xF8UcL+L"),l.MembersItemTemplate=n("y/YXLO2e"),l.ProjectsHeaderTemplate=n("qSpmxvWK"),l.ProjectsDataTemplate=n("p3EJvOyu"),l.ProjectsItemTemplate=n("5PGkX/a3"),l.setupScroll(r(".organization-content")),t.isAfter(a)?l.$el.html(l.requestSubView(i,{organization:l.organization,type:"statistics",header:{title:tb_i18n.get("organization.statistics.blank.title"),description:tb_i18n.get("organization.statistics.blank.description")}}).$el):(l.organization.fetchChartsData({success:function(e){return l.renderCharts(e),Promise.all([l.organization.fetchGroupsData({success:function(e){return l.groupsData=d.filter(e,function(e){return"default"!==e.type})}}),s.fetchByOrganizationId(l.organization.id).then(function(e){return l.projectTagsCollection=e})]).then(function(){return l.enterTab()})}}),l.organization.fetchProjects({success:function(e){return l.projects=d.map(e,function(e){return{id:e._id,name:e.name,pinyin:e.pinyin,py:e.py,avatar:e.logo,type:"project"}})}}),l.organization.fetchMembers({success:function(e){return l.members=d.map(e,function(e){return{id:e._userId,name:e.name,pinyin:e.pinyin,py:e.py,avatar:e.avatarUrl,type:"member"}})}}))}).bind(null,n)).catch(n.oe),this},t.prototype.enterTab=function(){switch(this.currentUrlTab){case"project":this.projectsTab();break;case"member":this.membersTab()}return this},t.prototype.projectsTab=function(){var e;return this.projectsPage=1,this.projectType="delay",this.tag="all","project"!==this.currentUrlTab&&(this.currentUrlTab="project",this.updateUrl()),null!=(e=this.statisticsSearchView)&&e.remove(),this.renderProjectsHeader(),this.renderProjectsData(),this.enableTheadFloating(),h.gta.event({action:"switch dashboard tab",type:"projects"}),this},t.prototype.membersTab=function(){var e;return this.membersPage=1,this.memberType="delay",this.team="all","member"!==this.currentUrlTab&&(this.currentUrlTab="member",this.updateUrl()),null!=(e=this.statisticsSearchView)&&e.remove(),this.renderMembersHeader(),this.renderMembersData(),this.enableTheadFloating(),h.gta.event({action:"switch dashboard tab",type:"members"}),this},t.prototype.renderCharts=function(e){var t,n,r,o,i,s;return o=d.map(e.projectCounts,function(e){return e||0}),r=d.map(e.memberCounts,function(e){return e||0}),t=d.map(e.activenessCounts,function(e){return e||0}),e.projectsNow=o.slice(-1)[0],e.projectOffset=e.projectsNow-o.slice(-2)[0],e.projectIsRise=e.projectOffset>=0,e.projectOffset=Math.abs(e.projectOffset),e.membersNow=r.slice(-1)[0],e.memberOffset=e.membersNow-r.slice(-2)[0],e.memberIsRise=e.memberOffset>=0,e.memberOffset=Math.abs(e.memberOffset),e.activenessNow=t.slice(-1)[0],e.activenessOffset=e.activenessNow-t.slice(-2)[0],e.activenessIsRise=e.activenessOffset>=0,e.activenessOffset=Math.abs(e.activenessOffset),this.$el.html(this.ChartsTemplate(e)),s=this,i=function(){return d.delay(function(){return s.chartsData([{data:o,isRise:e.projectIsRise,getText:function(e){var t,n,r;return r=(n=s.getDate(e.x,o.length))[0],t=n[1],[""+r+tb_i18n.get("organization.statistics.year")+t+tb_i18n.get("organization.statistics.month"),e.y+" "+tb_i18n.get("organization.statistics.projectsAmount")]}},{data:r,isRise:e.memberIsRise,getText:function(e){var t,n,o;return o=(n=s.getDate(e.x,r.length))[0],t=n[1],[""+o+tb_i18n.get("organization.statistics.year")+t+tb_i18n.get("organization.statistics.month"),e.y+" "+tb_i18n.get("organization.statistics.membersAmount")]}},{data:t,isRise:e.activenessIsRise,getText:function(e){var n,r,o,i,a;return r=(a=s.getPeriod(e.x,t.length))[0],n=a[1],i=a[2],o=a[3],[""+r+tb_i18n.get("organization.statistics.monthShow")+n+" ~ "+i+tb_i18n.get("organization.statistics.monthShow")+o,tb_i18n.get("organization.statistics.activeness")+" "+e.y]}}])},300)},n=d.debounce(i,100),window.addEventListener("resize",function(){return n()}),n(),this},t.prototype.getDate=function(e,t){var n;return(n=new o).subtract(t-e,"month"),[n.year(),n.month()+1]},t.prototype.getPeriod=function(e,t){var n,r,i;return n=new o,r=new o,i=t-e,n.startOf("week").subtract(7*(i+1),"day"),r.startOf("week").subtract(7*i+1,"day"),[n.month()+1,n.date(),r.month()+1,r.date()]},t.prototype.chartsData=function(e){var t;return d.each(e,(t=this,function(e,n){var o,i,s,a,c,l;if(o=d.map(e.data,function(e,t){return{x:t+1,y:e}}),s=2*d.max(e.data),e.isRise?(a="#7ed321",c="#c2ea93",l="#f4fbed"):(a="#efbb4d",c="#faec89",l="#fdf3e0"),i=t.D3chart(o,{width:function(){switch(!0){case r(window).width()>=1200:return 356;case r(window).width()<1200:return 304}}(),height:85,minY:0,maxY:s,stroke:a,strokeBegin:c,strokeEnd:l,getText:e.getText}))return t.$(".chart").eq(n).html(i)})),this},t.prototype.renderMembersHeader=function(){return this.$(".statistics-content").html(this.MembersHeaderTemplate(this.groupsData)),this},t.prototype.renderMembersData=function(e,t){var n;return e||(e={}),t||(t=!1),this.organization.fetchMembersData(e,{success:(n=this,function(e){if("member"===n.currentUrlTab)return n.membersHasMore=e.hasMore,n.addExtraData(e,"member"),t?(n.$(".loading-indicator-wrap").empty(),n.showLoadingIndicator(n.$(".loading-indicator-wrap")),d.delay(function(){return n.hideLoadingIndicator(n.$(".loading-indicator-wrap")),n.$(".data-content tbody").append(n.MembersItemTemplate(e))},300)):(n.$(".statistics-table").html(""),n.showLoadingIndicator(n.$(".statistics-table")),d.delay(function(){return n.$(".statistics-table").html(n.MembersDataTemplate(e)),n.$(".data-content tbody").append(n.MembersItemTemplate(e))},300))})}),this},t.prototype.renderMemberData=function(e){return this.organization.fetchMember(e,{success:(t=this,function(e){return e={data:[e]},t.addExtraData(e,"member"),t.$(".data-content tbody").html(t.MembersItemTemplate(e))})});var t},t.prototype.renderProjectsHeader=function(){var e;return e=d.chain(this.projectTagsCollection.getSortedOrganizationProjectTagModelsByPos(this.organization.id)).map(function(e){return e.toJSON()}).value(),this.$(".statistics-content").html(this.ProjectsHeaderTemplate({projectTags:e})),this},t.prototype.renderProjectsData=function(e,t){var n;return e||(e={}),t||(t=!1),this.organization.fetchProjectsData(e,{success:(n=this,function(e){if("project"===n.currentUrlTab)return n.projectsHasMore=e.hasMore,n.addExtraData(e,"project"),t?(n.$(".loading-indicator-wrap").empty(),n.showLoadingIndicator(n.$(".loading-indicator-wrap")),d.delay(function(){return n.hideLoadingIndicator(n.$(".loading-indicator-wrap")),n.$(".data-content tbody").append(n.ProjectsItemTemplate(e))},300)):(n.$(".statistics-table").html(""),n.showLoadingIndicator(n.$(".statistics-table")),d.delay(function(){return n.$(".statistics-table").html(n.ProjectsDataTemplate(e)),n.$(".data-content tbody").append(n.ProjectsItemTemplate(e))},300))})}),this},t.prototype.renderProjectData=function(e){return this.organization.fetchProject(e,{success:(t=this,function(e){return e={data:[e]},t.addExtraData(e,"project"),t.$(".data-content tbody").html(t.ProjectsItemTemplate(e))})});var t},t.prototype.addExtraData=function(e,t){return d.each(e.data,function(e){var n,r,o,i,s,a,c;if(c=e.unworkingTasksCount+e.workingTasksCount+e.delayTasksCount){switch(a=100-(i=Math.floor(e.unworkingTasksCount/c*100))-(s=Math.ceil(e.workingTasksCount/c*100)),t){case"member":n=50,r=5;break;case"project":n=200,r=20}return o=c>=n?100:c>r?25+Math.floor(75*(c-r)/(n-r)):25,e.rate1=i+"%",e.rate2=s+"%",e.rate3=a+"%",e.barWidth=o+"%"}return e.barWidth=e.rate1=e.rate2=e.rate3="0%"}),this},t.prototype.enableTheadFloating=function(){},t.prototype.filter=function(e){var t,n,o,i;switch(e?(t=r(e.currentTarget),this.currentUrlTab=t.data("tab")||this.currentUrlTab,n=t.data("filter"),this.$("."+n+" .icon-tick").addClass("hide"),t.find(".icon-tick").removeClass("hide"),o=t.find(".filter-value").html().trim()):t=r("div"),this.currentUrlTab){case"member":this.membersPage=1,this.memberType=t.data("type")||this.memberType,this.team=t.data("team")||this.team,i={},this.memberType&&(i.type=this.memberType),this.team&&(i.team=this.team),this.renderMembersData(i),t.data("type")&&this.$("#filter-member-type").html(o),t.data("team")&&this.$("#filter-member-team").html(o);break;case"project":this.projectsPage=1,this.projectType=t.data("type")||this.projectType,this.tag=t.data("tag")||this.tag,i={},this.projectType&&(i.type=this.projectType),"all"!==this.tag&&(i._projecttagId=this.tag),this.renderProjectsData(i),t.data("tag")&&this.$("#filter-project-tag").html(o),t.data("type")&&this.$("#filter-project-type").html(o)}return this},t.prototype.enterProject=function(e){var t;return t=r(e.currentTarget).data("id"),h.router.navigate("project/"+t,{trigger:!0})},t.prototype.showMemberOverall=function(e){var t;return t=r(e.currentTarget).data("id"),h.router.navigateToMemberProfile(this.organization.id,t)},t.prototype.search=function(e){var t,n;if(t=r(e.currentTarget).val().trim().replace(/\/|\\/g,"")){switch(this.currentUrlTab){case"member":n=c.objectsFilter(this.members,t);break;case"project":n=c.objectsFilter(this.projects,t)}this.membersHasMore=this.projectsHasMore=!1,this.renderSearch(n)}else this.closeSearch(),this.searched&&(this.filter(),this.searched=!1);return this},t.prototype.renderSearch=function(e){var t;return null!=(t=this.statisticsSearchView)&&t.remove(),this.statisticsSearchView=this.requestSubView(this.StatisticsSearchView,{hideDelay:0,$toggler:this.$("[type=search]"),set:e,searchItem:this.searchItem}).show(),this},t.prototype.searchItem=function(e,t){switch(this.closeSearch(),e){case"member":this.renderMemberData(t);break;case"project":this.renderProjectData(t)}return this.searched=!0,this},t.prototype.closeSearch=function(){var e;return null!=(e=this.statisticsSearchView)&&e.remove(),this},t.prototype.loadMore=function(e){var t;switch("function"==typeof e&&e(),this.currentUrlTab){case"member":if(!this.membersHasMore)return;t={},this.memberType&&(t.type=this.memberType),this.team&&(t.team=this.team),t.page=++this.membersPage,this.renderMembersData(t,!0);break;case"project":if(!this.projectsHasMore)return;t={},this.projectType&&(t.type=this.projectType),"all"!==this.tag&&(t._projecttagId=this.tag),t.page=++this.projectsPage,this.renderProjectsData(t,!0)}return this},t.prototype.itemSelect=function(e){var t,n;if(!(null!=(t=this.statisticsSearchView)?t.$el:void 0))return this;switch(13!==(n=e.keyCode)&&38!==n&&40!==n||e.preventDefault(),e.keyCode){case 13:this.statisticsSearchView.getSelected().click();break;case 38:this.statisticsSearchView.selectSwitch("up");break;case 40:this.statisticsSearchView.selectSwitch("down")}return this},t.prototype.updateUrl=function(){var e;return e="/organization/"+this.organization.id+"/statistics/"+this.currentUrlTab,h.router.navigate(e,{trigger:!1}),this},t.prototype.remove=function(){return t.__super__.remove.apply(this,arguments)},t}(),d.extend(l.prototype,a),e.exports=l},"uaT+k2Om":function(e,t,n){"use strict";n.r(t),n.d(t,"switchWidthHeightByOTag",function(){return h}),n.d(t,"switchWidthHeightByDegree",function(){return m}),n.d(t,"orientationCorrected",function(){return f}),n.d(t,"rotateDraw",function(){return g}),n.d(t,"subCanvasPosition",function(){return v});var r=n("mrSGxOB2"),o=n("a+N5u/Cl");function i(e){return e*Math.PI/180}var s=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return{cmd:e,args:t}},a="doMirror",c="doRotate",l=s.bind(null,a),u=s.bind(null,c),p=s.bind(null,"doTranslate");function d(e,t,n){switch(e){case 2:return[l(),p(-t,0)];case 3:return[u(180),p(-t,-n)];case 4:return[l(),u(180),p(0,-n)];case 5:return[l(),u(90)];case 6:return[u(90),p(0,-n)];case 7:return[l(),u(-90),p(-t,-n)];case 8:return[u(270),p(-t,0)];default:return[]}}function h(e,t,n){switch(e){case 5:case 6:case 7:case 8:return[n,t];default:return[t,n]}}function m(e,t,n){return e%90?[t,n]:e%180?[n,t]:[t,n]}function f(e,t){var n,o=document.createElement("CANVAS");return n=r.f(h(e,t.width,t.height),2),o.width=n[0],o.height=n[1],function(e,t,n,o){var s=o.width,a=o.height,c={doMirror:function(e){return e.scale(-1,1)},doRotate:function(e,t){return e.rotate(i(t))},doTranslate:function(e,t,n){return e.translate(t,n)}},l=d(n,s,a);e.save(),l.forEach(function(t){c[t.cmd].apply(void 0,r.h([e],t.args))}),e.drawImage(t,0,0,s,a),e.restore()}(o.getContext("2d"),t,e,{width:t.width,height:t.height}),o}function g(e,t,n,r){var o=r.width,s=r.height;switch(e.save(),e.rotate(i(n)),n){case 90:e.translate(0,-s);break;case 180:e.translate(-o,-s);break;case 270:e.translate(-o,0)}e.drawImage(t,0,0,o,s),e.restore()}function v(e,t,n){var i=function(e){var t=e.map(function(e){var t=r.f(e,2),n=t[0];return[-t[1],n]}),n=t.shift();return t.push(n),t},s=function(e,t){for(var n=e;t>=90&&t%90==0;)n=i(n),t-=90;return n},l=function(e){var t=e.map(function(e){var t=r.f(e,2);return[-t[0],t[1]]});return t.reverse(),t};return function(i,u,p,h){var m,f,g,v,b,y,k,_,w=(m=u,f=p,g=h,v=r.f(m,2),b=v[0],y=v[1],[[b,y],[b,y-(_=t-g)],[b-(k=e-f),y-_],[b-k,y]]);return n&&(w=function(e){var t=function(e){return e.cmd===a},r=function(e){return e.cmd===c},i=function(e){var n=o.findIndex(e,t),i=o.findIndex(e,r);return-1===n?-1===i?[]:[e[i]]:i<=n?[e[n]]:[e[n],e[i]]}(d(n));switch(i.length){case 1:e=t(i[0])?l(e):s(e,i[0].args[0]);break;case 2:e=l(e),e=s(e,360-i[1].args[0])}return e}(w)),(w=s(w,i))[0]}}},udYBhtYc:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;s=n("sa1Ed382"),i=n("wu4EEviu"),r=n("VuB9cZyl"),o=n("E86Oiqt3"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.model=o,t.prototype.boundToObjectType="parent",t.prototype.name="collections",t.prototype.pageNum=50,t.prototype.orderBy=null,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listen()},t.prototype.listen=function(){var e;return t.__super__.listen.apply(this,arguments),this._boundToObjectId&&this.listenTo(s.PREFERENCE,"change:libraryOrder",function(){return this.reset(),this.hasMore=!0}),this.on("change:_parentId",(e=this,function(t){return e.remove(t.id)})),i.on("all",function(e){return function(t,n){var r,i,s;if((s=null!=n?n._parentId:void 0)&&(r=null!=(i=/\:change\:collection\/(\w{24})/.exec(t))?i[1]:void 0))return e._boundToObjectId!==s||e.get(r)?void 0:o.fetch(r,{success:function(t){return e.add(t)}})}}(this))},t.prototype.excludeDefaults=function(){return this.filter(function(e){return!e.isDefault()})},t}()},uhCh73nO:function(e,t){e.exports=function(e){var t='<a class=" subtask-add-handler ';return e.isArchived||!e.hasPermission?t+=" ban ":e.isDone&&(t+=" ban hinted "),t+=' " ',e.isDone&&(t+='data-title="'+tb_i18n.get("subtask.can.not.create")+'"'),t+='> <span class="icon icon-plus-s"></span> <span>'+tb_i18n.get("subtask.card.create.placeholder")+"</span></a>"}},uivNXqU4:function(e,t,n){},ul6V2LJL:function(e,t,n){e.exports={"main-view":"main-view__11zO",wrapper:"wrapper__1a-h"}},ulhxSeMn:function(e,t,n){e.exports={"bulk-action__trigger":"bulk-action__trigger__3A8M","task-bulk-move-or-fork__trigger":"task-bulk-move-or-fork__trigger__1S-a","bulk-action__trigger--disabled":"bulk-action__trigger--disabled__3sw-","task-bulk-move-or-fork__trigger--disabled":"task-bulk-move-or-fork__trigger--disabled__1Clt","bulk-action__trigger-text":"bulk-action__trigger-text__AGBx","task-bulk-move-or-fork__trigger-text":"task-bulk-move-or-fork__trigger-text__3fH_","bulk-action__trigger-icon":"bulk-action__trigger-icon__ef-n","task-bulk-move-or-fork__trigger-icon":"task-bulk-move-or-fork__trigger-icon__2V64",popup__head:"popup__head__3baA","task-bulk-move-or-fork__head":"task-bulk-move-or-fork__head__2Ycw",popup__body:"popup__body__2-7x","task-bulk-move-or-fork__wrapper":"task-bulk-move-or-fork__wrapper__3Ams"}},ullmsLUN:function(e,t,n){e.exports=n.p+"images/w_yueliang@2x.f261f0db.png"},urgRemqh:function(e,t,n){e.exports={"table-body":"table-body__2oZv","table-body-testplan":"table-body-testplan__3JxU",placeholder:"placeholder__3zvx","list-in-popup-menu":"list-in-popup-menu__3R4c"}},usVkIs8Q:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k={}.hasOwnProperty;f=n("a+N5u/Cl"),b=n("sa1Ed382"),u=n("YdqH4v7N"),h=n("3eMzznN/"),m=n("vmWJWrVe"),d=n("GESwhXbR").Toast,p=n("5V57DkyA").TaskDetailApm,a=n("cDm32Cmn"),r=n("++xunwor"),c=n("odY26VIi"),l=n("77NnVLwu"),i=n("IaMT81lr"),s=n("Mwyl/DAu"),v=n("ThSbgwXN").scrollIntoViewSmoothly,y=n("gh8QIhMV").throwError,g=function(e){var t;return(null!=e&&null!=(t=e.get("action"))?t.indexOf("activity.comment"):void 0)>=0},o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)k.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,m),t.prototype.viewName="ActivityTimelineView",t.prototype.tagName="div",t.prototype.className="activities-timeline",t.prototype.events={"click .tab-handler":"switchTabs","click .reply-activity-handler":"quickReplyMention","click .add-involve":"addInvolve","click .add-member-involve":"addMemberInvolve","click .activity-early-handler":"switchHasMore"},t.prototype.initialize=function(e){return!(!e.objectModel||!e.boundToObjectType)&&(this.options=e,this.fetchUrl=e.fetchUrl,this._projectId=e._projectId,this.objectModel=e.objectModel,this.canInviteMember=void 0===e.canInviteMember||!!e.canInviteMember,this.hideAllProjectMembers=e.hideAllProjectMembers,this.hasMore=!0,this.showInvolvers=void 0===e.showInvolvers||!!e.showInvolvers,this.renderBasic(),this.setupScroll($(this.options.scrollFrameEl||this.el)),h.promiseChain((t=this,function(){return!t.el}))(function(e){return function(){return e.load()}}(this),function(t){return function(){return t.renderActivities(),t.listen(),"function"==typeof e.success&&e.success(t),e.scrollToBottom&&f.delay(function(){if(t.$el)return t.scrollToBottom()},500),p.measureEnd()}}(this)).catch(function(e){return y(e)}),this);var t},t.prototype.load=function(){var e,t;return e=this.objectModel.id.split("_")[0],this.showLoadingIndicator(this.$activitiesList,{isPrepend:!0}),h.promiseChain((t=this,function(){return!t.el}))(function(e){return function(){return e._projectId?l.resolveFetch(e._projectId):Promise.resolve()}}(this),function(e){return function(t){e.projectModel=t}}(this),function(t){return function(){var n,o;return n=h.warehouse.resolveFetch(r,e,{fetchUrl:t.fetchUrl,boundToObjectType:t.options.boundToObjectType}),o=t.objectModel.getRoleScope()<-1?null:t._projectId?c.fetch$(t._projectId).toPromise():Promise.resolve(),Promise.all([n,o])}}(this),function(e){return function(t){return e.collection=t[0],t[1]}}(this),function(e){return function(t){return e.membersCollection=t,e.hideLoadingIndicator()}}(this))},t.prototype.listen=function(){var e;return this.listenTo(this.collection,"add",(e=this,function(t){var n,r,o;if(n=e.isScrollToBottom(t),t.get("isGuest")&&null!=(r=e.options.activityPanelContext)&&null!=(o=r.activityCreatorView)&&o.introduceGuest(t.get("creator")),e.renderActivity(t,e.collection.at(e.collection.length-2)),n)return e.scrollToBottom()})),this.listenTo(this,"filter",this.filterActivities),this},t.prototype.renderBasic=function(){return this.$el.html(s({user:b.user.toJSON()})),this.$activitiesList=this.$(".activities-list"),this.$activitiesPlaceholder=this.$(".activities-placeholder"),this},t.prototype.renderEarlyHandler=function(){var e;if(e=this.calculateRestCount(),this.$el.removeClass("early-hidden early-shown early-loading"),this.$(".activity-early-hidden").text(tb_i18n.get("activity.early.hidden",e)),this.$el.addClass(this.hasMore?"early-hidden":"early-shown"),e||this.$el.removeClass("early-hidden"),this.flag)return this.$el.removeClass("early-hidden early-shown")},t.prototype.renderActivities=function(){var e,t;return null!=(e=this.$activitiesList)&&e.empty(),this.collection.sort(),this.renderEarlyHandler(),this.calculateActivities().forEach((t=this,function(e){return t.renderActivity(e)})),this.flag&&0===this.$activitiesList.children(":visible").length?this.$activitiesPlaceholder.removeClass("hidden"):this.$activitiesPlaceholder.addClass("hidden"),this},t.prototype.renderActivity=function(e){return e?(this.requestSubView(i,{activityModel:e,projectModel:this.projectModel,_projectId:this.options._projectId,objectModel:this.objectModel,jumpToSkitch:this.options.jumpToSkitch}).$el.appendTo(this.$activitiesList),this):this},t.prototype.quickReplyMention=function(e){var t,n,r,o,i,s,c,l,u,p,d,h;if(i=null!=(h=this.options.activityPanelContext)?h.activityCreatorView:void 0){if(s=(t=$(e.currentTarget)).closest(".activity").data("id"),r=null!=(c=this.collection.get(s))?c.get("creator"):void 0,o=null!=c?c.get("_creatorId"):void 0,"guest"===t.closest(".reply-activity-handler").data("member-type")){if(u=o,p=null!=c?c.get("content").creator:void 0,!u||!p)return;d=new a({_id:u,name:p},{bindByMatrix:!1})}else d=new a(r);if(d)return l=(n=i.$textareaset).val(),i.checkIsAlreadyAt(d.get("_id"))?n.val(l):(n.val(l+" @"+d.get("name")+" "),"function"==typeof i.selectAt&&i.selectAt(d.get("_id"),d.toJSON())),n.focusAtEnd(),this}},t.prototype.addInvolve=function(){var e;if(this.involve)return e=f.uniq(this.objectModel.get("involveMembers").slice().concat(f.keys(this.involve))),this.objectModel.saveAttr("involveMembers",e),this.$(".involve-tip-wrap").empty(),this.setAtTipsGta("addInvolve"),this},t.prototype.addMemberInvolve=function(){var e,t,n;if(this._projectId&&this.membersCollection&&this.member)return e=Object.keys(this.member),t=new c([],{_boundToObjectId:this.projectModel.get("_organizationId"),boundToObjectType:"organization"}),new Promise(function(n,r){return t.fetchMembers(e,{success:n,error:r})}).then((n=this,function(e){var t;return t=f.chain(e||[]).filter(function(e){return f.has(n.member,e._userId)}).map(function(e){return e.email}).value(),new Promise(function(e,r){return n.membersCollection.addMember({email:t},{success:function(){return d.success({message:tb_i18n.get("activity.invisiblea.addmember.success")}),n.$(".member-tip-wrap").empty(),e()},error:r})})})).then(function(e){return function(){var t;return t=f.keys(e.member),e.objectModel.saveAttr("involveMembers",null,{attrs:{addInvolvers:t}}),e.$(".member-tip-wrap").empty(),e.setAtTipsGta("addProjectMembers"),e.setAtTipsGta("addInvolve")}}(this)).catch(function(e){return y(e)}),this},t.prototype.setAtTipsGta=function(e){var t,n;return t="addInvolve"===e?"set followers":"added member",n=this.tipTypeVisible?"visible for all":"only visible for followers",b.gta.event({action:t,category:n,control:"comment"})},t.prototype.filterActivities=function(e){var t,n;return n=["on-only-comments","on-only-attachments"],t=this.$el.removeClass(n.join(" ")),e.isOnlyComments&&t.addClass(n[0]),e.isOnlyAttachments&&t.addClass(n[1]),this.flag=e.isOnlyComments||e.isOnlyAttachments,this.renderActivities(),this},t.prototype.scrollToBottom=function(){var e;return f.delay((e=this,function(){return v(e.$(".activities-place-bottom").get(0),{behavior:"smooth",block:"bottom"})})),this},t.prototype.isScrollToBottom=function(e){var t,n;return n=!1,g(e)&&e.get("_creatorId")===b.user.id&&(n=!0),g(e)&&!n&&(t=this.$scrollFrame,n=this.$(".activities-place-bottom").offset().top-(t.offset().top+t.height())<100),n},t.prototype.switchHasMore=function(){var e,t,n,r;if(r=this.$scrollFrame.scrollTop(),n=this.$scrollFrame.get(0).scrollHeight,this.hasMore=!this.hasMore,this.renderActivities(),!this.hasMore)return e=n-r,t=this.$scrollFrame.get(0).scrollHeight-e,this.$scrollFrame.scrollTop(t)},t.prototype.calculateActivities=function(){var e;return(e=this.calculateRestCount())?this.collection.models.slice(e-this.collection.length):this.collection.models},t.prototype.calculateRestCount=function(){return!this.flag&&this.hasMore&&this.collection.length>5?this.collection.length-5:0},t.prototype.remove=function(){var e;return null!=(e=this.$activityCreator)&&e.off(".activity"),t.__super__.remove.apply(this,arguments)},t}(),f.extend(o.prototype,u),t.Constructor=o},utxrlEy1:function(e,t,n){e.exports=n.p+"images/add-chat-no-member@2x.0afd83fd.png"},uuGB3tC8:function(e,t,n){"use strict";n.r(t),n.d(t,"CopyLimit",function(){return h});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("sa1Ed382"),l=n("GESwhXbR"),u=n("80gYlwjC"),p=n("ln9RsXX9"),d=n("NtzEC3Pa"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openToast=function(){var e=t.props,n=e.organizationId,r=e.taskflowProjectsLength,o=n||c.user.id,s=Object(p.paywallUrl)(u.PlanType.Wildcard,d.FeatureType.UpgradeToPro,o),h=n?a.a.get("project.copy.taskflow.limit.title.organization",r):a.a.get("project.copy.taskflow.limit.title",r);l.Toast.error({message:i.a.createElement("p",null,i.a.createElement("span",null,h),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",null,a.a.get("project.copy.taskflow.limit.content")),i.a.createElement("br",null),i.a.createElement("span",{className:"link-add-handler",style:{cursor:"pointer"},"data-pay":s},a.a.get("project.copy.taskflow.limit.upgrade")))})},t}return r.d(t,e),t.prototype.componentDidMount=function(){this.openToast()},t.prototype.render=function(){return null},t}(i.a.PureComponent)},uxrOLOjG:function(e,t,n){e.exports={"task-checkbox-item":"task-checkbox-item__3UpW","task-checkbox":"task-checkbox__2i0a",title:"title__2Tow"}},"v/MBtkV8":function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("sa1Ed382"),o=n("FoX6irlC"),r=n("BTjUFA4g"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.viewName="TaskFieldConfigView",t.prototype.className="task-field-config-view",t.prototype.initialize=function(e){return this.projectModel=e.projectModel,this._tasklistId=e._tasklistId,this.onRemove=e.onRemove,this._parentModelConfigId=e._parentModelConfigId,this._configId=e._configId,this._taskflowstatusId=e._taskflowstatusId,this.isSubtask=e.isSubtask,this.boundToObjectType="task",this.tasklistModel=null,t.__super__.initialize.apply(this,arguments)},t.prototype.requestApplicationFieldsConfig=function(){return t.__super__.requestApplicationFieldsConfig.apply(this,arguments),this.gtaHandler("start to configurate task type")},t.prototype.getDefaultConfig=function(){var e,t,n;return(e=this._configId||this._parentModelConfigId||(null!=(n=this.tasklistModel)?n.get("_defaultScenariofieldconfigId"):void 0))&&(t=this.scenarioFieldConfigsCollection.get(e)),t||(t=this.scenarioFieldConfigsCollection.at(0)),t},t.prototype.setDefaultConfig=function(){return new Promise((e=this,function(t,n){return e._tasklistId?o.fetch(e._tasklistId,{silentError:!0,success:function(n){return e.tasklistModel=n,t()},error:function(e,r){return 404===r.status?t():n()}}):t()})).then(function(e){return function(){var t;if(e.$el)return e.defaultConfig=null!=(t=e.getDefaultConfig())?t.toJSON():void 0,e.setConfig(e.defaultConfig),e.renderReact()}}(this));var e},t.prototype.gtaHandler=function(e){var t;return t={action:e,control:"Type List",note1:"new task",type:this.isSubtask?"subtask":"task",segment:this.projectModel.getboardViewGtaSegment()},i.gta.event(t)},t.prototype.remove=function(){return"function"==typeof this.onRemove&&this.onRemove(),t.__super__.remove.apply(this,arguments)},t}()},v1FzVxvL:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("a+N5u/Cl"),a=n("s0r7VfKc"),c=n("dikDkxSK"),l=n("Z7VmBAXA"),u=function(e){function t(t){var n=e.call(this,t)||this;return n.fetchTestgroups=function(){n.testgroupsSub&&n.testgroupsSub.unsubscribe(),n.testgroupsSub=a.default.getTestplanGroups(n.props.testplanId).values().subscribe(function(e){var t=(n.props.testgroup?s.uniq([n.props.testgroup].concat(e),"_id"):e).map(function(e){return e.isRoot?r.a({},e,{name:i.get("testgroup.selector.testgroup.name")}):e});n.setState({testgroups:t})})},n.onTestgroupSelect=function(e){n.props.onSetTestgroup(e)},n.state={testgroups:null},n}return r.d(t,e),t.prototype.componentDidMount=function(){this.fetchTestgroups()},t.prototype.componentDidUpdate=function(e){this.props.testplanId!==e.testplanId&&this.fetchTestgroups()},t.prototype.componentWillUnmount=function(){this.testgroupsSub&&this.testgroupsSub.unsubscribe()},t.prototype.render=function(){var e=this.props.testgroup&&this.props.testgroup._id;return o.createElement(c.a,{className:l["testgroup-selector"],nested:this.props.nested,inline:this.props.inline,list:this.state.testgroups||[],isLoading:!this.state.testgroups,autoFocus:!0,selected:e||void 0,inputPlaceholder:i.get("testgroup.selector.testgroup.select.input.placeholder"),onSelect:this.onTestgroupSelect},this.props.children)},t}(o.PureComponent)},vAHkzNvY:function(e,t,n){e.exports=function(e){var t="",r=n("RQ44psah");return t+='<div class="progress',e.exist>=e.limit&&(t+=" is-full"),t+='"> <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"> </div></div>',e._organizationId?(t+=" <span>"+tb_i18n.get("member.progress.title.organization",e.exist,e.limit)+"</span> ",e.isOrgMember&&(t+=' <a href="'+r.pay.orgAddMember(e._organizationId)+'" target="_blank" class="pull-right upgrade-handler" data-gta="{action: \'view plan option\', type: \'business\', control: \'member number\'}"> '+tb_i18n.get("organization.settings.add.member.toplimit")+" </a> ")):t+=" <span>"+tb_i18n.get("member.progress.title.project",e.exist,e.limit)+'</span> <a href="'+r.pay.plans+'" target="_blank" class="pull-right upgrade-handler" data-gta="{action: \'view plan option\', type: \'plus\', control: \'member number\'}"> '+tb_i18n.get("upgrade")+" </a>",t}},vDN73p8P:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("tLZJUYWX"),c=n("GESwhXbR");n("A1vIblOP");var l=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e){n.setState(r.a({},n.state,{invalid:!1,input:e.target.value}))},n.onSubmit=function(){n.state.input===n.props.password?n.props.onConfirm():n.setState(r.a({},n.state,{invalid:!0}))},n.onKeyDown=function(e){13===e.which&&n.onSubmit()},n.onClickButton=function(){n.state.onDoubleCheck?n.onSubmit():n.enterDoubleCheck()},n.enterDoubleCheck=function(){n.setState(r.a({},n.state,{onDoubleCheck:!0}))},n.state={onDoubleCheck:!1,invalid:!1,input:""},n}return r.d(t,e),t.prototype.renderInput=function(){return this.state.onDoubleCheck&&o.createElement("input",{className:"form-control double-checker-input",value:this.state.input,onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:this.props.confirmPlaceholder})},t.prototype.renderButton=function(){return o.createElement(c.Button,{danger:!0,onClick:this.onClickButton},this.props.buttonMsg)},t.prototype.render=function(){var e=s()("double-checker",{"in-short":this.props.inShort,"is-invalid":this.state.invalid});return o.createElement("div",{className:e},this.renderInput(),this.renderButton())},t.defaultProps={inShort:!1,buttonMsg:a.get("double.checker.button.message"),confirmPlaceholder:a.get("double.checker.placeholder"),password:"DELETE"},t}(o.PureComponent);n.d(t,"DoubleChecker",function(){return l})},vEhZLygU:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("dikDkxSK"),c=n("7LARz+8E"),l=n.n(c),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSelect=function(e){t.props.onSelect(e._id)},t.filterList=function(e,t){return e.filter(function(e){return e.name.indexOf(t)>=0})},t}return r.d(t,e),t.prototype.componentWillUnmount=function(){this.props.onDestroy&&this.props.onDestroy()},t.prototype.renderTrigger=function(){var e=i.get("testcase.testplan.selector.placeholder"),t=this.props,n=t._testplanId,r=t.seletedTestplan;if(n)if(r&&r._id===n)e=r.name;else{var a=this.props.testplans.find(function(e){return e._id===n});a&&(e=a.name)}return o.createElement(s.TextButton,{className:l.a.trigger},o.createElement("span",{className:l.a["trigger-name"]},e),o.createElement(s.Icon,{size:12,name:"chevron-down",className:l.a["trigger-icon"]}))},t.prototype.render=function(){return o.createElement(a.a,{nested:!0,inline:this.props.inline,className:this.props.className,list:this.props.testplans,selected:this.props._testplanId,onSelect:this.onSelect,filterList:this.filterList,autoFocus:this.props.autoFocus,inputPlaceholder:i.get("testplan.filter.placeholder")},this.renderTrigger())},t.defaultProps={inline:!1},t}(o.PureComponent);n.d(t,"a",function(){return u})},vNWLjLJF:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j=function(e,t){return function(){return e.apply(t,arguments)}},P={}.hasOwnProperty;y=n("a+N5u/Cl"),h=n("4c1CS0b3").Observable,M=n("sa1Ed382"),u=n("2jKBpKa5"),r=n("IssmDVnT").EventSDK,d=n("odY26VIi"),m=n("77NnVLwu"),g=n("3eMzznN/"),v=n("vmWJWrVe"),(C=n("GESwhXbR")).Alert,f=C.Toast,b=n("OmupbwLD"),o=n("7UQIdnmo"),S=n("8KNpsyVU"),I=S.showVerifyBindModal,w=S.getAccountBind,a=n("oXtD/CwF"),p=n("BsTK5jZO"),i=p.InvolverInput,E=n("3nOnSD6h"),c=E.MemberInvolve,_=E.createMemberMenuWrapper,T=n("PbcjBR5w"),k=T.createDetailObjectInvolverManagement,s=T.Involvers,n("gh8QIhMV").throwError,l=function(e){function t(){return this.inviteMoreMember=j(this.inviteMoreMember,this),this.inheritMembers=j(this.inheritMembers,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)P.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,v),t.prototype.viewName="MemberInvolveView",t.prototype.tagName="div",t.prototype.className="involve-view",t.prototype.initialize=function(e){var t,n,r,o,i;if(t=e._projectId,this._organizationId=e._organizationId,n=e.customPermission,this.objectModel=e.objectModel,this.where=e.where,this.resident=e.resident,this.enableInvite=e.enableInvite,this.saveOnHidden=e.saveOnHidden,this.saveToCache=e.saveToCache,this.contextId=e.contextId,this.hideAllProjectMembers=e.hideAllProjectMembers,this.scenario=null!=(o=e.scenario)?o:"project-members",this.inheritedObjectModel=e.inheritedObjectModel,r=e.getInheritedObjectInfo,this.setInvolvers=e.setInvolvers,this.objectModel)return this._projectId=t||this.objectModel.get("_projectId"),g.promiseChain((i=this,function(){return!i.el}))(function(e){return function(){return e._projectId?m.resolveFetch(e._projectId):Promise.resolve()}}(this),function(e){return function(t){return e.projectModel=t,e.fetchMembers()}}(this),function(e){return function(){if(y.isFunction(r))return r().then(function(t){e.inheritedObjectInfo=t})}}(this),function(e){return function(){return e.involvers=new s(e.getInitialMembers()),e.isIndieObject()?(e.canDeleteInvolver=!0,e.canPutInvolver=!0):(e.canDeleteInvolver=e.objectModel.hasPermission(n||"del.involvers"),e.canPutInvolver=e.objectModel.hasPermission(n||"put.involvers"))}}(this),function(e){return function(){return e.render(),e.listen()}}(this)),this},t.prototype.fetchMembers=function(){return this._projectId?g.warehouse.resolveFetch(d,this._projectId,{boundToObjectType:"project"}).then((e=this,function(t){e.membersCollection=t})):Promise.resolve();var e},t.prototype.listen=function(){var e;return this.listenTo(this.objectModel,"change:_executorId",(e=this,function(t,n){return e.render()})),this.isIndieObject()?this.listenTo(this.objectModel,"change:involvers",function(e,t){return this.refresh(t,"user")}):this.listenTo(this.objectModel,"change:involveMembers",function(e,t){var n;return n=t.map(function(t){return function(n){var r;return null!=(e=null!=(r=t.membersCollection)?r.findMember(n):void 0)?e.toJSON():void 0}}(this)).filter(Boolean),this.refresh(n,"user")}),this.membersCollection&&this.listenTo(this.membersCollection,"change",this.render),"event"===this.objectModel.get("objectType")&&this.listenTo(this.objectModel,"change",function(e){if(("function"==typeof e.isRecurrenceEventInstance?e.isRecurrenceEventInstance():void 0)!==r.isRecurrent(e.previousAttributes()))return this.render()}),this},t.prototype.render=function(){var e,t,n,r,o,s,a,l,u,d;return o=this.objectModel.get("objectType"),n="creator"===this.where,u=Boolean(this.saveToCache)||n,t=this.createInvolverMgmt(n),"task"===o||"event"===o||"post"===o||"work"===o||"entry"===o||"testcase"===o?(r=this.objectModel.toJSON(),e=y.assign(p.getContextId(r),this.contextId),l={MemberMenuWrapper:_({search:function(t){return i.loadSearch(o,e,t,{withTeamsAndGroups:!0}).catch(function(){return h.empty()})},loadChildren:(d=this,function(e,t){return i.loadChildren(e,t,d._projectId||null).catch(function(){return h.empty()})}),loadRecommend:function(t){return function(){return i.loadInitialRecommend(o,e,{hideAllProjectMembersHandler:t.hideAllProjectMembers||t.isIndieObject(),withTeamsAndGroups:!0}).catch(function(){return h.empty()})}}(this),commit:function(e){return function(){return e.submit(t,{saveToCache:u})}}(this),involverMgmt:t},{scenario:this.scenario})}):l={onOpenMenu:function(e){return function(n){return e.openMemberMenu(n,{commit:function(){return e.submit(t,{saveToCache:u})},involverMgmt:t})}}(this)},s=Object.assign({expectingInheritedObjectName:null!=(a=this.inheritedObjectInfo)?a.name:void 0,members:this.involvers.getObjs(),residents:this.getResidentMembers(),inCreate:n,onRemoveMember:function(e){return function(t,r){return e.onRemoveMember(t,r,{isInCreationMode:n,saveToCache:u})}}(this),creatorId:this.objectModel.get("_creatorId"),executorId:this.objectModel.get("_executorId"),canDeleteInvolver:this.canDeleteInvolver,canPutInvolver:this.canPutInvolver,onMemberClick:this.showMemberCard.bind(this),inviteShowed:this.enableInvite&&!this.isIndieObject(),inviteMoreMember:this.inviteMoreMember,inheritMembers:this.inheritMembers},l),this.requestReactView(this.el,c,s)},t.prototype.inheritMembers=function(){if(this.inheritedObjectInfo&&this.setInvolvers)return this.setInvolvers(this.getInvolversInheritedInvolvers())},t.prototype.getInvolversInheritedInvolvers=function(){var e,t,n,r,o;return t=(r=this.inheritedObjectInfo).involveMembers,n=r.involvers,e=this.isIndieObject()?t:t.filter((o=this,function(e){var t;return null!=(t=o.membersCollection)?t.findMember(e):void 0})),y.chain(this.objectModel.get("involveMembers").concat(e)).union().map(function(e){return function(t){var r,o;return(null!=(r=e.membersCollection)&&null!=(o=r.findMember(t))?o.toJSON():void 0)||n.find(function(e){return e._id===t})}}(this)).compact().value()},t.prototype.inviteMoreMember=function(){var e;if(!this.isIndieObject()||this._organizationId)return w(this._organizationId).then((e=this,function(t){return t?(e.requestSubView(b).open(o,{projectModel:e.projectModel,qrCodeType:"project"}),M.gta.event({action:"begin add member",control:"Member Menu"})):(I(),M.gta.event({action:"invitation blocked",page:"Member Involve Page",type:"project"}))})),this},t.prototype.isIndieObject=function(){var e;return!!("function"==typeof(e=this.objectModel).isIndie?e.isIndie():void 0)},t.prototype.involveMembersHint=function(){return M.gta.event({action:"show tips",type:"followers",method:"hover",control:"question mark"}),this},t.prototype.inviteMember=function(e){var t,n;return t=e._id,new Promise((n=this,function(e,r){return n.objectModel.saveAttr("involveMembers",null,{attrs:{addInvolvers:[t]},success:function(e){if(e.get("involveMembers").indexOf(t)<0)return f.error(tb_i18n.get("member.involve.invite.not.in.organization"))},error:r})}))},t.prototype.getResidentMembers=function(){return this.resident?this.resident:this.canDeleteInvolver?[]:this.objectModel.get("involveMembers").filter(function(e){return e!==M.user.id})},t.prototype.getInitialMembers=function(){var e,t,n,r;return n=function(e){return e._id!==M.user.id},!this.objectModel.id&&this.objectModel.has("creatorInvolversCache")?(e=y.sortBy(this.objectModel.get("creatorInvolversCache"),n),this.isIndieObject()?e:e.filter((r=this,function(e){var t;return(null!=(t=r.membersCollection)?t.findMember(e._id):void 0)||!i.ofType("user")(e)}))):this.isIndieObject()?(t=this.objectModel.get("involvers").filter(function(e){return!!e._id}),y.sortBy(t,n)):y.chain(this.objectModel.get("involveMembers")).map(function(e){return function(t){var n,r;return null!=(n=e.membersCollection)&&null!=(r=n.findMember(t))?r.toJSON():void 0}}(this)).compact().sortBy(n).value()},t.prototype.refresh=function(e,t){return this.involvers.reset(e,t),this.objectModel.id||this.objectModel.set({creatorInvolversCache:this.involvers.getObjs().map(i.deparse)}),this.render()},t.prototype.openMemberMenu=function(e,t){var n,r,o,i,s;return n=t.commit,r=t.involverMgmt,e.preventDefault(),null!=(i=this.memberMenu)&&i.remove(),o=y.extend({},this.options,{fixed:this.$el.closest(".panel-view").length,$toggler:$(e.target).closest(".add-involvement-handler"),multi:!0,selected:this.involvers.getIds("user"),resident:this.getResidentMembers(),select:function(e){var t,n,o,i;for(i=[],t=0,n=e.length;t<n;t++)o=e[t],i.push(r.addInvolver(o,"user"));return i},unselect:function(e){var t,n,o,i;for(i=[],t=0,n=e.length;t<n;t++)o=e[t],i.push(r.removeInvolver(o,"user"));return i},onHidden:(s=this,function(){if(s.saveOnHidden)return n().toPromise()}),ensurePermission:function(e){var t;return t=r.isAddedInvolver(e,"user")?"unselect":"select",r.ensurePermission(e,"user",t)},membersCollection:this.membersCollection,teamsCollection:this.teamsCollection,groupsCollection:this.groupsCollection,inviteTo:this.enableInvite?this.projectModel:null}),this.memberMenu=this.requestSubView(u,o).show(),this.gtaHandler({action:"set followers"}),this},t.prototype.onRemoveMember=function(e,t,n){var r,o,i;return o=n.isInCreationMode,i=n.saveToCache,(r=this.createInvolverMgmt(o)).removeInvolver(e,t),this.submit(r,{saveToCache:i}).toPromise()},t.prototype.createInvolverMgmt=function(e){var t,n,r;return r={put:this.canPutInvolver,del:this.canDeleteInvolver},t=this.objectModel.toJSON(),n={isInCreationMode:e,executorId:this.objectModel.get("_executorId")},"event"===t.objectType&&(n.eventDetailView=this.objectModel.eventDetailView),k(this.involvers.getIds(),r,t,n)},t.prototype.submit=function(e,t){var n;return t.saveToCache?e.confirmAndCommit((n=this,function(t){var r,o,s,a;if(a=n.involvers.getObjs(),o=!1,s=t.map(function(t){var n,r,s;return r=t.id,s=t.type,(n=a.find(function(e){return e.id===r}))||(n=e.getInvolver(r,s)),n&&i.allProjectMembers.check(n)&&(o=!0),n?i.deparse(n):{_id:r,type:s}}),r=i.groupByType(s,"user","team","group"),n.objectModel.set({involvers:r.user,involveMembers:y.pluck(r.user,"_id"),involveTeams:y.pluck(r.team,"_id"),involveGroups:y.pluck(r.group,"_id"),involveAllProjectMembers:o}),"creator"===n.where)return n.refresh(s)})):e.confirmAndCommit()},t.prototype.showMemberCard=function(e,t,n){var r,o;if((!this.isIndieObject()||this._organizationId)&&"user"===n)return $(e).data("bs.popover")?(null!=(r=this.memberCardView)&&r.hide(),null!=(o=this.memberCardView)&&o.remove(),this):this.memberCardView=this.requestSubView(a,{$toggler:$(e),placement:"right",affixToggler:!1,userId:t,projectModel:this.isIndieObject()?void 0:this.projectModel,organizationId:this._organizationId}).show()},t.prototype.gtaHandler=function(e){return"task"===this.objectModel.get("objectType")&&(e=y.extend({type:this.objectModel.isSubtask()?"subtask":"task",series:this.objectModel.get("ancestorIds").length},e)),M.gta.event(e)},t}(),t.Constructor=l},"vUGUgKq+":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return!1===function(e){return Boolean(e)&&e instanceof Array&&e.length>0}(e)}},vW4SdMQi:function(e,t,n){e.exports={"cell-menu":"cell-menu__17FJ"}},vX7qefsd:function(e,t,n){},vcYXyHGP:function(e,t,n){e.exports={"project-menu-notice":"project-menu-notice__yGDp"}},"vj+U3KkR":function(e,t,n){e.exports=n.p+"images/l_xin@2x.de831b94.png"},voDUDzOQ:function(e,t,n){e.exports={body:"body__kNmx",header:"header__3aac",title:"title__3cMW","testgroup-selector":"testgroup-selector__3b61"}},vqsj8TKC:function(e,t,n){var r,o,i,s={}.hasOwnProperty;i=n("sa1Ed382"),o=n("vmWJWrVe"),r=n("OGoqSVsy").CustomFieldsNotInScenario,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.tagName="div",t.prototype.viewName="DetailInfosCustomField",t.prototype.className="detail-custom-field-not-in-scenario-view detail-infos-custom-field-view ",t.prototype.initialize=function(e){return this.taskModel=e.taskModel,this.projectModel=e.projectModel,this.listen(),this.render()},t.prototype.listen=function(){return this.listenTo(this.taskModel,"change:customfields",this.render)},t.prototype.render=function(){return this.requestReactView(this.el,r,{task:this.taskModel.toJSON(),project:this.projectModel.toJSON(),isEditable:this.checkIsEditable(),isDeletable:this.checkIsDeletable(),onSave:this.onSaveCustomField.bind(this)})},t.prototype.checkIsDeletable=function(){var e;return e=i.user.id===this.taskModel.get("_creatorId"),this.taskModel.hasPermission("del.additional-customfield")||e},t.prototype.checkIsEditable=function(){return this.taskModel.hasPermission("put.additional-customfield")},t.prototype.onSaveCustomField=function(e,t){var n,r;return n=e._id,r=Object.assign({},{value:t},{_customfieldId:n}),this.taskModel.updateCustomField(r)},t.prototype.isCase=function(){return!0},t.prototype.hasPermission=function(){return!0},t}()},vyNrxjj3:function(e,t,n){"use strict";var r=n("OfDsaQ3X");n.d(t,"Card",function(){return r.a});var o=n("hlXBzpUv");n.o(o,"CardInfo")&&n.d(t,"CardInfo",function(){return o.CardInfo}),n.o(o,"getFieldConfig")&&n.d(t,"getFieldConfig",function(){return o.getFieldConfig}),n.o(o,"getScenarioTypes")&&n.d(t,"getScenarioTypes",function(){return o.getScenarioTypes});var i=n("oRXP9OaV");n.d(t,"getFieldConfig",function(){return i.a}),n.d(t,"getScenarioTypes",function(){return i.b});var s=n("hvbDW21c");n.d(t,"CardInfo",function(){return s.b})},w25JH8uC:function(e,t,n){var r,o,i,s,a,c,l;i=n("a+N5u/Cl"),s=n("2qRnoGmE"),o=n("bZr3G77e"),c=n("sa1Ed382"),r=n("nDsjpj50").BehaviorSubject,l=n("gh8QIhMV").throwError,a=6e4,e.exports=function(){function e(){}return e.prototype.abPayload={},e.prototype.notify$=new r(1),e.prototype.fetch=function(e){var t,n;return s.AB_HOST?(t=i.extend({},e,{data:{env:c.env},method:"GET",silentError:!0,timeout:1e4,url:s.API_HOST+"/users/"+c.user.id+"/abtests"}),o.ajax(t).then((n=this,function(e){return n.retry&&window.clearTimeout(n.retry),a=6e4,n.abPayload=e||{},n.notify$.next(1)})).catch(function(t){return function(n){return"timeout"===n.statusText&&(a=Math.max(2*a,192e4),t.retry=window.setTimeout(function(){return t.fetch(e)},a)),l(n)}}(this))):Promise.resolve({})},e.prototype.inCohort=function(e){return i.has(this.abPayload,e)},e.prototype.testExist=function(e,t){return this.inCohort(e)&&i.has(this.abPayload[e],t)},e.prototype.hasTest=function(e,t,n,r){return this.getTestGroup(e,t,r)===(n||"B").toUpperCase()},e.prototype.getTestGroup=function(e,t,n){var r;if(i.has(n,"tag"))return"function"==typeof(r=n.tag).toUpperCase?r.toUpperCase():void 0;if(this.inCohort(e)){if(i.has(this.abPayload[e],t))return this.abPayload[e][t].tag;l("ABTest group: "+e+"_"+t+" is not exist")}return"A"},e.prototype.toGTAProperties=function(){return i.chain(this.abPayload).map(function(e,t){return i.map(e,function(e,n){return""+(t+"_"+n+".").toLowerCase()+e.tag})}).flatten().value()},e.prototype.changeTest=function(e,t,n){if(this.abPayload[e][t].tag!==n)return this.abPayload[e][t].tag=n,this.notify$.next(1)},e.prototype.intercom=function(){var e;return!0===(e=s.FEATURES.enableIntercomAutoBoot)||"abtest"===e&&"B"===this.getTestGroup("intercom","intercom_open")},e.prototype.isGanttPrintEnabled=function(){return"B"===this.getTestGroup("gantt_print","gantt_print_test2")},e.prototype.isThoughtsUser=function(){return this.inCohort("thoughts-user")},e}()},w2WS5sq3:function(e,t,n){var r,o;o=n("bZr3G77e"),r=n("GESwhXbR").Toast,t.get=function(e){return o.ajax({url:e}).then(function(e){var t,n,o;return t=e.message,o=e.statusText,n=e.status,r.info(t||o||n)}).catch(function(e){var t,n,o;return t=e.message,o=e.statusText,n=e.status,r.error(t||o||n)})}},w2dXMpGP:function(e,t,n){e.exports=function(e){var t,r,o="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),i="",s=n("QFl7Q1qw").invisibleNode;if(i+="<header> "+o(e.title)+"</header>",e.visibles.length>0){i+="<ul> ";var a=e.visibles;if(a)for(var c,l=-1,u=a.length-1;l<u;)i+=' <li class="link" data-id="'+(c=a[l+=1])._id+'" data-linkedid="'+c._linkedId+'"> <div class="link-head"> <div class="link-icon-wrap"> <span class="icon icon-wall"></span> </div> <div class="link-icon-wrap"> <span class="avatar img-circle img-24" style="background-image:url('+o(c.data.creator.avatarUrl)+')" ></span> </div> <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main"> <span class="title-name" title="'+o(c.data.title)+'"> '+o(c.data.title)+" </span> </div> ",c.data.project&&(i+=' <div class="link-title-header-rest" title="'+o(c.data.project.name)+'" > '+o(c.data.project.name)+" </div> "),i+=" </div> ",c.content&&(i+=' <div class="link-title-footer">'+o(c.content)+"</div> "),i+=' </div> </div> <a class="link-menu-handler icon icon-chevron-down" data-id="'+c._id+'"></a> </li> ';i+="</ul>"}return i+=""+s(e)}},"w3F+MP2A":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v={}.hasOwnProperty;g=n("sa1Ed382"),h=n("vmWJWrVe"),l=n("MmYzUhjM"),d=n("RQ44psah"),p=n("GESwhXbR").Toast,f=n("2qRnoGmE"),s=n("odY26VIi"),m=n("OmupbwLD"),i=n("Ri58Iblv"),u=n("+j2D3LI+"),n("gh8QIhMV").throwError,r=n("zEFDhPeH"),c=n("uGcFUGYs"),o=n("9sOPw9dz"),a=n("Ix1SnrL5").OrgMemberAdd,n("NtzEC3Pa"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)v.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,h),t.prototype.viewName="OrganizationMemberAddView",t.prototype.className="org-memberadd-view modal-dialog flex-vert flex-fill",t.prototype.initialize=function(e){var t,n;if(this.organizationModel=e.organizationModel,this.targetType=e.targetType,this.teamId=e.teamId,this.outerOnly=e.outerOnly,this.onMemberAddSuccess=e.onMemberAddSuccess,this.title=null!=(t=e.title)?t:tb_i18n.get("organization.memberadd.title"),this.sourceTitle=null!=(n=e.sourceTitle)?n:tb_i18n.get("organization.memberadd.cooperatedMember"),this.targetType)return this.gtaCategory=function(){switch(this.targetType){case"organization":return"org";case"team":return"team"}}.call(this),this.isReady=!1,this.render()},t.prototype.onOpen=function(){return this.isReady=!0,this.renderContent()},t.prototype.render=function(){return this.renderBasic(),this.renderContent()},t.prototype.renderBasic=function(){return this.$el.html(r({title:this.title})),this.$content=this.$(".organization-member-add-body")},t.prototype.renderContent=function(){var e,t,n,r,o,i;return n=this.onMemberAddSuccess,t=this.gtaCategory,i=this.targetType,e=this.alertExceedLimit,r=this.organizationModel.payment,o=this.organizationModel.getRoleScope(),this.requestReactView(this.$content[0],a,{isReady:this.isReady,organization:this.organizationModel.toJSON(),teamId:this.teamId,outerOnly:this.outerOnly,sourceTitle:this.sourceTitle,targetType:this.targetType,emailInvites:[],memberLimit:r.memberQuota,showMemberProgress:f.FEATURES.showMemberCount&&r.memberQuota<l.UNLIMIT_MEMBERS,hasUpgradePermission:o>=0,openQRcode:this.openQRcode.bind(this),onMemberAddSuccess:function(e,r){return r&&g.gta.event({action:"added member",category:t,type:"team"===i?"org member":"worked with",control:"team"===i?"single import":"button",method:e.trim()?"filter":"click"}),n()},onMemberAddError:function(t){return"ExceedLimit"===t.name?e():"ExceedUserLimit"===t.responseJSON.name?window.location.href=f.ACCOUNT_HOST+"/license":t.message?p.error(t.message):void 0},initMemberFinder:this.initMemberFinder.bind(this)})},t.prototype.alertExceedLimit=function(){var e,t,n;return this.organizationModel.getRoleScope()<1?(t=tb_i18n.get("organization.settings.add.member.toplimit"),e=d.pay.orgAddMember(this.organizationModel.id),n=tb_i18n.get("organization.member.exceed.description",this.organizationModel.payment.memberQuota),this.requestSubView(m).open(o,{title:tb_i18n.get("organization.member.exceed"),content:n,confirmText:t,confirmHref:e})):this.requestSubView(m).open(c,{organizationId:this.organizationModel.id})},t.prototype.initMemberFinder=function(e,t,n){var r;if(!f.FEATURES.invite_need_account_verification||g.user.get("isVerified"))return this.requestSubView(i,{_organizationId:this.organizationModel.id,$searchbox:$(e),collection:new s(t,{bindByMatrix:!1}),newEmailPrefix:tb_i18n.get("member.finder.sendInvitationMailTo"),select:(r=this,function(e,t){return g.gta.event({action:"added member",type:"single",control:"invite "+(e.isNew?"new":"existing")+" user",category:r.gtaCategory,method:t.keyCode?"keyboard":"click",segment:"email"===e.searchType?"email":"sms"}),n(e.item)})})},t.prototype.openQRcode=function(e){return this.organizationModel.payment,this.organizationModel.getRoleScope(),g.gta.event({action:"add member",type:"qr",control:"button",category:"project"}),this.requestSubView(m).open(u,{membersCount:e,type:"organization",model:this.organizationModel}),this},t.prototype.close=function(){var e;return null!=(e=this.parentView)&&e.close(),this},t}()},w3pmCC9X:function(e,t,n){e.exports=n.p+"images/step-0.ee56b7dc.png"},w68F3Pvn:function(e,t,n){var r,o,i={}.hasOwnProperty;o=n("2qRnoGmE"),r=n("KPjvlCmh"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.name=this.name+"/"+this.options._organizationId},t.prototype.url=function(){var e;return e=this.options._organizationId,o.HOST+"/appstore/api/organizations/"+e+"/installedFeatures"},t}()},w8ZHMe1A:function(e,t){e.exports=function(e){return'<div class="header activity-panel-header"> <a class="switch-handler activity-back" data-type="all"> <span class="icon icon-chevron-left"></span> <span class="get-back">'+tb_i18n.get("back")+'</span> </a> <div class="title">'+tb_i18n.get("activity.panel.title.all")+'</div> <a class="icon icon-remove close-handler"></a></div><div class="activity-panel-body thin-scroll"></div>'}},wDU6cT95:function(e,t,n){"use strict";n.r(t),n.d(t,"SprintInfoComponent",function(){return c});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("GESwhXbR"),a=n("BJBYEN/8"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stylePrefix="task-sprint-container",t}return r.d(t,e),t.prototype.renderTitle=function(){return o.createElement("div",{className:"detail-infos-aside"},o.createElement(s.Icon,{name:"sprint"}),o.createElement("span",null,i.get("sprint")))},t.prototype.renderValueSelect=function(){return o.createElement("div",{className:"detail-infos-content flex-space"},o.createElement(a.a,{projectId:this.props.projectId,sprintId:this.props.sprintId,hasPermission:this.props.hasPermission,withSubtask:this.props.withSubtask,onUpdateSprint:this.props.onUpdateSprint}))},t.prototype.render=function(){return o.createElement("div",{className:this.stylePrefix+" flex flex-vcenter"},this.renderTitle(),this.renderValueSelect())},t}(o.PureComponent)},wGUYTcJr:function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("h3j1Ipa9"),o=n("hGNqppva"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="VersionMenuView",t.prototype.popoverTitle="",t.prototype.events={"click .label-version-handler":"labelAsMainVersion","click .edit-description-handler":"onEditDescription","click li":"hide"},t.prototype.initialize=function(e){return this.labelAsMainVersion=e.labelAsMainVersion,this.onEditDescription=e.onEditDescription,this.showSetMainVersion=e.showSetMainVersion,this.popoverTitle=tb_i18n.get("version.menu.title"),t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return this.$el.html(r({showSetMainVersion:this.showSetMainVersion})),this},t}()},wIa0soTd:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("a+N5u/Cl"),s=n("tLZJUYWX"),a=n("GESwhXbR"),c=function(e,t){return e.data===t.data},l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refNameInput=function(e){t.nameInput=e},t.isDisabled=function(){return!Boolean(t.props.organization)||0===t.props.name.trim().length},t.getOrgOptions=function(){return i.chain(t.props.organizationList).sortBy("disableCreating").map(function(e){var t=e.disableCreating,n=e._id,r=e.name,i={label:r,data:n};return o.createElement(a.Option,{value:i,key:n,disabled:t},t?s.get("group.settings.organization.expired",r):r)}).value()},t.onNameChange=function(e){var n=e.target;t.props.onChange({name:n.value})},t.onNameBlur=function(){t.props.instantSubmit&&t.onSubmit()},t.onNameKeyDown=function(e){13===e.which&&t.props.instantSubmit&&t.nameInput.blur()},t.onOrgSelect=function(e){t.props.onChange({_organizationId:e.data})},t.onKeydown=function(e){t.props.instantSubmit||13===e.which&&t.onSubmit()},t.onSubmit=function(){!t.isDisabled()&&t.props.onSubmit()},t}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.autoFocus&&i.delay(function(){return e.nameInput.focus()},218),window.addEventListener("keydown",this.onKeydown)},t.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.onKeydown)},t.prototype.renderNameInput=function(){return o.createElement("input",{ref:this.refNameInput,className:"form-control",placeholder:s.get("group.creator.group.name.placeholder"),maxLength:25,value:this.props.name,onChange:this.onNameChange,onKeyDown:this.onNameKeyDown,onBlur:this.onNameBlur,disabled:!this.props.canModify})},t.prototype.renderName=function(){return this.props.instantSubmit?o.createElement("label",null,o.createElement("span",null,s.get("group.settings.name.input")),this.renderNameInput()):this.renderNameInput()},t.prototype.renderOrganizationSelector=function(){var e=this.props,t=e.organization,n=e.showOrganization,r=e.isOrganizationSelectable,i=t?t.name:"",l=t&&{label:i,data:t._id};return n?r?o.createElement("label",null,o.createElement("span",null,s.get("group.creator.group.belongsTo.label")),o.createElement(a.Select,{defaultValue:l,onSelect:this.onOrgSelect,matchFn:c,placeholder:s.get("group.creator.organization.unselected")},this.getOrgOptions())):o.createElement("label",null,o.createElement("span",null,s.get("group.creator.group.belongsTo.label")),o.createElement("p",null,i)):null},t.prototype.renderSubmit=function(){return!this.props.instantSubmit&&o.createElement(a.Button,{onClick:this.onSubmit,disabled:this.isDisabled()},s.get("group.creator.group.settings.submit"))},t.prototype.render=function(){return o.createElement("div",{className:"group-settings"},o.createElement("section",{className:"group-settings-name"},this.renderName()),o.createElement("section",{className:"group-settings-org"},this.renderOrganizationSelector()),o.createElement("footer",{className:"group-settings-submit"},this.renderSubmit()))},t.defaultProps={name:"",canModify:!0,autoFocus:!0,showOrganization:!0,isOrganizationSelectable:!1,instantSubmit:!1,organizationList:[]},t}(o.PureComponent);n.d(t,"GroupSettings",function(){return l}),n.d(t,"ExportType",function(){}),n("DcVAUTaR")},"wOYhnX/R":function(e,t,n){e.exports={copyable:"copyable__2Qq5"}},wRzn87sO:function(e,t,n){"use strict";var r=n("Io315hVL");n.d(t,"a",function(){return r.SearchBar}),n.d(t,"b",function(){return r.SelectableResults}),n.d(t,"c",function(){return r.typeClass})},wZNQzrHi:function(e,t,n){e.exports=function(e){var t="",r=n("RQ44psah"),o=n("2qRnoGmE");return t+='<div class="modal-content"> <header class="modal-header text-center"> <h4 class="modal-title">'+e.header+'</h4> <a class="modal-close icon icon-remove" data-dismiss="modal"></a> </header> <div class="modal-body"> <p class="organization-overdue-message"> '+e.message+" ",o.ENTERPRISE_URL&&(t+=' <a class="tips" href="'+o.ENTERPRISE_URL+'" target="_blank">'+tb_i18n.get("organization.learn.more")+"</a> "),t+=' </p> <div class="organization-overdue-set"> ',e.roleScope>=0?(t+=" ",e.payment.isTrial?t+=' <a class="btn-primary btn" href="'+(e.payment.isProfessional?r.pay.orgNewPro(e._organizationId):r.pay.orgNew(e._organizationId))+'" target="_blank">'+tb_i18n.get("organization.payment.buy")+"</a> ":t+=' <a class="btn-primary btn" href="'+r.pay.orgRenew(e._organizationId)+'" target="_blank">'+tb_i18n.get("organization.buy.now")+"</a> ",t+=" ",e.projectsCount>0&&e.permissions.putTransferOut&&(t+=' <a class="btn btn-primary btn-ghost export-projects">'+tb_i18n.get("projects.export")+"</a> "),t+=" ",e.permissions.del&&(t+=' <div class="content-divier"></div> <a class="btn btn-danger btn-ghost delete-organization-handler">'+tb_i18n.get("organization.settings.delete")+"</a> "),t+=" "):(t+=' <a class="btn btn-primary contact-owner">'+tb_i18n.get("organization.overdue.btn.ok")+"</a> ",e.canQuitProject&&(t+=' <a class="btn btn-danger btn-ghost quit-project">'+tb_i18n.get("project.quit")+"</a> "),t+=" "),t+=" </div> </div></div>"}},wa5e7gwX:function(e,t,n){e.exports={"task-accomplished":"task-accomplished__1cdH","task-accomplished__inner":"task-accomplished__inner__1bCV"}},"whvLIq4+":function(e,t){e.exports={getIntegrationMenus:function(){return{weibo:[{id:"home",name:tb_i18n.get("weibo.menu1")},{id:"user",name:tb_i18n.get("weibo.menu2")},{id:"mentions",name:tb_i18n.get("weibo.menu3")},{id:"bilateral",name:tb_i18n.get("weibo.menu4")}],github:[{id:"pullRequest",name:"Pull Request"},{id:"issue",name:"Issues"},{id:"commit",name:"Commits"},{id:"branch",name:"Branches"}],evernote:[],yinxiang:[],processon:[{id:"myFiles",name:tb_i18n.get("processon.myFiles")},{id:"recent",name:tb_i18n.get("processon.recent")},{id:"cooperated",name:tb_i18n.get("processon.cooperated")}]}}}},"wnD/zndQ":function(e,t,n){"use strict";n.r(t),n.d(t,"ChatMessageCreator",function(){return d});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("tLZJUYWX"),s=n("8yf6doCl"),a=n("GESwhXbR"),c=n("TSYQbtd+"),l=n.n(c),u=n("s0r7VfKc"),p=n("sa1Ed382"),d=function(e){function t(t){var n=e.call(this,t)||this;return n.value$=new s.Subject,n.activities$=new s.Subject,n.unmount$=new s.Subject,n.getTextareaRef=function(){return n.rTextarea},n.setTextareaRef=function(e){n.rTextarea=e},n.changeQuickType=function(e){return function(){var t=n.state.quickType;if(e!==t){n.setState(r.a({},n.state,{quickType:e})),"ctrl-enter"===e?p.PREFERENCE.quickReply(!1):p.PREFERENCE.quickReply(!0);var o=n.getTextareaRef();o&&o.focus()}}},n.handleChange=function(e){n.setState(r.a({},n.state,{textValue:e.target.value}))},n.handleQuickSubmit=function(e){13===e.keyCode&&!(e.ctrlKey||e.metaKey||e.shiftKey)&&p.PREFERENCE.quickReply()?(e.preventDefault(),n.handleSubmitClick("keyboard")):13===e.keyCode&&(e.ctrlKey||e.metaKey||e.shiftKey)&&!p.PREFERENCE.quickReply()&&(e.preventDefault(),n.handleSubmitClick("keyboard"))},n.handleSubmitClick=function(e){var t=n.props,r=t.attachments,o=t.roomId,s=t.mentions,c=r.getUploadingCount();if(c)a.Toast.warning(i.get("works.uploader.uploading.total",c));else{var l=n.state.textValue.trim();if(l||r.length){var d=p.PREFERENCE.get("activityMode")||"text",h={attachments:r.toJSON(),_creatorId:p.user.id,content:l,mentions:s(),_boundToObjectId:o,boundToObjectType:"room",created:"",updated:"",objectType:"ChatMessage",renderMode:d};n.activities$.next(u.default.fetch.createChatMessage(o,h).do(function(){p.gta.event({action:"added content",type:"chat",category:r.length?"attachment":"no attachment",page:"Chats Page",projectid:n.props.projectId,organizationid:p.PREFERENCE.get("lastWorkspace"),userkey:p.user.id,method:e,note1:n.props.type})}))}}},n.state={textValue:t.defaultValue||"",quickType:p.PREFERENCE.quickReply()?"only-enter":"ctrl-enter"},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.initEmoji(),this.activities$.takeUntil(this.unmount$).exhaustMap(function(e){return e}).subscribe({next:function(){e.setState(r.a({},e.state,{textValue:""}),function(){e.props.submitFulfilled()})},error:function(e){a.Toast.error({message:e.message})}}),this.value$.takeUntil(this.unmount$).subscribe(function(t){e.setState(r.a({},e.state,{textValue:t}))})},t.prototype.componentWillUnmount=function(){this.unmount$.next(),this.unmount$.complete()},t.prototype.renderIcon=function(){var e=this.props.isShowCropBtn?o.createElement(a.Tooltip,{title:i.get("screen.crop")},o.createElement(a.Icon,{name:"crop",className:"screen-crop-handler"})):null,t=o.createElement(a.Tooltip,{title:i.get("chat.room.add.emoji")},o.createElement(a.Icon,{className:"add-emoji-handler",name:"emoji"}));return{screenCrop:e,paperclip:o.createElement(a.Tooltip,{title:i.get("activity.timeline.add.attachment")},o.createElement(a.Icon,{className:"add-work-handler",name:"paperclip"})),emoji:t}},t.prototype.renderDropdownContent=function(){var e=this.state.quickType,t=l()({active:"only-enter"===e}),n=l()({active:"ctrl-enter"===e});return o.createElement(a.Menu,{className:"chat-creator-reply-menu"},o.createElement(a.MenuItem,{className:t,onClick:this.changeQuickType("only-enter")},i.get("activity.timeline.reply.enter"),o.createElement(a.Icon,{name:"tick"})),o.createElement(a.MenuItem,{className:n,onClick:this.changeQuickType("ctrl-enter")},i.get("activity.timeline.reply.shortcut"),o.createElement(a.Icon,{name:"tick"})))},t.prototype.render=function(){var e=this,t=this.props.isOpen,n=this.renderIcon(),r=n.emoji,s=n.screenCrop,c=n.paperclip;if(p.user.isGhost)return o.createElement("div",{className:"chat-room-creator-wrap"},i.get("activity.timeline.comment.ghost"));var u=l()("message-box-wrap",{"is-closed":!t}),d=t?i.get("chat.room.placeholder"):i.get("chat.room.cloesd.room.placeholder"),h=o.createElement("div",null,o.createElement("div",{className:"chat-room-creator-fast-emoji"}),o.createElement("div",{className:u},o.createElement("div",{className:"message-box-icon-wrap"},s,r,c),o.createElement("div",{className:"message-box-input-wrap"},o.createElement("textarea",{className:"form-control message-input",disabled:!t,onChange:this.handleChange,onKeyDown:this.handleQuickSubmit,placeholder:d,ref:this.setTextareaRef,value:this.state.textValue})),o.createElement("ul",{className:"attachments-list scrollable thin-scroll clearfix"})),o.createElement("div",{className:"chat-room-creator-active-emoji"}),o.createElement("div",{className:"chat-room-handler clearfix"},c,r,s,o.createElement("span",{className:"pull-right reply-btn"},o.createElement("span",{className:"reply-handler",onClick:function(){e.handleSubmitClick("click")}},i.get("chat.room.send")),o.createElement("span",{className:"reply-line"}),o.createElement(a.Dropdown,{content:this.renderDropdownContent()},o.createElement("a",{className:"reply-switch"},o.createElement("i",{className:"icon icon-chevron-down"}))))));return o.createElement("div",{className:"chat-room-creator-wrap"},h)},t}(o.PureComponent)},wnHQkCHu:function(e,t,n){var r,o,i,s,a=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty;i=n("a+N5u/Cl"),r=n("aD6I3VT4"),o=n("rZkGVoQa").TaskWorktimeCreator,s=n("3eMzznN/").formatWorktime,e.exports=function(e){function t(){return this.updateTotalTime=a(this.updateTotalTime,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.tagName="section",t.prototype.viewName="DetailInfosWorktimeCreatorView",t.prototype.className="detail-infos-worktime-creator-view no-border-wrapper",t.prototype.initialize=function(e){return null==e&&(e={}),t.__super__.initialize.apply(this,arguments),this.objectModel=e.objectModel,this.simplifiedVersion=e.simplifiedVersion,this.isRequired=e.isRequired,this.canEdit=e.canEdit,this.render(),this.listen()},t.prototype.listen=function(){return this.listenTo(this.objectModel,"change:workTime",this.render)},t.prototype.render=function(){var e,t;return t=(null!=(e=this.objectModel.get("workTime"))?e.totalTime:void 0)||0,this.requestReactView(this.el,o,{totalTime:s(t),hasPutPermission:this.hasPermission(),updateTotalTime:this.updateTotalTime,withTitle:!this.simplifiedVersion,isRequired:this.isRequired})},t.prototype.updateTotalTime=function(e){var t,n;if((null!=(t=this.objectModel.get("workTime"))?t.totalTime:void 0)!==e)return n=i.extend({},this.objectModel.get("workTime"),{totalTime:e}),this.objectModel.set("workTime",n),Promise.resolve()},t.prototype.isCase=function(){return!0},t.prototype.hasPermission=function(){return this.canEdit},t}()},wq9yixcx:function(e,t,n){e.exports={"organization-not-found-view":"organization-not-found-view__3moG"}},wziRQp6w:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<div class="member-content-wrap row '+r(e.language)+'"> <div class="col-xs-12"> ';return e.email&&(o+=' <div class="member-info-item"> <div class="member-info-label">'+tb_i18n.get("email")+'</div> <div class="member-info-content"> <a href="mailto:'+e.email+'">'+r(e.email)+"</a> </div> </div> "),o+=' <div class="member-info-item"> <div class="member-info-label">'+tb_i18n.get("position")+'</div> <div class="member-info-content"> <a>'+r(e.title||tb_i18n.get("none"))+"</a> </div> </div> ",e.phone&&(o+=' <div class="member-info-item"> <div class="member-info-label">'+tb_i18n.get("mobile")+'</div> <div class="member-info-content"> <a href="tel:'+r(e.phone)+'">'+r(e.phone)+"</a> </div> </div> "),o+=" ",e.birthday&&(o+=' <div class="member-info-item"> <div class="member-info-label">'+tb_i18n.get("birthday")+'</div> <div class="member-info-content">'+r(e.birthday)+"</div> </div> "),o+=" ",e.location&&(o+=' <div class="member-info-item"> <div class="member-info-label">'+tb_i18n.get("location")+'</div> <div class="member-info-content">'+r(e.location)+"</div> </div> "),o+=" ",e.website&&(o+=' <div class="member-info-item"> <div class="member-info-label">'+tb_i18n.get("website")+'</div> <div class="member-info-content"> <a href="'+e.website+'" target="_blank">'+r(e.website)+"</a> </div> </div> "),o+=" ",e.fromPanel||(o+=' <div class="member-info-item"> <div class="member-info-label">'+tb_i18n.get("team")+'</div> <div class="member-info-content"> <ul class="team-list"></ul> </div> </div> '),o+=" </div></div>"}},"x+zaTn41":function(e,t,n){e.exports={"cell-toggler":"cell-toggler__1F8y","cell-toggler--empty":"cell-toggler--empty__5JiD","cell-toggler__inner":"cell-toggler__inner__3RLO","cell-toggler--expanded":"cell-toggler--expanded__2uCi","cell-toggler--loading":"cell-toggler--loading__366h",spin:"spin__2BeQ"}},x0ETOehG:function(e,t,n){e.exports=n.p+"images/desktop-notification.3a1b92a1.svg"},"x0w+nCUa":function(e,t,n){"use strict";var r,o,i,s;n.d(t,"d",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return s}),function(e){e[e.Forward=0]="Forward",e[e.Backward=10]="Backward",e[e.Horizontal=100]="Horizontal",e[e.Vertical=1e3]="Vertical"}(r||(r={})),function(e){e[e.Requested=0]="Requested",e[e.Observed=1]="Observed"}(o||(o={})),function(e){e[e.Unset=0]="Unset",e[e.Vertical=2]="Vertical",e[e.Horizontal=4]="Horizontal"}(i||(i={})),function(e){e[e.MaxSize=15e5]="MaxSize",e[e.ResetInterval=120]="ResetInterval"}(s||(s={}))},"x7zMi+hR":function(e,t,n){},x8BEWZKj:function(e,t,n){e.exports=n.p+"images/o_weiguan@2x.30cfe0c5.png"},xBT6LeRu:function(e,t,n){"use strict";var r=n("keGpi1ni");n.d(t,"InviteModal",function(){return r.a});n("93QCSvzN"),n("PMFMoAaP")},xEz6nMx9:function(e,t){e.exports=function(e){return'<div class="chat-room-add-search flex-static"></div><div class="tab-list section-switcher flex-horiz"></div><div class="tab-container-view-content"> <div class="rooms-section thin-scroll flex-fill"></div></div>'}},xK8Zjj9U:function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("GXaoBc4K"),o=n("vmWJWrVe"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="HotkeyHelperView",t.prototype.className="hotkey-helper",t.prototype.initialize=function(){return this.renderBasic(),this},t.prototype.renderBasic=function(){return this.$el.html(r()),this},t}()},"xL/A1S1t":function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k={}.hasOwnProperty;f=n("vmWJWrVe"),y=n("sa1Ed382"),l=n("HDJEOtNh").ProjectAccess,s=n("7lRKyXCu"),i=n("NVQQjqdr"),a=n("RqASgP7q"),d=n("UWIAOOh5"),m=n("AEkluhuA"),h=n("wnHQkCHu"),r=n("TLTmDwrA"),p=n("QcmE5UU1"),c=n("gajqdbew"),o=n("n8Repvf6"),u=n("GlvjHbV/"),b=n("V6edIaEd"),v=b.canRoleEditCustomField,g=b.canActorEditCustomField,n("/W5he3Er"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)k.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,f),t.prototype.viewName="ScenarioInfoBaseView",t.prototype.initialize=function(e){var t;return this.opitons=e,this.objectModel=e.objectModel,this.projectModel=e.projectModel,this.boundToObjectType=e.boundToObjectType,this.disabledItems=e.disabledItems||[],this.withIcon=e.withIcon,this.displayType=e.displayType,this._projectId=null!=(t=this.projectModel)?t.id:void 0,this.views=[],this.requiredScenarioFieldTypes=[]},t.prototype.setCustomFieldLinksCollection=function(e){return this.customFieldLinksCollection=e},t.prototype.setRequiredFieldTypes=function(e){return this.requiredScenarioFieldTypes=e||[]},t.prototype.initViews=function(e){var t,n;return(null!=(t=this.views)?t.length:void 0)&&this.views.forEach(function(e){return e.view.$el.detach()}),this.views=[],null!=e&&e.forEach((n=this,function(e){var t;if(t=n.getView(e))return n.views.push(t)})),this.renderInfos()},t.prototype.prependView=function(e){var t,n,r;return n=e.name,r=e.view,t=e.isRequired,this.views.unshift({name:n,view:r,isRequired:t}),this.$el.prepend(r.$el)},t.prototype.appendView=function(e){var t,n,r;return n=e.name,r=e.view,t=e.isRequired,this.views.push({name:n,view:r,isRequired:t}),this.$el.append(r.$el)},t.prototype.canEditScenarioField=function(e){var t,n,r;return n=e.allowedRoleIds,t=e.allowedActors,[(r=this,function(){return!r._projectId}),function(e){return function(){return l.hasAdminAuthority(e._projectId)}}(this),function(e){return function(){return v(e.projectModel.get("role"),n,l.getPermissionBinding(e._projectId).externalRoleIds)}}(this),function(e){return function(){return g(y.user.id,e.objectModel.get("_executorId"),e.objectModel.get("_creatorId"),t||[])}}(this)].some(function(e){return e()})},t.prototype.getView=function(e){var t,n,r,o,i,s,a,c,l;switch(s=e.fieldType,t=e._customfieldId,n=e._customfieldentityId,r=e._roleIds,c="customfield"===s?t:s,a=this.requiredScenarioFieldTypes.indexOf(c)>=0,o=this.canEditScenarioField(e)&&!this.objectModel.get("isArchived"),s){case"note":case"content":return{fieldType:s,view:this.initNoteView({noteAttribute:s,isRequired:a,canEdit:o})};case"location":return{fieldType:s,view:this.initLocationView(a,o)};case"priority":return{fieldType:s,view:this.initPriorityView(a,o)};case"tag":return{fieldType:s,view:this.initTagView(a,o)};case"worktimes":return{fieldType:s,view:this.initTaskWorktimeView(a,o)};case"storyPoint":return{fieldType:s,view:this.initStoryPoint(a,o)};case"taskProgress":return{fieldType:s,view:this.initTaskProgress(a,o)};case"sprint":return{fieldType:s,view:this.initSprintView(a,o)};default:if(i=null!=(l=this.customFieldLinksCollection)?l.findWhere({_customfieldId:t}):void 0)return(i=i.clone()).set({_customfieldentityId:n}),{name:c,view:this.initCustomFieldView(i,r,a,o)}}},t.prototype.isViewDisabled=function(e){return this.disabledItems.indexOf(e)>=0},t.prototype.isSimplifiedVersion=function(){return"taskCard"===this.displayType},t.prototype.initTaskProgress=function(e,t){return this.requestSubView(c,{objectModel:this.objectModel,isRequired:e,canEdit:t})},t.prototype.initTagView=function(e,t){var n;return n=this.requestSubView(d,{objectModel:this.objectModel,_projectId:this._projectId,disabled:this.isViewDisabled("tag"),withIcon:this.withIcon,simplifiedVersion:this.isSimplifiedVersion(),isRequired:e,canEdit:t}),this.listenTo(n,"over",this.renderInfos),n},t.prototype.initNoteView=function(e){var t,n,r;return r=e.noteAttribute,n=e.isRequired,t=e.canEdit,this.isSimplifiedVersion()?this.requestSubView(i,{objectModel:this.objectModel,isRequired:n,canEdit:t}):this.requestSubView(s,{objectModel:this.objectModel,disabled:this.isViewDisabled("note"),noteAttribute:r,isRequired:n,canEdit:t})},t.prototype.initLocationView=function(e,t){return this.requestSubView(o,{objectModel:this.objectModel,isRequired:e,canEdit:t})},t.prototype.initPriorityView=function(e,t){return this.requestSubView(a,{taskModel:this.objectModel,simplifiedVersion:this.isSimplifiedVersion(),isRequired:e,canEdit:t})},t.prototype.initStoryPoint=function(e,t){return this.requestSubView(p,{objectModel:this.objectModel,simplifiedVersion:this.isSimplifiedVersion(),isRequired:e,canEdit:t})},t.prototype.initTaskWorktimeView=function(e,t){return!this.objectModel.id?this.requestSubView(h,{objectModel:this.objectModel,simplifiedVersion:this.isSimplifiedVersion(),isRequired:e,canEdit:t}):this.requestSubView(m,{objectModel:this.objectModel,_projectId:this._projectId,isRequired:e,canEdit:t})},t.prototype.initSprintView=function(e,t){return this.requestSubView(u,{objectModel:this.objectModel,isRequired:e,canEdit:t})},t.prototype.initCustomFieldView=function(e,t,n,o){return this.requestSubView(r,{objectModel:this.objectModel,projectModel:this.projectModel,boundToObjectType:this.boundToObjectType,simplifiedVersion:this.isSimplifiedVersion(),customFieldModel:e,_roleIds:t,isRequired:n,canEdit:o})},t.prototype.renderInfos=function(){var e,t,n,r,o;for(t=e=0,n=(r=this.views).length;e<n;t=++e)o=r[t].view,this.$el.append(o.$el);return this},t}()},xY22QeOT:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("wd/RKGTj"),s=n.n(i),a=n("TSYQbtd+"),c=n.n(a),l=n("Z7XVTGXp"),u=(n("N8F/jIXO"),{unset:1,day:1,week:1,month:1,quarter:1,year:4}),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.isToday=function(){var e=Object(l.H)(this.props.mode);return s()().isSame(this.props.date,e)},t.prototype.getStyle=function(){return{width:Object(l.y)(this.props.mode,this.props.date)}},t.prototype.getUnitTodayLeft=function(){var e=this.props.mode;switch(e){case"unset":case"day":return 0;case"week":case"month":case"quarter":case"year":var t=s()(),n=t.clone().startOf(e);return Object(l.j)(t,n,e)}},t.prototype.getTodayStyle=function(){var e=this.props.mode,t=u[e];return{width:Object(l.x)(e)*t,left:this.getUnitTodayLeft()}},t.prototype.isLastDayInYearMode=function(){return"year"===this.props.mode&&s()().isSame(s()().endOf("year"),"day")},t.prototype.renderOnToday=function(){if(!this.isToday())return null;var e=c()("on-today",{darken:"day"!==this.props.mode});return o.createElement("div",{className:e,style:this.getTodayStyle()})},t.prototype.render=function(){var e=c()("gantt-chart-fence-component",{"with-border-highlight":this.isLastDayInYearMode()});return o.createElement("div",{className:e,style:this.getStyle()},this.renderOnToday())},t}(o.PureComponent),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getStartDate=function(){return s()(this.props.startDate)},t.prototype.getUnits=function(){for(var e=[],t=this.props,n=t.mode,r=t.from,o=t.to,i=Object(l.H)(n),s=this.getStartDate().add(r-1,i),a=r;a<=o;a++)e.push(s.add(1,i).toISOString());return e},t.prototype.renderFences=function(){var e=this;return this.getUnits().map(function(t){return o.createElement(p,{key:t,date:t,mode:e.props.mode})})},t.prototype.render=function(){return o.createElement("section",{className:"gantt-chart-fences"},this.renderFences())},t}(o.PureComponent);n.d(t,"a",function(){return d})},"xZLF/QRF":function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o='<div class="tag-detail" data-id="'+e._id+'"> <span class="tag hinted" data-title="'+r(e.name)+'"> <span class="tag-label tag-label-'+e.color+'"></span> <span class="tag-name">'+r(e.name)+'</span> </span> <a class="tag-info ';return e.tasksCount||(o+="disabled"),o+='" data-target=".tag-tasks-view">'+tb_i18n.get("tag.view.task.info",e.tasksCount)+"</a>"+tb_i18n.get("comma")+' <a class="tag-info ',e.eventsCount||(o+="disabled"),o+='" data-target=".tag-events-view">'+tb_i18n.get("tag.view.event.info",e.eventsCount)+"</a>"+tb_i18n.get("comma")+' <a class="tag-info ',e.postsCount||(o+="disabled"),o+='" data-target=".tag-posts-view">'+tb_i18n.get("tag.view.post.info",e.postsCount)+"</a>"+tb_i18n.get("comma")+' <a class="tag-info ',e.worksCount||(o+="disabled"),o+='" data-target=".tag-works-view">'+tb_i18n.get("tag.view.file.info",e.worksCount)+"</a>",(e.hasEntry||e.entriesCount>0)&&(o+=""+tb_i18n.get("comma")),o+=" ",(e.hasEntry||e.entriesCount>0)&&(o+=' <a class="tag-info ',e.entriesCount||(o+="disabled"),o+='" data-target=".tag-entries-view">'+tb_i18n.get("tag.view.entry.info",e.entriesCount)+"</a> "),o+="</div>"}},xbWsbIB7:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("TSYQbtd+"),o=n.n(r),i=n("tLZJUYWX"),s=n("q1tIBJhx"),a=function(e){var t="project-list-add-card";return s.createElement("div",{className:o()(t+"__component",e.className)},s.createElement("a",{className:t+"__handler",onClick:function(t){var n=e.onCreateProjectClick;n&&n(t)}},s.createElement("span",{className:"icon icon-plus"}),s.createElement("span",{className:t+"__handler__text"},i.get("create.new.project"))))}},xd5oHs80:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P={}.hasOwnProperty,x=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};T=n("a+N5u/Cl"),j=n("sa1Ed382"),w=n("RLD3BeS/").ToastWithObject,S=n("3eMzznN/"),l=n("wd/RKGTj"),s=n("CrUnfw5r"),k=n("ioaOqjIU"),v=n("+BDmEJp8"),d=n("77NnVLwu"),y=n("oq1bWpp9"),f=n("q6u3XLOb"),h=n("mQWTeDcC"),o=n("JQTltdjs"),a=n("egP4WLFV"),m=n("YdqH4v7N"),E=n("vmWJWrVe"),u=n("dSYllay4"),r=n("yeXCkzp4"),g=n("VilZs/mC"),C=n("YzJ1+ZsV"),p=n("n2Lzi2oi"),b=n("GPNoQLd7"),_=n("rx72K1eX").Timestamp,M=function(){return[{type:"task",label:"task",title:tb_i18n.get("tasks"),icon:"icon-board"},{type:"post",label:"post",title:tb_i18n.get("post"),icon:"icon-wall"},{type:"work",label:"file",title:tb_i18n.get("files"),icon:"icon-file"},{type:"event",label:"event",title:tb_i18n.get("events"),icon:"icon-calendar"},{type:"entry",label:"entry",title:tb_i18n.get("entries"),icon:"icon-bookkeeping-logo"},{type:"tag",label:"tag",title:tb_i18n.get("tags"),icon:"icon-tag"},{type:"collection",label:"folder",title:tb_i18n.get("collection"),icon:"icon-folder"},{type:"tasklist",label:"task group",title:tb_i18n.get("tasklist"),icon:"icon-stage"},{type:"testcase",label:"testcase",title:tb_i18n.get("testcase"),icon:"icon-testcase"}]},I={posts:"post",files:"work",events:"event",bookkeeping:"entry",tasks:"task"},c=["task","post","event","entry","work","testcase"],i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)P.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,E),t.prototype.viewName="ArchiveView",t.prototype.className="archive-view flex-horiz",t.prototype.events={"click .archive-item":"switchArchive","click .unarchive-handler":"openUnarchiveMenu","click .remove-handler":"deleteModelObject","click .archive-body":"openDetail"},t.prototype.initialize=function(e){var t,n;return this._projectId=e._projectId,e.appName||(e.appName=j.APP.getCurrentAppName()),this.currentArchive=(t=I[e.appName])?t:I.tasks,this.subscribe(d.fetch$(this._projectId).do((n=this,function(e){return n.projectModel=e,n.renderBasic(),n.reset()}))),this},t.prototype.reset=function(){return this.refreshSelected(),this.load({success:(e=this,function(){return e.listen(),e.renderArchives(),e.setupScroll(e.$archiveList),e.setupLoadMore(10)})});var e},t.prototype.load=function(e){var t;return new s(null,{boundToObjectType:"",_boundToObjectId:this._projectId+"_"+this.currentArchive,_projectId:this._projectId,attrs:{objectType:this.currentArchive}}).fetch({attrs:{objectType:this.currentArchive},beforeSend:(t=this,function(){return t.showLoadingIndicator(t.$archiveList)}),success:function(t){return function(n){if(t.$el)return t.hideLoadingIndicator({animated:!1}),t.archivesCollection=n,null!=e&&"function"==typeof e.success?e.success():void 0}}(this)}),this},t.prototype.loadMore=function(e){var t,n;return null!=(t=this.archivesCollection)&&t.loadMore({attrs:{objectType:this.currentArchive},beforeSend:(n=this,function(){return n.showLoadingIndicator(n.$archiveList)}),success:function(t){return function(n,r){if(t.$el)return t.hideLoadingIndicator({animated:!0}),t.archivesCollection.hasMore?"function"==typeof e?e():void 0:t.showEndPoint(t.$archiveList)}}(this)}),this},t.prototype.listen=function(){return this.listenTo(this.archivesCollection,"add",this.renderArchive),this.listenTo(this.archivesCollection,"remove destroy",this.removeArchive),this},t.prototype.renderBasic=function(){var e;return e={archives:M()},this.$el.html(a(e)),this.$archiveList=this.$(".archive-list"),this},t.prototype.renderArchives=function(){var e;return this.$(".react-time-stamp").each((e=this,function(t,n){return e.unmountReact(n)})),this.$archiveList.empty(),this.archivesCollection.length?(this.$(".archive-list-header").show(),this.archivesCollection.each(function(e){return function(t){return e.renderArchive(t)}}(this))):this.renderPlaceholder(),this},t.prototype.renderPlaceholder=function(){return this.$(".archive-list-header").hide(),this.$archiveList.append(u()),this},t.prototype.renderArchive=function(e){var t,n,r,i;return(i=e.toJSON()).permissions=e.hasPermissions("put.archive","del"),t=$(o(i)),(n=this.$(".archive[data-id="+i._id+"]")).length?n.replaceWith(t):this.$archiveList.append(t),this.renderTaskIdLabel(t.find(".task-id-placeholder"),i.uniqueId),r=t.find(".react-time-stamp"),this.requestReactView(r[0],_,{initialTime:l(i.created).toDate()}),this},t.prototype.renderTaskIdLabel=function(e,t){return this.requestSubView(b,{projectModel:this.projectModel,uniqueId:t}).bind(e)},t.prototype.openDetail=function(e){var t,n,r,o,i;return t=$(e.currentTarget).closest(".archive"),n=this.archivesCollection.get(t.data("id")).toJSON(),(o=t.data("id").split("_archived")[0])&&"undefined"!==o?((i={}).hasLink=!1,r=n.boundToObjectType,x.call(c,r)>=0&&j.APP.openObjectPreviewer(o,r,i)):this.openError(tb_i18n.get(n.boundToObjectType)),j.gta.event({action:"show archived content",type:n.boundToObjectType,control:"Side Menu"}),this},t.prototype.refreshSelected=function(){return this.$(".archive-item[data-type="+this.currentArchive+"]").addClass("selected").siblings().removeClass("selected"),this},t.prototype.removeArchive=function(e){var t;return t=this.$archiveList.find(".archive[data-id="+e.id+"]"),this.unmountReact(t.find(".react-time-stamp")[0]),t.remove(),this.archivesCollection.length||this.renderPlaceholder(),this},t.prototype.switchArchive=function(e){var t;return t=e.currentTarget?$(e.currentTarget):e,this.currentArchive=t.data("type"),this.reset(),this},t.prototype.openUnarchiveMenu=function(e){var t,n,r,o,i,s,a,c;switch(null!=(s=this.unarchiveMenuView)&&s.remove(),n=$(e.currentTarget),t=n.closest(".archive").addClass("active"),r=this.archivesCollection.get(t.data("id")),i={$toggler:n,$target:t,projectModel:this.projectModel,currentModel:r,onHidden:function(){return t.removeClass("active")}},c=this,o=function(e){return i=c.assembleObjectUnarchiveOptions(r,i),i=T.assign(i,e),c.unarchiveMenuView=c.requestSubView(C,i).show()},a=r.get("boundToObjectType")){case"task":this.renderTaskUnarchiveMenu(r,o,i);break;case"tasklist":this.renderTasklistUnarchiveMenu(n,o);break;case"testcase":t.removeClass("active"),r.unarchiveObject({success:function(){return w.unarchive(r)}});break;default:o()}return j.gta.event({action:"unarchive content",type:a,control:"Side Menu"})},t.prototype.renderTaskUnarchiveMenu=function(e,t,n){var r,o;return r=this.assembleTaskUnarchiveOptions(e,n),Promise.all([S.warehouse.resolveFetch(y,e.get("_boundToObjectId")),S.warehouse.resolveFetch(k,this._projectId)]).then((o=this,function(e){var t,n;return t=e[0],n=e[1],Promise.all([Promise.resolve(t),Promise.resolve(n),o.projectModel.isSprintEnabled()&&t.get("_sprintId")?f.resolveFetch(t.get("_sprintId")):Promise.resolve(void 0),o.projectModel.isTaskflowEnabled()&&t.get("_scenariofieldconfigId")?h.resolveFetch(t.get("_scenariofieldconfigId"),{attrs:{withTaskflowstatus:!0}}):Promise.resolve(void 0)])})).then(function(e){return function(o){var i,s,a,c,l;return c=o[0],l=o[1],a=o[2],i=o[3],"complete"===(null!=a?a.get("status"):void 0)?e.renderUnarchiveConfirm({$toggler:n.$toggler,title:tb_i18n.get("unarchive.denied"),description:tb_i18n.get("unarchive.denied.sprint.completed"),onHidden:function(){return n.$target.removeClass("active")}}):e.projectModel.isTaskflowEnabled()?(s=T.extend(n,{scenarioFieldModel:i,tasklistModel:l.get(c.get("_tasklistId"))}),void e.renderTaskUnarchiveMenuWithStatus(c,s)):c.isSubtask()?t({isSubtask:c.isSubtask(),_taskId:c.get("ancestorIds")[0]}):e.renderTaskUnarchiveMenuWithStage(c,T.extend({},r,{tasklistModel:l.get(c.get("_tasklistId")),organizationId:c.get("_organizationId")||e.projectModel.get("_organizationId"),optionalType:"scenarioConfigs"}))}}(this))},t.prototype.renderTaskUnarchiveMenuWithStage=function(e,t){var n,r;return r=this,n=function(e){return r.unarchiveMenuView=r.requestSubView(g,e).show()},v.fetch(e.get("_tasklistId"),{silentError:!0,success:function(r){var o;return o=r.get(e.get("_stageId")),n(T.extend(t,{stageModel:o}))},error:function(){return n(t)}})},t.prototype.renderTaskUnarchiveMenuWithStatus=function(e,t){var n,r,o,i,s,a,c,l;return a=null!=(i=t.scenarioFieldModel)?i.toJSON():void 0,o=e.getAcceptedStatusKinds(),r=a.proTemplateConfigType?[a.proTemplateConfigType]:void 0,(c=(l=(null!=a?a.taskflowstatuses:void 0)||[]).find(function(t){return t._id===e.get("_taskflowstatusId")}))&&(s=c.kind,x.call(o,s)>=0)||(c=l.find(function(e){var t;return t=e.kind,x.call(o,t)>=0})),n=T.extend(t,{projectModel:this.projectModel,frozenTypes:["project","scenarioConfig"],optionalType:"scenarioConfigs",scenarioFieldConfig:a,taskflowStatus:c,acceptedScenarioTypes:r,acceptedStatusKinds:o,organizationId:this.projectModel.get("_organizationId"),success:function(n){var r,o,i,s;return o=n._taskflowstatusId,r=n._scenariofieldconfigId,i=n.sprintModel,s=n.tasklistModel,e.unarchiveByStatus(o,{attrs:{_tasklistId:null!=s?s.get("_id"):void 0,_sprintId:null!=i?i.get("_id"):void 0,_scenariofieldconfigId:r,_parentId:e.get("ancestorIds")[0]}}),w.unarchive(t.currentModel)}}),this.unarchiveMenuView=this.requestSubView(g,n).show()},t.prototype.renderTasklistUnarchiveMenu=function(e,t){return this.projectModel.isAppEnabled("tasklist")?t():this.renderUnarchiveConfirm({$toggler:e,title:tb_i18n.get("unarchive"),description:tb_i18n.get("unarchived.tasklist.tip")})},t.prototype.renderUnarchiveConfirm=function(e){return this.unarchiveMenuView=this.requestSubView(p,e).show()},t.prototype.assembleTaskUnarchiveOptions=function(e,t){return T.extend(t,{frozenTypes:["project"],success:(n=this,function(t){return n.stageModel=t.stageModel,e.unarchiveObject({_stageId:n.stageModel.id?n.stageModel.id:void 0,success:function(){return w.unarchive(e)}})})});var n},t.prototype.assembleObjectUnarchiveOptions=function(e,t){return T.extend(t,{title:tb_i18n.get("unarchive"),success:function(){}})},t.prototype.deleteModelObject=function(e){var t,n,o,i;return n=$(e.currentTarget),t=$(e.currentTarget).closest(".archive").addClass("active"),i=(o=this.archivesCollection.get(t.data("id"))).toJSON().boundToObjectType,t.data("bs.popover")||this.requestSubView(r,{$toggler:n,title:tb_i18n.get("archive.list.menu.remove.completely"),confirmDelete:tb_i18n.get("archive.list.menu.confirm.delete."+i),currentModel:o,success:function(){return n.addClass("active")},onHidden:function(){return t.removeClass("active")}}).show(),j.gta.event({action:"delete archived content",type:i,control:"Side Menu"}),this},t}(),T.extend(i.prototype,m),e.exports=i},xfy0ukZ1:function(e,t,n){e.exports=n.p+"images/d_hehe@2x.88af0f23.png"},xhWM84Ar:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("tLZJUYWX"),c=n("GESwhXbR"),l=n("DOZCBSCZ"),u=n("YqUJfXDr"),p=n("8lwrpTqz"),d=n("8aUxFyB8"),h=n("3eMzznN/"),m=h.formatDate,f=h.formatWorktime,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.removeWorktime=function(){var e=t.props.worktime._id;t.props.deleteWorktime(e)},t}return r.d(t,e),t.prototype.renderRemove=function(){return this.props.worktime.hasDelPermission&&o.createElement("div",{className:"remove-wrapper flex flex-center flex-vcenter"},o.createElement(c.Icon,{name:"circle-remove invisible",size:12,onClick:this.removeWorktime}))},t.prototype.render=function(){var e=this.props.worktime,t=e.creator,n=e.value,r=e.recordDate,i=e.hasDelPermission,c=m(r,{isUsePref:!0}).dateString,l=f(n),u=s()("task-worktime-item flex",{"has-permission":i});return o.createElement("div",{className:u},this.renderRemove(),o.createElement("div",{className:"member-wrapper flex-space flex"},o.createElement("div",{className:"member-info flex-vert"},o.createElement("div",null,t.name),o.createElement("div",{className:"created"},c)),o.createElement("div",{className:"used-time"},a.get("task.worktime.format.time",l))))},t}(o.PureComponent),v=n("wd/RKGTj"),b=n.n(v),y=n("LA31BA3Q"),k=n("3eMzznN/"),_=function(e){function t(t){var n=e.call(this,t)||this;return n.addWorktime=function(){var e=n.state,t=e.usedTime,o=e.recordDate,i=Object(y.a)(Number(t));n.props.addWorktime(i,o),n.setState(r.a({},n.state,{usedTime:""})),n.props.gtaHandler({action:"edited recorded taskHours",category:b()().isSame(o,"day")?"today":"recorded"})},n.onSubmitDate=function(e){n.setState(r.a({},n.state,{recordDate:e.date.startOf("day").toISOString()}))},n.onChangeUsedTime=function(e){var t=e.currentTarget.value,o=Number.MAX_SAFE_INTEGER/60;Object(y.b)(t)&&Number(t)<o&&n.setState(r.a({},n.state,{usedTime:t}))},n.quickSubmit=function(e){13===e.keyCode&&n.addWorktime()},n.switchEditMode=function(){n.setState(r.a({},n.state,{editing:!0}))},n.state={editing:!1,recordDate:b()().startOf("day").toISOString(),usedTime:""},n}return r.d(t,e),t.prototype.renderDate=function(){var e=this.state.recordDate;return k.formatDate(e,{isUsePref:!0}).dateString},t.prototype.renderDatePicker=function(){var e=this.state.recordDate;return o.createElement(c.DatePicker,{date:b()(e),endDate:b()().add(1,"day"),calendarOnly:!0,clearable:!1,nested:!0,onChange:this.onSubmitDate},o.createElement("div",{className:"datepicker flex-fill"},o.createElement(c.TextButton,null," ",this.renderDate()," ")))},t.prototype.renderConfirmBtn=function(){return this.state.editing&&o.createElement(c.TextButton,{color:"blue",onClick:this.addWorktime},a.get("confirm"))},t.prototype.render=function(){return o.createElement("div",{className:"task-worktime-add-wrapper"},o.createElement("div",{className:"add-wrapper flex flex-vcenter"},this.renderDatePicker(),o.createElement("input",{className:"form-control",placeholder:a.get("task.worktime.add.placeholder"),value:this.state.usedTime,onFocus:this.switchEditMode,onChange:this.onChangeUsedTime,onKeyDown:this.quickSubmit}),this.renderConfirmBtn()))},t}(o.PureComponent),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.UNSAFE_componentWillUpdate=function(e){e.worktimes.worktimes.length<this.props.worktimes.worktimes.length&&this.props.onRequestMoreWorktimes()},t.prototype.renderPlan=function(){var e=this.props,t=e.totalTime,n=e.hasPutPermission,r=e.updateTotalTime,i=e.gtaHandler,s=e.isRequired;return o.createElement(d.a,{totalTime:t,hasPutPermission:n,isRequired:s,updateTotalTime:r,gtaHandler:i})},t.prototype.renderUsedTime=function(){return o.createElement("div",{className:"used-wrapper flex"},o.createElement("strong",{className:"hint-title flex-static"},a.get("task.worktime.used.time.title")),o.createElement("span",{className:"used-value flex-space text-right"},a.get("task.worktime.format.time",this.props.usedTime)))},t.prototype.renderAdd=function(){return this.props.hasPostPermission?o.createElement(_,{addWorktime:this.props.addWorktime,gtaHandler:this.props.gtaHandler}):o.createElement("div",{className:"task-worktime-add-limit text-center"},a.get("task.worktime.add.time.limit"))},t.prototype.renderWorktimeList=function(){var e=this,t=this.props.worktimes,n=t.isInitial,r=t.isLoading,i=t.worktimes,s=null;if(n||r)s=o.createElement(l.a,null);else{if(!i.length)return o.createElement("div",{className:"worktime-list-empty text-center"},o.createElement("div",{className:"illustrate-img"}),o.createElement("p",null,a.get("task.worktime.list.empty")));s=i.map(function(t){return o.createElement(g,{key:t._id,worktime:t,deleteWorktime:e.props.deleteWorktime})})}return o.createElement("div",{className:"worktime-list"},s)},t.prototype.renderLoadMore=function(){var e=this.props.worktimes,t=e.isLoading,n=e.isLoadingMore,r=e.hasMore,i=this.props.onRequestMoreWorktimes;return!t&&!!e.worktimes.length&&o.createElement(u.LoadMore,{throttleDelay:218,clause:!n,onEnter:i,hasMore:r,endWith:null})},t.prototype.render=function(){return o.createElement("div",{className:"task-worktime-main-panel thin-scroll",onWheel:p.a},this.renderPlan(),o.createElement("div",{className:"line-divider"}),this.renderUsedTime(),this.renderAdd(),this.renderWorktimeList(),this.renderLoadMore())},t}(o.PureComponent);n("eh/6l5m9");n.d(t,"Summary",function(){return C});var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onRequestWorktimes=function(){setTimeout(t.props.onRequestWorktimes.bind(t),300),t.props.gtaHandler({action:"open taskHours edit"})},t}return r.d(t,e),t.prototype.checkSummary=function(){var e=this.props,t=e.totalTime,n=e.usedTime;return!(!t&&!n)},t.prototype.renderWorktimeAside=function(){return o.createElement("div",{className:"worktime-aside detail-infos-aside"},o.createElement(c.Icon,{name:"tachometer"}),o.createElement("span",{className:"worktime-title"},a.get("worktime")))},t.prototype.renderAddHint=function(){return!this.checkSummary()&&o.createElement("a",{className:"flex-space summary empty"},a.get("to.be.added"))},t.prototype.renderSummary=function(){if(!this.checkSummary())return null;var e=this.props,t=e.totalTime,n=e.usedTime,r=t?a.get("task.worktime.summary",t,n):a.get("task.worktime.summary.totalTime.initial",n);return o.createElement("a",{className:"flex-space summary"},r)},t.prototype.renderMainPanelContent=function(){var e={totalTime:this.props.totalTime,usedTime:this.props.usedTime,worktimes:this.props.worktimes,hasPutPermission:this.props.hasPutPermission,hasPostPermission:this.props.hasPostPermission,onRequestMoreWorktimes:this.props.onRequestMoreWorktimes,updateTotalTime:this.props.updateTotalTime,addWorktime:this.props.addWorktime,deleteWorktime:this.props.deleteWorktime,gtaHandler:this.props.gtaHandler,isRequired:this.props.isRequired};return o.createElement(w,r.a({},e))},t.prototype.renderDropdown=function(){return o.createElement(c.Dropdown,{placement:"bottomLeft",transitionCls:"",content:this.renderMainPanelContent(),nested:!0,persistence:!0,onOpen:this.onRequestWorktimes},o.createElement("div",{className:"task-worktime-wrap detail-infos-content flex-fill"},this.renderAddHint(),this.renderSummary()))},t.prototype.render=function(){var e=s()("item-mask",{hide:!this.props.isArchived});return o.createElement("div",{className:"task-worktime-container flex flex-vcenter"},this.renderWorktimeAside(),this.renderDropdown(),o.createElement("div",{className:e}))},t}(o.PureComponent)},xi8Rfh2S:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("wd/RKGTj"),s=n.n(i),a=n("tLZJUYWX"),c=n("Z7XVTGXp"),l=(n("DQtvbgKp"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getDateStr=function(){switch(this.props.mode){case"unset":return null;case"day":return s()(this.props.date).format("D ddd");case"week":var e=s()(this.props.date),t=e.clone().endOf("week"),n=e.format("wo");return e.format("M.D")+" - "+t.format("M.D")+",  "+n;case"month":return s()(this.props.date).format("MMM");case"quarter":var r=s()(this.props.date).quarter();return a.get("gantt.cal.scale2.quarter",r);case"year":return null}},t.prototype.getStyle=function(){return{width:Object(c.y)(this.props.mode,this.props.date)}},t.prototype.render=function(){var e=this.getDateStr();return e&&o.createElement("div",{className:"gantt-chart-day-component",style:this.getStyle()},e)},t}(o.PureComponent)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getStartDate=function(){return s()(this.props.startDate)},t.prototype.getDays=function(){for(var e=[],t=this.props,n=t.mode,r=t.from,o=t.to,i=Object(c.H)(n),s=this.getStartDate().add(r-1,i),a=r;a<=o;a++)e.push(s.add(1,i).toISOString());return e},t.prototype.renderDays=function(){var e=this;return this.getDays().map(function(t){return o.createElement(l,{key:t,date:t,mode:e.props.mode})})},t.prototype.render=function(){return o.createElement("section",{className:"gantt-chart-days"},this.renderDays())},t}(o.PureComponent);n.d(t,"a",function(){return u})},xijJaQkU:function(e,t,n){},xip8tQxt:function(e,t,n){},"xls+Hirz":function(e,t,n){},xq4dGhJY:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"IndieTaskCreatorAction",function(){return g}),n.d(r,"PaymentStatusAction",function(){return b}),n.d(r,"CreateOrgAction",function(){return y}),n.d(r,"CleanNewOrgStatusAction",function(){return w}),n.d(r,"CopyProjectsAction",function(){return M}),n.d(r,"CreateTemplateAction",function(){return j}),n.d(r,"RaiseOnlineServiceAction",function(){return x}),n.d(r,"RaiseHelpMenuAction",function(){return N}),n.d(r,"OpenPersonalSettingsAction",function(){return D}),n.d(r,"SetLabsOnboardingDoneAction",function(){return z}),n.d(r,"SaveProgressAction",function(){return V}),n.d(r,"GTAAction",function(){return U}),n.d(r,"DebugAction",function(){return $}),n.d(r,"MemsetAction",function(){return G}),n.d(r,"GitIntegrationSettings",function(){return X}),n.d(r,"wrapAction",function(){return Y});var o={};n.r(o),n.d(o,"dom",function(){return Q}),n.d(o,"env",function(){return ve}),n.d(o,"user",function(){return ke}),n.d(o,"delay",function(){return _e}),n.d(o,"logic",function(){return Ce}),n.d(o,"route",function(){return Se}),n.d(o,"cohort",function(){return Te}),n.d(o,"memory",function(){return Me}),n.d(o,"project",function(){return Ne}),n.d(o,"progress",function(){return Re}),n.d(o,"orgcount",function(){return Le}),n.d(o,"preference",function(){return Ae}),n.d(o,"usersource",function(){return Ue}),n.d(o,"new_test_in_labs",function(){return He});var i={};n.r(i),n.d(i,"OnboardingSlide",function(){return Xe}),n.d(i,"GridSelector",function(){return Ye}),n.d(i,"Tooltip",function(){return Ke}),n.d(i,"VideoContainer",function(){return Qe}),n.d(i,"PageSpecificHelpVideo",function(){return Ze}),n.d(i,"LabsNotifier",function(){return et}),n.d(i,"OrgInviteMember",function(){return tt});var s={};n.r(s),n.d(s,"GTA",function(){return ht}),n.d(s,"Click",function(){return mt}),n.d(s,"Router",function(){return vt});var a=n("a+N5u/Cl"),c=n("8yf6doCl"),l=n("4c1CS0b3"),u=n("mrSGxOB2"),p=n("sa1Ed382"),d=n("tLZJUYWX"),h=n.n(d),m=n("OmupbwLD"),f=n.n(m),g=function(){function e(){this.name="open-indie-task-creator"}return e.prototype.execute=function(e){var t=e.event;return u.b(this,void 0,void 0,function(){var e;return u.e(this,function(r){switch(r.label){case 0:return[4,Promise.resolve().then(n.t.bind(null,"H5U46Bxa",7))];case 1:return e=r.sent(),p.APP.requestSubView(f.a).open(e.default,{_organizationId:t.organizationId,_projectId:null,_executorId:t.executorId,content:h.a.get("organization.payment.notify.title"),note:h.a.get("organization.payment.notify"),showAllField:!0,forceResetProject:!0}),[2]}})})},e}(),v=n("NtzEC3Pa"),b=function(){function e(){this.name="open-payment-status"}return e.prototype.execute=function(e){var t=e.event;Object(v.openPaywall)({viewType:v.ViewType.PaymentStatus,extra:{payment:t.payment,organizationId:t.organizationId,role:t.role,from:t.from}})},e}(),y=function(){function e(){this.name="open-organization-creator"}return e.prototype.execute=function(e){var t=e.payload||"Personal Upgrade",n="Personal Upgrade"===t?-1:1;Object(v.openOrganizationCreator)(t,n)},e}(),k=n("CxY0Mkc1"),_=n("QyjeWo4p"),w=function(){function e(){this.name="clean-new-org-status"}return e.prototype.cleanUrlQuery=function(e){var t=k.parse(window.location.href),n=_.parse(t.query);n[e]=void 0,t.search=_.stringify(n);var r=k.format(t);window.history.replaceState(null,"",r)},e.prototype.execute=function(e){var t=this;e.payload.urlParams.forEach(function(e){t.cleanUrlQuery(e)})},e}(),C=n("GESwhXbR"),S=n("90U+kJWN"),E=n("bZr3G77e"),T=n("sa1Ed382");function I(){return T.PREFERENCE.get("lastWorkspace")||""}var M=function(){function e(){this.name="copy-projects"}return e.prototype.execute=function(e){return u.b(this,void 0,void 0,function(){var t,r,o,i;return u.e(this,function(s){switch(s.label){case 0:return e.event?(t=e.event.copyList||[],[4,Promise.resolve().then(n.bind(null,"eXJ3Aer9"))]):[2];case 1:return r=s.sent().OrganizationPortalBridge,o=0,i=function(e){e>=t.length&&r.forceRefreshPortalForOnboarding()},t.forEach(function(e){var t=e.id,n=e.name,r=e.category;E.post("projects/from-template",{name:n,category:r,_projecttemplateId:t,uniqueIdPrefix:Object(S.getUniqueId)(4,"onlyAlphabet"),_organizationId:I()},{success:function(){T.gta.event({action:"added content",category:n,note1:r,method:"click",page:"Org Projects Page",segment:"Scene Onboarding",type:"project"});var e=I()?d.get("onboarding.has.created.scenario"):d.get("onboarding.has.created.scenario.in.personal");C.Toast.success(e),i(++o)},error:function(){i(++o)}})}),[2]}})})},e}(),j=function(){function e(){this.name="open-template-selector"}return e.prototype.execute=function(e){return u.b(this,void 0,void 0,function(){var t,n;return u.e(this,function(r){switch(r.label){case 0:return e.event=e.event||{},t=e.payload||{},n=JSON.parse(decodeURIComponent(e.event.payload||"{}")),[4,p.APP.openCreator("project",{_fsm_state:t.fsm_state||n.fsm_state||"template-wall",selectedTemplate:{categories:[t.category||n.category||"rd"]},_direct_template:t.direct_template||!1})];case 1:return r.sent(),[2]}})})},e}(),P=n("bctXzzPQ"),x=function(){function e(){this.name="raise-online-service"}return e.prototype.execute=function(e){var t=P.getInstance();t.boot(),e.payload&&t.serviceType===P.ServiceType.Intercom&&t.update(e.payload)},e}(),N=function(){function e(){this.name="raise-help-menu"}return e.prototype.execute=function(e){var t=document.querySelector(".nav-question");t&&t.click()},e}(),O=n("sa1Ed382"),R=n("WVgvAmgj"),D=function(){function e(){this.name="open-personal-settings"}return e.prototype.execute=function(e){var t=e.payload?e.payload.tabName:void 0;O.APP.requestSubView(R,{tabName:t})},e}(),L=n("YByE0VpC"),z=function(){function e(){this.name="set-labs-onboarding-done"}return e.prototype.execute=function(){Object(L.g)()},e}(),A=n("sa1Ed382"),V=function(){function e(){this.name="save-progress"}return e.prototype.execute=function(e){var t=A.PREFERENCE.url()+"/tips",n=A.PREFERENCE.get("tips");n.onboarding=a.defaults(e.payload,n.onboarding||{}),A.PREFERENCE.save({tips:n},{url:t})},e}(),F=n("sa1Ed382"),B=/^variable:\/\/(.*?)$/i,U=function(){function e(){this.name="gta"}return e.prototype.execute=function(e){F.gta.event(function(e){var t={};return a.each(e.payload,function(n,r){var o=B.exec(n);t[r]=o?e.event[o[1]]:n}),t}(e))},e}(),$=function(){function e(){this.name="debug"}return e.prototype.execute=function(e){console.info(e)},e}(),H=n("sa1Ed382"),G=function(){function e(){this.name="memset"}return e.prototype.execute=function(e){var t=H.onboarding.runtime;a.each(e.payload,function(e,n){t.memset(n,e)})},e}(),q=n("sa1Ed382"),W=n("ypWNgh6R"),J=n("55DrWcZL"),X=function(){function e(){this.name="git-integration-settings"}return e.prototype.execute=function(){var e=q.APP.getCurrentProject();q.APP.requestSubView(W,{title:d.get("activity.panel.menu.git.integrate"),modalPadding:!1}).open(J,{projectModel:e})},e}();function Y(e,t,n){return a.isString(e)?{name:e,event:t,payload:n}:a.extend({event:t,payload:n},e)}var K=function(e,t,n,r){a.each(t,function(t){e&&e.actionBus.next(Y(t,n,r))})},Q=function(){function e(e){this.basis=e.basis,this.actions=e.actions||[],this.falseActions=e.false_actions||[]}return e.prototype.resolve=function(e){var t=!!document.querySelector(this.basis.selector);return K(this.host,t?this.actions:this.falseActions,e),l.Observable.of(t)},e.prototype.connectTo=function(e){this.host=e},e}();n("XxX2O0kP");var Z={$subtract:ae};function ee(e,t,n,r){var o=a.chain(n).keys().intersection(a.keys(e)).first().value();if(!o)return!1;var i=t,s=function(e){switch(e){case"const://DATETIME_NOW":return Date.now();default:return e}}(n[o]);if(!(o in Z))switch(r){case"DateTime":i=new Date(i).valueOf(),s=new Date(s).valueOf()}return e[o](i,s,r)}function te(e,t){return e==t||a.isEqual(e,t)}function ne(e,t){return!te(e,t)}function re(e,t){return e<=t}function oe(e,t){return e>=t}function ie(e,t){return e<t}function se(e,t){return e>t}function ae(e,t,n){return e=ee({$by:function(e,t){return e-t},$from:function(e,t){return t-e}},e,t,n),ee({$eq:te,$ne:ne,$le:re,$ge:oe,$lt:ie,$gt:se},e,t,n)}function ce(e,t){return new RegExp(t).test(e)}function le(e,t){return!!a.findWhere(e,t)}function ue(e,t){return a.contains(e,t)}function pe(e,t){return ee({$eq:te,$ne:ne,$le:re,$ge:oe,$lt:ie,$gt:se,$subtract:ae,$match:ce,$contains:ue,$eleMatch:le},e,t,t.type)}function de(e){for(var t in e)if(e.hasOwnProperty(t)&&"$"===t[0])return!0;return!1}function he(e,t){return fe(t,function(t){return function(e,t){if(de(t))return l.Observable.of(pe(e,t));var n=a.keys(e),r=a.keys(t);return a.every(r,function(e){return de(t[e])||a.contains(n,e)})?a.isMatch(e,t)?l.Observable.of(!0):l.Observable.of(a.every(t,function(t,n){return e[n]===t||pe(e[n],t)||a.isEqual(e[n],t)})):l.Observable.of(!1)}.bind(null,e,t)}).resolve()}var me=function(){function e(t){if(a.has(t,"logical_operator")&&a.has(t,"logical_oprands")){var n=t;this.operator=n.logical_operator,this.oprands=a.map(n.logical_oprands,function(t){return new e(t)})}else this.operator="NONE",this.oprands=[t]}return e.prototype.resolve=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];switch(this.operator){case"NONE":var o=this.oprands[0];return a.isFunction(o)?o.apply(void 0,u.h(n)):a.isObject(o)?(e=o).resolve.apply(e,u.h(n)):l.Observable.of(!!o);case"NOT":return(t=this.oprands[0]).resolve.apply(t,u.h(n)).map(function(e){return!e});case"AND":return l.Observable.of.apply(l.Observable,u.h(this.oprands)).concatMap(function(e){var t;return(t=e).resolve.apply(t,u.h(n))}).every(function(e){return e});case"OR":return l.Observable.of.apply(l.Observable,u.h(this.oprands)).concatMap(function(e){var t;return(t=e).resolve.apply(t,u.h(n))}).first(function(e){return e},function(){return!0},!1);default:return l.Observable.of(!1)}},e}();function fe(e,t){return new me(null==e||function e(t,n){if(a.has(t,"logical_operator")&&a.has(t,"logical_oprands")){var r=t;return{logical_operator:r.logical_operator,logical_oprands:a.map(r.logical_oprands,function(t){return e(t,n)})}}return n(t)}(e,t))}var ge=n("sa1Ed382"),ve=function(){function e(e){this.basis=e.basis,this.actions=e.actions||[],this.falseActions=e.false_actions||[]}return e.prototype.resolve=function(e){var t=this;return he(ge.env,this.basis).do(function(n){K(t.host,n?t.actions:t.falseActions,e)})},e.prototype.connectTo=function(e){this.host=e},e}(),be=n("c2hT3iqT"),ye=n("sa1Ed382"),ke=function(){function e(e){this.userInfo=Object(be.flattenObject)(ye.user.toJSON()),this.basis=e.basis,this.actions=e.actions||[],this.falseActions=e.false_actions||[]}return e.prototype.resolve=function(e){var t=this;return he(this.userInfo,this.basis).do(function(n){K(t.host,n?t.actions:t.falseActions,e)})},e.prototype.connectTo=function(e){this.host=e},e}(),_e=function(){function e(e){this.basis=e.basis,void 0===this.basis.resolveTo&&(this.basis.resolveTo=!0),this.actions=e.actions||[],this.falseActions=e.false_actions||[]}return e.prototype.resolve=function(e){var t=this;return l.Observable.of(this.basis.resolveTo).delay(this.basis.delay).do(function(n){K(t.host,n?t.actions:t.falseActions,e)})},e.prototype.connectTo=function(e){this.host=e},e}(),we=n("sa1Ed382"),Ce=function(){function e(e){var t=this;this.basis=e.basis,this.actions=e.actions||[],this.falseActions=e.false_actions||[],this.filterArray=[],this.logic=fe(this.basis,function(e){var n=o[e.engine];if(n){var r=new n(e);return t.filterArray.push(r),r}return("release"!==we.env||we.onboarding.debug)&&console.warn("Not a implemented onboarding filter",e.engine),null})}return e.prototype.resolve=function(e){var t=this;return this.logic.resolve(e).do(function(n){K(t.host,n?t.actions:t.falseActions,e)})},e.prototype.connectTo=function(e){this.host=e,a.each(this.filterArray,function(t){return t.connectTo(e)})},e}(),Se=function(){function e(e){this.basis=e.basis,this.actions=e.actions||[],this.falseActions=e.false_actions||[]}return e.prototype.resolve=function(e){var t=this;return he(window.location,this.basis).do(function(n){K(t.host,n?t.actions:t.falseActions,e)})},e.prototype.connectTo=function(e){this.host=e},e}(),Ee=n("sa1Ed382"),Te=function(){function e(e){this.basis=e.basis,this.actions=e.actions||[],this.falseActions=e.false_actions||[]}return e.prototype.resolve=function(e){var t=!1;switch(this.basis.type){case"cohort":"$in"in this.basis?t=Ee.ab.inCohort(this.basis.$in):"$nin"in this.basis&&(t=!Ee.ab.inCohort(this.basis.$nin));break;case"abtest":var n=this.basis.cohort,r=this.basis.testName;"$in"in this.basis?t=Ee.ab.hasTest(n,r,this.basis.$in):"$nin"in this.basis&&(t=!Ee.ab.hasTest(n,r,this.basis.$nin))}return K(this.host,t?this.actions:this.falseActions,e),l.Observable.of(t)},e.prototype.connectTo=function(e){this.host=e},e}(),Ie=n("sa1Ed382"),Me=function(){function e(e){this.basis=e.basis,this.actions=e.actions||[],this.falseActions=e.false_actions||[]}return e.prototype.resolve=function(e){var t=this;return he(Ie.onboarding.runtime.mem,this.basis).do(function(n){K(t.host,n?t.actions:t.falseActions,e)})},e.prototype.connectTo=function(e){this.host=e},e}(),je=n("Ziqv+WXf"),Pe=n("77NnVLwu"),xe=n.n(Pe),Ne=function(){function e(e){this.basis=e.basis,this.actions=e.actions||[],this.falseActions=e.false_actions||[]}return e.prototype.resolve=function(e){var t=this,n="";if(e&&e.pathname){var r=/project\/([a-z0-9]{24})\//.exec(e.pathname);r&&(n=r[1])}return n?xe.a.fetch$(n).subscribeOn(je.asap).concatMap(function(e){return he(e?e.toJSON():{},t.basis)}).do(function(n){K(t.host,n?t.actions:t.falseActions,e)}):l.Observable.of(!1)},e.prototype.connectTo=function(e){this.host=e},e}(),Oe=n("sa1Ed382"),Re=function(){function e(e){this.basis=e.basis,this.actions=e.actions||[],this.falseActions=e.false_actions||[]}return e.prototype.resolve=function(e){var t=this,n=a.clone(Oe.PREFERENCE.get("tips").onboarding)||{};return a.each(this.basis,function(e,t){a.has(n,t)||(n[t]=!1)}),he(n,this.basis).do(function(n){K(t.host,n?t.actions:t.falseActions,e)})},e.prototype.connectTo=function(e){this.host=e},e}(),De=n("85182E8g"),Le=function(){function e(e){this.basis=e.basis,this.actions=e.actions||[],this.falseActions=e.false_actions||[]}return e.prototype.resolve=function(e){var t=this;return he((De.get(0)||[]).length,this.basis).do(function(n){K(t.host,n?t.actions:t.falseActions,e)})},e.prototype.connectTo=function(e){this.host=e},e}(),ze=n("sa1Ed382"),Ae=function(){function e(e){this.basis=e.basis,this.actions=e.actions||[],this.falseActions=e.false_actions||[]}return e.prototype.resolve=function(e){var t=this;return he(ze.PREFERENCE.toJSON(),this.basis).do(function(n){K(t.host,n?t.actions:t.falseActions,e)})},e.prototype.connectTo=function(e){this.host=e},e}(),Ve=n("HDK4lIiT"),Fe=n("bZr3G77e"),Be=n("2qRnoGmE"),Ue=function(){function e(e){var t=this;this.basis=e.basis,this.actions=e.actions||[],this.falseActions=e.false_actions||[];var n=Be.ACCOUNT_HOST+"/api/account/usersource";this.subject=new Ve.ReplaySubject(1),Fe.get(n).then(function(e){return t.subject.next(e)}).catch(function(){return t.subject.next({source:"active"})}).finally(function(){return t.subject.complete()})}return e.prototype.resolve=function(e){var t=this;return this.subject.concatMap(function(n){return he(n,t.basis).do(function(n){K(t.host,n?t.actions:t.falseActions,e)})})},e.prototype.connectTo=function(e){this.host=e},e}(),$e=n("YsJsuHrW"),He=function(){function e(e){this.actions=e.actions||[],this.falseActions=e.false_actions||[]}return e.prototype.resolve=function(e){var t=this,n=Object($e.getOnboardingtest)();return l.Observable.of(!!n).do(function(r){K(t.host,r?t.actions:t.falseActions,e,n)})},e.prototype.connectTo=function(e){this.host=e},e}(),Ge=n("sa1Ed382"),qe=function(){function e(e,t){this.name=e,this.engine=t.engine,this.disabled=void 0!==t.disabled&&t.disabled,this.bootstrap=void 0!==t.bootstrap&&t.bootstrap,this.triggerOnce=void 0!==t.trigger_once&&t.trigger_once,this.responseOnce=void 0!==t.response_once&&t.response_once,this.actions=t.actions||[],this.falseActions=t.false_actions||[],this.filterArray=[],this.basis=t.basis,this.disabled||this.parseConfig(t)}return e.prototype.parseConfig=function(e){var t=this;this.filters=fe(e.filters,function(e){var n=o[e.engine];if(n){var r=new n(e);return t.filterArray.push(r),r}return("release"!==Ge.env||Ge.onboarding.debug)&&console.warn("Not a implemented onboarding filter",e.engine),null})},e.prototype.connectTo=function(e){var t=this;if(!e.host)return console.warn("Not a mounted guide");var n=e.host.monitors[this.engine];if(n&&!this.disabled){var r=n.getObservable(this.basis);this.responseOnce&&r.do(function(){t.subscription.unsubscribe()}),this.subscription=r.concatMap(function(e){return t.filters.resolve(e).map(function(t){return{result:t,event:e}})}).subscribe(function(n){var r=n.result,o=n.event,i=r?t.actions:t.falseActions;a.each(i,function(t){return e.actionBus.next(Y(t,o))}),t.triggerOnce&&t.subscription.unsubscribe()})}a.each(this.filterArray,function(t){return t.connectTo(e)})},e}(),We=n("+2RfZ2TT"),Je=n.n(We),Xe=n("rDy43jHF"),Ye=n("JRfZZQfI"),Ke=n("I9V4iVg+"),Qe=n("KTFPvVRg"),Ze=n("jHmlyl5r"),et=n("1h0v0S0G"),tt=n("m42AS+xK"),nt=n("sa1Ed382"),rt=n("OmupbwLD"),ot=function(){function e(e,t){this.name=e,this.parseConfig(t)}return e.prototype.parseConfig=function(e){this.type=e.type,this.viewConfig=e,this.impl=i[e.base_view],this.actions=e.actions||[]},e.prototype.mount=function(e,t){var n=this;this.host=e;var r=t.payload||{},o=this.host.host.runtime;return this.viewOptions=a.assign({},r,this.viewConfig,{runtime:{sendAction:function(t,n){void 0===n&&(n=null),e.actionBus.next(Y(t,n))},memread:function(e){return o.memread(e)},memset:function(e,t){return o.memset(e,t)},mntread:function(e,t){return o.mntread(e,t)},mntset:function(e){return o.mntset(e)}},onRemove:function(){n.host=null,n.viewOptions=null}}),this},e.prototype.show=function(){var e=this;a.delay(function(){var t;switch(e.type){case"react":t=nt.APP.requestSubView(e.impl,e.viewOptions),Je()("body").append(t.$el);break;case"modal":nt.APP.requestSubView(rt).open(e.impl,e.viewOptions);break;case"stick_on_element":a.delay(function(){var n,r;t=nt.APP.requestSubView(e.impl,e.viewOptions);var o=null;try{for(var i=u.i(e.viewConfig.selector),s=i.next();!s.done;s=i.next()){var a=s.value;if(o=document.querySelector(a))break}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}if(o){Je()("body").append(t.$el);var c=t.el.getBoundingClientRect(),l=o.getBoundingClientRect(),p={top:0,left:0};if("left"===t.position?(p.top=l.top+l.height/2,p.left=l.left):"right"===t.position?(p.top=l.top+l.height/2,p.left=l.left+l.width):"top"===t.position?(p.top=l.top,p.left=l.left+l.width/2):"bottom"===t.position&&(p.top=l.top+l.height,p.left=l.left+l.width/2),p.top+=0|e.viewConfig.offset.vertical,p.left+=0|e.viewConfig.offset.horizon,"left"===t.position||"right"===t.position){var d={start:.3,center:.5,end:.7};p.top-=c.height*d[t.align]}else"top"===t.position?p.top-=c.height+7:"bottom"===t.position&&(p.top+=7);if("left"===t.position)p.left-=c.width+7;else if("right"===t.position)p.left+=7;else if("top"===t.position||"bottom"===t.position){d={start:.2,center:.5,end:.8};p.left-=c.width*d[t.align]}t.$el.offset(p)}},0|e.viewConfig.delay)}a.each(e.actions,function(t){e.host&&e.host.actionBus.next(Y(t,null))})})},e}(),it=n("2qRnoGmE"),st=n("sa1Ed382"),at=function(){function e(e,t){this.name=e,this.views={},this.actionBus=new c.Subject,this.parseConfig(t)}return e.prototype.parseConfig=function(e){var t=this;this.forceEnabled=void 0!==e.force_enabled&&e.force_enabled,this.availableInPrivate=void 0!==e.available_in_private&&e.available_in_private,(this.forceEnabled||it.FEATURES.onboarding&&("private"!==it.FEATURES.onboarding||this.availableInPrivate))&&(this.triggers=a.mapObject(e.triggers,function(e,t){return new qe(t,e)}),this.views=a.mapObject(e.views,function(e,t){return new ot(t,e)}),this.filters=a.mapObject(e.filters,function(e,n){return fe(e,function(e){var n=o[e.engine];if(n){var r=new n(e);return r.connectTo(t),r}return("release"!==st.env||st.onboarding.debug)&&console.warn("Not a implemented onboarding filter",e.engine),null})}),this.procedures=a.mapObject(e.procedures,function(e,t){return new e}))},e.prototype.mount=function(e){var t=this;this.host=e,a.each(this.triggers,function(e){e.bootstrap&&e.connectTo(t)}),a.each(this.procedures,function(e){e.connectTo(t)}),this.handleActions()},e.prototype.handleActions=function(){var e=this,t="release"!==st.env||st.onboarding.debug;this.actionBus.subscribe(function(n){var r={"^view://(.*)$":function(r,o){var i=e.views[o];i?i.mount(e,n).show():t&&console.warn("Not a valid view",n)},"^action://(.*)$":function(r,o){e.host&&o in e.host.actions?e.host.actions[o].execute(n):t&&console.warn("Not a executable action",n)},"^trigger://(.*)$":function(n,r){r in e.triggers?e.triggers[r].connectTo(e):t&&console.warn("Not a valid trigger",r)},"^filter://(.*)$":function(n,r){r in e.filters?e.filters[r].resolve().toPromise():t&&console.warn("Not a valid filter",r)}};st.onboarding.debug&&console.info("LibOBD: ",n),a.each(r,function(t,r){var o=new RegExp(r).exec(n.name);o&&t.apply(e,o)})})},e}(),ct=n("sa1Ed382"),lt=function(){function e(){this.mem={}}return e.prototype.memset=function(e,t){this.mem[e]=t},e.prototype.memread=function(e){return this.mem[e]},e.prototype.mntset=function(e){var t=ct.PREFERENCE.url()+"/tips",n=ct.PREFERENCE.get("tips");n.onboarding=a.defaults(e,n.onboarding||{}),ct.PREFERENCE.save({tips:n},{url:t})},e.prototype.mntread=function(e,t){void 0===t&&(t=void 0);var n=ct.PREFERENCE.get("tips").onboarding||{};return e in n?n[e]:t},e}(),ut=n("oRqJmROU"),pt=n("sa1Ed382"),dt=function(){function e(){this.name="onboarding gta monitor"}return e.prototype.onGTAEvent=function(){},e}(),ht=function(){function e(){var e=this;this.name="GTA",this.subject=new c.Subject,pt.gta.registerPlugin(dt).onGTAEvent=function(t){return t&&e.subject.next(Object(a.extend)({},t)),delete t.payload,t}}return e.prototype.getObservable=function(e){return this.subject.concatMap(function(t){return he(t,e).filter(ut.d).map(function(){return t})})},e}(),mt=function(){function e(){this.name="mouseclick"}return e.prototype.getObservable=function(e){return l.Observable.fromEvent(document,"click").concatMap(function(t){return he(t,e).filter(ut.d).map(function(){return t})})},e}(),ft=n("rfFCs9L9"),gt={action:"init",pathname:"/"},vt=function(){function e(){this.name="Router",this.route$=l.Observable.fromPromise(Promise.resolve().then(n.bind(null,"ctsD9mWH"))).concatMap(function(e){var t=e.history;return new bt(t)}).publishBehavior(gt).refCount()}return e.prototype.getObservable=function(e){return this.route$.concatMap(function(t){return he(t,e).filter(ut.d).map(function(){return t})})},e}(),bt=function(e){function t(t){var n=e.call(this)||this;return n.history=t,n}return u.d(t,e),t.prototype._subscribe=function(e){return new yt(e,this.history)},t}(l.Observable),yt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.unlisten=n.listen(function(e,t){r.next({action:t,pathname:e.pathname})}),r}return u.d(t,e),t.prototype.next=function(e){this.destination.next&&this.destination.next(e)},t.prototype.unsubscribe=function(){this.unlisten(),e.prototype.unsubscribe.call(this)},t}(ft.Subscriber),kt={onboarding_splash:{type:"modal",base_view:"LabsNotifier",titleCrossActions:["view-action://close-view"],actions:["action://set-labs-onboarding-done"],backdrop:"static"}},_t=n("sa1Ed382"),wt=function(){function e(){var e=this;this.when=function(t,n,r,o){if(void 0===o&&(o=!0),!e.guide||!e.guide.host)return console.warn("Not a mounted procedure");var i=e.guide.host.monitors[t];if(i){var s=i.getObservable(n).subscribe(function(e){r(e),o&&s.unsubscribe()});return s}},this.view=function(t,n){if(void 0===n&&(n={}),!e.guide||!e.guide.host)return console.warn("Not a mounted procedure");var r=e.guide.views[t];r?r.mount(e.guide,{payload:n}).show():("release"!==_t.env||_t.onboarding.debug)&&console.warn("Not a valid view",t)},this.execute=function(t,n){if(void 0===n&&(n={}),!e.guide||!e.guide.host)return console.warn("Not a mounted procedure");t in e.guide.host.actions?e.guide.host.actions[t].execute(Y(t,n,n)):("release"!==_t.env||_t.onboarding.debug)&&console.warn("Not a implemented onboarding action",t)}}return e.prototype.connectTo=function(e){this.guide=e;var t=this.when,n=this.view,r=this.execute;this.exec({when:t,view:n,execute:r})},e}(),Ct=function(e,t){var n=o[e];if(n)return new n({basis:t}).resolve().toPromise();("release"!==_t.env||_t.onboarding.debug)&&console.warn("Not a implemented onboarding filter",e)},St={views:kt,procedures:{LabProc:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.d(t,e),t.prototype.exec=function(e){var t=this,n=e.when,r=e.view;n("GTA",{action:"enter teambition"},function(){return u.b(t,void 0,void 0,function(){var e,t,n,o,i,s;return u.e(this,function(a){switch(a.label){case 0:return e=new Date,t=new Date(e.setMonth(e.getMonth()-2)).toString(),[4,Ct("user",{created:{type:"DateTime",$lt:t}})];case 1:return n=a.sent(),[4,Ct("progress",{scenarioSelectorFinished:!0})];case 2:return o=a.sent(),[4,Ct("user",{"lastEntered.web":{$ne:null}})];case 3:return i=a.sent(),[4,Ct("new_test_in_labs",null)];case 4:return s=a.sent(),o&&i&&n&&s&&r("onboarding_splash"),[2]}})})})},t}(wt)}},Et={type:"react",base_view:"OrgInviteMember"},Tt={scenario_selector:{type:"react",base_view:"GridSelector",titleCrossActions:[{name:"action://clean-new-org-status",payload:{urlParams:["isNew","primaryScene","templateScene"]}},{name:"action://gta",payload:{action:"trigger org-invite-member",private:"onboarding"}},{name:"action://gta",payload:{action:"close scenario",page:"Org Projects Page",control:"checked",method:"click"}}],actions:[{name:"action://save-progress",payload:{scenarioSelectorFinished:!0}},{name:"action://gta",payload:{action:"begin choose scenario"}}],select_actions:[{name:"action://gta",payload:{action:"choose scenario",category:"variable://item-name",note1:"variable://item-category",control:"variable://item-select-status",method:"click",page:"Org Projects Page"}}],buttons:[{actions:["action://copy-projects",{name:"action://clean-new-org-status",payload:{urlParams:["isNew","primaryScene","templateScene"]}},{name:"action://gta",payload:{action:"begin to work",segment:"Scenario Onboarding",category:"variable://selected-count"}},{name:"action://gta",payload:{action:"trigger org-invite-member",private:"onboarding"}}]}]},org_invite_member:Et},It=n("CxY0Mkc1"),Mt=n("s4NRdcB9"),jt={views:Tt,procedures:{NewUserWelcomeProc:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.d(t,e),t.prototype.exec=function(e){var t=this,n=e.when,r=e.view,o=e.execute;n("GTA",{action:"enter teambition"},function(){return u.b(t,void 0,void 0,function(){var e,t,n,i,s,a,c,l,d,h,m;return u.e(this,function(u){switch(u.label){case 0:return[4,Ct("preference",{language:"zh"})];case 1:return e=u.sent(),[4,Ct("route",{href:{$match:"organization/[0-9a-f]{24}\\?isNew=true"}})];case 2:return t=u.sent(),[4,Ct("route",{href:{$match:"organization\\-is\\-empty"}})];case 3:return n=u.sent(),e&&(t||n)?[4,Ct("orgcount",{$eq:0})]:[2];case 4:return i=u.sent(),[4,Ct("usersource",{source:"active"})];case 5:return s=u.sent(),[4,Ct("progress",{scenarioSelectorFinished:!0})];case 6:return a=u.sent(),[4,Ct("user",{aliens:{$eleMatch:{refer:"dingTalk"}}})];case 7:return c=u.sent(),[4,Ct("user",{phoneForLogin:{$ne:""}})];case 8:return l=u.sent(),i&&s&&!a?(d=It.parse(window.location.href),h=Mt.parse(d.query),m=h.from,o("open-organization-creator",m||"Account"),[2]):s&&t?(o("save-progress",{scenarioSelectorFinished:!0}),"us"!==p.env&&"us-ga"!==p.env&&r("scenario_selector"),[2]):(o("clean-new-org-status",{urlParams:["isNew","primaryScene","templateScene"]}),t&&(l||c)&&"us"!==p.env&&"us-ga"!==p.env&&r("org_invite_member"),[2])}})})})},t}(wt)}},Pt={views:{show_application_scenario_guide:{i18n:{zh:{title_1st:"创建申请",desc_1st:"提交请假申请，添加相关人员",gif_1st:"https://dn-site.oss.aliyuncs.com/2017-03/4bbfab4dad956d8bb742a881c9ac6676b75cb245?response-content-type=image/png",title_2nd:"负责人审核",desc_2nd:"申请提交自动通知，降低人工沟通成本",gif_2nd:"https://dn-site.oss.aliyuncs.com/2017-03/d5842f7f55d2a9081837d4f0f5cad23f6249e696?response-content-type=image/png",title_3rd:"通知相关同事",desc_3rd:"创建请假日程，便于相关人员工作安排",gif_3rd:"https://dn-site.oss.aliyuncs.com/2017-03/837d28bbcb149fb60ec16c4a4a7449fbfce5708b?response-content-type=image/png",title_4th:"添加任务分组",desc_4th:"任务多维拆分，满足不同管理需求",gif_4th:"https://dn-site.oss.aliyuncs.com/2017-04/c7e0688ac676171d4b8fe46fd486eb69f4d6934f?response-content-type=image/png",title_5th:"任务统计",desc_5th:"任务筛选与导出，进行周期性回溯统计",gif_5th:"https://dn-site.oss.aliyuncs.com/2017-03/cc2431f5992864568d4ba6b29e0047ef8e406df6?response-content-type=image/png",btn_next:"下一个",btn_done:"完成"}},type:"modal",base_view:"OnboardingSlide",backdrop:"static",actions:[{name:"action://save-progress",payload:{scenarioApplicationGuideFinished:!0}},{name:"action://gta",payload:{action:"go to next step",segment:"User Onboarding",type:"scenario",control:"step one",category:"scenario-application"}}],titleCrossActions:["view-action://close-view",{name:"action://gta",payload:{action:"close user onboarding",segment:"User Onboarding",type:"scenario"}}],slidesPreset:{plan:"manual-next-close-end-with-gta-step",content_type:["GIF_SLIDE"],title:["i18n://title_1st","i18n://title_2nd","i18n://title_3rd","i18n://title_4th","i18n://title_5th"],contentUrl:["i18n://gif_1st","i18n://gif_2nd","i18n://gif_3rd","i18n://gif_4th","i18n://gif_5th"],description:["i18n://desc_1st","i18n://desc_2nd","i18n://desc_3rd","i18n://desc_4th","i18n://desc_5th"],buttonStyle:{classes:["btn-linear-gradient"]},buttonNextTitle:"i18n://btn_next",buttonDoneTitle:"i18n://btn_done",step:["two","three","four","five","six"],gta:{action:"go to next step",segment:"User Onboarding",control:"variable://gta-step",type:"scenario",category:"scenario-application"}}},show_design_scenario_guide:{i18n:{zh:{title_1st:"任务拆分",desc_1st:"设计阶段拆分，任务进展可视",gif_1st:"https://dn-site.oss-cn-hangzhou.aliyuncs.com/videos/onboarding/%E4%BA%A7%E5%93%81%E8%AE%BE%E8%AE%A11.mp4",title_2nd:"信息关联",desc_2nd:"相关信息串联，对应关系简明清晰",gif_2nd:"https://dn-site.oss-cn-hangzhou.aliyuncs.com/videos/onboarding/%E4%BA%A7%E5%93%81%E8%AE%BE%E8%AE%A12.mp4",title_3rd:"自动通知",desc_3rd:"任务变动即时通知，降低人工沟通成本",gif_3rd:"https://dn-site.oss-cn-hangzhou.aliyuncs.com/videos/onboarding/%E4%BA%A7%E5%93%81%E8%AE%BE%E8%AE%A13.mp4",btn_next:"下一个",btn_done:"完成"}},type:"modal",base_view:"OnboardingSlide",backdrop:"static",actions:[{name:"action://save-progress",payload:{scenarioDesignGuideFinished:!0}},{name:"action://gta",payload:{action:"go to next step",segment:"User Onboarding",type:"scenario",control:"step one",category:"scenario-design"}}],titleCrossActions:["view-action://close-view",{name:"action://gta",payload:{action:"close user onboarding",segment:"User Onboarding",type:"scenario"}}],slidesPreset:{plan:"manual-next-close-end-with-gta-step",content_type:["VIDEO_SLIDE"],title:["i18n://title_1st","i18n://title_2nd","i18n://title_3rd"],contentUrl:["i18n://gif_1st","i18n://gif_2nd","i18n://gif_3rd"],description:["i18n://desc_1st","i18n://desc_2nd","i18n://desc_3rd"],buttonStyle:{classes:["btn-linear-gradient"]},buttonNextTitle:"i18n://btn_next",buttonDoneTitle:"i18n://btn_done",step:["two","three","four"],gta:{action:"go to next step",segment:"User Onboarding",control:"variable://gta-step",type:"scenario",category:"scenario-design"}}},show_investment_scenario_guide:{i18n:{zh:{title_1st:"管理被投公司信息",desc_1st:"识别被投公司信息，科学制定投资计划",gif_1st:"https://dn-site.oss.aliyuncs.com/2017-04/a5b5c2ee570739bbe540fab3809263bf18654755?response-content-type=image/png",title_2nd:"投资计划商议",desc_2nd:"投资会议安排，自动通知相关人员",gif_2nd:"https://dn-site.oss.aliyuncs.com/2017-04/da5d22b39e017c4a7ba691227ab91734f16b2d26?response-content-type=image/png",title_3rd:"信息关联",desc_3rd:"任务变动即时通知，信息串联，顺畅沟通",gif_3rd:"https://dn-site.oss.aliyuncs.com/2017-04/71d7408b72ccf81b68fe429ced04b3d70584cf62?response-content-type=image/png",title_4th:"添加任务分组",desc_4th:"分阶段跟进投资计划，满足不同关注点",gif_4th:"https://dn-site.oss.aliyuncs.com/2017-04/2160cb303a3ce8c5f7e9319b79e4defa61608fc0?response-content-type=image/png",title_5th:"重点公司筛选",desc_5th:"多维度筛选并订阅，聚焦关键信息",gif_5th:"https://dn-site.oss.aliyuncs.com/2017-03/ba1b69a2ee7ba989de57f2d2ea7c06876422dc2c?response-content-type=image/png",btn_next:"下一个",btn_done:"完成"}},type:"modal",base_view:"OnboardingSlide",backdrop:"static",actions:[{name:"action://save-progress",payload:{scenarioInvestmentGuideFinished:!0}},{name:"action://gta",payload:{action:"go to next step",segment:"User Onboarding",type:"scenario",control:"step one",category:"scenario-investment"}}],titleCrossActions:["view-action://close-view",{name:"action://gta",payload:{action:"close user onboarding",segment:"User Onboarding",type:"scenario"}}],slidesPreset:{plan:"manual-next-close-end-with-gta-step",content_type:["GIF_SLIDE"],title:["i18n://title_1st","i18n://title_2nd","i18n://title_3rd","i18n://title_4th","i18n://title_5th"],contentUrl:["i18n://gif_1st","i18n://gif_2nd","i18n://gif_3rd","i18n://gif_4th","i18n://gif_5th"],description:["i18n://desc_1st","i18n://desc_2nd","i18n://desc_3rd","i18n://desc_4th","i18n://desc_5th"],buttonStyle:{classes:["btn-linear-gradient"]},buttonNextTitle:"i18n://btn_next",buttonDoneTitle:"i18n://btn_done",step:["two","three","four","five","six"],gta:{action:"go to next step",segment:"User Onboarding",control:"variable://gta-step",type:"scenario",category:"scenario-investment"}}},show_issue_scenario_guide:{i18n:{zh:{title_1st:"ISSUE识别",desc_1st:"快速识别与定位，ISSUE零遗漏",gif_1st:"https://dn-site.oss-cn-hangzhou.aliyuncs.com/videos/onboarding/ISSUE%E7%AE%A1%E7%90%861.mp4",title_2nd:"科学管理",desc_2nd:"多维管理ISSUE，按轻重缓急调整处理顺序",gif_2nd:"https://dn-site.oss-cn-hangzhou.aliyuncs.com/videos/onboarding/ISSUE%E7%AE%A1%E7%90%862.mp4",title_3rd:"自动通知",desc_3rd:"任务动态立刻通知，即时通知相关人员",gif_3rd:"https://dn-site.oss-cn-hangzhou.aliyuncs.com/videos/onboarding/ISSUE%E7%AE%A1%E7%90%863.mp4",btn_next:"下一个",btn_done:"完成"}},type:"modal",base_view:"OnboardingSlide",backdrop:"static",actions:[{name:"action://save-progress",payload:{scenarioIssueGuideFinished:!0}},{name:"action://gta",payload:{action:"go to next step",segment:"User Onboarding",type:"scenario",control:"step one",category:"scenario-issue"}}],titleCrossActions:["view-action://close-view",{name:"action://gta",payload:{action:"close user onboarding",segment:"User Onboarding",type:"scenario"}}],slidesPreset:{plan:"manual-next-close-end-with-gta-step",content_type:["VIDEO_SLIDE"],title:["i18n://title_1st","i18n://title_2nd","i18n://title_3rd"],contentUrl:["i18n://gif_1st","i18n://gif_2nd","i18n://gif_3rd"],description:["i18n://desc_1st","i18n://desc_2nd","i18n://desc_3rd"],buttonStyle:{classes:["btn-linear-gradient"]},buttonNextTitle:"i18n://btn_next",buttonDoneTitle:"i18n://btn_done",step:["two","three","four"],gta:{action:"go to next step",segment:"User Onboarding",control:"variable://gta-step",type:"scenario",category:"scenario-issue"}}},show_marketing_scenario_guide:{i18n:{zh:{title_1st:"活动安排",desc_1st:"活动任务拆分，确定各阶段节点",gif_1st:"https://dn-site.oss-cn-hangzhou.aliyuncs.com/videos/onboarding/%E5%B8%82%E5%9C%BA%E6%B4%BB%E5%8A%A81.mp4",title_2nd:"自动通知",desc_2nd:"任务变动即刻通知，打破时间与空间的疆界",gif_2nd:"https://dn-site.oss-cn-hangzhou.aliyuncs.com/videos/onboarding/%E5%B8%82%E5%9C%BA%E6%B4%BB%E5%8A%A82.mp4",title_3rd:"内容分享",desc_3rd:"创建市场活动分享，建立内容库",gif_3rd:"https://dn-site.oss-cn-hangzhou.aliyuncs.com/videos/onboarding/%E5%B8%82%E5%9C%BA%E6%B4%BB%E5%8A%A83.mp4",btn_next:"下一个",btn_done:"完成"}},type:"modal",base_view:"OnboardingSlide",backdrop:"static",actions:[{name:"action://save-progress",payload:{scenarioMarketingGuideFinished:!0}},{name:"action://gta",payload:{action:"go to next step",segment:"User Onboarding",type:"scenario",control:"step one",category:"scenario-marketing"}}],titleCrossActions:["view-action://close-view",{name:"action://gta",payload:{action:"close user onboarding",segment:"User Onboarding",type:"scenario"}}],slidesPreset:{plan:"manual-next-close-end-with-gta-step",content_type:["VIDEO_SLIDE"],title:["i18n://title_1st","i18n://title_2nd","i18n://title_3rd"],contentUrl:["i18n://gif_1st","i18n://gif_2nd","i18n://gif_3rd"],description:["i18n://desc_1st","i18n://desc_2nd","i18n://desc_3rd"],buttonStyle:{classes:["btn-linear-gradient"]},buttonNextTitle:"i18n://btn_next",buttonDoneTitle:"i18n://btn_done",step:["two","three","four"],gta:{action:"go to next step",segment:"User Onboarding",control:"variable://gta-step",type:"scenario",category:"scenario-marketing"}}},show_recruitment_scenario_guide:{i18n:{zh:{title_1st:"上传候选人简历",desc_1st:"关联候选人简历，隐私模式保护信息安全",gif_1st:"https://dn-site.oss.aliyuncs.com/2017-03/3eb9190d3997fe957953ddd5735199cbfc4144c0?response-content-type=image/png",title_2nd:"安排面试时间",desc_2nd:"查看相关人员现有日程安排，合理统筹面试时间",gif_2nd:"https://dn-site.oss.aliyuncs.com/2017-03/c608f798a005c37d80e0be11e98eb3c3284d90e2?response-content-type=image/png",title_3rd:"信息关联",desc_3rd:"日程关联候选人简历，线性记录面试信息",gif_3rd:"https://dn-site.oss.aliyuncs.com/2017-03/8d5cd521a8af675b4be13ace8f605618471bc0a5?response-content-type=image/png",title_4th:"添加任务分组",desc_4th:"分阶段管理人事任务，全程跟进候选人发展",gif_4th:"https://dn-site.oss.aliyuncs.com/2017-03/70285f910c91d61693d29d633fb70cda253fd5c6?response-content-type=image/png",title_5th:"招聘计划回顾",desc_5th:"多维度筛选与订阅，满足不同部门关注点",gif_5th:"https://dn-site.oss.aliyuncs.com/2017-03/f805e7752adecdc400ef22ec2b1cc10e4a905d72?response-content-type=image/png",btn_next:"下一个",btn_done:"完成"}},type:"modal",base_view:"OnboardingSlide",backdrop:"static",actions:[{name:"action://save-progress",payload:{scenarioRecruitmentGuideFinished:!0}},{name:"action://gta",payload:{action:"go to next step",segment:"User Onboarding",type:"scenario",control:"step one",category:"scenario-recruitment"}}],titleCrossActions:["view-action://close-view",{name:"action://gta",payload:{action:"close user onboarding",segment:"User Onboarding",type:"scenario"}}],slidesPreset:{plan:"manual-next-close-end-with-gta-step",content_type:["GIF_SLIDE"],title:["i18n://title_1st","i18n://title_2nd","i18n://title_3rd","i18n://title_4th","i18n://title_5th"],contentUrl:["i18n://gif_1st","i18n://gif_2nd","i18n://gif_3rd","i18n://gif_4th","i18n://gif_5th"],description:["i18n://desc_1st","i18n://desc_2nd","i18n://desc_3rd","i18n://desc_4th","i18n://desc_5th"],buttonStyle:{classes:["btn-linear-gradient"]},buttonNextTitle:"i18n://btn_next",buttonDoneTitle:"i18n://btn_done",step:["two","three","four","five","six"],gta:{action:"go to next step",segment:"User Onboarding",control:"variable://gta-step",type:"scenario",category:"scenario-recruitment"}}},show_requirements_scenario_guide:{i18n:{zh:{title_1st:"需求定义",desc_1st:"需求全面定义，快速衡量与评估",gif_1st:"https://dn-site.oss-cn-hangzhou.aliyuncs.com/videos/onboarding/%E9%9C%80%E6%B1%82%E7%AE%A1%E7%90%861.mp4",title_2nd:"创建日程",desc_2nd:"发起需求评审会，添加相关人员",gif_2nd:"https://dn-site.oss-cn-hangzhou.aliyuncs.com/videos/onboarding/%E9%9C%80%E6%B1%82%E7%AE%A1%E7%90%862.mp4",title_3rd:"自动通知",desc_3rd:"需求变动即时通知，打破时间与空间的疆界",gif_3rd:"https://dn-site.oss-cn-hangzhou.aliyuncs.com/videos/onboarding/%E9%9C%80%E6%B1%82%E7%AE%A1%E7%90%863.mp4",btn_next:"下一个",btn_done:"完成"}},type:"modal",base_view:"OnboardingSlide",backdrop:"static",actions:[{name:"action://save-progress",payload:{scenarioRequirementsGuideFinished:!0}},{name:"action://gta",payload:{action:"go to next step",segment:"User Onboarding",type:"scenario",control:"step one",category:"scenario-requirements"}}],titleCrossActions:["view-action://close-view",{name:"action://gta",payload:{action:"close user onboarding",segment:"User Onboarding",type:"scenario"}}],slidesPreset:{plan:"manual-next-close-end-with-gta-step",content_type:["VIDEO_SLIDE"],title:["i18n://title_1st","i18n://title_2nd","i18n://title_3rd"],contentUrl:["i18n://gif_1st","i18n://gif_2nd","i18n://gif_3rd"],description:["i18n://desc_1st","i18n://desc_2nd","i18n://desc_3rd"],buttonStyle:{classes:["btn-linear-gradient"]},buttonNextTitle:"i18n://btn_next",buttonDoneTitle:"i18n://btn_done",step:["two","three","four"],gta:{action:"go to next step",segment:"User Onboarding",control:"variable://gta-step",type:"scenario",category:"scenario-requirements"}}},show_sales_scenario_guide:{i18n:{zh:{title_1st:"客户信息管理",desc_1st:"目标信息结构化，识别客户类型",gif_1st:"https://dn-site.oss.aliyuncs.com/2017-03/bc72501e0b6785f3c7af5b0504fbaf14fee1dadb?response-content-type=image/png",title_2nd:"上传收款证明",desc_2nd:"销售流程进展可视，实时同步",gif_2nd:"https://dn-site.oss.aliyuncs.com/2017-03/431b133fb4cb07adc92401d0e526caec6633f447?response-content-type=image/png",title_3rd:"任务ID",desc_3rd:"任务变动自动通知，信息串联，便于回溯",gif_3rd:"https://dn-site.oss.aliyuncs.com/2017-03/38355f13d544dd4142c188b326ee0a436987e83d?response-content-type=image/png",title_4th:"添加任务分组",desc_4th:"多维度管理销售阶段，全局把控",gif_4th:"https://dn-site.oss.aliyuncs.com/2017-03/287cc090e4beea772bc94425397a48876520a279?response-content-type=image/png",title_5th:"信息筛选",desc_5th:"目标信息筛选，满足不同关注点",gif_5th:"https://dn-site.oss.aliyuncs.com/2017-03/2377f531c915c9e6e007582f92f1cf1bbda35364?response-content-type=image/png",btn_next:"下一个",btn_done:"完成"}},type:"modal",base_view:"OnboardingSlide",backdrop:"static",actions:[{name:"action://save-progress",payload:{scenarioSalesGuideFinished:!0}},{name:"action://gta",payload:{action:"go to next step",segment:"User Onboarding",type:"scenario",control:"step one",category:"scenario-sales"}}],titleCrossActions:["view-action://close-view",{name:"action://gta",payload:{action:"close user onboarding",segment:"User Onboarding",type:"scenario"}}],slidesPreset:{plan:"manual-next-close-end-with-gta-step",content_type:["GIF_SLIDE"],title:["i18n://title_1st","i18n://title_2nd","i18n://title_3rd","i18n://title_4th","i18n://title_5th"],contentUrl:["i18n://gif_1st","i18n://gif_2nd","i18n://gif_3rd","i18n://gif_4th","i18n://gif_5th"],description:["i18n://desc_1st","i18n://desc_2nd","i18n://desc_3rd","i18n://desc_4th","i18n://desc_5th"],buttonStyle:{classes:["btn-linear-gradient"]},buttonNextTitle:"i18n://btn_next",buttonDoneTitle:"i18n://btn_done",step:["two","three","four","five","six"],gta:{action:"go to next step",segment:"User Onboarding",control:"variable://gta-step",type:"scenario",category:"scenario-sales"}}},show_travel_scenario_guide:{i18n:{zh:{title_1st:"记下一个愿望",desc_1st:"比如看一场变幻多姿的日出",gif_1st:"https://dn-site.oss.aliyuncs.com/2017-04/dd7704b0bb2f3b1a06ec5245fdba7d7f7db32f17?response-content-type=image/png",title_2nd:"规划旅行开支",desc_2nd:"轻松记录，一目了然",gif_2nd:"https://dn-site.oss.aliyuncs.com/2017-03/9655a6c0ae40b89479d73cb6f4c8de7a61c5c7dc?response-content-type=image/png",title_3rd:"挑战一次自我",desc_3rd:"走，去旅行",gif_3rd:"https://dn-site.oss.aliyuncs.com/2017-04/aacdd9ece223e861302458e40684208806959dc1?response-content-type=image/png",btn_next:"下一个",btn_done:"完成"}},type:"modal",base_view:"OnboardingSlide",backdrop:"static",actions:[{name:"action://save-progress",payload:{scenarioTravelGuideFinished:!0}},{name:"action://gta",payload:{action:"go to next step",segment:"User Onboarding",type:"scenario",control:"step one",category:"scenario-travel"}}],titleCrossActions:["view-action://close-view",{name:"action://gta",payload:{action:"close user onboarding",segment:"User Onboarding",type:"scenario"}}],slidesPreset:{plan:"manual-next-close-end-with-gta-step",content_type:["GIF_SLIDE"],title:["i18n://title_1st","i18n://title_2nd","i18n://title_3rd"],contentUrl:["i18n://gif_1st","i18n://gif_2nd","i18n://gif_3rd"],description:["i18n://desc_1st","i18n://desc_2nd","i18n://desc_3rd"],buttonStyle:{classes:["btn-linear-gradient"]},buttonNextTitle:"i18n://btn_next",buttonDoneTitle:"i18n://btn_done",step:["two","three","four"],gta:{action:"go to next step",segment:"User Onboarding",control:"variable://gta-step",type:"scenario",category:"scenario-travel"}}}},procedures:{ScenarioShowProc:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.d(t,e),t.prototype.exec=function(e){var t=this,n=e.when,r=e.view,o=e.execute;[{category:"scenario-application",viewName:"show_application_scenario_guide"},{category:"scenario-design",viewName:"show_design_scenario_guide"},{category:"scenario-investment",viewName:"show_investment_scenario_guide"},{category:"scenario-issue",viewName:"show_issue_scenario_guide"},{category:"scenario-marketing",viewName:"show_marketing_scenario_guide"},{category:"scenario-recruitment",viewName:"show_recruitment_scenario_guide"},{category:"scenario-requirements",viewName:"show_requirements_scenario_guide"},{category:"scenario-sales",viewName:"show_sales_scenario_guide"},{category:"scenario-travel",viewName:"show_travel_scenario_guide"}].forEach(function(e){var i=e.category,s=e.viewName;n("GTA",{action:"open detail",type:"project",category:i},function(){return u.b(t,void 0,void 0,function(){var e,t;return u.e(this,function(n){switch(n.label){case 0:return e=i.replace(/-(\w)/,function(e,t){return t.toUpperCase()}),[4,Ct("progress",(t={},t[e+"GuideFinished"]={$ne:!0},t))];case 1:return n.sent()&&(r(s),o("gta",{action:"open user onboarding",segment:"User Onboarding",type:"scenario",category:i})),[2]}})})})})},t}(wt)}},xt=n("2qRnoGmE"),Nt=n.n(xt),Ot={views:{video_layer:{type:"modal",base_view:"VideoContainer",crossActions:["view-action://close-view"]},page_specific_video:{type:"external:popover",base_view:"PageSpecificHelpVideo",runtime_variable_map:{help_menu_in_agile_template:"aglie_template"},page_specific_video:{aglie_template:{right_corner_link:null,videos:[{cover:Nt.a.DN_SITE_URL+"/videos/onboarding/agile_head.png",title:"敏捷研发专业模板介绍",url:Nt.a.DN_SITE_URL+"/videos/onboarding/agile.mp4",time:"2'05''",category:"agile"}]}}}},triggers:{gta_enter_teambition:{engine:"GTA",disabled:!1,bootstrap:!0,basis:{action:"enter teambition"},filters:{logical_operator:"AND",logical_oprands:[{engine:"preference",basis:{language:"zh"}},{engine:"progress",basis:{agileTemplateFirstVisit:{$ne:!0}}}]},trigger_once:!0,response_once:!0,actions:["trigger://gta_first_enter_agile_view"]},gta_enter_agile_view:{engine:"GTA",disabled:!1,bootstrap:!0,basis:{action:"enter agile view"},trigger_once:!1,response_once:!1,actions:[{name:"action://memset",payload:{help_menu_in_agile_template:!0}}]},gta_first_enter_agile_view:{engine:"GTA",disabled:!1,bootstrap:!1,basis:{action:"enter agile view"},filters:{logical_operator:"AND",logical_oprands:[{engine:"delay",basis:{delay:1e3}},{engine:"dom",basis:{selector:".modal-backdrop"}}]},trigger_once:!0,response_once:!0,actions:["trigger://open_help_after_modal_close"],false_actions:["action://raise-help-menu",{name:"action://save-progress",payload:{agileTemplateFirstVisit:!0}}]},open_help_after_modal_close:{engine:"GTA",disabled:!1,bootstrap:!1,basis:{action:"invite member modal close"},trigger_once:!0,response_once:!0,actions:["action://raise-help-menu",{name:"action://save-progress",payload:{agileTemplateFirstVisit:!0}}]},router_enter_agile_template:{engine:"Router",disabled:!1,bootstrap:!0,trigger_once:!1,response_once:!1,filters:{engine:"project",basis:{proTemplateType:"scrum"}},actions:[{name:"action://memset",payload:{help_menu_in_agile_template:!0}}],false_actions:[{name:"action://memset",payload:{help_menu_in_agile_template:!1}}]}},available_in_private:!0},Rt={skitch_tooltip:{type:"stick_on_element",selector:[".activity-creator.active .activity-handler .add-skitch-handler",".activity-creator .comment-box-icon-wrap .add-skitch-handler"],base_view:"Tooltip",placement:"top-end",delay:800,content:"tb-i18n://onboarding.tip.use.skitch",offset:{vertical:-3,horizon:-4},hide_policy:"GLOBAL_CLICK"},org_invite_member:Et},Dt={activate_skitch_trigger:{engine:"progress",basis:{skitchCreatorTipShown:{$ne:!0}},actions:["trigger://gta_enter_preview"]}},Lt={gta_enter_preview:{engine:"GTA",disabled:!1,bootstrap:!1,basis:{action:"activity-creator-loadend"},filters:{engine:"dom",basis:{selector:".add-skitch-handler"}},trigger_once:!0,response_once:!0,actions:["view://skitch_tooltip",{name:"action://save-progress",payload:{skitchCreatorTipShown:!0}}]},register_lazy_trigger:{engine:"GTA",disabled:!1,bootstrap:!0,basis:{action:"enter teambition"},actions:["filter://activate_skitch_trigger"],trigger_once:!0,response_once:!0},gta_raise_template_manager:{engine:"GTA",disabled:!1,bootstrap:!0,basis:{action:"raise onboarding",type:"action",category:"open-template-selector"},actions:["action://open-template-selector"]},sysbar_upgrade_btn_click:{engine:"GTA",disabled:!1,bootstrap:!0,basis:{action:"add content",type:"organization",control:"personal upgrade"},trigger_once:!1,response_once:!1,actions:[{name:"action://open-organization-creator",payload:{backdrop:"static"}}]},sysbar_payment_status_raise:{engine:"GTA",disabled:!1,bootstrap:!0,basis:{control:"payment-status",private:!0},trigger_once:!1,response_once:!1,actions:[{name:"action://open-payment-status"}]},indie_task_creator_raise:{engine:"GTA",disabled:!1,bootstrap:!0,basis:{control:"indie-task-creator",private:!0},trigger_once:!1,response_once:!1,actions:[{name:"action://open-indie-task-creator"}]}},zt=n("8KNpsyVU"),At={config_version:"0.0.1",guides:{labs:St,new_user:jt,scenario:Pt,help_menu:Ot,raise_feature:{triggers:{gta_raise_git_integration_settings:{engine:"GTA",disabled:!1,bootstrap:!0,basis:{action:"raise git integration settings"},actions:["action://git-integration-settings"]}}},raise_onboarding:{triggers:Lt,filters:Dt,views:Rt,procedures:{AgileTemplateProc:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.d(t,e),t.prototype.exec=function(e){var t=this,n=e.when,r=e.execute;n("GTA",{action:"enter teambition"},function(){return u.b(t,void 0,void 0,function(){var e;return u.e(this,function(t){switch(t.label){case 0:return[4,Ct("memory",{createFrom:"agile-template"})];case 1:return e=t.sent(),[4,Ct("route",{href:{$match:"organization/[0-9a-f]{24}\\?isNew=true"}})];case 2:return!t.sent()&&e&&r("open-template-selector",{fsm_state:"from-template",direct_template:"agile"}),[2]}})})}),n("GTA",{action:"trigger agile-template"},function(){return u.b(t,void 0,void 0,function(){return u.e(this,function(e){switch(e.label){case 0:return[4,Ct("delay",{delay:100})];case 1:return e.sent(),r("open-template-selector",{fsm_state:"from-template",direct_template:"agile"}),[2]}})})})},t}(wt),NewOrgProc:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.d(t,e),t.prototype.exec=function(e){var t=this,n=e.when,r=e.view;n("GTA",{action:"trigger org-invite-member"},function(){return u.b(t,void 0,void 0,function(){return u.e(this,function(e){switch(e.label){case 0:return[4,Ct("delay",{delay:100})];case 1:return e.sent(),[4,Object(zt.getAccountBind)(p.PREFERENCE.get("lastWorkspace"))];case 2:return e.sent()?r("org_invite_member"):Object(zt.showVerifyBindModal)(),[2]}})})},!1)},t}(wt)}}}};n.d(t,"ConfigurableOnboarding",function(){return Vt});var Vt=function(){function e(){this.guides={},this.actions={},this.monitors={},this.initActions(),this.initMonitors(),this.runtime=new lt}return e.prototype.fetch=function(){var e=this;return Promise.resolve(At).then(function(t){e.parseConfig(t)})},e.prototype.initActions=function(){var e=this;a.each(r,function(t,n){var o=new r[n];e.actions[o.name]=o})},e.prototype.initMonitors=function(){var e=this;a.each(s,function(t,n){var r=new s[n];e.monitors[r.name]=r})},e.prototype.addGuide=function(e,t){this.guides[e]=t,t.mount(this)},e.prototype.parseConfig=function(e){var t=this;this.config=e,"0.0.1"===e.config_version&&a.each(e.guides,function(e,n){var r=new at(n,e);t.addGuide(n,r)})},e.prototype.getViewConfig=function(e,t){var n=this.config.guides[e];if(n){var r=n.views;if(r){var o=r[t];if(o&&"external"===o.type)return[i[o.base_view],a.extend({},o)]}}return null},e.prototype.getViewInstance=function(e,t){var n=this.guides[e];if(n){var r=n.views[t];if(r)return r.mount(n,{}),r}return null},e}()},"y5IJPN/r":function(e,t,n){},y76pUX2n:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="";if(e.items.length){o+=" ";var i=e.items;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=' <li class="link',(s=i[a+=1])._linkedId||(o+=" object-picker"),o+='" data-id="'+s._id+'" data-linkedid="'+r(s._linkedId)+'" >  ',s._linkedId?o+=' <a class="link-head" href="'+r(s.data.viewUrl)+'" target="_blank"> ':o+=' <div class="link-head"> ',o+="  ",s._linkedId&&(o+=' <div class="link-icon-wrap link-processon-icon"> <span class="icon icon-processon"></span> </div> '),o+=' <div class="link-icon-wrap"> <img src="'+r(s.data.thumb)+'" class="avatar"> </div> <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main"> <span class="title-name hinted" data-title="'+r(s.data.title)+'"> '+r(s.data.title)+' </span> </div> <div class="link-title-header-rest" title="'+r(s.lastModifyTime.dateString)+'" > '+r(s.lastModifyTime.dateString)+" </div> </div> </div>  ",s._linkedId?o+=" </a> ":o+=" </div> ",o+=" ",s._linkedId&&s.objectlinkDel&&(o+=' <a class="link-menu-handler icon icon-chevron-down" data-id="'+s._id+'" ></a> '),o+=" </li> "}else e.isSearched&&(o+=' <div class="search-empty-hint text-center"> <span class="icon icon-search-warning"></span> <p>'+tb_i18n.get("integrations.processon.search.no.result")+"</p> </div>");return o}},yJLhdYN7:function(e,t,n){var r,o,i={}.hasOwnProperty;r=n("VuB9cZyl"),o=n("JUwcT2H1"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,r),t.prototype.name="pastEventsGroups",t.prototype.model=o,t.prototype.comparator=function(e,t){return e.get("month")-t.get("month")},t}()},yQh2FoYJ:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j,P,x,N,O,R={}.hasOwnProperty,D=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};N=n("sa1Ed382"),E=n("a+N5u/Cl"),w=n("3eMzznN/"),C=n("vmWJWrVe"),p=n("odY26VIi"),v=n("9MOL8v5J"),k=n("QSzw2VcL"),i=n("2ivs9lcN"),m=n("MmYzUhjM"),b=n("ymFCWmUp"),h=n("ZkhtbhGT"),g=n("HDJEOtNh").RoleScope,(M=n("GESwhXbR")).Alert,_=M.Toast,P=n("s0r7VfKc").default,S=n("OmupbwLD"),a=n("oXtD/CwF"),c=n("Ri58Iblv"),u=n("myb+1gHu"),l=n("AIaOfRno"),y=n("qgmt8VTp"),o=n("Rdt1eeJR"),f=n("1O99B21r"),s=n("7UQIdnmo"),j=n("8KNpsyVU"),x=j.showVerifyBindModal,I=j.getAccountBind,T=n("SjN417uV").displayMemberCountExceedToast,r=n("c5kIt6mT"),d=n("mPaF1WF+"),O=n("gh8QIhMV").throwError,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)R.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,C),t.prototype.viewName="MemberBarView",t.prototype.className="member-bar-view",t.prototype.events={"click .back-to-project-members":"backToProjectMembers","click .team":"enterTeamMembers","click .group":"enterGroupMembers","click .project-tag-member":"enterProjectTagMembers","click .add-members-handler":"openAddMember","click .member-detail":"showMemberDetail","input .filter-input":"renderList","click .item-menu-handler":"toggleMenu","mousewheel .member-bar-body":w.mousewheel},t.prototype.initialize=function(e){return this.debounced__renderList=E.debounce(this.renderList,100),this._projectId=e._projectId,this.projectModel=e.projectModel,this.isOrgProject=Boolean(this.projectModel.get("_organizationId")),this.membersCollection=p.get(this._projectId),this.showMemberProgress=this.projectModel.payment.memberQuota<m.UNLIMIT_MEMBERS,this.MAX_PROJECT_MEMBER_COUNT=this.projectModel.getMaxProjectCount(),this.load({success:(t=this,function(){return t.renderBasic(),t.debounced__renderList(),t.initMemberFinder(),t.showMemberProgress&&t.renderMemberProgress(),t.listen()})});var t},t.prototype.load=function(e){var t,n;return(t=[]).push(P.fetch.getProjectExternalMembers(this._projectId,void 0,1).toPromise().then((n=this,function(e){return n.hasProjectTagMember=0!==e.result.length}))),this.isOrgProject&&!N.user.get("isGhost")?(t.push(new Promise(function(e){return function(t,n){return v.get(e.projectModel.get("_organizationId")).reset(),v.fetch(e.projectModel.get("_organizationId"),{roleType:"project",success:function(r){return e.rolesCollection=r,e.$el?t():n()},error:function(e,t){return n(t)}})}}(this))),t.push(new Promise(function(e){return function(t,n){return k.fetch(e.projectModel.id,{boundToObjectType:"project",success:function(r){return e.teamsCollection=r,e.$el?t():n()},error:function(e,t){return n(t)}})}}(this))),t.push(new Promise(function(e){return function(t,n){return i.fetch(e.projectModel.id,{boundToObjectType:"project",success:function(r){return e.groupsCollection=r,e.$el?t():n()},error:function(e,t){return n(t)}})}}(this))),Promise.all(t).then(function(){return e.success()}).catch(function(e){return O(e)})):e.success()},t.prototype.listen=function(){var e;return this.listenTo(this.membersCollection,"add destroy remove",E.debounce(function(){if(this.debounced__renderList(),this.showMemberProgress)return this.renderMemberProgress()},200)),this.listenTo(this.membersCollection,"change refresh",function(){return this.debounced__renderList()}),this.listenTo(this.teamsCollection,"change:hasMembers",(e=this,function(t,n){if(!t.previous("hasMembers"))return e.membersCollection.add(n,{merge:!0})})),this.listenTo(this.teamsCollection,"add destroy remove",function(){return this.debounced__renderList()}),this.listenTo(this.teamsCollection,"remove",E.debounce(function(e){return function(){return e.membersCollection.fetch()}}(this),500)),this.listenTo(this.groupsCollection,"add destroy remove",function(){return this.debounced__renderList()})},t.prototype.renderBasic=function(){return this.$el.html(r()),this.$header=this.$(".member-bar-header"),this.$body=this.$(".member-bar-body"),this.$backButton=this.$(".member-bar-header .back-to-project-members"),this.$title=this.$(".member-bar-header .title"),this.showMemberProgress&&this.$el.addClass("show-member-progress"),this.$input=this.$(".filter-input"),this.$membersList=this.$(".members-list"),this.$memberProgress=this.$(".member-progress")},t.prototype.refreshHeader=function(e,t){return e||(e=tb_i18n.get("member.bar.title")),"team"===t||"group"===t||"tag-member"===t?this.$header.addClass("with-back type-"+t):this.$header.removeClass("with-back type-team type-group"),this.$title.text(e),this.$title.attr("data-title",e)},t.prototype.renderList=function(){return this.$header.hasClass("type-team")&&this.renderTeamMemberList(),this.$header.hasClass("type-group")?this.renderGroupMemberList():this.renderMainList()},t.prototype.canSetSelfOwner=function(e){var t,n,r,o;return!!this.isOrgProject&&(n=this.membersCollection.get(e),r=this.projectModel.get("orgLevel"),o=n.getRoleScope(),t=this.projectModel.hasPermission("projecttag.join.project")&&"owner"===this.projectModel.getJoinProjectRole(),n.canSetSelfOwner(r,o,t))},t.prototype.renderMainList=function(){var e,t,n,r,o,i;return o=this.getTeams(),t=this.getGroups(),n=this.parseMembers(),(r=this.$input.val().trim())&&(o=b.objectsFilter(o,r,{fields:["name","pinyin"]}),t=b.objectsFilter(t,r,{fields:["name","pinyin"]}),n=b.objectsFilter(n,r)),e={teams:o,groups:t,hasProjectTagMember:this.hasProjectTagMember,exceedLimit:this.membersCollection.toJSONActive().length>=this.MAX_PROJECT_MEMBER_COUNT,memberLimit:this.MAX_PROJECT_MEMBER_COUNT,permissions:this.projectModel.hasPermissions("post.member","del.member"),members:E.map(n,(i=this,function(e){return E.extend({isOrgGuest:e.orgLevel===g.Guest,canSetSelfOwner:i.canSetSelfOwner(e._id)},e,w.getMemberPermissions(i.projectModel,e))}))},this.$membersList.html(d(e))},t.prototype.renderTeamMemberList=function(){var e,t,n,r,o;return r=this.teamsCollection.get(this.currentTeamId),t=this.parseTeamMembers(null!=r?r.get("hasMembers"):void 0),(n=this.$input.val().trim())&&(t=b.objectsFilter(t,n)),e={permissions:this.projectModel.hasPermissions("del.member"),members:E.map(t,(o=this,function(e){return E.extend({canSetSelfOwner:o.canSetSelfOwner(e._id)},e,w.getMemberPermissions(o.projectModel,e))}))},this.$membersList.html(d(e))},t.prototype.renderGroupMemberList=function(){var e,t,n,r;return t=this.parseGroupMembers(),(n=this.$input.val().trim())&&(t=b.objectsFilter(t,n)),e={permissions:this.projectModel.hasPermissions("del.member"),members:E.map(t,(r=this,function(e){return E.extend({canSetSelfOwner:r.canSetSelfOwner(e._id)},e,w.getMemberPermissions(r.projectModel,e))}))},this.$membersList.html(d(e))},t.prototype.getTeams=function(){var e,t;return this.teamsCollection?(e=this.teamsCollection.toJSON(),(e=E.sortBy(e,function(e){return new Date(e.created).valueOf()})).forEach((t=this,function(e){var n,r;if(r=h.getTeamStyle(e),e.styleName=r.styleName,e.styleColor=r.styleColor,e.belongsTo=h.getTeamBelongsTo(e),e.hasMembers)return e.activeMembersCount=null!=(n=t.parseTeamMembers(e.hasMembers))?n.filter(function(e){return!e.isDisabled}).length:void 0})),e):[]},t.prototype.getGroups=function(){var e;return this.groupsCollection?(e=this.groupsCollection.toJSON(),e=E.sortBy(e,function(e){return new Date(e.created).valueOf()})):[]},t.prototype.parseTeamMembers=function(e){var t,n,r;return(null!=e?e.length:void 0)>0?(n=e.map(function(e){return e._id}),(t=this.membersCollection.toJSON().filter(function(e){var t;return t=e._id,D.call(n,t)>=0})).forEach((r=this,function(e){return e.roleName=r.membersCollection.get(e._id).getRole(),e.__role=r.parseMemberRole(e)})),t):[]},t.prototype.parseGroupMembers=function(){var e,t,n,r;return t=this.groupsCollection.get(this.currentGroupId),e=(t.get("hasMembers")||[]).map(function(e){return e._id}),(n=this.membersCollection.toJSON().filter(function(t){var n;return n=t._id,D.call(e,n)>=0})).forEach((r=this,function(e){return e.roleName=r.membersCollection.get(e._id).getRole(),e.__role=r.parseMemberRole(e)})),n},t.prototype.parseMembers=function(){var e,t;return(e=this.membersCollection.toJSON()).forEach((t=this,function(e){return e.roleName=t.membersCollection.get(e._id).getRole(),e.__role=t.parseMemberRole(e)})),e},t.prototype.parseMemberRole=function(e){var t;switch(!1){case!(null!=(t=this.rolesCollection)?t.isMemberRole(e._roleId):void 0):return"member";default:return e.role}},t.prototype.renderMemberProgress=function(){var e;return null!=(e=this.memberProgressView)&&e.remove(),this.memberProgressView=this.requestSubView(u,{exist:this.membersCollection.toJSONActive().length,projectModel:this.projectModel}),this.$memberProgress.html(this.memberProgressView.$el),this},t.prototype.showMemberDetail=function(e){var t,n,r,o,i,s;return e.target&&$(e.target).closest(".member-menu-handler").length?this:(null!=(n=this.memberMenuView)&&n.remove(),(t=$(e.currentTarget)).data("bs.popover")?(null!=(r=this.memberCardView)&&r.hide(),null!=(o=this.memberCardView)&&o.remove(),this):(s=t.data("id"),null!=(i=this.memberCardView)&&i.remove(),this.memberCardView=this.requestSubView(a,{$toggler:t,placement:"left",affixToggler:!0,userId:s,memberCardClass:"with-project-activity-panel",projectModel:this.projectModel}),this.memberCardView.show(),this))},t.prototype.backToProjectMembers=function(e){var t;return this.$header.hasClass("type-tag-member")&&this.leaveProjectTagMembers(),this.$input.val(""),t=$(e.currentTarget),this.renderMainList(),this.leftIn(),this.refreshHeader(t.attr("data-title"),"member"),this},t.prototype.enterTeamMembers=function(e){var t;return this.$input.val(""),t=$(e.currentTarget),this.currentTeamId=t.data("id"),this.renderTeamMemberList(),this.rightIn(),this.refreshHeader(t.attr("data-title"),"team")},t.prototype.enterGroupMembers=function(e){var t;return this.$input.val(""),t=$(e.currentTarget),this.currentGroupId=t.data("id"),this.renderGroupMemberList(),this.rightIn(),this.refreshHeader(t.attr("data-title"),"group")},t.prototype.enterProjectTagMembers=function(){return this.$input.val(""),this.$membersList.html(""),this.$memberProgress.hide(),this.$el.removeClass("show-member-progress"),this.$body.addClass("no-filter"),this.rightIn(),this.refreshHeader(tb_i18n.get("portal.project.tag.member"),"tag-member"),this.mountReact(this.$membersList[0],f.MemberPanel,{projectId:this._projectId}),N.gta.event({method:"click",action:"view project group members",control:"Side Member Menu",projectid:this._projectId})},t.prototype.leaveProjectTagMembers=function(){return this.$memberProgress.show(),this.showMemberProgress&&this.$el.addClass("show-member-progress"),this.$body.removeClass("no-filter"),this.unmountReact(this.$membersList[0])},t.prototype.leftIn=function(){return this.$el.find(".member-bar-body").css({x:"-100%",opacity:0}),this.$el.find(".member-bar-body").transition({x:"0",opacity:1},128,"out")},t.prototype.rightIn=function(){return this.$el.find(".member-bar-body").css({x:"100%",opacity:0}),this.$el.find(".member-bar-body").transition({x:"0",opacity:1},128,"out")},t.prototype.toggleMenu=function(e){var t,n,r,i,s,a,c,u,p,d,h;if(e.stopPropagation(),n=(t=$(e.currentTarget)).data("id"),t.data("bs.popover"))return this;switch(h=t.data("toggle")){case"team":i=y,s=this.teamsCollection.get(n);break;case"group":i=o,s=this.groupsCollection.get(n);break;case"member":i=l,s=this.membersCollection.get(n)}return null!=(a=this.memberCardView)&&a.remove(),null!=(c=this.memberMenuView)&&c.remove(),r={$toggler:t,projectModel:this.projectModel,roles:(null!=(u=this.rolesCollection)?u.toJSON():void 0)||[],objModel:s,cannotRemove:(null!=(p=this.groupsCollection)?p.isInGroups(n):void 0)||(null!=(d=this.teamsCollection)?d.isInTeams(n):void 0)},"member"===h&&(r.canSetSelfOwner=this.canSetSelfOwner(n)),this.memberMenuView=this.requestSubView(i,r).show(),this},t.prototype.openAddMember=function(e){return I(this.projectModel.get("_organizationId")).then((t=this,function(e){return e?t.requestSubView(S).open(s,{projectModel:t.projectModel,qrCodeType:"project",gtaOption:"Side Member Menu"}):(x(),N.gta.event({action:"invitation blocked",page:"MemberBar Page",type:"project"}))}));var t},t.prototype.initMemberFinder=function(){return this.requestSubView(c,{_organizationId:this.projectModel.get("_organizationId"),collection:this.membersCollection,$searchbox:this.$input,select:(e=this,function(t,n){return e.debounced__renderList(),e.addMember(t,{success:function(){return _.success({message:tb_i18n.get("project.settings.add.member.success",t.item.name)}),N.gta.event({action:"added member",type:"single",control:"Side Menu",category:(e.isOrgProject?"org ":"")+"project",segment:"email"===t.item.searchType?"email":"sms",method:n.keyCode?"keyboard":"click"})}})})});var e},t.prototype.addMember=function(e,t){var n,r,o,i,s,a;return n=E.extend({boundToObjectType:"project"},t,{silentError:!0,error:(a=this,function(e){return a.projectModel.handleInviteError(e),N.gta.event({action:"reach plan limit",type:a.isOrgProject?"business":"plus",control:"project member number",category:"add member"})})}),r={},i=e.item.type,r[i]=e.item[i]||e.item.value,this.membersCollection.where(r).length?(s=e.item.name,_.success({message:tb_i18n.get("project.settings.add.member.repetitive",s)})):(o=this.projectModel.get("_organizationId"),P.searchMembers(o,{q:r[i]}).toPromise().then(function(e){return function(t){var i;if(!t.length)return i=n.success,n.success=function(e){return P.fetch.getOrganization(o).toPromise().then(function(t){return t.plan.isExceedMember&&T(t),i(e)})},e.membersCollection.addMember(r,n)}}(this))),this},t}()},yXKnvBS7:function(e,t,n){var r,o,i,s;o=n("a+N5u/Cl"),i=n("2qRnoGmE"),r=n("bZr3G77e"),s=i.INTEGRATION_HOST,e.exports=function(){function e(e){this.token=e.token,this.type=e.type,this.bookId=e.bookId||null,this.pageCount=20,this.notePage=0,this.noteHasMore=!0}return e.prototype._get=function(e){return null==e&&(e={}),e.data=o.extend({access_token:this.token,notebookGuid:this.bookId,count:this.pageCount},e.data),r.ajax({url:e.url,data:e.data,silentError:!0}).then((t=this,function(n){var r,o;return r=n.startIndex,o=n.totalNotes,r&&o&&r+t.pageCount>o&&(t.noteHasMore=!1),"function"==typeof e.success?e.success(n):void 0})).catch(function(t){return e.tokenInvalidHandler?"function"==typeof e.tokenInvalidHandler?e.tokenInvalidHandler(t.responseJSON.message):void 0:"function"==typeof e.error?e.error(t.responseJSON.message):void 0});var t},e.prototype.getNotebooks=function(e){var t;return t=s+"/"+this.type+"/listNotebooks",this._get(o.extend({url:t},e))},e.prototype.getNotes=function(e){var t;return null==e&&(e={}),t=s+"/"+this.type+"/findNotesMetadata",e.data=o.extend({page:++this.notePage},e.data),this._get(o.extend({url:t},e))},e}()},yeXCkzp4:function(e,t,n){var r,o,i,s,a={}.hasOwnProperty;s=n("sa1Ed382"),i=n("GESwhXbR").Toast,o=n("hGNqppva"),r=n("0OAOR4eH"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,o),t.prototype.viewName="ArchiveDeleteMenuView",t.prototype.className="archive-menu-view",t.prototype.popoverTitle="",t.prototype.events={"submit .delete-form":"deleteModelObject"},t.prototype.initialize=function(e){return null==e&&(e={}),e.currentModel?(this.options=e,this.currentModel=this.options.currentModel,t.__super__.initialize.apply(this,arguments)):this},t.prototype.render=function(e){return this.$el.html(r(this.options)),this},t.prototype.deleteModelObject=function(e){var t,n,r,o;return e.preventDefault(),"task"!==(r=(n={action:"deleted archived content",type:this.options.gtaType||this.currentModel.get("objectType")}).type)&&"subtask"!==r||(n.series=this.currentModel.get("ancestorIds").length),s.gta.event(n),t={success:(o=this,function(){var e;return o.success(),null!=(e=o.options)&&"function"==typeof e.success?e.success():void 0})},this.currentModel[this.currentModel.get("objectType")?"destroy":"deleteObject"](t),this},t.prototype.success=function(){return i.success({message:tb_i18n.get("delete.success")}),this.remove()},t}()},yiTDTdSW:function(e,t,n){e.exports={settings:"settings__3osI",title:"title__2oua",tabs:"tabs__B-Fu",tab:"tab__Qzyw","tab-icon":"tab-icon__2bFd","tab-text":"tab-text__2TPx","tab-active":"tab-active__zUqg",content:"content__2jbf",info:"info__32v1","info-title":"info-title__sgO2","info-name":"info-name__1dR8","info-description":"info-description__TAVx","info-submit":"info-submit__2QlU",more:"more__2LNR","more-title":"more-title__2o9W","more-description":"more-description__36db","more-submit":"more-submit__3XFW","confirm-body":"confirm-body__2Onr","confirm-message":"confirm-message__3W5u","confirm-title":"confirm-title__3WjQ","confirm-submit":"confirm-submit__3XBl"}},yko8HlGT:function(e,t){e.exports=function(e){var t="";return e.isArchived?t+=' <span class="file-location-archived"> '+tb_i18n.get("previewer.archived")+" </span>":e._parentId&&e.roleScope>=0?t+=' <a class="enter-collection-handler" data-id="'+e._parentId+'" data-gta="event" data-label="enter collection"> '+tb_i18n.get("previewer.enter.collection")+" </a>":t+=' <span class="file-location-temp"> '+tb_i18n.get("previewer.header.folder.tips")+tb_i18n.get("colon")+" "+tb_i18n.get("previewer.header.temp.tips")+" </span>",t}},yo9JmavA:function(e,t){e.exports=function(e){return'<div class="actions-bar"> <div class="action week-selector-wrap"></div></div><div class="events-list-wrap"></div>'}},yp7eYona:function(e,t,n){"use strict";n.r(t),n.d(t,"Priority",function(){return p});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("tLZJUYWX"),c=n("GESwhXbR"),l=n("MKFOP9IO"),u=n("fpIMfP/U"),p=(n("jSJa2pQN"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priorities=u.a,t.onClickPriority=function(e){e.number!==t.props.priority&&t.props.onChangePriority(e.number)},t}return r.d(t,e),t.prototype.renderPriorityList=function(){var e=this.priorities[this.props.priority];return o.createElement(l.a,{onClickPriority:this.onClickPriority,priority:e})},t.prototype.renderPriorityAside=function(){var e=this.props.withTitle,t=void 0===e||e,n="priority-aside detail-infos-aside "+(t?"":"short-version"),r=o.createElement("span",{className:"priority-title"},a.get("priority"));return o.createElement("div",{className:n},o.createElement(c.Icon,{name:"circle"}),t&&r)},t.prototype.renderDropdown=function(){return o.createElement(c.Dropdown,{placement:"bottomLeft",content:this.renderPriorityList(),nested:!0},this.renderPriorityContent())},t.prototype.renderPriorityContent=function(){var e=this.priorities[this.props.priority],t=this.props.hasPermission,n=s()(e.className,{"cursor-not-allowed":!t});return o.createElement("a",{className:n},a.get(e.title))},t.prototype.render=function(){var e=this.props.hasPermission;return o.createElement("div",{className:"priority-container flex flex-vcenter"},this.renderPriorityAside(),o.createElement("div",{className:"priority-wrap detail-infos-content"},e&&this.renderDropdown(),!e&&this.renderPriorityContent()))},t}(o.PureComponent))},"yt+aIX9v":function(e,t,n){"use strict";var r,o,i,s,a,c;n.r(t),function(e){e[e.Public=0]="Public",e[e.Org=2]="Org",e[e.OrgPro=3]="OrgPro"}(r||(r={})),function(e){e.AppForProject="app_for_project",e.AppForMe="app_for_me",e.PluginForSetting="plugin_for_setting",e.PluginForTasklist="plugin_for_tasklist",e.PluginForTask="plugin_for_task",e.PluginForTaskDetail="plugin_for_task_detail",e.PluginForStage="plugin_for_stage",e.PluginForProject="plugin_for_project",e.PluginForPost="plugin_for_post",e.PluginForCollection="plugin_for_collection",e.PluginForWork="plugin_for_work",e.PluginForEvent="plugin_for_event",e.PluginForRelate="plugin_for_relate",e.Others="others"}(o||(o={})),function(e){e.Api="api",e.Redirect="redirect",e.Modal="modal",e.Fullscreen="fullscreen",e.Iframe="iframe",e.Client="client"}(i||(i={})),function(e){e[e.Disabled=0]="Disabled",e[e.Enabled=1]="Enabled"}(s||(s={})),function(e){e.Common="common",e.Taskflow="taskflow"}(a||(a={})),function(e){e.AppList="appList",e.AppDetail="appDetail"}(c||(c={}));var l=["tasks","events"],u=["posts"],p=["timeView","tableView"],d=["tasks","posts","events","works","groupchat","thoughts","bookkeeping","analytics","projectinfoapp","testplan","startDate","markdown","shimo","zoomus","taskUniqueId","timeView","tableView","evernote","yinxiang","weibo","github","processon","jinshuju","fangcloud","gitintegration"],h=n("mrSGxOB2"),m=n("q1tIBJhx"),f=n.n(m),g=n("tLZJUYWX"),v=n.n(g),b=n("4c1CS0b3"),y=n("GESwhXbR"),k=n("sa1Ed382"),_=n("s0r7VfKc"),w=n("77NnVLwu"),C=n.n(w);var S=n("oEzVJ1gN"),E=n.n(S),T=n("gh8QIhMV"),I=n("ijCdHo2S"),M=n.n(I),j=n("k8Y/YyAv"),P=n.n(j),x=n("MJIlx/gX"),N=n.n(x),O=n("2qRnoGmE"),R=n.n(O),D=n("ln9RsXX9"),L=n("aKydnTgX"),z=n("80gYlwjC"),A=function(e){var t=new Map;return e.forEach(function(e){if(t.has(e._consumerId)){var n=t.get(e._consumerId);t.set(e._consumerId,h.a({},n,{relatedFeatures:(n.relatedFeatures||[]).concat(e),isConfigurable:n.isConfigurable||e.type===o.PluginForSetting}))}else t.set(e._consumerId,h.a({},e,{isConfigurable:B(e._appName,e.type)}))}),Array.from(t.values())},V=function(e){return e._consumerId!==e._id},F=function(e,t){return!1},B=function(e,t){return t===o.PluginForSetting||l.includes(e)||u.includes(e)&&!R.a.FREE&&-1===k.env.indexOf("us")},U=function(e,t){var n=[t].concat(t.relatedFeatures||[]);return N()(n,function(t){return function(t){if(!t.suitTypes||!t.suitTypes.length)return!0;var n="taskflow"===e.normalType?"taskflow":"common";return M()(t.suitTypes,n)}(t)})},$=function(e,t){return G(e)&&!(t.isProfessional&&t.isPaid)},H=function(e,t){return G(e)&&!t.isProfessional},G=function(e){return V(e)?e.version===r.OrgPro:[4,5].includes(e._appType)},q=function(e){return P()(e,[function(e){var t=d.indexOf(e._appName);return t>-1?t:9999},function(e){return V(e)},function(e){return e.consumerPinyin}],["asc","asc","asc"])};function W(e,t){if(H(e,t))return Object(D.paywallUrl)(z.PlanType.Wildcard,L.a.Pro,t.objectId)}var J,X=n("kcifn6qB"),Y=n.n(X),K=n("Jlc56ifS"),Q=n.n(K),Z=n("TSYQbtd+"),ee=n.n(Z),te=n("suI5NDUm"),ne=n("4z2SmMW4"),re=n("jxTVpsFZ"),oe=n.n(re),ie=n("ogYb4/7i"),se=n.n(ie),ae=n("CxY0Mkc1");!function(e){e.All="all",e.Enabled="enabled"}(J||(J={}));var ce=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChangeSearch=function(e){n.setState({query:e.currentTarget.value})},n.handleClickPUGLink=function(){window.open(R.a.HELP_CENTER_URL+"/hc/kb/article/1216404/","_blank")},n.handleClickCard=function(e){return function(){n.props.onClickCard(e)}},n.handleToggleFeature=function(e,t){return function(r){r.stopPropagation(),n.props.onToggleFeature(e,t)}},n.handleClickGoToConfig=function(e){return function(t){t.stopPropagation(),n.props.onClickGoToConfig(e)}},n.handleClickCloseButton=function(e){e.stopPropagation()},n.handleOpenAppStore=function(){var e={pathname:R.a.APPSTORE_HOST,query:{organizationId:n.props.project._organizationId}};window.open(ae.format(e)),k.gta.event({action:"open appstore",page:"Power-up Page",method:"click"})},n.onSelectTab=function(e){return function(){n.setState({tab:e})}},n.isTabItemActive=function(e){return n.state.tab===e?f.a.createElement(y.Icon,{name:"tick",className:se.a["icon-grey"]}):null},n.renderSelector=function(){var e,t=((e={})[J.All]=v.a.get("application.all"),e[J.Enabled]=v.a.get("application.opened"),e),r=Object.values(J).map(function(e){return f.a.createElement(y.MenuItem,{key:e,onClick:n.onSelectTab(e)},t[e],n.isTabItemActive(e))});return f.a.createElement(y.Dropdown,{placement:"bottomRight",content:f.a.createElement(y.Menu,null,r)},f.a.createElement("div",{className:se.a["selector-picker"]},t[n.state.tab],f.a.createElement(y.Icon,{name:"chevron-down",size:14})))},n.state={tab:J.All,query:""},n}return h.d(t,e),t.prototype.getShowFeatures=function(){var e=this,t=A(this.props.features).filter(function(t){return!("all"!==e.state.tab&&!t.status)&&(!e.state.query.trim()||!Q()([t.consumerName,t.name,t._appName],function(t){return!M()(t,e.state.query.trim())}))});return q(t)},t.prototype.renderConfirmClose=function(e){var t=v.a.get("powerups.app.confirm.close",this.props.project.name,e.consumerName);return f.a.createElement("div",{className:se.a["confirm-close"]},f.a.createElement("p",null,t),f.a.createElement(y.Button,{danger:!0,onClick:this.handleToggleFeature(e,0)},v.a.get("powerups.app.close.btn")))},t.prototype.renderButtons=function(e){var t=this.props,n=t.project,r=t.payment;if(t.hasPermission){if(!U(n,e))return f.a.createElement("div",{className:se.a["button-group"]},f.a.createElement("p",null,v.a.get("application.not.suit.project")));var o=f.a.createElement(y.TitledDropdown,{title:v.a.get("powerups.app.close"),titleCls:se.a["confirm-close-title"],content:this.renderConfirmClose(e),nested:!0},f.a.createElement(y.Button,{danger:!0,size:"smaller",type:"secondary",onClick:this.handleClickCloseButton},v.a.get("close"))),i=e.isConfigurable&&f.a.createElement(y.Button,{size:"smaller",type:"secondary",onClick:this.handleClickGoToConfig(e)},v.a.get("setting")),a=f.a.createElement(y.Button,{size:"smaller",onClick:this.handleToggleFeature(e,1),"data-pay":W(e,r)},v.a.get("open")),c=e.status===s.Enabled?f.a.createElement(f.a.Fragment,null,o,i):a;return f.a.createElement("div",{className:se.a["button-group"]},c)}},t.prototype.renderPowerUpsUpgradeContent=function(){var e=Object(te.isAone)()||f.a.createElement(y.TextButton,{color:"blue",onClick:this.handleClickPUGLink},v.a.get("powerups.upgrade.link"));return f.a.createElement("div",null,f.a.createElement("div",{className:se.a.title},f.a.createElement("p",null,v.a.get("powerups.upgrade.title")),e),f.a.createElement("p",{className:se.a.desc},v.a.get("powerups.upgrade.description")))},t.prototype.renderPowerUpsUpgrade=function(){return f.a.createElement(ne.a,{className:se.a["power-up-upgrade"],storage:ne.a.Storage.remote,index:"POWER_UPS_V_10_5",content:this.renderPowerUpsUpgradeContent()})},t.prototype.renderList=function(){var e=this;if(!this.props.features)return f.a.createElement(y.Loading,null);var t=this.getShowFeatures();if(!t.length)return f.a.createElement("div",{className:se.a["app-list-placeholder"]},f.a.createElement("section",{style:{backgroundImage:"url("+oe.a+")"}}),f.a.createElement("p",null,v.a.get("no.application")));var n=t.map(function(t){var n=t.shortDesc||t.consumerDesc?f.a.createElement(y.Tooltip,{title:t.shortDesc||t.consumerDesc},f.a.createElement("p",{className:se.a["short-des"]},t.shortDesc||t.consumerDesc)):f.a.createElement("p",{className:se.a["short-des"]},v.a.get("no.description")),r=t.status===s.Enabled&&f.a.createElement(y.Icon,{className:se.a["circle-tick"],name:"state-check",size:14}),o=$(t,e.props.payment)&&f.a.createElement("span",{className:se.a["feature-pro-mark"]},"PRO");return f.a.createElement("div",{className:se.a.card,key:t._id,onClick:e.handleClickCard(t)},f.a.createElement(y.Avatar,{className:se.a["feature-avatar"],shape:"square",size:"medium",src:t.avatarUrl}),f.a.createElement("div",{className:se.a["feature-infos"]},f.a.createElement(y.Tooltip,{title:t.consumerName},f.a.createElement("p",{className:se.a.title},t.consumerName,r)),n,e.renderButtons(t)),o)}),r=Y()(n,3).map(function(e,t){if(3===e.length)return f.a.createElement("li",{key:"list__"+t},e);var n=Array.from({length:3-e.length},function(e,t){return f.a.createElement("div",{key:t,className:ee()(se.a.card,se.a.void)})});return f.a.createElement("li",{key:"list__"+t},e,n)});return f.a.createElement("ul",null,r)},t.prototype.renderHeader=function(){return f.a.createElement("header",{className:se.a["body-header"]},f.a.createElement("div",{className:se.a["search-bar"]},f.a.createElement(y.Input,{placeholder:v.a.get("search.input.app.name"),onChange:this.handleChangeSearch,prefixIcon:"search"})),this.renderSelector())},t.prototype.renderContent=function(){return f.a.createElement("div",{className:ee()(se.a["body-content"],"thin-scroll")},this.renderPowerUpsUpgrade(),this.renderList())},t.prototype.renderMoreApps=function(){return R.a.FREE?null:f.a.createElement("div",{className:se.a["fix-button"],onClick:this.handleOpenAppStore},v.a.get("application.more"),f.a.createElement(y.Icon,{name:"circle-arrow-right-o"}))},t.prototype.render=function(){var e,t=ee()(se.a["modal-body-main"],((e={})[se.a["in-sub"]]=this.props.inSub,e));return f.a.createElement("div",{className:t},this.renderHeader(),this.renderContent(),this.renderMoreApps())},t}(f.a.PureComponent),le=n("UB5XV5EZ"),ue=n.n(le),pe=n("6FppZq3b"),de=n.n(pe),he=function(e){function t(t){var n=e.call(this,t)||this;n.handleMovePrev=function(){n.setState({index:n.state.index-1})},n.handleMoveNext=function(){n.setState({index:n.state.index+1})};var r=t.index;return n.state={index:n.isValid(r)?r:0},n}return h.d(t,e),t.prototype.componentDidUpdate=function(e){this.isValid(e.index)&&e.id!==this.props.id&&this.setState({index:e.index})},t.prototype.isValid=function(e){return ue()(e)&&e>-1&&this.props.images.length>=e},t.prototype.renderSlide=function(){var e,t=this.props.images.map(function(e,t){return f.a.createElement("section",{className:de.a.image,key:"image_"+t,style:{backgroundImage:"url("+e+")"}})}),n=ee()(de.a["left"+this.state.index],((e={})[de.a["is-last"+this.state.index]]=this.state.index===this.props.images.length-1,e));return f.a.createElement("div",{className:de.a["slide-screen"]},f.a.createElement("div",{className:n},t))},t.prototype.renderController=function(){if(1!==this.props.images.length)return f.a.createElement("div",{className:de.a.controller},f.a.createElement(y.IconButton,{onClick:this.handleMovePrev,type:"subtle",color:"gray",name:"chevron-left",disabled:0===this.state.index}),f.a.createElement(y.IconButton,{onClick:this.handleMoveNext,type:"subtle",color:"gray",name:"chevron-right",disabled:this.state.index+1===this.props.images.length}))},t.prototype.renderHead=function(){return f.a.createElement("div",{className:de.a.head},f.a.createElement("p",null,this.props.title),this.renderController())},t.prototype.render=function(){return 0===this.props.images.length?null:f.a.createElement("div",{className:ee()(de.a["slide-container"],this.props.className)},this.renderHead(),this.renderSlide())},t}(f.a.PureComponent),me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleToggleFeature=function(e){return function(){e===s.Enabled&&k.gta.event({action:"opened "+t.props.feature._appName+" app",control:"power-up",method:"click"}),t.props.onToggleFeature(t.props.feature,e)}},t.handleClickGoToConfig=function(){t.props.onClickGoToConfig(t.props.feature)},t}return h.d(t,e),t.prototype.renderConfirmClose=function(){var e=v.a.get("powerups.app.confirm.close",this.props.project.name,this.props.feature.consumerName);return f.a.createElement("div",{className:se.a["confirm-close"]},f.a.createElement("p",null,e),f.a.createElement(y.Button,{danger:!0,onClick:this.handleToggleFeature(0)},v.a.get("powerups.app.close.btn")))},t.prototype.renderFeature=function(e){var t=e.description?window._encodeHTML(e.description,"MD"):v.a.get("no.description");return f.a.createElement("li",{key:e._id},f.a.createElement("div",{className:se.a["feature-avatar"]},f.a.createElement(y.Avatar,{shape:"square",src:e.avatarUrl})),f.a.createElement("div",{className:se.a["feature-infos"]},f.a.createElement("p",{className:se.a.title},e.name),f.a.createElement("p",{className:se.a["short-des"],dangerouslySetInnerHTML:{__html:t}})))},t.prototype.renderFeatures=function(){var e=this,t=this.props.feature,n=h.h([this.renderFeature(t)],(t.relatedFeatures||[]).map(function(t){return e.renderFeature(t)}));return f.a.createElement("div",{className:se.a.features},f.a.createElement("p",null,v.a.get("application.feature")),f.a.createElement("ul",null,n))},t.prototype.renderSlide=function(){return f.a.createElement(he,{id:this.props.feature._id,className:se.a.slide,title:v.a.get("application.preview"),images:this.props.feature.descImages,index:0})},t.prototype.renderSeparator=function(){return f.a.createElement("span",{className:se.a.separator})},t.prototype.renderDescription=function(){var e=window._encodeHTML(this.props.feature.consumerDesc,"MD");return f.a.createElement("p",{className:se.a.description,dangerouslySetInnerHTML:{__html:e}})},t.prototype.renderButtons=function(){var e=this.props,t=e.project,n=e.feature,r=e.payment;if(e.hasPermission&&U(t,n)){var o=n.isConfigurable&&f.a.createElement(y.Button,{type:"secondary",onClick:this.handleClickGoToConfig},v.a.get("application.setting")),i=f.a.createElement(y.TitledDropdown,{title:v.a.get("powerups.app.close"),titleCls:se.a["confirm-close-title"],content:this.renderConfirmClose(),nested:!0},f.a.createElement(y.Button,{danger:!0,type:"secondary"},v.a.get("powerups.app.close"))),a=f.a.createElement(y.Button,{onClick:this.handleToggleFeature(1),"data-pay":W(n,r)},H(n,r)?v.a.get("powerups.app.upgrade"):v.a.get("open")),c=n.status===s.Enabled?f.a.createElement(f.a.Fragment,null,o,i):a;return f.a.createElement("div",{className:se.a.right},c)}},t.prototype.renderTitle=function(){var e=this.props,t=e.feature,n=e.payment,r=t.status===s.Enabled&&f.a.createElement(y.Icon,{className:ee()(se.a["circle-tick"],se.a.medium),name:"state-check",size:16}),o=$(t,n)&&f.a.createElement("span",{className:se.a["pro-mark"]},v.a.get("organization.trail.pro.name"));return f.a.createElement("div",{className:se.a.left},f.a.createElement("p",{className:se.a.title},f.a.createElement("span",{className:se.a.name},t.consumerName),o,r),f.a.createElement("p",{className:se.a["short-desc"]},v.a.get("powerups.author",t.developer?t.developer.name:"Teambition")))},t.prototype.renderTitleAndButtons=function(){return f.a.createElement("div",{className:se.a["title-and-buttons"]},this.renderTitle(),this.renderButtons())},t.prototype.renderInfos=function(){return f.a.createElement("div",{className:se.a.infos},this.renderTitleAndButtons(),this.renderDescription(),this.renderSeparator(),this.renderSlide(),this.renderFeatures())},t.prototype.renderAvatar=function(){return f.a.createElement(y.Avatar,{className:se.a.avatar,shape:"square",src:this.props.feature.avatarUrl})},t.prototype.render=function(){var e,t=ee()(se.a["modal-body-sub"],"thin-scroll",((e={})[se.a["in-main"]]=!this.props.inSub,e));return f.a.createElement("div",{className:t},this.renderAvatar(),this.renderInfos())},t}(f.a.PureComponent),fe=n("WMI0/nUp"),ge=fe.enableProjectPlugin,ve=fe.disableProjectPlugin,be=function(e){function t(t){var n=e.call(this,t)||this;return n.settingView=null,n.handleVisibleChange=function(e){n.setState({opened:e})},n.handleGoBack=function(){n.setState({inSubMenu:!1})},n.handleToggleFeature=function(e,t){if(n.subscription&&n.subscription.unsubscribe(),V(e))if(t===s.Enabled){var r=ge(n.project._id,e._id,e._consumerId);n.subscription=b.Observable.fromPromise(r).do(function(){return n.updateState(e,t)},function(e){return Object(T.throwError)(e)}).subscribe()}else{var o=ve(n.project._id,e._id,e._consumerId);n.subscription=b.Observable.fromPromise(o).do(function(){return n.updateState(e,t)},function(e){return Object(T.throwError)(e)}).subscribe()}else n.props.projectModel.pluginToggle(e._appName,{enable:t}),n.updateState(e,t);k.gta.event({action:t===s.Enabled?"turn on app":"turn off app",control:"show power-ups",note1:e._appName||e._id})},n.handleClickGoToGitIntegration=function(){k.gta.event({action:"raise git integration settings",private:"git-integration"})},n.handleClickGoToConfig=function(e){n.settingView&&n.settingView.remove(),n.settingView=k.APP.requestSubView(E.a,{projectModel:n.props.projectModel,tabName:e._appName})},n.handleClickGoToDetail=function(e){n.setState({inSubMenu:!0,feature:e})},n.state={features:null,opened:t.defaultOpened||!1,inSubMenu:t.fromWhere===c.AppDetail,feature:null},n.project=t.projectModel.toJSON(),n.payment=t.projectModel.payment,n.hasPermission=t.projectModel.hasPermission("project.put.applications"),n}return h.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.getFeatureSubscription=_.default.fetch.getFeaturesByProject(this.project._id).subscribe(function(t){var n=e.props.featureAppName&&t.find(function(t){return t._appName===e.props.featureAppName})||null;e.setState({features:t,feature:n})},function(e){return Object(T.throwError)(e)})},t.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.unsubscribe(),this.getFeatureSubscription&&this.getFeatureSubscription.unsubscribe(),this.settingView&&this.settingView.remove()},t.prototype.open=function(){this.handleVisibleChange(!0)},t.prototype.close=function(){this.handleVisibleChange(!1)},t.prototype.updateState=function(e,t){if(t===s.Enabled){var n=v.a.get("powerups.item.detail.opened",e.consumerName);"gitintegration"===e._appName&&y.Toast.success({message:n,description:this.renderGitIntegrationMessage()}),y.Toast.success({message:n})}else y.Toast.success({message:v.a.get("powerups.item.detail.closed",e.consumerName)});var r=this.state.features.map(function(n){return n._id===e._id?h.a({},n,{status:t}):n});this.setState({features:r,feature:this.state.feature&&this.state.feature._id===e._id?h.a({},this.state.feature,{status:t}):this.state.feature})},t.prototype.renderGitIntegrationMessage=function(){return f.a.createElement("p",{className:se.a["toast-desc-settings"]},f.a.createElement("span",null,v.a.get("powerups.git.integration.settings.hint")+" "),f.a.createElement(y.TextButton,{color:"blue",onClick:this.handleClickGoToGitIntegration},v.a.get("setting")))},t.prototype.renderSub=function(){if(this.state.feature)return f.a.createElement(me,{inSub:this.state.inSubMenu,project:this.project,feature:this.state.feature,hasPermission:this.hasPermission,payment:this.payment,onClickGoToConfig:this.handleClickGoToConfig,onToggleFeature:this.handleToggleFeature})},t.prototype.renderMain=function(){if(this.props.fromWhere!==c.AppDetail)return f.a.createElement(ce,{inSub:this.state.inSubMenu,project:this.project,features:this.state.features,hasPermission:this.hasPermission,payment:this.payment,onClickGoToConfig:this.handleClickGoToConfig,onClickCard:this.handleClickGoToDetail,onToggleFeature:this.handleToggleFeature})},t.prototype.renderGoBackButton=function(){return this.props.fromWhere===c.AppList&&this.state.inSubMenu&&f.a.createElement(y.IconButton,{color:"gray",name:"chevron-left",onClick:this.handleGoBack})},t.prototype.renderTitle=function(){return"appDetail"===this.props.fromWhere?v.a.get("powerups.modal.title.detail"):f.a.createElement("div",{className:se.a.title},this.renderGoBackButton(),f.a.createElement("p",null,v.a.get("plugin")))},t.prototype.renderBody=function(){return this.state.inSubMenu?this.renderSub():this.renderMain()},t.prototype.render=function(){return f.a.createElement(y.Modal,{className:se.a.modal,titleCls:se.a["modal-title"],zIndex:100,title:this.renderTitle(),opened:this.state.opened,onVisibleChange:this.handleVisibleChange,mountIn:this.props.mountIn,onHide:this.props.onHide},f.a.createElement("div",{className:se.a["modal-body"]},this.renderBody()))},t}(f.a.PureComponent),ye=Object(m.forwardRef)(function(e,t){var n=e.projectId,r=h.g(e,["projectId"]),o=function(e){var t=h.f(Object(m.useState)(null),2),n=t[0],r=t[1];return Object(m.useEffect)(function(){var t=C.a.fetch$(e).subscribe(r);return function(){return t.unsubscribe()}},[e]),n}(n);return o&&f.a.createElement(be,h.a({},r,{projectModel:o,ref:t}))});n.d(t,"ApplicationVersion",function(){return r}),n.d(t,"FeatureType",function(){return o}),n.d(t,"FeatureMode",function(){return i}),n.d(t,"FeatureStatus",function(){return s}),n.d(t,"FeatureSuitType",function(){return a}),n.d(t,"PageType",function(){return c}),n.d(t,"BIG_INT",function(){return 9999}),n.d(t,"DefaultConfigurableAppNames",function(){return l}),n.d(t,"DependOnServerEnvAppNames",function(){return u}),n.d(t,"ScrumProjectOmitAppNames",function(){return p}),n.d(t,"APPLICATIONS_SORTED_NAMES",function(){return d}),n.d(t,"PowerUpModalComponent",function(){return be}),n.d(t,"PowerUpModal",function(){return ye}),n.d(t,"getAggregateFeatures",function(){return A}),n.d(t,"isPlugin",function(){return V}),n.d(t,"isImmutable",function(){return F}),n.d(t,"isConfigurable",function(){return B}),n.d(t,"isSuit",function(){return U}),n.d(t,"showProMark",function(){return $}),n.d(t,"isOrgProNeeded",function(){return H}),n.d(t,"getSortedFeatures",function(){return q}),n.d(t,"getPayProtocol",function(){return W})},ytDAhr3u:function(e,t,n){"use strict";n.r(t),n.d(t,"GN10",function(){return o}),n.d(t,"T10",function(){return i}),n.d(t,"P10",function(){return s}),n.d(t,"B10",function(){return a}),n.d(t,"R10",function(){return c}),n.d(t,"A10",function(){return l}),n.d(t,"GN50",function(){return u}),n.d(t,"T50",function(){return p}),n.d(t,"P50",function(){return d}),n.d(t,"B50",function(){return h}),n.d(t,"R50",function(){return m}),n.d(t,"A50",function(){return f}),n.d(t,"defaultColor",function(){return g}),n.d(t,"Colors",function(){return v}),n.d(t,"ColorValues",function(){return b}),n.d(t,"ColorNames",function(){return y}),n.d(t,"calculateColor",function(){return k});var r=n("a+N5u/Cl"),o="#ACDE8C",i="#82D7D1",s="#AEB1DE",a="#8ACAF9",c="#FF958B",l="#FFCF87",u="#75C940",p="#2FBDB3",d="#797EC9",h="#3DA8F5",m="#FF4F3E",f="#FFAF38",g="blue",v={blue:h,green:u,cyan:p,purple:d,yellow:f,red:m,gray:p},b=r.values(v),y=r.chain(v).keys().without("gray").value(),k=function(e,t){return t?"#"+t.slice(0,6):v[e]||v[g]}},yyFmPRUj:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M={}.hasOwnProperty,j=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};E=n("a+N5u/Cl"),I=n("sa1Ed382"),w=n("3eMzznN/"),i=n("bZr3G77e"),C=n("vmWJWrVe"),s=n("wd/RKGTj"),_=n("GESwhXbR").Toast,T=n("s0r7VfKc").default,c=n("77NnVLwu"),f=n("oq1bWpp9"),d=n("+BDmEJp8"),y=n("ioaOqjIU"),k=n("gBe2F1Rz"),l=n("B6lynyzv"),S=n("OmupbwLD"),m=n("GPNoQLd7"),h=n("H5U46Bxa"),g=n("Ia+quZnZ").TaskScenariosList,u=n("GQl3SEVk"),a=n("0BazJikX").ProProjectCreateTaskConfig,r=n("Pf3aS65Q"),o=n("WB6pyRpE"),b=n("Nn4Bflkl"),v=n("fCNqCmfQ"),p=n("sGvj1dfm"),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)M.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,C),t.prototype.viewName="ObjectPickerTasksView",t.prototype.className="object-picker-tasks-view flex-horiz flex-stretch horizontal-scroll",t.prototype.events={"click .tasklist-normal":"switchTasklist","click .smart-group:not(.group-name)":"clearScenarioList","click .tasklist-smart-today":"showTodayTasks","click .tasklist-smart-total":"showUndoneTasks","click .tasklist-smart-done":"showDoneTasks","click .task":"toggleTask","click .link-add-handler":"creatorTaskHandler","click .link-add-subtask-handler":"creatorSubtaskHandler"},t.prototype.initialize=function(e){var t;return this.options=e,this._projectId=e._projectId,this.multi=e.multi,this._organizationId=e._organizationId,this.tasksCache={},this.selected=[],this.subtaskList=[],this.proProjectCreateTaskConfig=null,this.renderBasic(),this.showLoadingIndicator(this.$columns),Promise.all([this.fetchProjectModel(),this.fetchTasklistCollection()]).then((t=this,function(e){if(t.projectModel=e[0],t.tasklistsCollection=e[1],t.$el)return t.hideLoadingIndicator({animated:!1}),t._projectId?(t.tasklistsCollection.updateSort(I.PREFERENCE.tasklistSortInProject(t._projectId),!0),t.renderTasklist()):t.loadIndieTasks()})).catch(function(e){if(e)return _.error({message:e.message||e})}),this},t.prototype.fetchProjectModel=function(){return this._projectId?c.resolveFetch(this._projectId):Promise.resolve()},t.prototype.fetchTasklistCollection=function(){return this._projectId?new Promise((e=this,function(t,n){return y.fetch(e._projectId,{success:t,error:function(e,t){return n(t)}})})):Promise.resolve();var e},t.prototype.loadTasklistTasks=function(){var e,t;return e=this.tasklistModel.id,this.showLoadingIndicator(this.$columns),new Promise((t=this,function(e,n){return d.fetch(t.tasklistModel.id,{success:function(r){return t.$el?e(r):n()},error:function(e,t){return n(t)}})})).then(function(t){return function(n){if(t.tasklistModel.id===e)return t.stagesCollection=n,E.reduce(t.stagesCollection.pluck("_id"),function(e,n){return e.then(function(e){return new Promise(function(r,o){return new k(null,{_boundToObjectId:n}).fetch({attrs:{isDone:!1},success:function(i){var s;return t.$el?(e.push({stageName:null!=(s=t.stagesCollection.get(n))?s.get("name"):void 0,tasks:i.getVisibleModels()}),r(e)):o()},error:function(e,t){return o(t)}})})})},Promise.resolve([]))}}(this)).then(function(t){return function(n){if(t.$el&&t.tasklistModel.id===e)return t.hideLoadingIndicator({animated:!1}),t.renderBaseColumn(),t.renderStagedTasks(n),t.renderTaskIdLabel()}}(this)).catch(function(e){if(e)return _.error({message:e.message||e})}),this},t.prototype.loadIndieTasks=function(){return this.$taskgroup.hide(),i.get("organizations/"+this._organizationId+"/tasks",{data:{pageSize:1e3,onlyOrganizationTask:!0,onlyTopTask:!0}}).then((e=this,function(t){var n,r;if(r=t.result,e.$el)return e.hideLoadingIndicator({animated:!1}),n=E.chain(r).sortBy(function(e){return!!e.isDone}).map(function(e){return new f(e,{bindByMatrix:!1})}).value(),e.renderBaseColumn(),e.renderTasks(n)}));var e},t.prototype.loadSubtasks=function(e){var t;if(e)return this.showLoadingIndicator(this.$columns),w.promiseChain((t=this,function(){return!t.el}))(function(){return w.warehouse.resolveFetch(f,e)},function(t){return w.warehouse.resolveFetch(k,e,{boundToObjectType:"task"}).then(function(e){return[t,e]})}).then(function(t){return function(n){var r,o,i;return o=n[0],i=n[1],t.hideLoadingIndicator({animated:!1}),r=E.findIndex(t.subtaskList,function(e){return E.find(e.tasks,function(e){return e.id===o.id})})+1,t.subtaskList.splice(r),t.subtaskList.push({_taskId:e,tasks:i.getVisibleModels(),canCreate:!o.get("isDone")&&t.multi}),t.renderColumns()}}(this))},t.prototype.renderBasic=function(){return this.$el.html(r()),this.$columns=this.$(".tasks-list-wrapper"),this.$scenarioList&&this.unmountReact(this.$scenarioList.get(0)),this.$scenarioList=this.$(".task-scenario-list"),this.$taskgroup=this.$(".tasklists-list"),this},t.prototype.renderBaseColumn=function(e){return this.$columns.html(o({taskPost:null!=e?e:this.getTaskPostPermission(),canCreate:this.multi}))},t.prototype.renderColumns=function(){var e,t,n;return this.$(".column[data-id]").remove(),this.subtaskList.forEach((n=this,function(e,t){var r,i,s,a,c;return a=n.getTaskPostPermission(!0),c=e.tasks,r=e.canCreate,s=a&&r||c.length,e.taskPost=a,i=t+1,e.empty=!s,n.$columns.append(o(e)),n.renderTasks(e.tasks,e._taskId),n.renderTaskIdLabel(i)})),e=this.$scenarioList.width(),t=200*this.subtaskList.length+e,this.$el.animate({scrollLeft:t})},t.prototype.renderTasklist=function(){if(this._projectId)return this.$taskgroup.html(b({tasklists:this.tasklistsCollection.map(function(e){return e.toJSON()})})),this},t.prototype.renderStagedTasksInit=function(){return this.switchTaskCategoryInit(),this.options.onClearInput()},t.prototype.renderStagedTasks=function(e){var t,n,r,o;return n=[],r=0,E.each(e,(o=this,function(e){var t,i,s;if(i=e.stageName,s=e.tasks,t=o.getTasksData(s),r+=t.length,s.length)return n.push({stageName:i,tasks:t})})),t=this.$(".tasks-list").eq(0),r?t.html(p({stages:n})):t.html("<span class='placeholder-no-task'>"+tb_i18n.get("task.placeholder")+"</span>"),this.$el.animate({scrollLeft:this.$scenarioList.width()})},t.prototype.renderTasks=function(e,t,n){var r,o,i,s;return(t?this.$(".column[data-id="+t+"]"):this.$(".column").first()).find(".tasks-list").html(v({isSubtaskList:t&&e.length>0,tasks:this.getTasksData(e),fromSmart:n})),(o=this.$(".task[data-id="+t+"]")).addClass("selected"),(i=o.parents(".column").data("id"))&&((r=this.$(".task[data-id="+i+"]")).parents(".column").find(".task").removeClass("active"),w.removeItem(this.selected,i),r.removeClass("selected").addClass("active")),this.selected=[],this.$(".task.selected").each((s=this,function(e,t){var n;return n=$(t).data("id"),s.selected.push(n)})),this.onSelect()},t.prototype.renderTaskIdLabel=function(e){return null==e&&(e=0),this.$(".tasks-list").eq(e).find(".task").each((t=this,function(e,n){var r,o,i,s,a;if(i=(r=$(n)).data("id"),s=t.tasksCache[i],a=s.uniqueId,o=s._projectId)return c.fetch(o,{success:function(e){return t.requestSubView(m,{projectModel:e,uniqueId:a}).bind(r.find(".task-id-placeholder"))}})}));var t},t.prototype.removeSelected=function(e){return e.each((t=this,function(e,n){var r;return r=$(n).data("id"),$(n).removeClass("selected"),w.removeItem(t.selected,r)}));var t},t.prototype.getTasksData=function(e){return E.map(e,(t=this,function(e){var n;return e instanceof f&&(e=e.toJSON()),t.tasksCache[e._id]=e,e.executor=e.executor||{},e.content=w.escape(E.unescape(e.content)),e.dueDate&&(e.dueDate=w.formatDate(e.dueDate)),e.accomplished&&(e.accomplished=w.formatDate(e.accomplished)),e.disabled=(n=e._id,j.call(t.options.exclude,n)>=0),e}));var t},t.prototype.creatorHandler=function(e,t){var n,r,o,i,s;return null==e&&(e=null),null==t&&(t=0),r=[],n={getInheritedInfo:this.options.getInheritedInfo,_projectId:this._projectId,_organizationId:this._organizationId,_tasklistId:null!=(i=this.tasklistModel)?i.id:void 0,ancestorId:e,series:t,success:function(e){return r=r.concat(e)},onAllSuccess:(s=this,function(e){return s.options.onCreate(r,e)})},this.proProjectCreateTaskConfig&&(o=this.proProjectCreateTaskConfig.config.proTemplateConfigType,E.extend(n,{proTemplateConfigType:o})),this.requestSubView(S).open(h,n)},t.prototype.creatorTaskHandler=function(){return this.creatorHandler()},t.prototype.creatorSubtaskHandler=function(e){var t,n;return t=$(e.currentTarget).parent().data("id"),w.warehouse.resolveFetch(f,t).then((n=this,function(e){var r;return r=e.get("ancestorIds").length+1,n.creatorHandler(t,r)}))},t.prototype.toggleTask=function(e){var t;if(!(t=$(e.currentTarget)).hasClass("disabled"))return t.siblings().removeClass("active"),t.addClass("active"),this.selectedTasks(e),this},t.prototype.selectSingleItem=function(e){var t,n;return t=e.siblings(),e.addClass("selected"),n=e.data("id"),this.removeSelected(t),this.$prevTarget=null,!e.hasClass("selected")&&this.selected.length>=10?_.error({message:tb_i18n.get("object.picker.exceed.number")}):(this.selected.push(n),e.hasClass("smart-task")?void 0:this.loadSubtasks(n))},t.prototype.selectedTasks=function(e){var t,n,r,o,i,s,a,c,l,u,p,d,h,m;if(e){if(t=(r=$(e.currentTarget)).parents(".column"),s=r.data("id"),this.multi)if(e.metaKey||e.ctrlKey){if(!r.hasClass("selected")&&this.selected.length>=10)return _.error({message:tb_i18n.get("object.picker.exceed.number")});r.toggleClass("selected"),r.hasClass("selected")?this.selected.push(s):w.removeItem(this.selected,s)}else if(e.shiftKey){if(m=(p=this.$prevTarget?t.find(".task").index(this.$prevTarget):-1)>=0?p:0,c=t.find(".task").index(r),a=t.find(".task.disabled").length,Math.abs(c-m)-a>=10)return _.error({message:tb_i18n.get("object.picker.exceed.number")});for(i=this.$(".task"),this.removeSelected(i),(n=t.next(".column")).find(".tasks-list").empty(),t.nextAll().not(n).remove(),l=u=d=m,h=c;d<=h?u<=h:u>=h;l=d<=h?++u:--u)s=(o=t.find(".task").eq(l)).data("id"),o.addClass("selected"),this.selected.push(s)}else this.selectSingleItem(r);else this.selectSingleItem(r);return this.$prevTarget||(this.$prevTarget=r),this.onSelect()}},t.prototype.onSelect=function(){return this.selected=E.uniq(this.selected),this.options.onSelect(this.selected.map((e=this,function(t){return{_id:t,type:"task",title:e.$(".task[data-id="+t+"]").data("title"),gtaType:e.$(".task[data-id="+t+"]").parents(".column").data("id")?"subtask":"task",series:e.$(".task[data-id="+t+"]").parents(".column").index()}})));var e},t.prototype.switchTasklist=function(e){var t,n,r;return(null!=e?e.currentTarget:void 0)?n=(t=$(e.currentTarget)).data("id"):(n=e,t=this.$taskgroup.find(".tasklist-item[data-id="+n+"]")),this.tasklistModel=this.tasklistsCollection.get(n),t.parent().addClass("active").siblings().removeClass("active"),(null!=(r=this.projectModel)?r.isTaskflowEnabled():void 0)?this.switchScenarios():this.switchStageTasks()},t.prototype.switchStageTasks=function(){return this.renderStagedTasksInit(),this.loadTasklistTasks()},t.prototype.switchScenarios=function(){var e,t;return this.renderBaseColumn(!1),this.showLoadingIndicator(this.$scenarioList),null!=(e=this.getScenarioFieldConfigsSub$)&&e.unsubscribe(),this.getScenarioFieldConfigsSub$=T.getScenarioFieldConfigs(this.projectModel.id,"task").take(1).subscribe((t=this,function(e){if(t.hideLoadingIndicator(t.$scenarioList),e.length)return 1===e.length?(t.renderBaseColumn(),t.renderStagedTasksInit(),t.loadTaskflowTasks(e[0]._taskflowId,e[0]._id)):(t.proProjectCreateTaskConfig=new a(t.projectModel.toJSON(),e),t.renderScenarioView(e))}))},t.prototype.renderScenarioView=function(e){return this.requestReactView(this.$scenarioList.get(0),g,{scenarios:e,onSelect:(t=this,function(e){var n,r;return n=e._id,r=e._taskflowId,t.proProjectCreateTaskConfig.setScenarioId(n),t.renderBaseColumn(),t.renderStagedTasksInit(),t.loadTaskflowTasks(r,n)})});var t},t.prototype.loadTaskflowTasks=function(e,t){var n,r,o;return this.showLoadingIndicator(this.$columns),null!=(n=this.loadTaskflowTasksSub$)&&n.unsubscribe(),this.loadTaskflowTasksSub$=u.loadTaskflowTasks(e,t,this._projectId,null!=(r=this.tasklistModel)?r.id:void 0).subscribe((o=this,function(e){return o.hideLoadingIndicator(o.$columns),o.renderBaseColumn(),o.renderStagedTasks(e),o.renderTaskIdLabel()}))},t.prototype.switchTaskCategoryInit=function(){return this.tasksCache={},this.$columns.empty(),this.selected=[],this.subtaskList=[],this.options.onSelect([])},t.prototype.loadSmartGroupTasks=function(e){var t;return this.switchTaskCategoryInit(),l.fetch(this._projectId+"_"+e,{_projectId:this._projectId,queryType:e,attrs:this.queryAttrs,beforeSend:(t=this,function(){return t.showLoadingIndicator(t.$columns)}),success:function(e){return function(t){return e.hideLoadingIndicator({animated:!1}),e.taskModelsArray=t.filter(function(e){return e.checkIsVisible()}),e.renderBaseColumn(!1),e.renderTasks(e.taskModelsArray,null,!0),e.renderTaskIdLabel()}}(this)}),this},t.prototype.clearScenarioList=function(){return this.unmountReact(this.$scenarioList.get(0))},t.prototype.showTodayTasks=function(e){return $(e.currentTarget).parent().addClass("active").siblings().removeClass("active"),this.queryAttrs={_projectId:this._projectId,isDone:!1,withTasklist:!0,withTags:!0,dueDate__lt:s().endOf("day").toISOString()},this.loadSmartGroupTasks("today"),this},t.prototype.showUndoneTasks=function(e){return $(e.currentTarget).parent().addClass("active").siblings().removeClass("active"),this.queryAttrs={_projectId:this._projectId,isDone:!1,withTasklist:!0,withTags:!0},this.loadSmartGroupTasks("todo"),this},t.prototype.showDoneTasks=function(e){return $(e.currentTarget).parent().addClass("active").siblings().removeClass("active"),this.queryAttrs={_projectId:this._projectId,isDone:!0,withTasklist:!0,withTags:!0},this.loadSmartGroupTasks("done"),this},t.prototype.getTasklistId=function(){var e;return null!=(e=this.tasklistModel)?e.id:void 0},t.prototype.getTaskPostPermission=function(e){var t;return null==e&&(e=!1),!this.projectModel||(t=this.projectModel.hasPermission("task.post"),this.proProjectCreateTaskConfig?!!t&&[this.proProjectCreateTaskConfig.config.canCreate,e].some(function(e){return e}):t)},t.prototype.remove=function(){var e,n;return null!=(e=this.getScenarioFieldConfigsSub$)&&e.unsubscribe(),null!=(n=this.loadTaskflowTasksSub$)&&n.unsubscribe(),t.__super__.remove.apply(this,arguments)},t}()},"z/JLNq4z":function(e,t,n){e.exports=function(e){var t="",r=n("2qRnoGmE");return t+='<ul class="list task-menu-list"> ',e.isSubtask&&e.permissions.putTransform&&(t+=' <li> <a class="move-task-handler"> <span class="icon icon-move-task"></span>'+tb_i18n.get("task.menu.convert.and.move.subtask")+" </a> </li> "),t+=" ",e.isSubtask||(t+=' <li> <a class="copy-task-handler"> <span class="icon icon-copy"></span>'+tb_i18n.get("task.menu.copy")+' </a> <div class="copy-task-node"></div> </li> '),t+=" ",e.showShare&&!e.isSubtask&&r.FEATURES.thirdShare&&(t+=' <li> <a class="share-task-handler"> <div class="main-mode main-mode-title"> <span class="icon icon-wechat"></span> <span class="mode">'+tb_i18n.get("share.via.wechat")+"</span> ",e.isShared?t+=' <span class="ifClose">'+tb_i18n.get("share.link.open")+"</span> ":t+=' <span class="ifCloseDisabled">'+tb_i18n.get("share.link.closed")+"</span> ",t+=' </div> <div class="main-mode-description"> '+tb_i18n.get("share.via.wechat.description")+" </div> </a> </li> "),t+=" ",e.showInviteLink&&r.FEATURES.qrLinkInvite&&(t+=' <li> <a class="invite-handler"> <div class="main-mode main-mode-title"> <span class="icon icon-share-chain"></span> <span class="mode">'+tb_i18n.get("invite.from.link")+'</span> </div> <div class="main-mode-description"> '+tb_i18n.get("invite.from.link.description")+" </div> </a> </li> "),t+=" ",e.permissions.dependencyManage&&(t+=' <li> <a class="add-pre-dependency-task"> <span class="icon icon-dependency-pre"></span>'+tb_i18n.get("task.menu.add.pre.dependency.task")+' </a> </li> <li> <a class="add-post-dependency-task"> <span class="icon icon-dependency-post"></span>'+tb_i18n.get("task.menu.add.post.dependency.task")+" </a> </li> "),t+=" ",!e.isSubtask&&e.permissions.putMove&&(t+=' <li> <a class="convert-subtask-handler"> <span class="icon icon-convert"></span>'+tb_i18n.get("task.menu.convert.subtask")+' </a> <div class="convert-subtask-node"></div> </li> <li> <a class="move-task-handler"> <span class="icon icon-move-task"></span>'+tb_i18n.get("task.menu.move")+" </a> </li> "),t+=" ",e.isSubtask&&e.permissions.putMove&&(t+=' <li> <a class="change-belong-handler"> <span class="icon icon-move-task"></span>'+tb_i18n.get("task.menu.change.belong")+' </a> <div class="change-belong-node"></div> </li> '),t+=' <li> <a class="favorite-task-handler"> <span class="icon icon-favorite ',e.isFavorite&&(t+="favorited"),t+='"></span>',e.isFavorite?t+=""+tb_i18n.get("unfavorite"):t+=""+tb_i18n.get("favorite")+tb_i18n.get("navigation.task"),t+=" </a> </li> ",e.permissions.putArchive&&(t+=" <li> ",e.isArchived?t+=' <a class="unarchive-task-handler"> <span class="icon icon-archive"></span>'+tb_i18n.get("unarchive")+" </a> ":t+=' <a class="archive-task-handler"> <span class="icon icon-trash"></span>'+tb_i18n.get("archive")+" </a> ",t+=" </li> "),t+=' <li> <a class="open-task-tab" data-gta="{ action: \'open detail\', type: ',e.isSubtask?t+="subtask":t+=""+e.objectType,t+=', control: \'More Menu\' }"> <span class="icon icon-new-tab"></span>'+tb_i18n.get("task.menu.open.task.tab")+" </a> </li> ",e.canModifyVisibility&&(t+=' <li class="divider"></li> <li> <a class="switch-visible-handler"></a> </li> '),t+="</ul>"}},z221MNj7:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""});return'<a class="app" data-app="'+e.name+'"> '+r(e.appName)+"</a>"}},zANXUrIs:function(e,t,n){e.exports={"export-modal":"export-modal__L97n","export-modal__sorting-item":"export-modal__sorting-item__2YsF"}},"zCN/KIvd":function(e,t,n){e.exports={"task-creator":"task-creator__2aZA","task-creator__avatar":"task-creator__avatar__2fkf","task-creator__name":"task-creator__name__22c6"}},zEFDhPeH:function(e,t){e.exports=function(e){return'<div class="modal-header text-center flex-static"> <div class="modal-title text-center">'+e.title+'</div> <a class="modal-close pull-right icon icon-remove" data-dismiss="modal"></a></div><div class="organization-member-add-body modal-body thin-scroll flex-fill"></div>'}},"zH+Yaocm":function(e,t,n){"use strict";n.r(t);var r=n("61rjr1Fd"),o=n("q1tIBJhx"),i=n.n(o),s=n("GESwhXbR"),a=n("PVLVtUMG"),c=n("DWJahcmN"),l=n("s0r7VfKc"),u=function(e){var t;return Object(o.useEffect)(function(){return function(){t&&t.unsubscribe()}}),Object(o.useCallback)(function(n){if(e.onChange)e.onChange(n);else{var r=l.default.fetch.updateTaskIsDone(e.task._id,n);t&&t.unsubscribe(),t=r.debounceTime(300).subscribe(function(t){e.onChangeSuccess&&e.onChangeSuccess(t)})}},[e.task._id,e.onChange,e.onChangeSuccess])},p=function(e){var t=u(e),n=Object(o.useCallback)(function(e){var n=e===String(!0);t(n)},[t]),l=e.readOnly,p=!Object(r.a)(e.task),h=!Object(r.h)(e.task)||!Object(r.b)(e.task),m=i.a.createElement(a.StatusCheckboxTaskflow,{className:e.className,kind:Object(r.e)(e.task),size:e.size,fixedWidth:e.fixedWidth,title:Object(r.f)(e.task),muted:l,disabled:p,locked:h});if(l)return m;var f=Object(r.g)(e.task),g=f?i.a.createElement(s.Tooltip,{title:f},m):m;if(p||h)return g;var v=i.a.createElement(c.TaskflowStatusLabelList,{data:Object(r.i)(),selectedId:String(e.task.isDone),onSelect:n});return i.a.createElement(s.Dropdown,{content:v,placement:"bottomLeft",offset:d},g)},d=[Object(s.getQuadUnit)(-4),0],h=n("/oIQYRV/"),m=n.n(h),f=function(e){var t=e.task._id,n=e.task._taskflowstatusId,a=e.task.taskflowstatus,l=e.readOnly,u=!Object(r.a)(e.task),p=Object(o.useCallback)(function(t){e.onChangeSuccess&&e.onChangeSuccess({_taskflowstatusId:t._id,taskflowstatus:t,isDone:"end"===t.kind})},[e.onChangeSuccess]),d=a?i.a.createElement(c.TaskCheckBoxLabel,{className:e.className,size:e.size,fixedWidth:e.fixedWidth,type:"task",taskId:t,taskflowStatus:a,muted:l,disabled:u,locked:!1,onChangeError:e.onChangeError,onChangeSuccess:p}):n?i.a.createElement(c.TaskCheckBoxLabel,{className:e.className,size:e.size,fixedWidth:e.fixedWidth,type:"task",taskId:t,taskflowStatusId:n,muted:l,disabled:u,locked:!1,onChangeError:e.onChangeError,onChangeSuccess:p}):null;if(l)return d;var h=Object(r.g)(e.task);return h?i.a.createElement(s.Tooltip,{title:h},i.a.createElement("span",{className:m.a["inline-flex"]},d)):d},g=function(e){var t=u(e),n=Object(o.useCallback)(function(n){n.stopPropagation();var r=!e.task.isDone;t(r)},[e.task.isDone,t]),c=e.readOnly,l=!Object(r.a)(e.task),p=!Object(r.h)(e.task)||!Object(r.b)(e.task),d=i.a.createElement(a.StatusTodoboxGeneric,{className:e.className,kind:Object(r.e)(e.task),size:e.size,title:Object(r.f)(e.task),muted:c,disabled:l,locked:p});if(c)return d;var h=Object(r.g)(e.task),f=h?i.a.createElement(s.Tooltip,{title:h},d):d;return l||p?f:i.a.createElement("span",{onClick:n,className:m.a["inline-flex"]},f)},v=function(e){var t=e.readOnly,n=!Object(r.a)(e.task),o=i.a.createElement(c.TaskCheckBox,{taskId:e.task._id,isDone:e.task.isDone,subtaskCount:e.task.subtaskCount,parent:e.task.parent,taskflowStatusId:e.task._taskflowstatusId,hasPermission:!t&&!n&&!0,onChangeSuccess:e.onChangeSuccess},i.a.createElement(a.StatusTodoboxTaskflow,{kind:Object(r.e)(e.task),size:e.size,title:Object(r.f)(e.task),muted:t,disabled:n,locked:!1}));if(t)return o;var l=Object(r.g)(e.task);return l?i.a.createElement(s.Tooltip,{title:l},i.a.createElement("span",{className:m.a["inline-flex"]},o)):o},b=function(e){if(y(e.task)){var t=e.showLabel?f:v;return i.a.createElement(t,{className:e.className,task:e.task,size:e.size,fixedWidth:e.fixedWidth,readOnly:e.readOnly,onChangeError:e.onChangeError,onChangeSuccess:e.onChangeSuccess})}t=e.showLabel?p:g;return i.a.createElement(t,{className:e.className,task:e.task,size:e.size,fixedWidth:e.fixedWidth,readOnly:e.readOnly,onChange:e.onChange,onChangeSuccess:e.onChangeSuccess})};b.defaultProps={showLabel:!0};var y=function(e){return Boolean(e._taskflowstatusId)},k=function(e){var t=e.task.taskflowstatus;return t?i.a.createElement(a.StatusLabel,{className:e.className,kind:t.kind,size:e.size,fixedWidth:e.fixedWidth,title:t.name,muted:e.readOnly}):null},_=function(e){return i.a.createElement(a.StatusLabel,{className:e.className,kind:Object(r.e)(e.task),size:e.size,fixedWidth:e.fixedWidth,title:Object(r.f)(e.task),muted:e.readOnly})},w=function(e){return C(e.task)?i.a.createElement(k,{className:e.className,task:e.task,size:e.size,fixedWidth:e.fixedWidth,readOnly:e.readOnly}):i.a.createElement(_,{className:e.className,task:e.task,size:e.size,fixedWidth:e.fixedWidth,readOnly:e.readOnly})},C=function(e){return Boolean(e._taskflowstatusId)};n.d(t,"isSubtaskDone",function(){return r.h}),n.d(t,"canRedoTask",function(){return r.b}),n.d(t,"canPutStatus",function(){return r.a}),n.d(t,"checkIsVisible",function(){return r.c}),n.d(t,"mockTaskflowStatuses",function(){return r.i}),n.d(t,"getTaskflowStatusKind",function(){return r.e}),n.d(t,"getTaskflowStatusText",function(){return r.f}),n.d(t,"filterTaskflowNotEndStatuses",function(){return r.d}),n.d(t,"getTooltip",function(){return r.g}),n.d(t,"TaskStatusCheckbox",function(){return b}),n.d(t,"TaskStatusLabel",function(){return w}),n.d(t,"TaskStatusLabelGeneric",function(){return _}),n.d(t,"TaskStatusLabelTaskflow",function(){return k})},zHprUn39:function(e,t,n){e.exports={"sidebar-item":"sidebar-item__1MyR"}},zN7osOLL:function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("vmWJWrVe"),i=n.n(o),s=n("fio7jWQ0"),a=n("sa1Ed382"),c=n("ZCq35AYP"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"className",{get:function(){return c.view},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e){var t=this;this.asyncTimeoutId=window.setTimeout(function(){n.e(13).then(function(r){var o=n("nIGT3cAv").reducer,i=n("8V9/hlmr").organizationGanttEpics,c=n("UCWnFXgC").GanttTimelineContainer,l=n("fW/AZgZn"),u=l.reducer,p=l.epic;Object(s.addUIReducer)({organizationGantt:o}),Object(s.addUIReducer)({organizationGanttFilter:u}),Object(s.addEpic)(i),Object(s.addEpic)(p),t.requestReactView(t.el,c,{organizationId:e.organizationModel.id},{redux:!0}),a.gta.setCurrentPage("Timeline Page")}.bind(null,n)).catch(n.oe)})},t.prototype.remove=function(){return window.clearTimeout(this.asyncTimeoutId),e.prototype.remove.call(this),this},t}(i.a);n.d(t,"GanttTimelineView",function(){return l})},zNFDTgJw:function(e,t,n){e.exports=function(e){var t,r,o,i="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}),s="",a=n("QFl7Q1qw").invisibleNode;if(s+="<header> "+e.title+"</header>",e.visibles.length>0){s+="<ul>";var c=e.visibles;if(c)for(var l,u=-1,p=c.length-1;u<p;){s+=' <li class="link" data-id="'+(l=c[u+=1])._id+'" data-linkedid="'+l._linkedId+'"> <div class="link-head"> <div class="link-icon-wrap"><i class="icon icon-board" /></div> <div class="link-icon-wrap"><div class="task-status-label"></div></div> <div class="link-title"> <div class="link-title-header"> <div class="link-title-header-main"> ';var d=l.data.content;s+=' <span class="title-name" title="'+i(d)+'"> '+i(d)+' </span> <span class="task-id-placeholder"></span> </div>  ';var h=((o=l.data).taskflowstatus?[o.project&&o.project.name,o.scenariofieldconfig&&o.scenariofieldconfig.name]:[o.project&&o.project.name,o.tasklist&&o.tasklist.title,o.stage&&o.stage.name]).filter(function(e){return!!e}).join(", ");s+=' <div class="link-title-header-rest hinted" data-title="'+i(h)+'"> '+i(h)+" </div> </div>  ",l.dueDates&&l.dueDates.dateClass&&(s+=' <div class="link-title-footer"> <aside class="link-due-time"> <span class=" ',l.data.isDone?s+=" ":"overdue"===l.dueDates.dateClass?s+=" link-due-time-important ":"today"===l.dueDates.dateClass?s+=" link-due-time-warning ":"upcoming"===l.dueDates.dateClass&&(s+=" link-due-time-info "),s+=' "> <span>'+l.dueDates.dateString+"</span> <span> "+("00:00"===l.dueDates.timeFormatString?"":l.dueDates.timeFormatString)+" </span> </span> </aside> </div> "),s+=' </div> <div class="link-icon-wrap"> ',l.data.executor?s+=' <span class="avatar img-circle img-24" style="background-image:url('+i(l.data.executor.avatarUrl)+')" ></span> ':s+=' <span class="avatar img-circle img-24 no-avatar"></span> ',s+='</div> </div> <a class="link-menu-handler icon icon-chevron-down" data-id="'+l._id+'" ></a> </li>'}s+="</ul>"}return s+=""+a(e)}},"zNd+vZ/0":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n("TSYQbtd+"),s=n.n(i),a=n("wd/RKGTj"),c=n.n(a),l=n("tLZJUYWX"),u=n("GESwhXbR"),p=n("OZhv4qSB"),d=n("3eMzznN/"),h=n("Nc3BEDoo"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.datePickerRef=o.createRef(),t.open=function(){t.datePickerRef.current&&t.datePickerRef.current.open()},t}return r.d(t,e),t.prototype.getDisplayText=function(e,t){var n=e?d.formatDate(e,{isUsePref:!0}).dateTimeString:null;if(n)return n;switch(t){case"startDate":return l.get("set.start.time");case"dueDate":return l.get("set.due.time")}},t.prototype.getParams=function(e){switch(e){case"startDate":return{title:l.get("click.set.startdate"),defaultHour:9};case"dueDate":return{title:l.get("click.set.duedate"),defaultHour:18};default:return{title:"",defaultHour:0}}},t.prototype.renderDateText=function(){var e=this.props,t=e.disabled,n=e.date,r=e.type,i=s()("date-text",{disabled:t,"has-value":!!n}),a=o.createElement("div",{className:i},this.getDisplayText(n,r));return n||t?a:o.createElement(u.Tooltip,{title:this.getParams(r).title},a)},t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.date,i=e.type,a=e.onClickRemove,l=e.withIcon,d=(e.children,r.g(e,["disabled","date","type","onClickRemove","withIcon","children"])),m=this.getParams(i).defaultHour,f=r.a({disabled:t,date:n?c()(n):null,defaultHour:m},d),g=l?o.createElement(u.Icon,{className:"date-icon",name:"calendar2"}):null;return o.createElement(u.DatePicker,r.a({ref:this.datePickerRef},f),o.createElement(p.a,{className:h["date-picker-shortcut"],onClickRemove:a,silent:!n||t,disabled:t},o.createElement("div",{className:s()(h["date-wrap"],{disabled:t})},g,this.renderDateText())))},t}(o.PureComponent);n.d(t,"DatePickerWithRemoveShortcut",function(){return m}),n.d(t,"DatePickerWithRemoveShortcutProps",function(){})},zQgHgypC:function(e,t,n){"use strict";n.r(t),n.d(t,"getScrumTaskUrl",function(){return r});var r=function(e,t){void 0===t&&(t=null);var n="tasks/scrum/"+e;return t&&(n+="/task/"+t),n}},zQptecJq:function(e,t,n){var r,o,i;o=n("odY26VIi"),i=n("0FRv5rrl"),r=n("cDm32Cmn"),o=n("odY26VIi"),t.fetchProjects=function(e){return Promise.resolve(e)},t.fetchOrganizations=function(e){return new Promise(function(t,n){return i.fetch(e,{success:function(e){return t(e)},error:function(e){return n(e)}})})},t.fetchProjectMember=function(e,t){return new Promise(function(n,r){return e&&t?o.fetch(e,{success:function(e){var r;return r=e.findWhere({_userId:t}),n(r)},error:r}):n()})},t.fetchOrgMember=function(e,t){return e&&t?new Promise(function(n,i){return new o([],{_boundToObjectId:e,boundToObjectType:"organization"}).fetchMembers([t],{success:function(e){var t,o;return(t=e[0])&&(o=new r(t,{bindByMatrix:!1}),n(o)),n()},error:i})}):Promise.resolve()},t.fetchPrivateMember=function(e){var t;return t=new r,new Promise(function(n,r){return e?t.fetch({url:"users/"+e,success:n,error:r}):n()})}},zQvn7WV5:function(e,t,n){"use strict";n.r(t),n.d(t,"OrganizationIsEmpty",function(){return f});var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("GESwhXbR"),a=n("tLZJUYWX"),c=n.n(a),l=n("sa1Ed382"),u=n("2qRnoGmE"),p=n.n(u),d=n("NtzEC3Pa"),h=n("r5Tx7kzV"),m=n.n(h),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){Object(d.openOrganizationCreator)("Fallback"),l.gta.event({action:"enter fallback",page:"No Enterprise Page"})},t}return r.d(t,e),t.prototype.renderCreatorBtn=function(){return p.a.FEATURES.newOrganization?i.a.createElement(s.Button,{onClick:this.handleClick},c.a.get("create.organization")):null},t.prototype.render=function(){return i.a.createElement("section",{className:m.a["empty-container"]},i.a.createElement("div",{className:m.a.img}),i.a.createElement("p",null,c.a.get("org.is.empty.hint")),i.a.createElement("p",null,c.a.get("org.is.empty.join.guide")),this.renderCreatorBtn())},t}(o.PureComponent)},zRdNv5hc:function(e,t,n){"use strict";n.r(t),n.d(t,"turndownService",function(){return i});var r=n("i69eL/y+").default,o=n("SW5EbV2r").tables,i=new r({headingStyle:"atx",emDelimiter:"*",codeBlockStyle:"fenced"});i.use(o),i.addRule("br",{filter:"br",replacement:function(e,t){return function(e){return e.parentNode instanceof HTMLBodyElement?"<br>":e.parentNode instanceof HTMLTableCellElement?"":e.parentNode instanceof HTMLParagraphElement?1===e.parentNode.childNodes.length?"<br>":"  \n":"\n"}(t)}}),i.addRule("img",{filter:"img",replacement:function(e,t){return function(e){var t=e.alt||"",n=e.title||"",r=parseInt(e.getAttribute("width")||""),o=parseInt(e.getAttribute("height")||""),i=n?' "'+n+'"':"",s=e.getAttribute("src")||"";return s&&r>0&&o>0&&(s=s.replace(/\/w\/[0-9]+\/h\/[0-9]+$/,"/w/"+r+"/h/"+o)),s?"!["+t+"]("+s+i+")":""}(t)}}),i.addRule("emphasis",{filter:["em","i"],replacement:function(e,t,n){return e.trim()?n.emDelimiter+e.replace(/\s/g,"&nbsp;")+n.emDelimiter:""}}),i.addRule("strong",{filter:["strong","b"],replacement:function(e,t,n){return e.trim()?n.strongDelimiter+e.replace(/\s/g,"&nbsp;")+n.strongDelimiter:""}})},zSKlCiXU:function(e,t,n){var r,o,i,s,a,c,l,u,p,d={}.hasOwnProperty;p=n("sa1Ed382"),r=n("N51q+p1C"),i=n("oJO6AMd2"),a=n("6XSa3ffj"),l=n("GESwhXbR").Toast,o=n("9aPZbVuc"),u=n("3eMzznN/"),c=n("77NnVLwu"),s=["task","work","collection","event","post","testcase","testplangroup"],e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,a),t.prototype.viewName="link-menu",t.prototype.className="link-menu-view",t.prototype.popoverTitle="",t.prototype.events={"click .delete-handler":"enterDeleteSubMenu","click .download-link-object":"onClickDownload","submit .delete-form":"submitDeleteForm"},t.prototype.initialize=function(e){return this.popoverTitle=tb_i18n.get("link.menu.title"),this.options=e,this.linkModel=e.objectlinkModel,this._projectId=this.linkModel.get("_projectId"),this.linkType=this.linkModel.get("linkedType"),this.gtaType=this.getGtaType(),t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return this.$el.html(r({objectLinkUrl:this.assembledObjectLink(),canDownload:"work"===this.linkType||"collection"===this.linkType,permissions:this.linkModel.hasPermissions("del"),gtaType:this.gtaType})),this.initCopyLinkHandler(),this},t.prototype.getGtaType=function(){return function(){switch(this.linkType){case"work":return"file";case"collection":return"folder";default:return this.linkType}}.call(this)},t.prototype.initCopyLinkHandler=function(){return o.initCopyLinkHandler(this.$(".copy-object-link-handler"),{type:this.gtaType,control:"link"})},t.prototype.assembledObjectLink=function(){var e,t;return e=(t=this.linkModel.toJSON()).linkedType,s.indexOf(t.linkedType)>=0?u.getObjectLink(t.data,t.linkedType):"gitintegration"===t.linkedType?t.data.url:"web"===e||"zhihu"===e||"wechat"===e?t.data.originUrl:void 0},t.prototype.onClickDownload=function(){var e,t;return e=this.linkModel.get("data"),new Promise(function(t,n){var r;return r=function(){return n({noPermission:!0})},c.fetch(e._projectId,{silentError:!0,success:function(e){return e.hasPermission("work.get.download")?t():r()},error:r})}).then((t=this,function(){return u.downloadItem(e,t.linkType)})).catch(function(e){if(e.noPermission)return l.error(tb_i18n.get("authority.get.error"))})},t.prototype.enterDeleteSubMenu=function(){var e;return this.gtaHandler({action:"delete link",control:"link"}),this.enterSubMenu(tb_i18n.get("link.delete"),(e=this,function(){return e.$el.html(i())})),this},t.prototype.submitDeleteForm=function(e){var t;return e.preventDefault(),this.options.objectlinkModel.destroy({success:(t=this,function(){return t.gtaHandler({action:"deleted link",control:"link"}),l.success({message:tb_i18n.get("link.delete.success")}),t.hide()}),error:function(e){return l.error({message:tb_i18n.get("link.delete.fail")})}}),this},t.prototype.gtaHandler=function(e){return this.options.type&&(e.type=this.options.type),null!=this.options.series&&(e.series=this.options.series),p.gta.event(e)},t}()},"zTT+LU7r":function(e,t,n){"use strict";n.r(t);var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("tLZJUYWX"),a=n.n(s),c=n("s0r7VfKc"),l=n("sa1Ed382"),u=n.n(l),p=n("wVXDg9Ql"),d=n("nDsjpj50"),h=n("GESwhXbR"),m=n("wd/RKGTj"),f=n.n(m),g=n("rXRlQlqo"),v=n.n(g),b={overviews:[],scenariofieldconfigs:[]},y=function(e){var t=r.f(Object(o.useState)(b),2),n=t[0],s=t[1];Object(o.useEffect)(function(){var t=c.default.fetch.get("projects/"+e._projectId+"/customfieldentities/"+e._customfieldentityId+"/reference-info").subscribe(function(e){s(e)});return function(){return t.unsubscribe()}},[e]);var l,u,p,d=n.overviews[0]?n.overviews[0].name:void 0,m=n.scenariofieldconfigs.filter(function(e){return"task"===e.objectType}).map(function(e){return e.name}),g=n.scenariofieldconfigs.filter(function(e){return"event"===e.objectType}).map(function(e){return e.name});return i.a.createElement("div",{className:v.a["link-info"]},i.a.createElement(h.Icon,{name:"stage"}),i.a.createElement("div",{className:v.a["link-body"]},i.a.createElement("div",{className:v.a["link-name"]},e.customfield.name),i.a.createElement("p",{className:v.a["link-modifier-info"]},(u=(l=e).modifier.name,p=l.created,a.a.get("customfield.notify.modifier.info",u,f()(p).format("YYYY-MM-DD HH:mm")))),i.a.createElement("div",{className:v.a["link-apply-to"]},d&&i.a.createElement("p",null,a.a.get("customfield.notify.content.applied.to.project.overview")),m.length>0&&i.a.createElement("p",null,a.a.get("customfield.notify.content.applied.to.task.scenario"),m.join(a.a.get("comma"))),g.length>0&&i.a.createElement("p",null,a.a.get("customfield.notify.content.applied.to.event.scenario"),g.join(a.a.get("comma"))))))},k=function(e){return[{label:"name",i18n:a.a.get("customfield.notify.content.diff.attr.name"),render:function(e){return e.customfield.name}},{label:"choices",i18n:a.a.get("customfield.notify.content.diff.attr.choices"),render:function(e){return e.choices.map(function(e){return i.a.createElement("div",{key:e.value},e.value)})}}].map(function(t){return i.a.createElement(i.a.Fragment,{key:t.label},i.a.createElement("div",{className:v.a["diff-attr"]},t.i18n),i.a.createElement("div",{className:v.a["diff-value"]},t.render(e)))})},_=function(e){var t=e.syncLink;return i.a.createElement(i.a.Fragment,null,i.a.createElement(y,r.a({},t)),i.a.createElement("div",{className:v.a["diff-area"]},i.a.createElement("div",{className:v.a["diff-area-body"]},i.a.createElement("div",{className:v.a["diff-content"]},i.a.createElement("div",{className:v.a["diff-title"]},a.a.get("customfield.notify.content.diff.before")),k(r.a({},t.customfieldentity,{customfield:t.customfield}))),i.a.createElement("div",{className:v.a["diff-content"]},i.a.createElement("div",{className:v.a["diff-title"]},a.a.get("customfield.notify.content.diff.after")),k(r.a({},t.targetCustomfieldentity,{customfield:t.customfield}))))))},w=new d.BehaviorSubject(!1);function C(e){c.default.fetch.get("projects/"+e+"/customfieldentity-sync-links/sync-info").subscribe(function(e){var t=e.needSynced;w.next(t)},function(e){p.SDKInterceptor.ignore(e)})}var S=function(e){function t(t){var n=e.call(this,t)||this;return n.getCurrentSyncLink=function(){return n.state.syncLinks[n.state.currentIndex]},n.openModal=function(){n.setState({modalOpened:!0})},n.closeModal=function(){n.onVisibleChange(!1)},n.onVisibleChange=function(e){var t=e?n.state.currentIndex:0;n.setState({modalOpened:e,currentIndex:t})},n.incrementIndex=function(){var e=n.state.currentIndex;if(e+1>=n.state.syncLinks.length)return n.closeModal();n.setState({currentIndex:e+1})},n.handleIgnore=function(){u.a.gta.event({action:"ignore customfield"}),n.modifyCurrentSyncLink("disable")},n.handleSubmit=function(){u.a.gta.event({action:"update customfield"}),n.modifyCurrentSyncLink("sync")},n.state={needSynced:!1,syncLinks:[],modalOpened:!1,currentIndex:0},n}return r.d(t,e),t.prototype.componentDidMount=function(){var e=this;this.notifySubscription=w.subscribe(function(t){return e.setState({needSynced:t})})},t.prototype.componentDidUpdate=function(e,t){t.modalOpened!==this.state.modalOpened&&(this.state.modalOpened?this.fetchSyncLinks():C(this.props.projectId))},t.prototype.componentWillUnmount=function(){this.notifySubscription&&this.notifySubscription.unsubscribe(),this.linkSubscription&&this.linkSubscription.unsubscribe(),this.modifySubscription&&this.modifySubscription.unsubscribe()},t.prototype.fetchSyncLinks=function(){var e=this;this.linkSubscription&&this.linkSubscription.unsubscribe(),this.linkSubscription=c.default.fetch.get("projects/"+this.props.projectId+"/customfieldentity-sync-links").subscribe(function(t){e.setState({syncLinks:t}),0===t.length?(e.closeModal(),h.Toast.info(a.a.get("custom.field.notify.all.done"))):u.a.gta.event({action:"customfield update info",note1:t.length.toString()})})},t.prototype.modifyCurrentSyncLink=function(e){var t=this,n=this.getCurrentSyncLink(),r=n._customfieldentityId,o=n._targetCustomfieldentityId,i=n._id;this.modifySubscription&&this.modifySubscription.unsubscribe(),this.modifySubscription=c.default.fetch.put("projects/"+this.props.projectId+"/customfieldentity-sync-links/"+i,{action:e,_customfieldentityId:r,_targetCustomfieldentityId:o}).subscribe(function(){t.state.currentIndex+1>=t.state.syncLinks.length?h.Toast.success(a.a.get("custom.field.notify.success.all.done")):"sync"===e&&h.Toast.success(a.a.get("custom.field.notify.success.sync")),t.incrementIndex()},function(e){e&&e.message?h.Toast.error(e.message):h.Toast.error(a.a.get("custom.field.notify.error.sync")),t.incrementIndex()})},t.prototype.renderContent=function(e){var t=this.state.syncLinks.length-this.state.currentIndex-1;return!!e&&i.a.createElement("div",null,i.a.createElement("div",{className:v.a.header},i.a.createElement("div",{className:v.a["header-tip"]},a.a.get("customfield.changed.notify.modal.header")),t>0&&i.a.createElement("div",{className:v.a["header-left"]},a.a.get("customfield.changed.notify.left",t))),i.a.createElement(h.Separator,null),i.a.createElement(_,{syncLink:e}),i.a.createElement("div",{className:v.a.footer},i.a.createElement(h.Button,{type:"secondary",size:"small",onClick:this.handleIgnore},a.a.get("customfield.changed.notify.modal.handler.ignore")),i.a.createElement(h.Button,{type:"primary",size:"small",onClick:this.handleSubmit},a.a.get("customfield.changed.notify.modal.handler.submit"))))},t.prototype.renderModal=function(){var e=this.getCurrentSyncLink();return i.a.createElement(h.Modal,{opened:this.state.modalOpened,onVisibleChange:this.onVisibleChange,width:600,titlePosition:"center",title:a.a.get("customfield.changed.notify.modal.title")},this.renderContent(e))},t.prototype.renderBanner=function(){return i.a.createElement(h.Notice,{type:"info",defaultOpened:!0,handler:a.a.get("customfield.changed.trigger"),onClickHandler:this.openModal,message:a.a.get("customfield.changed.notify"),closable:!1,className:v.a.banner})},t.prototype.render=function(){return this.state.needSynced?i.a.createElement(i.a.Fragment,null,this.renderBanner(),this.renderModal()):null},t}(i.a.PureComponent);n.d(t,"customfieldNotifyStatus$",function(){return w}),n.d(t,"refreshSyncStatus",function(){return C}),n.d(t,"CustomFieldNotify",function(){return S})},zVCf3FCx:function(e,t,n){},zWIKzRr6:function(e,t){},zWSZY3sR:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b={}.hasOwnProperty;g=n("a+N5u/Cl"),f=n("OmupbwLD"),m=n("vmWJWrVe"),u=n("YdqH4v7N"),d=n("ELMSE2ES"),c=n("MIBOT3i8"),p=n("H5U46Bxa"),v=n("4R8uTwsA"),a=n("C70r+RA2"),l=n("YD9eiOcr"),i=n("kRW9thl2"),h=n("LRNCoLB3"),o=n("LjKgLNPt"),s=n("W45aiDui"),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)b.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,m),t.prototype.viewName="AllTasksListView",t.prototype.initialize=function(e){return this.options=e,this},t.prototype.listen=function(){return this.listenTo(this.tasksCollection,"add change",function(){if("todo"===v.getDateType())return this.refreshUndoTasks()})},t.prototype.parseTasks=function(e){var t,n;return n=g.chain(e).sortBy(function(e){return e.get("priority")||0}).reverse().sortBy(function(e){return e.get("dueDate")}).each(function(e){return e.timeScope=e.getScope()}).groupBy("timeScope").mapObject(function(e){return g.groupBy(e,function(e){return e.checkIsVisible()})}).value(),t={},["today","recent","future"].forEach(function(e){var r,o;return t[e]={visible:(null!=(r=n[e])?r.true:void 0)||[],invisible:(null!=(o=n[e])?o.false:void 0)||[]}}),g.mapObject(t,function(e){return{visible:g.chain(e.visible).sortBy(function(e){return e.get("_projectId")}).groupBy(function(e){return e.get("_projectId")}).value(),invisibleCount:e.invisible.length}})},t.prototype.loadMore=function(e){var t;if(!this.loadingMore&&"todo"!==v.getDateType())return v.getDateType(),this.min_date=v.getDateString()||new Date(0).toISOString(),this.max_date=v.getRangeDateString(),this.loadDoneTasks({attrs:{minAccomplished:this.min_date,maxAccomplished:this.max_date,page:++this.donetasksPage},success:(t=this,function(){var n,r,o;return n=t.doneTasksCollection.groupBy(function(e){return e.checkIsVisible()}),t.renderFinishedTask({visible:n.true||[],invisibleCount:(null!=(o=n.false)?o.length:void 0)||0}),r=t.doneTasksCollection.hasMore,t.loadingMore=!r,r?"function"==typeof e?e():void 0:t.showEndPoint(t.$el)})}),this},t.prototype.renderBasic=function(){return this.$el.html(o({showCreate:this.options.withCreate,showHandover:this.options.withHandover})),this.$recentlyDoneTasks=this.$(".recently-done-tasks"),this.$dateMenuTitle=this.$(".date-menu-title"),this.$tasksContainer=this.$(".tasks-container"),v.setDateType("todo"),this},t.prototype.refreshFinishedTasks=function(){var e;return this.donetasksPage=0,this.loadingMore=!1,this.tasksPageToken=void 0,null!=(e=this.doneTasksCollection)&&e.reset(),this.$detailContent=$(".detail-picker-content"),this.$(".tasks-container").empty(),this.setupScroll(this.$detailContent),this.loadMore()},t.prototype.renderFinishedTask=function(e){var t,n;return this.$tasksContainer.html(i()),t=this.$(".task-list"),g.isEmpty(e.visible)?t.html(a()):g.each(e.visible,(n=this,function(e){return n.renderTask(e,t)})),this.renderInvisible(t,e.invisibleCount)},t.prototype.refreshHeader=function(){var e;return e="all"===v.getDateType()?""+tb_i18n.get("tasklist.bar.done.tasks"):"todo"===v.getDateType()?tb_i18n.get("my.task.undone"):""+v.getDateTitle()+tb_i18n.get("my.task.done"),this.$dateMenuTitle.text(e)},t.prototype.refreshUndoTasks=function(){var e,t;if(this.$tasksContainer.html(h({showCreate:this.options.withCreate,showHandover:this.options.withHandover})),this.undoneModels=this.tasksCollection.models,e=this.parseTasks(this.undoneModels),"todo"===v.getDateType())return g.mapObject(e,(t=this,function(e,n){return t.renderCollection(e,n,t.$("."+n+"-tasks"))}))},t.prototype.renderCollection=function(e,t,n){var r;return n=n.find(".task-list"),g.isEmpty(e.visible)?n.html(a()):(r=g.map(e.visible,function(e){return e[0].get("project")}),this.renderTasks(r,e,n))},t.prototype.renderTasks=function(e,t,n){var r;return n.empty(),g.each(e,(r=this,function(e,o){var i,s;return e?0===n.find(".my-tasks-group[data-id="+e._id+"] .group-list").length&&n.append(l(e)):n.append(l({_id:"indie"})),s=t.visible[(null!=e?e._id:void 0)||null],i=o,g.each(s,function(e,t){var o;return o=n.find(".my-list").eq(i),r.renderTask(e,o)})})),this.renderInvisible(n,t.invisibleCount),this},t.prototype.renderTask=function(e,t){return this.requestSubView(d,{model:e,isUseProjectName:!e.isSubtask(),noExecutor:this.options.noExecutor}).$el.appendTo(t)},t.prototype.renderInvisible=function(e,t){return e.after(s({invisibleCount:t}))},t.prototype.toggleDateSelector=function(e){var t,n;if(!(t=$(e.currentTarget)).data("bs.popover"))return this.requestSubView(c,{$toggler:t,width:245,dataList:v.getDateList(),selected:v.getDateType(),select:(n=this,function(e){var t;if(e!==v.getDateType())return v.setDateType(e),n.refreshHeader(),null!=(t=n.$endPoint)&&t.remove(),"todo"!==e?n.refreshFinishedTasks():n.refreshUndoTasks()})}).show(),this},t.prototype.openTaskCreator=function(){return this.requestSubView(f).open(p)},t}(),g.extend(r.prototype,u),e.exports=r},zX7JofkV:function(e,t,n){e.exports={root:"root__1Yve",content:"content__qMNf",title:"title__2VV1",url:"url__1Y1V",summary:"summary__17Ao",image:"image__xWFH","fav-icon":"fav-icon__DK9v"}},zXL2TPnq:function(e,t,n){var r,o,i,s,a,c,l,u,p,d,h,m,f,g,v,b,y,k,_,w,C,S,E,T,I,M,j=function(e,t){return function(){return e.apply(t,arguments)}},P={}.hasOwnProperty;w=n("a+N5u/Cl"),M=n("sa1Ed382"),y=n("3eMzznN/"),k=n("vmWJWrVe"),l=n("wd/RKGTj"),(E=n("GESwhXbR")).Alert,v=E.Toast,i=E.DatePicker,b=n("RLD3BeS/").ToastWithObject,_=n("OmupbwLD"),S=n("90U+kJWN").getExecutor,d=n("4bWDEe5E"),u=n("77NnVLwu"),s=n("fGXGG6UZ"),o=n("XBCwffYw").ConfigComponent,p=n("oEzVJ1gN"),f=n("GPNoQLd7"),g=n("zH+Yaocm").TaskStatusCheckbox,c=n("BsTK5jZO"),a=n("7UQIdnmo"),T=n("8KNpsyVU"),I=T.showVerifyBindModal,C=T.getAccountBind,h=n("AxfCNEe5").SubTaskExecutor,r=n("Nhsjx4qw"),m=n("tWAcY96j").SubtaskMenu,e.exports=function(e){function t(){return this.archiveSubtask=j(this.archiveSubtask,this),this.editSubtask=j(this.editSubtask,this),this.inviteMoreMember=j(this.inviteMoreMember,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)P.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,k),t.prototype.viewName="SubtaskView",t.prototype.tagName="li",t.prototype.className="subtask-view toggler-parent",t.prototype.events={"click .subtask-content":"openSubtaskDetail","click .save-subtask-handler":"updateSubtask","click .cancel-subtask-handler":"cancelUpdate","keydown .subtask-input":"quickUpdate"},t.prototype.initialize=function(e){return!(null==e||!e.subtaskModel)&&(this.options=e,this.subtaskModel=e.subtaskModel,this.taskModel=e.taskModel,this.getMembers=e.getMembers,this.subscribe(u.fetch$(this.taskModel.get("_projectId")).do((t=this,function(e){return t.projectModel=e,t.initView()}))));var t},t.prototype.initView=function(){if(this.render(),this.listen(),this.$el.attr("data-id",this.subtaskModel.id),!(this.subtaskModel.getRoleScope()>=0))return this.$el.addClass("guest")},t.prototype.listen=function(){var e;return this.listenTo(this.subtaskModel,"remove",this.remove),this.listenTo(this.subtaskModel,"change:isDone change:parent change:_taskflowstatusId",this.renderStatus),this.listenTo(this.subtaskModel,"change:content",this.renderContent),this.listenTo(this.subtaskModel,"change:dueDate",this.renderDatePicker),this.listenTo(this.subtaskModel,"change:_executorId",(e=this,function(){var t,n;return t=null!=(t=null!=(n=e.$subtaskInput.val())?n.trim():void 0)?t.replace(/\s+/g," ").trim():void 0,e.render(t)})),this.listenTo(this.subtaskModel,"change:isVisible",function(){if(!this.subtaskModel.checkIsVisible())return this.remove()}),this.listenTo(this.taskFieldConfigsCollection,"add change remove destroy",this.renderTaskFieldConfig),this.listenTo(this.subtaskModel,"change:_scenariofieldconfigId",this.renderTaskFieldConfig),this},t.prototype.render=function(e){var t,n,r;return this.unmountReact(this.$(".task-datepicker").get(0)),this.unmountReact(null!=(t=this.$executor)?t.get(0):void 0),this.unmountReact(null!=(n=this.$checkBoxWrapper)?n.get(0):void 0),this.unmountReact(this.$menuEl),this.unmountReact(null!=(r=this.$taskFieldConfigWrapper)?r.get(0):void 0),this.renderBasic(),this.renderTaskIdLabel(),this.renderExecutor(),this.renderContent(e),this.renderMenu(),this.renderStatus(),this.renderTaskFieldConfig()},t.prototype.renderBasic=function(){var e,t;return(e=this.subtaskModel.toJSON()).permissions=this.subtaskModel.hasPermissions("put","put.executor","put.dueDate"),e.hasPosPersmission=null!=(t=this.projectModel)?t.hasPermission("task.put.pos"):void 0,e.isArchived=this.taskModel.get("isArchived"),e.isVisible=this.subtaskModel.checkIsVisible(),e.contentPermission=this.hasContentPermission(),e.datePermission=this.hasDatePermission(),this.$el.html(r(e)),this.$subtaskWrapper=this.$(".subtask-wrap"),this.$subtaskInput=this.$(".subtask-input"),this.$executor=this.$(".avatar"),this.$content=this.$(".subtask-content .content"),this.menuEl=this.$(".subtask-menu").get(0),this.$checkBox=this.$(".check-box"),this.$checkBoxWrapper=this.$(".check-box-wrapper"),this.$taskFieldConfigWrapper=this.$(".subtask-field-config-wrapper"),this.showCheckboxLabel()&&this.$checkBoxWrapper.addClass("fixed-width"),this.renderDatePicker(),this},t.prototype.renderTaskIdLabel=function(){var e;if(!this.isIndieTask())return null!=(e=this.taskIdLabelView)&&e.remove(),this.taskIdLabelView=this.requestSubView(f,{projectModel:this.projectModel,uniqueId:this.subtaskModel.get("uniqueId")}),this.$(".subtask-unique-id").html(this.taskIdLabelView.el)},t.prototype.renderExecutor=function(){var e,t,n,r;return e=this.$executor.get(0),t=this.subtaskModel.get("_executorId"),n=S(t,this.getMembers(),this.subtaskModel),this.requestReactView(e,h,{executor:n,disabled:!this.subtaskModel.checkIsVisible()||!this.subtaskModel.hasPermission("put.executor")||this.taskModel.get("isArchived"),inviteShowed:!this.isIndieTask()&&this.projectModel.hasPermission("post.member"),contextId:{_id:this.subtaskModel.get("_id")},inviteMoreMember:this.inviteMoreMember,onSelect:(r=this,function(e){var t;if((t=c.ExecutorInput.noExecutor.check(e)?null:e.id)!==r.subtaskModel.get("_executorId")&&(t||r.subtaskModel.get("_executorId")))return r.subtaskModel.updateExecutor(t),r.gtaHandler({action:"change assignee"})})}),this},t.prototype.inviteMoreMember=function(){var e;if(!this.isIndieTask())return C(this.projectModel.get("_organizationId")).then((e=this,function(t){return t?(e.requestSubView(_).open(a,{projectModel:e.projectModel,qrCodeType:"project"}),M.gta.event({action:"begin add member",control:"Member Menu"})):(I(),M.gta.event({action:"invitation blocked",page:"SubTasks Page",type:"project"}))})),this},t.prototype.renderContent=function(e){var t;return"string"!=typeof e&&(e=!1),t=this.subtaskModel.get("content").trim(),this.$content.text(e||t),this.$subtaskInput.val(e||t),this.$subtaskInput.flexText(),this},t.prototype.renderMenu=function(){if(this.hasMenuPermissions())return this.requestReactView(this.menuEl,m,{className:"subtask-menu-container",permissions:this.subtaskModel.hasPermissions("put","put.archive"),onEditContent:this.editSubtask,onArchive:this.archiveSubtask},{redux:!0})},t.prototype.showCheckboxLabel=function(){return Boolean(this.subtaskModel.get("_taskflowstatusId"))},t.prototype.renderStatus=function(){return this.$el[this.subtaskModel.get("isDone")?"addClass":"removeClass"]("done"),this.requestReactView(this.$checkBoxWrapper.get(0),g,{key:this.subtaskModel.id,task:this.subtaskModel.toJSON(),showLabel:this.showCheckboxLabel(),onChangeSuccess:(e=this,function(t){var n;return null!=(n=e.subtaskModel)&&n.set(t),e.gtaHandler({action:"toggle complete status",category:t.isDone?"on":"off"})})});var e},t.prototype.renderTaskFieldConfig=function(){var e,t;if(!this.isIndieTask()&&(null!=(e=this.$taskFieldConfigWrapper)?e.length:void 0))return new Promise((t=this,function(e,n){var r;return r=d.genCacheId(t.projectModel.id,"task"),d.fetch(r,{attrs:{withTaskflowstatus:!0},boundToObjectType:"task",success:function(n){return t.taskFieldConfigsCollection=n,e()},error:n})})).then(function(e){return function(){var t,n,r,i;if(e.displayConfig()&&(t=e.subtaskModel.get("_scenariofieldconfigId"),n=e.taskFieldConfigsCollection.get(t)||e.taskFieldConfigsCollection.find(function(e){return e.get("isDefault")}),e.hasConfigModel=!!n,e.hasConfigModel))return r=e.projectModel.hasPermission("scenariofieldconfig.edit"),i=e.subtaskModel.hasPermission("put"),e.requestReactView(e.$taskFieldConfigWrapper[0],o,{boundToObjectType:"task",hasPermission:i,hasEditConfigPermission:r,scenarioFieldConfigs:e.taskFieldConfigsCollection.toJSON(),scenarioFieldConfig:null!=n?n.toJSON():void 0,showArrowHint:!0,onSave:e.onSave.bind(e),onRequestConfigView:e.requestApplicationFieldsConfig.bind(e),gtaHandler:e.taskFieldConfigGTA.bind(e)})}}(this))},t.prototype.isIndieTask=function(){return this.taskModel.isIndie()},t.prototype.displayConfig=function(){var e,t;return[this.projectModel.get("_organizationId"),(null!=(e=this.taskFieldConfigsCollection)?e.length:void 0)>1||(null!=(t=this.taskFieldConfigsCollection.at(0))?t.get("displayed"):void 0)].every(function(e){return e})},t.prototype.requestApplicationFieldsConfig=function(){return this.taskFieldConfigGTA("start to configurate task type"),M.APP.requestSubView(p,{projectModel:this.projectModel,tabName:"taskFieldConfig"})},t.prototype.onSave=function(e){return this.subtaskModel.saveAttr("scenariofieldconfigId",null,{attrs:{_scenariofieldconfigId:e._id}})},t.prototype.renderDatePicker=function(){var e,t,n,r,o,s;return(n=this.subtaskModel.get("dueDate"))?(e=(r=y.formatDate(n,{isUsePref:!0})).dateString,o=r.timeFormatString,t="<span class='subtask-duedata "+r.dateClass+" "+(this.subtaskModel.get("isDone")?"is-done":"")+"'>"+e+" "+o+"</span>"):t="<span class='icon icon-calendar2'></span>",this.requestReactView(this.$(".task-datepicker").get(0),i,{date:n,startDate:this.subtaskModel.get("startDate"),defaultOpenDate:new l("18:00","HH:mm"),displayText:t,disabled:!this.hasDatePermission(),nested:!1,mountIn:(s=this,function(){return s.el}),onOpen:function(e){return function(){return e.gtaHandler({action:"edit due date"})}}(this),onChange:function(e){return function(t){var n;return n=t.date,e.saveDueDate(n)}}(this),onClear:function(e){return function(){return e.saveDueDate()}}(this)})},t.prototype.hasContentPermission=function(){return!this.taskModel.get("isArchived")&&this.subtaskModel.checkIsVisible()&&(this.subtaskModel.hasPermission("put")||this.subtaskModel.hasPermission("put.archive"))},t.prototype.hasDatePermission=function(){return!this.subtaskModel.get("isArchived")&&this.subtaskModel.hasPermission("put.dueDate")&&this.subtaskModel.checkIsVisible()},t.prototype.hasMenuPermissions=function(){return w.every([!this.taskModel.get("isArchived"),this.hasContentPermission()],function(e){return e})},t.prototype.saveDueDate=function(e){return null==e&&(e=null),l(this.subtaskModel.get("dueDate")).isSame(e)||this.subtaskModel.editDate("dueDate",e),this},t.prototype.editSubtask=function(){var e,t;return e=[".save-subtask-handler",".subtask-field-config-wrapper",".member-menu-component",".scenario-locator-dropdown"].join(","),this.$el.addClass("editing"),this.$subtaskInput.focusAtEnd(),this.$subtaskWrapper.handleClickOutside((t=this,function(){if(!t.$subtaskInput.val().trim())return t.cancelUpdate()}),"click",e),this},t.prototype.archiveSubtask=function(){return this.subtaskModel.archive({success:function(){return b.archive()}})},t.prototype.quickUpdate=function(e){return 13===e.keyCode&&(e.preventDefault(),this.$subtaskInput.blur()),this},t.prototype.updateSubtask=function(){var e,t;if(this.$el.hasClass("editing"))return e=(e=this.$subtaskInput.val().trim()).replace(/\s+/g," ").trim(),t=this.subtaskModel.get("content"),e?e!==t&&(this.gtaHandler({action:"edited title"}),this.subtaskModel.updateContent(e)):this.cancelUpdate(),this.$el.removeClass("editing"),this},t.prototype.cancelUpdate=function(){return this.$subtaskInput.val(this.subtaskModel.get("content")),this.$el.removeClass("editing")},t.prototype.openSubtaskDetail=function(){return this.subtaskModel.checkIsVisible()?(s.updateTaskDetail(this.subtaskModel.id),this.gtaHandler({action:"open detail"})):v.error(tb_i18n.get("task.subtask.card.open.detail.not.involved"))},t.prototype.gtaHandler=function(e){return e=w.extend({type:"subtask",control:"Subtask Display",series:this.subtaskModel.get("ancestorIds").length},e),M.gta.event(e)},t.prototype.taskFieldConfigGTA=function(e){return M.gta.event({action:e,control:"Task Type",type:"subtask"})},t}()},zXNoRxwW:function(e,t,n){e.exports=n.p+"images/h_zan@2x.5aaff69b.png"},zhGE4Zhy:function(e,t){e.exports=function(e){return'<div class="archive-wrap"> <p>'+tb_i18n.get("tag.menu.confirm.archive")+'</p> <button class="btn btn-danger archive-submit">'+tb_i18n.get("archive")+"</button></div>"}},zkRNVHgy:function(e,t,n){"use strict";n.r(t),n.d(t,"findAppType",function(){return o});var r=n("sa1Ed382"),o=function(e){var t=r.applications.findByName(e);return t&&t.get("type")}},zlaFRclc:function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof _encodeHTML?_encodeHTML:(t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g,function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}),o="",i=e.cells;if(i)for(var s,a=-1,c=i.length-1;a<c;)o+=" <li","group"===(s=i[a+=1])[0]&&(o+=' class="group-name"'),o+="> ","group"===s[0]&&(o+=" <p>"+r(s[1].name)+"</p> "),o+=" ","cell"===s[0]&&(o+=' <a class="switch-handler" data-id="'+s[1]._id+'">'+r(s[1].name)+"</a> "),o+=" </li>";return o}},zoPFgZHy:function(e,t,n){"use strict";var r=n("mrSGxOB2"),o=n("q1tIBJhx"),i=n.n(o),s=n("u//1fy1x"),a=n("hlB2LTRb"),c=n.n(a),l=Object(s.default)(c.a),u=n("arJxzJPZ");n.d(t,"a",function(){return p});var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderContent=function(e){return t.activityPanelContextState=e,i.a.createElement(l,r.a({},t.props,{activityPanelContext:e,ref:t.saveActivityCreatorRef}))},t.activityPanelContextState={},t.saveActivityCreatorRef=function(e){var n=t.activityPanelContextState.saveActivityCreatorViewInstance;n&&n(e&&e.viewInstance||void 0)},t}return r.d(t,e),t.prototype.render=function(){return i.a.createElement(u.a.Consumer,{children:this.renderContent})},t}(o.PureComponent)},zvueJ76V:function(e,t,n){e.exports=n.p+"images/member.0645aba3.svg"},"zw//FsHZ":function(e,t,n){}},[[0,"manifest","forever","semiannually","quarterly","react","cds","vendors~create-project-template~teambition","vendors~teambition","create-project-template~teambition"]]]);
//# sourceMappingURL=teambition.7b0f0dd9.chunk.js.map