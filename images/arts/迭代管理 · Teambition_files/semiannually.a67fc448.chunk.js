(this.webpackJsonp=this.webpackJsonp||[]).push([["semiannually"],{"+6/L5mVI":function(t,e,n){"use strict";var r=n("hDVK8her");e.combineAll=function(t){return function(e){return e.lift(new r.CombineLatestOperator(t))}}},"+J1YLSRB":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.ARRAY_BUFFER=100]="ARRAY_BUFFER",t[t.BOOLEAN=101]="BOOLEAN",t[t.DATE_TIME=102]="DATE_TIME",t[t.INTEGER=103]="INTEGER",t[t.NUMBER=104]="NUMBER",t[t.OBJECT=105]="OBJECT",t[t.STRING=106]="STRING",t[t.LITERAL_ARRAY=107]="LITERAL_ARRAY"}(e.RDBType||(e.RDBType={})),function(t){t[t.oneToMany=500]="oneToMany",t[t.oneToOne=501]="oneToOne",t[t.manyToMany=502]="manyToMany"}(e.Relationship||(e.Relationship={})),function(t){t[t.INDEXED_DB=0]="INDEXED_DB",t[t.MEMORY=1]="MEMORY",t[t.LOCAL_STORAGE=2]="LOCAL_STORAGE",t[t.WEB_SQL=3]="WEB_SQL",t[t.OBSERVABLE_STORE=4]="OBSERVABLE_STORE"}(e.DataStoreType||(e.DataStoreType={})),function(t){t[t.Insert=1001]="Insert",t[t.Update=1002]="Update",t[t.Delete=1003]="Delete",t[t.Select=1004]="Select"}(e.StatementType||(e.StatementType={})),function(t){t[t.imlicit=2001]="imlicit",t[t.explicit=2002]="explicit"}(e.JoinMode||(e.JoinMode={})),function(t){t[t.column=300]="column",t[t.navigator=301]="navigator"}(e.LeafType||(e.LeafType={}))},"/R2TB7II":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("VtYuyi7W");e.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.Logger.warn.apply(r.Logger,t)}},"/e+Ob7oW":function(t,e,n){(function(e){!function(e){"use strict";var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:g,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:g,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:g,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function r(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||b.defaults,this.rules=n.normal,this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.options.tables?this.rules=n.tables:this.rules=n.gfm)}n._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,n._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,n.def=d(n.def).replace("label",n._label).replace("title",n._title).getRegex(),n.bullet=/(?:[*+-]|\d+\.)/,n.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,n.item=d(n.item,"gm").replace(/bull/g,n.bullet).getRegex(),n.list=d(n.list).replace(/bull/g,n.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+n.def.source+")").getRegex(),n._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",n._comment=/<!--(?!-?>)[\s\S]*?-->/,n.html=d(n.html,"i").replace("comment",n._comment).replace("tag",n._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),n.paragraph=d(n.paragraph).replace("hr",n.hr).replace("heading",n.heading).replace("lheading",n.lheading).replace("tag",n._tag).getRegex(),n.blockquote=d(n.blockquote).replace("paragraph",n.paragraph).getRegex(),n.normal=m({},n),n.gfm=m({},n.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),n.gfm.paragraph=d(n.paragraph).replace("(?!","(?!"+n.gfm.fences.source.replace("\\1","\\2")+"|"+n.list.source.replace("\\1","\\3")+"|").getRegex(),n.tables=m({},n.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),n.pedantic=m({},n.normal,{html:d("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",n._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),r.rules=n,r.lex=function(t,e){return new r(e).lex(t)},r.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},r.prototype.token=function(t,e){var r,i,o,s,a,l,u,c,d,p,h,f,g,m,b,_;for(t=t.replace(/^ +$/gm,"");t;)if((o=this.rules.newline.exec(t))&&(t=t.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(t))t=t.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:v(o,"\n")});else if(o=this.rules.fences.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]||""});else if(o=this.rules.heading.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(e&&(o=this.rules.nptable.exec(t))&&(l={type:"table",header:y(o[1].replace(/^ *| *\| *$/g,"")),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3]?o[3].replace(/(?: *\| *)?\n$/,"").split("\n"):[]}).header.length===l.align.length){for(t=t.substring(o[0].length),h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=y(l.cells[h],l.header.length);this.tokens.push(l)}else if(o=this.rules.hr.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,e),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(t)){for(t=t.substring(o[0].length),u={type:"list_start",ordered:m=(s=o[2]).length>1,start:m?+s:"",loose:!1},this.tokens.push(u),c=[],r=!1,g=(o=o[0].match(this.rules.item)).length,h=0;h<g;h++)p=(l=o[h]).length,~(l=l.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(p-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+p+"}","gm"),"")),this.options.smartLists&&h!==g-1&&(s===(a=n.bullet.exec(o[h+1])[0])||s.length>1&&a.length>1||(t=o.slice(h+1).join("\n")+t,h=g-1)),i=r||/\n\n(?!\s*$)/.test(l),h!==g-1&&(r="\n"===l.charAt(l.length-1),i||(i=r)),i&&(u.loose=!0),_=void 0,(b=/^\[[ xX]\] /.test(l))&&(_=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),d={type:"list_item_start",task:b,checked:_,loose:i},c.push(d),this.tokens.push(d),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(u.loose)for(g=c.length,h=0;h<g;h++)c[h].loose=!0;this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(t))t=t.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]});else if(e&&(o=this.rules.def.exec(t)))t=t.substring(o[0].length),o[3]&&(o[3]=o[3].substring(1,o[3].length-1)),f=o[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[f]||(this.tokens.links[f]={href:o[2],title:o[3]});else if(e&&(o=this.rules.table.exec(t))&&(l={type:"table",header:y(o[1].replace(/^ *| *\| *$/g,"")),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3]?o[3].replace(/( *\| *)?\n$/,"$1").split("\n"):[]}).header.length===l.align.length){for(t=t.substring(o[0].length),h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=y(l.cells[h].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(o=this.rules.lheading.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(e&&(o=this.rules.paragraph.exec(t)))t=t.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var i={escape:/^\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:g,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s])__(?!_)|^\*\*([^\s])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_|[^\s.])|^_([^\s_][\s\S]*?[^\s])_(?!_|[^\s.])|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:g,text:/^(`+|[^`])[\s\S]*?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function o(t,e){if(this.options=e||b.defaults,this.links=t,this.rules=i.normal,this.renderer=this.options.renderer||new s,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");if(this.options.pedantic)this.rules=i.pedantic;else if(this.options.gfm){var n;n=this.options.breaks?i.breaks:i.gfm,this.options.strikethrough||(n=m({},n,{del:g})),this.rules=n}}function s(t){this.options=t||b.defaults}function a(){}function l(t){this.tokens=[],this.token=null,this.options=t||b.defaults,this.options.renderer=this.options.renderer||new s,this.renderer=this.options.renderer,this.renderer.options=this.options}function u(t,e){if(e){if(u.escapeTest.test(t))return t.replace(u.escapeReplace,function(t){return u.replacements[t]})}else if(u.escapeTestNoEncode.test(t))return t.replace(u.escapeReplaceNoEncode,function(t){return u.replacements[t]});return t}function c(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function d(t,e){return t=t.source||t,e=e||"",{replace:function(e,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),t=t.replace(e,n),this},getRegex:function(){return new RegExp(t,e)}}}function p(t,e,n){if(t){try{var r=decodeURIComponent(c(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(i){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}e&&!f.test(n)&&(n=function(t,e){h[" "+t]||(/^[^:]+:\/*[^\/]*$/.test(t)?h[" "+t]=t+"/":h[" "+t]=v(t,"/",!0));return t=h[" "+t],"//"===e.slice(0,2)?t.replace(/:[\s\S]*/,":")+e:"/"===e.charAt(0)?t.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(i){return null}return n}i._escapes=/\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/g,i._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,i._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,i.autolink=d(i.autolink).replace("scheme",i._scheme).replace("email",i._email).getRegex(),i._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,i.tag=d(i.tag).replace("comment",n._comment).replace("attribute",i._attribute).getRegex(),i._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|[^\[\]\\])*?/,i._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|(?:\\[()]?|\([^\s\x00-\x1f\\]*\)|[^\s\x00-\x1f()\\])*?)/,i._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,i.link=d(i.link).replace("label",i._label).replace("href",i._href).replace("title",i._title).getRegex(),i.reflink=d(i.reflink).replace("label",i._label).getRegex(),i.normal=m({},i),i.pedantic=m({},i.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:d(/^!?\[(label)\]\((.*?)\)/).replace("label",i._label).getRegex(),reflink:d(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",i._label).getRegex()}),i.gfm=m({},i.normal,{escape:d(i.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^(https?:\/\/[^\s\uff0c\u3002\uff1a\u201c\u2018<]+[^\s\uff0c\u3002\uff1a\u201c\u2018<.,:;"')\]])/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:d(i.text).replace("]|","~]|").replace("|$","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|$").getRegex()}),i.gfm.url=d(i.gfm.url).replace("email",i.gfm._extended_email).getRegex(),i.breaks=m({},i.gfm,{br:d(i.br).replace("{2,}","*").getRegex(),text:d(i.gfm.text).replace("{2,}","*").getRegex()}),o.rules=i,o.output=function(t,e,n){return new o(e,n).output(t)},o.prototype.output=function(t){for(var e,n,r,i,s,a,l="";t;)if(s=this.rules.escape.exec(t))t=t.substring(s[0].length),l+=s[1];else if(s=this.rules.autolink.exec(t))t=t.substring(s[0].length),r="@"===s[2]?"mailto:"+(n=u(this.mangle(s[1]))):n=u(s[1]),l+=this.renderer.link(r,null,n);else if(this.inLink||!(s=this.rules.url.exec(t))){if(s=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.inRawBlock=!1),t=t.substring(s[0].length),l+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):u(s[0]):s[0];else if(s=this.rules.link.exec(t))t=t.substring(s[0].length),this.inLink=!0,r=s[2],this.options.pedantic?(e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=e[1],i=e[3]):i="":i=s[3]?s[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),l+=this.outputLink(s,{href:o.escapes(r),title:o.escapes(i)}),this.inLink=!1;else if((s=this.rules.reflink.exec(t))||(s=this.rules.nolink.exec(t))){if(t=t.substring(s[0].length),e=(s[2]||s[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){l+=s[0].charAt(0),t=s[0].substring(1)+t;continue}this.inLink=!0,l+=this.outputLink(s,e),this.inLink=!1}else if(s=this.rules.strong.exec(t))t=t.substring(s[0].length),l+=this.renderer.strong(this.output(s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.em.exec(t))t=t.substring(s[0].length),l+=this.renderer.em(this.output(s[6]||s[5]||s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.code.exec(t))t=t.substring(s[0].length),l+=this.renderer.codespan(u(s[2].trim(),!0));else if(s=this.rules.br.exec(t))t=t.substring(s[0].length),l+=this.renderer.br();else if(s=this.rules.del.exec(t))t=t.substring(s[0].length),l+=this.renderer.del(this.output(s[1]));else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.inRawBlock?l+=this.renderer.text(s[0]):l+=this.renderer.text(u(this.smartypants(s[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===s[2])r="mailto:"+(n=u(s[0]));else{do{a=s[0],s[0]=this.rules._backpedal.exec(s[0])[0]}while(a!==s[0]);n=u(s[0]),r="www."===s[1]?"http://"+n:n}t=t.substring(s[0].length),l+=this.renderer.link(r,null,n)}return l},o.escapes=function(t){return t?t.replace(o.rules._escapes,"$1"):t},o.prototype.outputLink=function(t,e){var n=e.href,r=e.title?u(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,u(t[1]))},o.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},o.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",r=t.length,i=0;i<r;i++)e=t.charCodeAt(i),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},s.prototype.code=function(t,e,n){if(this.options.highlight){var r=this.options.highlight(t,e);null!=r&&r!==t&&(n=!0,t=r)}return e?'<pre><code class="'+this.options.langPrefix+u(e,!0)+'">'+(n?t:u(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:u(t,!0))+"</code></pre>"},s.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},s.prototype.html=function(t){return t},s.prototype.heading=function(t,e,n){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"},s.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},s.prototype.list=function(t,e,n){var r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+r+">\n"},s.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},s.prototype.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},s.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},s.prototype.table=function(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"},s.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},s.prototype.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},s.prototype.strong=function(t){return"<strong>"+t+"</strong>"},s.prototype.em=function(t){return"<em>"+t+"</em>"},s.prototype.codespan=function(t){return"<code>"+t+"</code>"},s.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},s.prototype.del=function(t){return"<del>"+t+"</del>"},s.prototype.link=function(t,e,n){if(null===(t=p(this.options.sanitize,this.options.baseUrl,t)))return n;var r='<a href="'+u(t)+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>"},s.prototype.image=function(t,e,n){if(null===(t=p(this.options.sanitize,this.options.baseUrl,t)))return n;var r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">"},s.prototype.text=function(t){return t},a.prototype.strong=a.prototype.em=a.prototype.codespan=a.prototype.del=a.prototype.text=function(t){return t},a.prototype.link=a.prototype.image=function(t,e,n){return""+n},a.prototype.br=function(){return""},l.parse=function(t,e){return new l(e).parse(t)},l.prototype.parse=function(t){this.inline=new o(t.links,this.options),this.inlineText=new o(t.links,m({},this.options,{renderer:new a})),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},l.prototype.next=function(){return this.token=this.tokens.pop()},l.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},l.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},l.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,c(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,r,i="",o="";for(n="",t=0;t<this.token.header.length;t++)n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(i+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",r=0;r<e.length;r++)n+=this.renderer.tablecell(this.inline.output(e[r]),{header:!1,align:this.token.align[r]});o+=this.renderer.tablerow(n)}return this.renderer.table(i,o);case"blockquote_start":for(o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":o="";for(var s=this.token.ordered,a=this.token.start;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,s,a);case"list_item_start":o="";var l=this.token.loose;for(this.token.task&&(o+=this.renderer.checkbox(this.token.checked));"list_item_end"!==this.next().type;)o+=l||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(o);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},u.escapeTest=/[&<>"']/,u.escapeReplace=/[&<>"']/g,u.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,u.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var h={},f=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function g(){}function m(t){for(var e,n,r=1;r<arguments.length;r++)for(n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function y(t,e){var n=t.replace(/\|/g,function(t,e,n){for(var r=!1,i=e;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function v(t,e,n){if(0===t.length)return"";for(var r=0;r<t.length;){var i=t.charAt(t.length-r-1);if(i!==e||n){if(i===e||!n)break;r++}else r++}return t.substr(0,t.length-r)}function b(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(n||"function"==typeof e){n||(n=e,e=null);var i,o,s=(e=m({},b.defaults,e||{})).highlight,a=0;try{i=r.lex(t,e)}catch(d){return n(d)}o=i.length;var c=function(t){if(t)return e.highlight=s,n(t);var r;try{r=l.parse(i,e)}catch(d){t=d}return e.highlight=s,t?n(t):n(null,r)};if(!s||s.length<3)return c();if(delete e.highlight,!o)return c();for(;a<i.length;a++)!function(t){"code"!==t.type?--o||c():s(t.text,t.lang,function(e,n){return e?c(e):null==n||n===t.text?--o||c():(t.text=n,t.escaped=!0,void(--o||c()))})}(i[a])}else try{return e&&(e=m({},b.defaults,e)),l.parse(r.lex(t,e),e)}catch(d){if(d.message+="\nPlease report this to https://github.com/markedjs/marked.",(e||b.defaults).silent)return"<p>An error occurred:</p><pre>"+u(d.message+"",!0)+"</pre>";throw d}}g.exec=g,b.options=b.setOptions=function(t){return m(b.defaults,t),b},b.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new s,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,strikethrough:!0,xhtml:!1}},b.defaults=b.getDefaults(),b.Parser=l,b.parser=l.parse,b.Renderer=s,b.TextRenderer=a,b.Lexer=r,b.lexer=r.lex,b.InlineLexer=o,b.inlineLexer=o.output,b.parse=b,t.exports=b}(this||"undefined"!=typeof window&&window)}).call(this,n("yLpjYHve"))},1:function(t,e){},"9F+QFB74":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mapFn=function(t){return t},e.mapFn.toString=function(){return"RDB_DEFAULT_MAP_FN"}},FrTVAacj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getType=function(t){return Object.prototype.toString.call(t).match(/\s\w+/)[0].trim()}},GaSbzOnp:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return l}),n.d(e,"__metadata",function(){return u}),n.d(e,"__awaiter",function(){return c}),n.d(e,"__generator",function(){return d}),n.d(e,"__exportStar",function(){return p}),n.d(e,"__values",function(){return h}),n.d(e,"__read",function(){return f}),n.d(e,"__spread",function(){return g}),n.d(e,"__spreadArrays",function(){return m}),n.d(e,"__await",function(){return y}),n.d(e,"__asyncGenerator",function(){return v}),n.d(e,"__asyncDelegator",function(){return b}),n.d(e,"__asyncValues",function(){return _}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return x}),n.d(e,"__importDefault",function(){return k});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function l(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}l((r=r.apply(t,e||[])).next())})}function d(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function p(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function h(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}function m(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function v(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof y?Promise.resolve(n.value.v).then(l,u):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function l(t){a("next",t)}function u(t){a("throw",t)}function c(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function b(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:y(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=h(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){(function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)})(r,i,(e=t[n](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function x(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function k(t){return t&&t.__esModule?t:{default:t}}},H6PxbLYg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("xSYwAM7J");e.forEach=function(t,e,n){var i,o=e;if(t instanceof Set||t instanceof Map)t.forEach(function(t,e){!1===o(t,e)&&(o=r.noop)});else if(t instanceof Array)if(i=t.length,n)for(s=i;s--&&!1!==e(t[s],s););else for(var s=-1;++s<i&&!1!==e(t[s],s););else if("object"==typeof t){var a=Object.keys(t),l=void 0;for(i=a.length,s=-1;++s<i&&!1!==e(t[l=a[s]],l););}}},HhvLnYpC:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hash=function(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e}},"Lh+U5N1+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("GaSbzOnp"),i=n("4c1CS0b3"),o=n("+6/L5mVI"),s=n("0PrS9efm"),a=n("NVK113Rt"),l=n("hQiMwM1X"),u=n("DVytGcct"),c=n("wHNhmth5"),d=n("FVBgd/GF"),p=n("+AwBtVxW"),h=n("cxTK3sM8"),f=n("YNO1Ll7x"),g=n("/LR135zw"),m=n("iF0LBWLW"),y=n("iPvGACis"),v=n("XUb7KB3o"),b=n("rA5Lr6AX");var _=d.skipWhile(function(t){return t instanceof m.ProxySelector}),w=function(){function t(t,e){this.consumed=!1,this.selector$=t.pipe(u.publishReplay(1),c.refCount()),this.trace=e}return t.prototype.setTrace=function(t){this.trace=t},t.prototype.map=function(t){return this.selector$=this.selector$.pipe(g.tap(function(e){return e.map(t)})),this},t.prototype.values=function(){return y.assert(!this.consumed,v.TokenConsumed()),this.consumed=!0,this.selector$.pipe(h.switchMap(function(t){return t.values()}),f.take(1))},t.prototype.changes=function(){return y.assert(!this.consumed,v.TokenConsumed()),this.consumed=!0,this.selector$.pipe(h.switchMap(function(t){return t.changes()}))},t.prototype.traces=function(t){var e=this;return this.changes().pipe(p.startWith(this.trace),l.pairwise(),a.map(function(e){var n,i=e[0],o=e[1];if(!i)return n=o,{type:b.OpsType.Success,ops:n.map(function(t,e){return{type:b.OpType.New,index:e}}),result:n};var s=b.diff(i,o,t);return r.__assign({result:o},s)}),s.filter(function(t){return t.type!==b.OpsType.ShouldSkip}),g.tap(function(t){var n=t.result;return e.lastEmit=n}))},t.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.unshift(this),new t(i.Observable.from(e).pipe(a.map(function(t){return t.selector$.pipe(_)}),o.combineAll(),a.map(function(t){var e;return(e=t.shift()).concat.apply(e,t)})),this.lastEmit)},t.prototype.combine=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.unshift(this),new t(i.Observable.from(e).pipe(a.map(function(t){return t.selector$.pipe(_)}),o.combineAll(),a.map(function(t){var e;return(e=t.shift()).combine.apply(e,t)})),this.lastEmit)},t.prototype.toString=function(){return this.selector$.pipe(a.map(function(t){return t.toString()}))},t}();e.QueryToken=w},Mbtw4ANu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contains=function(t,e){return e instanceof Set||e instanceof Map?e.has(t):e.indexOf(t)>-1}},NRn693yR:function(t,e,n){var r,i,o;o=this,r=[n("+2RfZ2TT")],void 0===(i=function(t){return o.Module=(e=t,n=[].slice,function(){function t(t){var n,r,i,o,s,a,l;if(this.opts=e.extend({},this.opts,t),(n=this.constructor)._connectedClasses||(n._connectedClasses=[]),s=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.constructor._connectedClasses).length;t<e;t++)r=n[t],l=r.pluginName.charAt(0).toLowerCase()+r.pluginName.slice(1),r.prototype._connected&&(r.prototype._module=this),i.push(this[l]=new r);return i}.call(this),this._connected)this.opts=e.extend({},this.opts,this._module.opts);else for(this._init(),i=0,a=s.length;i<a;i++)"function"==typeof(o=s[i])._init&&o._init();this.trigger("initialized")}return t.extend=function(t){var e,n,r;if(null!=t&&"object"==typeof t){for(e in t)r=t[e],"included"!==e&&"extended"!==e&&(this[e]=r);return null!=(n=t.extended)?n.call(this):void 0}},t.include=function(t){var e,n,r;if(null!=t&&"object"==typeof t){for(e in t)r=t[e],"included"!==e&&"extended"!==e&&(this.prototype[e]=r);return null!=(n=t.included)?n.call(this):void 0}},t.connect=function(t){if("function"==typeof t){if(!t.pluginName)throw new Error("Module.connect: cannot connect plugin without pluginName");return t.prototype._connected=!0,this._connectedClasses||(this._connectedClasses=[]),this._connectedClasses.push(t),t.pluginName?this[t.pluginName]=t:void 0}},t.prototype.opts={},t.prototype._init=function(){},t.prototype.on=function(){var t,r;return t=1<=arguments.length?n.call(arguments,0):[],(r=e(this)).on.apply(r,t),this},t.prototype.one=function(){var t,r;return t=1<=arguments.length?n.call(arguments,0):[],(r=e(this)).one.apply(r,t),this},t.prototype.off=function(){var t,r;return t=1<=arguments.length?n.call(arguments,0):[],(r=e(this)).off.apply(r,t),this},t.prototype.trigger=function(){var t,r;return t=1<=arguments.length?n.call(arguments,0):[],(r=e(this)).trigger.apply(r,t),this},t.prototype.triggerHandler=function(){var t,r;return t=1<=arguments.length?n.call(arguments,0):[],(r=e(this)).triggerHandler.apply(r,t)},t.prototype._t=function(){var t,e;return t=1<=arguments.length?n.call(arguments,0):[],(e=this.constructor)._t.apply(e,t)},t._t=function(){var t,e,r,i;return e=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],i=(null!=(r=this.i18n[this.locale])?r[e]:void 0)||"",t.length>0?(i=i.replace(/([^%]|^)%(?:(\d+)\$)?s/g,function(e,n,r){return r?n+t[parseInt(r)-1]:n+t.shift()})).replace(/%%s/g,"%s"):i},t.i18n={"zh-CN":{}},t.locale="zh-CN",t}());var e,n}.apply(e,r))||(t.exports=i)},NeSJOS89:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tryCatch=function(t){var e=this;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return[t.apply(e,n),null]}catch(i){return[null,i]}}}},SW5EbV2r:function(t,e,n){"use strict";n.r(e),n.d(e,"gfm",function(){return h}),n.d(e,"highlightedCodeBlock",function(){return i}),n.d(e,"strikethrough",function(){return o}),n.d(e,"tables",function(){return d}),n.d(e,"taskListItems",function(){return p});var r=/highlight-(?:text|source)-([a-z0-9]+)/;function i(t){t.addRule("highlightedCodeBlock",{filter:function(t){var e=t.firstChild;return"DIV"===t.nodeName&&r.test(t.className)&&e&&"PRE"===e.nodeName},replacement:function(t,e,n){var i=((e.className||"").match(r)||[null,""])[1];return"\n\n"+n.fence+i+"\n"+e.firstChild.textContent+"\n"+n.fence+"\n\n"}})}function o(t){t.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(t){return"~"+t+"~"}})}var s=Array.prototype.indexOf,a=Array.prototype.every,l={};function u(t){var e,n,r=t.parentNode;return"THEAD"===r.nodeName||r.firstChild===t&&("TABLE"===r.nodeName||(n=(e=r).previousSibling,"TBODY"===e.nodeName&&(!n||"THEAD"===n.nodeName&&/^\s*$/i.test(n.textContent))))&&a.call(t.childNodes,function(t){return"TH"===t.nodeName})}function c(t,e){var n=" ";return 0===s.call(e.parentNode.childNodes,e)&&(n="| "),n+t+" |"}function d(t){for(var e in t.keep(function(t){return"TABLE"===t.nodeName&&!u(t.rows[0])}),l)t.addRule(e,l[e])}function p(t){t.addRule("taskListItems",{filter:function(t){return"checkbox"===t.type&&"LI"===t.parentNode.nodeName},replacement:function(t,e){return(e.checked?"[x]":"[ ]")+" "}})}function h(t){t.use([i,o,d,p])}l.tableCell={filter:["th","td"],replacement:function(t,e){return c(t,e)}},l.tableRow={filter:"tr",replacement:function(t,e){var n="",r={left:":--",right:"--:",center:":-:"};if(u(e))for(var i=0;i<e.childNodes.length;i++){var o="---",s=(e.childNodes[i].getAttribute("align")||"").toLowerCase();s&&(o=r[s]||o),n+=c(o,e.childNodes[i])}return"\n"+t+(n?"\n"+n:"")}},l.table={filter:function(t){return"TABLE"===t.nodeName&&u(t.rows[0])},replacement:function(t){return"\n\n"+(t=t.replace("\n\n","\n"))+"\n\n"}},l.tableSection={filter:["thead","tbody","tfoot"],replacement:function(t){return t}}},T5HjItxe:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("GaSbzOnp"),i=n("VtYuyi7W");e.ContextLogger=i.ContextLogger,e.Level=i.Level,e.Logger=i.Logger,r.__exportStar(n("p7PDwGED"),e)},U9Ham2Lb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("+J1YLSRB");e.RDBType=r.RDBType,e.Relationship=r.Relationship,e.LeafType=r.LeafType,e.StatementType=r.StatementType,e.JoinMode=r.JoinMode,e.DataStoreType=r.DataStoreType},VnRQYvuk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("GaSbzOnp"),i=function(t){function e(n){var r=t.call(this,n)||this;return r.name="ReactiveDBError",Object.setPrototypeOf(r,e.prototype),r}return r.__extends(e,t),e}(Error);e.ReactiveDBException=i},VtYuyi7W:function(t,e,n){"use strict";(function(t){var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.debug=10]="debug",t[t.info=20]="info",t[t.warning=30]="warning",t[t.error=40]="error",t[t.test=1e3]="test"}(n=e.Level||(e.Level={}));var r=function(){function t(t,e,n,r){void 0===r&&(r=console),this.name=t,this.level=e,this.formatter=n,this.adapter=r,this.destroy=function(){},this.effects=new Map}return t.prototype.invoke=function(t,e){var n="";if(this.formatter){var r=[this.name,this.level].concat(e);n=this.formatter.apply(this,r)}this.adapter[t].call(this.adapter,n),(this.effects.get(t)||[]).forEach(function(t){return t.apply(void 0,e)})},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.info>=this.level&&this.invoke("info",t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.warning>=this.level&&this.invoke("warn",t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.error>=this.level&&this.invoke("error",t)},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.debug>=this.level&&this.invoke("debug",t)},t.prototype.setLevel=function(t){this.level=t},t.prototype.replaceAdapter=function(t){t!==this.adapter&&(this.adapter=t)},t.prototype.replaceFormatter=function(t){t!==this.formatter&&(this.formatter=t)},t.prototype.effect=function(t,e){if(this.effects.has(t)){var n=this.effects.get(t);n.every(function(t){return t!==e})&&n.push(e)}else this.effects.set(t,[e])},t.prototype.clearEffects=function(){this.effects.clear()},t}();e.ContextLogger=r;var i=function(){function t(){}return t.get=function(e,n,i,o){void 0===o&&(o=console);var s=t.contextMap.get(e);if(!s){var a=new r(e,i||t.defaultLevel,n,o);return t.contextMap.set(e,a),a.destroy=function(){t.contextMap.delete(e),a.clearEffects()},a}return s},t.setLevel=function(e){t.outputLogger.setLevel(e)},t.warn=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];(e=t.outputLogger).warn.apply(e,n)},t.info=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];(e=t.outputLogger).info.apply(e,n)},t.debug=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];(e=t.outputLogger).debug.apply(e,n)},t.error=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];(e=t.outputLogger).error.apply(e,n)},t.contextMap=new Map,t.defaultLevel=n.debug,t.outputLogger=new r("[ReactiveDB]",t.defaultLevel,function(t,e,n){var r=Array.isArray(n)?n.join(""):n;return(t?"["+t+"] ":"")+"at "+(new Date).toLocaleString()+": \r\n    "+r}),t}();e.Logger=i;i.setLevel((t&&t.env,n.error))}).call(this,n("8oxByP8V"))},WFSm3rjW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.identity=function(t){return t}},WdnSUq9g:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("GaSbzOnp");r.__exportStar(n("HhvLnYpC"),e),r.__exportStar(n("gGPOCt/k"),e),r.__exportStar(n("c2UzbEbu"),e),r.__exportStar(n("zohQovrk"),e),r.__exportStar(n("iPvGACis"),e),r.__exportStar(n("kzw1iLML"),e),r.__exportStar(n("Mbtw4ANu"),e),r.__exportStar(n("H6PxbLYg"),e),r.__exportStar(n("WFSm3rjW"),e),r.__exportStar(n("FrTVAacj"),e),r.__exportStar(n("NeSJOS89"),e),r.__exportStar(n("rA5Lr6AX"),e);var i=n("/R2TB7II");e.warn=i.warn},XUb7KB3o:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TokenConsumed=function(){return"QueryToken was already consumed."},e.TokenConcatFailed=function(t){return"Token cannot be concated"+(t?" due to: "+t:"")+"."}},Z19A9xxA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("GaSbzOnp"),i=n("Lh+U5N1+");e.QueryToken=i.QueryToken;var o=n("iF0LBWLW");e.ProxySelector=o.ProxySelector,r.__exportStar(n("U9Ham2Lb"),e)},c2UzbEbu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("4c1CS0b3"),i=n("cSYBf0ak");e.valid=function(t,e){return t?r.Observable.empty().pipe(i.skip(1)):r.Observable.throw(e)}},"gGPOCt/k":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("H6PxbLYg");e.clone=function(t,n){if(void 0===n&&(n=null),null==t)return t;if(t.constructor===Date)return new Date(t.valueOf());if(t.constructor===RegExp){var i=t.valueOf(),o="";return o+=i.global?"g":"",o+=i.ignoreCase?"i":"",o+=i.multiline?"m":"",new RegExp(i.source,o)}return t.constructor===Function||t.constructor===String||t.constructor===Number||t.constructor===Boolean?t:(n=n||new t.constructor,r.forEach(t,function(t,r){n[r]=e.clone(t,null)}),n)}},"i69eL/y+":function(t,e,n){"use strict";function r(t,e){return Array(e+1).join(t)}n.r(e);var i=["address","article","aside","audio","blockquote","body","canvas","center","dd","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","isindex","li","main","menu","nav","noframes","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"];function o(t){return-1!==i.indexOf(t.nodeName.toLowerCase())}var s=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function a(t){return-1!==s.indexOf(t.nodeName.toLowerCase())}var l=s.join();var u={};function c(t){for(var e in this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[],t.rules)this.array.push(t.rules[e])}function d(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(p(i,e,n))return i}}function p(t,e,n){var r=t.filter;if("string"==typeof r){if(r===e.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(e.nodeName.toLowerCase())>-1)return!0}else{if("function"!=typeof r)throw new TypeError("`filter` needs to be a string, array, or function");if(r.call(t,e,n))return!0}}function h(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function f(t,e,n){return t&&t.parentNode===e||n(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}u.paragraph={filter:"p",replacement:function(t){return"\n\n"+t+"\n\n"}},u.lineBreak={filter:"br",replacement:function(t,e,n){return n.br+"\n"}},u.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,n){var i=Number(e.nodeName.charAt(1));return"setext"===n.headingStyle&&i<3?"\n\n"+t+"\n"+r(1===i?"=":"-",t.length)+"\n\n":"\n\n"+r("#",i)+" "+t+"\n\n"}},u.blockquote={filter:"blockquote",replacement:function(t){return"\n\n"+(t=(t=t.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+"\n\n"}},u.list={filter:["ul","ol"],replacement:function(t,e){var n=e.parentNode;return"LI"===n.nodeName&&n.lastElementChild===e?"\n"+t:"\n\n"+t+"\n\n"}},u.listItem={filter:"li",replacement:function(t,e,n){t=t.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var r=n.bulletListMarker+"   ",i=e.parentNode;if("OL"===i.nodeName){var o=i.getAttribute("start"),s=Array.prototype.indexOf.call(i.children,e);r=(o?Number(o)+s:s+1)+".  "}return r+t+(e.nextSibling&&!/\n$/.test(t)?"\n":"")}},u.indentedCodeBlock={filter:function(t,e){return"indented"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e,n){return"\n\n    "+e.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},u.fencedCodeBlock={filter:function(t,e){return"fenced"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e,n){var r=((e.firstChild.className||"").match(/language-(\S+)/)||[null,""])[1];return"\n\n"+n.fence+r+"\n"+e.firstChild.textContent+"\n"+n.fence+"\n\n"}},u.horizontalRule={filter:"hr",replacement:function(t,e,n){return"\n\n"+n.hr+"\n\n"}},u.inlineLink={filter:function(t,e){return"inlined"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e){return"["+t+"]("+e.getAttribute("href")+(e.title?' "'+e.title+'"':"")+")"}},u.referenceLink={filter:function(t,e){return"referenced"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e,n){var r,i,o=e.getAttribute("href"),s=e.title?' "'+e.title+'"':"";switch(n.linkReferenceStyle){case"collapsed":r="["+t+"][]",i="["+t+"]: "+o+s;break;case"shortcut":r="["+t+"]",i="["+t+"]: "+o+s;break;default:var a=this.references.length+1;r="["+t+"]["+a+"]",i="["+a+"]: "+o+s}return this.references.push(i),r},references:[],append:function(t){var e="";return this.references.length&&(e="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),e}},u.emphasis={filter:["em","i"],replacement:function(t,e,n){return t.trim()?n.emDelimiter+t+n.emDelimiter:""}},u.strong={filter:["strong","b"],replacement:function(t,e,n){return t.trim()?n.strongDelimiter+t+n.strongDelimiter:""}},u.code={filter:function(t){var e=t.previousSibling||t.nextSibling,n="PRE"===t.parentNode.nodeName&&!e;return"CODE"===t.nodeName&&!n},replacement:function(t){if(!t.trim())return"";var e="`",n="",r="",i=t.match(/`+/gm);if(i)for(/^`/.test(t)&&(n=" "),/`$/.test(t)&&(r=" ");-1!==i.indexOf(e);)e+="`";return e+n+t+r+e}},u.image={filter:"img",replacement:function(t,e){var n=e.alt||"",r=e.getAttribute("src")||"",i=e.title||"";return r?"!["+n+"]("+r+(i?' "'+i+'"':"")+")":""}},c.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){return t.isBlank?this.blankRule:(e=d(this.array,t,this.options))?e:(e=d(this._keep,t,this.options))?e:(e=d(this._remove,t,this.options))?e:this.defaultRule;var e},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};var g="undefined"!=typeof window?window:{};var m,y,v,b=function(){var t=g.DOMParser,e=!1;try{(new t).parseFromString("","text/html")&&(e=!0)}catch(n){}return e}()?g.DOMParser:(m=function(){},y=n(1).JSDOM,m.prototype.parseFromString=function(t){return new y(t).window.document},m);function _(t){var e;"string"==typeof t?e=(v=v||new b).parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html").getElementById("turndown-root"):e=t.cloneNode(!0);return function(t){var e=t.element,n=t.isBlock,r=t.isVoid,i=t.isPre||function(t){return"PRE"===t.nodeName};if(e.firstChild&&!i(e)){for(var o=null,s=!1,a=null,l=f(a,e,i);l!==e;){if(3===l.nodeType||4===l.nodeType){var u=l.data.replace(/[ \r\n\t]+/g," ");if(o&&!/ $/.test(o.data)||s||" "!==u[0]||(u=u.substr(1)),!u){l=h(l);continue}l.data=u,o=l}else{if(1!==l.nodeType){l=h(l);continue}n(l)||"BR"===l.nodeName?(o&&(o.data=o.data.replace(/ $/,"")),o=null,s=!1):r(l)&&(o=null,s=!0)}var c=f(a,l,i);a=l,l=c}o&&(o.data=o.data.replace(/ $/,""),o.data||h(o))}}({element:e,isBlock:o,isVoid:a}),e}function w(t){return t.isBlock=o(t),t.isCode="code"===t.nodeName.toLowerCase()||t.parentNode.isCode,t.isBlank=function(t){return-1===["A","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"].indexOf(t.nodeName)&&/^\s*$/i.test(t.textContent)&&!a(t)&&!function(t){return t.querySelector&&t.querySelector(l)}(t)}(t),t.flankingWhitespace=function(t){var e="",n="";if(!t.isBlock){var r=/^[ \r\n\t]/.test(t.textContent),i=/[ \r\n\t]$/.test(t.textContent);r&&!x("left",t)&&(e=" "),i&&!x("right",t)&&(n=" ")}return{leading:e,trailing:n}}(t),t}function x(t,e){var n,r,i;return"left"===t?(n=e.previousSibling,r=/ $/):(n=e.nextSibling,r=/^ /),n&&(3===n.nodeType?i=r.test(n.nodeValue):1!==n.nodeType||o(n)||(i=r.test(n.textContent))),i}var k=Array.prototype.reduce,T=/^\n*/,S=/\n*$/,C=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function N(t){if(!(this instanceof N))return new N(t);var e={rules:u,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",blankReplacement:function(t,e){return e.isBlock?"\n\n":""},keepReplacement:function(t,e){return e.isBlock?"\n\n"+e.outerHTML+"\n\n":e.outerHTML},defaultReplacement:function(t,e){return e.isBlock?"\n\n"+t+"\n\n":t}};this.options=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}({},e,t),this.rules=new c(this.options)}function A(t){var e=this;return k.call(t.childNodes,function(t,n){var r="";return 3===(n=new w(n)).nodeType?r=n.isCode?n.nodeValue:e.escape(n.nodeValue):1===n.nodeType&&(r=function(t){var e=this.rules.forNode(t),n=A.call(this,t),r=t.flankingWhitespace;(r.leading||r.trailing)&&(n=n.trim());return r.leading+e.replacement(n,t,this.options)+r.trailing}.call(e,n)),R(t,r)},"")}function R(t,e){var n,r,i,o=(n=e,r=[t.match(S)[0],n.match(T)[0]].sort(),(i=r[r.length-1]).length<2?i:"\n\n");return(t=t.replace(S,""))+o+(e=e.replace(T,""))}N.prototype={turndown:function(t){if(!function(t){return null!=t&&("string"==typeof t||t.nodeType&&(1===t.nodeType||9===t.nodeType||11===t.nodeType))}(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(""===t)return"";var e=A.call(this,new _(t));return function(t){var e=this;return this.rules.forEach(function(n){"function"==typeof n.append&&(t=R(t,n.append(e.options)))}),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else{if("function"!=typeof t)throw new TypeError("plugin must be a Function or an Array of Functions");t(this)}return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return C.reduce(function(t,e){return t.replace(e[0],e[1])},t)}},e.default=N},iF0LBWLW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("NVK113Rt"),i=n("9F+QFB74"),o=function(){function t(t,e,n){this.query=e,this.tableName=n,this.mapFn=i.mapFn,this.request$=t.pipe(r.map(function(t){return Array.isArray(t)?t:[t]}))}return t.prototype.values=function(){return this.mapFn(this.request$)},t.prototype.changes=function(){return this.mapFn(this.request$)},t.prototype.map=function(t){return this.mapFn=t,this},t}();e.ProxySelector=o},iPvGACis:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("VnRQYvuk");e.assert=function(t,e){if(!t)throw new r.ReactiveDBException(e)}},"iSsLT+9z":function(t,e,n){var r,i,o;o=this,r=[n("+2RfZ2TT"),n("NRn693yR"),n("wyAJ1ByA")],void 0===(i=function(t,e,n,r){return o.Simditor=function(t,e,n,r){var i,o,s,a,l,u,c,d,p,h,f,g,m,y,v,b,_,w,x,k,T,S,C,N,A,R,E,O,B,L,P,M,I,z,D,j,$=function(t,e){for(var n in e)F.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},F={}.hasOwnProperty,W=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},U=[].slice;return R=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return $(r,e),r.pluginName="Selection",r.prototype._range=null,r.prototype._startNodes=null,r.prototype._endNodes=null,r.prototype._containerNode=null,r.prototype._nodes=null,r.prototype._blockNodes=null,r.prototype._rootNodes=null,r.prototype._init=function(){var t;return this.editor=this._module,this._selection=document.getSelection(),this.editor.on("selectionchanged",(t=this,function(e){return t.reset(),t._range=t._selection.getRangeAt(0)})),this.editor.on("blur",function(t){return function(e){return t.reset()}}(this)),this.editor.on("focus",function(t){return function(e){return t.reset(),t._range=t._selection.getRangeAt(0)}}(this))},r.prototype.reset=function(){return this._range=null,this._startNodes=null,this._endNodes=null,this._containerNode=null,this._nodes=null,this._blockNodes=null,this._rootNodes=null},r.prototype.clear=function(){try{this._selection.removeAllRanges()}catch(t){}return this.reset()},r.prototype.range=function(t){var e;return t?(this.clear(),this._selection.addRange(t),this._range=t,e=this.editor.util.browser.firefox||this.editor.util.browser.msie,!this.editor.inputManager.focused&&e&&this.editor.body.focus()):!this._range&&this.editor.inputManager.focused&&this._selection.rangeCount&&(this._range=this._selection.getRangeAt(0)),this._range},r.prototype.startNodes=function(){var e;return this._range&&(this._startNodes||(this._startNodes=(e=this,function(){var n;return(n=t(e._range.startContainer).parentsUntil(e.editor.body).get()).unshift(e._range.startContainer),t(n)})())),this._startNodes},r.prototype.endNodes=function(){var e;return this._range&&(this._endNodes||(this._endNodes=this._range.collapsed?this.startNodes():((e=t(this._range.endContainer).parentsUntil(this.editor.body).get()).unshift(this._range.endContainer),t(e)))),this._endNodes},r.prototype.containerNode=function(){return this._range&&(this._containerNode||(this._containerNode=t(this._range.commonAncestorContainer))),this._containerNode},r.prototype.nodes=function(){var e;return this._range&&(this._nodes||(this._nodes=(e=this,function(){var n;return n=[],e.startNodes().first().is(e.endNodes().first())?n=e.startNodes().get():(e.startNodes().each(function(r,i){var o,s,a,l,u,c,d;return s=t(i),e.endNodes().index(s)>-1?n.push(i):s.parent().is(e.editor.body)||(c=e.endNodes().index(s.parent()))>-1?(o=c&&c>-1?e.endNodes().eq(c-1):e.endNodes().last(),d=(a=s.parent().contents()).index(s),l=a.index(o),t.merge(n,a.slice(d,l).get())):(u=(a=s.parent().contents()).index(s),t.merge(n,a.slice(u).get()))}),e.endNodes().each(function(r,i){var o,s,a;return(o=t(i)).parent().is(e.editor.body)||e.startNodes().index(o.parent())>-1?(n.push(i),!1):(a=(s=o.parent().contents()).index(o),t.merge(n,s.slice(0,a+1)))})),t(t.unique(n))})())),this._nodes},r.prototype.blockNodes=function(){var t;if(this._range)return this._blockNodes||(this._blockNodes=(t=this,function(){return t.nodes().filter(function(e,n){return t.editor.util.isBlockNode(n)})})()),this._blockNodes},r.prototype.rootNodes=function(){var e;if(this._range)return this._rootNodes||(this._rootNodes=(e=this,function(){return e.nodes().filter(function(n,r){var i;return(i=t(r).parent()).is(e.editor.body)||i.is("blockquote")})})()),this._rootNodes},r.prototype.rangeAtEndOf=function(e,n){var r,i,o,s,a,l;if(null==n&&(n=this.range()),n&&n.collapsed)return e=t(e)[0],o=n.endContainer,s=this.editor.util.getNodeLength(o),i=n.endOffset===s-1,a=t(o).contents().last().is("br"),r=n.endOffset===s,!!(i&&a||r)&&(e===o||!!t.contains(e,o)&&(l=!0,t(o).parentsUntil(e).addBack().each(function(e,n){var r,i,o;if(o=(r=t(n).parent().contents().filter(function(){return!(this!==n&&3===this.nodeType&&!this.nodeValue)}).last()).get(0)===n,i=r.is("br")&&r.prev().get(0)===n,!o&&!i)return l=!1,!1}),l))},r.prototype.rangeAtStartOf=function(e,n){var r,i;if(null==n&&(n=this.range()),n&&n.collapsed)return e=t(e)[0],i=n.startContainer,0===n.startOffset&&(e===i||!!t.contains(e,i)&&(r=!0,t(i).parentsUntil(e).addBack().each(function(e,n){if(t(n).parent().contents().filter(function(){return!(this!==n&&3===this.nodeType&&!this.nodeValue)}).first().get(0)!==n)return r=!1}),r))},r.prototype.insertNode=function(e,n){if(null==n&&(n=this.range()),n)return e=t(e)[0],n.insertNode(e),this.setRangeAfter(e,n)},r.prototype.setRangeAfter=function(e,n){if(null==n&&(n=this.range()),null!=n)return e=t(e)[0],n.setEndAfter(e),n.collapse(!1),this.range(n)},r.prototype.setRangeBefore=function(e,n){if(null==n&&(n=this.range()),null!=n)return e=t(e)[0],n.setEndBefore(e),n.collapse(!1),this.range(n)},r.prototype.setRangeAtStartOf=function(e,n){return null==n&&(n=this.range()),e=t(e).get(0),n.setEnd(e,0),n.collapse(!1),this.range(n)},r.prototype.setRangeAtEndOf=function(e,n){var r,i,o,s,a,l,u;return null==n&&(n=this.range()),e=(i=t(e))[0],i.is("pre")?(o=i.contents()).length>0?(l=(s=o.last()).text(),a=this.editor.util.getNodeLength(s[0]),"\n"===l.charAt(l.length-1)?n.setEnd(s[0],a-1):n.setEnd(s[0],a)):n.setEnd(e,0):(u=this.editor.util.getNodeLength(e),3!==e.nodeType&&u>0&&((r=t(e).contents().last()).is("br")?u-=1:3!==r[0].nodeType&&this.editor.util.isEmptyNode(r)&&(r.append(this.editor.util.phBr),e=r[0],u=0)),n.setEnd(e,u)),n.collapse(!1),this.range(n)},r.prototype.deleteRangeContents=function(t){var e,n,r,i;return null==t&&(t=this.range()),i=t.cloneRange(),r=t.cloneRange(),i.collapse(!0),r.collapse(!1),n=this.rangeAtStartOf(this.editor.body,i),e=this.rangeAtEndOf(this.editor.body,r),!t.collapsed&&n&&e?(this.editor.body.empty(),t.setStart(this.editor.body[0],0),t.collapse(!0),this.range(t)):t.deleteContents(),t},r.prototype.breakBlockEl=function(e,n){var r;return null==n&&(n=this.range()),r=t(e),n.collapsed?(n.setStartBefore(r.get(0)),n.collapsed?r:r.before(n.extractContents())):r},r.prototype.save=function(e){var n,r,i;if(null==e&&(e=this.range()),!this._selectionSaved)return(r=e.cloneRange()).collapse(!1),i=t("<span/>").addClass("simditor-caret-start"),n=t("<span/>").addClass("simditor-caret-end"),r.insertNode(n[0]),e.insertNode(i[0]),this.clear(),this._selectionSaved=!0},r.prototype.restore=function(){var t,e,n,r,i,o,s;return!!this._selectionSaved&&(i=this.editor.body.find(".simditor-caret-start"),t=this.editor.body.find(".simditor-caret-end"),i.length&&t.length?(s=(o=i.parent()).contents().index(i),n=(e=t.parent()).contents().index(t),o[0]===e[0]&&(n-=1),(r=document.createRange()).setStart(o.get(0),s),r.setEnd(e.get(0),n),i.remove(),t.remove(),this.range(r)):(i.remove(),t.remove()),this._selectionSaved=!1,r)},r}(),f=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return $(r,e),r.pluginName="Formatter",r.prototype.opts={allowedTags:[],allowedAttributes:{},allowedStyles:{}},r.prototype._init=function(){return this.editor=this._module,this._allowedTags=t.merge(["br","span","a","img","b","strong","i","strike","u","font","p","ul","ol","li","blockquote","pre","code","h1","h2","h3","h4","hr"],this.opts.allowedTags),this._allowedAttributes=t.extend({img:["src","alt","width","height","data-non-image"],a:["href","target","rel"],font:["color"],code:["class"]},this.opts.allowedAttributes),this._allowedStyles=t.extend({span:["color","font-size"],b:["color"],i:["color"],strong:["color"],strike:["color"],u:["color"],p:["margin-left","text-align"],h1:["margin-left","text-align"],h2:["margin-left","text-align"],h3:["margin-left","text-align"],h4:["margin-left","text-align"]},this.opts.allowedStyles),this.editor.body.on("click","a",function(t){return!1})},r.prototype.decorate=function(t){return null==t&&(t=this.editor.body),this.editor.trigger("decorate",[t]),t},r.prototype.undecorate=function(t){return null==t&&(t=this.editor.body.clone()),this.editor.trigger("undecorate",[t]),t},r.prototype.autolink=function(e){var n,r,i,o,s,a,l,u,c,d,p,h,f;for(null==e&&(e=this.editor.body),l=[],(i=function(n){return n.contents().each(function(n,r){var o,s;if(!(o=t(r)).is("code")&&!o.is("a")&&!o.closest("a, pre",e).length)return!o.is("iframe")&&o.contents().length?i(o):(s=o.text())&&/https?:\/\/|www\./gi.test(s)?l.push(o):void 0})})(e),c=/(https?:\/\/|www\.)[\w\-\.\?&=\/#%:,@\!\+]+/gi,o=0,a=l.length;o<a;o++){for(h=(r=l[o]).text(),d=[],u=null,s=0;null!==(u=c.exec(h));)p=h.substring(s,u.index),d.push(document.createTextNode(p)),s=c.lastIndex,f=/^(http(s)?:\/\/|\/)/.test(u[0])?u[0]:"http://"+u[0],n=t('<a href="'+f+'" rel="nofollow"></a>').text(u[0]),d.push(n[0]);d.push(document.createTextNode(h.substring(s))),r.replaceWith(t(d))}return e},r.prototype.format=function(e){var n,r,i,o,s,a,l,u,c,d;if(null==e&&(e=this.editor.body),e.is(":empty"))return e.append("<p>"+this.editor.util.phBr+"</p>"),e;for(i=0,s=(c=e.contents()).length;i<s;i++)l=c[i],this.cleanNode(l,!0);for(o=0,a=(d=e.contents()).length;o<a;o++)u=d[o],(n=t(u)).is("br")?(null!=r&&(r=null),n.remove()):this.editor.util.isBlockNode(u)?n.is("li")?r&&r.is("ul, ol")?r.append(u):(r=t("<ul/>").insertBefore(u)).append(u):r=null:(r&&!r.is("ul, ol")||(r=t("<p/>").insertBefore(u)),r.append(u),this.editor.util.isEmptyNode(r)&&r.append(this.editor.util.phBr));return e},r.prototype.cleanNode=function(e,n){var r,i,o,s,a,l,u,c,d,p,h,f,g,m,y,v,b,_;if((o=t(e)).length>0){if(3!==o[0].nodeType){if(c=o.is("iframe")?null:o.contents(),d=this.editor.util.isDecoratedNode(o),o.is(this._allowedTags.join(","))||d){if(o.is("a")&&(i=o.find("img")).length>0&&(o.replaceWith(i),o=i,c=null),o.is("td")&&(r=o.find(this.editor.util.blockNodes.join(","))).length>0&&(r.each(function(e,n){return t(n).contents().unwrap()}),c=o.contents()),o.is("img")&&o.hasClass("uploading")&&o.remove(),!d){for(l=this._allowedAttributes[o[0].tagName.toLowerCase()],p=0,f=(y=t.makeArray(o[0].attributes)).length;p<f;p++)"style"!==(u=y[p]).name&&(null!=l&&(v=u.name,W.call(l,v)>=0)||o.removeAttr(u.name));this._cleanNodeStyles(o),o.is("span")&&0===o[0].attributes.length&&o.contents().first().unwrap()}}else 1!==o[0].nodeType||o.is(":empty")?(o.remove(),c=null):o.is("div, article, dl, header, footer, tr")?(o.append("<br/>"),c.first().unwrap()):o.is("table")?(s=t("<p/>"),o.find("tr").each(function(e,n){return s.append(t(n).text()+"<br/>")}),o.replaceWith(s),c=null):o.is("thead, tfoot")?(o.remove(),c=null):o.is("th")?(a=t("<td/>").append(o.contents()),o.replaceWith(a)):c.first().unwrap();if(n&&null!=c&&!o.is("pre"))for(h=0,g=c.length;h<g;h++)m=c[h],this.cleanNode(m,!0);return null}(b=o.text().replace(/(\r\n|\n|\r)/gm,""))?(_=document.createTextNode(b),o.replaceWith(_)):o.remove()}},r.prototype._cleanNodeStyles=function(e){var n,r,i,o,s,a,l,u,c;if(u=e.attr("style")){if(e.removeAttr("style"),!((n=this._allowedStyles[e[0].tagName.toLowerCase()])&&n.length>0))return e;for(c={},r=0,i=(s=u.split(";")).length;r<i;r++)l=s[r],2===(o=(l=t.trim(l)).split(":")).length&&("font-size"===o[0]&&parseInt(o[1],10)<12||(a=o[0],W.call(n,a)>=0&&(c[t.trim(o[0])]=t.trim(o[1]))));return Object.keys(c).length>0&&e.css(c),e}},r.prototype.clearHtml=function(e,n){var r,i,o,s;return null==n&&(n=!0),r=t("<div/>").append(e),i=r.contents(),o="",i.each((s=this,function(e,r){var a,l;return 3===r.nodeType?o+=r.nodeValue:1===r.nodeType&&((l=(a=t(r)).is("iframe")?null:a.contents())&&l.length>0&&(o+=s.clearHtml(l)),n&&e<i.length-1&&a.is("br, p, div, li,tr, pre, address, artticle, aside, dl, figcaption, footer, h1, h2,h3, h4, header"))?o+="\n":void 0})),o},r.prototype.beautify=function(e){var n;return n=function(t){return!!(t.is("p")&&!t.text()&&t.children(":not(br)").length<1)},e.each(function(e,r){var i;return((i=t(r)).is(':not(img, br, col, td, hr, [class^="simditor-"]):empty')||n(i))&&i.remove(),i.find(':not(img, br, col, td, hr, [class^="simditor-"]):empty').remove()})},r}(),_=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return $(r,e),r.pluginName="InputManager",r.prototype._modifierKeys=[16,17,18,91,93,224],r.prototype._arrowKeys=[37,38,39,40],r.prototype._init=function(){var e,n,r;return this.editor=this._module,this.throttledValueChanged=this.editor.util.throttle((r=this,function(t){return setTimeout(function(){return r.editor.trigger("valuechanged",t)},10)}),300),this.throttledSelectionChanged=this.editor.util.throttle(function(t){return function(){return t.editor.trigger("selectionchanged")}}(this),50),t(document).on("selectionchange.simditor"+this.editor.id,function(t){return function(e){var n;if(t.focused&&!t.editor.clipboard.pasting)return(n=function(){return t._selectionTimer&&(clearTimeout(t._selectionTimer),t._selectionTimer=null),t.editor.selection._selection.rangeCount>0?t.throttledSelectionChanged():t._selectionTimer=setTimeout(function(){if(t._selectionTimer=null,t.focused)return n()},10)})()}}(this)),this.editor.on("valuechanged",function(e){return function(){var n;if(e.lastCaretPosition=null,n=e.editor.body.children().filter(function(t,n){return e.editor.util.isBlockNode(n)}),e.focused&&0===n.length&&(e.editor.selection.save(),e.editor.formatter.format(),e.editor.selection.restore()),e.editor.body.find("hr, pre, .simditor-table").each(function(n,r){var i,o;if(((i=t(r)).parent().is("blockquote")||i.parent()[0]===e.editor.body[0])&&(o=!1,0===i.next().length&&(t("<p/>").append(e.editor.util.phBr).insertAfter(i),o=!0),0===i.prev().length&&(t("<p/>").append(e.editor.util.phBr).insertBefore(i),o=!0),o))return e.throttledValueChanged()}),e.editor.body.find("pre:empty").append(e.editor.util.phBr),!e.editor.util.support.onselectionchange&&e.focused)return e.throttledSelectionChanged()}}(this)),this.editor.body.on("keydown",t.proxy(this._onKeyDown,this)).on("keypress",t.proxy(this._onKeyPress,this)).on("keyup",t.proxy(this._onKeyUp,this)).on("mouseup",t.proxy(this._onMouseUp,this)).on("focus",t.proxy(this._onFocus,this)).on("blur",t.proxy(this._onBlur,this)).on("drop",t.proxy(this._onDrop,this)).on("input",t.proxy(this._onInput,this)),this.editor.util.browser.firefox&&(this.editor.hotkeys.add("cmd+left",function(t){return function(e){return e.preventDefault(),t.editor.selection._selection.modify("move","backward","lineboundary"),!1}}(this)),this.editor.hotkeys.add("cmd+right",function(t){return function(e){return e.preventDefault(),t.editor.selection._selection.modify("move","forward","lineboundary"),!1}}(this)),e=this.editor.util.os.mac?"cmd+a":"ctrl+a",this.editor.hotkeys.add(e,function(t){return function(e){var n,r,i,o;if((n=t.editor.body.children()).length>0)return r=n.first().get(0),i=n.last().get(0),(o=document.createRange()).setStart(r,0),o.setEnd(i,t.editor.util.getNodeLength(i)),t.editor.selection.range(o),!1}}(this))),n=this.editor.util.os.mac?"cmd+enter":"ctrl+enter",this.editor.hotkeys.add(n,function(t){return function(e){return t.editor.el.closest("form").find("button:submit").click(),!1}}(this))},r.prototype._onFocus=function(t){var e;if(!this.editor.clipboard.pasting)return this.editor.el.addClass("focus").removeClass("error"),this.focused=!0,setTimeout((e=this,function(){var t,n;if((n=e.editor.selection._selection.getRangeAt(0)).startContainer===e.editor.body[0]&&(e.lastCaretPosition?e.editor.undoManager.caretPosition(e.lastCaretPosition):(t=e.editor.body.children().first(),n=document.createRange(),e.editor.selection.setRangeAtStartOf(t,n))),e.lastCaretPosition=null,e.editor.triggerHandler("focus"),!e.editor.util.support.onselectionchange)return e.throttledSelectionChanged()}),0)},r.prototype._onBlur=function(t){var e;if(!this.editor.clipboard.pasting)return this.editor.el.removeClass("focus"),this.editor.sync(),this.focused=!1,this.lastCaretPosition=null!=(e=this.editor.undoManager.currentState())?e.caret:void 0,this.editor.triggerHandler("blur")},r.prototype._onMouseUp=function(t){if(!this.editor.util.support.onselectionchange)return this.throttledSelectionChanged()},r.prototype._onKeyDown=function(t){var e,n;if(!1===this.editor.triggerHandler(t))return!1;if(!this.editor.hotkeys.respondTo(t)){if(this.editor.keystroke.respondTo(t))return this.throttledValueChanged(),!1;if(e=t.which,!(W.call(this._modifierKeys,e)>=0||(n=t.which,W.call(this._arrowKeys,n)>=0)||this.editor.util.metaKey(t)&&86===t.which))return this.editor.util.support.oninput||this.throttledValueChanged(["typing"]),null}},r.prototype._onKeyPress=function(t){if(!1===this.editor.triggerHandler(t))return!1},r.prototype._onKeyUp=function(e){var n,r;if(!1===this.editor.triggerHandler(e))return!1;!this.editor.util.support.onselectionchange&&(r=e.which,W.call(this._arrowKeys,r)>=0)?this.throttledValueChanged():8!==e.which&&46!==e.which||!this.editor.util.isEmptyNode(this.editor.body)||(this.editor.body.empty(),n=t("<p/>").append(this.editor.util.phBr).appendTo(this.editor.body),this.editor.selection.setRangeAtStartOf(n))},r.prototype._onDrop=function(t){return!1!==this.editor.triggerHandler(t)&&this.throttledValueChanged()},r.prototype._onInput=function(t){return this.throttledValueChanged(["oninput"])},r}(),x=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return $(r,e),r.pluginName="Keystroke",r.prototype._init=function(){return this.editor=this._module,this._keystrokeHandlers={},this._initKeystrokeHandlers()},r.prototype.add=function(t,e,n){return t=t.toLowerCase(),t=this.editor.hotkeys.constructor.aliases[t]||t,this._keystrokeHandlers[t]||(this._keystrokeHandlers[t]={}),this._keystrokeHandlers[t][e]=n},r.prototype.respondTo=function(e){var n,r,i,o,s;if(r=null!=(i=this.editor.hotkeys.constructor.keyNameMap[e.which])?i.toLowerCase():void 0)return!!(r in this._keystrokeHandlers&&((o="function"==typeof(n=this._keystrokeHandlers[r])["*"]?n["*"](e):void 0)||this.editor.selection.startNodes().each((s=this,function(n,i){var a,l;if(i.nodeType===Node.ELEMENT_NODE)return a=null!=(l=s._keystrokeHandlers[r])?l[i.tagName.toLowerCase()]:void 0,!0!==(o="function"==typeof a?a(e,t(i)):void 0)&&!1!==o&&void 0})),o))||void 0},r.prototype._initKeystrokeHandlers=function(){var e,n;return this.editor.util.browser.safari&&this.add("enter","*",(n=this,function(e){var r,i;if(e.shiftKey&&!(r=n.editor.selection.blockNodes().last()).is("pre"))return i=t("<br/>"),n.editor.selection.rangeAtEndOf(r)?(n.editor.selection.insertNode(i),n.editor.selection.insertNode(t("<br/>")),n.editor.selection.setRangeBefore(i)):n.editor.selection.insertNode(i),!0})),(this.editor.util.browser.webkit||this.editor.util.browser.msie)&&(e=function(e){return function(n,r){var i;if(e.editor.selection.rangeAtEndOf(r))return i=t("<p/>").append(e.editor.util.phBr).insertAfter(r),e.editor.selection.setRangeAtStartOf(i),!0}}(this),this.add("enter","h1",e),this.add("enter","h2",e),this.add("enter","h3",e),this.add("enter","h4",e),this.add("enter","h5",e),this.add("enter","h6",e)),this.add("backspace","*",function(t){return function(e){var n,r,i;return(r=(i=t.editor.selection.rootNodes().first()).prev()).is("hr")&&t.editor.selection.rangeAtStartOf(i)?(t.editor.selection.save(),r.remove(),t.editor.selection.restore(),!0):(n=t.editor.selection.blockNodes().last(),t.editor.util.browser.webkit&&t.editor.selection.rangeAtStartOf(n)?(t.editor.selection.save(),t.editor.formatter.cleanNode(n,!0),t.editor.selection.restore(),null):void 0)}}(this)),this.add("enter","li",function(e){return function(n,r){var i,o,s,a;if((i=r.clone()).find("ul, ol").remove(),e.editor.util.isEmptyNode(i)&&r.is(e.editor.selection.blockNodes().last())){if(o=r.parent(),r.next("li").length>0){if(!e.editor.util.isEmptyNode(r))return;o.parent("li").length>0?(s=t("<li/>").append(e.editor.util.phBr).insertAfter(o.parent("li")),a=t("<"+o[0].tagName+"/>").append(r.nextAll("li")),s.append(a)):(s=t("<p/>").append(e.editor.util.phBr).insertAfter(o),a=t("<"+o[0].tagName+"/>").append(r.nextAll("li")),s.after(a))}else o.parent("li").length>0?(s=t("<li/>").insertAfter(o.parent("li")),r.contents().length>0?s.append(r.contents()):s.append(e.editor.util.phBr)):(s=t("<p/>").append(e.editor.util.phBr).insertAfter(o),r.children("ul, ol").length>0&&s.after(r.children("ul, ol")));return r.prev("li").length?r.remove():o.remove(),e.editor.selection.setRangeAtStartOf(s),!0}}}(this)),this.add("enter","pre",function(e){return function(n,r){var i,o,s;return n.preventDefault(),n.shiftKey?(i=t("<p/>").append(e.editor.util.phBr).insertAfter(r),e.editor.selection.setRangeAtStartOf(i),!0):(o=null,(s=e.editor.selection.range()).deleteContents(),!e.editor.util.browser.msie&&e.editor.selection.rangeAtEndOf(r)?(o=document.createTextNode("\n\n"),s.insertNode(o),s.setEnd(o,1)):(o=document.createTextNode("\n"),s.insertNode(o),s.setStartAfter(o)),s.collapse(!1),e.editor.selection.range(s),!0)}}(this)),this.add("enter","blockquote",function(t){return function(e,n){var r,i;if((r=t.editor.selection.blockNodes().last()).is("p")&&!r.next().length&&t.editor.util.isEmptyNode(r))return n.after(r),i=document.createRange(),t.editor.selection.setRangeAtStartOf(r,i),!0}}(this)),this.add("backspace","li",function(e){return function(n,r){var i,o,s,a,l,u,c,d,p;return o=r.children("ul, ol"),l=r.prev("li"),o.length>0&&l.length>0&&(p="",u=null,r.contents().each(function(e,n){return(1!==n.nodeType||!/UL|OL/.test(n.nodeName))&&(1===n.nodeType&&/BR/.test(n.nodeName)?void 0:(3===n.nodeType&&n.nodeValue?p+=n.nodeValue:1===n.nodeType&&(p+=t(n).text()),u=t(n)))}),c=e.editor.util.browser.firefox&&!u.next("br").length,u&&1===p.length&&c?(i=t(e.editor.util.phBr).insertAfter(u),u.remove(),e.editor.selection.setRangeBefore(i),!0):!(p.length>0||(d=document.createRange(),(a=l.children("ul, ol")).length>0?(s=t("<li/>").append(e.editor.util.phBr).appendTo(a),a.append(o.children("li")),r.remove(),e.editor.selection.setRangeAtEndOf(s,d)):(e.editor.selection.setRangeAtEndOf(l,d),l.append(o),r.remove(),e.editor.selection.range(d)),0)))}}(this)),this.add("backspace","pre",function(e){return function(n,r){var i,o,s;if(e.editor.selection.rangeAtStartOf(r))return o=r.html().replace("\n","<br/>")||e.editor.util.phBr,i=t("<p/>").append(o).insertAfter(r),r.remove(),s=document.createRange(),e.editor.selection.setRangeAtStartOf(i,s),!0}}(this)),this.add("backspace","blockquote",function(t){return function(e,n){var r,i;if(t.editor.selection.rangeAtStartOf(n))return r=n.children().first().unwrap(),i=document.createRange(),t.editor.selection.setRangeAtStartOf(r,i),!0}}(this))},r}(),I=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return $(r,e),r.pluginName="UndoManager",r.prototype._index=-1,r.prototype._capacity=20,r.prototype._startPosition=null,r.prototype._endPosition=null,r.prototype._init=function(){var t,e,n;return this.editor=this._module,this._stack=[],this.editor.util.os.mac?(e="cmd+z",t="shift+cmd+z"):this.editor.util.os.win?(e="ctrl+z",t="ctrl+y"):(e="ctrl+z",t="shift+ctrl+z"),this.editor.hotkeys.add(e,(n=this,function(t){return t.preventDefault(),n.undo(),!1})),this.editor.hotkeys.add(t,function(t){return function(e){return e.preventDefault(),t.redo(),!1}}(this)),this.throttledPushState=this.editor.util.throttle(function(t){return function(){return t._pushUndoState()}}(this),2e3),this.editor.on("valuechanged",function(t){return function(e,n){if("undo"!==n&&"redo"!==n)return t.throttledPushState()}}(this)),this.editor.on("selectionchanged",function(t){return function(e){return t.resetCaretPosition(),t.update()}}(this)),this.editor.on("focus",function(t){return function(e){if(0===t._stack.length)return t._pushUndoState()}}(this)),this.editor.on("blur",function(t){return function(e){return t.resetCaretPosition()}}(this))},r.prototype.resetCaretPosition=function(){return this._startPosition=null,this._endPosition=null},r.prototype.startPosition=function(){return this.editor.selection._range&&(this._startPosition||(this._startPosition=this._getPosition("start"))),this._startPosition},r.prototype.endPosition=function(){var t;return this.editor.selection._range&&(this._endPosition||(this._endPosition=(t=this,function(){return t.editor.selection.range().collapsed?t._startPosition:t._getPosition("end")})())),this._endPosition},r.prototype._pushUndoState=function(){if(!1!==this.editor.triggerHandler("pushundostate")&&this.caretPosition().start)return this._index+=1,this._stack.length=this._index,this._stack.push({html:this.editor.body.html(),caret:this.caretPosition()}),this._stack.length>this._capacity?(this._stack.shift(),this._index-=1):void 0},r.prototype.currentState=function(){return this._stack.length&&this._index>-1?this._stack[this._index]:null},r.prototype.undo=function(){var t;if(!(this._index<1||this._stack.length<2))return this.editor.hidePopover(),this._index-=1,t=this._stack[this._index],this.editor.body.get(0).innerHTML=t.html,this.caretPosition(t.caret),this.editor.body.find(".selected").removeClass("selected"),this.editor.sync(),this.editor.trigger("valuechanged",["undo"])},r.prototype.redo=function(){var t;if(!(this._index<0||this._stack.length<this._index+2))return this.editor.hidePopover(),this._index+=1,t=this._stack[this._index],this.editor.body.get(0).innerHTML=t.html,this.caretPosition(t.caret),this.editor.body.find(".selected").removeClass("selected"),this.editor.sync(),this.editor.trigger("valuechanged",["redo"])},r.prototype.update=function(){var t;if(t=this.currentState())return t.html=this.editor.body.html(),t.caret=this.caretPosition()},r.prototype._getNodeOffset=function(e,n){var r,i,o;return r=t.isNumeric(n)?t(e):t(e).parent(),o=0,i=!1,r.contents().each(function(t,r){return e!==r&&(n!==t||0!==t)&&(r.nodeType===Node.TEXT_NODE?!i&&r.nodeValue.length>0&&(o+=1,i=!0):(o+=1,i=!1),n-1!==t&&null)}),o},r.prototype._getPosition=function(e){var n,r,i,o,s,a,l;if(null==e&&(e="start"),o=this.editor.selection.range()[e+"Offset"],(r=(n=this.editor.selection[e+"Nodes"]()).first()[0]).nodeType===Node.TEXT_NODE){for(a=r.previousSibling;a&&a.nodeType===Node.TEXT_NODE;)r=a,o+=this.editor.util.getNodeLength(a),a=a.previousSibling;(i=n.get())[0]=r,n=t(i)}else o=this._getNodeOffset(r,o);return s=[o],n.each((l=this,function(t,e){return s.unshift(l._getNodeOffset(e))})),s},r.prototype._getNodeByPosition=function(e){var n,r,i,o,s,a,l,u;for(a=this.editor.body[0],i=o=0,s=(u=e.slice(0,e.length-1)).length;o<s;i=++o){if((l=u[i])>(r=a.childNodes).length-1){if(i!==e.length-2||!t(a).is("pre:empty")){a=null;break}n=document.createTextNode(""),a.appendChild(n),r=a.childNodes}a=r[l]}return a},r.prototype.caretPosition=function(t){var e,n,r,i,o;if(t){if(!t.start)return;return i=this._getNodeByPosition(t.start),o=t.start[t.start.length-1],t.collapsed?(e=i,n=o):(e=this._getNodeByPosition(t.end),n=t.start[t.start.length-1]),i&&e?((r=document.createRange()).setStart(i,o),r.setEnd(e,n),this.editor.selection.range(r)):void("undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("simditor: invalid caret state"))}return r=this.editor.selection.range(),t=this.editor.inputManager.focused&&null!=r?{start:this.startPosition(),end:this.endPosition(),collapsed:r.collapsed}:{}},r}(),j=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}var i,o,s,a,l,u,c,d,p,h,f,g;return $(r,e),r.pluginName="Util",r.prototype._init=function(){if(this.editor=this._module,this.browser.msie&&this.browser.version<11)return this.phBr=""},r.prototype.phBr="<br/>",r.prototype.os=(i={},/Mac/.test(navigator.appVersion)?i.mac=!0:/Linux/.test(navigator.appVersion)?i.linux=!0:/Win/.test(navigator.appVersion)?i.win=!0:/X11/.test(navigator.appVersion)&&(i.unix=!0),/Mobi/.test(navigator.appVersion)&&(i.mobile=!0),i),r.prototype.browser=(g=navigator.userAgent,l=/(msie|trident)/i.test(g),o=/chrome|crios/i.test(g),f=/safari/i.test(g)&&!o,a=/firefox/i.test(g),s=/edge/i.test(g),l?{msie:!0,version:1*(null!=(u=g.match(/(msie |rv:)(\d+(\.\d+)?)/i))?u[2]:void 0)}:s?{edge:!0,webkit:!0,version:1*(null!=(c=g.match(/edge\/(\d+(\.\d+)?)/i))?c[1]:void 0)}:o?{webkit:!0,chrome:!0,version:1*(null!=(d=g.match(/(?:chrome|crios)\/(\d+(\.\d+)?)/i))?d[1]:void 0)}:f?{webkit:!0,safari:!0,version:1*(null!=(p=g.match(/version\/(\d+(\.\d+)?)/i))?p[1]:void 0)}:a?{mozilla:!0,firefox:!0,version:1*(null!=(h=g.match(/firefox\/(\d+(\.\d+)?)/i))?h[1]:void 0)}:{}),r.prototype.support={onselectionchange:function(){var t;if(void 0!==(t=document.onselectionchange))try{return document.onselectionchange=0,null===document.onselectionchange}catch(e){}finally{document.onselectionchange=t}return!1}(),oninput:!/(msie|trident)/i.test(navigator.userAgent)},r.prototype.reflow=function(e){return null==e&&(e=document),t(e)[0].offsetHeight},r.prototype.metaKey=function(t){return/Mac/.test(navigator.userAgent)?t.metaKey:t.ctrlKey},r.prototype.isEmptyNode=function(e){var n;return(n=t(e)).is(":empty")||!n.text()&&!n.find(":not(br, span, div)").length},r.prototype.isDecoratedNode=function(e){return t(e).is('[class^="simditor-"]')},r.prototype.blockNodes=["div","p","ul","ol","li","blockquote","hr","pre","h1","h2","h3","h4","h5","table"],r.prototype.isBlockNode=function(e){return!(!(e=t(e)[0])||3===e.nodeType)&&new RegExp("^("+this.blockNodes.join("|")+")$").test(e.nodeName.toLowerCase())},r.prototype.getNodeLength=function(e){switch((e=t(e)[0]).nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}},r.prototype.dataURLtoBlob=function(t){var e,n,r,i,o,s,a,l,u,c,d;if(o=(s=window.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}())&&window.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,!((s||e)&&window.atob&&window.ArrayBuffer&&window.Uint8Array))return!1;for(i=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):decodeURIComponent(t.split(",")[1]),n=new ArrayBuffer(i.length),l=new Uint8Array(n),a=u=0,d=i.length;0<=d?u<=d:u>=d;a=0<=d?++u:--u)l[a]=i.charCodeAt(a);return c=t.split(",")[0].split(":")[1].split(";")[0],s?new Blob([o?l:n],{type:c}):((r=new e).append(n),r.getBlob(c))},r.prototype.throttle=function(t,e){var n,r,i,o,s,a,l;return o=0,l=0,i=n=s=null,r=function(){return l=0,o=+new Date,s=t.apply(i,n),i=null,n=null},(a=function(){var t;return i=this,n=arguments,t=new Date-o,l||(t>=e?r():l=setTimeout(r,e-t)),s}).clear=function(){if(l)return clearTimeout(l),r()},a},r.prototype.formatHTML=function(e){var n,r,i,o,s,a,l,u;for(s=/<(\/?)(.+?)(\/?)>/g,l="",i=0,r=null,a=function(t,e){return new Array(e+1).join(t)};null!==(o=s.exec(e));)o.isBlockNode=t.inArray(o[2],this.blockNodes)>-1,o.isStartTag="/"!==o[1]&&"/"!==o[3],o.isEndTag="/"===o[1]||"/"===o[3],n=r?r.index+r[0].length:0,(u=e.substring(n,o.index)).length>0&&t.trim(u)&&(l+=u),o.isBlockNode&&o.isEndTag&&!o.isStartTag&&(i-=1),o.isBlockNode&&o.isStartTag&&(r&&r.isBlockNode&&r.isEndTag||(l+="\n"),l+=a("  ",i)),l+=o[0],o.isBlockNode&&o.isEndTag&&(l+="\n"),o.isBlockNode&&o.isStartTag&&(i+=1),r=o;return t.trim(l)},r}(),P=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return $(r,e),r.pluginName="Toolbar",r.prototype.opts={toolbar:!0,toolbarFloat:!0,toolbarHidden:!1,toolbarFloatOffset:0},r.prototype._tpl={wrapper:'<div class="simditor-toolbar-wrap"><div class="simditor-toolbar"><ul></ul></div></div>',separator:'<li><span class="separator"></span></li>'},r.prototype._init=function(){var e,n,r,i;if(this.editor=this._module,this.opts.toolbar)return t.isArray(this.opts.toolbar)||(this.opts.toolbar=["bold","italic","underline","strikethrough","|","ol","ul","blockquote","code","|","link","image","|","indent","outdent"]),this._render(),this.list.on("click",function(t){return!1}),this.wrapper.on("mousedown",(i=this,function(t){return i.list.find(".menu-on").removeClass(".menu-on")})),t(document).on("mousedown.simditor"+this.editor.id,function(t){return function(e){return t.list.find(".menu-on").removeClass(".menu-on")}}(this)),!this.opts.toolbarHidden&&this.opts.toolbarFloat&&(this.wrapper.css("top",this.opts.toolbarFloatOffset),r=0,n=function(t){return function(){return t.wrapper.css("position","static"),t.wrapper.width("auto"),t.editor.util.reflow(t.wrapper),t.wrapper.width(t.wrapper.outerWidth()),t.wrapper.css("left",t.editor.util.os.mobile?t.wrapper.position().left:t.wrapper.offset().left),t.wrapper.css("position",""),r=t.wrapper.outerHeight(),t.editor.placeholderEl.css("top",r),!0}}(this),e=null,t(window).on("resize.simditor-"+this.editor.id,function(t){return e=n()}),t(window).on("scroll.simditor-"+this.editor.id,function(i){return function(o){var s,a,l;if(i.wrapper.is(":visible"))if(s=(l=i.editor.wrapper.offset().top)+i.editor.wrapper.outerHeight()-80,(a=t(document).scrollTop()+i.opts.toolbarFloatOffset)<=l||a>=s){if(i.editor.wrapper.removeClass("toolbar-floating").css("padding-top",""),i.editor.util.os.mobile)return i.wrapper.css("top",i.opts.toolbarFloatOffset)}else if(e||(e=n()),i.editor.wrapper.addClass("toolbar-floating").css("padding-top",r),i.editor.util.os.mobile)return i.wrapper.css("top",a-l+i.opts.toolbarFloatOffset)}}(this))),this.editor.on("destroy",function(t){return function(){return t.buttons.length=0}}(this)),t(document).on("mousedown.simditor-"+this.editor.id,function(t){return function(e){return t.list.find("li.menu-on").removeClass("menu-on")}}(this))},r.prototype._render=function(){var e,n,r,i;for(this.buttons=[],this.wrapper=t(this._tpl.wrapper).prependTo(this.editor.wrapper),this.list=this.wrapper.find("ul"),e=0,n=(i=this.opts.toolbar).length;e<n;e++)"|"!==(r=i[e])?this.constructor.buttons[r]?this.buttons.push(new this.constructor.buttons[r]({editor:this.editor})):console.warn("simditor: invalid toolbar button "+r):t(this._tpl.separator).appendTo(this.list);if(this.opts.toolbarHidden)return this.wrapper.hide()},r.prototype.findButton=function(t){var e;return null!=(e=this.list.find(".toolbar-item-"+t).data("button"))?e:null},r.addButton=function(t){return this.buttons[t.prototype.name]=t},r.buttons={},r}(),b=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return $(r,e),r.pluginName="Indentation",r.prototype.opts={tabIndent:!0},r.prototype._init=function(){return this.editor=this._module,this.editor.keystroke.add("tab","*",(t=this,function(e){var n;if(n=t.editor.toolbar.findButton("code"),t.opts.tabIndent||n&&n.active)return t.indent(e.shiftKey)}));var t},r.prototype.indent=function(e){var n,r,i,o;return this.editor.selection.startNodes(),this.editor.selection.endNodes(),n=this.editor.selection.blockNodes(),r=[],n=n.each(function(e,n){var i,o,s,a,l;for(i=!0,o=s=0,a=r.length;s<a;o=++s){if(l=r[o],t.contains(n,l)){i=!1;break}if(t.contains(l,n)){r.splice(o,1,n),i=!1;break}}if(i)return r.push(n)}),n=t(r),i=!1,n.each((o=this,function(t,n){var r;if(r=e?o.outdentBlock(n):o.indentBlock(n))return i=r})),i},r.prototype.indentBlock=function(e){var n,r,i,o,s,a,l,u,c,d;if((n=t(e)).length){if(n.is("pre")){if(!(a=this.editor.selection.containerNode()).is(n)&&!a.closest("pre").is(n))return;this.indentText(this.editor.selection.range())}else if(n.is("li")){if((s=n.prev("li")).length<1)return;this.editor.selection.save(),d=n.parent()[0].tagName,(r=s.children("ul, ol")).length>0?r.append(n):t("<"+d+"/>").append(n).appendTo(s),this.editor.selection.restore()}else if(n.is("p, h1, h2, h3, h4"))c=parseInt(n.css("margin-left"))||0,c=(Math.round(c/this.opts.indentWidth)+1)*this.opts.indentWidth,n.css("margin-left",c);else{if(!n.is("table")&&!n.is(".simditor-table"))return!1;if((i=(l=this.editor.selection.containerNode().closest("td, th")).next("td, th")).length>0||((o=(u=l.parent("tr")).next("tr")).length<1&&u.parent().is("thead")&&(o=u.parent("thead").next("tbody").find("tr:first")),i=o.find("td:first, th:first")),!(l.length>0&&i.length>0))return;this.editor.selection.setRangeAtEndOf(i)}return!0}},r.prototype.indentText=function(t){var e,n;return e=t.toString().replace(/^(?=.+)/gm,"  "),n=document.createTextNode(e||"  "),t.deleteContents(),t.insertNode(n),e?(t.selectNode(n),this.editor.selection.range(t)):this.editor.selection.setRangeAfter(n)},r.prototype.outdentBlock=function(e){var n,r,i,o,s,a,l,u,c,d;if((n=t(e))&&n.length>0){if(n.is("pre")){if(!(o=this.editor.selection.containerNode()).is(n)&&!o.closest("pre").is(n))return;this.outdentText(d)}else if(n.is("li"))i=(r=n.parent()).parent("li"),this.editor.selection.save(),i.length<1?((d=document.createRange()).setStartBefore(r[0]),d.setEndBefore(n[0]),r.before(d.extractContents()),t("<p/>").insertBefore(r).after(n.children("ul, ol")).append(n.contents()),n.remove()):(n.next("li").length>0&&t("<"+r[0].tagName+"/>").append(n.nextAll("li")).appendTo(n),n.insertAfter(i),r.children("li").length<1&&r.remove()),this.editor.selection.restore();else if(n.is("p, h1, h2, h3, h4"))c=parseInt(n.css("margin-left"))||0,c=Math.max(Math.round(c/this.opts.indentWidth)-1,0)*this.opts.indentWidth,n.css("margin-left",0===c?"":c);else{if(!n.is("table")&&!n.is(".simditor-table"))return!1;if((s=(l=this.editor.selection.containerNode().closest("td, th")).prev("td, th")).length>0||((a=(u=l.parent("tr")).prev("tr")).length<1&&u.parent().is("tbody")&&(a=u.parent("tbody").prev("thead").find("tr:first")),s=a.find("td:last, th:last")),!(l.length>0&&s.length>0))return;this.editor.selection.setRangeAtEndOf(s)}return!0}},r.prototype.outdentText=function(t){},r}(),u=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return $(r,e),r.pluginName="Clipboard",r.prototype.opts={pasteImage:!1,cleanPaste:!1},r.prototype._init=function(){return this.editor=this._module,this.opts.pasteImage&&"string"!=typeof this.opts.pasteImage&&(this.opts.pasteImage="inline"),this.editor.body.on("paste",(t=this,function(e){var n;if(!t.pasting&&!t._pasteBin)return!1!==t.editor.triggerHandler(e)&&(n=t.editor.selection.deleteRangeContents(),t.editor.body.html()?n.collapsed||n.collapse(!0):(t.editor.formatter.format(),t.editor.selection.setRangeAtStartOf(t.editor.body.find("p:first"))),!t._processPasteByClipboardApi(e)&&(t.editor.inputManager.throttledValueChanged.clear(),t.editor.inputManager.throttledSelectionChanged.clear(),t.editor.undoManager.throttledPushState.clear(),t.editor.selection.reset(),t.editor.undoManager.resetCaretPosition(),t.pasting=!0,t._getPasteContent(function(e){return t._processPasteContent(e),t._pasteInBlockEl=null,t._pastePlainText=null,t.pasting=!1})))}));var t},r.prototype._processPasteByClipboardApi=function(t){var e,n,r,i;if(!this.editor.util.browser.edge&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items&&t.originalEvent.clipboardData.items.length>0&&(n=t.originalEvent.clipboardData.items[0],/^image\//.test(n.type))){if(null==(e=n.getAsFile())||!this.opts.pasteImage)return;if(e.name||(e.name="Clipboard Image.png"),!1===this.editor.triggerHandler("pasting",[e]))return;return(i={})[this.opts.pasteImage]=!0,null!=(r=this.editor.uploader)&&r.upload(e,i),!0}},r.prototype._getPasteContent=function(e){var n,r;return this._pasteBin=t('<div contenteditable="true" />').addClass("simditor-paste-bin").attr("tabIndex","-1").appendTo(this.editor.el),n={html:this.editor.body.html(),caret:this.editor.undoManager.caretPosition()},this._pasteBin.focus(),setTimeout((r=this,function(){var i;return r.editor.hidePopover(),r.editor.body.get(0).innerHTML=n.html,r.editor.undoManager.caretPosition(n.caret),r.editor.body.focus(),r.editor.selection.reset(),r.editor.selection.range(),r._pasteInBlockEl=r.editor.selection.blockNodes().last(),r._pastePlainText=r.opts.cleanPaste||r._pasteInBlockEl.is("pre, table"),r._pastePlainText?i=r.editor.formatter.clearHtml(r._pasteBin.html(),!0):((i=t("<div/>").append(r._pasteBin.contents())).find("style").remove(),i.find("table colgroup").remove(),r._cleanPasteFontSize(i),r.editor.formatter.format(i),r.editor.formatter.decorate(i),r.editor.formatter.beautify(i.children()),i=i.contents()),r._pasteBin.remove(),r._pasteBin=null,e(i)}),0)},r.prototype._processPasteContent=function(e){var n,r,i,o,s,a,l,u,c,d,p,h,f,g,m,y,v,b,_,w,x,k,T,S,C,N;if(!1!==this.editor.triggerHandler("pasting",[e])&&(n=this._pasteInBlockEl,e)){if(this._pastePlainText)if(n.is("table")){for(d=(v=e.split("\n")).pop(),u=0,p=v.length;u<p;u++)y=v[u],this.editor.selection.insertNode(document.createTextNode(y)),this.editor.selection.insertNode(t("<br/>"));this.editor.selection.insertNode(document.createTextNode(d))}else for(c=0,h=(k=(e=t("<div/>").text(e)).contents()).length;c<h;c++)_=k[c],this.editor.selection.insertNode(t(_)[0]);else if(n.is(this.editor.body))for(b=0,f=e.length;b<f;b++)_=e[b],this.editor.selection.insertNode(_);else{if(e.length<1)return;if(1===e.length)if(e.is("p")){if(1===(o=e.contents()).length&&o.is("img")){if(/^data:image/.test((r=o).attr("src"))){if(!this.opts.pasteImage)return;return(i=this.editor.util.dataURLtoBlob(r.attr("src"))).name="Clipboard Image.png",(C={})[this.opts.pasteImage]=!0,void(null!=(T=this.editor.uploader)&&T.upload(i,C))}if(new RegExp("^blob:"+location.origin+"/").test(r.attr("src"))){if(!this.opts.pasteImage)return;return(C={})[this.opts.pasteImage]=!0,s=this.editor.util.dataURLtoBlob,N=this.editor.uploader,(a=new Image).onload=function(){var t;(t=document.createElement("canvas")).width=a.naturalWidth,t.height=a.naturalHeight,t.getContext("2d").drawImage(a,0,0),(i=s(t.toDataURL("image/png"))).name="Clipboard Image.png",null!==N&&N.upload(i,C)},void(a.src=r.attr("src"))}if(r.is('img[src^="webkit-fake-url://"]'))return}for(w=0,g=o.length;w<g;w++)_=o[w],this.editor.selection.insertNode(_)}else if(n.is("p")&&this.editor.util.isEmptyNode(n))n.replaceWith(e),this.editor.selection.setRangeAtEndOf(e);else if(e.is("ul, ol"))if(1===e.find("li").length)for(x=0,m=(S=(e=t("<div/>").text(e.text())).contents()).length;x<m;x++)_=S[x],this.editor.selection.insertNode(t(_)[0]);else n.is("li")?(n.parent().after(e),this.editor.selection.setRangeAtEndOf(e)):(n.after(e),this.editor.selection.setRangeAtEndOf(e));else n.after(e),this.editor.selection.setRangeAtEndOf(e);else n.is("li")&&(n=n.parent()),this.editor.selection.rangeAtStartOf(n)?l="before":this.editor.selection.rangeAtEndOf(n)?l="after":(this.editor.selection.breakBlockEl(n),l="before"),n[l](e),this.editor.selection.setRangeAtEndOf(e.last())}return this.editor.inputManager.throttledValueChanged()}},r.prototype._cleanPasteFontSize=function(e){var n,r;if((n=t(e)).length>0)return r=["1.5em","1.25em","0.75em","0.5em"],n.find('[style*="font-size"]').map(function(e,n){var i;if(i=t(n),t.inArray(i.css("font-size"),r)<0)return i.css("font-size","")})},r}(),(E=function(i){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,e),o.connect(j),o.connect(_),o.connect(R),o.connect(I),o.connect(x),o.connect(f),o.connect(P),o.connect(b),o.connect(u),o.count=0,o.prototype.opts={textarea:null,placeholder:"",defaultImage:"images/image.png",params:{},upload:!1,indentWidth:40},o.prototype._init=function(){var e,i,s;if(this.textarea=t(this.opts.textarea),this.opts.placeholder=this.opts.placeholder||this.textarea.attr("placeholder"),!this.textarea.length)throw new Error("simditor: param textarea is required.");if(null!=(e=this.textarea.data("simditor"))&&e.destroy(),this.id=++o.count,this._render(),!n)throw new Error("simditor: simple-hotkeys is required.");if(this.hotkeys=n({el:this.body}),this.opts.upload&&r&&(i="object"==typeof this.opts.upload?this.opts.upload:{},this.uploader=r(i)),this.on("initialized",(s=this,function(){if(s.opts.placeholder&&s.on("valuechanged",function(){return s._placeholder()}),s.setValue(s.textarea.val().trim()||""),s.textarea.attr("autofocus"))return s.focus()})),this.util.browser.mozilla){this.util.reflow();try{return document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)}catch(a){}}},o.prototype._tpl='<div class="simditor">\n  <div class="simditor-wrapper">\n    <div class="simditor-placeholder"></div>\n    <div class="simditor-body" contenteditable="true">\n    </div>\n  </div>\n</div>',o.prototype._render=function(){var e,n,r,i;if(this.el=t(this._tpl).insertBefore(this.textarea),this.wrapper=this.el.find(".simditor-wrapper"),this.body=this.wrapper.find(".simditor-body"),this.placeholderEl=this.wrapper.find(".simditor-placeholder").append(this.opts.placeholder),this.el.data("simditor",this),this.wrapper.append(this.textarea),this.textarea.data("simditor",this).blur(),this.body.attr("tabindex",this.textarea.attr("tabindex")),this.util.os.mac?this.el.addClass("simditor-mac"):this.util.os.linux&&this.el.addClass("simditor-linux"),this.util.os.mobile&&this.el.addClass("simditor-mobile"),this.opts.params){for(e in r=[],n=this.opts.params)i=n[e],r.push(t("<input/>",{type:"hidden",name:e,value:i}).insertAfter(this.textarea));return r}},o.prototype._placeholder=function(){var t;return 0===(t=this.body.children()).length||1===t.length&&this.util.isEmptyNode(t)&&parseInt(t.css("margin-left")||0)<this.opts.indentWidth?this.placeholderEl.show():this.placeholderEl.hide()},o.prototype.setValue=function(t){return this.hidePopover(),this.textarea.val(t),this.body.get(0).innerHTML=t,this.formatter.format(),this.formatter.decorate(),this.util.reflow(this.body),this.inputManager.lastCaretPosition=null,this.trigger("valuechanged")},o.prototype.getValue=function(){return this.sync()},o.prototype.sync=function(){var e,n,r,i,o,s;for(n=this.body.clone(),this.formatter.undecorate(n),this.formatter.format(n),this.formatter.autolink(n),o=(e=n.children()).last("p"),i=e.first("p");o.is("p")&&this.util.isEmptyNode(o);)r=o,o=o.prev("p"),r.remove();for(;i.is("p")&&this.util.isEmptyNode(i);)r=i,i=o.next("p"),r.remove();return n.find("img.uploading").remove(),s=t.trim(n.html()),this.textarea.val(s),s},o.prototype.focus=function(){var e,n;if(this.body.is(":visible")&&this.body.is("[contenteditable]"))return this.inputManager.lastCaretPosition?(this.undoManager.caretPosition(this.inputManager.lastCaretPosition),this.inputManager.lastCaretPosition=null):((e=this.body.children().last()).is("p")||(e=t("<p/>").append(this.util.phBr).appendTo(this.body)),n=document.createRange(),this.selection.setRangeAtEndOf(e,n));this.el.find("textarea:visible").focus()},o.prototype.blur=function(){return this.body.is(":visible")&&this.body.is("[contenteditable]")?this.body.blur():this.body.find("textarea:visible").blur()},o.prototype.hidePopover=function(){return this.el.find(".simditor-popover").each(function(e,n){if((n=t(n).data("popover")).active)return n.hide()})},o.prototype.destroy=function(){return this.triggerHandler("destroy"),this.textarea.closest("form").off(".simditor .simditor-"+this.id),this.selection.clear(),this.inputManager.focused=!1,this.textarea.insertBefore(this.el).hide().val("").removeData("simditor"),this.el.remove(),t(document).off(".simditor-"+this.id),t(window).off(".simditor-"+this.id),this.off()},o}()).i18n={"zh-CN":{blockquote:"引用",bold:"加粗文字",code:"插入代码",color:"文字颜色",coloredText:"彩色文字",hr:"分隔线",image:"插入图片",externalImage:"外链图片",uploadImage:"上传图片",uploadFailed:"上传失败了",uploadError:"上传出错了",imageUrl:"图片地址",imageSize:"图片尺寸",imageAlt:"图片描述",restoreImageSize:"还原图片尺寸",uploading:"正在上传",indent:"向右缩进",outdent:"向左缩进",italic:"斜体文字",link:"插入链接",linkTextTitle:"添加链接",linkText:"链接名称",linkUrl:"链接地址",linkUrlSubmit:"确定",linkTarget:"打开方式",openLinkInCurrentWindow:"在当前窗口中打开",openLinkInNewWindow:"在新窗口中打开",removeLink:"移除链接",ol:"有序列表",ul:"无序列表",strikethrough:"删除线文字",table:"表格",deleteRow:"删除行",insertRowAbove:"在上面插入行",insertRowBelow:"在下面插入行",deleteColumn:"删除列",insertColumnLeft:"在左边插入列",insertColumnRight:"在右边插入列",deleteTable:"删除表格",title:"标题",normalText:"普通文本",underline:"下划线文字",alignment:"水平对齐",alignCenter:"居中",alignLeft:"居左",alignRight:"居右",selectLanguage:"选择程序语言",fontScale:"字体大小",fontScaleXLarge:"超大字体",fontScaleLarge:"大号字体",fontScaleNormal:"正常大小",fontScaleSmall:"小号字体",fontScaleXSmall:"超小字体"},"en-US":{blockquote:"Block Quote",bold:"Bold",code:"Code",color:"Text Color",coloredText:"Colored Text",hr:"Horizontal Line",image:"Insert Image",externalImage:"External Image",uploadImage:"Upload Image",uploadFailed:"Upload failed",uploadError:"Error occurs during upload",imageUrl:"Url",imageSize:"Size",imageAlt:"Alt",restoreImageSize:"Restore Origin Size",uploading:"Uploading",indent:"Indent",outdent:"Outdent",italic:"Italic",link:"Insert Link",linkTextTitle:"Add Link",linkText:"Link Name",linkUrl:"Link Url",linkUrlSubmit:"Confirm",linkTarget:"Target",openLinkInCurrentWindow:"Open link in current window",openLinkInNewWindow:"Open link in new window",removeLink:"Remove Link",ol:"Ordered List",ul:"Unordered List",strikethrough:"Strikethrough",table:"Table",deleteRow:"Delete Row",insertRowAbove:"Insert Row Above",insertRowBelow:"Insert Row Below",deleteColumn:"Delete Column",insertColumnLeft:"Insert Column Left",insertColumnRight:"Insert Column Right",deleteTable:"Delete Table",title:"Title",normalText:"Text",underline:"Underline",alignment:"Alignment",alignCenter:"Align Center",alignLeft:"Align Left",alignRight:"Align Right",selectLanguage:"Select Language",fontScale:"Font Size",fontScaleXLarge:"X Large Size",fontScaleLarge:"Large Size",fontScaleNormal:"Normal Size",fontScaleSmall:"Small Size",fontScaleXSmall:"X Small Size"}},l=function(n){function r(t){this.editor=t.editor,this.title=this._t(this.name),r.__super__.constructor.call(this,t)}return $(r,e),r.prototype._tpl={item:'<li><a tabindex="-1" unselectable="on" class="toolbar-item"><span></span></a></li>',menuWrapper:'<div class="toolbar-menu"></div>',menuItem:'<li><a tabindex="-1" unselectable="on" class="menu-item"><span></span></a></li>',separator:'<li><span class="separator"></span></li>'},r.prototype.name="",r.prototype.icon="",r.prototype.title="",r.prototype.text="",r.prototype.htmlTag="",r.prototype.disableTag="",r.prototype.menu=!1,r.prototype.active=!1,r.prototype.disabled=!1,r.prototype.needFocus=!0,r.prototype.shortcut=null,r.prototype._init=function(){var e,n,r,i,o;for(this.render(),this.el.on("mousedown",(o=this,function(t){var e,n;return t.preventDefault(),e=o.needFocus&&!o.editor.inputManager.focused,!o.el.hasClass("disabled")&&(e&&o.editor.focus(),o.menu?(o.wrapper.toggleClass("menu-on").siblings("li").removeClass("menu-on"),o.wrapper.is(".menu-on")&&(o.menuWrapper.offset().left+o.menuWrapper.outerWidth()+5-o.editor.wrapper.offset().left-o.editor.wrapper.outerWidth()>0&&o.menuWrapper.css({left:"auto",right:0}),o.trigger("menuexpand")),!1):(n=o.el.data("param"),o.command(n),!1))})),this.wrapper.on("click","a.menu-item",function(e){return function(n){var r,i,o;return n.preventDefault(),r=t(n.currentTarget),e.wrapper.removeClass("menu-on"),i=e.needFocus&&!e.editor.inputManager.focused,!r.hasClass("disabled")&&!i&&(e.editor.toolbar.wrapper.removeClass("menu-on"),o=r.data("param"),e.command(o),!1)}}(this)),this.wrapper.on("mousedown","a.menu-item",function(t){return!1}),this.editor.on("blur",function(t){return function(){if(t.editor.body.is(":visible")&&t.editor.body.is("[contenteditable]")&&!t.editor.clipboard.pasting)return t.setActive(!1),t.setDisabled(!1)}}(this)),null!=this.shortcut&&this.editor.hotkeys.add(this.shortcut,function(t){return function(e){return t.el.mousedown(),!1}}(this)),e=0,n=(r=this.htmlTag.split(",")).length;e<n;e++)i=r[e],(i=t.trim(i))&&t.inArray(i,this.editor.formatter._allowedTags)<0&&this.editor.formatter._allowedTags.push(i);return this.editor.on("selectionchanged",function(t){return function(e){if(t.editor.inputManager.focused)return t._status()}}(this))},r.prototype.iconClassOf=function(t){return t?"simditor-icon simditor-icon-"+t:""},r.prototype.setIcon=function(t){return this.el.find("span").removeClass().addClass(this.iconClassOf(t)).text(this.text)},r.prototype.render=function(){if(this.wrapper=t(this._tpl.item).appendTo(this.editor.toolbar.list),this.el=this.wrapper.find("a.toolbar-item"),this.el.attr("title",this.title).addClass("toolbar-item-"+this.name).data("button",this),this.setIcon(this.icon),this.menu)return this.menuWrapper=t(this._tpl.menuWrapper).appendTo(this.wrapper),this.menuWrapper.addClass("toolbar-menu-"+this.name),this.renderMenu()},r.prototype.renderMenu=function(){var e,n,r,i,o,s,a;if(t.isArray(this.menu)){for(this.menuEl=t("<ul/>").appendTo(this.menuWrapper),a=[],n=0,r=(o=this.menu).length;n<r;n++)"|"!==(i=o[n])?(e=t(this._tpl.menuItem).appendTo(this.menuEl).find("a.menu-item").attr({title:null!=(s=i.title)?s:i.text,"data-param":i.param}).addClass("menu-item-"+i.name),i.icon?a.push(e.find("span").addClass(this.iconClassOf(i.icon))):a.push(e.find("span").text(i.text))):t(this._tpl.separator).appendTo(this.menuEl);return a}},r.prototype.setActive=function(t){if(t!==this.active)return this.active=t,this.el.toggleClass("active",this.active)},r.prototype.setDisabled=function(t){if(t!==this.disabled)return this.disabled=t,this.el.toggleClass("disabled",this.disabled)},r.prototype._disableStatus=function(){var t,e,n;return n=this.editor.selection.startNodes(),e=this.editor.selection.endNodes(),t=n.filter(this.disableTag).length>0||e.filter(this.disableTag).length>0,this.setDisabled(t),this.disabled&&this.setActive(!1),this.disabled},r.prototype._activeStatus=function(){var t,e,n,r,i;return i=this.editor.selection.startNodes(),n=this.editor.selection.endNodes(),r=i.filter(this.htmlTag),e=n.filter(this.htmlTag),t=r.length>0&&e.length>0&&r.is(e),this.node=t?r:null,this.setActive(t),this.active},r.prototype._status=function(){if(this._disableStatus(),!this.disabled)return this._activeStatus()},r.prototype.command=function(t){},r.prototype._t=function(){var t,e,n;return t=1<=arguments.length?U.call(arguments,0):[],(n=r.__super__._t.apply(this,t))||(n=(e=this.editor)._t.apply(e,t)),n},r}(),E.Button=l,A=function(n){function r(t){this.button=t.button,this.editor=t.button.editor,r.__super__.constructor.call(this,t)}return $(r,e),r.prototype.offset={top:4,left:0},r.prototype.target=null,r.prototype.active=!1,r.prototype._init=function(){var e;return this.el=t('<div class="simditor-popover"></div>').appendTo(this.editor.el).data("popover",this),this.render(),this.el.on("mouseenter",(e=this,function(t){return e.el.addClass("hover")})),this.el.on("mouseleave",function(t){return function(e){return t.el.removeClass("hover")}}(this))},r.prototype.render=function(){},r.prototype._initLabelWidth=function(){var e,n;if((e=this.el.find(".settings-field")).length>0)return this._labelWidth=0,e.each((n=this,function(e,r){var i;if((i=t(r).find("label")).length>0)return n._labelWidth=Math.max(n._labelWidth,i.width())})),e.find("label").width(this._labelWidth)},r.prototype.show=function(e,n){if(null==n&&(n="bottom"),null!=e)return this.el.siblings(".simditor-popover").each(function(e,n){if((n=t(n).data("popover")).active)return n.hide()}),this.active&&this.target&&this.target.removeClass("selected"),this.target=e.addClass("selected"),this.active?(this.refresh(n),this.trigger("popovershow")):(this.active=!0,this.el.css({left:-9999}).show(),this._labelWidth||this._initLabelWidth(),this.editor.util.reflow(),this.refresh(n),this.trigger("popovershow"))},r.prototype.hide=function(){if(this.active)return this.target&&this.target.removeClass("selected"),this.target=null,this.active=!1,this.el.hide(),this.trigger("popoverhide")},r.prototype.refresh=function(t){var e,n,r,i,o,s;if(null==t&&(t="bottom"),this.active)return e=this.editor.el.offset(),o=this.target.offset(),i=this.target.outerHeight(),"bottom"===t?s=o.top-e.top+i:"top"===t&&(s=o.top-e.top-this.el.height()),r=this.editor.wrapper.width()-this.el.outerWidth()-10,n=Math.min(o.left-e.left,r),this.el.css({top:s+this.offset.top,left:n+this.offset.left})},r.prototype.destroy=function(){return this.target=null,this.active=!1,this.editor.off(".linkpopover"),this.el.remove()},r.prototype._t=function(){var t,e,n;return t=1<=arguments.length?U.call(arguments,0):[],(n=r.__super__._t.apply(this,t))||(n=(e=this.button)._t.apply(e,t)),n},r}(),E.Popover=A,L=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.name="title",n.prototype.htmlTag="h1, h2, h3, h4, h5",n.prototype.disableTag="pre, table, ol, li",n.prototype._init=function(){return this.menu=[{name:"normal",text:this._t("normalText"),param:"p"},"|",{name:"h1",text:this._t("title")+" 1",param:"h1"},{name:"h2",text:this._t("title")+" 2",param:"h2"},{name:"h3",text:this._t("title")+" 3",param:"h3"},{name:"h4",text:this._t("title")+" 4",param:"h4"},{name:"h5",text:this._t("title")+" 5",param:"h5"}],n.__super__._init.call(this)},n.prototype.setActive=function(t,e){if(n.__super__.setActive.call(this,t),t&&(e||(e=this.node[0].tagName.toLowerCase())),this.el.removeClass("active-p active-h1 active-h2 active-h3 active-h4 active-h5"),t)return this.el.addClass("active active-"+e)},n.prototype.command=function(e){var n,r;return n=this.editor.selection.rootNodes(),this.editor.selection.save(),n.each((r=this,function(n,i){var o;if(!((o=t(i)).is("blockquote")||o.is(e)||o.is(r.disableTag)||r.editor.util.isDecoratedNode(o)))return t("<"+e+"/>").append(o.contents()).replaceAll(o)})),this.editor.selection.restore(),this.editor.trigger("valuechanged")},n}(),E.Toolbar.addButton(L),h=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.name="fontScale",n.prototype.icon="font",n.prototype.disableTag="pre",n.prototype.htmlTag="span",n.prototype.sizeMap={"x-large":"1.5em",large:"1.25em",small:".75em","x-small":".5em"},n.prototype._init=function(){return this.menu=[{name:"150%",text:this._t("fontScaleXLarge"),param:"5"},{name:"125%",text:this._t("fontScaleLarge"),param:"4"},{name:"100%",text:this._t("fontScaleNormal"),param:"3"},{name:"75%",text:this._t("fontScaleSmall"),param:"2"},{name:"50%",text:this._t("fontScaleXSmall"),param:"1"}],n.__super__._init.call(this)},n.prototype._activeStatus=function(){var t,e,n,r,i;return this.editor.selection.range(),i=this.editor.selection.startNodes(),n=this.editor.selection.endNodes(),r=i.filter('span[style*="font-size"]'),e=n.filter('span[style*="font-size"]'),t=i.length>0&&n.length>0&&r.is(e),this.setActive(t),this.active},n.prototype.command=function(e){var n,r,i;if(!(r=this.editor.selection.range()).collapsed)return this.editor.selection.range(r),document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,e),document.execCommand("styleWithCSS",!1,!1),this.editor.selection.reset(),this.editor.selection.range(),((n=this.editor.selection.containerNode())[0].nodeType===Node.TEXT_NODE?n.closest('span[style*="font-size"]'):n.find('span[style*="font-size"]')).each((i=this,function(e,n){var r,o;return r=t(n),o=n.style.fontSize,/large|x-large|small|x-small/.test(o)?r.css("fontSize",i.sizeMap[o]):"medium"===o?r.replaceWith(r.contents()):void 0})),this.editor.trigger("valuechanged")},n}(),E.Toolbar.addButton(h),a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.name="bold",n.prototype.icon="bold",n.prototype.htmlTag="b, strong",n.prototype.disableTag="pre",n.prototype.shortcut="cmd+b",n.prototype._init=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + b )":(this.title=this.title+" ( Ctrl + b )",this.shortcut="ctrl+b"),n.__super__._init.call(this)},n.prototype._activeStatus=function(){var t;return t=!0===document.queryCommandState("bold"),this.setActive(t),this.active},n.prototype.command=function(){return document.execCommand("bold"),this.editor.util.support.oninput||this.editor.trigger("valuechanged"),t(document).trigger("selectionchange")},n}(),E.Toolbar.addButton(a),w=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.name="italic",n.prototype.icon="italic",n.prototype.htmlTag="i",n.prototype.disableTag="pre",n.prototype.shortcut="cmd+i",n.prototype._init=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + i )":(this.title=this.title+" ( Ctrl + i )",this.shortcut="ctrl+i"),n.__super__._init.call(this)},n.prototype._activeStatus=function(){var t;return t=!0===document.queryCommandState("italic"),this.setActive(t),this.active},n.prototype.command=function(){return document.execCommand("italic"),this.editor.util.support.oninput||this.editor.trigger("valuechanged"),t(document).trigger("selectionchange")},n}(),E.Toolbar.addButton(w),M=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.name="underline",n.prototype.icon="underline",n.prototype.htmlTag="u",n.prototype.disableTag="pre",n.prototype.shortcut="cmd+u",n.prototype.render=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + u )":(this.title=this.title+" ( Ctrl + u )",this.shortcut="ctrl+u"),n.__super__.render.call(this)},n.prototype._activeStatus=function(){var t;return t=!0===document.queryCommandState("underline"),this.setActive(t),this.active},n.prototype.command=function(){return document.execCommand("underline"),this.editor.util.support.oninput||this.editor.trigger("valuechanged"),t(document).trigger("selectionchange")},n}(),E.Toolbar.addButton(M),p=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.name="color",n.prototype.icon="tint",n.prototype.disableTag="pre",n.prototype.menu=!0,n.prototype.render=function(){var t;return t=1<=arguments.length?U.call(arguments,0):[],n.__super__.render.apply(this,t)},n.prototype.renderMenu=function(){return t('<ul class="color-list">\n  <li><a class="font-color font-color-1"></a></li>\n  <li><a class="font-color font-color-2"></a></li>\n  <li><a class="font-color font-color-3"></a></li>\n  <li><a class="font-color font-color-4"></a></li>\n  <li><a class="font-color font-color-5"></a></li>\n  <li><a class="font-color font-color-6"></a></li>\n  <li><a class="font-color font-color-7"></a></li>\n  <li><a class="font-color font-color-default"></a></li>\n</ul>').appendTo(this.menuWrapper),this.menuWrapper.on("mousedown",".color-list",function(t){return!1}),this.menuWrapper.on("click",".font-color",(e=this,function(n){var r,i,o,s,a,l;if(e.wrapper.removeClass("menu-on"),(r=t(n.currentTarget)).hasClass("font-color-default")){if(!((i=e.editor.body.children()).length>0))return;a=window.getComputedStyle(i[0],null).getPropertyValue("color"),o=e._convertRgbToHex(a)}else a=window.getComputedStyle(r[0],null).getPropertyValue("background-color"),o=e._convertRgbToHex(a);if(o)return s=e.editor.selection.range(),!r.hasClass("font-color-default")&&s.collapsed&&(l=document.createTextNode(e._t("coloredText")),s.insertNode(l),s.selectNodeContents(l)),e.editor.selection.range(s),document.execCommand("styleWithCSS",!1,!0),document.execCommand("foreColor",!1,o),document.execCommand("styleWithCSS",!1,!1),e.editor.util.support.oninput?void 0:e.editor.trigger("valuechanged")}));var e},n.prototype._convertRgbToHex=function(t){var e,n,r,i,o;return(e=/rgb\((\d+),\s?(\d+),\s?(\d+)\)/g.exec(t))?(n=1*e[1],r=1*e[2],i=1*e[3],"#"+(o=function(t){var e;return 1===(e=t.toString(16)).length?"0"+e:e})(n)+o(r)+o(i)):""},n}(),E.Toolbar.addButton(p),S=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.type="",n.prototype.disableTag="pre, table",n.prototype.command=function(e){var n,r,i,o;return r=this.editor.selection.blockNodes(),i="ul"===this.type?"ol":"ul",this.editor.selection.save(),n=null,r.each((o=this,function(e,r){var s;if(!((s=t(r)).is("blockquote, li")||s.is(o.disableTag)||o.editor.util.isDecoratedNode(s))&&t.contains(document,r))return s.is(o.type)?(s.children("li").each(function(e,n){return t(n).children("ul, ol").insertAfter(s),t("<p/>").append(t(n).html()||o.editor.util.phBr).insertBefore(s)}),s.remove()):s.is(i)?t("<"+o.type+"/>").append(s.contents()).replaceAll(s):n&&s.prev().is(n)?(t("<li/>").append(s.html()||o.editor.util.phBr).appendTo(n),s.remove()):((n=t("<"+o.type+"><li></li></"+o.type+">")).find("li").append(s.html()||o.editor.util.phBr),n.replaceAll(s))})),this.editor.selection.restore(),this.editor.trigger("valuechanged")},n}(),C=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $(e,S),e.prototype.type="ol",e.prototype.name="ol",e.prototype.icon="list-ol",e.prototype.htmlTag="ol",e.prototype.shortcut="cmd+/",e.prototype._init=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + / )":(this.title=this.title+" ( ctrl + / )",this.shortcut="ctrl+/"),e.__super__._init.call(this)},e}(),z=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $(e,S),e.prototype.type="ul",e.prototype.name="ul",e.prototype.icon="list-ul",e.prototype.htmlTag="ul",e.prototype.shortcut="cmd+.",e.prototype._init=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + . )":(this.title=this.title+" ( Ctrl + . )",this.shortcut="ctrl+."),e.__super__._init.call(this)},e}(),E.Toolbar.addButton(C),E.Toolbar.addButton(z),s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.name="blockquote",n.prototype.icon="quote-left",n.prototype.htmlTag="blockquote",n.prototype.disableTag="pre, table",n.prototype.command=function(){var e,n,r,i;return e=(e=this.editor.selection.rootNodes()).filter(function(e,n){return!t(n).parent().is("blockquote")}),this.editor.selection.save(),r=[],i=this,n=function(){if(r.length>0)return t("<"+i.htmlTag+"/>").insertBefore(r[0]).append(r),r.length=0},e.each(function(e){return function(i,o){var s;if((s=t(o)).parent().is(e.editor.body))return s.is(e.htmlTag)?(n(),s.children().unwrap()):s.is(e.disableTag)||e.editor.util.isDecoratedNode(s)?n():r.push(o)}}(this)),n(),this.editor.selection.restore(),this.editor.trigger("valuechanged")},n}(),E.Toolbar.addButton(s),c=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.name="code",n.prototype.icon="code",n.prototype.htmlTag="pre",n.prototype.disableTag="ul, ol, table",n.prototype._init=function(){var e;return n.__super__._init.call(this),this.editor.on("decorate",(e=this,function(n,r){return r.find("pre").each(function(n,r){return e.decorate(t(r))})})),this.editor.on("undecorate",function(e){return function(n,r){return r.find("pre").each(function(n,r){return e.undecorate(t(r))})}}(this))},n.prototype.render=function(){var t;return t=1<=arguments.length?U.call(arguments,0):[],n.__super__.render.apply(this,t),this.popover=new d({button:this})},n.prototype._checkMode=function(){var e;return e=this.editor.selection.range(),t(e.cloneContents()).find(this.editor.util.blockNodes.join(","))>0||e.collapsed&&0===this.editor.selection.startNodes().filter("code").length?(this.inlineMode=!1,this.htmlTag="pre"):(this.inlineMode=!0,this.htmlTag="code")},n.prototype._status=function(){if(this._checkMode(),n.__super__._status.call(this),!this.inlineMode)return this.active?this.popover.show(this.node):this.popover.hide()},n.prototype.decorate=function(t){var e,n,r,i;if((e=t.find("> code")).length>0&&(n=null!=(r=e.attr("class"))&&null!=(i=r.match(/lang-(\S+)/))?i[1]:void 0,e.contents().unwrap(),n))return t.attr("data-lang",n)},n.prototype.undecorate=function(e){var n,r;return r=e.attr("data-lang"),n=t("<code/>"),r&&-1!==r&&n.addClass("lang-"+r),e.wrapInner(n).removeAttr("data-lang")},n.prototype.command=function(){return this.inlineMode?this._inlineCommand():this._blockCommand()},n.prototype._blockCommand=function(){var e,n,r,i,o;return e=this.editor.selection.rootNodes(),r=[],i=[],o=this,n=function(){var e;if(r.length>0)return e=t("<"+o.htmlTag+"/>").insertBefore(r[0]).text(o.editor.formatter.clearHtml(r)),i.push(e[0]),r.length=0},e.each(function(e){return function(o,s){var a,l;return(a=t(s)).is(e.htmlTag)?(n(),l=t("<p/>").append(a.html().replace("\n","<br/>")).replaceAll(a),i.push(l[0])):a.is(e.disableTag)||e.editor.util.isDecoratedNode(a)||a.is("blockquote")?n():r.push(s)}}(this)),n(),this.editor.selection.setRangeAtEndOf(t(i).last()),this.editor.trigger("valuechanged")},n.prototype._inlineCommand=function(){var e,n,r;return r=this.editor.selection.range(),this.active?(r.selectNodeContents(this.node[0]),this.editor.selection.save(r),this.node.contents().unwrap(),this.editor.selection.restore()):(n=t(r.extractContents()),e=t("<"+this.htmlTag+"/>").append(n.contents()),r.insertNode(e[0]),r.selectNodeContents(e[0]),this.editor.selection.range(r)),this.editor.trigger("valuechanged")},n}(),d=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,A),n.prototype.render=function(){var e,n,r,i,o;for(this._tpl='<div class="code-settings">\n  <div class="settings-field">\n    <select class="select-lang">\n      <option value="-1">'+this._t("selectLanguage")+"</option>\n    </select>\n  </div>\n</div>",this.langs=this.editor.opts.codeLanguages||[{name:"Bash",value:"bash"},{name:"C++",value:"c++"},{name:"C#",value:"cs"},{name:"CSS",value:"css"},{name:"Erlang",value:"erlang"},{name:"Less",value:"less"},{name:"Sass",value:"sass"},{name:"Diff",value:"diff"},{name:"CoffeeScript",value:"coffeescript"},{name:"HTML,XML",value:"html"},{name:"JSON",value:"json"},{name:"Java",value:"java"},{name:"JavaScript",value:"js"},{name:"Markdown",value:"markdown"},{name:"Objective C",value:"oc"},{name:"PHP",value:"php"},{name:"Perl",value:"parl"},{name:"Python",value:"python"},{name:"Ruby",value:"ruby"},{name:"SQL",value:"sql"}],this.el.addClass("code-popover").append(this._tpl),this.selectEl=this.el.find(".select-lang"),e=0,r=(i=this.langs).length;e<r;e++)n=i[e],t("<option/>",{text:n.name,value:n.value}).appendTo(this.selectEl);return this.selectEl.on("change",(o=this,function(t){var e;return o.lang=o.selectEl.val(),e=o.target.hasClass("selected"),o.target.removeClass().removeAttr("data-lang"),-1!==o.lang&&o.target.attr("data-lang",o.lang),e&&o.target.addClass("selected"),o.editor.trigger("valuechanged")})),this.editor.on("valuechanged",function(t){return function(e){if(t.active)return t.refresh()}}(this))},n.prototype.show=function(){var t;return t=1<=arguments.length?U.call(arguments,0):[],n.__super__.show.apply(this,t),this.lang=this.target.attr("data-lang"),null!=this.lang?this.selectEl.val(this.lang):this.selectEl.val(-1)},n}(),E.Toolbar.addButton(c),k=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.name="link",n.prototype.icon="link",n.prototype.htmlTag="a",n.prototype.disableTag="pre",n.prototype.render=function(){var t;return t=1<=arguments.length?U.call(arguments,0):[],n.__super__.render.apply(this,t),this.popover=new T({button:this})},n.prototype._status=function(){var t;return n.__super__._status.call(this),this.active&&(null!=(t=this.node)?t.is("[rel=nofollow]"):void 0)?this.setLink():this.active&&!this.editor.selection.rangeAtEndOf(this.node)?(this.popover.show(this.node),""!==this.node.attr("href")?this.popoverStatus=3:this.withLinkText?this.popoverStatus=2:this.popoverStatus=1):this.popover.hide()},n.prototype.command=function(){var e,n,r,i,o,s;return i=this.editor.selection.range(),this.active?(o=document.createTextNode(this.node.text()),this.node.replaceWith(o),i.selectNode(o)):(e=t(i.extractContents()),r=this.editor.formatter.clearHtml(e.contents(),!1),this.$link=t("<a/>",{href:"",target:"_blank",text:r||this._t("linkText")}),this.editor.selection.blockNodes().length>0?i.insertNode(this.$link[0]):(n=t("<p/>").append(this.$link),i.insertNode(n[0])),i.selectNodeContents(this.$link[0]),this.popover.one("popovershow",(s=this,function(){return r?(s.popover.urlEl.focus(),s.popover.urlEl[0].select(),s.withLinkText=!0):(s.popover.textEl.focus(),s.popover.textEl[0].select(),s.withLinkText=!1)}))),this.editor.selection.range(i),this.editor.trigger("valuechanged")},n.prototype.setLink=function(){var t;if(t=this.node.text(),this.node.attr("href")!==t)return t&&!/https?:\/\/|^\//gi.test(t)&&(t="http://"+t),this.node.attr("href",t)},n}(),T=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,A),n.prototype.render=function(){var e,n;return e='<div class="popover link-settings">\n  <header class="popover-header">\n    <h3 class="popover-title">'+this._t("linkTextTitle")+'</h3>\n    <a class="popover-close-handler icon icon-remove"></a>\n  </header>\n  <div class="popover-content">\n    <div class="item">\n      <input class="link-text form-control" type="text" placeholder="'+this._t("linkText")+'"/>\n    </div>\n    <div class="item">\n      <textarea class="link-url form-control" type="text" placeholder="'+this._t("linkUrl")+'"></textarea>\n    </div>\n    <div class="item">\n      <button type=\'submit\' class="btn btn-primary btn-confirm disabled">\n        '+this._t("linkUrlSubmit")+"\n      </button>\n    </div>\n  </div>\n</div>",this.el.addClass("link-popover").append(e),this.textEl=this.el.find(".link-text"),this.urlEl=this.el.find(".link-url"),this.unlinkEl=this.el.find(".btn-unlink"),this.selectTarget=this.el.find(".link-target"),this.confirm=this.el.find(".btn-confirm"),this.close=this.el.find(".popover-close-handler"),this.textEl.on("keyup",(n=this,function(t){if(13!==t.which)return n.target.text(n.textEl.val()),n.editor.inputManager.throttledValueChanged(),n.checkButtonStatus()})),this.urlEl.on("keyup",function(t){return function(e){if(13!==e.which)return t.checkButtonStatus()}}(this)),t([this.urlEl[0],this.textEl[0]]).on("keydown",function(e){return function(n){var r;if(13===n.which||27===n.which||!n.shiftKey&&9===n.which&&t(n.target).hasClass("link-url"))return n.preventDefault(),r=document.createRange(),e.editor.selection.setRangeAfter(e.target,r),e.hide(),e.editor.inputManager.throttledValueChanged()}}(this)),this.confirm.on("click",function(t){return function(e){var n;if(13!==e.which){if(!t.confirm.hasClass("disabled"))return n=t.urlEl.val(),!/https?:\/\/|^\//gi.test(n)&&n&&(n="http://"+n),t.checkButtonStatus(),t.target.attr("href",n),t.target.text(t.textEl.val()),t.editor.inputManager.throttledValueChanged(),t.active=!0,t.hide();t.textEl.val()?t.urlEl.trigger("focus"):t.textEl.trigger("focus")}}}(this)),this.close.on("click",function(t){return function(e){var n;switch(t.editor.inputManager.throttledValueChanged(),t.button.popoverStatus){case 1:t.button.node.remove();break;case 2:n=document.createTextNode(t.target.text()),t.target.replaceWith(n)}return t.active=!0,t.hide()}}(this))},n.prototype.checkButtonStatus=function(t,e){return t||(t=this.textEl.val()),e||(e=this.urlEl.val()),!/https?:\/\/|^\//gi.test(e)&&e&&(e="http://"+e),this.confirm[t&&e?"removeClass":"addClass"]("disabled")},n.prototype.show=function(){var t,e;return t=1<=arguments.length?U.call(arguments,0):[],n.__super__.show.apply(this,t),e=this.target.text(),this.textEl.val(e),this.val=this.target.attr("href"),this.urlEl.val(this.val),this.checkButtonStatus(e,this.val),this.active=!1},n}(),E.Toolbar.addButton(k),i=["ani","bmp","cal","fax","gif","img","jbg","jpe","jpeg","jpg","mac","pbm","pcd","pcx","pct","pgm","png","ppm","psd","ras","tga","tiff","wmf"].map(function(t){return"image/"+t}).join(","),m=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.name="image",n.prototype.icon="picture-o",n.prototype.htmlTag="img",n.prototype.disableTag="pre, table",n.prototype.defaultImage="",n.prototype.needFocus=!1,n.prototype._init=function(){var e,r,i,o,s;if(this.editor.opts.imageButton)if(Array.isArray(this.editor.opts.imageButton))for(this.menu=[],r=0,i=(o=this.editor.opts.imageButton).length;r<i;r++)e=o[r],this.menu.push({name:e+"-image",text:this._t(e+"Image")});else this.menu=!1;else null!=this.editor.uploader?this.menu=[{name:"upload-image",text:this._t("uploadImage")},{name:"external-image",text:this._t("externalImage")}]:this.menu=!1;return this.defaultImage=this.editor.opts.defaultImage,this.editor.body.on("click","img:not([data-non-image])",(s=this,function(e){var n,r;return n=t(e.currentTarget),(r=document.createRange()).selectNode(n[0]),s.editor.selection.range(r),s.editor.util.support.onselectionchange||s.editor.trigger("selectionchanged"),!1})),this.editor.body.on("mouseup","img:not([data-non-image])",function(t){return!1}),this.editor.on("selectionchanged.image",function(e){return function(){var n,r,i;if(null!=(i=e.editor.selection.range()))return 1===(n=t(i.cloneContents()).contents()).length&&n.is("img:not([data-non-image])")?(r=t(i.startContainer).contents().eq(i.startOffset),e.popover.show(r)):e.popover.hide()}}(this)),this.editor.on("valuechanged.image",function(e){return function(){var n;if((n=e.editor.wrapper.find(".simditor-image-loading")).length>0)return n.each(function(n,r){var i,o,s;if(!((i=(o=t(r)).data("img"))&&i.parent().length>0)&&(o.remove(),i&&(s=i.data("file"))&&(e.editor.uploader.cancel(s),e.editor.body.find("img.uploading").length<1)))return e.editor.uploader.trigger("uploadready",[s])})}}(this)),n.__super__._init.call(this)},n.prototype.render=function(){var t;if(t=1<=arguments.length?U.call(arguments,0):[],n.__super__.render.apply(this,t),this.popover=new y({button:this}),"upload"===this.editor.opts.imageButton)return this._initUploader(this.el)},n.prototype.renderMenu=function(){return n.__super__.renderMenu.call(this),this._initUploader()},n.prototype._initUploader=function(e){var n,r,o,s;if(null==e&&(e=this.menuEl.find(".menu-item-upload-image")),null!=this.editor.uploader)return n=null,s=this,(r=function(){return n&&n.remove(),n=t("<input/>",{type:"file",title:s._t("uploadImage"),multiple:!0,accept:i}).appendTo(e)})(),e.on("click mousedown","input[type=file]",function(t){return t.stopPropagation()}),e.on("change","input[type=file]",function(t){return function(e){return t.editor.inputManager.focused?(t.editor.uploader.upload(n,{inline:!0}),r()):(t.editor.one("focus",function(e){return t.editor.uploader.upload(n,{inline:!0}),r()}),t.editor.focus()),t.wrapper.removeClass("menu-on")}}(this)),this.editor.uploader.on("beforeupload",function(e){return function(n,r){var i;if(r.inline)return r.img?i=t(r.img):(i=e.createImage(r.name),r.img=i),i.addClass("uploading"),i.data("file",r),e.editor.uploader.readImageFile(r.obj,function(t){var n;if(i.hasClass("uploading"))return n=t?t.src:e.defaultImage,e.loadImage(i,n,function(){if(e.popover.active)return e.popover.refresh(),e.popover.srcEl.val(e._t("uploading")).prop("disabled",!0)})})}}(this)),o=t.proxy(this.editor.util.throttle(function(t,e,n,r){var i,o,s;if(e.inline&&(o=e.img.data("mask"))){if((i=o.data("img")).hasClass("uploading")&&i.parent().length>0)return(s=(100*(s=n/r)).toFixed(0))>99&&(s=99),o.find(".progress").height(100-s+"%");o.remove()}},500),this),this.editor.uploader.on("uploadprogress",o),this.editor.uploader.on("uploadsuccess",function(e){return function(n,r,i){var o,s,a;if(r.inline&&(o=r.img).hasClass("uploading")&&o.parent().length>0){if("object"!=typeof i)try{i=t.parseJSON(i)}catch(l){i={success:!1}}return!1===i.success?(a=i.msg||e._t("uploadFailed"),alert(a),s=e.defaultImage):s=i.file_path,e.loadImage(o,s,function(){var t;if(o.removeData("file"),o.removeClass("uploading").removeClass("loading"),(t=o.data("mask"))&&t.remove(),o.removeData("mask"),e.editor.trigger("valuechanged"),e.editor.body.find("img.uploading").length<1)return e.editor.uploader.trigger("uploadready",[r,i])}),e.popover.active?(e.popover.srcEl.prop("disabled",!1),e.popover.srcEl.val(i.file_path)):void 0}}}(this)),this.editor.uploader.on("uploaderror",function(e){return function(n,r,i){var o,s;if(r.inline&&"abort"!==i.statusText){if(i.responseText)try{(s=t.parseJSON(i.responseText)).msg}catch(a){e._t("uploadError")}if((o=r.img).hasClass("uploading")&&o.parent().length>0)return e.loadImage(o,e.defaultImage,function(){var t;return o.removeData("file"),o.removeClass("uploading").removeClass("loading"),(t=o.data("mask"))&&t.remove(),o.removeData("mask")}),e.popover.active&&(e.popover.srcEl.prop("disabled",!1),e.popover.srcEl.val(e.defaultImage)),e.editor.trigger("valuechanged"),e.editor.body.find("img.uploading").length<1?e.editor.uploader.trigger("uploadready",[r,s]):void 0}}}(this));this.el.find(".btn-upload").remove()},n.prototype._status=function(){return this._disableStatus()},n.prototype.loadImage=function(e,n,r){var i,o,s,a;return a=this,s=function(){var t,n;return t=e.offset(),n=a.editor.wrapper.offset(),i.css({top:t.top-n.top,left:t.left-n.left,width:e.width(),height:e.height()}).show()},e.addClass("loading"),(i=e.data("mask"))||(i=t('<div class="simditor-image-loading">\n  <div class="progress"></div>\n</div>').hide().appendTo(this.editor.wrapper),s(),e.data("mask",i),i.data("img",e)),(o=new Image).onload=function(a){return function(){var l,u;if(e.hasClass("loading")||e.hasClass("uploading"))return u=o.width,l=o.height,e.attr({src:n,width:u,height:l,"data-image-size":u+","+l}).removeClass("loading"),e.hasClass("uploading")?(a.editor.util.reflow(a.editor.body),s()):(i.remove(),e.removeData("mask")),t.isFunction(r)?r(o):void 0}}(this),o.onerror=function(){return t.isFunction(r)&&r(!1),i.remove(),e.removeData("mask").removeClass("loading")},o.src=n},n.prototype.createImage=function(e){var n,r;return null==e&&(e="Image"),this.editor.inputManager.focused||this.editor.focus(),(r=this.editor.selection.range()).deleteContents(),this.editor.selection.range(r),n=t("<img/>").attr("alt",e),r.insertNode(n[0]),this.editor.selection.setRangeAfter(n,r),this.editor.trigger("valuechanged"),n},n.prototype.command=function(t){var e,n;return e=this.createImage(),this.loadImage(e,t||this.defaultImage,(n=this,function(){return n.editor.trigger("valuechanged"),n.editor.util.reflow(e),e.click(),n.popover.one("popovershow",function(){return n.popover.srcEl.focus(),n.popover.srcEl[0].select()})}))},n}(),y=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,A),n.prototype.offset={top:6,left:-4},n.prototype.render=function(){var e,n;return e='<div class="link-settings">\n  <div class="settings-field">\n    <label>'+this._t("imageUrl")+'</label>\n    <input class="image-src" type="text" tabindex="1" />\n    <a class="btn-upload" href="javascript:;"\n      title="'+this._t("uploadImage")+'" tabindex="-1">\n      <span class="simditor-icon simditor-icon-upload"></span>\n    </a>\n  </div>\n  <div class=\'settings-field\'>\n    <label>'+this._t("imageAlt")+'</label>\n    <input class="image-alt" id="image-alt" type="text" tabindex="1" />\n  </div>\n  <div class="settings-field">\n    <label>'+this._t("imageSize")+'</label>\n    <input class="image-size" id="image-width" type="text" tabindex="2" />\n    <span class="times">×</span>\n    <input class="image-size" id="image-height" type="text" tabindex="3" />\n    <a class="btn-restore" href="javascript:;"\n      title="'+this._t("restoreImageSize")+'" tabindex="-1">\n      <span class="simditor-icon simditor-icon-undo"></span>\n    </a>\n  </div>\n</div>',this.el.addClass("image-popover").append(e),this.srcEl=this.el.find(".image-src"),this.widthEl=this.el.find("#image-width"),this.heightEl=this.el.find("#image-height"),this.altEl=this.el.find("#image-alt"),this.srcEl.on("keydown",(n=this,function(t){var e;if(13===t.which&&!n.target.hasClass("uploading"))return t.preventDefault(),e=document.createRange(),n.button.editor.selection.setRangeAfter(n.target,e),n.hide()})),this.srcEl.on("blur",function(t){return function(e){return t._loadImage(t.srcEl.val())}}(this)),this.el.find(".image-size").on("blur",function(e){return function(n){return e._resizeImg(t(n.currentTarget)),e.el.data("popover").refresh()}}(this)),this.el.find(".image-size").on("keyup",function(e){return function(n){var r;if(r=t(n.currentTarget),13!==n.which&&27!==n.which&&9!==n.which)return e._resizeImg(r,!0)}}(this)),this.el.find(".image-size").on("keydown",function(e){return function(n){var r,i,o;return i=t(n.currentTarget),13===n.which||27===n.which?(n.preventDefault(),13===n.which?e._resizeImg(i):e._restoreImg(),r=e.target,e.hide(),o=document.createRange(),e.button.editor.selection.setRangeAfter(r,o)):9===n.which?e.el.data("popover").refresh():void 0}}(this)),this.altEl.on("keydown",function(t){return function(e){var n;if(13===e.which)return e.preventDefault(),n=document.createRange(),t.button.editor.selection.setRangeAfter(t.target,n),t.hide()}}(this)),this.altEl.on("keyup",function(t){return function(e){if(13!==e.which&&27!==e.which&&9!==e.which)return t.alt=t.altEl.val(),t.target.attr("alt",t.alt)}}(this)),this.el.find(".btn-restore").on("click",function(t){return function(e){return t._restoreImg(),t.el.data("popover").refresh()}}(this)),this.editor.on("valuechanged",function(t){return function(e){if(t.active)return t.refresh()}}(this)),this._initUploader()},n.prototype._initUploader=function(){var e,n,r;if(e=this.el.find(".btn-upload"),null!=this.editor.uploader)return r=this,(n=function(){return r.input&&r.input.remove(),r.input=t("<input/>",{type:"file",title:r._t("uploadImage"),multiple:!0,accept:i}).appendTo(e)})(),this.el.on("click mousedown","input[type=file]",function(t){return t.stopPropagation()}),this.el.on("change","input[type=file]",function(t){return function(e){return t.editor.uploader.upload(t.input,{inline:!0,img:t.target}),n()}}(this));e.remove()},n.prototype._resizeImg=function(e,n){var r,i,o;if(null==n&&(n=!1),i=1*e.val(),this.target&&(t.isNumeric(i)||i<0))return e.is(this.widthEl)?(o=i,r=this.height*i/this.width,this.heightEl.val(r)):(r=i,o=this.width*i/this.height,this.widthEl.val(o)),n?void 0:(this.target.attr({width:o,height:r}),this.editor.trigger("valuechanged"))},n.prototype._restoreImg=function(){var t,e;return e=(null!=(t=this.target.data("image-size"))?t.split(","):void 0)||[this.width,this.height],this.target.attr({width:1*e[0],height:1*e[1]}),this.widthEl.val(e[0]),this.heightEl.val(e[1]),this.editor.trigger("valuechanged")},n.prototype._loadImage=function(t,e){var n;if(!/^data:image/.test(t)||this.editor.uploader){if(this.target.attr("src")!==t)return this.button.loadImage(this.target,t,(n=this,function(r){var i;if(r)return n.active&&(n.width=r.width,n.height=r.height,n.widthEl.val(n.width),n.heightEl.val(n.height)),/^data:image/.test(t)?((i=n.editor.util.dataURLtoBlob(t)).name="Base64 Image.png",n.editor.uploader.upload(i,{inline:!0,img:n.target})):n.editor.trigger("valuechanged"),e?e(r):void 0}))}else e&&e(!1)},n.prototype.show=function(){var t,e;return e=1<=arguments.length?U.call(arguments,0):[],n.__super__.show.apply(this,e),t=this.target,this.width=t.width(),this.height=t.height(),this.alt=t.attr("alt"),t.hasClass("uploading")?this.srcEl.val(this._t("uploading")).prop("disabled",!0):(this.srcEl.val(t.attr("src")).prop("disabled",!1),this.widthEl.val(this.width),this.heightEl.val(this.height),this.altEl.val(this.alt))},n}(),E.Toolbar.addButton(m),v=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $(e,l),e.prototype.name="indent",e.prototype.icon="indent",e.prototype._init=function(){var t;return t=!1===this.editor.opts.tabIndent?"":" (Tab)",this.title=this._t(this.name)+t,e.__super__._init.call(this)},e.prototype._status=function(){},e.prototype.command=function(){return this.editor.indentation.indent()},e}(),E.Toolbar.addButton(v),N=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $(e,l),e.prototype.name="outdent",e.prototype.icon="outdent",e.prototype._init=function(){var t;return t=!1===this.editor.opts.tabIndent?"":" (Shift + Tab)",this.title=this._t(this.name)+t,e.__super__._init.call(this)},e.prototype._status=function(){},e.prototype.command=function(){return this.editor.indentation.indent(!0)},e}(),E.Toolbar.addButton(N),g=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.name="hr",n.prototype.icon="minus",n.prototype.htmlTag="hr",n.prototype._status=function(){},n.prototype.command=function(){var e,n,r;return(r=this.editor.selection.rootNodes().first()).next().length>0?this.editor.selection.save():n=t("<p/>").append(this.editor.util.phBr),e=t("<hr/>").insertAfter(r),n?(n.insertAfter(e),this.editor.selection.setRangeAtStartOf(n)):this.editor.selection.restore(),this.editor.trigger("valuechanged")},n}(),E.Toolbar.addButton(g),B=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.name="table",n.prototype.icon="table",n.prototype.htmlTag="table",n.prototype.disableTag="pre, li, blockquote",n.prototype.menu=!0,n.prototype._init=function(){var e;return n.__super__._init.call(this),t.merge(this.editor.formatter._allowedTags,["thead","th","tbody","tr","td","colgroup","col"]),t.extend(this.editor.formatter._allowedAttributes,{td:["rowspan","colspan"],col:["width"]}),t.extend(this.editor.formatter._allowedStyles,{td:["text-align"],th:["text-align"]}),this._initShortcuts(),this.editor.on("decorate",(e=this,function(n,r){return r.find("table").each(function(n,r){return e.decorate(t(r))})})),this.editor.on("undecorate",function(e){return function(n,r){return r.find("table").each(function(n,r){return e.undecorate(t(r))})}}(this)),this.editor.on("selectionchanged.table",function(t){return function(e){var n,r;if(t.editor.body.find(".simditor-table td, .simditor-table th").removeClass("active"),r=t.editor.selection.range())return n=t.editor.selection.containerNode(),r.collapsed&&n.is(".simditor-table")&&(n=t.editor.selection.rangeAtStartOf(n)?n.find("th:first"):n.find("td:last"),t.editor.selection.setRangeAtEndOf(n)),n.closest("td, th",t.editor.body).addClass("active")}}(this)),this.editor.on("blur.table",function(t){return function(e){return t.editor.body.find(".simditor-table td, .simditor-table th").removeClass("active")}}(this)),this.editor.keystroke.add("up","td",function(t){return function(e,n){return t._tdNav(n,"up"),!0}}(this)),this.editor.keystroke.add("up","th",function(t){return function(e,n){return t._tdNav(n,"up"),!0}}(this)),this.editor.keystroke.add("down","td",function(t){return function(e,n){return t._tdNav(n,"down"),!0}}(this)),this.editor.keystroke.add("down","th",function(t){return function(e,n){return t._tdNav(n,"down"),!0}}(this))},n.prototype._tdNav=function(t,e){var n,r,i,o;return null==e&&(e="up"),i="up"===e?"prev":"next",r=t.parent("tr"),!((n=this["_"+i+"Row"](r)).length>0)||(o=r.find("td, th").index(t),this.editor.selection.setRangeAtEndOf(n.find("td, th").eq(o)))},n.prototype._nextRow=function(t){var e;return(e=t.next("tr")).length<1&&t.parent("thead").length>0&&(e=t.parent("thead").next("tbody").find("tr:first")),e},n.prototype._prevRow=function(t){var e;return(e=t.prev("tr")).length<1&&t.parent("tbody").length>0&&(e=t.parent("tbody").prev("thead").find("tr")),e},n.prototype.initResize=function(e){var n,r,i;return i=e.parent(".simditor-table"),(n=e.find("colgroup")).length<1&&(n=t("<colgroup/>").prependTo(e),e.find("thead tr th").each(function(e,r){return t("<col/>").appendTo(n)}),this.refreshTableWidth(e)),r=t("<div />",{class:"simditor-resize-handle",contenteditable:"false"}).appendTo(i),i.on("mousemove","td, th",function(e){var o,s,a,l,u;if(!i.hasClass("resizing"))if(s=t(e.currentTarget),e.pageX-t(e.currentTarget).offset().left<5&&s.prev().length>0&&(s=s.prev()),s.next("td, th").length<1)r.hide();else if(null!=(l=r.data("td"))&&l.is(s))r.show();else{if(a=s.parent().find("td, th").index(s),o=n.find("col").eq(a),null==(u=r.data("col"))||!u.is(o))return r.css("left",s.position().left+s.outerWidth()-5).data("td",s).data("col",o).show();r.show()}}),i.on("mouseleave",function(t){return r.hide()}),i.on("mousedown",".simditor-resize-handle",function(e){var n,r,o,s,a,l,u,c,d,p;return o=(n=t(e.currentTarget)).data("td"),r=n.data("col"),a=o.next("td, th"),s=r.next("col"),d=e.pageX,u=1*o.outerWidth(),c=1*a.outerWidth(),l=parseFloat(n.css("left")),p=o.closest("table").width(),t(document).on("mousemove.simditor-resize-table",function(t){var e,i,o;return e=t.pageX-d,o=c-e,(i=u+e)<50?(i=50,o=c-(e=50-u)):o<50&&(o=50,i=u+(e=c-50)),r.attr("width",i/p*100+"%"),s.attr("width",o/p*100+"%"),n.css("left",l+e)}),t(document).one("mouseup.simditor-resize-table",function(e){return t(document).off(".simditor-resize-table"),i.removeClass("resizing")}),i.addClass("resizing"),!1})},n.prototype._initShortcuts=function(){var t;return this.editor.hotkeys.add("ctrl+alt+up",(t=this,function(e){return t.editMenu.find(".menu-item[data-param=insertRowAbove]").click(),!1})),this.editor.hotkeys.add("ctrl+alt+down",function(t){return function(e){return t.editMenu.find(".menu-item[data-param=insertRowBelow]").click(),!1}}(this)),this.editor.hotkeys.add("ctrl+alt+left",function(t){return function(e){return t.editMenu.find(".menu-item[data-param=insertColLeft]").click(),!1}}(this)),this.editor.hotkeys.add("ctrl+alt+right",function(t){return function(e){return t.editMenu.find(".menu-item[data-param=insertColRight]").click(),!1}}(this))},n.prototype.decorate=function(e){var n,r,i;return e.parent(".simditor-table").length>0&&this.undecorate(e),e.wrap('<div class="simditor-table"></div>'),e.find("thead").length<1&&(i=t("<thead />"),n=e.find("tr").first(),i.append(n),this._changeCellTag(n,"th"),(r=e.find("tbody")).length>0?r.before(i):e.prepend(i)),this.initResize(e),e.parent()},n.prototype.undecorate=function(t){if(t.parent(".simditor-table").length>0)return t.parent().replaceWith(t)},n.prototype.renderMenu=function(){var e,n;return t('<div class="menu-create-table">\n</div>\n<div class="menu-edit-table">\n  <ul>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        data-param="deleteRow">\n        <span>'+this._t("deleteRow")+'</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        data-param="insertRowAbove">\n        <span>'+this._t("insertRowAbove")+' ( Ctrl + Alt + ↑ )</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        data-param="insertRowBelow">\n        <span>'+this._t("insertRowBelow")+' ( Ctrl + Alt + ↓ )</span>\n      </a>\n    </li>\n    <li><span class="separator"></span></li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        data-param="deleteCol">\n        <span>'+this._t("deleteColumn")+'</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        data-param="insertColLeft">\n        <span>'+this._t("insertColumnLeft")+' ( Ctrl + Alt + ← )</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        data-param="insertColRight">\n        <span>'+this._t("insertColumnRight")+' ( Ctrl + Alt + → )</span>\n      </a>\n    </li>\n    <li><span class="separator"></span></li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        data-param="deleteTable">\n        <span>'+this._t("deleteTable")+"</span>\n      </a>\n    </li>\n  </ul>\n</div>").appendTo(this.menuWrapper),this.createMenu=this.menuWrapper.find(".menu-create-table"),this.editMenu=this.menuWrapper.find(".menu-edit-table"),e=this.createTable(6,6).appendTo(this.createMenu),this.createMenu.on("mouseenter","td, th",(n=this,function(r){var i,o,s,a;return n.createMenu.find("td, th").removeClass("selected"),a=(o=(i=t(r.currentTarget)).parent()).find("td, th").index(i)+1,s=o.prevAll("tr").addBack(),o.parent().is("tbody")&&(s=s.add(e.find("thead tr"))),s.find("td:lt("+a+"), th:lt("+a+")").addClass("selected")})),this.createMenu.on("mouseleave",function(e){return t(e.currentTarget).find("td, th").removeClass("selected")}),this.createMenu.on("mousedown","td, th",function(n){return function(r){var i,o,s,a,l;if(n.wrapper.removeClass("menu-on"),n.editor.inputManager.focused)return a=(s=(o=t(r.currentTarget)).parent()).find("td").index(o)+1,l=s.prevAll("tr").length+1,s.parent().is("tbody")&&(l+=1),e=n.createTable(l,a,!0),i=n.editor.selection.blockNodes().last(),n.editor.util.isEmptyNode(i)?i.replaceWith(e):i.after(e),n.decorate(e),n.editor.selection.setRangeAtStartOf(e.find("th:first")),n.editor.trigger("valuechanged"),!1}}(this))},n.prototype.createTable=function(e,n,r){var i,o,s,a,l,u,c,d,p,h;for(i=t("<table/>"),a=t("<thead/>").appendTo(i),o=t("<tbody/>").appendTo(i),d=u=0,p=e;0<=p?u<p:u>p;d=0<=p?++u:--u)for((l=t("<tr/>")).appendTo(0===d?a:o),c=0,h=n;0<=h?c<h:c>h;0<=h?++c:--c)s=t(0===d?"<th/>":"<td/>").appendTo(l),r&&s.append(this.editor.util.phBr);return i},n.prototype.refreshTableWidth=function(e){var n,r;return r=e.width(),n=e.find("col"),e.find("thead tr th").each(function(e,i){return n.eq(e).attr("width",t(i).outerWidth()/r*100+"%")})},n.prototype.setActive=function(t){return n.__super__.setActive.call(this,t),t?(this.createMenu.hide(),this.editMenu.show()):(this.createMenu.show(),this.editMenu.hide())},n.prototype._changeCellTag=function(e,n){return e.find("td, th").each(function(e,r){var i;return(i=t(r)).replaceWith("<"+n+">"+i.html()+"</"+n+">")})},n.prototype.deleteRow=function(t){var e,n,r;return(n=t.parent("tr")).closest("table").find("tr").length<1?this.deleteTable(t):((e=this._nextRow(n)).length>0||(e=this._prevRow(n)),r=n.find("td, th").index(t),n.parent().is("thead")&&(e.appendTo(n.parent()),this._changeCellTag(e,"th")),n.remove(),this.editor.selection.setRangeAtEndOf(e.find("td, th").eq(r)))},n.prototype.insertRow=function(e,n){var r,i,o,s,a,l,u,c;for(null==n&&(n="after"),i=(o=e.parent("tr")).closest("table"),a=0,i.find("tr").each(function(e,n){return a=Math.max(a,t(n).find("td").length)}),l=o.find("td, th").index(e),r=t("<tr/>"),s="td","after"===n&&o.parent().is("thead")?o.parent().next("tbody").prepend(r):"before"===n&&o.parent().is("thead")?(o.before(r),o.parent().next("tbody").prepend(o),this._changeCellTag(o,"td"),s="th"):o[n](r),u=1,c=a;1<=c?u<=c:u>=c;1<=c?++u:--u)t("<"+s+"/>").append(this.editor.util.phBr).appendTo(r);return this.editor.selection.setRangeAtStartOf(r.find("td, th").eq(l))},n.prototype.deleteCol=function(e){var n,r,i,o,s,a;return a=(i=e.parent("tr")).closest("table").find("tr").length<2,s=e.siblings("td, th").length<1,a&&s?this.deleteTable(e):(o=i.find("td, th").index(e),(n=e.next("td, th")).length>0||(n=i.prev("td, th")),(r=i.closest("table")).find("col").eq(o).remove(),r.find("tr").each(function(e,n){return t(n).find("td, th").eq(o).remove()}),this.refreshTableWidth(r),this.editor.selection.setRangeAtEndOf(n))},n.prototype.insertCol=function(e,n){var r,i,o,s,a,l,u,c,d;return null==n&&(n="after"),a=e.parent("tr"),l=a.find("td, th").index(e),r=(s=e.closest("table")).find("col").eq(l),s.find("tr").each((d=this,function(e,r){var i,o;return o=t(r).parent().is("thead")?"th":"td",i=t("<"+o+"/>").append(d.editor.util.phBr),t(r).find("td, th").eq(l)[n](i)})),i=t("<col/>"),r[n](i),u=s.width(),c=Math.max(parseFloat(r.attr("width"))/2,50/u*100),r.attr("width",c+"%"),i.attr("width",c+"%"),this.refreshTableWidth(s),o="after"===n?e.next("td, th"):e.prev("td, th"),this.editor.selection.setRangeAtStartOf(o)},n.prototype.deleteTable=function(t){var e,n;if(e=(n=t.closest(".simditor-table")).next("p"),n.remove(),e.length>0)return this.editor.selection.setRangeAtStartOf(e)},n.prototype.command=function(t){var e;if((e=this.editor.selection.containerNode().closest("td, th")).length>0){if("deleteRow"===t)this.deleteRow(e);else if("insertRowAbove"===t)this.insertRow(e,"before");else if("insertRowBelow"===t)this.insertRow(e);else if("deleteCol"===t)this.deleteCol(e);else if("insertColLeft"===t)this.insertCol(e,"before");else if("insertColRight"===t)this.insertCol(e);else{if("deleteTable"!==t)return;this.deleteTable(e)}return this.editor.trigger("valuechanged")}},n}(),E.Toolbar.addButton(B),D=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $(e,m),e.prototype.name="upload",e.prototype.icon="upload",e.prototype.insertImage=function(t,e){var n,r;return n=this.createImage(e),this.loadImage(n,t,(r=this,function(){return r.editor.trigger("valuechanged"),r.editor.util.reflow(n),r.popover.one("popovershow",function(){return r.popover.srcEl.focus(),r.popover.srcEl[0].select()})})),n},e.prototype.command=function(){return this.editor.trigger("uploadclick")},e}(),E.Toolbar.addButton(D),O=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return $(n,l),n.prototype.name="strikethrough",n.prototype.icon="strikethrough",n.prototype.htmlTag="strike",n.prototype.disableTag="pre",n.prototype._activeStatus=function(){var t;return t=!0===document.queryCommandState("strikethrough"),this.setActive(t),this.active},n.prototype.command=function(){return document.execCommand("strikethrough"),this.editor.util.support.oninput||this.editor.trigger("valuechanged"),t(document).trigger("selectionchange")},n}(),E.Toolbar.addButton(O),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $(e,l),e.prototype.name="alignment",e.prototype.icon="align-left",e.prototype.htmlTag="p, h1, h2, h3, h4, td, th",e.prototype._init=function(){return this.menu=[{name:"left",text:this._t("alignLeft"),icon:"align-left",param:"left"},{name:"center",text:this._t("alignCenter"),icon:"align-center",param:"center"},{name:"right",text:this._t("alignRight"),icon:"align-right",param:"right"}],e.__super__._init.call(this)},e.prototype.setActive=function(t,n){return null==n&&(n="left"),"left"!==n&&"center"!==n&&"right"!==n&&(n="left"),"left"===n?e.__super__.setActive.call(this,!1):e.__super__.setActive.call(this,t),this.el.removeClass("align-left align-center align-right"),t&&this.el.addClass("align-"+n),this.setIcon("align-"+n),this.menuEl.find(".menu-item").show().end().find(".menu-item-"+n).hide()},e.prototype._status=function(){return this.nodes=this.editor.selection.nodes().filter(this.htmlTag),this.nodes.length<1?(this.setDisabled(!0),this.setActive(!1)):(this.setDisabled(!1),this.setActive(!0,this.nodes.first().css("text-align")))},e.prototype.command=function(t){if("left"!==t&&"center"!==t&&"right"!==t)throw new Error("simditor alignment button: invalid align "+t);return this.nodes.css({"text-align":"left"===t?"":t}),this.editor.trigger("valuechanged"),this.editor.inputManager.throttledSelectionChanged()},e}(),E.Toolbar.addButton(o),E}(t,e,n,r)}.apply(e,r))||(t.exports=i)},kzw1iLML:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasOwn=function(t,e){return t.hasOwnProperty(e)}},mrSGxOB2:function(t,e,n){"use strict";n.d(e,"d",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"g",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"b",function(){return l}),n.d(e,"e",function(){return u}),n.d(e,"i",function(){return c}),n.d(e,"f",function(){return d}),n.d(e,"h",function(){return p});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}l((r=r.apply(t,e||[])).next())})}function u(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function c(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}},nOvPRzgI:function(t,e,n){"use strict";n.r(e),n.d(e,"resolveFetch",function(){return s}),n.d(e,"resolveFetchOne",function(){return a});var r=n("mrSGxOB2"),i=function(t,e){return function(n,r,i){if("function"==typeof t){var o=t(n,r,i);e(null!=o?o:n)}else e(n)}},o=function(t,e){return function(n,r,i){"function"==typeof t&&t(n,r,i),e(r)}},s=function(t,e,n){void 0===n&&(n={});var s=n.success,a=n.error,l=r.g(n,["success","error"]);return new Promise(function(n,u){t.fetch(e,r.a({},l,{success:i(s,n),error:o(a,u)}))})},a=function(t,e,n,s){void 0===s&&(s={});var a=s.success,l=s.error,u=r.g(s,["success","error"]);return new Promise(function(s,c){t.fetchOne(e,n,r.a({},u,{success:i(a,s),error:o(l,c)}))})}},p7PDwGED:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("GaSbzOnp"),i=n("WdnSUq9g"),o=function(){function t(t){this.entities=t,this.ctxgen=function(){return!0}}return t.prototype.context=function(t){return this.ctxgen=t,this},t.prototype.keys=function(t){switch(typeof t){case"string":case"boolean":case"number":case"undefined":return[];default:return t instanceof Date?[]:t&&"function"==typeof t.keys?Array.from(t.keys()):"object"==typeof t&&null!==t||Array.isArray(t)?Object.keys(t):[]}},t.prototype.forEach=function(t){var e=this,n=-1;!function o(s,a,l){void 0===a&&(a=[]),void 0===l&&(l=[]);var u=!0,c=e.keys(s),d=l[l.length-1];n++;var p={isRoot:0===a.length,node:s,path:a,parent:d,children:c,key:a[a.length-1],isLeaf:0===c.length,type:function(){return i.getType(s)},skip:function(){return u=!1},index:n},h=e.ctxgen(a[a.length-1],s,p);if(!1!==h){var f="object"==typeof h?r.__assign({},p,h):p;t.call(null,f,s)}u&&(p.isLeaf||i.forEach(s,function(t,e){o(t,a.concat(e),Array.isArray(s)?l.concat([s]):l.concat(s))}))}(this.entities)},t}();e.Traversable=o},rA5Lr6AX:function(t,e,n){"use strict";var r,i;function o(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var n=Array.isArray(t),r=Array.isArray(e);if(n&&r){var i=t.length;if(i!=e.length)return!1;for(var s=i;0!=s--;)if(!o(t[s],e[s]))return!1;return!0}if(n!==r)return!1;var a=t instanceof Date,l=e instanceof Date;if(a!=l)return!1;if(a&&l)return t.getTime()==e.getTime();var u=Object.keys(t),c=u.length;if(c!==Object.keys(e).length)return!1;for(var d=c;0!=d--;)if(!e.hasOwnProperty(u[d]))return!1;for(var p=c;0!=p--;){var h=u[p];if(!o(t[h],e[h]))return!1}return!0}return t!=t&&e!=e}Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Reuse=0]="Reuse",t[t.New=1]="New"}(r=e.OpType||(e.OpType={})),function(t){t[t.Error=0]="Error",t[t.Success=1]="Success",t[t.ShouldSkip=2]="ShouldSkip"}(i=e.OpsType||(e.OpsType={})),e.patch=function(t,e,n){return e.length?n.map(function(n,i){var o=t[i];return o.type===r.Reuse?e[o.index]:n}):n},e.getPatchResult=function(t,n,r){switch(r.type){case i.Error:return n;case i.ShouldSkip:return t;case i.Success:default:return e.patch(r.ops,t,n)}},e.diff=function(t,e,n){void 0===n&&(n="_id");var s=t,a=e;if(!Array.isArray(s)||!Array.isArray(a))return{type:i.Error,ops:[],message:"cannot compare non-list object"};for(var l={},u=0;u<s.length;u++){var c=s[u][n];if(void 0===c)return{type:i.Error,ops:[],message:"cannot find pk: "+n+" at prev."+u};l[c]=u}for(var d=[],p=0,h=0;h<a.length;h++){var f=a[h][n];if(void 0===f)return{type:i.Error,ops:[],message:"cannot find pk: "+n+" at curr."+h};var g=l[f];if(void 0!==g){var m=o(a[h],s[g]),y=m?{type:r.Reuse,index:g}:{type:r.New,index:h};g===h&&m&&p++,d.push(y)}else d.push({type:r.New,index:h})}return{type:p===a.length&&s.length===a.length?i.ShouldSkip:i.Success,ops:d}}},wyAJ1ByA:function(t,e,n){var r,i,o;o=this,r=[n("+2RfZ2TT"),n("NRn693yR")],void 0===(i=function(t,e){return o.hotkeys=function(t,e){var n,r={}.hasOwnProperty;return n=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,e),i.count=0,i.keyNameMap={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",91:"Meta",93:"Meta",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"Multiply",107:"Add",109:"Subtract",110:"Decimal",111:"Divide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",59:";",61:"=",186:";",187:"=",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i.aliases={escape:"esc",delete:"del",return:"enter",ctrl:"control",space:"spacebar",ins:"insert",cmd:"meta",command:"meta",wins:"meta",windows:"meta"},i.normalize=function(t){var e,n,r,i,o,s;for(e=n=0,s=(o=t.toLowerCase().replace(/\s+/gi,"").split("+")).length;n<s;e=++n)r=o[e],o[e]=this.aliases[r]||r;return i=o.pop(),o.sort().push(i),o.join("_")},i.prototype.opts={el:document},i.prototype._init=function(){return this.id=++this.constructor.count,this._map={},this._delegate="string"==typeof this.opts.el?document:this.opts.el,t(this._delegate).on("keydown.simple-hotkeys-"+this.id,this.opts.el,(e=this,function(t){var n;return null!=(n=e._getHander(t))?n.call(e,t):void 0}));var e},i.prototype._getHander=function(t){var e,n;if(e=this.constructor.keyNameMap[t.which])return n="",t.altKey&&(n+="alt_"),t.ctrlKey&&(n+="control_"),t.metaKey&&(n+="meta_"),t.shiftKey&&(n+="shift_"),n+=e.toLowerCase(),this._map[n]},i.prototype.respondTo=function(t){return"string"==typeof t?null!=this._map[this.constructor.normalize(t)]:null!=this._getHander(t)},i.prototype.add=function(t,e){return this._map[this.constructor.normalize(t)]=e,this},i.prototype.remove=function(t){return delete this._map[this.constructor.normalize(t)],this},i.prototype.destroy=function(){return t(this._delegate).off(".simple-hotkeys-"+this.id),this._map={},this},i}(),function(t){return new n(t)}}(t,e)}.apply(e,r))||(t.exports=i)},xSYwAM7J:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.noop=function(){}},yiO17FlF:function(t,e,n){var r,i,o,s,a,l,u,c,d,p,h,f,g,m,y,v,b;y=n("dahkxBq4"),s=n("a+N5u/Cl"),r=n("q1z7EYOi"),o=n("4c1CS0b3").Observable,g=n("nOvPRzgI").resolveFetch,i={matrix:{},models:{},modelsT:{},models$:{},subscribes:{},collections:{},collections$:{},collectionsT:{}},m=y(),v=function(t,e,n){var r,o;for(r in i.subscribes[t])(o=i.matrix[r])&&o.trigger("subscribe:"+t+":"+e,n)},f=function(t,e,n){var r;return(r=p(t,e,n))||(r=i.models[e]=new t({_id:e},n)),r},p=function(t,e,n){var r;return(r=i.models[e])&&(r.get("_id")===e?r=r.clone(!0):(r=null,delete i.models[e])),!r&&i.matrix[e]&&(r=i.models[e]=new t(i.matrix[e].toJSON(),n)),r},u=function(t,e,n){var r;return n||(n={}),(r=p(t,e,n))?("function"==typeof n.success&&n.success(r),r):((r=i.models[e]=new t({_id:e},n)).fetch(n),r)},c=function(t,e,n){var r,s,a;return null==n&&(n={}),null==e?o.of(void 0):((s=(r=i.models$)[a=t.prototype.name]||(r[a]={}))[e]||(s[e]=o.create(function(r){return n.error=function(t,e){return r.error(e)},n.success=function(t){return r.next(t),r.complete(),delete s[e]},u(t,e,n)}).shareReplay(1)),s[e])},h=function(t,e,n,r){var o,s,a,l;return r||(r={}),e||(e=0),(s=d(t,e))||(l=t.prototype.name,(o=i.collections)[l]||(o[l]={}),r._boundToObjectId=e,s=i.collections[l][e]=new t([],r)),n&&s?((a=s.get(n))||(a=f(s.model,n)),a):s},d=function(t,e,n){var r,o,s;return e||(e=0),o=t.prototype.name,r=null!=(s=i.collections[o])?s[e]:void 0,n&&r?r.get(n):r},a=function(t,e,n,r){var o,s;return r||(r={}),e||(e=0),o=h(t,e,null,r),n?(!(s=o.get(n))&&i.matrix[n]&&(s=o.add(i.matrix[n].toJSON())),s?"function"==typeof r.success&&r.success(s):o.fetchOne(n,r),s):(o.synced?"function"==typeof r.success&&r.success(o):o.fetch(r),o)},l=function(t,e,n){var r,s,l;return null==n&&(n={}),(s=(r=i.collections$)[l=t.prototype.name]||(r[l]={}))[e]||(s[e]=o.create(function(r){return n.error=function(t,e){return r.error(e)},n.success=function(t){return r.next(t),r.complete(),delete s[e]},a(t,e,null,n)}).shareReplay(1)),s[e]},b={getData:function(){return i},bindToModel:function(t){return t.get=function(t,e){return f(this,t,e)},t.find=function(t){return p(this,t)},t.fetch=function(t,e){return u(this,t,e)},t.fetch$=function(t,e){return null==e&&(e={}),c(this,t,e)},t.resolveFetch=function(t,e){return g(this,t,e)},t.fetchT=function(t,e){var n;return i.modelsT[t]||(i.modelsT[t]=m.persist((n=this,function(r){return e||(e={}),e.success=function(t){return r(null,t)},e.error=function(t,e){return r(e)},n.fetch(t,e)}))),i.modelsT[t]},t.prototype.subscribeTo=function(t,e,n){var r,o,s;return t&&e?(s=i.matrix[this.id])?((r=i.subscribes)[t]||(r[t]={}),i.subscribes[t][this.id]=!0,this._subscribeEvents||(this._subscribeEvents={}),o="subscribe:"+t+":"+e,this._subscribeEvents[o]||(this._subscribeEvents[o]=!0,this.listenTo(s,o,n)),this):console.warn("matrixModel of id:"+this.id+" is not found"):this},t},resetCollections:function(){var t,e,n,r;for(e in t=i.collections)for(n in r=t[e])r[n].synced=!1;return this},bindToCollection:function(t){return t.get=function(t,e){return h(this,t,null,e)},t.getOne=function(t,e,n){return h(this,t,e,n)},t.find=function(t){return d(this,t)},t.findOne=function(t,e){return d(this,t,e)},t.fetch=function(t,e){return a(this,t,null,e)},t.fetch$=function(t,e){return l(this,t,e)},t.resolveFetch=function(t,e){return g(this,t,e)},t.fetchT=function(t,e){var n;return i.collectionsT[t]||(i.collectionsT[t]=m.persist((n=this,function(r){return e||(e={}),e.success=function(t){return r(null,t)},e.error=function(t,e){return r(e)},n.fetch(t,e)}))),i.collectionsT[t]},t.fetchOne=function(t,e,n){return a(this,t,e,n)},t.fetchOneT=function(t,e,n){var r;return i.modelsT[e]||(i.modelsT[e]=m.persist((r=this,function(i){return n||(n={}),n.success=function(t){return i(null,t)},n.error=function(t,e){return i(e)},r.fetchOne(t,e,n)}))),i.modelsT[e]},t},bindByMatrix:function(t){var e,n,o;if(null!=t.id)return e=t.id,o=t.name,i.matrix[e]||(i.matrix[e]=new r.Model,o&&b.trigger(":new:"+o,t)),n=i.matrix[e],t.get("updated")&&n.get("updated")&&new Date(t.get("updated"))<new Date(n.get("updated"))?t.set(n.toJSON()):n.set(t.toJSON()),t.on("destroy",function(t,r,s){if((null!=s?s.triggerByMatrix:void 0)!==n.cid)return n.trigger("destroy"),v(e,"destroy",e),b.trigger(":destroy:"+e,t),o&&b.trigger(":destroy:"+o,t),delete i.matrix[e],delete i.models[e],delete i.subscribes[e]}),t.listenTo(n,"destroy",function(){return this.trigger("destroy",this,this.collection,{triggerByMatrix:n.cid})}),t.on("change",function(t,r){if((null!=r?r.triggerByMatrix:void 0)!==n.cid)return n.set(t.toJSON()),v(e,"change",t),b.trigger(":change:"+e,t),o?b.trigger(":change:"+o,t):void 0}),t.listenTo(n,"change",function(t,e){return this.set(n.toJSON(),{triggerByMatrix:n.cid})})}},s.extend(b,r.Events),t.exports=b},zohQovrk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.option=function(t,e){return t||e}}}]);
//# sourceMappingURL=semiannually.a67fc448.chunk.js.map